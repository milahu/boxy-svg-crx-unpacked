System.registerModule("classes/artboard-helpers",[],function(){"use strict";var t=System.get("utils/dom").createSVGLength,e=Number.parseFloat,n={
1:"none",2:"xMinYMin",3:"xMidYMin",4:"xMaxYMin",5:"xMinYMid",6:"xMidYMid",7:"xMaxYMid",
8:"xMinYMax",9:"xMidYMax",10:"xMaxYMax"},i={none:1,xMinYMin:2,xMidYMin:3,xMaxYMin:4,
xMinYMid:5,xMidYMid:6,xMaxYMid:7,xMinYMax:8,xMidYMax:9,xMaxYMax:10},r={meet:1,slice:2
},a=function(t){return t.trim().split(/[\s+,]+/)},s=function(){function t(t){this._artboard=t;
}return $traceurRuntime.createClass(t,{get x(){return this._artboard.hasAttribute("viewBox")?e(a(this._artboard.getAttribute("viewBox"))[0]):0;
},set x(t){var e,n;if(this._artboard.hasAttribute("viewBox")){var i=a(this._artboard.getAttribute("viewBox")),r=(e=i[Symbol.iterator](),
(n=e.next()).done?void 0:n.value,(n=e.next()).done?void 0:n.value),s=(n=e.next()).done?void 0:n.value,o=(n=e.next()).done?void 0:n.value;
this._artboard.setAttribute("viewBox",t+" "+r+" "+s+" "+o)}else this._artboard.setAttribute("viewBox",t+" 0 0 0");
},get y(){return this._artboard.hasAttribute("viewBox")?e(a(this._artboard.getAttribute("viewBox"))[1]):0;
},set y(t){var e,n;if(this._artboard.hasAttribute("viewBox")){var i=a(this._artboard.getAttribute("viewBox")),r=(e=i[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),s=((n=e.next()).done?void 0:n.value,(n=e.next()).done?void 0:n.value),o=(n=e.next()).done?void 0:n.value;
this._artboard.setAttribute("viewBox",r+" "+t+" "+s+" "+o)}else this._artboard.setAttribute("viewBox","0 "+t+" 0 0");
},get width(){return this._artboard.hasAttribute("viewBox")?e(a(this._artboard.getAttribute("viewBox"))[2]):0;
},set width(t){var e,n;if(this._artboard.hasAttribute("viewBox")){var i=a(this._artboard.getAttribute("viewBox")),r=(e=i[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),s=(n=e.next()).done?void 0:n.value,o=((n=e.next()).done?void 0:n.value,
(n=e.next()).done?void 0:n.value);this._artboard.setAttribute("viewBox",r+" "+s+" "+t+" "+o);
}else this._artboard.setAttribute("viewBox","0 0 "+t+" 0")},get height(){return this._artboard.hasAttribute("viewBox")?e(a(this._artboard.getAttribute("viewBox"))[3]):0;
},set height(t){var e,n;if(this._artboard.hasAttribute("viewBox")){var i=a(this._artboard.getAttribute("viewBox")),r=(e=i[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),s=(n=e.next()).done?void 0:n.value,o=(n=e.next()).done?void 0:n.value;
(n=e.next()).done?void 0:n.value;this._artboard.setAttribute("viewBox",r+" "+s+" "+o+" "+t);
}else this._artboard.setAttribute("viewBox","0 0 0 "+t)}},{})}(),o=function(){function t(t){
this._artboard=t}return $traceurRuntime.createClass(t,{get align(){if(this._artboard.hasAttribute("preserveAspectRatio")){
var t=a(this._artboard.getAttribute("preserveAspectRatio"))[0];return i[t]||i.xMidYMid;
}return i.xMidYMid},set align(t){var e=n[t]||"xMidYMid";this.meetOrSlice===r.slice&&(e+=" slice"),
this._artboard.setAttribute("preserveAspectRatio",e)},get meetOrSlice(){if(this._artboard.hasAttribute("preserveAspectRatio")){
var t=a(this._artboard.getAttribute("preserveAspectRatio"))[1];return r[t]||r.meet;
}return r.meet},set meetOrSlice(t){var e=n[this.align];t===r.slice&&(e+=" slice"),
this._artboard.setAttribute("preserveAspectRatio",e)}},{})}(),l=function(){function e(t,e){
this._ownerElement=t,this._attributeName=e}return $traceurRuntime.createClass(e,{
get unitType(){var e=t();return this._ownerElement.hasAttribute(this._attributeName)&&(e.valueAsString=this._ownerElement.getAttribute(this._attributeName)),
e.unitType},set unitType(t){throw new Error("unitType property is read-only")},get value(){
var e=t();return this._ownerElement.hasAttribute(this._attributeName)&&(e.valueAsString=this._ownerElement.getAttribute(this._attributeName)),
e.value},set value(e){var n=t();this._ownerElement.hasAttribute(this._attributeName)&&(n.valueAsString=this._ownerElement.getAttribute(this._attributeName)),
n.value=e,this._ownerElement.setAttribute(this._attributeName,n.valueAsString)},get valueInSpecifiedUnits(){
var e=t();return this._ownerElement.hasAttribute(this._attributeName)&&(e.valueAsString=this._ownerElement.getAttribute(this._attributeName)),
e.valueInSpecifiedUnits},set valueInSpecifiedUnits(e){var n=t();this._ownerElement.hasAttribute(this._attributeName)&&(n.valueAsString=this._ownerElement.getAttribute(this._attributeName)),
n.valueInSpecifiedUnits=e,this._ownerElement.setAttribute(this._attributeName,n.valueAsString);
},get valueAsString(){var e=t();return this._ownerElement.hasAttribute(this._attributeName)&&(e.valueAsString=this._ownerElement.getAttribute(this._attributeName)),
e.valueAsString},set valueAsString(t){this._ownerElement.setAttribute(this._attributeName,t);
}},{})}();return{get BXViewBox(){return s},get BXPreserveAspectRatio(){return o},
get BXLength(){return l}}}),System.registerModule("classes/bridge",[],function(){
"use strict";var t=function(){function t(){var t=this;this._counter=0,this._requestCallbacks={},
this._responseCallbacks={},this._postMessageCache=[],this._masterWindow=null,this._masterOrigin=null,
window.addEventListener("message",function(e){return t._onMessage(e)})}return $traceurRuntime.createClass(t,{
postMessage:function(t){var e=void 0!==arguments[1]?arguments[1]:null,n=void 0!==arguments[2]?arguments[2]:null,i=this,r=function(){
var r=i._counter++,a="request",s={channel:a,id:r,name:t,arg:e};n&&(i._responseCallbacks[s.id]=n),
i._masterWindow.postMessage(s,i._masterOrigin)};this._masterWindow&&this._masterOrigin?r():this._postMessageCache.push(r);
},addMessageListener:function(t,e){this._requestCallbacks[t]||(this._requestCallbacks[t]=[]),
this._requestCallbacks[t].push(e)},removeMessageListener:function(t,e){this._requestCallbacks[t]&&(this._requestCallbacks[t]=this._requestCallbacks[t].filter(function(t){
return t!==e}))},_onMessage:function(t){var e=this,n=t.data,i=n.channel,r=n.id,a=n.name,s=n.arg;
if(null===this._masterWindow){this._masterWindow=t.source,this._masterOrigin=t.origin;
var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=this._postMessageCache[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h()}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}this._postMessageCache=[]}"request"===i?this._requestCallbacks[a]&&this._requestCallbacks[a].forEach(function(t){
t(s,function(t){var n={channel:"response",id:r,name:a,arg:t};e._masterWindow.postMessage(n,e._masterOrigin);
})}):"response"===i&&this._responseCallbacks[r]&&(this._responseCallbacks[r](s),delete this._responseCallbacks[r]);
}},{})}(),e=function(){function t(){var t=this;this._counter=0,this._requestCallbacks={},
this._responseCallbacks={},ipcRenderer.on("request",function(e,n){return t._onRequestMessage(n);
}),ipcRenderer.on("response",function(e,n){return t._onResponseMessage(n)})}return $traceurRuntime.createClass(t,{
postMessage:function(t){var e=void 0!==arguments[1]?arguments[1]:null,n=void 0!==arguments[2]?arguments[2]:null,i=this._counter++,r={
name:t,arg:e,id:i};n&&(this._responseCallbacks[r.id]=n),ipcRenderer.isWebview?ipcRenderer.sendToHost("request",r):ipcRenderer.send("request",r);
},addMessageListener:function(t,e){this._requestCallbacks[t]||(this._requestCallbacks[t]=[]),
this._requestCallbacks[t].push(e)},removeMessageListener:function(t,e){this._requestCallbacks[t]&&(this._requestCallbacks[t]=this._requestCallbacks[t].filter(function(t){
return t!==e}))},_onRequestMessage:function(t){var e=t,n=e.name,i=e.arg,r=e.id,a=this._requestCallbacks[n];
a&&a.forEach(function(t){t(i,function(t){var e={id:r,name:n,arg:t};ipcRenderer.isWebview?ipcRenderer.sendToHost("response",e):ipcRenderer.send("response",e);
})})},_onResponseMessage:function(t){this._responseCallbacks[t.id]&&(this._responseCallbacks[t.id](t.arg),
delete this._responseCallbacks[t.id])}},{})}(),n=window.ipcRenderer?e:t;return{get default(){
return n}}}),System.registerModule("classes/color",[],function(){"use strict";var t=System.get("utils/color"),e=t.stringToColor,n=t.colorToString,i=t.rgbToHsl,r=t.hslToRgb,a=function(){
function t(){var t=void 0!==arguments[0]?arguments[0]:0,e=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:0,i=void 0!==arguments[3]?arguments[3]:1,r=void 0!==arguments[4]?arguments[4]:"rgba";
"rgba"===r?(this.r=t,this.g=e,this.b=n):"hsla"===r&&(this.h=t,this.s=e,this.l=n),
this.a=i,this.space=r}return $traceurRuntime.createClass(t,{setSpace:function(t){
var e,n,a,s;if("rgba"===t&&"hsla"===this.space){var o=r(this.h,this.s,this.l),l=(e=o[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),u=(n=e.next()).done?void 0:n.value,c=(n=e.next()).done?void 0:n.value;
this.r=l,this.g=u,this.b=c,delete this.h,delete this.s,delete this.l,this.space="rgba";
}else if("hsla"===t&&"rgba"===this.space){var d=i(this.r,this.g,this.b),h=(a=d[Symbol.iterator](),
(s=a.next()).done?void 0:s.value),v=(s=a.next()).done?void 0:s.value,f=(s=a.next()).done?void 0:s.value;
this.h=h,this.s=v,this.l=f,delete this.r,delete this.g,delete this.b,this.space="hsla";
}},clone:function(){return"rgba"===this.space?new t(this.r,this.g,this.b,this.a,"rgba"):"hsla"===this.space?new t(this.h,this.s,this.l,this.a,"hsla"):void 0;
},log:function(){var t=this.toString();console.log("%c     ","background: "+t,t)},
toString:function(){var t=void 0!==arguments[0]?arguments[0]:"rgba";return n(this,t);
}},{fromString:function(n){var i=void 0!==arguments[1]?arguments[1]:"rgba";if("rgba"===i){
var r=e(n,"rgba"),a=r.r,s=r.g,o=r.b,l=r.a;return new t(a,s,o,l,"rgba")}var u=e(n,"hsla"),c=u.h,d=u.s,h=u.l,v=u.a;
return new t(c,d,h,v,"hsla")}})}(),s=a;return{get default(){return s}}}),System.registerModule("classes/decomposed-transform",[],function(){
"use strict";var t=System.get("utils/dom").createSVGMatrix,e=Math,n=e.abs,i=e.sqrt,r=e.asin,a=e.sin,s=e.cos,o=(e.tan,
e.atan2),l=1e-8,u=function(){function e(){var t=void 0!==arguments[0]?arguments[0]:"eulerAngles";
this._translateX=0,this._translateY=0,this._translateZ=0,this._scaleX=1,this._scaleY=1,
this._scaleZ=1,this._perspectiveX=0,this._perspectiveY=0,this._perspectiveZ=0,this._perspectiveW=1,
this._skewXY=0,this._skewXZ=0,this._skewYZ=0,this._rotation=t,"eulerAngles"===t?(this._rotateX=0,
this._rotateY=0,this._rotateZ=0):"quaternions"===t&&(this._quaternionX=0,this._quaternionY=0,
this._quaternionZ=0,this._quaternionW=0)}return $traceurRuntime.createClass(e,{toSVGMatrix:function(){
var e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];if(e[0][3]=this.perspectiveX,e[1][3]=this.perspectiveY,
e[2][3]=this.perspectiveZ,e[3][3]=this.perspectiveW,S(e,this.translateX,this.translateY,this.translateZ),
"eulerAngles"===this.rotation){var n=s(this.rotateX),i=a(this.rotateX),r=s(this.rotateY),o=a(this.rotateY),l=s(this.rotateZ),u=a(this.rotateZ),c=r*l,d=r*u,h=o*l,v=o*u,f=[[c-v*i,d+h*i,-n*o,0],[-n*u,n*l,i,0],[h+d*i,v-c*i,n*r,0],[0,0,0,1]];
e=C(e,f)}else if("quaternions"===this.rotation){var m=this.quaternionX*this.quaternionX,g=this.quaternionX*this.quaternionY,b=this.quaternionX*this.quaternionZ,p=this.quaternionX*this.quaternionW,y=this.quaternionY*this.quaternionY,_=this.quaternionY*this.quaternionZ,x=this.quaternionY*this.quaternionW,w=this.quaternionZ*this.quaternionZ,E=this.quaternionZ*this.quaternionW,A=[[1-2*(y+w),2*(g-E),2*(b+x),0],[2*(g+E),1-2*(m+w),2*(_-p),0],[2*(b-x),2*(_+p),1-2*(m+y),0],[0,0,0,1]];
e=C(e,A)}if(this.skewYZ){var L=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];L[2][1]=this.skewYZ,
e=C(e,L)}if(this.skewXZ){var M=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];M[2][1]=0,
M[2][0]=this.skewXZ,e=C(e,M)}if(this.skewXY){var j=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
j[2][0]=0,j[1][0]=this.skewXY,e=C(e,j)}return k(e,this.scaleX,this.scaleY,this.scaleZ),
t(e[0][0],e[0][1],e[1][0],e[1][1],e[3][0],e[3][1])},clone:function(){var t=new e(this._rotation);
return t.translateX=this._translateX,t.translateY=this._translateY,t.translateZ=this._translateZ,
t.scaleX=this._scaleX,t.scaleY=this._scaleY,t.scaleZ=this._scaleZ,t.perspectiveX=this._perspectiveX,
t.perspectiveY=this._perspectiveY,t.perspectiveZ=this._perspectiveZ,t.perspectiveW=this._perspectiveW,
t.skewXY=this._skewXY,t.skewXZ=this._skewXZ,t.skewYZ=this._skewYZ,"eulerAngles"===this._rotation?(t.rotateX=this._rotateX,
t.rotateY=this._rotateY,t.rotateZ=this._rotateZ):"quaternions"===this._rotation&&(t.quaternionX=this._quaternionX,
t.quaternionY=this._quaternionY,t.quaternionZ=this._quaternionZ,t.quaternionW=this._quaternionW),
t},get translateX(){return this._translateX},set translateX(t){this._translateX=t;
},get translateY(){return this._translateY},set translateY(t){this._translateY=t},
get translateZ(){return this._translateZ},set translateZ(t){this._translateZ=t},get scaleX(){
return this._scaleX},set scaleX(t){this._scaleX=t},get scaleY(){return this._scaleY;
},set scaleY(t){this._scaleY=t},get scaleZ(){return this._scaleZ},set scaleZ(t){this._scaleZ=t;
},get perspectiveX(){return this._perspectiveX},set perspectiveX(t){this._perspectiveX=t;
},get perspectiveY(){return this._perspectiveY},set perspectiveY(t){this._perspectiveY=t;
},get perspectiveZ(){return this._perspectiveZ},set perspectiveZ(t){this._perspectiveZ=t;
},get perspectiveW(){return this._perspectiveW},set perspectiveW(t){this._perspectiveW=t;
},get skewXY(){return this._skewXY},set skewXY(t){this._skewXY=t},get skewXZ(){return this._skewXZ;
},set skewXZ(t){this._skewXZ=t},get skewYZ(){return this._skewYZ},set skewYZ(t){this._skewYZ=t;
},get rotation(){return this._rotation},set rotation(t){throw new Error('"rotation" property is read-only.');
},get rotateX(){if("eulerAngles"===this._rotation)return this._rotateX;throw new Error('Can\'t get "rotateX" propery - decomposed transform does not use Euler angles.');
},set rotateX(t){if("eulerAngles"!==this._rotation)throw new Error('Can\'t set "rotateX" propery - decomposed transform does not use Euler angles.');
this._rotateX=t},get rotateY(){if("eulerAngles"===this._rotation)return this._rotateY;
throw new Error('Can\'t get "rotateY" propery - decomposed transform does not use Euler angles.');
},set rotateY(t){if("eulerAngles"!==this._rotation)throw new Error('Can\'t set "rotateY" propery - decomposed transform does not use Euler angles.');
this._rotateY=t},get rotateZ(){if("eulerAngles"===this._rotation)return this._rotateZ;
throw new Error('Can\'t get "rotateZ" propery - decomposed transform does not use Euler angles.');
},set rotateZ(t){if("eulerAngles"!==this._rotation)throw new Error('Can\'t set "rotateZ" propery - decomposed transform does not use Euler angles.');
this._rotateZ=t},get quaternionX(){if("quaternions"===this._rotation)return this._quaternionX;
throw new Error('Can\'t get "quaternionX" propery - decomposed transform does not use quaternions.');
},set quaternionX(t){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionX" propery - decomposed transform does not use quaternions.');
this._quaternionX=t},get quaternionY(){if("quaternions"===this._rotation)return this._quaternionY;
throw new Error('Can\'t get "quaternionY" propery - decomposed transform does not use quaternions.');
},set quaternionY(t){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionY" propery - decomposed transform does not use quaternions.');
this._quaternionY=t},get quaternionZ(){if("quaternions"===this._rotation)return this._quaternionZ;
throw new Error('Can\'t get "quaternionZ" propery - decomposed transform does not use quaternions.');
},set quaternionZ(t){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionZ" propery - decomposed transform does not use quaternions.');
this._quaternionX=t},get quaternionW(){if("quaternions"===this._rotation)return this._quaternionW;
throw new Error('Can\'t get "quaternionW" propery - decomposed transform does not use quaternions.');
},set quaternionW(t){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionW" propery - decomposed transform does not use quaternions.');
this._quaternionW=t}},{fromSVGMatrix:function(t){var n=void 0!==arguments[1]?arguments[1]:"eulerAngles",a=new e(n),l=[[t.a,t.b,0,0],[t.c,t.d,0,0],[0,0,1,0],[t.e,t.f,0,1]];
if(0==l[3][3])return!1;for(var u=0;4>u;u++)for(var c=0;4>c;c++)l[u][c]/=l[3][3];for(var d=[],h=0;4>h;h++){
d[h]=[];for(var f=0;4>f;f++)d[h][f]=l[h][f]}for(var S=0;3>S;S++)d[S][3]=0;if(d[3][3]=1,
0==v(d))return!1;if(0!=l[0][3]||0!=l[1][3]||0!=l[2][3]){var C=[0,0,0,0];C[0]=l[0][3],
C[1]=l[1][3],C[2]=l[2][3],C[3]=l[3][3];var E=m(d),k=g(E),A=b(C,k);a.perspectiveX=A[0],
a.perspectiveY=A[1],a.perspectiveZ=A[2],a.perspectiveW=A[3],l[0][3]=l[1][3]=l[2][3]=0,
l[3][3]=1}else a.perspectiveX=a.perspectiveY=a.perspectiveZ=0,a.perspectiveW=1;a.translateX=l[3][0],
l[3][0]=0,a.translateY=l[3][1],l[3][1]=0,a.translateZ=l[3][2],l[3][2]=0;for(var L=[[],[],[]],M=[0,0,0],j=0;3>j;j++)L[j][0]=l[j][0],
L[j][1]=l[j][1],L[j][2]=l[j][2];if(a.scaleX=p(L[0]),y(L[0],1),a.skewXY=_(L[0],L[1]),
x(L[1],L[0],L[1],1,-a.skewXY),a.scaleY=p(L[1]),y(L[1],1),a.skewXY/=a.scaleY,a.skewXZ=_(L[0],L[2]),
x(L[2],L[0],L[2],1,-a.skewXZ),a.skewYZ=_(L[1],L[2]),x(L[2],L[1],L[2],1,-a.skewYZ),
a.scaleZ=p(L[2]),y(L[2],1),a.skewXZ/=a.scaleZ,a.skewYZ/=a.scaleZ,w(L[1],L[2],M),_(L[0],M)<0){
a.scaleX*=-1,a.scaleY*=-1,a.scaleZ*=-1;for(var T=0;3>T;T++)L[T][0]*=-1,L[T][1]*=-1,
L[T][2]*=-1}if("eulerAngles"===n)a.rotateY=r(-L[0][2]),0!==s(a.rotateY)?(a.rotateX=o(L[1][2],L[2][2]),
a.rotateZ=o(L[0][1],L[0][0])):(a.rotateX=o(-L[2][0],L[1][1]),a.rotateZ=0);else if("quaternions"===n){
var P,R,O,I,D,V;R=L[0][0]+L[1][1]+L[2][2]+1,R>1e-4?(P=.5/i(R),V=.25/P,O=(L[2][1]-L[1][2])*P,
I=(L[0][2]-L[2][0])*P,D=(L[1][0]-L[0][1])*P):L[0][0]>L[1][1]&&L[0][0]>L[2][2]?(P=2*i(1+L[0][0]-L[1][1]-L[2][2]),
O=.25*P,I=(L[0][1]+L[1][0])/P,D=(L[0][2]+L[2][0])/P,V=(L[2][1]-L[1][2])/P):L[1][1]>L[2][2]?(P=2*i(1+L[1][1]-L[0][0]-L[2][2]),
O=(L[0][1]+L[1][0])/P,I=.25*P,D=(L[1][2]+L[2][1])/P,V=(L[0][2]-L[2][0])/P):(P=2*i(1+L[2][2]-L[0][0]-L[1][1]),
O=(L[0][2]+L[2][0])/P,I=(L[1][2]+L[2][1])/P,D=.25*P,V=(L[1][0]-L[0][1])/P),a.quaternionX=O,
a.quaternionY=I,a.quaternionZ=D,a.quaternionW=V}return a}})}(),c=u,d=function(t,e,n,i){
return t*i-e*n},h=function(t,e,n,i,r,a,s,o,l){return t*d(r,a,o,l)-i*d(e,n,o,l)+s*d(e,n,r,a);
},v=function(t){var e=t[0][0],n=t[0][1],i=t[0][2],r=t[0][3],a=t[1][0],s=t[1][1],o=t[1][2],l=t[1][3],u=t[2][0],c=t[2][1],d=t[2][2],v=t[2][3],f=t[3][0],m=t[3][1],g=t[3][2],b=t[3][3];
return e*h(s,c,m,o,d,g,l,v,b)-n*h(a,u,f,o,d,g,l,v,b)+i*h(a,u,f,s,c,m,l,v,b)-r*h(a,u,f,s,c,m,o,d,g);
},f=function(t){var e=[[],[],[],[]],n=t[0][0],i=t[0][1],r=t[0][2],a=t[0][3],s=t[1][0],o=t[1][1],l=t[1][2],u=t[1][3],c=t[2][0],d=t[2][1],v=t[2][2],f=t[2][3],m=t[3][0],g=t[3][1],b=t[3][2],p=t[3][3];
e[0][0]=h(o,d,g,l,v,b,u,f,p),e[1][0]=-h(s,c,m,l,v,b,u,f,p),e[2][0]=h(s,c,m,o,d,g,u,f,p),
e[3][0]=-h(s,c,m,o,d,g,l,v,b),e[0][1]=-h(i,d,g,r,v,b,a,f,p),e[1][1]=h(n,c,m,r,v,b,a,f,p),
e[2][1]=-h(n,c,m,i,d,g,a,f,p),e[3][1]=h(n,c,m,i,d,g,r,v,b),e[0][2]=h(i,o,g,r,l,b,a,u,p),
e[1][2]=-h(n,s,m,r,l,b,a,u,p),e[2][2]=h(n,s,m,i,o,g,a,u,p),e[3][2]=-h(n,s,m,i,o,g,r,l,b),
e[0][3]=-h(i,o,d,r,l,v,a,u,f),e[1][3]=h(n,s,c,r,l,v,a,u,f),e[2][3]=-h(n,s,c,i,o,d,a,u,f),
e[3][3]=h(n,s,c,i,o,d,r,l,v)},m=function(t){var e=f(t),i=v(t);if(n(i)<l)return!1;for(var r=0;4>r;r++)for(var a=0;4>a;a++)e[r][a]=e[r][a]/i;
return e},g=function(t){for(var e=[[],[],[],[]],n=0;4>n;n++)for(var i=0;4>i;i++)e[n][i]=t[i][n];
return e},b=function(t,e){var n=[];return n[0]=t[0]*e[0][0]+t[1]*e[1][0]+t[2]*e[2][0]+t[3]*e[3][0],
n[1]=t[0]*e[0][1]+t[1]*e[1][1]+t[2]*e[2][1]+t[3]*e[3][1],n[2]=t[0]*e[0][2]+t[1]*e[1][2]+t[2]*e[2][2]+t[3]*e[3][2],
n[3]=t[0]*e[0][3]+t[1]*e[1][3]+t[2]*e[2][3]+t[3]*e[3][3],n},p=function(t){return i(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);
},y=function(t,e){var n=p(t);if(0!=n){var i=e/n;t[0]*=i,t[1]*=i,t[2]*=i}},_=function(t,e){
return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},x=function(t,e,n,i,r){n[0]=i*t[0]+r*e[0],n[1]=i*t[1]+r*e[1],
n[2]=i*t[2]+r*e[2]},w=function(t,e,n){n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],
n[2]=t[0]*e[1]-t[1]*e[0]},S=function(t,e,n,i){t[3][0]+=e*t[0][0]+n*t[1][0]+i*t[2][0],
t[3][1]+=e*t[0][1]+n*t[1][1]+i*t[2][1],t[3][2]+=e*t[0][2]+n*t[1][2]+i*t[2][2],t[3][3]+=e*t[0][3]+n*t[1][3]+i*t[2][3];
},C=function(t,e){var n=[[],[],[],[]];return n[0][0]=e[0][0]*t[0][0]+e[0][1]*t[1][0]+e[0][2]*t[2][0]+e[0][3]*t[3][0],
n[0][1]=e[0][0]*t[0][1]+e[0][1]*t[1][1]+e[0][2]*t[2][1]+e[0][3]*t[3][1],n[0][2]=e[0][0]*t[0][2]+e[0][1]*t[1][2]+e[0][2]*t[2][2]+e[0][3]*t[3][2],
n[0][3]=e[0][0]*t[0][3]+e[0][1]*t[1][3]+e[0][2]*t[2][3]+e[0][3]*t[3][3],n[1][0]=e[1][0]*t[0][0]+e[1][1]*t[1][0]+e[1][2]*t[2][0]+e[1][3]*t[3][0],
n[1][1]=e[1][0]*t[0][1]+e[1][1]*t[1][1]+e[1][2]*t[2][1]+e[1][3]*t[3][1],n[1][2]=e[1][0]*t[0][2]+e[1][1]*t[1][2]+e[1][2]*t[2][2]+e[1][3]*t[3][2],
n[1][3]=e[1][0]*t[0][3]+e[1][1]*t[1][3]+e[1][2]*t[2][3]+e[1][3]*t[3][3],n[2][0]=e[2][0]*t[0][0]+e[2][1]*t[1][0]+e[2][2]*t[2][0]+e[2][3]*t[3][0],
n[2][1]=e[2][0]*t[0][1]+e[2][1]*t[1][1]+e[2][2]*t[2][1]+e[2][3]*t[3][1],n[2][2]=e[2][0]*t[0][2]+e[2][1]*t[1][2]+e[2][2]*t[2][2]+e[2][3]*t[3][2],
n[2][3]=e[2][0]*t[0][3]+e[2][1]*t[1][3]+e[2][2]*t[2][3]+e[2][3]*t[3][3],n[3][0]=e[3][0]*t[0][0]+e[3][1]*t[1][0]+e[3][2]*t[2][0]+e[3][3]*t[3][0],
n[3][1]=e[3][0]*t[0][1]+e[3][1]*t[1][1]+e[3][2]*t[2][1]+e[3][3]*t[3][1],n[3][2]=e[3][0]*t[0][2]+e[3][1]*t[1][2]+e[3][2]*t[2][2]+e[3][3]*t[3][2],
n[3][3]=e[3][0]*t[0][3]+e[3][1]*t[1][3]+e[3][2]*t[2][3]+e[3][3]*t[3][3],n},E=function(t,e,n){
t[0][0]*=e,t[0][1]*=e,t[0][2]*=e,t[0][3]*=e,t[1][0]*=n,t[1][1]*=n,t[1][2]*=n,t[1][3]*=n;
},k=function(t,e,n,i){E(t,e,n),t[2][0]*=i,t[2][1]*=i,t[2][2]*=i,t[2][3]*=i};return{
get default(){return c}}}),System.registerModule("classes/dom-undo-manager",[],function(){
"use strict";var t=System.get("classes/event-emitter")["default"],e=System.get("utils/type").isBoolean,n={
childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0
},i=function(t){function i(t){var e;$traceurRuntime.superConstructor(i).call(this),
this._rootElement=t,this._groups=[],this._position=0,this._disabled=!1,this._observer=new MutationObserver((e=this,
function(t){var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;e._onDOMTransaction(o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}})),this._onDisabledChange()}return $traceurRuntime.createClass(i,{
get disabled(){return this._disabled},set disabled(t){e(t)&&t!==this._disabled&&(this._disabled=t,
this._onDisabledChange())},get undoLabel(){var t="Undo";if(this.canUndo()){var e;e=this._groups[this._position-1].transactions.length>0?this._groups[this._position-1]:this._groups[this._position-2],
t="Undo: "+e.label}return t},set undoLabel(t){throw new Error("undoLabel property is read-only");
},get redoLabel(){var t="Redo";if(this.canRedo()){var e=this._groups[this._position];
t="Redo: "+e.label}return t},set redoLabel(t){throw new Error("redoLabel property is read-only");
},clear:function(){this._groups=[],0!==this._position&&(this._position=0,this.dispatchEvent(new CustomEvent("positionchange",{
detail:"reset"})))},checkpoint:function(t){this._observer.takeRecords(),this._position<this._groups.length&&(this._groups=this._groups.slice(0,this._position));
var e={label:t,transactions:[]};this._groups.push(e),this._position+=1,this.dispatchEvent(new CustomEvent("positionchange",{
detail:"increment"}))},undo:function(){if(this.canUndo()){this._discardCurrentGroupIfEmpty(),
this.disabled=!0,this._position-=1;var t=this._groups[this._position].transactions;
t=$traceurRuntime.spread(t).reverse();var e=new Set,n=new Set,i=new Set,r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
if("childList"===u.type){var c=document.createDocumentFragment(),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=u.addedNodes[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var g=f.value;u.target.removeChild(g),n.add(g),e["delete"](g)}}catch(b){h=!0,v=b}finally{
try{d||null==m["return"]||m["return"]()}finally{if(h)throw v}}var p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=u.removedNodes[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;c.append(S),e.add(S),n["delete"](S)}}catch(C){y=!0,_=C}finally{try{
p||null==w["return"]||w["return"]()}finally{if(y)throw _}}u.nextSibling?u.target.insertBefore(c,u.nextSibling):u.previousSibling?u.target.insertBefore(c,u.previousSibling.nextSibling):u.target.append(c);
}else"attributes"===u.type?(null===u.oldValue?"gradientUnits"===u.attributeName?u.target.setAttribute("gradientUnits","objectBoundingBox"):"patternUnits"===u.attributeName?u.target.setAttribute("patternUnits","objectBoundingBox"):"patternContentUnits"===u.attributeName?u.target.setAttribute("patternContentUnits","userSpaceOnUse"):u.target.removeAttribute(u.attributeName):u.target.setAttribute(u.attributeName,u.oldValue),
i.add(u.target)):"characterData"===u.type&&(u.target.data=u.oldValue,i.add(u.target));
}}catch(E){a=!0,s=E}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.disabled=!1,this.dispatchEvent(new CustomEvent("undo",{detail:{addedNodes:e,
removedNodes:n,modifiedNodes:i}})),this.dispatchEvent(new CustomEvent("positionchange",{
detail:"decrement"}))}else console.info("Can't undo")},redo:function(){if(this.canRedo()){
this.disabled=!0;var t=this._groups[this._position].transactions;this._position+=1;
var e=new Set,n=new Set,i=new Set,r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if("childList"===u.type){var c=document.createDocumentFragment(),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=u.removedNodes[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var g=f.value;u.target.removeChild(g),n.add(g),e["delete"](g)}}catch(b){h=!0,v=b}finally{
try{d||null==m["return"]||m["return"]()}finally{if(h)throw v}}var p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=u.addedNodes[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;c.append(S),e.add(S),n["delete"](S)}}catch(C){y=!0,_=C}finally{try{
p||null==w["return"]||w["return"]()}finally{if(y)throw _}}u.nextSibling?u.target.insertBefore(c,u.nextSibling):u.previousSibling?u.target.insertBefore(c,u.previousSibling.nextSibling):u.target.append(c);
}else"attributes"===u.type?(null===u.newValue?u.target.removeAttribute(u.attributeName):u.target.setAttribute(u.attributeName,u.newValue),
i.add(u.target)):"characterData"===u.type&&(u.target.data=u.newValue,i.add(u.target));
}}catch(E){a=!0,s=E}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.disabled=!1,this.dispatchEvent(new CustomEvent("redo",{detail:{addedNodes:e,
removedNodes:n,modifiedNodes:i}})),this.dispatchEvent(new CustomEvent("positionchange",{
detail:"increment"}))}else console.info("Can't redo")},canUndo:function(){return 0===this._position||this.disabled?!1:1===this._position&&this._isCurrentGroupEmpty()?!1:!0;
},canRedo:function(){return this._position===this._groups.length||this.disabled?!1:!0;
},_onDisabledChange:function(){this.disabled===!0?(this._observer.takeRecords(),this._observer.disconnect()):this.disabled===!1&&this._observer.observe(this._rootElement,n);
},_onDOMTransaction:function(t){if(0!==this._groups.length){var e=this._groups[this._groups.length-1].transactions;
if("attributes"===t.type){var n=t.attributeName,i=e.find(function(e){return"attributes"===e.type&&e.attributeName===n&&e.target===t.target;
});i?i.newValue=i.target.getAttribute(n):(i={type:"attributes",target:t.target,attributeName:n,
oldValue:t.oldValue,newValue:t.target.getAttribute(n)},e.push(i))}else if("characterData"===t.type){
var r=e.find(function(e){return"characterData"===e.type&&e.target===t.target});if(r)r.newValue=r.target.data;else{
var a={type:"characterData",target:t.target,oldValue:t.oldValue,newValue:t.target.data
};e.push(a)}}else if("childList"===t.type){var s={type:"childList",target:t.target,
addedNodes:$traceurRuntime.spread(t.addedNodes),removedNodes:$traceurRuntime.spread(t.removedNodes),
nextSibling:t.nextSibling,previousSibling:t.previousSibling};e.push(s)}}},_isCurrentGroupEmpty:function(){
return 0===this._groups[this._position-1].transactions.length},_discardCurrentGroupIfEmpty:function(){
this._position>0&&0===this._groups[this._position-1].transactions.length&&(this._groups.remove(this._groups[this._position]),
this._position-=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"
})))}},{},t)}(t),r=i;return{get default(){return r}}}),System.registerModule("classes/enum",[],function(){
"use strict";var t=Object,e=t.defineProperty,n=t.freeze,i=function(){function t(){
for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=!0,a=!1,s=void 0;try{
for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=Symbol(u);
e(this,u,{enumerable:!0,configurable:!1,value:c}),e(this,c,{enumerable:!1,configurable:!1,
value:u})}}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]()}finally{
if(a)throw s}}n(this)}return $traceurRuntime.createClass(t,{},{})}(),r=i;return{get default(){
return r}}}),System.registerModule("classes/event-emitter",[],function(){"use strict";
var t=function(){function t(){}return $traceurRuntime.createClass(t,{addEventListener:function(t,e){
this._events||(this._events={});var n=this._events[t];n||(this._events[t]=n=[]),n.push(e),
n.length>300&&console.warn("Potential EventEmitter memory leak: "+n.length+" listeners "+('subscribed to event "'+t+'"'));
},removeEventListener:function(t,e){if(this._events&&this._events[t]){for(var n=[],i=0;i<this._events[t].length;i+=1)this._events[t][i]!==e&&n.push(this._events[t][i]);
this._events[t]=n}},dispatchEvent:function(t){if(this._events){var e=this._events[t.type];
if(e){for(var n=null,i=e.length-1;i>=0;i-=1){var r,a=e[i];try{r=a.call(window,t)}catch(s){
null===n&&(n=s)}if(r===!1)break}if(n)throw n}}}},{})}(),e=t;return{get default(){
return e}}}),System.registerModule("classes/fonts-manager",[],function(){"use strict";
var t=System.get("utils/constants").WEB_SAFE_SYSTEM_FONT_FAMILIES,e=System.get("utils/dom").createElement,n=System.get("utils/font"),i=n.normalizeFontVariant,r=n.parseGoogleFontsImportRule,a=System.get("utils/json").fromJSON,s=System.get("utils/network").httpRequest,o=System.get("utils/object").cloneObject,l=System.get("utils/time"),u=l.getTimeStamp,c=l.milisecondsToDays,d=l.sleepUntilIdle,h=Object,v=h.entries,f=h.keys,m=function(){
function n(n){var i=this;this._canvas=n,this._rasterCanvas=e("canvas"),this._rasterCanvas.width=300,
this._rasterCanvas.height=40,this._systemFontFamilies=o(t),this._googleFontFamilies=null,
this._ready=!1,this._readyCallbacks=[],function(){var t,e,n,r,a,s;return $traceurRuntime.asyncWrap(function(o){
for(;;)switch(o.state){case 0:return void Promise.resolve(i._dbOpen()).then(o.createCallback(3),o.errback);
case 3:i._database=o.value,o.state=2;break;case 2:return void Promise.resolve(i._getGoogleFontFamilies()).then(o.createCallback(6),o.errback);
case 6:i._googleFontFamilies=o.value,o.state=5;break;case 5:i._ready=!0,t=!0,e=!1,
n=void 0;try{for(r=void 0,a=i._readyCallbacks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)(s=r.value)(i);
}catch(l){e=!0,n=l}finally{try{t||null==a["return"]||a["return"]()}finally{if(e)throw n;
}}o.state=-2;break;default:return o.end()}},this)}()}return $traceurRuntime.createClass(n,{
get ready(){var t=this;return new Promise(function(e,n){t._ready?e(t):t._readyCallbacks.push(e);
})},get systemFontFamilies(){return this._systemFontFamilies},set systemFontFamilies(t){
throw new Error("This property is read-only")},get googleFontFamilies(){return this._googleFontFamilies;
},set googleFontFamilies(t){throw new Error("This property is read-only")},getThumbnail:function(t){
var e,n,i,r,a;return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){
case 0:return void Promise.resolve(this._dbGetThumbnail(t)).then(s.createCallback(3),s.errback);
case 3:e=s.value,s.state=2;break;case 2:s.state=!e||c(u()-e.timeStamp)>90?15:18;break;
case 15:n=this.googleFontFamilies.find(function(e){return e.name===t}),i=this._rasterCanvas.getContext("2d"),
s.state=16;break;case 16:s.state=n?8:12;break;case 8:r=n.files[400]||n.files[f(n.files)[0]],
a=new FontFace("BX "+t,"url("+r+")",{}),s.state=9;break;case 9:return void Promise.resolve(a.load()).then(s.createCallback(5),s.errback);
case 5:return void Promise.resolve(d(20)).then(s.createCallback(7),s.errback);case 7:
document.fonts.add(a),i.clearRect(0,0,300,40),i.font="30px BX "+t,i.fillStyle="white",
i.fillText(t,5,30),document.fonts["delete"](a),s.state=11;break;case 12:i.clearRect(0,0,300,40),
i.font="30px "+t,i.fillStyle="white",i.fillText(t,5,30),s.state=11;break;case 11:
e={data:this._rasterCanvas.toDataURL("image/png"),timeStamp:u()},this._dbSetThumbnail(t,e),
s.state=18;break;case 18:s.returnValue=e.data,s.state=21;break;case 21:s.state=-2;
break;default:return s.end()}},this)},getUsedFontFamiliesNames:function(){var t=new Set,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this._canvas.content.querySelectorAll("text, tspan")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;t.add(getComputedStyle(s).fontFamily.replaceAll("'",""))}}catch(o){
n=!0,i=o}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}var l=this.getImportedGoogleFontFamilyNames(),u=[],c=[],d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=t[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value;
l.includes(g)?u.push(g):document.fonts.check("12px "+g)&&c.push(g)}}catch(b){h=!0,
v=b}finally{try{d||null==m["return"]||m["return"]()}finally{if(h)throw v}}return{
google:u,system:c}},getImportedGoogleFontFamilyNames:function(){var t,e,n=this._getGoogleFontsImportRule(),i=[];
if(n){var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r(n)[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value,d=(t=c[Symbol.iterator](),(e=t.next()).done?void 0:e.value);(e=t.next()).done?void 0:e.value;
i.push(d)}}catch(h){s=!0,o=h}finally{try{a||null==u["return"]||u["return"]()}finally{
if(s)throw o}}}return i},getImportedGoogleFontFamilyVariants:function(t){var e,n,i=this._getGoogleFontsImportRule(),a=[];
if(i){var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=r(i)[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=(e=d[Symbol.iterator](),(n=e.next()).done?void 0:n.value),v=(n=e.next()).done?void 0:n.value;
h===t&&(a=$traceurRuntime.spread(v))}}catch(f){o=!0,l=f}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}}return a},importGoogleFontFamily:function(t){var n,i,a=this.googleFontFamilies.find(function(e){
return e.name===t});if(a){var s,o=this._getGoogleFontsImportRule();o?s=o.parentStyleSheet.ownerNode:(s=e("svg:style"),
this._canvas.defs.insertBefore(s,this._canvas.defs.querySelector("style")));var l=[];
if(o){var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=r(o)[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value,m=(n=f[Symbol.iterator](),(i=n.next()).done?void 0:i.value),g=(i=n.next()).done?void 0:i.value;
m!==a.name&&l.push({familyName:m,variants:g})}}catch(b){c=!0,d=b}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}}l.push({familyName:a.name,variants:a.variants}),l.sort(function(t,e){
return t.familyName>e.familyName});var p=l.map(function(t){var e=t,n=e.familyName,i=e.variants;
return n.replaceAll(" ","+")+":"+i.join(",")}).join("|"),y="@import url(https://fonts.googleapis.com/css?family="+p+");";
s.textContent=y}},deportGoogleFontFamily:function(t){var e,n,i=this._getGoogleFontsImportRule();
if(i){var a=[],s=!0,o=!1,l=void 0;try{for(var u=void 0,c=r(i)[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=(e=d[Symbol.iterator](),(n=e.next()).done?void 0:n.value),v=(n=e.next()).done?void 0:n.value;
h!==t&&a.push([h,v])}}catch(f){o=!0,l=f}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}var m=a.map(function(t){var e,n,i=t,r=(e=i[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),a=(n=e.next()).done?void 0:n.value;return r.replaceAll(" ","+")+":"+a.join(",");
}).join("|"),g="@import url(https://fonts.googleapis.com/css?family="+m+");";i.parentStyleSheet.ownerNode.textContent=g;
}},deportUnsusedGoogleFontFamilies:function(){var t=this.getImportedGoogleFontFamilyNames(),e=this.getUsedFontFamiliesNames().google,n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
e.includes(l)===!1&&n.push(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=n[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.deportGoogleFontFamily(m)}}catch(g){d=!0,h=g}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}},_getGoogleFontFamilies:function(){var t,e,n,r,o,l;return $traceurRuntime.asyncWrap(function(d){
for(;;)switch(d.state){case 0:return void Promise.resolve(this._dbGetGoogleFontFamilies()).then(d.createCallback(3),d.errback);
case 3:t=d.value,d.state=2;break;case 2:e=u(),n=t[0]?t[0].timeStamp:-(1/0),d.state=16;
break;case 16:d.state=c(e-n)>30?7:10;break;case 7:r="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBZd8UahlnRn53EWC7snRmOAuuktqBaP6k",
d.state=8;break;case 8:return void Promise.resolve(s(r)).then(d.createCallback(6),d.errback);
case 6:o=d.value,d.state=5;break;case 5:l=a(o),t=l.items.map(function(t){var n,r,a={
name:t.family,provider:"google",variants:t.variants.map(function(t){return i(t)}),
files:{},timeStamp:e},s=!0,o=!1,l=void 0;try{for(var u=void 0,c=v(t.files)[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=(n=d[Symbol.iterator](),(r=n.next()).done?void 0:r.value),f=(r=n.next()).done?void 0:r.value;
a.files[i(h)]=f}}catch(m){o=!0,l=m}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}return a}),this._dbSetGoogleFontFamilies(t),d.state=10;break;
case 10:d.returnValue=t,d.state=13;break;case 13:d.state=-2;break;default:return d.end();
}},this)},_getGoogleFontsImportRule:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._canvas.content.querySelectorAll("style")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.sheet.rules[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;if(d.type===CSSRule.IMPORT_RULE&&d.href){var h=new URL(d.href);if("fonts.googleapis.com"===h.host)return d;
}}}catch(v){o=!0,l=v}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}}}catch(f){e=!0,n=f}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}return null},_dbOpen:function(){return new Promise(function(t,e){var n=indexedDB.open("fonts-manager",1);
n.addEventListener("upgradeneeded",function(t){var e=t.target.result;e.objectStoreNames.contains("thumbnails")===!1&&e.createObjectStore("thumbnails",{
autoIncrement:!0}),e.objectStoreNames.contains("googleFontFamilies")===!1&&e.createObjectStore("googleFontFamilies");
}),n.addEventListener("success",function(e){return t(e.target.result)}),n.addEventListener("error",function(t){
return e("Failed to open IndexedDB database")})})},_dbGetGoogleFontFamilies:function(){
var t=this;return new Promise(function(e,n){var i=t._database.transaction(["googleFontFamilies"],"readonly"),r=i.objectStore("googleFontFamilies"),a=r.getAll();
a.onsuccess=function(t){e(t.target.result)}})},_dbSetGoogleFontFamilies:function(t){
var e=this;return new Promise(function(n,i){var r,a,s;return $traceurRuntime.asyncWrap(function(o){
for(;;)switch(o.state){case 0:r=e._database.transaction(["googleFontFamilies"],"readwrite"),
a=r.objectStore("googleFontFamilies"),s=[],t.forEach(function(t,e){s.push(new Promise(function(n,i){
var r=a.add(t,e);r.addEventListener("success",n),r.addEventListener("error",i)}));
}),Promise.all(s).then(n,i),o.state=-2;break;default:return o.end()}},this)})},_dbClearGoogleFontFamilies:function(){
var t=this;return new Promise(function(e,n){var i=t._database.transaction(["googleFontFamilies"],"readwrite"),r=i.objectStore("googleFontFamilies"),a=r.clear();
a.addEventListener("success",function(t){return e()}),a.addEventListener("error",function(t){
return n("Failed to store font family in IndexedDB database")})})},_dbGetThumbnail:function(t){
var e=this;return new Promise(function(n,i){var r=e._database.transaction(["thumbnails"],"readonly"),a=r.objectStore("thumbnails"),s=a.get(t);
s.addEventListener("success",function(t){return n(t.target.result)}),s.addEventListener("error",function(t){
return i("Failed to get thumbnail")})})},_dbSetThumbnail:function(t,e){var n=this;
return new Promise(function(i,r){var a=n._database.transaction(["thumbnails"],"readwrite"),s=a.objectStore("thumbnails"),o=s.put(e,t);
o.addEventListener("success",function(t){return i()}),o.addEventListener("error",function(t){
return r("Failed to store thumbnail in IndexedDB database")})})},_dbClearThumbnails:function(){
var t=this;return new Promise(function(e,n){var i=t._database.transaction(["thumbnails"],"readwrite"),r=i.objectStore("thumbnails"),a=r.clear();
a.addEventListener("success",function(t){return e()}),a.addEventListener("error",function(t){
return n("Failed to clear thumbnails")})})}},{})}(),g=m;return{get default(){return g;
}}}),System.registerModule("classes/shortcut",[],function(){"use strict";var t=["iPhone","iPad"].includes(navigator.platform)||navigator.platform.startsWith("Mac"),e=function(){
function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ctrl=!1,
this.alt=!1,this.meta=!1,this.shift=!1,this.base=null;var n=!0,i=!1,r=void 0;try{
for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"Control"===o?this.ctrl=!0:"Alt"===o?this.alt=!0:"Meta"===o?this.meta=!0:"Shift"===o?this.shift=!0:this.base=o;
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}}return $traceurRuntime.createClass(e,{matches:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
var n=!1,i=!1,r=!1,a=!1,s=null,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;"Control"===h?n=!0:"Alt"===h?i=!0:"Meta"===h?r=!0:"Shift"===h?a=!0:s=h;
}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u;
}}return n===this.ctrl&&i===this.alt&&r===this.meta&&a===this.shift&&s===this.base;
},includes:function(t){return"Control"===t?this.ctrl:"Alt"===t?this.alt:"Meta"===t?this.meta:"Shift"===t?this.shift:this.base===t;
},compare:function(t){return this.ctrl===t.ctrl&&this.alt===t.alt&&this.meta===t.meta&&this.shift===t.shift&&this.base===t.base;
},isVoid:function(){return this.ctrl===!1&&this.alt===!1&&this.meta===!1&&this.shift===!1&&null===this.base;
},toDisplayString:function(){var e="";if(t){this.meta&&(e+="^"),this.alt&&(e+="⌥"),
this.shift&&(e+="⇧"),this.ctrl&&(e+="⌘");var n={ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",
ArrowRight:"→",Backspace:"⌦"};null!==this.base&&(e+=n[this.base]||this.base)}else{
var i=[];this.ctrl&&i.push("Ctrl"),this.alt&&i.push("Alt"),this.meta&&i.push("Meta"),
this.shift&&i.push("Shift");var r={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",
ArrowRight:"Right"};null!==this.base&&i.push(r[this.base]||this.base),e=i.join("+");
}return e},toAccelerator:function(){var t=[];return this.ctrl&&t.push("CmdOrCtrl"),
this.alt&&t.push("Alt"),this.shift&&t.push("Shift"),this.meta,null!==this.base&&("ArrowUp"===this.base?t.push("Up"):"ArrowDown"===this.base?t.push("Down"):"ArrowLeft"===this.base?t.push("Left"):"ArrowRight"===this.base?t.push("Right"):t.push(this.base)),
t.join("+")},toJSON:function(){return this.toString()},toString:function(){var t=[];
return this.ctrl&&t.push("Control"),this.alt&&t.push("Alt"),this.meta&&t.push("Meta"),
this.shift&&t.push("Shift"),null!==this.base&&t.push(this.base),t.join("+")}},{fromEvent:function(n){
var i=new e;i.ctrl=t?n.metaKey:n.ctrlKey,i.alt=n.altKey,i.meta=t?n.ctrlKey:n.metaKey,
i.shift=n.shiftKey;var r=null,a=n.keyIdentifier,s={"U+00C0":"U+0060","U+00BD":"U+002D",
"U+00BB":"U+003D","U+00DB":"U+005B","U+00DD":"U+005D","U+00DC":"U+005C","U+00BA":"U+003B",
"U+00DE":"U+0027","U+00BC":"U+002C","U+00BE":"U+002E","U+00BF":"U+002F",Win:"Meta",
Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};for(var o in s)if(a===o){
var l=s[o];a=l}if("U"===a[0]&&"+"===a[1]){var u=parseInt(a.substring(2),16);27===u?r="Escape":8===u?r="Backspace":(r=String.fromCharCode(u),
"	"===r?r="Tab":" "===r?r="Space":n.shiftKey===!1&&(r=r.toLowerCase()))}else r=a;return r&&"Control"!==r&&"Alt"!==r&&"Shift"!==r&&"Meta"!==r?1===r.length?i.base=r.toUpperCase():i.base=r:i.base=null,
i},fromAccelerator:function(t){var n=t.split("+"),i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;"CmdOrCtrl"===u||"CommandOrControl"===u?i.push("Control"):"Up"===u?i.push("ArrowUp"):"Down"===u?i.push("ArrowDown"):"Left"===u?i.push("ArrowLeft"):"Right"===u?i.push("ArrowRight"):""!==u&&i.push(u);
}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}var d=new(Function.prototype.bind.apply(e,$traceurRuntime.spread([null],i)));return d;
},fromString:function(t){return new(Function.prototype.bind.apply(e,$traceurRuntime.spread([null],t.split("+").filter(function(t){
return""!==t}))))}})}(),n=e;return{get default(){return n}}}),System.registerModule("classes/string-scanner",[],function(){
"use strict";var t=function(){function t(t){this.text=t,this.counter=0,this.storedPosition=0;
}return $traceurRuntime.createClass(t,{read:function(){for(var t=void 0!==arguments[0]?arguments[0]:1,e="",n=this.counter,i=0;t>i;i+=1){
var r=this.text[n+i];if(void 0===r)break;e+=r,this.counter+=1}return""===e?null:e;
},peek:function(){for(var t=void 0!==arguments[0]?arguments[0]:1,e="",n=0;t>n;n+=1){
var i=this.text[this.counter+n];if(void 0===i)break;e+=i}return""===e?null:e},storePosition:function(){
this.storedPosition=this.counter},restorePosition:function(){this.counter=this.storedPosition;
}},{})}(),e=t;return{get default(){return e}}}),System.registerModule("classes/undo-manager",[],function(){
"use strict";var t={label:"Sample label",icon:"stub",undo:function(){},redo:function(){}
},e=function(){function e(){this._entries=[],this._position=0}return $traceurRuntime.createClass(e,{
get undoLabel(){if(this.canUndo()){var t=this._entries[this._position-1];if(t[0]&&t[0].label)return"Undo: "+t[0].label;
}return"Undo"},set undoLabel(t){throw new Error("undoLabel property is read-only");
},get redoLabel(){if(this.canRedo()){var t=this._entries[this._position];if(t[0]&&t[0].label)return"Redo: "+t[0].label;
}return"Redo"},set redoLabel(t){throw new Error("redoLabel property is read-only");
},register:function(e){e.__proto__=t,this._position<this._entries.length&&(this._entries=this._entries.slice(0,this._position));
var n=[];this._entries.push(n),this._position+=1,n.push(e)},undo:function(){if(this.canUndo()){
var t=this._entries[this._position-1],e=$traceurRuntime.spread(t).reverse(),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
o.undo()}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}this._position-=1}},redo:function(){if(this.canRedo()){var t=this._entries[this._position],e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;
s.redo()}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]()}finally{
if(n)throw i}}this._position+=1}},reset:function(){this._entries=[],this._position=0;
},canUndo:function(){return 0===this._position?!1:!0},canRedo:function(){return this._position===this._entries.length?!1:!0;
}},{})}(),n=e;return{get default(){return n}}}),System.registerModule("classes/vector",[],function(){
"use strict";var t=System.get("utils/dom").createSVGPoint,e=System.get("utils/type").isNumber,n=Math.sqrt,i="Invalid argument passed to Vector contstructor",r=function(){
function r(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)this.x=0,
this.y=0;else if(1===t.length){if(!e(t[0].x)||!e(t[0].y))throw new Error(i);this.x=t[0].x,
this.y=t[0].y}else{if(2!==t.length)throw new Error(i);if(e(t[0])&&e(t[1]))this.x=t[0],
this.y=t[1];else{if(!(t[0]instanceof SVGPoint&&t[1]instanceof SVGPoint))throw new Error(i);
var r=t[0],a=t[1];this.x=a.x-r.x,this.y=a.y-r.y}}}return $traceurRuntime.createClass(r,{
get length(){return n(this.x*this.x+this.y*this.y)},set length(t){0!==this.length&&(t/=this.length,
this.x=this.x*t,this.y=this.y*t)},getNormalVector:function(){return new r(-this.y,this.x);
},getOppositeVector:function(){return new r(-this.x,-this.y)},negate:function(){var t=this.multiply(-1);
return t},multiply:function(t){return new r(this.x*t,this.y*t)},multiplySelf:function(t){
return this.x=this.x*t,this.y=this.y*t,this},divide:function(t){return new r(this.x/t,this.y/t);
},divideSelf:function(t){return this.x=this.x/t,this.y=this.y/t,this},normalize:function(){
return 0===this.length?new r(this):new r(this.x/this.length,this.y/this.length)},
scale:function(t){return 0===this.length?new r(this):(t/=this.length,new r(this.x*t,this.y*t));
},transformPoint:function(e){return t(e.x+this.x,e.y+this.y)},toString:function(){
return"("+this.x+", "+this.y+")"}},{})}(),a=r;return{get default(){return a}}}),System.registerModule("elements/bx-aboutbody",[],function(){
"use strict";var t=System.get("elements/bx-body")["default"],e=System.get("utils/dom").registerElement,n='\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-aboutbody.css");</style>\n\n  <main>\n    <div id="titlebar" hidden></div>\n    <img id="logo" src="images/logo.svg"></img>\n\n    <div id="headings">\n      <h1 id="app-name">Boxy SVG</h1>\n      <h2 id="version"></h2>\n    </div>\n\n    <div id="scroll">\n      <h3>Authors</h3>\n      <ul>\n        <li><a href="http://foksa.name/">Jarosław Foksa</a></li>\n      </ul>\n\n      <h3>Powered by</h3>\n      <ul id="powered-by">\n        <li><a href="http://www.chromium.org/">Chromium</a></li>\n        <li><a href="http://electron.atom.io/">Electron</a></li>\n        <li><a href="https://nodejs.org/">Node.js</a></li>\n      </ul>\n\n      <h3>Special thanks</h3>\n      <dl>\n        <dt><a href="https://github.com/DmitryBaranovskiy">Dmitry Baranovskiy</a></dt>\n        <dd><a href="http://raphaeljs.com/">Raphaël</a></dd>\n\n        <dt><a href="http://bost.ocks.org/mike/">Mike Bostock</a></dt>\n        <dd><a href="https://gist.github.com/mbostock/8027637">Closest point on path algorithm</a></dd>\n\n        <dt><a href="http://xn--dahlstrm-t4a.net/">Erik Dahlström</a></dt>\n        <dd><a href="http://xn--dahlstrm-t4a.net/svg/path/donut-shop.html">Ring shape</a></dd>\n\n        <dt><a href="http://ariya.blogspot.com/">Ariya Hidayat</a></dt>\n        <dd>HSV↔HSL conversion code</dd>\n\n        <dt><a href="http://www.paulirish.com">Paul Irish</a></dt>\n        <dd><a href="http://www.paulirish.com/2009/random-hex-color-code-snippets/">Random Color Generator</a></dd>\n\n        <dt><a href="http://mjijackson.com/">Michael Jackson</a></dt>\n        <dd>HSV↔RGB↔HSL conversion code</dd>\n\n        <dt>\n          <a href="http://scratchdisk.com/">Jürg Lehni</a> and\n          <a href="http://jonathanpuckey.com/">Jonathan Puckey</a></a>\n        </dt>\n        <dd><a href="http://paperjs.org/">Paper.js</a></dd>\n\n        <dt><a href="http://tmotooka.hatenablog.jp/">Tadahisa Motooka</a></dt>\n        <dd><a href="https://github.com/motooka/SVGPathNormalizer">SVGPathNormalizer</a></dd>\n\n        <dt><a href="https://github.com/kennethormandy">Kenneth Ormandy</a></dt>\n        <dd><a href="https://github.com/kennethormandy/normalize-opentype.css">Normalize OpenType</a></dd>\n\n        <dt><a href="https://github.com/gwynne">Gwynne Raskind</a></dt>\n        <dd>Base64 encoding code</dd>\n\n        <dt><a href="https://github.com/progers">Philip Rogers</a></dt>\n        <dd><a href="https://github.com/progers/pathseg">SVGPathSeg polyfill</a></dd>\n\n        <dt><a href="http://svg-whiz.com/">Doug Schepers</a></dt>\n        <dd><a href="http://svg-whiz.com/experiments.html">Star shape</a></dd>\n\n        <dt>Philip J. Schneider</dt>\n        <dd>Bezier curve fitting algorithm</dd>\n\n        <dt><a href="https://github.com/johan">Johan Sundström</a></dt>\n        <dd>Path normalization code</dd>\n\n        <dt>\n          <a href="https://github.com/andr83">Andrey Tupitsin</a> and\n          <a href="https://github.com/puzrin">Vitaly Puzrin</a>\n        </dt>\n        <dd><a href="http://nodeca.github.io/pako/">Pako</a></dd>\n      </dl>\n    </div>\n\n    <h2 id="copyright">© '+(new Date).getFullYear()+" Jarosław Foksa</h2>\n  </main>\n",i=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;$traceurRuntime.superGet(this,e.prototype,"createdCallback").call(this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=n;
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this.bridge.postMessage("getAppVersion",null,function(e){return t["#version"].textContent="Version "+e;
}),this.bridge.postMessage("getAppName",null,function(e){return t["#app-name"].textContent=e;
}),this.bridge.postMessage("getBackendName",null,function(e){return t["#titlebar"].hidden="electron"!==e;
}),this._shadowRoot.addEventListener("click",function(e){return t._onShadowRootClick(e);
})},_onShadowRootClick:function(t){"a"===t.target.localName&&t.target.href&&(t.preventDefault(),
this.bridge.postMessage("openExternalURL",t.target.href))}},{},t)}(t),r=e("body","bx-aboutbody",i);
return{get default(){return r}}}),System.registerModule("elements/bx-alignmentselect",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e='\n  <style>\n    @import url("stylesheets/bx-alignmentselect.css");\n  </style>\n\n  <main>\n    <svg viewBox="10 10 280 280">\n      <rect id="outline" x="50" y="50" width="200" height="200"></rect>\n\n      <g id="buttons">\n        <g class="button" data-value="xMinYMin" transform="translate(0, 0)">\n          <title>Blah</title>\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMidYMin" transform="translate(100, 0)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMaxYMin" transform="translate(200, 0)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMinYMid" transform="translate(0, 100)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMidYMid" transform="translate(100, 100)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMaxYMid" transform="translate(200, 100)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMinYMax" transform="translate(0, 200)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMidYMax" transform="translate(100, 200)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMaxYMax" transform="translate(200, 200)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n      </g>\n    </svg>\n  </main>\n',n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=e;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this["#buttons"].addEventListener("click",function(e){return t._onButtonsClick(e);
}),this._onValuePropertyChange()},attributeChangedCallback:function(t,e,n){e!==n&&"value"===t&&this._onValuePropertyChange();
},get value(){return this.getAttribute("value")},set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t);
},_onValuePropertyChange:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#buttons"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.getAttribute("data-value")===this.value?a.setAttribute("pressed",""):a.removeAttribute("pressed");
}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_onButtonsClick:function(t){var e=t.target.closest(".button");this.value=e.getAttribute("data-value"),
this.dispatchEvent(new CustomEvent("change"))}},{},t)}(HTMLElement),i=t("bx-alignmentselect",n);
return{get default(){return i}}}),System.registerModule("elements/bx-alphaslider",[],function(){
"use strict";var t=System.get("utils/color").parseColor,e=System.get("utils/dom").registerElement,n=System.get("utils/math").normalize,i=Number.parseFloat,r=!1,a='\n<style>\n  @import url("stylesheets/bx-alphaslider.css");\n</style>\n\n<main>\n  <canvas id="canvas"></canvas>\n  <div id="marker"></div>\n</main>\n',s=function(e){
function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)}return $traceurRuntime.createClass(s,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=a;var e=!0,n=!1,i=void 0;try{for(var r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){
var o=r.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this["#canvas"].addEventListener("mousedown",function(e){return t._onMouseDown(e);
})},attributeChangedCallback:function(t,e,n){e!==n&&("alpha"===t?this._onAlphaChange():"color"===t&&this._onColorChange());
},get alpha(){return this.hasAttribute("alpha")?i(this.getAttribute("alpha")):1},
set alpha(t){this.setAttribute("alpha",t)},get color(){return this.hasAttribute("color")?this.getAttribute("color"):"#ffffff";
},set color(t){this.setAttribute("color",t)},_onMouseDown:function(t){var e=this;this.dispatchEvent(new CustomEvent("markerdragstart"));
var n,i,r,a=this["#canvas"].getBoundingClientRect().left;this._onMarkerDrag(t.clientX-a),
window.addEventListener("mousemove",n=function(t){t.clientX!==r&&(r=t.clientX,e._onMarkerDrag(t.clientX-a));
}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),e.dispatchEvent(new CustomEvent("markerdragend"));
})},_onMarkerDrag:function(e){var i=n(e/this["#canvas"].clientWidth,0,1,2);if(this.alpha!==i&&(this.alpha=i,
this.dispatchEvent(new CustomEvent("markerdrag",{detail:this.alpha})),r)){var a=t(this.color);
a.a=i,console.log("%c     ","background: "+a,"alpha = "+i)}},_onAlphaChange:function(){
var t=n(this.alpha,0,1,2);this["#marker"].style.left=100*t+"%"},_onColorChange:function(){
var e=this["#canvas"].width=800,n=this["#canvas"].height=100,i=this["#canvas"].getContext("2d");
if(i.clearRect(0,0,e,n),null!==this.color){var r=t(this.color),a=r.clone();a.a=0;var s=r.clone();
s.a=1;var o=i.createLinearGradient(0,0,e,0);o.addColorStop(0,a.toString()),o.addColorStop(1,s.toString()),
i.fillStyle=o,i.fillRect(0,0,e,n)}}},{},e)}(HTMLElement),o=e("bx-alphaslider",s);return{
get default(){return o}}}),System.registerModule("elements/bx-arrangementcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select");var t=System.get("utils/bbox").getClientBBox,e=System.get("utils/rect").getBiggestRect,n=System.get("utils/dom"),i=n.registerElement,r=n.createSVGMatrix,a=n.createSVGRect,s=System.get("utils/rect"),o=s.combineRects,l=s.transformRect,u=System.get("utils/time").throttle,c='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-arrangementcontrols.css");\n</style>\n\n<section id="align">\n  <h2 id="align-section-header">Align</h2>\n\n  <bx-select id="align-to-select" value="first-selected">\n    <bx-selectitem value="first-selected" label="To first selected"></bx-selectitem>\n    <bx-selectitem value="last-selected" label="To last selected"></bx-selectitem>\n    <bx-selectitem value="biggest-selected" label="To biggest selected"></bx-selectitem>\n    <bx-selectitem value="view-box" label="To view box"></bx-selectitem>\n  </bx-select>\n\n  <bx-checkbox\n    id="align-individually-checkbox"\n    label="Align each element individually">\n  </bx-checkbox>\n\n  <div id="align-buttons">\n    <div id="align-inside-buttons">\n      <div class="column">\n        <bx-button\n          id="move-left-button"\n          tooltip="Align Left"\n          icon="move-left"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n\n      <div class="column">\n        <bx-button\n          id="move-top-button"\n          tooltip="Align Top"\n          icon="move-top"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="move-bottom-button"\n          tooltip="Align Bottom"\n          icon="move-bottom"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n\n      <div class="column">\n        <bx-button\n          id="move-right-button"\n          tooltip="Align Right"\n          icon="move-right"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </div>\n\n    <div id="center-buttons">\n      <bx-button\n        id="center-horizontally-button"\n        tooltip="Center Horizontally"\n        icon="center-horizontally"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="center-vertically-button"\n        tooltip="Center Vertically"\n        icon="center-vertically"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n    </div>\n\n    <div id="stretch-buttons">\n      <bx-button\n        id="stretch-horizontally-button"\n        tooltip="Stretch horizontally (align left and right)"\n        icon="stretch-horizontally"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="stretch-vertically-button"\n        tooltip="Stretch vertically (align left and right)"\n        icon="stretch-vertically"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </div>\n</section>\n\n<section id="transform-section">\n  <h2 id="transform-section-header">Transform</h2>\n\n  <div id="transform-section-buttons" class="buttons-row">\n    <bx-button\n      id="rotate-counterclockwise-button"\n      icon="rotate-counterclockwise"\n      iconsize="30"\n      title="Rotate element(s) counter-clockwise by 90°"\n      skin="iconic"\n      label="Rotate by -90°">\n    </bx-button>\n\n    <bx-button\n      id="rotate-clockwise-button"\n      icon="rotate-clockwise"\n      iconsize="30"\n      title="Rotate element(s) clockwise by 90°"\n      skin="iconic"\n      label="Rotate by +90°">\n    </bx-button>\n\n    <bx-button\n      id="flip-x-button"\n      icon="flip-x"\n      iconsize="30"\n      title="Flip X"\n      skin="iconic"\n      label="Flip X">\n    </bx-button>\n\n    <bx-button\n      id="flip-y-button"\n      icon="flip-y"\n      iconsize="30"\n      title="Flip Y"\n      skin="iconic"\n      label="Flip Y">\n    </bx-button>\n  </div>\n</section>\n\n<section id="order-section">\n  <h2 id="order-section-header">Z-order</h2>\n\n  <div id="order-section-buttons" class="buttons-row">\n    <bx-button\n      id="raise-button"\n      icon="raise"\n      iconsize="30"\n      title="Raise Selection"\n      skin="iconic"\n      label="Raise">\n    </bx-button>\n\n    <bx-button\n      id="lower-button"\n      icon="lower"\n      iconsize="30"\n      title="Lower Selection"\n      skin="iconic"\n      label="Lower">\n    </bx-button>\n\n    <bx-button\n      id="raise-to-front-button"\n      icon="raise-to-front"\n      iconsize="30"\n      title="Raise Selection to Front"\n      skin="iconic"\n      label="Raise to Front">\n    </bx-button>\n\n    <bx-button\n      id="lower-to-back-button"\n      icon="lower-to-bottom"\n      iconsize="30"\n      title="Lower Selection to Bottom"\n      skin="iconic"\n      label="Lower to Bottom">\n    </bx-button>\n  </div>\n</section>\n',d=function(n){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=c;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this["#align-buttons"].addEventListener("click",function(e){
"bx-button"===e.target.localName&&t._onAlignButtonClick(e.target)}),this["#align-to-select"].addEventListener("change",function(){
return t._onAlignToSelectChange()}),this["#align-individually-checkbox"].addEventListener("change",function(){
return t._onAlignIndividuallyCheckboxChange()}),this["#lower-button"].addEventListener("click",function(e){
return t._onLowerButtonClick(e)}),this["#raise-button"].addEventListener("click",function(e){
return t._onRaiseButtonClick(e)}),this["#lower-to-back-button"].addEventListener("click",function(e){
return t._onLowerToBackButtonClick(e)}),this["#raise-to-front-button"].addEventListener("click",function(e){
return t._onRaiseToFrontButtonClick(e)}),this["#rotate-counterclockwise-button"].addEventListener("click",function(){
return t._onRotateByMinus90DegButtonClick()}),this["#rotate-clockwise-button"].addEventListener("click",function(){
return t._onRotateByPlus90DegButtonClick()}),this["#flip-x-button"].addEventListener("click",function(e){
return t._onFlipXButtonClick(e)}),this["#flip-y-button"].addEventListener("click",function(e){
return t._onFlipYButtonClick(e)}),this._updateWidgets_250ms=u(this._updateWidgets,250,this),
body.getConfig("bx-arrangementcontrols:relativeTo").then(function(e){null!==e&&(t["#align-to-select"].value=e);
}),body.getConfig("bx-arrangmentControls:alignIndividually").then(function(e){(e===!0||e===!1)&&(t["#align-individually-checkbox"].checked=e);
})},enabledCallback:function(){var t=this;this._updateWidgets(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._updateWidgets_250ms()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(){
t._updateWidgets_250ms()})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onAlignToSelectChange:function(){this._updateAlignSection(),body.setConfig("bx-arrangementcontrols:relativeTo",this["#align-to-select"].value);
},_onAlignIndividuallyCheckboxChange:function(){body.setConfig("bx-arrangmentControls:alignIndividually",this["#align-individually-checkbox"].checked);
},_onAlignButtonClick:function(n){body.canvas.undoManager.checkpoint("Align");var i=this["#align-to-select"].value,r=this["#align-individually-checkbox"].checked,s=n.id.split("-button")[0];
if("view-box"===i){var o=body.canvas.currentArtboard.getScreenCTM(),u=a(body.canvas.currentArtboard.viewBox),c=l(u,o);
this._alignElementsToBBox(body.canvas.selectedElements,c,s,r)}else if("first-selected"===i){
var d=body.canvas.selectedElements[0],h=body.canvas.selectedElements.slice(1),v=t(d);
this._alignElementsToBBox(h,v,s,r)}else if("last-selected"===i){var f=body.canvas.selectedElements[body.canvas.selectedElements.length-1],m=body.canvas.selectedElements.slice(0,body.canvas.selectedElements.length-1),g=t(f);
this._alignElementsToBBox(m,g,s,r)}else if("biggest-selected"===i){var b=$traceurRuntime.spread(body.canvas.selectedElements),p=b.map(function(e){
return t(e)}),y=e(p),_=b[p.indexOf(y)],x=b.filter(function(t){return t!==_}),w=t(_);
this._alignElementsToBBox(x,w,s,r)}},_alignElementsToBBox:function(e,n,i){var a=void 0!==arguments[3]?arguments[3]:!0;
if(a===!0){var s=!0,l=!1,u=void 0;try{for(var c=void 0,d=e[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){
var h=c.value,v=r(h.transform.baseVal.consolidate().matrix),f=h.getScreenCTM(),m=f.inverse(),g=t(h),b=0,p=0,y=1,_=1;
"move-left"===i?b=n.x-g.x:"move-right"===i?b=n.x+n.width-(g.x+g.width):"move-top"===i?p=n.y-g.y:"move-bottom"===i?p=n.y+n.height-(g.y+g.height):"center-horizontally"===i?b=n.x-g.x+n.width/2-g.width/2:"center-vertically"===i?p=n.y-g.y+n.height/2-g.height/2:"stretch-horizontally"===i?(y=n.width/g.width,
b=n.x-g.x*y):"stretch-vertically"===i&&(_=n.height/g.height,p=n.y-g.y*_);var x=v.multiply(m);
x.translateSelf(b,p),x.scaleNonUniformSelf(y,_),x.multiplySelf(f),h.setAttribute("transform",x.toString());
}}catch(w){l=!0,u=w}finally{try{s||null==d["return"]||d["return"]()}finally{if(l)throw u;
}}}else if(a===!1){var S=function(){var n=0,i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[n++]=t(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return i}(),C=o(S),E=0,k=0,A=1,L=1;"move-left"===i?E=n.x-C.x:"move-right"===i?E=n.x+n.width-(C.x+C.width):"move-top"===i?k=n.y-C.y:"move-bottom"===i?k=n.y+n.height-(C.y+C.height):"center-horizontally"===i?E=n.x-C.x+n.width/2-C.width/2:"center-vertically"===i?k=n.y-C.y+n.height/2-C.height/2:"stretch-horizontally"===i?(A=n.width/C.width,
E=n.x-C.x*A):"stretch-vertically"===i&&(L=n.height/C.height,k=n.y-C.y*L);var M=!0,j=!1,T=void 0;
try{for(var P=void 0,R=e[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){var O=P.value,I=r(O.transform.baseVal.consolidate().matrix),D=O.getScreenCTM(),V=D.inverse(),N=I.multiply(V);
N.translateSelf(E,k),N.scaleNonUniformSelf(A,L),N.multiplySelf(D),O.setAttribute("transform",N.toString());
}}catch(B){j=!0,T=B}finally{try{M||null==R["return"]||R["return"]()}finally{if(j)throw T;
}}}},_onRaiseButtonClick:function(){0===event.button&&body.commands.raise.exec()},
_onLowerButtonClick:function(){0===event.button&&body.commands.lower.exec()},_onRaiseToFrontButtonClick:function(){
0===event.button&&body.commands.raiseToFront.exec()},_onLowerToBackButtonClick:function(){
0===event.button&&body.commands.lowerToBack.exec()},_onRotateByMinus90DegButtonClick:function(){
0===event.button&&body.commands.rotateCounterclockwise.exec()},_onRotateByPlus90DegButtonClick:function(){
0===event.button&&body.commands.rotateClockwise.exec()},_onFlipXButtonClick:function(t){
0===t.button&&body.commands.flipX.exec()},_onFlipYButtonClick:function(t){0===t.button&&body.commands.flipY.exec();
},_updateWidgets:function(){this._updateAlignSection(),this._updateOrderSection(),
this._updateTransformSection()},_updateAlignSection:function(){if(0===body.canvas.selectedElements.length)this["#align-section-header"].disabled=!0,
this["#align-to-select"].disabled=!0,this["#align-individually-checkbox"].disabled=!0,
this._disableAlignButtons();else if(1===body.canvas.selectedElements.length){this["#align-section-header"].disabled=!1,
this["#align-to-select"].disabled=!1,this["#align-individually-checkbox"].disabled=!1;
var t=this["#align-to-select"].value;"view-box"===t?this._enableAlignButtons():this._disableAlignButtons();
}else this["#align-section-header"].disabled=!1,this["#align-to-select"].disabled=!1,
this["#align-individually-checkbox"].disabled=!1,this._enableAlignButtons()},_updateOrderSection:function(){
this["#raise-button"].disabled=!body.commands.raise.enabled(),this["#lower-button"].disabled=!body.commands.lower.enabled(),
this["#raise-to-front-button"].disabled=!body.commands.raiseToFront.enabled(),this["#lower-to-back-button"].disabled=!body.commands.lowerToBack.enabled(),
this["#order-section-header"].disabled=this["#raise-button"].disabled&&this["#lower-button"].disabled&&this["#raise-to-front-button"].disabled&&this["#lower-to-back-button"].disabled;
},_updateTransformSection:function(){this["#rotate-counterclockwise-button"].disabled=!body.commands.rotateCounterclockwise.enabled(),
this["#rotate-clockwise-button"].disabled=!body.commands.rotateClockwise.enabled(),
this["#flip-x-button"].disabled=!body.commands.flipX.enabled(),this["#flip-y-button"].disabled=!body.commands.flipY.enabled(),
this["#transform-section-header"].disabled=this["#rotate-counterclockwise-button"].disabled&&this["#rotate-clockwise-button"].disabled&&this["#flip-x-button"].disabled&&this["#flip-y-button"].disabled;
},_enableAlignButtons:function(){this["#move-left-button"].disabled=!1,this["#move-right-button"].disabled=!1,
this["#move-top-button"].disabled=!1,this["#move-bottom-button"].disabled=!1,this["#center-horizontally-button"].disabled=!1,
this["#center-vertically-button"].disabled=!1,this["#stretch-horizontally-button"].disabled=!1,
this["#stretch-vertically-button"].disabled=!1},_disableAlignButtons:function(){this["#move-left-button"].disabled=!0,
this["#move-right-button"].disabled=!0,this["#move-top-button"].disabled=!0,this["#move-bottom-button"].disabled=!0,
this["#center-horizontally-button"].disabled=!0,this["#center-vertically-button"].disabled=!0,
this["#stretch-horizontally-button"].disabled=!0,this["#stretch-vertically-button"].disabled=!0;
}},{},n)}(HTMLElement),h=i("bx-arrangementcontrols",d);return{get default(){return h;
}}}),System.registerModule("elements/bx-body",[],function(){"use strict";var t=System.get("classes/bridge")["default"],e=System.get("classes/shortcut")["default"],n=System.get("utils/dom"),i=n.createElement,r=n.registerElement,a=Object,s=(a.entries,
a.observe,navigator.platform,function(n){function r(){$traceurRuntime.superConstructor(r).apply(this,arguments);
}return $traceurRuntime.createClass(r,{createdCallback:function(){var e=this;this.bridge=new t,
this.tabIndex=-1,this.commands={},this.mouseClientX=0,this.mouseClientY=0,this.mouseIsDown=!1,
this._cursors=[],this._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},this.bridge.postMessage("getBackendName",null,function(t){
return e._backendName=t}),this.bridge.addMessageListener("execCommand",function(t){
return e.execCommand(t)}),this.bridge.addMessageListener("validateCommand",function(t,n){
return n(e.validateCommand(t))}),this.bridge.addMessageListener("configChanged",function(t){
e.dispatchEvent(new CustomEvent("configchange",{detail:t}))})},attachedCallback:function(){
var t=this;window.addEventListener("keydown",this._keyDownListener=function(e){return t._onKeyDown(e);
}),window.addEventListener("keyup",this._keyUpListener=function(e){return t._onKeyUp(e);
}),window.addEventListener("blur",this._blurListener=function(e){return t._onBlur(e);
}),window.addEventListener("mousedown",this._mouseDownListener=function(e){return t.mouseIsDown=!0;
}),window.addEventListener("mouseup",this._mouseUpListener=function(e){return t.mouseIsDown=!1;
}),window.addEventListener("mousemove",this._mouseMoveListener=function(e){t.mouseClientX=e.clientX,
t.mouseClientY=e.clientY}),window.addEventListener("drop",this._dropListener=function(e){
t.mouseClientX=e.clientX,t.mouseClientY=e.clientY}),window.addEventListener("dragend",this._dragEndListener=function(e){
t.mouseIsDown=!1}),"electron"===this.bridge.name&&window.addEventListener("beforeunload",this._beforeUnloadListener=function(){
t._cursorStyle.innerHTML=""}),this.focus()},detachedCallback:function(){window.removeEventListener("keydown",this._keyDownListener),
window.removeEventListener("keyup",this._keyUpListener),window.removeEventListener("blur",this._blurListener),
window.removeEventListener("drop",this._dropListener),window.removeEventListener("mousedown",this._mouseDownListener),
window.removeEventListener("mousemove",this._mouseMoveListener),window.removeEventListener("mouseup",this._mouseUpListener),
window.removeEventListener("dragend",this._dragEndListener),"electron"===this.bridge.name&&window.removeEventListener("beforeunload",this._beforeUnloadListener);
},get modKeys(){var t=this._modKeys,e=t.ctrl,n=t.alt,i=t.meta,r=t.shift;return{ctrl:e,
alt:n,meta:i,shift:r}},set modKeys(t){throw new Error("modKeys property is read-only");
},getConfig:function(t){var e=this;return new Promise(function(n){e.bridge.postMessage("getConfig",t,function(t){
n(t)})})},setConfig:function(t,e){var n=this;return new Promise(function(i){n.bridge.postMessage("setConfig",{
key:t,value:e},function(){i()})})},registerCursor:function(t){var e=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:0,i=void 0!==arguments[3]?arguments[3]:0;
t.includes("/")&&(t="url("+t+") "+n+" "+i+", auto");var r={name:t,weight:e};return this._cursors.push(r),
this._updateCursorStyle(),r},unregisterCursor:function(t){this._cursors=this._cursors.filter(function(e){
return e!==t}),this._updateCursorStyle()},execCommand:function(t){for(var e=document.activeElement;e._shadowRoot&&e._shadowRoot.activeElement;)e=e._shadowRoot.activeElement;
for(var n=e;n;n=n.parentNode||n.host)if(n.commands&&n.commands[t]){var i=n.commands[t];
if(i){(!i.enabled||i.enabled())&&i.exec();break}}},validateCommand:function(t){for(var e=document.activeElement;e._shadowRoot&&e._shadowRoot.activeElement;)e=e._shadowRoot.activeElement;
for(var n=e;n;n=n.parentNode||n.host)if(n.commands&&n.commands[t]){var i=n.commands[t];
if(i)return!i.enabled||i.enabled()}return!0},_onKeyDown:function(t){var n=e.fromEvent(t);
(n.ctrl!==this._modKeys.ctrl||n.alt!==this._modKeys.alt||n.meta!==this._modKeys.meta||n.shift!==this._modKeys.shift)&&(this._modKeys={
ctrl:n.ctrl,alt:n.alt,meta:n.meta,shift:n.shift},this.dispatchEvent(new CustomEvent("modkeyschange"))),
"chrome"===this._backendName&&(n.matches("Control","Z")||n.matches("Control","Shift","Z")||n.matches("Control","X")||n.matches("Control","C")||n.matches("Control","V")||n.matches("Control","A"))&&t.preventDefault();
},_onKeyUp:function(t){var n=e.fromEvent(t),i=n.ctrl,r=n.alt,a=n.meta,s=n.shift;(i!==this._modKeys.ctrl||r!==this._modKeys.alt||a!==this._modKeys.meta||s!==this._modKeys.shift)&&(this._modKeys={
ctrl:i,alt:r,meta:a,shift:s},this.dispatchEvent(new CustomEvent("modkeyschange")));
},_onBlur:function(t){var e=this._modKeys,n=e.ctrl,i=e.alt,r=e.meta,a=e.shift;(n||i||r||a)&&(this._modKeys={
ctrl:!1,alt:!1,meta:!1,shift:!1},this.dispatchEvent(new CustomEvent("modkeyschange")));
},_updateCursorStyle:function(){var t=$traceurRuntime.spread(this._cursors);if(t.sort(function(t,e){
return t.weight>e.weight?1:t.weight<e.weight?-1:0}),this._cursorStyle||(this._cursorStyle=i("style"),
this._cursorStyle.id="cursor-style",this.prepend(this._cursorStyle)),t.length>0){
var e=t[t.length-1].name;this._cursorStyle.innerHTML="* {cursor: "+e+"!important}";
}else this._cursorStyle.innerHTML=""}},{},n)}(HTMLBodyElement)),o=r("bx-body",s);return{
get default(){return o}}}),System.registerModule("elements/bx-breadcrumb",[],function(){
"use strict";System.get("elements/bx-breadcrumbitem");var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("utils/time").debounce,r='\n  <style>@import url("stylesheets/bx-breadcrumb.css");</style>\n  <main id="main"></main>\n',a=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){n=!0,a=u}finally{try{e||null==o["return"]||o["return"]();
}finally{if(n)throw a}}this._update80ms=i(this._update,80,this),this["#main"].addEventListener("click",function(e){
return t._onItemClick(e)})},attachedCallback:function(){var t=this;body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._update80ms()}),body.canvas.addEventListener("currentcontainerchange",this._currentContainerChangeListener=function(){
t._update80ms()})},detachedCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("currentcontainerchange",this._currentContainerChangeListener);
},_onItemClick:function(t){var e=t.target,n=e.ref;n===body.canvas.currentArtboard?(body.canvas.selectedElements=[],
body.canvas.currentContainer=null):n===body.canvas.masterArtboard?("symbol"===body.canvas.currentArtboard.contentType?body.canvas.editSymbolEnd():"pattern"===body.canvas.currentArtboard.contentType&&body.canvas.editPatternEnd(),
body.canvas.selectedElements=[],body.canvas.currentContainer=null):(body.canvas.selectedElements=[n],
body.canvas.currentContainer=n.parentElement===body.canvas.currentArtboard?null:n.parentElement);
},_update:function(){var t=this,n=[body.canvas.masterArtboard];if(body.canvas.currentArtboard!==body.canvas.masterArtboard&&n.push(body.canvas.currentArtboard),
body.canvas.currentContainer){for(var i=[],r=body.canvas.currentContainer;r!==body.canvas.currentArtboard;r=r.parentElement)i.unshift(r);
n=$traceurRuntime.spread(n,i)}for(body.canvas.selectedElements.length>0&&n.push(body.canvas.selectedElements[0]);this["#main"].childElementCount>n.length;)this["#main"].lastElementChild.remove();
for(;this["#main"].childElementCount<n.length;)this["#main"].append(e("bx-breadcrumbitem"));
n.forEach(function(e,n){var i=t["#main"].children[n];i.ref=e});var a=null;body.canvas.selectedElements.length>0?a=body.canvas.selectedElements[0]:body.canvas.currentContainer||(a=body.canvas.currentArtboard);
var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=this["#main"].children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.highlighted=d.ref===a}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}}},{},t)}(HTMLElement),s=n("bx-breadcrumb",a);return{get default(){
return s}}}),System.registerModule("elements/bx-breadcrumbitem",[],function(){"use strict";
var t=System.get("utils/dom").registerElement,e=System.get("utils/string").capitalize,n='\n  <style>@import url("stylesheets/bx-breadcrumbitem.css");</style>\n\n  <main>\n    <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n      <use id="use" width="100" height="100"></use>\n    </svg>\n\n    <div id="label"></div>\n  </main>\n',i=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=n;var t=!0,e=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){e=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw i}}this._ref=null},attributeChangedCallback:function(t,e,n){e!==n&&"hidden"===t&&this._onHiddenChange();
},get ref(){return this._ref},set ref(t){this._ref=t,this._onRefChange()},get mixed(){
return this.hasAttribute("mixed")},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},_onRefChange:function(){var t=this._ref;if(t){var n=t.getAttribute("is");if("g"===t.localName)"bx-svgartboard"===n?(this["#label"].textContent="SVG",
this["#use"].setAttribute("href","images/icons.svg#object-svg")):"bx-symbolartboard"===n?(this["#label"].textContent="Symbol",
this["#use"].setAttribute("href","images/icons.svg#object-symbol")):"bx-patternartboard"===n?(this["#label"].textContent="Pattern",
this["#use"].setAttribute("href","images/icons.svg#object-pattern")):(this["#label"].textContent="Group",
this["#use"].setAttribute("href","images/icons.svg#object-group"));else if("a"===t.localName)this["#label"].textContent="Anchor",
this["#use"].setAttribute("href","images/icons.svg#object-anchor");else if("path"===t.localName)"bx-rectpath"===n?(this["#label"].textContent="Rect",
this["#use"].setAttribute("href","images/icons.svg#object-rect")):"bx-ringpath"===n?(this["#label"].textContent="Ring",
this["#use"].setAttribute("href","images/icons.svg#object-ring")):"bx-starpath"===n?(this["#label"].textContent="Star",
this["#use"].setAttribute("href","images/icons.svg#object-star")):(this["#label"].textContent="Path",
this["#use"].setAttribute("href","images/icons.svg#object-path"));else if("ellipse"===t.localName)this["#label"].textContent="Ellipse",
this["#use"].setAttribute("href","images/icons.svg#object-ellipse");else if("text"===t.localName)this["#label"].textContent="Text",
this["#use"].setAttribute("href","images/icons.svg#object-text");else if("image"===t.localName)this["#label"].textContent="Image",
this["#use"].setAttribute("href","images/icons.svg#object-image");else if("use"===t.localName){
var i=body.canvas.content.querySelector(t.href.baseVal);this["#use"].setAttribute("href","images/icons.svg#object-symbol"),
i&&"symbol"===i.localName?this["#label"].textContent="Symbol Use":this["#label"].textContent="Use";
}else"foreignObject"===t.localName?(this["#label"].textContent="Foreign Object",this["#use"].setAttribute("href","images/icons.svg#object-image")):"svg"===t.localName?(this["#label"].textContent="SVG",
this["#use"].setAttribute("href","images/icons.svg#object-svg")):this["#label"].textContent=e(t.localName);
}}},{},t)}(HTMLElement),r=t("bx-breadcrumbitem",i);return{get default(){return r}
}}),System.registerModule("elements/bx-button",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=Number.parseInt,r='\n<style id="stylesheet"></style>\n\n<main>\n  <svg id="icon" preserveAspectRatio="none" viewBox="0 0 100 100">\n    <use id="icon-use" x="0" y="0" width="100%" height="100%"></use>\n  </svg>\n\n  <label id="label"></label>\n</main>\n',a=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=r;var t=!0,e=!1,n=void 0;try{for(var i=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){e=!0,n=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw n}}this._onLabelChange(),this._onIconChange(),this._onIconSizeChange(),
this._onSkinChange()},attributeChangedCallback:function(t,e,n){e!==n&&("label"===t?this._onLabelChange():"icon"===t?this._onIconChange():"iconsize"===t?this._onIconSizeChange():"skin"===t?this._onSkinChange():"hidden"===t&&this._onHiddenChange());
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(t){
this.setAttribute("label",t)},get value(){return this.getAttribute("value")},set value(t){
null===t?this.removeAttribute("value"):this.setAttribute("value",t)},get icon(){return this.hasAttribute("icon")?this.getAttribute("icon"):"stub";
},set icon(t){this.setAttribute("icon",t)},get iconSize(){return this.hasAttribute("iconsize")?i(this.getAttribute("iconsize")):20;
},set iconSize(t){this.setAttribute("iconsize",t)},get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):"horizontal";
},set skin(t){this.setAttribute("skin",t)},get href(){return this.hasAttribute("href")?this.getAttribute("href"):"";
},set href(t){this.setAttribute("href",t)},get pressed(){return this.hasAttribute("pressed")?!0:!1;
},set pressed(t){t===!0?this.setAttribute("pressed",""):this.removeAttribute("pressed");
},get mixed(){return this.hasAttribute("mixed")},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},_onLabelChange:function(){this["#label"].textContent=this.label},_onIconChange:function(){
this["#icon-use"].remove(),this["#icon-use"]=e("svg:use"),this["#icon"].append(this["#icon-use"]),
this["#icon-use"].setAttribute("href","images/icons.svg#"+this.icon)},_onIconSizeChange:function(){
this["#icon"].style.width=this.iconSize+"px",this["#icon"].style.height=this.iconSize+"px";
},_onSkinChange:function(){this["#stylesheet"].innerText='@import url("stylesheets/bx-button@'+this.skin+'.css");';
},_onHiddenChange:function(){this.dispatchEvent(new CustomEvent("hiddenchange",{detail:this,
bubbles:!0}))}},{},t)}(HTMLElement),s=n("bx-button",a);return{get default(){return s;
}}}),System.registerModule("elements/bx-canvas",[],function(){"use strict";System.get("elements/bx-svgartboard"),
System.get("elements/bx-symbolartboard"),System.get("elements/bx-patternartboard"),
System.get("elements/bx-viewboxhud"),System.get("elements/bx-viewboxedithud"),System.get("elements/bx-outlineshud"),
System.get("elements/bx-recthud"),System.get("elements/bx-ellipsehud"),System.get("elements/bx-starhud"),
System.get("elements/bx-ringhud"),System.get("elements/bx-pathsedithud"),System.get("elements/bx-selectedtextrangehud"),
System.get("elements/bx-lineargradienthud"),System.get("elements/bx-radialgradienthud"),
System.get("elements/bx-patternhud"),System.get("elements/bx-transformhud"),System.get("elements/bx-rubberbandhud"),
System.get("elements/bx-cubicsegsdrawhud"),System.get("elements/bx-quadsegsdrawhud"),
System.get("elements/bx-freehandsegsdrawhud"),System.get("elements/bx-guide");var t=System.get("classes/dom-undo-manager")["default"],e=System.get("classes/fonts-manager")["default"],n=System.get("utils/artwork"),i=n.deserializeArtwork,r=n.uncompressArtwork,a=n.resolveConflictingIDs,s=System.get("utils/bbox").getClientBBox,o=System.get("utils/constants"),l=o.SVG_NAMESPACE,u=o.XLINK_NAMESPACE,c=System.get("utils/math").normalize,d=System.get("utils/image").extractImageSize,h=System.get("utils/pattern").getClosestPatternWithChildren,v=System.get("utils/rect"),f=v.transformRect,m=v.combineRects,g=v.rectIntersectsRect,b=System.get("utils/relationship").sortByDomPosition,p=System.get("utils/transform").getTransformToElement,y=System.get("utils/dom"),_=y.closest,x=y.parseSVG,w=y.registerElement,S=y.createElement,C=y.createSVGMatrix,E=y.createSVGPoint,k=y.createSVGRect,A=y.isTransformableElement,L=Math.min,M=Object,j=M.defineProperty,T=M.freeze,P=.39,R=102400,O=20,I=window.screen.width,D=window.screen.height,V={
childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1
},N=[[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[-3,-2],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[-3,-1],[-2,-1],[-1,-1],[0,-1],[1,-1],[2,-1],[3,-1],[-3,0],[-2,0],[-1,0],[0,0],[1,0],[2,0],[3,0],[-3,1],[-2,1],[-1,1],[0,1],[1,1],[2,1],[3,1],[-3,2],[-2,2],[-1,2],[0,2],[1,2],[2,2],[3,2],[-3,3],[-2,3],[-1,3],[0,3],[1,3],[2,3],[3,3]],B='\n  <style>@import url("stylesheets/bx-canvas.css");</style>\n\n  <svg id="svg">\n    <defs>\n      <filter id="grippie-drop-shadow" width="100" height="100">\n        <feGaussianBlur id="grippie-fe-blur" in="SourceAlpha" result="blur-out" stdDeviation="1"/>\n        <feOffset id="grippie-fe-offset" in="blur-out" result="the-shadow" dx="1" dy="1"/>\n        <feBlend in="SourceGraphic" in2="the-shadow" mode="normal"/>\n      </filter>\n    </defs>\n\n    <text title="Dummy text to work around DOM text selection bug" x="99999" y="99999">.</text>\n\n    <g id="content">\n      <polygon id="background" fill="rgba(0,0,0,0)" points="-1000000,-1000000 2000000,0 2000000,20000000, 0,2000000"/>\n    </g>\n\n    <g id="huds">\n      <g id="viewbox-hud" is="bx-viewboxhud"></g>\n      <g id="outlines-hud" is="bx-outlineshud"></g>\n      <g id="transform-hud" is="bx-transformhud"></g>\n      <g id="rect-hud" is="bx-recthud"></g>\n      <g id="ellipse-hud" is="bx-ellipsehud"></g>\n      <g id="star-hud" is="bx-starhud"></g>\n      <g id="ring-hud" is="bx-ringhud"></g>\n      <g id="paths-edit-hud" is="bx-pathsedithud"></g>\n      <g id="selected-text-range-hud" is="bx-selectedtextrangehud"></g>\n      <g id="linear-gradient-fill-hud" is="bx-lineargradienthud" context="fill"></g>\n      <g id="linear-gradient-stroke-hud" is="bx-lineargradienthud" context="stroke"></g>\n      <g id="radial-gradient-fill-hud" is="bx-radialgradienthud" context="fill"></g>\n      <g id="radial-gradient-stroke-hud" is="bx-radialgradienthud" context="stroke"></g>\n      <g id="pattern-fill-hud" is="bx-patternhud" context="fill"></g>\n      <g id="pattern-stroke-hud" is="bx-patternhud" context="stroke"></g>\n      <g id="rubber-band-hud" is="bx-rubberbandhud"></g>\n      <g id="draw-cubic-segs-hud" is="bx-cubicsegsdrawhud"></g>\n      <g id="draw-quad-segs-hud" is="bx-quadsegsdrawhud"></g>\n      <g id="draw-freehand-segs-hud" is="bx-freehandsegsdrawhud"></g>\n      <g id="viewbox-edit-hud" is="bx-viewboxedithud"></g>\n    </g>\n  </svg>\n',z=function(n){
function o(){$traceurRuntime.superConstructor(o).apply(this,arguments)}return $traceurRuntime.createClass(o,{
createdCallback:function(){var n=this;this.innerHTML=B;var i=!0,r=!1,a=void 0;try{
for(var s=void 0,o=this.querySelectorAll("[id]")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=this,f=function(){var t=m.value;
j(v,t.id.toCamelCase(),{get:function(){return t}})},m=void 0,g=this["#huds"].children[Symbol.iterator]();!(c=(m=g.next()).done);c=!0)f();
}catch(b){d=!0,h=b}finally{try{c||null==g["return"]||g["return"]()}finally{if(d)throw h;
}}this["#svg"].setAttribute("width",I+"px"),this["#svg"].setAttribute("height",D+"px"),
this["#svg"].pauseAnimations(),this._undoManager=new t(this["#content"]),this._fontsManager=new e(this),
this._selectedElements=[],this._selectedTextRange=null,this._currentContainer=null,
this._scrollX=0,this._scrollY=0,this._zoom=100,this._hasPointer=!1;var p=new MutationObserver(function(t){
return n._onContentMutation(t)});p.observe(this["#content"],V),this.addEventListener("click",function(t){
return n._onClick(t)}),this.addEventListener("wheel",function(t){return n._onMouseWheel(t);
}),this.addEventListener("scroll",function(){return n._onScroll()}),this.addEventListener("dragover",function(t){
return n._onDragOver(t)}),this.addEventListener("mouseenter",function(){return n._hasPointer=!0;
}),this.addEventListener("mouseleave",function(){return n._hasPointer=!1}),this.addEventListener("drop",function(t){
return n._onDrop(t)}),this._undoManager.addEventListener("undo",function(t){return n._onUndoManagerUndoOrRedo(t);
}),this._undoManager.addEventListener("redo",function(t){return n._onUndoManagerUndoOrRedo(t);
}),this._undoManager.addEventListener("positionchange",function(t){return n._onUndoManagerPositionChange(t);
}),this.enableHud("viewbox-hud")},get zoom(){return this._zoom},set zoom(t){throw new Error("zoom property is read-only");
},get scale(){return this._zoom/100},set scale(t){throw new Error("scale property is read-only");
},get undoManager(){return this._undoManager},set undoManager(t){throw new Error("undoManager property is read-only");
},get fontsManager(){return this._fontsManager},set fontsManager(t){throw new Error("fontsManager property is read-only");
},get selectedElements(){return T($traceurRuntime.spread(this._selectedElements));
},set selectedElements(t){this._selectedElements=t,this.dispatchEvent(new CustomEvent("selectedelementschange"));
},get selectedTextRange(){return this._selectedTextRange?this._selectedTextRange:null;
},set selectedTextRange(t){t?this._selectedTextRange=t:this._selectedTextRange=null,
this.dispatchEvent(new CustomEvent("selectedtextrangechange"))},get currentContainer(){
return this._currentContainer},set currentContainer(t){this._currentContainer=t,this.dispatchEvent(new CustomEvent("currentcontainerchange"));
},get content(){return this["#content"]},set content(t){throw new Error("content property is read-only");
},get masterArtboard(){return this.content.querySelector("g")},set masterArtboard(t){
throw new Error("masterArtboard property is read-only")},get currentArtboard(){return this["#content"].lastElementChild;
},set currentArtboard(t){throw new Error("currentArtboard property is read-only");
},get defs(){return this.masterArtboard.querySelector("defs")},set defs(t){throw new Error("defs property is read-only");
},get huds(){return this["#huds"]},set huds(t){throw new Error("huds property is read-only");
},get hasPointer(){return this._hasPointer},set hasPointer(t){throw new Error("hasPointer property is read-only");
},enableHud:function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#huds"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.id===t&&s.hasAttribute("enabled")===!1&&(s.setAttribute("enabled",""),
s.enabledCallback&&s.enabledCallback())}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},disableHud:function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#huds"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.id===t&&s.hasAttribute("enabled")===!0&&(s.removeAttribute("enabled"),
s.disabledCallback&&s.disabledCallback())}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},editPattern:function(t){var e=this.masterArtboard.querySelector("#"+t);
if(null!==e&&this.currentArtboard.id!==e.id){this.undoManager.checkpoint("Edit Pattern"),
"pattern"===this.currentArtboard.contentType?this.editPatternEnd(!1):"symbol"===this.currentArtboard.contentType&&this.editSymbolEnd(!1);
var n=S("svg:g","bx-patternartboard"),i=["id","class","style","x","y","width","height","patternTransform","patternUnits","patternContentUnits","href","viewBox","preserveAspectRatio"],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
e.hasAttribute(u)&&n.setAttribute(u,e.getAttribute(u))}}catch(c){a=!0,s=c}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}n.innerHTML=(h(e)||e).innerHTML,
this["#content"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,
this.currentArtboard.hasAttribute("viewBox")?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
}},editSymbol:function(t){var e=this.masterArtboard.querySelector("#"+t);if(null!==e&&this.currentArtboard.id!==e.id){
this.undoManager.checkpoint("Edit Symbol"),"pattern"===this.currentArtboard.contentType?this.editPatternEnd(!1):"symbol"===this.currentArtboard.contentType&&this.editSymbolEnd(!1);
var n=S("svg:g","bx-symbolartboard"),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=["id","class","style","viewBox","preserveAspectRatio"][Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e.hasAttribute(l)&&n.setAttribute(l,e.getAttribute(l))}}catch(u){r=!0,
a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}n.innerHTML=e.innerHTML,
this["#content"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,
this.currentArtboard.hasAttribute("viewBox")?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
}},editPatternEnd:function(){var t=void 0!==arguments[0]?arguments[0]:!0;if("pattern"===this.currentArtboard.contentType){
t&&this.undoManager.checkpoint("Edit Pattern");var e=this.currentArtboard,n=this.masterArtboard.querySelector("#"+e.id),i=["id","class","style","x","y","width","height","patternTransform","patternUnits","patternContentUnits","href","viewBox","preserveAspectRatio"],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
e.hasAttribute(u)&&n.setAttribute(u,e.getAttribute(u))}}catch(c){a=!0,s=c}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}e.remove(),(h(n)||n).innerHTML=e.innerHTML,
this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}},
editSymbolEnd:function(){var t=void 0!==arguments[0]?arguments[0]:!0;if("symbol"===this.currentArtboard.contentType){
t&&this.undoManager.checkpoint("Edit Symbol");var e=this.currentArtboard,n=this.masterArtboard.querySelector("#"+e.id),i=["id","class","style","viewBox","preserveAspectRatio"],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
e.hasAttribute(u)&&n.setAttribute(u,e.getAttribute(u))}}catch(c){a=!0,s=c}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}e.remove(),n.innerHTML=e.innerHTML,
this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}},
loadArtwork:function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#content"].querySelectorAll("g")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.remove()}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=S("svg:g","bx-svgartboard"),u=!0,c=!1,d=void 0;try{for(var h=void 0,v=["viewBox","preserveAspectRatio","x","y","width","height","style","id","class"][Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;t.hasAttribute(f)&&l.setAttribute(f,t.getAttribute(f))}}catch(m){c=!0,
d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d}}for(;t.firstChild;)l.append(t.firstChild);
this.content.append(l),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,
this.undoManager.clear(),this.currentArtboard.hasAttribute("viewBox")?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
},extractArtwork:function(){var t=S("svg:svg"),e=this.masterArtboard,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=["id","class","style","x","y","width","height","viewBox","preserveAspectRatio"][Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;e.hasAttribute(o)&&t.setAttribute(o,e.getAttribute(o))}}catch(l){i=!0,
r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}var u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=e.childNodes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;t.append(f.cloneNode(!0))}}catch(m){c=!0,d=m}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}if("symbol"===this.currentArtboard.contentType){var g=this.currentArtboard,b=t.querySelector("#"+g.id),p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=["id","class","style","viewBox","preserveAspectRatio"][Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var C=x.value;g.hasAttribute(C)&&b.setAttribute(C,g.getAttribute(C))}}catch(E){y=!0,
_=E}finally{try{p||null==w["return"]||w["return"]()}finally{if(y)throw _}}b.innerHTML=g.innerHTML;
}else if("pattern"===this.currentArtboard.contentType){var k=this.currentArtboard,A=t.querySelector("#"+k.id),L=["id","class","style","x","y","width","height","patternTransform","patternUnits","patternContentUnits","href","viewBox","preserveAspectRatio"],M=!0,j=!1,T=void 0;
try{for(var P=void 0,R=L[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){var O=P.value;
k.hasAttribute(O)&&A.setAttribute(O,k.getAttribute(O))}}catch(I){j=!0,T=I}finally{
try{M||null==R["return"]||R["return"]()}finally{if(j)throw T}}A.innerHTML=k.innerHTML;
}return t},extractArtworkWithSelectedElements:function(){var t=this,e=this._extractArtworkWithElements(this.selectedElements),n=function(){
var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var o=void 0,l=t.selectedElements[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;n[e++]=s(u)}}catch(c){r=!0,a=c}finally{try{i||null==l["return"]||l["return"]();
}finally{if(r)throw a}}return n}(),i=m(n);i=f(i,this.currentArtboard.getCTM().inverse());
var r=!0,a=!1,o=void 0;try{for(var l=void 0,u=["x","y","width","height"][Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value;e.viewBox.baseVal[c]=i[c]}}catch(d){a=!0,o=d}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw o}}return e.setAttribute("width",i.width),e.setAttribute("height",i.height),
e},extractArtworkWithViewBoxElements:function(){var t=[],e=k(this.currentArtboard.viewBox),n=this.currentArtboard.getCTM().inverse(),i=!0,r=!1,a=void 0;
try{for(var o=void 0,l=this.currentArtboard.children[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;if(A(u)){var c=s(u);c=f(c,n),g(e,c)&&t.push(u)}}}catch(d){r=!0,a=d}finally{
try{i||null==l["return"]||l["return"]()}finally{if(r)throw a}}var h=this._extractArtworkWithElements(t),v=!0,m=!1,b=void 0;
try{for(var p=void 0,y=["x","y","width","height"][Symbol.iterator]();!(v=(p=y.next()).done);v=!0){
var _=p.value;h.viewBox.baseVal[_]=e[_]}}catch(x){m=!0,b=x}finally{try{v||null==y["return"]||y["return"]();
}finally{if(m)throw b}}return h.setAttribute("width",e.width),h.setAttribute("height",e.height),
h},_extractArtworkWithElements:function(t){t=b(t);var e=this._getIdsReferencedByElementsAndTheirDescendants(t),n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=this.currentArtboard.querySelector("#"+l);
u||this.currentArtboard===this.masterArtboard||(u=this.masterArtboard.querySelector("#"+l)),
u&&n.push(u)}}catch(c){r=!0,a=c}finally{try{i||null==o["return"]||o["return"]()}finally{
if(r)throw a}}n=n.filter(function(e){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;if(l.contains(e)||l===e)return!1}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=n[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;if(m.contains(e)&&m!==e)return!1}}catch(g){d=!0,h=g}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}return!0});var d=S("svg:svg"),h=S("svg:defs"),v=!0,f=!1,m=void 0;
try{for(var g=void 0,y=n[Symbol.iterator]();!(v=(g=y.next()).done);v=!0){var _=g.value;
_.closest("defs")?h.append(_.cloneNode(!0)):d.append(_.cloneNode(!0))}}catch(x){f=!0,
m=x}finally{try{v||null==y["return"]||y["return"]()}finally{if(f)throw m}}h.childElementCount>0&&d.append(h);
var w=!0,C=!1,E=void 0;try{for(var k=void 0,A=t[Symbol.iterator]();!(w=(k=A.next()).done);w=!0){
var L=k.value,M=p(L,this.currentArtboard),j=L.cloneNode(!0);j.setAttribute("transform",M),
d.append(j)}}catch(T){C=!0,E=T}finally{try{w||null==A["return"]||A["return"]()}finally{
if(C)throw E}}return d},insertArtwork:function(t){var e=void 0!==arguments[1]?arguments[1]:"canvasCenter";
a(t,this.extractArtwork());var n=this.currentContainer||this.currentArtboard,i=[],r=!0,o=!1,l=void 0;
try{for(var u=void 0,c=$traceurRuntime.spread(t.children)[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){
var d=u.value;if(A(d)){var h=p(n,this.currentArtboard),v=C(d.transform.baseVal.consolidate().matrix),f=C();
f.multiplySelf(h.inverse()),f.multiplySelf(v),f.isIdentity()?d.removeAttribute("transform"):d.setAttribute("transform",f.toString()),
n.append(d),A(d)&&i.push(d)}else if("defs"===d.localName){var g=!0,b=!1,y=void 0;try{
for(var _=void 0,x=$traceurRuntime.spread(d.children)[Symbol.iterator]();!(g=(_=x.next()).done);g=!0){
var w=_.value;this.defs.append(w)}}catch(S){b=!0,y=S}finally{try{g||null==x["return"]||x["return"]();
}finally{if(b)throw y}}}else n.append(d)}}catch(k){o=!0,l=k}finally{try{r||null==c["return"]||c["return"]();
}finally{if(o)throw l}}if("original"!==e){var L;L="canvasCenter"===e?E(this.clientLeft+this.clientWidth/2,this.clientTop+this.clientHeight/2):E(body.mouseClientX,body.mouseClientY);
var M=function(){var t=0,e=[],n=!0,r=!1,a=void 0;try{for(var o=void 0,l=i[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var u=o.value;e[t++]=s(u)}}catch(c){r=!0,a=c}finally{try{n||null==l["return"]||l["return"]();
}finally{if(r)throw a}}return e}();M=M.filter(function(t){return t.width>0||t.height>0;
});var j=m(M),T=L.x-(j.x+j.width/2),P=L.y-(j.y+j.height/2),R=!0,O=!1,I=void 0;try{
for(var D=void 0,V=i[Symbol.iterator]();!(R=(D=V.next()).done);R=!0){var N=D.value,B=N.getScreenCTM(),z=B.inverse(),G=C(N.transform.baseVal.consolidate().matrix);
G.multiplySelf(z),G.translateSelf(T,P),G.multiplySelf(B),N.setAttribute("transform",G.toString());
}}catch(U){O=!0,I=U}finally{try{R||null==V["return"]||V["return"]()}finally{if(O)throw I;
}}}this.selectedElements=i},insertBitmap:function(t){var e,n,i,r,a,s,o,l,u,c,h,v,f;
return $traceurRuntime.asyncWrap(function(m){for(;;)switch(m.state){case 0:c=d(t),
m.state=5;break;case 5:return void Promise.resolve(c).then(m.createCallback(3),m.errback);
case 3:h=m.value,m.state=2;break;case 2:e=h,v=e.width,n=v,f=e.height,i=f,m.state=7;
break;case 7:r=S("svg:image"),r.setAttribute("href",t),r.setAttribute("width",n),
r.setAttribute("height",i),a=this.currentContainer||this.currentArtboard,s=a.getScreenCTM().inverse(),
o=E(body.mouseClientX,body.mouseClientY),l=o.matrixTransform(s),a.append(r),u=r.getBBox(),
r.setAttribute("x",l.x-u.width/2),r.setAttribute("y",l.y-u.height/2),this.selectedElements=[r],
m.state=-2;break;default:return m.end()}},this)},zoomBy:function(){var t=void 0!==arguments[0]?arguments[0]:.3,e=this["#svg"].getScreenCTM(),n=e.inverse(),i=E(this.hasPointer?body.mouseClientX:this.clientWidth/2,this.hasPointer?body.mouseClientY:this.clientHeight/2),r=i.matrixTransform(n);
this._zoom=c(this._zoom+this._zoom*t,P,R,3),this._scrollX=r.x-i.x/this.scale,this._scrollY=r.y-i.y/this.scale,
this["#svg"].viewBox.baseVal.width=I/this.scale,this["#svg"].viewBox.baseVal.height=D/this.scale,
this["#svg"].viewBox.baseVal.x=this._scrollX,this["#svg"].viewBox.baseVal.y=this._scrollY,
this._updateDropShadow(),this.dispatchEvent(new CustomEvent("zoomchange"))},zoomToFitAll:function(){
var t=this.currentArtboard.getBBox();this._zoomToArea(t.x,t.y,t.width,t.height,30);
},zoomToCurrentArtboardViewBox:function(){this._zoomToArea(this.currentArtboard.viewBox.x,this.currentArtboard.viewBox.y,this.currentArtboard.viewBox.width,this.currentArtboard.viewBox.height,30);
},zoomToCurrentArtboardViewBoxWidth:function(){this._zoomToArea(this.currentArtboard.viewBox.x,this.currentArtboard.viewBox.y+this.currentArtboard.viewBox.height/2,this.currentArtboard.viewBox.width,0,30);
},zoomToCurrentArtboardViewBoxHeight:function(){this._zoomToArea(this.currentArtboard.viewBox.x+this.currentArtboard.viewBox.width/2,this.currentArtboard.viewBox.y,0,this.currentArtboard.viewBox.height,30);
},_zoomToArea:function(t,e,n,i){var r=void 0!==arguments[4]?arguments[4]:0,a={width:window.innerWidth,
height:window.innerHeight},s=100*L(a.width/n,a.height/i);r=100*r/s,s=100*L(a.width/(n+r),a.height/(i+r)),
s=c(s,P,R,3),this._zoom=s;var o=a.width/this.scale,l=a.height/this.scale,u=t-(o-n)/2,d=e-(l-i)/2;
this._scrollX=u,this._scrollY=d,this["#svg"].viewBox.baseVal.width=I/this.scale,this["#svg"].viewBox.baseVal.height=D/this.scale,
this["#svg"].viewBox.baseVal.x=this._scrollX,this["#svg"].viewBox.baseVal.y=this._scrollY,
this._updateDropShadow(),this.dispatchEvent(new CustomEvent("zoomchange"))},resetZoom:function(){
var t=(100-this._zoom)/this._zoom;this.zoomBy(t)},selectAll:function(){if(this.selectedTextRange){
var t=_(this.selectedTextRange.startContainer,"text"),e=new Range;e.selectNodeContents(t),
this.selectedTextRange=e}else{var n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this.currentArtboard.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;A(l)&&n.push(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this.selectedElements=$traceurRuntime.spread(n)}},grabColor:function(){
var t=this;return new Promise(function(e){var n=t["#svg"].cloneNode(!0),i=x('\n        <rect\n          x="'+t.currentArtboard.viewBox.x+'"\n          y="'+t.currentArtboard.viewBox.y+'"\n          width="'+t.currentArtboard.viewBox.width+'"\n          height="'+t.currentArtboard.viewBox.height+'"\n          style="fill: none; stroke: #646464; stroke-width: 1; vector-effect: non-scaling-stroke;">\n        </rect>\n      ');
n.appendChild(i),n.setAttribute("xmlns",l),n.setAttribute("xmlns:xlink",u);var r=new Blob([n.outerHTML],{
type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(r),s=new Image;s.src=a,
s.addEventListener("load",function(){var n=document.createElement("canvas"),i=t["#svg"].getBoundingClientRect();
n.width=i.width,n.height=i.height,n.setAttribute("style","\n          position: absolute;\n          top: "+i.top+"px;\n          left: "+i.left+"px;\n          background: white;\n        ");
var r=n.getContext("2d");r.fillStyle="transparent",r.fillRect(0,0,1e3,1e3),r.drawImage(s,0,0),
t.after(n);var o,l,u,d;n.addEventListener("mouseenter",o=function(t){d=body.registerCursor("crosshair",0);
}),n.addEventListener("mouseleave",l=function(t){body.unregisterCursor(d)}),n.addEventListener("click",u=function(s){
n.removeEventListener("click",u),n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",l),
body.unregisterCursor(d),n.remove();var h=s.clientX-i.x,v=s.clientY-i.y,f=t["#svg"].clientWidth,m=t["#svg"].clientHeight,g=r.getImageData(h,v,f,m),b=g.data[0],p=g.data[1],y=g.data[2],_=c(g.data[3]/255,0,1,2),x="rgba("+b+", "+p+", "+y+", "+_+")";
URL.revokeObjectURL(a),e(x)})})})},getHitContentElements:function(t,e){var n,i,r=[],a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=N[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=(n=c[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),h=(i=n.next()).done?void 0:i.value,v=document.elementFromPoint(t+d,e+h);
v&&(("tspan"===v.localName||"textPath"===v.localName)&&(v=_(v,"text")),!r.includes(v)&&this.currentArtboard.contains(v)&&r.push(v));
}}catch(f){s=!0,o=f}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}return b(r)},generateUniqueID:function(t){for(var e=void 0!==arguments[1]?arguments[1]:null,n=0;;){
n+=1;var i=t+"-"+n;if(!this["#content"].querySelector("#"+i)){if(!e)return i;if(!e.querySelector("#"+i))return i;
}}},_onContentMutation:function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this.dispatchEvent(new CustomEvent("contentmutation",{detail:s})),"childList"===s.type&&s.target===this["#content"]&&this._onCurrentArtboardChange();
}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}},_onCurrentArtboardChange:function(){this.dispatchEvent(new CustomEvent("currentartboardchange")),
this.currentArtboard.hasAttribute("viewBox")?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
},_onMouseWheel:function(t){var e=c(t.wheelDeltaX,-O,O,1),n=c(t.wheelDeltaY,-O,O,1);
if(!t.metaKey&&!t.ctrlKey||t.altKey||t.shiftKey)this._scrollX=this._scrollX-e/this.scale,
this._scrollY=this._scrollY-n/this.scale,this["#svg"].viewBox.baseVal.width=I/this.scale,
this["#svg"].viewBox.baseVal.height=D/this.scale,this["#svg"].viewBox.baseVal.x=this._scrollX,
this["#svg"].viewBox.baseVal.y=this._scrollY;else{var i=body.modKeys.ctrl?100:800,r=n/i;
this.zoomBy(r)}},_onClick:function(t){t.target.closest("a")&&t.preventDefault()},
_onUndoManagerUndoOrRedo:function(t){var e=this,n=t.detail,i=n.addedNodes,r=n.removedNodes,a=n.modifiedNodes,s=new Set(this.selectedElements),o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;
s.add(h)}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{
if(l)throw u}}var f=!0,m=!1,g=void 0;try{for(var b=void 0,p=a[Symbol.iterator]();!(f=(b=p.next()).done);f=!0){
var y=b.value;s.add(y)}}catch(_){m=!0,g=_}finally{try{f||null==p["return"]||p["return"]();
}finally{if(m)throw g}}var x=!0,w=!1,S=void 0;try{for(var C=void 0,E=r[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;s["delete"](k)}}catch(L){w=!0,S=L}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}s=$traceurRuntime.spread(s).filter(function(t){return A(t)&&e.currentArtboard.contains(t)&&null===t.closest("defs")&&e.currentArtboard!==t;
}),this.currentContainer=null,this.selectedElements=s;var M=!0,j=!1,T=void 0;try{
for(var P=void 0,R=this.currentArtboard.querySelectorAll("use")[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){
var O=P.value;O.href.baseVal=O.href.baseVal}}catch(I){j=!0,T=I}finally{try{M||null==R["return"]||R["return"]();
}finally{if(j)throw T}}},_onUndoManagerPositionChange:function(t){body.bridge.postMessage("setChangeCounter",t.detail);
},_onDragOver:function(t){t.preventDefault()},_onDrop:function(t){var e=this;t.preventDefault();
var n=t.dataTransfer.files,a=t.dataTransfer.getData("bx-symbolslistitem/symbolID");
if(n.length>0){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=n[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=h.name.substring(h.name.lastIndexOf(".")+1).toLowerCase();if("image/svg+xml"===h.type||"text/html"===h.type)if("svgz"===v){
var f=new FileReader;f.readAsArrayBuffer(h),f.addEventListener("load",function(t){
var n=new Uint8Array(t.target.result),a=r(n);if(a){var s=i(a);s&&(e.undoManager.checkpoint("Paste"),
e.insertArtwork(s))}})}else{var m=new FileReader;m.readAsText(h,"UTF-8"),m.addEventListener("load",function(t){
var n=i(t.target.result);n&&(e.undoManager.checkpoint("Paste"),e.insertArtwork(n));
})}else if(["image/png","image/jpeg","image/webp","image/gif"].includes(h.type)){
var g=new FileReader;g.readAsDataURL(h),g.addEventListener("load",function(t){var n=t.target.result;
n&&(e.undoManager.checkpoint("Paste"),e.insertBitmap(n))})}}}catch(b){l=!0,u=b}finally{
try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else if(a){if("symbol"===this.currentArtboard.contentType&&this.currentArtboard.id===a)return void t.preventDefault();
this.undoManager.checkpoint("Create symbol reference");var p=this.currentContainer||this.currentArtboard,y=body.canvas.masterArtboard.querySelector("#"+a),_=S("svg:use");
_.setAttribute("href","#"+a),y.hasAttribute("viewBox")&&(_.setAttribute("width",y.viewBox.baseVal.width),
_.setAttribute("height",y.viewBox.baseVal.height)),p.append(_);var x=_.getScreenCTM().inverse(),w=C(_.transform.baseVal.consolidate().matrix);
w.multiplySelf(x),_.setAttribute("transform",w.toString());var E=s(_);_.setAttribute("x",t.clientX-E.width/2),
_.setAttribute("y",t.clientY-E.height/2),this.selectedElements=[_]}},_onScroll:function(){
this.scrollTop=0,this.scrollLeft=0,this.scrollIntoView()},_updateDropShadow:function(){
this["#grippie-fe-offset"].dx.baseVal=1/this.scale,this["#grippie-fe-offset"].dy.baseVal=1/this.scale,
this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this.scale;
},_getIdsReferencedByElementsAndTheirDescendants:function(t){t=b(t);var e=new Set,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=this._getIdsReferencedByElementAndItsDescendants(o)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;e.add(v)}}catch(f){u=!0,c=f}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}}}catch(m){i=!0,r=m}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return $traceurRuntime.spread(e)},_getIdsReferencedByElementAndItsDescendants:function(t){
var e=this,n=new Set,i=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],r=function(t){
for(var a=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();){
var o=getComputedStyle(s),l=!0,u=!1,c=void 0;try{for(var d=void 0,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=o.getPropertyValue(v);if(f&&f.startsWith('url("#')){var m=f.substring(6,f.length-2);
if(n.has(m)===!1){var g=e.currentArtboard.querySelector("#"+m);g||e.currentArtboard===e.masterArtboard||(g=e.masterArtboard.querySelector("#"+m)),
g&&r(g)}n.add(m)}}}catch(b){u=!0,c=b}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}if(s.href&&"#"===s.href.baseVal[0]){var p=s.href.baseVal.substring(1,s.href.baseVal.length);
if(n.has(p)===!1){var y=e.currentArtboard.querySelector("#"+p);y||e.currentArtboard===e.masterArtboard||(y=e.masterArtboard.querySelector("#"+p)),
y&&r(y)}n.add(p)}}};return r(t),$traceurRuntime.spread(n)}},{},n)}(HTMLElement),G=w("bx-canvas",z);
return{get MIN_ZOOM(){return P},get MAX_ZOOM(){return R},get default(){return G}};
}),System.registerModule("elements/bx-checkbox",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i='\n  <style>@import url("stylesheets/bx-checkbox.css");</style>\n\n  <main>\n    <svg id="icon" preserveAspectRatio="none" viewBox="0 0 100 100">\n      <use id="icon-use" x="0" y="0" width="100%" height="100%"></use>\n    </svg>\n\n    <label id="label"></label>\n  </main>\n',r=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=i;var e=!0,n=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,r=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw r}}this._onLabelChange(),this._onCheckedChange(),this.tabIndex=0,
this.addEventListener("click",function(){t.checked=!t.checked,t.dispatchEvent(new CustomEvent("change"));
}),this.addEventListener("keydown",function(e){"Enter"===e.keyIdentifier&&(t.checked=!t.checked);
})},attributeChangedCallback:function(t,e,n){e!==n&&("label"===t?this._onLabelChange():"checked"===t&&this._onCheckedChange());
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(t){
this.setAttribute("label",t)},get checked(){return this.hasAttribute("checked")},
set checked(t){t?this.setAttribute("checked",""):this.removeAttribute("checked")},
get mixed(){return this.hasAttribute("mixed")},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},_onLabelChange:function(){this["#label"].textContent=this.label},_onCheckedChange:function(){
this["#icon-use"].remove(),this["#icon-use"]=e("svg:use"),this["#icon"].append(this["#icon-use"]),
this.checked?(this.setAttribute("checked",""),this["#icon-use"].setAttribute("href","images/icons.svg#checkbox-on")):(this.removeAttribute("checked"),
this["#icon-use"].setAttribute("href","images/icons.svg#checkbox-off"))}},{},t)}(HTMLElement),a=n("bx-checkbox",r);
return{get default(){return a}}}),System.registerModule("elements/bx-colorpicker",[],function(){
"use strict";System.get("elements/bx-alphaslider"),System.get("elements/bx-hueslider"),
System.get("elements/bx-satlightslider"),System.get("elements/bx-input"),System.get("elements/bx-button");
var t=System.get("classes/color")["default"],e=System.get("utils/color"),n=e.getRandomMaterialColor,i=e.isValidColorString,r=e.parseColor,a=System.get("utils/dom").registerElement,s="hex",o='\n<style>\n  @import url("stylesheets/bx-colorpicker.css");\n</style>\n\n<main>\n  <bx-hueslider id="hue-slider"></bx-hueslider>\n  <bx-satlightslider id="satlight-slider"></bx-satlightslider>\n  <bx-alphaslider id="alpha-slider"></bx-alphaslider>\n\n  <div>\n    <bx-input id="color-input" title="Color"></bx-input>\n\n    <bx-button\n      id="random-color-button"\n      title="Random color"\n      icon="random-color"\n      iconsize="25"\n      skin="iconic">\n    </bx-button>\n\n    <bx-button\n      id="grab-color-button"\n      title="Grab color"\n      icon="grab-color"\n      iconsize="25"\n      skin="iconic">\n    </bx-button>\n  </div>\n</main>\n',l=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=o;var e=!0,n=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var l=a.value;this["#"+l.id]=l}}catch(u){n=!0,r=u}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw r}}this._isDraggingSlider=!1,this["#hue-slider"].addEventListener("markerdragstart",function(){
return t._onHueSliderDragStart()}),this["#satlight-slider"].addEventListener("markerdragstart",function(){
return t._onSatlightSliderDragStart()}),this["#alpha-slider"].addEventListener("markerdragstart",function(){
return t._onAlphaSliderDragStart()}),this["#grab-color-button"].addEventListener("click",function(e){
return t._onGrabColorButtonClick(e)}),this["#random-color-button"].addEventListener("click",function(e){
return t._onRandomColorButtonClick(e)}),this["#color-input"].addEventListener("change",function(){
return t._onColorInputChange(event)}),this["#color-input"].validate=function(t){return i(t);
},this._onColorChange()},attributeChangedCallback:function(t,e,n){e!==n&&"color"===t&&this._onColorChange();
},get color(){return this.hasAttribute("color")?this.getAttribute("color"):"#ffffff";
},set color(t){this.setAttribute("color",t)},get mixed(){this["#color-input"].mixed;
},set mixed(t){this["#color-input"].mixed=t},_onHueSliderDragStart:function(){var t=this;
this._isDraggingSlider=!0;var e,n,i=r(this.color,"hsla");this.dispatchEvent(new CustomEvent("changestart")),
this["#hue-slider"].addEventListener("markerdrag",e=function(e){i.h=t["#hue-slider"].hue,
t.color=i.toString("rgba"),t["#satlight-slider"].hue=t["#hue-slider"].hue,t["#alpha-slider"].color=t.color,
t["#color-input"].value=i.toString(s),t.dispatchEvent(new CustomEvent("change"))}),
this["#hue-slider"].addEventListener("markerdragend",n=function(){t["#hue-slider"].removeEventListener("markerdrag",e),
t["#hue-slider"].removeEventListener("markerdragend",n),t._isDraggingSlider=!1,t.dispatchEvent(new CustomEvent("changeend"));
})},_onSatlightSliderDragStart:function(){var e=this;this._isDraggingSlider=!0;var n,i,r=new t(this["#hue-slider"].hue,50,50,this["#alpha-slider"].alpha,"hsla");
this.dispatchEvent(new CustomEvent("changestart")),this["#satlight-slider"].addEventListener("markerdrag",n=function(){
r.s=e["#satlight-slider"].saturation,r.l=e["#satlight-slider"].lightness,e.color=r.toString("rgba"),
e["#alpha-slider"].color=e.color,e["#color-input"].value=r.toString(s),e.dispatchEvent(new CustomEvent("change"));
}),this["#satlight-slider"].addEventListener("markerdragend",i=function(){e["#satlight-slider"].removeEventListener("markerdrag",n),
e["#satlight-slider"].removeEventListener("markerdragend",i),e._isDraggingSlider=!1,
e.dispatchEvent(new CustomEvent("changeend"))})},_onAlphaSliderDragStart:function(){
var t=this;this._isDraggingSlider=!0;var e,n,i=r(this.color,"hsla");this.dispatchEvent(new CustomEvent("changestart")),
this["#alpha-slider"].addEventListener("markerdrag",e=function(e){i.a=e.detail,t.color=i.toString("rgba"),
t["#color-input"].value=i.toString(s),t.dispatchEvent(new CustomEvent("change"))}),
this["#alpha-slider"].addEventListener("markerdragend",n=function(){t["#alpha-slider"].removeEventListener("markerdrag",e),
t["#alpha-slider"].removeEventListener("markerdragend",n),t._isDraggingSlider=!1,
t.dispatchEvent(new CustomEvent("changeend"))})},_onColorInputChange:function(){this.dispatchEvent(new CustomEvent("changestart")),
this.color=this["#color-input"].value,this.dispatchEvent(new CustomEvent("change")),
this.dispatchEvent(new CustomEvent("changeend"))},_onColorChange:function(){if(!this._isDraggingSlider&&null!==this.color){
var t=r(this.color,"hsla");this["#hue-slider"].hue=t.h,this["#satlight-slider"].hue=t.h,
this["#satlight-slider"].saturation=t.s,this["#satlight-slider"].lightness=t.l,this["#alpha-slider"].color=this.color,
this["#alpha-slider"].alpha=t.a,this["#color-input"].value=t.toString(s)}},_onGrabColorButtonClick:function(){
var t;return $traceurRuntime.asyncWrap(function(e){for(;;)switch(e.state){case 0:
this["#grab-color-button"].pressed=!0,e.state=5;break;case 5:return void Promise.resolve(body.canvas.grabColor()).then(e.createCallback(3),e.errback);
case 3:t=e.value,e.state=2;break;case 2:this["#grab-color-button"].pressed=!1,this.dispatchEvent(new CustomEvent("changestart")),
this.color=t,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")),
e.state=-2;break;default:return e.end()}},this)},_onRandomColorButtonClick:function(t){
this.dispatchEvent(new CustomEvent("changestart")),this.color=n(),this.dispatchEvent(new CustomEvent("change")),
this.dispatchEvent(new CustomEvent("changeend"))}},{},e)}(HTMLElement),u=a("bx-colorpicker",l);
return{get default(){return u}}}),System.registerModule("elements/bx-compositingcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select");var t=System.get("utils/dom"),e=(t.createElement,
t.createSVGMatrix,t.registerElement),n=System.get("utils/math").round,i=(System.get("utils/paint").getDefFromURL,
System.get("utils/relationship").queryStylableElements),r=System.get("utils/time").throttle,a=Number.parseFloat,s='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-compositingcontrols.css");\n</style>\n\n<section id="opacity-section">\n  <h2 id="opacity-section-heading">Opacity</h2>\n\n  <bx-slider\n    id="opacity-slider"\n    title="Opacity"\n    value="1"\n    min="0"\n    max="1"\n    precision="2">\n  </bx-slider>\n</section>\n\n<section id="blend-mode-section">\n  <h2 id="blend-mode-section-heading">Blend Mode</h2>\n\n  <bx-select id="blend-mode-select" value="normal">\n    <bx-selectitem value="normal" label="Normal"></bx-selectitem>\n    <hr>\n    <bx-selectitem value="darken" label="Darken"></bx-selectitem>\n    <bx-selectitem value="multiply" label="Multiply"></bx-selectitem>\n    <bx-selectitem value="color-burn" label="Color Burn"></bx-selectitem>\n    <hr>\n    <bx-selectitem value="lighten" label="Lighten"></bx-selectitem>\n    <bx-selectitem value="screen" label="Screen"></bx-selectitem>\n    <bx-selectitem value="color-dodge" label="Color Dodge"></bx-selectitem>\n    <hr>\n    <bx-selectitem value="overlay" label="Overlay"></bx-selectitem>\n    <bx-selectitem value="soft-light" label="Soft Light"></bx-selectitem>\n    <bx-selectitem value="hard-light" label="Hard Light"></bx-selectitem>\n    <hr>\n    <bx-selectitem value="difference" label="Difference"></bx-selectitem>\n    <bx-selectitem value="exclusion" label="Exclusion"></bx-selectitem>\n    <hr>\n    <bx-selectitem value="hue" label="Hue"></bx-selectitem>\n    <bx-selectitem value="saturation" label="Saturation"></bx-selectitem>\n    <bx-selectitem value="color" label="Color"></bx-selectitem>\n    <bx-selectitem value="luminosity" label="Luminosity"></bx-selectitem>\n  </bx-select>\n\n  <bx-checkbox label="Isolate" id="isolate-checkbox"></bx-checkbox>\n</section>\n',o=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=s,this._update$200ms=r(this._update,200,this);var e=!0,n=!1,i=void 0;
try{for(var a=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){
var l=a.value;this["#"+l.id]=l}}catch(u){n=!0,i=u}finally{try{e||null==o["return"]||o["return"]();
}finally{if(n)throw i}}this["#opacity-slider"].addEventListener("changestart",function(){
return t._onOpacitySliderChangeStart()}),this["#blend-mode-select"].addEventListener("change",function(){
return t._onBlendModeSelectChange()}),this["#isolate-checkbox"].addEventListener("change",function(){
return t._onIsolateCheckboxChange()})},enabledCallback:function(){var t=this;this._update(),
body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._update$200ms()},_onSelectedTextRangeChange:function(){
this._update$200ms()},_onContentMutation:function(t){this._update$200ms()},_onOpacitySliderChangeStart:function(){
var t=this;body.canvas.undoManager.checkpoint("Opacity");var e,n,r=body.canvas.selectedElements,a=i("opacity",r);
a[0]||null;this._isChangingOpacitySlider=!0,this["#opacity-slider"].addEventListener("change",e=function(){
var e=!0,n=!1,i=void 0;try{for(var r=void 0,s=a[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){
var o=r.value;o.style.opacity=t["#opacity-slider"].value}}catch(l){n=!0,i=l}finally{
try{e||null==s["return"]||s["return"]()}finally{if(n)throw i}}t["#opacity-slider"].mixed=!1;
}),this["#opacity-slider"].addEventListener("changeend",n=function(){t["#opacity-slider"].removeEventListener("change",e),
t["#opacity-slider"].removeEventListener("changeend",n),t._isChangingOpacitySlider=!1;
})},_onBlendModeSelectChange:function(){body.canvas.undoManager.checkpoint("Blend mode");
var t=i("mix-blend-mode",body.canvas.selectedElements),e=!0,n=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;o.style.mixBlendMode=this["#blend-mode-select"].value}}catch(l){n=!0,
r=l}finally{try{e||null==s["return"]||s["return"]()}finally{if(n)throw r}}},_onIsolateCheckboxChange:function(){
body.canvas.undoManager.checkpoint("Isolate");var t=i("isolation",body.canvas.selectedElements),e=!0,n=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=a.value;
this["#isolate-checkbox"].checked?o.style.isolation="isolate":o.style.isolation="auto";
}}catch(l){n=!0,r=l}finally{try{e||null==s["return"]||s["return"]()}finally{if(n)throw r;
}}},_update:function(){this._updateOpacitySection(),this._updateBlendModeSection();
},_updateOpacitySection:function(){if(!this._isChangingOpacitySlider){var t=i("opacity",body.canvas.selectedElements),e=t[0]||null;
if(null===e)this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1;else{
this["#opacity-slider"].disabled=!1;var r=n(a(getComputedStyle(e).opacity),2),s=!1,o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;
if(h!==e){var v=n(a(getComputedStyle(h).opacity),2);v!==r&&(s=!0)}}}catch(f){l=!0,
u=f}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}this["#opacity-slider"].value=r,
this["#opacity-slider"].mixed=s}this["#opacity-section-heading"].disabled=this["#opacity-slider"].disabled;
}},_updateBlendModeSection:function(){var t=i("mix-blend-mode",body.canvas.selectedElements),e=t[0]||null;
if(null===e)this["#blend-mode-select"].value="normal",this["#blend-mode-select"].disabled=!0,
this["#blend-mode-select"].mixed=!1;else{var n=!1,r=getComputedStyle(e).mixBlendMode,a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;
if(c!==e){var d=getComputedStyle(c).mixBlendMode;if(d!==r){n=!0;break}}}}catch(h){
s=!0,o=h}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}this["#blend-mode-select"].value=getComputedStyle(e).mixBlendMode,
this["#blend-mode-select"].disabled=!1,this["#blend-mode-select"].mixed=n}if(null===e)this["#isolate-checkbox"].disabled=!0,
this["#isolate-checkbox"].checked=!1,this["#isolate-checkbox"].mixed=!1;else{var v=getComputedStyle(e).isolation,f=!1,m=!0,g=!1,b=void 0;
try{for(var p=void 0,y=t[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value;
if(_!==e){var x=getComputedStyle(_).isolation;if(x!==v){f=!0;break}}}}catch(w){g=!0,
b=w}finally{try{m||null==y["return"]||y["return"]()}finally{if(g)throw b}}this["#isolate-checkbox"].disabled=!1,
this["#isolate-checkbox"].checked="isolate"===v,this["#isolate-checkbox"].mixed=f;
}this["#blend-mode-section-heading"].disabled=this["#blend-mode-select"].disabled&&this["#isolate-checkbox"].disabled;
}},{},t)}(HTMLElement),l=e("bx-compositingcontrols",o);return{get default(){return l;
}}}),System.registerModule("elements/bx-contextmenu",[],function(){"use strict";var t=System.get("utils/dom"),e=t.getClosestShadowRoot,n=t.registerElement,i=System.get("classes/shortcut")["default"];
System.get("elements/bx-menu");var r='\n  <style>@import url("stylesheets/bx-contextmenu.css");</style>\n  <div id="overlay" hidden></div>\n\n  <bx-menu id="root-menu">\n    <content></content>\n  </bx-menu>\n',a=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this.addEventListener("menuitemtrigger",function(e){return t._close();
}),this["#overlay"].addEventListener("mousedown",function(e){return t._onOverlayMouseDown(e);
}),this["#root-menu"].addEventListener("mousedown",function(e){return t._onRootMenuMouseDown(e);
}),$traceurRuntime.spread([this["#root-menu"]],this.querySelectorAll("bx-menu")).forEach(function(e){
e.menuWillShow=function(){return t.menuWillShow(e)},e.menuItemWillTrigger=function(e){
return t.menuItemWillTrigger(e)}})},menuWillShow:function(t){return Promise.resolve();
},menuItemWillTrigger:function(t){return Promise.resolve()},open:function(t,e){var n=this;
this["#root-menu"].openAtPosition(t,e),this["#overlay"].hidden=!1,window.addEventListener("keydown",this._keyDownListener=function(t){
return n._onKeyDown(t)},!0),window.addEventListener("resize",this._resizeListener=function(){
return n._close()}),window.addEventListener("blur",this._blurListener=function(){
return n._close()})},_close:function(){this["#root-menu"].close(),this["#overlay"].hidden=!0,
window.removeEventListener("keydown",this._keyDownListener,!0),window.removeEventListener("resize",this._resizeListener),
window.removeEventListener("blur",this._blurListener),this.blur()},_onOverlayMouseDown:function(t){
event.preventDefault(),this._close()},_onRootMenuMouseDown:function(t){t.preventDefault();
},_onKeyDown:function(t){var n=i.fromEvent(t);if(n.matches("ArrowUp")||n.matches("ArrowDown")){
var r=$traceurRuntime.spread(this.querySelectorAll("bx-menuitem[highlighted]")),a=r.length>0?r[r.length-1]:null,s=this["#root-menu"],o=this.querySelectorAll("bx-menu[opened]"),l=$traceurRuntime.spread([s],o);
if(t.stopPropagation(),t.preventDefault(),a){var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=l[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;f.items.includes(a)&&(n.matches("ArrowUp")?f.highlightPreviousItem():f.highlightNextItem());
}}catch(m){c=!0,d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}}else{var g=l.length>0?l[l.length-1]:null;g&&(n.matches("ArrowUp")?g.highlightPreviousItem():g.highlightNextItem());
}}else if(n.matches("ArrowLeft")){var b=this.querySelectorAll("bx-menu[opened]");if(t.stopPropagation(),
t.preventDefault(),b.length>0){var p=b[b.length-1];p.items.find(function(t){return t.highlighted;
})&&p.highlightItem(null)}}else if(n.matches("ArrowRight")){var y=$traceurRuntime.spread(this.querySelectorAll("bx-menuitem[highlighted]")),_=y.length>0?y[y.length-1]:null,x=_?_.querySelector("bx-menu"):null;
if(t.stopPropagation(),t.preventDefault(),x){var w=x.getBoundingClientRect(),S=_.getBoundingClientRect(),C=w.x+w.width/2,E=S.y+S.height/2,k=e(this).elementFromPoint(C,E);
k.disabled?x.highlightNextItem(k):x.highlightItem(k)}}else if(n.matches("Enter")){
var A=$traceurRuntime.spread(this.querySelectorAll("bx-menuitem[highlighted]")),L=A.length>0?A[A.length-1]:null;
if(t.stopPropagation(),t.preventDefault(),L){if(!L.querySelector("bx-menu")){var M=this["#root-menu"],j=this.querySelectorAll("bx-menu[opened]"),T=$traceurRuntime.spread([M],j),P=!0,R=!1,O=void 0;
try{for(var I=void 0,D=T[Symbol.iterator]();!(P=(I=D.next()).done);P=!0){var V=I.value;
if(V.items.includes(L)){V.triggerItem(L);break}}}catch(N){R=!0,O=N}finally{try{P||null==D["return"]||D["return"]();
}finally{if(R)throw O}}}}else this._close()}else null!==n.base&&this._close()}},{},t);
}(HTMLElement),s=n("bx-contextmenu",a);return{get default(){return s}}}),System.registerModule("elements/bx-cubicbeziertool",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e=function(t){function e(){
$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
enabledCallback:function(){body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("draw-cubic-segs-hud");
},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("draw-cubic-segs-hud");
}},{},t)}(HTMLElement),n=t("bx-cubicbeziertool",e);return{get default(){return n}
}}),System.registerModule("elements/bx-cubicsegsdrawhud",[],function(){"use strict";
var t=System.get("classes/enum")["default"],e=System.get("classes/shortcut")["default"],n=System.get("classes/vector")["default"],i=System.get("utils/dom"),r=i.registerElement,a=i.createElement,s=i.createSVGPoint,o=System.get("utils/path").reversePath,l=System.get("utils/transform"),u=l.reduceTransform,c=l.getTransformToElement;
System.get("elements/bx-cubicsegsketch");var d=10,h=new t("path"),v='\n  <style>@import url("stylesheets/bx-cubicsegsdrawhud.css");</style>\n  <g id="node-grippies"></g>\n  <g id="seg-sketch" is="bx-cubicsegsketch"></g>\n',f=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=v;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},enabledCallback:function(){var t=this;this._mode="select",
this._currentPath=null,window.addEventListener("keydown",this._keyDownListener=function(e){
t._onKeyDown(e)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)}),body.canvas.content.addEventListener("mousedown",this._canvasMouseDownListener=function(e){
t._onContentMouseDown(e)}),this["#node-grippies"].addEventListener("mousedown",this._nodeGrippiesMouseDownListener=function(e){
t._onNodeGrippieMouseDown(e)}),this._onSelectedElementsChange()},disabledCallback:function(){
window.removeEventListener("keydown",this._keyDownListener),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.content.removeEventListener("mousedown",this._canvasMouseDownListener),
this["#node-grippies"].removeEventListener("mousedown",this._nodeGrippiesMouseDownListener),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide()},_onSelectedElementsChange:function(){
this._updateNodeGrippies()},_onZoomChange:function(){this._updateNodeGrippiesSize();
},_onContentMutation:function(t){var e=t.detail;if("childList"===e.type){var n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e.removedNodes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;(o===this._currentPath||o.contains(this._currentPath))&&(this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies())}}catch(l){
i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}else(e.target===this._currentPath||e.target.contains(this._currentPath))&&this._updateNodeGrippies();
},_onContentMouseDown:function(t){var e,i,r=this,a=s(t.clientX,t.clientY),o=0;window.addEventListener("mousemove",e=function(t){
var e=s(t.clientX,t.clientY),i=new n(a,e).length;i>o&&(o=i)}),window.addEventListener("mouseup",i=function(n){
window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i),
r._onContentClick(t,n),4>o&&r._onContentDirectClick(t,n)})},_onContentClick:function(t){
var e;if("draw-forward"===this._mode){var n=this._currentPath.getPathData({normalize:!0
}),i=$traceurRuntime.spread(n);i.length>1&&body.canvas.undoManager.checkpoint("Draw path segment"),
this["#seg-sketch"].curved?i.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):i.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),this._currentPath.setPathData(i)}else if("draw-backward"===this._mode){body.canvas.undoManager.checkpoint("Draw path segment");
var r=this._currentPath.getPathData({normalize:!0}),a=[];a.push({type:"M",values:[this["#seg-sketch"].startPoint.x,this["#seg-sketch"].startPoint.y]
}),this["#seg-sketch"].curved?a.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):a.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),(e=a).push.apply(e,$traceurRuntime.spread(r.slice(1))),this._currentPath.setPathData(a);
}},_onContentDirectClick:function(t){var e=t,n=e.clientX,i=e.clientY;if("select"===this._mode){
body.canvas.undoManager.checkpoint("Draw path segment");var r=a("svg:path");r.style.stroke="black",
r.style.fill="none";var o=body.canvas.currentContainer||body.canvas.currentArtboard;
o.append(r);var l=r.getScreenCTM().inverse(),u=s(n,i).matrixTransform(l),c=u.x,d=u.y;
r.setAttribute("d","M "+c+" "+d),body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[r]),
this._mode="draw-forward",this._currentPath=r,this["#seg-sketch"].show(r,"end")}},
_onNodeGrippieMouseDown:function(t){var e,n,i=this,r=t.target;this["#node-grippies"].addEventListener("mouseup",e=function(t){
i["#node-grippies"].removeEventListener("mouseup",e),window.removeEventListener("mouseup",n);
var a=t.target,s=i._onNodeGrippieClick(r,t);r!==a||s||i._onNodeGrippieDirectClick(r,t);
}),window.addEventListener("mouseup",n=function(t){i["#node-grippies"].removeEventListener("mouseup",e),
window.removeEventListener("mouseup",n),i._onNodeGrippieClick(r,t)})},_onNodeGrippieClick:function(t,e){
var n,i,r,a;if("select"===this._mode)return!1;if(t[h.path]===this._currentPath){var s=t.getAttribute("data-position"),l=this._currentPath,d=l.getPathData({
normalize:!0}),v=d[0],f=d[d.length-1];if("draw-forward"===this._mode&&"start"===s){
body.canvas.undoManager.checkpoint("Draw path segment");var m=$traceurRuntime.spread(d);
this["#seg-sketch"].curved?m.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,v.values[0],v.values[1]]
}):m.push({type:"L",values:[v.values[0],v.values[1]]}),m.push({type:"Z",values:[]
}),l.setPathData(m),this._updateNodeGrippies()}else if("draw-backward"===this._mode&&"end"===s){
body.canvas.undoManager.checkpoint("Draw path segment");var g=[];g.push({type:"M",
values:["C"===f.type?f.values[4]:f.values[0],"C"===f.type?f.values[5]:f.values[1]]
}),this["#seg-sketch"].curved?g.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,v.values[0],v.values[1]]
}):g.push({type:"L",values:[v.values[0],v.values[1]]}),(n=g).push.apply(n,$traceurRuntime.spread(d.slice(1))),
g.push({type:"Z",values:[]}),l.setPathData(g),this._updateNodeGrippies()}return this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),!0}var b=t.getAttribute("data-position"),p=this._currentPath,y=t[h.path],_=p.getPathData({
normalize:!0});_.length>1&&body.canvas.undoManager.checkpoint("Draw path segment");
var x=c(y,p);if(y.setAttribute("transform",x.toString()),u(y),"draw-forward"===this._mode){
"end"===b&&o(y);var w=$traceurRuntime.spread(_),S=y.getPathData({normalize:!0}),C=S[0];
this["#seg-sketch"].curved?w.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,C.values[0],C.values[1]]
}):w.push({type:"L",values:[C.values[0],C.values[1]]}),(i=w).push.apply(i,$traceurRuntime.spread(S.slice(1))),
p.setPathData(w),y.setPathData([]),y.remove()}else if("draw-backward"===this._mode){
"start"===b&&o(y);var E=[],k=y.getPathData({normalize:!0}),A=_[0];(r=E).push.apply(r,$traceurRuntime.spread(k)),
this["#seg-sketch"].curved?E.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,A.values[0],A.values[1]]
}):E.push({type:"L",values:[A.values[0],A.values[1]]}),(a=E).push.apply(a,$traceurRuntime.spread(_.slice(1))),
p.setPathData(E),y.setPathData([]),y.remove()}return body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==y}),this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),
!0},_onNodeGrippieDirectClick:function(t,e){if("select"===this._mode){this._currentPath=t[h.path];
var n=t.getAttribute("data-position");"start"===n?(this._mode="draw-backward",this["#seg-sketch"].show(t[h.path],"start")):(this._mode="draw-forward",
this["#seg-sketch"].show(t[h.path],"end"))}},_onKeyDown:function(t){if("draw-forward"===this._mode||"draw-backward"===this._mode){
var n=e.fromEvent(t);if(n.matches("Enter")||n.matches("Escape"))t.stopPropagation(),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies();else if(n.matches("Shift","Enter")){
t.stopPropagation();var i=(this._currentPath.getAttribute("d"),{type:"Z",values:[]
}),r=this._currentPath.getPathData();r.push(i),this._currentPath.setPathData(r),this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies()}}},_updateNodeGrippies:function(){
this["#node-grippies"].innerHTML="";var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._getSelectedPaths()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var o=i.value,l=o.getPathData({normalize:!0}),u=l.length,d=void 0,v=void 0;0===u?(d=null,
v=null):1===u?(d=l[0],v=null):u>1&&(d=l[0],v=l[u-1]);var f=c(o,this),m=v&&"Z"===v.type;
if(d&&!m){var g=s(d.values[0],d.values[1]).matrixTransform(f),b=a("svg:ellipse");b.setAttribute("class","node-grippie"),
b.setAttribute("cx",g.x),b.setAttribute("cy",g.y),b.setAttribute("data-position","start"),
b[h.path]=o,this["#node-grippies"].append(b)}if(v&&!m){var p=void 0;"M"===v.type||"L"===v.type?p=s(v.values[0],v.values[1]).matrixTransform(f):"C"===v.type&&(p=s(v.values[4],v.values[5]).matrixTransform(f));
var y=a("svg:ellipse");y.setAttribute("class","node-grippie"),y.setAttribute("cx",p.x),
y.setAttribute("cy",p.y),y.setAttribute("data-position","end"),y[h.path]=o,this["#node-grippies"].append(y);
}}}catch(_){e=!0,n=_}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateNodeGrippiesSize()},_updateNodeGrippiesSize:function(){var t=d/2/body.canvas.scale,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#node-grippies"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.setAttribute("rx",t),s.setAttribute("ry",t)}}catch(o){n=!0,i=o}finally{
try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_getSelectedPaths:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("is")===!1?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),m=r("g","bx-cubicsegsdrawhud",f);return{get default(){
return m}}}),System.registerModule("elements/bx-cubicsegsketch",[],function(){"use strict";
var t=System.get("utils/dom"),e=t.registerElement,n=t.createSVGPoint,i=System.get("utils/point"),r=i.comparePoints,a=i.snapPointToAngleMultiple,s=System.get("utils/transform").getTransformToElement,o=System.get("classes/vector")["default"],l=Object.freeze,u='\n  <style>@import url("stylesheets/bx-cubicsegsketch.css");</style>\n  <path id="outline" d="M 0 0 C 0 0 0 0 0 0"></path>\n  <line id="control-line-1"></line>\n  <line id="control-line-2"></line>\n  <circle id="control-point-1-grippie"></circle>\n  <circle id="control-point-2-grippie"></circle>\n',c=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=u;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,
this._clientX=null,this._clientY=null},get startPoint(){return l(n(this._startPoint));
},set startPoint(t){throw new Error("startPoint property is read-only.")},get endPoint(){
return l(n(this._endPoint))},set endPoint(t){throw new Error("endPoint property is read-only.");
},get controlPoint1(){return l(n(this._controlPoint1))},set controlPoint1(t){throw new Error("controlPoint1 property is read-only.");
},get controlPoint2(){return l(n(this._controlPoint2))},set controlPoint2(t){throw new Error("controlPoint2 property is read-only.");
},get curved(){return r(this.startPoint,this.controlPoint1)===!1||r(this.endPoint,this.controlPoint2)===!1;
},show:function(t){var e=void 0!==arguments[1]?arguments[1]:"end";this._position=e,
this._path=t,this._snap="none",this.style.visibility="visible",this._hasListeners===!1&&this._addListeners(),
this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),
this._updateOutlines()},hide:function(){this._path=null,this._clientX=null,this._clientY=null,
this.style.visibility="hidden",this._hasListeners===!0&&this._removeListeners()},
_addListeners:function(){var t=this;this._hasListeners=!0,this._mouseDown=!1,body.addEventListener("modkeyschange",this._modKeysChangeListener=function(){
t._mouseDown===!1&&(t._updateSnapProperty(),t._updatePointProperties(),t._updateOutlines());
}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)}),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(e){
var i,r,s,o,l=t._path.getScreenCTM().inverse();if(t._mouseDown=!0,t._mouseDownPoint=n(e.clientX,e.clientY),
t._mouseDownPoint=t._mouseDownPoint.matrixTransform(l),t._mouseDownControlPoint1=n(t._controlPoint1),
t._mouseDownControlPoint2=n(t._controlPoint2),"end"===t._position)if("paraxialPolygon"===t._snap){
var u=(i=a(t._startPoint,t._endPoint,45)[Symbol.iterator](),(r=i.next()).done?void 0:r.value);
t._endPoint=u}else t._endPoint=n(t._mouseDownPoint);else if("start"===t._position)if("paraxialPolygon"===t._snap){
var c=(s=a(t._startPoint,t._endPoint,45)[Symbol.iterator](),(o=s.next()).done?void 0:o.value);
t._endPoint=c}else t._endPoint=n(n(t._firstSeg.values[0],t._firstSeg.values[1]))}),
window.addEventListener("mousemove",this._mouseMoveListener=function(e){t._clientX=e.clientX,
t._clientY=e.clientY,t._updatePointProperties(),t._updateOutlines()}),window.addEventListener("mouseup",this._mouseUpListener=function(e){
t._mouseDown=!1,t._updateSnapProperty()})},_removeListeners:function(){this._hasListeners=!1,
body.removeEventListener("modkeyschange",this._modKeysChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("mousedown",this._mouseDownListener),window.removeEventListener("mousemove",this._mouseMoveListener),
window.removeEventListener("mouseup",this._mouseUpListener)},_onContentMutation:function(t){
var e=t.detail;(e.target===this._path||e.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),
this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())},
_updateSegProperties:function(){if("end"===this._position){var t=this._path.getPathData({
normalize:!0}),e=t[t.length-1];this._lastSeg=e;for(var i=t.length-1;i>=0;i-=1){var r=t[i];
if("Z"!==r.type){this._lastNonZSeg=r;break}}"C"===e.type?this._lastSegControlPoint=n(e.values[2],e.values[3]):"M"===e.type||"L"===e.type?this._lastSegControlPoint=n(e.values[0],e.values[1]):this._lastSegControlPoint=null,
"C"===e.type?this._lastSegIsSmooth=e.values[2]!==e.values[4]||e.values[3]!==e.values[5]:this._lastSegIsSmooth=!1;
}else if("start"===this._position){var a=this._path.getPathData({normalize:!0}),s=a[0],o=a[1];
this._firstSeg=s,"C"===o.type?this._secondSegControlPoint=n(o.values[0],o.values[1]):"M"===o.type||"L"===o.type?this._secondSegControlPoint=n(s.values[0],s.values[1]):this._secondSegControlPoint=null,
"C"===o.type?this._secondSegIsSmooth=o.values[0]!==s.values[0]&&o.values[1]!==s.values[1]:this._secondSegIsSmooth=!1;
}},_updatePointProperties:function(){var t,e,i,r;if(this._mouseDown===!1){var s=this._path.getScreenCTM().inverse();
if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=n(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=n(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),
null===this._clientX?this._endPoint=n(this._startPoint):this._endPoint=n(this._clientX,this._clientY).matrixTransform(s)):"start"===this._position&&(null===this._clientX?this._startPoint=n(this._firstSeg.values[0],this._firstSeg.values[1]):this._startPoint=n(this._clientX,this._clientY).matrixTransform(s),
this._endPoint=n(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){
var l;new o(this._startPoint,this._endPoint);"end"===this._position?l=new o(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(l=new o(this._endPoint,this._secondSegControlPoint)),
l=l.negate(),"end"===this._position?(this._controlPoint1=n(this._startPoint.x+l.x,this._startPoint.y+l.y),
this._controlPoint2=n(this._endPoint)):"start"===this._position&&(this._controlPoint2=n(this._endPoint.x+l.x,this._endPoint.y+l.y),
this._controlPoint1=n(this._startPoint))}else if("polygon"===this._snap)this._controlPoint1=n(this._startPoint),
this._controlPoint2=n(this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){
var u=(t=a(this._startPoint,this._endPoint,45)[Symbol.iterator](),(e=t.next()).done?void 0:e.value);
this._endPoint=u}else if("start"===this._position){var c=(i=a(this._endPoint,this._startPoint,45)[Symbol.iterator](),
(r=i.next()).done?void 0:r.value);this._startPoint=c}this._controlPoint1=n(this._startPoint),
this._controlPoint2=n(this._endPoint)}}else if(this._mouseDown===!0){var d=this._path.getScreenCTM().inverse(),h=n(this._clientX,this._clientY);
h=h.matrixTransform(d);var v=new o(this._mouseDownPoint,h).negate();"end"===this._position?this._controlPoint2=n(this._mouseDownControlPoint2.x+v.x,this._mouseDownControlPoint2.y+v.y):"start"===this._position&&(this._controlPoint1=n(this._mouseDownControlPoint1.x+v.x,this._mouseDownControlPoint1.y+v.y));
}},_updateSnapProperty:function(){var t=body.modKeys,e=t.ctrl,n=(t.alt,t.shift);e&&!n?this._snap="polygon":e&&n?this._snap="paraxialPolygon":this._snap="none",
"end"===this._position?this._lastSegIsSmooth||"none"!==this._snap||(this._snap="polygon"):"start"===this._position&&(this._secondSegIsSmooth||"none"!==this._snap||(this._snap="polygon"));
},_updateOutlines:function(){var t=s(this._path,this),e=this._startPoint.matrixTransform(t),n=this._endPoint.matrixTransform(t),i=this._controlPoint1.matrixTransform(t),r=this._controlPoint2.matrixTransform(t),a=3/body.canvas.scale,o=[{
type:"M",values:[e.x,e.y]},{type:"C",values:[i.x,i.y,r.x,r.y,n.x,n.y]}];this["#outline"].setPathData(o),
this["#control-point-1-grippie"].cx.baseVal.value=i.x,this["#control-point-1-grippie"].cy.baseVal.value=i.y,
this["#control-point-1-grippie"].r.baseVal.value=a,this["#control-point-2-grippie"].cx.baseVal.value=r.x,
this["#control-point-2-grippie"].cy.baseVal.value=r.y,this["#control-point-2-grippie"].r.baseVal.value=a,
this["#control-line-1"].x1.baseVal.value=e.x,this["#control-line-1"].y1.baseVal.value=e.y,
this["#control-line-1"].x2.baseVal.value=i.x,this["#control-line-1"].y2.baseVal.value=i.y,
this["#control-line-2"].x1.baseVal.value=n.x,this["#control-line-2"].y1.baseVal.value=n.y,
this["#control-line-2"].x2.baseVal.value=r.x,this["#control-line-2"].y2.baseVal.value=r.y;
}},{},t)}(SVGGElement),d=e("g","bx-cubicsegsketch",c);return{get default(){return d;
}}}),System.registerModule("elements/bx-defscontrols",[],function(){"use strict";System.get("elements/bx-button"),
System.get("elements/bx-patternslist"),System.get("elements/bx-symbolslist");var t=System.get("utils/dom").registerElement,e='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-defscontrols.css");\n</style>\n\n<main>\n  <div id="buttons">\n    <bx-button\n      id="symbols-button"\n      class="button"\n      href="#symbols-list"\n      tooltip="Symbols"\n      icon="symbols-button"\n      iconsize="30"\n      skin="iconic">\n    </bx-button>\n\n    <bx-button\n      id="patterns-button"\n      class="button"\n      href="#patterns-list"\n      tooltip="Patterns"\n      icon="paint-pattern"\n      iconsize="30"\n      skin="iconic">\n    </bx-button>\n  </div>\n\n  <div id="lists">\n    <bx-symbolslist id="symbols-list" class="list"></bx-symbolslist>\n    <bx-patternslist id="patterns-list" class="list"></bx-patternslist>\n  </div>\n</main>\n',n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=e;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this["#buttons"].addEventListener("click",function(e){return t._onButtonsClick(e);
})},enabledCallback:function(){var t;return $traceurRuntime.asyncWrap(function(e){
for(;;)switch(e.state){case 0:return void Promise.resolve(body.getConfig("bx-defscontrols:currentListID")).then(e.createCallback(3),e.errback);
case 3:t=e.value,e.state=2;break;case 2:this._toggleList(t||"symbols-list"),e.state=-2;
break;default:return e.end()}},this)},disabledCallback:function(){this._toggleList(null);
},_onButtonsClick:function(t){"bx-button"===t.target.localName&&0===t.button&&this._onButtonClick(t.target);
},_onButtonClick:function(t){t.pressed===!1&&this._toggleList(t.href.substring(1));
},_toggleList:function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#buttons"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;null!==t&&s.href==="#"+t?s.pressed=!0:s.pressed=!1}}catch(o){n=!0,i=o;
}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=this["#lists"].children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;null!==t&&v.id===t?(v.enabled=!0,v.hidden=!1):(v.enabled=!1,v.hidden=!0);
}}catch(f){u=!0,c=f}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c;
}}null!==t&&body.setConfig("bx-defscontrols:currentListID",t)}},{},t)}(HTMLElement),i=t("bx-defscontrols",n);
return{get default(){return i}}}),System.registerModule("elements/bx-dock",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e=System.get("utils/time"),n=e.sleep,i=e.throttle,r='\n  <style>@import url("stylesheets/bx-dock.css");</style>\n\n  <main>\n    <div id="up-grippie" class="grippie">\n      <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n        <use xlink:href="images/icons.svg#arrow-up" width="100" height="100"></use>\n      </svg>\n    </div>\n\n    <div id="buttons">\n      <content></content>\n    </div>\n\n    <div id="down-grippie" class="grippie">\n      <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n        <use xlink:href="images/icons.svg#arrow-down" width="100" height="100"></use>\n      </svg>\n    </div>\n  </main>\n',a=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r,this._pressedButton=null,this._updateGrippiesVisibility_250ms=i(this._updateGrippiesVisibility,250,this);
var e=!0,n=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){n=!0,a=u}finally{try{e||null==o["return"]||o["return"]();
}finally{if(n)throw a}}window.addEventListener("resize",function(){return t._updateGrippiesVisibility_250ms();
}),this["#buttons"].addEventListener("scroll",function(){return t._updateGrippiesVisibility();
}),this["#buttons"].addEventListener("hiddenchange",function(){return t._updateGrippiesVisibility();
})},attachedCallback:function(){var t;return $traceurRuntime.asyncWrap(function(e){
for(;;)switch(e.state){case 0:t=this,this.addEventListener("mouseenter",this._mouseEnterListener=function(){
t._defaultCursor=body.registerCursor("default",200)}),this.addEventListener("mouseleave",this._mouseLeaveListener=function(){
body.unregisterCursor(t._defaultCursor)}),e.state=6;break;case 6:return void Promise.resolve(n(100)).then(e.createCallback(2),e.errback);
case 2:this._updateGrippiesVisibility(),e.state=8;break;case 8:return void Promise.resolve(n(1e3)).then(e.createCallback(4),e.errback);
case 4:this._updateGrippiesVisibility(),e.state=-2;break;default:return e.end()}},this);
},detachedCallback:function(){this.removeEventListener("mouseenter",this._mouseEnterListener),
this.removeEventListener("mouseleave",this._mouseLeaveListener)},_updateGrippiesVisibility:function(){
0===this["#buttons"].scrollTop?this["#up-grippie"].disabled=!0:this["#up-grippie"].disabled=!1,
this["#buttons"].scrollTop>=this["#buttons"].scrollHeight-this["#buttons"].offsetHeight?this["#down-grippie"].disabled=!0:this["#down-grippie"].disabled=!1;
}},{},t)}(HTMLElement),s=t("bx-dock",a);return{get default(){return s}}}),System.registerModule("elements/bx-editorbody",[],function(){
"use strict";var t=System.get("elements/bx-body")["default"];System.get("elements/bx-button"),
System.get("elements/bx-canvas"),System.get("elements/bx-dock"),System.get("elements/bx-panel"),
System.get("elements/bx-breadcrumb"),System.get("elements/bx-contextmenu"),System.get("elements/bx-menuitem"),
System.get("elements/bx-fillcontrols"),System.get("elements/bx-strokecontrols"),System.get("elements/bx-compositingcontrols"),
System.get("elements/bx-maskcontrols"),System.get("elements/bx-typographycontrols"),
System.get("elements/bx-viewcontrols"),System.get("elements/bx-arrangementcontrols"),
System.get("elements/bx-defscontrols"),System.get("elements/bx-pathfindercontrols"),
System.get("elements/bx-exportcontrols"),System.get("elements/bx-transformtool"),
System.get("elements/bx-edittool"),System.get("elements/bx-quadbeziertool"),System.get("elements/bx-cubicbeziertool"),
System.get("elements/bx-freehandtool"),System.get("elements/bx-texttool"),System.get("elements/bx-recttool"),
System.get("elements/bx-ellipsetool"),System.get("elements/bx-startool"),System.get("elements/bx-ringtool"),
System.get("elements/bx-rectpath"),System.get("elements/bx-starpath"),System.get("elements/bx-ringpath");
var e=System.get("utils/artwork"),n=e.isArtworkString,i=e.serializeArtwork,r=e.deserializeArtwork,a=e.rasterizeArtwork,s=System.get("utils/bbox").getClientBBox,o=(System.get("utils/constants").SHAPE_ELEMENTS,
System.get("utils/dom")),l=o.parseSVG,u=o.registerElement,c=o.createElement,d=o.createSVGPoint,h=o.createSVGMatrix,v=System.get("utils/paint").getDefFromURL,f=(System.get("utils/path").anyToPath,
System.get("utils/rect").combineRects),m=(System.get("utils/time").sleep,System.get("utils/transform")),g=m.getTransformOriginPoint,b=m.getTransformToElement,p=System.get("utils/relationship"),y=p.getElementIndex,_=p.sortByDomPosition,x=p.isElementIntersectingElement,w=p.sortBySiblingElements,S=p.sortByIntersectingElements,C=p.queryClippingElements,E=System.get("classes/shortcut")["default"],k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"></svg>',A='\n  <style>@import url("stylesheets/bx-editorbody.css");</style>\n\n  <main>\n    <bx-canvas id="canvas"></bx-canvas>\n    <bx-breadcrumb id="breadcrumb"></bx-breadcrumb>\n\n    <bx-dock id="tools-dock">\n      <bx-button\n        title="Transform Tool"\n        icon="transform-tool"\n        skin="bx-dock"\n        href="#transform-tool">\n      </bx-button>\n\n      <bx-button\n        title="Edit Tool"\n        icon="edit-tool"\n        skin="bx-dock"\n        href="#edit-tool">\n      </bx-button>\n\n      <bx-button\n        title="Quad Bezier Tool"\n        icon="quad-bezier-tool"\n        skin="bx-dock"\n        href="#quad-bezier-tool">\n      </bx-button>\n\n      <bx-button\n        title="Cubic Bezier Tool"\n        icon="cubic-bezier-tool"\n        skin="bx-dock"\n        href="#cubic-bezier-tool">\n      </bx-button>\n\n      <bx-button id="freehand"\n        title="Freehand Tool"\n        icon="freehand-tool"\n        skin="bx-dock"\n        href="#freehand-tool">\n      </bx-button>\n\n      <bx-button\n        title="Text Tool"\n        icon="text-tool"\n        skin="bx-dock"\n        href="#text-tool">\n      </bx-button>\n\n      <bx-button\n        title="Rectangle Tool"\n        icon="rect-tool"\n        skin="bx-dock"\n        href="#rect-tool">\n      </bx-button>\n\n      <bx-button\n        title="Ellipse Tool"\n        icon="ellipse-tool"\n        skin="bx-dock"\n        href="#ellipse-tool">\n      </bx-button>\n\n      <bx-button\n        title="Star Tool"\n        icon="star-tool"\n        skin="bx-dock"\n        href="#star-tool">\n      </bx-button>\n\n      <bx-button\n        title="Ring Tool"\n        icon="ring-tool"\n        skin="bx-dock"\n        href="#ring-tool">\n      </bx-button>\n    </bx-dock>\n\n    <bx-dock id="panels-dock">\n      <bx-button\n        title="Fill Panel"\n        icon="fill-panel"\n        iconsize="23"\n        skin="bx-dock"\n        href="#fill-panel">\n      </bx-button>\n\n      <bx-button\n        title="Stroke Panel"\n        icon="stroke-panel"\n        skin="bx-dock"\n        href="#stroke-panel">\n      </bx-button>\n\n      <bx-button\n        title="Compositing Panel"\n        icon="compositing-panel"\n        skin="bx-dock"\n        href="#compositing-panel">\n      </bx-button>\n\n      <bx-button\n        title="View Panel"\n        icon="view-panel"\n        skin="bx-dock"\n        href="#view-panel">\n      </bx-button>\n\n      <bx-button\n        title="Arrangement Panel"\n        icon="arrangement-panel"\n        skin="bx-dock"\n        href="#arrangement-panel">\n      </bx-button>\n\n      <bx-button\n        title="Typography Panel"\n        icon="typography-panel"\n        iconsize="22"\n        skin="bx-dock"\n        href="#typography-panel">\n      </bx-button>\n\n      <bx-button\n        title="Defs Panel"\n        icon="defs-panel"\n        skin="bx-dock"\n        href="#defs-panel">\n      </bx-button>\n\n      <bx-button\n        title="Mask Panel"\n        icon="mask-panel"\n        skin="bx-dock"\n        href="#mask-panel">\n      </bx-button>\n\n      <bx-button\n        title="Pathfinder Panel"\n        icon="pathfinder-panel"\n        skin="bx-dock"\n        href="#pathfinder-panel">\n      </bx-button>\n\n      <bx-button\n        title="Export Panel"\n        icon="export-panel"\n        skin="bx-dock"\n        href="#export-panel">\n      </bx-button>\n    </bx-dock>\n\n    <div id="tools">\n      <bx-transformtool id="transform-tool"></bx-transformtool>\n      <bx-edittool id="edit-tool"></bx-edittool>\n      <bx-quadbeziertool id="quad-bezier-tool"></bx-quadbeziertool>\n      <bx-cubicbeziertool id="cubic-bezier-tool"></bx-cubicbeziertool>\n      <bx-freehandtool id="freehand-tool"></bx-freehandtool>\n      <bx-texttool id="text-tool"></bx-texttool>\n      <bx-recttool id="rect-tool"></bx-recttool>\n      <bx-ellipsetool id="ellipse-tool"></bx-ellipsetool>\n      <bx-startool id="star-tool"></bx-startool>\n      <bx-ringtool id="ring-tool"></bx-ringtool>\n    </div>\n\n    <div id="panels">\n      <bx-panel id="fill-panel" label="Fill">\n        <bx-fillcontrols></bx-fillcontrols>\n      </bx-panel>\n\n      <bx-panel id="stroke-panel" label="Stroke">\n        <bx-strokecontrols></bx-strokecontrols>\n      </bx-panel>\n\n      <bx-panel id="compositing-panel" label="Compositing">\n        <bx-compositingcontrols></bx-compositingcontrols>\n      </bx-panel>\n\n      <bx-panel id="typography-panel" label="Typography">\n        <bx-typographycontrols></bx-typographycontrols>\n      </bx-panel>\n\n      <bx-panel id="view-panel" label="View" help="http://sarasoueidan.com/blog/svg-coordinate-systems/">\n        <bx-viewcontrols></bx-viewcontrols>\n      </bx-panel>\n\n      <bx-panel id="arrangement-panel" label="Arrangement">\n        <bx-arrangementcontrols></bx-arrangementcontrols>\n      </bx-panel>\n\n      <bx-panel id="defs-panel" label="Defs">\n        <bx-defscontrols></bx-defscontrols>\n      </bx-panel>\n\n      <bx-panel id="mask-panel" label="Mask">\n        <bx-maskcontrols></bx-maskcontrols>\n      </bx-panel>\n\n      <bx-panel id="pathfinder-panel" label="Pathfinder">\n        <bx-pathfindercontrols></bx-pathfindercontrols>\n      </bx-panel>\n\n      <bx-panel id="export-panel" label="Export">\n        <bx-exportcontrols></bx-exportcontrols>\n      </bx-panel>\n    </div>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n      <bx-menuitem commandid="duplicate" label="Duplicate"></bx-menuitem>\n      <bx-menuitem commandid="delete" label="Delete"></bx-menuitem>\n      <hr/>\n      <bx-menuitem commandid="raise" label="Raise"></bx-menuitem>\n      <bx-menuitem commandid="lower" label="Lower"></bx-menuitem>\n      <hr/>\n      <bx-menuitem commandid="group" label="Group"></bx-menuitem>\n      <bx-menuitem commandid="ungroup" label="Ungroup"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n',L=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t,n,a,s,o,l,u;return $traceurRuntime.asyncWrap(function(c){
for(;;)switch(c.state){case 0:t=this,$traceurRuntime.superGet(this,e.prototype,"createdCallback").call(this),
this.commands={transformTool:{exec:function(){return t.toggleTool("transform-tool");
}},editTool:{exec:function(){return t.toggleTool("edit-tool")}},quadBezierTool:{exec:function(){
return t.toggleTool("quad-bezier-tool")}},cubicBezierTool:{exec:function(){return t.toggleTool("cubic-bezier-tool");
}},freehandTool:{exec:function(){return t.toggleTool("freehand-tool")}},textTool:{
exec:function(){return t.toggleTool("text-tool")}},rectTool:{exec:function(){return t.toggleTool("rect-tool");
}},ellipseTool:{exec:function(){return t.toggleTool("ellipse-tool")}},starTool:{exec:function(){
return t.toggleTool("star-tool")}},ringTool:{exec:function(){return t.toggleTool("ring-tool");
}},fillPanel:{exec:function(){return t.togglePanel("fill-panel")}},strokePanel:{exec:function(){
return t.togglePanel("stroke-panel")}},compositingPanel:{exec:function(){return t.togglePanel("compositing-panel");
}},maskPanel:{exec:function(){return t.togglePanel("mask-panel")}},typographyPanel:{
exec:function(){return t.togglePanel("typography-panel")}},pathfinderPanel:{exec:function(){
return t.togglePanel("pathfinder-panel")}},exportPanel:{exec:function(){return t.togglePanel("export-panel");
}},viewPanel:{exec:function(){return t.togglePanel("view-panel")}},arrangementPanel:{
exec:function(){return t.togglePanel("arrangement-panel")}},defsPanel:{exec:function(){
return t.togglePanel("defs-panel")}},zoomIn:{exec:function(){return t.canvas.zoomBy(.3);
}},zoomOut:{exec:function(){return t.canvas.zoomBy(-.3)}},resetZoom:{enabled:function(){
return 100!==t.canvas.zoom},exec:function(){return t.canvas.resetZoom()}},zoomToFitAll:{
exec:function(){return t.canvas.zoomToFitAll()}},zoomToViewBox:{enabled:function(){
return t.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){return t.canvas.zoomToCurrentArtboardViewBox();
}},zoomToViewBoxWidth:{enabled:function(){return t.canvas.currentArtboard.hasAttribute("viewBox");
},exec:function(){return t.canvas.zoomToCurrentArtboardViewBoxWidth()}},zoomToViewBoxHeight:{
enabled:function(){return t.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){
return t.canvas.zoomToCurrentArtboardViewBoxHeight()}},undo:{enabled:function(){return t.canvas.undoManager.canUndo()&&t.mouseIsDown===!1;
},exec:function(){return t.canvas.undoManager.undo()}},redo:{enabled:function(){return t.canvas.undoManager.canRedo()&&t.mouseIsDown===!1;
},exec:function(){return t.canvas.undoManager.redo()}},group:{enabled:function(){
return t._canGroup()},exec:function(){return t._group()}},ungroup:{enabled:function(){
return t._canUngroup()},exec:function(){return t._ungroup()}},raise:{enabled:function(){
return t._canRaise()},exec:function(){return t._raise()}},raiseToFront:{enabled:function(){
return t._canRaise()},exec:function(){return t._raiseToFront()}},lower:{enabled:function(){
return t._canLower()},exec:function(){return t._lower()}},lowerToBack:{enabled:function(){
return t._canLower()},exec:function(){return t._lowerToBack()}},clip:{enabled:function(){
return t._canClip()},exec:function(){return t._clip()}},unclip:{enabled:function(){
return t._canUnclip()},exec:function(){return t._unclip()}},mask:{enabled:function(){
return t._canMask()},exec:function(){return t._mask()}},unmask:{enabled:function(){
return t._canUnmask()},exec:function(){return t._unmask()}},rotateClockwise:{enabled:function(){
return t._canRotate()},exec:function(){return t._rotate(90)}},rotateCounterclockwise:{
enabled:function(){return t._canRotate()},exec:function(){return t._rotate(-90)}},
flipX:{enabled:function(){return t._canFlip()},exec:function(){return t._flip("x");
}},flipY:{enabled:function(){return t._canFlip()},exec:function(){return t._flip("y");
}},moveOneUnitLeft:{enabled:function(){return t.canvas.selectedElements.length>0},
exec:function(){return t._move(t.canvas.selectedElements,1,"left")}},moveOneUnitRight:{
enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){return t._move(t.canvas.selectedElements,1,"right");
}},moveOneUnitUp:{enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){
return t._move(t.canvas.selectedElements,1,"up")}},moveOneUnitDown:{enabled:function(){
return t.canvas.selectedElements.length>0},exec:function(){return t._move(t.canvas.selectedElements,1,"down");
}},moveTenUnitsLeft:{enabled:function(){return t.canvas.selectedElements.length>0;
},exec:function(){return t._move(t.canvas.selectedElements,10,"left")}},moveTenUnitsRight:{
enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){return t._move(t.canvas.selectedElements,10,"right");
}},moveTenUnitsUp:{enabled:function(){return t.canvas.selectedElements.length>0},
exec:function(){return t._move(t.canvas.selectedElements,10,"up")}},moveTenUnitsDown:{
enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){return t._move(t.canvas.selectedElements,10,"down");
}},selectAll:{exec:function(){return t.canvas.selectAll()}},deselectAll:{enabled:function(){
return t.canvas.selectedElements.length>0},exec:function(){return t.canvas.selectedElements=[];
}},copy:{enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){
return t._copy()}},cut:{enabled:function(){return t.canvas.selectedElements.length>0;
},exec:function(){return t._cut()}},paste:{exec:function(){return t._paste()}},duplicate:{
enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){return t._duplicate();
}},"delete":{enabled:function(){return t.canvas.selectedElements.length>0},exec:function(){
return t._delete()}},previousTool:{enabled:function(){return null!==t._previousToolID;
},exec:function(){return t.toggleTool(t._previousToolID)}}},this._previousToolID=null,
this.innerHTML=A,n=!0,a=!1,s=void 0;try{for(o=void 0,l=this.querySelectorAll("[id]")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)u=o.value,
this["#"+u.id]=u}catch(d){a=!0,s=d}finally{try{n||null==l["return"]||l["return"]();
}finally{if(a)throw s}}this.addEventListener("contextmenu",function(e){return t._onContextMenu(e);
}),this["#tools-dock"].addEventListener("click",function(e){return t._onToolsDockClick(e);
}),this["#panels-dock"].addEventListener("click",function(e){return t._onPanelsDockClick(e);
}),this["#context-menu"].menuWillShow=function(e){return t._menuWillShow(e)},this["#context-menu"].menuItemWillTrigger=function(e){
return t._menuItemWillTrigger(e)},this["#context-menu"].addEventListener("menuitemtrigger",function(e){
return t.execCommand(e.detail.commandID)}),this.bridge.addMessageListener("init",function(e,n){
var i=e,a=i.artwork,s=i.distribution;t._updateDockButtonsForDistribution(s),t.canvas.loadArtwork(r(a)),
n()}),this.bridge.addMessageListener("getArtwork",function(e,n){var r=i(t.canvas.extractArtwork(),e);
n(r)}),this.bridge.addMessageListener("getArtworkFromSelectedElements",function(e,n){
var i=t._getArtworkFromSelectedElements(e);n(i)}),this.bridge.addMessageListener("setArtwork",function(e){
var n=r(e);t.canvas.loadArtwork(n)}),this.bridge.addMessageListener("distributionChanged",function(e){
t._updateDockButtonsForDistribution(e)}),this.toggleTool("transform-tool"),c.state=-2;
break;default:return c.end()}},this)},get canvas(){return this.querySelector("#canvas");
},set canvas(t){throw new Error("canvas property is read-only")},get tools(){return $traceurRuntime.spread(this["#tools"].children);
},set tools(t){throw new Error("tools property is read-only")},get panels(){return $traceurRuntime.spread(this["#panels"].children);
},set panels(t){throw new Error("panels property is read-only")},get currentTool(){
var t=null,e=this["#tools-dock"].querySelector("bx-button[pressed]");if(e){var n=e.href.slice(1);
t=this["#tools"].querySelector("#"+n)}return t},set currentTool(t){throw new Error("currentTool property is read-only");
},get currentPanel(){var t=null,e=this["#panels-dock"].querySelector("bx-button[pressed]");
if(e){var n=e.href.slice(1);t=this["#panels"].querySelector("#"+n)}return t},set currentPanel(t){
throw new Error("currentPanel property is read-only")},toggleTool:function(t){var e=this["#tools"].querySelector("#"+t),n=this["#tools-dock"].querySelector('bx-button[href="#'+t+'"]'),i=this["#tools-dock"].querySelector("bx-button[pressed]");
if(!n.pressed){if(!e)throw new Error("Tool with given ID was not found: "+t);if(i){
i.pressed=!1,this._previousToolID=i.href.substring(1);var r=i.href.slice(1),a=this["#tools"].querySelector("#"+r);
a&&a.disabledCallback()}n.pressed=!0,e.enabledCallback(),this.dispatchEvent(new CustomEvent("toolchange",{
detail:t})),this.bridge.postMessage("toolChanged",t.toCamelCase())}},togglePanel:function(t){
var e=this["#panels"].querySelector("#"+t),n=this["#panels-dock"].querySelector('bx-button[href="#'+t+'"]'),i=this["#panels-dock"].querySelector("bx-button[pressed]");
if(n.pressed)n.pressed=!1,e.removeAttribute("enabled"),e.disabledCallback(),this.bridge.postMessage("panelChanged",null);else{
if(!e)throw new Error("Panel with given ID was not found: "+t);if(i){i.pressed=!1;
var r=i.href.slice(1),a=this["#panels"].querySelector("#"+r);a&&(a.removeAttribute("enabled"),
a.disabledCallback())}n.pressed=!0,e.setAttribute("enabled",""),e.enabledCallback(),
this.bridge.postMessage("panelChanged",t.toCamelCase())}},_onKeyDown:function(t){
$traceurRuntime.superGet(this,e.prototype,"_onKeyDown").call(this,t);var n=E.fromEvent(t);
this.canvas.selectedElements.length>0&&(n.matches("Backspace")?this._delete():n.matches("ArrowDown")?this._move(this.canvas.selectedElements,1,"down"):n.matches("ArrowUp")?this._move(this.canvas.selectedElements,1,"up"):n.matches("ArrowLeft")?this._move(this.canvas.selectedElements,1,"left"):n.matches("ArrowRight")?this._move(this.canvas.selectedElements,1,"right"):n.matches("Shift","ArrowDown")?this._move(this.canvas.selectedElements,10,"down"):n.matches("Shift","ArrowUp")?this._move(this.canvas.selectedElements,10,"up"):n.matches("Shift","ArrowLeft")?this._move(this.canvas.selectedElements,10,"left"):n.matches("Shift","ArrowRight")&&this._move(this.canvas.selectedElements,10,"right"));
},_onToolsDockClick:function(t){t.target!==this["#tools-dock"]&&this._onToolsDockButtonClick(t);
},_onPanelsDockClick:function(t){t.target!==this["#panels-dock"]&&this._onPanelsDockButtonClick(t);
},_onToolsDockButtonClick:function(t){var e=t.target,n=e.href.slice(1);this.toggleTool(n);
},_onPanelsDockButtonClick:function(t){var e=t.target,n=e.href.slice(1);this.togglePanel(n);
},_onContextMenu:function(t){this.canvas.contains(t.target)&&(t.preventDefault(),
this["#context-menu"].open(t.clientX,t.clientY))},_menuWillShow:function(t){var e=this;
return new Promise(function(n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(t){this._validateMenuItem(t);
},_validateMenuItem:function(t){var e=this;return new Promise(function(n){var i=t.commandID||null,r=i?e.commands[i]:null;
r&&(t.disabled=r.enabled?!r.enabled():!1),n()})},_getArtworkFromSelectedElements:function(t){
if(0===this.canvas.selectedElements.length)return k;var e=this.canvas.extractArtworkWithSelectedElements(),n=i(e,t);
return n},_updateDockButtonsForDistribution:function(t){var e=!0,n=!1,i=void 0;try{
for(var r=void 0,a=this["#tools-dock"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value,o=s.href.substring(1);s.hidden=t.tools&&t.tools.includes(o)===!1}}catch(l){
n=!0,i=l}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=this["#panels-dock"].children[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value,m=f.href.substring(1);f.hidden=t.panels&&t.panels.includes(m)===!1}
}catch(g){c=!0,d=g}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}"embedded"===t.backend&&this["#tools-dock"].setAttribute("data-extra-whitespace","");
},_copy:function(){var t,e,n,r,s,o,l,u,c;return $traceurRuntime.asyncWrap(function(d){
for(;;)switch(d.state){case 0:t=this.canvas,e=t.selectedElements,n=t.selectedTextRange,
d.state=13;break;case 13:d.state=n&&n.collapsed===!1?9:8;break;case 9:r={"text/plain":n.toString()
},this.bridge.postMessage("setClipboardData",r),d.state=-2;break;case 8:d.state=e.length>0?4:-2;
break;case 4:s=this.canvas.extractArtworkWithSelectedElements(),o=i(s,"html"),l=i(s,"xml"),
d.state=5;break;case 5:return void Promise.resolve(a(s)).then(d.createCallback(3),d.errback);
case 3:u=d.value,d.state=2;break;case 2:c={"text/plain":o,"text/html":o,"image/png":u
},this.bridge.postMessage("setClipboardData",c),d.state=-2;break;default:return d.end();
}},this)},_paste:function(){var t=this,e=this.canvas.hasPointer?"pointer":"canvasCenter";
this.bridge.postMessage("getClipboardData",null,function(i){i["text/html"]&&n(i["text/html"])?t._pasteSVG(i["text/html"],e):i["image/png"]?t._pastePNG(i["image/png"],e):i["text/plain"]&&t._pasteText(i["text/plain"],e);
})},_pasteSVG:function(t,e){this.canvas.undoManager.checkpoint("Paste");var n=r(t);
this.canvas.insertArtwork(n,e)},_pastePNG:function(t){this.canvas.undoManager.checkpoint("Paste"),
this.canvas.insertBitmap(t)},_pasteText:function(t){this.canvas.undoManager.checkpoint("Paste");
var e=this.canvas.currentContainer||this.canvas.currentArtboard,n=e.getScreenCTM().inverse(),i=d(this.mouseClientX,this.mouseClientY),r=i.matrixTransform(n),a=b(e,this.canvas.currentArtboard).inverse(),s=l('<text style="font-size: 30;"><tspan>'+t+"</tspan></text>");
s.setAttribute("transform",a.toString()),s.setAttribute("x",r.x),s.setAttribute("y",r.y),
e.append(s),this.canvas.selectedElements=[s],this.canvas.currentContainer=e===this.canvas.currentArtboard?null:e;
},_duplicate:function(){this.canvas.undoManager.checkpoint("Duplicate");var t=this.canvas.extractArtworkWithSelectedElements();
this.canvas.insertArtwork(t,"original"),this.canvas.transformHud.blink()},_cut:function(){
this.canvas.undoManager.checkpoint("Cut"),this._copy();var t=_(this.canvas.selectedElements);
t.reverse(),this.canvas.selectedElements=[];var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.remove()}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},_delete:function(){if(this.canvas.selectedElements.length>0){
this.canvas.undoManager.checkpoint("Delete");var t=_(this.canvas.selectedElements);
t.reverse(),this.canvas.selectedElements=[];var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.remove()}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}},_clip:function(){this.canvas.undoManager.checkpoint("Clip");
var t=this.canvas.selectedElements[0],e=C(this.canvas.selectedElements.slice(1)),n=this.canvas.generateUniqueID("clip"),i=c("svg:clipPath");
i.id=n,this.canvas.defs.append(i);var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,d=b(u,t);u.setAttribute("transform",d.toString()),i.appendChild(u)}
}catch(h){a=!0,s=h}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.canvas.selectedElements=this.canvas.selectedElements.filter(function(t){return e.includes(t)===!1;
}),t.style.clipPath="url(#"+n+")"},_canClip:function(){var t=!1,e=this.canvas.selectedElements[0]||null,n=this.canvas.selectedElements.slice(1),i=C(n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
if(x(u,e)){t=!0;break}}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return null===e||t===!1?!1:!0},_unclip:function(){this.canvas.undoManager.checkpoint("Unclip");
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;if("none"!==getComputedStyle(a).clipPath){var s=a,o=v(this.canvas.masterArtboard,a.style.clipPath);
if(o){var l=$traceurRuntime.spread(o.children),u=!0,c=!1,d=void 0;try{for(var h=void 0,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){
var m=h.value,g=b(m,this.canvas.currentArtboard),p=s.transform.baseVal.consolidate().matrix.multiply(g);
m.setAttribute("transform",p.toString()),this.canvas.currentArtboard.appendChild(m);
}}catch(y){c=!0,d=y}finally{try{u||null==f["return"]||f["return"]()}finally{if(c)throw d;
}}a.style.clipPath=null}}}}catch(_){e=!0,n=_}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},_canUnclip:function(){var t=!1,e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this.canvas.selectedElements[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value,o=getComputedStyle(s).clipPath;if("none"!==o){var l=v(this.canvas.masterArtboard,o);
if(l){t=!0;break}}}}catch(u){n=!0,i=u}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}return t},_mask:function(){this.canvas.undoManager.checkpoint("Mask");
var t=this.canvas.selectedElements[0],e=this.canvas.selectedElements.slice(1),n=this.canvas.generateUniqueID("mask"),i=c("svg:mask");
i.id=n,this.canvas.defs.append(i);var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,d=b(u,t);u.setAttribute("transform",d.toString()),i.appendChild(u)}
}catch(h){a=!0,s=h}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.canvas.selectedElements=this.canvas.selectedElements.filter(function(t){return e.includes(t)===!1;
}),t.style.mask="url(#"+n+")"},_canMask:function(){var t=!1,e=this.canvas.selectedElements[0]||null,n=this.canvas.selectedElements.slice(1),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
if(x(l,e)){t=!0;break}}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return null===e||t===!1?!1:!0},_unmask:function(){this.canvas.undoManager.checkpoint("Unmask");
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;if("none"!==getComputedStyle(a).mask){var s=a,o=v(this.canvas.masterArtboard,a.style.mask);
if(o){var l=$traceurRuntime.spread(o.children),u=!0,c=!1,d=void 0;try{for(var h=void 0,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){
var m=h.value,g=b(m,this.canvas.currentArtboard),p=s.transform.baseVal.consolidate().matrix.multiply(g);
m.setAttribute("transform",p.toString()),this.canvas.currentArtboard.appendChild(m);
}}catch(y){c=!0,d=y}finally{try{u||null==f["return"]||f["return"]()}finally{if(c)throw d;
}}a.style.mask=null}}}}catch(_){e=!0,n=_}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},_canUnmask:function(){var t=!1,e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this.canvas.selectedElements[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value,o=getComputedStyle(s).mask;if("none"!==o){var l=v(this.canvas.masterArtboard,o);
if(l){t=!0;break}}}}catch(u){n=!0,i=u}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}return t},_move:function(t){var e=void 0!==arguments[1]?arguments[1]:1,n=void 0!==arguments[2]?arguments[2]:"left";
this.canvas.undoManager.checkpoint("Move");var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=h(l.transform.baseVal.consolidate().matrix),c=b(l,this.canvas.currentArtboard),d=c.inverse(),v=h();
"left"===n?v.translateSelf(-e,0):"right"===n?v.translateSelf(e,0):"up"===n?v.translateSelf(0,-e):"down"===n&&v.translateSelf(0,e);
var f=h(u);f.multiplySelf(d),f.multiplySelf(v),f.multiplySelf(c),l.setAttribute("transform",f.toString());
}}catch(m){r=!0,a=m}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}},_flip:function(){var t=void 0!==arguments[0]?arguments[0]:"x";this.canvas.undoManager.checkpoint("Flip");
var e=$traceurRuntime.spread(this.canvas.selectedElements),n=function(){var t=0,n=[],i=!0,r=!1,a=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;
n[t++]=s(u)}}catch(c){r=!0,a=c}finally{try{i||null==l["return"]||l["return"]()}finally{
if(r)throw a}}return n}(),i=f(n),r=!0,a=!1,o=void 0;try{for(var l=void 0,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value,d=h(c.transform.baseVal.consolidate().matrix),v=c.getScreenCTM(),m=v.inverse(),g=void 0;
if("x"===t){var b=2*(i.x+i.width/2);g=h(-1,0,0,1,b,0)}else if("y"===t){var p=2*(i.y+i.height/2);
g=h(1,0,0,-1,0,p)}var y=h(d);y.multiplySelf(m),y.multiplySelf(g),y.multiplySelf(v),
c.setAttribute("transform",y.toString())}}catch(_){a=!0,o=_}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw o}}},_canFlip:function(){return this.canvas.selectedElements.length>0;
},_raise:function(){this.canvas.undoManager.checkpoint("Raise");var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=w(this.canvas.selectedElements)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var t=v.value,e=$traceurRuntime.spread(t[0].parentElement.children).filter(function(e){
if(t.includes(e))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(x(e,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=e.find(function(e){return y(e)>y(t[t.length-1]);
});if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=t.reverse()[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.after(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=S(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(g){e=!0,n=g}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_raiseToFront:function(){this.canvas.undoManager.checkpoint("Raise to Front");
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=w(this.canvas.selectedElements)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var t=v.value,e=$traceurRuntime.spread(t[0].parentElement.children).filter(function(e){
if(t.includes(e))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(x(e,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=e[e.length-1];if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=t.reverse()[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.after(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=S(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(g){e=!0,n=g}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_canRaise:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=w(this.canvas.selectedElements)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=function(){var t=d.value,e=$traceurRuntime.spread(t[0].parentElement.children).filter(function(e){
if(t.includes(e))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(x(e,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=e.find(function(e){return y(e)>y(t[t.length-1]);
});return n?{v:!0}:void 0},c=void 0,d=void 0,h=S(a)[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)if(c=u(),
"object"===("undefined"==typeof c?"undefined":$traceurRuntime["typeof"](c)))return c.v;
}catch(v){o=!0,l=v}finally{try{s||null==h["return"]||h["return"]()}finally{if(o)throw l;
}}}}catch(f){e=!0,n=f}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}return!1},_lower:function(){this.canvas.undoManager.checkpoint("Lower");var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=w(this.canvas.selectedElements)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var t=v.value,e=$traceurRuntime.spread(t[0].parentElement.children).filter(function(e){
if(t.includes(e))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(x(e,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=e.reverse().find(function(e){return y(e)<y(t[0]);
});if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=t[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.before(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=S(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(g){e=!0,n=g}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_lowerToBack:function(){this.canvas.undoManager.checkpoint("Lower to Back");var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=w(this.canvas.selectedElements)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var t=v.value,e=$traceurRuntime.spread(t[0].parentElement.children).filter(function(e){
if(t.includes(e))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(x(e,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=e[0];if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=t[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.before(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=S(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(g){e=!0,n=g}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_canLower:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=w(this.canvas.selectedElements)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=function(){var t=d.value,e=$traceurRuntime.spread(t[0].parentElement.children).filter(function(e){
if(t.includes(e))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(x(e,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=e.reverse().find(function(e){return y(e)<y(t[0]);
});return n?{v:!0}:void 0},c=void 0,d=void 0,h=S(a)[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)if(c=u(),
"object"===("undefined"==typeof c?"undefined":$traceurRuntime["typeof"](c)))return c.v;
}catch(v){o=!0,l=v}finally{try{s||null==h["return"]||h["return"]()}finally{if(o)throw l;
}}}}catch(f){e=!0,n=f}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}return!1},_rotate:function(){var t=void 0!==arguments[0]?arguments[0]:90;this.canvas.undoManager.checkpoint("Rotate");
var e=$traceurRuntime.spread(this.canvas.selectedElements),n=g.apply(void 0,$traceurRuntime.spread(e)),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=h(l.transform.baseVal.consolidate().matrix),c=l.getScreenCTM(),d=c.inverse(),v=h(u);
v.multiplySelf(d),v.rotateSelf(t,n.x,n.y),v.multiplySelf(c),l.setAttribute("transform",v.toString());
}}catch(f){r=!0,a=f}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}},_canRotate:function(){return this.canvas.selectedElements.length>0},_group:function(){
this.canvas.undoManager.checkpoint("Group");var t=$traceurRuntime.spread(this.canvas.selectedElements),e=c("svg:g");
t[0].after(e),t=_(t);var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=b(o,e);o.setAttribute("transform",l.toString()),e.append(o)}}catch(u){
i=!0,r=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}this.canvas.selectedElements=[e];
},_ungroup:function(){this.canvas.undoManager.checkpoint("Ungroup");var t=$traceurRuntime.spread(this.canvas.selectedElements),e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if("g"===o.localName){var l=o,u=!0,c=!1,d=void 0;try{for(var h=void 0,v=$traceurRuntime.spread(l.children)[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value,m=b(f,l.parentElement);f.setAttribute("transform",m.toString()),l.before(f),
e.push(f)}}catch(g){c=!0,d=g}finally{try{u||null==v["return"]||v["return"]()}finally{
if(c)throw d}}l.remove()}else e.push(o)}}catch(p){i=!0,r=p}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this.canvas.selectedElements=$traceurRuntime.spread(e)},_canGroup:function(){
return this.canvas.selectedElements.length>0},_canUngroup:function(){return this.canvas.selectedElements.length>0;
}},{},t)}(t),M=u("body","bx-editorbody",L);return{get default(){return M}}}),System.registerModule("elements/bx-edittool",[],function(){
"use strict";var t=System.get("utils/bbox").getClientBBox,e=System.get("utils/dom"),n=e.closest,i=e.registerElement,r=(e.isTransformableElement,
System.get("utils/event").isMouseMoveIntentional),a=System.get("utils/rect"),s=a.rectContainsRect,o=a.transformRect,l=System.get("utils/relationship").getGraphicsElements,u=System.get("utils/text").getRangeOffsetRelativeToElement,c=System.get("utils/time").debounce,d=(System.get("classes/vector")["default"],
System.get("classes/shortcut")["default"]),h=System.get("utils/constants").GRAPHICS_ELEMENTS,v=(Math.abs,
Node.DOCUMENT_POSITION_PRECEDING),f=function(e){function i(){$traceurRuntime.superConstructor(i).apply(this,arguments);
}return $traceurRuntime.createClass(i,{createdCallback:function(){this._textInputMode=!1,
this._mouseIsDown=!1,this._onKeyPressDebounced=c(this._onKeyPressDebounced,300,this,!0),
this._onBackspaceKeyDownDebounced=c(this._onBackspaceKeyDownDebounced,600,this,!0);
},enabledCallback:function(){var t=this;if(body.canvas.enableHud("outlines-hud"),
body.canvas.enableHud("rect-hud"),body.canvas.enableHud("ellipse-hud"),body.canvas.enableHud("star-hud"),
body.canvas.enableHud("ring-hud"),body.canvas.enableHud("paths-edit-hud"),body.canvas.enableHud("rubber-band-hud"),
body.canvas.enableHud("selected-text-range-hud"),body.canvas.content.addEventListener("mousedown",this._mouseDownListener=function(e){
t._onContentMouseDown(e)}),1===body.canvas.selectedElements.length&&"text"===body.canvas.selectedElements[0].localName){
var e=body.canvas.selectedElements[0],n=new Range;n.selectNodeContents(e),body.canvas.selectedTextRange=n,
this._enableTextInputMode(),body.canvas.focus()}},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),
body.canvas.disableHud("rect-hud"),body.canvas.disableHud("ellipse-hud"),body.canvas.disableHud("star-hud"),
body.canvas.disableHud("ring-hud"),body.canvas.disableHud("paths-edit-hud"),body.canvas.disableHud("rubber-band-hud"),
body.canvas.disableHud("selected-text-range-hud"),body.canvas.content.removeEventListener("mousedown",this._mouseDownListener),
body.canvas.selectedTextRange=null,this._disableTextInputMode()},_enableTextInputMode:function(){
var t=this;this._textInputMode=!0,body.bridge.postMessage("toggleTextInputMode",!0),
body.canvas.setAttribute("contenteditable",""),body.canvas.addEventListener("keydown",this._keydownListener=function(e){
t._onKeyDown(e)}),body.canvas.addEventListener("keypress",this._keypressListener=function(e){
t._onKeyPressDebounced(e),t._onKeyPress(e)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
t._onUndoOrRedo()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
t._onUndoOrRedo()}),document.addEventListener("selectionchange",this._selectionChangeListener=function(){
t._onSystemSelectionChange()}),document.addEventListener("mousedown",this._documentMouseDownListener=function(e){
t._onDocumentMouseDown(e)})},_disableTextInputMode:function(){this._textInputMode=!1,
body.bridge.postMessage("toggleTextInputMode",!1),body.canvas.removeAttribute("contenteditable"),
body.canvas.removeEventListener("keydown",this._keydownListener),body.canvas.removeEventListener("keypress",this._keypressListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.undoManager.removeEventListener("undo",this._undoListener),body.canvas.undoManager.removeEventListener("redo",this._redoListener),
document.removeEventListener("selectionchange",this._selectionChangeListener),document.removeEventListener("mousedown",this._documentMouseDownListener);
},_onSelectedElementsChange:function(){if(body.canvas.selectedTextRange){var t=n(body.canvas.selectedTextRange.startContainer,"text"),e=body.canvas.selectedElements.find(function(e){
return e===t||e.contains(t)});e||(body.canvas.selectedTextRange=null)}},_onSystemSelectionChange:function(){
var t=document.getSelection();if("None"!==t.type){var e=l(body.canvas.selectedElements,!0),n=e.length>0?e[0]:null,i=t.getRangeAt(0).cloneRange(),r=n&&"text"===n.localName?n:null;
r&&r.contains(i.startContainer)&&r!==i.startContainer&&r.contains(i.endContainer)&&r!==i.endContainer&&(i.direction=this._getSelectionDirection(t),
body.canvas.selectedTextRange=i)}},_onUndoOrRedo:function(){body.canvas.selectedTextRange=null,
this._setSystemSelectionToCanvasSelectedTextRange()},_onKeyDown:function(t){var e=d.fromEvent(t);
e.ctrl||e.alt||e.meta||t.stopImmediatePropagation(),this._mouseIsDown?(t.preventDefault(),
t.stopImmediatePropagation()):e.includes("ArrowUp")||e.includes("ArrowDown")?(t.preventDefault(),
t.stopImmediatePropagation()):e.includes("ArrowLeft")||e.includes("ArrowRight")?this._setSystemSelectionToCanvasSelectedTextRange():e.matches("Control","A")?(t.preventDefault(),
t.stopImmediatePropagation(),this._selectAll()):e.includes("Backspace")&&(t.preventDefault(),
t.stopImmediatePropagation(),this._onBackspaceKeyDownDebounced(t),this._onBackspaceKeyDown(t));
},_onBackspaceKeyDown:function(t){this._setSystemSelectionToCanvasSelectedTextRange();
var e=body.canvas.selectedTextRange,i=n(e.startContainer,"text"),r=u(e,i,"start");
(e.collapsed!==!0||0!==r)&&(document.execCommand("delete"),0===i.textContent.length&&(i.remove(),
body.canvas.selectedTextRange=null,this._disableTextInputMode()))},_onBackspaceKeyDownDebounced:function(t){
body.canvas.undoManager.checkpoint("Delete text")},_onKeyPress:function(t){var e=n(body.canvas.selectedTextRange.startContainer,"text"),i=n(body.canvas.selectedTextRange.startContainer,"textPath"),r=i||e,a=body.canvas.selectedTextRange,s=document.getSelection().getRangeAt(0),o=s.startContainer,l=s.endContainer;
if((r!==o&&r.contains(o)===!1||r!==l&&r.contains(l)===!1)&&this._setSystemSelectionToCanvasSelectedTextRange(),
a.collapsed===!1&&a.toString()===r.textContent){var u=r.children[0],c=String.fromCharCode(t.keyCode);
for(u.innerHTML=c;r.childElementCount>1;)r.lastChild.remove();t.preventDefault(),
a.selectNodeContents(u),a.collapse(),this._setSystemSelectionToCanvasSelectedTextRange();
}},_onKeyPressDebounced:function(t){body.canvas.undoManager.checkpoint("Text")},_onDocumentMouseDown:function(t){
var e=this;body.canvas.currentArtboard.contains(t.target)===!1&&this._disableTextInputMode();
var n;this._mouseIsDown=!0,document.addEventListener("mouseup",n=function(t){document.removeEventListener("mouseup",n),
e._mouseIsDown=!1})},_onContentMouseDown:function(t){var e=this;if(0===t.button){
var n=body.canvas.getHitContentElements(t.clientX,t.clientY),i=n.length>0?n[n.length-1]:null,a=i&&"text"===i.localName?i:null;
if(a?this._onMouseDownTextElementHit(i,t):i?this._onMouseDownNonTextElementHit(i,t):this._onMouseDownEmptySpaceHit(),
null===a){var s,o;window.addEventListener("mousemove",s=function(n){r(t,n)&&(window.removeEventListener("mousemove",s),
e._onContentIntentionalDragStart(t,n))}),window.addEventListener("mouseup",o=function(n){
window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o),
t.clientX===n.clientX&&t.clientY===n.clientY&&e._onContentClick(n)})}}},_onMouseDownTextElementHit:function(t,e){
var n=body.modKeys.shift;if(n===!1)body.canvas.selectedElements=[t],this._updateCurrentContainer(),
this._textInputMode===!1&&this._enableTextInputMode(t);else if(n===!0){var i=body.canvas.selectedElements.find(function(e){
return e.contains(t)});i?(body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==i}),body.canvas.selectedTextRange=null):body.canvas.selectedElements.includes(t)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==t}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[t]),
this._updateCurrentContainer(),this._textInputMode===!1&&this._enableTextInputMode(t);
}e.detail>=3&&(e.preventDefault(),this._selectAll())},_onMouseDownNonTextElementHit:function(){
this._disableTextInputMode(),null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null);
},_onMouseDownEmptySpaceHit:function(){this._disableTextInputMode(),null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null);
},_onContentIntentionalDragStart:function(t){var e=this,n=t,i=n.clientX,r=n.clientY;
body.canvas.rubberBandHud.grabSelection(i,r,function(t){var n=e._getSelectedPaths();
n.length>0?body.canvas.pathsEditHud.rubberBandSelectionCallback(t):(null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null),
body.canvas.selectedElements=e._getElementsInBBox(t),e._updateCurrentContainer());
})},_onContentClick:function(t){var e=body.modKeys.shift,n=body.canvas.getHitContentElements(t.clientX,t.clientY),i=n.length>0?n[n.length-1]:null;
if(i){if(e===!1)body.canvas.selectedElements=[i],null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null),
this._updateCurrentContainer();else if(e===!0){var r=body.canvas.selectedElements.find(function(t){
return t.contains(i)});r?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==r}):body.canvas.selectedElements.includes(i)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==i}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[i]),
this._updateCurrentContainer()}}else body.canvas.selectedElements=[],this._updateCurrentContainer();
},_selectAll:function(){if(null!==body.canvas.selectedTextRange){var t=n(body.canvas.selectedTextRange.startContainer,"text"),e=n(body.canvas.selectedTextRange.startContainer,"textPath"),i=e||t,r=i.childNodes[0],a=i.childNodes[i.childNodes.length-1],s=new Range;
s.setStart(r.childNodes[0],0),s.setEnd(a.childNodes[0],a.childNodes[0].textContent.length),
body.canvas.selectedTextRange=s,this._setSystemSelectionToCanvasSelectedTextRange();
}},_getSelectionDirection:function(t){var e=t.anchorNode.compareDocumentPosition(t.focusNode);
return!e&&t.anchorOffset>t.focusOffset||e===v?"backward":"forward"},_getSelectedPaths:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("d")&&!o.hasAttribute("is")?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e},_getElementsInBBox:function(e){var n=[],i=body.canvas.currentArtboard.getScreenCTM().inverse(),r=function(a){
var l=!0,u=!1,c=void 0;try{for(var d=void 0,v=a.children[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){
var f=d.value;if(h.includes(f.localName)){var m=t(f);m=o(m,i);var g=0===m.width&&0===m.height;
!g&&s(e,m)&&n.push(f)}else("g"===f.localName||"a"===f.localName)&&r(f)}}catch(b){
u=!0,c=b}finally{try{l||null==v["return"]||v["return"]()}finally{if(u)throw c}}};return r(body.canvas.currentArtboard),
n},_setSystemSelectionToCanvasSelectedTextRange:function(){var t=document.getSelection(),e=body.canvas.selectedTextRange;
null===e?t.removeAllRanges():(t.removeAllRanges(),t.addRange(e))},_updateCurrentContainer:function(){
var t=body.canvas.selectedElements.length>0?body.canvas.selectedElements[0]:null,e=null;
if(t){var n=t.closest("g, a");n!==body.canvas.currentArtboard&&(e=n)}body.canvas.currentContainer=e;
}},{},e)}(HTMLElement),m=i("bx-edittool",f);return{get default(){return m}}}),System.registerModule("elements/bx-ellipsehud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=(t.createElement,
t.createSVGPoint),i=System.get("utils/math").normalize,r=System.get("utils/time").throttle,a=System.get("utils/transform").getTransformToElement,s=System.get("classes/enum")["default"],o=new s("ellipse"),l=6,u=8,c='\n  <style>@import url("stylesheets/bx-ellipsehud.css");</style>\n\n  <defs>\n    <g class="subhud">\n      <circle class="grippie" data-axis="rx" fill="none"></circle>\n      <circle class="grippie" data-axis="ry" fill="none"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',d=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=c,this._subhuds=this._shadowRoot.querySelector("#subhuds"),
this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),this._updateGrippiesPosition_200ms=r(this._updateGrippiesPosition,200,this),
this._installed=!1,this._selectedEllipses=[],this._draggedGrippie=null},enabledCallback:function(){
var t=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()})},disabledCallback:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_install:function(){var t=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(e){
t._onShadowRootMouseDown(e)})},_uninstall:function(){this._installed=!1,this._subhuds.innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onSelectedElementsChange:function(){this._selectedEllipses=this._getSelectedEllipses(),
0===this._selectedEllipses.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onContentMutation:function(t){t.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition_200ms();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(t){
t.target.classList.contains("grippie")&&this._onGrippieMouseDown(t)},_onGrippieMouseDown:function(t){
var e=this;if(0===t.button){body.canvas.undoManager.checkpoint("Change ellipse radius");
var r,a,s,l=t.target,c=l.parentElement,d=c[o.ellipse],h=l.getAttribute("data-axis"),v=d.getCTM().inverse(),f={
rx:d.rx.baseVal.value,ry:d.ry.baseVal.value},m=n(t.clientX,t.clientY).matrixTransform(v),g=n(m.x,m.y),b="normal";
l.parentElement.append(l),this._draggedGrippie=l;var p=function(){var t=body.modKeys,e=t.ctrl,n=t.shift;
e===!0&&n===!1?b="normal":e===!1&&n===!0?b="symmetric":e===!0&&n===!0?b="symmetric":d.rx.baseVal.value===d.ry.baseVal.value&&(b="symmetric");
},y=function(){var t=g.x-m.x,e=g.y-m.y;if("rx"===h){if("normal"===b){var n=i(f.rx+t,0,1/0,u);
d.setAttribute("rx",n)}else if("symmetric"===b){var r=i(f.rx+t,0,1/0,u);d.setAttribute("rx",r),
d.setAttribute("ry",r)}}else if("ry"===h)if("normal"===b){var a=i(f.ry+e,0,1/0,u);
d.setAttribute("ry",a)}else if("symmetric"===b){var s=i(f.ry+e,0,1/0,u);d.setAttribute("rx",s),
d.setAttribute("ry",s)}};window.addEventListener("mousemove",r=function(t){g=n(t.clientX,t.clientY).matrixTransform(v),
y()}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",a),body.removeEventListener("modkeyschange",s),
e._draggedGrippie=null}),body.addEventListener("modkeyschange",s=function(){p(),y();
}),p()}},_updateSubhuds:function(){this._subhuds.innerHTML="";var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=this._selectedEllipses[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=this._subhudTemplate.cloneNode(!0);s[o.ellipse]=a,this._subhuds.append(s);
}}catch(l){e=!0,n=l}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateGrippiesPosition(),this._updateGrippiesSize()},_updateGrippiesPosition:function(){
var t=!0,e=!1,i=void 0;try{for(var r=void 0,s=this._subhuds.children[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){
var l=r.value,u=l[o.ellipse],c=a(u,this),d=!0,h=!1,v=void 0;try{for(var f=void 0,m=l.children[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var g=f.value,b=g.getAttribute("data-axis");if("rx"===b){var p=n(u.cx.baseVal.value+u.rx.baseVal.value,u.cy.baseVal.value).matrixTransform(c);
g.setAttribute("cx",p.x),g.setAttribute("cy",p.y)}else if("ry"===b){var y=n(u.cx.baseVal.value,u.cy.baseVal.value+u.ry.baseVal.value).matrixTransform(c);
g.setAttribute("cx",y.x),g.setAttribute("cy",y.y)}}}catch(_){h=!0,v=_}finally{try{
d||null==m["return"]||m["return"]()}finally{if(h)throw v}}}}catch(x){e=!0,i=x}finally{
try{t||null==s["return"]||s["return"]()}finally{if(e)throw i}}},_updateGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._subhuds.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,u=void 0;try{for(var c=void 0,d=a.children[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){
var h=c.value;h.setAttribute("r",l/body.canvas.scale)}}catch(v){o=!0,u=v}finally{
try{s||null==d["return"]||d["return"]()}finally{if(o)throw u}}}}catch(f){e=!0,n=f;
}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_getSelectedEllipses:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"ellipse"===o.localName?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedEllipses(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),h=e("g","bx-ellipsehud",d);return{get default(){
return h}}}),System.registerModule("elements/bx-ellipsetool",[],function(){"use strict";
var t=System.get("utils/dom"),e=t.registerElement,n=t.createElement,i=t.createSVGMatrix,r=System.get("utils/event").isMouseMoveIntentional,a=Math,s=a.abs,o=a.min,l=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
enabledCallback:function(){var t=this;body.canvas.enableHud("outlines-hud"),this._ellipseCursor=body.registerCursor("images/cursor-ellipse.png",-100,8,7),
body.canvas.addEventListener("mousedown",this._mouseDownListener=function(e){t._onMouseDown(e);
})},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),body.unregisterCursor(this._ellipseCursor),
body.unregisterCursor(this._mouseDownEllipseCursor),body.canvas.removeEventListener("mousedown",this._mouseDownListener);
},_onMouseDown:function(t){var e,n,i=this;window.addEventListener("mousemove",e=function(a){
r(t,a)!==!1&&(window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n),
i._onIntentionalDragStart(t))}),window.addEventListener("mouseup",n=function(t){window.removeEventListener("mousemove",e),
body.canvas.removeEventListener("mouseend",n)})},_onIntentionalDragStart:function(t){
var e,r,a,l=this,u=body.canvas.currentContainer||body.canvas.currentArtboard,c=n("svg:ellipse");
c.style.fill="#d8d8d8",body.canvas.undoManager.checkpoint("Draw Ellipse"),u.append(c),
body.canvas.selectedElements=[c],this._mouseDownEllipseCursor=body.registerCursor("images/cursor-ellipse.png",900,8,7);
var d=c.getScreenCTM().inverse(),h=i(c.transform.baseVal.consolidate().matrix);h.multiplySelf(d),
c.setAttribute("transform",h.toString()),window.addEventListener("mousemove",e=function(e){
var n,i,r,a,l=body.modKeys,u=l.ctrl,d=l.shift;if(d===!1){n=(e.clientX-t.clientX)/2,
i=(e.clientY-t.clientY)/2;var h=!1,v=!1;0>n&&(h=!0,n=s(n)),0>i&&(v=!0,i=s(i)),u&&(n=o(n,i),
i=n),r=h?t.clientX-n:t.clientX+n,a=v?t.clientY-i:t.clientY+i}else if(d===!0&&(n=e.clientX-t.clientX,
i=e.clientY-t.clientY,0>n?(n=s(n),r=e.clientX+n):r=e.clientX-n,0>i?(i=s(i),a=e.clientY+i):a=e.clientY-i,
u)){var f=o(n,i);n=i=f}c.setAttribute("cx",r),c.setAttribute("cy",a),c.setAttribute("rx",n),
c.setAttribute("ry",i)}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",r),body.removeEventListener("toolchange",a),
body.unregisterCursor(l._mouseDownEllipseCursor)}),body.addEventListener("toolchange",a=function(t){
window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",r),
body.removeEventListener("toolchange",a),body.unregisterCursor(l._mouseDownEllipseCursor);
})}},{},t)}(HTMLElement),u=e("bx-ellipsetool",l);return{get default(){return u}}}),
System.registerModule("elements/bx-exportcontrols",[],function(){"use strict";System.get("elements/bx-button"),
System.get("elements/bx-checkbox"),System.get("elements/bx-select"),System.get("elements/bx-selectitem"),
System.get("elements/bx-slider");var t=System.get("utils/artwork"),e=t.rasterizeArtwork,n=(t.serializeArtwork,
System.get("utils/dom")),i=(n.createElement,n.registerElement),r=System.get("utils/time").throttle,a='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-exportcontrols.css");\n</style>\n\n<section id="export-bitmap-section">\n  <div id="format-div">\n    <h3>Format</h3>\n\n    <bx-select id="format-select" value="png">\n      <bx-selectitem value="png" label="PNG"></bx-selectitem>\n      <bx-selectitem value="jpg" label="JPEG"></bx-selectitem>\n    </bx-select>\n  </div>\n\n  <div id="area-div">\n    <h3>Area</h3>\n\n    <bx-select id="area-select" value="viewBox">\n      <bx-selectitem value="selected" label="Selected objects"></bx-selectitem>\n      <bx-selectitem value="viewBox" label="View box"></bx-selectitem>\n    </bx-select>\n  </div>\n\n  <div id="compression-div">\n    <h3>Compression</h3>\n\n    <bx-slider\n      id="compression-slider"\n      title="Compression"\n      min="0"\n      max="1"\n      value="0.82"\n      precision="2">\n    </bx-slider>\n  </div>\n\n  <bx-checkbox label="Transparent background" id="transparent-checkbox" checked></bx-checkbox>\n\n  <bx-button id="export-button" label="Export"></bx-button>\n</section>\n',s=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=a;var e=!0,n=!1,i=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){n=!0,i=u}finally{try{e||null==o["return"]||o["return"]();
}finally{if(n)throw i}}this._update200ms=r(this._update,200,this),this["#area-select"].addEventListener("change",function(){
return t._update200ms()}),this["#format-select"].addEventListener("change",function(){
return t._onFormatSelectChange()}),this["#export-button"].addEventListener("click",function(e){
return t._onExportButtonClick(e)}),this._onFormatSelectChange()},enabledCallback:function(){
var t=this;this._update(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._update200ms()},_onContentMutation:function(t){
this._update200ms()},_onFormatSelectChange:function(){var t=this["#format-select"].value;
"png"===t?(this["#compression-div"].hidden=!1,this["#transparent-checkbox"].hidden=!1):"jpg"===t&&(this["#compression-div"].hidden=!1,
this["#transparent-checkbox"].hidden=!0)},_onExportButtonClick:function(t){var n,i,r,a,s,o,l,u;
return $traceurRuntime.asyncWrap(function(t){for(;;)switch(t.state){case 0:n=this["#format-select"].value,
i=this["#area-select"].value,r="viewBox"===i?body.canvas.extractArtworkWithViewBoxElements():body.canvas.extractArtworkWithSelectedElements(),
t.state=18;break;case 18:t.state="png"===n?4:15;break;case 4:a=this["#compression-slider"].value,
s=this["#transparent-checkbox"].checked,t.state=5;break;case 5:return void Promise.resolve(e(r,"png",a,s)).then(t.createCallback(3),t.errback);
case 3:o=t.value,t.state=2;break;case 2:body.bridge.postMessage("exportFile",{format:"png",
data:o}),t.state=-2;break;case 15:t.state="jpg"===n?11:-2;break;case 11:l=this["#compression-slider"].value,
t.state=12;break;case 12:return void Promise.resolve(e(r,"jpg",l)).then(t.createCallback(10),t.errback);
case 10:u=t.value,t.state=9;break;case 9:body.bridge.postMessage("exportFile",{format:"jpg",
data:u}),t.state=-2;break;default:return t.end()}},this)},_update:function(){"selected"===this["#area-select"].value&&0===body.canvas.selectedElements.length?this["#export-button"].disabled=!0:this["#export-button"].disabled=!1;
}},{},t)}(HTMLElement),o=i("bx-exportcontrols",s);return{get default(){return o}};
}),System.registerModule("elements/bx-fillcontrols",[],function(){"use strict";System.get("elements/bx-button"),
System.get("elements/bx-slider"),System.get("elements/bx-paintsection");var t=System.get("utils/dom"),e=(t.closest,
t.registerElement),n=System.get("utils/math").round,i=System.get("utils/relationship").queryStylableElements,r=System.get("utils/text").normalizeTextInRangeBeforeEditing,a=System.get("utils/time").throttle,s=Number.parseFloat,o='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-fillcontrols.css");\n</style>\n\n<main>\n  <section id="paint-section" is="bx-paintsection" context="fill"></section>\n\n  <section id="opacity-section">\n    <h2 id="opacity-section-heading">Opacity</h2>\n\n    <bx-slider\n      id="opacity-slider"\n      title="Fill Opacity"\n      value="1"\n      min="0"\n      max="1"\n      precision="2">\n    </bx-slider>\n  </section>\n\n  <section id="fill-rule-section">\n    <h2 id="fill-rule-section-heading">Fill Rule</h2>\n\n    <div id="fill-rule-buttons">\n      <bx-button\n        id="non-zero-fill-rule-button"\n        value="nonzero"\n        icon="fill-rule-non-zero"\n        iconsize="28"\n        title="Non-zero"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="even-odd-fill-rule-button"\n        value="evenodd"\n        icon="fill-rule-even-odd"\n        iconsize="28"\n        title="Even-odd"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n</main>\n',l=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=o,this._update200ms=a(this._update,200,this);var e=!0,n=!1,i=void 0;
try{for(var r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){
var l=r.value;this["#"+l.id]=l}}catch(u){n=!0,i=u}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this["#opacity-slider"].addEventListener("changestart",function(){
return t._onOpacitySliderChangeStart()}),this["#non-zero-fill-rule-button"].addEventListener("click",function(){
return t._onFillRuleButtonClick(event)}),this["#even-odd-fill-rule-button"].addEventListener("click",function(){
return t._onFillRuleButtonClick(event)})},enabledCallback:function(){var t=this;this["#paint-section"].enabledCallback(),
this._toggleHuds(),this._onSelectedElementsChange(),body.addEventListener("toolchange",this._toolChangeListener=function(){
t._toggleHuds()}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)})},disabledCallback:function(){this["#paint-section"].disabledCallback(),
this._toggleHuds(),body.removeEventListener("toolchange",this._toolChangeListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._update200ms()},_onSelectedTextRangeChange:function(){
this._update200ms()},_onContentMutation:function(t){this._update200ms()},_onOpacitySliderChangeStart:function(){
var t=this;body.canvas.undoManager.checkpoint("Fill opacity");var e=body.canvas,n=e.selectedElements,a=e.selectedTextRange;
r(a);var s,o,l=i("fill-opacity",n,a);this._isChangingOpacitySlider=!0,this["#opacity-slider"].addEventListener("change",s=function(){
var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=l[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.style.fillOpacity=t["#opacity-slider"].value}}catch(o){n=!0,i=o}finally{
try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}t["#opacity-slider"].mixed=!1;
}),this["#opacity-slider"].addEventListener("changeend",o=function(){t["#opacity-slider"].removeEventListener("change",s),
t["#opacity-slider"].removeEventListener("changeend",o),t._isChangingOpacitySlider=!1;
})},_onFillRuleButtonClick:function(t){var e=t.target,n=e.pressed,a=e.mixed,s=e.value;
if(0===t.button&&(n!==!0||a!==!1)){body.canvas.undoManager.checkpoint("Fill rule");
var o=body.canvas,l=o.selectedElements,u=o.selectedTextRange;r(u);var c=i("fill-rule",l,u),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value;
g.style.fillRule=s}}catch(b){h=!0,v=b}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}}},_update:function(){this._updateOpacitySection(),this._updateFillRuleSection();
},_updateOpacitySection:function(){if(!this._isChangingOpacitySlider){var t=body.canvas,e=t.selectedElements,r=t.selectedTextRange,a=i("fill-opacity",e,r),o=a[0]||null;
if(null===o?this["#opacity-section-heading"].disabled=!0:this["#opacity-section-heading"].disabled=!1,
null===o)this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1;else{
this["#opacity-slider"].disabled=!1;var l=n(s(getComputedStyle(o).fillOpacity),2),u=!1,c=!0,d=!1,h=void 0;
try{for(var v=void 0,f=a[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var m=v.value;
if(m!==o){var g=n(s(getComputedStyle(m).fillOpacity),2);if(g!==l){u=!0;break}}}}catch(b){
d=!0,h=b}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#opacity-slider"].value=l,
this["#opacity-slider"].mixed=u}}},_updateFillRuleSection:function(){var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange,r=i("fill-rule",e,n),a=r[0]||null;
if(null===a?this["#fill-rule-section-heading"].disabled=!0:this["#fill-rule-section-heading"].disabled=!1,
null===a)this["#non-zero-fill-rule-button"].disabled=!0,this["#non-zero-fill-rule-button"].pressed=!1,
this["#non-zero-fill-rule-button"].mixed=!1,this["#even-odd-fill-rule-button"].disabled=!0,
this["#even-odd-fill-rule-button"].pressed=!1,this["#even-odd-fill-rule-button"].mixed=!1;else{
this["#non-zero-fill-rule-button"].disabled=!1,this["#even-odd-fill-rule-button"].disabled=!1;
var s=getComputedStyle(a).fillRule,o=!1,l=!0,u=!1,c=void 0;try{for(var d=void 0,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=getComputedStyle(v).fillRule;f!==s&&(o=!0)}}catch(m){u=!0,c=m}finally{
try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}"evenodd"===s?(this["#non-zero-fill-rule-button"].pressed=!1,
this["#non-zero-fill-rule-button"].mixed=!1,this["#even-odd-fill-rule-button"].pressed=!0,
this["#even-odd-fill-rule-button"].mixed=o):"nonzero"===s&&(this["#non-zero-fill-rule-button"].pressed=!0,
this["#non-zero-fill-rule-button"].mixed=o,this["#even-odd-fill-rule-button"].pressed=!1,
this["#even-odd-fill-rule-button"].mixed=!1)}},_toggleHuds:function(){"edit-tool"===body.currentTool.id&&body.currentPanel&&"fill-panel"===body.currentPanel.id?(body.canvas.enableHud("linear-gradient-fill-hud"),
body.canvas.enableHud("radial-gradient-fill-hud"),body.canvas.enableHud("pattern-fill-hud")):(body.canvas.disableHud("linear-gradient-fill-hud"),
body.canvas.disableHud("radial-gradient-fill-hud"),body.canvas.disableHud("pattern-fill-hud"));
}},{},t)}(HTMLElement),u=e("bx-fillcontrols",l);return{get default(){return u}}}),
System.registerModule("elements/bx-filterinput",[],function(){"use strict";System.get("elements/bx-contextmenu"),
System.get("elements/bx-menuitem");var t=System.get("classes/shortcut")["default"],e=System.get("classes/undo-manager")["default"],n=System.get("utils/dom").registerElement,i=System.get("utils/time").debounce,r=(Object.entries,
'\n  <style>@import url("stylesheets/bx-filterinput.css");</style>\n\n  <main>\n    <input id="input" type="text" spellcheck="false"></input>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n'),a=function(n){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this.commands={selectAll:{exec:function(){return t["#input"].select();
}},cut:{enabled:function(){return t["#input"].selectionStart!==t["#input"].selectionEnd;
},exec:function(){return t._cutInputValue()}},copy:{enabled:function(){return t["#input"].selectionStart!==t["#input"].selectionEnd;
},exec:function(){return t._copyInputValue()}},paste:{exec:function(){return t._pasteInputValue();
}},undo:{enabled:function(){return t._undoManager.canUndo()},exec:function(){return t._undoManager.undo();
}},redo:{enabled:function(){return t._undoManager.canRedo()},exec:function(){return t._undoManager.redo();
}}},this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=r;
var n=!0,a=!1,s=void 0;try{for(var o=void 0,l=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var u=o.value;this["#"+u.id]=u}}catch(c){a=!0,s=c}finally{try{n||null==l["return"]||l["return"]();
}finally{if(a)throw s}}this._onDebouncedInputInput=i(this._onDebouncedInputInput,250,this),
this._undoManager=new e;var d=null;this.addEventListener("contextmenu",function(e){
return t._onContextMenu(e)}),this["#input"].addEventListener("focusin",function(e){
return t._onInputFocus(e)}),this["#input"].addEventListener("blur",function(e){return t._onInputBlur(e);
}),this["#input"].addEventListener("keydown",function(e){return t._onInputKeyDown(e);
}),this["#input"].addEventListener("input",function(e){return t._onInputInput(e)}),
this["#input"].addEventListener("input",function(e){return t._onDebouncedInputInput(e);
}),this["#input"].addEventListener("mousemove",function(e){return t._onInputMouseMove(e);
}),this["#input"].addEventListener("mouseenter",function(t){return d=body.registerCursor("text",200);
}),this["#input"].addEventListener("mouseleave",function(t){return body.unregisterCursor(d);
}),this["#context-menu"].menuWillShow=function(e){return t._menuWillShow(e)},this["#context-menu"].menuItemWillTrigger=function(e){
return t._menuItemWillTrigger(e)},this["#context-menu"].addEventListener("menuitemtrigger",function(e){
return t._onContextMenuItemTrigger(e)}),this._onValuePropertyChange(),this._onPlaceholderPropertyChange(),
this._onDisabledPropertyChange()},attributeChangedCallback:function(t,e,n){e!==n&&("value"===t?this._onValuePropertyChange():"placeholder"===t?this._onPlaceholderPropertyChange():"disabled"===t&&this._onDisabledPropertyChange());
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):""},set value(t){
this.setAttribute("value",t)},get placeholder(){return this.hasAttribute("placeholder")?this.getAttribute("placeholder"):"";
},set placeholder(t){""===t?this.removeAttribute("placeholder"):this.setAttribute("placeholder",t);
},get disabled(){return this.hasAttribute("disabled")},set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onValuePropertyChange:function(){this["#input"].value!==this.value&&(this["#input"].value=this.value);
},_onPlaceholderPropertyChange:function(){this["#input"].placeholder=this.placeholder;
},_onDisabledPropertyChange:function(){this["#input"].tabIndex=this.disabled?-1:0;
},_onInputFocus:function(t){body.bridge.postMessage("toggleTextInputMode",!0),this._cachedValue=this["#input"].value;
},_onInputBlur:function(t){body.bridge.postMessage("toggleTextInputMode",!1),this._undoManager.reset();
},_onInputMouseMove:function(t){this["#input"].matches(":focus")===!1&&t.preventDefault();
},_onInputKeyDown:function(e){var n=t.fromEvent(e);n.matches("Enter")?this.blur():(n.matches("ArrowDown")||n.matches("Shift","ArrowDown")||n.matches("ArrowUp")||n.matches("Shift","ArrowUp")||n.matches("ArrowLeft")||n.matches("Shift","ArrowLeft")||n.matches("ArrowRight")||n.matches("Shift","ArrowRight"))&&e.stopPropagation();
},_onInputInput:function(t){this.value=this["#input"].value},_onDebouncedInputInput:function(t){
var e=this,n=this._cachedValue,i=this["#input"].value;this._cachedValue=this["#input"].value,
this._undoManager.register({label:"Typing",undo:function(){e["#input"].value=e._cachedValue=n,
e["#input"].select()},redo:function(){e["#input"].value=e._cachedValue=i,e["#input"].select();
}})},_onContextMenu:function(t){t.preventDefault(),this["#input"].focus(),this["#context-menu"].open(t.clientX,t.clientY);
},_onContextMenuItemTrigger:function(t){var e=t.detail,n=this.commands[e.commandID];
n&&n.exec()},_menuWillShow:function(t){var e=this;return new Promise(function(n){
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(t){this._validateMenuItem(t);
},_validateMenuItem:function(t){var e=this;return new Promise(function(n){var i=t.commandID||null,r=i?e.commands[i]:null;
r&&(t.disabled=r.enabled?!r.enabled():!1),n()})},_copyInputValue:function(){var t=this["#input"].value.substring(this["#input"].selectionStart,this["#input"].selectionEnd);
body.bridge.postMessage("setClipboardData",{"text/plain":t})},_pasteInputValue:function(){
var t=this;body.bridge.postMessage("getClipboardData",null,function(e){if(e["text/plain"]){
var n=t["#input"].selectionStart,i=t["#input"].selectionEnd,r=e["text/plain"],a=t["#input"].value.substring(0,n),s=t["#input"].value.substring(i,t["#input"].value.length);
t["#input"].value=a+r+s,t["#input"].dispatchEvent(new Event("input",{bubbles:!0})),
t["#input"].setSelectionRange(n+r.length,n+r.length)}})},_cutInputValue:function(){
var t=this["#input"].selectionStart,e=this["#input"].selectionEnd,n=this["#input"].value.substring(t,e),i=this["#input"].value.substring(0,t),r=this["#input"].value.substring(e,this["#input"].value.length);
this["#input"].value=i+r,this["#input"].dispatchEvent(new Event("input",{bubbles:!0
})),this["#input"].setSelectionRange(t,t),body.bridge.postMessage("setClipboardData",{
"text/plain":n})}},{},n)}(HTMLElement),s=n("bx-filterinput",a);return{get default(){
return s}}}),System.registerModule("elements/bx-fontfamilybutton",[],function(){"use strict";
var t=System.get("utils/dom"),e=(t.createElement,t.registerElement),n='\n<style>@import url("stylesheets/bx-fontfamilybutton.css");</style>\n\n<main>\n  <label id="label">Roboto</label>\n\n  <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n    <use xlink:href="images/icons.svg#arrow-right" width="100" height="100"></use>\n  </svg>\n</main>\n',i=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=n;var t=!0,e=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){e=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw i}}this._onLabelChange()},attributeChangedCallback:function(t,e,n){
e!==n&&"label"===t&&this._onLabelChange()},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(t){this.setAttribute("label",t)},get mixed(){return this.hasAttribute("mixed");
},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")},_onLabelChange:function(){
this["#label"].textContent=this.label}},{},t)}(HTMLElement),r=e("bx-fontfamilybutton",i);
return{get default(){return r}}}),System.registerModule("elements/bx-fontfamilypicker",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-fontslist");
var t=System.get("utils/dom"),e=(t.createElement,t.registerElement),n=System.get("utils/time"),i=n.sleep,r=(n.debounce,
n.sleepUntilIdle,'\n<style>\n  @import url("stylesheets/scrollbars.css");\n  @import url("stylesheets/bx-fontfamilypicker.css");\n</style>\n\n<main>\n  <bx-select id="font-provider-select" value="system">\n    <bx-selectitem value="system" label="System Fonts"></bx-selectitem>\n    <bx-selectitem value="google" label="Google Fonts"></bx-selectitem>\n  </bx-select>\n\n  <div id="lists">\n    <bx-fontslist id="system-fonts-list" provider="system" disabled></bx-fontslist>\n    <bx-fontslist id="google-fonts-list" provider="google" disabled></bx-fontslist>\n  </div>\n</main>\n'),a=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this["#font-provider-select"].addEventListener("change",function(){
return t._onFontProviderSelectChange()}),this["#system-fonts-list"].addEventListener("change",function(e){
t.value=["system",e.target.value],t.dispatchEvent(new CustomEvent("change"))}),this["#google-fonts-list"].addEventListener("change",function(e){
t.value=["google",e.target.value],t.dispatchEvent(new CustomEvent("change"))}),this._onDisabledPropertyChange();
},attributeChangedCallback:function(t,e,n){e!==n&&("value"===t?this._onValuePropertyChange():"disabled"===t&&this._onDisabledPropertyChange());
},get value(){var t,e;if(this.hasAttribute("value")){var n=this.getAttribute("value").split(":"),i=(t=n[Symbol.iterator](),
(e=t.next()).done?void 0:e.value),r=(e=t.next()).done?void 0:e.value;return[i.trim(),r.trim()];
}return null},set value(t){t?this.setAttribute("value",t[0]+": "+t[1]):this.removeAttribute("value");
},_onDisabledPropertyChange:function(){this.disabled?this._wasEnabled&&this._onDisabled():(this._wasEnabled=!0,
this._onEnabled())},_onEnabled:function(){this._updateLists(),this._focusEnabledList();
},_onDisabled:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#lists"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.disabled=!0}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},_onValuePropertyChange:function(){this.disabled===!1&&this._updateLists();
},_onFontProviderSelectChange:function(){var t=this["#font-provider-select"].value,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#lists"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.disabled=s.provider!==t}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._focusEnabledList()},_updateLists:function(){var t,e;if(this.value){
var n=this.value,i=(t=n[Symbol.iterator](),(e=t.next()).done?void 0:e.value),r=(e=t.next()).done?void 0:e.value;
this["#font-provider-select"].value=i;var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=this["#lists"].children[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;c.provider===i?(c.disabled=!1,c.value=r):(c.disabled=!0,c.value=null);
}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}else{this["#font-provider-select"].value="system";var h=!0,v=!1,f=void 0;try{for(var m=void 0,g=this["#lists"].children[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){
var b=m.value;"system"===b.provider?(b.disabled=!1,b.value=null):b.disabled=!0}}catch(p){
v=!0,f=p}finally{try{h||null==g["return"]||g["return"]()}finally{if(v)throw f}}}},
_focusEnabledList:function(){var t=$traceurRuntime.spread(this["#lists"].children).find(function(t){
return t.disabled===!1});t&&i(100).then(function(){return t.focus()})}},{},t)}(HTMLElement),s=e("bx-fontfamilypicker",a);
return{get default(){return s}}}),System.registerModule("elements/bx-fontslist",[],function(){
"use strict";System.get("elements/bx-filterinput"),System.get("elements/bx-fontslistitem");
var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("utils/time"),r=i.sleep,a=i.debounce,s=System.get("classes/shortcut")["default"],o=(Object.keys,
'\n<style>\n  @import url("stylesheets/scrollbars.css");\n  @import url("stylesheets/bx-fontslist.css");\n</style>\n\n<main>\n  <header id="header">\n    <h2>Name</h2>\n  </header>\n\n  <div id="items">\n    <div id="used-items"></div>\n    <div id="all-items"></div>\n    <div id="placeholder" hidden>No families found.</div>\n  </div>\n\n  <bx-filterinput id="filter-input" placeholder="Filter"></bx-filterinput>\n</main>\n'),l=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=o;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(l){n=!0,i=l}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this.addEventListener("focusin",function(e){return t._onHostFocusIn(e);
}),this.addEventListener("keydown",function(e){return t._onKeyDown(e)}),this["#items"].addEventListener("mousedown",function(e){
return t._onItemsMouseDown(e)}),this["#items"].addEventListener("dblclick",function(e){
return t._onItemsDblClick(e)}),this["#items"].addEventListener("focusin",function(e){
return t._onItemsFocusIn(e)}),this["#filter-input"].addEventListener("input",function(){
return t._onFilterInputInput()}),this.tabIndex=0,this._onDisabledPropertyChange();
},attributeChangedCallback:function(t,e,n){e!==n&&("value"===t?this._onValuePropertyChange():"disabled"===t&&this._onDisabledPropertyChange());
},get value(){return this.getAttribute("value")},set value(t){t?this.setAttribute("value",t):this.removeAttribute("value");
},get provider(){return this.hasAttribute("provider")?this.getAttribute("provider"):"system";
},set provider(t){throw new Error("This property is read-only")},_onValuePropertyChange:function(){
var t=this["#items"].querySelector("[highlighted]");if(!t||t.value!==this.value){
var e=!1,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].querySelectorAll("bx-fontslistitem")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;e===!1&&o.value===this.value?(o.highlighted=!0,e=!0):o.highlighted=!1;
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}}},_onDisabledPropertyChange:function(){this.disabled?this._wasEnabled&&this._onDisabled():(this._wasEnabled=!0,
this._onEnabled())},_onEnabled:function(){var t,e,n,i,r,a,s;return $traceurRuntime.asyncWrap(function(o){
for(;;)switch(o.state){case 0:return void Promise.resolve(body.canvas.fontsManager.ready).then(o.createCallback(2),o.errback);
case 2:return void Promise.resolve(this._createUsedItems()).then(o.createCallback(4),o.errback);
case 4:o.state=0===this["#all-items"].childElementCount?5:6;break;case 5:return void Promise.resolve(this._createAllItems()).then(o.createCallback(6),o.errback);
case 6:this._createThumbnails(),this._updatePlaceholderVisibility(),t=!1,e=!0,n=!1,
i=void 0;try{for(r=void 0,a=this["#items"].querySelectorAll("bx-fontslistitem")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0)s=r.value,
t===!1&&s.value===this.value?(s.highlighted=!0,t=!0):s.highlighted=!1}catch(l){n=!0,
i=l}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}o.state=-2;
break;default:return o.end()}},this)},_onDisabled:function(){},_onHostFocusIn:function(t){
var e=this["#used-items"].querySelector("[highlighted]");e&&r(100).then(function(){
return e.focus()})},_onItemsMouseDown:function(t){"bx-fontslistitem"===t.target.localName&&this._onItemMouseDown(t);
},_onItemsDblClick:function(t){"bx-fontslistitem"===t.target.localName&&this._onItemDblClick(t);
},_onItemsFocusIn:function(t){var e=t.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].querySelectorAll("bx-fontslistitem")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===e}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}},_onItemMouseDown:function(t){var e=t.target;e&&e.value!==this.value&&(this.value=e.value,
this.dispatchEvent(new CustomEvent("change")))},_onItemDblClick:function(t){var e=t.target;
if("google"===this.provider){var n=e.value.replaceAll(" ","+");body.bridge.postMessage("openExternalURL","https://www.google.com/fonts/specimen/"+n);
}},_onFilterInputInput:function(){var t=this["#filter-input"].value,e=$traceurRuntime.spread(this["#used-items"].children,this["#all-items"].children),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
o.hidden=o.value.toLowerCase().startsWith(t.toLowerCase())===!1}}catch(l){i=!0,r=l;
}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}this._updatePlaceholderVisibility();
},_onKeyDown:function(t){var e=s.fromEvent(t);e.matches("ArrowUp")?(t.preventDefault(),
t.stopPropagation(),this._selectPreviousItem()):e.matches("ArrowDown")&&(t.preventDefault(),
t.stopPropagation(),this._selectNextItem())},_createUsedItems:function(){var t=this;
return new Promise(function(n,i){t["#used-items"].innerHTML="";var r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=body.canvas.fontsManager.getUsedFontFamiliesNames()[t.provider][Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,c=e("bx-fontslistitem");c.value=u,c.hidden=c.value.toLowerCase().startsWith(t["#filter-input"].value.toLowerCase())===!1,
t.value!==c.value||t["#items"].querySelector("bx-fontslistitem[highlighted]")||(c.highlighted=!0),
t["#used-items"].append(c)}}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}n()})},_createAllItems:function(){var t=this;return new Promise(function(n,i){
var r;"system"===t.provider?r=body.canvas.fontsManager.systemFontFamilies:"google"===t.provider&&(r=body.canvas.fontsManager.googleFontFamilies);
var a=r.map(function(t){return t.name});t["#all-items"].innerHTML="";var s=function(i){
for(;i.timeRemaining()>20&&a.length>0;){var r=e("bx-fontslistitem");r.value=a.shift(),
r.hidden=r.value.toLowerCase().startsWith(t["#filter-input"].value.toLowerCase())===!1,
r.highlighted=t.value===r.value,t["#all-items"].append(r)}a.length>0?requestIdleCallback(s):n();
};a.length>0?requestIdleCallback(s):n()})},_createThumbnails:function(){var t=this,e=this["#used-items"].children,n=this["#all-items"].children,i=$traceurRuntime.spread(e,n),r=a(function(){
var e=t["#items"].scrollTop,n=!0,r=!1,a=void 0;try{for(var s=void 0,o=$traceurRuntime.spread(i).reverse()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;l.offsetTop>=e&&l.offsetTop<=e+t["#items"].clientHeight&&l.hidden===!1&&(i.remove(l),
i.unshift(l))}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]()}finally{
if(r)throw a}}},150),s=function(e){var n;return $traceurRuntime.asyncWrap(function(r){
for(;;)switch(r.state){case 0:r.state=e.timeRemaining()>10&&i.length>0&&t.disabled===!1?5:7;
break;case 5:n=i.shift(),r.state=6;break;case 6:r.state=n.thubmnail?0:1;break;case 1:
return void Promise.resolve(body.canvas.fontsManager.getThumbnail(n.value)).then(r.createCallback(3),r.errback);
case 3:n.thumbnail=r.value,r.state=0;break;case 7:o(),r.state=-2;break;default:return r.end();
}},this)},o=function(){i.length>0&&t.disabled===!1?requestIdleCallback(s):(t["#items"].removeEventListener("scroll",r),
t["#filter-input"].removeEventListener("input",r))};this["#items"].addEventListener("scroll",r),
this["#filter-input"].addEventListener("input",r),o()},_updatePlaceholderVisibility:function(){
this["#placeholder"].hidden=null!==this["#items"].querySelector("bx-fontslistitem:not([hidden])");
},_selectPreviousItem:function(){var t=this["#items"].querySelector("[highlighted]"),e=null;
if(t&&"bx-fontslistitem"===t.localName){for(var n=t.previousElementSibling;n;n=n.previousElementSibling)if(n.hidden===!1){
e=n;break}if(null===e&&"all-items"===t.parentElement.id)for(var i=this["#used-items"].lastElementChild;i;i=i.previousElementSibling)if(i.hidden===!1){
e=i;break}}e&&(e.focus(),this.value=e.value,this.dispatchEvent(new CustomEvent("change")));
},_selectNextItem:function(){var t=this["#items"].querySelector("[highlighted]"),e=null;
if(t&&"bx-fontslistitem"===t.localName){for(var n=t.nextElementSibling;n;n=n.nextElementSibling)if(n.hidden===!1){
e=n;break}if(null===e&&"used-items"===t.parentElement.id)for(var i=this["#all-items"].firstElementChild;i;i=i.nextElementSibling)if(i.hidden===!1){
e=i;break}}e&&(e.focus(),this.value=e.value,this.dispatchEvent(new CustomEvent("change")));
}},{},t)}(HTMLElement),u=n("bx-fontslist",l);return{get default(){return u}}}),System.registerModule("elements/bx-fontslistitem",[],function(){
"use strict";var t=System.get("utils/dom"),e=(t.createElement,t.registerElement),n='\n  <style>@import url("stylesheets/bx-fontslistitem.css");</style>\n\n  <main>\n    <div id="label"></div>\n    <img id="thumbnail"></img>\n  </main>\n',i=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=n;var t=!0,e=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){e=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw i}}this.tabIndex=0,this._onThumbnailChange()},attributeChangedCallback:function(t,e,n){
e!==n&&"value"===t&&this._onValuePropertyChange()},get value(){return this.getAttribute("value");
},set value(t){t?this.setAttribute("value",t):this.removeAttribute("value")},get thumbnail(){
return this["#thumbnail"].src||null},set thumbnail(t){this["#thumbnail"].src=t?t:"",
this._onThumbnailChange()},get highlighted(){return this.hasAttribute("highlighted");
},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},_onValuePropertyChange:function(){this["#label"].textContent=this.value?this.value:"";
},_onThumbnailChange:function(){this.thumbnail?(this["#label"].hidden=!0,this["#thumbnail"].hidden=!1):(this["#label"].hidden=!1,
this["#thumbnail"].hidden=!0)}},{},t)}(HTMLElement),r=e("bx-fontslistitem",i);return{
get default(){return r}}}),System.registerModule("elements/bx-freehandsegsdrawhud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=t.createSVGPoint,r=System.get("utils/schneider-curves").getSchneiderCurves,a=(System.get("utils/point").getRamerDouglasPeuckerPoints,
System.get("utils/path").reversePath),s=System.get("utils/time").debounce,o=System.get("utils/transform"),l=o.reduceTransform,u=o.getTransformToElement;
System.get("elements/bx-freehandsegsketch");var c=10,d=10,h=4,v=60,f='\n  <style>@import url("stylesheets/bx-freehandsegsdrawhud.css");</style>\n  <g id="node-grippies"></g>\n  <g id="seg-sketch" is="bx-freehandsegsketch"></g>\n',m=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=f;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},enabledCallback:function(){var t=this;this._currentPath=null,
body.canvas.content.addEventListener("mousedown",this._canvasMouseDownListener=function(e){
t._onContentMouseDown(e)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)}),this["#node-grippies"].addEventListener("mousedown",this._nodeGrippiesMouseDownListener=function(e){
t._onNodeGrippieMouseDown(e)}),this._onSelectedElementsChange()},disabledCallback:function(){
body.canvas.content.removeEventListener("mousedown",this._canvasMouseDownListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
this["#node-grippies"].removeEventListener("mousedown",this._nodeGrippiesMouseDownListener),
this._currentPath=null,this["#seg-sketch"].hide()},_onSelectedElementsChange:function(){
this._updateNodeGrippies()},_onZoomChange:function(){this._updateNodeGrippiesSize();
},_onContentMutation:function(t){this._updateNodeGrippies()},_onNodeGrippieMouseDown:function(t){
var e=this;body.canvas.undoManager.checkpoint("Draw freehand path segments");var n,i,o=t.target,c=o.ownerPath,f=o.getAttribute("data-position");
this._currentPath=c,"end"===f?this._mode="draw-forward":"start"===f&&(this._mode="draw-backward"),
this["#seg-sketch"].show(c,o),this._updateNodeGrippies();var m=function(){var t=e["#seg-sketch"].points,n=[];
if("draw-forward"===e._mode){if(n=c.getPathData({normalize:!0}),0===t.length)return;
if(1===t.length||2===t.length)n.push({type:"L",values:[t[t.length-1].x,t[t.length-1].y]
});else if(t.length>=3){var i=r(t,h/body.canvas.scale),a=!0,s=!1,o=void 0;try{for(var l=void 0,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var d=l.value;n.push({type:"C",values:[d[1].x,d[1].y,d[2].x,d[2].y,d[3].x,d[3].y]
})}}catch(v){s=!0,o=v}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}}else if("draw-backward"===e._mode){if(t=$traceurRuntime.spread(t).reverse(),0===t.length)return;
if(1===t.length||2===t.length){n.push({type:"M",values:[t[0].x,t[0].y]});for(var f=1;f<t.length;f+=1){
var m=t[f];n.push({type:"L",values:[m.x,m.y]})}}else if(t.length>=3){var g=r(t,h/body.canvas.scale);
n.push({type:"M",values:[g[0][0].x,g[0][0].y]});var b=!0,p=!1,y=void 0;try{for(var _=void 0,x=g[Symbol.iterator]();!(b=(_=x.next()).done);b=!0){
var w=_.value;n.push({type:"C",values:[w[1].x,w[1].y,w[2].x,w[2].y,w[3].x,w[3].y]
})}}catch(S){p=!0,y=S}finally{try{b||null==x["return"]||x["return"]()}finally{if(p)throw y;
}}for(var C=c.getPathData({normalize:!0}),E=1;E<C.length;E+=1){var k=C[E];n.push(k);
}}}c.setPathData(n),e["#seg-sketch"].clear()};window.addEventListener("mousemove",n=s(function(){
e["#seg-sketch"].points.length>=d&&m()},v,this,!1)),window.addEventListener("mouseup",i=function(t){
window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",n),
e["#seg-sketch"].points.length>1&&m();var r=e._shadowRoot.elementFromPoint(t.clientX,t.clientY);
if(r&&e["#node-grippies"].contains(r)){var s=r,o=s.ownerPath;if(o===c){var d={type:"Z",
values:[]},h=c.getPathData();h.push(d),c.setPathData(h)}else{var v=u(o,c);o.setAttribute("transform",v.toString()),
l(o);var f=s.getAttribute("data-position");if("draw-forward"===e._mode){"end"===f&&a(o);
for(var g=c.getPathData({normalize:!0}),b=o.getPathData({normalize:!0}),p=1;p<b.length;p+=1){
var y=b[p];g.push(y)}c.setPathData(g),o.setPathData([]),o.remove()}else if("draw-backward"===e._mode){
"start"===f&&a(o);for(var _=o.getPathData({normalize:!0}),x=c.getPathData({normalize:!0
}),w=1;w<x.length;w+=1){var S=x[w];_.push(S)}c.setPathData(_),o.setPathData([]),o.remove();
}}}e["#seg-sketch"].hide(),"select"===e._mode,e._currentPath=null,e._updateNodeGrippies();
})},_onContentMouseDown:function(t){var n=this;body.canvas.undoManager.checkpoint("Draw freehand path segments");
var o=body.canvas.currentContainer||body.canvas.currentArtboard,c=e("svg:path");c.style.stroke="black",
c.style.fill="none",o.append(c);var f=c.getScreenCTM().inverse(),m=t,g=m.clientX,b=m.clientY,p=i(g,b).matrixTransform(f),y=p.x,_=p.y;
c.setAttribute("d","M "+y+" "+_),body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[c]);
var x,w;this._mode="draw-forward",this._currentPath=c,this["#seg-sketch"].show(c),
this._updateNodeGrippies();var S=function(){var t=n["#seg-sketch"].points,e=c.getAttribute("d");
if(0!==t.length){if(1===t.length||2===t.length)e+=" L "+t[t.length-1].x+" "+t[t.length-1].y;else if(t.length>=3){
var i=r(t,h/body.canvas.scale),a=!0,s=!1,o=void 0;try{for(var l=void 0,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var d=l.value;e+=" C "+d[1].x+" "+d[1].y+" "+d[2].x+" "+d[2].y+" "+d[3].x+" "+d[3].y;
}}catch(v){s=!0,o=v}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}c.setAttribute("d",e),n["#seg-sketch"].clear()}};window.addEventListener("mousemove",x=s(function(){
n["#seg-sketch"].points.length>=d&&S()},v,this,!1)),window.addEventListener("mouseup",w=function(t){
window.removeEventListener("mouseup",w),window.removeEventListener("mousemove",x);
var e=n._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(n["#seg-sketch"].points.length>0&&S(),
e&&n["#node-grippies"].contains(e)){var i=e;if(i.ownerPath===n._currentPath){var r=n._currentPath.getPathData();
r.push({type:"Z",values:[]}),n._currentPath.setPathData(r)}else{var s=i.getAttribute("data-position"),o=n._currentPath,c=i.ownerPath,d=u(c,o);
c.setAttribute("transform",d.toString()),l(c),"end"===s&&a(c);for(var h=o.getPathData({
normalize:!0}),v=c.getPathData({normalize:!0}),f=1;f<v.length;f+=1){var m=v[f];h.push(m);
}o.setPathData(h),c.setPathData([]),c.remove()}}n["#seg-sketch"].hide(),n._mode="select",
n._currentPath=null,n._updateNodeGrippies()})},_updateNodeGrippies:function(){this["#node-grippies"].innerHTML="";
var t=!0,n=!1,r=void 0;try{for(var a=void 0,s=this._getSelectedPaths()[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value,l=o.getPathData({normalize:!0}),c=void 0,d=void 0;0===l.length?(c=null,
d=null):1===l.length?(c=l[0],d=null):l.length>1&&(c=l[0],d=l[l.length-1]);var h=u(o,this),v=d&&"Z"===d.type;
if(c&&!v&&(o!==this._currentPath||"draw-backward"!==this._mode)){var f=i(c.values[0],c.values[1]).matrixTransform(h),m=e("svg:ellipse");
m.setAttribute("class","node-grippie"),m.setAttribute("cx",f.x),m.setAttribute("cy",f.y),
m.setAttribute("data-position","start"),m.ownerPath=o,this["#node-grippies"].append(m);
}if(d&&!v&&(o!==this._currentPath||"draw-forward"!==this._mode)){var g=void 0;g="C"===d.type?i(d.values[4],d.values[5]).matrixTransform(h):i(d.values[0],d.values[1]).matrixTransform(h);
var b=e("svg:ellipse");b.setAttribute("class","node-grippie"),b.setAttribute("cx",g.x),
b.setAttribute("cy",g.y),b.setAttribute("data-position","end"),b.ownerPath=o,this["#node-grippies"].append(b);
}}}catch(p){n=!0,r=p}finally{try{t||null==s["return"]||s["return"]()}finally{if(n)throw r;
}}this._updateNodeGrippiesSize()},_updateNodeGrippiesSize:function(){var t=c/2/body.canvas.scale,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#node-grippies"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.setAttribute("rx",t),s.setAttribute("ry",t)}}catch(o){n=!0,i=o}finally{
try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_getSelectedPaths:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("is")===!1?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),g=n("g","bx-freehandsegsdrawhud",m);return{get default(){
return g}}}),System.registerModule("elements/bx-freehandsegsketch",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=t.createSVGPoint,i=System.get("utils/transform").getTransformToElement,r='\n  <style>@import url("stylesheets/bx-freehandsegsketch.css");</style>\n  <polyline id="outline"></polyline>\n',a=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=r;var t=!0,e=!1,n=void 0;try{for(var i=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){e=!0,n=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw n}}this._path=null,this._hasListeners=!1},get points(){return this["#outline"].points;
},set points(t){throw new Error("points property is read-only")},show:function(t){
var e=void 0!==arguments[1]?arguments[1]:null;if(this._path=t,this["#outline"].setAttribute("points",""),
this._path.hasAttribute("transform")?this["#outline"].setAttribute("transform",this._path.getAttribute("transform")):this["#outline"].removeAttribute("transform"),
this.style.visibility="visible",e){var r=i(e,this._path),a=n(e.cx.baseVal.value,e.cy.baseVal.value);
a=a.matrixTransform(r),this["#outline"].points.appendItem(a)}this._hasListeners===!1&&this._addListeners();
},hide:function(){this._path=null,this.style.visibility="hidden",this["#outline"].setAttribute("points",""),
this._hasListeners===!0&&this._removeListeners()},clear:function(){this["#outline"].setAttribute("points","");
},_addListeners:function(){var t=this;this._hasListeners=!0,window.addEventListener("mousemove",this._mouseMoveListener=function(e){
var i=t._path.getScreenCTM().inverse(),r=n(e.clientX,e.clientY),a=r.matrixTransform(i);
t["#outline"].points.appendItem(a)})},_removeListeners:function(){this._hasListeners=!1,
window.removeEventListener("mousemove",this._mouseMoveListener)}},{},t)}(SVGGElement),s=e("g","bx-freehandsegsketch",a);
return{get default(){return s}}}),System.registerModule("elements/bx-freehandtool",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e=function(t){function e(){
$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
enabledCallback:function(){body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("draw-freehand-segs-hud");
},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("draw-freehand-segs-hud");
}},{},t)}(HTMLElement),n=t("bx-freehandtool",e);return{get default(){return n}}}),
System.registerModule("elements/bx-guide",[],function(){"use strict";var t=System.get("utils/dom").registerElement,e=Number.parseFloat,n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){},get offset(){return this.hasAttribute("offset")?e(this.getAttribute("offset")):0;
},set offset(t){this.setAttribute("offset",t)},get orient(){return this.hasAttribute("orient")?this.getAttribute("orient"):"horizontal";
},set orient(t){this.setAttribute("orient",t)}},{},t)}(HTMLElement),i=t("bx-guide",n);
return{get default(){return i}}}),System.registerModule("elements/bx-huerotatefilter",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e=Number.parseFloat,n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._update()},attributeChangedCallback:function(t,e,n){
e!==n&&"data-angle"===t&&this._onAngleChange()},get angle(){return this.hasAttribute("data-angle")?e(this.getAttribute("data-angle")):0;
},set angle(t){this.setAttribute("data-angle",t)},_onAngleChange:function(){this._update();
},_update:function(){this.innerHTML='<feColorMatrix type="hueRotate" values="'+this.angle+'"/>';
}},{fromSVGFilter:function(t){var n=void 0!==arguments[1]?arguments[1]:!1,i=path.hasAttribute("data-bx-angle")?e(path.getAttribute("data-bx-angle")):0;
if(path.children[0].getAttribute("values")!==""+i)return n&&(path.removeAttribute("data-bx-is"),
path.removeAttribute("data-bx-angle")),null;var r=createElement("svg:filter","bx-huerotatefilter");
return r}},t)}(SVGFilterElement),i=t("filter","bx-huerotatefilter",n);return{get default(){
return i}}}),System.registerModule("elements/bx-hueslider",[],function(){"use strict";
var t=System.get("utils/dom").registerElement,e=System.get("utils/math").normalize,n=Number.parseInt,i=!1,r='\n<style>\n  @import url("stylesheets/bx-hueslider.css");\n</style>\n\n<main>\n  <canvas id="canvas"></canvas>\n  <div id="marker"></div>\n</main>\n',a=[[0,[255,0,0]],[.15,[255,255,0]],[.33,[0,255,0]],[.49,[0,255,255]],[.67,[0,0,255]],[.84,[255,0,255]],[1,[255,0,0]]],s=function(t){
function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)}return $traceurRuntime.createClass(s,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this["#canvas"].addEventListener("mousedown",function(e){return t._onMouseDown(e);
}),this._drawSpectrum()},attributeChangedCallback:function(t,e,n){e!==n&&"hue"===t&&this._onHueChange();
},get hue(){return this.hasAttribute("hue")?n(this.getAttribute("hue")):360},set hue(t){
this.setAttribute("hue",t)},_onMouseDown:function(t){var e=this;this.dispatchEvent(new CustomEvent("markerdragstart"));
var n,i,r,a=this["#canvas"].getBoundingClientRect().left;this._onMarkerDrag(t.clientX-a),
window.addEventListener("mousemove",i=function(t){t.clientX!==n&&(n=t.clientX,e._onMarkerDrag(t.clientX-a));
}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r),e.dispatchEvent(new CustomEvent("markerdragend"));
})},_onMarkerDrag:function(t){var n=e(t/this["#canvas"].clientWidth*360,0,360,0);this.hue!==n&&(this.hue=n,
this.dispatchEvent(new CustomEvent("markerdrag",{detail:this.hue})),i&&console.log("%c     ","background: hsl("+n+", 100%, 50%)","hue = "+n));
},_onHueChange:function(){var t=e(this.hue,0,360,0);this["#marker"].style.left=t/360*100+"%";
},_drawSpectrum:function(){var t=this["#canvas"].width=800,e=this["#canvas"].height=100,n=this["#canvas"].getContext("2d"),i=n.createLinearGradient(0,0,t,0),r=!0,s=!1,o=void 0;
try{for(var l=void 0,u=a[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;
i.addColorStop(c[0],"rgb("+c[1][0]+", "+c[1][1]+", "+c[1][2]+")")}}catch(d){s=!0,
o=d}finally{try{r||null==u["return"]||u["return"]()}finally{if(s)throw o}}n.fillStyle=i,
n.fillRect(0,0,t,e)}},{},t)}(HTMLElement),o=t("bx-hueslider",s);return{get default(){
return o}}}),System.registerModule("elements/bx-input",[],function(){"use strict";
System.get("elements/bx-contextmenu"),System.get("elements/bx-menuitem");var t=System.get("classes/shortcut")["default"],e=System.get("classes/undo-manager")["default"],n=System.get("utils/dom").registerElement,i=System.get("utils/time").debounce,r=(Object.entries,
'\n  <style id="skin-style"></style>\n\n  <main>\n    <input id="input" type="text" spellcheck="false"></input>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n'),a=function(n){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this.commands={selectAll:{exec:function(){return t["#input"].select();
}},copy:{enabled:function(){return t["#input"].selectionStart!==t["#input"].selectionEnd;
},exec:function(){return t._copyInputValue()}},cut:{enabled:function(){return t["#input"].selectionStart!==t["#input"].selectionEnd;
},exec:function(){return t._cutInputValue()}},paste:{exec:function(){return t._pasteInputValue();
}},undo:{enabled:function(){return t._undoManager.canUndo()},exec:function(){return t._undoManager.undo();
}},redo:{enabled:function(){return t._undoManager.canRedo()},exec:function(){return t._undoManager.redo();
}}},this._textCursor=null,this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=r;var n=!0,a=!1,s=void 0;try{for(var o=void 0,l=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var u=o.value;this["#"+u.id]=u}}catch(c){a=!0,s=c}finally{try{n||null==l["return"]||l["return"]();
}finally{if(a)throw s}}this._onDebouncedInputInput=i(this._onDebouncedInputInput,250,this),
this._undoManager=new e,this.addEventListener("mouseenter",function(e){return t._onMouseEnter(e);
}),this.addEventListener("mouseleave",function(e){return t._onMouseLeave(e)}),this.addEventListener("mousemove",function(e){
return t._onMouseMove(e)}),this.addEventListener("mouseup",function(e){return t._onMouseUp(e);
}),this.addEventListener("contextmenu",function(e){return t._onContextMenu(e)}),this["#input"].addEventListener("focusin",function(e){
return t._onInputFocus(e)}),this["#input"].addEventListener("blur",function(e){return t._onInputBlur(e);
}),this["#input"].addEventListener("keydown",function(e){return t._onInputKeyDown(e);
}),this["#input"].addEventListener("input",function(e){return t._onInputInput(e)}),
this["#input"].addEventListener("input",function(e){return t._onDebouncedInputInput(e);
}),this["#context-menu"].menuWillShow=function(e){return t._menuWillShow(e)},this["#context-menu"].menuItemWillTrigger=function(e){
return t._menuItemWillTrigger(e)},this["#context-menu"].addEventListener("menuitemtrigger",function(e){
return t._onContextMenuItemTrigger(e)}),this._onValuePropertyChange(),this._onSkinPropertyChange(),
this._onDisabledPropertyChange()},attributeChangedCallback:function(t,e,n){e!==n&&("value"===t?this._onValuePropertyChange():"skin"===t?this._onSkinPropertyChange():"disabled"===t&&this._onDisabledPropertyChange());
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):""},set value(t){
this.setAttribute("value",t)},get mixed(){return this.hasAttribute("mixed")},set mixed(t){
t?this.setAttribute("mixed",""):this.removeAttribute("mixed")},get disabled(){return this.hasAttribute("disabled");
},set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):null},set skin(t){
null===t?this.removeAttribute("skin"):this.setAttribute("skin",t)},validate:function(t){
return!0},focus:function(){this["#input"].focus()},selectAll:function(){this["#input"].select();
},_onValuePropertyChange:function(){this["#input"].value=this.value,this._updateInputValidity();
},_onSkinPropertyChange:function(){var t='@import url("stylesheets/bx-input.css");';
null!==this.skin&&(t='@import url("stylesheets/bx-input@'+this.skin+'.css");'),this["#skin-style"].innerText=t;
},_onDisabledPropertyChange:function(){this.disabled?this["#input"].tabIndex=-1:this["#input"].tabIndex=0;
},_onMouseEnter:function(t){body.mouseIsDown?this["#input"].style.pointerEvents="none":(this["#input"].style.pointerEvents=null,
this._textCursor=body.registerCursor("text",200))},_onMouseLeave:function(t){this["#input"].style.pointerEvents=null,
null!==this._textCursor&&(body.unregisterCursor(this._textCursor),this._textCursor=null);
},_onMouseMove:function(t){this["#input"].matches(":focus")===!1&&t.preventDefault();
},_onMouseUp:function(t){this["#input"].style.pointerEvents=null,null===this._textCursor&&(this._textCursor=body.registerCursor("text",200));
},_onInputFocus:function(t){body.bridge.postMessage("toggleTextInputMode",!0),this._cachedValue=this["#input"].value,
this._updateInputValidity()},_onInputBlur:function(t){body.bridge.postMessage("toggleTextInputMode",!1),
this._undoManager.reset(),this["#input"].value!==this.value&&(this.validate(this["#input"].value)===!1?this["#input"].value=this.value:(this.value=this["#input"].value,
this.dispatchEvent(new CustomEvent("change"))))},_onInputKeyDown:function(e){var n=t.fromEvent(e);
n.matches("Enter")?this._confirmInputChange():n.matches("Escape")?this._cancelInputChange():(n.matches("ArrowDown")||n.matches("Shift","ArrowDown")||n.matches("ArrowUp")||n.matches("Shift","ArrowUp")||n.matches("ArrowLeft")||n.matches("Shift","ArrowLeft")||n.matches("ArrowRight")||n.matches("Shift","ArrowRight"))&&e.stopPropagation();
},_onInputInput:function(t){this._updateInputValidity()},_onDebouncedInputInput:function(t){
var e=this,n=this._cachedValue,i=this["#input"].value;this._cachedValue=this["#input"].value,
this._undoManager.register({label:"Typing",undo:function(){e["#input"].value=e._cachedValue=n,
e._updateInputValidity(),e["#input"].select()},redo:function(){e["#input"].value=e._cachedValue=i,
e._updateInputValidity(),e["#input"].select()}})},_onContextMenu:function(t){t.preventDefault(),
this["#input"].focus(),this["#context-menu"].open(t.clientX,t.clientY)},_onContextMenuItemTrigger:function(t){
var e=t.detail,n=this.commands[e.commandID];n&&n.exec()},_menuWillShow:function(t){
var e=this;return new Promise(function(n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(t){this._validateMenuItem(t);
},_validateMenuItem:function(t){var e=this;return new Promise(function(n){var i=t.commandID||null,r=i?e.commands[i]:null;
r&&(t.disabled=r.enabled?!r.enabled():!1),n()})},_updateInputValidity:function(){
this.validate(this["#input"].value)?this["#input"].setCustomValidity(""):this["#input"].setCustomValidity("Invalid value");
},_confirmInputChange:function(){this.blur(),this.dispatchEvent(new CustomEvent("confirm"));
},_cancelInputChange:function(){this["#input"].value=this.value,this.blur(),this.dispatchEvent(new CustomEvent("cancel"));
},_copyInputValue:function(){var t=this["#input"].value.substring(this["#input"].selectionStart,this["#input"].selectionEnd);
body.bridge.postMessage("setClipboardData",{"text/plain":t})},_pasteInputValue:function(){
var t=this;body.bridge.postMessage("getClipboardData",null,function(e){if(e["text/plain"]){
var n=t["#input"].selectionStart,i=t["#input"].selectionEnd,r=e["text/plain"],a=t["#input"].value.substring(0,n),s=t["#input"].value.substring(i,t["#input"].value.length);
t["#input"].value=a+r+s,t["#input"].setSelectionRange(n+r.length,n+r.length),t["#input"].dispatchEvent(new Event("input",{
bubbles:!0}))}})},_cutInputValue:function(){var t=this["#input"].selectionStart,e=this["#input"].selectionEnd,n=this["#input"].value.substring(t,e),i=this["#input"].value.substring(0,t),r=this["#input"].value.substring(e,this["#input"].value.length);
this["#input"].value=i+r,this["#input"].setSelectionRange(t,t),this["#input"].dispatchEvent(new Event("input",{
bubbles:!0})),body.bridge.postMessage("setClipboardData",{"text/plain":n})}},{},n);
}(HTMLElement),s=n("bx-input",a);return{get default(){return s}}}),System.registerModule("elements/bx-lineargradienthud",[],function(){
"use strict";var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/dom"),n=e.createElement,i=e.createSVGMatrix,r=e.createSVGPoint,a=e.registerElement,s=System.get("utils/event").isMouseMoveIntentional,o=System.get("utils/gradient").getGradientColorAtOffset,l=System.get("utils/math").normalize,u=System.get("utils/paint"),c=u.getPaintType,d=u.getPaintServer,h=System.get("utils/relationship"),v=h.getGraphicsElements,f=h.queryStylableElements,m=System.get("utils/time").throttle,g=System.get("utils/transform"),b=g.getTransformFromPoints,p=g.getTransformToElement,y=System.get("utils/vector").getAngleBetweenVectors,_=System.get("utils/point"),x=_.getPointAtFraction,w=(_.getPointBetweenTwoPoints,
_.getNearestPointOnLine),S=_.getDistanceBetweenPoints,C=_.snapPointToAngleMultiple,E=System.get("classes/enum")["default"],k=System.get("classes/shortcut")["default"],A=System.get("classes/vector")["default"],L=(Object.keys,
new E("gradient","gradientUser","stop")),M=SVGUnitTypes,j=M.SVG_UNIT_TYPE_USERSPACEONUSE,T=M.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,P=6,R='\n  <style>@import url("stylesheets/bx-lineargradienthud.css");</style>\n\n  <defs>\n    <g class="subhud" tabindex="0">\n      <line class="slider-shadow"></line>\n      <line class="slider"></line>\n      <g class="stop-grippies"></g>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',O=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this.commands={selectAll:{enabled:function(){
return!0},exec:function(){return t._selectAllStops()}},deselectAll:{enabled:function(){
return!0},exec:function(){return t._deselectAllStops()}}},this.tabIndex=-1,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=R,this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),
this._subhuds=this._shadowRoot.querySelector("#subhuds"),this._updateAll200ms=m(this._updateAll,200,this),
this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._shadowRoot.addEventListener("keydown",function(e){
return t._onShadowRootKeyDown(e)}),this._shadowRoot.addEventListener("mousedown",function(e){
return t._onShadowRootMouseDown(e)}),this._shadowRoot.addEventListener("mouseup",function(e){
return t._onShadowRootMouseUp(e)}),this._shadowRoot.addEventListener("dblclick",function(e){
return t._onShadowRootDblClick(e)})},enabledCallback:function(){var t=this;this._onSelectedElementsChange(),
body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("mousedown",this._canvasMouseDownListener=function(e){
t._onCanvasMouseDown(e)}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
t._onUndoOrRedo()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
t._onUndoOrRedo()})},disabledCallback:function(){this._selectStops([]),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("mousedown",this._canvasMouseDownListener),
body.canvas.undoManager.removeEventListener("undo",this._undoListener),body.canvas.undoManager.removeEventListener("redo",this._redoListener);
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},get selectedStops(){return $traceurRuntime.spread(this._selectedStops)},_onSelectedElementsChange:function(){
this._updateAll200ms()},_onSelectedTextRangeChange:function(){this._updateAll200ms();
},_onContentMutation:function(t){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement.parentElement):this._draggedSlider?this._updatePositions(this._draggedSlider.parentElement):"style"===t.attributeName&&"stop"===t.target.localName?this._updateGrippiesColor():this._updateAll200ms();
},_onZoomChange:function(){this._updateGrippiesSize()},_onUndoOrRedo:function(){this._selectStops([]);
},_onCanvasMouseDown:function(t){0===t.button&&t.target!==this&&this._selectStops([]);
},_onShadowRootMouseDown:function(t){var e=this;if(0===t.button){t.target.classList.contains("slider")?this._onSliderMouseDown(t):t.target.classList.contains("stop-grippie")&&this._onStopGrippieMouseDown(t);
var n,i;this._mouseMovedAfterMouseDown=!1,this._mouseDownTimeStamp=t.timeStamp,window.addEventListener("mousemove",n=function(){
e._mouseMovedAfterMouseDown=!0}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mouseup",i),
window.removeEventListener("mousemove",n)})}},_onShadowRootMouseUp:function(t){t.target.classList.contains("stop-grippie")&&this._onStopGrippieMouseUp(t);
},_onShadowRootDblClick:function(t){t.timeStamp-this._mouseDownTimeStamp<100&&t.target.classList.contains("slider")&&this._onSliderDblClick(t);
},_onStopGrippieMouseDown:function(t){var e=t.target,n=e[L.stop],i=n.closest("linearGradient"),r=this._selectedStops.filter(function(t){
return t.closest("linearGradient")===i}),a=function(){var t=0,e=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=i.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(e[t++]=l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}(),s=a[0],o=a[a.length-1],l=body.modKeys,u=l.alt,c=l.shift;
this._mouseDownSelectedStops=$traceurRuntime.spread(r),c===!1?r.includes(n)===!1&&this._selectStops([n]):c===!0&&r.includes(n)===!1&&(r.push(n),
this._selectStops(r)),n===s&&0===n.offset.baseVal&&u===!1?this._onBoundingStopGrippieOrSliderEdgeMouseDown(t,"start"):n===o&&1===n.offset.baseVal&&u===!1?this._onBoundingStopGrippieOrSliderEdgeMouseDown(t,"end"):this._onDraggableStopGrippieMouseDown(t);
},_onStopGrippieMouseUp:function(t){if(!this._mouseMovedAfterMouseDown){var e=t.target,n=this._mouseDownSelectedStops,i=e[L.stop],r=e.closest(".subhud"),a=r[L.gradientUser],s=body.modKeys.shift,o=[],l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=body.canvas.selectedElements[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var f=d.value;if("g"!==f.localName&&"a"!==f.localName||!f.contains(a))o.push(f);else{
var m=!0,g=!1,b=void 0;try{for(var p=void 0,y=v($traceurRuntime.spread(f.children),!0)[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value;o.unshift(_)}}catch(x){g=!0,b=x}finally{try{m||null==y["return"]||y["return"]();
}finally{if(g)throw b}}}}}catch(w){u=!0,c=w}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}o.remove(a),o.unshift(a),body.canvas.selectedElements=o;for(var S=a.parentElement;S!==body.canvas.currentArtboard;S=S.parentElement)if("g"===S.localName||"a"===S.localName){
body.canvas.currentContainer=S;break}s===!0&&this._mouseDownSelectedStops.includes(i)===!0&&(n.remove(i),
this._selectStops(n))}},_onDraggableStopGrippieMouseDown:function(t){var e,n,i,a,s=this,o=t.target,l=o.closest(".subhud"),u=l.querySelector(".slider"),c=this._getMoveOffsetsForSelectedStops(),d=this.getScreenCTM(),h=d.inverse(),v=r(u.x1.baseVal.value,u.y1.baseVal.value),f=r(u.x2.baseVal.value,u.y2.baseVal.value),m=r(o.cx.baseVal.value,o.cy.baseVal.value),g=m.matrixTransform(d),b=(e=w(v,f,m,!1)[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),p=S(v,b)/S(v,f),y=!1;this._draggedGrippie=o,window.addEventListener("mousemove",i=function(e){
var n,i;y===!1&&(body.canvas.undoManager.checkpoint("Move gradient stop"),y=!0);var a=r(g.x+e.clientX-t.clientX,g.y+e.clientY-t.clientY),o=a.matrixTransform(h),l=(n=w(v,f,o,!1)[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),u=S(v,l)/S(v,f),d=u-p,m=!0,b=!1,_=void 0;try{for(var x=void 0,C=s._selectedStops[Symbol.iterator]();!(m=(x=C.next()).done);m=!0){
var E=x.value,k=c.get(E),A=k.minOffset,L=k.maxOffset,M=k.initialOffset;A>M+d?E.setAttribute("offset",A):M+d>L?E.setAttribute("offset",L):E.setAttribute("offset",M+d);
}}catch(j){b=!0,_=j}finally{try{m||null==C["return"]||C["return"]()}finally{if(b)throw _;
}}}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",a),s._draggedGrippie=null})},_onBoundingStopGrippieOrSliderEdgeMouseDown:function(e){
var n,a,o,l,u,c,d,h,v=void 0!==arguments[1]?arguments[1]:"start",f=this,m=$traceurRuntime.spread(this._subhuds.children).find(function(t){
return t.contains(e.target)}),g=m[L.gradient],p=m[L.gradientUser],_=t(p),x=p.getScreenCTM(),w=x.inverse(),S=i(g.gradientTransform.baseVal.consolidate().matrix),E=!1,k=!1;
e.target.matches(".stop-grippie")?this._draggedGrippie=e.target:e.target.matches(".slider")&&(this._draggedSlider=e.target);
var M=function(){if(g.gradientUnits.baseVal===j){"start"===v?(o=r(g.x1.baseVal.value,g.y1.baseVal.value),
l=r(g.x2.baseVal.value,g.y2.baseVal.value)):"end"===v&&(o=r(g.x2.baseVal.value,g.y2.baseVal.value),
l=r(g.x1.baseVal.value,g.y1.baseVal.value));var t=new A(l,o).getNormalVector();u=r(l.x+t.x,l.y+t.y);
var e=o.matrixTransform(S),n=l.matrixTransform(S),i=u.matrixTransform(S);c=e.matrixTransform(x),
d=n.matrixTransform(x),h=i.matrixTransform(x)}else if(g.gradientUnits.baseVal===T){
"start"===v?(o=r(g.x1.baseVal.valueInSpecifiedUnits,g.y1.baseVal.valueInSpecifiedUnits),
l=r(g.x2.baseVal.valueInSpecifiedUnits,g.y2.baseVal.valueInSpecifiedUnits)):"end"===v&&(o=r(g.x2.baseVal.valueInSpecifiedUnits,g.y2.baseVal.valueInSpecifiedUnits),
l=r(g.x1.baseVal.valueInSpecifiedUnits,g.y1.baseVal.valueInSpecifiedUnits));var a=new A(l,o).getNormalVector();
u=r(l.x+a.x,l.y+a.y);var s=o.matrixTransform(S),f=l.matrixTransform(S),m=u.matrixTransform(S),b=r(_.x+s.x*_.width,_.y+s.y*_.height),p=r(_.x+f.x*_.width,_.y+f.y*_.height),y=r(_.x+m.x*_.width,_.y+m.y*_.height);
c=b.matrixTransform(x),d=p.matrixTransform(x),h=y.matrixTransform(x)}};window.addEventListener("mousemove",n=function(t){
var n,a;if(E===!1){if(!s(e,t,5))return;E=!0,body.canvas.undoManager.checkpoint("Transform gradient"),
M()}var v,f,m,p,x=body.modKeys.shift,L=r(t.clientX+(c.x-e.clientX),t.clientY+(c.y-e.clientY)),P=r(c.x+t.clientX-e.clientX,c.y+t.clientY-e.clientY),R=r(d);
if(x===!1){var O=y(new A(d,c),new A(d,L)),I=i().rotate(O,d.x,d.y);p=h.matrixTransform(I);
}else if(x===!0){k=!0;var D=(n=C(d,P,22.5)[Symbol.iterator](),(a=n.next()).done?void 0:a.value);
P=D}if(k){var V=new A(R,P).getNormalVector();p=r(R.x+V.x,R.y+V.y)}if(g.gradientUnits.baseVal===j){
var N=P.matrixTransform(w),B=R.matrixTransform(w),z=p.matrixTransform(w);v=N.matrixTransform(S.inverse()),
f=B.matrixTransform(S.inverse()),m=z.matrixTransform(S.inverse())}else if(g.gradientUnits.baseVal===T){
var G=P.matrixTransform(w),U=R.matrixTransform(w),H=p.matrixTransform(w),F=r((G.x-_.x)/_.width,(G.y-_.y)/_.height),q=r((U.x-_.x)/_.width,(U.y-_.y)/_.height),$=r((H.x-_.x)/_.width,(H.y-_.y)/_.height);
v=F.matrixTransform(S.inverse()),f=q.matrixTransform(S.inverse()),m=$.matrixTransform(S.inverse());
}var Y=b(o,l,u,v,f,m);g.setAttribute("gradientTransform",S.multiply(Y).toString());
}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",a),f._draggedGrippie=null,f._draggedSlider=null;
})},_onSliderMouseDown:function(t){var e=t.target,n=e.closest(".subhud"),i=(n[L.gradientUser],
e.getScreenCTM()),a=r(t.clientX,t.clientY),s=r(e.x1.baseVal.value,e.y1.baseVal.value),o=r(e.x2.baseVal.value,e.y2.baseVal.value),l=s.matrixTransform(i),u=o.matrixTransform(i),c=new A(l,a).length,d=new A(u,a).length;
5>=c?this._onBoundingStopGrippieOrSliderEdgeMouseDown(t,"start"):5>=d?this._onBoundingStopGrippieOrSliderEdgeMouseDown(t,"end"):this._onSliderBodyMouseDown(t);
},_onSliderBodyMouseDown:function(e){var n,a,o,l,u=this,c=e.target,d=c.closest(".subhud"),h=d[L.gradientUser],v=d[L.gradient],f=t(h),m=h.getScreenCTM(),g=m.inverse(),b=i(v.gradientTransform.baseVal.consolidate().matrix),p=!1;
if(this._draggedSlider=c,v.gradientUnits.baseVal===j){var y=r(v.x1.baseVal.value,v.y1.baseVal.value),_=r(v.x2.baseVal.value,v.y2.baseVal.value),x=y.matrixTransform(b),w=_.matrixTransform(b);
o=x.matrixTransform(m),l=w.matrixTransform(m)}else if(v.gradientUnits.baseVal===T){
var S=r(v.x1.baseVal.valueInSpecifiedUnits,v.y1.baseVal.valueInSpecifiedUnits),C=r(v.x2.baseVal.valueInSpecifiedUnits,v.y2.baseVal.valueInSpecifiedUnits),E=S.matrixTransform(b),k=C.matrixTransform(b),A=r(f.x+E.x*f.width,f.y+E.y*f.height),M=r(f.x+k.x*f.width,f.y+k.y*f.height);
o=A.matrixTransform(m),l=M.matrixTransform(m)}window.addEventListener("mousemove",n=function(t){
if(p===!1){if(!s(e,t,5))return;p=!0,body.canvas.undoManager.checkpoint("Transform gradient");
}var n,i;if(v.gradientUnits.baseVal===j){var a=r(o.x+t.clientX-e.clientX,o.y+t.clientY-e.clientY),u=r(l.x+t.clientX-e.clientX,l.y+t.clientY-e.clientY),c=a.matrixTransform(g),d=u.matrixTransform(g);
n=c.matrixTransform(b.inverse()),i=d.matrixTransform(b.inverse())}else if(v.gradientUnits.baseVal===T){
var h=r(o.x+t.clientX-e.clientX,o.y+t.clientY-e.clientY),m=r(l.x+t.clientX-e.clientX,l.y+t.clientY-e.clientY),y=h.matrixTransform(g),_=m.matrixTransform(g),x=r((y.x-f.x)/f.width,(y.y-f.y)/f.height),w=r((_.x-f.x)/f.width,(_.y-f.y)/f.height);
n=x.matrixTransform(b.inverse()),i=w.matrixTransform(b.inverse())}v.setAttribute("x1",n.x),
v.setAttribute("y1",n.y),v.setAttribute("x2",i.x),v.setAttribute("y2",i.y)}),window.addEventListener("mouseup",a=function(){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",a),
u._draggedSlider=null})},_onSliderDblClick:function(t){body.canvas.undoManager.checkpoint("Add Stop");
var e=t.target,i=e.closest(".subhud"),a=i[L.gradient],s=this.getScreenCTM().inverse(),u=function(){
var t=0,e=[],n=!0,i=!1,r=void 0;try{for(var s=void 0,o=a.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(e[t++]=l)}}catch(u){i=!0,r=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw r}}return e}(),c=r(e.x1.baseVal.value,e.y1.baseVal.value),d=r(e.x2.baseVal.value,e.y2.baseVal.value),h=r(t.clientX,t.clientY).matrixTransform(s),v=S(c,h),f=S(c,d),m=v/f;
m=l(m,0,1,5);for(var g=null,b=0;b<u.length;b+=1){var p=u[b];if(p.offset.baseVal<m)g=b;else if(p.offset.baseVal>m)break;
}var y=n("svg:stop");y.setAttribute("offset",m),y.style.stopColor=o(a,m).toString("hsl"),
null===g?0===a.childElementCount?a.append(y):a.children[0].before(y):u[g].after(y),
this._selectStops([y])},_onShadowRootKeyDown:function(t){var e=k.fromEvent(t);0!==this._selectedStops.length&&(e.matches("Backspace")?(t.stopPropagation(),
this._deleteSelectedStops()):e.matches("Tab")?(t.stopPropagation(),t.preventDefault(),
this._selectNextStop()):e.matches("ArrowLeft")?(t.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Left"),
this._moveSelectedStops(1,"left"))):e.matches("ArrowRight")?(t.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Right"),
this._moveSelectedStops(1,"right"))):e.matches("Shift","ArrowLeft")?(t.stopPropagation(),
this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 10 Units Left"),
this._moveSelectedStops(10,"left"))):e.matches("Shift","ArrowRight")&&(t.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 10 Units Right"),
this._moveSelectedStops(10,"right"))))},_updateAll:function(){var t=this,e=f(this.context,body.canvas.selectedElements,body.canvas.selectedTextRange),i=e.filter(function(e){
return"linearGradient"===c(e,t.context)});if(0===i.length)this._subhuds.innerHTML="";else{
var r=this._shadowRoot.activeElement,a=[];this._subhuds.innerHTML="";var s=!0,o=!1,l=void 0;
try{var u,h,v,m,g=this,b=function(){var t=p.value,e=d(t,g.context);if(a.includes(e))return 0;
a.push(e);var i=function(){var t=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[t++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),r=g._subhudTemplate.cloneNode(!0);r[L.gradient]=e,
r[L.gradientUser]=t;var s=r.querySelector(".stop-grippies"),o=document.createDocumentFragment();
u=!0,h=!1,v=void 0;try{for(var l=void 0,c=i[Symbol.iterator]();!(u=(l=c.next()).done);u=!0){
var f=l.value,m=n("svg:circle");m.setAttribute("class","stop-grippie"),m[L.stop]=f,
f.offset.baseVal>.95?o.prepend(m):s.append(m)}}catch(b){h=!0,v=b}finally{try{u||null==c["return"]||c["return"]();
}finally{if(h)throw v}}s.append(o),g._subhuds.append(r)};t:for(var p=void 0,y=i[Symbol.iterator]();!(s=(p=y.next()).done);s=!0)switch(m=b()){
case 0:continue t}}catch(_){o=!0,l=_}finally{try{s||null==y["return"]||y["return"]();
}finally{if(o)throw l}}if(r){var x=$traceurRuntime.spread(this._subhuds.children).find(function(t){
return t[L.gradient]===r[L.gradient]});x&&x.focus()}this._updatePositions(),this._updateGrippiesSize(),
this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder();
}},_updatePositions:function(){var e=void 0!==arguments[0]?arguments[0]:null,n=!0,a=!1,s=void 0;
try{var o,l,u,c,d,h,v,f=this,m=function(){var n=g.value;if(e&&n!==e)return 0;var a=n[L.gradient],s=n[L.gradientUser],v=function(){
var t=0,e=[],n=!0,i=!1,r=void 0;try{for(var s=void 0,o=a.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(e[t++]=l)}}catch(u){i=!0,r=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw r}}return e}(),m=i(a.gradientTransform.baseVal.consolidate().matrix),b=p(s,f),y=n.querySelector(".slider"),_=n.querySelector(".slider-shadow"),w=$traceurRuntime.spread(n.querySelector(".stop-grippies").children);
if(a.gradientUnits.baseVal===j){var S=r(a.x1.baseVal.value,a.y1.baseVal.value),C=r(a.x2.baseVal.value,a.y2.baseVal.value),E=S.matrixTransform(m),k=C.matrixTransform(m),A=E.matrixTransform(b),M=k.matrixTransform(b);
y.setAttribute("x1",A.x),y.setAttribute("y1",A.y),y.setAttribute("x2",M.x),y.setAttribute("y2",M.y),
_.setAttribute("x1",A.x),_.setAttribute("y1",A.y),_.setAttribute("x2",M.x),_.setAttribute("y2",M.y),
o=!0,l=!1,u=void 0;try{for(var P=function(){var t=R.value,e=w.find(function(e){return e[L.stop]===t;
}),n=x(A,M,t.offset.baseVal);e.cx.baseVal.value=n.x,e.cy.baseVal.value=n.y},R=void 0,O=v[Symbol.iterator]();!(o=(R=O.next()).done);o=!0)P();
}catch(I){l=!0,u=I}finally{try{o||null==O["return"]||O["return"]()}finally{if(l)throw u;
}}}else if(a.gradientUnits.baseVal===T){var D=t(s),V=r(a.x1.baseVal.valueInSpecifiedUnits,a.y1.baseVal.valueInSpecifiedUnits),N=r(a.x2.baseVal.valueInSpecifiedUnits,a.y2.baseVal.valueInSpecifiedUnits),B=V.matrixTransform(m),z=N.matrixTransform(m),G=r(D.x+B.x*D.width,D.y+B.y*D.height),U=r(D.x+z.x*D.width,D.y+z.y*D.height),H=G.matrixTransform(b),F=U.matrixTransform(b);
y.setAttribute("x1",H.x),y.setAttribute("y1",H.y),y.setAttribute("x2",F.x),y.setAttribute("y2",F.y),
_.setAttribute("x1",H.x),_.setAttribute("y1",H.y),_.setAttribute("x2",F.x),_.setAttribute("y2",F.y),
c=!0,d=!1,h=void 0;try{for(var q=function(){var t=$.value,e=w.find(function(e){return e[L.stop]===t;
}),n=x(H,F,t.offset.baseVal);e.cx.baseVal.value=n.x,e.cy.baseVal.value=n.y},$=void 0,Y=v[Symbol.iterator]();!(c=($=Y.next()).done);c=!0)q();
}catch(X){d=!0,h=X}finally{try{c||null==Y["return"]||Y["return"]()}finally{if(d)throw h;
}}}};t:for(var g=void 0,b=this._subhuds.children[Symbol.iterator]();!(n=(g=b.next()).done);n=!0)switch(v=m()){
case 0:continue t}}catch(y){a=!0,s=y}finally{try{n||null==b["return"]||b["return"]();
}finally{if(a)throw s}}},_updateGrippiesColor:function(){var t=!0,e=!1,n=void 0;try{
for(var i=void 0,r=this._subhuds.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.style.fill=d[L.stop].style.stopColor}}catch(h){o=!0,l=h}finally{try{
s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){e=!0,n=v}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_updateGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.setAttribute("r",P/body.canvas.scale)}}catch(s){e=!0,n=s}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_updateGrippiesSelectedState:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._subhuds.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;this._selectedStops.includes(d[L.stop])?d.setAttribute("data-selected",""):d.removeAttribute("data-selected");
}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}}}catch(v){e=!0,n=v}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_updateGrippiesZOrder:function(){var t=this._subhuds.querySelectorAll(".stop-grippie"),e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this._selectedStops[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h[L.stop]===s&&h.parentElement.append(h)}}catch(v){l=!0,u=v}finally{
try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}}catch(f){n=!0,i=f;
}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_selectStops:function(t){
(0!==t.length||0!==this._selectedStops.length)&&(this._selectedStops=$traceurRuntime.spread(t),
this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")));
},_selectAllStops:function(){var t=this._shadowRoot.activeElement,e=t[L.gradient],n=function(){
var t=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[t++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._selectedStops[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.closest("linearGradient")!==e&&n.push(l)}}catch(u){r=!0,a=u}finally{
try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}this._selectStops(n);
},_deselectAllStops:function(){var t=this._shadowRoot.activeElement,e=t[L.gradient];
this._selectStops(this._selectedStops.filter(function(t){return t.closest("linearGradient")!==e;
}))},_selectNextStop:function(){var t=this._shadowRoot.activeElement,e=t[L.gradient];
if(e){var n=function(){var t=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[t++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=this._selectedStops.filter(function(t){return t.closest("linearGradient")===e;
}),r=i[i.length-1],a=n[0];n.length>1&&(this._selectStops(this._selectedStops.filter(function(t){
return t.closest("linearGradient")!==e})),r.nextElementSibling?this._selectStops($traceurRuntime.spread([r.nextElementSibling],this._selectedStops)):this._selectStops($traceurRuntime.spread([a],this._selectedStops)));
}},_deleteSelectedStops:function(){var t=this._shadowRoot.activeElement;if(null!==t){
var e=t[L.gradient],n=this._selectedStops.filter(function(t){return t.closest("linearGradient")===e;
});if(n.length>0){body.canvas.undoManager.checkpoint("Delete gradient stop(s)");var i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
l.remove()}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{
if(r)throw a}}}this._selectStops([])}},_moveSelectedStops:function(){var t=void 0!==arguments[0]?arguments[0]:1,e=void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;
if(null!==n){var i=n.querySelector(".slider"),a=n[L.gradient],s=this._selectedStops.filter(function(t){
return t.closest("linearGradient")===a}),o=this._getMoveOffsetsForSelectedStops(),u=this.getScreenCTM(),c=r(i.x1.baseVal.value,i.y1.baseVal.value),d=r(i.x2.baseVal.value,i.y2.baseVal.value),h=c.matrixTransform(u),v=d.matrixTransform(u),f=new A(h,v),m=t/f.length,g=!0,b=!1,p=void 0;
try{for(var y=void 0,_=s[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){var x=y.value,w=o.get(x),S=w.minOffset,C=w.maxOffset;
if("left"===e){var E=l(x.offset.baseVal-m,S,C);x.setAttribute("offset",E)}else if("right"===e){
var k=l(x.offset.baseVal+m,S,C);x.setAttribute("offset",k)}}}catch(M){b=!0,p=M}finally{
try{g||null==_["return"]||_["return"]()}finally{if(b)throw p}}}},_canMoveActiveSelectedStops:function(){
var t=void 0!==arguments[0]?arguments[0]:"left",e=this._shadowRoot.activeElement;if(null!==e){
var n=(e.querySelector(".slider"),e[L.gradient]),i=this._selectedStops.find(function(t){
return t.closest("linearGradient")===n});if(null!==i){var r=this._getMoveOffsetsForSelectedStops(),a=r.get(i),s=a.minOffset,o=a.maxOffset;
return"left"===t?i.offset.baseVal>s:"right"===t?i.offset.baseVal<o:void 0}}},_getPreviousNotSelectedStop:function(t){
for(;t.previousElementSibling;){if(this._selectedStops.includes(t.previousElementSibling)===!1)return t.previousElementSibling;
t=t.previousElementSibling}return null},_getNextNotSelectedStop:function(t){for(;t.nextElementSibling;){
if(this._selectedStops.includes(t.nextElementSibling)===!1)return t.nextElementSibling;
t=t.nextElementSibling}return null},_getMoveOffsetsForSelectedStops:function(){var t=new Map,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this._selectedStops[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=this._getPreviousNotSelectedStop(o),u=this._getNextNotSelectedStop(o),c={};
l?c.min=o.offset.baseVal-l.offset.baseVal:c.min=o.offset.baseVal,u?c.max=u.offset.baseVal-o.offset.baseVal:c.max=1-o.offset.baseVal,
e.push(c)}}catch(d){i=!0,r=d}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}if(e.length>0){var h=e[0].min,v=e[0].max,f=!0,m=!1,g=void 0;try{for(var b=void 0,p=e[Symbol.iterator]();!(f=(b=p.next()).done);f=!0){
var y=b.value;y.min<h&&(h=y.min),y.max<v&&(v=y.max)}}catch(_){m=!0,g=_}finally{try{
f||null==p["return"]||p["return"]()}finally{if(m)throw g}}var x=!0,w=!1,S=void 0;try{
for(var C=void 0,E=this._selectedStops[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;t.set(k,{initialOffset:k.offset.baseVal,minOffset:k.offset.baseVal-h,
maxOffset:k.offset.baseVal+v})}}catch(A){w=!0,S=A}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}}return t}},{},e)}(SVGGElement),I=a("g","bx-lineargradienthud",O);
return{get default(){return I}}}),System.registerModule("elements/bx-maskcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select");var t=System.get("utils/dom"),e=(t.createElement,
t.createSVGMatrix,t.registerElement),n=(System.get("utils/math").round,System.get("utils/paint").getDefFromURL,
System.get("utils/relationship").queryStylableElements,System.get("utils/time").throttle),i='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-maskcontrols.css");\n</style>\n\n<section id="clip-section">\n  <h2 id="clip-section-heading">Clipping Mask</h2>\n\n  <div id="clip-buttons" class="hbox">\n    <bx-button\n      id="clip-button"\n      icon="set"\n      iconsize="25"\n      label="Clip">\n    </bx-button>\n\n    <bx-button\n      id="unclip-button"\n      icon="unset"\n      iconsize="25"\n      label="Unclip">\n    </bx-button>\n  </div>\n</section>\n\n<section id="mask-section">\n  <h2 id="mask-section-heading">Opacity Mask</h2>\n\n  <div id="mask-buttons" class="hbox">\n    <bx-button\n      id="mask-button"\n      icon="set"\n      iconsize="25"\n      label="Mask">\n    </bx-button>\n\n    <bx-button\n      id="unmask-button"\n      icon="unset"\n      iconsize="25"\n      label="Unmask">\n    </bx-button>\n  </div>\n</section>\n',r=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=i,this._update200ms=n(this._update,200,this);var e=!0,r=!1,a=void 0;
try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{e||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this["#clip-button"].addEventListener("click",function(e){
return t._onClipButtonClick(e)}),this["#unclip-button"].addEventListener("click",function(e){
return t._onUnclipButtonClick(e)}),this["#mask-button"].addEventListener("click",function(e){
return t._onMaskButtonClick(e)}),this["#unmask-button"].addEventListener("click",function(e){
return t._onUnmaskButtonClick(e)})},enabledCallback:function(){var t=this;this._update(),
body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._update200ms()},_onSelectedTextRangeChange:function(){
this._update200ms()},_onContentMutation:function(t){this._update200ms()},_onClipButtonClick:function(t){
0===t.button&&body.commands.clip.exec()},_onUnclipButtonClick:function(t){0===t.button&&body.commands.unclip.exec();
},_onMaskButtonClick:function(t){0===t.button&&body.commands.mask.exec()},_onUnmaskButtonClick:function(t){
0===t.button&&body.commands.unmask.exec()},_update:function(){this._updateClipSection(),
this._updateMaskSection()},_updateClipSection:function(){this["#clip-button"].disabled=!body.commands.clip.enabled(),
this["#unclip-button"].disabled=!body.commands.unclip.enabled(),this["#clip-section-heading"].disabled=this["#clip-button"].disabled&&this["#unclip-button"].disabled;
},_updateMaskSection:function(){this["#mask-button"].disabled=!body.commands.mask.enabled(),
this["#unmask-button"].disabled=!body.commands.unmask.enabled(),this["#mask-section-heading"].disabled=this["#mask-button"].disabled&&this["#unmask-button"].disabled;
}},{},t)}(HTMLElement),a=e("bx-maskcontrols",r);return{get default(){return a}}}),
System.registerModule("elements/bx-menu",[],function(){"use strict";System.get("elements/bx-menuitem");
var t=System.get("utils/dom").registerElement,e=System.get("utils/time").sleep,n=75,i=300,r='\n  <style>\n    @import url("stylesheets/scrollbars.css");\n    @import url("stylesheets/bx-menu.css");\n  </style>\n\n  <main id="main">\n    <content id="content"></content>\n  </main>\n',a=function(t){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this._mouseLocs=[],this._mouseInsideMenuBlock=!1,this["#main"].addEventListener("mousemove",function(e){
return t._onMouseMove(e)}),this.addEventListener("mouseover",function(e){return t._onMouseOver(e);
}),this.addEventListener("mouseout",function(e){return t._onMouseOut(e)}),this.addEventListener("click",function(e){
return t._onClick(e)})},menuWillShow:function(){return Promise.resolve()},menuItemWillTrigger:function(t){
return Promise.resolve()},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(t){this.setAttribute("label",t)},get opened(){return this.hasAttribute("opened");
},set opened(t){throw new Error("This property is read-only")},get items(){var t=[],e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;if("content"===s.localName){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s.getDistributedNodes()[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;("bx-menuitem"===h.localName||"hr"===h.localName)&&t.push(h)}}catch(v){
l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else("bx-menuitem"===s.localName||"hr"===s.localName)&&t.push(s);
}}catch(f){n=!0,i=f}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}return t},set items(t){throw new Error("This property is read-only")},openBelowElement:function(t){
var e,n,i,r=arguments;return $traceurRuntime.asyncWrap(function(a){for(;;)switch(a.state){
case 0:e=void 0!==r[1]?r[1]:0,a.state=4;break;case 4:return void Promise.resolve(this.menuWillShow()).then(a.createCallback(2),a.errback);
case 2:this.setAttribute("opened",""),n=t.getBoundingClientRect(),this.style.height=null,
this.style.top=n.top+n.height+e+"px",this.style.left=n.left+"px",i=this.getBoundingClientRect(),
i.left+i.width>window.innerWidth&&(this.style.left=n.left+n.width-i.width+"px"),i.top+i.height+e+5>window.innerHeight&&(this.style.height=window.innerHeight-(n.top+n.height+e)-10+"px"),
this.dispatchEvent(new CustomEvent("menuopen",{bubbles:!0,detail:this})),a.state=-2;
break;default:return a.end()}},this)},openNextToElement:function(t){var e,n,i,r,a=arguments;
return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){case 0:e=void 0!==a[1]?a[1]:0,
s.state=4;break;case 4:return void Promise.resolve(this.menuWillShow()).then(s.createCallback(2),s.errback);
case 2:this.setAttribute("opened",""),n=t.getBoundingClientRect(),this.style.height=null,
this.style.top=n.top+"px",this.style.left=n.left+n.width+e+"px",i=this.getBoundingClientRect(),
i.left+i.width+e>window.innerWidth&&(this.style.left=n.left-i.width-e+"px",i=this.getBoundingClientRect()),
i.top+i.height+5>window.innerHeight&&(r=window.innerHeight-(i.top+i.height)-5,this.style.top=n.top+r+"px",
i=this.getBoundingClientRect(),i.top<0&&(this.style.top="5px",this.style.height=window.innerHeight-10+"px")),
this.dispatchEvent(new CustomEvent("menuopen",{bubbles:!0,detail:this})),s.state=-2;
break;default:return s.end()}},this)},openAtPosition:function(t,e){var n,i;return $traceurRuntime.asyncWrap(function(r){
for(;;)switch(r.state){case 0:return void Promise.resolve(this.menuWillShow()).then(r.createCallback(2),r.errback);
case 2:this.setAttribute("opened",""),this.style.height=null,this.style.left=t+"px",
this.style.top=e+"px",n=this.getBoundingClientRect(),n.left+n.width>window.innerWidth&&(this.style.left=t-n.width+"px",
n=this.getBoundingClientRect()),n.top+n.height+5>window.innerHeight&&(i=window.innerHeight-(n.top+n.height)-5,
this.style.top=e+i+"px",n=this.getBoundingClientRect(),n.top<0&&(this.style.top="5px",
this.style.height=window.innerHeight-10+"px")),this.dispatchEvent(new CustomEvent("menuopen",{
bubbles:!0,detail:this})),r.state=-2;break;default:return r.end()}},this)},close:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.highlighted&&(a.highlighted=!1)}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this.style.left=null,this.style.top=null,this.removeAttribute("opened"),
this._openedSubmenu&&(this._openedSubmenu.close(),this._openedSubmenu=null),this.dispatchEvent(new CustomEvent("menuclose",{
bubbles:!0,detail:this}))},triggerItem:function(t){var n=this;return new Promise(function(i){
var r,a,s,o,l,u;return $traceurRuntime.asyncWrap(function(c){for(;;)switch(c.state){
case 0:return void Promise.resolve(n.menuItemWillTrigger(t)).then(c.createCallback(2),c.errback);
case 2:c.state=t.disabled===!1&&0===t.childElementCount?13:16;break;case 13:c.state=n.opened?7:12;
break;case 7:r=!0,a=!1,s=void 0;try{for(o=void 0,l=n.items[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)u=o.value,
u.highlighted&&(u.highlighted=!1)}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}n._willClose=!0,c.state=8;break;case 8:return void Promise.resolve(e(100)).then(c.createCallback(4),c.errback);
case 4:t.highlighted=!0,c.state=10;break;case 10:return void Promise.resolve(e(100)).then(c.createCallback(6),c.errback);
case 6:t.highlighted=!1,n._willClose=!1,n.close(),c.state=12;break;case 12:n.dispatchEvent(new CustomEvent("menuitemtrigger",{
bubbles:!0,detail:t})),i(),c.state=-2;break;case 16:i(),c.state=-2;break;default:
return c.end()}},this)})},highlightItem:function(t){var n,i;return $traceurRuntime.asyncWrap(function(r){
for(;;)switch(r.state){case 0:r.state=this._willClose?1:3;break;case 1:r.returnValue=void 0,
r.state=2;break;case 2:r.state=-2;break;case 3:n=this.items.find(function(t){return t.highlighted===!0;
}),r.state=21;break;case 21:r.state=n?10:7;break;case 10:r.state=n===t?5:8;break;case 5:
r.returnValue=void 0,r.state=6;break;case 6:r.state=-2;break;case 8:n.highlighted=!1,
r.state=7;break;case 7:this._openedSubmenu&&(this._openedSubmenu.close(),this._openedSubmenu=null),
r.state=23;break;case 23:r.state=t&&t.disabled===!1?17:-2;break;case 17:i=t.children[0]&&"bx-menu"===t.children[0].localName?t.children[0]:null,
t.highlighted=!0,r.state=18;break;case 18:r.state=i?12:-2;break;case 12:return void Promise.resolve(e(100)).then(r.createCallback(13),r.errback);
case 13:t.highlighted&&t.highlighted&&(this._openedSubmenu=i,i.openNextToElement(t,0)),
r.state=-2;break;default:return r.end()}},this)},highlightPreviousItem:function(){
var t=void 0!==arguments[0]?arguments[0]:null,e=this.items;if(null===t&&(t=e.find(function(t){
return t.highlighted===!0})),t)for(var n=e.indexOf(t)-1;n>=0;n-=1){var i=e[n];if(i.disabled===!1&&i.hidden===!1&&"bx-menuitem"===i.localName)return this.highlightItem(i),
void i.scrollIntoViewIfNeeded()}for(var r=e.length-1;r>=0;r-=1){var a=e[r];if(a.disabled===!1&&a.hidden===!1&&"bx-menuitem"===a.localName&&a!==t)return this.highlightItem(a),
void a.scrollIntoViewIfNeeded()}},highlightNextItem:function(){var t=void 0!==arguments[0]?arguments[0]:null,e=this.items;
if(null===t&&(t=e.find(function(t){return t.highlighted===!0})),t)for(var n=e.indexOf(t)+1;n<e.length;n+=1){
var i=e[n];if(i.disabled===!1&&i.hidden===!1&&"bx-menuitem"===i.localName)return this.highlightItem(i),
void i.scrollIntoViewIfNeeded()}for(var r=0;r<e.length;r+=1){var a=e[r];if(a.disabled===!1&&a.hidden===!1&&"bx-menuitem"===a.localName&&a!==t)return this.highlightItem(a),
void a.scrollIntoViewIfNeeded()}},_onMouseMove:function(t){this._mouseLocs.push({
x:t.pageX,y:t.pageY}),this._mouseLocs.length>3&&this._mouseLocs.shift()},_onMouseOver:function(t){
t.target===this||t.target.parentElement===this||this.items.includes(t.target)?(this._mouseInsideMenuBlock===!1&&(this._mouseInsideMenuBlock=!0),
"bx-menuitem"===t.target.localName&&this._onMenuItemMouseEnter(t.target)):this._mouseInsideMenuBlock===!0&&(this._mouseInsideMenuBlock=!1,
this._onMenuBlockMouseLeave())},_onMouseOut:function(t){(!t.toElement||t.toElement!==this&&!this.items.includes(t.toElement))&&this._mouseInsideMenuBlock===!0&&(this._mouseInsideMenuBlock=!1,
this._onMenuBlockMouseLeave())},_onClick:function(t){if(0===t.button&&"bx-menuitem"===t.target.localName&&(t.target.parentElement===this||this.items.includes(t.target))){
var e=t.target;this.triggerItem(e)}},_onMenuItemMouseEnter:function(t){this._timeoutID&&clearTimeout(this._timeoutID),
this._highlightItemWithDelay(t)},_onMenuBlockMouseLeave:function(){this._timeoutID&&clearTimeout(this._timeoutID);
var t=this.items.find(function(t){return t.highlighted===!0});if(t){var e=t.children[0];
e&&e.opened!==!1||(t.highlighted=!1)}},_highlightItemWithDelay:function(t){var e=this,n=this._getHighlightDelay();
n?this._timeoutID=setTimeout(function(){e._highlightItemWithDelay(t)},n):this.highlightItem(t);
},_getHighlightDelay:function(){var t="right",e=this._mouseLocs[this._mouseLocs.length-1],r=this._mouseLocs[0];
if(!this._openedSubmenu)return 0;if(!e)return 0;r||(r=e);var a=this.getBoundingClientRect(),s={
x:a.left,y:a.top-n},o={x:a.left+a.width,y:s.y},l={x:a.left,y:a.top+a.height+n},u={
x:a.left+a.width,y:l.y};if(r.x<a.left||r.x>u.x||r.y<a.top||r.y>u.y)return 0;if(this._lastDelayLoc&&e.x==this._lastDelayLoc.x&&e.y==this._lastDelayLoc.y)return 0;
var c=o,d=u;"left"==t?(c=l,d=s):"below"==t?(c=u,d=l):"above"==t&&(c=s,d=o);var h=function(t,e){
return(e.y-t.y)/(e.x-t.x)},v=h(e,c),f=h(e,d),m=h(r,c),g=h(r,d);return m>v&&f>g?(this._lastDelayLoc=e,
i):(this._lastDelayLoc=null,0)}},{},t)}(HTMLElement),s=t("bx-menu",a);return{get default(){
return s}}}),System.registerModule("elements/bx-menuitem",[],function(){"use strict";
var t=System.get("utils/dom").registerElement,e=System.get("classes/shortcut")["default"],n="images/icons.svg#arrow-right",i="images/icons.svg#circle",r="images/icons.svg#check-mark",a='\n<style>@import url("stylesheets/bx-menuitem.css");</style>\n\n<main>\n  <div id="state-icons">\n    <svg class="icon" id="selected-state-icon" viewBox="0 0 100 100" hidden>\n      <use xlink:href="'+i+'" width="100" height="100"></use>\n    </svg>\n\n    <svg class="icon" id="toggled-state-icon" viewBox="0 0 100 100" hidden>\n      <use xlink:href="'+r+'" width="100" height="100"></use>\n    </svg>\n  </div>\n\n  <div id="label"></div>\n  <div id="shortcut"></div>\n  <svg id="arrow-icon" viewBox="0 0 100 100"><use xlink:href="'+n+'" width="100" height="100"></use></svg>\n</main>\n\n<content select="bx-menu"></content>\n',s=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=a;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){e=!0,n=o}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._onLabelChange(),this._onStateChange(),this._onShortcutChange();
},attributeChangedCallback:function(t,e,n){e!==n&&("label"===t?this._onLabelChange():"state"===t?this._onStateChange():("shortcut"===t||"usershortcut"===t)&&this._onShortcutChange());
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(t){
this.setAttribute("label",t)},get state(){return this.hasAttribute("state")?this.getAttribute("state"):null;
},set state(t){null===t?this.removeAttribute("state"):this.setAttribute("state",t);
},get commandID(){return this.hasAttribute("commandid")?this.getAttribute("commandid"):"";
},set commandID(t){this.setAttribute("commandid",t)},get shortcut(){return this.hasAttribute("shortcut")?e.fromString(this.getAttribute("shortcut")):null;
},set shortcut(t){null===t?this.removeAttribute("shortcut"):this.setAttribute("shortcut",t.toString());
},get userShortcut(){return this.hasAttribute("usershortcut")?e.fromString(this.getAttribute("usershortcut")):null;
},set userShortcut(t){null===t?this.removeAttribute("usershortcut"):this.setAttribute("usershortcut",t.toString());
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},_onLabelChange:function(){this["#label"].textContent=this.label},_onStateChange:function(){
"selected"===this.state?(this["#selected-state-icon"].removeAttribute("hidden"),this["#toggled-state-icon"].setAttribute("hidden","")):"toggled"===this.state?(this["#selected-state-icon"].setAttribute("hidden",""),
this["#toggled-state-icon"].removeAttribute("hidden")):(this["#selected-state-icon"].setAttribute("hidden",""),
this["#toggled-state-icon"].setAttribute("hidden",""))},_onShortcutChange:function(){
var t=this.userShortcut||this.shortcut||null;t?this["#shortcut"].textContent=t.toDisplayString():this["#shortcut"].textContent="";
}},{},t)}(HTMLElement),o=t("bx-menuitem",s);return{get default(){return o}}}),System.registerModule("elements/bx-outlineshud",[],function(){
"use strict";var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/dom"),n=e.createElement,i=e.registerElement,r=System.get("utils/path"),a=(r.ellipseToPath,
r.rectToPath),s=System.get("utils/relationship").getGraphicsElements,o=System.get("utils/time").throttle,l=System.get("utils/transform").getTransformToElement,u='\n  <style>@import url("stylesheets/bx-outlineshud.css");</style>\n  <g id="outlines"></g>\n',c=function(e){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=u;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._updateOutlines_30ms=o(this._updateOutlines,30,this)},
enabledCallback:function(){var t=this;this._updateOutlines(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(){
t._onContentMutation()})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._updateOutlines()},_onContentMutation:function(){
this._updateOutlines_30ms()},_updateOutlines:function(){this["#outlines"].innerHTML="";
var e=!1,i=!0,r=!1,o=void 0;try{for(var u=void 0,c=s(body.canvas.selectedElements,!0)[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){
var d=u.value,h=l(d,this),v=null;if("path"===d.localName)v=n("svg:path"),d.hasAttribute("d")&&v.setAttribute("d",d.getAttribute("d"));else if("rect"===d.localName)v=a(d,!1);else{
var f=t(d);v=n("svg:path"),v.setAttribute("d","\n          M "+f.x+" "+f.y+"\n          L "+(f.x+f.width)+" "+f.y+"\n          L "+(f.x+f.width)+" "+(f.y+f.height)+"\n          L "+f.x+" "+(f.y+f.height)+"\n          L "+f.x+" "+f.y+"\n        ");
}body.canvas.selectedElements.includes(d)===!1&&v.setAttribute("data-container",""),
v.setAttribute("class","outline"),v.setAttribute("transform",h.toString()),e===!1&&(e=!0,
v.setAttribute("data-primary","")),this["#outlines"].append(v)}}catch(m){r=!0,o=m;
}finally{try{i||null==c["return"]||c["return"]()}finally{if(r)throw o}}}},{},e)}(SVGGElement),d=i("g","bx-outlineshud",c);
return{get default(){return d}}}),System.registerModule("elements/bx-paintsection",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-colorpicker"),
System.get("elements/bx-select");var t=System.get("classes/color")["default"],e=System.get("utils/artwork").getPatternThumbnails,n=System.get("utils/bbox").getUserBBox,i=System.get("utils/color").parseColor,r=System.get("utils/dom"),a=(r.closest,
r.createElement),s=r.registerElement,o=r.parseSVG,l=System.get("utils/paint"),u=l.getPaintType,c=l.getPaintServer,d=l.getDefFromURL,h=l.isMixedPaint,v=System.get("utils/relationship").queryStylableElements,f=System.get("utils/text").normalizeTextInRangeBeforeEditing,m=System.get("utils/time"),g=m.debounce,b=m.throttle,p=System.get("utils/pattern"),y=p.centerPattern,_=p.getComputedPatternProperties,x=p.getClosestBasePattern,w=p.getParentPattern,S=p.isDerivedPattern,C="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",E='\n<style>@import url("stylesheets/bx-paintsection.css");</style>\n\n<main>\n  <header id="section-header">\n    <h2 id="section-heading">Paint</h2>\n  </header>\n\n  <section id="paint-type-subsection">\n    <h3 id="paint-type-heading">Type</h3>\n\n    <div id="paint-type-buttons">\n      <bx-button\n        id="solid-paint-button"\n        value="solid"\n        tooltip="Solid Color"\n        icon="paint-solid"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="linear-gradient-paint-button"\n        value="linear-gradient"\n        tooltip="Linear Gradient"\n        icon="paint-linear-gradient"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="radial-gradient-paint-button"\n        value="radial-gradient"\n        tooltip="Radial Gradient"\n        icon="paint-radial-gradient"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="pattern-paint-button"\n        value="pattern"\n        tooltip="Pattern"\n        icon="paint-pattern"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="none-paint-button"\n        value="none"\n        tooltip="None"\n        icon="paint-none"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="inherit-paint-button"\n        value="inherit"\n        tooltip="Inherit"\n        icon="paint-inherit"\n        iconsize="30"\n        hidden\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="spread-method-subsection">\n    <h3>Spread</h3>\n\n    <div id="spread-method-buttons">\n      <bx-button\n        id="pad-spread-method-button"\n        value="pad"\n        tooltip="Pad spread method"\n        icon="spread-method-pad"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="repeat-spread-method-button"\n        value="repeat"\n        tooltip="Repeat spread method"\n        icon="spread-method-repeat"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="reflect-spread-method-button"\n        value="reflect"\n        tooltip="Reflect spread method"\n        icon="spread-method-reflect"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="color-subsection">\n    <h3>Color</h3>\n    <bx-colorpicker id="color-picker"></bx-colorpicker>\n    <p id="color-picker-hint"></p>\n  </section>\n\n  <section id="pattern-subsection">\n    <h3>Pattern</h3>\n\n    <div class="hbox">\n      <bx-select id="pattern-select" value="pattern-0">\n        <bx-selectitem value="pattern-0" label="#pattern-0"></bx-selectitem>\n        <bx-selectitem value="pattern-1" label="#pattern-1"></bx-selectitem>\n        <bx-selectitem value="pattern-2" label="#pattern-2"></bx-selectitem>\n      </bx-select>\n\n      <bx-button\n        id="edit-pattern-button"\n        tooltip="Edit pattern"\n        icon="forward"\n        iconsize="22"\n        skin="iconic">\n      </bx-button>\n    </div>\n\n    <div id="pattern-select-hint">Add more patterns in <span id="defs-panel-span">Defs Panel</span>.</div>\n  </section>\n</main>\n',k=function(r){
function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)}return $traceurRuntime.createClass(s,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=E;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._update200th=b(this._update,200,this),this._update1000th=b(this._update,1e3,this),
this._updatePatternThumbnails2000db=g(this._updatePatternThumbnails,2e3,this),"fill"===this.context?(this._linearGradientHud=body.canvas.linearGradientFillHud,
this._radialGradientHud=body.canvas.radialGradientFillHud):"stroke"===this.context&&(this._linearGradientHud=body.canvas.linearGradientStrokeHud,
this._radialGradientHud=body.canvas.radialGradientStrokeHud),this["#paint-type-buttons"].addEventListener("click",function(e){
t._onPaintTypeButtonsClick(e)}),this["#spread-method-buttons"].addEventListener("click",function(e){
t._onSpreadMethodButtonsClick(e)}),this["#color-picker"].addEventListener("changestart",function(e){
t._onColorPickerColorChangeStart(e)}),this["#color-picker-hint"].addEventListener("click",function(e){
t._onColorPickerHintClick(e)}),this["#pattern-select"].addEventListener("change",function(){
t._onPatternSelectChange()}),this["#pattern-select-hint"].addEventListener("click",function(e){
t._onPatternSelectHintClick(e)}),this["#edit-pattern-button"].addEventListener("click",function(e){
t._onEditPatternButtonClick(e)})},enabledCallback:function(){var t=this;body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),body.canvas.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){
t._onCurrentArtboardChange()}),this._linearGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener1=function(){
t._onSelectedElementsChange()}),this._radialGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener2=function(){
t._onSelectedElementsChange()}),this._onCurrentArtboardChange(),this._onSelectedElementsChange();
},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),
this._linearGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener1),
this._radialGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener2);
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},set context(t){if("fill"!==t&&"stroke"!==t)throw new Error("Invalid context value");
this.setAttribute("context",t)},_onContentMutation:function(t){this._update200th();
},_onSelectedElementsChange:function(){this._update200th()},_onSelectedTextRangeChange:function(){
this._update()},_onCurrentArtboardChange:function(){var t=body.canvas.currentArtboard.contentType;
"symbol"===t?this["#inherit-paint-button"].hidden=!1:this["#inherit-paint-button"].hidden=!0;
},_onPaintTypeButtonsClick:function(t){var e=t.target,n=e.value,i=(e.localName,e.pressed),r=e.mixed;
"bx-button"===t.target.localName&&(i!==!0||r!==!1)&&("solid"===n?this._onSolidPaintButtonClick():"linear-gradient"===n?this._onLinearGradientPaintButtonClick():"radial-gradient"===n?this._onRadialGradientPaintButtonClick():"pattern"===n?this._onPatternPaintButtonClick():"inherit"===n?this._onInheritPaintButtonClick():"none"===n&&this._onNonePaintButtonClick());
},_onSolidPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Paint type");
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;f(n);var r,a=v(this.context,e,n),s=a[0]||null,o=u(s,this.context);
if("solid"===o)r=getComputedStyle(s)[this.context];else if("linearGradient"===o||"radialGradient"===o){
var l=c(s,this.context),d=l.children[0],h=d.style.stopColor,m=i(h,"hsla");r=m.toString("hsl");
}else r="#bada55";var g=!0,b=!1,p=void 0;try{for(var y=void 0,_=a[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){
var x=y.value;x.style[this.context]=r}}catch(w){b=!0,p=w}finally{try{g||null==_["return"]||_["return"]();
}finally{if(b)throw p}}},_onLinearGradientPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Change paint type");
var e=body.canvas,r=e.selectedElements,s=e.selectedTextRange;f(s);var l,c=v(this.context,r,s),h=c[0]||null,m=u(h,this.context);
if("solid"===m){var g=getComputedStyle(h)[this.context],b=i(g,"hsla"),p=b.l-20;0>p&&(p=0),
l=a("svg:linearGradient");var y=a("svg:stop");y.offset.baseVal=0,y.style.stopColor=b.toString("hsl"),
1!==b.a&&(y.style.stopOpacity=b.a),l.append(y);var _=a("svg:stop");_.offset.baseVal=1;
var x=new t(b.h,b.s,p,1,"hsla");_.style.stopColor=x.toString("hsl"),l.append(_)}else if("linearGradient"===m){
var w=getComputedStyle(h)[this.context];l=d(body.canvas.masterArtboard,w)}else if("radialGradient"===m){
var S=getComputedStyle(h)[this.context],C=d(body.canvas.masterArtboard,S);l=a("svg:linearGradient"),
l.innerHTML=C.innerHTML}else l=o('\n        <linearGradient>\n          <stop offset="0" style="stop-color: #bada55"></stop>\n          <stop offset="1" style="stop-color: #758d29"></stop>\n        </linearGradient>\n      ');
var E=null,k=!0,A=!1,L=void 0;try{for(var M=void 0,j=c[Symbol.iterator]();!(k=(M=j.next()).done);k=!0){
var T=M.value;if("tspan"===T.localName&&E&&E.closest("text")===T.closest("text"))T.style[this.context]=E.style[this.context];else if("use"===T.localName){
var P=l.cloneNode(!0);P.setAttribute("id",body.canvas.generateUniqueID("gradient")),
P.setAttribute("gradientUnits","objectBoundingBox"),P.setAttribute("x1","0.5"),P.setAttribute("y1","0"),
P.setAttribute("x2","0.5"),P.setAttribute("y2","1"),body.canvas.defs.append(P),T.style[this.context]="url(#"+P.id+")";
}else{var R=n(T),O=l.cloneNode(!0);O.setAttribute("id",body.canvas.generateUniqueID("gradient")),
O.setAttribute("gradientUnits","userSpaceOnUse"),O.setAttribute("x1",R.x+R.width/2),
O.setAttribute("y1",R.y),O.setAttribute("x2",R.x+R.width/2),O.setAttribute("y2",R.y+R.height),
body.canvas.defs.append(O),T.style[this.context]="url(#"+O.id+")"}"tspan"===T.localName&&(E=T);
}}catch(I){A=!0,L=I}finally{try{k||null==j["return"]||j["return"]()}finally{if(A)throw L;
}}},_onRadialGradientPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Change paint type");
var e=body.canvas,r=e.selectedElements,s=e.selectedTextRange;f(s);var l,c=v(this.context,r,s),h=c[0]||null,m=u(h,this.context);
if("solid"===m){var g=getComputedStyle(h)[this.context],b=i(g,"hsla"),p=b.l-20;0>p&&(p=0),
l=a("svg:radialGradient");var y=a("svg:stop");y.offset.baseVal=0,y.style.stopColor=b.toString("hsl"),
1!==b.a&&(y.style.stopOpacity=b.a),l.append(y);var _=a("svg:stop");_.offset.baseVal=1;
var x=new t(b.h,b.s,p,1,"hsla");_.style.stopColor=x.toString("hsl"),l.append(_)}else if("linearGradient"===m){
var w=getComputedStyle(h)[this.context],S=d(body.canvas.masterArtboard,w);l=a("svg:radialGradient"),
l.innerHTML=S.innerHTML}else if("radialGradient"===m){var C=getComputedStyle(h)[this.context];
l=d(body.canvas.masterArtboard,C)}else l=o('\n        <radialGradient>\n          <stop offset="0" style="stop-color: #bada55"></stop>\n          <stop offset="1" style="stop-color: #758d29"></stop>\n        </radialGradient>\n      ');
var E=null,k=!0,A=!1,L=void 0;try{for(var M=void 0,j=c[Symbol.iterator]();!(k=(M=j.next()).done);k=!0){
var T=M.value;if("tspan"===T.localName&&E&&E.closest("text")===T.closest("text"))T.style[this.context]=E.style[this.context];else if("use"===T.localName){
var P=l.cloneNode(!0);P.setAttribute("id",body.canvas.generateUniqueID("gradient")),
P.setAttribute("gradientUnits","objectBoundingBox"),P.setAttribute("cx","0.5"),P.setAttribute("cy","0.5"),
P.setAttribute("r","0.5"),body.canvas.defs.append(P),T.style[this.context]="url(#"+P.id+")";
}else{var R=n(T),O=l.cloneNode(!0);O.setAttribute("id",body.canvas.generateUniqueID("gradient")),
O.setAttribute("gradientUnits","userSpaceOnUse"),O.setAttribute("cx",R.x+R.width/2),
O.setAttribute("cy",R.y+R.height/2),O.setAttribute("r",R.width/2),body.canvas.defs.append(O),
T.style[this.context]="url(#"+O.id+")"}"tspan"===T.localName&&(E=T)}}catch(I){A=!0,
L=I}finally{try{k||null==j["return"]||j["return"]()}finally{if(A)throw L}}},_onPatternPaintButtonClick:function(){
body.canvas.undoManager.checkpoint("Paint type");var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;
f(n);var i=v(this.context,e,n),r=i[0]||null,s=u(r,this.context),l=null,c=$traceurRuntime.spread(i);
if("pattern"===s){var h=getComputedStyle(r)[this.context],m=d(body.canvas.masterArtboard,h);
l=S(m)===!1?m:w(m),c=c.filter(function(t){return t!==r})}if(!l){var g=$traceurRuntime.spread(body.canvas.masterArtboard.querySelectorAll("pattern"));
l=g.find(function(t){var e=_(t),n=e.width,i=e.height;return S(t)===!1&&0!==n.valueInSpecifiedUnits&&0!==i.valueInSpecifiedUnits;
})}if(!l){var b=body.canvas.generateUniqueID("pattern");l=o('\n        <pattern id="'+b+'" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse" viewBox="0 0 100 100">\n          <path d="M 0 0 L 50 0 L 50 100 L 0 100 Z" style="fill: black;"></path>\n        </pattern>\n      '),
body.canvas.defs.append(l)}var p=!0,x=!1,C=void 0;try{for(var E=void 0,k=c[Symbol.iterator]();!(p=(E=k.next()).done);p=!0){
var A=E.value,L=a("svg:pattern");L.setAttribute("id",body.canvas.generateUniqueID(l.id)),
L.setAttribute("href","#"+l.id),L.setAttribute("patternTransform",""),body.canvas.defs.append(L),
A.style[this.context]="url(#"+L.id+")",y(L,A)}}catch(M){x=!0,C=M}finally{try{p||null==k["return"]||k["return"]();
}finally{if(x)throw C}}},_onInheritPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Paint type");
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;f(n);var i=v(this.context,e,n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
u.style[this.context]="inherit"}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}},_onNonePaintButtonClick:function(){body.canvas.undoManager.checkpoint("Paint type");
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;f(n);var i=v(this.context,e,n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
u.style[this.context]="none"}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}},_onSpreadMethodButtonsClick:function(t){var e=t.target,n=e.pressed,i=e.mixed,r=e.value;
if("bx-button"===t.target.localName&&0===t.button&&(n!==!0||i!==!1)){body.canvas.undoManager.checkpoint("Spread Method");
var a=body.canvas,s=a.selectedElements,o=a.selectedTextRange,l=v(this.context,s,o),d=!0,h=!1,f=void 0;
try{for(var m=void 0,g=l[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var b=m.value,p=u(b,this.context);
if("linearGradient"===p||"radialGradient"===p){var y=c(b,this.context);y.setAttribute("spreadMethod",r);
}}}catch(_){h=!0,f=_}finally{try{d||null==g["return"]||g["return"]()}finally{if(h)throw f;
}}}},_onColorPickerColorChangeStart:function(t){var e=this;body.canvas.undoManager.checkpoint("Change Color");
var n=body.canvas,i=n.selectedElements,r=n.selectedTextRange;f(r);var a,s,o,l=v(this.context,i,r),d=l[0]||null,h=u(d,this.context);
if("solid"===h)o=getComputedStyle(d)[this.context];else if("linearGradient"===h||"radialGradient"===h){
var m=c(d,this.context),g=m.children[0];o=g.style.stopColor}else o="#bada55";var b=!0,p=!1,y=void 0;
try{for(var _=void 0,x=l[Symbol.iterator]();!(b=(_=x.next()).done);b=!0){var w=_.value;
w!==d&&"solid"===h&&(w.style[this.context]=o)}}catch(S){p=!0,y=S}finally{try{b||null==x["return"]||x["return"]();
}finally{if(p)throw y}}this["#color-picker"].addEventListener("change",a=function(){
var t=!0,n=!1,i=void 0;try{for(var r,a,s,o,d,h,v=function(){var t=f.value,n=u(t,e.context);
if("solid"===n)t.style[e.context]=e["#color-picker"].color;else if("linearGradient"===n){
var i=c(t,e.context),l=e._linearGradientHud.selectedStops.filter(function(t){return t.parentElement===i;
});r=!0,a=!1,s=void 0;try{for(var v=void 0,m=l[Symbol.iterator]();!(r=(v=m.next()).done);r=!0){
var g=v.value;g.style.stopColor=e["#color-picker"].color}}catch(b){a=!0,s=b}finally{
try{r||null==m["return"]||m["return"]()}finally{if(a)throw s}}}else if("radialGradient"===n){
var p=c(t,e.context),y=e._radialGradientHud.selectedStops.filter(function(t){return t.parentElement===p;
});o=!0,d=!1,h=void 0;try{for(var _=void 0,x=y[Symbol.iterator]();!(o=(_=x.next()).done);o=!0){
var w=_.value;w.style.stopColor=e["#color-picker"].color}}catch(S){d=!0,h=S}finally{
try{o||null==x["return"]||x["return"]()}finally{if(d)throw h}}}},f=void 0,m=l[Symbol.iterator]();!(t=(f=m.next()).done);t=!0)v();
}catch(g){n=!0,i=g}finally{try{t||null==m["return"]||m["return"]()}finally{if(n)throw i;
}}}),this["#color-picker"].addEventListener("changeend",s=function(){e["#color-picker"].removeEventListener("change",a),
e["#color-picker"].removeEventListener("changeend",s)})},_onColorPickerHintClick:function(t){
0===t.button&&"edit-tool-span"===t.target.id&&body.toggleTool("edit-tool")},_onPatternSelectChange:function(){
body.canvas.undoManager.checkpoint("Pattern");var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;
f(n);var i=v(this.context,e,n),r=this["#pattern-select"].value,s=body.canvas.masterArtboard.querySelector("#"+r),o=!0,l=!1,c=void 0;
try{for(var h=void 0,m=i[Symbol.iterator]();!(o=(h=m.next()).done);o=!0){var g=h.value,b=u(g,this.context);
if("pattern"===b){var p=getComputedStyle(g)[this.context],_=d(body.canvas.masterArtboard,p),w=x(_);
if(w===s)continue}var S=a("svg:pattern");S.setAttribute("id",body.canvas.generateUniqueID(s.id)),
S.setAttribute("href","#"+s.id),S.setAttribute("patternTransform",""),body.canvas.defs.append(S),
g.style[this.context]="url(#"+S.id+")",y(S,g)}}catch(C){l=!0,c=C}finally{try{o||null==m["return"]||m["return"]();
}finally{if(l)throw c}}},_onPatternSelectHintClick:function(t){0===t.button&&"defs-panel-span"===t.target.id&&body.togglePanel("defs-panel");
},_onEditPatternButtonClick:function(t){0===t.button&&body.canvas.editPattern(this["#pattern-select"].value);
},_update:function(){var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;
this._selectedStylableElements=v(this.context,e,n),this._updateHeader(),this._updatePaintTypeSubsection(),
this._updateSpreadMethodSubsection(),this._updateColorSubsection(),this._updatePatternSubsection();
},_updateHeader:function(){var t=this._selectedStylableElements[0]||null;null===t?this["#section-heading"].disabled=!0:this["#section-heading"].disabled=!1;
},_updatePaintTypeSubsection:function(){var t=this._selectedStylableElements,e=t[0]||null;
if(null===e){this["#paint-type-heading"].disabled=!0;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#paint-type-buttons"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.disabled=!0,o.pressed=!1,o.mixed=!1}}catch(l){i=!0,r=l}finally{try{
n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}else{var c=u(e,this.context),d=h(t,this.context);
if(this["#paint-type-heading"].disabled=!1,"solid"===c){var v=!0,f=!1,m=void 0;try{
for(var g=void 0,b=this["#paint-type-buttons"].children[Symbol.iterator]();!(v=(g=b.next()).done);v=!0){
var p=g.value;p.disabled=!1,"solid"===p.value?(p.pressed=!0,p.mixed=d):(p.pressed=!1,
p.mixed=!1)}}catch(y){f=!0,m=y}finally{try{v||null==b["return"]||b["return"]()}finally{
if(f)throw m}}}else if("linearGradient"===c){var _=!0,x=!1,w=void 0;try{for(var S=void 0,C=this["#paint-type-buttons"].children[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value;E.disabled=!1,"linear-gradient"===E.value?(E.pressed=!0,E.mixed=d):(E.pressed=!1,
E.mixed=!1)}}catch(k){x=!0,w=k}finally{try{_||null==C["return"]||C["return"]()}finally{
if(x)throw w}}}else if("radialGradient"===c){var A=!0,L=!1,M=void 0;try{for(var j=void 0,T=this["#paint-type-buttons"].children[Symbol.iterator]();!(A=(j=T.next()).done);A=!0){
var P=j.value;P.disabled=!1,"radial-gradient"===P.value?(P.pressed=!0,P.mixed=d):(P.pressed=!1,
P.mixed=!1)}}catch(R){L=!0,M=R}finally{try{A||null==T["return"]||T["return"]()}finally{
if(L)throw M}}}else if("pattern"===c){var O=!0,I=!1,D=void 0;try{for(var V=void 0,N=this["#paint-type-buttons"].children[Symbol.iterator]();!(O=(V=N.next()).done);O=!0){
var B=V.value;B.disabled=!1,"pattern"===B.value?(B.pressed=!0,B.mixed=d):(B.pressed=!1,
B.mixed=!1)}}catch(z){I=!0,D=z}finally{try{O||null==N["return"]||N["return"]()}finally{
if(I)throw D}}}else if("inherit"===c){var G=!0,U=!1,H=void 0;try{for(var F=void 0,q=this["#paint-type-buttons"].children[Symbol.iterator]();!(G=(F=q.next()).done);G=!0){
var $=F.value;$.disabled=!1,"inherit"===$.value?($.pressed=!0,$.mixed=d):($.pressed=!1,
$.mixed=!1)}}catch(Y){U=!0,H=Y}finally{try{G||null==q["return"]||q["return"]()}finally{
if(U)throw H}}}else if("none"===c){var X=!0,W=!1,Z=void 0;try{for(var K=void 0,J=this["#paint-type-buttons"].children[Symbol.iterator]();!(X=(K=J.next()).done);X=!0){
var Q=K.value;Q.disabled=!1,"none"===Q.value?(Q.pressed=!0,Q.mixed=d):(Q.pressed=!1,
Q.mixed=!1)}}catch(tt){W=!0,Z=tt}finally{try{X||null==J["return"]||J["return"]()}finally{
if(W)throw Z}}}}},_updateSpreadMethodSubsection:function(){var t=this._selectedStylableElements,e=t[0]||null;
if(null===e)this["#spread-method-subsection"].hidden=!0;else{var n=u(e,this.context);
if("linearGradient"===n||"radialGradient"===n){this["#spread-method-subsection"].hidden=!1;
var i=c(e,this.context),r=!1,a=!0,s=!1,o=void 0;try{for(var l=void 0,d=t[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){
var h=l.value,v=c(h,this.context);v&&v.localName.endsWith("Gradient")&&v.spreadMethod.baseVal!==i.spreadMethod.baseVal&&(r=!0);
}}catch(f){s=!0,o=f}finally{try{a||null==d["return"]||d["return"]()}finally{if(s)throw o;
}}i.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REPEAT?(this["#repeat-spread-method-button"].pressed=!0,
this["#repeat-spread-method-button"].mixed=r,this["#pad-spread-method-button"].pressed=!1,
this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].pressed=!1,
this["#reflect-spread-method-button"].mixed=!1):i.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_PAD?(this["#repeat-spread-method-button"].pressed=!1,
this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].pressed=!0,
this["#pad-spread-method-button"].mixed=r,this["#reflect-spread-method-button"].pressed=!1,
this["#reflect-spread-method-button"].mixed=!1):i.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REFLECT&&(this["#repeat-spread-method-button"].pressed=!1,
this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].pressed=!1,
this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].pressed=!0,
this["#reflect-spread-method-button"].mixed=r)}else this["#spread-method-subsection"].hidden=!0;
}},_updateColorSubsection:function(){var t=this._selectedStylableElements,e=t[0]||null;
if(null===e)this["#color-subsection"].hidden=!0;else{var n=u(e,this.context),i=h(t,this.context);
if("solid"===n)this["#color-subsection"].hidden=!1,this["#color-picker"].hidden=!1,
this["#color-picker"].color=getComputedStyle(e)[this.context],this["#color-picker"].mixed=i,
this["#color-picker-hint"].innerHTML="";else if("linearGradient"===n||"radialGradient"===n){
var r=this["_"+n+"Hud"].selectedStops;this["#color-subsection"].hidden=!1,this["#color-picker"].mixed=i,
0===r.length?(this["#color-picker"].hidden=!0,this["#color-picker-hint"].innerHTML='Select stop with <span id="edit-tool-span">Edit Tool</span>.'):(this["#color-picker"].hidden=!1,
this["#color-picker"].color=r[0].style.stopColor,this["#color-picker-hint"].innerHTML="");
}else this["#color-subsection"].hidden=!0}},_updatePatternSubsection:function(){var t=this._selectedStylableElements,e=t[0]||null;
if(null===e||"pattern"!==u(e,this.context))this["#pattern-subsection"].hidden=!0;else{
this["#pattern-subsection"].hidden=!1,this["#pattern-select"].mixed=h(t,this.context);
var n=$traceurRuntime.spread(body.canvas.masterArtboard.querySelectorAll("pattern"));
if(n=n.filter(function(t){return S(t)===!1}),this["#pattern-select"].childElementCount===n.length)for(var i=0;i<n.length;i+=1){
var r=n[i],s=this["#pattern-select"].children[i];s.label="#"+r.id,s.value=r.id}else{
this["#pattern-select"].innerHTML="";var o=!0,l=!1,d=void 0;try{for(var v=void 0,f=n[Symbol.iterator]();!(o=(v=f.next()).done);o=!0){
var m=v.value,g=a("bx-selectitem");g.label="#"+m.id,g.value=m.id,g.thumbnail=C,this["#pattern-select"].append(g);
}}catch(b){l=!0,d=b}finally{try{o||null==f["return"]||f["return"]()}finally{if(l)throw d;
}}}var p=c(e,this.context),y=x(p);this["#pattern-select"].value=y.id,this._updatedPatternThumbnailsForFirstTime?this._updatePatternThumbnails2000db():(this._updatedPatternThumbnailsForFirstTime=!0,
this._updatePatternThumbnails())}},_updatePatternThumbnails:function(){var t=this,n=body.canvas.extractArtwork();
e(n,function(e,n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t["#pattern-select"].children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.value===e&&(l.thumbnail=n)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}})}},{},r)}(HTMLElement),A=s("section","bx-paintsection",k);
return{get default(){return A}}}),System.registerModule("elements/bx-panel",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e=(System.get("utils/math").normalize,
System.get("utils/time").sleep),n=Number.parseFloat,i=5,r=7,a=5,s=7,o=!1,l='\n<style>\n  @import url("stylesheets/bx-panel.css");\n  @import url("stylesheets/scrollbars.css");\n</style>\n\n<div id="container">\n  <header>\n    <h1 id="heading">Panel</h1>\n\n    <svg id="help-icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n      <use xlink:href="images/icons.svg#help" width="100" height="100"></use>\n    </svg>\n  </header>\n\n  <main>\n    <content></content>\n  </main>\n\n  <div id="resize-grippies">\n    <div class="grippie edge" data-position="top"></div>\n    <div class="grippie edge" data-position="bottom"></div>\n    <div class="grippie edge" data-position="left"></div>\n    <div class="grippie edge" data-position="right"></div>\n    <div class="grippie corner" data-position="top-left"></div>\n    <div class="grippie corner" data-position="top-right"></div>\n    <div class="grippie corner" data-position="bottom-left"></div>\n    <div class="grippie corner" data-position="bottom-right"></div>\n  </div>\n</div>\n',u=function(t){
function u(){$traceurRuntime.superConstructor(u).apply(this,arguments)}return $traceurRuntime.createClass(u,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=l;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(u){n=!0,i=u}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._prefferedWidth=null,this._prefferedHeight=null,this._onLabelChange(),
this._onHelpChange(),o&&this.setAttribute("debug",""),this.addEventListener("mouseenter",function(){
t._defaultCursor=body.registerCursor("default",-100)}),this.addEventListener("mouseleave",function(){
body.unregisterCursor(t._defaultCursor)}),this["#resize-grippies"].addEventListener("mousedown",function(e){
t._onResizeGrippieMouseDown(e)}),this["#help-icon"].addEventListener("mousedown",function(e){
t._onHelpIconMouseDown(e)})},enabledCallback:function(){var t=this,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.enabledCallback&&s.enabledCallback()}}catch(o){n=!0,i=o}finally{try{
e||null==a["return"]||a["return"]()}finally{if(n)throw i}}body.getConfig("bx-panel#"+this.id+":size").then(function(e){
var n,i;if(e){var r=e,a=(n=r[Symbol.iterator](),(i=n.next()).done?void 0:i.value),s=(i=n.next()).done?void 0:i.value;
t._prefferedWidth=a,t._prefferedHeight=s,t.updateSizing()}}),this.updateSizing(),
window.addEventListener("resize",this._windowResizeListener=function(){t._onWindowResize();
})},disabledCallback:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.disabledCallback&&a.disabledCallback()}}catch(s){e=!0,n=s}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}window.removeEventListener("resize",this._windowResizeListener);
},attributeChangedCallback:function(t,e,n){e!==n&&("label"===t?this._onLabelChange():"help"===t&&this._onHelpChange());
},get label(){return this.getAttribute("label")},set label(t){t?this.setAttribute("label",t):this.removeAttribute("label");
},get help(){return this.getAttribute("help")},set help(t){t?this.setAttribute("help",t):this.removeAttribute("help");
},get button(){for(var t=this.parentNode;t.parentNode;)t=t.parentNode;return t?t.querySelector('bx-button[href="#'+this.id+'"]'):null;
},_onLabelChange:function(){this["#heading"].textContent=this.label},_onHelpChange:function(){
this.help?this["#help-icon"].removeAttribute("hidden"):this["#help-icon"].setAttribute("hidden","");
},_onWindowResize:function(){this.updateSizing()},_onResizeGrippieMouseDown:function(t){
var o,l,u=this,c=t.target.dataset.position,d=this.button.getBoundingClientRect(),h=this.getBoundingClientRect(),v=getComputedStyle(this),f=h.left,m=h.top,g=h.width,b=h.height,p=f,y=m,_=g,x=b,w="none"===v.minWidth?0:n(v.minWidth),S="none"===v.minHeight?0:n(v.minHeight),C="none"===v.maxWidth?1/0:n(v.maxWidth),E="none"===v.maxHeight?1/0:n(v.maxHeight),k=null;
"top"===c||"bottom"===c?k="ns-resize":"left"===c||"right"===c?k="ew-resize":"top-left"===c?k="nwse-resize":"top-right"===c?k="nesw-resize":"bottom-left"===c?k="nesw-resize":"bottom-right"===c&&(k="nwse-resize");
var A=body.registerCursor(k,900);window.addEventListener("mousemove",o=function(e){
var n=e.clientX-t.clientX,o=e.clientY-t.clientY,l=function(){g=w>_+n?w:_+n>C?C:_+n,
p+g+s>window.innerWidth&&(g=window.innerWidth-p-s),u.style.width=g+"px"},d=function(){
w>_-n?(f=p+(_-w),g=w):_-n>C?(f=p+(_-C),g=C):(f=p+n,g=_-n),a>f&&(f=a,g=p+_-a),u.style.left=f+"px",
u.style.width=g+"px"},h=function(){S>x-o?(m=y+(x-S),b=S):x-o>E?(m=y+(x-E),b=E):(m=y+o,
b=x-o),i>m&&(m=i,b=y+x-i),u.style.top=m+"px",u.style.height=b+"px"},v=function(){
b=S>x+o?S:x+o>E?E:x+o,y+b+r>window.innerHeight&&(b=window.innerHeight-y-r),u.style.height=b+"px";
};"right"===c?l():"left"===c?d():"top"===c?h():"bottom"===c?v():"bottom-right"===c?(v(),
l()):"bottom-left"===c?(v(),d()):"top-left"===c?(h(),d()):"top-right"===c&&(h(),l());
}),window.addEventListener("mouseup",l=function(){window.removeEventListener("mousemove",o),
window.removeEventListener("mouseup",l),body.unregisterCursor(A);var t=d.top+b+r-window.innerHeight;
f=d.right+a+g+s<=window.innerWidth?d.right+s:d.left-s-g,0>=t?m=d.top:d.top-t>=i?m=d.top-t:(m=i,
b=window.innerHeight-i-r),u.style.transition="ease 0.3s all",u.style.left=f+"px",
u.style.top=m+"px",u.style.width=g+"px",u.style.height=b+"px",e(300).then(function(){
return u.style.transition=null}),u._prefferedWidth=g,u._prefferedHeight=b,u.id&&body.setConfig("bx-panel#"+u.id+":size",[g,b]);
})},updateSizing:function(){null!==this._prefferedWidth&&(this.style.width=this._prefferedWidth+"px"),
null!==this._prefferedHeight&&(this.style.height=this._prefferedHeight+"px");var t=this.button.getBoundingClientRect(),e=this.getBoundingClientRect();
if(t.right+a+e.width+s<=window.innerWidth?this.style.left=t.right+a+"px":this.style.left=t.left-s-e.width+"px",
t.top+e.height+r>window.innerHeight){var n=t.top+e.height+r-window.innerHeight;t.top-n<i?(this.style.top=i+"px",
this.style.height=window.innerHeight-i-r+"px"):this.style.top=t.top-n+"px"}else this.style.top=t.top+"px";
},_onHelpIconMouseDown:function(){this.help&&body.bridge.postMessage("openExternalURL",this.help);
}},{},t)}(HTMLElement),c=t("bx-panel",u);return{get default(){return c}}}),System.registerModule("elements/bx-pathfindercontrols",[],function(){
"use strict";System.get("elements/bx-button");var t=System.get("utils/bool"),e=t.getUnionPath,n=t.getDifferencePath,i=t.getIntersectionPath,r=t.getExclusionPath,a=System.get("utils/dom"),s=(a.createElement,
a.registerElement),o=System.get("utils/time").throttle,l='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-pathfindercontrols.css");\n</style>\n\n<section id="boolops-section">\n  <h2 id="clip-section-heading">Bool ops</h2>\n\n  <div class="hbox">\n    <bx-button\n      id="union-button"\n      icon="union"\n      iconsize="25"\n      label="Union">\n    </bx-button>\n\n    <bx-button\n      id="difference-button"\n      icon="difference"\n      iconsize="25"\n      label="Difference">\n    </bx-button>\n  </div>\n\n  <div class="hbox">\n    <bx-button\n      id="intersection-button"\n      icon="intersection"\n      iconsize="25"\n      label="Intersection">\n    </bx-button>\n\n    <bx-button\n      id="exclusion-button"\n      icon="exclusion"\n      iconsize="25"\n      label="Exclusion">\n    </bx-button>\n  </div>\n</section>\n',u=function(t){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=l;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(u){n=!0,i=u}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._update200ms=o(this._update,200,this),this["#union-button"].addEventListener("click",function(e){
return t._onUnionButtonClick(e)}),this["#difference-button"].addEventListener("click",function(e){
return t._onDifferenceButtonClick(e)}),this["#intersection-button"].addEventListener("click",function(e){
return t._onIntersectionButtonClick(e)}),this["#exclusion-button"].addEventListener("click",function(e){
return t._onExclusionButtonClick(e)})},enabledCallback:function(){var t=this;this._update(),
body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._update200ms()},_onContentMutation:function(t){
this._update200ms()},_onUnionButtonClick:function(t){if(0===t.button){body.canvas.undoManager.checkpoint("Union");
var n=e(body.canvas.selectedElements[0],body.canvas.selectedElements[1]),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.remove()}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}body.canvas.currentArtboard.append(n),body.canvas.selectedElements=[n];
}},_onDifferenceButtonClick:function(t){if(0===t.button){body.canvas.undoManager.checkpoint("Difference");
var e=n(body.canvas.selectedElements[0],body.canvas.selectedElements[1]);body.canvas.currentArtboard.append(e);
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.remove()}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}body.canvas.selectedElements=[e]}},_onIntersectionButtonClick:function(t){
if(0===t.button){body.canvas.undoManager.checkpoint("Intersection");var e=i(body.canvas.selectedElements[0],body.canvas.selectedElements[1]);
body.canvas.currentArtboard.append(e);var n=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;l.remove()}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}body.canvas.selectedElements=[e]}},_onExclusionButtonClick:function(t){
if(0===t.button){body.canvas.undoManager.checkpoint("Exclusion");var e=r(body.canvas.selectedElements[0],body.canvas.selectedElements[1]);
body.canvas.currentArtboard.append(e);var n=!0,i=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;l.remove()}}catch(u){i=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw a}}body.canvas.selectedElements=[e]}},_update:function(){this._updateBoolOpsSection();
},_updateBoolOpsSection:function(){}},{},t)}(HTMLElement),c=s("bx-pathfindercontrols",u);
return{get default(){return c}}}),System.registerModule("elements/bx-pathsedithud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.createSVGPoint,i=t.registerElement,r=System.get("utils/event").isMouseMoveIntentional,a=System.get("utils/math").round,s=System.get("utils/point"),o=s.checkCollinearity,l=s.comparePoints,u=System.get("utils/rect").rectContainsRect,c=System.get("utils/time").throttle,d=System.get("utils/transform").getTransformToElement,h=System.get("utils/path"),v=h.getCubicCurveTParam,f=h.getSubpathsData,m=h.getNearestPointOnPath,g=h.harmonizePathData,b=h.splitCurve,p=(System.get("classes/decomposed-transform")["default"],
System.get("classes/enum")["default"]),y=System.get("classes/shortcut")["default"],_=System.get("classes/vector")["default"],x=Math,w=(x.max,
x.pow),S=Number.parseFloat,C=(Object.keys,5),E=4,k='\n  <style>@import url("stylesheets/bx-pathsedithud.css");</style>\n  <g id="outline-grippies"></g>\n  <g id="control-lines"></g>\n  <g id="node-grippies"></g>\n  <g id="control-grippies"></g>\n',A=new p("path","seg","segIndex","selectedSegsIndexes"),L=function(t){
return t.map(function(t){return{type:t.type,values:$traceurRuntime.spread(t.values)
}})},M=function(t,e){var n=[],i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;"C"===u.type||"L"===u.type?i.push(u):"M"===u.type?(i.length>0&&(n.push(i),
i=[]),i.push(u)):"Z"===u.type&&(i.push(u),n.push(i),i=[])}}catch(c){a=!0,s=c}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}return i.length>0&&n.push(i),
n.find(function(e){return e.includes(t)})||null},j=function(t,n){j.cachedPath||(j.cachedPath=e("svg:path"));
for(var i=j.cachedPath,r=[],a=0;a<t.length;a+=1){var s=t[a];r.push(s),i.setPathData(r);
var o=i.getTotalLength();if(o>=n)return a}return t.length-1},T=function(t,e){var i=void 0!==arguments[2]?arguments[2]:2,r="sharp";
if(t&&e&&"C"===t.type&&"C"===e.type){var s=n(t.values[4],t.values[5]),u=n(e.values[0],e.values[1]),c=n(t.values[2],t.values[3]);
if(l(s,u)===!1&&l(s,c)===!1&&o(u,s,c,i)===!0){var d=new _(s,u),h=new _(s,c),v=a(d.length,2),f=a(h.length,2);
r=v===f?"symmetric-smooth":"smooth"}}return r},P=function(t,e){var i=void 0!==arguments[2]?arguments[2]:!1,r=n(e.values[4],e.values[5]),a=n(t.values[0],t.values[1]),s=n(e.values[2],e.values[3]),o=new _(r,a),l=new _(r,s),u=o.getOppositeVector();
i===!1&&(u.length=l.length),e.values[2]=r.x+u.x,e.values[3]=r.y+u.y},R=function(t,e){
var i=void 0!==arguments[2]?arguments[2]:!1,r=n(t.values[4],t.values[5]),a=n(t.values[2],t.values[3]),s=n(e.values[0],e.values[1]),o=new _(r,a),l=new _(r,s),u=o.getOppositeVector();
i===!1&&(u.length=l.length),e.values[0]=r.x+u.x,e.values[1]=r.y+u.y},O=function(t,e,i){
var r;"M"===t.type||"L"===t.type?r=n(t.values[0],t.values[1]):"C"===t.type&&(r=n(t.values[4],t.values[5]));
var a=n(i.values[4],i.values[5]),s=n(e.values[4],e.values[5]),o=new _(s,r),l=new _(s,a),u=o.length/l.length,c=new _(u*l.x-o.x,u*l.y-o.y).normalize();
e.values[2]=s.x+-c.x*(o.length/3),e.values[3]=s.y+-c.y*(o.length/3),i.values[0]=s.x+c.x*(l.length/3),
i.values[1]=s.y+c.y*(l.length/3)},I=function(t){var e,n,i=null,r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
if("L"===u.type){var c=u.values,d=(e=c[Symbol.iterator](),(n=e.next()).done?void 0:n.value),h=(n=e.next()).done?void 0:n.value,v="C"===i.type?i.values[4]:i.values[0],f="C"===i.type?i.values[5]:i.values[1];
u.type="C",u.values=[v,f,d,h,d,h]}i=u}}catch(m){a=!0,s=m}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}},D=function(t){var e,n,i=null,r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if("C"===u.type){var c=u.values,d=(e=c[Symbol.iterator](),(n=e.next()).done?void 0:n.value),h=(n=e.next()).done?void 0:n.value,v=(n=e.next()).done?void 0:n.value,f=(n=e.next()).done?void 0:n.value,m=(n=e.next()).done?void 0:n.value,g=(n=e.next()).done?void 0:n.value,b="C"===i.type?i.values[4]:i.values[0],p="C"===i.type?i.values[5]:i.values[1];
d===b&&h===p&&v===m&&f===g&&(u.type="L",u.values=[m,g])}i=u}}catch(y){a=!0,s=y}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}},V=function(t,e){var n=M(t,e);
return"Z"===n[n.length-1].type},N=function(t){function i(){$traceurRuntime.superConstructor(i).apply(this,arguments);
}return $traceurRuntime.createClass(i,{createdCallback:function(){var t=this;this.commands={
selectAll:{enabled:function(){return!0},exec:function(){return t._selectAllSegs();
}}},this.tabIndex=-1,this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=k;
var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._installed=!1,this._selectedPaths=[],this._draggedNodeGrippie=null,
this._draggedControlGrippie=null,this._draggedOutlineGrippie=null,this._updateOutlineGrippies1500ms=c(this._updateOutlineGrippies,1500,this),
this._updateNodeGrippies40ms=c(this._updateNodeGrippies,40,this),this._updateControlGrippies40ms=c(this._updateControlGrippies,40,this),
this._updateNodeGrippiesSize40ms=c(this._updateNodeGrippiesSize,40,this),this._updateControlGrippiesSize40ms=c(this._updateControlGrippiesSize,40,this),
this._updateOutlineGrippiesSize1500ms=c(this._updateOutlineGrippiesSize,1500,this);
},enabledCallback:function(){var t=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()})},disabledCallback:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},rubberBandSelectionCallback:function(t){var e=body.modKeys.shift,n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=this["#node-grippies"].children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,c=l.getBBox();u(t,c)&&n.push(l)}}catch(d){r=!0,a=d}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var h=!0,v=!1,f=void 0;try{for(var m,g,b,p=function(){var t=y.value,i=n.filter(function(e){
return e[A.path]===t}),r=i.map(function(t){return t[A.segIndex]});if(t[A.selectedSegsIndexes]||(t[A.selectedSegsIndexes]=[]),
e===!1)t[A.selectedSegsIndexes]=r;else{m=!0,g=!1,b=void 0;try{for(var a=void 0,s=r[Symbol.iterator]();!(m=(a=s.next()).done);m=!0){
var o=a.value;t[A.selectedSegsIndexes].includes(o)===!1&&t[A.selectedSegsIndexes].push(o);
}}catch(l){g=!0,b=l}finally{try{m||null==s["return"]||s["return"]()}finally{if(g)throw b;
}}}},y=void 0,_=this._selectedPaths[Symbol.iterator]();!(h=(y=_.next()).done);h=!0)p();
}catch(x){v=!0,f=x}finally{try{h||null==_["return"]||_["return"]()}finally{if(v)throw f;
}}this._updateNodeGrippies40ms(),this._updateControlGrippies40ms(),this._updateOutlineGrippies1500ms(),
n.length>0&&this.focus()},_install:function(){var t=this;this._installed=!0,body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(){
t._onContentMutation()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.content.addEventListener("mousedown",this._contentMouseDownListener=function(e){
t._onCanvasContentMouseDown(e)}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
t._deselectAllSegs()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
t._deselectAllSegs()}),this.addEventListener("keydown",this._keyDownListener=function(e){
t._onKeyDown(e)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(e){
t._onShadowRootMouseDown(e)}),this._shadowRoot.addEventListener("dblclick",this._shadowRootDblClickListener=function(e){
t._onShadowRootDblClick(e)})},_uninstall:function(){this._selectedPaths=[],this._installed=!1,
this["#outline-grippies"].innerHTML="",this["#node-grippies"].innerHTML="",this["#control-grippies"].innerHTML="",
this["#control-lines"].innerHTML="",body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.content.removeEventListener("mousedown",this._contentMouseDownListener),
body.canvas.undoManager.removeEventListener("undo",this._undoListener),body.canvas.undoManager.removeEventListener("redo",this._redoListener),
this.removeEventListener("keydown",this._keyDownListener),this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener),
this._shadowRoot.removeEventListener("dblclick",this._shadowRootDblClickListener);
},_updateOutlineGrippies:function(){if(!(this._draggedOutlineGrippie||this._draggedNodeGrippie||this._draggedControlGrippie)){
var t=document.createDocumentFragment(),n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._selectedPaths[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=d(o,this),u=e("svg:path");u[A.path]=o,u.setAttribute("class","outline-grippie"),
u.setAttribute("transform",l.toString());var c=o.getPathData();u.setPathData(c),t.append(u);
}}catch(h){i=!0,r=h}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}this["#outline-grippies"].innerHTML="",this["#outline-grippies"].append(t),this._updateOutlineGrippiesSize();
}},_updateNodeGrippies:function(){if(!this._draggedOutlineGrippie&&!this._draggedControlGrippie){
var t=document.createDocumentFragment(),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._selectedPaths[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)for(var l=s.value,u=g(l.getPathData({
normalize:!0})),c=d(l,this),h=0;h<u.length;h+=1){var v=u[h],f=void 0;if("C"===v.type)f=n(v.values[4],v.values[5]);else if("L"===v.type)f=n(v.values[0],v.values[1]);else{
if("M"!==v.type||V(v,u)!==!1)continue;f=n(v.values[0],v.values[1])}var m=f.matrixTransform(c),b=e("svg:circle");
b.setAttribute("class","node-grippie"),b.setAttribute("cx",m.x),b.setAttribute("cy",m.y),
b.setAttribute("r",C/body.canvas.scale),b[A.path]=l,b[A.segIndex]=h,t.append(b),l[A.selectedSegsIndexes]&&l[A.selectedSegsIndexes].includes(h)&&b.setAttribute("data-selected","");
}}catch(p){r=!0,a=p}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}this["#node-grippies"].innerHTML="",this["#node-grippies"].append(t)}},_updateControlGrippies:function(){
var t=document.createDocumentFragment(),i=document.createDocumentFragment(),r=new p("cachedPathToHudTransform"),a=!0,s=!1,o=void 0;
try{for(var u=void 0,c=this._selectedPaths[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){
var h=u.value,v=g(h.getPathData({normalize:!0})),f=h[A.selectedSegsIndexes]||[],m=!0,b=!1,y=void 0;
try{for(var _=void 0,x=f[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var w=_.value,S=v[w],C=v[w+1]||null,k=M(S,v)[1],L=v.indexOf(k),j=void 0,T=null,P=null,R=null;
if("M"===S.type||"L"===S.type?j=n(S.values[0],S.values[1]):"C"===S.type&&(j=n(S.values[4],S.values[5])),
T=h[r.cachedPathToHudTransform]?h[r.cachedPathToHudTransform]:h[r.cachedPathToHudTransform]=d(h,this),
"C"===S.type&&(P=n(S.values[2],S.values[3])),C&&("C"===C.type?R=n(C.values[0],C.values[1]):"Z"===C.type&&"C"===k.type&&(R=n(k.values[0],k.values[1]))),
P&&l(j,P)===!1){var O=j.matrixTransform(T),I=P.matrixTransform(T),D=e("svg:circle");
D.setAttribute("class","control-grippie"),D.setAttribute("data-index","2"),D.setAttribute("cx",I.x),
D.setAttribute("cy",I.y),D.setAttribute("r",E/body.canvas.scale),D[A.path]=h,D[A.segIndex]=w;
var V=e("svg:line");V.setAttribute("class","control-line"),V.setAttribute("x1",O.x),
V.setAttribute("y1",O.y),V.setAttribute("x2",I.x),V.setAttribute("y2",I.y),t.append(D),
i.append(V)}if(R&&l(j,R)===!1){var N=j.matrixTransform(T),B=R.matrixTransform(T),z=e("svg:circle");
z.setAttribute("class","control-grippie"),z.setAttribute("data-index","1"),z.setAttribute("cx",B.x),
z.setAttribute("cy",B.y),z.setAttribute("r",E/body.canvas.scale),z[A.path]=h,z[A.segIndex]="Z"===C.type?L:w+1;
var G=e("svg:line");G.setAttribute("class","control-line"),G.setAttribute("x1",N.x),
G.setAttribute("y1",N.y),G.setAttribute("x2",B.x),G.setAttribute("y2",B.y),t.append(z),
i.append(G)}}}catch(U){b=!0,y=U}finally{try{m||null==x["return"]||x["return"]()}finally{
if(b)throw y}}}}catch(H){s=!0,o=H}finally{try{a||null==c["return"]||c["return"]();
}finally{if(s)throw o}}this["#control-grippies"].innerHTML="",this["#control-grippies"].append(t),
this["#control-lines"].innerHTML="",this["#control-lines"].append(i)},_updateNodeGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#node-grippies"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.setAttribute("r",C/body.canvas.scale)}}catch(s){e=!0,n=s}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_updateControlGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#control-grippies"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.setAttribute("r",E/body.canvas.scale)}}catch(s){e=!0,n=s}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_updateOutlineGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#outline-grippies"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=a[A.path],o=getComputedStyle(s),l=S(o.strokeWidth)*body.canvas.scale;
10>l&&(l=10),a.style.strokeWidth=l}}catch(u){e=!0,n=u}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},_onSelectedElementsChange:function(){var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=this._selectedPaths[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a[A.selectedSegsIndexes]=[]}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._selectedPaths=this._getSelectedPaths(),0===this._selectedPaths.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateOutlineGrippies1500ms(),this._updateNodeGrippies40ms())},_onContentMutation:function(){
this._updateNodeGrippies40ms(),this._updateControlGrippies40ms(),this._updateOutlineGrippies1500ms();
},_onZoomChange:function(){this._updateNodeGrippiesSize40ms(),this._updateControlGrippiesSize40ms(),
this._updateOutlineGrippiesSize1500ms()},_onShadowRootMouseDown:function(t){t.preventDefault(),
this.focus(),t.target.classList.contains("node-grippie")?this._onNodeGrippieMouseDown(t):t.target.classList.contains("control-grippie")?this._onControlGrippieMouseDown(t):t.target.classList.contains("outline-grippie")&&this._onOutlineGrippieMouseDown(t);
},_onShadowRootDblClick:function(t){t.target.classList.contains("node-grippie")?this._onNodeGrippieDblClick(t):t.target.classList.contains("control-grippie")?this._onControlGrippieDblClick(t):t.target.classList.contains("outline-grippie")&&this._onOutlineGrippieDblClick(t);
},_onCanvasContentMouseDown:function(t){var e,n=this;t.preventDefault(),window.addEventListener("mouseup",e=function(i){
window.removeEventListener("mouseup",e),i.clientX===t.clientX&&i.clientY===t.clientY&&n._deselectAllSegs();
})},_onNodeGrippieMouseDown:function(t){var e=this;if(0===t.button){var i=body.modKeys.shift,a=t.target,s=a[A.path],o=a[A.segIndex];
s[A.selectedSegsIndexes]||(s[A.selectedSegsIndexes]=[]);var l,u,c=s[A.selectedSegsIndexes].includes(o),d=!1;
if(c===!1){if(i===!1){s[A.selectedSegsIndexes]=[o];var h=!0,v=!1,f=void 0;try{for(var m=void 0,g=this._selectedPaths[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){
var b=m.value;b!==s&&(b[A.selectedSegsIndexes]=[])}}catch(p){v=!0,f=p}finally{try{
h||null==g["return"]||g["return"]()}finally{if(v)throw f}}}else i===!0&&s[A.selectedSegsIndexes].push(o);
this._updateNodeGrippies40ms(),this._updateControlGrippies40ms(),d=!0}window.addEventListener("mousemove",l=function(i){
if(r(t,i)){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u);
var s=n(i.clientX,i.clientY);e._onNodeGrippieDragStart(t,a,s)}}),window.addEventListener("mouseup",u=function(t){
window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u),
d===!1&&i===!0&&(s[A.selectedSegsIndexes].remove(o),e._updateNodeGrippies40ms(),e._updateControlGrippies40ms());
})}},_onNodeGrippieDragStart:function(t,e,i){var r=this;body.canvas.undoManager.checkpoint("Edit path");
var a,s,o=new p("initialPathData","pathData","transform");this._draggedNodeGrippie=e;
var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this._selectedPaths[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=g(v.getPathData({normalize:!0})),m=L(f);v[o.transform]=v.getScreenCTM().inverse(),
v[o.pathData]=f,v[o.initialPathData]=m}}catch(b){u=!0,c=b}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}window.addEventListener("mousemove",a=function(t){var e=n(t.clientX,t.clientY),a=!0,s=!1,l=void 0;
try{for(var u=void 0,c=r._selectedPaths[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){
var d=u.value,h=i.matrixTransform(d[o.transform]),v=e.matrixTransform(d[o.transform]),f=v.x-h.x,m=v.y-h.y,g=d[o.pathData],b=d[o.initialPathData],p=d[A.selectedSegsIndexes]||[],y=!0,_=!1,x=void 0;
try{for(var w=void 0,S=p[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){var C=w.value,E=g[C],k=g[C+1],L=b[C],j=b[C+1];
if("M"===E.type||"L"===E.type){if(E.values[0]=L.values[0]+f,E.values[1]=L.values[1]+m,
k&&"C"===k.type)k.values[0]=j.values[0]+f,k.values[1]=j.values[1]+m;else if(k&&"Z"===k.type){
var T=M(E,g),P=T[0];P.values[0]=E.values[0],P.values[1]=E.values[1]}}else if("C"===E.type)if(E.values[2]=L.values[2]+f,
E.values[3]=L.values[3]+m,E.values[4]=L.values[4]+f,E.values[5]=L.values[5]+m,k&&"C"===k.type)k.values[0]=j.values[0]+f,
k.values[1]=j.values[1]+m;else if(k&&"Z"===k.type){var R=M(E,g),O=R[0],I=R[1],D=M(L,b);
O.values[0]=E.values[4],O.values[1]=E.values[5],"C"===I.type&&(I.values[0]=D[1].values[0]+f,
I.values[1]=D[1].values[1]+m)}}}catch(V){_=!0,x=V}finally{try{y||null==S["return"]||S["return"]();
}finally{if(_)throw x}}d.setPathData(g)}}catch(N){s=!0,l=N}finally{try{a||null==c["return"]||c["return"]();
}finally{if(s)throw l}}}),window.addEventListener("mouseup",s=function(t){window.removeEventListener("mousemove",a),
window.removeEventListener("mouseup",s),r._draggedNodeGrippie=null,r._updateOutlineGrippies();
})},_onControlGrippieMouseDown:function(t){var e=this;if(0===t.button){var i,a,s=t.target;
window.addEventListener("mousemove",i=function(o){if(r(t,o)){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",a);var l=n(o.clientX,o.clientY);e._onControlGrippieDragStart(t,s,l);
}}),window.addEventListener("mouseup",a=function(t){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",a)})}},_onControlGrippieDragStart:function(t,e,i){
var r=this;body.canvas.undoManager.checkpoint("Move control point");var a=e.getAttribute("data-index"),s=e[A.path],o=e[A.segIndex],l=g(s.getPathData({
normalize:!0}));I(l);var u=l[o],c=l[o-1]||null,d=l[o+1]||null,h=M(u,l),v=V(u,l),f=s.getScreenCTM().inverse(),m=i.matrixTransform(f),b={
type:"C",values:$traceurRuntime.spread(u.values)},p=null,y=null,x=null;p="M"===c.type&&v?h[h.length-2]:c,
d&&("Z"===d.type?y=v?h[1]:null:"C"===d.type&&(y=d)),"1"===a?"M"===p.type||"L"===p.type?x=n(p.values[0],p.values[1]):"C"===p.type&&(x=n(p.values[4],p.values[5])):"2"===a&&(x=n(u.values[4],u.values[5]));
var w,S,C,E="sharp",k=n(m.x,m.y);this._draggedControlGrippie=e;var L=function(){var t=body.modKeys,e=t.ctrl,n=t.shift;
e===!0&&n===!1?E="sharp":e===!1&&n===!0?"1"===a?E=p&&"C"===p.type?"smooth":"sharp":"2"===a&&(E=y&&"C"===y.type?"smooth":"sharp"):e===!0&&n===!0?"1"===a?E=p&&"C"===p.type?"symmetric-smooth":"sharp":"2"===a&&(E=y&&"C"===y.type?"symmetric-smooth":"sharp"):e===!1&&n===!1&&("1"===a?E=T(p,u):"2"===a&&(E=T(u,y)));
},j=function(){var t=k.x-m.x,e=k.y-m.y;if("1"===a){var i=n(b.values[0]+t,b.values[1]+e);
if(u.values[0]=i.x,u.values[1]=i.y,"smooth"===E){var r=n(p.values[2],p.values[3]),o=new _(x,i),c=new _(x,r),d=o.getOppositeVector();
d.length=c.length,p.values[2]=x.x+d.x,p.values[3]=x.y+d.y}else if("symmetric-smooth"===E){
var h=new _(x,i);h=h.negate(),p.values[2]=x.x+h.x,p.values[3]=x.y+h.y}}else if("2"===a){
var v=n(b.values[2]+t,b.values[3]+e);if(u.values[2]=v.x,u.values[3]=v.y,"smooth"===E){
var f=n(y.values[0],y.values[1]),g=new _(x,v),w=new _(x,f),S=g.getOppositeVector();
S.length=w.length,y.values[0]=x.x+S.x,y.values[1]=x.y+S.y}else if("symmetric-smooth"===E){
var C=new _(x,v);C=C.negate(),y.values[0]=x.x+C.x,y.values[1]=x.y+C.y}}s.setPathData(l);
};window.addEventListener("mousemove",w=function(t){var e=n(t.clientX,t.clientY);k=e.matrixTransform(f),
j()}),window.addEventListener("mouseup",S=function(t){window.removeEventListener("mousemove",w),
window.removeEventListener("mouseup",S),body.removeEventListener("modkeyschange",C),
D(l),s.setPathData(l),r._draggedControlGrippie=null}),body.addEventListener("modkeyschange",C=function(){
L(),j()}),L()},_onOutlineGrippieMouseDown:function(t){var e=this;if(0===t.button){
var i,a,s=!1,o=t.target;window.addEventListener("mousemove",i=function(n){r(t,n)&&(window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",a),e._onOutlineGrippieDragStart(n,o),s=!0)}),
window.addEventListener("mouseup",a=function(r){var l,u;if(window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",a),s===!1){var c=o[A.path],d=g(c.getPathData({
normalize:!0})),h=c.getScreenCTM().inverse(),v=n(t.clientX,t.clientY),f=v.matrixTransform(h),b=m(c,f),p=(l=b[Symbol.iterator](),
(u=l.next()).done?void 0:u.value,(u=l.next()).done?void 0:u.value),y=j(d,p),_=y-1,x=d[y],w=d[_],S=M(x,d),C=V(x,d);
C&&"M"===w.type?c[A.selectedSegsIndexes]=[y,S.length-2]:c[A.selectedSegsIndexes]=[y,_],
e._updateNodeGrippies40ms(),e._updateControlGrippies40ms()}})}},_onOutlineGrippieDragStart:function(t,e){
var i,r,a=this;body.canvas.undoManager.checkpoint("Edit path"),this._draggedOutlineGrippie=t.target;
var s,o,l,u=e[A.path],c=g(u.getPathData({normalize:!0})),d=u.getScreenCTM().inverse(),h=n(t.clientX,t.clientY).matrixTransform(d),f=m(u,h),b=(i=f[Symbol.iterator](),
(r=i.next()).done?void 0:r.value),p=(r=i.next()).done?void 0:r.value,y=j(c,p),x=c[y],S=c[y-1],C=c[y+1],E=M(x,c),k=V(x,c),L=new _(h,b),O=n(h.x,h.y),N=null,B=null,z=null,G=null,U=!1,H=!1;
I(c),N="M"===S.type&&k?E[E.length-2]:S,C&&("Z"===C.type?B=k?E[1]:null:"C"===C.type&&(B=C)),
"M"===N.type||"L"===N.type?z=n(N.values[0],N.values[1]):"C"===N.type&&(z=n(N.values[4],N.values[5])),
"M"===x.type||"L"===x.type?G=n(x.values[0],x.values[1]):"C"===x.type&&(G=n(x.values[4],x.values[5]));
var F=function(){var t=body.modKeys,e=t.ctrl,n=t.shift;e===!0&&n===!1?(U=!1,H=!1):e===!1&&n===!0?(U=N&&"C"===N.type?"smooth":!1,
H=B&&"C"===B.type?"smooth":!1):e===!0&&n===!0?(U=N&&"C"===N.type?"symmetric-smooth":!1,
H=B&&"C"===B.type?"symmetric-smooth":!1):e===!1&&n===!1&&(U=T(N,x),H=T(x,B))},q=function(){
var t=n(x.values[0],x.values[1]),e=n(x.values[2],x.values[3]),i=v(b,z,t,e,G),r=1;if(1/6>=i?r=0:.5>=i?r=w((6*i-1)/2,3)/2:5/6>=i&&(r=(1-w((6*(1-i)-1)/2,3))/2+.5),
-1!==i){var a=(1-r)/(3*i*(1-i)*(1-i)),s=r/(3*i*i*(1-i)),o=O.x-b.x,l=O.y-b.y;x.values[0]=x.values[0]+a*o,
x.values[1]=x.values[1]+a*l,x.values[2]=x.values[2]+s*o,x.values[3]=x.values[3]+s*l,
"smooth"===U?P(x,N,!1):"symmetric-smooth"===U&&P(x,N,!0),"smooth"===H?R(x,B,!1):"symmetric-smooth"===H&&R(x,B,!0),
b=O,u.setPathData(c)}};window.addEventListener("mousemove",s=function(t){O=n(t.clientX,t.clientY).matrixTransform(d),
O.x+=L.x,O.y+=L.y,q()}),window.addEventListener("mouseup",o=function(t){body.removeEventListener("modkeyschange",l),
window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o),
D(c),u.setPathData(c),a._draggedOutlineGrippie=null,a._updateOutlineGrippies()}),
body.addEventListener("modkeyschange",l=function(){F(),q()}),F()},_onNodeGrippieDblClick:function(t){
var e=t.target,n=e[A.path],i=e[A.segIndex],r=g(n.getPathData({normalize:!0})),a=r[i],s=r[i+1]||null,o=r[i-1]||null,l=M(a,r),u=!1;
if(I(r),"M"===a.type){if("C"===s.type){var c=s.values[0]===a.values[0]&&s.values[1]===a.values[1];
c===!1&&(s.values[0]=a.values[0],s.values[1]=a.values[1],u=!0)}}else if("C"===a.type)if(null===s||"M"===s.type){
var d=a.values[2]===a.values[4]&&a.values[3]===a.values[5];d===!1&&(a.values[2]=a.values[4],
a.values[3]=a.values[5],u=!0)}else if("Z"===s.type){var h=l[1];if("C"===h.type){var v=a.values[4]===h.values[0]&&a.values[5]===h.values[1]&&a.values[4]===a.values[2]&&a.values[5]===a.values[3];
v===!1?(h.values[0]=a.values[4],h.values[1]=a.values[5],a.values[2]=a.values[4],a.values[3]=a.values[5]):O(o,a,h),
u=!0}}else if("C"===s.type){var f=s.values[0]===a.values[4]&&s.values[1]===a.values[5]&&a.values[2]===a.values[4]&&a.values[3]===a.values[5];
f===!1?(a.values[2]=a.values[4],a.values[3]=a.values[5],s.values[0]=a.values[4],s.values[1]=a.values[5]):O(o,a,s),
u=!0}u&&(body.canvas.undoManager.checkpoint("Edit path"),D(r),n.setPathData(r))},
_onControlGrippieDblClick:function(t){var e=t.target,n=e.getAttribute("data-index"),i=e[A.path],r=e[A.segIndex],a=g(i.getPathData({
normalize:!0})),s=a[r],o=a[r-1]||null;"1"===n?"C"===o.type?(s.values[0]=o.values[4],
s.values[1]=o.values[5]):("M"===o.type||"L"===o.type)&&(s.values[0]=o.values[0],s.values[1]=o.values[1]):"2"===n&&(s.values[2]=s.values[4],
s.values[3]=s.values[5]),body.canvas.undoManager.checkpoint("Edit path"),D(a),i.setPathData(a);
},_onOutlineGrippieDblClick:function(t){var e,i,r,a,s=t.target[A.path],o=g(s.getPathData({
normalize:!0})),l=s.getScreenCTM().inverse(),u=n(t.clientX,t.clientY).matrixTransform(l),c=m(s,u),d=(e=c[Symbol.iterator](),
(i=e.next()).done?void 0:i.value),h=(i=e.next()).done?void 0:i.value,f=j(o,h),p=o[f];
if("L"===p.type){var y=n(p.values[0],p.values[1]);r={type:"L",values:[d.x,d.y]},a={
type:"L",values:[y.x,y.y]}}else if("C"===p.type){var _,x=o[f-1]||null;"M"===x.type||"L"===x.type?_=n(x.values[0],x.values[1]):"C"===x.type&&(_=n(x.values[4],x.values[5]));
var w=n(p.values[4],p.values[5]),S=n(p.values[0],p.values[1]),C=n(p.values[2],p.values[3]),E=v(d,_,S,C,w),k=b(_,S,C,w,E);
r={type:"C",values:[k[0][1].x,k[0][1].y,k[0][2].x,k[0][2].y,k[0][3].x,k[0][3].y]},
a={type:"C",values:[k[1][1].x,k[1][1].y,k[1][2].x,k[1][2].y,k[1][3].x,k[1][3].y]};
}body.canvas.undoManager.checkpoint("Add path node"),o=$traceurRuntime.spread(o.slice(0,f),[r,a],o.slice(f+1)),
s.setPathData(o),s[A.selectedSegsIndexes]=[f];var L=!0,M=!1,T=void 0;try{for(var P=void 0,R=this._selectedPaths[Symbol.iterator]();!(L=(P=R.next()).done);L=!0){
var O=P.value;O!==s&&(O[A.selectedSegsIndexes]=[])}}catch(I){M=!0,T=I}finally{try{
L||null==R["return"]||R["return"]()}finally{if(M)throw T}}this._updateNodeGrippies(),
this._updateControlGrippies()},_onKeyDown:function(t){if(this["#node-grippies"].querySelector("[data-selected]")){
var e=y.fromEvent(t);e.matches("Backspace")?(t.preventDefault(),t.stopPropagation(),
this._deleteSelectedSegs("smooth")):e.matches("Shift","Backspace")&&(t.preventDefault(),
t.stopPropagation(),this._deleteSelectedSegs("sharp"))}},_selectAllSegs:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._selectedPaths[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
for(var a=i.value,s=g(a.getPathData({normalize:!0})),o=[],l=0;l<s.length;l+=1){var u=s[l];
"C"===u.type||"L"===u.type?o.push(l):"M"===u.type&&V(u,s)===!1&&o.push(l)}a[A.selectedSegsIndexes]=o;
}}catch(c){e=!0,n=c}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateNodeGrippies(),this._updateControlGrippies()},_deselectAllSegs:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._selectedPaths[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a[A.selectedSegsIndexes]=[]}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._updateNodeGrippies40ms(),this._updateControlGrippies40ms();
},_deleteSelectedSegs:function(){var t=void 0!==arguments[0]?arguments[0]:"smooth";
body.canvas.undoManager.checkpoint("Delete segments");var e=!0,n=!1,i=void 0;try{
var r,a,s,o,l,u,c,d,h,v,m,b,p,y=function(){var e=_.value,n=g(e.getPathData({normalize:!0
}));I(n);var i=$traceurRuntime.spread(e[A.selectedSegsIndexes]).sort(function(t,e){
return e-t}),p=i.filter(function(t){return"C"===n[t].type}),y=i.filter(function(t){
return"M"===n[t].type});if(0===i.length)return 0;r=!0,a=!1,s=void 0;try{for(var x=void 0,w=p[Symbol.iterator]();!(r=(x=w.next()).done);r=!0){
var S=x.value,C=n[S],E=n[S+1]||null,k=n[S-1]||null;if(null===E)n.remove(C);else if("M"===E.type)n.remove(C);else if("Z"===E.type){
var L=M(C,n),j=L[0],T=L[1];n.remove(C),"L"===k.type||"M"===k.type?(j.values[0]=k.values[0],
j.values[1]=k.values[1]):"C"===k.type&&(j.values[0]=k.values[4],j.values[1]=k.values[5]),
"C"===T.type&&("smooth"===t?(T.values[0]=C.values[0],T.values[1]=C.values[1]):"sharp"===t&&("L"===k.type||"M"===k.type?(T.values[0]=k.values[0],
T.values[1]=k.values[1]):"C"===k.type&&(T.values[0]=k.values[4],T.values[1]=k.values[5]),
T.values[2]=T.values[4],T.values[3]=T.values[5]))}else"C"===E.type?(n.remove(C),"smooth"===t?(E.values[0]=C.values[0],
E.values[1]=C.values[1]):"sharp"===t&&("M"===k.type||"L"===k.type?(E.values[0]=k.values[0],
E.values[1]=k.values[1]):"C"===k.type&&(E.values[0]=k.values[4],E.values[1]=k.values[5]),
E.values[2]=E.values[4],E.values[3]=E.values[5])):"L"===E.type&&n.remove(C)}}catch(P){
a=!0,s=P}finally{try{r||null==w["return"]||w["return"]()}finally{if(a)throw s}}o=!0,
l=!1,u=void 0;try{for(var R=void 0,O=y[Symbol.iterator]();!(o=(R=O.next()).done);o=!0){
var V=R.value,N=n[V],B=M(N,n);if(B.length>1){var z=B[0],G=B[1];n.remove(G),"L"===G.type?(z.values[0]=G.values[0],
z.values[1]=G.values[1]):"C"===G.type&&(z.values[0]=G.values[4],z.values[1]=G.values[5]);
}}}catch(U){l=!0,u=U}finally{try{o||null==O["return"]||O["return"]()}finally{if(l)throw u;
}}c=!0,d=!1,h=void 0;try{for(var H=void 0,F=f(n)[Symbol.iterator]();!(c=(H=F.next()).done);c=!0){
var q=H.value,$=q.filter(function(t){return"C"===t.type}),Y="Z"===q[q.length-1].type,X=Y?2:1;
if($.length<X){v=!0,m=!1,b=void 0;try{for(var W=void 0,Z=q[Symbol.iterator]();!(v=(W=Z.next()).done);v=!0){
var K=W.value;n.remove(K)}}catch(J){m=!0,b=J}finally{try{v||null==Z["return"]||Z["return"]();
}finally{if(m)throw b}}}}}catch(Q){d=!0,h=Q}finally{try{c||null==F["return"]||F["return"]();
}finally{if(d)throw h}}e[A.selectedSegsIndexes]=[],D(n),e.setPathData(n),e.hasAttribute("d")===!1&&e.remove();
};t:for(var _=void 0,x=this._selectedPaths[Symbol.iterator]();!(e=(_=x.next()).done);e=!0)switch(p=y()){
case 0:continue t}}catch(w){n=!0,i=w}finally{try{e||null==x["return"]||x["return"]();
}finally{if(n)throw i}}},_getSelectedPaths:function(){var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("d")&&!o.hasAttribute("is")?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),B=i("g","bx-pathsedithud",N);return{get default(){
return B}}}),System.registerModule("elements/bx-patternartboard",[],function(){"use strict";
var t=System.get("utils/dom").registerElement,e=System.get("classes/artboard-helpers"),n=e.BXViewBox,i=e.BXPreserveAspectRatio,r=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
get contentType(){return"pattern"},get x(){return new BXLength(this,"x")},get y(){
return new BXLength(this,"y")},get width(){return new BXLength(this,"width")},get height(){
return new BXLength(this,"height")},get viewBox(){return new n(this)},get preserveAspectRatio(){
return new i(this)},get patternUnits(){return"userSpaceOnUse"===this.getAttribute("patternUnits")?1:2;
},set patternUnits(t){this.setAttribute("patternUnits",1===t?"userSpaceOnUse":"objectBoundingBox");
},get patternContentUnits(){return"objectBoundingBox"===this.getAttribute("patternContentUnits")?2:1;
},set patternContentUnits(t){this.setAttribute("patternContentUnits",1===t?"userSpaceOnUse":"objectBoundingBox");
},get href(){return this.hasAttribute("href")?this.getAttribute("href"):""},set href(t){
this.setAttribute("href",t)}},{},t)}(SVGGElement),a=t("g","bx-patternartboard",r);
return{get default(){return a}}}),System.registerModule("elements/bx-patternhud",[],function(){
"use strict";var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/dom"),n=(e.createElement,
e.createSVGMatrix),i=e.createSVGPoint,r=(e.parseHTML,e.registerElement),a=System.get("utils/paint"),s=a.getPaintType,o=a.getPaintServer,l=System.get("utils/pattern").getComputedPatternProperties,u=System.get("utils/relationship"),c=(u.getGraphicsElements,
u.queryStylableElements),d=System.get("utils/time").throttle,h=System.get("utils/transform"),v=h.getTransformFromPoints,f=h.getTransformToElement,m=System.get("utils/vector").getAngleBetweenVectors,g=System.get("classes/enum")["default"],b=System.get("classes/vector")["default"],p=SVGUnitTypes,y=p.SVG_UNIT_TYPE_USERSPACEONUSE,_=p.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,x=6,w=new g("pattern","patternUser"),S='\n  <style>@import url("stylesheets/bx-patternhud.css");</style>\n\n  <defs>\n    <g class="subhud">\n      <path class="outline"></path>\n      <circle class="grippie rotate-grippie"></circle>\n      <rect class="grippie scale-grippie"></rect>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',C=function(e){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=S,this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),
this._subhuds=this._shadowRoot.querySelector("#subhuds"),this._update50ms=d(this._update,50,this),
this._update200ms=d(this._update,200,this),this._draggedGrippie=null,this._draggedOutline=null,
this._shadowRoot.addEventListener("mousedown",function(e){return t._onShadowRootMouseDown(e);
})},enabledCallback:function(){var t=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener)},get context(){
return this.hasAttribute("context")?this.getAttribute("context"):"fill"},_onSelectedElementsChange:function(){
this._update200ms()},_onSelectedTextRangeChange:function(){this._update200ms()},_onZoomChange:function(){
this._update50ms()},_onContentMutation:function(t){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement):this._draggedOutline?this._updatePositions(this._draggedOutline.parentElement):this._update200ms();
},_onShadowRootMouseDown:function(t){0===t.button&&(t.target.classList.contains("outline")?this._onTileOutlineMouseDown(t):t.target.classList.contains("scale-grippie")?this._onScaleGrippieMouseDown(t):t.target.classList.contains("rotate-grippie")&&this._onRotateGrippieMouseDown(t));
},_onTileOutlineMouseDown:function(e){var n=this,r=e.target,a=r.parentElement,s=a[w.pattern],o=a[w.patternUser],u=o.getScreenCTM(),c=u.inverse(),d=t(o),h=l(s),f=h.x,m=h.y,g=h.width,p=h.height,x=h.patternUnits,S=h.patternTransform;
this._draggedOutline=r;var C,E,k,A,L;if(x===y)k=i(f.value,m.value),A=i(f.value+g.value,m.value),
L=i(f.value+g.value,m.value+p.value);else if(x===_){var M=i(f.valueInSpecifiedUnits,m.valueInSpecifiedUnits),j=i(f.valueInSpecifiedUnits+g.valueInSpecifiedUnits,m.valueInSpecifiedUnits),T=i(f.valueInSpecifiedUnits+g.valueInSpecifiedUnits,m.valueInSpecifiedUnits+p.valueInSpecifiedUnits);
k=i(d.x+M.x*d.width,d.y+M.y*d.height),A=i(d.x+j.x*d.width,d.y+j.y*d.height),L=i(d.x+T.x*d.width,d.y+T.y*d.height);
}var P=k.matrixTransform(S),R=A.matrixTransform(S),O=L.matrixTransform(S),I=P.matrixTransform(u),D=R.matrixTransform(u),V=O.matrixTransform(u);
body.canvas.undoManager.checkpoint("Transform pattern"),window.addEventListener("mousemove",C=function(t){
var n=new b(t.clientX-e.clientX,t.clientY-e.clientY),r=i(I.x+n.x,I.y+n.y),a=i(D.x+n.x,D.y+n.y),o=i(V.x+n.x,V.y+n.y),l=r.matrixTransform(c),u=a.matrixTransform(c),d=o.matrixTransform(c),h=l.matrixTransform(S.inverse()),f=u.matrixTransform(S.inverse()),m=d.matrixTransform(S.inverse()),g=v(k,A,L,h,f,m);
s.setAttribute("patternTransform",S.multiply(g).toString())}),window.addEventListener("mouseup",E=function(t){
window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",E),
n._draggedOutline=null})},_onRotateGrippieMouseDown:function(e){var r=this,a=e.target,s=a.parentElement,o=s[w.pattern],u=s[w.patternUser],c=u.getScreenCTM(),d=c.inverse(),h=t(u),f=l(o),g=f.x,p=f.y,x=f.width,S=f.height,C=f.patternUnits,E=f.patternTransform;
this._draggedGrippie=a;var k,A,L,M,j;if(C===y)L=i(g.value+x.value/2,p.value+S.value/2),
M=i(g.value+x.value,p.value),j=i(g.value+x.value,p.value+S.value);else if(C===_){
var T=i(g.valueInSpecifiedUnits+x.valueInSpecifiedUnits/2,p.valueInSpecifiedUnits+S.valueInSpecifiedUnits/2),P=i(g.valueInSpecifiedUnits+x.valueInSpecifiedUnits,p.valueInSpecifiedUnits),R=i(g.valueInSpecifiedUnits+x.valueInSpecifiedUnits,p.valueInSpecifiedUnits+S.valueInSpecifiedUnits);
L=i(h.x+T.x*h.width,h.y+T.y*h.height),M=i(h.x+P.x*h.width,h.y+P.y*h.height),j=i(h.x+R.x*h.width,h.y+R.y*h.height);
}var O=L.matrixTransform(E),I=M.matrixTransform(E),D=j.matrixTransform(E),V=O.matrixTransform(c),N=I.matrixTransform(c),B=D.matrixTransform(c);
body.canvas.undoManager.checkpoint("Transform pattern"),window.addEventListener("mousemove",k=function(t){
var r=i(t.clientX+(N.x-e.clientX),t.clientY+(N.y-e.clientY)),a=m(new b(V,N),new b(V,r)),s=n().rotate(a,V.x,V.y),l=N.matrixTransform(s),u=B.matrixTransform(s),c=l.matrixTransform(d),h=u.matrixTransform(d),f=c.matrixTransform(E.inverse()),g=h.matrixTransform(E.inverse()),p=v(L,M,j,L,f,g);
o.setAttribute("patternTransform",E.multiply(p).toString())}),window.addEventListener("mouseup",A=function(t){
window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",A),
r._draggedGrippie=null})},_onScaleGrippieMouseDown:function(e){var n=this,r=e.target,a=r.parentElement,s=a[w.pattern],o=a[w.patternUser],u=o.getScreenCTM(),c=u.inverse(),d=t(o),h=l(s),f=h.x,m=h.y,g=h.width,b=h.height,p=h.patternUnits,x=h.patternTransform;
this._draggedGrippie=r;var S,C,E,k,A;if(p===y)E=i(f.value,m.value),k=i(f.value+g.value,m.value),
A=i(f.value+g.value,m.value+b.value);else if(p===_){var L=i(f.valueInSpecifiedUnits,m.valueInSpecifiedUnits),M=i(f.valueInSpecifiedUnits+g.valueInSpecifiedUnits,m.valueInSpecifiedUnits),j=i(f.valueInSpecifiedUnits+g.valueInSpecifiedUnits,m.valueInSpecifiedUnits+b.valueInSpecifiedUnits);
E=i(d.x+L.x*d.width,d.y+L.y*d.height),k=i(d.x+M.x*d.width,d.y+M.y*d.height),A=i(d.x+j.x*d.width,d.y+j.y*d.height);
}var T=A.matrixTransform(x),P=T.matrixTransform(u);body.canvas.undoManager.checkpoint("Transform pattern"),
window.addEventListener("mousemove",S=function(t){var n=i(P.x+t.clientX-e.clientX,P.y+t.clientY-e.clientY),r=n.matrixTransform(c),a=r.matrixTransform(x.inverse()),o=i(a.x,k.y),l=v(E,k,A,E,o,a);
s.setAttribute("patternTransform",x.multiply(l).toString())}),window.addEventListener("mouseup",C=function(t){
window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",C),
n._draggedGrippie=null})},_update:function(){var t=this,e=c(this.context,body.canvas.selectedElements,body.canvas.selectedTextRange),n=e.filter(function(e){
return"pattern"===s(e,t.context)});if(this._subhuds.innerHTML="",n.length>0){var i=Symbol(),r=!0,a=!1,u=void 0;
try{for(var d=void 0,h=n[Symbol.iterator]();!(r=(d=h.next()).done);r=!0){var v=d.value,f=o(v,this.context);
if(!f[i]){f[i]=!0;var m=l(f),g=m.width,b=m.height;if(0!==g.valueInSpecifiedUnits&&0!==b.valueInSpecifiedUnits){
var p=this._subhudTemplate.cloneNode(!0);p[w.pattern]=f,p[w.patternUser]=v,this._subhuds.append(p);
}}}}catch(y){a=!0,u=y}finally{try{r||null==h["return"]||h["return"]()}finally{if(a)throw u;
}}this._updatePositions()}},_updatePositions:function(){var e=void 0!==arguments[0]?arguments[0]:null,n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=this._subhuds.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var u=s.value;if(!e||u===e){var c=u[w.patternUser],d=u[w.pattern],h=u.querySelector(".rotate-grippie"),v=u.querySelector(".scale-grippie"),m=u.querySelector(".outline"),g=f(c,this),b=t(c),p=l(d),S=p.x,C=p.y,E=p.width,k=p.height,A=p.patternUnits,L=p.patternTransform,M=void 0,j=void 0,T=void 0,P=void 0;
if(A===y)M=i(S.value,C.value),j=i(S.value+E.value,C.value),T=i(S.value+E.value,C.value+k.value),
P=i(S.value,C.value+k.value);else if(A===_){var R=i(S.valueInSpecifiedUnits,C.valueInSpecifiedUnits),O=i(S.valueInSpecifiedUnits+E.valueInSpecifiedUnits,C.valueInSpecifiedUnits),I=i(S.valueInSpecifiedUnits+E.valueInSpecifiedUnits,C.valueInSpecifiedUnits+k.valueInSpecifiedUnits),D=i(S.valueInSpecifiedUnits,C.valueInSpecifiedUnits+k.valueInSpecifiedUnits);
M=i(b.x+R.x*b.width,b.y+R.y*b.height),j=i(b.x+O.x*b.width,b.y+O.y*b.height),T=i(b.x+I.x*b.width,b.y+I.y*b.height),
P=i(b.x+D.x*b.width,b.y+D.y*b.height)}var V=M.matrixTransform(L),N=j.matrixTransform(L),B=T.matrixTransform(L),z=P.matrixTransform(L),G=V.matrixTransform(g),U=N.matrixTransform(g),H=B.matrixTransform(g),F=z.matrixTransform(g);
m.setAttribute("d","\n        M "+G.x+" "+G.y+"\n        L "+U.x+" "+U.y+"\n        L "+H.x+" "+H.y+"\n        L "+F.x+" "+F.y+"\n        Z\n      ");
var q=x/body.canvas.scale;h.cx.baseVal.value=U.x,h.cy.baseVal.value=U.y,h.r.baseVal.value=q,
v.width.baseVal.value=2*q,v.height.baseVal.value=2*q,v.x.baseVal.value=H.x-v.width.baseVal.value/2,
v.y.baseVal.value=H.y-v.height.baseVal.value/2,v.hudPoint=H}}}catch($){r=!0,a=$}finally{
try{n||null==o["return"]||o["return"]()}finally{if(r)throw a}}}},{},e)}(SVGGElement),E=r("g","bx-patternhud",C);
return{get default(){return E}}}),System.registerModule("elements/bx-patternslist",[],function(){
"use strict";System.get("elements/bx-patternslistitem"),System.get("elements/bx-filterinput");
var t=System.get("utils/artwork"),e=t.getPatternThumbnails,n=t.rasterizeArtwork,i=System.get("utils/bbox").getClientBBox,r=System.get("utils/dom"),a=r.createElement,s=r.createSVGMatrix,o=r.insertAfter,l=r.registerElement,u=System.get("utils/math").round,c=System.get("utils/pattern").isDerivedPattern,d=System.get("utils/rect"),h=d.combineRects,v=d.transformRect,f=System.get("utils/relationship"),m=f.getElementIndex,g=f.sortByDomPosition,b=System.get("utils/time"),p=b.debounce,y=b.sleep,_=System.get("utils/transform").getTransformToElement,x=System.get("classes/shortcut")["default"],w=Number.parseFloat,S=(Object.keys,
'\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-patternslist.css");</style>\n\n  <main>\n    <header>\n      <h2>Patterns</h2>\n\n      <bx-button\n        id="delete-pattern-button"\n        skin="iconic"\n        icon="minus"\n        title="Delete pattern"\n        iconsize="15">\n      </bx-button>\n\n      <bx-button\n        id="create-pattern-button"\n        title="Create new pattern"\n        skin="iconic"\n        icon="plus"\n        iconsize="15">\n      </bx-button>\n    </header>\n\n    <div id="items"></div>\n    <div id="placeholder">No patterns found.</div>\n    <div id="drag-separator"></div>\n    <bx-filterinput id="filter-input" placeholder="Filter patterns"></bx-filterinput>\n  </main>\n'),C=function(t){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=S;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._update_2000ms=p(this._update,2e3,this),this.enabled&&this._onEnabled(),
this.addEventListener("keydown",function(e){return t._onKeyDown(e)}),this["#items"].addEventListener("focusin",function(e){
return t._onItemsFocusIn(e)}),this["#items"].addEventListener("rename",function(e){
return t._onItemRename(e)}),this["#items"].addEventListener("dragstart",function(e){
return t._onItemDragStart(e)}),this["#delete-pattern-button"].addEventListener("click",function(e){
return t._onDeletePatternButtonClick(e)}),this["#create-pattern-button"].addEventListener("click",function(e){
return t._onCreatePatternButtonClick(e)}),this["#filter-input"].addEventListener("input",function(){
return t._onFilterInputInput()})},attributeChangedCallback:function(t,e,n){e!==n&&"enabled"===t&&(this.enabled===!0?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")?!0:!1},set enabled(t){t?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var t=this;this._update(),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
"id"===e.detail.attributeName&&"pattern"===e.detail.target.localName?t._update():e.detail.addedNodes[0]&&"pattern"===e.detail.addedNodes[0].localName?t._update():t._update_2000ms();
})},_onDisabled:function(){body.canvas.removeEventListener("contentmutation",this._contentMutationListener);
},_onDeletePatternButtonClick:function(t){0===t.button&&this._maybeDeleteHighlightedItem();
},_onCreatePatternButtonClick:function(t){if(0===t.button){body.canvas.undoManager.checkpoint("Create pattern");
var e=body.canvas.generateUniqueID("pattern"),r=a("bx-patternslistitem");r.patternID=e,
this["#items"].append(r);var l=!0,c=!1,d=void 0;try{for(var f=void 0,m=this["#items"].children[Symbol.iterator]();!(l=(f=m.next()).done);l=!0){
var b=f.value;b.highlighted=b===r}}catch(p){c=!0,d=p}finally{try{l||null==m["return"]||m["return"]();
}finally{if(c)throw d}}body.canvas.selectedElements.length>0&&n(body.canvas.extractArtworkWithSelectedElements()).then(function(t){
r.thumbnail=t}),y(100).then(function(){return r.focus()});var x=body.canvas.defs.querySelectorAll("pattern"),w=x[x.length-1],S=a("svg:pattern");
if(w?o(S,w):body.canvas.defs.append(S),0===body.canvas.selectedElements.length)S.setAttribute("id",e),
S.setAttribute("viewBox","0 0 100 100"),S.setAttribute("patternUnits","userSpaceOnUse"),
S.setAttribute("width","100"),S.setAttribute("height","100");else{var C=h(function(){
var t=0,e=[],n=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;e[t++]=i(l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}());C=v(C,body.canvas.currentArtboard.getCTM().inverse());
var E=-C.x,k=-C.y,A=u(C.width,4),L=u(C.height,4),M=!0,j=!1,T=void 0;try{for(var P=void 0,R=g(body.canvas.selectedElements)[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){
var O=P.value,I=s();I.translateSelf(E,k),I.multiplySelf(_(O,body.canvas.currentArtboard)),
O.setAttribute("transform",I),S.append(O)}}catch(D){j=!0,T=D}finally{try{M||null==R["return"]||R["return"]();
}finally{if(j)throw T}}S.setAttribute("id",e),S.setAttribute("viewBox","0 0 "+A+" "+L),
S.setAttribute("patternUnits","userSpaceOnUse"),S.setAttribute("width","100"),S.setAttribute("height","100"),
body.canvas.selectedElements=[],body.canvas.selectedTextRange=null,body.canvas.currentContainer=null;
}}},_onItemsFocusIn:function(t){var e=t.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===e}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this["#delete-pattern-button"].disabled=!1},_onItemRename:function(t){
body.canvas.undoManager.checkpoint("Rename pattern");var e=t.target,n=t.detail,i=n.oldID,r=n.newID;
e.patternID=r;for(var a=document.createNodeIterator(body.canvas.content,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();){
"pattern"===s.localName&&(s.id===i&&s.setAttribute("id",r),s.href.baseVal==="#"+i&&(s.href.baseVal="#"+r));
var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=["fill","stroke"][Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=s.style.getPropertyValue(h);if(v&&v.startsWith("url(")){var f=v.substring(5,v.length-2);
f===i&&s.style.setProperty(h,"url(#"+r+")")}}}catch(m){l=!0,u=m}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}}},_onItemDragStart:function(t){var e,n,i,r=this,a=t.target,s=($traceurRuntime.spread(this["#items"].children),
w(getComputedStyle(this["#drag-separator"]).height)),o=m(a),l=null;window.addEventListener("dragover",e=function(t){
var e=r._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(e&&"bx-patternslistitem"===e.localName){
var n=e,i=n.getBoundingClientRect();r["#drag-separator"].hidden=!1,r["#drag-separator"].style.width=i.width+"px",
r["#drag-separator"].style.left=i.x+"px",t.clientY<i.y+i.height/2?(r["#drag-separator"].style.top=i.y-s/2+"px",
l=m(n)):(r["#drag-separator"].style.top=i.y+i.height-s/2+"px",l=m(n)+1)}else r["#drag-separator"].hidden=!0,
l=null}),this["#items"].addEventListener("dragend",i=function(t){if(r["#items"].removeEventListener("dragover",e),
r["#items"].removeEventListener("dragleave",n),r["#items"].removeEventListener("dragend",i),
r["#drag-separator"].hidden=!0,null!==l&&o!==l&&o!==l-1){a.style.display="none",r["#items"].insertBefore(a,r["#items"].children[l]),
setTimeout(function(){a.style.display=null,a.focus()},50),body.canvas.undoManager.checkpoint("Reorder patterns");
var s=$traceurRuntime.spread(body.canvas.defs.querySelectorAll("pattern")),u=s.find(function(t){
return t.id===a.patternID});s[l]?s[l].parentElement.insertBefore(u,s[l]):body.canvas.defs.append(u);
}})},_onFilterInputInput:function(){var t=this["#filter-input"].value,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#items"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.hidden=("#"+s.patternID.toLowerCase()).includes(t.toLowerCase())===!1;
}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}this._updatePlaceholderVisibility()},_onKeyDown:function(t){var e=x.fromEvent(t);
e.matches("Backspace")?null!==this["#items"].querySelector(":focus")&&(t.preventDefault(),
t.stopPropagation(),this._maybeDeleteHighlightedItem()):e.matches("ArrowUp")?(t.preventDefault(),
t.stopPropagation(),this._focusPreviousItem()):e.matches("ArrowDown")&&(t.preventDefault(),
t.stopPropagation(),this._focusNextItem())},_update:function(){var t=this;if(this._updating)return void setTimeout(1e3,function(){
return t._update(callback)});this._updating=!0;var n=$traceurRuntime.spread(body.canvas.masterArtboard.querySelectorAll("pattern"));
n=n.filter(function(t){return c(t)===!1});var i=$traceurRuntime.spread(this["#items"].children),r=0;
if(i.length>n.length)for(var s=n.length;s<i.length;s+=1)i[s].remove();else i.length<n.length&&(this["#create-pattern-button"].disabled=!0,
this["#delete-pattern-button"].disabled=!0);var o=function(e){for(var i=$traceurRuntime.spread(t["#items"].children),s=t["#items"].querySelector("[highlighted]"),u=s?s.patternID:null,c=t["#filter-input"].value;e.timeRemaining()>10&&r<n.length;){
var d=n[r],h=i[r];h||(h=a("bx-patternslistitem"),t["#items"].append(h)),h.patternID=d.id,
h.hidden=("#"+h.patternID.toLowerCase()).includes(c.toLowerCase())===!1,h.highlighted=d.id===u,
r+=1}t._updatePlaceholderVisibility(),r<n.length?requestIdleCallback(o):(t._updateButtons(),
l())},l=function(){var n=body.canvas.extractArtwork(),i={},r=!0,a=!1,s=void 0;try{
for(var o=void 0,l=t["#items"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[u.patternID]=u}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}e(n,function(t,e){i[t]&&(i[t].thumbnail=e)},function(){t._updating=!1;
})};requestIdleCallback(o)},_updateButtons:function(){this["#create-pattern-button"].disabled=!1,
this["#delete-pattern-button"].disabled=null===this["#items"].querySelector("[highlighted]");
},_updatePlaceholderVisibility:function(){this["#placeholder"].hidden=null!==this["#items"].querySelector(":not([hidden])");
},_focusPreviousItem:function(){var t=this._shadowRoot.querySelector(":focus"),e=this._getPreviousVisibleItem(t);
e&&e.focus()},_focusNextItem:function(){var t=this._shadowRoot.querySelector(":focus"),e=this._getNextVisibleItem(t);
e&&e.focus()},_maybeDeleteHighlightedItem:function(){var t=this,e=this["#items"].querySelector("[highlighted]");
if(e){var n=e.patternID,i=function(){body.canvas.undoManager.checkpoint("Delete pattern"),
"pattern"===body.canvas.currentArtboard.contentType&&body.canvas.currentArtboard.id===n&&body.canvas.editPatternEnd(!1);
var i=t._getNextVisibleItem(e),r=t._getPreviousVisibleItem(e);i?i.focus():r?r.focus():t["#delete-pattern-button"].disabled=!0,
e.remove(),t._updatePlaceholderVisibility();var a=body.canvas.content.querySelector("#"+n);
a&&a.remove()};i()}},_assertItemsLength:function(t){var e=this["#items"].childElementCount;
if(t>e)for(var n=e;t>n;n+=1){var i=a("bx-patternslistitem");this["#items"].append(i);
}else if(e>t)for(var r=e-1;r>=t;r-=1)this["#items"].children[r].remove()},_getPreviousVisibleItem:function(t){
for(;t.previousElementSibling;){if(t.previousElementSibling.hidden===!1)return t.previousElementSibling;
t=t.previousElementSibling}return null},_getNextVisibleItem:function(t){for(;t.nextElementSibling;){
if(t.nextElementSibling.hidden===!1)return t.nextElementSibling;t=t.nextElementSibling;
}return null}},{},t)}(HTMLElement),E=l("bx-patternslist",C);return{get default(){
return E}}}),System.registerModule("elements/bx-patternslistitem",[],function(){"use strict";
System.get("elements/bx-input");var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("classes/shortcut")["default"],r='\n  <style>@import url("stylesheets/bx-patternslistitem.css");</style>\n\n  <main>\n    <img id="thumbnail"></img>\n    <bx-input id="input" skin="bx-defscontrols"></bx-input>\n  </main>\n',a=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this.tabIndex=0,this.draggable=!0,this.addEventListener("dragstart",function(e){
return t._onHostDragStart(e)}),this.addEventListener("dragend",function(e){return t._onHostDragEnd(e);
}),this.addEventListener("keydown",function(e){return t._onHostKeyDown(e)}),this._shadowRoot.addEventListener("dblclick",function(e){
return t._onShadowRootDblClick(e)}),this["#input"].addEventListener("focusin",function(e){
return t._onInputFocusIn(e)}),this["#input"].addEventListener("focusout",function(e){
return t._onInputFocusOut(e)}),this["#input"].addEventListener("keydown",function(e){
return t._onInputKeyDown(e)}),this["#input"].addEventListener("change",function(e){
return t._onInputChange(e)}),this["#input"].addEventListener("confirm",function(){
return t.focus()}),this["#input"].addEventListener("cancel",function(){return t.focus();
}),this["#input"].validate=function(e){return t._validateInputValue(e)}},attributeChangedCallback:function(t,e,n){
},get patternID(){return this.hasAttribute("patternid")?this.getAttribute("patternid"):null;
},set patternID(t){t?this.setAttribute("patternid",t):this.removeAttribute("patternid"),
this["#input"].value="#"+t},get thumbnail(){return this["#thumbnail"].src},set thumbnail(t){
null===t?this["#thumbnail"].src="":this["#thumbnail"].src=t},get highlighted(){return this.hasAttribute("highlighted");
},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},_onShadowRootDblClick:function(t){t.target===this["#thumbnail"]?body.canvas.editPattern(this.patternID):this["#input"].matches(":focus")===!1&&this["#input"].focus();
},_onHostDragStart:function(t){this._dragImage=e("img"),this._dragImage.id="drag-image",
this._dragImage.src=this["#thumbnail"].src,this._dragImage.style.position="fixed",
this._dragImage.style.transform="translate(9999px, 9999px)",this._dragImage.width=38,
this._dragImage.height=38,this._shadowRoot.append(this._dragImage),t.dataTransfer.setData("text","#"+this.patternID),
t.dataTransfer.setData("bx-patternslistitem/patternID",this.patternID),t.dataTransfer.setDragImage(this._dragImage,this._dragImage.width/2,this._dragImage.height/2);
},_onHostDragEnd:function(t){this._dragImage.remove()},_onHostKeyDown:function(t){
var e=i.fromEvent(t);e.matches("Enter")&&(this["#input"].focus(),this["#input"].selectAll());
},_onInputFocusIn:function(){this["#input"].style.pointerEvents="auto",this["#input"].selectAll(),
this.draggable=!1,this.setAttribute("inputmode","")},_onInputFocusOut:function(t){
this["#input"].style.pointerEvents="none",this.draggable=!0,this.removeAttribute("inputmode");
},_onInputKeyDown:function(t){var e=i.fromEvent(t);(e.matches("Enter")||e.matches("Escape"))&&(t.stopPropagation(),
this.focus())},_onInputChange:function(){var t=this.patternID,e=this["#input"].value.substring(1);
this.dispatchEvent(new CustomEvent("rename",{bubbles:!0,detail:{oldID:t,newID:e}}));
},_validateInputValue:function(t){var e=/^#[a-z]+[a-z0-9\-_]*$/i.test(t);return e?t==="#"+this.patternID?!0:null===body.canvas.content.querySelector(t)?!0:!1:!1;
}},{},t)}(HTMLElement),s=n("bx-patternslistitem",a);return{get default(){return s;
}}}),System.registerModule("elements/bx-preferencesbody",[],function(){"use strict";
var t=System.get("elements/bx-body")["default"];System.get("elements/bx-button"),
System.get("elements/bx-checkbox"),System.get("elements/bx-shortcutseditor");var e=System.get("utils/dom").registerElement,n='\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-preferencesbody.css");</style>\n\n  <main id="main">\n    <div id="buttons">\n      <bx-button\n        id="general-button"\n        data-view="general"\n        icon="prefs-general"\n        iconsize="25"\n        skin="bx-preferences"\n        label="General">\n      </bx-button>\n\n      <bx-button\n        id="shortcuts-button"\n        data-view="shortcuts"\n        icon="prefs-shortcuts"\n        iconsize="25"\n        skin="bx-preferences"\n        label="Shortcuts">\n      </bx-button>\n    </div>\n\n    <div id="views">\n      <div data-view="general" class="view" hidden>\n        <header>\n          <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n            <use xlink:href="images/icons.svg#prefs-general" width="100" height="100"></use>\n          </svg>\n          <h1>General</h1>\n        </header>\n\n        <section>\n          <bx-checkbox\n            id="experimental-features-checkbox"\n            label="Enable experimental features">\n          </bx-checkbox>\n        </section>\n      </div>\n\n      <div data-view="shortcuts" class="view" hidden>\n        <header>\n          <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n            <use xlink:href="images/icons.svg#prefs-shortcuts" width="100" height="100"></use>\n          </svg>\n          <h1>Shortcuts</h1>\n        </header>\n\n        <section>\n          <bx-shortcutseditor></bx-shortcutseditor>\n        </section>\n      </div>\n    </div>\n  </main>\n',i=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;$traceurRuntime.superGet(this,e.prototype,"createdCallback").call(this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=n;
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this.bridge.postMessage("getBackendName",null,function(e){
"electron"===e&&t["#main"].setAttribute("data-extra-whitespace","")}),this.getConfig("bx-preferences:currentView").then(function(e){
t._toggleView(e||"general")}),this.getConfig("bx-preferences:experimentalFeatures").then(function(e){
e===!0&&t["#experimental-features-checkbox"].setAttribute("checked","")}),this["#buttons"].addEventListener("click",function(e){
t._onButtonsClick(e)}),this["#experimental-features-checkbox"].addEventListener("change",function(){
t._onExperimentalFeaturesCheckboxChange()})},_onButtonsClick:function(t){"bx-button"===t.target.localName&&0===t.button&&this._toggleView(t.target.dataset.view);
},_onExperimentalFeaturesCheckboxChange:function(){this.setConfig("bx-preferences:experimentalFeatures",this["#experimental-features-checkbox"].checked);
},_toggleView:function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#views"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.dataset.view===t?s.hidden=!1:s.hidden=!0}}catch(o){n=!0,i=o}finally{
try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=this["#buttons"].children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;v.dataset.view===t?v.pressed=!0:v.pressed=!1}}catch(f){u=!0,c=f}finally{
try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}this.setConfig("bx-preferences:currentView",t);
}},{},t)}(t),r=e("body","bx-preferencesbody",i);return{get default(){return r}}}),
System.registerModule("elements/bx-quadbeziertool",[],function(){"use strict";var t=System.get("utils/dom").registerElement,e=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
enabledCallback:function(){body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("draw-quad-segs-hud");
},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("draw-quad-segs-hud");
}},{},t)}(HTMLElement),n=t("bx-quadbeziertool",e);return{get default(){return n}};
}),System.registerModule("elements/bx-quadsegsdrawhud",[],function(){"use strict";
var t=System.get("classes/enum")["default"],e=System.get("classes/shortcut")["default"],n=System.get("classes/vector")["default"],i=System.get("utils/dom"),r=i.registerElement,a=i.createElement,s=i.createSVGPoint,o=System.get("utils/path").reversePath,l=System.get("utils/transform"),u=l.getTransformToElement,c=l.reduceTransform;
System.get("elements/bx-quadsegsketch");var d=10,h=new t("path"),v='\n  <style>@import url("stylesheets/bx-quadsegsdrawhud.css");</style>\n  <g id="node-grippies"></g>\n  <g id="seg-sketch" is="bx-quadsegsketch"></g>\n',f=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=v;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}},enabledCallback:function(){var t=this;this._mode="select",
this._currentPath=null,window.addEventListener("keydown",this._keyDownListener=function(e){
t._onKeyDown(e)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)}),body.canvas.content.addEventListener("mousedown",this._canvasMouseDownListener=function(e){
t._onContentMouseDown(e)}),this["#node-grippies"].addEventListener("mousedown",this._nodeGrippiesMouseDownListener=function(e){
t._onNodeGrippieMouseDown(e)}),this._onSelectedElementsChange()},disabledCallback:function(){
window.removeEventListener("keydown",this._keyDownListener),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.content.removeEventListener("mousedown",this._canvasMouseDownListener),
this["#node-grippies"].removeEventListener("mousedown",this._nodeGrippiesMouseDownListener),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide()},_onSelectedElementsChange:function(){
this._updateNodeGrippies()},_onZoomChange:function(){this._updateNodeGrippiesSize();
},_onContentMutation:function(t){var e=t.detail;if("childList"===e.type){var n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e.removedNodes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;(o===this._currentPath||o.contains(this._currentPath))&&(this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies())}}catch(l){
i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}else(e.target===this._currentPath||e.target.contains(this._currentPath))&&this._updateNodeGrippies();
},_onContentMouseDown:function(t){var e,i,r=this,a=s(t.clientX,t.clientY),o=0;window.addEventListener("mousemove",e=function(t){
var e=s(t.clientX,t.clientY),i=new n(a,e).length;i>o&&(o=i)}),window.addEventListener("mouseup",i=function(n){
window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i),
r._onContentClick(t,n),4>o&&r._onContentDirectClick(t,n)})},_onContentClick:function(t){
var e,n;if("draw-forward"===this._mode){var i=this._currentPath.getPathData({normalize:!0
}),r=[];i.length>1&&body.canvas.undoManager.checkpoint("Draw path segment"),(e=r).push.apply(e,$traceurRuntime.spread(i)),
this["#seg-sketch"].curved?r.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):r.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),this._currentPath.setPathData(r)}else if("draw-backward"===this._mode){body.canvas.undoManager.checkpoint("Draw path segment");
var a=this._currentPath.getPathData({normalize:!0}),s=[];s.push({type:"M",values:[this["#seg-sketch"].startPoint.x,this["#seg-sketch"].startPoint.y]
}),this["#seg-sketch"].curved?s.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):s.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),(n=s).push.apply(n,$traceurRuntime.spread(a.slice(1))),this._currentPath.setPathData(s);
}},_onContentDirectClick:function(t){var e=t,n=e.clientX,i=e.clientY;if("select"===this._mode){
body.canvas.undoManager.checkpoint("Draw path segment");var r=a("svg:path");r.style.stroke="black",
r.style.fill="none";var o=body.canvas.currentContainer||body.canvas.currentArtboard;
o.append(r);var l=r.getScreenCTM().inverse(),u=s(n,i).matrixTransform(l),c=u.x,d=u.y;
r.setAttribute("d","M "+c+" "+d),body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[r]),
this._mode="draw-forward",this._currentPath=r,this["#seg-sketch"].show(r,"end")}},
_onNodeGrippieMouseDown:function(t){var e,n,i=this,r=t.target;this["#node-grippies"].addEventListener("mouseup",e=function(t){
i["#node-grippies"].removeEventListener("mouseup",e),window.removeEventListener("mouseup",n);
var a=t.target,s=i._onNodeGrippieClick(r,t);r!==a||s||i._onNodeGrippieDirectClick(r,t);
}),window.addEventListener("mouseup",n=function(t){i["#node-grippies"].removeEventListener("mouseup",e),
window.removeEventListener("mouseup",n),i._onNodeGrippieClick(r,t)})},_onNodeGrippieClick:function(t,e){
var n,i,r,a,s;if("select"===this._mode)return!1;if(t[h.path]===this._currentPath){
var l=t.getAttribute("data-position"),d=this._currentPath,v=d.getPathData({normalize:!0
}),f=v[0],m=v[v.length-1];if("draw-forward"===this._mode&&"start"===l){body.canvas.undoManager.checkpoint("Draw path segment");
var g=$traceurRuntime.spread(v);this["#seg-sketch"].curved?g.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,f.values[0],f.values[1]]
}):g.push({type:"L",values:[f.values[0],f.values[1]]}),g.push({type:"Z",values:[]
}),d.setPathData(g),this._updateNodeGrippies()}else if("draw-backward"===this._mode&&"end"===l){
body.canvas.undoManager.checkpoint("Draw path segment");var b=[];b.push({type:"M",
values:["C"===m.type?m.values[4]:m.values[0],"C"===m.type?m.values[5]:m.values[1]]
}),this["#seg-sketch"].curved?b.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,f.values[0],f.values[1]]
}):b.push({type:"L",values:[f.values[0],f.values[1]]}),(n=b).push.apply(n,$traceurRuntime.spread(v.slice(1))),
b.push({type:"Z",values:[]}),d.setPathData(b),this._updateNodeGrippies()}return this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),!0}var p=t.getAttribute("data-position"),y=this._currentPath,_=t[h.path],x=y.getPathData({
normalize:!0});x.length>1&&body.canvas.undoManager.checkpoint("Draw path segment");
var w=u(_,y);if(_.setAttribute("transform",w.toString()),c(_),"draw-forward"===this._mode){
"end"===p&&o(_);var S=[],C=_.getPathData({normalize:!0});(i=S).push.apply(i,$traceurRuntime.spread(x)),
this["#seg-sketch"].curved?S.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,C[0].values[0],C[0].values[1]]
}):S.push({type:"L",values:[C[0].values[0],C[0].values[1]]}),(r=S).push.apply(r,$traceurRuntime.spread(C.slice(1))),
y.setPathData(S),_.setPathData([]),_.remove()}else if("draw-backward"===this._mode){
"start"===p&&o(_);var E=_.getPathData({normalize:!0}),k=[];(a=k).push.apply(a,$traceurRuntime.spread(E)),
this["#seg-sketch"].curved?k.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,x[0].values[0],x[0].values[1]]
}):k.push({type:"L",values:[x[0].values[0],x[0].values[1]]}),(s=k).push.apply(s,$traceurRuntime.spread(x.slice(1))),
y.setPathData(k),_.setPathData([]),_.remove()}return body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==_}),this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),
!0},_onNodeGrippieDirectClick:function(t,e){if("select"===this._mode){this._currentPath=t[h.path];
var n=t.getAttribute("data-position");"start"===n?(this._mode="draw-backward",this["#seg-sketch"].show(t[h.path],"start")):(this._mode="draw-forward",
this["#seg-sketch"].show(t[h.path],"end"))}},_onKeyDown:function(t){if("draw-forward"===this._mode||"draw-backward"===this._mode){
var n=e.fromEvent(t);if(n.matches("Enter")||n.matches("Escape"))t.stopPropagation(),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies();else if(n.matches("Shift","Enter")){
t.stopPropagation();var i={type:"Z",values:[]},r=this._currentPath.getPathData();r.push(i),
this._currentPath.setPathData(r),this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),
this._updateNodeGrippies()}}},_updateNodeGrippies:function(){this["#node-grippies"].innerHTML="";
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._getSelectedPaths()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var o=i.value,l=o.getPathData({normalize:!0}),c=void 0,d=void 0;0===l.length?(c=null,
d=null):1===l.length?(c=l[0],d=null):l.length>1&&(c=l[0],d=l[l.length-1]);var v=u(o,this),f=d&&"Z"===d.type;
if(c&&!f){var m=s(c.values[0],c.values[1]).matrixTransform(v),g=a("svg:ellipse");g.setAttribute("class","node-grippie"),
g.setAttribute("cx",m.x),g.setAttribute("cy",m.y),g.setAttribute("data-position","start"),
g[h.path]=o,this["#node-grippies"].append(g)}if(d&&!f){var b=void 0;"M"===d.type||"L"===d.type?b=s(d.values[0],d.values[1]).matrixTransform(v):"C"===d.type&&(b=s(d.values[4],d.values[5]).matrixTransform(v));
var p=a("svg:ellipse");p.setAttribute("class","node-grippie"),p.setAttribute("cx",b.x),
p.setAttribute("cy",b.y),p.setAttribute("data-position","end"),p[h.path]=o,this["#node-grippies"].append(p);
}}}catch(y){e=!0,n=y}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateNodeGrippiesSize()},_updateNodeGrippiesSize:function(){var t=d/2/body.canvas.scale,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#node-grippies"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.setAttribute("rx",t),s.setAttribute("ry",t)}}catch(o){n=!0,i=o}finally{
try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_getSelectedPaths:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("is")===!1?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),m=r("g","bx-quadsegsdrawhud",f);return{get default(){
return m}}}),System.registerModule("elements/bx-quadsegsketch",[],function(){"use strict";
var t=System.get("utils/dom"),e=t.registerElement,n=t.createSVGPoint,i=System.get("utils/point"),r=i.getPointBetweenTwoPoints,a=i.getNearestPointOnLine,s=i.snapPointToAngleMultiple,o=System.get("utils/transform").getTransformToElement,l=System.get("classes/vector")["default"],u=Object.freeze,c='\n  <style>@import url("stylesheets/bx-quadsegsketch.css");</style>\n  <path id="outline" d="M 0 0 Q 0 0 0 0"></path>\n  <line id="control-line-1"></line>\n  <line id="control-line-2"></line>\n  <circle id="control-point-grippie"></circle>\n',d=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=c;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){e=!0,n=s}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,
this._clientX=null,this._clientY=null},get startPoint(){return u(n(this._startPoint));
},set startPoint(t){throw new Error("startPoint property is read-only.")},get endPoint(){
return u(n(this._endPoint))},set endPoint(t){throw new Error("endPoint property is read-only.");
},get controlPoint(){return u(n(this._controlPoint))},set controlPoint(t){throw new Error("controlPoint property is read-only.");
},get curved(){var t=r(this._startPoint,this._endPoint);return this._controlPoint.x!==t.x||this._controlPoint.y!==t.y;
},show:function(t){var e=void 0!==arguments[1]?arguments[1]:"end";this._position=e,
this._path=t,this._snap="none",this.style.visibility="visible",this._hasListeners===!1&&this._addListeners(),
this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),
this._updateOutlines()},hide:function(){this._path=null,this._clientX=null,this._clientY=null,
this.style.visibility="hidden",this._hasListeners===!0&&this._removeListeners()},
_addListeners:function(){var t=this;this._hasListeners=!0,this._mouseDown=!1,body.addEventListener("modkeyschange",this._modKeysChangeListener=function(){
t._mouseDown===!1&&(t._updateSnapProperty(),t._updatePointProperties(),t._updateOutlines());
}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)}),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(e){
var i,r,a,o,l=t._path.getScreenCTM().inverse();if(t._mouseDown=!0,t._mouseDownPoint=n(e.clientX,e.clientY),
t._mouseDownPoint=t._mouseDownPoint.matrixTransform(l),t._mouseDownControlPoint=n(t._controlPoint),
"end"===t._position)if("paraxialPolygon"===t._snap){var u=(i=s(t._startPoint,t._endPoint,45)[Symbol.iterator](),
(r=i.next()).done?void 0:r.value);t._endPoint=u}else t._endPoint=n(t._mouseDownPoint);else if("start"===t._position)if("paraxialPolygon"===t._snap){
var c=(a=s(t._startPoint,t._endPoint,45)[Symbol.iterator](),(o=a.next()).done?void 0:o.value);
t._endPoint=c}else t._endPoint=n(t._firstSeg.values[0],t._firstSeg.values[1])}),window.addEventListener("mousemove",this._mouseMoveListener=function(e){
t._clientX=e.clientX,t._clientY=e.clientY,t._updatePointProperties(),t._updateOutlines();
}),window.addEventListener("mouseup",this._mouseUpListener=function(e){t._mouseDown=!1,
t._updateSnapProperty()})},_removeListeners:function(){this._hasListeners=!1,body.removeEventListener("modkeyschange",this._modKeysChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("mousedown",this._mouseDownListener),window.removeEventListener("mousemove",this._mouseMoveListener),
window.removeEventListener("mouseup",this._mouseUpListener)},_onContentMutation:function(t){
var e=t.detail;(e.target===this._path||e.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),
this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())},
_updateSegProperties:function(){if("end"===this._position){var t=this._path.getPathData({
normalize:!0}),e=t[t.length-1];this._lastSeg=e;for(var i=t.length-1;i>=0;i-=1){var r=t[i];
if("Z"!==r.type){this._lastNonZSeg=r;break}}"C"===e.type?this._lastSegControlPoint=n(e.values[2],e.values[3]):"M"===e.type||"L"===e.type?this._lastSegControlPoint=n(e.values[0],e.values[1]):this._lastSegControlPoint=null,
"C"===this._lastSeg.type?this._lastSegIsSmooth=e.values[2]!==e.values[4]||e.values[3]!==e.values[5]:this._lastSegIsSmooth=!1;
}else if("start"===this._position){var a=this._path.getPathData({normalize:!0}),s=a[0],o=a[1];
this._firstSeg=s,"C"===o.type?this._secondSegControlPoint=n(o.values[0],o.values[1]):"M"===o.type||"L"===o.type?this._secondSegControlPoint=n(s.values[0],s.values[1]):this._secondSegControlPoint=null,
"C"===o.type?this._secondSegIsSmooth=o.values[0]!==this._firstSeg.values[0]&&o.values[1]!==this._firstSeg.values[1]:this._secondSegIsSmooth=!1;
}},_updatePointProperties:function(){var t,e,i,o,u,c,d,h;if(this._mouseDown===!1){
var v=this._path.getScreenCTM().inverse();if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=n(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=n(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),
null===this._clientX?this._endPoint=n(this._startPoint):this._endPoint=n(this._clientX,this._clientY).matrixTransform(v)):"start"===this._position&&(null===this._clientX?this._startPoint=n(this._firstSeg.values[0],this._firstSeg.values[1]):this._startPoint=n(this._clientX,this._clientY).matrixTransform(v),
this._endPoint=n(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){
var f,m=new l(this._startPoint,this._endPoint);"end"===this._position?f=new l(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(f=new l(this._endPoint,this._secondSegControlPoint)),
f=f.negate().scale(m.length/2),"end"===this._position?this._controlPoint=n(this._startPoint.x+f.x,this._startPoint.y+f.y):"start"===this._position&&(this._controlPoint=n(this._endPoint.x+f.x,this._endPoint.y+f.y));
}else if("polygon"===this._snap)this._controlPoint=r(this._startPoint,this._endPoint);else if("paraxialPolygon"===this._snap){
if("end"===this._position){var g=(t=s(this._startPoint,this._endPoint,45)[Symbol.iterator](),
(e=t.next()).done?void 0:e.value);this._endPoint=g}else if("start"===this._position){
var b=(i=s(this._endPoint,this._startPoint,45)[Symbol.iterator](),(o=i.next()).done?void 0:o.value);
this._startPoint=b}this._controlPoint=r(this._startPoint,this._endPoint)}}else if(this._mouseDown===!0){
var p=this._path.getScreenCTM().inverse(),y=n(this._clientX,this._clientY);y=y.matrixTransform(p);
var _=new l(this._mouseDownPoint,y);if(this._controlPoint=n(this._mouseDownControlPoint.x-_.x,this._mouseDownControlPoint.y-_.y),
"none"===this._snap)if("end"===this._position){var x=a(this._lastSegControlPoint,this._startPoint,this._controlPoint,!0),w=(u=x[Symbol.iterator](),
(c=u.next()).done?void 0:c.value),S=(c=u.next()).done?void 0:c.value;1>S?this._controlPoint=n(this._startPoint):this._controlPoint=w;
}else if("start"===this._position){var C=a(this._secondSegControlPoint,this._endPoint,this._controlPoint,!0),E=(d=C[Symbol.iterator](),
(h=d.next()).done?void 0:h.value),k=(h=d.next()).done?void 0:h.value;1>k?this._controlPoint=n(this._endPoint):this._controlPoint=E;
}}},_updateSnapProperty:function(){var t=body.modKeys,e=t.ctrl,n=(t.alt,t.shift);e&&!n?this._snap="polygon":e&&n?this._snap="paraxialPolygon":this._snap="none",
"end"===this._position?this._lastSegIsSmooth||"none"!==this._snap||(this._snap="polygon"):"start"===this._position&&(this._secondSegIsSmooth||"none"!==this._snap||(this._snap="polygon"));
},_updateOutlines:function(){var t=o(this._path,this),e=this._startPoint.matrixTransform(t),n=this._endPoint.matrixTransform(t),i=this._controlPoint.matrixTransform(t),r=3/body.canvas.scale,a=[{
type:"M",values:[e.x,e.y]},{type:"Q",values:[i.x,i.y,n.x,n.y]}];this["#outline"].setPathData(a),
this["#control-point-grippie"].cx.baseVal.value=i.x,this["#control-point-grippie"].cy.baseVal.value=i.y,
this["#control-point-grippie"].r.baseVal.value=r,this["#control-line-1"].x1.baseVal.value=e.x,
this["#control-line-1"].y1.baseVal.value=e.y,this["#control-line-1"].x2.baseVal.value=i.x,
this["#control-line-1"].y2.baseVal.value=i.y,this["#control-line-2"].x1.baseVal.value=n.x,
this["#control-line-2"].y1.baseVal.value=n.y,this["#control-line-2"].x2.baseVal.value=i.x,
this["#control-line-2"].y2.baseVal.value=i.y}},{},t)}(SVGGElement),h=e("g","bx-quadsegsketch",d);
return{get default(){return h}}}),System.registerModule("elements/bx-radialgradienthud",[],function(){
"use strict";var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/dom"),n=e.createElement,i=e.createSVGMatrix,r=e.createSVGPoint,a=e.registerElement,s=System.get("utils/event").isMouseMoveIntentional,o=System.get("utils/gradient").getGradientColorAtOffset,l=System.get("utils/math").normalize,u=(System.get("utils/matrix").compareMatrixes,
System.get("utils/math")),c=(u.sin,u.cos,u.degToRad,u.round,System.get("utils/paint")),d=c.getPaintType,h=c.getPaintServer,v=(System.get("utils/point").comparePoints,
System.get("utils/relationship")),f=v.getGraphicsElements,m=v.queryStylableElements,g=System.get("utils/time").throttle,b=System.get("utils/transform"),p=b.getTransformFromPoints,y=b.getTransformToElement,_=System.get("utils/vector").getAngleBetweenVectors,x=System.get("utils/point"),w=x.getPointAtFraction,S=x.getNearestPointOnLine,C=x.getDistanceBetweenPoints,E=x.snapPointToAngle,k=x.snapPointToAngleMultiple,A=System.get("classes/decomposed-transform")["default"],L=System.get("classes/enum")["default"],M=System.get("classes/shortcut")["default"],j=System.get("classes/vector")["default"],T=(Object.keys,
new L("gradient","gradientUser","stop")),P=SVGUnitTypes,R=P.SVG_UNIT_TYPE_USERSPACEONUSE,O=P.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,I=6,D='\n  <style>@import url("stylesheets/bx-radialgradienthud.css");</style>\n\n  <defs>\n    <g class="subhud" tabindex="0">\n      <line class="r2-outline"></line>\n      <line class="slider-shadow"></line>\n      <line class="slider"></line>\n      <circle class="r2-grippie grippie"></circle>\n      <g class="stop-grippies"></g>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',V=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this.commands={selectAll:{enabled:function(){
return!0},exec:function(){return t._selectAllStops()}},deselectAll:{enabled:function(){
return!0},exec:function(){return t._deselectAllStops()}}},this.tabIndex=-1,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=D,this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),
this._subhuds=this._shadowRoot.querySelector("#subhuds"),this._updateAll200ms=g(this._updateAll,200,this),
this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._shadowRoot.addEventListener("keydown",function(e){
return t._onShadowRootKeyDown(e)}),this._shadowRoot.addEventListener("mousedown",function(e){
return t._onShadowRootMouseDown(e)}),this._shadowRoot.addEventListener("mouseup",function(e){
return t._onShadowRootMouseUp(e)}),this._shadowRoot.addEventListener("dblclick",function(e){
return t._onShadowRootDblClick(e)})},enabledCallback:function(){var t=this;this._onSelectedElementsChange(),
body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("mousedown",this._canvasMouseDownListener=function(e){
t._onCanvasMouseDown(e)}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
t._onUndoOrRedo()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
t._onUndoOrRedo()})},disabledCallback:function(){this._selectStops([]),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("mousedown",this._canvasMouseDownListener),
body.canvas.undoManager.removeEventListener("undo",this._undoListener),body.canvas.undoManager.removeEventListener("redo",this._redoListener);
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},get selectedStops(){return $traceurRuntime.spread(this._selectedStops)},_onSelectedElementsChange:function(){
this._updateAll200ms()},_onSelectedTextRangeChange:function(){this._updateAll200ms();
},_onContentMutation:function(t){this._draggedGrippie?this._updatePositions(this._draggedGrippie.closest(".subhud")):this._draggedSlider?this._updatePositions(this._draggedSlider.parentElement):"style"===t.attributeName&&"stop"===t.target.localName?this._updateGrippiesColor():this._updateAll200ms();
},_onZoomChange:function(){this._updateGrippiesSize()},_onUndoOrRedo:function(){this._selectStops([]);
},_onCanvasMouseDown:function(t){0===t.button&&t.target!==this&&this._selectStops([]);
},_onShadowRootMouseDown:function(t){var e=this;if(0===t.button){t.target.classList.contains("slider")?this._onSliderMouseDown(t):t.target.classList.contains("stop-grippie")?this._onStopGrippieMouseDown(t):t.target.classList.contains("r2-grippie")&&this._onRadiusGrippieOrSliderEdgeMouseDown(t,"r2");
var n,i;this._mouseMovedAfterMouseDown=!1,this._mouseDownTimeStamp=t.timeStamp,window.addEventListener("mousemove",n=function(){
e._mouseMovedAfterMouseDown=!0}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mouseup",i),
window.removeEventListener("mousemove",n)})}},_onShadowRootMouseUp:function(t){t.target.classList.contains("stop-grippie")&&this._onStopGrippieMouseUp(t);
},_onShadowRootDblClick:function(t){t.timeStamp-this._mouseDownTimeStamp<100&&t.target.classList.contains("slider")&&this._onSliderDblClick(t);
},_onStopGrippieMouseDown:function(t){var e=t.target,n=e[T.stop],i=n.closest("radialGradient"),r=this._selectedStops.filter(function(t){
return t.closest("radialGradient")===i}),a=function(){var t=0,e=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=i.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(e[t++]=l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}(),s=a[0],o=a[a.length-1],l=body.modKeys,u=l.alt,c=l.shift;
this._mouseDownSelectedStops=$traceurRuntime.spread(r),c===!1?r.includes(n)===!1&&this._selectStops([n]):c===!0&&r.includes(n)===!1&&(r.push(n),
this._selectStops([r])),n===s&&0===n.offset.baseVal&&u===!1?this._onCenterGrippieOrSliderBodyMouseDown(t):n===o&&1===n.offset.baseVal&&u===!1?this._onRadiusGrippieOrSliderEdgeMouseDown(t,"r1"):this._onDraggableStopGrippieMouseDown(t);
},_onStopGrippieMouseUp:function(t){if(!this._mouseMovedAfterMouseDown){var e=t.target,n=this._mouseDownSelectedStops,i=e[T.stop],r=e.closest(".subhud"),a=r[T.gradientUser],s=body.modKeys.shift,o=[],l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=body.canvas.selectedElements[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;if("g"!==v.localName&&"a"!==v.localName||!v.contains(a))o.push(v);else{
var m=!0,g=!1,b=void 0;try{for(var p=void 0,y=f($traceurRuntime.spread(v.children),!0)[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value;o.unshift(_)}}catch(x){g=!0,b=x}finally{try{m||null==y["return"]||y["return"]();
}finally{if(g)throw b}}}}}catch(w){u=!0,c=w}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}o.remove(a),o.unshift(a),body.canvas.selectedElements=o;for(var S=a.parentElement;S!==body.canvas.currentArtboard;S=S.parentElement)if("g"===S.localName||"a"===S.localName){
body.canvas.currentContainer=S;break}s===!0&&this._mouseDownSelectedStops.includes(i)===!0&&(n.remove(i),
this._selectStops([n]))}},_onDraggableStopGrippieMouseDown:function(t){var e,n,i,a,s=this,o=t.target,l=o.closest(".subhud"),u=l.querySelector(".slider"),c=this._getMoveOffsetsForSelectedStops(),d=this.getScreenCTM(),h=d.inverse(),v=r(u.x1.baseVal.value,u.y1.baseVal.value),f=r(u.x2.baseVal.value,u.y2.baseVal.value),m=r(o.cx.baseVal.value,o.cy.baseVal.value),g=m.matrixTransform(d),b=(e=S(v,f,m,!1)[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),p=C(v,b)/C(v,f),y=!1;this._draggedGrippie=o,window.addEventListener("mousemove",i=function(e){
var n,i;y===!1&&(body.canvas.undoManager.checkpoint("Move gradient stop"),y=!0);var a=r(g.x+e.clientX-t.clientX,g.y+e.clientY-t.clientY),o=a.matrixTransform(h),l=(n=S(v,f,o,!1)[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),u=C(v,l)/C(v,f),d=u-p,m=!0,b=!1,_=void 0;try{for(var x=void 0,w=s._selectedStops[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){
var E=x.value,k=c.get(E),A=k.minOffset,L=k.maxOffset,M=k.initialOffset;A>M+d?E.setAttribute("offset",A):M+d>L?E.setAttribute("offset",L):E.setAttribute("offset",M+d);
}}catch(j){b=!0,_=j}finally{try{m||null==w["return"]||w["return"]()}finally{if(b)throw _;
}}}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",a),s._draggedGrippie=null})},_onRadiusGrippieOrSliderEdgeMouseDown:function(e){
var n,a,o,l,u,c,d,h,v=void 0!==arguments[1]?arguments[1]:"r1",f=this,m=$traceurRuntime.spread(this._subhuds.children).find(function(t){
return t.contains(e.target)}),g=m[T.gradient],b=m[T.gradientUser],y=t(b),x=b.getScreenCTM(),w=x.inverse(),S=A.fromSVGMatrix(x),C=i(g.gradientTransform.baseVal.consolidate().matrix),L=!1,M=!1;
e.target.matches(".grippie")?this._draggedGrippie=e.target:e.target.matches(".slider")&&(this._draggedSlider=e.target);
var P=function(){if(g.gradientUnits.baseVal===R){o=r(g.cx.baseVal.value,g.cy.baseVal.value),
l=r(g.cx.baseVal.value+g.r.baseVal.value,g.cy.baseVal.value),u=r(g.cx.baseVal.value,g.cy.baseVal.value-g.r.baseVal.value);
var t=o.matrixTransform(C),e=l.matrixTransform(C),n=u.matrixTransform(C);c=t.matrixTransform(x),
d=e.matrixTransform(x),h=n.matrixTransform(x)}else if(g.gradientUnits.baseVal===O){
o=r(g.cx.baseVal.valueInSpecifiedUnits,g.cy.baseVal.valueInSpecifiedUnits),l=r(g.cx.baseVal.valueInSpecifiedUnits+g.r.baseVal.valueInSpecifiedUnits,g.cy.baseVal.valueInSpecifiedUnits),
u=r(g.cx.baseVal.valueInSpecifiedUnits,g.cy.baseVal.valueInSpecifiedUnits-g.r.baseVal.valueInSpecifiedUnits);
var i=o.matrixTransform(C),a=l.matrixTransform(C),s=u.matrixTransform(C),v=r(y.x+i.x*y.width,y.y+i.y*y.height),f=r(y.x+a.x*y.width,y.y+a.y*y.height),m=r(y.x+s.x*y.width,y.y+s.y*y.height);
c=v.matrixTransform(x),d=f.matrixTransform(x),h=m.matrixTransform(x)}};window.addEventListener("mousemove",n=function(t){
var n,a,f,m;if(L===!1){if(!s(e,t,5))return;L=!0,body.canvas.undoManager.checkpoint("Transform gradient"),
P()}var b,x,A=body.modKeys,T=A.ctrl,I=A.shift;"r1"===v?(b=r(t.clientX+(d.x-e.clientX),t.clientY+(d.y-e.clientY)),
x=_(new j(c,d),new j(c,b))):"r2"===v&&(b=r(t.clientX+(h.x-e.clientX),t.clientY+(h.y-e.clientY)),
x=_(new j(c,h),new j(c,b)));var D=i().rotate(x,c.x,c.y),V=c.matrixTransform(D),N=d.matrixTransform(D),B=h.matrixTransform(D),z=new j(V,N),G=new j(V,B),U=new j(V,b);
if("r1"===v){if(z.length=U.length,N.x=V.x+z.x,N.y=V.y+z.y,T){var H=new j(V,h);G.length=U.length,
H.length=U.length,B.x=V.x+G.x,B.y=V.y+G.y,h.x=V.x+H.x,h.y=V.y+H.y}if(I){var F=k(V,N,22.5),q=(n=F[Symbol.iterator](),
(a=n.next()).done?void 0:a.value);(a=n.next()).done?void 0:a.value;N=q,M=!0}if(M){
var $=r(c.x,c.y-100),Y=_(new j(c,$),new j(c,N));B=S.scaleX<0&&S.scaleY<0?E(V,B,Y+90):E(V,B,Y-90);
}}else if("r2"===v){if(G.length=U.length,B.x=V.x+G.x,B.y=V.y+G.y,T){var X=new j(V,d);
z.length=U.length,X.length=U.length,N.x=V.x+z.x,N.y=V.y+z.y,d.x=V.x+X.x,d.y=V.y+X.y;
}if(I){var W=k(V,B,22.5),Z=(f=W[Symbol.iterator](),(m=f.next()).done?void 0:m.value);
(m=f.next()).done?void 0:m.value;B=Z,M=!0}if(M){var K=r(c.x,c.y-100),J=_(new j(c,K),new j(c,B));
N=S.scaleX<0&&S.scaleY<0?E(V,N,J-90):E(V,N,J+90)}}var Q,tt,et;if(g.gradientUnits.baseVal===R){
var nt=V.matrixTransform(w),it=N.matrixTransform(w),rt=B.matrixTransform(w);Q=nt.matrixTransform(C.inverse()),
tt=it.matrixTransform(C.inverse()),et=rt.matrixTransform(C.inverse())}else if(g.gradientUnits.baseVal===O){
var at=V.matrixTransform(w),st=N.matrixTransform(w),ot=B.matrixTransform(w),lt=r((at.x-y.x)/y.width,(at.y-y.y)/y.height),ut=r((st.x-y.x)/y.width,(st.y-y.y)/y.height),ct=r((ot.x-y.x)/y.width,(ot.y-y.y)/y.height);
Q=lt.matrixTransform(C.inverse()),tt=ut.matrixTransform(C.inverse()),et=ct.matrixTransform(C.inverse());
}var dt=p(o,l,u,Q,tt,et);g.setAttribute("gradientTransform",C.multiply(dt).toString());
}),window.addEventListener("mouseup",a=function(t){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",a),f._draggedGrippie=null,f._draggedSlider=null;
})},_onSliderMouseDown:function(t){var e=t.target,n=e.getScreenCTM(),i=r(t.clientX,t.clientY),a=r(e.x2.baseVal.value,e.y2.baseVal.value),s=a.matrixTransform(n),o=C(s,i);
5>=o?this._onRadiusGrippieOrSliderEdgeMouseDown(t,"r1"):this._onCenterGrippieOrSliderBodyMouseDown(t);
},_onCenterGrippieOrSliderBodyMouseDown:function(e){var n,a,o,l=this,u=e.target.closest(".subhud"),c=u[T.gradientUser],d=u[T.gradient],h=t(c),v=i(d.gradientTransform.baseVal.consolidate().matrix),f=c.getScreenCTM(),m=c.getScreenCTM().inverse(),g=r(e.clientX,e.clientY),b=!1;
if(e.target.matches(".grippie")?this._draggedGrippie=e.target:e.target.matches(".slider")&&(this._draggedSlider=e.target),
d.gradientUnits.baseVal===R){var p=r(d.cx.baseVal.value,d.cy.baseVal.value),y=p.matrixTransform(v);
o=y.matrixTransform(f)}else if(d.gradientUnits.baseVal===O){var _=r(d.cx.baseVal.valueInSpecifiedUnits,d.cy.baseVal.valueInSpecifiedUnits),x=_.matrixTransform(v),w=r(h.x+x.x*h.width,h.y+x.y*h.height);
o=w.matrixTransform(f)}window.addEventListener("mousemove",n=function(t){if(b===!1){
if(!s(e,t,5))return;b=!0,body.canvas.undoManager.checkpoint("Transform gradient");
}var n,i=r(t.clientX,t.clientY),a=new j(g,i);if(d.gradientUnits.baseVal===R){var l=r(o.x+a.x,o.y+a.y),u=l.matrixTransform(m);
n=u.matrixTransform(v.inverse())}else if(d.gradientUnits.baseVal===O){var c=r(o.x+a.x,o.y+a.y),f=c.matrixTransform(m),p=r((f.x-h.x)/h.width,(f.y-h.y)/h.height);
n=p.matrixTransform(v.inverse())}d.setAttribute("cx",n.x),d.setAttribute("cy",n.y);
}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",a),l._draggedGrippie=null,l._draggedSlider=null;
})},_onSliderDblClick:function(t){body.canvas.undoManager.checkpoint("Add Stop");for(var e=t.target,i=e.closest(".subhud"),a=i[T.gradient],s=this.getScreenCTM().inverse(),u=function(){
var t=0,e=[],n=!0,i=!1,r=void 0;try{for(var s=void 0,o=a.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(e[t++]=l)}}catch(u){i=!0,r=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw r}}return e}(),c=r(e.x1.baseVal.value,e.y1.baseVal.value),d=r(e.x2.baseVal.value,e.y2.baseVal.value),h=r(t.clientX,t.clientY).matrixTransform(s),v=C(c,h),f=C(c,d),m=l(v/f,0,1,5),g=null,b=0;b<u.length;b+=1){
var p=u[b];if(p.offset.baseVal<m)g=b;else if(p.offset.baseVal>m)break}var y=n("svg:stop");
y.setAttribute("offset",m),y.style.stopColor=o(a,m).toString("hex"),null===g?0===a.childElementCount?a.append(y):a.children[0].before(y):u[g].after(y),
this._selectStops([y])},_onShadowRootKeyDown:function(t){var e=M.fromEvent(t);0!==this._selectedStops.length&&(e.matches("Backspace")?(t.stopPropagation(),
this._deleteSelectedStops()):e.matches("Tab")?(t.stopPropagation(),t.preventDefault(),
this._selectNextStop()):e.matches("ArrowLeft")?(t.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Left"),
this._moveSelectedStops(1,"left"))):e.matches("ArrowRight")?(t.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Right"),
this._moveSelectedStops(1,"right"))):e.matches("Shift","ArrowLeft")?(t.stopPropagation(),
this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 10 Units Left"),
this._moveSelectedStops(10,"left"))):e.matches("Shift","ArrowRight")&&(t.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 10 Units Right"),
this._moveSelectedStops(10,"right"))))},_updateAll:function(){var t=this,e=m(this.context,body.canvas.selectedElements,body.canvas.selectedTextRange),i=e.filter(function(e){
return"radialGradient"===d(e,t.context)});if(0===i.length)this._subhuds.innerHTML="";else{
var r=this._shadowRoot.activeElement,a=[];this._subhuds.innerHTML="";var s=!0,o=!1,l=void 0;
try{var u,c,v,f,g=this,b=function(){var t=p.value,e=h(t,g.context);if(a.includes(e))return 0;
a.push(e);var i=function(){var t=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[t++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),r=g._subhudTemplate.cloneNode(!0);r[T.gradient]=e,
r[T.gradientUser]=t;var s=r.querySelector(".stop-grippies"),o=document.createDocumentFragment();
u=!0,c=!1,v=void 0;try{for(var l=void 0,d=i[Symbol.iterator]();!(u=(l=d.next()).done);u=!0){
var f=l.value,m=n("svg:circle");m.setAttribute("class","stop-grippie grippie"),m[T.stop]=f,
f.offset.baseVal>.95?o.prepend(m):s.append(m)}}catch(b){c=!0,v=b}finally{try{u||null==d["return"]||d["return"]();
}finally{if(c)throw v}}s.append(o),g._subhuds.append(r)};t:for(var p=void 0,y=i[Symbol.iterator]();!(s=(p=y.next()).done);s=!0)switch(f=b()){
case 0:continue t}}catch(_){o=!0,l=_}finally{try{s||null==y["return"]||y["return"]();
}finally{if(o)throw l}}if(r){var x=$traceurRuntime.spread(this._subhuds.children).find(function(t){
return t[T.gradient]===r[T.gradient]});x&&x.focus()}this._updatePositions(),this._updateGrippiesSize(),
this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder();
}},_updatePositions:function(){var e=void 0!==arguments[0]?arguments[0]:null,n=!0,a=!1,s=void 0;
try{var o,l,u,c,d,h,v,f=this,m=function(){var n=g.value;if(e&&n!==e)return 0;var a=n[T.gradient],s=n[T.gradientUser],v=function(){
var t=0,e=[],n=!0,i=!1,r=void 0;try{for(var s=void 0,o=a.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(e[t++]=l)}}catch(u){i=!0,r=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw r}}return e}(),m=i(a.gradientTransform.baseVal.consolidate().matrix),b=y(s,f),p=n.querySelector(".slider"),_=n.querySelector(".slider-shadow"),x=$traceurRuntime.spread(n.querySelector(".stop-grippies").children),S=n.querySelector(".r2-grippie"),C=n.querySelector(".r2-outline");
if(a.gradientUnits.baseVal===R){var E=r(a.cx.baseVal.value,a.cy.baseVal.value),k=r(a.cx.baseVal.value+a.r.baseVal.value,a.cy.baseVal.value),A=r(a.cx.baseVal.value,a.cy.baseVal.value-a.r.baseVal.value),L=E.matrixTransform(m),M=k.matrixTransform(m),j=A.matrixTransform(m),P=L.matrixTransform(b),I=M.matrixTransform(b),D=j.matrixTransform(b);
p.setAttribute("x1",P.x),p.setAttribute("y1",P.y),p.setAttribute("x2",I.x),p.setAttribute("y2",I.y),
_.setAttribute("x1",P.x),_.setAttribute("y1",P.y),_.setAttribute("x2",I.x),_.setAttribute("y2",I.y),
C.setAttribute("x1",P.x),C.setAttribute("y1",P.y),C.setAttribute("x2",D.x),C.setAttribute("y2",D.y),
S.setAttribute("cx",D.x),S.setAttribute("cy",D.y),o=!0,l=!1,u=void 0;try{for(var V=function(){
var t=N.value,e=x.find(function(e){return e[T.stop]===t}),n=w(P,I,t.offset.baseVal);
e.cx.baseVal.value=n.x,e.cy.baseVal.value=n.y},N=void 0,B=v[Symbol.iterator]();!(o=(N=B.next()).done);o=!0)V();
}catch(z){l=!0,u=z}finally{try{o||null==B["return"]||B["return"]()}finally{if(l)throw u;
}}}else if(a.gradientUnits.baseVal===O){var G=t(s),U=r(a.cx.baseVal.valueInSpecifiedUnits,a.cy.baseVal.valueInSpecifiedUnits),H=r(a.cx.baseVal.valueInSpecifiedUnits+a.r.baseVal.valueInSpecifiedUnits,a.cy.baseVal.valueInSpecifiedUnits),F=r(a.cx.baseVal.valueInSpecifiedUnits,a.cy.baseVal.valueInSpecifiedUnits-a.r.baseVal.valueInSpecifiedUnits),q=U.matrixTransform(m),$=H.matrixTransform(m),Y=F.matrixTransform(m),X=r(G.x+q.x*G.width,G.y+q.y*G.height),W=r(G.x+$.x*G.width,G.y+$.y*G.height),Z=r(G.x+Y.x*G.width,G.y+Y.y*G.height),K=X.matrixTransform(b),J=W.matrixTransform(b),Q=Z.matrixTransform(b);
p.setAttribute("x1",K.x),p.setAttribute("y1",K.y),p.setAttribute("x2",J.x),p.setAttribute("y2",J.y),
_.setAttribute("x1",K.x),_.setAttribute("y1",K.y),_.setAttribute("x2",J.x),_.setAttribute("y2",J.y),
C.setAttribute("x1",K.x),C.setAttribute("y1",K.y),C.setAttribute("x2",Q.x),C.setAttribute("y2",Q.y),
S.setAttribute("cx",Q.x),S.setAttribute("cy",Q.y),c=!0,d=!1,h=void 0;try{for(var tt=function(){
var t=et.value,e=x.find(function(e){return e[T.stop]===t});if(e){var n=w(K,J,t.offset.baseVal);
e.cx.baseVal.value=n.x,e.cy.baseVal.value=n.y}},et=void 0,nt=v[Symbol.iterator]();!(c=(et=nt.next()).done);c=!0)tt();
}catch(it){d=!0,h=it}finally{try{c||null==nt["return"]||nt["return"]()}finally{if(d)throw h;
}}}};t:for(var g=void 0,b=this._subhuds.children[Symbol.iterator]();!(n=(g=b.next()).done);n=!0)switch(v=m()){
case 0:continue t}}catch(p){a=!0,s=p}finally{try{n||null==b["return"]||b["return"]();
}finally{if(a)throw s}}},_updateGrippiesColor:function(){var t=!0,e=!1,n=void 0;try{
for(var i=void 0,r=this._subhuds.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.style.fill=d[T.stop].style.stopColor}}catch(h){o=!0,l=h}finally{try{
s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){e=!0,n=v}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_updateGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll(".grippie")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;a.setAttribute("r",I/body.canvas.scale)}}catch(s){e=!0,n=s}finally{
try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_updateGrippiesSelectedState:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._subhuds.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;this._selectedStops.includes(d[T.stop])?d.setAttribute("data-selected",""):d.removeAttribute("data-selected");
}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}}}catch(v){e=!0,n=v}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}},_updateGrippiesZOrder:function(){var t=this._subhuds.querySelectorAll(".stop-grippie"),e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this._selectedStops[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h[T.stop]===s&&h.parentElement.append(h)}}catch(v){l=!0,u=v}finally{
try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}}catch(f){n=!0,i=f;
}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_selectStops:function(t){
(0!==t.length||0!==this._selectedStops.length)&&(this._selectedStops=$traceurRuntime.spread(t),
this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")));
},_selectAllStops:function(){var t=this._shadowRoot.activeElement,e=t[T.gradient],n=function(){
var t=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[t++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._selectedStops[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.closest("radialGradient")!==e&&n.push(l)}}catch(u){r=!0,a=u}finally{
try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}this._selectStops(n);
},_deselectAllStops:function(){var t=this._shadowRoot.activeElement,e=t[T.gradient];
this._selectStops(this._selectedStops.filter(function(t){return t.closest("radialGradient")!==e;
}))},_selectNextStop:function(){var t=this._shadowRoot.activeElement,e=t[T.gradient],n=function(){
var t=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[t++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=this._selectedStops.filter(function(t){return t.closest("radialGradient")===e;
}),r=i[i.length-1],a=n[0];n.length>1&&(this._selectStops(this._selectedStops.filter(function(t){
return t.closest("radialGradient")!==e})),r.nextElementSibling?this._selectStops($traceurRuntime.spread([r.nextElementSibling],this._selectedStops)):this._selectStops($traceurRuntime.spread([a],this._selectedStops)));
},_deleteSelectedStops:function(){var t=this._shadowRoot.activeElement;if(null!==t){
var e=t[T.gradient],n=this._selectedStops.filter(function(t){return t.closest("radialGradient")===e;
});if(n.length>0){body.canvas.undoManager.checkpoint("Delete gradient stop(s)");var i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
l.remove()}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{
if(r)throw a}}}this._selectStops([])}},_moveSelectedStops:function(){var t=void 0!==arguments[0]?arguments[0]:1,e=void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;
if(null!==n){var i=n.querySelector(".slider"),a=n[T.gradient],s=this._selectedStops.filter(function(t){
return t.parentElement===a}),o=this._getMoveOffsetsForSelectedStops(),u=this.getScreenCTM(),c=r(i.x1.baseVal.value,i.y1.baseVal.value),d=r(i.x2.baseVal.value,i.y2.baseVal.value),h=c.matrixTransform(u),v=d.matrixTransform(u),f=new j(h,v),m=t/f.length,g=!0,b=!1,p=void 0;
try{for(var y=void 0,_=s[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){var x=y.value,w=o.get(x),S=w.minOffset,C=w.maxOffset;
if("left"===e){var E=l(x.offset.baseVal-m,S,C);x.setAttribute("offset",E)}else if("right"===e){
var k=l(x.offset.baseVal+m,S,C);x.setAttribute("offset",k)}}}catch(A){b=!0,p=A}finally{
try{g||null==_["return"]||_["return"]()}finally{if(b)throw p}}}},_canMoveActiveSelectedStops:function(){
var t=void 0!==arguments[0]?arguments[0]:"left",e=this._shadowRoot.activeElement;if(null!==e){
var n=(e.querySelector(".slider"),e[T.gradient]),i=this._selectedStops.find(function(t){
return t.parentElement===n});if(null!==i){var r=this._getMoveOffsetsForSelectedStops(),a=r.get(i),s=a.minOffset,o=a.maxOffset;
return"left"===t?i.offset.baseVal>s:"right"===t?i.offset.baseVal<o:void 0}}},_getPreviousNotSelectedStop:function(t){
for(;t.previousElementSibling;){if(this._selectedStops.includes(t.previousElementSibling)===!1)return t.previousElementSibling;
t=t.previousElementSibling}return null},_getNextNotSelectedStop:function(t){for(;t.nextElementSibling;){
if(this._selectedStops.includes(t.nextElementSibling)===!1)return t.nextElementSibling;
t=t.nextElementSibling}return null},_getMoveOffsetsForSelectedStops:function(){var t=new Map,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this._selectedStops[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=this._getPreviousNotSelectedStop(o),u=this._getNextNotSelectedStop(o),c={};
l?c.min=o.offset.baseVal-l.offset.baseVal:c.min=o.offset.baseVal,u?c.max=u.offset.baseVal-o.offset.baseVal:c.max=1-o.offset.baseVal,
e.push(c)}}catch(d){i=!0,r=d}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}if(e.length>0){var h=e[0].min,v=e[0].max,f=!0,m=!1,g=void 0;try{for(var b=void 0,p=e[Symbol.iterator]();!(f=(b=p.next()).done);f=!0){
var y=b.value;y.min<h&&(h=y.min),y.max<v&&(v=y.max)}}catch(_){m=!0,g=_}finally{try{
f||null==p["return"]||p["return"]()}finally{if(m)throw g}}var x=!0,w=!1,S=void 0;try{
for(var C=void 0,E=this._selectedStops[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;t.set(k,{initialOffset:k.offset.baseVal,minOffset:k.offset.baseVal-h,
maxOffset:k.offset.baseVal+v})}}catch(A){w=!0,S=A}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}}return t}},{},e)}(SVGGElement),N=a("g","bx-radialgradienthud",V);
return{get default(){return N}}}),System.registerModule("elements/bx-recthud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=(t.createElement,
t.createSVGPoint),i=System.get("utils/math").normalize,r=System.get("utils/time").throttle,a=System.get("utils/transform").getTransformToElement,s=System.get("classes/enum")["default"],o=Math.min,l=new s("rect"),u=6,c=8,d='\n  <style>@import url("stylesheets/bx-recthud.css");</style>\n\n  <defs>\n    <g class="subhud">\n      <circle class="grippie" data-corner="1"></circle>\n      <circle class="grippie" data-corner="2"></circle>\n      <circle class="grippie" data-corner="3"></circle>\n      <circle class="grippie" data-corner="4"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',h=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=d;var t=!0,e=!1,n=void 0;try{for(var i=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){e=!0,n=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw n}}this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),
this._updateGrippiesPosition_200ms=r(this._updateGrippiesPosition,200,this),this._installed=!1,
this._selectedRects=[],this._draggedGrippie=null},enabledCallback:function(){var t=this;
this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()})},disabledCallback:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_install:function(){var t=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(e){
t._onShadowRootMouseDown(e)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onSelectedElementsChange:function(){this._selectedRects=this._getSelectedRects(),
0===this._selectedRects.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onContentMutation:function(t){t.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition_200ms();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(t){
t.target.classList.contains("grippie")&&this._onGrippieMouseDown(t)},_onGrippieMouseDown:function(t){
var e=this;if(0===t.button){body.canvas.undoManager.checkpoint("Round corners");var r,a,s,u=t.target,d=u.parentElement,h=d[l.rect],v=u.getAttribute("data-corner"),f=h.getCTM().inverse(),m={
r1x:h.r1x,r2x:h.r2x,r3x:h.r3x,r4x:h.r4x},g=n(t.clientX,t.clientY).matrixTransform(f),b=n(g.x,g.y),p="normal";
u.parentElement.append(u),this._draggedGrippie=u;var y=function(){var t=body.modKeys,e=t.ctrl,n=t.shift;
if(e===!0&&n===!1)p="normal";else if(e===!1&&n===!0)p="symmetric-1234";else if(e===!0&&n===!0)p="symmetric-1234";else{
var i,r;"1"===v&&(i=h.r1x,r=h.r1y),"2"===v&&(i=h.r2x,r=h.r2y),"3"===v&&(i=h.r3x,r=h.r3y),
"4"===v&&(i=h.r4x,r=h.r4y);var a=[];if(h.r1x===i&&h.r1y===r&&a.push("1"),h.r2x===i&&h.r2y===r&&a.push("2"),
h.r3x===i&&h.r3y===r&&a.push("3"),h.r4x===i&&h.r4y===r&&a.push("4"),1===a.length)p="normal";else{
p="symmetric-";var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;p+=d}}catch(f){o=!0,l=f}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}}}},_=function(){var t=0,e=b.x-g.x;b.y-g.y;"1"===v?t=i(m.r1x+e,0,o(h.width/2,h.height/2),c):"2"===v?t=i(m.r2x-e,0,o(h.width/2,h.height/2),c):"3"===v?t=i(m.r3x-e,0,o(h.width/2,h.height/2),c):"4"===v&&(t=i(m.r4x+e,0,o(h.width/2,h.height/2),c)),
"normal"===p?(h["r"+v+"x"]=t,h["r"+v+"y"]=t):(p.includes("1")&&(h.r1x=t,h.r1y=t),
p.includes("2")&&(h.r2x=t,h.r2y=t),p.includes("3")&&(h.r3x=t,h.r3y=t),p.includes("4")&&(h.r4x=t,
h.r4y=t))};window.addEventListener("mousemove",r=function(t){b=n(t.clientX,t.clientY).matrixTransform(f),
_()}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",a),body.removeEventListener("modkeyschange",s),
e._draggedGrippie=null}),body.addEventListener("modkeyschange",s=function(){y(),_();
}),y()}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=this._selectedRects[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=this._subhudTemplate.cloneNode(!0);s[l.rect]=a,this["#subhuds"].append(s);
}}catch(o){e=!0,n=o}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateGrippiesPosition(),this._updateGrippiesSize()},_updateGrippiesPosition:function(){
var t=!0,e=!1,i=void 0;try{for(var r=void 0,s=this["#subhuds"].children[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){
var o=r.value,u=o[l.rect],c=a(u,this),d=u.x,h=u.y,v=(u.r1x,u.width),f=u.height,m=!0,g=!1,b=void 0;
try{for(var p=void 0,y=o.children[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value,x=_.getAttribute("data-corner"),w=void 0;"1"===x&&(w=n(d+u.r1x,h)),
"2"===x?w=n(d+v-u.r2x,h):"3"===x?w=n(d+v-u.r3x,h+f):"4"===x&&(w=n(d+u.r4x,h+f));var S=w.matrixTransform(c);
_.setAttribute("cx",S.x),_.setAttribute("cy",S.y)}}catch(C){g=!0,b=C}finally{try{
m||null==y["return"]||y["return"]()}finally{if(g)throw b}}}}catch(E){e=!0,i=E}finally{
try{t||null==s["return"]||s["return"]()}finally{if(e)throw i}}},_updateGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var c=void 0,d=a.children[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){
var h=c.value;h.setAttribute("r",u/body.canvas.scale)}}catch(v){o=!0,l=v}finally{
try{s||null==d["return"]||d["return"]()}finally{if(o)throw l}}}}catch(f){e=!0,n=f;
}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_getSelectedRects:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"bx-rectpath"===o.getAttribute("is")?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedRects(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),v=e("g","bx-recthud",h);return{get default(){return v;
}}}),System.registerModule("elements/bx-rectpath",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("utils/string").collapseWhitespace,r=Number.parseFloat,a=["data-bx-x","data-bx-y","data-bx-width","data-bx-height","data-bx-r1x","data-bx-r1y","data-bx-r2x","data-bx-r2y","data-bx-r3x","data-bx-r3y","data-bx-r4x","data-bx-r4y"],s=function(t,e,n,r,a,s,o,l,u,c,d,h){
a=a>n/2?n/2:a,o=o>n/2?n/2:o,d=d>n/2?n/2:d,u=u>n/2?n/2:u,s=s>r/2?r/2:s,l=l>r/2?r/2:l,
h=h>r/2?r/2:h,c=c>r/2?r/2:c;var v="\n    M "+(t+a)+" "+e+"\n    L "+(t+n-o)+" "+e+"\n    A "+o+" "+l+" 0 0 1 "+(t+n)+" "+(e+l)+"\n    L "+(t+n)+" "+(e+r-c)+"\n    A "+u+" "+c+" 0 0 1 "+(t+n-u)+" "+(e+r)+"\n    L "+(t+d)+" "+(e+r)+"\n    A "+d+" "+h+" 0 0 1 "+t+" "+(e+r-h)+"\n    L "+t+" "+(e+s)+"\n    A "+a+" "+s+" 0 0 1 "+(t+a)+" "+e+"\n    z";
return i(v)},o=function(t){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){this._update()},
attributeChangedCallback:function(t,e,n){e!==n&&t.startsWith("data-bx-")&&this._update();
},get x(){return this.hasAttribute("data-bx-x")?r(this.getAttribute("data-bx-x")):0;
},set x(t){0===t?this.removeAttribute("data-bx-x"):this.setAttribute("data-bx-x",t);
},get y(){return this.hasAttribute("data-bx-y")?r(this.getAttribute("data-bx-y")):0;
},set y(t){0===t?this.removeAttribute("data-bx-y"):this.setAttribute("data-bx-y",t);
},get width(){return this.hasAttribute("data-bx-width")?r(this.getAttribute("data-bx-width")):0;
},set width(t){0===t?this.removeAttribute("data-bx-width"):this.setAttribute("data-bx-width",t);
},get height(){return this.hasAttribute("data-bx-height")?r(this.getAttribute("data-bx-height")):0;
},set height(t){0===t?this.removeAttribute("data-bx-height"):this.setAttribute("data-bx-height",t);
},get r1x(){return this.hasAttribute("data-bx-r1x")?r(this.getAttribute("data-bx-r1x")):0;
},set r1x(t){0===t?this.removeAttribute("data-bx-r1x"):this.setAttribute("data-bx-r1x",t);
},get r1y(){return this.hasAttribute("data-bx-r1y")?r(this.getAttribute("data-bx-r1y")):0;
},set r1y(t){0===t?this.removeAttribute("data-bx-r1y"):this.setAttribute("data-bx-r1y",t);
},get r2x(){return this.hasAttribute("data-bx-r2x")?r(this.getAttribute("data-bx-r2x")):0;
},set r2x(t){0===t?this.removeAttribute("data-bx-r2x"):this.setAttribute("data-bx-r2x",t);
},get r2y(){return this.hasAttribute("data-bx-r2y")?r(this.getAttribute("data-bx-r2y")):0;
},set r2y(t){0===t?this.removeAttribute("data-bx-r2y"):this.setAttribute("data-bx-r2y",t);
},get r3x(){return this.hasAttribute("data-bx-r3x")?r(this.getAttribute("data-bx-r3x")):0;
},set r3x(t){0===t?this.removeAttribute("data-bx-r3x"):this.setAttribute("data-bx-r3x",t);
},get r3y(){return this.hasAttribute("data-bx-r3y")?r(this.getAttribute("data-bx-r3y")):0;
},set r3y(t){0===t?this.removeAttribute("data-bx-r3y"):this.setAttribute("data-bx-r3y",t);
},get r4x(){return this.hasAttribute("data-bx-r4x")?r(this.getAttribute("data-bx-r4x")):0;
},set r4x(t){0===t?this.removeAttribute("data-bx-r4x"):this.setAttribute("data-bx-r4x",t);
},get r4y(){return this.hasAttribute("data-bx-r4y")?r(this.getAttribute("data-bx-r4y")):0;
},set r4y(t){0===t?this.removeAttribute("data-bx-r4y"):this.setAttribute("data-bx-r4y",t);
},toSVGPath:function(){var t=void 0!==arguments[0]?arguments[0]:!0,n=e("svg:path"),i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=this.attributes[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value,c=u.name,d=u.value;"is"===c?t&&n.setAttribute("data-bx-is",d):a.includes(c)?t&&n.setAttribute(c,d):n.setAttribute(c,d);
}}catch(h){r=!0,s=h}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw s;
}}return n},toSVGRect:function(){var t=this.r1x,n=this.r1y,i=this.r1x===t&&this.r1y===n&&this.r2x===t&&this.r2y===n&&this.r3x===t&&this.r3y===n&&this.r4x===t&&this.r4y===n;
if(i){var r=e("svg:rect"),a=!0,s=!1,o=void 0;try{for(var l=void 0,u=this.attributes[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value,d=c.name,h=c.value;if(d.startsWith("data-bx-"))"data-bx-x"===d?r.setAttribute("x",h):"data-bx-y"===d?r.setAttribute("y",h):"data-bx-width"===d?r.setAttribute("width",h):"data-bx-height"===d?r.setAttribute("height",h):"data-bx-r1x"===d?r.setAttribute("rx",h):"data-bx-r1y"===d&&r.setAttribute("ry",h);else{
if("d"===d)continue;if("is"===d)continue;r.setAttribute(d,h)}}}catch(v){s=!0,o=v}finally{
try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}return r}return null;
},_update:function(){var t=this,e=t.x,n=t.y,i=t.width,r=t.height,a=t.r1x,o=t.r1y,l=t.r2x,u=t.r2y,c=t.r3x,d=t.r3y,h=t.r4x,v=t.r4y,f=s(e,n,i,r,a,o,l,u,c,d,h,v);
this.setAttribute("d",f)}},{fromSVGPath:function(t){var n=t.hasAttribute("data-bx-x")?r(t.getAttribute("data-bx-x")):0,i=t.hasAttribute("data-bx-y")?r(t.getAttribute("data-bx-y")):0,a=t.hasAttribute("data-bx-width")?r(t.getAttribute("data-bx-width")):0,o=t.hasAttribute("data-bx-height")?r(t.getAttribute("data-bx-height")):0,l=t.hasAttribute("data-bx-r1x")?r(t.getAttribute("data-bx-r1x")):0,u=t.hasAttribute("data-bx-r1y")?r(t.getAttribute("data-bx-r1y")):0,c=t.hasAttribute("data-bx-r2x")?r(t.getAttribute("data-bx-r2x")):0,d=t.hasAttribute("data-bx-r2y")?r(t.getAttribute("data-bx-r2y")):0,h=t.hasAttribute("data-bx-r3x")?r(t.getAttribute("data-bx-r3x")):0,v=t.hasAttribute("data-bx-r3y")?r(t.getAttribute("data-bx-r3y")):0,f=t.hasAttribute("data-bx-r4x")?r(t.getAttribute("data-bx-r4x")):0,m=t.hasAttribute("data-bx-r4y")?r(t.getAttribute("data-bx-r4y")):0,g=s(n,i,a,o,l,u,c,d,h,v,f,m);
if(g!==t.getAttribute("d"))return null;var b=e("svg:path","bx-rectpath"),p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=t.attributes[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value,C=S.name,E=S.value;"d"!==C&&"data-bx-is"!==C&&b.setAttribute(C,E)}}catch(k){
y=!0,_=k}finally{try{p||null==w["return"]||w["return"]()}finally{if(y)throw _}}return b;
},fromSVGRect:function(t){var n=e("svg:path","bx-rectpath"),i=!0,r=!1,a=void 0;try{
for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=l.name,c=l.value;
"x"===u?n.setAttribute("data-bx-x",c):"y"===u?n.setAttribute("data-bx-y",c):"width"===u?n.setAttribute("data-bx-width",c):"height"===u?n.setAttribute("data-bx-height",c):"rx"===u?(n.setAttribute("data-bx-r1x",c),
n.setAttribute("data-bx-r2x",c),n.setAttribute("data-bx-r3x",c),n.setAttribute("data-bx-r4x",c)):"ry"===u?(n.setAttribute("data-bx-r1y",c),
n.setAttribute("data-bx-r2y",c),n.setAttribute("data-bx-r3y",c),n.setAttribute("data-bx-r4y",c)):n.setAttribute(u,c);
}}catch(d){r=!0,a=d}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}return n}},t)}(SVGPathElement),l=n("path","bx-rectpath",o);return{get default(){
return l}}}),System.registerModule("elements/bx-recttool",[],function(){"use strict";
var t=System.get("utils/dom"),e=t.registerElement,n=t.createElement,i=t.createSVGMatrix,r=System.get("utils/event").isMouseMoveIntentional,a=Math,s=(a.abs,
a.min),o=function(t){function e(){$traceurRuntime.superConstructor(e).apply(this,arguments);
}return $traceurRuntime.createClass(e,{enabledCallback:function(){var t=this;body.canvas.enableHud("outlines-hud"),
this._rectCursor=body.registerCursor("images/cursor-rect.png",-100,8,7),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(e){
t._onMouseDown(e)})},disabledCallback:function(){body.unregisterCursor(this._rectCursor),
body.unregisterCursor(this._mouseDownRectCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(t){
var e,n,i=this;window.addEventListener("mousemove",e=function(a){r(t,a)!==!1&&(window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",n),i._onIntentionalDragStart(t))}),window.addEventListener("mouseup",n=function(){
window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n);
})},_onIntentionalDragStart:function(t){var e,r,a,o,l,u,c,d=this,h=body.canvas.currentContainer||body.canvas.currentArtboard,v=n("svg:path","bx-rectpath");
v.style.fill="#d8d8d8",body.canvas.undoManager.checkpoint("Draw Rectangle"),h.append(v),
body.canvas.selectedElements=[v],this._mouseDownRectCursor=body.registerCursor("images/cursor-rect.png",900,8,7);
var f=v.getScreenCTM().inverse(),m=i(v.transform.baseVal.consolidate().matrix);m.multiplySelf(f),
v.setAttribute("transform",m.toString()),window.addEventListener("mousemove",e=function(e){
var n=body.modKeys,i=n.ctrl,r=n.shift;if(r===!1){o=e.clientX-t.clientX,l=e.clientY-t.clientY,
0===o&&(o=1),0===l&&(l=1);var a=!1,d=!1;0>o&&(a=!0,o=-o),0>l&&(d=!0,l=-l),i&&(o=s(o,l),
l=o),u=a?t.clientX-o:t.clientX,c=d?t.clientY-l:t.clientY}else if(r===!0){o=2*(e.clientX-t.clientX),
l=2*(e.clientY-t.clientY),0===o&&(o=1),0===l&&(l=1);var h=!1,f=!1;0>o&&(h=!0,o=-o),
0>l&&(f=!0,l=-l),i&&(o=s(o,l),l=o),u=h?t.clientX-o/2:t.clientX-o/2,c=f?t.clientY-l/2:t.clientY-l/2;
}v.setAttribute("data-bx-width",o),v.setAttribute("data-bx-height",l),v.setAttribute("data-bx-x",u),
v.setAttribute("data-bx-y",c)}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",r),body.removeEventListener("toolchange",a),
body.unregisterCursor(d._mouseDownRectCursor)}),body.addEventListener("toolchange",a=function(t){
window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",r),
body.removeEventListener("toolchange",a),body.unregisterCursor(d._mouseDownRectCursor);
})}},{},t)}(HTMLElement),l=e("bx-recttool",o);return{get default(){return l}}}),System.registerModule("elements/bx-ringhud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=(t.createElement,
t.createSVGPoint),i=System.get("utils/math").normalize,r=System.get("utils/time").throttle,a=System.get("utils/transform").getTransformToElement,s=System.get("classes/enum")["default"],o=Math,l=o.min,u=o.max,c=new s("ring"),d=6,h=8,v='\n  <style>@import url("stylesheets/bx-ringhud.css");</style>\n\n  <defs>\n    <g class="subhud">\n      <circle class="grippie" data-axis="r1x"></circle>\n      <circle class="grippie" data-axis="r1y"></circle>\n      <circle class="grippie" data-axis="r2x"></circle>\n      <circle class="grippie" data-axis="r2y"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',f=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=v;var t=!0,e=!1,n=void 0;try{for(var i=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){e=!0,n=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(e)throw n}}this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),
this._updateGrippiesPosition_200ms=r(this._updateGrippiesPosition,200,this),this._installed=!1,
this._selectedRings=[],this._draggedGrippie=null},enabledCallback:function(){var t=this;
this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()})},disabledCallback:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_install:function(){var t=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(e){
t._onShadowRootMouseDown(e)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onSelectedElementsChange:function(){this._selectedRings=this._getSelectedRings(),
0===this._selectedRings.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onContentMutation:function(t){t.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition_200ms();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(t){
t.target.classList.contains("grippie")&&this._onGrippieMouseDown(t)},_onGrippieMouseDown:function(t){
var e=this;if(0===t.button){body.canvas.undoManager.checkpoint("Change inner ring radius");
var r,a,s,o=t.target,d=o.parentElement,v=d[c.ring],f=o.getAttribute("data-axis"),m=v.getCTM().inverse(),g={
r1x:v.r1x,r1y:v.r1y,r2x:v.r2x,r2y:v.r2y},b=n(t.clientX,t.clientY).matrixTransform(m),p=n(b.x,b.y),y="normal";
o.parentElement.append(o),this._draggedGrippie=o;var _=function(){var t=body.modKeys,e=t.ctrl,n=t.shift;
e===!0&&n===!1?y="normal":e===!1&&n===!0?y="symmetric":e===!0&&n===!0?y="double-symmetric":("r1x"===f&&v.r1x===v.r1y?y="symmetric":"r1y"===f&&v.r1x===v.r1y&&(y="symmetric"),
"r2x"===f&&v.r2x===v.r2y?y="symmetric":"r2y"===f&&v.r2x===v.r2y&&(y="symmetric"));
},x=function(){var t=p.x-b.x,e=p.y-b.y;if("r1x"===f){if("normal"===y){var n=1,r=v.r2x-1,a=i(g.r1x+t,n,r,h);
v.setAttribute("data-bx-r1x",a)}else if("symmetric"===y){var s=1,o=l(v.r2x,v.r2y)-1,c=i(g.r1x+t,s,o,h);
v.setAttribute("data-bx-r1x",c),v.setAttribute("data-bx-r1y",c)}else if("double-symmetric"===y){
var d=1,m=1/0,_=v.r2x-v.r1x,x=i(g.r1x+t,d,m,h),w=x+_;v.setAttribute("data-bx-r1x",x),
v.setAttribute("data-bx-r1y",x),v.setAttribute("data-bx-r2x",w),v.setAttribute("data-bx-r2y",w);
}}else if("r1y"===f){if("normal"===y){var S=1,C=v.r2y-1,E=i(g.r1y+e,S,C,h);v.setAttribute("data-bx-r1y",E);
}else if("symmetric"===y){var k=1,A=l(v.r2x,v.r2y)-1,L=i(g.r1y+e,k,A,h);v.setAttribute("data-bx-r1x",L),
v.setAttribute("data-bx-r1y",L)}else if("double-symmetric"===y){var M=1,j=1/0,T=v.r2y-v.r1y,P=i(g.r1y+e,M,j,h),R=P+T;
v.setAttribute("data-bx-r1x",P),v.setAttribute("data-bx-r1y",P),v.setAttribute("data-bx-r2x",R),
v.setAttribute("data-bx-r2y",R)}}else if("r2x"===f){if("normal"===y){var O=v.r1x+1,I=1/0,D=i(g.r2x+t,O,I,h);
v.setAttribute("data-bx-r2x",D)}else if("symmetric"===y){var V=u(v.r1x,v.r1y)+1,N=1/0,B=i(g.r2x+t,V,N,h);
v.setAttribute("data-bx-r2x",B),v.setAttribute("data-bx-r2y",B)}else if("double-symmetric"===y){
var z=v.r2x-v.r1x,G=z+1,U=1/0,H=i(g.r2x+t,G,U,h),F=H-z;v.setAttribute("data-bx-r1x",F),
v.setAttribute("data-bx-r1y",F),v.setAttribute("data-bx-r2x",H),v.setAttribute("data-bx-r2y",H);
}}else if("r2y"===f)if("normal"===y){var q=v.r1y+1,$=1/0,Y=i(g.r2y+e,q,$,h);v.setAttribute("data-bx-r2y",Y);
}else if("symmetric"===y){var X=u(v.r1x,v.r1y)+1,W=1/0,Z=i(g.r2y+e,X,W,h);v.setAttribute("data-bx-r2x",Z),
v.setAttribute("data-bx-r2y",Z)}else if("double-symmetric"===y){var K=v.r2y-v.r1y,J=K+1,Q=i(g.r2y+e,J,N,h),tt=Q-K;
v.setAttribute("data-bx-r1x",tt),v.setAttribute("data-bx-r1y",tt),v.setAttribute("data-bx-r2x",Q),
v.setAttribute("data-bx-r2y",Q)}};window.addEventListener("mousemove",r=function(t){
p=n(t.clientX,t.clientY).matrixTransform(m),x()}),window.addEventListener("mouseup",a=function(){
window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a),
body.removeEventListener("modkeyschange",s),e._draggedGrippie=null}),body.addEventListener("modkeyschange",s=function(){
_(),x()}),_()}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";var t=!0,e=!1,n=void 0;
try{for(var i=void 0,r=this._selectedRings[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=this._subhudTemplate.cloneNode(!0);s[c.ring]=a,this["#subhuds"].append(s);
}}catch(o){e=!0,n=o}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateGrippiesPosition(),this._updateGrippiesSize()},_updateGrippiesPosition:function(){
var t=!0,e=!1,i=void 0;try{for(var r=void 0,s=this["#subhuds"].children[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){
var o=r.value,l=o[c.ring],u=a(l,this),d=!0,h=!1,v=void 0;try{for(var f=void 0,m=o.children[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var g=f.value,b=g.getAttribute("data-axis");if("r1x"===b){var p=n(l.cx+l.r1x,l.cy).matrixTransform(u);
g.setAttribute("cx",p.x),g.setAttribute("cy",p.y)}else if("r1y"===b){var y=n(l.cx,l.cy+l.r1y).matrixTransform(u);
g.setAttribute("cx",y.x),g.setAttribute("cy",y.y)}else if("r2x"===b){var _=n(l.cx+l.r2x,l.cy).matrixTransform(u);
g.setAttribute("cx",_.x),g.setAttribute("cy",_.y)}else if("r2y"===b){var x=n(l.cx,l.cy+l.r2y).matrixTransform(u);
g.setAttribute("cx",x.x),g.setAttribute("cy",x.y)}}}catch(w){h=!0,v=w}finally{try{
d||null==m["return"]||m["return"]()}finally{if(h)throw v}}}}catch(S){e=!0,i=S}finally{
try{t||null==s["return"]||s["return"]()}finally{if(e)throw i}}},_updateGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var h=u.value;h.setAttribute("r",d/body.canvas.scale)}}catch(v){o=!0,l=v}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(f){e=!0,n=f;
}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_getSelectedRings:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"bx-ringpath"===o.getAttribute("is")?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedRings(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),m=e("g","bx-ringhud",f);return{get default(){return m;
}}}),System.registerModule("elements/bx-ringpath",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("utils/string").collapseWhitespace,r=Number.parseFloat,a=["data-bx-cx","data-bx-cy","data-bx-r1x","data-bx-r1y","data-bx-r2x","data-bx-r2y"],s=function(t,e,n,r,a,s){
var o="\n    M "+t+" "+e+"\n    m -"+a+" 0\n    a "+a+" "+s+" 0 1 0 "+2*a+" 0\n    a "+a+" "+s+" 0 1 0 -"+2*a+" 0\n    z\n    M "+t+" "+e+"\n    m -"+n+" 0\n    a "+n+" "+r+" 0 0 1 "+2*n+" 0\n    a "+n+" "+r+" 0 0 1 -"+2*n+" 0\n    z";
return i(o)},o=function(t){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){this._update()},
attributeChangedCallback:function(t,e,n){e!==n&&t.startsWith("data-bx-")&&this._update();
},get cx(){return this.hasAttribute("data-bx-cx")?r(this.getAttribute("data-bx-cx")):0;
},set cx(t){this.setAttribute("data-bx-cx",t)},get cy(){return this.hasAttribute("data-bx-cy")?r(this.getAttribute("data-bx-cy")):0;
},set cy(t){this.setAttribute("data-bx-cy",t)},get r1x(){return this.hasAttribute("data-bx-r1x")?r(this.getAttribute("data-bx-r1x")):0;
},set r1x(t){this.setAttribute("data-bx-r1x",t)},get r1y(){return this.hasAttribute("data-bx-r1y")?r(this.getAttribute("data-bx-r1y")):0;
},set r1y(t){this.setAttribute("data-bx-r1y",t)},get r2x(){return this.hasAttribute("data-bx-r2x")?r(this.getAttribute("data-bx-r2x")):0;
},set r2x(t){this.setAttribute("data-bx-r2x",t)},get r2y(){return this.hasAttribute("data-bx-r2y")?r(this.getAttribute("data-bx-r2y")):0;
},set r2y(t){this.setAttribute("data-bx-r2y",t)},toSVGPath:function(){var t=void 0!==arguments[0]?arguments[0]:!0,n=e("svg:path"),i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=this.attributes[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value,c=u.name,d=u.value;"is"===c?t&&n.setAttribute("data-bx-is",d):a.includes(c)?t&&n.setAttribute(c,d):n.setAttribute(c,d);
}}catch(h){r=!0,s=h}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw s;
}}return n},_update:function(){var t=this,e=t.cx,n=t.cy,i=t.r1x,r=t.r1y,a=t.r2x,o=t.r2y,l=s(e,n,i,r,a,o);
this.setAttribute("d",l)}},{fromSVGPath:function(t){var n=t.hasAttribute("data-bx-cx")?r(t.getAttribute("data-bx-cx")):0,i=t.hasAttribute("data-bx-cy")?r(t.getAttribute("data-bx-cy")):0,a=t.hasAttribute("data-bx-r1x")?r(t.getAttribute("data-bx-r1x")):0,o=t.hasAttribute("data-bx-r1y")?r(t.getAttribute("data-bx-r1y")):0,l=t.hasAttribute("data-bx-r2x")?r(t.getAttribute("data-bx-r2x")):0,u=t.hasAttribute("data-bx-r2y")?r(t.getAttribute("data-bx-r2y")):0,c=s(n,i,a,o,l,u);
if(c!==t.getAttribute("d"))return null;var d=e("svg:path","bx-ringpath"),h=!0,v=!1,f=void 0;
try{for(var m=void 0,g=t.attributes[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){
var b=m.value,p=b.name,y=b.value;"d"!==p&&"data-bx-is"!==p&&d.setAttribute(p,y)}}catch(_){
v=!0,f=_}finally{try{h||null==g["return"]||g["return"]()}finally{if(v)throw f}}return d;
}},t)}(SVGPathElement),l=n("path","bx-ringpath",o);return{get default(){return l}
}}),System.registerModule("elements/bx-ringtool",[],function(){"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=t.createElement,i=t.createSVGMatrix,r=System.get("utils/event").isMouseMoveIntentional,a=Math,s=a.abs,o=a.min,l=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
enabledCallback:function(){var t=this;body.canvas.enableHud("outlines-hud"),this._ringCursor=body.registerCursor("images/cursor-ellipse.png",-100,8,7),
body.canvas.addEventListener("mousedown",this._mouseDownListener=function(e){t._onMouseDown(e);
})},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),body.unregisterCursor(this._ringCursor),
body.unregisterCursor(this._mouseDownRingCursor),body.canvas.removeEventListener("mousedown",this._mouseDownListener);
},_onMouseDown:function(t){var e,n,i=this;window.addEventListener("mousemove",e=function(a){
r(t,a)!==!1&&(window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n),
i._onIntentionalDragStart(t))}),window.addEventListener("mouseup",n=function(t){window.removeEventListener("mousemove",e),
body.canvas.removeEventListener("mouseend",n)})},_onIntentionalDragStart:function(t){
var e,r,a,l=this,u=body.canvas.currentContainer||body.canvas.currentArtboard,c=n("svg:path","bx-ringpath");
c.style.fill="#d8d8d8",body.canvas.undoManager.checkpoint("Draw Ring Shape"),u.append(c),
body.canvas.selectedElements=[c],this._mouseDownRingCursor=body.registerCursor("images/cursor-ellipse.png",900,8,7);
var d=c.getScreenCTM().inverse(),h=i(c.transform.baseVal.consolidate().matrix);h.multiplySelf(d),
c.setAttribute("transform",h.toString()),window.addEventListener("mousemove",e=function(e){
var n,i,r,a,l,u,d=body.modKeys,h=d.ctrl,v=d.shift;if(v===!1){r=(e.clientX-t.clientX)/2,
a=(e.clientY-t.clientY)/2;var f=!1,m=!1;0>r&&(f=!0,r=s(r)),0>a&&(m=!0,a=s(a)),h&&(r=o(r,a),
a=r),l=f?t.clientX-r:t.clientX+r,u=m?t.clientY-a:t.clientY+a}else if(v===!0&&(r=e.clientX-t.clientX,
a=e.clientY-t.clientY,0>r?(r=s(r),l=e.clientX+r):l=e.clientX-r,0>a?(a=s(a),u=e.clientY+a):u=e.clientY-a,
h)){var g=o(r,a);r=a=g}n=.6*r,i=.6*a,c.setAttribute("data-bx-cx",l),c.setAttribute("data-bx-cy",u),
c.setAttribute("data-bx-r1x",n),c.setAttribute("data-bx-r1y",i),c.setAttribute("data-bx-r2x",r),
c.setAttribute("data-bx-r2y",a)}),window.addEventListener("mouseup",r=function(){
window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",r),
body.removeEventListener("toolchange",a),body.unregisterCursor(l._mouseDownRingCursor);
}),body.addEventListener("toolchange",a=function(t){window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",r),body.removeEventListener("toolchange",a),
body.unregisterCursor(l._mouseDownRingCursor)})}},{},t)}(HTMLElement),u=e("bx-ringtool",l);
return{get default(){return u}}}),System.registerModule("elements/bx-rubberbandhud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=t.createSVGPoint,i=t.createSVGRect,r=System.get("utils/math").round,a='\n  <style>@import url("stylesheets/bx-rubberbandhud.css");</style>\n  <rect id="rect" x="0" y="0" width="0" height="0"></rect>\n',s=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=a,this["#rect"]=this._shadowRoot.querySelector("#rect");
},get x(){return r(this["#rect"].x.baseVal.value,3)},set x(t){this["#rect"].x.baseVal.value=t;
},get y(){return r(this["#rect"].y.baseVal.value,3)},set y(t){this["#rect"].y.baseVal.value=t;
},get width(){return r(this["#rect"].width.baseVal.value,3)},set width(t){this["#rect"].width.baseVal.value=t;
},get height(){return r(this["#rect"].height.baseVal.value,3)},set height(t){this["#rect"].height.baseVal.value=t;
},grabSelection:function(t,e,r){var a,s,o=this,l=this.getScreenCTM(),u=l.inverse(),c=n(t,e),d=c.matrixTransform(u);
this["#rect"].style.visibility="visible",this["#rect"].style.vectorEffect="non-scaling-stroke";
var h=body.registerCursor("default",900);window.addEventListener("mousemove",a=function(t){
var e,i,r=n(t.clientX,t.clientY),a=r.matrixTransform(u),s=a.x-d.x,l=a.y-d.y;0>s?(s=-s,
e=d.x-s):e=d.x,0>l?(l=-l,i=d.y-l):i=d.y,o.x=e,o.y=i,o.width=s,o.height=l}),window.addEventListener("mouseup",s=function(t){
window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",s),
body.unregisterCursor(h),o["#rect"].style.visibility="hidden",o["#rect"].style.vectorEffect=null;
var e=i(o.x,o.y,o.width,o.height);r(e),o.x=0,o.y=0,o.width=0,o.height=0})}},{},t);
}(SVGGElement),o=e("g","bx-rubberbandhud",s);return{get default(){return o}}}),System.registerModule("elements/bx-satlightslider",[],function(){
"use strict";var t=System.get("classes/color")["default"],e=System.get("utils/color"),n=e.hslToHsv,i=e.hsvToHsl,r=e.colorToString,a=System.get("utils/dom").registerElement,s=System.get("utils/math").normalize,o=Number.parseFloat,l=!1,u='\n  <style>\n    @import url("stylesheets/bx-satlightslider.css");\n  </style>\n\n  <main>\n    <canvas id="canvas"></canvas>\n    <div id="marker"></div>\n  </main>\n</style>\n',c=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=u;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._context=this["#canvas"].getContext("2d"),this["#canvas"].width=800,
this["#canvas"].height=800,this["#canvas"].addEventListener("mousedown",function(e){
return t._onMouseDown(e)})},attributeChangedCallback:function(t,e,n){e!==n&&("hue"===t?this._onHueChange():"saturation"===t?this._onSaturationLightnessChange():"lightness"===t&&this._onSaturationLightnessChange());
},get hue(){return this.hasAttribute("hue")?o(this.getAttribute("hue")):0},set hue(t){
this.setAttribute("hue",t)},get saturation(){return this.hasAttribute("saturation")?o(this.getAttribute("saturation")):0;
},set saturation(t){this.setAttribute("saturation",t)},get lightness(){return this.hasAttribute("lightness")?o(this.getAttribute("lightness")):0;
},set lightness(t){this.setAttribute("lightness",t)},_onMouseDown:function(t){var e,n,i,r,a=this,o=this["#canvas"].getBoundingClientRect(),l=(t.clientX-o.left)/this.clientWidth*100,u=(t.clientY-o.top)/this.clientHeight*100;
this.dispatchEvent(new CustomEvent("markerdragstart")),this._isDraggingMarker=!0,
this._onMarkerDrag(l,u),window.addEventListener("mousemove",i=function(t){(t.clientX!==e||t.clientY!==n)&&(e=t.clientX,
n=t.clientY,l=(t.clientX-o.left)/a.clientWidth*100,u=(t.clientY-o.top)/a.clientHeight*100,
l=s(l,0,100,2),u=s(u,0,100,2),a._onMarkerDrag(l,u))}),window.addEventListener("mouseup",r=function(){
window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r),
a._isDraggingMarker=!1,a.dispatchEvent(new CustomEvent("markerdragend"))})},_onMarkerDrag:function(t,e){
var n,a;this["#marker"].style.left=t+"%",this["#marker"].style.top=e+"%";var s=i(this.hue,t,100-e),o=(n=s[Symbol.iterator](),
(a=n.next()).done?void 0:a.value),u=(a=n.next()).done?void 0:a.value,c=(a=n.next()).done?void 0:a.value;
if((this.hue!==o||this.saturation!==u||this.lightness!==c)&&(this.hue=o,this.saturation=u,
this.lightness=c,this.dispatchEvent(new CustomEvent("markerdrag")),l)){var d=r({h:o,
s:u,l:c},"hex");console.log("%c     ","background: "+d,'color = "'+d+'"')}},_onHueChange:function(){
if(!this._isDraggingMarker&&null!==this.hue){var e=this["#canvas"].width,n=this["#canvas"].height,i=this._context;
i.clearRect(0,0,e,n);var r=new t(this.hue,100,50,1,"hsla");i.fillStyle=r.toString("hex"),
i.fillRect(0,0,e,n);var a=i.createLinearGradient(0,0,e,0);a.addColorStop(0,"rgba(255,255,255,1)"),
a.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=a,i.fillRect(0,0,e,n);var s=i.createLinearGradient(0,0,0,n);
s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=s,
i.fillRect(0,0,e,n)}},_onSaturationLightnessChange:function(){var t,e,i=n(this.hue,this.saturation,this.lightness),r=(t=i[Symbol.iterator](),
(e=t.next()).done?void 0:e.value,(e=t.next()).done?void 0:e.value),a=(e=t.next()).done?void 0:e.value;
this["#marker"].style.left=r/100*100+"%",this["#marker"].style.top=100-a/100*100+"%";
}},{},e)}(HTMLElement),d=a("bx-satlightslider",c);return{get default(){return d}};
}),System.registerModule("elements/bx-select",[],function(){"use strict";System.get("elements/bx-selectitem");
var t=System.get("utils/dom").registerElement,e=System.get("utils/time").sleep,n=System.get("classes/shortcut")["default"],i=Number.parseFloat,r=(Object.values,
'\n<style>\n  @import url("stylesheets/scrollbars.css");\n  @import url("stylesheets/bx-select.css");\n</style>\n\n<div id="button">\n  <img id="thumbnail"></img>\n  <div id="label"></div>\n\n  <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n    <use xlink:href="images/icons.svg#select-arrows" width="100" height="100"></use>\n  </svg>\n</div>\n\n<div id="overlay"></div>\n\n<div id="popup" style="visibility: hidden"">\n  <content></content>\n</div>\n'),a=function(t){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this._onValueChange(),this._onDisabledChange(),this.addEventListener("focus",function(e){
return t._onFocus()}),this.addEventListener("blur",function(e){return t._onBlur();
}),this.addEventListener("keydown",function(e){return t._onKeyDown(e)}),this.addEventListener("thumbnailchange",function(e){
return t._onItemThumbnailChange(e)}),this["#button"].addEventListener("click",function(e){
return t._onButtonClick(e)}),this["#overlay"].addEventListener("mousedown",function(e){
return t._onOverlayMouseDown(e)}),this["#popup"].addEventListener("click",function(e){
return t._onPopupElementClick(e)}),this["#popup"].addEventListener("mouseover",function(e){
return t._onPopupMouseOver(e)}),this["#popup"].addEventListener("mouseout",function(e){
return t._onPopupMouseOut(e)}),this["#popup"].addEventListener("mousewheel",function(e){
return t._onPopupMouseWheel(e)}),this["#popup"].addEventListener("scroll",function(e){
return t._onPopupScroll(e)})},attributeChangedCallback:function(t,e,n){e!==n&&("value"===t?this._onValueChange():"disabled"===t&&this._onDisabledChange());
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):null},
set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)},
get mixed(){return this.hasAttribute("mixed")},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},_onFocus:function(){var t=this,e=this._getItemWithValue(this.value)||this.querySelector("bx-selectitem");
if(!e)return void this.blur();this["#popup"].style.pointerEvents="all",this["#popup"].style.visibility="visible",
this["#popup"].style.height="auto",this["#popup"].style.left="0px",this["#popup"].style.top="0px",
this["#popup"].style.overflow=null,this["#popup"].scrollTop=0,this["#overlay"].style.display="block";
var n=e.getLabelBoundingClientRect(),r=this["#label"].getBoundingClientRect(),a=this["#button"].getBoundingClientRect(),s=r.left-n.left,o=r.top-n.top,l=a.right-s+3;
this["#popup"].style.left=s+"px",this["#popup"].style.top=o+"px",this["#popup"].style.width=l+"px";
var u=this["#popup"].getBoundingClientRect();if(u.top<0){i(this["#popup"].style.top);
this["#popup"].style.height=u.height+u.top-5+"px",this["#popup"].style.top="5px",
this["#popup"].scrollTop=9999}u=this["#popup"].getBoundingClientRect();var c=!1;if(u.bottom+5>window.innerHeight){
c=!0;var d=u.bottom-window.innerHeight;this["#popup"].style.height=u.height-d-5+"px";
}e.disabled===!1&&this._highlightItem(e),window.addEventListener("resize",this._windowResizeListener=function(){
return t.blur()})},_onBlur:function(){this["#overlay"].style.display="none",this["#popup"].style.visibility="hidden",
window.removeEventListener("resize",this._windowResizeListener)},_onKeyDown:function(t){
var e=n.fromEvent(t);e.matches("ArrowUp")?(t.preventDefault(),this._highlightPreviousItem()):e.matches("ArrowDown")?(t.preventDefault(),
this._highlightNextItem()):e.matches("Control","ArrowUp")?(t.preventDefault(),this._highlightFirstItem()):e.matches("Control","ArrowDown")?(t.preventDefault(),
this._highlightLastItem()):e.matches("Enter")&&(t.preventDefault(),this._selectHighlightedItem());
},_onValueChange:function(){var t=this,e=$traceurRuntime.spread(this.querySelectorAll("bx-selectitem")),n=null===this.value?null:e.find(function(e){
return e.getAttribute("value")===t.value});if(n){n.setAttribute("checked",""),this["#label"].textContent=n.getAttribute("label"),
n.thumbnail?(this["#thumbnail"].style.display="block",this["#thumbnail"].src=n.thumbnail):this["#thumbnail"].style.display="none";
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l!==n&&l.removeAttribute("checked")}}catch(u){r=!0,a=u}finally{try{
i||null==o["return"]||o["return"]()}finally{if(r)throw a}}}else{this["#label"].textContent="None",
this["#thumbnail"].style.display="none";var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=e[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;m.removeAttribute("checked")}}catch(g){d=!0,h=g}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}}},_onItemThumbnailChange:function(t){var e=t.target;e.value===this.value&&(e.thumbnail?(this["#thumbnail"].src=e.thumbnail,
this["#thumbnail"].style.display="block"):this["#thumbnail"].style.display="none");
},_onDisabledChange:function(){this.tabIndex=this.disabled?-1:0},_onButtonClick:function(t){
"visible"===this["#popup"].style.visibility?this.blur():this.focus()},_onOverlayMouseDown:function(t){
t.preventDefault(),this.blur()},_onPopupElementClick:function(t){"bx-selectitem"==t.target.localName&&0===t.button&&this._onSelectItemClick(t.target);
},_onSelectItemClick:function(t){var n;return $traceurRuntime.asyncWrap(function(i){
for(;;)switch(i.state){case 0:i.state=t.disabled===!1?5:-2;break;case 5:this["#popup"].style.pointerEvents="none",
t.highlighted=!t.highlighted,i.state=6;break;case 6:return void Promise.resolve(e(100)).then(i.createCallback(2),i.errback);
case 2:t.highlighted=!t.highlighted,i.state=8;break;case 8:return void Promise.resolve(e(100)).then(i.createCallback(4),i.errback);
case 4:n=t.value!==this.value,this.value=t.value,this.blur(),(n||this.mixed)&&this.dispatchEvent(new CustomEvent("change")),
i.state=-2;break;default:return i.end()}},this)},_onPopupMouseOver:function(t){"bx-selectitem"===t.target.localName&&this._onSelectItemMouseEnter(t.target);
},_onPopupMouseOut:function(t){t.toElement!==this&&this._highlightItem(null)},_onPopupMouseWheel:function(t){
t.preventDefault(),this._scroll(t.deltaY)},_onPopupScroll:function(t){t.stopImmediatePropagation(),
t.preventDefault()},_onSelectItemMouseEnter:function(t){t.disabled===!1&&this._highlightItem(t);
},_scroll:function(t){var e=this["#popup"],n=e.scrollTop+e.offsetHeight<=e.scrollHeight,r=e.scrollTop>0;
if((!(0>t)||r)&&(!(t>0)||n)){var a=i(e.style.top),s=i(e.style.height);if(t>0)if(a-t>5){
s+t+10>window.innerHeight&&(t=window.innerHeight-s-10),s+t>e.scrollHeight&&(t=e.scrollHeight-s,
e.style.overflow="hidden");var o=s+t,l=a-t;e.style.height=o+"px",e.style.top=l+"px",
e.scrollTop=0}else if(s+t+10>window.innerHeight){var u=window.innerHeight-10,c=u-s;
e.style.top="5px",e.style.height=u+"px",e.scrollTop+=t-c}else e.scrollTop+=t;else if(0>t){
var d=window.innerHeight-s-a;if(d>5)if(window.innerHeight-s+t-10<0){var h=window.innerHeight-10,v=h-s;
e.style.height=h+"px",e.scrollTop+=t+v}else if(s-t>e.scrollHeight)e.style.overflow="hidden",
e.style.height=e.scrollHeight+"px";else{var f=s-t;e.style.height=f+"px"}else e.scrollTop+=t;
}}},_highlightItem:function(t){if(null===t)this._highlightedItem&&(this._highlightedItem.highlighted=!1);else{
this._highlightedItem&&this._highlightedItem!==t&&(this._highlightedItem.highlighted=!1,
this._highlightedItem=null),t.highlighted=!0,this._highlightedItem=t;var e=(t.offsetTop,
this["#popup"].clientHeight,t.clientHeight,t.getBoundingClientRect()),n=this["#popup"].getBoundingClientRect();
if(e.bottom>n.bottom){var i=e.bottom-n.bottom;this._scroll(i)}else if(e.top<n.top){
var r=e.top-n.top;this._scroll(r)}}},_highlightPreviousItem:function(){for(var t=this.querySelectorAll("bx-selectitem:not([disabled])"),e=null,n=0;n<t.length;n+=1){
var i=t[n];if(i.highlighted){e=n;break}}if(0!==e)if(null===e){var r=t[t.length-1];
this._highlightItem(r)}else{var a=t[e-1];this._highlightItem(a)}},_highlightNextItem:function(){
for(var t=this.querySelectorAll("bx-selectitem:not([disabled])"),e=null,n=0;n<t.length;n+=1){
var i=t[n];if(i.highlighted){e=n;break}}if(e!==t.length-1)if(null===e){var r=t[0];
this._highlightItem(r)}else{var a=t[e+1];this._highlightItem(a)}},_highlightFirstItem:function(){
var t=this.querySelector("bx-selectitem:not([disabled])");t&&this._highlightItem(t);
},_highlightLastItem:function(){var t=this.querySelectorAll("bx-selectitem:not([disabled])");
if(t.length>0){var e=t[t.length-1];this._highlightItem(e)}},_selectHighlightedItem:function(){
var t=this.querySelector("bx-selectitem[highlighted]");t&&(this.value=t.value),this.blur(),
this.dispatchEvent(new CustomEvent("change"))},_getItemWithValue:function(t){var e=null,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this.querySelectorAll("bx-selectitem")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(o.value===t){e=o;break}}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return e}},{},t)}(HTMLElement),s=t("bx-select",a);return{get default(){
return s}}}),System.registerModule("elements/bx-selectedtextrangehud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.createSVGMatrix,i=t.closest,r=t.registerElement,a=(System.get("utils/rect").combineRects,
System.get("utils/text").getRangeOffsetRelativeToElement),s=System.get("utils/time").throttle,o=System.get("utils/transform").getTransformToElement,l='\n  <style>@import url("stylesheets/bx-selectedtextrangehud.css");</style>\n  <line id="caret-line"></line>\n  <g id="selection-rects"></g>\n',u=function(t){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=l;var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value;this["#"+a.id]=a}}catch(o){e=!0,n=o}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}this._update200ms=s(this._update,200,this)},enabledCallback:function(){
var t=this;this._update(),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._update200ms()})},disabledCallback:function(){body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedTextRangeChange:function(){this._update()},_update:function(){this._updateCaretLine(),
this._udpateSelectionRects()},_updateCaretLine:function(){var t=body.canvas.selectedTextRange;
if(t){var e=i(t.startContainer,"text"),r=e.getNumberOfChars(),s="backward"===t.direction?"end":"start",l=a(t,e,s);
if(0===l){var u=e.getExtentOfChar(l),c=e.getStartPositionOfChar(l),d=e.getSubStringLength(l,1),h=u.height,v=e.getRotationOfChar(l),f=n();
f.multiplySelf(o(e,this)),f.rotateSelf(v,c.x+d/2,c.y),this["#caret-line"].setAttribute("x1",c.x),
this["#caret-line"].setAttribute("y1",u.y),this["#caret-line"].setAttribute("x2",c.x),
this["#caret-line"].setAttribute("y2",u.y+h),this["#caret-line"].setAttribute("transform",f.toString()),
this["#caret-line"].style.visibility="visible"}else if(l>0&&r>=l){var m=e.getExtentOfChar(l-1),g=e.getEndPositionOfChar(l-1),b=e.getSubStringLength(l-1,1),p=m.height,y=e.getRotationOfChar(l-1),_=n();
_.multiplySelf(o(e,this)),_.rotateSelf(y,g.x-b/2,g.y),this["#caret-line"].setAttribute("x1",g.x),
this["#caret-line"].setAttribute("y1",m.y),this["#caret-line"].setAttribute("x2",g.x),
this["#caret-line"].setAttribute("y2",m.y+p),this["#caret-line"].setAttribute("transform",_.toString()),
this["#caret-line"].style.visibility="visible"}else l>r&&(this["#caret-line"].style.visibility="hidden");
}else this["#caret-line"].style.visibility="hidden"},_udpateSelectionRects:function(){
var t=body.canvas.selectedTextRange;if(this["#selection-rects"].innerHTML="",t&&t.collapsed===!1)for(var r=i(t.startContainer,"text"),s=a(t,r,"start"),l=a(t,r,"end"),u=r.getNumberOfChars(),c=s;l>c&&u>c;c+=1){
var d=r.getExtentOfChar(c),h=r.getStartPositionOfChar(c),v=(r.getEndPositionOfChar(c),
r.getSubStringLength(c,1)),f=d.height,m=r.getRotationOfChar(c),g=n();g.multiplySelf(o(r,this)),
g.rotateSelf(m,h.x+v/2,h.y);var b=e("svg:rect");b.setAttribute("x",h.x),b.setAttribute("y",d.y),
b.setAttribute("width",v),b.setAttribute("height",f),b.setAttribute("transform",g.toString()),
this["#selection-rects"].append(b)}}},{},t)}(SVGGElement),c=r("g","bx-selectedtextrangehud",u);
return{get default(){return c}}}),System.registerModule("elements/bx-selectitem",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e='\n  <style>@import url("stylesheets/bx-selectitem.css");</style>\n  <main>\n    <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none"><use width="100" height="100"></use></svg>\n    <img id="thumbnail"></img>\n    <div id="label"></div>\n  </main>\n',n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=e;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._onLabelChange(),this._onCheckedChange()},attributeChangedCallback:function(t,e,n){
e!==n&&("label"===t?this._onLabelChange():"checked"===t&&this._onCheckedChange());
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):""},set value(t){
this.setAttribute("value",t)},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(t){this.setAttribute("label",t)},get checked(){return this.hasAttribute("checked");
},set checked(t){t===!0?this.setAttribute("checked",""):this.removeAttribute("checked");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get thumbnail(){return this["#thumbnail"].src},set thumbnail(t){null===t?this["#thumbnail"].removeAttribute("src"):this["#thumbnail"].setAttribute("src",t),
this.dispatchEvent(new CustomEvent("thumbnailchange",{bubbles:!0}))},getLabelBoundingClientRect:function(){
return this["#label"].getBoundingClientRect()},_onLabelChange:function(){this["#label"].textContent=this.label;
},_onCheckedChange:function(){this["#icon"].firstElementChild.href.baseVal=this.checked?"images/icons.svg#check-mark":"";
}},{},t)}(HTMLElement),i=t("bx-selectitem",n);return{get default(){return i}}}),System.registerModule("elements/bx-shortcutseditor",[],function(){
"use strict";System.get("elements/bx-shortcutseditorrow");var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("classes/shortcut")["default"],r=function(t){
return"string"==typeof t},a='\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-shortcutseditor.css");</style>\n\n  <main>\n    <header>\n      <div>Command</div>\n      <div>Shortcut</div>\n    </header>\n\n    <div id="rows"></div>\n  </main>\n',s=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t,e,n,i,r,s,o;return $traceurRuntime.asyncWrap(function(l){
for(;;)switch(l.state){case 0:t=this,this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=a,e=!0,n=!1,i=void 0;try{for(r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0)o=r.value,
this["#"+o.id]=o}catch(u){n=!0,i=u}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this.addEventListener("keydown",function(e){return t._onKeyDown(e);
}),this["#rows"].addEventListener("change",function(e){return t._onRowChange(e)}),
this["#rows"].addEventListener("focusin",function(e){return t._onRowFocusIn(e)}),
body.bridge.postMessage("getShortcutsEditorModel",null,function(e){return t._onModelReady(e);
}),l.state=-2;break;default:return l.end()}},this)},attachedCallback:function(){var t=this;
body.addEventListener("configchange",this._configChangeListener=function(e){return t._onConfigChange(e);
})},detachedCallback:function(){body.removeEventListener("configchange",this._configChangeListener);
},_onConfigChange:function(t){var e=t.detail,n=e.key,a=e.value;if("bx-shortcutseditor:userShortcuts"===n){
var s=a,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=this["#rows"].children[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=s[h.commandID];h.userShortcut=r(v)?i.fromString(v):null}}catch(f){
l=!0,u=f}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}this._markConflictingRows();
}},_onModelReady:function(t){var n,a,s,o,l,u,c,d,h,v,f,m;return $traceurRuntime.asyncWrap(function(g){
for(;;)switch(g.state){case 0:h=body.getConfig,v=h.call(body,"bx-shortcutseditor:userShortcuts"),
g.state=5;break;case 5:return void Promise.resolve(v).then(g.createCallback(3),g.errback);
case 3:f=g.value,g.state=2;break;case 2:m=f?f:{},n=m,g.state=7;break;case 7:a=!0,
s=!1,o=void 0;try{for(l=void 0,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)c=l.value,
d=e("bx-shortcutseditorrow"),d.commandID=c.id,d.label=c.label,d.defaultShortcut=r(c.shortcut)?i.fromString(c.shortcut):null,
d.userShortcut=r(n[c.id])?i.fromString(n[c.id]):null,this["#rows"].append(d)}catch(b){
s=!0,o=b}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}this._markConflictingRows(),
g.state=-2;break;default:return g.end()}},this)},_onRowChange:function(t){var e,n,i,r,a,s,o,l;
return $traceurRuntime.asyncWrap(function(u){for(;;)switch(u.state){case 0:t.stopPropagation(),
e=t.target,n=e.commandID,i=e.userShortcut,u.state=9;break;case 9:a=body.getConfig,
s=a.call(body,"bx-shortcutseditor:userShortcuts"),u.state=5;break;case 5:return void Promise.resolve(s).then(u.createCallback(3),u.errback);
case 3:o=u.value,u.state=2;break;case 2:l=o?o:{},r=l,u.state=7;break;case 7:null===i?delete r[n]:r[n]=i.toString(),
body.setConfig("bx-shortcutseditor:userShortcuts",r),u.state=-2;break;default:return u.end();
}},this)},_onRowFocusIn:function(t){var e=t.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#rows"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===e}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}},_onKeyDown:function(t){t.preventDefault();var e=i.fromEvent(t);
if(e.matches("ArrowUp")){var n=this._shadowRoot.querySelector(":focus");n.previousElementSibling&&n.previousElementSibling.focus();
}else if(e.matches("ArrowDown")){var r=this._shadowRoot.querySelector(":focus");r.nextElementSibling&&r.nextElementSibling.focus();
}},_markConflictingRows:function(){var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#rows"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!1;if(a.shortcut&&a.shortcut.isVoid()===!1){var o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=this["#rows"].children[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;if(h!==a&&h.shortcut&&null!==h.shortcut.base&&a.shortcut.compare(h.shortcut)===!0){
s=!0;break}}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{
if(l)throw u}}}a.conflicting=s}}catch(f){e=!0,n=f}finally{try{t||null==r["return"]||r["return"]();
}finally{if(e)throw n}}}},{},t)}(HTMLElement),o=n("bx-shortcutseditor",s);return{
get default(){return o}}}),System.registerModule("elements/bx-shortcutseditorrow",[],function(){
"use strict";var t=System.get("utils/dom"),e=(t.createElement,t.registerElement),n=System.get("classes/shortcut")["default"],i=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Shift+ArrowUp","Shift+ArrowDown","Shift+ArrowLeft","Shift+ArrowRight","Tab","Escape","Enter"],r='\n  <style>@import url("stylesheets/bx-shortcutseditorrow.css");</style>\n\n  <main>\n    <div id="label"></div>\n    <div id="shortcut-preview"></div>\n\n    <div id="buttons">\n      <bx-button\n        id="clear-button"\n        icon="clear-shortcut"\n        iconsize="12"\n        title="Clear"\n        skin="bx-shortcutseditorrow">\n      </bx-button>\n\n      <bx-button\n        id="reset-button"\n        icon="reset-shortcut"\n        iconsize="12"\n        title="Reset to default shortcut"\n        skin="bx-shortcutseditorrow">\n      </bx-button>\n    </div>\n  </main>\n',a=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this.tabIndex=0,this._userShortcut=null,this._defaultShortcut=null,
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=r;
var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this._shadowRoot.addEventListener("click",function(e){return t._onClick(e);
}),this.addEventListener("keydown",function(e){return t._onKeyDown(e)}),this.addEventListener("blur",function(){
return t._onBlur()}),body.bridge.postMessage("getBackendName",null,function(e){return t._backendName=e;
})},attributeChangedCallback:function(t,e,n){e!==n&&("label"===t?this._updateLabel():"editable"===t&&this._update());
},get commandID(){return this.hasAttribute("commandid")?this.getAttribute("commandid"):null;
},set commandID(t){t?this.setAttribute("commandid",t):this.removeAttribute("commandid"),
this._update()},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(t){this.setAttribute("label",t)},get editable(){return this.hasAttribute("editable");
},set editable(t){t?this.setAttribute("editable",""):this.removeAttribute("editable");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get conflicting(){return this.hasAttribute("conflicting")},set conflicting(t){t?this.setAttribute("conflicting",""):this.removeAttribute("conflicting");
},get userShortcut(){return this._userShortcut},set userShortcut(t){this._userShortcut=t,
this._updateShortcutPreview(),this._updateButtons()},get defaultShortcut(){return this._defaultShortcut;
},set defaultShortcut(t){this._defaultShortcut=t,this._updateShortcutPreview(),this._updateButtons();
},get shortcut(){return this._userShortcut||this._defaultShortcut||null},set shortcut(t){
throw new Error("shortcut property is read-only")},_update:function(){this._updateLabel(),
this._updateShortcutPreview(),this._updateButtons()},_updateLabel:function(){this["#label"].textContent=this.label;
},_updateShortcutPreview:function(){this.editable===!0?this["#shortcut-preview"].textContent="Press new shortcut":this.editable===!1&&(this.userShortcut?(this["#shortcut-preview"].textContent=this.userShortcut.toDisplayString(),
this["#shortcut-preview"].classList.add("user-shortcut")):(this["#shortcut-preview"].textContent=this.defaultShortcut?this.defaultShortcut.toDisplayString():"",
this["#shortcut-preview"].classList.remove("user-shortcut")))},_updateButtons:function(){
this.userShortcut?this["#reset-button"].hidden=!1:this["#reset-button"].hidden=!0,
null===this.shortcut||this.shortcut.isVoid()?this["#clear-button"].hidden=!0:this["#clear-button"].hidden=!1;
},_onKeyDown:function(t){var e=n.fromEvent(t);if(this.editable)if(t.preventDefault(),
t.stopPropagation(),e.matches("Backspace")||e.matches("Escape")||e.matches("Enter"))this.editable=!1;else{
if(e.meta&&"electron"===this._backendName)return;e.base&&i.includes(e.toString())===!1&&(this.userShortcut&&e.matches(this.userShortcut)?this.editable=!1:this.defaultShortcut&&e.matches(this.defaultShortcut)?(this.userShortcut=null,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.editable=!1):(this.userShortcut=e,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.editable=!1))}else e.matches("Enter")?this.editable=!0:e.matches("Backspace")&&(this.userShortcut?(this.userShortcut=null,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))):this.defaultShortcut&&(this.userShortcut=new n,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))))},_onClick:function(t){
0===t.button&&(t.target===this["#clear-button"]?this._onClearButtonClick(t):t.target===this["#reset-button"]?this._onResetButtonClick(t):2===t.detail&&(this.editable=!0));
},_onClearButtonClick:function(t){this.userShortcut=new n,this.dispatchEvent(new CustomEvent("change",{
bubbles:!0}))},_onResetButtonClick:function(t){this.userShortcut=null,this.dispatchEvent(new CustomEvent("change",{
bubbles:!0}))},_onBlur:function(){this.editable=!1}},{},t)}(HTMLElement),s=e("bx-shortcutseditorrow",a);
return{get default(){return s}}}),System.registerModule("elements/bx-slider",[],function(){
"use strict";System.get("elements/bx-contextmenu"),System.get("elements/bx-menuitem");
var t=System.get("classes/shortcut")["default"],e=System.get("classes/undo-manager")["default"],n=System.get("utils/dom").registerElement,i=System.get("utils/math"),r=i.normalize,a=i.round,s=i.countDecimalPlaces,o=System.get("utils/time").debounce,l=System.get("utils/type"),u=l.isNumeric,c=l.isNumber,d=Math.pow,h=Number,v=h.isFinite,f=h.parseFloat,m=(Object.entries,
'\n  <style id="skin-style"></style>\n\n  <main>\n    <input id="input" type="text" spellcheck="false"></input>\n    <div id="bar"></div>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n'),g=function(n){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var t=this;this.commands={selectAll:{exec:function(){return t["#input"].select();
}},copy:{enabled:function(){return t["#input"].selectionStart!==t["#input"].selectionEnd;
},exec:function(){return t._copyInputValue()}},cut:{enabled:function(){return t["#input"].selectionStart!==t["#input"].selectionEnd;
},exec:function(){return t._cutInputValue()}},paste:{exec:function(){return t._pasteInputValue();
}},undo:{enabled:function(){return t._undoManager.canUndo()},exec:function(){return t._undoManager.undo();
}},redo:{enabled:function(){return t._undoManager.canRedo()},exec:function(){return t._undoManager.redo();
}}},this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=m;
var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this._undoManager=new e,this.addEventListener("mousedown",function(e){
return t._onMouseDown(e)}),this.addEventListener("contextmenu",function(e){return t._onContextMenu(e);
}),this["#input"].addEventListener("focus",function(e){return t._onInputFocus(e)}),
this["#input"].addEventListener("keydown",function(e){return t._onInputKeyDown(e);
}),this["#context-menu"].menuWillShow=function(e){return t._menuWillShow(e)},this["#context-menu"].menuItemWillTrigger=function(e){
return t._menuItemWillTrigger(e)},this["#context-menu"].addEventListener("menuitemtrigger",function(e){
return t._onContextMenuItemTrigger(e)}),this._onValuePropertyChange(),this._onSkinPropertyChange(),
this._onDisabledPropertyChange()},attributeChangedCallback:function(t,e,n){e!==n&&("value"===t?this._onValuePropertyChange():"skin"===t?this._onSkinPropertyChange():"disabled"===t?this._onDisabledPropertyChange():("before"===t||"after"===t)&&(this["#input"].matches(":focus")||(this["#input"].value=this._serializeValue(this.value))));
},get value(){return this.hasAttribute("value")?f(this.getAttribute("value")):this.min!==-(1/0)?this.min:0;
},set value(t){this.setAttribute("value",t)},get min(){return this.hasAttribute("min")?f(this.getAttribute("min")):-(1/0);
},set min(t){c(t)?this.setAttribute("min",t):this.removeAttribute("min")},get max(){
return this.hasAttribute("max")?f(this.getAttribute("max")):1/0},set max(t){c(t)?this.setAttribute("max",t):this.removeAttribute("max");
},get before(){return this.hasAttribute("before")?this.getAttribute("before"):""},
set before(t){null===t?this.removeAttribute("before"):this.setAttribute("before",t);
},get after(){return this.hasAttribute("after")?this.getAttribute("after"):""},set after(t){
null===t?this.removeAttribute("after"):this.setAttribute("after",t)},get mixed(){
return this.hasAttribute("mixed")},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get disabled(){return this.hasAttribute("disabled")},set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},get precision(){return this.hasAttribute("precision")?f(this.getAttribute("precision")):2;
},set precision(t){this.setAttribute("precision",t)},get step(){return this.hasAttribute("step")?f(this.getAttribute("step")):a(d(.1,this.precision),this.precision);
},set step(t){this.setAttribute("step",step)},get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):null;
},set skin(t){null===t?this.removeAttribute("skin"):this.setAttribute("skin",t)},
validate:function(t){return u(t)},_onValuePropertyChange:function(){this["#input"].matches(":focus")?this["#input"].value=this.value:this["#input"].value=this._serializeValue(this.value),
this._updateBar(),this._updateInputValidity()},_onSkinPropertyChange:function(){var t='@import url("stylesheets/bx-slider.css");';
null!==this.skin&&(t='@import url("stylesheets/bx-slider@'+this.skin+'.css");'),this["#skin-style"].innerText=t;
},_onDisabledPropertyChange:function(){this.disabled?this["#input"].tabIndex=-1:this["#input"].tabIndex=0;
},_onMouseDown:function(t){var e=this;if(0!==t.button)t.preventDefault();else if(this["#input"].matches(":focus")===!1){
t.preventDefault();var n,i,a,s=1,o=this.value,l=(this["#bar"].clientWidth,this.value),u=null,c=null,d=!1;
a=v(this.min)&&v(this.max)?(this.max-this.min)/this.clientWidth:this.step,u=body.registerCursor("col-resize",100),
window.addEventListener("mousemove",n=function(n){if(n.clientX!==c){c=n.clientX;var i=n.clientX-t.clientX;
if(d===!1){if(i>=-s&&s>=i)return;d=!0,e.dispatchEvent(new CustomEvent("changestart"));
}-s>i?i+=s:i>s&&(i-=s);var l=o+i*a;l=r(l,e.min,e.max,e.precision),e.value=l,e.dispatchEvent(new CustomEvent("change"));
}}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.unregisterCursor(u),d===!0?(d=!1,e.dispatchEvent(new CustomEvent("changeend",{
detail:e.value!==l}))):(e["#input"].focus(),e["#input"].select())})}},_onInputFocus:function(t){
var e,n,i,a=this,s=this.value,l=this.value;body.bridge.postMessage("toggleTextInputMode",!0),
this["#input"].value=this.value,this._hideBar(),this._updateInputValidity(),this.dispatchEvent(new CustomEvent("changestart")),
this["#input"].addEventListener("input",e=function(){a._updateInputValidity()}),this["#input"].addEventListener("input",n=o(function(){
var t=l,e=a["#input"].value;l=a["#input"].value,a._undoManager.register({label:"Typing",
undo:function(){a["#input"].value=l=t,a._updateInputValidity(),a["#input"].select();
},redo:function(){a["#input"].value=l=e,a._updateInputValidity(),a["#input"].select();
}})},250,this)),this.addEventListener("blur",i=function(t){a["#input"].removeEventListener("input",e),
a["#input"].removeEventListener("input",n),a.removeEventListener("blur",i),body.bridge.postMessage("toggleTextInputMode",!1),
a._undoManager.reset();var o=f(a["#input"].value);o=r(o,a.min,a.max,9);var l=a.validate(f(a["#input"].value))===!0,u=o!==s;
(l&&u===!0||u===!1&&a.mixed===!0)&&(a.value=o,a.dispatchEvent(new CustomEvent("change"))),
a["#input"].value=a._serializeValue(a.value),a.dispatchEvent(new CustomEvent("changeend",{
detail:u})),a._showBar()})},_onInputKeyDown:function(e){var n=t.fromEvent(e);n.matches("Enter")?(this._confirmInputChange(),
e.preventDefault(),e.stopPropagation()):n.matches("Escape")?(this._cancelInputChange(),
e.preventDefault(),e.stopPropagation()):n.matches("ArrowUp")?(this._changeInputValueByStep(this.step),
e.preventDefault(),e.stopPropagation()):n.matches("ArrowDown")?(this._changeInputValueByStep(-this.step),
e.preventDefault(),e.stopPropagation()):n.matches("Shift","ArrowUp")?(this._changeInputValueByStep(10*this.step),
e.preventDefault(),e.stopPropagation()):n.matches("Shift","ArrowDown")?(this._changeInputValueByStep(10*-this.step),
e.preventDefault(),e.stopPropagation()):(n.matches("ArrowLeft")||n.matches("Shift","ArrowLeft")||n.matches("ArrowRight")||n.matches("Shift","ArrowRight"))&&e.stopPropagation();
},_onContextMenu:function(t){t.preventDefault(),this["#input"].focus(),this["#input"].select(),
this["#context-menu"].open(t.clientX,t.clientY)},_onContextMenuItemTrigger:function(t){
var e=t.detail,n=this.commands[e.commandID];n&&n.exec()},_menuWillShow:function(t){
var e=this;return new Promise(function(n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(t){this._validateMenuItem(t);
},_validateMenuItem:function(t){var e=this;return new Promise(function(n){var i=t.commandID||null,r=i?e.commands[i]:null;
r&&(t.disabled=r.enabled?!r.enabled():!1),n()})},_serializeValue:function(t){var e;
return e=s(t)<this.precision?t.toFixed(this.precision):t.toString(),e=this.before+e+this.after;
},_changeInputValueByStep:function(t){if(u(this["#input"].value)){var e=f(this["#input"].value)+t;
e=r(e,this.min,this.max,this.precision),this["#input"].value=e.toFixed(this.precision),
this["#input"].select(),this["#input"].dispatchEvent(new Event("input",{bubbles:!0
}))}},_updateInputValidity:function(){f(this["#input"].value)?this["#input"].setCustomValidity(""):this["#input"].setCustomValidity("Invalid value");
},_confirmInputChange:function(){this.blur()},_cancelInputChange:function(){this["#input"].value=this.value,
this.blur()},_showBar:function(){this["#bar"].style.visibility=null,this._updateBar();
},_hideBar:function(){this["#bar"].style.visibility="hidden"},_updateBar:function(){
if(v(this.min)&&v(this.max)){var t=this.value/this.max*100;this["#bar"].style.width=t+"%";
}},_copyInputValue:function(){var t=this["#input"].value.substring(this["#input"].selectionStart,this["#input"].selectionEnd);
body.bridge.postMessage("setClipboardData",{"text/plain":t})},_pasteInputValue:function(){
var t=this;body.bridge.postMessage("getClipboardData",null,function(e){if(e["text/plain"]){
var n=t["#input"].selectionStart,i=t["#input"].selectionEnd,r=e["text/plain"],a=t["#input"].value.substring(0,n),s=t["#input"].value.substring(i,t["#input"].value.length);
t["#input"].value=a+r+s,t["#input"].setSelectionRange(n+r.length,n+r.length),t["#input"].dispatchEvent(new Event("input",{
bubbles:!0}))}})},_cutInputValue:function(){var t=this["#input"].selectionStart,e=this["#input"].selectionEnd,n=this["#input"].value.substring(t,e),i=this["#input"].value.substring(0,t),r=this["#input"].value.substring(e,this["#input"].value.length);
this["#input"].value=i+r,this["#input"].setSelectionRange(t,t),this["#input"].dispatchEvent(new Event("input",{
bubbles:!0})),body.bridge.postMessage("setClipboardData",{"text/plain":n})}},{},n);
}(HTMLElement),b=n("bx-slider",g);return{get default(){return b}}}),System.registerModule("elements/bx-starhud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.registerElement,n=t.createSVGMatrix,i=t.createSVGPoint,r=System.get("utils/math").round,a=System.get("utils/time").throttle,s=System.get("utils/transform").getTransformToElement,o=System.get("utils/vector"),l=o.getAngleBetweenVectors,u=o.subtractVectors,c=System.get("classes/enum")["default"],d=System.get("classes/vector")["default"],h=(Math.abs,
new c("star")),v=6,f='\n  <style>@import url("stylesheets/bx-starhud.css");</style>\n\n  <defs>\n    <g class="subhud">\n      <circle class="grippie r1-grippie"></circle>\n      <circle class="grippie r2-grippie"></circle>\n      <circle class="grippie arms-grippie"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',m=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=f,this["#subhuds"]=this._shadowRoot.querySelector("#subhuds"),
this._subhudTemplate=this._shadowRoot.querySelector("defs .subhud"),this._updateGrippiesPosition_200ms=a(this._updateGrippiesPosition,200,this),
this._installed=!1,this._selectedRings=[],this._draggedGrippie=null},enabledCallback:function(){
var t=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()})},disabledCallback:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_install:function(){var t=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(e){
t._onShadowRootMouseDown(e)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onSelectedElementsChange:function(){this._selectedStars=this._getSelectedStars(),
0===this._selectedStars.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onContentMutation:function(t){t.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition_200ms();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(t){
t.target.matches(".r1-grippie")?this._onR1GrippieMouseDown(t):t.target.matches(".r2-grippie")?this._onR2GrippieMouseDown(t):t.target.matches(".arms-grippie")&&this._onArmsGrippieMouseDown(t);
},_onR1GrippieMouseDown:function(t){var e=this;if(0===t.button){body.canvas.undoManager.checkpoint("Change inner star radius");
var n,r,a,s=t.target,o=s.parentElement,c=o[h.star],v=c.getCTM().inverse(),f=c.shift,m=i(t.clientX,t.clientY).matrixTransform(v),g=i(c.cx,c.cy),b=c.getPathData(),p=i(b[1].values[0],b[1].values[1]),y=new d(g,m),_=i(m.x,m.y),x="normal";
s.parentElement.append(s),this._draggedGrippie=s;var w=function(){var t=body.modKeys,e=t.ctrl,n=t.shift;
x=e===!0&&n===!1?"shifted":e===!1&&n===!0?"normal":e===!0&&n===!0?"normal":0!==c.shift?"shifted":"normal";
},S=function(){var t=new d(g,_),e=new d(p,m),n=l(y,t)+f,i=u(t,e).length;body.modKeys.shift&&(n=0),
i>c.r2&&(i=c.r2),"normal"===x?c.setAttribute("data-bx-shift",0):"shifted"===x&&c.setAttribute("data-bx-shift",n),
c.setAttribute("data-bx-r1",i)};window.addEventListener("mousemove",n=function(t){
_=i(t.clientX,t.clientY).matrixTransform(v),S()}),window.addEventListener("mouseup",r=function(){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r),
body.removeEventListener("modkeyschange",a),e._draggedGrippie=null}),body.addEventListener("modkeyschange",a=function(){
w(),S()}),w()}},_onR2GrippieMouseDown:function(t){var e=this;if(0===t.button){body.canvas.undoManager.checkpoint("Change inner star radius");
var r,a,s,o=t.target,c=o.parentElement,v=c[h.star],f=v.getCTM().inverse(),m=n(v.transform.baseVal.consolidate().matrix),g=i(t.clientX,t.clientY).matrixTransform(f),b=i(v.cx,v.cy),p=new d(b,g),y=v.getPathData(),_=i(y[0].values[0],y[0].values[1]);
o.parentElement.append(o),this._draggedGrippie=o,window.addEventListener("mousemove",r=function(t){
var e=i(t.clientX,t.clientY).matrixTransform(f),n=new d(b,e),r=new d(_,g),a=u(n,r).length,s=l(p,n),o=m.rotate(s,b.x,b.y);
a<v.r1&&(a=v.r1),v.setAttribute("transform",o.toString()),v.setAttribute("data-bx-r2",a);
}),window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",a),body.removeEventListener("modkeyschange",s),
e._draggedGrippie=null})}},_onArmsGrippieMouseDown:function(t){var e=this;if(0===t.button){
var n,i,a=t.target,s=a.parentElement,o=s[h.star],l=o.arms,u=!1;a.parentElement.append(a),
this._draggedGrippie=a,window.addEventListener("mousemove",n=function(e){var n=r((e.clientX-t.clientX)/10,0),i=l+n;
3>i&&(i=3),u===!1&&i!==l&&(body.canvas.undoManager.checkpoint("Change number of star arms"),
u=!0),o.arms=i}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),e._draggedGrippie=null})}},_updateSubhuds:function(){
this["#subhuds"].innerHTML="";var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this._selectedStars[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=this._subhudTemplate.cloneNode(!0);s[h.star]=a,this["#subhuds"].append(s);
}}catch(o){e=!0,n=o}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n;
}}this._updateGrippiesPosition(),this._updateGrippiesSize()},_updateGrippiesPosition:function(){
var t=!0,e=!1,n=void 0;try{for(var r=void 0,a=this["#subhuds"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var o=r.value,l=o[h.star],u=l.getPathData(),c=s(l,this),d=!0,v=!1,f=void 0;try{for(var m=void 0,g=o.children[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){
var b=m.value;if(b.matches(".r1-grippie")){var p=i(u[1].values[0],u[1].values[1]).matrixTransform(c);
b.setAttribute("cx",p.x),b.setAttribute("cy",p.y)}else if(b.matches(".r2-grippie")){
var y=i(u[0].values[0],u[0].values[1]).matrixTransform(c);b.setAttribute("cx",y.x),
b.setAttribute("cy",y.y)}else if(b.matches(".arms-grippie")){var _=i(l.cx,l.cy).matrixTransform(c);
b.setAttribute("cx",_.x),b.setAttribute("cy",_.y)}}}catch(x){v=!0,f=x}finally{try{
d||null==g["return"]||g["return"]()}finally{if(v)throw f}}}}catch(w){e=!0,n=w}finally{
try{t||null==a["return"]||a["return"]()}finally{if(e)throw n}}},_updateGrippiesSize:function(){
var t=!0,e=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.setAttribute("r",v/body.canvas.scale)}}catch(h){o=!0,l=h}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(f){e=!0,n=f;
}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}},_getSelectedStars:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"bx-starpath"===o.getAttribute("is")?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedStars(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e}},{},t)}(SVGGElement),g=e("g","bx-starhud",m);return{get default(){return g;
}}}),System.registerModule("elements/bx-starpath",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("utils/math"),r=i.round,a=i.degToRad,s=(System.get("utils/string").collapseWhitespace,
Math),o=s.sin,l=s.cos,u=s.PI,c=Number.parseFloat,d=["data-bx-cx","data-bx-cy","data-bx-r1","data-bx-r2","data-bx-arms","data-bx-shift"],h=function(t,e,n,i,s,c){
for(var d="",h=0;s>=h;h+=1){var v=2*u*(h/s)-u/2,f=i*l(v)+t,m=i*o(v)+e;f=r(f,8),m=r(m,8),
d+=0===h?"M "+f+" "+m:" L "+f+" "+m,v=2*u*(h/s)+u/s-u/2+a(c),f=n*l(v)+t,m=n*o(v)+e,
f=r(f,8),m=r(m,8),d+=" L "+f+" "+m}return d},v=function(t){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){this._update()},
attributeChangedCallback:function(t,e,n){e!==n&&t.startsWith("data-bx-")&&this._update();
},get cx(){return this.hasAttribute("data-bx-cx")?c(this.getAttribute("data-bx-cx")):0;
},set cx(t){this.setAttribute("data-bx-cx",t)},get cy(){return this.hasAttribute("data-bx-cy")?c(this.getAttribute("data-bx-cy")):0;
},set cy(t){this.setAttribute("data-bx-cy",t)},get r1(){return this.hasAttribute("data-bx-r1")?c(this.getAttribute("data-bx-r1")):0;
},set r1(t){this.setAttribute("data-bx-r1",t)},get r2(){return this.hasAttribute("data-bx-r2")?c(this.getAttribute("data-bx-r2")):0;
},set r2(t){this.setAttribute("data-bx-r2",t)},get arms(){return this.hasAttribute("data-bx-arms")?c(this.getAttribute("data-bx-arms")):5;
},set arms(t){this.setAttribute("data-bx-arms",t)},get shift(){return this.hasAttribute("data-bx-shift")?c(this.getAttribute("data-bx-shift")):0;
},set shift(t){this.setAttribute("data-bx-shift",t)},toSVGPath:function(){var t=void 0!==arguments[0]?arguments[0]:!0,n=e("svg:path"),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=this.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=l.name,c=l.value;"is"===u?t&&n.setAttribute("data-bx-is",c):d.includes(u)?t&&n.setAttribute(u,c):n.setAttribute(u,c);
}}catch(h){r=!0,a=h}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}return n},_update:function(){var t=this,e=t.cx,n=t.cy,i=t.r1,r=t.r2,a=t.arms,s=t.shift,o=h(e,n,i,r,a,s);
this.setAttribute("d",o)}},{fromSVGPath:function(t){var n=t.hasAttribute("data-bx-cx")?c(t.getAttribute("data-bx-cx")):0,i=t.hasAttribute("data-bx-cy")?c(t.getAttribute("data-bx-cy")):0,r=t.hasAttribute("data-bx-r1")?c(t.getAttribute("data-bx-r1")):0,a=t.hasAttribute("data-bx-r2")?c(t.getAttribute("data-bx-r2")):0,s=t.hasAttribute("data-bx-arms")?c(t.getAttribute("data-bx-arms")):5,o=t.hasAttribute("data-bx-shift")?c(t.getAttribute("data-bx-shift")):0,l=h(n,i,r,a,s,o);
if(l!==t.getAttribute("d"))return null;var u=e("svg:path","bx-starpath"),d=!0,v=!1,f=void 0;
try{for(var m=void 0,g=t.attributes[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){
var b=m.value,p=b.name,y=b.value;"d"!==p&&"data-bx-is"!==p&&u.setAttribute(p,y)}}catch(_){
v=!0,f=_}finally{try{d||null==g["return"]||g["return"]()}finally{if(v)throw f}}return u;
}},t)}(SVGPathElement),f=n("path","bx-starpath",v);return{get default(){return f}
}}),System.registerModule("elements/bx-startool",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createSVGPoint,n=t.registerElement,i=t.createElement,r=(t.createSVGMatrix,
System.get("utils/event").isMouseMoveIntentional),a=System.get("utils/vector").getAngleBetweenVectors,s=System.get("classes/vector")["default"],o=Math,l=(o.abs,
o.min,function(t){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{enabledCallback:function(){var t=this;this._starCursor=body.registerCursor("images/cursor-star.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(e){
return t._onMouseDown(e)})},disabledCallback:function(){body.unregisterCursor(this._starCursor),
body.unregisterCursor(this._mouseDownStarCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(t){
var e,n,i=this;window.addEventListener("mousemove",e=function(a){r(t,a)!==!1&&(window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",n),i._onIntentionalDragStart(t))}),window.addEventListener("mouseup",n=function(t){
window.removeEventListener("mousemove",e),body.canvas.removeEventListener("mouseend",n);
})},_onIntentionalDragStart:function(t){var n=this;body.canvas.undoManager.checkpoint("Draw Star Shape"),
this._mouseDownStarCursor=body.registerCursor("images/cursor-star.png",900,8,7);var r,o,l,u=body.canvas.currentContainer||body.canvas.currentArtboard,c=i("svg:path","bx-starpath");
c.style.fill="#d8d8d8",u.append(c);var d=c.getScreenCTM().inverse(),h=c.transform.baseVal.consolidate().matrix.multiply(d);
c.setAttribute("transform",h.toString());var v=e(t.clientX,t.clientY),f=e(t.clientX,t.clientY),m=new s(f,e(v.x,v.y-100));
c.setAttribute("data-bx-cx",f.x),c.setAttribute("data-bx-cy",f.y),body.canvas.selectedElements=[c],
window.addEventListener("mousemove",r=function(t){var n=body.modKeys.shift,i=e(t.clientX,t.clientY),r=new s(f,i),o=n?0:a(m,r),l=h.rotate(o,f.x,f.y);
c.setAttribute("transform",l.toString()),c.setAttribute("data-bx-r1",2*r.length/5),
c.setAttribute("data-bx-r2",r.length)}),window.addEventListener("mouseup",o=function(){
window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o),
body.removeEventListener("toolchange",l),body.unregisterCursor(n._mouseDownStarCursor);
}),body.addEventListener("toolchange",l=function(t){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",o),body.removeEventListener("toolchange",l),
body.unregisterCursor(n._mouseDownStarCursor)})}},{},t)}(HTMLElement)),u=n("bx-startool",l);
return{get default(){return u}}}),System.registerModule("elements/bx-strokecontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-paintsection"),System.get("elements/bx-slider");var t=System.get("utils/dom"),e=(t.closest,
t.registerElement),n=System.get("utils/math").round,i=System.get("utils/relationship").queryStylableElements,r=System.get("utils/text").normalizeTextInRangeBeforeEditing,a=System.get("utils/time").throttle,s=System.get("utils/transform").getTransformToElement,o=System.get("classes/decomposed-transform")["default"],l=Number.parseFloat,u='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-strokecontrols.css");\n</style>\n\n<section id="paint-section" is="bx-paintsection" context="stroke"></section>\n\n<section id="opacity-section">\n  <h2 id="opacity-section-heading">Opacity</h2>\n\n  <bx-slider\n    id="opacity-slider"\n    title="Stroke Opacity"\n    value="1"\n    min="0"\n    max="1"\n    precision="2">\n  </bx-slider>\n</section>\n\n<section id="width-section">\n  <h2 id="width-section-heading">Width</h2>\n\n  <bx-slider\n    id="width-slider"\n    title="Stroke width"\n    value="1"\n    min="0"\n    precision="0">\n  </bx-slider>\n\n  <bx-checkbox\n    id="non-scaling-stroke-checkbox"\n    label="Non-scaling stroke">\n  </bx-checkbox>\n</section>\n\n<section id="line-cap-section">\n  <h2 id="line-cap-section-heading">Line Cap</h2>\n\n  <div id="line-cap-buttons" class="buttons">\n    <bx-button\n      id="butt-line-cap-button"\n      value="butt"\n      icon="cap-butt"\n      iconsize="30"\n      title="Butt cap"\n      skin="iconic">\n    </bx-button>\n\n    <bx-button\n      id="round-line-cap-button"\n      value="round"\n      icon="cap-round"\n      iconsize="30"\n      title="Round cap"\n      skin="iconic">\n    </bx-button>\n\n    <bx-button\n      id="square-line-cap-button"\n      value="square"\n      icon="cap-square"\n      iconsize="30"\n      title="Square cap"\n      skin="iconic">\n    </bx-button>\n  </div>\n</section>\n\n<section id="line-join-section">\n  <h2 id="line-join-section-heading">Line Join</h2>\n\n  <div id="line-join-buttons" class="buttons">\n    <bx-button\n      id="miter-line-join-button"\n      value="miter"\n      icon="join-miter"\n      iconsize="30"\n      title="Miter Join"\n      skin="iconic">\n    </bx-button>\n\n    <bx-button\n      id="round-line-join-button"\n      value="round"\n      icon="join-round"\n      iconsize="30"\n      title="Round Join"\n      skin="iconic">\n    </bx-button>\n\n    <bx-button\n      id="bevel-line-join-button"\n      value="bevel"\n      icon="join-bevel"\n      iconsize="30"\n      title="Bevel Join"\n      skin="iconic">\n    </bx-button>\n  </div>\n</section>\n',c=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=u;var e=!0,n=!1,i=void 0;try{for(var r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){
var o=r.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this._update200ms=a(this._update,200,this),this["#opacity-slider"].addEventListener("changestart",function(){
return t._onOpacitySliderChangeStart()}),this["#width-slider"].addEventListener("changestart",function(){
return t._onWidthSliderChangeStart()}),this["#non-scaling-stroke-checkbox"].addEventListener("change",function(){
return t._onNonScalingStrokeCheckboxChange()}),this["#line-cap-buttons"].addEventListener("click",function(e){
return t._onLineCapButtonsClick(e)}),this["#line-join-buttons"].addEventListener("click",function(e){
return t._onLineJoinButtonsClick(e)})},enabledCallback:function(){var t=this;this["#paint-section"].enabledCallback(),
this._toggleHuds(),this._update(),body.addEventListener("toolchange",this._toolChangeListener=function(){
t._toggleHuds()}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)})},disabledCallback:function(){this["#paint-section"].disabledCallback(),
this._toggleHuds(),body.removeEventListener("toolchange",this._toolChangeListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener)},
_onSelectedElementsChange:function(){this._update200ms()},_onSelectedTextRangeChange:function(){
this._update200ms()},_onContentMutation:function(t){this._update200ms()},_onOpacitySliderChangeStart:function(){
var t=this;body.canvas.undoManager.checkpoint("Stroke opacity");var e=body.canvas,n=e.selectedElements,a=e.selectedTextRange;
r(a);var s,o,l=i("stroke-opacity",n,a);l[0]||null;this._isChangingOpacitySlider=!0,
this["#opacity-slider"].addEventListener("change",s=function(){var e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=l[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;
s.style.strokeOpacity=t["#opacity-slider"].value}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}t["#opacity-slider"].mixed=!1}),this["#opacity-slider"].addEventListener("changeend",o=function(){
t["#opacity-slider"].removeEventListener("change",s),t["#opacity-slider"].removeEventListener("changeend",o),
t._isChangingOpacitySlider=!1})},_onWidthSliderChangeStart:function(){var t=this;body.canvas.undoManager.checkpoint("Stroke width");
var e=body.canvas,n=e.selectedElements,a=e.selectedTextRange;r(a);var l,u,c=i("stroke-width",n,a);
this._isChangingWidthSlider=!0,this["#width-slider"].addEventListener("change",l=function(){
var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=c[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var l=r.value,u=s(l,body.canvas.masterArtboard),d=o.fromSVGMatrix(u),h=d.scaleX,v=d.scaleY,f=(h+v)/2,m=t["#width-slider"].value/f;
l.style.strokeWidth=m+""}}catch(g){n=!0,i=g}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}t["#width-slider"].mixed=!1}),this["#width-slider"].addEventListener("changeend",u=function(){
t["#width-slider"].removeEventListener("change",l),t["#width-slider"].removeEventListener("changeend",u),
t._isChangingWidthSlider=!1})},_onNonScalingStrokeCheckboxChange:function(){body.canvas.undoManager.checkpoint("Non-scaling stroke");
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;r(n);var a=i("vector-effect",e,n),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=a[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;
this["#non-scaling-stroke-checkbox"].checked?d.style.vectorEffect="non-scaling-stroke":d.style.vectorEffect=null;
}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}},_onLineCapButtonsClick:function(t){if("bx-button"===t.target.localName&&0===t.button){
var e=t.target,n=e.pressed,a=e.mixed,s=e.value;if(n!==!0||a!==!1){body.canvas.undoManager.checkpoint("Line cap");
var o=body.canvas,l=o.selectedElements,u=o.selectedTextRange;r(u);var c=i("stroke-linecap",l,u),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value;
g.style.strokeLinecap=s}}catch(b){h=!0,v=b}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}}}},_onLineJoinButtonsClick:function(t){if("bx-button"===t.target.localName&&0===t.button){
var e=t.target,n=e.pressed,a=e.mixed,s=e.value;if(n!==!0||a!==!1){body.canvas.undoManager.checkpoint("Line join");
var o=body.canvas,l=o.selectedElements,u=o.selectedTextRange;r(u);var c=i("stroke-linejoin",l,u),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value;
g.style.strokeLinejoin=s}}catch(b){h=!0,v=b}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}}}},_update:function(){this._updateOpacitySection(),this._updateWidthSection(),
this._updateLineCapSection(),this._updateLineJoinSection()},_updateOpacitySection:function(){
if(!this._isChangingOpacitySlider){var t=body.canvas,e=t.selectedElements,r=t.selectedTextRange,a=i("stroke-opacity",e,r),s=a[0]||null;
if(null===s?this["#opacity-section-heading"].disabled=!0:this["#opacity-section-heading"].disabled=!1,
null===s)this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1;else{
this["#opacity-slider"].disabled=!1;var o=l(getComputedStyle(s).strokeOpacity);o=n(o,2);
var u=!1,c=!0,d=!1,h=void 0;try{for(var v=void 0,f=a[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;if(m!==s){var g=n(l(getComputedStyle(m).strokeOpacity),2);g!==o&&(u=!0);
}}}catch(b){d=!0,h=b}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}this["#opacity-slider"].value=o,this["#opacity-slider"].mixed=u}}},_updateWidthSection:function(){
if(!this._isChangingWidthSlider){var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange,r=i("stroke-width",e,n),a=r[0]||null;
if(null===a?this["#width-section-heading"].disabled=!0:this["#width-section-heading"].disabled=!1,
null===a)this["#width-slider"].value=0,this["#width-slider"].disabled=!0,this["#width-slider"].mixed=!1;else{
var s=this._getComputedStrokeWidth(a),o=!1,l=!0,u=!1,c=void 0;try{for(var d=void 0,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;if(v!==a){var f=this._getComputedStrokeWidth(v);if(f!==s){o=!0;break;
}}}}catch(m){u=!0,c=m}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c;
}}this["#width-slider"].value=s,this["#width-slider"].disabled=!1,this["#width-slider"].mixed=o;
}if(null===a)this["#non-scaling-stroke-checkbox"].disabled=!0,this["#non-scaling-stroke-checkbox"].checked=!1,
this["#non-scaling-stroke-checkbox"].mixed=!1;else{var g=getComputedStyle(a).vectorEffect,b=!1,p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=r[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){var S=x.value;
if(S!==a){var C=getComputedStyle(S).vectorEffect;if(C!==g){b=!0;break}}}}catch(E){
y=!0,_=E}finally{try{p||null==w["return"]||w["return"]()}finally{if(y)throw _}}this["#non-scaling-stroke-checkbox"].disabled=!1,
this["#non-scaling-stroke-checkbox"].checked="non-scaling-stroke"===g,this["#non-scaling-stroke-checkbox"].mixed=b;
}}},_updateLineCapSection:function(){var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange,r=i("stroke-linecap",e,n),a=r[0]||null;
null===a?this["#line-cap-section-heading"].disabled=!0:this["#line-cap-section-heading"].disabled=!1;
var s=[this["#butt-line-cap-button"],this["#round-line-cap-button"],this["#square-line-cap-button"]];
if(null===a){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h.disabled=!0,h.pressed=!1,h.mixed=!1}}catch(v){l=!0,u=v}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else{var f=!0,m=!1,g=void 0;
try{for(var b=void 0,p=s[Symbol.iterator]();!(f=(b=p.next()).done);f=!0){var y=b.value;
y.disabled=!1}}catch(_){m=!0,g=_}finally{try{f||null==p["return"]||p["return"]()}finally{
if(m)throw g}}var x=getComputedStyle(a).strokeLinecap,w=!1,S=!0,C=!1,E=void 0;try{
for(var k=void 0,A=r[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var L=k.value;
if(L!==a){var M=getComputedStyle(L).strokeLinecap;if(M!==x){w=!0;break}}}}catch(j){
C=!0,E=j}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E}}var T=!0,P=!1,R=void 0;
try{for(var O=void 0,I=s[Symbol.iterator]();!(T=(O=I.next()).done);T=!0){var D=O.value;
D.value===x?(D.pressed=!0,D.mixed=w):(D.pressed=!1,D.mixed=!1)}}catch(V){P=!0,R=V;
}finally{try{T||null==I["return"]||I["return"]()}finally{if(P)throw R}}}},_updateLineJoinSection:function(){
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange,r=i("stroke-linejoin",e,n),a=r[0]||null;
null===a?this["#line-join-section-heading"].disabled=!0:this["#line-join-section-heading"].disabled=!1;
var s=[this["#miter-line-join-button"],this["#round-line-join-button"],this["#bevel-line-join-button"]];
if(null===a){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h.disabled=!0,h.pressed=!1,h.mixed=!1}}catch(v){l=!0,u=v}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else{var f=!0,m=!1,g=void 0;
try{for(var b=void 0,p=s[Symbol.iterator]();!(f=(b=p.next()).done);f=!0){var y=b.value;
y.disabled=!1}}catch(_){m=!0,g=_}finally{try{f||null==p["return"]||p["return"]()}finally{
if(m)throw g}}var x=getComputedStyle(a).strokeLinejoin,w=!1,S=!0,C=!1,E=void 0;try{
for(var k=void 0,A=r[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var L=k.value;
if(L!==a){var M=getComputedStyle(L).strokeLinejoin;if(M!==x){w=!0;break}}}}catch(j){
C=!0,E=j}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E}}var T=!0,P=!1,R=void 0;
try{for(var O=void 0,I=s[Symbol.iterator]();!(T=(O=I.next()).done);T=!0){var D=O.value;
D.value===x?(D.pressed=!0,D.mixed=w):(D.pressed=!1,D.mixed=!1)}}catch(V){P=!0,R=V;
}finally{try{T||null==I["return"]||I["return"]()}finally{if(P)throw R}}}},_toggleHuds:function(){
"edit-tool"===body.currentTool.id&&body.currentPanel&&"stroke-panel"===body.currentPanel.id?(body.canvas.enableHud("linear-gradient-stroke-hud"),
body.canvas.enableHud("radial-gradient-stroke-hud"),body.canvas.enableHud("pattern-stroke-hud")):(body.canvas.disableHud("linear-gradient-stroke-hud"),
body.canvas.disableHud("radial-gradient-stroke-hud"),body.canvas.disableHud("pattern-stroke-hud"));
},_getComputedStrokeWidth:function(t){var e=s(t,body.canvas.masterArtboard),i=o.fromSVGMatrix(e),r=i.scaleX,a=i.scaleY,u=(r+a)/2,c=u*l(getComputedStyle(t).strokeWidth);
return c=n(c,3)}},{},t)}(HTMLElement),d=e("bx-strokecontrols",c);return{get default(){
return d}}}),System.registerModule("elements/bx-svgartboard",[],function(){"use strict";
var t=System.get("utils/dom").registerElement,e=System.get("classes/artboard-helpers"),n=e.BXViewBox,i=e.BXPreserveAspectRatio,r=e.BXLength,a=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
get contentType(){return"svg"},get x(){return new r(this,"x")},get y(){return new r(this,"y");
},get width(){return new r(this,"width")},get height(){return new r(this,"height");
},get viewBox(){return new n(this)},get preserveAspectRatio(){return new i(this)}
},{},t)}(SVGGElement),s=t("g","bx-svgartboard",a);return{get default(){return s}};
}),System.registerModule("elements/bx-switch",[],function(){"use strict";var t=System.get("utils/dom").registerElement,e='\n  <style>\n    @import url("stylesheets/bx-switch.css");\n  </style>\n\n  <main>\n    <div id="track"></div>\n\n    <svg id="thumb" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">\n      <ellipse cx="50" cy="50" rx="50" ry="50"></ellipse>\n    </svg>\n  </main>\n',n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=e;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},attachedCallback:function(){var t=this;this.parentElement.addEventListener("click",this._parentMouseDownListener=function(e){
t._onParentElementClick(e)})},detachedCallback:function(){this.parentElement.removeEventListener("click",this._parentMouseDownListener);
},get toggled(){return this.hasAttribute("toggled")?!0:!1},set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled");
},get mixed(){return this.hasAttribute("mixed")?!0:!1},set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},_onParentElementClick:function(t){if(!this.disabled){var e=[{left:"0px"},{left:this.clientWidth-this["#thumb"].clientWidth+"px"
}];this["#thumb"].animate(this.toggled?e.reverse():e,{duration:100,iterations:1,delay:0
}),this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("change"))}}},{},t);
}(HTMLElement),i=t("bx-switch",n);return{get default(){return i}}}),System.registerModule("elements/bx-symbolartboard",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e=System.get("classes/artboard-helpers"),n=e.BXViewBox,i=e.BXPreserveAspectRatio,r=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
get contentType(){return"symbol"},get viewBox(){return new n(this)},get preserveAspectRatio(){
return new i(this)}},{},t)}(SVGGElement),a=t("g","bx-symbolartboard",r);return{get default(){
return a}}}),System.registerModule("elements/bx-symbolslist",[],function(){"use strict";
System.get("elements/bx-symbolslistitem"),System.get("elements/bx-filterinput");var t=System.get("utils/artwork"),e=t.getSymbolThumbnails,n=t.rasterizeArtwork,i=System.get("utils/bbox").getClientBBox,r=System.get("utils/dom"),a=r.createElement,s=r.createSVGMatrix,o=r.insertAfter,l=r.registerElement,u=System.get("utils/math").round,c=System.get("utils/rect"),d=c.combineRects,h=c.transformRect,v=System.get("utils/relationship"),f=v.getElementIndex,m=v.sortByDomPosition,g=System.get("utils/time"),b=g.debounce,p=g.sleep,y=System.get("utils/transform").getTransformToElement,_=System.get("classes/shortcut")["default"],x=Number.parseFloat,w=(Object.keys,
'\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-symbolslist.css");</style>\n\n  <main>\n    <header>\n      <h2>Symbols</h2>\n\n      <bx-button\n        id="delete-symbol-button"\n        skin="iconic"\n        icon="minus"\n        title="Delete symbol"\n        iconsize="15">\n      </bx-button>\n\n      <bx-button\n        id="create-symbol-button"\n        title="Create new symbol"\n        skin="iconic"\n        icon="plus"\n        iconsize="15">\n      </bx-button>\n    </header>\n\n    <div id="items"></div>\n    <div id="placeholder">No symbols found.</div>\n    <div id="drag-separator"></div>\n    <bx-filterinput id="filter-input" placeholder="Filter symbols"></bx-filterinput>\n  </main>\n'),S=function(t){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=w;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._update_2000ms=b(this._update,2e3,this),this.enabled&&this._onEnabled(),
this.addEventListener("keydown",function(e){return t._onKeyDown(e)}),this["#items"].addEventListener("focusin",function(e){
return t._onItemsFocusIn(e)}),this["#items"].addEventListener("rename",function(e){
return t._onItemRename(e)}),this["#items"].addEventListener("dragstart",function(e){
return t._onItemDragStart(e)}),this["#delete-symbol-button"].addEventListener("click",function(e){
return t._onDeleteSymbolButtonClick(e)}),this["#create-symbol-button"].addEventListener("click",function(e){
return t._onCreateSymbolButtonClick(e)}),this["#filter-input"].addEventListener("input",function(){
return t._onFilterInputInput()})},attributeChangedCallback:function(t,e,n){e!==n&&"enabled"===t&&(this.enabled===!0?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")?!0:!1},set enabled(t){t?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var t=this;this._update(),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
"id"===e.detail.attributeName&&"symbol"===e.detail.target.localName?t._update():e.detail.addedNodes[0]&&"symbol"===e.detail.addedNodes[0].localName?t._update():t._update_2000ms();
})},_onDisabled:function(){body.canvas.removeEventListener("contentmutation",this._contentMutationListener);
},_onDeleteSymbolButtonClick:function(t){0===t.button&&this._maybeDeleteHighlightedItem();
},_onCreateSymbolButtonClick:function(t){if(0===t.button){body.canvas.undoManager.checkpoint("Create symbol");
var e=body.canvas.generateUniqueID("symbol"),r=a("bx-symbolslistitem");r.symbolID=e,
this["#items"].append(r);var l=!0,c=!1,v=void 0;try{for(var f=void 0,g=this["#items"].children[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){
var b=f.value;b.highlighted=b===r}}catch(_){c=!0,v=_}finally{try{l||null==g["return"]||g["return"]();
}finally{if(c)throw v}}body.canvas.selectedElements.length>0&&n(body.canvas.extractArtworkWithSelectedElements()).then(function(t){
r.thumbnail=t}),p(100).then(function(){return r.focus()});var x=body.canvas.defs.querySelectorAll("symbol"),w=x[x.length-1],S=a("svg:symbol");
if(w?o(S,w):body.canvas.defs.append(S),0===body.canvas.selectedElements.length)S.setAttribute("id",e),
S.setAttribute("viewBox","0 0 100 100");else{var C=d(function(){var t=0,e=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;e[t++]=i(l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}());C=h(C,body.canvas.currentArtboard.getCTM().inverse());
var E=-C.x,k=-C.y,A=u(C.width,4),L=u(C.height,4),M=!0,j=!1,T=void 0;try{for(var P=void 0,R=m(body.canvas.selectedElements)[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){
var O=P.value,I=s();I.translateSelf(E,k),I.multiplySelf(y(O,body.canvas.currentArtboard)),
O.setAttribute("transform",I),S.append(O)}}catch(D){j=!0,T=D}finally{try{M||null==R["return"]||R["return"]();
}finally{if(j)throw T}}S.setAttribute("id",e),S.setAttribute("viewBox","0 0 "+A+" "+L),
body.canvas.selectedElements=[],body.canvas.selectedTextRange=null,body.canvas.currentContainer=null;
}}},_onItemsFocusIn:function(t){var e=t.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===e}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this["#delete-symbol-button"].disabled=!1},_onItemRename:function(t){
body.canvas.undoManager.checkpoint("Rename symbol");var e=t.target,n=t.detail,i=n.oldID,r=n.newID;
e.symbolID=r;for(var a=document.createNodeIterator(body.canvas.content,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();)"symbol"===s.localName&&s.id===i?s.setAttribute("id",r):"g"===s.localName&&"symbol"===s.contentType?s.setAttribute("id",r):"use"===s.localName&&s.href.baseVal==="#"+i&&s.setAttribute("href","#"+r);
},_onItemDragStart:function(t){var e,n,i,r=this,a=t.target,s=($traceurRuntime.spread(this["#items"].children),
x(getComputedStyle(this["#drag-separator"]).height)),o=f(a),l=null;window.addEventListener("dragover",e=function(t){
var e=r._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(e&&"bx-symbolslistitem"===e.localName){
var n=e,i=n.getBoundingClientRect();r["#drag-separator"].hidden=!1,r["#drag-separator"].style.width=i.width+"px",
r["#drag-separator"].style.left=i.x+"px",t.clientY<i.y+i.height/2?(r["#drag-separator"].style.top=i.y-s/2+"px",
l=f(n)):(r["#drag-separator"].style.top=i.y+i.height-s/2+"px",l=f(n)+1)}else r["#drag-separator"].hidden=!0,
l=null}),this["#items"].addEventListener("dragend",i=function(t){if(r["#items"].removeEventListener("dragover",e),
r["#items"].removeEventListener("dragleave",n),r["#items"].removeEventListener("dragend",i),
r["#drag-separator"].hidden=!0,null!==l&&o!==l&&o!==l-1){a.style.display="none",r["#items"].insertBefore(a,r["#items"].children[l]),
setTimeout(function(){a.style.display=null,a.focus()},50),body.canvas.undoManager.checkpoint("Reorder symbols");
var s=$traceurRuntime.spread(body.canvas.defs.querySelectorAll("symbol")),u=s.find(function(t){
return t.id===a.symbolID});s[l]?s[l].parentElement.insertBefore(u,s[l]):body.canvas.defs.append(u);
}})},_onFilterInputInput:function(){var t=this["#filter-input"].value,e=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#items"].children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;s.hidden=("#"+s.symbolID.toLowerCase()).includes(t.toLowerCase())===!1;
}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}this._updatePlaceholderVisibility()},_onKeyDown:function(t){var e=_.fromEvent(t);
e.matches("Backspace")?null!==this["#items"].querySelector(":focus")&&(t.preventDefault(),
t.stopPropagation(),this._maybeDeleteHighlightedItem()):e.matches("ArrowUp")?(t.preventDefault(),
t.stopPropagation(),this._focusPreviousItem()):e.matches("ArrowDown")&&(t.preventDefault(),
t.stopPropagation(),this._focusNextItem())},_update:function(){var t=this;if(this._updating)return void setTimeout(1e3,function(){
return t._update(callback)});this._updating=!0;var n=body.canvas.masterArtboard.querySelectorAll("symbol"),i=$traceurRuntime.spread(this["#items"].children),r=0;
if(i.length>n.length)for(var s=n.length;s<i.length;s+=1)i[s].remove();else i.length<n.length&&(this["#create-symbol-button"].disabled=!0,
this["#delete-symbol-button"].disabled=!0);var o=function(e){for(var i=$traceurRuntime.spread(t["#items"].children),s=t["#items"].querySelector("[highlighted]"),u=s?s.symbolID:null,c=t["#filter-input"].value;e.timeRemaining()>10&&r<n.length;){
var d=n[r],h=i[r];h||(h=a("bx-symbolslistitem"),t["#items"].append(h)),h.symbolID=d.id,
h.hidden=("#"+h.symbolID.toLowerCase()).includes(c.toLowerCase())===!1,h.highlighted=d.id===u,
r+=1}t._updatePlaceholderVisibility(),r<n.length?requestIdleCallback(o):(t._updateButtons(),
l())},l=function(){var n=body.canvas.extractArtwork(),i={},r=!0,a=!1,s=void 0;try{
for(var o=void 0,l=t["#items"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[u.symbolID]=u}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}e(n,function(t,e){i[t]&&(i[t].thumbnail=e)},function(){t._updating=!1;
})};requestIdleCallback(o)},_updateButtons:function(){this["#create-symbol-button"].disabled=!1,
this["#delete-symbol-button"].disabled=null===this["#items"].querySelector("[highlighted]");
},_updatePlaceholderVisibility:function(){this["#placeholder"].hidden=null!==this["#items"].querySelector(":not([hidden])");
},_focusPreviousItem:function(){var t=this._shadowRoot.querySelector(":focus"),e=this._getPreviousVisibleItem(t);
e&&e.focus()},_focusNextItem:function(){var t=this._shadowRoot.querySelector(":focus"),e=this._getNextVisibleItem(t);
e&&e.focus()},_maybeDeleteHighlightedItem:function(){var t=this,e=this["#items"].querySelector("[highlighted]");
if(e){var n=e.symbolID,i=$traceurRuntime.spread(body.canvas.content.querySelectorAll("use")).filter(function(t){
return t.href.baseVal==="#"+n}),r=function(){body.canvas.undoManager.checkpoint("Delete symbol"),
"symbol"===body.canvas.currentArtboard.contentType&&body.canvas.currentArtboard.id===n&&body.canvas.editSymbolEnd(!1);
var i=t._getNextVisibleItem(e),r=t._getPreviousVisibleItem(e);i?i.focus():r?r.focus():t["#delete-symbol-button"].disabled=!0,
e.remove(),t._updatePlaceholderVisibility();for(var a=document.createNodeIterator(body.canvas.content,NodeFilter.SHOW_ELEMENT),s=null,o=[];s=a.nextNode();)"symbol"===s.localName&&s.id===n?(s.remove(),
o.push(s)):"use"===s.localName&&s.href.baseVal==="#"+n&&(s.remove(),o.push(s));body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return!o.includes(t)})};if(0===i.length)r();else{var a={message:"Delete the sybmol with "+i.length+" instance(s)?",
buttons:["Cancel","Delete"]};body.bridge.postMessage("showMessageBox",a,function(t){
1===t&&r()})}}},_assertItemsLength:function(t){var e=this["#items"].childElementCount;
if(t>e)for(var n=e;t>n;n+=1){var i=a("bx-symbolslistitem");this["#items"].append(i);
}else if(e>t)for(var r=e-1;r>=t;r-=1)this["#items"].children[r].remove()},_getPreviousVisibleItem:function(t){
for(;t.previousElementSibling;){if(t.previousElementSibling.hidden===!1)return t.previousElementSibling;
t=t.previousElementSibling}return null},_getNextVisibleItem:function(t){for(;t.nextElementSibling;){
if(t.nextElementSibling.hidden===!1)return t.nextElementSibling;t=t.nextElementSibling;
}return null}},{},t)}(HTMLElement),C=l("bx-symbolslist",S);return{get default(){return C;
}}}),System.registerModule("elements/bx-symbolslistitem",[],function(){"use strict";
System.get("elements/bx-input");var t=System.get("utils/dom"),e=t.createElement,n=t.registerElement,i=System.get("classes/shortcut")["default"],r='\n  <style>@import url("stylesheets/bx-symbolslistitem.css");</style>\n\n  <main>\n    <img id="thumbnail"></img>\n    <bx-input id="input" skin="bx-defscontrols"></bx-input>\n  </main>\n',a=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var e=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this.tabIndex=0,this.draggable=!0,this.addEventListener("dragstart",function(e){
return t._onHostDragStart(e)}),this.addEventListener("dragend",function(e){return t._onHostDragEnd(e);
}),this.addEventListener("keydown",function(e){return t._onHostKeyDown(e)}),this._shadowRoot.addEventListener("dblclick",function(e){
return t._onShadowRootDblClick(e)}),this["#input"].addEventListener("focusin",function(e){
return t._onInputFocusIn(e)}),this["#input"].addEventListener("focusout",function(e){
return t._onInputFocusOut(e)}),this["#input"].addEventListener("keydown",function(e){
return t._onInputKeyDown(e)}),this["#input"].addEventListener("change",function(e){
return t._onInputChange(e)}),this["#input"].addEventListener("confirm",function(){
return t.focus()}),this["#input"].addEventListener("cancel",function(){return t.focus();
}),this["#input"].validate=function(e){return t._validateInputValue(e)}},attributeChangedCallback:function(t,e,n){
},get symbolID(){return this.hasAttribute("symbolid")?this.getAttribute("symbolid"):null;
},set symbolID(t){t?this.setAttribute("symbolid",t):this.removeAttribute("symbolid"),
this["#input"].value="#"+t},get thumbnail(){return this["#thumbnail"].src},set thumbnail(t){
null===t?this["#thumbnail"].src="":this["#thumbnail"].src=t},get highlighted(){return this.hasAttribute("highlighted");
},set highlighted(t){t?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},_onShadowRootDblClick:function(t){t.target===this["#thumbnail"]?body.canvas.editSymbol(this.symbolID):this["#input"].matches(":focus")===!1&&this["#input"].focus();
},_onHostDragStart:function(t){this._dragImage=e("img"),this._dragImage.id="drag-image",
this._dragImage.src=this["#thumbnail"].src,this._dragImage.style.position="fixed",
this._dragImage.style.transform="translate(9999px, 9999px)",this._dragImage.width=38,
this._dragImage.height=38,this._shadowRoot.append(this._dragImage),t.dataTransfer.setData("text","#"+this.symbolID),
t.dataTransfer.setData("bx-symbolslistitem/symbolID",this.symbolID),t.dataTransfer.setDragImage(this._dragImage,this._dragImage.width/2,this._dragImage.height/2);
},_onHostDragEnd:function(t){this._dragImage.remove()},_onHostKeyDown:function(t){
var e=i.fromEvent(t);e.matches("Enter")&&(this["#input"].focus(),this["#input"].selectAll());
},_onInputFocusIn:function(){this["#input"].style.pointerEvents="auto",this["#input"].selectAll(),
this.draggable=!1,this.setAttribute("inputmode","")},_onInputFocusOut:function(t){
this["#input"].style.pointerEvents="none",this.draggable=!0,this.removeAttribute("inputmode");
},_onInputKeyDown:function(t){var e=i.fromEvent(t);(e.matches("Enter")||e.matches("Escape"))&&(t.stopPropagation(),
this.focus())},_onInputChange:function(){var t=this.symbolID,e=this["#input"].value.substring(1);
this.dispatchEvent(new CustomEvent("rename",{bubbles:!0,detail:{oldID:t,newID:e}}));
},_validateInputValue:function(t){var e=/^#[a-z]+[a-z0-9\-_]*$/i.test(t);return e?t==="#"+this.symbolID?!0:null===body.canvas.content.querySelector(t)?!0:!1:!1;
}},{},t)}(HTMLElement),s=n("bx-symbolslistitem",a);return{get default(){return s}
}}),System.registerModule("elements/bx-texttool",[],function(){"use strict";var t=System.get("utils/dom"),e=t.parseSVG,n=t.registerElement,i=(t.createElement,
t.createSVGPoint),r=function(t){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{enabledCallback:function(){var t=this;body.canvas.enableHud("outlines-hud"),
body.canvas.addEventListener("click",this._clickListener=function(e){t._onClick(e);
})},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),body.canvas.removeEventListener("click",this._clickListener);
},_onClick:function(t){body.canvas.undoManager.checkpoint("Text");var n=body.canvas.currentContainer||body.canvas.currentArtboard,r=n.getScreenCTM().inverse(),a=i(t.clientX,t.clientY),s=a.matrixTransform(r),o='<tspan style="font-size: 16; font-family: Arial;">Enter your text here</tspan>',l='<text x="'+s.x+'" y="'+s.y+'" style="white-space: pre;">'+o+"</text>",u=e(l);
n.append(u),body.canvas.selectedElements=[u],body.toggleTool("edit-tool")}},{},t);
}(HTMLElement),a=n("bx-texttool",r);return{get default(){return a}}}),System.registerModule("elements/bx-transformhud",[],function(){
"use strict";var t=System.get("utils/bbox"),e=t.getUserBBox,n=t.getClientBBox,i=System.get("utils/dom"),r=i.registerElement,a=i.createSVGPoint,s=i.createSVGMatrix,o=(i.parseSVG,
System.get("utils/rect")),l=o.transformRect,u=o.combineRects,c=System.get("utils/time"),d=c.sleep,h=c.throttle,v=System.get("utils/transform"),f=v.getTransformOriginPoint,m=v.getTransformToElement,g=v.reduceTransform,b=v.skew,p=System.get("utils/vector").getAngleBetweenVectors,y=System.get("classes/decomposed-transform")["default"],_=System.get("classes/enum")["default"],x=System.get("classes/vector")["default"],w=Math,S=w.abs,C=w.min,E=w.max,k=Number.parseFloat,A=12,L=12,M=12,j=10,T=new _("initialStrokeWidth","initialVectorEffect","initialTransforms","initialUserBBox"),P='\n  <style>@import url("stylesheets/bx-transformhud.css");</style>\n\n  <g id="grippies">\n    <g id="scale-grippies">\n      <rect class="grippie" data-position="top"></rect>\n      <rect class="grippie" data-position="left"></rect>\n      <rect class="grippie" data-position="bottom"></rect>\n      <rect class="grippie" data-position="right"></rect>\n      <rect class="grippie" data-position="top-left"></rect>\n      <rect class="grippie" data-position="top-right"></rect>\n      <rect class="grippie" data-position="bottom-left"></rect>\n      <rect class="grippie" data-position="bottom-right"></rect>\n    </g>\n\n    <g id="rotate-grippies">\n      <rect class="grippie" rx="999" data-position="top-left"></rect>\n      <rect class="grippie" rx="999" data-position="top-right"></rect>\n      <rect class="grippie" rx="999" data-position="bottom-left"></rect>\n      <rect class="grippie" rx="999" data-position="bottom-right"></rect>\n    </g>\n\n    <g id="skew-grippies">\n      <rect class="grippie" data-position="top"></rect>\n      <rect class="grippie" data-position="left"></rect>\n      <rect class="grippie" data-position="bottom"></rect>\n      <rect class="grippie" data-position="right"></rect>\n    </g>\n\n    <svg id="origin-grippie" viewBox="0 0 50 50">\n      <use xlink:href="images/icons.svg#cross" x="0" y="0" width="50" height="50"></use>\n      <rect x="0" y="0" width="50" height="50" style="opacity: 0;"/>\n    </svg>\n  </g>\n',R=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=P;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._updateGrippies_25ms=h(this._updateGrippies,25,this),
this._scaleGrippiesByPosition={},this._skewGrippiesByPosition={},this._rotateGrippiesByPosition={},
this._scaleStroke=!1,this._scaleRadii=!1,this._preserveAspectRatio=!1;var l=!0,u=!1,c=void 0;
try{for(var d=void 0,v=this["#scale-grippies"].children[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){
var f=d.value;this._scaleGrippiesByPosition[f.getAttribute("data-position")]=f}}catch(m){
u=!0,c=m}finally{try{l||null==v["return"]||v["return"]()}finally{if(u)throw c}}var g=!0,b=!1,p=void 0;
try{for(var y=void 0,_=this["#rotate-grippies"].children[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){
var x=y.value;this._rotateGrippiesByPosition[x.getAttribute("data-position")]=x}}catch(w){
b=!0,p=w}finally{try{g||null==_["return"]||_["return"]()}finally{if(b)throw p}}var S=!0,C=!1,E=void 0;
try{for(var k=void 0,A=this["#skew-grippies"].children[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){
var L=k.value;this._skewGrippiesByPosition[L.getAttribute("data-position")]=L}}catch(M){
C=!0,E=M}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E}}this._shadowRoot.addEventListener("mousedown",this._mouseDownListener=function(e){
t._onMouseDown(e)}),body.getConfig("bx-transformtoolcontrols:scaleStroke").then(function(e){
null!==e&&(t._scaleStroke=e)}),body.getConfig("bx-transformtoolcontrols:scaleRadii").then(function(e){
null!==e&&(t._scaleRadii=e)}),body.getConfig("bx-transformtoolcontrols:preserveAspectRatio").then(function(e){
null!==e&&(t._preserveAspectRatio=e)})},enabledCallback:function(){var t=this;this._onSelectedElementsChange(),
this._onModeChange(),this._onZoomChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
t._onZoomChange()}),body.addEventListener("configchange",this._configChangeListener=function(e){
t._onConfigChange(e)})},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.removeEventListener("configchange",this._configChangeListener);
},attributeChangedCallback:function(t,e,n){e!==n&&"mode"===t&&this._onModeChange();
},blink:function(){return $traceurRuntime.asyncWrap(function(t){for(;;)switch(t.state){
case 0:this["#grippies"].style.display="none",t.state=4;break;case 4:return void Promise.resolve(d(200)).then(t.createCallback(2),t.errback);
case 2:body.canvas.selectedElements.length>0&&(this["#grippies"].style.display="block"),
t.state=-2;break;default:return t.end()}},this)},get mode(){return this.hasAttribute("mode")?this.getAttribute("mode"):"scale";
},set mode(t){this.setAttribute("mode",t)},_onModeChange:function(){"scale"===this.mode?(this["#scale-grippies"].style.visibility="visible",
this["#rotate-grippies"].style.visibility="hidden",this["#skew-grippies"].style.visibility="hidden",
this["#origin-grippie"].style.visibility="hidden"):"rotate-and-skew"===this.mode&&(this["#scale-grippies"].style.visibility="hidden",
this["#rotate-grippies"].style.visibility="visible",this["#skew-grippies"].style.visibility="visible",
this["#origin-grippie"].style.visibility="visible"),this._updateGrippies()},_onConfigChange:function(t){
var e=t.detail,n=e.key,i=e.value;"bx-transformtoolcontrols:scaleStroke"===n?this._scaleStroke=i||!1:"bx-transformtoolcontrols:scaleRadii"===n?this._scaleRadii=i||!1:"bx-transformtoolcontrols:preserveAspectRatio"===n&&(this._preserveAspectRatio=i||!1);
},_onSelectedElementsChange:function(){0===body.canvas.selectedElements.length?this["#grippies"].style.display="none":this["#grippies"].style.display="block",
this._updateGrippies()},_onContentMutation:function(t){this._updateGrippies_25ms();
},_onZoomChange:function(){this._updateGrippies_25ms()},_onMouseDown:function(t){
var e=t.target.parentElement;e===this["#scale-grippies"]?this._onScaleGrippieMouseDown(t):e===this["#rotate-grippies"]?this._onRotateGrippieMouseDown(t):e===this["#skew-grippies"]?this._onSkewGrippieMouseDown(t):e===this["#origin-grippie"]&&this._onOriginGrippieMouseDown(t);
},_onScaleGrippieMouseDown:function(t){var i,r,o=this,l=$traceurRuntime.spread(body.canvas.selectedElements),c=t.target.getAttribute("data-position");
body.canvas.undoManager.checkpoint("Scale Transform");var d=!0,h=!1,v=void 0;try{
for(var f=void 0,m=l[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var b=f.value;
if(this._scaleStroke===!1){var p=b.getScreenCTM(),_=y.fromSVGMatrix(p),x=_.scaleX,w=_.scaleY,S="left"===c||"right"===c?x:w,C=getComputedStyle(b);
b[T.initialStrokeWidth]=b.style.strokeWidth,b[T.initialVectorEffect]=b.style.vectorEffect;
var E=S*k(C.strokeWidth);b.style.strokeWidth=E,b.style.vectorEffect="non-scaling-stroke";
}}}catch(A){h=!0,v=A}finally{try{d||null==m["return"]||m["return"]()}finally{if(h)throw v;
}}if(1===l.length){var L=l[0],M=e(L),j=L.getScreenCTM(),P=j.inverse(),R=s(L.transform.baseVal.consolidate().matrix),O=a(t.clientX,t.clientY);
O=O.matrixTransform(P),window.addEventListener("mousemove",i=function(t){var e=a(t.clientX,t.clientY);
e=e.matrixTransform(P);var n=e.x-O.x,i=e.y-O.y,r=o._scaleParams(n,i,M,c),l=r.centerX,u=r.centerY,d=r.scaleX,h=r.scaleY,v=-l*(d-1),f=-u*(h-1),m=s(R);
m.translateSelf(v,f),m.scaleNonUniformSelf(d,h),L.setAttribute("transform",m.toString());
})}else if(l.length>1){var I=function(){var t=0,e=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e[t++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}(),D=u(I),V=!0,N=!1,B=void 0;try{for(var z=void 0,G=l[Symbol.iterator]();!(V=(z=G.next()).done);V=!0){
var U=z.value,H=U.getScreenCTM(),F=H.inverse(),q=s(U.transform.baseVal.consolidate().matrix);
U[T.initialTransforms]={clientToUserTransform:H,userToClientTransform:F,userTransform:q
}}}catch($){N=!0,B=$}finally{try{V||null==G["return"]||G["return"]()}finally{if(N)throw B;
}}window.addEventListener("mousemove",i=function(e){var n=!0,i=!1,r=void 0;try{for(var a=void 0,u=l[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){
var d=a.value,h=e.clientX-t.clientX,v=e.clientY-t.clientY,f=d[T.initialTransforms],m=f.clientToUserTransform,g=f.userToClientTransform,b=f.userTransform,p=o._scaleParams(h,v,D,c),y=p.centerX,_=p.centerY,x=p.scaleX,w=p.scaleY,S=-y*(x-1),C=-_*(w-1),E=s(b);
E.multiplySelf(g),E.translateSelf(S,C),E.scaleNonUniformSelf(x,w),E.multiplySelf(m),
d.setAttribute("transform",E.toString())}}catch(k){i=!0,r=k}finally{try{n||null==u["return"]||u["return"]();
}finally{if(i)throw r}}})}window.addEventListener("mouseup",r=function(t){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r);var e=!0,n=!1,a=void 0;try{for(var s=void 0,u=l[Symbol.iterator]();!(e=(s=u.next()).done);e=!0){
var c=s.value;o._scaleStroke===!1&&(c.style.strokeWidth=c[T.initialStrokeWidth],c.style.vectorEffect=c[T.initialVectorEffect]),
g(c,o._scaleStroke,o._scaleRadii)}}catch(d){n=!0,a=d}finally{try{e||null==u["return"]||u["return"]();
}finally{if(n)throw a}}})},_onRotateGrippieMouseDown:function(t){var e,n,i=$traceurRuntime.spread(body.canvas.selectedElements),r=f.apply(void 0,$traceurRuntime.spread(i)),o=a(t.clientX,t.clientY);
body.canvas.undoManager.checkpoint("Rotate Transform");var l=!0,u=!1,c=void 0;try{
for(var d=void 0,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value,m=s(v.transform.baseVal.consolidate().matrix),b=v.getScreenCTM(),y=b.inverse();
v[T.initialTransforms]={clientToUserTransform:b,userToClientTransform:y,userTransform:m
}}}catch(_){u=!0,c=_}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c;
}}window.addEventListener("mousemove",e=function(t){var e=!0,n=!1,l=void 0;try{for(var u=void 0,c=i[Symbol.iterator]();!(e=(u=c.next()).done);e=!0){
var d=u.value,h=d[T.initialTransforms],v=h.clientToUserTransform,f=h.userToClientTransform,m=h.userTransform,g=a(t.clientX,t.clientY),b=new x(r,o),y=new x(r,g),_=p(b,y),w=s(m);
w.multiplySelf(f),w.rotateSelf(_,r.x,r.y),w.multiplySelf(v),d.setAttribute("transform",w.toString());
}}catch(S){n=!0,l=S}finally{try{e||null==c["return"]||c["return"]()}finally{if(n)throw l;
}}}),window.addEventListener("mouseup",n=function(t){window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",n);var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;g(u,!0,!0)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}})},_onSkewGrippieMouseDown:function(t){var e,n,i,r=$traceurRuntime.spread(body.canvas.selectedElements),o=t.target.getAttribute("data-position");
i="top"===o||"bottom"===o?"horizontal":"vertical",body.canvas.undoManager.checkpoint("Skew Transform");
var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;v[T.initialStrokeWidth]=v.style.strokeWidth,v[T.initialVectorEffect]=v.style.vectorEffect;
var m=v.getScreenCTM(),_=y.fromSVGMatrix(m),w=_.scaleX,S=_.scaleY,C=(w+S)/2,E=getComputedStyle(v),A=C*k(E.strokeWidth);
v.style.strokeWidth=A,v.style.vectorEffect="non-scaling-stroke"}}catch(L){u=!0,c=L;
}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}if(1===r.length){
var M=r[0],j=M.getScreenCTM(),P=j.inverse(),R=s(M.transform.baseVal.consolidate().matrix),O=a(t.clientX,t.clientY);
O=O.matrixTransform(P);var I=f.apply(void 0,$traceurRuntime.spread(r));I=I.matrixTransform(P),
window.addEventListener("mousemove",e=function(t){var e=body.modKeys,n=(e.ctrl,e.alt,
e.shift,a(t.clientX,t.clientY));n=n.matrixTransform(P);var r=new x(I,O),o=new x(I,n),l=p(r,o),u=s(R);
u="horizontal"===i?b(u,-l,0,I.x,I.y):b(u,0,l,I.x,I.y),M.setAttribute("transform",u.toString());
})}else if(r.length>1){var D=a(t.clientX,t.clientY),V=f.apply(void 0,$traceurRuntime.spread(r)),N=!0,B=!1,z=void 0;
try{for(var G=void 0,U=r[Symbol.iterator]();!(N=(G=U.next()).done);N=!0){var H=G.value,F=H.getScreenCTM(),q=F.inverse(),$=s(H.transform.baseVal.consolidate().matrix);
H[T.initialTransforms]={clientToUserTransform:F,userToClientTransform:q,userTransform:$
}}}catch(Y){B=!0,z=Y}finally{try{N||null==U["return"]||U["return"]()}finally{if(B)throw z;
}}window.addEventListener("mousemove",e=function(t){var e=!0,n=!1,o=void 0;try{for(var l=void 0,u=r[Symbol.iterator]();!(e=(l=u.next()).done);e=!0){
var c=l.value,d=c[T.initialTransforms],h=d.clientToUserTransform,v=d.userToClientTransform,f=d.userTransform,m=a(t.clientX,t.clientY),g=new x(V,D),y=new x(V,m),_=p(g,y),w=s(f);
w.multiplySelf(v),w="horizontal"===i?b(w,-_,0,V.x,V.y):b(w,0,_,V.x,V.y),w.multiplySelf(h),
c.setAttribute("transform",w.toString())}}catch(S){n=!0,o=S}finally{try{e||null==u["return"]||u["return"]();
}finally{if(n)throw o}}})}window.addEventListener("mouseup",n=function(t){window.removeEventListener("mousemove",e),
window.removeEventListener("mouseup",n);var i=!0,a=!1,s=void 0;try{for(var o=void 0,l=r[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;u.style.strokeWidth=u[T.initialStrokeWidth],u.style.vectorEffect=u[T.initialVectorEffect];
}}catch(c){a=!0,s=c}finally{try{i||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}g(v,!0,!0)})},_onOriginGrippieMouseDown:function(t){var n,i,r=$traceurRuntime.spread(body.canvas.selectedElements),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,h=d.getScreenCTM().inverse(),v=e(d);
d[T.initialTransforms]={clientToUserTransform:h},d[T.initialUserBBox]=v}}catch(f){
o=!0,l=f}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}body.canvas.undoManager.checkpoint("Transform Origin"),
window.addEventListener("mousemove",n=function(e){var n=!0,i=!1,s=void 0;try{for(var o=void 0,l=r[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var u=o.value,c=u[T.initialTransforms].clientToUserTransform,d=u[T.initialUserBBox],h=a(t.clientX,t.clientY);
h=h.matrixTransform(c);var v=a(e.clientX,e.clientY);v=v.matrixTransform(c);var f=v.x-(d.x+d.width/2),m=v.y-(d.y+d.height/2);
u.setAttribute("data-transform-origin",f+" "+m)}}catch(g){i=!0,s=g}finally{try{n||null==l["return"]||l["return"]();
}finally{if(i)throw s}}}),window.addEventListener("mouseup",i=function(t){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i)})},_updateGrippies:function(){"scale"===this.mode?this._updateScaleGrippies():"rotate-and-skew"===this.mode&&(this._updateRotateGrippies(),
this._updateSkewGrippies(),this._updateOriginGrippie())},_updateRotateGrippies:function(){
var t=L/body.canvas.scale,i=(3/body.canvas.scale,this._rotateGrippiesByPosition),r=!0,s=!1,o=void 0;
try{for(var c=void 0,d=this["#rotate-grippies"].children[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){
var h=c.value;h.width.baseVal.value=t,h.height.baseVal.value=t}}catch(v){s=!0,o=v;
}finally{try{r||null==d["return"]||d["return"]()}finally{if(s)throw o}}if(1===body.canvas.selectedElements.length){
var f,g=body.canvas.selectedElements[0],b=m(g,this),p=e(g);f=a(p.x,p.y),f=f.matrixTransform(b),
i["top-left"].x.baseVal.value=f.x-t/2,i["top-left"].y.baseVal.value=f.y-t/2,f=a(p.x+p.width,p.y),
f=f.matrixTransform(b),i["top-right"].x.baseVal.value=f.x-t/2,i["top-right"].y.baseVal.value=f.y-t/2,
f=a(p.x,p.y+p.height),f=f.matrixTransform(b),i["bottom-left"].x.baseVal.value=f.x-t/2,
i["bottom-left"].y.baseVal.value=f.y-t/2,f=a(p.x+p.width,p.y+p.height),f=f.matrixTransform(b),
i["bottom-right"].x.baseVal.value=f.x-t/2,i["bottom-right"].y.baseVal.value=f.y-t/2;
}else if(body.canvas.selectedElements.length>1){var y=this.getScreenCTM().inverse(),_=u(function(){
var t=0,e=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e[t++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}());_=l(_,y),i["top-left"].x.baseVal.value=_.x-t/2,
i["top-left"].y.baseVal.value=_.y-t/2,i["top-right"].x.baseVal.value=_.x+_.width-t/2,
i["top-right"].y.baseVal.value=_.y-t/2,i["bottom-left"].x.baseVal.value=_.x-t/2,i["bottom-left"].y.baseVal.value=_.y+_.height-t/2,
i["bottom-right"].x.baseVal.value=_.x+_.width-t/2,i["bottom-right"].y.baseVal.value=_.y+_.height-t/2;
}},_updateSkewGrippies:function(){var t=M/body.canvas.scale,i=(3/body.canvas.scale,
this._skewGrippiesByPosition),r=!0,s=!1,o=void 0;try{for(var c=void 0,d=this["#skew-grippies"].children[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){
var h=c.value;h.width.baseVal.value=t,h.height.baseVal.value=t}}catch(v){s=!0,o=v;
}finally{try{r||null==d["return"]||d["return"]()}finally{if(s)throw o}}if(1===body.canvas.selectedElements.length){
var f,g=body.canvas.selectedElements[0],b=m(g,this),p=e(g);f=a(p.x+p.width/2,p.y),
f=f.matrixTransform(b),i.top.x.baseVal.value=f.x-t/2,i.top.y.baseVal.value=f.y-t/2,
f=a(p.x+p.width/2,p.y+p.height),f=f.matrixTransform(b),i.bottom.x.baseVal.value=f.x-t/2,
i.bottom.y.baseVal.value=f.y-t/2,f=a(p.x,p.y+p.height/2),f=f.matrixTransform(b),i.left.x.baseVal.value=f.x-t/2,
i.left.y.baseVal.value=f.y-t/2,f=a(p.x+p.width,p.y+p.height/2),f=f.matrixTransform(b),
i.right.x.baseVal.value=f.x-t/2,i.right.y.baseVal.value=f.y-t/2}else if(body.canvas.selectedElements.length>1){
var y=this.getScreenCTM().inverse(),_=u(function(){var t=0,e=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e[t++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}());_=l(_,y),i.top.x.baseVal.value=_.x+_.width/2-t/2,
i.top.y.baseVal.value=_.y-t/2,i.bottom.x.baseVal.value=_.x+_.width/2-t/2,i.bottom.y.baseVal.value=_.y+_.height-t/2,
i.left.x.baseVal.value=_.x-t/2,i.left.y.baseVal.value=_.y+_.height/2-t/2,i.right.x.baseVal.value=_.x+_.width-t/2,
i.right.y.baseVal.value=_.y+_.height/2-t/2}},_updateScaleGrippies:function(){var t=A/body.canvas.scale,i=(3/body.canvas.scale,
this._scaleGrippiesByPosition),r=!0,s=!1,o=void 0;try{for(var c=void 0,d=this["#scale-grippies"].children[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){
var h=c.value;h.width.baseVal.value=t,h.height.baseVal.value=t}}catch(v){s=!0,o=v;
}finally{try{r||null==d["return"]||d["return"]()}finally{if(s)throw o}}if(1===body.canvas.selectedElements.length){
var f,g=body.canvas.selectedElements[0],b=m(g,this),p=e(g);f=a(p.x+p.width/2,p.y),
f=f.matrixTransform(b),i.top.x.baseVal.value=f.x-t/2,i.top.y.baseVal.value=f.y-t/2,
f=a(p.x+p.width/2,p.y+p.height),f=f.matrixTransform(b),i.bottom.x.baseVal.value=f.x-t/2,
i.bottom.y.baseVal.value=f.y-t/2,f=a(p.x,p.y+p.height/2),f=f.matrixTransform(b),i.left.x.baseVal.value=f.x-t/2,
i.left.y.baseVal.value=f.y-t/2,f=a(p.x+p.width,p.y+p.height/2),f=f.matrixTransform(b),
i.right.x.baseVal.value=f.x-t/2,i.right.y.baseVal.value=f.y-t/2,f=a(p.x,p.y),f=f.matrixTransform(b),
i["top-left"].x.baseVal.value=f.x-t/2,i["top-left"].y.baseVal.value=f.y-t/2,f=a(p.x+p.width,p.y),
f=f.matrixTransform(b),i["top-right"].x.baseVal.value=f.x-t/2,i["top-right"].y.baseVal.value=f.y-t/2,
f=a(p.x,p.y+p.height),f=f.matrixTransform(b),i["bottom-left"].x.baseVal.value=f.x-t/2,
i["bottom-left"].y.baseVal.value=f.y-t/2,f=a(p.x+p.width,p.y+p.height),f=f.matrixTransform(b),
i["bottom-right"].x.baseVal.value=f.x-t/2,i["bottom-right"].y.baseVal.value=f.y-t/2;
}else if(body.canvas.selectedElements.length>1){var y=this.getScreenCTM().inverse(),_=u(function(){
var t=0,e=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e[t++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return e}());_=l(_,y),i.top.x.baseVal.value=_.x+_.width/2-t/2,
i.top.y.baseVal.value=_.y-t/2,i.bottom.x.baseVal.value=_.x+_.width/2-t/2,i.bottom.y.baseVal.value=_.y+_.height-t/2,
i.left.x.baseVal.value=_.x-t/2,i.left.y.baseVal.value=_.y+_.height/2-t/2,i.right.x.baseVal.value=_.x+_.width-t/2,
i.right.y.baseVal.value=_.y+_.height/2-t/2,i["top-left"].x.baseVal.value=_.x-t/2,
i["top-left"].y.baseVal.value=_.y-t/2,i["top-right"].x.baseVal.value=_.x+_.width-t/2,
i["top-right"].y.baseVal.value=_.y-t/2,i["bottom-left"].x.baseVal.value=_.x-t/2,i["bottom-left"].y.baseVal.value=_.y+_.height-t/2,
i["bottom-right"].x.baseVal.value=_.x+_.width-t/2,i["bottom-right"].y.baseVal.value=_.y+_.height-t/2;
}},_updateOriginGrippie:function(){if(body.canvas.selectedElements.length>=1){var t=j/body.canvas.scale,e=body.canvas.currentArtboard.getScreenCTM().inverse(),n=f.apply(void 0,$traceurRuntime.spread(body.canvas.selectedElements));
n=n.matrixTransform(e),this["#origin-grippie"].setAttribute("width",t),this["#origin-grippie"].setAttribute("height",t),
this["#origin-grippie"].setAttribute("x",n.x-t/2),this["#origin-grippie"].setAttribute("y",n.y-t/2);
}},_scaleParams:function(t,e,n,i){var r,a,s,o,l=body.modKeys,u=l.ctrl,c=(l.alt,l.shift);
return"top"===i?u||c?u&&!c?(r=n.x+n.width/2,a=n.y+n.height,o=(n.height-e)/n.height,
s=o):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=1,o=(n.height-n.height/2-e)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,o=(n.height-n.height/2-e)/(n.height-n.height/2),s=o):(r=n.x+n.width/2,
a=n.y+n.height,s=1,o=(n.height-e)/n.height):"bottom"===i?u||c?u&&!c?(r=n.x+n.width/2,
a=n.y,o=(n.height+e)/n.height,s=o):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=1,o=(n.height-n.height/2+e)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,o=(n.height-n.height/2+e)/(n.height-n.height/2),s=o):(r=n.x+n.width/2,
a=n.y,s=1,o=(n.height+e)/n.height):"left"===i?u||c?u&&!c?(r=n.x+n.width,a=n.y+n.height/2,
s=(n.width-t)/n.width,o=s):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=(n.width-n.width/2-t)/(n.width-n.width/2),
o=1):u&&c&&(r=n.x+n.width/2,a=n.y+n.height/2,s=(n.width-n.width/2-t)/(n.width-n.width/2),
o=s):(r=n.x+n.width,a=n.y+n.height/2,s=(n.width-t)/n.width,o=1):"right"===i&&(u||c?u&&!c?(r=n.x,
a=n.y+n.height/2,s=(n.width+t)/n.width,o=s):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,
s=(n.width-n.width/2+t)/(n.width-n.width/2),o=1):u&&c&&(r=n.x+n.width/2,a=n.y+n.height/2,
s=o=(n.width-n.width/2+t)/(n.width-n.width/2)):(r=n.x,a=n.y+n.height/2,s=(n.width+t)/n.width,
o=1)),"top-left"===i?u||c?u&&!c?(r=n.x+n.width,a=n.y+n.height,s=(n.width-t)/n.width,
o=(n.height-e)/n.height,s=o=C(s,o)):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=(n.width-n.width/2-t)/(n.width-n.width/2),
o=(n.height-n.height/2-e)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,a=n.y+n.height/2,
s=(n.width-n.width/2-t)/(n.width-n.width/2),o=(n.height-n.height/2-e)/(n.height-n.height/2),
s>=0&&o>=0?s=o=C(s,o):0>=s&&0>=o?s=o=E(s,o):S(s)>=S(o)?s=-o:o=-s):(r=n.x+n.width,
a=n.y+n.height,s=(n.width-t)/n.width,o=(n.height-e)/n.height):"top-right"===i?u||c?u&&!c?(r=n.x,
a=n.y+n.height,s=(n.width+t)/n.width,o=(n.height-e)/n.height,s=o=C(s,o)):!u&&c?(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+t)/(n.width-n.width/2),o=(n.height-n.height/2-e)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+t)/(n.width-n.width/2),o=(n.height-n.height/2-e)/(n.height-n.height/2),
s>=0&&o>=0?s=o=C(s,o):0>=s&&0>=o?s=o=E(s,o):S(s)>=S(o)?s=-o:o=-s):(r=n.x,a=n.y+n.height,
s=(n.width+t)/n.width,o=(n.height-e)/n.height):"bottom-left"===i?u||c?u&&!c?(r=n.x+n.width,
a=n.y,s=(n.width-t)/n.width,o=(n.height+e)/n.height,s=o=C(s,o)):!u&&c?(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2-t)/(n.width-n.width/2),o=(n.height-n.height/2+e)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2-t)/(n.width-n.width/2),o=(n.height-n.height/2+e)/(n.height-n.height/2),
s>=0&&o>=0?s=o=C(s,o):0>=s&&0>=o?s=o=E(s,o):S(s)>=S(o)?s=-o:o=-s):(r=n.x+n.width,
a=n.y,s=(n.width-t)/n.width,o=(n.height+e)/n.height):"bottom-right"===i&&(u||c?u&&!c?(r=n.x,
a=n.y,s=(n.width+t)/n.width,o=(n.height+e)/n.height,s=o=C(s,o)):!u&&c?(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+t)/(n.width-n.width/2),o=(n.height-n.height/2+e)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+t)/(n.width-n.width/2),o=(n.height-n.height/2+e)/(n.height-n.height/2),
s>=0&&o>=0?s=o=C(s,o):0>=s&&0>=o?s=o=E(s,o):S(s)>=S(o)?s=-o:o=-s):(r=n.x,a=n.y,s=(n.width+t)/n.width,
o=(n.height+e)/n.height)),{centerX:r,centerY:a,scaleX:s,scaleY:o}}},{},t)}(SVGGElement),O=r("g","bx-transformhud",R);
return{get default(){return O}}}),System.registerModule("elements/bx-transformtool",[],function(){
"use strict";var t=System.get("utils/bbox").getClientBBox,e=System.get("utils/dom"),n=e.isTransformableElement,i=(e.createSVGRect,
e.createSVGMatrix),r=e.registerElement,a=System.get("utils/event").isMouseMoveIntentional,s=System.get("utils/rect"),o=s.rectContainsRect,l=s.transformRect,u=System.get("utils/relationship"),c=u.getCommonContainer,d=u.getContainers,h=System.get("utils/constants").GRAPHICS_ELEMENTS,v=System.get("classes/enum")["default"],f=System.get("classes/vector")["default"],m=Math.abs,g=new v("initialTransforms"),b=function(e){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
enabledCallback:function(){var t=this;body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("transform-hud"),
body.canvas.enableHud("rubber-band-hud"),body.canvas.content.addEventListener("mousedown",this._mouseDownListener=function(e){
t._onContentMouseDown(e)}),body.canvas.content.addEventListener("contextmenu",this._contextMenuListener=function(e){
t._onContentContextMenu(e)})},disabledCallback:function(){body.canvas.disableHud("outlines-hud"),
body.canvas.disableHud("transform-hud"),body.canvas.disableHud("rubber-band-hud"),
body.canvas.content.removeEventListener("mousedown",this._mouseDownListener),body.canvas.content.removeEventListener("contextmenu",this._contextMenuListener);
},_onContentContextMenu:function(t){var e=body.canvas.getHitContentElements(t.clientX,t.clientY);
if(e.length>0){var n=e[e.length-1],i=d(n,body.canvas.currentArtboard),r=body.canvas.selectedElements.includes(n),a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;
body.canvas.selectedElements.includes(c)&&(r=!0)}}catch(h){s=!0,o=h}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}r===!1&&this._onContentClickSelectableElementHit(n)}else this._onContentClickBackgroundHit(t);
},_onContentMouseDown:function(t){var e=this;if(0===t.button){var n,i;this._intentionalDragStarted=!1,
window.addEventListener("mousemove",n=function(i){if(a(t,i)!==!1){window.removeEventListener("mousemove",n),
e._intentionalDragStarted=!0;var r=new f(i.clientX-t.clientX,i.clientY-t.clientY),s=m(r.x)>m(r.y)?"horizontal":"vertical";
e._onIntentionalDragStart(t,i,s)}}),window.addEventListener("mouseup",i=function(r){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
t.clientX===r.clientX&&t.clientY===r.clientY&&e._onContentClick(r)})}},_onContentClick:function(t){
if(0===t.button&&!body.canvas.huds.contains(t.target)&&!this._intentionalDragStarted){
var e=body.canvas.querySelector("#transform-hud"),i=body.canvas.getHitContentElements(t.clientX,t.clientY);
if(i.length>0){var r=i[i.length-1];if(t.detail%2===1)n(r)&&this._onContentClickSelectableElementHit(r);else if(t.detail%2===0){
var a=this._getContainerForHitElement(r);if(a)body.canvas.currentContainer=a,body.canvas.selectedElements=[];else if("use"===r.localName){
var s=body.canvas.content.querySelector(r.href.baseVal);if(s&&"symbol"===s.localName){
var o=s;body.canvas.editSymbol(o.id)}else e.mode="scale",body.toggleTool("edit-tool");
}else"text"===r.localName?(e.mode="scale",body.toggleTool("edit-tool")):(e.mode="scale",
body.toggleTool("edit-tool"))}}else this._onContentClickBackgroundHit(t)}},_getContainerForHitElement:function(t){
for(var e=[],n=t.parentElement;n!==body.canvas.currentArtboard&&n!==body.canvas.currentContainer;n=n.parentElement)("g"===n.localName||"a"===n.localName)&&e.push(n);
var i=e.length>0?e[e.length-1]:null;return i},_onIntentionalDragStart:function(t,e,n){
if(!body.canvas.huds.contains(t.target)){var i=body.canvas.getHitContentElements(e.clientX,e.clientY);
i.length>0?this._onContentElementDragStart(e,i[i.length-1],n):this._onEmptySpaceDragStart(t);
}},_onContentClickSelectableElementHit:function(t){var e=body.modKeys,n=e.ctrl,i=(e.alt,
e.shift),r=d(t,body.canvas.currentArtboard),a=body.canvas.selectedElements.includes(t),s=!0,o=!1,l=void 0;
try{for(var u=void 0,h=r[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var v=u.value;
body.canvas.selectedElements.includes(v)&&(a=!0)}}catch(f){o=!0,l=f}finally{try{s||null==h["return"]||h["return"]();
}finally{if(o)throw l}}if(n||i){if(!n&&i)if(0===r.length)body.canvas.currentContainer=null,
body.canvas.selectedElements.includes(t)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==t}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[t]);else if(body.canvas.currentContainer&&body.canvas.currentContainer.contains(t)){
for(;t.parentNode!==body.canvas.currentContainer;)t=t.parentNode;body.canvas.selectedElements.includes(t)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==t}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[t]);
}else{for(var m=c(t,body.canvas.currentContainer);t.parentNode!==m&&t.parentNode!==body.canvas.currentArtboard;)t=t.parentNode;
body.canvas.currentContainer=m,body.canvas.selectedElements.includes(t)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==t}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[t]);
}else if(n&&!i){for(var g=null,b=t.parentElement;b!==body.canvas.currentArtboard;b=b.parentElement)if("g"===b.localName||"a"===b.localName){
g=b;break}body.canvas.selectedElements=[t],body.canvas.currentContainer=g}else if(n&&i)if(body.canvas.selectedElements.includes(t)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==t}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[t]),
0===body.canvas.selectedElements.length)body.canvas.currentContainer=null;else for(var p=body.canvas.selectedElements[0].parentElement;p!==body.canvas.currentArtboard;p=p.parentElement)if("g"===p.localName||"a"===p.localName){
body.canvas.currentContainer=p;break}}else if(a)"scale"===body.canvas.transformHud.mode?body.canvas.transformHud.mode="rotate-and-skew":body.canvas.transformHud.mode="scale";else if(body.canvas.transformHud.mode="scale",
0===r.length)body.canvas.currentContainer=null,body.canvas.selectedElements=[t];else{
var y=body.canvas.currentContainer;if(y&&y.contains(t)){for(;t.parentNode!==y;)t=t.parentNode;
body.canvas.selectedElements=[t]}else{for(var _=c(t,y);t.parentNode!==_&&t.parentNode!==body.canvas.currentArtboard;)t=t.parentNode;
body.canvas.currentContainer=_,body.canvas.selectedElements=[t]}}},_onContentElementDragStart:function(t,e,n){
var r,a,s=d(e,body.canvas.currentArtboard),o=!1;body.canvas.undoManager.checkpoint("Transform"),
body.canvas.selectedElements.includes(e)&&(o=!0);var l=!0,u=!1,h=void 0;try{for(var v=void 0,f=s[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){
var m=v.value;body.canvas.selectedElements.includes(m)&&(o=!0)}}catch(b){u=!0,h=b;
}finally{try{l||null==f["return"]||f["return"]()}finally{if(u)throw h}}if(!o)if(0===s.length)body.canvas.currentContainer=null,
body.canvas.selectedElements=[e];else{for(var p=c(e,body.canvas.currentArtboard);e.parentNode!==p&&e.parentNode!==body.canvas.currentArtboard;)e=e.parentNode;
body.canvas.currentContainer=p,body.canvas.selectedElements=[e]}var y=body.registerCursor("move",300),_=!0,x=!1,w=void 0;
try{for(var S=void 0,C=body.canvas.selectedElements[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value,k=E.getScreenCTM(),A=k.inverse(),L=i(E.transform.baseVal.consolidate().matrix),M=L.multiplySelf(A);
E[g.initialTransforms]={clientToUserTransform:k,initialClientTransform:M}}}catch(j){
x=!0,w=j}finally{try{_||null==C["return"]||C["return"]()}finally{if(x)throw w}}window.addEventListener("mousemove",r=function(e){
var r=e.clientX-t.clientX,a=e.clientY-t.clientY;body.modKeys.shift&&("vertical"===n?r=0:"horizontal"===n&&(a=0));
var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=body.canvas.selectedElements[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=d[g.initialTransforms],v=h.clientToUserTransform,f=h.initialClientTransform,m=i(f);
m.translateSelf(r,a),m.multiplySelf(v),d.setAttribute("transform",m.toString())}}catch(b){
o=!0,l=b}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}),
window.addEventListener("mouseup",a=function(){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",a),body.unregisterCursor(y)})},_onContentClickBackgroundHit:function(t){
if(0===t.button){var e=body.modKeys,n=e.ctrl,i=e.shift;n||i||(2===t.detail&&(body.canvas.currentContainer=null),
body.canvas.selectedElements=[])}},_onEmptySpaceDragStart:function(e){var n=e,i=n.clientX,r=n.clientY;
body.canvas.rubberBandHud.grabSelection(i,r,function(e){var n=[],i=body.canvas.currentContainer||body.canvas.currentArtboard,r=body.canvas.currentArtboard.getScreenCTM().inverse(),a=!0,s=!1,u=void 0;
try{for(var c=void 0,d=i.children[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){
var v=c.value;if(h.includes(v.localName)||"g"===v.localName){var f=t(v);f=l(f,r);var m=0===f.width&&0===f.height;
!m&&o(e,f)&&n.push(v)}}}catch(g){s=!0,u=g}finally{try{a||null==d["return"]||d["return"]();
}finally{if(s)throw u}}body.canvas.selectedElements=$traceurRuntime.spread(n)})}},{},e);
}(HTMLElement),p=r("bx-transformtool",b);return{get default(){return p}}}),System.registerModule("elements/bx-typographycontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-fontfamilybutton"),
System.get("elements/bx-fontfamilypicker"),System.get("elements/bx-select"),System.get("elements/bx-selectitem"),
System.get("elements/bx-slider");var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/constants"),n=e.FONT_WEIGHTS_BY_MATCHING_ORDER,i=(e.TEXT_CONTENT_ELEMENTS,
System.get("utils/dom")),r=(i.closest,i.createElement),a=i.createSVGMatrix,s=i.createSVGPoint,o=i.registerElement,l=System.get("utils/font"),u=l.formatFontWeightForDisplay,c=l.getFontVariantWeight,d=l.normalizeFontWeight,h=System.get("utils/math").round,v=System.get("utils/relationship").queryStylableElements,f=System.get("utils/time").throttle,m=System.get("utils/transform").getTransformToElement,g=System.get("utils/text"),b=(g.isValidFontFamilyValue,
g.getTspansIntersectedByRange),p=g.normalizeTextInRangeBeforeEditing,y=g.normalizeTextInRangeAfterEditing,_=System.get("classes/decomposed-transform")["default"],x=Number.parseFloat,w=function(t,e){
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=n[t][Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;if(e.includes(l))return l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}},S='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-typographycontrols.css");\n</style>\n\n<div id="master-view">\n  <section id="font-section">\n    <h2 id="font-heading">Font</h2>\n\n    <div id="font-family-div">\n      <h3 id="font-family-heading">Family</h3>\n      <bx-fontfamilybutton id="font-family-button" label="Arial"></bx-fontfamilybutton>\n    </div>\n\n    <div id="font-variant-div">\n      <h3 id="font-variant-heading">Variant</h3>\n\n      <div class="hbox">\n        <bx-select id="font-weight-select" value="400">\n          <bx-selectitem value="400" label="Normal"></bx-selectitem>\n        </bx-select>\n\n        <bx-button\n          id="italic-font-style-button"\n          value="italic"\n          tooltip="Italic"\n          icon="italic"\n          iconsize="28"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="small-caps-font-variant-button"\n          value="small-caps"\n          tooltip="Small Caps"\n          icon="small-caps"\n          iconsize="28"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </div>\n\n    <div id="font-size-div">\n      <h3 id="font-size-heading">Size</h3>\n\n      <bx-slider\n        id="font-size-slider"\n        title=""\n        value="0"\n        min="1"\n        precision="0">\n      </bx-slider>\n    </div>\n  </section>\n\n  <section id="transform-section">\n    <h2 id="transform-heading">Transform</h2>\n\n    <div class="hbox">\n      <div id="transform-buttons">\n        <bx-button\n          id="capitalize-button"\n          value="capitalize"\n          tooltip="Capitalize"\n          icon="capitalize"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="uppercase-button"\n          value="uppercase"\n          tooltip="Uppercase"\n          icon="uppercase"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="lowercase-button"\n          value="lowercase"\n          tooltip="Lowercase"\n          icon="lowercase"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n\n      <bx-button\n        id="text-on-path-button"\n        value="text-on-path"\n        tooltip="Text on Path"\n        icon="text-on-path"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="decoration-section">\n    <h2 id="decoration-heading">Decoration</h2>\n\n    <div id="decoration-buttons">\n      <bx-button\n        id="underline-button"\n        value="underline"\n        tooltip="Underline"\n        icon="underline"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="line-through-button"\n        value="line-through"\n        tooltip="Line-through"\n        icon="line-through"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="overline-button"\n        value="overline"\n        tooltip="Overline"\n        icon="overline"\n        iconsize="32"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="spacing-section">\n    <h2 id="spacing-heading">Spacing</h2>\n\n    <div id="letter-spacing-div">\n      <h3 id="letter-spacing-heading">Letter</h2>\n\n      <bx-slider\n        id="letter-spacing-slider"\n        title=""\n        value="0"\n        step="0.1"\n        precision="2">\n      </bx-slider>\n    </div>\n\n    <div id="word-spacing-div">\n      <h3 id="word-spacing-heading">Word</h2>\n\n      <bx-slider\n        id="word-spacing-slider"\n        title=""\n        value="0"\n        step="0.1"\n        precision="2">\n      </bx-slider>\n    </div>\n  </section>\n</div>\n\n<div id="font-family-view" hidden>\n  <nav id="navbar">\n    <bx-button\n      id="back-button"\n      icon="back"\n      iconsize="20"\n      skin="iconic"\n      label="<">\n    </bx-button>\n\n    <h1>Select font family</h1>\n  </nav>\n\n  <section id="font-family-picker-section">\n    <bx-fontfamilypicker id="font-family-picker" disabled></bx-fontfamilypicker>\n  </section>\n</div>\n',C=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=S;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this._update60ms=f(this._update,60,this),this._update300ms=f(this._update,300,this),
this["#font-family-button"].addEventListener("click",function(e){t._onFontFamilyButtonClick(e);
}),this["#font-weight-select"].addEventListener("change",function(e){t._onFontWeightSelectChange();
}),this["#italic-font-style-button"].addEventListener("click",function(e){t._onItalicFontStyleButtonClick(e);
}),this["#small-caps-font-variant-button"].addEventListener("click",function(e){t._onSmallCapsFontVariantButtonClick(e);
}),this["#font-size-slider"].addEventListener("changestart",function(){t._onFontSizeSliderChangeStart();
}),this["#capitalize-button"].addEventListener("click",function(e){t._onTextTransformButtonClick(e);
}),this["#uppercase-button"].addEventListener("click",function(e){t._onTextTransformButtonClick(e);
}),this["#lowercase-button"].addEventListener("click",function(e){t._onTextTransformButtonClick(e);
}),this["#text-on-path-button"].addEventListener("click",function(e){t._onTextOnPathButtonClick(e);
}),this["#underline-button"].addEventListener("click",function(e){t._onTextDecorationButtonClick(e);
}),this["#line-through-button"].addEventListener("click",function(e){t._onTextDecorationButtonClick(e);
}),this["#overline-button"].addEventListener("click",function(e){t._onTextDecorationButtonClick(e);
}),this["#letter-spacing-slider"].addEventListener("changestart",function(){t._onLetterSpacingSliderChangeStart();
}),this["#word-spacing-slider"].addEventListener("changestart",function(){t._onWordSpacingSliderChangeStart();
}),this["#back-button"].addEventListener("click",function(e){t._onBackButtonClick(e);
}),this["#font-family-picker"].addEventListener("change",function(e){t._onFontFamilyPickerValueChange();
})},_onFontFamilyPickerValueChange:function(){var t,e,n=this["#font-family-picker"].value;
if(n){var i=n,r=(t=i[Symbol.iterator](),(e=t.next()).done?void 0:e.value),a=(e=t.next()).done?void 0:e.value;
body.canvas.undoManager.checkpoint("Font family"),"google"===r&&body.canvas.fontsManager.importGoogleFontFamily(a);
var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=this._getSelectedTextContentElements()[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.style.fontFamily=a}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}body.canvas.fontsManager.deportUnsusedGoogleFontFamilies();
}},enabledCallback:function(){var t=this;body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
t._onSelectedElementsChange()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e.detail)}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
t._onSelectedTextRangeChange()}),this._update()},disabledCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
this._hideFontFamilyPickerView()},_showFontFamilyPickerView:function(){this["#font-family-view"].hidden&&(this["#font-family-picker"].disabled=!1,
this["#font-family-view"].hidden=!1,this["#master-view"].hidden=!0)},_hideFontFamilyPickerView:function(){
this["#font-family-view"].hidden||(this["#font-family-picker"].disabled=!0,this["#font-family-view"].hidden=!0,
this["#master-view"].hidden=!1)},_onSelectedElementsChange:function(){this["#font-family-view"].hidden||this._hideFontFamilyPickerView(),
this._update60ms()},_onSelectedTextRangeChange:function(){this._update300ms()},_onContentMutation:function(t){
this._update300ms()},_onFontFamilyButtonClick:function(t){this._showFontFamilyPickerView();
},_onFontWeightSelectChange:function(){body.canvas.undoManager.checkpoint("Font weight");
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;p(n);var i=v("font-weight",e,n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
u.style.fontWeight=this["#font-weight-select"].value}}catch(c){a=!0,s=c}finally{try{
r||null==l["return"]||l["return"]()}finally{if(a)throw s}}y(n)},_onItalicFontStyleButtonClick:function(t){
if(0===t.button){body.canvas.undoManager.checkpoint("Font style");var e=body.canvas,n=e.selectedElements,i=e.selectedTextRange;
p(i);var r=v("font-style",n,i),a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;c.style.fontStyle=t.target.pressed&&!t.target.mixed?"normal":"italic";
}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}},_onSmallCapsFontVariantButtonClick:function(t){if(0===t.button){body.canvas.undoManager.checkpoint("Font variant");
var e=body.canvas,n=e.selectedElements,i=e.selectedTextRange;p(i);var r=v("font-variant",n,i),a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;
c.style.fontVariant=t.target.pressed&&!t.target.mixed?"normal":"small-caps"}}catch(d){
s=!0,o=d}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}}},
_onTextTransformButtonClick:function(t){if(0===t.button){body.canvas.undoManager.checkpoint("Text transform");
var e=body.canvas,n=e.selectedElements,i=e.selectedTextRange;p(i);var r=v("text-transform",n,i),a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;
c.style.textTransform=t.target.pressed&&!t.target.mixed?"none":t.target.value}}catch(d){
s=!0,o=d}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}y(i);
}},_onTextDecorationButtonClick:function(){if(0===event.button){body.canvas.undoManager.checkpoint("Text decoration");
var t=body.canvas,e=t.selectedElements,n=t.selectedTextRange;p(n);var i=v("text-decoration",e,n),r=event.target,a=r.pressed,s=r.mixed,o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=h.style.textDecoration.includes("underline"),m=h.style.textDecoration.includes("line-through"),g=h.style.textDecoration.includes("overline");
"underline"===event.target.value?f=!a||a&&s:"line-through"===event.target.value?m=!a||a&&s:"overline"===event.target.value&&(g=!a||a&&s);
var b="";f&&(b+="underline "),m&&(b+="line-through "),g&&(b+="overline "),""===b?h.style.textDecoration=null:h.style.textDecoration=b.trim();
}}catch(_){l=!0,u=_}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u;
}}y(n)}},_onFontSizeSliderChangeStart:function(){var t=this;body.canvas.undoManager.checkpoint("Font size");
var e=body.canvas,n=e.selectedElements,i=e.selectedTextRange;p(i);var r,a,s=v("font-size",n,i);
this._isChangingFontSizeSlider=!0,this["#font-size-slider"].addEventListener("change",r=function(){
t["#font-size-slider"].mixed=!1;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=s[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var o=r.value,l=m(o,body.canvas.currentArtboard).inverse(),u=_.fromSVGMatrix(l).scaleY,c=t["#font-size-slider"].value*u;
o.style.fontSize=c}}catch(d){n=!0,i=d}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}),this["#font-size-slider"].addEventListener("changeend",a=function(){
t["#font-size-slider"].removeEventListener("change",r),t["#font-size-slider"].removeEventListener("changeend",a),
y(i),t._isChangingFontSizeSlider=!1})},_onLetterSpacingSliderChangeStart:function(){
var t=this;body.canvas.undoManager.checkpoint("Letter spacing");var e=body.canvas,n=e.selectedElements,i=e.selectedTextRange;
p(i);var r,a,s=v("letter-spacing",n,i);this._isChangingLetterSpacingSlider=!0,this["#letter-spacing-slider"].addEventListener("change",r=function(){
t["#letter-spacing-slider"].mixed=!1;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=s[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var o=r.value,l=m(o,body.canvas.currentArtboard).inverse(),u=_.fromSVGMatrix(l).scaleX,c=t["#letter-spacing-slider"].value*u;
o.style.letterSpacing=c}}catch(d){n=!0,i=d}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}),this["#letter-spacing-slider"].addEventListener("changeend",a=function(){
t["#letter-spacing-slider"].removeEventListener("change",r),t["#letter-spacing-slider"].removeEventListener("changeend",a),
y(i),t._isChangingLetterSpacingSlider=!1})},_onWordSpacingSliderChangeStart:function(){
var t=this;body.canvas.undoManager.checkpoint("Word spacing");var e=body.canvas,n=e.selectedElements,i=e.selectedTextRange;
p(i);var r,a,s=v("word-spacing",n,i);this._isChangingWordSpacingSlider=!0,this["#word-spacing-slider"].addEventListener("change",r=function(){
t["#word-spacing-slider"].mixed=!1;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=s[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var o=r.value,l=m(o,body.canvas.currentArtboard).inverse(),u=_.fromSVGMatrix(l).scaleX,c=t["#word-spacing-slider"].value*u;
o.style.wordSpacing=c}}catch(d){n=!0,i=d}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}),this["#word-spacing-slider"].addEventListener("changeend",a=function(){
t["#word-spacing-slider"].removeEventListener("change",r),t["#word-spacing-slider"].removeEventListener("changeend",a),
y(i),t._isChangingWordSpacingSlider=!1})},_onTextOnPathButtonClick:function(e){body.canvas.undoManager.checkpoint("Put text on path");
var n=$traceurRuntime.spread(body.canvas.selectedElements).filter(function(t){return"text"===t.localName;
}),i=!0,o=!1,l=void 0;try{for(var u=void 0,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){
var d=u.value,v=$traceurRuntime.spread(d.children).find(function(t){return"textPath"===t.localName;
});if(v){var f=t(d),m=body.canvas.content.querySelector(v.href.baseVal);m.remove(),
d.innerHTML=v.innerHTML,d.setAttribute("x",f.x),d.setAttribute("y",f.y+f.height/2);
}else{var g=t(d),b=a(d.transform.baseVal.consolidate().matrix),p=x(getComputedStyle(d).fontSize),y=_.fromSVGMatrix(b).scaleY,w=h(p*y,2);
d.style.fontSize=w;var S=s(g.x,g.y+g.height).matrixTransform(b),C=s(g.x+g.width/2,g.y).matrixTransform(b),E=s(g.x+g.width,g.y+g.height).matrixTransform(b),k="M "+S.x+" "+S.y+" Q "+C.x+" "+C.y+" "+E.x+" "+E.y,A=r("svg:path");
A.setAttribute("id",body.canvas.generateUniqueID("path")),A.setAttribute("d",k),A.setAttribute("style","fill: none; stroke: red; stroke-width: 2;"),
d.parentElement.append(A),d.removeAttribute("x"),d.removeAttribute("y"),d.removeAttribute("transform");
var L=r("svg:textPath");L.href.baseVal="#"+A.id,L.innerHTML=d.innerHTML,d.innerHTML="",
d.append(L)}}}catch(M){o=!0,l=M}finally{try{i||null==c["return"]||c["return"]()}finally{
if(o)throw l}}},_onBackButtonClick:function(t){0===t.button&&this._hideFontFamilyPickerView();
},_update:function(){this._selectedTextContentElements=this._getSelectedTextContentElements(),
this._updateFontSection(),this._updateTransformSection(),this._updateDecorationSection(),
this._updateSpacingSection()},_updateFontSection:function(){var t,e;if(!this._isChangingFontSizeSlider){
var n=this._selectedTextContentElements,i=(t=n[Symbol.iterator](),(e=t.next()).done?void 0:e.value),a=$traceurRuntime.iteratorToArray(t);
if(i){var s=body.canvas.fontsManager.getImportedGoogleFontFamilyNames(),o=getComputedStyle(i),l=o.fontFamily.split(",")[0].replaceAll("'",""),c=s.includes(l)?"google":"system",v=d(o.fontWeight),f=this._getSupportedWeights(l,c),g=w(v,f),b=x(getComputedStyle(i).fontSize),p=m(i.closest("text"),body.canvas.currentArtboard),y=_.fromSVGMatrix(p).scaleY,S=h(b*y,2),C=!1,E=!1,k=!1,A=!1,L=!1,M=!0,j=!1,T=void 0;
try{for(var P=void 0,R=a[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){var O=P.value,I=getComputedStyle(O),D=I.fontFamily.split(",")[0].replaceAll("'",""),V=s.includes(D)?"google":"system",N=d(I.fontWeight),B=this._getSupportedWeights(D,V),z=w(N,B),G=x(getComputedStyle(O).fontSize);
D!==l&&(C=!0),z!==g&&(E=!0),I.fontStyle!==o.fontStyle&&(k=!0),I.fontVariant!==o.fontVariant&&(A=!0),
G!==b&&(L=!0)}}catch(U){j=!0,T=U}finally{try{M||null==R["return"]||R["return"]()}finally{
if(j)throw T}}this["#font-weight-select"].innerHTML="";var H=!0,F=!1,q=void 0;try{
for(var $=void 0,Y=f[Symbol.iterator]();!(H=($=Y.next()).done);H=!0){var X=$.value,W=r("bx-selectitem");
W.value=X,W.label=u(X),this["#font-weight-select"].append(W)}}catch(Z){F=!0,q=Z}finally{
try{H||null==Y["return"]||Y["return"]()}finally{if(F)throw q}}this["#font-heading"].disabled=!1,
this["#font-family-heading"].disabled=!1,this["#font-family-button"].disabled=!1,
this["#font-family-button"].label=l,this["#font-family-button"].mixed=C,this["#font-family-picker"].value=[c,l],
this["#font-variant-heading"].disabled=!1,this["#font-weight-select"].disabled=!1,
this["#font-weight-select"].value=g,this["#font-weight-select"].mixed=E,this["#italic-font-style-button"].disabled=!1,
this["#italic-font-style-button"].mixed=k,this["#italic-font-style-button"].pressed="italic"===o.fontStyle,
this["#small-caps-font-variant-button"].disabled=!1,this["#small-caps-font-variant-button"].mixed=A,
this["#small-caps-font-variant-button"].pressed="small-caps"===o.fontVariant,this["#font-size-heading"].disabled=!1,
this["#font-size-slider"].disabled=!1,this["#font-size-slider"].value=S,this["#font-size-slider"].mixed=L;
}else this["#font-heading"].disabled=!0,this["#font-family-heading"].disabled=!0,
this["#font-family-button"].disabled=!0,this["#font-family-button"].mixed=!1,this["#font-variant-heading"].disabled=!0,
this["#font-weight-select"].disabled=!0,this["#font-weight-select"].mixed=!1,this["#italic-font-style-button"].disabled=!0,
this["#italic-font-style-button"].mixed=!1,this["#italic-font-style-button"].pressed=!1,
this["#small-caps-font-variant-button"].disabled=!0,this["#small-caps-font-variant-button"].mixed=!1,
this["#small-caps-font-variant-button"].pressed=!1,this["#font-size-heading"].disabled=!0,
this["#font-size-slider"].value=0,this["#font-size-slider"].mixed=!1,this["#font-size-slider"].disabled=!0,
this._hideFontFamilyPickerView()}},_updateTransformSection:function(){var t,e,n=this._selectedTextContentElements,i=(t=n[Symbol.iterator](),
(e=t.next()).done?void 0:e.value),r=$traceurRuntime.iteratorToArray(t);if(i){var a=getComputedStyle(i),s=!1,o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,v=getComputedStyle(h);
v.textTransform!==a.textTransform&&(s=!0)}}catch(f){l=!0,u=f}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}this["#transform-heading"].disabled=!1,this["#capitalize-button"].disabled=!1,
this["#capitalize-button"].mixed=s,this["#capitalize-button"].pressed="capitalize"===a.textTransform,
this["#uppercase-button"].disabled=!1,this["#uppercase-button"].pressed="uppercase"===a.textTransform,
this["#uppercase-button"].mixed=s,this["#lowercase-button"].disabled=!1,this["#lowercase-button"].pressed="lowercase"===a.textTransform,
this["#lowercase-button"].mixed=s}else this["#transform-heading"].disabled=!0,this["#capitalize-button"].disabled=!0,
this["#capitalize-button"].mixed=!1,this["#capitalize-button"].pressed=!1,this["#uppercase-button"].disabled=!0,
this["#uppercase-button"].mixed=!1,this["#uppercase-button"].pressed=!1,this["#lowercase-button"].disabled=!0,
this["#lowercase-button"].mixed=!1,this["#lowercase-button"].pressed=!1;var m=$traceurRuntime.spread(body.canvas.selectedElements).filter(function(t){
return"text"===t.localName});if(0===m.length)this["#text-on-path-button"].pressed=!1,
this["#text-on-path-button"].disabled=!0;else{var g=!1,b=null!==m[0].querySelector("textPath"),p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=m[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){var S=x.value,C=null!==S.querySelector("textPath");
if(C!==b){g=!0;break}}}catch(E){y=!0,_=E}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}this["#text-on-path-button"].pressed=b,this["#text-on-path-button"].disabled=!1,
this["#text-on-path-button"].mixed=g}},_updateDecorationSection:function(){var t,e,n=this._selectedTextContentElements,i=(t=n[Symbol.iterator](),
(e=t.next()).done?void 0:e.value),r=$traceurRuntime.iteratorToArray(t);if(i){var a=getComputedStyle(i),s=!1,o=!1,l=!1,u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=r[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var f=h.value,m=getComputedStyle(f);
a.textDecoration!==m.textDecoration&&(a.textDecoration.includes("underline")!==m.textDecoration.includes("underline")&&(s=!0),
a.textDecoration.includes("line-through")!==m.textDecoration.includes("line-through")&&(o=!0),
a.textDecoration.includes("overline")!==m.textDecoration.includes("overline")&&(l=!0));
}}catch(g){c=!0,d=g}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}this["#decoration-heading"].disabled=!1,this["#underline-button"].disabled=!1,this["#underline-button"].mixed=s,
this["#underline-button"].pressed=a.textDecoration.includes("underline"),this["#line-through-button"].disabled=!1,
this["#line-through-button"].mixed=o,this["#line-through-button"].pressed=a.textDecoration.includes("line-through"),
this["#overline-button"].disabled=!1,this["#overline-button"].mixed=l,this["#overline-button"].pressed=a.textDecoration.includes("overline");
}else this["#decoration-heading"].disabled=!0,this["#underline-button"].disabled=!0,
this["#underline-button"].mixed=!1,this["#underline-button"].pressed=!1,this["#line-through-button"].disabled=!0,
this["#line-through-button"].mixed=!1,this["#line-through-button"].pressed=!1,this["#overline-button"].disabled=!0,
this["#overline-button"].mixed=!1,this["#overline-button"].pressed=!1},_updateSpacingSection:function(){
var t,e;if(!this._isChangingLetterSpacingSlider&&!this._isChangingWordSpacingSlider){
var n=this._selectedTextContentElements,i=(t=n[Symbol.iterator](),(e=t.next()).done?void 0:e.value),r=$traceurRuntime.iteratorToArray(t);
if(i){var a=getComputedStyle(i),s=a.letterSpacing;s="normal"===s?0:x(s);var o=a.wordSpacing;
o="normal"===o?0:x(o);var l=!1,u=!1,c=!0,d=!1,v=void 0;try{for(var f=void 0,m=r[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){
var g=f.value,b=getComputedStyle(g),p=b.letterSpacing;p="normal"===p?0:x(p);var y=b.wordSpacing;
y="normal"===y?0:x(y),p!==s&&(l=!0),y!==o&&(u=!0)}}catch(_){d=!0,v=_}finally{try{
c||null==m["return"]||m["return"]()}finally{if(d)throw v}}this["#spacing-heading"].disabled=!1,
this["#letter-spacing-heading"].disabled=!1,this["#letter-spacing-slider"].value=h(s,2),
this["#letter-spacing-slider"].mixed=l,this["#letter-spacing-slider"].disabled=!1,
this["#word-spacing-heading"].disabled=!1,this["#word-spacing-slider"].value=h(o,2),
this["#word-spacing-slider"].mixed=u,this["#word-spacing-slider"].disabled=!1}else this["#spacing-heading"].disabled=!0,
this["#letter-spacing-heading"].disabled=!0,this["#letter-spacing-slider"].value=0,
this["#letter-spacing-slider"].mixed=!1,this["#letter-spacing-slider"].disabled=!0,
this["#word-spacing-heading"].disabled=!0,this["#word-spacing-slider"].value=0,this["#word-spacing-slider"].mixed=!1,
this["#word-spacing-slider"].disabled=!0}},_getSelectedTextContentElements:function(){
var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=void 0!==arguments[1]?arguments[1]:body.canvas.selectedTextRange,n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=l.localName;
if("g"===u||"a"===u)n=$traceurRuntime.spread(n,this._getSelectedTextContentElements(l.children,e));else if("tspan"===u||"textPath"===u)n.push(l);else if("text"===u)if(e&&e.intersectsNode(l)){
var c=b(e);if(c.length>0){var d="backward"===e.direction?c[c.length-1]:c[0],h=c.remove(d);
n=$traceurRuntime.spread(n,[d],h)}}else n=$traceurRuntime.spread(n,this._getSelectedTextContentElements(l.children,e));
}}catch(v){r=!0,a=v}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}return n},_getSelectedTextElements:function(){var t=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"text"===o.localName?e.push(o):("g"===o.localName||"a"===o.localName)&&(e=$traceurRuntime.spread(e,this._getSelectedTextElements(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e},_getSupportedWeights:function(t){var e=void 0!==arguments[1]?arguments[1]:"system",n=new Set;
if("system"===e){var i=body.canvas.fontsManager.systemFontFamilies,r=i.find(function(e){
return e.name===t});if(r){var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r.variants[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var d=l.value,h=c(d);n.add(h)}}catch(v){s=!0,o=v}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}}else n=["100","200","300","400","500","600","700","800","900"];
}else if("google"===e){var f=body.canvas.fontsManager.googleFontFamilies,m=f.find(function(e){
return e.name===t}).variants,g=!0,b=!1,p=void 0;try{for(var y=void 0,_=m[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){
var x=y.value,w=c(x);n.add(w)}}catch(S){b=!0,p=S}finally{try{g||null==_["return"]||_["return"]();
}finally{if(b)throw p}}}return $traceurRuntime.spread(n)}},{},e)}(HTMLElement),E=o("bx-typographycontrols",C);
return{get default(){return E}}}),System.registerModule("elements/bx-viewboxedithud",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.createSVGMatrix,n=t.createSVGPoint,i=t.registerElement,r=System.get("utils/event").isMouseMoveIntentional,a=System.get("utils/math").round,s=Math.abs,o='\n  <style>@import url("stylesheets/bx-viewboxedithud.css");</style>\n  <path id="outer-area"></path>\n  <rect id="inner-area" width="0" height="0" x="0" y="0"></rect>\n\n  <g id="resize-grippies" opacity="0">\n    <line class="resize-grippie side-resize-grippie" data-position="left"></line>\n    <line class="resize-grippie side-resize-grippie" data-position="right"></line>\n    <line class="resize-grippie side-resize-grippie" data-position="top"></line>\n    <line class="resize-grippie side-resize-grippie" data-position="bottom"></line>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="top-left">\n      <rect width="30" height="30"></rect>\n      <path d="M 15 15 h 15 v -5 h -20 v 20 h 5 z"/>\n    </g>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="top-right">\n      <rect width="30" height="30"></rect>\n      <path d="M 0 15 h 15 v 15 h 5 v -20 h -20 z"/>\n    </g>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="bottom-left">\n      <rect width="30" height="30"></rect>\n      <path d="M 15 15 h 15 v 5 h -20 v -20 h 5 z"/>\n    </g>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="bottom-right">\n      <rect width="30" height="30"></rect>\n      <path d="M 15 15 v -15 h 5 v 20 h -20 v -5 z"/>\n    </g>\n  </g>\n',l=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=o;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(l){n=!0,i=l}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}this["#inner-area"].addEventListener("mousedown",function(e){
t._onInnerAreaMouseDown(e)}),this["#resize-grippies"].addEventListener("mousedown",function(e){
t._onResizeGrippiesMouseDown(e)})},enabledCallback:function(){var t=this;body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(e){
t._onZoomChange()}),this["#resize-grippies"].style.opacity="1",this._update()},disabledCallback:function(){
body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener)},_onContentMutation:function(t){
(t.target===body.canvas||t.target.parentElement===body.canvas)&&this._update()},_onZoomChange:function(){
this._update()},_onInnerAreaMouseDown:function(t){var e,n,i=this;window.addEventListener("mousemove",n=function(a){
r(t,a,7)!==!1&&(window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e),
i._onInnerAreaDragStart(t))}),window.addEventListener("mouseup",e=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",e)})},_onInnerAreaDragStart:function(t){body.canvas.undoManager.checkpoint("View box");
var e,i,r=body.registerCursor("-webkit-grabbing",900),s=body.canvas.currentArtboard.viewBox.x,o=body.canvas.currentArtboard.viewBox.y,l=body.canvas.currentArtboard.getScreenCTM().inverse(),u=body.canvas.zoom<500?0:2,c=n(t.clientX,t.clientY);
c=c.matrixTransform(l),window.addEventListener("mousemove",i=function(t){var e=n(t.clientX,t.clientY);
e=e.matrixTransform(l);var i={x:e.x-c.x,y:e.y-c.y},r=s+i.x,d=o+i.y;null!==r&&(body.canvas.currentArtboard.viewBox.x=a(r,u)),
null!==d&&(body.canvas.currentArtboard.viewBox.y=a(d,u))}),window.addEventListener("mouseup",e=function(){
window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",e),
body.unregisterCursor(r)})},_onResizeGrippiesMouseDown:function(t){body.canvas.undoManager.checkpoint("View box");
var e=t.target.closest(".resize-grippie"),i=e.getAttribute("data-position"),r=body.canvas.currentArtboard.getScreenCTM().inverse(),o=body.canvas.currentArtboard.viewBox.x,l=body.canvas.currentArtboard.viewBox.y,u=body.canvas.currentArtboard.viewBox.width,c=body.canvas.currentArtboard.viewBox.height,d=body.canvas.zoom<500?0:2,h=n(t.clientX,t.clientY);
h=h.matrixTransform(r);var v,f,m;"left"===i||"right"===i?m="ew-resize":"top"===i||"bottom"===i?m="ns-resize":"top-left"===i?m="nwse-resize":"top-right"===i?m="nesw-resize":"bottom-left"===i?m="nesw-resize":"bottom-right"===i&&(m="nwse-resize");
var g=body.registerCursor(m,999);window.addEventListener("mousemove",v=function(t){
var e=n(t.clientX,t.clientY);e=e.matrixTransform(r);var v={x:e.x-h.x,y:e.y-h.y},f=null,m=null,g=null,b=null;
"left"===i?(g=u-v.x,f=o+v.x,0>g&&(g=s(g),f=o+u)):"right"===i?(g=u+v.x,0>g&&(g=s(g),
f=o-g)):"top"===i?(b=c-v.y,m=l+v.y,0>b&&(b=s(b),m=l+c)):"bottom"===i?(b=c+v.y,0>b&&(b=s(b),
m=l-b)):"top-left"===i?(g=u-v.x,b=c-v.y,f=o+v.x,m=l+v.y,0>g&&(g=s(g),f=o+u),0>b&&(b=s(b),
m=l+c)):"top-right"===i?(g=u+v.x,b=c-v.y,m=l+v.y,0>g&&(g=s(g),f=o-g),0>b&&(b=s(b),
m=l+c)):"bottom-left"===i?(g=u-v.x,b=c+v.y,f=o+v.x,0>g&&(g=s(g),f=o+u),0>b&&(b=s(b),
m=l-b)):"bottom-right"===i&&(g=u+v.x,b=c+v.y,0>g&&(g=s(g),f=o-g),0>b&&(b=s(b),m=l-b)),
null!==f&&(body.canvas.currentArtboard.viewBox.x=a(f,d)),null!==m&&(body.canvas.currentArtboard.viewBox.y=a(m,d)),
null!==g&&(body.canvas.currentArtboard.viewBox.width=a(g,d)),null!==b&&(body.canvas.currentArtboard.viewBox.height=a(b,d));
}),window.addEventListener("mouseup",f=function(){window.removeEventListener("mousemove",v),
window.removeEventListener("mouseup",f),body.unregisterCursor(g)})},_update:function(){
if(body.canvas.currentArtboard.hasAttribute("viewBox")===!1)this.style.visibility="hidden";else{
this.style.visibility="visible";var t=body.canvas.currentArtboard.viewBox,n=t.x,i=t.y,r=t.width,a=t.height;
this["#inner-area"].setAttribute("x",n),this["#inner-area"].setAttribute("y",i),this["#inner-area"].setAttribute("width",r),
this["#inner-area"].setAttribute("height",a);var s=1e6,o="\n        M "+-s+", "+-s+"\n        L "+2*s+", "+-s+"\n        L "+2*s+", "+2*s+"\n        L "+-s+", "+2*s+"\n        Z\n        M "+n+", "+i+"\n        L "+n+", "+(i+a)+"\n        L "+(n+r)+", "+(i+a)+"\n        L "+(n+r)+", "+i+"\n        Z\n      ";
this["#outer-area"].setAttribute("d",o);var l=(10/body.canvas.scale,!0),u=!1,c=void 0;
try{for(var d=void 0,h=this["#resize-grippies"].children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=v.getAttribute("data-position");if("left"===f)v.x1.baseVal.value=n,
v.y1.baseVal.value=i,v.x2.baseVal.value=n,v.y2.baseVal.value=i+a;else if("right"===f)v.x1.baseVal.value=n+r,
v.y1.baseVal.value=i,v.x2.baseVal.value=n+r,v.y2.baseVal.value=i+a;else if("top"===f)v.x1.baseVal.value=n,
v.y1.baseVal.value=i,v.x2.baseVal.value=n+r,v.y2.baseVal.value=i;else if("bottom"===f)v.x1.baseVal.value=n,
v.y1.baseVal.value=i+a,v.x2.baseVal.value=n+r,v.y2.baseVal.value=i+a;else if("top-left"===f){
var m=e();m.scaleSelf(1/body.canvas.scale,n,i),m.translateSelf(n-15,i-15),v.setAttribute("transform",m.toString());
}else if("top-right"===f){var g=e();g.scaleSelf(1/body.canvas.scale,n+r,i),g.translateSelf(n+r-15,i-15),
v.setAttribute("transform",g.toString())}else if("bottom-left"===f){var b=e();b.scaleSelf(1/body.canvas.scale,n,i+a),
b.translateSelf(n-15,i+a-15),v.setAttribute("transform",b.toString())}else if("bottom-right"===f){
var p=e();p.scaleSelf(1/body.canvas.scale,n+r,i+a),p.translateSelf(n+r-15,i+a-15),
v.setAttribute("transform",p.toString())}}}catch(y){u=!0,c=y}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}}}},{},t)}(SVGGElement),u=i("g","bx-viewboxedithud",l);return{
get default(){return u}}}),System.registerModule("elements/bx-viewboxhud",[],function(){
"use strict";var t=System.get("utils/dom").registerElement,e='\n  <style>@import url("stylesheets/bx-viewboxhud.css");</style>\n  <rect id="outline" width="0" height="0" x="0" y="0"></rect>\n  <path id="overlay"></path>\n',n=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=e;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},enabledCallback:function(){var t=this;body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onContentMutation(e)})},disabledCallback:function(){body.canvas.removeEventListener("contentmutation",this._contentMutationListener);
},_onContentMutation:function(t){(t.target===body.canvas||t.target.parentElement===body.canvas)&&this._update();
},_update:function(){body.canvas.currentArtboard.hasAttribute("viewBox")?(this["#outline"].setAttribute("width",body.canvas.currentArtboard.viewBox.width),
this["#outline"].setAttribute("height",body.canvas.currentArtboard.viewBox.height),
this["#outline"].setAttribute("x",body.canvas.currentArtboard.viewBox.x),this["#outline"].setAttribute("y",body.canvas.currentArtboard.viewBox.y)):(this["#outline"].setAttribute("width",0),
this["#outline"].setAttribute("height",0),this["#outline"].setAttribute("x",-99999),
this["#outline"].setAttribute("y",-99999))}},{},t)}(SVGGElement),i=t("g","bx-viewboxhud",n);
return{get default(){return i}}}),System.registerModule("elements/bx-viewcontrols",[],function(){
"use strict";System.get("elements/bx-alignmentselect"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select"),System.get("elements/bx-slider"),System.get("elements/bx-switch"),
System.get("elements/bx-input");var t=System.get("utils/dom"),e=t.registerElement,n=t.unitTypeToString,i=System.get("utils/math").round,r={
1:"none",2:"xMinYMin",3:"xMidYMin",4:"xMaxYMin",5:"xMinYMid",6:"xMidYMid",7:"xMaxYMid",
8:"xMinYMax",9:"xMidYMax",10:"xMaxYMax"},a='\n<style>\n  @import url("stylesheets/controls.css");\n  @import url("stylesheets/bx-viewcontrols.css");\n</style>\n\n<main>\n  <section id="view-box-section">\n    <div class="row-div">\n      <h2>View box</h2>\n      <bx-switch id="view-box-switch"></bx-switch>\n    </div>\n\n    <div class="row-div">\n      <div id="view-box-x-div">\n        <h3 id="view-box-x-heading">X</h3>\n\n        <bx-slider\n          id="view-box-x-slider"\n          title="View box X"\n          value="0"\n          precision="0">\n        </bx-slider>\n      </div>\n\n      <div id="view-box-y-div">\n        <h3 id="view-box-y-heading">Y</h3>\n\n        <bx-slider\n          id="view-box-y-slider"\n          title="View box Y"\n          value="0"\n          precision="0">\n        </bx-slider>\n      </div>\n\n      <div id="view-box-width-div">\n        <h3 id="view-box-width-heading">↔</h3>\n\n        <bx-slider\n          id="view-box-width-slider"\n          title="View box Width"\n          value="0"\n          precision="0">\n        </bx-slider>\n      </div>\n\n      <div id="view-box-height-div">\n        <h3 id="view-box-height-heading">↕</h3>\n\n        <bx-slider\n          id="view-box-height-slider"\n          title="View box Height"\n          value="0"\n          precision="0">\n        </bx-slider>\n      </div>\n    </div>\n  </section>\n\n  <section id="aspect-ratio-section">\n    <div class="row-div">\n      <h2 id="preserve-aspect-ratio-heading">Preserve aspect ratio</h2>\n      <bx-switch id="preserve-aspect-ratio-switch"></bx-switch>\n    </div>\n\n    <h3 id="align-heading">Align</h3>\n    <div class="row-div">\n      <bx-alignmentselect id="align-select"></bx-alignmentselect>\n      <bx-checkbox label="Slice" id="slice-checkbox"></bx-checkbox>\n    </div>\n  </section>\n\n  <section id="viewport-section">\n    <h2>Viewport</h2>\n\n    <div id="viewport-width-div">\n      <div class="row-div">\n        <h3>Width</h2>\n        <bx-switch id="viewport-width-switch"></bx-switch>\n      </div>\n\n      <div class="row-div">\n        <bx-slider\n          id="viewport-width-slider"\n          title="Viewport Width"\n          value="0"\n          min="0"\n          precision="0">\n        </bx-slider>\n\n        <bx-select id="viewport-width-unit-select" value="px">\n          <bx-selectitem value="px"  label="px"></bx-selectitem>\n          <bx-selectitem value="cm"  label="cm"></bx-selectitem>\n          <bx-selectitem value="mm"  label="mm"></bx-selectitem>\n          <bx-selectitem value="in"  label="in"></bx-selectitem>\n          <bx-selectitem value="pt"  label="pt"></bx-selectitem>\n          <bx-selectitem value="pc"  label="pc"></bx-selectitem>\n          <bx-selectitem value="ems" label="ems"></bx-selectitem>\n          <bx-selectitem value="exs" label="exs"></bx-selectitem>\n          <bx-selectitem value="%"   label="%"></bx-selectitem>\n          <bx-selectitem value=""    label=" "></bx-selectitem>\n        </bx-select>\n      </div>\n    </div>\n\n    <div id="viewport-height-div">\n      <div class="row-div">\n        <h3>Height</h2>\n        <bx-switch id="viewport-height-switch"></bx-switch>\n      </div>\n\n      <div class="row-div">\n        <bx-slider\n          id="viewport-height-slider"\n          title="Viewport Height"\n          value="0"\n          min="0"\n          precision="0">\n        </bx-slider>\n\n        <bx-select id="viewport-height-unit-select" value="px">\n          <bx-selectitem value="px"  label="px"></bx-selectitem>\n          <bx-selectitem value="cm"  label="cm"></bx-selectitem>\n          <bx-selectitem value="mm"  label="mm"></bx-selectitem>\n          <bx-selectitem value="in"  label="in"></bx-selectitem>\n          <bx-selectitem value="pt"  label="pt"></bx-selectitem>\n          <bx-selectitem value="pc"  label="pc"></bx-selectitem>\n          <bx-selectitem value="ems" label="ems"></bx-selectitem>\n          <bx-selectitem value="exs" label="exs"></bx-selectitem>\n          <bx-selectitem value="%"   label="%"></bx-selectitem>\n          <bx-selectitem value=""    label=" "></bx-selectitem>\n        </bx-select>\n      </div>\n    </div>\n  </section>\n</main>\n',s=function(t){
function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{
createdCallback:function(){var t=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=a;var e=!0,n=!1,i=void 0;try{for(var r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){
var o=r.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{e||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this["#view-box-switch"].addEventListener("change",function(){
return t._onViewBoxSwitchChange()}),this["#view-box-x-slider"].addEventListener("changestart",function(){
return t._onViewBoxXSliderChangeStart()}),this["#view-box-y-slider"].addEventListener("changestart",function(){
return t._onViewBoxYSliderChangeStart()}),this["#view-box-width-slider"].addEventListener("changestart",function(){
return t._onViewBoxWidthSliderChangeStart()}),this["#view-box-height-slider"].addEventListener("changestart",function(){
return t._onViewBoxHeightSliderChangeStart()}),this["#viewport-width-switch"].addEventListener("change",function(){
return t._onViewportWidthSwitchChange()}),this["#viewport-width-slider"].addEventListener("changestart",function(){
return t._onViewportWidthSliderChangeStart()}),this["#viewport-width-unit-select"].addEventListener("change",function(){
return t._onViewportWidthUnitSelectChange()}),this["#viewport-height-switch"].addEventListener("change",function(){
return t._onViewportHeightSwitchChange()}),this["#viewport-height-slider"].addEventListener("changestart",function(){
return t._onViewportHeightSliderChangeStart()}),this["#viewport-height-unit-select"].addEventListener("change",function(){
return t._onViewportHeightUnitSelectChange()}),this["#preserve-aspect-ratio-switch"].addEventListener("change",function(){
return t._onPreserveAspectRatioSwitchChange()}),this["#slice-checkbox"].addEventListener("change",function(){
return t._onSliceCheckboxChange()}),this["#align-select"].addEventListener("change",function(){
return t._onAlignSelectChange()})},enabledCallback:function(){var t=this;this._isChangingSlider=!1,
this._update(),body.addEventListener("toolchange",this._toolChangeListener=function(){
t._toggleViewboxHud()}),body.canvas.addEventListener("contentmutation",this._contentMutationListener=function(e){
t._onCanvasContentMutation(e.detail)}),this._toggleViewboxHud()},disabledCallback:function(){
body.removeEventListener("toolchange",this._toolChangeListener),body.canvas.removeEventListener("contentmutation",this._contentMutationListener),
body.canvas.disableHud("viewbox-edit-hud")},_onCanvasContentMutation:function(t){
this._isChangingSlider||(t.target===body.canvas.content||t.target.parentNode===body.canvas.content)&&this._update();
},_onViewBoxSwitchChange:function(){body.canvas.undoManager.checkpoint("View box"),
this["#view-box-switch"].toggled===!0?this._lastViewBox?body.canvas.currentArtboard.setAttribute("viewBox",this._lastViewBox):body.canvas.currentArtboard.setAttribute("viewBox","0 0 500 500"):(this._lastViewBox=body.canvas.currentArtboard.getAttribute("viewBox"),
body.canvas.currentArtboard.removeAttribute("viewBox"))},_onViewBoxXSliderChangeStart:function(t){
var e,n,i=this,r=this["#view-box-x-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",e=function(){body.canvas.currentArtboard.viewBox.x=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",e),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewBoxYSliderChangeStart:function(t){
var e,n,i=this,r=this["#view-box-y-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",e=function(){body.canvas.currentArtboard.viewBox.y=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",e),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewBoxWidthSliderChangeStart:function(t){
var e,n,i=this,r=this["#view-box-width-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",e=function(){body.canvas.currentArtboard.viewBox.width=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",e),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewBoxHeightSliderChangeStart:function(t){
var e,n,i=this,r=this["#view-box-height-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",e=function(){body.canvas.currentArtboard.viewBox.height=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",e),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewportWidthSwitchChange:function(){
body.canvas.undoManager.checkpoint("Viewport width"),this["#viewport-width-switch"].toggled===!0?this._lastViewportWidth?body.canvas.currentArtboard.setAttribute("width",this._lastViewportWidth):body.canvas.currentArtboard.setAttribute("width","500px"):(this._lastViewportWidth=body.canvas.currentArtboard.getAttribute("width"),
body.canvas.currentArtboard.removeAttribute("width"))},_onViewportWidthSliderChangeStart:function(){
var t,e,n=this,i=this["#viewport-width-slider"],r=this["#viewport-width-unit-select"];
body.canvas.undoManager.checkpoint("Viewport width"),this._isChangingSlider=!0,i.addEventListener("change",t=function(){
body.canvas.currentArtboard.setAttribute("width",i.value+r.value)}),i.addEventListener("changeend",e=function(){
i.removeEventListener("change",t),i.removeEventListener("changeend",e),n._isChangingSlider=!1;
})},_onViewportWidthUnitSelectChange:function(){var t=this["#viewport-width-slider"],e=this["#viewport-width-unit-select"];
body.canvas.undoManager.checkpoint("Viewport width unit"),body.canvas.currentArtboard.setAttribute("width",t.value+e.value);
},_onViewportHeightSwitchChange:function(){body.canvas.undoManager.checkpoint("Viewport height"),
this["#viewport-height-switch"].toggled===!0?this._lastViewportHeight?body.canvas.currentArtboard.setAttribute("height",this._lastViewportHeight):body.canvas.currentArtboard.setAttribute("height","500px"):(this._lastViewportHeight=body.canvas.currentArtboard.getAttribute("height"),
body.canvas.currentArtboard.removeAttribute("height"))},_onViewportHeightSliderChangeStart:function(){
var t,e,n=this,i=this["#viewport-height-slider"],r=this["#viewport-height-unit-select"];
body.canvas.undoManager.checkpoint("Viewport height"),this._isChangingSlider=!0,i.addEventListener("change",t=function(){
body.canvas.currentArtboard.setAttribute("height",i.value+r.value)}),i.addEventListener("changeend",e=function(){
i.removeEventListener("change",t),i.removeEventListener("changeend",e),n._isChangingSlider=!1;
})},_onViewportHeightUnitSelectChange:function(){var t=this["#viewport-height-slider"],e=this["#viewport-height-unit-select"];
body.canvas.undoManager.checkpoint("Viewport height unit"),body.canvas.currentArtboard.setAttribute("height",t.value+e.value);
},_onPreserveAspectRatioSwitchChange:function(){body.canvas.undoManager.checkpoint("Preserve aspect ratio"),
this["#preserve-aspect-ratio-switch"].toggled?this._lastAspectRatio?body.canvas.currentArtboard.setAttribute("preserveAspectRatio",this._lastAspectRatio):body.canvas.currentArtboard.removeAttribute("preserveAspectRatio"):(this._lastAspectRatio=body.canvas.currentArtboard.getAttribute("preserveAspectRatio"),
body.canvas.currentArtboard.setAttribute("preserveAspectRatio","none"))},_onSliceCheckboxChange:function(){
if(body.canvas.undoManager.checkpoint("Slice"),"xMidYMid"===this["#align-select"].value&&this["#slice-checkbox"].checked===!1)body.canvas.currentArtboard.removeAttribute("preserveAspectRatio");else{
var t=this["#align-select"].value;"none"!==t&&this["#slice-checkbox"].checked&&(t+=" slice"),
body.canvas.currentArtboard.setAttribute("preserveAspectRatio",t)}},_onAlignSelectChange:function(){
if(body.canvas.undoManager.checkpoint("Align"),"xMidYMid"===this["#align-select"].value&&this["#slice-checkbox"].checked===!1)body.canvas.currentArtboard.removeAttribute("preserveAspectRatio");else{
var t=this["#align-select"].value;"none"!==t&&this["#slice-checkbox"].checked&&(t+=" slice"),
body.canvas.currentArtboard.setAttribute("preserveAspectRatio",t)}},_update:function(){
this._updateViewBoxSection(),this._updateViewportSection(),this._updateAspectRatioSection();
},_updateViewBoxSection:function(){body.canvas.currentArtboard.hasAttribute("viewBox")?(this["#view-box-switch"].toggled=!0,
this["#view-box-x-slider"].value=i(body.canvas.currentArtboard.viewBox.x,4),this["#view-box-x-slider"].disabled=!1,
this["#view-box-x-heading"].disabled=!1,this["#view-box-y-slider"].value=i(body.canvas.currentArtboard.viewBox.y,4),
this["#view-box-y-slider"].disabled=!1,this["#view-box-y-heading"].disabled=!1,this["#view-box-width-slider"].value=i(body.canvas.currentArtboard.viewBox.width,4),
this["#view-box-width-slider"].disabled=!1,this["#view-box-width-heading"].disabled=!1,
this["#view-box-height-slider"].value=i(body.canvas.currentArtboard.viewBox.height,4),
this["#view-box-height-slider"].disabled=!1,this["#view-box-height-heading"].disabled=!1):(this["#view-box-switch"].toggled=!1,
this["#view-box-x-slider"].value=0,this["#view-box-x-slider"].disabled=!0,this["#view-box-x-heading"].disabled=!0,
this["#view-box-y-slider"].value=0,this["#view-box-y-slider"].disabled=!0,this["#view-box-y-heading"].disabled=!0,
this["#view-box-width-slider"].value=0,this["#view-box-width-slider"].disabled=!0,
this["#view-box-width-heading"].disabled=!0,this["#view-box-height-slider"].value=0,
this["#view-box-height-slider"].disabled=!0,this["#view-box-height-heading"].disabled=!0);
},_updateViewportSection:function(){body.canvas.currentArtboard!==body.canvas.masterArtboard?this["#viewport-section"].disabled=!0:(this["#viewport-section"].disabled=!1,
body.canvas.currentArtboard.hasAttribute("width")===!1?(this["#viewport-width-slider"].disabled=!0,
this["#viewport-width-slider"].value=0,this["#viewport-width-switch"].toggled=!1,
this["#viewport-width-unit-select"].disabled=!0,this["#viewport-width-unit-select"].value="px"):(this["#viewport-width-slider"].disabled=!1,
this["#viewport-width-slider"].value=body.canvas.currentArtboard.width.valueInSpecifiedUnits,
this["#viewport-width-switch"].toggled=!0,this["#viewport-width-unit-select"].disabled=!1,
this["#viewport-width-unit-select"].value=n(body.canvas.currentArtboard.width.unitType)),
body.canvas.currentArtboard.hasAttribute("height")===!1?(this["#viewport-height-slider"].disabled=!0,
this["#viewport-height-slider"].value=0,this["#viewport-height-switch"].toggled=!1,
this["#viewport-height-unit-select"].disabled=!0,this["#viewport-height-unit-select"].value="px"):(this["#viewport-height-slider"].disabled=!1,
this["#viewport-height-slider"].value=body.canvas.currentArtboard.height.valueInSpecifiedUnits,
this["#viewport-height-switch"].toggled=!0,this["#viewport-height-unit-select"].disabled=!1,
this["#viewport-height-unit-select"].value=n(body.canvas.currentArtboard.height.unitType)));
},_updateAspectRatioSection:function(){body.canvas.currentArtboard.hasAttribute("viewBox")===!1?(this["#preserve-aspect-ratio-heading"].disabled=!0,
this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!0,
this["#slice-checkbox"].checked=!1,this["#slice-checkbox"].disabled=!0,this["#align-heading"].disabled=!0,
this["#align-select"].value=null,this["#align-select"].disabled=!0):"none"===r[body.canvas.currentArtboard.preserveAspectRatio.align]?(this["#preserve-aspect-ratio-heading"].disabled=!1,
this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!1,
this["#align-heading"].disabled=!0,this["#align-select"].value=null,this["#align-select"].disabled=!0,
this["#slice-checkbox"].checked=!1,this["#slice-checkbox"].disabled=!0):(this["#preserve-aspect-ratio-heading"].disabled=!1,
this["#preserve-aspect-ratio-switch"].toggled=!0,this["#preserve-aspect-ratio-switch"].disabled=!1,
this["#align-heading"].disabled=!1,this["#align-select"].value=r[body.canvas.currentArtboard.preserveAspectRatio.align],
this["#align-select"].disabled=!1,this["#slice-checkbox"].checked=2===body.canvas.currentArtboard.preserveAspectRatio.meetOrSlice,
this["#slice-checkbox"].disabled=!1)},_toggleViewboxHud:function(){"transform-tool"===body.currentTool.id||"edit-tool"===body.currentTool.id?body.canvas.enableHud("viewbox-edit-hud"):body.canvas.disableHud("viewbox-edit-hud");
}},{},t)}(HTMLElement),o=e("bx-viewcontrols",s);return{get default(){return o}}}),
System.registerModule("libs/pako",[],function(){"use strict";!function(t){if("object"==("undefined"==typeof exports?"undefined":$traceurRuntime["typeof"](exports)))module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{
var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),
e.pako=t()}}(function(){return function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){
var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);
throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){
var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);
return r}({1:[function(t,e,n){var i=t("./lib/zlib/utils").assign,r=t("./lib/deflate"),a=t("./lib/inflate"),s=t("./lib/zlib/constants"),o={};
i(o,r,a,s),e.exports=o},{"./lib/deflate":2,"./lib/inflate":3,"./lib/zlib/constants":5,
"./lib/zlib/utils":13}],2:[function(t,e,n){function i(t,e){var n=new b(e);if(n.push(t,!0),
n.err)throw n.msg;return n.result}function r(t,e){return e=e||{},e.raw=!0,i(t,e)}
function a(t,e){return e=e||{},e.gzip=!0,i(t,e)}var s=t("./zlib/deflate.js"),o=t("./zlib/utils"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=0,d=4,h=0,v=1,f=-1,m=0,g=8,b=function(t){
this.options=o.assign({level:f,method:g,chunkSize:16384,windowBits:15,memLevel:8,
strategy:m},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),
this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);
if(n!==h)throw new Error(l[n])};b.prototype.push=function(t,e){var n,i,r=this.strm,a=this.options.chunkSize;
if(this.ended)return!1;i=e===~~e?e:e===!0?d:c,r.next_in=t,r.next_in_index=0,r.avail_in=r.next_in.length,
r.next_out=new o.Buf8(a);do{if(r.avail_out=this.options.chunkSize,r.next_out_index=0,
n=s.deflate(r,i),n!==v&&n!==h)return this.onEnd(n),this.ended=!0,!1;r.next_out_index&&(this.onData(o.shrinkBuf(r.next_out,r.next_out_index)),
(r.avail_in>0||0===r.avail_out)&&(r.next_out=new o.Buf8(this.options.chunkSize)));
}while(r.avail_in>0||0===r.avail_out);return i===d?(n=s.deflateEnd(this.strm),this.onEnd(n),
this.ended=!0,n===h):!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){
t===h&&(this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg;
},n.Deflate=b,n.deflate=i,n.deflateRaw=r,n.gzip=a},{"./zlib/deflate.js":7,"./zlib/messages":11,
"./zlib/utils":13,"./zlib/zstream":14}],3:[function(t,e,n){function i(t,e){var n=new c(e);
if(n.push(t,!0),n.err)throw n.msg;return n.result}function r(t,e){return e=e||{},
e.raw=!0,i(t,e)}var a=t("./zlib/inflate.js"),s=t("./zlib/utils"),o=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=function(t){
this.options=s.assign({chunkSize:16384,windowBits:0},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,
0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),
e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,
this.msg="",this.ended=!1,this.chunks=[],this.strm=new u;var n=a.inflateInit2(this.strm,e.windowBits);
if(n!==o.Z_OK)throw new Error(l[n])};c.prototype.push=function(t,e){var n,i,r=this.strm,l=this.options.chunkSize;
if(this.ended)return!1;i=o.Z_NO_FLUSH,r.next_in=t,r.next_in_index=0,r.avail_in=r.next_in.length,
r.next_out=new s.Buf8(l);do{if(r.avail_out=this.options.chunkSize,r.next_out_index=0,
n=a.inflate(r,i),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,
!1;r.next_out_index&&(this.onData(s.shrinkBuf(r.next_out,r.next_out_index)),(r.avail_in>0||0===r.avail_out)&&(r.next_out=new s.Buf8(this.options.chunkSize)));
}while(r.avail_in>0||0===r.avail_out);return i=e===~~e?e:e===!0?o.Z_FINISH:o.Z_NO_FLUSH,
i===o.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):!0;
},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){
t===o.Z_OK&&(this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,
this.msg=this.strm.msg},n.Inflate=c,n.inflate=i,n.inflateRaw=r},{"./zlib/constants":5,
"./zlib/inflate.js":9,"./zlib/messages":11,"./zlib/utils":13,"./zlib/zstream":14}],
4:[function(t,e,n){function i(t,e,n,i){for(var r=65535&t|0,a=t>>>16&65535|0,s=0;0!==n;){
s=n>2e3?2e3:n,n-=s;do r=r+e[i++]|0,a=a+r|0;while(--s);r%=65521,a%=65521}return r|a<<16|0;
}e.exports=i},{}],5:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,
Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,
Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,
Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,
Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],
6:[function(t,e,n){function i(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;
e[n]=t}return e}function r(t,e,n,i){var r=a,s=i+n;t=-1^t;for(var o=i;s>o;o++)t=t>>>8^r[255&(t^e[o])];
return-1^t}var a=i();e.exports=r},{}],7:[function(t,e,n){function i(t,e){return t.msg=T[e],
e}function r(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e;)t[e]=0;
}function s(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(A.arraySet(t.next_out,e.pending_buf,e.pending_out,n,t.next_out_index),
t.next_out_index+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0));
}function o(t,e){L._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),
t.block_start=t.strstart,s(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function u(t,e){
t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,n,i){
var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,A.arraySet(e,t.next_in,t.next_in_index,r,n),
1===t.state.wrap?t.adler=M(t.adler,e,r,n):2===t.state.wrap&&(t.adler=j(t.adler,e,r,n)),
t.next_in_index+=r,t.total_in+=r,r)}function d(t,e){var n,i,r=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,u=t.window,c=t.w_mask,d=t.prev,h=t.strstart+ot,v=u[a+s-1],f=u[a+s];
t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(n=e,u[n+s]===f&&u[n+s-1]===v&&u[n]===u[a]&&u[++n]===u[a+1]){
a+=2,n++;do;while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&h>a);
if(i=ot-(h-a),a=h-ot,i>s){if(t.match_start=e,s=i,i>=o)break;v=u[a+s-1],f=u[a+s]}}while((e=d[e&c])>l&&0!==--r);
return s<=t.lookahead?s:t.lookahead}function h(t){var e,n,i,r,a,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,
t.strstart>=s+(s-lt)){A.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,
t.block_start-=s,n=t.hash_size,e=n;do i=t.head[--e],t.head[e]=i>=s?i-s:0;while(--n);
n=s,e=n;do i=t.prev[--e],t.prev[e]=i>=s?i-s:0;while(--n);r+=s}if(0===t.strm.avail_in)break;
if(n=c(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=st)for(a=t.strstart-t.insert,
t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+st-1])&t.hash_mask,
t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<st)););
}while(t.lookahead<lt&&0!==t.strm.avail_in)}function v(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){
if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===P)return bt;if(0===t.lookahead)break;
}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,
t.strstart=i,o(t,!1),0===t.strm.avail_out))return bt;if(t.strstart-t.block_start>=t.w_size-lt&&(o(t,!1),
0===t.strm.avail_out))return bt}return t.insert=0,e===I?(o(t,!0),0===t.strm.avail_out?yt:_t):t.strstart>t.block_start&&(o(t,!1),
0===t.strm.avail_out)?bt:bt}function f(t,e){for(var n,i;;){if(t.lookahead<lt){if(h(t),
t.lookahead<lt&&e===P)return bt;if(0===t.lookahead)break}if(n=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,
n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-lt&&(t.match_length=d(t,n)),
t.match_length>=st)if(i=L._tr_tally(t,t.strstart-t.match_start,t.match_length-st),
t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=st){t.match_length--;
do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,
n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);
t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],
t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=L._tr_tally(t,0,t.window[t.strstart]),
t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return bt}return t.insert=t.strstart<st-1?t.strstart:st-1,
e===I?(o(t,!0),0===t.strm.avail_out?yt:_t):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?bt:pt;
}function m(t,e){for(var n,i,r;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===P)return bt;
if(0===t.lookahead)break}if(n=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,
n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,
t.prev_match=t.match_start,t.match_length=st-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-lt&&(t.match_length=d(t,n),
t.match_length<=5&&(t.strategy===H||t.match_length===st&&t.strstart-t.match_start>4096)&&(t.match_length=st-1)),
t.prev_length>=st&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-st,i=L._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-st),
t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,
n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);
if(t.match_available=0,t.match_length=st-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return bt;
}else if(t.match_available){if(i=L._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),
t.strstart++,t.lookahead--,0===t.strm.avail_out)return bt}else t.match_available=1,
t.strstart++,t.lookahead--}return t.match_available&&(i=L._tr_tally(t,0,t.window[t.strstart-1]),
t.match_available=0),t.insert=t.strstart<st-1?t.strstart:st-1,e===I?(o(t,!0),0===t.strm.avail_out?yt:_t):t.last_lit&&(o(t,!1),
0===t.strm.avail_out)?bt:pt}function g(t,e){for(var n,i,r,a,s=t.window;;){if(t.lookahead<=ot){
if(h(t),t.lookahead<=ot&&e===P)return bt;if(0===t.lookahead)break}if(t.match_length=0,
t.lookahead>=st&&t.strstart>0&&(r=t.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){
a=t.strstart+ot;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&a>r);
t.match_length=ot-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}
if(t.match_length>=st?(n=L._tr_tally(t,1,t.match_length-st),t.lookahead-=t.match_length,
t.strstart+=t.match_length,t.match_length=0):(n=L._tr_tally(t,0,t.window[t.strstart]),
t.lookahead--,t.strstart++),n&&(o(t,!1),0===t.strm.avail_out))return bt}return t.insert=0,
e===I?(o(t,!0),0===t.strm.avail_out?yt:_t):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?bt:pt;
}function b(t,e){for(var n;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===P)return bt;
break}if(t.match_length=0,n=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,
n&&(o(t,!1),0===t.strm.avail_out))return bt}return t.insert=0,e===I?(o(t,!0),0===t.strm.avail_out?yt:_t):t.last_lit&&(o(t,!1),
0===t.strm.avail_out)?bt:pt}function p(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=k[t.level].max_lazy,
t.good_match=k[t.level].good_length,t.nice_match=k[t.level].nice_length,t.max_chain_length=k[t.level].max_chain,
t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=st-1,
t.match_available=0,t.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,
this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,
this.gzindex=0,this.method=W,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,
this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,
this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,
this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,
this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,
this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*rt),this.dyn_dtree=new A.Buf16(2*(2*nt+1)),
this.bl_tree=new A.Buf16(2*(2*it+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),
this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(at+1),
this.heap=new A.Buf16(2*et+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*et+1),
a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,
this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0,this.high_water=0;
}function _(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=X,e=t.state,
e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ct:mt,t.adler=2===e.wrap?0:1,
e.last_flush=P,L._tr_init(e),V):i(t,B)}function x(t){var e=_(t);return e===V&&p(t.state),
e}function w(t,e,n,r,a,s){if(!t)return i(t,B);var o=1;if(e===U&&(e=6),0>r?(o=0,r=-r):r>15&&(o=2,
r-=16),1>a||a>Z||n!==W||8>r||r>15||0>e||e>9||0>s||s>$)return i(t,B);8===r&&(r=9);var l=new y;
return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,
l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,
l.hash_shift=~~((l.hash_bits+st-1)/st),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),
l.prev=new A.Buf16(l.w_size),l.high_water=0,l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,
l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,
l.level=e,l.strategy=s,l.method=n,x(t)}function S(t,e){return w(t,e,W,K,J,Y)}function C(t,e){
var n,o;if(!t||!t.state||e>D||0>e)return i(t,B);if(o=t.state,!t.next_out||!t.next_in&&0!==t.avail_in||o.status===gt&&e!==I)return i(t,0===t.avail_out?G:B);
if(o.strm=t,n=o.last_flush,o.last_flush=e,o.status===ct)if(2===o.wrap){if(t.adler=0,
l(o,31),l(o,139),l(o,8),o.gzhead)throw new Error("Custom GZIP headers not supported");
l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=F||o.level<2?4:0),
l(o,xt),o.status=mt}else{var c=W+(o.w_bits-8<<4)<<8,d=-1;d=o.strategy>=F||o.level<2?0:o.level<6?1:6===o.level?2:3,
c|=d<<6,0!==o.strstart&&(c|=ut),c+=31-c%31,o.status=mt,u(o,c),0!==o.strstart&&(u(o,t.adler>>>16),
u(o,65535&t.adler)),t.adler=1}if(0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,
V}else if(0===t.avail_in&&r(e)<=r(n)&&e!==I)return i(t,G);if(o.status===gt&&0!==t.avail_in)return i(t,G);
if(0!==t.avail_in||0!==o.lookahead||e!==P&&o.status!==gt){var h=o.strategy===F?b(o,e):o.strategy===q?g(o,e):k[o.level].func(o,e);
if((h===yt||h===_t)&&(o.status=gt),h===bt||h===yt)return 0===t.avail_out&&(o.last_flush=-1),
V;if(h===pt&&(e===R?L._tr_align(o):e!==D&&(L._tr_stored_block(o,0,0,!1),e===O&&(a(o.head),
0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,
V}return e!==I?V:o.wrap<=0?N:(2===o.wrap?(l(o,255&t.adler),l(o,t.adler>>8&255),l(o,t.adler>>16&255),
l(o,t.adler>>24&255),l(o,255&t.total_in),l(o,t.total_in>>8&255),l(o,t.total_in>>16&255),
l(o,t.total_in>>24&255)):(u(o,t.adler>>>16),u(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),
0!==o.pending?V:N)}function E(t){var e=t.state.status;return e!==ct&&e!==dt&&e!==ht&&e!==vt&&e!==ft&&e!==mt&&e!==gt?i(t,B):(t.state=null,
e===mt?i(t,z):V)}var k,A=t("./utils"),L=t("./trees"),M=t("./adler32"),j=t("./crc32"),T=t("./messages"),P=0,R=1,O=3,I=4,D=5,V=0,N=1,B=-2,z=-3,G=-5,U=-1,H=1,F=2,q=3,$=4,Y=0,X=2,W=8,Z=9,K=15,J=8,Q=29,tt=256,et=tt+1+Q,nt=30,it=19,rt=2*et+1,at=15,st=3,ot=258,lt=ot+st+1,ut=32,ct=42,dt=69,ht=73,vt=91,ft=103,mt=113,gt=666,bt=1,pt=2,yt=3,_t=4,xt=3,wt=function(t,e,n,i,r){
this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r;
};k=[new wt(0,0,0,0,v),new wt(4,4,8,4,f),new wt(4,5,16,8,f),new wt(4,6,32,32,f),new wt(4,4,16,16,m),new wt(8,16,32,32,m),new wt(8,16,128,128,m),new wt(8,32,128,256,m),new wt(32,128,258,1024,m),new wt(32,258,258,4096,m)],
n.deflateInit=S,n.deflateInit2=w,n.deflateReset=x,n.deflate=C,n.deflateEnd=E,n.deflateInfo="pako deflate (from Nodeca project)";
},{"./adler32":4,"./crc32":6,"./messages":11,"./trees":12,"./utils":13}],8:[function(t,e,n){
var i=30,r=12;e.exports=function(t,e){var n,a,s,o,l,u,c,d,h,v,f,m,g,b,p,y,_,x,w,S,C,E,k,A,L;
n=t.state,a=t.next_in_index,A=t.next_in,s=a+(t.avail_in-5),o=t.next_out_index,L=t.next_out,
l=o-(e-t.avail_out),u=o+(t.avail_out-257),c=n.dmax,d=n.wsize,h=n.whave,v=n.wnext,
f=n.window,m=n.hold,g=n.bits,b=n.lencode,p=n.distcode,y=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;
t:do{15>g&&(m+=A[a++]<<g,g+=8,m+=A[a++]<<g,g+=8),x=b[m&y];e:for(;;){if(w=x>>>24,m>>>=w,
g-=w,w=x>>>16&255,0===w)L[o++]=65535&x;else{if(!(16&w)){if(0===(64&w)){x=b[(65535&x)+(m&(1<<w)-1)];
continue e}if(32&w){n.mode=r;break t}t.msg="invalid literal/length code",n.mode=i;
break t}S=65535&x,w&=15,w&&(w>g&&(m+=A[a++]<<g,g+=8),S+=m&(1<<w)-1,m>>>=w,g-=w),15>g&&(m+=A[a++]<<g,
g+=8,m+=A[a++]<<g,g+=8),x=p[m&_];n:for(;;){if(w=x>>>24,m>>>=w,g-=w,w=x>>>16&255,!(16&w)){
if(0===(64&w)){x=p[(65535&x)+(m&(1<<w)-1)];continue n}t.msg="invalid distance code",
n.mode=i;break t}if(C=65535&x,w&=15,w>g&&(m+=A[a++]<<g,g+=8,w>g&&(m+=A[a++]<<g,g+=8)),
C+=m&(1<<w)-1,C>c){t.msg="invalid distance too far back",n.mode=i;break t}if(m>>>=w,
g-=w,w=o-l,C>w){if(w=C-w,w>h&&n.sane){t.msg="invalid distance too far back",n.mode=i;
break t}if(E=0,k=f,0===v){if(E+=d-w,S>w){S-=w;do L[o++]=f[E++];while(--w);E=o-C,k=L;
}}else if(w>v){if(E+=d+v-w,w-=v,S>w){S-=w;do L[o++]=f[E++];while(--w);if(E=0,S>v){
w=v,S-=w;do L[o++]=f[E++];while(--w);E=o-C,k=L}}}else if(E+=v-w,S>w){S-=w;do L[o++]=f[E++];while(--w);
E=o-C,k=L}for(;S>2;)L[o++]=k[E++],L[o++]=k[E++],L[o++]=k[E++],S-=3;S&&(L[o++]=k[E++],
S>1&&(L[o++]=k[E++]))}else{E=o-C;do L[o++]=L[E++],L[o++]=L[E++],L[o++]=L[E++],S-=3;while(S>2);
S&&(L[o++]=L[E++],S>1&&(L[o++]=L[E++]))}break}}break}}while(s>a&&u>o);S=g>>3,a-=S,
g-=S<<3,m&=(1<<g)-1,t.next_in_index=a,t.next_out_index=o,t.avail_in=s>a?5+(s-a):5-(a-s),
t.avail_out=u>o?257+(u-o):257-(o-u),n.hold=m,n.bits=g}},{}],9:[function(t,e,n){function i(t){
return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,
this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,
this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,
this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,
this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,
this.have=0,this.next=null,this.next_index=0,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),
this.codes=new p.Buf32(bt),this.sane=0,this.back=0,this.was=0}function a(t,e,n,i,r,a,s,o){
this.type=t,this.lens=e,this.lens_index=n,this.codes=i,this.table=r,this.table_index=a,
this.bits=s,this.work=o}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,
e.wrap&&(t.adler=1&e.wrap),e.mode=V,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,
e.hold=0,e.bits=0,e.lencode=new p.Buf32(bt),e.distcode=new p.Buf32(bt),e.sane=1,e.back=-1,
M):P}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,
s(t)):P}function l(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=(e>>4)+1,
48>e&&(e&=15)),e&&(8>e||e>15)?P:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,
i.wbits=e,o(t))):P}function u(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,
n=l(t,e),n!==M&&(t.state=null),n):P}function c(t){return u(t,yt)}function d(t,e,n){
var i;return t&&t.state?(i=t.state,0>e?(i.hold=0,i.bits=0,M):e>16||i.bits+e>32?P:(n&=(1<<e)-1,
i.hold+=n<<i.bits,i.bits+=e,M)):P}function h(t){if(_t){var e,n;for(g=new p.Buf32(512),
b=new p.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;
for(;288>e;)t.lens[e++]=8;for(n=9,w(new a(C,t.lens,0,288,g,0,n,t.work)),e=0;32>e;)t.lens[e++]=5;
n=5,w(new a(E,t.lens,0,32,b,0,n,t.work)),_t=!1}t.lencode=g,t.lenbits=9,t.distcode=b,
t.distbits=5}function v(t,e,n,i){var r,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,
a.wnext=0,a.whave=0,a.window=new p.Buf8(a.wsize)),i>=a.wsize?(p.arraySet(a.window,e,n-a.wsize,a.wsize,0),
a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),p.arraySet(a.window,e,n-i,r,a.wnext),
i-=r,i?(p.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),
a.whave<a.wsize&&(a.whave+=r))),0}function f(t,e){var n,r,s,o,l,u,c,d,f,m,g,b,mt,gt,bt,pt,yt,_t,xt,wt,St,Ct,Et,kt,At=0,Lt=new p.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];
n=t.state,n.mode===X&&(n.mode=W),l=t.next_out_index,s=t.next_out,c=t.avail_out,o=t.next_in_index,
r=t.next_in,u=t.avail_in,d=n.hold,f=n.bits,m=u,g=c,Ct=M;t:for(;;)switch(n.mode){case V:
if(0===n.wrap){n.mode=W;break}for(;16>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}
if(2&n.wrap&&35615===d){n.check=0,Lt[0]=255&d,Lt[1]=d>>>8&255,n.check=_(n.check,Lt,2,0),
d=0,f=0,n.mode=N;break}if(n.flags=0,n.head&&(n.head.done=-1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){
t.msg="incorrect header check",n.mode=ht;break}if((15&d)!==D){t.msg="unknown compression method",
n.mode=ht;break}if(d>>>=4,f-=4,St=(15&d)+8,0===n.wbits)n.wbits=St;else if(St>n.wbits){
t.msg="invalid window size",n.mode=ht;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&d?$:X,
d=0,f=0;break;case N:for(;16>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if(n.flags=d,
(255&n.flags)!==D){t.msg="unknown compression method",n.mode=ht;break}if(57344&n.flags){
t.msg="unknown header flags set",n.mode=ht;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Lt[0]=255&d,
Lt[1]=d>>>8&255,n.check=_(n.check,Lt,2,0)),d=0,f=0,n.mode=B;case B:for(;32>f;){if(0===u)break t;
u--,d+=r[o++]<<f,f+=8}n.head&&(n.head.time=d),512&n.flags&&(Lt[0]=255&d,Lt[1]=d>>>8&255,
Lt[2]=d>>>16&255,Lt[3]=d>>>24&255,n.check=_(n.check,Lt,4,0)),d=0,f=0,n.mode=z;case z:
for(;16>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),
512&n.flags&&(Lt[0]=255&d,Lt[1]=d>>>8&255,n.check=_(n.check,Lt,2,0)),d=0,f=0,n.mode=G;
case G:if(1024&n.flags){for(;16>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}n.length=d,
n.head&&(n.head.extra_len=d),512&n.flags&&(Lt[0]=255&d,Lt[1]=d>>>8&255,n.check=_(n.check,Lt,2,0)),
d=0,f=0}else n.head&&(n.head.extra=null);n.mode=U;case U:if(1024&n.flags){if(b=n.length,
b>u&&(b=u),b){if(n.head&&n.head.extra)throw St=n.head.extra_len-n.length,"Review & implement right";
512&n.flags&&(n.check=_(n.check,r,b,o)),u-=b,o+=b,n.length-=b}if(n.length)break t;
}n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===u)break t;b=0;do St=r[o+b++],
n.head&&n.head.name&&n.length<n.head.name_max&&(n.head.name[n.length++]=St);while(St&&u>b);
if(512&n.flags&&(n.check=_(n.check,r,b,o)),u-=b,o+=b,St)break t}else n.head&&(n.head.name=null);
n.length=0,n.mode=F;case F:if(4096&n.flags){if(0===u)break t;b=0;do St=r[o+b++],n.head&&n.head.comment&&n.length<n.head.comm_max&&(n.head.comment[n.length++]=St);while(St&&u>b);
if(512&n.flags&&(n.check=_(n.check,r,b,o)),u-=b,o+=b,St)break t}else n.head&&(n.head.comment=null);
n.mode=q;case q:if(512&n.flags){for(;16>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8;
}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ht;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,
n.head.done=1),t.adler=n.check=0,n.mode=X;break;case $:for(;32>f;){if(0===u)break t;
u--,d+=r[o++]<<f,f+=8}t.adler=n.check=i(d),d=0,f=0,n.mode=Y;case Y:if(0===n.havedict)return t.next_out_index=l,
t.avail_out=c,t.next_in_index=o,t.avail_in=u,n.hold=d,n.bits=f,T;t.adler=n.check=1,
n.mode=X;case X:if(e===A||e===L)break t;case W:if(n.last){d>>>=7&f,f-=7&f,n.mode=ut;
break}for(;3>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}switch(n.last=1&d,d>>>=1,
f-=1,3&d){case 0:n.mode=Z;break;case 1:if(h(n),n.mode=nt,e===L){d>>>=2,f-=2;break t;
}break;case 2:n.mode=Q;break;case 3:t.msg="invalid block type",n.mode=ht}d>>>=2,f-=2;
break;case Z:for(d>>>=7&f,f-=7&f;32>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){
t.msg="invalid stored block lengths",n.mode=ht;break}if(n.length=65535&d,d=0,f=0,
n.mode=K,e===L)break t;case K:n.mode=J;case J:if(b=n.length){if(b>u&&(b=u),b>c&&(b=c),
0===b)break t;p.arraySet(s,r,o,b,l),u-=b,o+=b,c-=b,l+=b,n.length-=b;break}n.mode=X;
break;case Q:for(;14>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if(n.nlen=(31&d)+257,
d>>>=5,f-=5,n.ndist=(31&d)+1,d>>>=5,f-=5,n.ncode=(15&d)+4,d>>>=4,f-=4,n.nlen>286||n.ndist>30){
t.msg="too many length or distance symbols",n.mode=ht;break}n.have=0,n.mode=tt;case tt:
for(;n.have<n.ncode;){for(;3>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}n.lens[Mt[n.have++]]=7&d,
d>>>=3,f-=3}for(;n.have<19;)n.lens[Mt[n.have++]]=0;if(p.arraySet(n.lencode,n.codes,0,n.codes.length,0),
n.lenbits=7,Et=new a(S,n.lens,0,19,n.lencode,0,n.lenbits,n.work),Ct=w(Et),n.lenbits=Et.bits,
Ct){t.msg="invalid code lengths set",n.mode=ht;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){
for(;At=n.lencode[d&(1<<n.lenbits)-1],bt=At>>>24,pt=At>>>16&255,yt=65535&At,!(f>=bt);){
if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if(16>yt)d>>>=bt,f-=bt,n.lens[n.have++]=yt;else{
if(16===yt){for(kt=bt+2;kt>f;){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if(d>>>=bt,
f-=bt,0===n.have){t.msg="invalid bit length repeat",n.mode=ht;break}St=n.lens[n.have-1],
b=3+(3&d),d>>>=2,f-=2}else if(17===yt){for(kt=bt+3;kt>f;){if(0===u)break t;u--,d+=r[o++]<<f,
f+=8}d>>>=bt,f-=bt,St=0,b=3+(7&d),d>>>=3,f-=3}else{for(kt=bt+7;kt>f;){if(0===u)break t;
u--,d+=r[o++]<<f,f+=8}d>>>=bt,f-=bt,St=0,b=11+(127&d),d>>>=7,f-=7}if(n.have+b>n.nlen+n.ndist){
t.msg="invalid bit length repeat",n.mode=ht;break}for(;b--;)n.lens[n.have++]=St}}
if(n.mode===ht)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",
n.mode=ht;break}if(p.arraySet(n.lencode,n.codes,0,n.codes.length,0),n.lenbits=9,Et=new a(C,n.lens,0,n.nlen,n.lencode,0,n.lenbits,n.work),
Ct=w(Et),n.lenbits=Et.bits,Ct){t.msg="invalid literal/lengths set",n.mode=ht;break;
}if(n.distbits=6,p.arraySet(n.distcode,n.codes,0,n.codes.length,0),Et=new a(E,n.lens,n.nlen,n.ndist,n.distcode,0,n.distbits,n.work),
Ct=w(Et),n.distbits=Et.bits,Ct){t.msg="invalid distances set",n.mode=ht;break}if(n.mode=nt,
e===L)break t;case nt:n.mode=it;case it:if(u>=6&&c>=258){t.next_out_index=l,t.avail_out=c,
t.next_in_index=o,t.avail_in=u,n.hold=d,n.bits=f,x(t,g),l=t.next_out_index,s=t.next_out,
c=t.avail_out,o=t.next_in_index,r=t.next_in,u=t.avail_in,d=n.hold,f=n.bits,n.mode===X&&(n.back=-1);
break}for(n.back=0;At=n.lencode[d&(1<<n.lenbits)-1],bt=At>>>24,pt=At>>>16&255,yt=65535&At,
!(f>=bt);){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if(pt&&0===(240&pt)){for(_t=bt,
xt=pt,wt=yt;At=n.lencode[wt+((d&(1<<_t+xt)-1)>>_t)],bt=At>>>24,pt=At>>>16&255,yt=65535&At,
!(f>=_t+bt);){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}d>>>=_t,f-=_t,n.back+=_t}if(d>>>=bt,
f-=bt,n.back+=bt,n.length=yt,0===pt){n.mode=lt;break}if(32&pt){n.back=-1,n.mode=X;
break}if(64&pt){t.msg="invalid literal/length code",n.mode=ht;break}n.extra=15&pt,
n.mode=rt;case rt:if(n.extra){for(kt=n.extra;kt>f;){if(0===u)break t;u--,d+=r[o++]<<f,
f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,
n.mode=at;case at:for(;At=n.distcode[d&(1<<n.distbits)-1],bt=At>>>24,pt=At>>>16&255,
yt=65535&At,!(f>=bt);){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}if(0===(240&pt)){for(_t=bt,
xt=pt,wt=yt;At=n.distcode[wt+((d&(1<<_t+xt)-1)>>_t)],bt=At>>>24,pt=At>>>16&255,yt=65535&At,
!(f>=_t+bt);){if(0===u)break t;u--,d+=r[o++]<<f,f+=8}d>>>=_t,f-=_t,n.back+=_t}if(d>>>=bt,
f-=bt,n.back+=bt,64&pt){t.msg="invalid distance code",n.mode=ht;break}n.offset=yt,
n.extra=15&pt,n.mode=st;case st:if(n.extra){for(kt=n.extra;kt>f;){if(0===u)break t;
u--,d+=r[o++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra;
}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ht;break}n.mode=ot;
case ot:if(0===c)break t;if(b=g-c,n.offset>b){if(b=n.offset-b,b>n.whave&&n.sane){
t.msg="invalid distance too far back",n.mode=ht;break}b>n.wnext?(b-=n.wnext,mt=n.wsize-b):mt=n.wnext-b,
b>n.length&&(b=n.length),gt=n.window}else gt=s,mt=l-n.offset,b=n.length;b>c&&(b=c),
c-=b,n.length-=b;do s[l++]=gt[mt++];while(--b);0===n.length&&(n.mode=it);break;case lt:
if(0===c)break t;s[l++]=n.length,c--,n.mode=it;break;case ut:if(n.wrap){for(;32>f;){
if(0===u)break t;u--,d|=r[o++]<<f,f+=8}if(g-=c,t.total_out+=g,n.total+=g,g&&(t.adler=n.check=n.flags?_(n.check,s,g,l-g):y(n.check,s,g,l-g)),
g=c,(n.flags?d:i(d))!==n.check){t.msg="incorrect data check",n.mode=ht;break}d=0,
f=0}n.mode=ct;case ct:if(n.wrap&&n.flags){for(;32>f;){if(0===u)break t;u--,d+=r[o++]<<f,
f+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ht;break}
d=0,f=0}n.mode=dt;case dt:Ct=j;break t;case ht:Ct=R;break t;case vt:return O;case ft:
default:return P}return t.next_out_index=l,t.avail_out=c,t.next_in_index=o,t.avail_in=u,
n.hold=d,n.bits=f,(n.wsize||g!==t.avail_out&&n.mode<ht&&(n.mode<ut||e!==k))&&v(t,t.next_out,t.next_out_index,g-t.avail_out)?(n.mode=vt,
O):(m-=t.avail_in,g-=t.avail_out,t.total_in+=m,t.total_out+=g,n.total+=g,n.wrap&&g&&(t.adler=n.check=n.flags?_(n.check,s,g,t.next_out_index-g):y(n.check,s,g,t.next_out_index-g)),
t.data_type=n.bits+(n.last?64:0)+(n.mode===X?128:0)+(n.mode===nt||n.mode===K?256:0),
(0===m&&0===g||e===k)&&Ct===M&&(Ct=I),Ct)}function m(t){var e=t.state;return e.window&&(e.window=null),
t.state=null,M}var g,b,p=t("./utils"),y=t("./adler32"),_=t("./crc32"),x=t("./inffast"),w=t("./inftrees"),S=0,C=1,E=2,k=4,A=5,L=6,M=0,j=1,T=2,P=-2,R=-3,O=-4,I=-5,D=8,V=1,N=2,B=3,z=4,G=5,U=6,H=7,F=8,q=9,$=10,Y=11,X=12,W=13,Z=14,K=15,J=16,Q=17,tt=18,et=19,nt=20,it=21,rt=22,at=23,st=24,ot=25,lt=26,ut=27,ct=28,dt=29,ht=30,vt=31,ft=32,mt=852,gt=592,bt=mt+gt,pt=15,yt=pt,_t=!0;
n.inflateReset=o,n.inflateReset2=l,n.inflateResetKeep=s,n.inflateInit=c,n.inflateInit2=u,
n.inflatePrime=d,n.inflate=f,n.inflateEnd=m,n.inflateInfo="pako inflate (from Nodeca project)";
},{"./adler32":4,"./crc32":6,"./inffast":8,"./inftrees":10,"./utils":13}],10:[function(t,e,n){
var i=t("./utils"),r=15,a=852,s=592,o=0,l=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];
e.exports=function(t){var e,n,f,m,g,b,p,y,_,x=t.type,w=t.lens,S=t.codes,C=t.table,E=t.bits,k=t.work,A=0,L=0,M=0,j=0,T=0,P=0,R=0,O=0,I=0,D=0,V=null,N=0,B=new i.Buf16(r+1),z=new i.Buf16(r+1),G=null,U=0;
for(A=0;r>=A;A++)B[A]=0;for(L=0;S>L;L++)B[w[t.lens_index+L]]++;for(T=E,j=r;j>=1&&0===B[j];j--);
if(T>j&&(T=j),0===j)return C[t.table_index++]=20971520,C[t.table_index++]=20971520,
t.bits=1,0;for(M=1;j>M&&0===B[M];M++);for(M>T&&(T=M),O=1,A=1;r>=A;A++)if(O<<=1,O-=B[A],
0>O)return-1;if(O>0&&(x===o||1!==j))return-1;for(z[1]=0,A=1;r>A;A++)z[A+1]=z[A]+B[A];
for(L=0;S>L;L++)0!==w[t.lens_index+L]&&(k[z[w[t.lens_index+L]]++]=L);switch(x){case o:
V=G=k,b=19;break;case l:V=c,N-=257,G=d,U-=257,b=256;break;default:V=h,G=v,b=-1}if(D=0,
L=0,A=M,g=t.table_index,P=T,R=0,f=-1,I=1<<T,m=I-1,x===l&&I>a||x===u&&I>s)return 1;
for(var H=0;;){H++,p=A-R,k[L]<b?(y=0,_=k[L]):k[L]>b?(y=G[U+k[L]],_=V[N+k[L]]):(y=96,
_=0),e=1<<A-R,n=1<<P,M=n;do n-=e,C[g+(D>>R)+n]=p<<24|y<<16|_|0;while(0!==n);for(e=1<<A-1;D&e;)e>>=1;
if(0!==e?(D&=e-1,D+=e):D=0,L++,0===--B[A]){if(A===j)break;A=w[t.lens_index+k[L]]}
if(A>T&&(D&m)!==f){for(0===R&&(R=T),g+=M,P=A-R,O=1<<P;j>P+R&&(O-=B[P+R],!(0>=O));)P++,
O<<=1;if(I+=1<<P,x===l&&I>a||x===u&&I>s)return 1;f=D&m,C[f]=T<<24|P<<16|g-t.table_index;
}}return 0!==D&&(C[g+D]=A-R<<24|64<<16|0),t.table_index+=I,t.bits=T,0}},{"./utils":13
}],11:[function(t,e,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error",
"-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error",
"-6":"incompatible version"}},{}],12:[function(t,e,n){function i(t){for(var e=t.length;--e;)t[e]=0;
}function r(t){return 256>t?st[t]:st[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,
t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,n){t.bi_valid>Y-n?(t.bi_buf|=e<<t.bi_valid&65535,
a(t,t.bi_buf),t.bi_buf=e>>Y-t.bi_valid,t.bi_valid+=n-Y):(t.bi_buf|=e<<t.bi_valid&65535,
t.bi_valid+=n)}function o(t,e,n){s(t,n[2*e],n[2*e+1])}function l(t,e){var n=0;do n|=1&t,
t>>>=1,n<<=1;while(--e>0);return n>>>1}function u(t){16===t.bi_valid?(a(t,t.bi_buf),
t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,
t.bi_buf>>=8,t.bi_valid-=8)}function c(t,e){var n,i,r,a,s,o,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,v=e.stat_desc.extra_base,f=e.stat_desc.max_length,m=0;
for(a=0;$>=a;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;q>n;n++)i=t.heap[n],
a=l[2*l[2*i+1]+1]+1,a>f&&(a=f,m++),l[2*i+1]=a,i>u||(t.bl_count[a]++,s=0,i>=v&&(s=h[i-v]),
o=l[2*i],t.opt_len+=o*(a+s),d&&(t.static_len+=o*(c[2*i+1]+s)));if(0!==m){do{for(a=f-1;0===t.bl_count[a];)a--;
t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[f]--,m-=2}while(m>0);for(a=f;0!==a;a--)for(i=t.bl_count[a];0!==i;)r=t.heap[--n],
r>u||(l[2*r+1]!==a&&(t.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}}function d(t,e,n){
var i,r,a=new Array($+1),s=0;for(i=1;$>=i;i++)a[i]=s=s+n[i-1]<<1;for(r=0;e>=r;r++){
var o=t[2*r+1];0!==o&&(t[2*r]=l(a[o]++,o))}}function h(){var t,e,n,i,r,a=new Array($+1);
for(n=0,i=0;z-1>i;i++)for(lt[i]=n,t=0;t<1<<Q[i];t++)ot[n++]=i;for(ot[n-1]=i,r=0,i=0;16>i;i++)for(ut[i]=r,
t=0;t<1<<tt[i];t++)st[r++]=i;for(r>>=7;H>i;i++)for(ut[i]=r<<7,t=0;t<1<<tt[i]-7;t++)st[256+r++]=i;
for(e=0;$>=e;e++)a[e]=0;for(t=0;143>=t;)rt[2*t+1]=8,t++,a[8]++;for(;255>=t;)rt[2*t+1]=9,
t++,a[9]++;for(;279>=t;)rt[2*t+1]=7,t++,a[7]++;for(;287>=t;)rt[2*t+1]=8,t++,a[8]++;
for(d(rt,U+1,a),t=0;H>t;t++)at[2*t+1]=5,at[2*t]=l(t,5);ct=new vt(rt,Q,G+1,U,$),dt=new vt(at,tt,0,H,$),
ht=new vt(new Array(0),et,0,F,X)}function v(t){var e;for(e=0;U>e;e++)t.dyn_ltree[2*e]=0;
for(e=0;H>e;e++)t.dyn_dtree[2*e]=0;for(e=0;F>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*W]=1,
t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function f(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),
t.bi_buf=0,t.bi_valid=0}function m(t,e,n,i){f(t),i&&(a(t,n),a(t,~n)),j.arraySet(t.pending_buf,t.window,e,n,t.pending),
t.pending+=n}function g(t,e,n,i){var r=2*e,a=2*n;return t[r]<t[a]||t[r]===t[a]&&i[e]<=i[n];
}function b(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&g(e,t.heap[r+1],t.heap[r],t.depth)&&r++,
!g(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function p(t,e,n){
var i,a,l,u,c=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],
a=t.pending_buf[t.l_buf+c],c++,0===i?o(t,a,e):(l=ot[a],o(t,l+G+1,e),u=Q[l],0!==u&&(a-=lt[l],
s(t,a,u)),i--,l=r(i),o(t,l,n),u=tt[l],0!==u&&(i-=ut[l],s(t,i,u)));while(c<t.last_lit);
o(t,W,e)}function y(t,e){var n,i,r,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;
for(t.heap_len=0,t.heap_max=q,n=0;l>n;n++)0!==a[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):a[2*n+1]=0;
for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>u?++u:0,a[2*r]=1,t.depth[r]=0,t.opt_len--,
o&&(t.static_len-=s[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)b(t,a,n);r=l;
do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],b(t,a,1),i=t.heap[1],t.heap[--t.heap_max]=n,
t.heap[--t.heap_max]=i,a[2*r]=a[2*n]+a[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,
a[2*n+1]=a[2*i+1]=r,t.heap[1]=r++,b(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],
c(t,e),d(a,u,t.bl_count)}function _(t,e,n){var i,r,a=-1,s=e[1],o=0,l=7,u=4;for(0===s&&(l=138,
u=3),e[2*(n+1)+1]=65535,i=0;n>=i;i++)r=s,s=e[2*(i+1)+1],++o<l&&r===s||(u>o?t.bl_tree[2*r]+=o:0!==r?(r!==a&&t.bl_tree[2*r]++,
t.bl_tree[2*Z]++):10>=o?t.bl_tree[2*K]++:t.bl_tree[2*J]++,o=0,a=r,0===s?(l=138,u=3):r===s?(l=6,
u=3):(l=7,u=4))}function x(t,e,n){var i,r,a=-1,l=e[1],u=0,c=7,d=4;for(0===l&&(c=138,
d=3),i=0;n>=i;i++)if(r=l,l=e[2*(i+1)+1],!(++u<c&&r===l)){if(d>u){do o(t,r,t.bl_tree);while(0!==--u);
}else 0!==r?(r!==a&&(o(t,r,t.bl_tree),u--),o(t,Z,t.bl_tree),s(t,u-3,2)):10>=u?(o(t,K,t.bl_tree),
s(t,u-3,3)):(o(t,J,t.bl_tree),s(t,u-11,7));u=0,a=r,0===l?(c=138,d=3):r===l?(c=6,d=3):(c=7,
d=4)}}function w(t){var e;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),
y(t,t.bl_desc),e=F-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,
e}function S(t,e,n,i){var r;for(s(t,e-257,5),s(t,n-1,5),s(t,i-4,4),r=0;i>r;r++)s(t,t.bl_tree[2*nt[r]+1],3);
x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,n-1)}function C(t){var e,n=4093624447;for(e=0;31>=e;e++,
n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return P;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return R;
for(e=32;G>e;e++)if(0!==t.dyn_ltree[2*e])return R;return P}function E(t){mt||(h(),
mt=!0),t.l_desc=new ft(t.dyn_ltree,ct),t.d_desc=new ft(t.dyn_dtree,dt),t.bl_desc=new ft(t.bl_tree,ht),
t.bi_buf=0,t.bi_valid=0,v(t)}function k(t,e,n,i){s(t,(I<<1)+(i?1:0),3),m(t,e,n,!0);
}function A(t){s(t,D<<1,3),o(t,W,rt),u(t)}function L(t,e,n,i){var r,a,o=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=C(t)),
y(t,t.l_desc),y(t,t.d_desc),o=w(t),r=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,r>=a&&(r=a)):r=a=n+5,
r>=n+4&&-1!==e?k(t,e,n,i):t.strategy===T||a===r?(s(t,(D<<1)+(i?1:0),3),p(t,rt,at)):(s(t,(V<<1)+(i?1:0),3),
S(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),p(t,t.dyn_ltree,t.dyn_dtree)),v(t),
i&&f(t)}function M(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,
t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,
e--,t.dyn_ltree[2*(ot[n]+G+1)]++,t.dyn_dtree[2*r(e)]++),t.last_lit===t.lit_bufsize-1;
}var j=t("./utils"),T=4,P=0,R=1,O=2,I=0,D=1,V=2,N=3,B=258,z=29,G=256,U=G+1+z,H=30,F=19,q=2*U+1,$=15,Y=16,X=7,W=256,Z=16,K=17,J=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=512,rt=new Array(2*(U+2));
i(rt);var at=new Array(2*H);i(at);var st=new Array(it);i(st);var ot=new Array(B-N+1);
i(ot);var lt=new Array(z);i(lt);var ut=new Array(H);i(ut);var ct,dt,ht,vt=function(t,e,n,i,r){
this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,
this.has_stree=t&&t.length},ft=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e;
},mt=!1;n._tr_init=E,n._tr_stored_block=k,n._tr_flush_block=L,n._tr_tally=M,n._tr_align=A;
},{"./utils":13}],13:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;
n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){
var n=e.shift();if(n){if("object"!==$traceurRuntime["typeof"](n))throw new TypeError(n+"must be non-object");
for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){
return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){
if(e.subarray)return void t.set(e.subarray(n,n+i),r);for(var a=0;i>a;a++)t[r+a]=e[n+a];
},flattenChunks:function(t){var e,n,i,r,a,s;for(i=0,e=0,n=t.length;n>e;e++)i+=t[e].length;
for(s=new Uint8Array(i),r=0,e=0,n=t.length;n>e;e++)a=t[e],s.set(a,r),r+=a.length;return s;
}},a={arraySet:function(t,e,n,i,r){for(var a=0;i>a;a++)t[r+a]=e[n+a]},flattenChunks:function(t){
return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,
n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a));
},n.setTyped(i)},{}],14:[function(t,e,n){function i(){this.next_in=null,this.next_in_index=0,
this.avail_in=0,this.total_in=0,this.next_out=null,this.next_out_index=0,this.avail_out=0,
this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i;
},{}]},{},[1])(1)});var t=window.pako;return{get default(){return t}}}),System.registerModule("libs/paper",[],function(){
"use strict";var t=new function(e){var n=new function(){function t(t,e,i,r,s){function o(a,o){
o=o||(o=u(e,a))&&(o.get?o:o.value),"string"==typeof o&&"#"===o[0]&&(o=t[o.substring(1)]||o);
var c,h="function"==typeof o,v=o,f=s||h&&!o.base?o&&o.get?a in t:t[a]:null;s&&f||(h&&f&&(o.base=f),
h&&r!==!1&&(c=a.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),
v&&!h&&v.get&&"function"==typeof v.get&&n.isPlainObject(v)||(v={value:v,writable:!0
}),(u(t,a)||{configurable:!0}).configurable&&(v.configurable=!0,v.enumerable=i),d(t,a,v));
}var l={};if(e){for(var c in e)e.hasOwnProperty(c)&&!a.test(c)&&o(c);for(var c in l){
var h=l[c],v=t["set"+h],f=t["get"+h]||v&&t["is"+h];!f||r!==!0&&0!==f.length||o(c,{
get:f,set:v})}}return t}function i(t,e,n){return t&&("length"in t&&!t.getLength&&"number"==typeof t.length?s:o).call(t,e,n=n||t),
n}function r(t,e,n){for(var i in e)!e.hasOwnProperty(i)||n&&n[i]||(t[i]=e[i]);return t;
}var a=/^(statics|enumerable|beans|preserve)$/,s=[].forEach||function(t,e){for(var n=0,i=this.length;i>n;n++)t.call(e,this[n],n,this);
},o=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this);
},l=Object.create||function(t){return{__proto__:t}},u=Object.getOwnPropertyDescriptor||function(t,e){
var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),
enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,
writable:!0}:null},c=Object.defineProperty||function(t,e,n){return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),
n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t},d=function(t,e,n){return delete t[e],
c(t,e,n)};return t(function(){for(var t=0,e=arguments.length;e>t;t++)r(this,arguments[t]);
},{inject:function(e){if(e){var n=e.statics===!0?e:e.statics,i=e.beans,r=e.preserve;
n!==e&&t(this.prototype,e,e.enumerable,i,r),t(this,n,!0,i,r)}for(var a=1,s=arguments.length;s>a;a++)this.inject(arguments[a]);
return this},extend:function(){for(var e,n,i=this,r=0,a=arguments.length;a>r&&!(e=arguments[r].initialize);r++);
return e=e||function(){i.apply(this,arguments)},n=e.prototype=l(this.prototype),d(n,"constructor",{
value:e,writable:!0,configurable:!0}),t(e,this,!0),arguments.length&&this.inject.apply(e,arguments),
e.base=i,e}},!0).inject({inject:function(){for(var e=0,n=arguments.length;n>e;e++){
var i=arguments[e];i&&t(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){
var t=l(this);return t.inject.apply(t,arguments)},each:function(t,e){return i(this,t,e);
},set:function(t){return r(this,t)},clone:function(){return new this.constructor(this);
},statics:{each:i,create:l,define:d,describe:u,set:r,clone:function(t){return r(new t.constructor,t);
},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===n||"Object"===e.name);
},pick:function(t,n){return t!==e?t:n}}})};"undefined"!=typeof module&&(module.exports=n),
n.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+n.each(this,function(t,e){
if(!/^_/.test(e)){var n="undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t);
this.push(e+": "+("number"===n?s.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }";
},getClassName:function(){return this._class||""},exportJSON:function(t){return n.exportJSON(this,t);
},toJSON:function(){return n.serialize(this)},_set:function(t,i,r){if(t&&(r||n.isPlainObject(t))){
for(var a=Object.keys(t._filtering||t),s=0,o=a.length;o>s;s++){var l=a[s];if(!i||!i[l]){
var u=t[l];u!==e&&(this[l]=u)}}return!0}},statics:{exports:{enumerable:!0},extend:function nt(){
var t=nt.base.apply(this,arguments),e=t.prototype._class;return e&&!n.exports[e]&&(n.exports[e]=t),
t},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);
if(t&&e&&"object"===("undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t))&&"object"===("undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e))){
if(Array.isArray(t)&&Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(!n.equals(t[i],e[i]))return!1;
}else{var r=Object.keys(t),i=r.length;if(i!==Object.keys(e).length)return!1;for(;i--;){
var a=r[i];if(!e.hasOwnProperty(a)||!n.equals(t[a],e[a]))return!1}}return!0}return!1;
},read:function(t,i,r,a){if(this===n){var s=this.peek(t,i);return t.__index++,s}var o=this.prototype,l=o._readIndex,u=i||l&&t.__index||0;
a||(a=t.length-u);var c=t[u];return c instanceof this||r&&r.readNull&&null==c&&1>=a?(l&&(t.__index=u+1),
c&&r&&r.clone?c.clone():c):(c=n.create(this.prototype),l&&(c.__read=!0),c=c.initialize.apply(c,u>0||a<t.length?Array.prototype.slice.call(t,u,u+a):t)||c,
l&&(t.__index=u+c.__read,c.__read=e),c)},peek:function(t,e){return t[t.__index=e||t.__index||0];
},remain:function(t){return t.length-(t.__index||0)},readAll:function(t,e,n){for(var i,r=[],a=e||0,s=t.length;s>a;a++)r.push(Array.isArray(i=t[a])?this.read(i,0,n):this.read(t,a,n,1));
return r},readNamed:function(t,i,r,a,s){var o=this.getNamed(t,i),l=o!==e;if(l){var u=t._filtered;
u||(u=t._filtered=n.create(t[0]),u._filtering=t[0]),u[i]=e}return this.read(l?[o]:t,r,a,s);
},getNamed:function(t,i){var r=t[0];return t._hasObject===e&&(t._hasObject=1===t.length&&n.isPlainObject(r)),
t._hasObject?i?r[i]:t._filtered||r:void 0},hasNamed:function(t,e){return!!this.getNamed(t,e);
},isPlainValue:function(t,e){return this.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t;
},serialize:function(t,e,i,r){e=e||{};var a,o=!r;if(o&&(e.formatter=new s(e.precision),
r={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];
if(!i){this.length++;var r=e.call(t),a=t._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,
i=this.references[n]=[n]}return i}}),t&&t._serialize){a=t._serialize(e,r);var l=t._class;
!l||i||a._compact||a[0]===l||a.unshift(l)}else if(Array.isArray(t)){a=[];for(var u=0,c=t.length;c>u;u++)a[u]=n.serialize(t[u],e,i,r);
i&&(a._compact=!0)}else if(n.isPlainObject(t)){a={};for(var d=Object.keys(t),u=0,c=d.length;c>u;u++){
var h=d[u];a[h]=n.serialize(t[h],e,i,r)}}else a="number"==typeof t?e.formatter.number(t,e.precision):t;
return o&&r.length>0?[["dictionary",r.definitions],a]:a},deserialize:function(t,e,i,r){
var a=t,s=!i;if(i=i||{},Array.isArray(t)){var o=t[0],l="dictionary"===o;if(1==t.length&&/^#/.test(o))return i.dictionary[o];
o=n.exports[o],a=[],r&&(i.dictionary=a);for(var u=o?1:0,c=t.length;c>u;u++)a.push(n.deserialize(t[u],e,i,l));
if(o){var d=a;e?a=e(o,d):(a=n.create(o.prototype),o.apply(a,d))}}else if(n.isPlainObject(t)){
a={},r&&(i.dictionary=a);for(var h in t)a[h]=n.deserialize(t[h],e,i)}return s&&t&&t.length&&"dictionary"===t[0][0]?a[1]:a;
},exportJSON:function(t,e){var i=n.serialize(t,e);return e&&e.asString===!1?i:JSON.stringify(i);
},importJSON:function(t,e){return n.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i){
var r=e&&e.constructor===t?e:n.create(t.prototype),a=r===e;if(1===i.length&&r instanceof y&&(a||!(r instanceof x))){
var s=i[0];n.isPlainObject(s)&&(s.insert=!1)}return t.apply(r,i),a&&(e=null),r})},
splice:function(t,n,i,r){var a=n&&n.length,s=i===e;i=s?t.length:i,i>t.length&&(i=t.length);
for(var o=0;a>o;o++)n[o]._index=i+o;if(s)return t.push.apply(t,n),[];var l=[i,r];n&&l.push.apply(l,n);
for(var u=t.splice.apply(t,l),o=0,c=u.length;c>o;o++)u[o]._index=e;for(var o=i+a,c=t.length;c>o;o++)t[o]._index=o;
return u},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase();
})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase();
})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();
}}});var i={on:function(t,e){if("string"!=typeof t)n.each(t,function(t,e){this.on(e,t);
},this);else{var i=this._eventTypes,r=i&&i[t],a=this._callbacks=this._callbacks||{};
a=a[t]=a[t]||[],-1===a.indexOf(e)&&(a.push(e),r&&r.install&&1==a.length&&r.install.call(this,t));
}return this},off:function(t,e){if("string"!=typeof t)return void n.each(t,function(t,e){
this.off(e,t)},this);var i,r=this._eventTypes,a=r&&r[t],s=this._callbacks&&this._callbacks[t];
return s&&(!e||-1!==(i=s.indexOf(e))&&1===s.length?(a&&a.uninstall&&a.uninstall.call(this,t),
delete this._callbacks[t]):-1!==i&&s.splice(i,1)),this},once:function(t,e){return this.on(t,function(){
e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];
if(!n)return!1;var i=[].slice.call(arguments,1);n=n.slice();for(var r=0,a=n.length;a>r;r++)if(n[r].apply(this,i)===!1){
e&&e.stop&&e.stop();break}return!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t]);
},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._callbacks,n=t?"install":"uninstall";
for(var i in e)if(e[i].length>0){var r=this._eventTypes,a=r&&r[i],s=a&&a[n];s&&s.call(this,i);
}},statics:{inject:function it(t){var e=t._events;if(e){var i={};n.each(e,function(e,r){
var a="string"==typeof e,s=a?e:r,o=n.capitalize(s),l=s.substring(2).toLowerCase();
i[l]=a?{}:e,s="_"+s,t["get"+o]=function(){return this[s]},t["set"+o]=function(t){
var e=this[s];e&&this.off(l,e),t&&this.on(l,t),this[s]=t}}),t._eventTypes=i}return it.base.apply(this,arguments);
}}},r=n.extend({_class:"PaperScope",initialize:function rt(){t=this,this.settings=new n({
applyMatrix:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],
this.palettes=[],this._id=rt._id++,rt._scopes[this._id]=this;var e=rt.prototype;if(!this.support){
var i=J.getContext(1,1);e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:Q.nativeModes
},J.release(i)}if(!this.browser){var r=navigator.userAgent.toLowerCase(),a=(/(win)/.exec(r)||/(mac)/.exec(r)||/(linux)/.exec(r)||[])[0],s=e.browser={
platform:a};a&&(s[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:([.\d]+))?/g,function(t,e,n,i,r){
if(!s.chrome){var a="opera"===e?i:n;"trident"===e&&(a=r,e="msie"),s.version=a,s.versionNumber=parseFloat(a),
s.name=e,s[e]=!0}}),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.9.24",
getView:function(){return this.project&&this.project.getView()},getPaper:function(){
return this},execute:function(e,n,i){t.PaperScript.execute(e,this,n,i),H.updateFocus();
},install:function(t){var e=this;n.each(["project","view","tool"],function(i){n.define(t,i,{
configurable:!0,get:function(){return e[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i]);
},setup:function(e){return t=this,this.project=new b(e),this},activate:function(){
t=this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();
for(var t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(var t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove();
},remove:function(){this.clear(),delete r._scopes[this._id]},statics:new function(){
function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n);
}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),
hasAttribute:t("has")}}}),a=n.extend(i,{initialize:function(e){this._scope=t,this._index=this._scope[this._list].push(this)-1,
(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;
var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,
this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this;
},remove:function(){return null==this._index?!1:(n.splice(this._scope[this._list],null,this._index,1),
this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,
!0)}}),s=n.extend({initialize:function(t){this.precision=t||5,this.multiplier=Math.pow(10,this.precision);
},number:function(t){return Math.round(t*this.multiplier)/this.multiplier},pair:function(t,e,n){
return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y);
},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},
rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});s.instance=new s;
var o=new function(){function t(t,e,n){return e>t?e:t>n?n:t}var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],n=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,a=Math.pow,s=1e-12,l=1.12e-16;
return{TOLERANCE:1e-6,EPSILON:s,MACHINE_EPSILON:l,CURVETIME_EPSILON:1e-6,GEOMETRIC_EPSILON:1e-6,
TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-s&&s>=t;
},integrate:function(t,i,r,a){for(var s=e[a-2],o=n[a-2],l=.5*(r-i),u=l+i,c=0,d=a+1>>1,h=1&a?o[c++]*t(u):0;d>c;){
var v=l*s[c];h+=o[c++]*(t(u+v)+t(u-v))}return l*h},findRoot:function(t,e,n,r,a,s,o){
for(var l=0;s>l;l++){var u=t(n),c=u/e(n),d=n-c;if(i(c)<o)return d;u>0?(a=n,n=r>=d?.5*(r+a):d):(r=n,
n=d>=a?.5*(r+a):d)}return n},solveQuadratic:function(e,n,o,u,c,d){var h,v,f=0,m=c-s,g=d+s,b=1/0,p=n;
if(n/=-2,v=n*n-e*o,0!==v&&i(v)<l){var y=a(i(e*n*o),1/3);if(1e-8>y){var _=a(10,i(Math.floor(Math.log(y)*Math.LOG10E)));
isFinite(_)||(_=0),e*=_,n*=_,o*=_,v=n*n-e*o}}if(i(e)<s){if(i(p)<s)return i(o)<s?-1:0;
h=-o/p}else if(v>=-l){var x=0>v?0:r(v),w=n+(0>n?-x:x);0===w?(h=o/e,b=-h):(h=w/e,b=o/w);
}return isFinite(h)&&(null==c||h>m&&g>h)&&(u[f++]=null==c?h:t(h,c,d)),b!==h&&isFinite(b)&&(null==c||b>m&&g>b)&&(u[f++]=null==c?b:t(b,c,d)),
f},solveCubic:function(e,n,u,c,d,h,v){var f,m,g,b=0;if(i(e)<s)e=n,m=u,g=c,f=1/0;else if(i(c)<s)m=n,
g=u,f=0;else{var p,y,_,x,w,S,C,E=1+l;if(f=-(n/e)/3,C=e*f,m=C+n,g=m*f+u,_=(C+m)*f+g,
y=g*f+c,x=y/e,w=a(i(x),1/3),S=0>x?-1:1,x=-_/e,w=x>0?1.3247179572*Math.max(w,r(x)):w,
p=f-S*w,p!==f){do if(f=p,C=e*f,m=C+n,g=m*f+u,_=(C+m)*f+g,y=g*f+c,p=0===_?f:f-y/_/E,
p===f){f=p;break}while(S*p>S*f);i(e)*f*f>i(c/f)&&(g=-c/f,m=(g-u)/f)}}var b=o.solveQuadratic(e,m,g,d,h,v);
return isFinite(f)&&(0===b||f!==d[b-1])&&(null==h||f>h-s&&v+s>f)&&(d[b++]=null==h?f:t(f,h,v)),
b}}},l={_id:1,_pools:{},get:function(t){if(t){var e=t._class,n=this._pools[e];return n||(n=this._pools[e]={
_id:1}),n._id++}return this._id++}},u=n.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){
var n="undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t);if("number"===n){
var i="number"==typeof e;this.x=t,this.y=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.x=this.y=0,
this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,
this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,
this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1));
},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1;
},clone:function(){return new u(this.x,this.y)},toString:function(){var t=s.instance;
return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){
var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){
return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){
var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();
o.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI;
},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",
setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=u.read(arguments),e=this.getLength()*t.getLength();
if(o.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(-1>n?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x);
},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();
this.set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3;
}},{beans:!1,getDirectedAngle:function(){var t=u.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI;
},getDistance:function(){var t=u.read(arguments),e=t.x-this.x,i=t.y-this.y,r=e*e+i*i,a=n.read(arguments);
return a?r:Math.sqrt(r)},normalize:function(t){t===e&&(t=1);var n=this.getLength(),i=0!==n?t/n:0,r=new u(this.x*i,this.y*i);
return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();
t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new u(n.x*r-n.y*i,n.x*i+n.y*r),
e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){
var t=u.read(arguments);return new u(this.x+t.x,this.y+t.y)},subtract:function(){
var t=u.read(arguments);return new u(this.x-t.x,this.y-t.y)},multiply:function(){
var t=u.read(arguments);return new u(this.x*t.x,this.y*t.y)},divide:function(){var t=u.read(arguments);
return new u(this.x/t.x,this.y/t.y)},modulo:function(){var t=u.read(arguments);return new u(this.x%t.x,this.y%t.y);
},negate:function(){return new u(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this);
},isClose:function(){var t=u.read(arguments),e=n.read(arguments);return this.getDistance(t)<e;
},isCollinear:function(){var t=u.read(arguments);return u.isCollinear(this.x,this.y,t.x,t.y);
},isColinear:"#isCollinear",isOrthogonal:function(){var t=u.read(arguments);return u.isOrthogonal(this.x,this.y,t.x,t.y);
},isZero:function(){return o.isZero(this.x)&&o.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y);
},dot:function(){var t=u.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){
var t=u.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=u.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);
return new u(t.x*e,t.y*e)},statics:{min:function(){var t=u.read(arguments),e=u.read(arguments);
return new u(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=u.read(arguments),e=u.read(arguments);
return new u(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new u(Math.random(),Math.random());
},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i));
},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i));
}}},n.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){
return new u(e(this.x),e(this.y))}},{})),c=u.extend({initialize:function(t,e,n,i){
this._x=t,this._y=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._x=t,
this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x;
},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y;
},setY:function(t){this._y=t,this._owner[this._setter](this)}}),d=n.extend({_class:"Size",
_readIndex:!0,initialize:function(t,e){var n="undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t);
if("number"===n){var i="number"==typeof e;this.width=t,this.height=i?e:t,this.__read&&(this.__read=i?2:1);
}else"undefined"===n||null===t?(this.width=this.height=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],
this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,
this.height=t.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1));
},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1;
},clone:function(){return new d(this.width,this.height)},toString:function(){var t=s.instance;
return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){
var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){
var t=d.read(arguments);return new d(this.width+t.width,this.height+t.height)},subtract:function(){
var t=d.read(arguments);return new d(this.width-t.width,this.height-t.height)},multiply:function(){
var t=d.read(arguments);return new d(this.width*t.width,this.height*t.height)},divide:function(){
var t=d.read(arguments);return new d(this.width/t.width,this.height/t.height)},modulo:function(){
var t=d.read(arguments);return new d(this.width%t.width,this.height%t.height)},negate:function(){
return new d(-this.width,-this.height)},isZero:function(){return o.isZero(this.width)&&o.isZero(this.height);
},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){
return new d(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){
return new d(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){
return new d(Math.random(),Math.random())}}},n.each(["round","ceil","floor","abs"],function(t){
var e=Math[t];this[t]=function(){return new d(e(this.width),e(this.height))}},{})),h=d.extend({
initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i;
},set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),
this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,
this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){
this._height=t,this._owner[this._setter](this)}}),v=n.extend({_class:"Rectangle",
_readIndex:!0,beans:!0,initialize:function(t,i,r,a){var s="undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t),o=0;
if("number"===s?(this.x=t,this.y=i,this.width=r,this.height=a,o=4):"undefined"===s||null===t?(this.x=this.y=this.width=this.height=0,
o=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],
this.width=t[2],this.height=t[3],o=1):t.x!==e||t.width!==e?(this.x=t.x||0,this.y=t.y||0,
this.width=t.width||0,this.height=t.height||0,o=1):t.from===e&&t.to===e&&(this.x=this.y=this.width=this.height=0,
this._set(t),o=1)),!o){var l=u.readNamed(arguments,"from"),c=n.peek(arguments);if(this.x=l.x,
this.y=l.y,c&&c.x!==e||n.hasNamed(arguments,"to")){var h=u.readNamed(arguments,"to");
this.width=h.x-l.x,this.height=h.y-l.y,this.width<0&&(this.x=h.x,this.width=-this.width),
this.height<0&&(this.y=h.y,this.height=-this.height)}else{var v=d.read(arguments);
this.width=v.width,this.height=v.height}o=arguments.__index}this.__read&&(this.__read=o);
},set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},
clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(t){
var e=n.isPlainValue(t)?v.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1;
},toString:function(){var t=s.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }";
},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)];
},getPoint:function(t){var e=t?u:c;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){
var t=u.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?d:h;return new e(this.width,this.height,this,"setSize");
},setSize:function(){var t=d.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),
this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,
this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){
this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y;
},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){
return this.x+this.width},setRight:function(t){this._fixX!==e&&1!==this._fixX&&(this._fixW=0),
this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){
return this.y+this.height},setBottom:function(t){this._fixY!==e&&1!==this._fixY&&(this._fixH=0),
this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){
return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5;
},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,
this._fixY=.5},getCenter:function(t){var e=t?u:c;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter");
},setCenter:function(){var t=u.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),
this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height;
},contains:function(t){return t&&t.width!==e||4==(Array.isArray(t)?t:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(u.read(arguments));
},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height;
},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height;
},intersects:function(){var t=v.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height;
},touches:function(){var t=v.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height;
},intersect:function(){var t=v.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);
return new v(e,n,i-e,r-n)},unite:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);
return new v(e,n,i-e,r-n)},include:function(){var t=u.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);
return new v(e,n,i-e,r-n)},expand:function(){var t=d.read(arguments),e=t.width,n=t.height;
return new v(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,n){
return this.expand(this.width*t-this.width,this.height*(n===e?t:n)-this.height)}},n.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){
var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],a=t[i?1:0],s="get"+r,o="get"+a,l="set"+r,d="set"+a,h="get"+n,v="set"+n;
this[h]=function(t){var e=t?u:c;return new e(this[s](),this[o](),this,v)},this[v]=function(){
var t=u.read(arguments);this[l](t.x),this[d](t.y)}},{beans:!0})),f=v.extend({initialize:function(t,e,n,i,r,a){
this.set(t,e,n,i,!0),this._owner=r,this._setter=a},set:function(t,e,n,i,r){return this._x=t,
this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){
var t=v.prototype;return n.each(["x","y","width","height"],function(t){var e=n.capitalize(t),i="_"+t;
this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this);
}},n.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){
var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,
this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected;
},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0));
}}))}),m=n.extend({_class:"Matrix",initialize:function at(t){var e=arguments.length,n=!0;
if(6===e?this.set.apply(this,arguments):1===e?t instanceof at?this.set(t._a,t._c,t._b,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):n=!1:0===e?this.reset():n=!1,
!n)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,i,r,a,s){
return this._a=t,this._c=e,this._b=n,this._d=i,this._tx=r,this._ty=a,s||this._changed(),
this},_serialize:function(t){return n.serialize(this.getValues(),t)},_changed:function(){
var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){
return new m(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){
return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty||!1;
},toString:function(){var t=s.instance;return"[["+[t.number(this._a),t.number(this._b),t.number(this._tx)].join(", ")+"], ["+[t.number(this._c),t.number(this._d),t.number(this._ty)].join(", ")+"]]";
},reset:function(t){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,
t||this._changed(),this},apply:function(t,e){var i=this._owner;return i?(i.transform(null,!0,n.pick(t,!0),e),
this.isIdentity()):!1},translate:function(){var t=u.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._b,
this._ty+=e*this._c+n*this._d,this._changed(),this},scale:function(){var t=u.read(arguments),e=u.read(arguments,0,{
readNull:!0});return e&&this.translate(e),this._a*=t.x,this._c*=t.x,this._b*=t.y,
this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){
t*=Math.PI/180;var e=u.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),a=Math.sin(t),s=n-n*r+i*a,o=i-n*a-i*r,l=this._a,c=this._b,d=this._c,h=this._d;
return this._a=r*l+a*c,this._b=-a*l+r*c,this._c=r*d+a*h,this._d=-a*d+r*h,this._tx+=s*l+o*c,
this._ty+=s*d+o*h,this._changed(),this},shear:function(){var t=u.read(arguments),e=u.read(arguments,0,{
readNull:!0});e&&this.translate(e);var n=this._a,i=this._c;return this._a+=t.y*this._b,
this._c+=t.y*this._d,this._b+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),
this._changed(),this},skew:function(){var t=u.read(arguments),e=u.read(arguments,0,{
readNull:!0}),n=Math.PI/180,i=new u(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e);
},concatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,a=t._a,s=t._b,o=t._c,l=t._d,u=t._tx,c=t._ty;
return this._a=a*e+o*n,this._b=s*e+l*n,this._c=a*i+o*r,this._d=s*i+l*r,this._tx+=u*e+c*n,
this._ty+=u*i+c*r,this._changed(),this},preConcatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,a=this._tx,s=this._ty,o=t._a,l=t._b,u=t._c,c=t._d,d=t._tx,h=t._ty;
return this._a=o*e+l*i,this._b=o*n+l*r,this._c=u*e+c*i,this._d=u*n+c*r,this._tx=o*a+l*s+d,
this._ty=u*a+c*s+h,this._changed(),this},chain:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,a=this._tx,s=this._ty,o=t._a,l=t._b,u=t._c,c=t._d,d=t._tx,h=t._ty;
return new m(o*e+u*n,o*i+u*r,l*e+c*n,l*i+c*r,a+d*e+h*n,s+d*i+h*r)},isIdentity:function(){
return 1===this._a&&0===this._c&&0===this._b&&1===this._d&&0===this._tx&&0===this._ty;
},orNullIfIdentity:function(){return this.isIdentity()?null:this},isInvertible:function(){
return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant();
},transform:function(t,e,n){return arguments.length<3?this._transformPoint(u.read(arguments)):this._transformCoordinates(t,e,n);
},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new u),e.set(i*this._a+r*this._b+this._tx,i*this._c+r*this._d+this._ty,n);
},_transformCoordinates:function(t,e,n){for(var i=0,r=0,a=2*n;a>i;){var s=t[i++],o=t[i++];
e[r++]=s*this._a+o*this._b+this._tx,e[r++]=s*this._c+o*this._d+this._ty}return e},
_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=[e,n,i,n,i,r,e,r];
return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),s=2;8>s;s++){
var o=i[s],l=1&s;o<r[l]?r[l]=o:o>a[l]&&(a[l]=o)}return e||(e=new v),e.set(r[0],r[1],a[0]-r[0],a[1]-r[1],n);
},inverseTransform:function(){return this._inverseTransform(u.read(arguments))},_getDeterminant:function(){
var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!o.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null;
},_inverseTransform:function(t,e,n){var i=this._getDeterminant();if(!i)return null;
var r=t.x-this._tx,a=t.y-this._ty;return e||(e=new u),e.set((r*this._d-a*this._b)/i,(a*this._a-r*this._c)/i,n);
},decompose:function(){var t=this._a,e=this._b,n=this._c,i=this._d;if(o.isZero(t*i-e*n))return null;
var r=Math.sqrt(t*t+e*e);t/=r,e/=r;var a=t*n+e*i;n-=t*a,i-=e*a;var s=Math.sqrt(n*n+i*i);
return n/=s,i/=s,a/=s,e*n>t*i&&(t=-t,e=-e,a=-a,r=-r),{scaling:new u(r,s),rotation:180*-Math.atan2(e,t)/Math.PI,
shearing:a}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty];
},getTranslation:function(){return new u(this._tx,this._ty)},getScaling:function(){
return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation;
},inverted:function(){var t=this._getDeterminant();return t&&new m(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t);
},shiftless:function(){return new m(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){
t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},n.each(["a","c","b","d","tx","ty"],function(t){
var e=n.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){
this[i]=t,this._changed()}},{})),g=n.extend({_class:"Line",initialize:function(t,e,n,i,r){
var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,a=r):(this._px=t.x,
this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py);
},getPoint:function(){return new u(this._px,this._py)},getVector:function(){return new u(this._vx,this._vy);
},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){
return g.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e);
},getSide:function(t){return g.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0);
},getDistance:function(t){return Math.abs(g.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0));
},isCollinear:function(t){return u.isCollinear(this._vx,this._vy,t._vx,t._yy)},isOrthogonal:function(t){
return u.isOrthogonal(this._vx,this._vy,t._vx,t._yy)},statics:{intersect:function(t,e,n,i,r,a,s,l,c,d){
c||(n-=t,i-=e,s-=r,l-=a);var h=n*l-i*s;if(!o.isZero(h)){var v=t-r,f=e-a,m=(s*f-l*v)/h,g=(n*f-i*v)/h,b=1e-12,p=-b,y=1+b;
if(d||m>p&&y>m&&g>p&&y>g)return d||(m=0>=m?0:m>=1?1:m),new u(t+m*n,e+m*i)}},getSide:function(t,e,n,i,r,a,s){
s||(n-=t,i-=e);var o=r-t,l=a-e,u=o*i-l*n;return 0===u&&(u=o*n+l*i,u>0&&(u=(o-n)*n+(l-i)*i,
0>u&&(u=0))),0>u?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,a,s){return s||(n-=t,
i-=e),0==n?i>=0?t-r:r-t:0==i?n>=0?a-e:e-a:(n*(a-e)-i*(r-t))/Math.sqrt(n*n+i*i)}}}),b=a.extend({
_class:"Project",_list:"projects",_reference:"project",initialize:function(t){a.call(this,!0),
this.layers=[],this._activeLayer=null,this.symbols=[],this._currentStyle=new z(null,null,this),
this._view=H.create(this,t||J.getCanvas(1,1)),this._selectedItems={},this._selectedItemCount=0,
this._updateVersion=0},_serialize:function(t,e){return n.serialize(this.layers,t,!0,e);
},clear:function(){for(var t=this.layers.length-1;t>=0;t--)this.layers[t].remove();
this.symbols=[]},isEmpty:function(){return 0===this.layers.length},remove:function st(){
return st.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){
return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){
this._currentStyle.initialize(t)},getIndex:function(){return this._index},getOptions:function(){
return this._scope.settings},getActiveLayer:function(){return this._activeLayer||new x({
project:this})},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){
var n=this._selectedItems[e];n.isInserted()&&t.push(n)}return t},insertChild:function(t,e,i){
return e instanceof x?(e._remove(!1,!0),n.splice(this.layers,[e],t,0),e._setProject(this,!0),
this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)):e instanceof y?(this._activeLayer||this.insertChild(t,new x(y.NO_INSERT))).insertChild(t,e,i):e=null,
e},addChild:function(t,n){return this.insertChild(e,t,n)},_updateSelection:function(t){
var e=t._id,n=this._selectedItems;t._selected?n[e]!==t&&(this._selectedItemCount++,
n[e]=t):n[e]===t&&(this._selectedItemCount--,delete n[e])},selectAll:function(){for(var t=this.layers,e=0,n=t.length;n>e;e++)t[e].setFullySelected(!0);
},deselectAll:function(){var t=this._selectedItems;for(var e in t)t[e].setFullySelected(!1);
},hitTest:function(){for(var t=u.read(arguments),e=E.getOptions(n.read(arguments)),i=this.layers.length-1;i>=0;i--){
var r=this.layers[i]._hitTest(t,e);if(r)return r}return null},getItems:function(t){
return y._getItems(this.layers,t)},getItem:function(t){return y._getItems(this.layers,t,null,null,!0)[0]||null;
},importJSON:function(t){this.activate();var e=this._activeLayer;return n.importJSON(t,e&&e.isEmpty()&&e);
},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=new n({
offset:new u(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new m],
updateMatrix:!0}),a=0,s=this.layers,o=s.length;o>a;a++)s[a].draw(t,r);if(t.restore(),
this._selectedItemCount>0){t.save(),t.strokeWidth=1;var l=this._selectedItems,c=this._scope.settings.handleSize,d=this._updateVersion;
for(var h in l)l[h]._drawSelection(t,e,c,l,d);t.restore()}}}),p=n.extend({_class:"Symbol",
initialize:function(e,n){this._id=l.get(),this.project=t.project,this.project.symbols.push(this),
e&&this.setDefinition(e,n)},_serialize:function(t,e){return e.add(this,function(){
return n.serialize([this._class,this._definition],t,!1,e)})},_changed:function(t){
8&t&&y._clearBoundsCache(this),1&t&&(this.project._needsUpdate=!0)},getDefinition:function(){
return this._definition},setDefinition:function(t,e){t._parentSymbol&&(t=t.clone()),
this._definition&&(this._definition._parentSymbol=null),this._definition=t,t.remove(),
t.setSelected(!1),e||t.setPosition(new u),t._parentSymbol=this,this._changed(9)},
place:function(t){return new C(this,t)},clone:function(){return new p(this._definition.clone(!1));
},equals:function(t){return t===this||t&&this.definition.equals(t.definition)||!1;
}}),y=n.extend(i,{statics:{extend:function ot(t){return t._serializeFields&&(t._serializeFields=new n(this.prototype._serializeFields,t._serializeFields)),
ot.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_applyMatrix:!0,
_canApplyMatrix:!0,_boundsSelected:!1,_selectChildren:!1,_serializeFields:{name:null,
applyMatrix:null,matrix:new m,pivot:null,locked:!1,visible:!0,blendMode:"normal",
opacity:1,guide:!1,selected:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(e,i){
var r=e&&n.isPlainObject(e),a=r&&e.internal===!0,s=this._matrix=new m,o=r&&e.project||t.project;
return a||(this._id=l.get()),this._applyMatrix=this._canApplyMatrix&&t.settings.applyMatrix,
i&&s.translate(i),s._owner=this,this._style=new z(o._currentStyle,this,o),this._project||(a||r&&e.insert===!1?this._setProject(o):r&&e.parent?this.setParent(e.parent):(o._activeLayer||new x).addChild(this)),
r&&e!==y.NO_INSERT&&this._set(e,{insert:!0,project:!0,parent:!0},!0),r},_events:new function(){
var t={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,
mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,
mouseleave:1}},e={install:function(e){var n=this.getView()._eventCounters;if(n)for(var i in t)n[i]=(n[i]||0)+(t[i][e]||0);
},uninstall:function(e){var n=this.getView()._eventCounters;if(n)for(var i in t)n[i]-=t[i][e]||0;
}};return n.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(t){
this[t]=e},{onFrame:{install:function(){this._animateItem(!0)},uninstall:function(){
this._animateItem(!1)}},onLoad:{}})},_animateItem:function(t){this.getView()._animateItem(this,t);
},_serialize:function(t,e){function i(i){for(var s in i){var o=a[s];n.equals(o,"leading"===s?1.2*i.fontSize:i[s])||(r[s]=n.serialize(o,t,"data"!==s,e));
}}var r={},a=this;return i(this._serializeFields),this instanceof _||i(this._style._defaults),
[this._class,r]},_changed:function(t){var n=this._parentSymbol,i=this._parent||n,r=this._project;
if(8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=this._currentPath=e),
i&&40&t&&y._clearBoundsCache(i),2&t&&y._clearBoundsCache(this),r&&(1&t&&(r._needsUpdate=!0),
r._changes)){var a=r._changesById[this._id];a?a.flags|=t:(a={item:this,flags:t},r._changesById[this._id]=a,
r._changes.push(a))}n&&n._changed(t)},set:function(t){return t&&this._set(t),this;
},getId:function(){return this._id},getName:function(){return this._name},setName:function(t,n){
if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");
var i=this._parent;if(t&&i){for(var r=i._children,a=i._namedChildren,s=t,o=1;n&&r[t];)t=s+" "+o++;
(a[t]=a[t]||[]).push(this),r[t]=this}this._name=t||e,this._changed(128)},getStyle:function(){
return this._style},setStyle:function(t){this.getStyle().set(t)}},n.each(["locked","visible","blendMode","opacity","guide"],function(t){
var e=n.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){
e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}},{}),{beans:!0,_locked:!1,
_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;n>e;e++)if(t[e].isSelected())return!0;
return this._selected},setSelected:function(t,e){if(!e&&this._selectChildren)for(var n=this._children,i=0,r=n.length;r>i;i++)n[i].setSelected(t);
(t=!!t)^this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(129));
},_selected:!1,isFullySelected:function(){var t=this._children;if(t&&this._selected){
for(var e=0,n=t.length;n>e;e++)if(!t[e].isFullySelected())return!1;return!0}return this._selected;
},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;i>n;n++)e[n].setFullySelected(t);
this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){
this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),
this._changed(129),this._parent&&this._parent._changed(1024))},_clipMask:!1,getData:function(){
return this._data||(this._data={}),this._data},setData:function(t){this._data=t},
getPosition:function(t){var e=this._position,n=t?u:c;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0);
}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(u.read(arguments).subtract(this.getPosition(!0)));
},getPivot:function(t){var e=this._pivot;if(e){var n=t?u:c;e=new n(e.x,e.y,this,"setPivot");
}return e},setPivot:function(){this._pivot=u.read(arguments,0,{clone:!0,readNull:!0
}),this._position=e},_pivot:null},n.each(["bounds","strokeBounds","handleBounds","roughBounds","internalBounds","internalRoughBounds"],function(t){
var e="get"+n.capitalize(t),i=t.match(/^internal(.*)$/),r=i?"get"+i[1]:null;this[e]=function(n){
var i=this._boundsGetter,a=!r&&("string"==typeof i?i:i&&i[e])||e,s=this._getCachedBounds(a,n,this,r);
return"bounds"===t?new f(s.x,s.y,s.width,s.height,this,"setBounds"):s}},{beans:!0,
_getBounds:function(t,e,n){var i=this._children;if(!i||0==i.length)return new v;y._updateBoundsCache(this,n);
for(var r=1/0,a=-r,s=r,o=a,l=0,u=i.length;u>l;l++){var c=i[l];if(c._visible&&!c.isEmpty()){
var d=c._getCachedBounds(t,e&&e.chain(c._matrix),n);r=Math.min(d.x,r),s=Math.min(d.y,s),
a=Math.max(d.x+d.width,a),o=Math.max(d.y+d.height,o)}}return isFinite(r)?new v(r,s,a-r,o-s):new v;
},setBounds:function(){var t=v.read(arguments),e=this.getBounds(),n=new m,i=t.getCenter();
n.translate(i),(t.width!=e.width||t.height!=e.height)&&n.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),
i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getCachedBounds:function(t,e,n,i){
e=e&&e.orNullIfIdentity();var r=i?null:this._matrix.orNullIfIdentity(),a=(!e||e.equals(r))&&t;
if(y._updateBoundsCache(this._parent||this._parentSymbol,n),a&&this._bounds&&this._bounds[a])return this._bounds[a].clone();
var s=this._getBounds(i||t,e||r,n);if(a){this._bounds||(this._bounds={});var o=this._bounds[a]=s.clone();
o._internal=!!i}return s},statics:{_updateBoundsCache:function(t,e){if(t){var n=e._id,i=t._boundsCache=t._boundsCache||{
ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){
var n=t._boundsCache;if(n){t._bounds=t._position=t._boundsCache=e;for(var i=0,r=n.list,a=r.length;a>i;i++){
var s=r[i];s!==t&&(s._bounds=s._position=e,s._boundsCache&&y._clearBoundsCache(s));
}}}}}),{beans:!0,_decompose:function(){return this._decomposed=this._matrix.decompose();
},getRotation:function(){var t=this._decomposed||this._decompose();return t&&t.rotation;
},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;
this.rotate(t-e),n.rotation=t,this._decomposed=n}},getScaling:function(t){var e=this._decomposed||this._decompose(),n=e&&e.scaling,i=t?u:c;
return n&&new i(n.x,n.y,this,"setScaling")},setScaling:function(){var t=this.getScaling();
if(t){var e=u.read(arguments,0,{clone:!0}),n=this._decomposed;this.scale(e.x/t.x,e.y/t.y),
n.scaling=e,this._decomposed=n}},getMatrix:function(){return this._matrix},setMatrix:function(){
var t=this._matrix;t.initialize.apply(t,arguments),this._applyMatrix?this.transform(null,!0):this._changed(9);
},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;
if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();
var i=this._parent;i&&e.preConcatenate(i.getGlobalMatrix(!0)),e._updateVersion=n}
return t?e:e.clone()},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){
(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",
setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project;
},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),
this._project=t;for(var n=this._children,i=0,r=n&&n.length;r>i;i++)n[i]._setProject(t);
e=!0}e&&this._installEvents(!0)},getView:function(){return this._project.getView();
},_installEvents:function lt(t){lt.base.call(this,t);for(var e=this._children,n=0,i=e&&e.length;i>n;n++)e[n]._installEvents(t);
},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof x)return t;return null;
},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this);
},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),
this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null;
},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null;
},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null;
},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null;
},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1;
},_equals:function(t){return n.equals(this._children,t._children)},clone:function(t){
return this._clone(new this.constructor(y.NO_INSERT),t)},_clone:function(t,i,r){var a=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],s=this._children;
t.setStyle(this._style);for(var o=0,l=s&&s.length;l>o;o++)t.addChild(s[o].clone(!1),!0);
for(var o=0,l=a.length;l>o;o++){var u=a[o];this.hasOwnProperty(u)&&(t[u]=this[u]);
}return r!==!1&&t._matrix.initialize(this._matrix),t.setApplyMatrix(this._applyMatrix),
t.setPivot(this._pivot),t.setSelected(this._selected),t._data=this._data?n.clone(this._data):null,
(i||i===e)&&t.insertAbove(this),this._name&&t.setName(this._name,!0),t},copyTo:function(t){
return t.addChild(this.clone(!1))},rasterize:function(t){var e=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=e.getTopLeft().floor(),a=e.getBottomRight().ceil(),s=new d(a.subtract(r)),o=J.getCanvas(s.multiply(i)),l=o.getContext("2d"),u=(new m).scale(i).translate(r.negate());
l.save(),u.applyToContext(l),this.draw(l,new n({matrices:[u]})),l.restore();var c=new S(y.NO_INSERT);
return c.setCanvas(o),c.transform((new m).translate(r.add(s.divide(2))).scale(1/i)),
c.insertAbove(this),c},contains:function(){return!!this._contains(this._matrix._inverseTransform(u.read(arguments)));
},_contains:function(t){if(this._children){for(var e=this._children.length-1;e>=0;e--)if(this._children[e].contains(t))return!0;
return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds());
},_asPathItem:function(){return new T.Rectangle({rectangle:this.getInternalBounds(),
matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof y?this._asPathItem().getIntersections(t._asPathItem(),null,e||t._matrix,!0).length>0:!1;
},hitTest:function(){return this._hitTest(u.read(arguments),E.getOptions(n.read(arguments)));
},_hitTest:function(t,e){function i(e,i){var r=v["get"+i]();return t.subtract(r).divide(l).length<=1?new E(e,h,{
name:n.hyphenate(i),point:r}):void 0}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;
var r=this._matrix,a=e._totalMatrix,s=this.getView(),o=e._totalMatrix=a?a.chain(r):this.getGlobalMatrix().preConcatenate(s._matrix),l=e._tolerancePadding=new d(T._getPenPadding(1,o.inverted())).multiply(Math.max(e.tolerance,1e-6));
if(t=r._inverseTransform(t),!this._children&&!this.getInternalRoughBounds().expand(l.multiply(2))._containsPoint(t))return null;
var u,c=!(e.guides&&!this._guide||e.selected&&!this._selected||e.type&&e.type!==n.hyphenate(this._class)||e["class"]&&!(this instanceof e["class"])),h=this;
if(c&&(e.center||e.bounds)&&this._parent){var v=this.getInternalBounds();if(e.center&&(u=i("center","Center")),
!u&&e.bounds)for(var f=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],m=0;8>m&&!u;m++)u=i("bounds",f[m]);
}var g=!u&&this._children;if(g)for(var b=this._getChildHitTestOptions(e),m=g.length-1;m>=0&&!u;m--)u=g[m]._hitTest(t,b);
return!u&&c&&(u=this._hitTestSelf(t,e)),u&&u.point&&(u.point=r.transform(u.point)),
e._totalMatrix=a,u},_getChildHitTestOptions:function(t){return t},_hitTestSelf:function(t,e){
return e.fill&&this.hasFill()&&this._contains(t)?new E("fill",this):void 0},matches:function(t,e){
function i(t,e){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],s=e[r];if(n.isPlainObject(a)&&n.isPlainObject(s)){
if(!i(a,s))return!1}else if(!n.equals(a,s))return!1}return!0}var r="undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t);
if("object"===r){for(var a in t)if(t.hasOwnProperty(a)&&!this.matches(a,t[a]))return!1;
}else{if("function"===r)return t(this);var s=/^(empty|editable)$/.test(t)?this["is"+n.capitalize(t)]():"type"===t?n.hyphenate(this._class):this[t];
if(/^(constructor|class)$/.test(t)){if(!(this instanceof e))return!1}else if(e instanceof RegExp){
if(!e.test(s))return!1}else if("function"==typeof e){if(!e(s))return!1}else if(n.isPlainObject(e)){
if(!i(e,s))return!1}else if(!n.equals(s,e))return!1}return!0},getItems:function(t){
return y._getItems(this._children,t,this._matrix)},getItem:function(t){return y._getItems(this._children,t,this._matrix,null,!0)[0]||null;
},statics:{_getItems:function ut(t,e,i,r,a){if(!r&&"object"===("undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e))){
var s=e.overlapping,o=e.inside,l=s||o,u=l&&v.read([l]);r={items:[],inside:!!o,overlapping:!!s,
rect:u,path:s&&new T.Rectangle({rectangle:u,insert:!1})},l&&(e=n.set({},e,{inside:!0,
overlapping:!0}))}var c=r&&r.items,u=r&&r.rect;i=u&&(i||new m);for(var d=0,h=t&&t.length;h>d;d++){
var f=t[d],g=i&&i.chain(f._matrix),b=!0;if(u){var l=f.getBounds(g);if(!u.intersects(l))continue;
r.inside&&u.contains(l)||r.overlapping&&(l.contains(u)||r.path.intersects(f,g))||(b=!1);
}if(b&&f.matches(e)&&(c.push(f),a))break;if(ut(f._children,e,g,r,a),a&&c.length>0)break;
}return c}}},{importJSON:function(t){var e=n.importJSON(t,this);return e!==this?this.addChild(e):e;
},addChild:function(t,n){return this.insertChild(e,t,n)},insertChild:function(t,e,n){
var i=e?this.insertChildren(t,[e],n):null;return i&&i[0]},addChildren:function(t,e){
return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,i,r){
var a=this._children;if(a&&e&&e.length>0){e=Array.prototype.slice.apply(e);for(var s=e.length-1;s>=0;s--){
var o=e[s];if(!r||o instanceof r){var l=o._parent===this&&o._index<t;o._remove(!1,!0)&&l&&t--;
}else e.splice(s,1)}n.splice(a,e,t,0);for(var u=this._project,c=u&&u._changes,s=0,d=e.length;d>s;s++){
var o=e[s];o._parent=this,o._setProject(this._project,!0),o._name&&o.setName(o._name),
c&&this._changed(5)}this._changed(11)}else e=null;return e},_insertSibling:function(t,e,n){
return this._parent?this._parent.insertChild(t,e,n):null},insertAbove:function(t,e){
return t._insertSibling(t._index+1,this,e)},insertBelow:function(t,e){return t._insertSibling(t._index,this,e);
},sendToBack:function(){return(this._parent||this instanceof x&&this._project).insertChild(0,this);
},bringToFront:function(){return(this._parent||this instanceof x&&this._project).addChild(this);
},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",
moveBelow:"#insertBelow",reduce:function(){if(this._children&&1===this._children.length){
var t=this._children[0].reduce();return t.insertAbove(this),t.setStyle(this._style),
this.remove(),t}return this},_removeNamed:function(){var t=this._parent;if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;
-1!==a&&(e[i]==this&&delete e[i],r.splice(a,1),r.length?e[i]=r[r.length-1]:delete n[i]);
}},_remove:function(t,e){var i=this._parent;if(i){if(this._name&&this._removeNamed(),
null!=this._index&&n.splice(i._children,null,this._index,1),this._installEvents(!1),
t){var r=this._project;r&&r._changes&&this._changed(5)}return e&&i._changed(11),this._parent=null,
!0}return!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){
var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){
if(!this._children)return null;t=t||0,e=n.pick(e,this._children.length);for(var i=n.splice(this._children,null,t,e-t),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);
return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){
if(this._children){this._children.reverse();for(var t=0,e=this._children.length;e>t;t++)this._children[t]._index=t;
this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length;
},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent;
}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){
return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow();
},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);
return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);a>r;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;
return 0},hasChildren:function(){return this._children&&this._children.length>0},
isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){
return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){
return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){
for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1;
},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){
for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;
e=e._parent}return!1},translate:function(){var t=new m;return this.transform(t.translate.apply(t,arguments));
},rotate:function(t){return this.transform((new m).rotate(t,u.read(arguments,1,{readNull:!0
})||this.getPosition(!0)))}},n.each(["scale","shear","skew"],function(t){this[t]=function(){
var e=u.read(arguments),n=u.read(arguments,0,{readNull:!0});return this.transform((new m)[t](e,n||this.getPosition(!0)));
}},{}),{transform:function(t,e,n,i){t&&t.isIdentity()&&(t=null);var r=this._matrix,a=(e||this._applyMatrix)&&(!r.isIdentity()||t||e&&n&&this._children);
if(!t&&!a)return this;if(t&&r.preConcatenate(t),a=a&&this._transformContent(r,n,i)){
var s=this._pivot,o=this._style,l=o.getFillColor(!0),u=o.getStrokeColor(!0);s&&r._transformPoint(s,s,!0),
l&&l.transform(r),u&&u.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0);
}var c=this._bounds,d=this._position;this._changed(9);var h=c&&t&&t.decompose();if(h&&!h.shearing&&h.rotation%90===0){
for(var v in c){var f=c[v];(a||!f._internal)&&t._transformBounds(f,f)}var m=this._boundsGetter,f=c[m&&m.getBounds||m||"getBounds"];
f&&(this._position=f.getCenter(!0)),this._bounds=c}else t&&d&&(this._position=t._transformPoint(d,d));
return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;a>r;r++)i[r].transform(t,!0,e,n);
return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(u.read(arguments));
},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(u.read(arguments));
},parentToLocal:function(){return this._matrix._inverseTransform(u.read(arguments));
},localToParent:function(){return this._matrix._transformPoint(u.read(arguments));
},fitBounds:function(t,e){t=v.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,a=(e?i>r:r>i)?t.width/n.width:t.height/n.height,s=new v(new u,new d(n.width*a,n.height*a));
s.setCenter(t.getCenter()),this.setBounds(s)},_setStyles:function(e){var n=this._style,i=n.getFillColor(),r=n.getStrokeColor(),a=n.getShadowColor();
if(i&&(e.fillStyle=i.toCanvasStyle(e)),r){var s=n.getStrokeWidth();if(s>0){e.strokeStyle=r.toCanvasStyle(e),
e.lineWidth=s;var o=n.getStrokeJoin(),l=n.getStrokeCap(),u=n.getMiterLimit();if(o&&(e.lineJoin=o),
l&&(e.lineCap=l),u&&(e.miterLimit=u),t.support.nativeDash){var c=n.getDashArray(),d=n.getDashOffset();
c&&c.length&&("setLineDash"in e?(e.setLineDash(c),e.lineDashOffset=d):(e.mozDash=c,
e.mozDashOffset=d))}}}if(a){var h=n.getShadowBlur();if(h>0){e.shadowColor=a.toCanvasStyle(e),
e.shadowBlur=h;var v=this.getShadowOffset();e.shadowOffsetX=v.x,e.shadowOffsetY=v.y;
}}},draw:function(t,e,n){function i(t){return s?s.chain(t):t}var r=this._updateVersion=this._project._updateVersion;
if(this._visible&&0!==this._opacity){var a=e.matrices,s=e.viewMatrix,o=this._matrix,l=a[a.length-1].chain(o);
if(l.isInvertible()){a.push(l),e.updateMatrix&&(l._updateVersion=r,this._globalMatrix=l);
var u,c,d,h=this._blendMode,v=this._opacity,f="normal"===h,m=Q.nativeModes[h],g=f&&1===v||e.dontStart||e.clip||(m||f&&1>v)&&this._canComposite(),b=e.pixelRatio||1;
if(!g){var p=this.getStrokeBounds(i(l));if(!p.width||!p.height)return;d=e.offset,
c=e.offset=p.getTopLeft().floor(),u=t,t=J.getContext(p.getSize().ceil().add(1).multiply(b)),
1!==b&&t.scale(b,b)}t.save();var y=n?n.chain(o):!this.getStrokeScaling(!0)&&i(l),_=!g&&e.clipItem,x=!y||_;
if(g?(t.globalAlpha=v,m&&(t.globalCompositeOperation=h)):x&&t.translate(-c.x,-c.y),
x&&(g?o:i(l)).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(b,0,0,b,0,0);
var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,y),t.restore(),a.pop(),e.clip&&!e.dontFinish&&t.clip(),
g||(Q.process(h,t,u,v,c.subtract(d).multiply(b)),J.release(t),e.offset=d)}}},_isUpdated:function(t){
var e=this._parent;if(e instanceof P)return e._isUpdated(t);var n=this._updateVersion===t;
return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){
if((this._drawSelected||this._boundsSelected)&&this._isUpdated(r)){var a=this.getSelectedColor(!0)||this.getLayer().getSelectedColor(!0),s=e.chain(this.getGlobalMatrix(!0));
if(t.strokeStyle=t.fillStyle=a?a.toCanvasStyle(t):"#009dec",this._drawSelected&&this._drawSelected(t,s,i),
this._boundsSelected){var o=n/2;coords=s._transformCorners(this.getInternalBounds()),
t.beginPath();for(var l=0;8>l;l++)t[0===l?"moveTo":"lineTo"](coords[l],coords[++l]);
t.closePath(),t.stroke();for(var l=0;8>l;l++)t.fillRect(coords[l]-o,coords[++l]-o,n,n);
}}},_canComposite:function(){return!1}},n.each(["down","drag","up","move"],function(t){
this["removeOn"+n.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e);
}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};
r[n]=r[n]||{},r[n][this._id]=this}return this}})),_=y.extend({_class:"Group",_selectChildren:!0,
_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},
this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function ct(t){
ct.base.call(this,t),1026&t&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;
if(t===e){t=null;for(var n=0,i=this._children.length;i>n;n++){var r=this._children[n];
if(r._clipMask){t=r;break}}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem();
},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_draw:function(t,e){
var n=e.clip,i=!n&&this._getClipItem(),r=!0;if(e=e.extend({clipItem:i,clip:!1}),n?this._currentPath?(t.currentPath=this._currentPath,
r=!1):(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0})),
r)for(var a=0,s=this._children.length;s>a;a++){var o=this._children[a];o!==i&&o.draw(t,e);
}n&&(this._currentPath=t.currentPath)}}),x=_.extend({_class:"Layer",initialize:function(t){
var i=n.isPlainObject(t)?new n(t):{children:Array.isArray(t)?t:arguments},r=i.insert;
i.insert=!1,_.call(this,i),(r||r===e)&&(this._project.addChild(this),this.activate());
},_remove:function dt(t,e){if(this._parent)return dt.base.call(this,t,e);if(null!=this._index){
var i=this._project;return i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),
n.splice(i.layers,null,this._index,1),this._installEvents(!1),t&&i._changes&&this._changed(5),
e&&(i._needsUpdate=!0),!0}return!1},getNextSibling:function ht(){return this._parent?ht.base.call(this):this._project.layers[this._index+1]||null;
},getPreviousSibling:function vt(){return this._parent?vt.base.call(this):this._project.layers[this._index-1]||null;
},isInserted:function ft(){return this._parent?ft.base.call(this):null!=this._index;
},activate:function(){this._project._activeLayer=this},_insertSibling:function mt(t,e,n){
return this._parent?mt.base.call(this,t,e,n):this._project.insertChild(t,e,n)}}),w=y.extend({
_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_boundsSelected:!0,_serializeFields:{
type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){
return this._type===t._type&&this._size.equals(t._size)&&n.equals(this._radius,t._radius);
},clone:function(t){var e=new w(y.NO_INSERT);return e.setType(this._type),e.setSize(this._size),
e.setRadius(this._radius),this._clone(e,t)},getType:function(){return this._type},
setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){
var t=this._size;return new h(t.width,t.height,this,"setSize")},setSize:function(){
var t=d.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;
if("rectangle"===e){var r=d.min(this._radius,t.divide(2));this._radius.set(r.width,r.height);
}else"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius.set(n/2,i/2);
this._size.set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){
var t=this._radius;return"circle"===this._type?t:new h(t.width,t.height,this,"setRadius");
},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;
var n=2*t;this._radius=t,this._size.set(n,n)}else if(t=d.read(arguments),this._radius){
if(this._radius.equals(t))return;if(this._radius.set(t.width,t.height),"rectangle"===e){
var n=d.max(this._size,t.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===e&&this._size.set(2*t.width,2*t.height);
}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){
var i=this._clone(new(T[n.capitalize(this._type)])({center:new u,size:this._size,
radius:this._radius,insert:!1}),e);return t.settings.applyMatrix&&i.setApplyMatrix(!0),
i},_draw:function(t,e,n){var i=this._style,r=i.hasFill(),a=i.hasStroke(),s=e.dontFinish||e.clip,o=!n;
if(r||a||s){var l=this._type,u=this._radius,c="circle"===l;if(e.dontStart||t.beginPath(),
o&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var d=c?u:u.width,h=c?u:u.height,v=this._size,f=v.width,m=v.height;
if(o&&"rectangle"===l&&0===d&&0===h)t.rect(-f/2,-m/2,f,m);else{var g=f/2,b=m/2,p=.44771525016920644,y=d*p,_=h*p,x=[-g,-b+h,-g,-b+_,-g+y,-b,-g+d,-b,g-d,-b,g-y,-b,g,-b+_,g,-b+h,g,b-h,g,b-_,g-y,b,g-d,b,-g+d,b,-g+y,b,-g,b-_,-g,b-h];
n&&n.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),
g!==d&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),b!==h&&t.lineTo(x[16],x[17]),
t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),g!==d&&t.lineTo(x[24],x[25]),
t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}s||!r&&!a||(this._setStyles(t),
r&&(t.fill(i.getWindingRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){
return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new v(this._size).setCenter(0,0);
return"getBounds"!==t&&this.hasStroke()&&(n=n.expand(this.getStrokeWidth())),e?e._transformBounds(n):n;
}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=0;4>a;a++){
var s=new u(1&a?1:-1,a>1?1:-1),o=s.multiply(r),l=o.subtract(s.multiply(i)),c=new v(o,l);
if((n?c.expand(n):c).contains(e))return l}}function e(t,e){var n=t.getAngleInRadians(),i=2*e.width,r=2*e.height,a=i*Math.sin(n),s=r*Math.cos(n);
return i*r/(2*Math.sqrt(a*a+s*s))}return{_contains:function n(e){if("rectangle"===this._type){
var i=t(this,e);return i?e.subtract(i).divide(this._radius).getLength()<=1:n.base.call(this,e);
}return e.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,r){var a=!1;
if(this.hasStroke()){var s=this._type,o=this._radius,l=this.getStrokeWidth()+2*r.tolerance;
if("rectangle"===s){var u=t(this,n,l);if(u){var c=n.subtract(u);a=2*Math.abs(c.getLength()-e(c,o))<=l;
}else{var d=new v(this._size).setCenter(0,0),h=d.expand(l),f=d.expand(-l);a=h._containsPoint(n)&&!f._containsPoint(n);
}}else"ellipse"===s&&(o=e(n,o)),a=2*Math.abs(n.getLength()-o)<=l}return a?new E("stroke",this):i.base.apply(this,arguments);
}}},{statics:new function(){function t(t,e,i,r,a){var s=new w(n.getNamed(a));return s._type=t,
s._size=i,s._radius=r,s.translate(e)}return{Circle:function(){var e=u.readNamed(arguments,"center"),i=n.readNamed(arguments,"radius");
return t("circle",e,new d(2*i),i,arguments)},Rectangle:function(){var e=v.readNamed(arguments,"rectangle"),n=d.min(d.readNamed(arguments,"radius"),e.getSize(!0).divide(2));
return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){
var e=w._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments);
},_readEllipse:function(t){var e,i;if(n.hasNamed(t,"radius"))e=u.readNamed(t,"center"),
i=d.readNamed(t,"radius");else{var r=v.readNamed(t,"rectangle");e=r.getCenter(!0),
i=r.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),S=y.extend({_class:"Raster",
_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{
crossOrigin:null,source:null},initialize:function(t,n){this._initialize(t,n!==e&&u.read(arguments,1))||("string"==typeof t?this.setSource(t):this.setImage(t)),
this._size||(this._size=new d,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource();
},clone:function(t){var e=new S(y.NO_INSERT),n=this._image,i=this._canvas;if(n)e.setImage(n);else if(i){
var r=J.getCanvas(this._size);r.getContext("2d").drawImage(i,0,0),e.setImage(r)}return e._crossOrigin=this._crossOrigin,
this._clone(e,t)},getSize:function(){var t=this._size;return new h(t?t.width:0,t?t.height:0,this,"setSize");
},setSize:function(){var t=d.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){
var e=this.getElement();this.setImage(J.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height);
}else this._canvas&&J.release(this._canvas),this._size=t.clone()},getWidth:function(){
return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight());
},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){
this.setSize(this.getWidth(),t)},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height;
},getResolution:function(){var t=this._matrix,e=new u(0,0).transform(t),n=new u(1,0).transform(t).subtract(e),i=new u(0,1).transform(t).subtract(e);
return new d(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){
return this._image},setImage:function(t){this._canvas&&J.release(this._canvas),t&&t.getContext?(this._image=null,
this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=t&&t.complete),
this._size=new d(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,
this._changed(521)},getCanvas:function(){if(!this._canvas){var t=J.getContext(this._size);
try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){J.release(t);
}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),
t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t;
},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(e){
function n(){var e=r.getView();e&&(t=e._scope,r.setImage(i),r.emit("load"),e.update());
}var i,r=this,a=this._crossOrigin;i=document.getElementById(e)||new Image,a&&(i.crossOrigin=a),
i.naturalWidth&&i.naturalHeight?setTimeout(n,0):(U.add(i,{load:n}),i.src||(i.src=e)),
this.setImage(i)},getCrossOrigin:function(){return this._image&&this._image.crossOrigin||this._crossOrigin||"";
},setCrossOrigin:function(t){this._crossOrigin=t,this._image&&(this._image.crossOrigin=t);
},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,
getSubCanvas:function(){var t=v.read(arguments),e=J.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),
e.canvas},getSubRaster:function(){var t=v.read(arguments),e=new S(y.NO_INSERT);return e.setImage(this.getSubCanvas(t)),
e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.preConcatenate(this._matrix),
e.insertAbove(this),e},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;
var e=this.getCanvas();return e?e.toDataURL.apply(e,arguments):null},drawImage:function(t){
var e=u.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){
var e,i;t?t instanceof j?(i=t,e=t.getBounds()):t.width?e=new v(t):t.x&&(e=new v(t.x-.5,t.y-.5,1,1)):e=this.getBounds();
var r=32,a=Math.min(e.width,r),s=Math.min(e.height,r),o=S._sampleContext;o?o.clearRect(0,0,r+1,r+1):o=S._sampleContext=J.getContext(new d(r)),
o.save();var l=(new m).scale(a/e.width,s/e.height).translate(-e.x,-e.y);l.applyToContext(o),
i&&i.draw(o,new n({clip:!0,matrices:[l]})),this._matrix.applyToContext(o);var u=this.getElement(),c=this._size;
u&&o.drawImage(u,-c.width/2,-c.height/2),o.restore();for(var h=o.getImageData(.5,.5,Math.ceil(a),Math.ceil(s)).data,f=[0,0,0],g=0,b=0,p=h.length;p>b;b+=4){
var y=h[b+3];g+=y,y/=255,f[0]+=h[b]*y,f[1]+=h[b+1]*y,f[2]+=h[b+2]*y}for(var b=0;3>b;b++)f[b]/=g;
return g?V.read(f):null},getPixel:function(){var t=u.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;
return new V("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=u.read(arguments),e=V.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),a=r.createImageData(1,1),s=a.data;
s[0]=255*n[0],s[1]=255*n[1],s[2]=255*n[2],s[3]=null!=i?255*i:255,r.putImageData(a,t.x,t.y);
},createImageData:function(){var t=d.read(arguments);return this.getContext().createImageData(t.width,t.height);
},getImageData:function(){var t=v.read(arguments);return t.isEmpty()&&(t=new v(this._size)),
this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){
var e=u.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){
var n=new v(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(t){
if(this._contains(t)){var e=this;return new E("pixel",e,{offset:t.add(e._size.divide(2)).round(),
color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();
e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2));
},_canComposite:function(){return!0}}),C=y.extend({_class:"PlacedSymbol",_applyMatrix:!1,
_canApplyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,
_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==e&&u.read(arguments,1))||this.setSymbol(t instanceof p?t:new p(t));
},_equals:function(t){return this._symbol===t._symbol},getSymbol:function(){return this._symbol;
},setSymbol:function(t){this._symbol=t,this._changed(9)},clone:function(t){var e=new C(y.NO_INSERT);
return e.setSymbol(this._symbol),this._clone(e,t)},isEmpty:function(){return this._symbol._definition.isEmpty();
},_getBounds:function(t,e,n){var i=this.symbol._definition;return i._getCachedBounds(t,e&&e.chain(i._matrix),n);
},_hitTestSelf:function(t,e){var n=this._symbol._definition._hitTest(t,e);return n&&(n.item=this),
n},_draw:function(t,e){this.symbol._definition.draw(t,e)}}),E=n.extend({_class:"HitResult",
initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n));
},statics:{getOptions:function(e){return new n({type:null,tolerance:t.settings.hitTolerance,
fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1
},e)}}}),k=n.extend({_class:"Segment",beans:!0,initialize:function(t,n,i,r,a,s){var o,l,u,c=arguments.length;
0===c||(1===c?"point"in t?(o=t.point,l=t.handleIn,u=t.handleOut):o=t:2===c&&"number"==typeof t?o=arguments:3>=c?(o=t,
l=n,u=i):(o=t!==e?[t,n]:null,l=i!==e?[i,r]:null,u=a!==e?[a,s]:null)),new A(o,this,"_point"),
new A(l,this,"_handleIn"),new A(u,this,"_handleOut")},_serialize:function(t){return n.serialize(this.hasHandles()?[this._point,this._handleIn,this._handleOut]:this._point,t,!0);
},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),
t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}
},getPoint:function(){return this._point},setPoint:function(){var t=u.read(arguments);
this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){
var t=u.read(arguments);this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut;
},setHandleOut:function(){var t=u.read(arguments);this._handleOut.set(t.x,t.y)},hasHandles:function(){
return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){
this._handleIn.set(0,0),this._handleOut.set(0,0)},_selectionState:0,isSelected:function(t){
var e=this._selectionState;return t?t===this._point?!!(4&e):t===this._handleIn?!!(1&e):t===this._handleOut?!!(2&e):!1:!!(7&e);
},setSelected:function(t,e){var n=this._path,t=!!t,i=this._selectionState,r=i,a=e?e===this._point?4:e===this._handleIn?1:e===this._handleOut?2:0:7;
t?i|=a:i&=~a,this._selectionState=i,n&&i!==r&&(n._updateSelection(this,r,i),n._changed(129));
},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){
return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,
t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new M(t,this===t._segment1?0:1):null;
},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null;
},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null;
},isFirst:function(){return 0===this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1;
},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t._x,i=t._y;t.set(e._x,e._y),
e.set(n,i)},reversed:function(){return new k(this._point,this._handleOut,this._handleIn);
},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},
clone:function(){return new k(this._point,this._handleIn,this._handleOut)},equals:function(t){
return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1;
},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),
this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }";
},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed();
},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,s=i._x,o=i._y,l=2;
return e[0]=s,e[1]=o,r&&(e[l++]=r._x+s,e[l++]=r._y+o),a&&(e[l++]=a._x+s,e[l++]=a._y+o),
t&&(t._transformCoordinates(e,e,l/2),s=e[0],o=e[1],n?(i._x=s,i._y=o,l=2,r&&(r._x=e[l++]-s,
r._y=e[l++]-o),a&&(a._x=e[l++]-s,a._y=e[l++]-o)):(r||(e[l++]=s,e[l++]=o),a||(e[l++]=s,
e[l++]=o))),e}}),A=u.extend({initialize:function(t,n,i){var r,a,s;if(t)if((r=t[0])!==e)a=t[1];else{
var o=t;(r=o.x)===e&&(o=u.read(arguments),r=o.x),a=o.y,s=o.selected}else r=a=0;this._x=r,
this._y=a,this._owner=n,n[i]=this,s&&this.setSelected(!0)},set:function(t,e){return this._x=t,
this._y=e,this._owner._changed(this),this},_serialize:function(t){var e=t.formatter,n=e.number(this._x),i=e.number(this._y);
return this.isSelected()?{x:n,y:i,selected:!0}:[n,i]},getX:function(){return this._x;
},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y;
},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return o.isZero(this._x)&&o.isZero(this._y);
},setSelected:function(t){this._owner.setSelected(t,this)},isSelected:function(){
return this._owner.isSelected(this)}}),L=n.extend({_class:"Curve",initialize:function(t,e,n,i,r,a,s,o){
var l,u,c,d,h,v,f=arguments.length;3===f?(this._path=t,l=e,u=n):0===f?(l=new k,u=new k):1===f?"segment1"in t?(l=new k(t.segment1),
u=new k(t.segment2)):"point1"in t?(c=t.point1,h=t.handle1,v=t.handle2,d=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],
d=[t[6],t[7]],h=[t[2]-t[0],t[3]-t[1]],v=[t[4]-t[6],t[5]-t[7]]):2===f?(l=new k(t),
u=new k(e)):4===f?(c=t,h=e,v=n,d=i):8===f&&(c=[t,e],d=[s,o],h=[n-t,i-e],v=[r-s,a-o]),
this._segment1=l||new k(c,null,h),this._segment2=u||new k(d,v,null)},_serialize:function(t){
return n.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0);
},_changed:function(){this._length=this._bounds=e},clone:function(){return new L(this._segment1,this._segment2);
},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),
this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),
"{ "+t.join(", ")+" }"},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;
t=e.remove(),t&&this._segment1._handleOut.set(n.x,n.y)}return t},getPoint1:function(){
return this._segment1._point},setPoint1:function(){var t=u.read(arguments);this._segment1._point.set(t.x,t.y);
},getPoint2:function(){return this._segment2._point},setPoint2:function(){var t=u.read(arguments);
this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut;
},setHandle1:function(){var t=u.read(arguments);this._segment1._handleOut.set(t.x,t.y);
},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var t=u.read(arguments);
this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1;
},getSegment2:function(){return this._segment2},getPath:function(){return this._path;
},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;
return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){
var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null;
},isFirst:function(){return 0===this._segment1._index},isLast:function(){var t=this._path;
return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected();
},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),
this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){
return L.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;8>n;n+=2)e.push(new u(t[n],t[n+1]));
return e},getLength:function(){return null==this._length&&(this._length=L.getLength(this.getValues(),0,1)),
this._length},getArea:function(){return L.getArea(this.getValues())},getVector:function(){
return this._segment2._point.subtract(this._segment1._point)},getPart:function(t,e){
return new L(L.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return L.getLength(this.getValues(),t,e);
},getIntersections:function(t){return L.getIntersections(this.getValues(),t&&t!==this?t.getValues():null,this,t,[],{});
},_getParameter:function(t,n){return n?t:t&&t.curve===this?t.parameter:t===e&&n===e?.5:this.getParameterAt(t,0);
},divide:function(t,e,n){var i=this._getParameter(t,e),r=1e-6,a=1-r,s=null;if(i>=r&&a>=i){
var o=L.subdivide(this.getValues(),i),l=o[0],c=o[1],d=n||this.hasHandles(),h=this._segment1,v=this._segment2,f=this._path;
d&&(h._handleOut.set(l[2]-l[0],l[3]-l[1]),v._handleIn.set(c[4]-c[6],c[5]-c[7]));var m=l[6],g=l[7],b=new k(new u(m,g),d&&new u(l[4]-m,l[5]-g),d&&new u(c[2]-m,c[3]-g));
f?(f.insert(h._index+1,b),s=this.getNext()):(this._segment2=b,s=new L(b,v))}return s;
},split:function(t,e){return this._path?this._path.split(this._segment1._index,this._getParameter(t,e)):null;
},reversed:function(){return new L(this._segment2.reversed(),this._segment1.reversed());
},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0);
},statics:{getValues:function(t,e,n){var i=t._point,r=t._handleOut,a=e._handleIn,s=e._point,o=[i._x,i._y,i._x+r._x,i._y+r._y,s._x+a._x,s._y+a._y,s._x,s._y];
return n&&n._transformCoordinates(o,o,4),o},subdivide:function(t,n){var i=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7];
n===e&&(n=.5);var d=1-n,h=d*i+n*a,v=d*r+n*s,f=d*a+n*o,m=d*s+n*l,g=d*o+n*u,b=d*l+n*c,p=d*h+n*f,y=d*v+n*m,_=d*f+n*g,x=d*m+n*b,w=d*p+n*_,S=d*y+n*x;
return[[i,r,h,v,p,y,w,S],[w,S,_,x,g,b,u,c]]},solveCubic:function(t,e,n,i,r,a){var s=t[e],l=t[e+2],u=t[e+4],c=t[e+6],d=3*(l-s),h=3*(u-l)-d,v=c-s-d-h;
return o.solveCubic(v,h,d,s-n,i,r,a)},getParameterOf:function(t,e){var n=e.x,i=e.y,r=1e-6,a=Math.abs;
if(a(t[0]-n)<r&&a(t[1]-i)<r)return 0;if(a(t[6]-n)<r&&a(t[7]-i)<r)return 1;var s,o,l=[],u=[],c=L.solveCubic(t,0,n,l,0,1),d=0!==c?L.solveCubic(t,1,i,u,0,1):0;
if(-1===c&&-1===d)return 0;for(var h=0;-1===c||c>h;)if(-1===c||(s=l[h++])>0&&1>s){
for(var v=0;-1===d||d>v;)if((-1===d||(o=u[v++])>0&&1>o)&&(-1===c?s=o:-1===d&&(o=s),
a(s-o)<1e-6))return.5*(s+o);if(-1===c)break}return null},getPart:function(t,e,n){
var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=L.subdivide(t,e)[1]),1>n&&(t=L.subdivide(t,(n-e)/(1-e))[0]),
i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},hasHandles:function(t){var e=o.isZero;
return!(e(t[0]-t[2])&&e(t[1]-t[3])&&e(t[4]-t[6])&&e(t[5]-t[7]))},isFlatEnough:function(t,e){
var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],u=t[7],c=3*r-2*n-l,d=3*a-2*i-u,h=3*s-2*l-n,v=3*o-2*u-i;
return Math.max(c*c,h*h)+Math.max(d*d,v*v)<10*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[6],r=t[7],a=(t[2]+e)/2,s=(t[3]+n)/2,o=(t[4]+t[6])/2,l=(t[5]+t[7])/2;
return 6*((e-a)*(s+n)+(a-o)*(l+s)+(o-i)*(r+l))/10},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;2>r;r++)L._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);
return new v(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,s,l,u){
function c(t,e){var n=t-e,i=t+e;n<s[r]&&(s[r]=n),i>l[r]&&(l[r]=i)}var d=3*(e-n)-t+i,h=2*(t+n)-4*e,v=e-t,f=o.solveQuadratic(d,h,v,u),m=1e-6,g=1-m;
c(i,0);for(var b=0;f>b;b++){var p=u[b],y=1-p;p>m&&g>p&&c(y*y*y*t+3*y*y*p*e+3*y*p*p*n+p*p*p*i,a);
}}}},n.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){
this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];if(!e){var n=this._path;
e=this._bounds[t]=T[t]([this._segment1,this._segment2],!1,n&&n.getStyle())}return e.clone();
}},{}),n.each({isStraight:function(t,e,n){if(e.isZero()&&n.isZero())return!0;if(t.isZero())return!1;
if(e.isCollinear(t)&&n.isCollinear(t)){var i=t.dot(t),r=t.dot(e)/i,a=t.dot(n)/i;return r>=0&&1>=r&&0>=a&&a>=-1;
}return!1},isLinear:function(t,e,n){var i=t.divide(3);return e.equals(i)&&n.negate().equals(i);
}},function(t,e){this[e]=function(){var e=this._segment1,n=this._segment2;return t(n._point.subtract(e._point),e._handleOut,n._handleIn);
},this.statics[e]=function(e){var n=e[0],i=e[1],r=e[6],a=e[7];return t(new u(r-n,a-i),new u(e[2]-n,e[3]-i),new u(e[4]-r,e[5]-a));
}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero();
},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getVector().isCollinear(t.getVector());
},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).y)<1e-8;
},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).x)<1e-8;
}}),{beans:!1,getParameterAt:function(t,e){return L.getParameterAt(this.getValues(),t,e);
},getParameterOf:function(){return L.getParameterOf(this.getValues(),u.read(arguments));
},getLocationAt:function(t,e){var n=e?t:this.getParameterAt(t);return null!=n&&n>=0&&1>=n?new M(this,n):null;
},getLocationOf:function(){return this.getLocationAt(this.getParameterOf(u.read(arguments)),!0);
},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null;
},getNearestLocation:function(){function t(t){if(t>=0&&1>=t){var i=e.getDistance(L.getPoint(n,t),!0);
if(r>i)return r=i,a=t,!0}}for(var e=u.read(arguments),n=this.getValues(),i=100,r=1/0,a=0,s=0;i>=s;s++)t(s/i);
for(var o=1/(2*i);o>1e-6;)t(a-o)||t(a+o)||(o/=2);var l=L.getPoint(n,a);return new M(this,a,l,null,e.getDistance(l));
},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint();
}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];
return n.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return L[t](i,n?e:L.getParameterAt(i,e,0));
}},{statics:{evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=9*(i-a)+3*(o-e),c=6*(e+a)-12*i,d=3*(i-e),h=9*(r-s)+3*(l-n),v=6*(n+s)-12*r,f=3*(r-n);
return function(t){var e=(u*t+c)*t+d,n=(h*t+v)*t+f;return Math.sqrt(e*e+n*n)}}function n(t,e){
return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||0>e||e>1)return null;
var r,a,s=t[0],o=t[1],l=t[2],c=t[3],d=t[4],h=t[5],v=t[6],f=t[7],m=1e-6,g=1-m;if(0===n&&(m>e||e>g)){
var b=m>e;r=b?s:v,a=b?o:f}else{var p=3*(l-s),y=3*(d-l)-p,_=v-s-p-y,x=3*(c-o),w=3*(h-c)-x,S=f-o-x-w;
if(0===n)r=((_*e+y)*e+p)*e+s,a=((S*e+w)*e+x)*e+o;else{if(m>e?(r=p,a=x):e>g?(r=3*(v-d),
a=3*(f-h)):(r=(3*_*e+2*y)*e+p,a=(3*S*e+2*w)*e+x),i){0===r&&0===a&&(m>e||e>g)&&(r=d-l,
a=h-c);var C=Math.sqrt(r*r+a*a);r/=C,a/=C}if(3===n){var E=6*_*e+2*y,k=6*S*e+2*w,A=Math.pow(r*r+a*a,1.5);
r=0!==A?(r*k-a*E)/A:0,a=0}}}return 2===n?new u(a,-r):new u(r,a)}return{statics:{getLength:function(i,r,a){
if(r===e&&(r=0),a===e&&(a=1),0===r&&1===a&&L.isStraight(i)){var s=i[6]-i[0],l=i[7]-i[1];
return Math.sqrt(s*s+l*l)}var u=t(i);return o.integrate(u,r,a,n(r,a))},getParameterAt:function(i,r,a){
function s(t){return m+=o.integrate(h,a,t,n(a,t)),a=t,m-r}if(a===e&&(a=0>r?1:0),0===r)return a;
var l=Math.abs,u=r>0,c=u?a:0,d=u?1:a,h=t(i),v=o.integrate(h,c,d,n(c,d));if(l(r-v)<1e-6)return u?d:c;
if(l(r)>v)return null;var f=r/v,m=0;return o.findRoot(s,h,a+f,c,d,32,1e-12)},getPoint:function(t,e){
return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){
return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){
return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x}}}},new function(){
function t(t,e,n,i,r,a,s,o,l,u,c){var d=e.startConnected,h=e.endConnected,v=1e-6,f=1-v;
if(null==r&&(r=L.getParameterOf(n,a)),null!==r&&r>=(d?v:0)&&(h?f:1)>=r&&(null==l&&(l=L.getParameterOf(s,u)),
null!==l&&l>=(h?v:0)&&(d?f:1)>=l)){var m=e.renormalize;if(m){var g=m(r,l);r=g[0],
l=g[1]}var b=new M(i,r,a||L.getPoint(n,r),c),p=new M(o,l,u||L.getPoint(s,l),c),y=b.getPath()===p.getPath()&&b.getIndex()>p.getIndex(),_=y?p:b,x=e.include;
b._intersection=p,p._intersection=b,(y?b:p)._other=!0,(!x||x(_))&&M.add(t,_,!0)}}
function e(r,a,s,o,l,u,c,d,h,v,f,m,b){if(!(++b>=32)){var p,y,_=a[0],x=a[1],w=a[6],S=a[7],C=1e-7,E=g.getSignedDistance,k=E(_,x,w,S,a[2],a[3]),A=E(_,x,w,S,a[4],a[5]),M=k*A>0?.75:4/9,j=M*Math.min(0,k,A),T=M*Math.max(0,k,A),P=E(_,x,w,S,r[0],r[1]),R=E(_,x,w,S,r[2],r[3]),O=E(_,x,w,S,r[4],r[5]),I=E(_,x,w,S,r[6],r[7]),D=n(P,R,O,I),V=D[0],N=D[1];
if(null!=(p=i(V,N,j,T))&&null!=(y=i(V.reverse(),N.reverse(),j,T))){r=L.getPart(r,p,y);
var B=y-p,z=c+(d-c)*p,G=c+(d-c)*y;if(f>.5&&B>.5)if(G-z>v-h){var U=L.subdivide(r,.5),H=z+(G-z)/2;
e(a,U[0],o,s,l,u,h,v,z,H,B,!m,b),e(a,U[1],o,s,l,u,h,v,H,G,B,!m,b)}else{var U=L.subdivide(a,.5),H=h+(v-h)/2;
e(U[0],r,o,s,l,u,h,H,z,G,B,!m,b),e(U[1],r,o,s,l,u,H,v,z,G,B,!m,b)}else if(Math.max(v-h,G-z)<C){
var F=z+(G-z)/2,q=h+(v-h)/2;r=s.getValues(),a=o.getValues(),t(l,u,m?a:r,m?o:s,m?q:F,null,m?r:a,m?s:o,m?F:q,null);
}else B>1e-12&&e(a,r,o,s,l,u,h,v,z,G,B,!m,b)}}}function n(t,e,n,i){var r,a=[0,t],s=[1/3,e],o=[2/3,n],l=[1,i],u=e-(t+(i-t)/3),c=n-(t+2*(i-t)/3);
if(0>u*c)r=[[a,s,l],[a,o,l]];else{var d=u/c;r=[d>=2?[a,s,l]:.5>=d?[a,o,l]:[a,s,o,l],[a,l]];
}return 0>(u||c)?r.reverse():r}function i(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0];
}function r(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,s=t.length;s>a;a++){var o=t[a][0],l=t[a][1];
if(e?l>=n:n>=l)return l===n?o:i+(n-r)*(o-i)/(l-r);i=o,r=l}return null}function a(e,n,i,r,a,s){
for(var l=L.isStraight(e),u=l?n:e,c=l?e:n,d=c[0],h=c[1],v=c[6],f=c[7],m=v-d,g=f-h,b=Math.atan2(-g,m),p=Math.sin(b),y=Math.cos(b),_=[],x=0;8>x;x+=2){
var w=u[x]-d,S=u[x+1]-h;_.push(w*y-S*p,w*p+S*y)}for(var C=[],E=L.solveCubic(_,1,0,C,0,1),x=0;E>x;x++){
var k=C[x],A=L.getPoint(u,k),M=L.getParameterOf(c,A);if(null!==M){var j=L.getPoint(c,M),T=l?M:k,P=l?k:M;
(!s.endConnected||P>o.CURVETIME_EPSILON)&&t(a,s,e,i,T,l?j:A,n,r,P,l?A:j)}}}function s(e,n,i,r,a,s){
var o=g.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(a,s,e,i,null,o,n,r,null,o);
}return{statics:{getIntersections:function(n,i,r,l,c,d){var h=n[0],v=n[1],f=n[2],m=n[3],b=n[4],p=n[5],y=n[6],_=n[7];
if(!i){var x=new g(h,v,y,_,!1),w=x.getSide(f,m),S=g.getSide(b,p);if(w===S){var C=(h-b)*(m-_)+(f-y)*(p-v);
if(C*w>0)return c}var E=y-3*b+3*f-h,k=b-2*f+h,A=f-h,M=_-3*p+3*m-v,j=p-2*m+v,T=m-v,P=M*A-E*T,R=M*k-E*j,O=j*A-k*T;
if(0>P*P-4*R*O){var I,D=[],V=o.solveCubic(E*E+M*M,3*(E*k+M*j),2*(k*k+j*j)+E*A+M*T,k*A+j*T,D,0,1);
if(V>0){for(var N=0,B=0;V>N;N++){var z=Math.abs(r.getCurvatureAt(D[N],!0));z>B&&(B=z,
I=D[N])}var G=L.subdivide(n,I);d.endConnected=!0,d.renormalize=function(t,e){return[t*I,e*(1-I)+I];
},L.getIntersections(G[0],G[1],r,r,c,d)}}return c}var U=i[0],H=i[1],F=i[6],q=i[7],$=(3*f+h)/4,Y=(3*m+v)/4,X=(3*b+y)/4,W=(3*p+_)/4,Z=(3*i[2]+U)/4,K=(3*i[3]+H)/4,J=(3*i[4]+F)/4,Q=(3*i[5]+q)/4,tt=Math.min,et=Math.max;
if(!(et(h,$,X,y)>=tt(U,Z,J,F)&&tt(h,$,X,y)<=et(U,Z,J,F)&&et(v,Y,W,_)>=tt(H,K,Q,q)&&tt(v,Y,W,_)<=et(H,K,Q,q)))return c;
if(!d.startConnected&&!d.endConnected){var nt=L.getOverlaps(n,i);if(nt){for(var N=0;2>N;N++){
var it=nt[N];t(c,d,n,r,it[0],null,i,l,it[1],null,it[2])}return c}}var rt=L.isStraight(n),at=L.isStraight(i),st=new u(h,v),ot=new u(y,_),lt=new u(U,H),ut=new u(F,q),ct=1e-12;
return st.isClose(lt,ct)&&t(c,d,n,r,0,st,i,l,0,lt),!d.startConnected&&st.isClose(ut,ct)&&t(c,d,n,r,0,st,i,l,1,ut),
!d.endConnected&&ot.isClose(lt,ct)&&t(c,d,n,r,1,ot,i,l,0,lt),ot.isClose(ut,ct)&&t(c,d,n,r,1,ot,i,l,1,ut),
(rt&&at?s:rt||at?a:e)(n,i,r,l,c,d,0,1,0,1,0,!1,0),c},getOverlaps:function(t,e){function n(t){
var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=1e-6,a=1e-6,s=L.isStraight(t),o=L.isStraight(e),l=s&&o;
if(l){var c=n(t)<n(e),d=c?e:t,h=c?t:e,v=new g(d[0],d[1],d[6],d[7]);if(v.getDistance(new u(h[0],h[1]))>a||v.getDistance(new u(h[6],h[7]))>a)return null;
}else if(s^o)return null;for(var f=[t,e],m=[],b=0,p=0;2>b&&m.length<2;b+=0===p?0:1,
p=1^p){var y=L.getParameterOf(f[1^b],new u(f[b][0===p?0:6],f[b][0===p?1:7]));if(null!=y){
var _=0===b?[p,y]:[y,p];(0===m.length||i(_[0]-m[0][0])>r&&i(_[1]-m[0][1])>r)&&m.push(_);
}if(1===b&&0===m.length)return null}if(2===m.length){var x=L.getPart(t,m[0][0],m[1][0]),w=L.getPart(e,m[0][1],m[1][1]);
if(l||i(w[2]-x[2])<a&&i(w[3]-x[3])<a&&i(w[4]-x[4])<a&&i(w[5]-x[5])<a)return m[0][2]=x,
m[1][2]=w,m}return null}}}}),M=n.extend({_class:"CurveLocation",beans:!0,initialize:function gt(t,e,n,i,r){
if(e>=1-1e-6){var a=t.getNext();a&&(e=0,t=a)}this._id=l.get(gt),this._setCurve(t),
this._parameter=e,this._point=n||t.getPointAt(e,!0),this._overlaps=i?[i]:null,this._distance=r,
this._intersection=this._next=this._prev=null},_setCurve:function(t){var e=t._path;
this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,
this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),
this._segment=t,this._parameter=t===this._segment1?0:1},getSegment:function(){var t=this.getCurve(),e=this._segment;
if(!e){var n=this.getParameter();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),
this._segment=e}return e},getCurve:function(){function t(t){var e=t&&t.getCurve();
return e&&null!=(i._parameter=e.getParameterOf(i._point))?(i._setCurve(e),i._segment=t,
e):void 0}var e=this._curve,n=e&&e._path,i=this;return n&&n._version!==this._version&&(e=this._parameter=this._curve=null),
e||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){
var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();
return t&&t.getIndex()},getParameter:function(){var t=this.getCurve(),e=this._parameter;
return t&&null==e?this._parameter=t.getParameterOf(this._point):e},getIndexParameter:function(){
return this.getIndex()+this.getParameter()},getPoint:function(){return this._point;
},getOffset:function(){var t=this.getPath();return t?t._getOffset(this):this.getCurveOffset();
},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getPartLength(0,e);
},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance;
},divide:function(){var t=this.getCurve();return t&&t.divide(this.getParameter(),!0);
},split:function(){var t=this.getCurve();return t&&t.split(this.getParameter(),!0);
},equals:function(t,e){var n;return this===t||t instanceof M&&this.getPath()===t.getPath()&&((n=Math.abs(this.getIndexParameter()-t.getIndexParameter()))<1e-6||1>n&&this.getPoint().isClose(t.getPoint(),1e-6))&&(e||!this._intersection&&!t._intersection||this._intersection&&this._intersection.equals(t._intersection,!0))||!1;
},toString:function(){var t=[],e=this.getPoint(),n=s.instance;e&&t.push("point: "+e);
var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getParameter();return null!=r&&t.push("parameter: "+n.number(r)),
null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }";
},isTouching:function(){var t=this.getTangent(),e=this._intersection,n=e&&e.getTangent();
return t&&n?t.isCollinear(n):!1},isCrossing:function(t){function e(t,e,n){return n>e?t>e&&n>t:t>e&&d>=t||t>=-d&&n>t;
}var n=this._intersection;if(!n)return!1;var i=this._parameter,r=n._parameter,a=1e-6,s=1-a;
if(i>=a&&s>=i||r>=a&&s>=r)return!this.isTouching();var o=this._curve,l=o.getPrevious(),u=n._curve,c=u.getPrevious(),d=Math.PI;
if(!l||!c)return!1;t&&(new T.Circle({center:this.getPoint(),radius:10,strokeColor:"red"
}),new T({segments:[l.getSegment1(),l.getSegment2(),o.getSegment2()],strokeColor:"red",
strokeWidth:4}),new T({segments:[c.getSegment1(),c.getSegment2(),u.getSegment2()],
strokeColor:"orange",strokeWidth:4}));var h=l.getTangentAt(s,!0).negate().getAngleInRadians(),v=o.getTangentAt(a,!0).getAngleInRadians(),f=c.getTangentAt(s,!0).negate().getAngleInRadians(),m=u.getTangentAt(a,!0).getAngleInRadians();
return e(f,h,v)^e(m,h,v)&&e(f,v,h)^e(m,v,h)},isOverlap:function(){return!!this._overlaps;
},statics:{add:function(t,e,n){function i(t,e){var n=t.getPath(),i=e.getPath();return n===i?t.getIndexParameter()-e.getIndexParameter():n._id-i._id;
}function r(n,r){for(var a=n+r;a>=0&&s>a;a+=r){var o=t[a];if(u(i(e,o))>=1)break;if(e.equals(o))return o;
}return null}function a(t,e){var n=t._overlaps,i=e._overlaps;n?n.push.apply(n,i):t._overlaps=i.slice();
}for(var s=t.length,o=0,l=s-1,u=Math.abs;l>=o;){var c=o+l>>>1,d=t[c],h=i(e,d);if(n&&u(h)<1&&(d=e.equals(d)?d:r(c,-1)||r(c,1)))return e._overlaps&&(a(d,e),
a(d._intersection,e._intersection)),d;0>h?l=c-1:o=c+1}return t.splice(o,0,e),e},expand:function(t){
for(var e=t.slice(),n=0,i=t.length;i>n;n++)this.add(e,t[n]._intersection,!1);return e;
}}},n.each(L.evaluateMethods,function(t){if("getPoint"!==t){var e=t+"At";this[t]=function(){
var t=this.getParameter(),n=this.getCurve();return null!=t&&n&&n[e](t,!0)}}},{})),j=y.extend({
_class:"PathItem",initialize:function(){},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this.getCurves(),s=r?a:t.getCurves(),o=this._matrix.orNullIfIdentity(),l=r?o:(n||t._matrix).orNullIfIdentity(),u=a.length,c=r?u:s.length,d=[],h=[];
if(!r&&!this.getBounds(o).touches(t.getBounds(l)))return d;for(var v=0;c>v;v++)h[v]=s[v].getValues(l);
for(var v=0;u>v;v++){var f=a[v],m=r?h[v]:f.getValues(o);r&&L.getIntersections(m,null,f,f,d,{
include:e,startConnected:1===u&&f.getPoint1().equals(f.getPoint2())});for(var g=r?v+1:0;c>g&&(!i||!d.length);g++){
var b=s[g];L.getIntersections(m,h[g],f,b,d,{include:e,startConnected:r&&f.getPrevious()===b,
endConnected:r&&f.getNext()===b})}}return d},getCrossings:function(t){return this.getIntersections(t,function(t){
return t.isCrossing()})},_asPathItem:function(){return this},setPathData:function(t){
function e(t,e){var n=+i[t];return o&&(n+=l[e]),n}function n(t){return new u(e(t,"x"),e(t+1,"y"));
}var i,r,a,s=t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,l=new u,c=new u;this.clear();
for(var h=0,v=s&&s.length;v>h;h++){var f=s[h],m=f[0],g=m.toLowerCase();i=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);
var b=i&&i.length;switch(o=m===g,"z"!==r||/[mz]/.test(g)||this.moveTo(l=c),g){case"m":
case"l":for(var p="m"===g,y=0;b>y;y+=2)this[0===y&&p?"moveTo":"lineTo"](l=n(y));a=l,
p&&(c=l);break;case"h":case"v":for(var _="h"===g?"x":"y",y=0;b>y;y++)l[_]=e(y,_),
this.lineTo(l);a=l;break;case"c":for(var y=0;b>y;y+=6)this.cubicCurveTo(n(y),a=n(y+2),l=n(y+4));
break;case"s":for(var y=0;b>y;y+=4)this.cubicCurveTo(/[cs]/.test(r)?l.multiply(2).subtract(a):l,a=n(y),l=n(y+2)),
r=g;break;case"q":for(var y=0;b>y;y+=4)this.quadraticCurveTo(a=n(y),l=n(y+2));break;
case"t":for(var y=0;b>y;y+=2)this.quadraticCurveTo(a=/[qt]/.test(r)?l.multiply(2).subtract(a):l,l=n(y)),
r=g;break;case"a":for(var y=0;b>y;y+=7)this.arcTo(l=n(y+5),new d(+i[y],+i[y+1]),+i[y+2],+i[y+4],+i[y+3]);
break;case"z":this.closePath(!0)}r=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke());
},_contains:function(t){var e=this._getWinding(t,!1,!0);return!!("evenodd"===this.getWindingRule()?1&e:e);
}}),T=j.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){
this._closed=!1,this._segments=[],this._version=0;var n=Array.isArray(t)?"object"===$traceurRuntime["typeof"](t[0])?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;
n&&n.length>0?this.setSegments(n):(this._curves=e,this._selectedSegmentState=0,n||"string"!=typeof t||(this.setPathData(t),
t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&n.equals(this._segments,t._segments);
},clone:function(t){var n=new T(y.NO_INSERT);return n.setSegments(this._segments),
n._closed=this._closed,this._clockwise!==e&&(n._clockwise=this._clockwise),this._clone(n,t);
},_changed:function bt(t){if(bt.base.call(this,t),8&t){var n=this._parent;if(n&&(n._currentPath=e),
this._length=this._area=this._clockwise=this._monoCurves=e,16&t)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;r>i;i++)this._curves[i]._changed();
}else 32&t&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof P?t:this)._style;
},getSegments:function(){return this._segments},setSegments:function(t){var n=this.isFullySelected();
this._segments.length=0,this._selectedSegmentState=0,this._curves=e,t&&t.length>0&&this._add(k.readAll(t)),
n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0];
},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){
var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);
for(var i=0;n>i;i++)t[i]=new L(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){
return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1];
},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){
if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new L(this,this._segments[e-1],this._segments[0]));
}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function n(e,n){e._transformCoordinates(t,m,!1),
i=m[0],r=m[1],g?(b.push("M"+f.pair(i,r)),g=!1):(l=m[2],u=m[3],l===i&&u===r&&c===a&&d===o?n||b.push("l"+f.pair(i-a,r-o)):b.push("c"+f.pair(c-a,d-o)+" "+f.pair(l-a,u-o)+" "+f.pair(i-a,r-o))),
a=i,o=r,c=m[4],d=m[5]}var i,r,a,o,l,u,c,d,h=this._segments,v=h.length,f=new s(e),m=new Array(6),g=!0,b=[];
if(0===v)return"";for(var p=0;v>p;p++)n(h[p]);return this._closed&&v>0&&(n(h[0],!0),
b.push("z")),b.join("")}},{isEmpty:function(){return 0===this._segments.length},_transformContent:function(t){
for(var e=new Array(6),n=0,i=this._segments.length;i>n;n++)this._segments[n]._transformCoordinates(t,e,!0);
return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,a=null==e,s=a?n.length:e,o=0;r>o;o++){
var l=t[o];l._path&&(l=t[o]=l.clone()),l._path=this,l._index=s+o,l._selectionState&&this._updateSelection(l,0,l._selectionState);
}if(a)n.push.apply(n,t);else{n.splice.apply(n,[s,0].concat(t));for(var o=s+r,u=n.length;u>o;o++)n[o]._index=o;
}if(i){var c=s,d=Math.min(s+r,this._countCurves());t._curves&&(i.splice.apply(i,[s,0].concat(t._curves)),
c+=t._curves.length);for(var o=c;d>o;o++)i.splice(o,0,new L(this,null,null));this._adjustCurves(s,d);
}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;e>a;a++)n=r[a],
n._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&0===t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],
n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){
var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(k.readAll(arguments)):this._add([k.read(arguments)])[0];
},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(k.readAll(arguments,1),t):this._add([k.read(arguments,1)],t)[0];
},addSegment:function(){return this._add([k.read(arguments)])[0]},insertSegment:function(t){
return this._add([k.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(k.readAll(t));
},insertSegments:function(t,e){return this._add(k.readAll(e),t)},removeSegment:function(t){
return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,
e=n.pick(e,this._segments.length);var r=this._segments,a=this._curves,s=r.length,o=r.splice(t,e-t),l=o.length;
if(!l)return o;for(var u=0;l>u;u++){var c=o[u];c._selectionState&&this._updateSelection(c,c._selectionState,0),
c._index=c._path=null}for(var u=t,d=r.length;d>u;u++)r[u]._index=u;if(a){var h=t>0&&e===s+(this._closed?1:0)?t-1:t,a=a.splice(h,l);
i&&(o._curves=a.slice(1)),this._adjustCurves(h,h)}return this._changed(25),o},clear:"#removeSegments",
hasHandles:function(){for(var t=this._segments,e=0,n=t.length;n>e;e++)if(t[e].hasHandles())return!0;
return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;n>e;e++)t[e].clearHandles();
},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;i>n;n++)e+=t[n].getLength();
this._length=e}return this._length},getArea:function(){if(null==this._area){for(var t=this._segments,e=t.length,n=e-1,i=0,r=0,a=this._closed?e:n;a>r;r++)i+=L.getArea(L.getValues(t[r],t[n>r?r+1:0]));
this._area=i}return this._area},isClockwise:function(){return this._clockwise!==e?this._clockwise:this.getArea()>=0;
},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t;
},isFullySelected:function(){var t=this._segments.length;return this._selected&&t>0&&this._selectedSegmentState===7*t;
},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function pt(t){
t||this._selectSegments(!1),pt.base.call(this,t)},_selectSegments:function(t){var e=this._segments.length;
this._selectedSegmentState=t?7*e:0;for(var n=0;e>n;n++)this._segments[n]._selectionState=t?7:0;
},_updateSelection:function(t,e,n){t._selectionState=n;var i=this._selectedSegmentState+=n-e;
i>0&&this.setSelected(!0)},flatten:function(t){for(var e=new R(this,64,.1),n=0,i=e.length/Math.ceil(e.length/t),r=e.length+(this._closed?-i:i)/2,a=[];r>=n;)a.push(new k(e.getPointAt(n))),
n+=i;this.setSegments(a)},reduce:function(){for(var t=this.getCurves(),e=t.length-1;e>=0;e--){
var n=t[e];n.hasHandles()||0!==n.getLength()&&!n.isCollinear(n.getNext())||n.remove();
}return this},simplify:function(t){if(this._segments.length>2){var e=new O(this,t||2.5);
this.setSegments(e.fit())}},split:function(t,e){if(null===e)return null;if(1===arguments.length){
var n=t;if("number"==typeof n&&(n=this.getLocationAt(n)),!n)return null;t=n.index,
e=n.parameter}var i=1e-6,r=1-i;e>=r&&(t++,e--);var a=this.getCurves();if(t>=0&&t<a.length){
e>=i&&a[t++].divide(e,!0);var s,o=this.removeSegments(t,this._segments.length,!0);
return this._closed?(this.setClosed(!1),s=this):s=this._clone((new T).insertAbove(this,!0)),
s._add(o,0),this.addSegment(o[0]),s}return null},reverse:function(){this._segments.reverse();
for(var t=0,n=this._segments.length;n>t;t++){var i=this._segments[t],r=i._handleIn;
i._handleIn=i._handleOut,i._handleOut=r,i._index=t}this._curves=null,this._clockwise!==e&&(this._clockwise=!this._clockwise),
this._changed(9)},join:function(t){if(t){var e=t._segments,n=this.getLastSegment(),i=t.getLastSegment();
if(!i)return this;n&&n._point.equals(i._point)&&t.reverse();var r=t.getFirstSegment();
if(n&&n._point.equals(r._point))n.setHandleOut(r._handleOut),this._add(e.slice(1));else{
var a=this.getFirstSegment();a&&a._point.equals(r._point)&&t.reverse(),i=t.getLastSegment(),
a&&a._point.equals(i._point)?(a.setHandleIn(i._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice());
}t.closed&&this._add([e[0]]),t.remove()}var s=this.getFirstSegment(),o=this.getLastSegment();
return s!==o&&s._point.equals(o._point)&&(s.setHandleIn(o._handleIn),o.remove(),this.setClosed(!0)),
this},toShape:function(t){function e(t,e){var n=c[t],i=n.getNext(),r=c[e],a=r.getNext();
return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point));
}function n(t){var e=c[t],n=e.getPrevious(),i=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&i._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(i._point.subtract(e._point));
}function i(t){var e=c[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,a=.5522847498307936;
if(i.isOrthogonal(r)){var s=e._point,l=n._point,u=new g(s,i,!0).intersect(new g(l,r,!0),!0);
return u&&o.isZero(i.getLength()/u.subtract(s).getLength()-a)&&o.isZero(r.getLength()/u.subtract(l).getLength()-a);
}return!1}function r(t,e){return c[t]._point.getDistance(c[e]._point)}if(!this._closed)return null;
var a,s,l,u,c=this._segments;if(!this.hasHandles()&&4===c.length&&e(0,2)&&e(1,3)&&n(1)?(a=w.Rectangle,
s=new d(r(0,3),r(0,1)),u=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&i(0)&&i(2)&&i(4)&&i(6)&&e(1,5)&&e(3,7)?(a=w.Rectangle,
s=new d(r(1,6),r(0,3)),l=s.subtract(new d(r(0,7),r(1,2))).divide(2),u=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&i(0)&&i(1)&&i(2)&&i(3)&&(o.isZero(r(0,2)-r(1,3))?(a=w.Circle,
l=r(0,2)/2):(a=w.Ellipse,l=new d(r(2,0)/2,r(3,1)/2)),u=c[1]._point),a){var h=this.getPosition(!0),v=this._clone(new a({
center:h,size:s,radius:l,insert:!1}),t,!1);return v.rotate(u.subtract(h).getAngle()+90),
v}return null},_hitTestSelf:function(t,e){function n(e,n){return t.subtract(e).divide(n).length<=1;
}function i(t,i,r){if(!e.selected||i.isSelected()){var a=t._point;if(i!==a&&(i=i.add(a)),
n(i,_))return new E(r,f,{segment:t,point:i})}}function r(t,n){return(n||e.segments)&&i(t,t._point,"segment")||!n&&e.handles&&(i(t,t._handleIn,"handle-in")||i(t,t._handleOut,"handle-out"));
}function a(t){d.add(t)}function s(e){if(("round"!==o||"round"!==l)&&(d=new T({internal:!0,
closed:!0}),p||e._index>0&&e._index<b-1?"round"!==o&&(e._handleIn.isZero()||e._handleOut.isZero())&&T._addBevelJoin(e,o,C,c,a,!0):"round"!==l&&T._addSquareCap(e,l,C,a,!0),
!d.isEmpty())){var i;return d.contains(t)||(i=d.getNearestLocation(t))&&n(i.getPoint(),y);
}return n(e._point,_)}var o,l,c,d,h,v,f=this,m=this.getStyle(),g=this._segments,b=g.length,p=this._closed,y=e._tolerancePadding,_=y,x=e.stroke&&m.hasStroke(),w=e.fill&&m.hasFill(),S=e.curves,C=x?m.getStrokeWidth()/2:w&&e.tolerance>0||S?0:null;
if(null!==C&&(C>0?(o=m.getStrokeJoin(),l=m.getStrokeCap(),c=C*m.getMiterLimit(),_=y.add(new u(C,C))):o=l="round"),
!e.ends||e.segments||p){if(e.segments||e.handles)for(var k=0;b>k;k++)if(v=r(g[k]))return v;
}else if(v=r(g[0],!0)||r(g[b-1],!0))return v;if(null!==C){if(h=this.getNearestLocation(t)){
var A=h.getParameter();0===A||1===A&&b>1?s(h.getSegment())||(h=null):n(h.getPoint(),_)||(h=null);
}if(!h&&"miter"===o&&b>1)for(var k=0;b>k;k++){var L=g[k];if(t.getDistance(L._point)<=c&&s(L)){
h=L.getLocation();break}}}return!h&&w&&this._contains(t)||h&&!x&&!S?new E("fill",this):h?new E(x?"stroke":"curve",this,{
location:h,point:h.getPoint()}):null}},n.each(L.evaluateMethods,function(t){this[t+"At"]=function(e,n){
var i=this.getLocationAt(e,n);return i&&i[t]()}},{beans:!1,_getOffset:function(t){
var e=t&&t.getIndex();if(null!=e){for(var n=this.getCurves(),i=0,r=0;e>r;r++)i+=n[r].getLength();
var a=n[e],s=t.getParameter();return s>0&&(i+=a.getPartLength(0,s)),i}return null;
},getLocationOf:function(){for(var t=u.read(arguments),e=this.getCurves(),n=0,i=e.length;i>n;n++){
var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);
return t?t.getOffset():null},getLocationAt:function(t,e){var n=this.getCurves(),i=0;
if(e){var r=~~t,a=n[r];return a?a.getLocationAt(t-r,!0):null}for(var s=0,o=n.length;o>s;s++){
var l=i,a=n[s];if(i+=a.getLength(),i>t)return a.getLocationAt(t-l)}return t<=this.getLength()?new M(n[n.length-1],1):null;
},getNearestLocation:function(){for(var t=u.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;a>r;r++){
var s=e[r].getNearestLocation(t);s._distance<n&&(n=s._distance,i=s)}return i},getNearestPoint:function(){
return this.getNearestLocation.apply(this,arguments).getPoint()}}),new function(){
function e(t,e,n,i){function r(e){var n=s[e],i=s[e+1];(d!=n||h!=i)&&(t.beginPath(),
t.moveTo(d,h),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,a,0,2*Math.PI,!0),
t.fill())}for(var a=i/2,s=new Array(6),o=0,l=e.length;l>o;o++){var u=e[o];u._transformCoordinates(n,s,!1);
var c=u._selectionState,d=s[0],h=s[1];if(1&c&&r(2),2&c&&r(4),t.fillRect(d-a,h-a,i,i),
!(4&c)){var v=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(d-a+1,h-a+1,i-2,i-2),t.fillStyle=v;
}}}function n(t,e,n){function i(e){if(n)e._transformCoordinates(n,f,!1),r=f[0],a=f[1];else{
var i=e._point;r=i._x,a=i._y}if(m)t.moveTo(r,a),m=!1;else{if(n)l=f[2],u=f[3];else{
var h=e._handleIn;l=r+h._x,u=a+h._y}l===r&&u===a&&c===s&&d===o?t.lineTo(r,a):t.bezierCurveTo(c,d,l,u,r,a);
}if(s=r,o=a,n)c=f[4],d=f[5];else{var h=e._handleOut;c=s+h._x,d=o+h._y}}for(var r,a,s,o,l,u,c,d,h=e._segments,v=h.length,f=new Array(6),m=!0,g=0;v>g;g++)i(h[g]);
e._closed&&v>0&&i(h[0])}return{_draw:function(e,i,r){function a(t){return d[(t%h+h)%h];
}var s=i.dontStart,o=i.dontFinish||i.clip,l=this.getStyle(),u=l.hasFill(),c=l.hasStroke(),d=l.getDashArray(),h=!t.support.nativeDash&&c&&d&&d.length;
if(s||e.beginPath(),!s&&this._currentPath?e.currentPath=this._currentPath:(u||c&&!h||o)&&(n(e,this,r),
this._closed&&e.closePath(),s||(this._currentPath=e.currentPath)),!o&&(u||c)&&(this._setStyles(e),
u&&(e.fill(l.getWindingRule()),e.shadowColor="rgba(0,0,0,0)"),c)){if(h){s||e.beginPath();
var v,f=new R(this,32,.25,r),m=f.length,g=-l.getDashOffset(),b=0;for(g%=m;g>0;)g-=a(b--)+a(b--);
for(;m>g;)v=g+a(b++),(g>0||v>0)&&f.drawPart(e,Math.max(g,0),Math.max(v,0)),g=v+a(b++);
}e.stroke()}},_drawSelected:function(i,r){i.beginPath(),n(i,this,r),i.stroke(),e(i,this._segments,r,t.settings.handleSize);
}}},new function(){function t(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var a=1;e>a;a++)i[a]=1/r,
r=(e-1>a?4:2)-i[a],n[a]=(t[a]-n[a-1])/r;for(var a=1;e>a;a++)n[e-a-1]-=i[e-a]*n[e-a];
return n}return{smooth:function(){var e=this._segments,n=e.length,i=this._closed,r=n,a=0;
if(!(2>=n)){i&&(a=Math.min(n,4),r+=2*Math.min(n,a));for(var s=[],o=0;n>o;o++)s[o+a]=e[o]._point;
if(i)for(var o=0;a>o;o++)s[o]=e[o+n-a]._point,s[o+n+a]=e[o]._point;else r--;for(var l=[],o=1;r-1>o;o++)l[o]=4*s[o]._x+2*s[o+1]._x;
l[0]=s[0]._x+2*s[1]._x,l[r-1]=3*s[r-1]._x;for(var c=t(l),o=1;r-1>o;o++)l[o]=4*s[o]._y+2*s[o+1]._y;
l[0]=s[0]._y+2*s[1]._y,l[r-1]=3*s[r-1]._y;var d=t(l);if(i){for(var o=0,h=n;a>o;o++,
h++){var v=o/a,f=1-v,m=o+a,g=h+a;c[h]=c[o]*v+c[h]*f,d[h]=d[o]*v+d[h]*f,c[g]=c[m]*f+c[g]*v,
d[g]=d[m]*f+d[g]*v}r--}for(var b=null,o=a;r-a>=o;o++){var p=e[o-a];b&&p.setHandleIn(b.subtract(p._point)),
r>o&&(p.setHandleOut(new u(c[o],d[o]).subtract(p._point)),b=r-1>o?new u(2*s[o+1]._x-c[o+1],2*s[o+1]._y-d[o+1]):new u((s[r]._x+c[r-1])/2,(s[r]._y+d[r-1])/2));
}if(i&&b){var p=this._segments[0];p.setHandleIn(b.subtract(p._point))}}}}},new function(){
function t(t){var e=t._segments;if(0===e.length)throw new Error("Use a moveTo() command first");
return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),
t.length||this._add([new k(u.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.");
},lineTo:function(){this._add([new k(u.read(arguments))])},cubicCurveTo:function(){
var e=u.read(arguments),n=u.read(arguments),i=u.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),
this._add([new k(i,n.subtract(i))])},quadraticCurveTo:function(){var e=u.read(arguments),n=u.read(arguments),i=t(this)._point;
this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n);
},curveTo:function(){var e=u.read(arguments),i=u.read(arguments),r=n.pick(n.read(arguments),.5),a=1-r,s=t(this)._point,o=e.subtract(s.multiply(a*a)).subtract(i.multiply(r*r)).divide(2*r*a);
if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);
this.quadraticCurveTo(o,i)},arcTo:function(){var e,i,r,a,s,o=t(this),l=o._point,c=u.read(arguments),h=n.peek(arguments),v=n.pick(h,!0);
if("boolean"==typeof v)var f=l.add(c).divide(2),e=f.add(f.subtract(l).rotate(v?-90:90));else if(n.remain(arguments)<=2)e=c,
c=u.read(arguments);else{var b=d.read(arguments);if(b.isZero())return this.lineTo(c);
var p=n.read(arguments),v=!!n.read(arguments),y=!!n.read(arguments),f=l.add(c).divide(2),_=l.subtract(f).rotate(-p),x=_.x,w=_.y,S=Math.abs,C=S(b.width),E=S(b.height),A=C*C,L=E*E,M=x*x,j=w*w,T=Math.sqrt(M/A+j/L);
if(T>1&&(C*=T,E*=T,A=C*C,L=E*E),T=(A*L-A*j-L*M)/(A*j+L*M),S(T)<1e-12&&(T=0),0>T)throw new Error("Cannot create an arc with the given arguments");
i=new u(C*w/E,-E*x/C).multiply((y===v?-1:1)*Math.sqrt(T)).rotate(p).add(f),s=(new m).translate(i).rotate(p).scale(C,E),
a=s._inverseTransform(l),r=a.getDirectedAngle(s._inverseTransform(c)),!v&&r>0?r-=360:v&&0>r&&(r+=360);
}if(e){var P=new g(l.add(e).divide(2),e.subtract(l).rotate(90),!0),R=new g(e.add(c).divide(2),c.subtract(e).rotate(90),!0),O=new g(l,c),I=O.getSide(e);
if(i=P.intersect(R,!0),!i){if(!I)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments");
}a=l.subtract(i),r=a.getDirectedAngle(c.subtract(i));var D=O.getSide(i);0===D?r=I*Math.abs(r):I===D&&(r+=0>r?360:-360);
}for(var V=Math.abs(r),N=V>=360?4:Math.ceil(V/90),B=r/N,z=B*Math.PI/360,G=4/3*Math.sin(z)/(1+Math.cos(z)),U=[],H=0;N>=H;H++){
var _=c,F=null;if(N>H&&(F=a.rotate(90).multiply(G),s?(_=s._transformPoint(a),F=s._transformPoint(a.add(F)).subtract(_)):_=i.add(a)),
0===H)o.setHandleOut(F);else{var q=a.rotate(-90).multiply(G);s&&(q=s._transformPoint(a.add(q)).subtract(_)),
U.push(new k(_,q,F))}a=a.rotate(B)}this._add(U)},lineBy:function(){var e=u.read(arguments),n=t(this)._point;
this.lineTo(n.add(e))},curveBy:function(){var e=u.read(arguments),i=u.read(arguments),r=n.read(arguments),a=t(this)._point;
this.curveTo(a.add(e),a.add(i),r)},cubicCurveBy:function(){var e=u.read(arguments),n=u.read(arguments),i=u.read(arguments),r=t(this)._point;
this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=u.read(arguments),n=u.read(arguments),i=t(this)._point;
this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,i=e.add(u.read(arguments)),r=n.pick(n.peek(arguments),!0);
"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,e.add(u.read(arguments)))},closePath:function(t){
this.setClosed(!0),t&&this.join()}}},{_getBounds:function(t,e){return T[t](this._segments,this._closed,this.getStyle(),e);
},statics:{getBounds:function(t,e,n,i,r){function a(t){t._transformCoordinates(i,o,!1);
for(var e=0;2>e;e++)L._addBounds(l[e],l[e+4],o[e+2],o[e],e,r?r[e]:0,u,c,d);var n=l;
l=o,o=n}var s=t[0];if(!s)return new v;for(var o=new Array(6),l=s._transformCoordinates(i,new Array(6),!1),u=l.slice(0,2),c=u.slice(),d=new Array(2),h=1,f=t.length;f>h;h++)a(t[h]);
return e&&a(s),new v(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i){
function r(t){h=h.include(i?i._transformPoint(t,t):t)}function a(t){h=h.unite(b.setCenter(i?i._transformPoint(t._point):t._point));
}function s(t,e){var n=t._handleIn,i=t._handleOut;"round"===e||!n.isZero()&&!i.isZero()&&n.isCollinear(i)?a(t):T._addBevelJoin(t,e,u,g,r);
}function o(t,e){"round"===e?a(t):T._addSquareCap(t,e,u,r)}if(!n.hasStroke())return T.getBounds(t,e,n,i);
for(var l=t.length-(e?0:1),u=n.getStrokeWidth()/2,c=T._getPenPadding(u,i),h=T.getBounds(t,e,n,i,c),f=n.getStrokeJoin(),m=n.getStrokeCap(),g=u*n.getMiterLimit(),b=new v(new d(c).multiply(2)),p=1;l>p;p++)s(t[p],f);
return e?s(t[0],f):l>0&&(o(t[0],m),o(t[t.length-1],m)),h},_getPenPadding:function(t,e){
if(!e)return[t,t];var n=e.shiftless(),i=n.transform(new u(t,0)),r=n.transform(new u(0,t)),a=i.getAngleInRadians(),s=i.getLength(),o=r.getLength(),l=Math.sin(a),c=Math.cos(a),d=Math.tan(a),h=-Math.atan(o*d/s),v=Math.atan(o/(d*s));
return[Math.abs(s*Math.cos(h)*c-o*Math.sin(h)*l),Math.abs(o*Math.sin(v)*c+s*Math.cos(v)*l)];
},_addBevelJoin:function(t,e,n,i,r,a){var s=t.getCurve(),o=s.getPrevious(),l=s.getPointAt(0,!0),c=o.getNormalAt(1,!0),d=s.getNormalAt(0,!0),h=c.getDirectedAngle(d)<0?-n:n;
if(c.setLength(h),d.setLength(h),a&&(r(l),r(l.add(c))),"miter"===e){var v=new g(l.add(c),new u(-c.y,c.x),!0).intersect(new g(l.add(d),new u(-d.y,d.x),!0),!0);
if(v&&l.getDistance(v)<=i&&(r(v),!a))return}a||r(l.add(c)),r(l.add(d))},_addSquareCap:function(t,e,n,i,r){
var a=t._point,s=t.getLocation(),o=s.getNormal().multiply(n);r&&(i(a.subtract(o)),
i(a.add(o))),"square"===e&&(a=a.add(o.rotate(0===s.getParameter()?-90:90))),i(a.add(o)),
i(a.subtract(o))},getHandleBounds:function(t,e,n,i,r,a){for(var s=new Array(6),o=1/0,l=-o,u=o,c=l,d=0,h=t.length;h>d;d++){
var f=t[d];f._transformCoordinates(i,s,!1);for(var m=0;6>m;m+=2){var g=0===m?a:r,b=g?g[0]:0,p=g?g[1]:0,y=s[m],_=s[m+1],x=y-b,w=y+b,S=_-p,C=_+p;
o>x&&(o=x),w>l&&(l=w),u>S&&(u=S),C>c&&(c=C)}}return new v(o,u,l-o,c-u)},getRoughBounds:function(t,e,n,i){
var r=n.hasStroke()?n.getStrokeWidth()/2:0,a=r;return r>0&&("miter"===n.getStrokeJoin()&&(a=r*n.getMiterLimit()),
"square"===n.getStrokeCap()&&(a=Math.max(a,r*Math.sqrt(2)))),T.getHandleBounds(t,e,n,i,T._getPenPadding(r,i),T._getPenPadding(a,i));
}}});T.inject({statics:new function(){function t(t,e,i){var r=n.getNamed(i),a=new T(r&&r.insert===!1&&y.NO_INSERT);
return a._add(t),a._closed=e,a.set(r)}function e(e,n,i){for(var a=new Array(4),s=0;4>s;s++){
var o=r[s];a[s]=new k(o._point.multiply(n).add(e),o._handleIn.multiply(n),o._handleOut.multiply(n));
}return t(a,!0,i)}var i=.5522847498307936,r=[new k([-1,0],[0,i],[0,-i]),new k([0,-1],[-i,0],[i,0]),new k([1,0],[0,-i],[0,i]),new k([0,1],[i,0],[-i,0])];
return{Line:function(){return t([new k(u.readNamed(arguments,"from")),new k(u.readNamed(arguments,"to"))],!1,arguments);
},Circle:function(){var t=u.readNamed(arguments,"center"),i=n.readNamed(arguments,"radius");
return e(t,new d(i),arguments)},Rectangle:function(){var e,n=v.readNamed(arguments,"rectangle"),r=d.readNamed(arguments,"radius",0,{
readNull:!0}),a=n.getBottomLeft(!0),s=n.getTopLeft(!0),o=n.getTopRight(!0),l=n.getBottomRight(!0);
if(!r||r.isZero())e=[new k(a),new k(s),new k(o),new k(l)];else{r=d.min(r,n.getSize(!0).divide(2));
var u=r.width,c=r.height,h=u*i,f=c*i;e=[new k(a.add(u,0),null,[-h,0]),new k(a.subtract(0,c),[0,f]),new k(s.add(0,c),null,[0,-f]),new k(s.add(u,0),[-h,0],null),new k(o.subtract(u,0),null,[h,0]),new k(o.add(0,c),[0,-f],null),new k(l.subtract(0,c),null,[0,f]),new k(l.subtract(u,0),[h,0])];
}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=w._readEllipse(arguments);
return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=u.readNamed(arguments,"from"),e=u.readNamed(arguments,"through"),i=u.readNamed(arguments,"to"),r=n.getNamed(arguments),a=new T(r&&r.insert===!1&&y.NO_INSERT);
return a.moveTo(t),a.arcTo(e,i),a.set(r)},RegularPolygon:function(){for(var e=u.readNamed(arguments,"center"),i=n.readNamed(arguments,"sides"),r=n.readNamed(arguments,"radius"),a=360/i,s=!(i%3),o=new u(0,s?-r:r),l=s?-1:.5,c=new Array(i),d=0;i>d;d++)c[d]=new k(e.add(o.rotate((d+l)*a)));
return t(c,!0,arguments)},Star:function(){for(var e=u.readNamed(arguments,"center"),i=2*n.readNamed(arguments,"points"),r=n.readNamed(arguments,"radius1"),a=n.readNamed(arguments,"radius2"),s=360/i,o=new u(0,-1),l=new Array(i),c=0;i>c;c++)l[c]=new k(e.add(o.rotate(s*c).multiply(c%2?a:r)));
return t(l,!0,arguments)}}}});var P=j.extend({_class:"CompoundPath",_serializeFields:{
children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments));
},insertChildren:function yt(t,n,i){for(var r=n.length-1;r>=0;r--){var a=n[r];a instanceof P&&(n.splice.apply(n,[r,1].concat(a.removeChildren())),
a.remove())}n=yt.base.call(this,t,n,i,T);for(var r=0,s=!i&&n&&n.length;s>r;r++){var a=n[r];
a._clockwise===e&&a.setClockwise(0===a._index)}return n},reverse:function(){for(var t=this._children,e=0,n=t.length;n>e;e++)t[e].reverse();
},smooth:function(){for(var t=0,e=this._children.length;e>t;t++)this._children[t].smooth();
},reduce:function _t(){for(var t=this._children,e=t.length-1;e>=0;e--){var n=t[e].reduce();
n.isEmpty()&&t.splice(e,1)}if(0===t.length){var n=new T(y.NO_INSERT);return n.insertAbove(this),
n.setStyle(this._style),this.remove(),n}return _t.base.call(this)},isClockwise:function(){
var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()!==!!t&&this.reverse();
},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment();
},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment();
},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;i>n;n++)e.push.apply(e,t[n].getCurves());
return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve();
},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},
getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;i>n;n++)e+=t[n].getArea();
return e}},{beans:!0,getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;a>r;r++){
var s=n[r],o=s._matrix;i.push(s.getPathData(t&&!o.isIdentity()?t.chain(o):t,e))}return i.join(" ");
}},{_getChildHitTestOptions:function(t){return t["class"]===T||"path"===t.type?t:new n(t,{
fill:!1})},_draw:function(t,e,n){var i=this._children;if(0!==i.length){if(this._currentPath)t.currentPath=this._currentPath;else{
e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,a=i.length;a>r;r++)i[r].draw(t,e,n);
this._currentPath=t.currentPath}if(!e.clip){this._setStyles(t);var s=this._style;s.hasFill()&&(t.fill(s.getWindingRule()),
t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){
for(var i=this._children,r=0,a=i.length;a>r;r++){var s=i[r],o=s._matrix;n[s._id]||s._drawSelected(t,o.isIdentity()?e:e.chain(o));
}}},new function(){function t(t,e){var n=t._children;if(e&&0===n.length)throw new Error("Use a moveTo() command first");
return n[n.length-1]}var e={moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new T;
n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=u.read(arguments);
this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}};
return n.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(n){
e[n]=function(){var e=t(this,!0);e[n].apply(e,arguments)}}),e});j.inject(new function(){
function e(t){return t.clone(!1).reduce().resolveCrossings().transform(null,!0,!0);
}function n(t,e,n,i,r){var a=new t(y.NO_INSERT);return a.addChildren(e,!0),r&&(a=a.reduce()),
a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.setStyle(n._style),
a}function i(t,i,r){function a(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];f.push.apply(f,i._segments),
m.push.apply(m,i._getMonoCurves())}}h={},v={};var o=e(t),l=i&&t!==i&&e(i);l&&/^(subtract|exclude)$/.test(r)^l.isClockwise()!==o.isClockwise()&&l.reverse();
var u=M.expand(o.getIntersections(l,function(t){return t.isCrossing()||l&&t.isOverlap();
}));s(u);var f=[],m=[];a(o._children||[o]),l&&a(l._children||[l]);for(var g=0,b=u.length;b>g;g++)c(u[g]._segment,o,l,m,r);
for(var g=0,b=f.length;b>g;g++){var p=f[g];null==p._winding&&c(p,o,l,m,r)}return n(P,d(f,r),t,i,!0);
}function r(t,e){var n=e._intersection,i=[t,e._id,"id",e.getPath()._id,"i",e.getIndex(),"t",e._parameter,"o",!!e._overlaps,"p",e.getPoint(),"Other",n._id,"id",n.getPath()._id,"i",n.getIndex(),"t",n._parameter,"o",!!n._overlaps,"p",n.getPoint()];
console.log(i.map(function(t){return null==t?"-":t}).join(" "))}function a(t,e){for(var n=t;n;){
if(n===e)return;n=n._prev}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._prev;)e=e._prev;
t._next=e,e._prev=t}}function s(t){window.reportIntersections&&(console.log("Crossings",t.length/2),
t.forEach(function(t){t._other||(r("Intersection",t),new T.Circle({center:t.point,
radius:2*b,strokeColor:"red",strokeScaling:!1}))}));for(var e,n,i=1e-6,s=1-i,o=!1,l=[],u=t.length-1;u>=0;u--){
var c=t[u],d=c._curve,h=c._parameter,v=h;d!==e?o=!d.hasHandles():n>0&&(h/=n);var f=void 0;
i>h?f=d._segment1:h>s?f=d._segment2:(f=d.divide(h,!0,!0)._segment1,o&&l.push(f)),
c._setSegment(f);var m=f._intersection,g=c._intersection;if(m){a(m,g);for(var p=m;p;)a(p._intersection,m),
p=p._next}else f._intersection=g;e=d,n=v}for(var u=0,y=l.length;y>u;u++)l[u].clearHandles();
}function l(t,e,n,i){var r=1e-6,a=1e-6,s=1-a,c=t.x,d=t.y,h=0,v=0,f=[],m=Math.abs;if(n){
for(var g=-(1/0),b=1/0,p=d-r,y=d+r,_=0,x=e.length;x>_;_++){var w=e[_].values;if(L.solveCubic(w,0,c,f,0,1)>0)for(var S=f.length-1;S>=0;S--){
var C=L.getPoint(w,f[S]).y;p>C&&C>g?g=C:C>y&&b>C&&(b=C)}}g=(g+d)/2,b=(b+d)/2,g>-(1/0)&&(h=l(new u(c,g),e)),
1/0>b&&(v=l(new u(c,b),e))}else for(var E,k,A=c-r,M=c+r,j=!1,_=0,x=e.length;x>_;_++){
var T=e[_],w=T.values,P=T.winding;if(P&&(1===P&&d>=w[1]&&d<=w[7]||d>=w[7]&&d<=w[1])&&1===L.solveCubic(w,1,d,f,0,1)){
var R=f[0];if(!(R>s&&j&&T.next!==e[_+1]||a>R&&k>s&&T.previous===E)){var O=L.getPoint(w,R).x,I=L.getTangent(w,R).y,D=!1;
o.isZero(I)&&!L.isStraight(w)||a>R&&I*L.getTangent(T.previous.values,1).y<0||R>s&&I*L.getTangent(T.next.values,0).y<0?i&&O>=A&&M>=O&&(++h,
++v,D=!0):A>=O?(h+=P,D=!0):O>=M&&(v+=P,D=!0),T.previous!==e[_-1]&&(j=a>R&&D)}E=T,
k=R}}return Math.max(m(h),m(v))}function c(t,e,n,i,r){var a=1e-6,s=[],o=t,u=0,c=0;
do{var d=t.getCurve(),h=d.getLength();s.push({segment:t,curve:d,length:h}),u+=h,t=t.getNext();
}while(t&&!t._intersection&&t!==o);for(var v=0;3>v;v++)for(var h=u*(v+1)/4,f=0,m=s.length;m>f;f++){
var g=s[f],b=g.length;if(b>=h){(a>h||a>b-h)&&(h=b/2);var d=g.curve,p=d._path,y=p._parent,_=d.getPointAt(h),x=d.isHorizontal();
y instanceof P&&(p=y),c+="subtract"===r&&n&&(p===e&&n._getWinding(_,x)||p===n&&!e._getWinding(_,x))?0:l(_,i,x);
break}h-=b}for(var w=Math.round(c/3),S=s.length-1;S>=0;S--)s[S].segment._winding=w;
}function d(e,n){function i(t,e,n){var i=t.point,r=Math.round(i.x/(10*b))+","+Math.round(i.y/(10*b)),a=h[r]||0;
h[r]=a+1;var s=x*b,e=new D({point:i.add(new u(s,s/2).add(0,a*s*1.2).rotate(p)),content:e,
justification:"left",fillColor:n,fontSize:x});return e.pivot=e.globalToLocal(e.point),
e.scale(b),e.rotate(p),new T.Line({from:e.point,to:t.point,strokeColor:n,strokeScaling:!1
}),e}function r(t,e,n,r,s){window.reportSegments&&(new T.Circle({center:t.point,radius:x/2*b,
strokeColor:s,strokeScaling:!1}),i(t,"#"+m+"."+(M?M._segments.length+1:1)+" ("+(r+1)+"): "+n+"	  id: "+t._path._id+"."+t._index+(e?" -> "+e._path._id+"."+e._index:"")+"	  v: "+(t._visited?1:0)+"	  p: "+t._point+"	  op: "+a(t)+"	  ov: "+!(!j||!j._overlaps)+"	  wi: "+t._winding+"	  mu: "+!(!j||!j._next),s));
}function a(t,e){if(t._visited)return!1;if(!C)return!0;var n=t._winding,i=t._intersection;
return i&&!e&&E&&i._overlaps&&(n=E[n]||n),C(n)}function s(t,e){for(var n=e._intersection,i=n&&n._overlaps,r=L.getValues(t,e),a=0,s=i&&i.length;s>a;a++)if(L.getOverlaps(r,i[a]))return!0;
return!1}function l(t,e){if(!t._next)return t;for(;t;){var n=t._segment,i=n.getNext(),r=i._intersection;
if(window.reportSegments&&console.log("getIntersection("+e+"), seg: "+n._path._id+"."+n._index+", next: "+i._path._id+"."+i._index+", seg vis:"+!!n._visited+", next vis:"+!!i._visited+", next start:"+(i===w)+", seg wi:"+n._winding+", next wi:"+i._winding+", seg op:"+a(n,!0)+", next op:"+(!(e&&s(n,i))&&a(i,!0)||!e&&r&&a(r._segment,!0))+", seg ov: "+!(!n._intersection||!n._intersection._overlaps)+", next ov: "+!(!i._intersection||!i._intersection._overlaps)+", more: "+!!t._next),
i===w||!n._visited&&!i._visited&&(!C||(!e||a(n,!0))&&((!e||!s(n,i))&&a(i,!0)||!e&&r&&a(r._segment,!0))))return t;
t=t._next}return null}f=0,m=1;for(var c=0,d=0;c<(window.reportWindings?e.length:0);c++,
d++){var _=e[c];M=_._path,id=M._id,point=_.point,j=_._intersection,ix=j,ixs=ix&&ix._segment,
n1x=j&&j._next,n1xs=n1x&&n1x._segment,n2x=n1x&&n1x._next,n2xs=n2x&&n2x._segment,n3x=n2x&&n2x._next,
n3xs=n3x&&n3x._segment,item=M._parent instanceof P?M._parent:M,id in v||(v[id]=++f,
d=0),i(_,"#"+f+"."+(d+1)+"	  id: "+_._path._id+"."+_._index+"	  ix: "+(ixs&&ixs._path._id+"."+ixs._index+"("+ix._id+")"||"--")+"	  n1x: "+(n1xs&&n1xs._path._id+"."+n1xs._index+"("+n1x._id+")"||"--")+"	  n2x: "+(n2xs&&n2xs._path._id+"."+n2xs._index+"("+n2x._id+")"||"--")+"	  n3x: "+(n3xs&&n3xs._path._id+"."+n3xs._index+"("+n3x._id+")"||"--")+"	  pt: "+_._point+"	  ov: "+!(!j||!j._overlaps)+"	  wi: "+_._winding,item.strokeColor||item.fillColor||"black");
}for(var w,S=[],C=g[n],E={unite:{1:2},intersect:{2:1}}[n],c=0,A=e.length;A>c;c++){
var _=e[c],M=null;if(!_._intersection&&a(_)){for(w=null;_!==w;){var j=_._intersection;
j&&window.reportSegments&&console.log("-----\n#"+m+"."+(M?M._segments.length+1:1)+", Before getIntersection(), seg: "+_._path._id+"."+_._index+", other: "+j._segment._path._id+"."+j._segment._index),
j=j&&(l(j,!0)||l(j,!1))||j;var R=j&&j._segment;j&&window.reportSegments&&console.log("After getIntersection(), seg: "+_._path._id+"."+_._index+", other: "+j._segment._path._id+"."+j._segment._index);
var O=M&&_._handleIn;if(M&&R?C?j._overlaps&&"intersect"!==n?a(R,!0)?(r(_,R,"overlap-cross",c,"orange"),
_=R):r(_,R,"overlap-stay",c,"orange"):"exclude"===n?(r(_,R,"exclude-cross",c,"green"),
_=R):a(R)?(r(_,R,"cross",c,"green"),_=R):r(_,null,"stay",c,"blue"):(r(_,R,"self-int",c,"purple"),
_=R):r(_,null,"add",c,"black"),_._visited){_===w?r(_,null,"done",c,"red"):console.error("Visited segment encountered, aborting #"+m+"."+(M?M._segments.length+1:1)+", id: "+_._path._id+"."+_._index+", multiple: "+!(!j||!j._next));
break}M||(M=new T(y.NO_INSERT),w=_),M.add(new k(_._point,O,_._handleOut)),_._visited=!0,
_=_.getNext(),_===w&&r(_,null,"done",c,"red")}M&&(_===w?(M.firstSegment.setHandleIn(_._handleIn),
M.setClosed(!0),window.reportSegments&&console.log("Boolean operation completed","#"+m+"."+(M?M._segments.length+1:1))):(console.error("Boolean operation results in open path, segs =",M._segments.length,"length = ",M.getLength(),"#"+m+"."+(M?M._segments.length+1:1)),
t.project.activeLayer.addChild(M),M.strokeColor="cyan",M.strokeWidth=2,M.strokeScaling=!1,
M=null),M&&(M._segments.length>4||!o.isZero(M.getArea()))&&(S.push(M),M=null),m++);
}}return S}var h,v,f,m,g={unite:function(t){return 1===t||0===t},intersect:function(t){
return 2===t},subtract:function(t){return 1===t},exclude:function(t){return 1===t;
}},b=.1,p=0,x=5;return{_getWinding:function(t,e,n){return l(t,this._getMonoCurves(),e,n);
},unite:function(t){return i(this,t,"unite")},intersect:function(t){return i(this,t,"intersect");
},subtract:function(t){return i(this,t,"subtract")},exclude:function(t){return i(this,t,"exclude");
},divide:function(t){return n(_,[this.subtract(t),this.intersect(t)],this,t,!0)},
resolveCrossings:function(){var t=window.reportSegments,e=window.reportWindings,i=window.reportIntersections;
window.reportSegments=!1,window.reportWindings=!1,window.reportIntersections=!1;var r=this.getCrossings();
if(!r.length)return window.reportSegments=t,window.reportWindings=e,window.reportIntersections=i,
this.reorient();s(M.expand(r));for(var a=this._children||[this],o=[],l=0,u=a.length;u>l;l++)o.push.apply(o,a[l]._segments);
var c=n(P,d(o),this,null,!1).reorient();return window.reportSegments=t,window.reportWindings=e,
window.reportIntersections=i,c}}}),T.inject({_getMonoCurves:function(){function t(t){
var e=t[1],r=t[7],a={values:t,winding:e===r?0:e>r?-1:1,previous:n,next:null};n&&(n.next=a),
i.push(a),n=a}function e(e){if(0!==L.getLength(e)){var n=e[1],i=e[3],r=e[5],a=e[7];
if(L.isStraight(e))t(e);else{var s=3*(i-r)-n+a,l=2*(n+r)-4*i,u=i-n,c=1e-6,d=1-c,h=[],v=o.solveQuadratic(s,l,u,h,c,d);
if(0===v)t(e);else{h.sort();var f=h[0],m=L.subdivide(e,f);t(m[0]),v>1&&(f=(h[1]-f)/(1-f),
m=L.subdivide(m[1],f),t(m[0])),t(m[1])}}}}var n,i=this._monoCurves;if(!i){i=this._monoCurves=[];
for(var r=this.getCurves(),a=this._segments,s=0,l=r.length;l>s;s++)e(r[s].getValues());
if(!this._closed&&a.length>1){var u=a[a.length-1]._point,c=a[0]._point,d=u._x,h=u._y,v=c._x,f=c._y;
e([d,h,d,h,v,f,v,f])}if(i.length>0){var m=i[0],g=i[i.length-1];m.previous=g,g.next=m;
}}return i},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){
for(var n=this._getMonoCurves(),i=[],r=e.y,a=[],s=0,o=n.length;o>s;s++){var l=n[s].values;
if((1===n[s].winding&&r>=l[1]&&r<=l[7]||r>=l[7]&&r<=l[1])&&L.solveCubic(l,1,r,i,0,1)>0)for(var u=i.length-1;u>=0;u--)a.push(L.getPoint(l,i[u]).x);
if(a.length>1)break}e.x=(a[0]+a[1])/2}return e},reorient:function(){return this.setClockwise(!0),
this}}),P.inject({_getMonoCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;i>n;n++)e.push.apply(e,t[n]._getMonoCurves());
return e},reorient:function(){var t=this.removeChildren().sort(function(t,e){return e.getBounds().getArea()-t.getBounds().getArea();
});if(t.length>0){this.addChildren(t);for(var e=t[0].isClockwise(),n=1,i=t.length;i>n;n++){
for(var r=t[n].getInteriorPoint(),a=0,s=n-1;s>=0;s--)t[s].contains(r)&&a++;t[n].setClockwise(a%2===0&&e);
}}return this}});var R=n.extend({_class:"PathIterator",initialize:function(t,e,n,i){
function r(t,e){var n=L.getValues(t,e,i);o.push(n),a(n,t._index,0,1)}function a(t,e,i,r){
if(r-i>c&&!L.isFlatEnough(t,n||.25)){var s=L.subdivide(t,.5),o=(i+r)/2;a(s[0],e,i,o),
a(s[1],e,o,r)}else{var d=t[6]-t[0],h=t[7]-t[1],v=Math.sqrt(d*d+h*h);v>1e-6&&(u+=v,
l.push({offset:u,value:r,index:e}))}}for(var s,o=[],l=[],u=0,c=1/(e||32),d=t._segments,h=d[0],v=1,f=d.length;f>v;v++)s=d[v],
r(h,s),h=s;t._closed&&r(s,d[0]),this.curves=o,this.parts=l,this.length=u,this.index=0;
},getParameterAt:function(t){for(var e,n=this.index;e=n,!(0==n||this.parts[--n].offset<t););
for(var i=this.parts.length;i>e;e++){var r=this.parts[e];if(r.offset>=t){this.index=e;
var a=this.parts[e-1],s=a&&a.index==r.index?a.value:0,o=a?a.offset:0;return{value:s+(r.value-s)*(t-o)/(r.offset-o),
index:r.index}}}var r=this.parts[this.parts.length-1];return{value:1,index:r.index
}},drawPart:function(t,e,n){e=this.getParameterAt(e),n=this.getParameterAt(n);for(var i=e.index;i<=n.index;i++){
var r=L.getPart(this.curves[i],i==e.index?e.value:0,i==n.index?n.value:1);i==e.index&&t.moveTo(r[0],r[1]),
t.bezierCurveTo.apply(t,r.slice(2))}}},n.each(L.evaluateMethods,function(t){this[t+"At"]=function(e,n){
var i=this.getParameterAt(e);return L[t](this.curves[i.index],i.value,n)}},{})),O=n.extend({
initialize:function(t,e){for(var n,i=this.points=[],r=t._segments,a=0,s=r.length;s>a;a++){
var o=r[a].point.clone();n&&n.equals(o)||(i.push(o),n=o)}t._closed&&(this.closed=!0,
i.unshift(i[i.length-1]),i.push(i[1])),this.error=e},fit:function(){var t=this.points,e=t.length,n=this.segments=e>0?[new k(t[0])]:[];
return e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),
this.closed&&(n.shift(),n.pop()),n},fitCubic:function(t,e,n,i){if(e-t==1){var r=this.points[t],a=this.points[e],s=r.getDistance(a)/3;
return void this.addCurve([r,r.add(n.normalize(s)),a.add(i.normalize(s)),a])}for(var o,l=this.chordLengthParameterize(t,e),u=Math.max(this.error,this.error*this.error),c=!0,d=0;4>=d;d++){
var h=this.generateBezier(t,e,l,n,i),v=this.findMaxError(t,e,h,l);if(v.error<this.error&&c)return void this.addCurve(h);
if(o=v.index,v.error>=u)break;c=this.reparameterize(t,e,l,h),u=v.error}var f=this.points[o-1].subtract(this.points[o]),m=this.points[o].subtract(this.points[o+1]),g=f.add(m).divide(2).normalize();
this.fitCubic(t,o,n,g),this.fitCubic(o,e,g.negate(),i)},addCurve:function(t){var e=this.segments[this.segments.length-1];
e.setHandleOut(t[1].subtract(t[0])),this.segments.push(new k(t[3],t[2].subtract(t[3])));
},generateBezier:function(t,e,n,i,r){for(var a=1e-12,s=this.points[t],o=this.points[e],l=[[0,0],[0,0]],u=[0,0],c=0,d=e-t+1;d>c;c++){
var h=n[c],v=1-h,f=3*h*v,m=v*v*v,g=f*v,b=f*h,p=h*h*h,y=i.normalize(g),_=r.normalize(b),x=this.points[t+c].subtract(s.multiply(m+g)).subtract(o.multiply(b+p));
l[0][0]+=y.dot(y),l[0][1]+=y.dot(_),l[1][0]=l[0][1],l[1][1]+=_.dot(_),u[0]+=y.dot(x),
u[1]+=_.dot(x)}var w,S,C=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(Math.abs(C)>a){var E=l[0][0]*u[1]-l[1][0]*u[0],k=u[0]*l[1][1]-u[1]*l[0][1];
w=k/C,S=E/C}else{var A=l[0][0]+l[0][1],L=l[1][0]+l[1][1];w=S=Math.abs(A)>a?u[0]/A:Math.abs(L)>a?u[1]/L:0;
}var M,j,T=o.getDistance(s),P=a*T;if(P>w||P>S)w=S=T/3;else{var R=o.subtract(s);M=i.normalize(w),
j=r.normalize(S),M.dot(R)-j.dot(R)>T*T&&(w=S=T/3,M=j=null)}return[s,s.add(M||i.normalize(w)),o.add(j||r.normalize(S)),o];
},reparameterize:function(t,e,n,i){for(var r=t;e>=r;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);
for(var r=1,a=n.length;a>r;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){
for(var i=[],r=[],a=0;2>=a;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(var a=0;1>=a;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);
var s=this.evaluate(3,t,n),o=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=s.subtract(e),c=o.dot(o)+u.dot(l);
return Math.abs(c)<1e-6?n:n-u.dot(o)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;t>=r;r++)for(var a=0;t-r>=a;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));
return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;e>=i;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);
for(var i=1,r=e-t;r>=i;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,s=t+1;e>s;s++){
var o=this.evaluate(3,n,i[s-t]),l=o.subtract(this.points[s]),u=l.x*l.x+l.y*l.y;u>=a&&(a=u,
r=s)}return{error:a,index:r}}}),I=y.extend({_class:"TextItem",_boundsSelected:!0,
_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsGetter:"getBounds",
initialize:function(t){this._content="",this._lines=[];var i=t&&n.isPlainObject(t)&&t.x===e&&t.y===e;
this._initialize(i&&t,!i&&u.read(arguments))},_equals:function(t){return this._content===t._content;
},_clone:function xt(t,e,n){return t.setContent(this._content),xt.base.call(this,t,e,n);
},getContent:function(){return this._content},setContent:function(t){this._content=""+t,
this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){
return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",
getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),D=I.extend({_class:"PointText",
initialize:function(){I.apply(this,arguments)},clone:function(t){return this._clone(new D(y.NO_INSERT),t);
},getPoint:function(){var t=this._matrix.getTranslation();return new c(t.x,t.y,this,"setPoint");
},setPoint:function(){var t=u.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()));
},_draw:function(t){if(this._content){this._setStyles(t);var e=this._style,n=this._lines,i=e.getLeading(),r=t.shadowColor;
t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var a=0,s=n.length;s>a;a++){
t.shadowColor=r;var o=n[a];e.hasFill()&&(t.fillText(o,0,0),t.shadowColor="rgba(0,0,0,0)"),
e.hasStroke()&&t.strokeText(o,0,0),t.translate(0,i)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),s=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),l=0;
"left"!==a&&(l-=o/("center"===a?2:1));var u=new v(l,r?-.75*s:0,o,r*s);return e?e._transformBounds(u,u):u;
}}),V=n.extend(new function(){function t(t){var n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);
if(i){n=[0,0,0];for(var r=0;3>r;r++){var s=i[r+1];n[r]=parseInt(1==s.length?s+s:s,16)/255;
}}else if(i=t.match(/^rgba?\((.*)\)$/)){n=i[1].split(",");for(var r=0,o=n.length;o>r;r++){
var s=+n[r];n[r]=3>r?s/255:s}}else{var l=a[t];if(!l){e||(e=J.getContext(1,1),e.globalCompositeOperation="copy"),
e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var u=e.getImageData(0,0,1,1).data;
l=a[t]=[u[0]/255,u[1]/255,u[2]/255]}n=l.slice()}return n}var e,i={gray:["gray"],rgb:["red","green","blue"],
hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]
},r={},a={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(t,e,n){
var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,s=0===a?0:60*(i==t?(e-n)/a+(n>e?6:0):i==e?(n-t)/a+2:(t-e)/a+4);
return[s,0===i?0:a/i,i]},"hsb-rgb":function(t,e,n){t=(t/60%6+6)%6;var i=Math.floor(t),r=t-i,i=o[i],a=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];
return[a[i[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,s=0===a,o=s?0:60*(i==t?(e-n)/a+(n>e?6:0):i==e?(n-t)/a+2:(t-e)/a+4),l=(i+r)/2,u=s?0:.5>l?a/(i+r):a/(2-i-r);
return[o,u,l]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=.5>n?n*(1+e):n+e-n*e,a=2*n-r,s=[],o=0;3>o;o++){
var l=i[o];0>l&&(l+=1),l>1&&(l-=1),s[o]=1>6*l?a+6*(r-a)*l:1>2*l?r:2>3*l?a+(r-a)*(2/3-l)*6:a;
}return s},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){
return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t];
},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return n.each(i,function(t,e){
r[e]=[],n.each(t,function(t,a){var s=n.capitalize(t),o=/^(hue|saturation)$/.test(t),l=r[e][a]="gradient"===t?function(t){
var e=this._components[0];return t=N.read(Array.isArray(t)?t:arguments,0,{readNull:!0
}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){
return u.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t;
};this["get"+s]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[a]:this._convert(e)[a];
},this["set"+s]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),
this._properties=i[e],this._type=e),this._components[a]=l.call(this,t),this._changed();
}},this)},{_class:"Color",_readIndex:!0,initialize:function d(e){var n,a,s,o,u=Array.prototype.slice,c=arguments,h=0;
Array.isArray(e)&&(c=e,e=c[0]);var v=null!=e&&("undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e));
if("string"===v&&e in i&&(n=e,e=c[1],Array.isArray(e)?(a=e,s=c[2]):(this.__read&&(h=1),
c=u.call(c,1),v="undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e))),
!a){if(o="number"===v?c:"object"===v&&null!=e.length?e:null){n||(n=o.length>=3?"rgb":"gray");
var f=i[n].length;s=o[f],this.__read&&(h+=o===arguments?f+(null!=s?1:0):1),o.length>f&&(o=u.call(o,0,f));
}else if("string"===v)n="rgb",a=t(e),4===a.length&&(s=a[3],a.length--);else if("object"===v)if(e.constructor===d){
if(n=e._type,a=e._components.slice(),s=e._alpha,"gradient"===n)for(var m=1,g=a.length;g>m;m++){
var b=a[m];b&&(a[m]=b.clone())}}else if(e.constructor===N)n="gradient",o=c;else{n="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb";
var p=i[n];_=r[n],this._components=a=[];for(var m=0,g=p.length;g>m;m++){var y=e[p[m]];
null==y&&0===m&&"gradient"===n&&"stops"in e&&(y={stops:e.stops,radial:e.radial}),
y=_[m].call(this,y),null!=y&&(a[m]=y)}s=e.alpha}this.__read&&n&&(h=1)}if(this._type=n||"rgb",
this._id=l.get(d),!a){this._components=a=[];for(var _=r[this._type],m=0,g=_.length;g>m;m++){
var y=_[m].call(this,o&&o[m]);null!=y&&(a[m]=y)}}this._components=a,this._properties=i[this._type],
this._alpha=s,this.__read&&(this.__read=h)},_serialize:function(t,e){var i=this.getComponents();
return n.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e);
},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65);
},_convert:function(t){var e;return this._type===t?this._components.slice():(e=c[this._type+"-"+t])?e.apply(this,this._components):c["rgb-"+t].apply(this,c[this._type+"-rgb"].apply(this,this._components));
},convert:function(t){return new V(t,this._convert(t),this._alpha)},getType:function(){
return this._type},setType:function(t){this._components=this._convert(t),this._properties=i[t],
this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),
t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){
this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){
return null!=this._alpha},equals:function(t){var e=n.isPlainValue(t,!0)?V.read(arguments):t;
return e===this||e&&this._class===e._class&&this._type===e._type&&this._alpha===e._alpha&&n.equals(this._components,e._components)||!1;
},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=s.instance,r=0,a=t.length;a>r;r++){
var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),
"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(0>t?0:t>1?1:t));
}var n=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],
1>i&&n.push(0>i?0:i),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")";
},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();
var e,n=this._components,i=n[0],r=i._stops,a=n[1],s=n[2];if(i._radial){var o=s.getDistance(a),l=n[3];
if(l){var u=l.subtract(a);u.getLength()>o&&(l=a.add(u.normalize(o-.1)))}var c=l||a;
e=t.createRadialGradient(c.x,c.y,0,a.x,a.y,o)}else e=t.createLinearGradient(a.x,a.y,s.x,s.y);
for(var d=0,h=r.length;h>d;d++){var v=r[d];e.addColorStop(v._rampPoint,v._color.toCanvasStyle());
}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;i>n;n++){
var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){
var t=Math.random;return new V(t(),t(),t())}}})},new function(){var t={add:function(t,e){
return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},
divide:function(t,e){return t/e}};return n.each(t,function(t,e){this[e]=function(e){
e=V.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,s=i.length;s>a;a++)r[a]=t(i[a],r[a]);
return new V(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),N=n.extend({
_class:"Gradient",initialize:function(t,e){this._id=l.get(),t&&this._set(t)&&(t=e=null),
this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1);
},_serialize:function(t,e){return e.add(this,function(){return n.serialize([this._stops,this._radial],t,!0,e);
})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;e>t;t++)this._owners[t]._changed();
},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){
var n=this._owners?this._owners.indexOf(t):-1;-1!=n&&(this._owners.splice(n,1),0===this._owners.length&&(this._owners=e));
},clone:function(){for(var t=[],e=0,n=this._stops.length;n>e;e++)t[e]=this._stops[e].clone();
return new N(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){
if(this.stops)for(var n=0,i=this._stops.length;i>n;n++)this._stops[n]._owner=e;if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");
this._stops=B.readAll(t,0,{clone:!0});for(var n=0,i=this._stops.length;i>n;n++){var r=this._stops[n];
r._owner=this,r._defaultRamp&&r.setRampPoint(n/(i-1))}this._changed()},getRadial:function(){
return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){
if(t===this)return!0;if(t&&this._class===t._class&&this._stops.length===t._stops.length){
for(var e=0,n=this._stops.length;n>e;e++)if(!this._stops[e].equals(t._stops[e]))return!1;
return!0}return!1}}),B=n.extend({_class:"GradientStop",initialize:function(t,n){if(t){
var i,r;n===e&&Array.isArray(t)?(i=t[0],r=t[1]):t.color?(i=t.color,r=t.rampPoint):(i=t,
r=n),this.setColor(i),this.setRampPoint(r)}},clone:function(){return new B(this._color.clone(),this._rampPoint);
},_serialize:function(t,e){return n.serialize([this._color,this._rampPoint],t,!0,e);
},_changed:function(){this._owner&&this._owner._changed(65)},getRampPoint:function(){
return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,
this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=V.read(arguments),
this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},
equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint||!1;
}}),z=n.extend(new function(){var t={fillColor:e,strokeColor:e,strokeWidth:1,strokeCap:"butt",
strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],windingRule:"nonzero",
shadowColor:e,shadowBlur:0,shadowOffset:new u,selectedColor:e,fontFamily:"sans-serif",
fontWeight:"normal",fontSize:12,font:"sans-serif",leading:null,justification:"left"
},i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,
fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},a={_defaults:t,
_textDefaults:new n(t,{fillColor:new V}),beans:!0};return n.each(t,function(t,s){
var o=/Color$/.test(s),l="shadowOffset"===s,c=n.capitalize(s),d=i[s],h="set"+c,v="get"+c;
a[h]=function(t){var n=this._owner,i=n&&n._children;if(i&&i.length>0&&!(n instanceof P))for(var r=0,a=i.length;a>r;r++)i[r]._style[h](t);else{
var l=this._values[s];l!==t&&(o&&(l&&(l._owner=e),t&&t.constructor===V&&(t._owner&&(t=t.clone()),
t._owner=n)),this._values[s]=t,n&&n._changed(d||65))}},a[v]=function(t){var i,r=this._owner,a=r&&r._children;
if(!a||0===a.length||t||r instanceof P){var i=this._values[s];if(i===e)i=this._defaults[s],
i&&i.clone&&(i=i.clone());else{var c=o?V:l?u:null;!c||i&&i.constructor===c||(this._values[s]=i=c.read([i],0,{
readNull:!0,clone:!0}),i&&o&&(i._owner=r))}return i}for(var d=0,h=a.length;h>d;d++){
var f=a[d]._style[v]();if(0===d)i=f;else if(!n.equals(i,f))return e}return i},r[v]=function(t){
return this._style[v](t)},r[h]=function(t){this._style[h](t)}}),y.inject(r),a},{_class:"Style",
initialize:function(e,n,i){this._values={},this._owner=n,this._project=n&&n._project||i||t.project,
n instanceof I&&(this._defaults=this._textDefaults),e&&this.set(e)},set:function(t){
var e=t instanceof z,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){
var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){return t===this||t&&this._class===t._class&&n.equals(this._values,t._values)||!1;
},hasFill:function(){return!!this.getFillColor()},hasStroke:function(){return!!this.getStrokeColor()&&this.getStrokeWidth()>0;
},hasShadow:function(){return!!this.getShadowColor()&&this.getShadowBlur()>0},getView:function(){
return this._project.getView()},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily();
},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function wt(){var t=wt.base.call(this),e=this.getFontSize();
return/pt|em|%|px/.test(e)&&(e=this.getView().getPixelSize(e)),null!=t?t:1.2*e}}),G=new function(){
function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),s=0;6>s;s++){
var o=r[s],l=o?o+a:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){
var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"");
},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{
n=t.getBoundingClientRect()}catch(s){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),l=n.top-(a.clientTop||r.clientTop||0);
if(!e){var u=i.defaultView;o+=u.pageXOffset||a.scrollLeft||r.scrollLeft,l+=u.pageYOffset||a.scrollTop||r.scrollTop;
}return new v(o,l,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;
return new v(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){
return G.getBounds(t,e).getPoint()},getSize:function(t){return G.getBounds(t,!0).getSize();
},isInvisible:function(t){return G.getSize(t).equals(new d(0,0))},isInView:function(t){
return!G.isInvisible(t)&&G.getViewportBounds(t).intersects(G.getBounds(t,!0))},getPrefixed:function(e,n){
return t(e,n)},setPrefixed:function(e,n,i){if("object"===("undefined"==typeof n?"undefined":$traceurRuntime["typeof"](n)))for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i);
}}},U={add:function(t,e){for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,s=r.length;s>a;a++)t.addEventListener(r[a],i,!1);
},remove:function(t,e){for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,s=r.length;s>a;a++)t.removeEventListener(r[a],i,!1);
},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;
return new u(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop);
},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){
return t.relatedTarget||t.toElement},getOffset:function(t,e){return U.getPoint(t).subtract(G.getOffset(e||U.getTarget(t)));
},stop:function(t){t.stopPropagation(),t.preventDefault()}};U.requestAnimationFrame=new function(){
function t(){for(var e=a.length-1;e>=0;e--){var o=a[e],l=o[0],u=o[1];(!u||("true"==r.getAttribute(u,"keepalive")||s)&&G.isInView(u))&&(a.splice(e,1),
l())}n&&(a.length?n(t):i=!1)}var e,n=G.getPrefixed(window,"requestAnimationFrame"),i=!1,a=[],s=!0;
return U.add(window,{focus:function(){s=!0},blur:function(){s=!1}}),function(r,s){
a.push([r,s]),n?i||(n(t),i=!0):e||(e=setInterval(t,1e3/60))}};var H=n.extend(i,{_class:"View",
initialize:function St(t,e){function n(t){return e[t]||parseInt(e.getAttribute(t),10);
}function i(){var t=G.getSize(e);return t.isNaN()||t.isZero()?new d(n("width"),n("height")):t;
}this._project=t,this._scope=t._scope,this._element=e;var a;this._pixelRatio||(this._pixelRatio=window.devicePixelRatio||1),
this._id=e.getAttribute("id"),null==this._id&&e.setAttribute("id",this._id="view-"+St._id++),
U.add(e,this._viewEvents);var s="none";if(G.setPrefixed(e.style,{userSelect:s,touchAction:s,
touchCallout:s,contentZooming:s,userDrag:s,tapHighlightColor:"rgba(0,0,0,0)"}),r.hasAttribute(e,"resize")){
var o=this;U.add(window,this._windowEvents={resize:function(){o.setViewSize(i())}
})}if(this._setViewSize(a=i()),r.hasAttribute(e,"stats")&&"undefined"!=typeof Stats){
this._stats=new Stats;var l=this._stats.domElement,u=l.style,c=G.getOffset(e);u.position="absolute",
u.left=c.x+"px",u.top=c.y+"px",document.body.appendChild(l)}St._views.push(this),
St._viewsById[this._id]=this,this._viewSize=a,(this._matrix=new m)._owner=this,this._zoom=1,
St._focused||(St._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){
return this._project?(H._focused===this&&(H._focused=null),H._views.splice(H._views.indexOf(this),1),
delete H._viewsById[this._id],this._project._view===this&&(this._project._view=null),
U.remove(this._element,this._viewEvents),U.remove(window,this._windowEvents),this._element=this._project=null,
this.off("frame"),this._animate=!1,this._frameItems={},!0):!1},_events:{onFrame:{
install:function(){this.play()},uninstall:function(){this.pause()}},onResize:{}},
_animate:!1,_time:0,_count:0,_requestFrame:function(){var t=this;U.requestAnimationFrame(function(){
t._requested=!1,t._animate&&(t._requestFrame(),t._handleFrame())},this._element),
this._requested=!0},_handleFrame:function(){t=this._scope;var e=Date.now()/1e3,i=this._before?e-this._before:0;
this._before=e,this._handlingFrame=!0,this.emit("frame",new n({delta:i,time:this._time+=i,
count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.update();
},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0
},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],
0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){
for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new n(t,{
time:i.time+=t.delta,count:i.count++}))}},_update:function(){this._project._needsUpdate=!0,
this._handlingFrame||(this._animate?this._handleFrame():this.update())},_changed:function(t){
1&t&&(this._project._needsUpdate=!0)},_transform:function(t){this._matrix.concatenate(t),
this._bounds=null,this._update()},getElement:function(){return this._element},getPixelRatio:function(){
return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){
var t=this._viewSize;return new h(t.width,t.height,this,"setViewSize")},setViewSize:function(){
var t=d.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._viewSize.set(t.width,t.height),
this._setViewSize(t),this._bounds=null,this.emit("resize",{size:t,delta:e}),this._update());
},_setViewSize:function(t){var e=this._element;e.width=t.width,e.height=t.height},
getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new u,this._viewSize))),
this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){
return this.getBounds().getCenter()},setCenter:function(){var t=u.read(arguments);
this.scrollBy(t.subtract(this.getCenter()))},getZoom:function(){return this._zoom;
},setZoom:function(t){this._transform((new m).scale(t/this._zoom,this.getCenter())),
this._zoom=t},isVisible:function(){return G.isInView(this._element)},scrollBy:function(){
this._transform((new m).translate(u.read(arguments).negate()))},play:function(){this._animate=!0,
this._requested||this._requestFrame()},pause:function(){this._animate=!1},draw:function(){
this.update()},projectToView:function(){return this._matrix._transformPoint(u.read(arguments));
},viewToProject:function(){return this._matrix._inverseTransform(u.read(arguments));
}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return"string"==typeof e&&(e=document.getElementById(e)),
new F(t,e)}}},new function(){function t(t){var e=U.getTarget(t);return e.getAttribute&&H._viewsById[e.getAttribute("id")];
}function e(t,e){return t.viewToProject(U.getOffset(e,t._element))}function n(){if(!H._focused||!H._focused.isVisible())for(var t=0,e=H._views.length;e>t;t++){
var n=H._views[t];if(n&&n.isVisible()){H._focused=s=n;break}}}function i(t,e,n){t._handleEvent("mousemove",e,n);
var i=t._scope.tool;return i&&i._handleEvent(c&&i.responds("mousedrag")?"mousedrag":"mousemove",e,n),
t.update(),i}var r,a,s,o,l,u,c=!1,d=window.navigator;d.pointerEnabled||d.msPointerEnabled?(o="pointerdown MSPointerDown",
l="pointermove MSPointerMove",u="pointerup pointercancel MSPointerUp MSPointerCancel"):(o="touchstart",
l="touchmove",u="touchend touchcancel","ontouchstart"in window&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(o+=" mousedown",
l+=" mousemove",u+=" mouseup"));var h={"selectstart dragstart":function(t){c&&t.preventDefault();
}},v={mouseout:function(t){var n=H._focused,r=U.getRelatedTarget(t);!n||r&&"HTML"!==r.nodeName||i(n,e(n,t),t);
},scroll:n};return h[o]=function(n){var i=H._focused=t(n),a=e(i,n);c=!0,i._handleEvent("mousedown",a,n),
(r=i._scope.tool)&&r._handleEvent("mousedown",a,n),i.update()},v[l]=function(o){var l=H._focused;
if(!c){var u=t(o);u?(l!==u&&i(l,e(l,o),o),a=l,l=H._focused=s=u):s&&s===l&&(l=H._focused=a,
n())}if(l){var d=e(l,o);(c||l.getBounds().contains(d))&&(r=i(l,d,o))}},v[u]=function(t){
var n=H._focused;if(n&&c){var i=e(n,t);c=!1,n._handleEvent("mouseup",i,t),r&&r._handleEvent("mouseup",i,t),
n.update()}},U.add(document,v),U.add(window,{load:n}),{_viewEvents:h,_handleEvent:function(){},
statics:{updateFocus:n}}}),F=H.extend({_class:"CanvasView",initialize:function(t,e){
if(!(e instanceof HTMLCanvasElement)){var n=d.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));
e=J.getCanvas(n)}if(this._context=e.getContext("2d"),this._eventCounters={},this._pixelRatio=1,
!/^off|false$/.test(r.getAttribute(e,"hidpi"))){var i=window.devicePixelRatio||1,a=G.getPrefixed(this._context,"backingStorePixelRatio")||1;
this._pixelRatio=i/a}H.call(this,t,e)},_setViewSize:function(t){var e=this._element,n=this._pixelRatio,i=t.width,a=t.height;
if(e.width=i*n,e.height=a*n,1!==n){if(!r.hasAttribute(e,"resize")){var s=e.style;s.width=i+"px",
s.height=a+"px"}this._context.scale(n,n)}},getPixelSize:function(e){var n,i=t.browser;
if(i&&i.firefox){var r=this._element.parentNode,a=document.createElement("div");a.style.fontSize=e,
r.appendChild(a),n=parseFloat(G.getStyles(a).fontSize),r.removeChild(a)}else{var s=this._context,o=s.font;
s.font=e+" serif",n=parseFloat(s.font),s.font=o}return n},getTextWidth:function(t,e){
var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,s=e.length;s>a;a++)r=Math.max(r,n.measureText(e[a]).width);
return n.font=i,r},update:function(t){var e=this._project;if(!e||!t&&!e._needsUpdate)return!1;
var n=this._context,i=this._viewSize;return n.clearRect(0,0,i.width+1,i.height+1),
e.draw(n,this._matrix,this._pixelRatio),e._needsUpdate=!1,!0}},new function(){function t(t,e,n,i,r,a){
function s(t){return t.responds(e)&&(o||(o=new X(e,n,i,r,a?i.subtract(a):null)),t.emit(e,o)&&o.isStopped)?(n.preventDefault(),
!0):void 0}for(var o,l=r;l;){if(s(l))return!0;l=l.getParent()}return s(t)?!0:!1}var e,n,i,r,a,s,o,l,u;
return{_handleEvent:function(c,d,h){if(this._eventCounters[c]){var v=this._project,f=v.hitTest(d,{
tolerance:0,fill:!0,stroke:!0}),m=f&&f.item,g=!1;switch(c){case"mousedown":for(g=t(this,c,h,d,m),
l=a==m&&Date.now()-u<300,r=a=m,e=n=i=d,o=!g&&m;o&&!o.responds("mousedrag");)o=o._parent;
break;case"mouseup":g=t(this,c,h,d,m,e),o&&(n&&!n.equals(d)&&t(this,"mousedrag",h,d,o,n),
m!==o&&(i=d,t(this,"mousemove",h,d,m,i))),!g&&m&&m===r&&(u=Date.now(),t(this,l&&r.responds("doubleclick")?"doubleclick":"click",h,e,m),
l=!1),r=o=null;break;case"mousemove":o&&(g=t(this,"mousedrag",h,d,o,n)),g||(m!==s&&(i=d),
g=t(this,c,h,d,m,i)),n=i=d,m!==s&&(t(this,"mouseleave",h,d,s),s=m,t(this,"mouseenter",h,d,m));
}return g}}}}),q=n.extend({_class:"Event",initialize:function(t){this.event=t},isPrevented:!1,
isStopped:!1,preventDefault:function(){this.isPrevented=!0,this.event.preventDefault();
},stopPropagation:function(){this.isStopped=!0,this.event.stopPropagation()},stop:function(){
this.stopPropagation(),this.preventDefault()},getModifiers:function(){return Y.modifiers;
}}),$=q.extend({_class:"KeyEvent",initialize:function(t,e,n,i){q.call(this,i),this.type=t?"keydown":"keyup",
this.key=e,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }";
}}),Y=new function(){function e(r,s,c,d){var h,v=c?String.fromCharCode(c):"",f=a[s],m=f||v.toLowerCase(),g=r?"keydown":"keyup",b=H._focused,p=b&&b.isVisible()&&b._scope,y=p&&p.tool;
if(u[m]=r,r?l[s]=c:delete l[s],f&&(h=n.camelize(f))in o){o[h]=r;var _=t.browser;if("command"===h&&_&&_.mac)if(r)i={};else{
for(var x in i)x in l&&e(!1,x,i[x],d);i=null}}else r&&i&&(i[s]=c);y&&y.responds(g)&&(t=p,
y.emit(g,new $(r,m,v,d)),b&&b.update())}var i,r,a={8:"backspace",9:"tab",13:"enter",
16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",
35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",
93:"command",224:"command"},s={9:!0,13:!0,32:!0},o=new n({shift:!1,control:!1,option:!1,
command:!1,capsLock:!1,space:!1}),l={},u={};return U.add(document,{keydown:function(t){
var n=t.which||t.keyCode;n in a||o.command?e(!0,n,n in s||o.command?n:0,t):r=n},keypress:function(t){
null!=r&&(e(!0,r,t.which||t.keyCode,t),r=null)},keyup:function(t){var n=t.which||t.keyCode;
n in l&&e(!1,n,l[n],t)}}),U.add(window,{blur:function(t){for(var n in l)e(!1,n,l[n],t);
}}),{modifiers:o,isDown:function(t){return!!u[t]}}},X=q.extend({_class:"MouseEvent",
initialize:function(t,e,n,i,r){q.call(this,e),this.type=t,this.point=n,this.target=i,
this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }";
}}),W=q.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,
this.type=e,this.event=n},_choosePoint:function(t,e){return t?t:e?e.clone():null},
getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){
this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint);
},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint);
},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint;
},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta;
},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count;
},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t;
},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());
if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;
this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){
return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }";
}}),Z=a.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],
initialize:function(t){a.call(this),this._firstMove=!0,this._count=0,this._downCount=0,
this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){
this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t);
},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){
this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t);
},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null;
},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_updateEvent:function(t,e,n,i,r,a,s){
if(!r){if(null!=n||null!=i){var o=null!=n?n:0,l=e.subtract(this._point),u=l.getLength();
if(o>u)return!1;if(null!=i&&0!=i)if(u>i)e=this._point.add(l.normalize(i));else if(s)return!1;
}if(a&&e.equals(this._point))return!1}switch(this._lastPoint=r&&"mousemove"==t?e:this._point,
this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,
this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=r?0:this._count+1,
!0},_fireEvent:function(e,n){var i=t.project._removeSets;if(i){"mouseup"===e&&(i.mousedrag=null);
var r=i[e];if(r){for(var a in r){var s=r[a];for(var o in i){var l=i[o];l&&l!=r&&delete l[s._id];
}s.remove()}i[e]=null}}return this.responds(e)&&this.emit(e,new W(this,e,n))},_handleEvent:function(e,n,i){
t=this._scope;var r=!1;switch(e){case"mousedown":this._updateEvent(e,n,null,null,!0,!1,!1),
r=this._fireEvent(e,i);break;case"mousedrag":for(var a=!1,s=!1;this._updateEvent(e,n,this.minDistance,this.maxDistance,!1,a,s);)r=this._fireEvent(e,i)||r,
a=!0,s=!0;break;case"mouseup":!n.equals(this._point)&&this._updateEvent("mousedrag",n,this.minDistance,this.maxDistance,!1,!1,!1)&&(r=this._fireEvent("mousedrag",i)),
this._updateEvent(e,n,null,this.maxDistance,!1,!1,!1),r=this._fireEvent(e,i)||r,this._updateEvent(e,n,null,null,!0,!1,!1),
this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(e,n,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)r=this._fireEvent(e,i)||r,
this._firstMove=!1}return r&&i.preventDefault(),r}}),K={request:function(t,n,i,r){
r=r===e?!0:r;var a=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");
return a.open(t.toUpperCase(),n,r),"overrideMimeType"in a&&a.overrideMimeType("text/plain"),
a.onreadystatechange=function(){if(4===a.readyState){var t=a.status;if(0!==t&&200!==t)throw new Error("Could not load "+n+" (Error "+t+")");
i.call(a,a.responseText)}},a.send(null)}},J={canvases:[],getCanvas:function(t,e){
var n,i=!0;"object"===("undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t))&&(e=t.height,
t=t.width),n=this.canvases.length?this.canvases.pop():document.createElement("canvas");
var r=n.getContext("2d");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,
n.height=e),r.save(),n},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d");
},release:function(t){var e=t.canvas?t.canvas:t;e.getContext("2d").restore(),this.canvases.push(e);
}},Q=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function e(e,n,i,r){
var a=r-t(e,n,i);v=e+a,f=n+a,m=i+a;var r=t(v,f,m),s=g(v,f,m),o=b(v,f,m);if(0>s){var l=r-s;
v=r+(v-r)*r/l,f=r+(f-r)*r/l,m=r+(m-r)*r/l}if(o>255){var u=255-r,c=o-r;v=r+(v-r)*u/c,
f=r+(f-r)*u/c,m=r+(m-r)*u/c}}function i(t,e,n){return b(t,e,n)-g(t,e,n)}function r(t,e,n,i){
var r,a=[t,e,n],s=b(t,e,n),o=g(t,e,n);o=o===t?0:o===e?1:2,s=s===t?0:s===e?1:2,r=0===g(o,s)?1===b(o,s)?2:1:0,
a[s]>a[o]?(a[r]=(a[r]-a[o])*i/(a[s]-a[o]),a[s]=i):a[r]=a[s]=0,a[o]=0,v=a[0],f=a[1],
m=a[2]}var a,s,o,l,u,c,d,h,v,f,m,g=Math.min,b=Math.max,p=Math.abs,y={multiply:function(){
v=u*a/255,f=c*s/255,m=d*o/255},screen:function(){v=u+a-u*a/255,f=c+s-c*s/255,m=d+o-d*o/255;
},overlay:function(){v=128>u?2*u*a/255:255-2*(255-u)*(255-a)/255,f=128>c?2*c*s/255:255-2*(255-c)*(255-s)/255,
m=128>d?2*d*o/255:255-2*(255-d)*(255-o)/255},"soft-light":function(){var t=a*u/255;
v=t+u*(255-(255-u)*(255-a)/255-t)/255,t=s*c/255,f=t+c*(255-(255-c)*(255-s)/255-t)/255,
t=o*d/255,m=t+d*(255-(255-d)*(255-o)/255-t)/255},"hard-light":function(){v=128>a?2*a*u/255:255-2*(255-a)*(255-u)/255,
f=128>s?2*s*c/255:255-2*(255-s)*(255-c)/255,m=128>o?2*o*d/255:255-2*(255-o)*(255-d)/255;
},"color-dodge":function(){v=0===u?0:255===a?255:g(255,255*u/(255-a)),f=0===c?0:255===s?255:g(255,255*c/(255-s)),
m=0===d?0:255===o?255:g(255,255*d/(255-o))},"color-burn":function(){v=255===u?255:0===a?0:b(0,255-255*(255-u)/a),
f=255===c?255:0===s?0:b(0,255-255*(255-c)/s),m=255===d?255:0===o?0:b(0,255-255*(255-d)/o);
},darken:function(){v=a>u?u:a,f=s>c?c:s,m=o>d?d:o},lighten:function(){v=u>a?u:a,f=c>s?c:s,
m=d>o?d:o},difference:function(){v=u-a,0>v&&(v=-v),f=c-s,0>f&&(f=-f),m=d-o,0>m&&(m=-m);
},exclusion:function(){v=u+a*(255-u-u)/255,f=c+s*(255-c-c)/255,m=d+o*(255-d-d)/255;
},hue:function(){r(a,s,o,i(u,c,d)),e(v,f,m,t(u,c,d))},saturation:function(){r(u,c,d,i(a,s,o)),
e(v,f,m,t(u,c,d))},luminosity:function(){e(u,c,d,t(a,s,o))},color:function(){e(a,s,o,t(u,c,d));
},add:function(){v=g(u+a,255),f=g(c+s,255),m=g(d+o,255)},subtract:function(){v=b(u-a,0),
f=b(c-s,0),m=b(d-o,0)},average:function(){v=(u+a)/2,f=(c+s)/2,m=(d+o)/2},negation:function(){
v=255-p(255-a-u),f=255-p(255-s-c),m=255-p(255-o-d)}},_=this.nativeModes=n.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){
this[t]=!0},{}),x=J.getContext(1,1);n.each(y,function(t,e){var n="darken"===e,i=!1;
x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,
x.globalCompositeOperation===e&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),
i=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}x.restore(),_[e]=i}),J.release(x),
this.process=function(t,e,n,i,r){var g=e.canvas,b="normal"===t;if(b||_[t])n.save(),
n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,b||(n.globalCompositeOperation=t),n.drawImage(g,r.x,r.y),
n.restore();else{var p=y[t];if(!p)return;for(var x=n.getImageData(r.x,r.y,g.width,g.height),w=x.data,S=e.getImageData(0,0,g.width,g.height).data,C=0,E=w.length;E>C;C+=4){
a=S[C],u=w[C],s=S[C+1],c=w[C+1],o=S[C+2],d=w[C+2],l=S[C+3],h=w[C+3],p();var k=l*i/255,A=1-k;
w[C]=k*v+A*u,w[C+1]=k*f+A*c,w[C+2]=k*m+A*d,w[C+3]=l*i+A*h}n.putImageData(x,r.x,r.y);
}}},tt=n.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],
strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{
"true":"none","false":"non-scaling-stroke"},function(t,e){return!e&&(t instanceof j||t instanceof w||t instanceof I);
}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],
dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],
fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",
center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]
},function(t,e){var i=n.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],
toSVG:r,fromSVG:r&&n.each(r,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,
set:"set"+i}},{}),et={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"
};return new function(){function t(t,e){for(var n in e){var i=e[n],r=et[n];"number"==typeof i&&(i=w.number(i)),
r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}return t}function e(e,n){return t(document.createElementNS("http://www.w3.org/2000/svg",e),n);
}function i(t,e,i){var r=new n,a=t.getTranslation();if(e){t=t.shiftless();var s=t._inverseTransform(a);
r[i?"cx":"x"]=s.x,r[i?"cy":"y"]=s.y,a=null}if(!t.isIdentity()){var l=t.decompose();
if(l&&!l.shearing){var u=[],c=l.rotation,d=l.scaling;a&&!a.isZero()&&u.push("translate("+w.point(a)+")"),
o.isZero(d.x-1)&&o.isZero(d.y-1)||u.push("scale("+w.point(d)+")"),c&&u.push("rotate("+w.number(c)+")"),
r.transform=u.join(" ")}else r.transform="matrix("+t.getValues().join(",")+")"}return r;
}function r(n,r){for(var a=i(n._matrix),s=n._children,o=e("g",a),l=0,u=s.length;u>l;l++){
var c=s[l],d=_(c,r);if(d)if(c.isClipMask()){var h=e("clipPath");h.appendChild(d),
g(c,h,"clip"),t(o,{"clip-path":"url(#"+h.id+")"})}else o.appendChild(d)}return o}
function a(t,n){var r=i(t._matrix,!0),a=t.getSize(),s=t.getImage();return r.x-=a.width/2,
r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=n.embedImages===!1&&s&&s.src||t.toDataURL(),
e("image",r)}function l(t,n){var r=n.matchShapes;if(r){var a=t.toShape(!1);if(a)return u(a,n);
}var s,o=t._segments,l=i(t._matrix);if(0===o.length)return null;if(r&&!t.hasHandles())if(o.length>=3){
s=t._closed?"polygon":"polyline";for(var c=[],d=0,h=o.length;h>d;d++)c.push(w.point(o[d]._point));
l.points=c.join(" ")}else{s="line";var v=o[0]._point,f=o[o.length-1]._point;l.set({
x1:v.x,y1:v.y,x2:f.x,y2:f.y})}else s="path",l.d=t.getPathData(null,n.precision);return e(s,l);
}function u(t){var n=t._type,r=t._radius,a=i(t._matrix,!0,"rectangle"!==n);if("rectangle"===n){
n="rect";var s=t._size,o=s.width,l=s.height;a.x-=o/2,a.y-=l/2,a.width=o,a.height=l,
r.isZero()&&(r=null)}return r&&("circle"===n?a.r=r:(a.rx=r.width,a.ry=r.height)),
e(n,a)}function c(t,n){var r=i(t._matrix),a=t.getPathData(null,n.precision);return a&&(r.d=a),
e("path",r)}function d(t,n){var r=i(t._matrix,!0),a=t.getSymbol(),s=m(a,"symbol"),o=a.getDefinition(),l=o.getBounds();
return s||(s=e("symbol",{viewBox:w.rectangle(l)}),s.appendChild(_(o,n)),g(a,s,"symbol")),
r.href="#"+s.id,r.x+=l.x,r.y+=l.y,r.width=w.number(l.width),r.height=w.number(l.height),
r.overflow="visible",e("use",r)}function h(t){var n=m(t,"color");if(!n){var i,r=t.getGradient(),a=r._radial,s=t.getOrigin().transform(),o=t.getDestination().transform();
if(a){i={cx:s.x,cy:s.y,r:s.getDistance(o)};var l=t.getHighlight();l&&(l=l.transform(),
i.fx=l.x,i.fy=l.y)}else i={x1:s.x,y1:s.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",
n=e((a?"radial":"linear")+"Gradient",i);for(var u=r._stops,c=0,d=u.length;d>c;c++){
var h=u[c],v=h._color,f=v.getAlpha();i={offset:h._rampPoint,"stop-color":v.toCSS(!0)
},1>f&&(i["stop-opacity"]=f),n.appendChild(e("stop",i))}g(t,n,"color")}return"url(#"+n.id+")";
}function v(t){var n=e("text",i(t._matrix,!0));return n.textContent=t._content,n}
function f(e,i,r){var a={},s=!r&&e.getParent();return null!=e._name&&(a.id=e._name),
n.each(tt,function(t){var i=t.get,r=t.type,o=e[i]();if(t.exportFilter?t.exportFilter(e,o):!s||!n.equals(s[i](),o)){
if("color"===r&&null!=o){var l=o.getAlpha();1>l&&(a[t.attribute+"-opacity"]=l)}a[t.attribute]=null==o?"none":"number"===r?w.number(o):"color"===r?o.gradient?h(o,e):o.toCSS(!0):"array"===r?o.join(","):"lookup"===r?t.toSVG[o]:o;
}}),1===a.opacity&&delete a.opacity,e._visible||(a.visibility="hidden"),t(i,a)}function m(t,e){
return S||(S={ids:{},svgs:{}}),t&&S.svgs[e+"-"+t._id]}function g(t,e,n){S||m();var i=S.ids[n]=(S.ids[n]||0)+1;
e.id=n+"-"+i,S.svgs[n+"-"+t._id]=e}function p(t,n){var i=t,r=null;if(S){i="svg"===t.nodeName.toLowerCase()&&t;
for(var a in S.svgs)r||(i||(i=e("svg"),i.appendChild(t)),r=i.insertBefore(e("defs"),i.firstChild)),
r.appendChild(S.svgs[a]);S=null}return n.asString?(new XMLSerializer).serializeToString(i):i;
}function _(t,e,n){var i=C[t._class],r=i&&i(t,e);if(r){var a=e.onExport;a&&(r=a(t,r,e)||r);
var s=JSON.stringify(t._data);s&&"{}"!==s&&"null"!==s&&r.setAttribute("data-paper-data",s);
}return r&&f(t,r,n)}function x(t){return t||(t={}),w=new s(t.precision),t}var w,S,C={
Group:r,Layer:r,Raster:a,Path:l,Shape:u,CompoundPath:c,PlacedSymbol:d,PointText:v
};y.inject({exportSVG:function(t){return t=x(t),p(_(this,t,!0),t)}}),b.inject({exportSVG:function(t){
t=x(t);var n=this.layers,r=this.getView(),a=r.getViewSize(),s=e("svg",{x:0,y:0,width:a.width,
height:a.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"
}),o=s,l=r._matrix;l.isIdentity()||(o=s.appendChild(e("g",i(l))));for(var u=0,c=n.length;c>u;u++)o.appendChild(_(n[u],t,!0));
return p(s,t)}})},new function(){function i(t,e,n,i){var r=et[e],a=r?t.getAttributeNS(r,e):t.getAttribute(e);
return"null"===a&&(a=null),null==a?i?null:n?"":0:n?a:parseFloat(a)}function r(t,e,n,r){
return e=i(t,e,!1,r),n=i(t,n,!1,r),!r||null!=e&&null!=n?new u(e,n):null}function a(t,e,n,r){
return e=i(t,e,!1,r),n=i(t,n,!1,r),!r||null!=e&&null!=n?new d(e,n):null}function s(t,e,n){
return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?E(t)||t:"lookup"===e?n[t]:t;
}function o(t,e,n,i){var r=t.childNodes,a="clippath"===e,s=new _,o=s._project,l=o._currentStyle,u=[];
if(a||(s=C(s,t,i),o._currentStyle=s._style.clone()),i)for(var c=t.querySelectorAll("defs"),d=0,h=c.length;h>d;d++)k(c[d],n,!1);
for(var d=0,h=r.length;h>d;d++){var v=r[d],f=void 0;1!==v.nodeType||"defs"===v.nodeName.toLowerCase()||!(f=k(v,n,!1))||f instanceof p||u.push(f);
}return s.addChildren(u),a&&(s=C(s.reduce(),t,i)),o._currentStyle=l,(a||"defs"===e)&&(s.remove(),
s=null),s}function l(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;a>r;r+=2)i.push(new u(parseFloat(n[r]),parseFloat(n[r+1])));
var s=new T(i);return"polygon"===e&&s.closePath(),s}function c(t){var e=t.getAttribute("d"),n={
pathData:e};return(e.match(/m/gi)||[]).length>1||/z\S+/i.test(e)?new P(n):new T(n);
}function h(t,e){var n,a=(i(t,"href",!0)||"").substring(1),s="radialgradient"===e;
if(a)n=M[a].getGradient();else{for(var o=t.childNodes,l=[],u=0,c=o.length;c>u;u++){
var d=o[u];1===d.nodeType&&l.push(C(new B,d))}n=new N(l,s)}var h,v,f;return s?(h=r(t,"cx","cy"),
v=h.add(i(t,"r"),0),f=r(t,"fx","fy",!0)):(h=r(t,"x1","y1"),v=r(t,"x2","y2")),C(new V(n,h,v,f),t),
null}function f(t,e,n,i){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new m,s=0,o=r.length;o>s;s++){
var l=r[s];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],d=u[1].split(/[\s,]+/g),h=0,v=d.length;v>h;h++)d[h]=parseFloat(d[h]);
switch(c){case"matrix":a.concatenate(new m(d[0],d[1],d[2],d[3],d[4],d[5]));break;case"rotate":
a.rotate(d[0],d[1],d[2]);break;case"translate":a.translate(d[0],d[1]);break;case"scale":
a.scale(d);break;case"skewX":a.skew(d[0],0);break;case"skewY":a.skew(0,d[0])}}t.transform(a);
}function g(t,e,n){var i=t["fill-opacity"===n?"getFillColor":"getStrokeColor"]();i&&i.setAlpha(parseFloat(e));
}function x(t,i,r){var a=t.attributes[i],s=a&&a.value;if(!s){var o=n.camelize(i);s=t.style[o],
s||r.node[o]===r.parent[o]||(s=r.node[o])}return s?"none"===s?null:s:e}function C(t,i,r){
var a={node:G.getStyles(i)||{},parent:!r&&G.getStyles(i.parentNode)||{}};return n.each(L,function(r,s){
var o=x(i,s,a);o!==e&&(t=n.pick(r(t,o,s,i,a),t))}),t}function E(t){var e=t&&t.match(/\((?:#|)([^)']+)/);
return e&&M[e[1]]}function k(e,i,r){function a(e){t=o;var n=k(e,i,r),a=i.onLoad,s=o.project&&o.getView();
a&&a.call(this,n),s.update()}if(!e)return null;i?"function"==typeof i&&(i={onLoad:i
}):i={};var s=e,o=t;if(r)if("string"!=typeof e||/^.*</.test(e)){if("undefined"!=typeof File&&e instanceof File){
var l=new FileReader;return l.onload=function(){a(l.result)},l.readAsText(e)}}else{
if(s=document.getElementById(e),!s)return K.request("get",e,a);e=null}if("string"==typeof e&&(s=(new DOMParser).parseFromString(e,"image/svg+xml")),
!s.nodeName)throw new Error("Unsupported SVG source: "+e);var u,c=s.nodeName.toLowerCase(),d=A[c],h=s.getAttribute&&s.getAttribute("data-paper-data"),v=o.settings,f=v.applyMatrix;
if(v.applyMatrix=!1,u=d&&d(s,c,i,r)||null,v.applyMatrix=f,u){"#document"===c||u instanceof _||(u=C(u,s,r));
var m=i.onImport;m&&(u=m(s,u,i)||u),i.expandShapes&&u instanceof w&&(u.remove(),u=u.toPath()),
h&&(u._data=JSON.parse(h))}return r&&(M={},u&&n.pick(i.applyMatrix,f)&&u.matrix.apply(!0,!0)),
u}var A={"#document":function(t,e,n,i){for(var r=t.childNodes,a=0,s=r.length;s>a;a++){
var o=r[a];if(1===o.nodeType){var l=o.nextSibling;document.body.appendChild(o);var u=k(o,n,i);
return l?t.insertBefore(o,l):t.appendChild(o),u}}},g:o,svg:o,clippath:o,polygon:l,
polyline:l,path:c,lineargradient:h,radialgradient:h,image:function(t){var e=new S(i(t,"href",!0));
return e.on("load",function(){var e=a(t,"width","height");this.setSize(e);var n=this._matrix._transformPoint(r(t,"x","y").add(e.divide(2)));
this.translate(n)}),e},symbol:function(t,e,n,i){return new p(o(t,e,n,i),!0)},defs:o,
use:function(t){var e=(i(t,"href",!0)||"").substring(1),n=M[e],a=r(t,"x","y");return n?n instanceof p?n.place(a):n.clone().translate(a):null;
},circle:function(t){return new w.Circle(r(t,"cx","cy"),i(t,"r"))},ellipse:function(t){
return new w.Ellipse({center:r(t,"cx","cy"),radius:a(t,"rx","ry")})},rect:function(t){
var e=r(t,"x","y"),n=a(t,"width","height"),i=a(t,"rx","ry");return new w.Rectangle(new v(e,n),i);
},line:function(t){return new T.Line(r(t,"x1","y1"),r(t,"x2","y2"))},text:function(t){
var e=new D(r(t,"x","y").add(r(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),
e}},L=n.set(n.each(tt,function(t){this[t.attribute]=function(e,n){if(e[t.set](s(n,t.type,t.fromSVG)),
"color"===t.type&&e instanceof w){var i=e[t.get]();i&&i.transform((new m).translate(e.getPosition(!0).negate()));
}}},{}),{id:function(t,e){M[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){
var n=E(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof _))return new _(n,t);
t.insertChild(0,n)}},gradientTransform:f,transform:f,"fill-opacity":g,"stroke-opacity":g,
visibility:function(t,e){t.setVisible("visible"===e)},display:function(t,e){t.setVisible(null!==e);
},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){
t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n=e.match(/(.*)%$/);
t.setRampPoint(n?n[1]/100:parseFloat(e))},viewBox:function(t,e,n,i,r){var o=new v(s(e,"array")),l=a(i,"width","height",!0);
if(t instanceof _){var u=l?o.getSize().divide(l):1,c=(new m).translate(o.getPoint()).scale(u);
t.transform(c.inverted())}else if(t instanceof p){l&&o.setSize(l);var d="visible"!=x(i,"overflow",r),h=t._definition;
d&&!o.contains(h.getBounds())&&(d=new w.Rectangle(o).transform(h._matrix),d.setClipMask(!0),
h.addChild(d))}}}),M={};y.inject({importSVG:function(t,e){return this.addChild(k(t,e,!0));
}}),b.inject({importSVG:function(t,e){return this.activate(),k(t,e,!0)}})},n.exports.PaperScript=function(){
function e(t,e,n){var i=g[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){
case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":
return t%n;case"==":return t==n;case"!=":return t!=n}}function i(t,e){var n=b[t];if(n&&e&&e[n])return e[n]();
switch(t){case"+":return+e;case"-":return-e}}function a(t,e){return m.acorn.parse(t,e);
}function s(e,n,i){function r(t){for(var e=0,n=c.length;n>e;e++){var i=c[e];if(i[0]>=t)break;
t+=i[1]}return t}function s(t){return e.substring(r(t.range[0]),r(t.range[1]))}function o(t,n){
return e.substring(r(t.range[1]),r(n.range[0]))}function l(t,n){for(var i=r(t.range[0]),a=r(t.range[1]),s=0,o=c.length-1;o>=0;o--)if(i>c[o][0]){
s=o+1;break}c.splice(s,0,[i,n.length-a+i]),e=e.substring(0,i)+n+e.substring(a)}function u(t,e){
if(t){for(var n in t)if("range"!==n&&"loc"!==n){var i=t[n];if(Array.isArray(i))for(var r=0,a=i.length;a>r;r++)u(i[r],t);else i&&"object"===("undefined"==typeof i?"undefined":$traceurRuntime["typeof"](i))&&u(i,t);
}switch(t.type){case"UnaryExpression":if(t.operator in b&&"Literal"!==t.argument.type){
var c=s(t.argument);l(t,'$__("'+t.operator+'", '+c+")")}break;case"BinaryExpression":
if(t.operator in g&&"Literal"!==t.left.type){var d=s(t.left),h=s(t.right),v=o(t.left,t.right),f=t.operator;
l(t,"__$__("+d+","+v.replace(new RegExp("\\"+f),'"'+f+'"')+", "+h+")")}break;case"UpdateExpression":
case"AssignmentExpression":var m=e&&e.type;if(!("ForStatement"===m||"BinaryExpression"===m&&/^[=!<>]/.test(e.operator)||"MemberExpression"===m&&e.computed))if("UpdateExpression"===t.type){
var c=s(t.argument),p="__$__("+c+', "'+t.operator[0]+'", 1)',y=c+" = "+p;t.prefix||"AssignmentExpression"!==m&&"VariableDeclarator"!==m||(s(e.left||e.id)===c&&(y=p),
y=c+"; "+y),l(t,y)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var d=s(t.left),h=s(t.right);
l(t,d+" = __$__("+d+', "'+t.operator[0]+'", '+h+")")}}}}if(!e)return"";i=i||{},n=n||"";
var c=[],d=null,h=t.browser,v=h.versionNumber,f=/\r\n|\n|\r/gm;if(h.chrome&&v>=30||h.webkit&&v>=537.76||h.firefox&&v>=23){
var m=0;if(0===window.location.href.indexOf(n)){var p=document.getElementsByTagName("html")[0].innerHTML;
m=p.substr(0,p.indexOf(e)+1).match(f).length+1}var y=["AAAA"];y.length=(e.match(f)||[]).length+1+m,
d={version:3,file:n,names:[],mappings:y.join(";AACA"),sourceRoot:"",sources:[n]};var _=i.source||!n&&e;
_&&(d.sourcesContent=[_])}return u(a(e,{ranges:!0})),d&&(e=new Array(m+1).join("\n")+e+"\n//# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+"\n//# sourceURL="+(n||"paperscript")),
e}function o(r,a,o,l){function c(t,e){for(var n in t)!e&&/^_/.test(n)||!new RegExp("([\\b\\s\\W]|^)"+n.replace(/\$/g,"\\$")+"\\b").test(r)||(g.push(n),
b.push(t[n]))}t=a;var d,h=a.getView(),v=/\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(r)?new Z:null,f=v?v._events:[],m=["onFrame","onResize"].concat(f),g=[],b=[];
r=s(r,o,l),c({__$__:e,$__:i,paper:a,view:h,tool:v},!0),c(a),m=n.each(m,function(t){
new RegExp("\\s+"+t+"\\b").test(r)&&(g.push(t),this.push(t+": "+t))},[]).join(", "),
m&&(r+="\nreturn { "+m+" };");var p=t.browser;if(p.chrome||p.firefox){var y=document.createElement("script"),_=document.head||document.getElementsByTagName("head")[0];
p.firefox&&(r="\n"+r),y.appendChild(document.createTextNode("paper._execute = function("+g+") {"+r+"\n}")),
_.appendChild(y),d=t._execute,delete t._execute,_.removeChild(y)}else d=Function(g,r);
var x=d.apply(a,b)||{};n.each(f,function(t){var e=x[t];e&&(v[t]=e)}),h&&(x.onResize&&h.setOnResize(x.onResize),
h.emit("resize",{size:h.size,delta:new u}),x.onFrame&&h.setOnFrame(x.onFrame),h.update());
}function l(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==r.getAttribute(t,"ignore")){
var e=r.getAttribute(t,"canvas"),n=document.getElementById(e),i=t.src||t.getAttribute("data-src"),a=r.hasAttribute(t,"async"),s="data-paper-scope";
if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var l=r.get(n.getAttribute(s))||(new r).setup(n);
return n.setAttribute(s,l._id),i?K.request("get",i,function(t){o(t,l,i)},a):o(t.innerHTML,l,t.baseURI),
t.setAttribute("data-paper-ignore","true"),l}}function c(){n.each(document.getElementsByTagName("script"),l);
}function h(t){return t?l(t):c()}var v,f,m=this;!function(t,e){return"object"==("undefined"==typeof v?"undefined":$traceurRuntime["typeof"](v))&&"object"==("undefined"==typeof module?"undefined":$traceurRuntime["typeof"](module))?e(v):"function"==typeof f&&f.amd?f(["exports"],e):void e(t.acorn||(t.acorn={}));
}(this,function(t){function e(t){dt=t||{};for(var e in mt)Object.prototype.hasOwnProperty.call(dt,e)||(dt[e]=mt[e]);
ft=dt.sourceFile||null}function n(t,e){var n=gt(ht,t);e+=" ("+n.line+":"+n.column+")";
var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=bt,i}function i(t){function e(t){
if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";
for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;";
}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var a=0;a<i.length;++a)if(i[a][0].length==t[r].length){
i[a].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length;
}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var s=i[r];n+="case "+s[0].length+":",
e(s)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=Et,this.column=bt-kt;
}function a(){Et=1,bt=kt=0,Ct=!0,u()}function s(t,e){yt=bt,dt.locations&&(xt=new r),
wt=t,u(),St=e,Ct=t.beforeExpr}function o(){var t=dt.onComment&&dt.locations&&new r,e=bt,i=ht.indexOf("*/",bt+=2);
if(-1===i&&n(bt-2,"Unterminated comment"),bt=i+2,dt.locations){Ze.lastIndex=e;for(var a=void 0;(a=Ze.exec(ht))&&a.index<bt;)++Et,
kt=a.index+a[0].length}dt.onComment&&dt.onComment(!0,ht.slice(e+2,i),e,bt,t,dt.locations&&new r);
}function l(){for(var t=bt,e=dt.onComment&&dt.locations&&new r,n=ht.charCodeAt(bt+=2);vt>bt&&10!==n&&13!==n&&8232!==n&&8233!==n;)++bt,
n=ht.charCodeAt(bt);dt.onComment&&dt.onComment(!1,ht.slice(t+2,bt),t,bt,e,dt.locations&&new r);
}function u(){for(;vt>bt;){var t=ht.charCodeAt(bt);if(32===t)++bt;else if(13===t){
++bt;var e=ht.charCodeAt(bt);10===e&&++bt,dt.locations&&(++Et,kt=bt)}else if(10===t||8232===t||8233===t)++bt,
dt.locations&&(++Et,kt=bt);else if(t>8&&14>t)++bt;else if(47===t){var e=ht.charCodeAt(bt+1);
if(42===e)o();else{if(47!==e)break;l()}}else if(160===t)++bt;else{if(!(t>=5760&&Fe.test(String.fromCharCode(t))))break;
++bt}}}function c(){var t=ht.charCodeAt(bt+1);return t>=48&&57>=t?C(!0):(++bt,s(_e));
}function d(){var t=ht.charCodeAt(bt+1);return Ct?(++bt,x()):61===t?_(Ce,2):_(we,1);
}function h(){var t=ht.charCodeAt(bt+1);return 61===t?_(Ce,2):_(De,1)}function v(t){
var e=ht.charCodeAt(bt+1);return e===t?_(124===t?Le:Me,2):61===e?_(Ce,2):_(124===t?je:Pe,1);
}function f(){var t=ht.charCodeAt(bt+1);return 61===t?_(Ce,2):_(Te,1)}function m(t){
var e=ht.charCodeAt(bt+1);return e===t?45==e&&62==ht.charCodeAt(bt+2)&&We.test(ht.slice(Lt,bt))?(bt+=3,
l(),u(),y()):_(ke,2):61===e?_(Ce,2):_(Ee,1)}function g(t){var e=ht.charCodeAt(bt+1),n=1;
return e===t?(n=62===t&&62===ht.charCodeAt(bt+2)?3:2,61===ht.charCodeAt(bt+n)?_(Ce,n+1):_(Ie,n)):33==e&&60==t&&45==ht.charCodeAt(bt+2)&&45==ht.charCodeAt(bt+3)?(bt+=4,
l(),u(),y()):(61===e&&(n=61===ht.charCodeAt(bt+2)?3:2),_(Oe,n))}function b(t){var e=ht.charCodeAt(bt+1);
return 61===e?_(Re,61===ht.charCodeAt(bt+2)?3:2):_(61===t?Se:Ae,1)}function p(t){
switch(t){case 46:return c();case 40:return++bt,s(me);case 41:return++bt,s(ge);case 59:
return++bt,s(pe);case 44:return++bt,s(be);case 91:return++bt,s(de);case 93:return++bt,
s(he);case 123:return++bt,s(ve);case 125:return++bt,s(fe);case 58:return++bt,s(ye);
case 63:return++bt,s(xe);case 48:var e=ht.charCodeAt(bt+1);if(120===e||88===e)return S();
case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return C(!1);
case 34:case 39:return E(t);case 47:return d(t);case 37:case 42:return h();case 124:
case 38:return v(t);case 94:return f();case 43:case 45:return m(t);case 60:case 62:
return g(t);case 61:case 33:return b(t);case 126:return _(Ae,1)}return!1}function y(t){
if(t?bt=pt+1:pt=bt,dt.locations&&(_t=new r),t)return x();if(bt>=vt)return s(Nt);var e=ht.charCodeAt(bt);
if(Ke(e)||92===e)return L();var i=p(e);if(i===!1){var a=String.fromCharCode(e);if("\\"===a||Ye.test(a))return L();
n(bt,"Unexpected character '"+a+"'")}return i}function _(t,e){var n=ht.slice(bt,bt+e);
bt+=e,s(t,n)}function x(){for(var t=void 0,e=void 0,i="",r=bt;;){bt>=vt&&n(r,"Unterminated regular expression");
var a=ht.charAt(bt);if(We.test(a)&&n(r,"Unterminated regular expression"),t)t=!1;else{
if("["===a)e=!0;else if("]"===a&&e)e=!1;else if("/"===a&&!e)break;t="\\"===a}++bt;
}var i=ht.slice(r,bt);++bt;var o=A();return o&&!/^[gmsiy]*$/.test(o)&&n(r,"Invalid regexp flag"),
s(It,new RegExp(i,o))}function w(t,e){for(var n=bt,i=0,r=0,a=null==e?1/0:e;a>r;++r){
var s=void 0,o=ht.charCodeAt(bt);if(s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&57>=o?o-48:1/0,
s>=t)break;++bt,i=i*t+s}return bt===n||null!=e&&bt-n!==e?null:i}function S(){bt+=2;
var t=w(16);return null==t&&n(pt+2,"Expected hexadecimal number"),Ke(ht.charCodeAt(bt))&&n(bt,"Identifier directly after number"),
s(Ot,t)}function C(t){var e=bt,i=!1,r=48===ht.charCodeAt(bt);t||null!==w(10)||n(e,"Invalid number"),
46===ht.charCodeAt(bt)&&(++bt,w(10),i=!0);var a=ht.charCodeAt(bt);(69===a||101===a)&&(a=ht.charCodeAt(++bt),
(43===a||45===a)&&++bt,null===w(10)&&n(e,"Invalid number"),i=!0),Ke(ht.charCodeAt(bt))&&n(bt,"Identifier directly after number");
var o,l=ht.slice(e,bt);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||Pt?n(e,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),
s(Ot,o)}function E(t){bt++;for(var e="";;){bt>=vt&&n(pt,"Unterminated string constant");
var i=ht.charCodeAt(bt);if(i===t)return++bt,s(Dt,e);if(92===i){i=ht.charCodeAt(++bt);
var r=/^[0-7]+/.exec(ht.slice(bt,bt+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,r.length-1);
if("0"===r&&(r=null),++bt,r)Pt&&n(bt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),
bt+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:
e+=String.fromCharCode(k(2));break;case 117:e+=String.fromCharCode(k(4));break;case 85:
e+=String.fromCharCode(k(8));break;case 116:e+="	";break;case 98:e+="\b";break;case 118:
e+="\x0B";break;case 102:e+="\f";break;case 48:e+="\x00";break;case 13:10===ht.charCodeAt(bt)&&++bt;
case 10:dt.locations&&(kt=bt,++Et);break;default:e+=String.fromCharCode(i)}}else(13===i||10===i||8232===i||8233===i)&&n(pt,"Unterminated string constant"),
e+=String.fromCharCode(i),++bt}}function k(t){var e=w(16,t);return null===e&&n(pt,"Bad character escape sequence"),
e}function A(){Ne=!1;for(var t=void 0,e=!0,i=bt;;){var r=ht.charCodeAt(bt);if(Je(r))Ne&&(t+=ht.charAt(bt)),
++bt;else{if(92!==r)break;Ne||(t=ht.slice(i,bt)),Ne=!0,117!=ht.charCodeAt(++bt)&&n(bt,"Expecting Unicode escape sequence \\uXXXX"),
++bt;var a=k(4),s=String.fromCharCode(a);s||n(bt-1,"Invalid Unicode escape"),(e?Ke(a):Je(a))||n(bt-4,"Invalid Unicode escape"),
t+=s}e=!1}return Ne?t:ht.slice(i,bt)}function L(){var t=A(),e=Vt;return Ne||(He(t)?e=ce[t]:(dt.forbidReserved&&(3===dt.ecmaVersion?Be:ze)(t)||Pt&&Ge(t))&&n(pt,"The keyword '"+t+"' is reserved")),
s(e,t)}function M(){At=pt,Lt=yt,Mt=xt,y()}function j(t){if(Pt=t,bt=Lt,dt.locations)for(;kt>bt;)kt=ht.lastIndexOf("\n",kt-2)+1,
--Et;u(),y()}function T(){this.type=null,this.start=pt,this.end=null}function P(){
this.start=_t,this.end=null,null!==ft&&(this.source=ft)}function R(){var t=new T;return dt.locations&&(t.loc=new P),
dt.ranges&&(t.range=[pt,0]),t}function O(t){var e=new T;return e.start=t.start,dt.locations&&(e.loc=new P,
e.loc.start=t.loc.start),dt.ranges&&(e.range=[t.range[0],0]),e}function I(t,e){return t.type=e,
t.end=Lt,dt.locations&&(t.loc.end=Mt),dt.ranges&&(t.range[1]=Lt),t}function D(t){
return dt.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value;
}function V(t){return wt===t?(M(),!0):void 0}function N(){return!dt.strictSemicolons&&(wt===Nt||wt===fe||We.test(ht.slice(Lt,pt)));
}function B(){V(pe)||N()||G()}function z(t){wt===t?M():G()}function G(){n(pt,"Unexpected token");
}function U(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),
Pt&&"Identifier"===t.type&&Ue(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode");
}function H(t){At=Lt=bt,dt.locations&&(Mt=new r),jt=Pt=null,Tt=[],y();var e=t||R(),n=!0;
for(t||(e.body=[]);wt!==Nt;){var i=F();e.body.push(i),n&&D(i)&&j(!0),n=!1}return I(e,"Program");
}function F(){(wt===we||wt===Ce&&"/="==St)&&y(!0);var t=wt,e=R();switch(t){case Bt:
case Ut:M();var i=t===Bt;V(pe)||N()?e.label=null:wt!==Vt?G():(e.label=ct(),B());for(var r=0;r<Tt.length;++r){
var a=Tt[r];if(null==e.label||a.name===e.label.name){if(null!=a.kind&&(i||"loop"===a.kind))break;
if(e.label&&i)break}}return r===Tt.length&&n(e.start,"Unsyntactic "+t.keyword),I(e,i?"BreakStatement":"ContinueStatement");
case Ht:return M(),B(),I(e,"DebuggerStatement");case qt:return M(),Tt.push(Qe),e.body=F(),
Tt.pop(),z(ne),e.test=q(),B(),I(e,"DoWhileStatement");case Xt:if(M(),Tt.push(Qe),
z(me),wt===pe)return Y(e,null);if(wt===ee){var s=R();return M(),W(s,!0),I(s,"VariableDeclaration"),
1===s.declarations.length&&V(ue)?X(e,s):Y(e,s)}var s=Z(!1,!0);return V(ue)?(U(s),
X(e,s)):Y(e,s);case Wt:return M(),lt(e,!0);case Zt:return M(),e.test=q(),e.consequent=F(),
e.alternate=V($t)?F():null,I(e,"IfStatement");case Kt:return jt||n(pt,"'return' outside of function"),
M(),V(pe)||N()?e.argument=null:(e.argument=Z(),B()),I(e,"ReturnStatement");case Jt:
M(),e.discriminant=q(),e.cases=[],z(ve),Tt.push(tn);for(var o=void 0,l=void 0;wt!=fe;)if(wt===zt||wt===Ft){
var u=wt===zt;o&&I(o,"SwitchCase"),e.cases.push(o=R()),o.consequent=[],M(),u?o.test=Z():(l&&n(At,"Multiple default clauses"),
l=!0,o.test=null),z(ye)}else o||G(),o.consequent.push(F());return o&&I(o,"SwitchCase"),
M(),Tt.pop(),I(e,"SwitchStatement");case Qt:return M(),We.test(ht.slice(Lt,pt))&&n(Lt,"Illegal newline after throw"),
e.argument=Z(),B(),I(e,"ThrowStatement");case te:if(M(),e.block=$(),e.handler=null,
wt===Gt){var c=R();M(),z(me),c.param=ct(),Pt&&Ue(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),
z(ge),c.guard=null,c.body=$(),e.handler=I(c,"CatchClause")}return e.guardedHandlers=Rt,
e.finalizer=V(Yt)?$():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),
I(e,"TryStatement");case ee:return M(),W(e),B(),I(e,"VariableDeclaration");case ne:
return M(),e.test=q(),Tt.push(Qe),e.body=F(),Tt.pop(),I(e,"WhileStatement");case ie:
return Pt&&n(pt,"'with' in strict mode"),M(),e.object=q(),e.body=F(),I(e,"WithStatement");
case ve:return $();case pe:return M(),I(e,"EmptyStatement");default:var d=St,h=Z();
if(t===Vt&&"Identifier"===h.type&&V(ye)){for(var r=0;r<Tt.length;++r)Tt[r].name===d&&n(h.start,"Label '"+d+"' is already declared");
var v=wt.isLoop?"loop":wt===Jt?"switch":null;return Tt.push({name:d,kind:v}),e.body=F(),
Tt.pop(),e.label=h,I(e,"LabeledStatement")}return e.expression=h,B(),I(e,"ExpressionStatement");
}}function q(){z(me);var t=Z();return z(ge),t}function $(t){var e,n=R(),i=!0,r=!1;
for(n.body=[],z(ve);!V(fe);){var a=F();n.body.push(a),i&&t&&D(a)&&(e=r,j(r=!0)),i=!1;
}return r&&!e&&j(!1),I(n,"BlockStatement")}function Y(t,e){return t.init=e,z(pe),
t.test=wt===pe?null:Z(),z(pe),t.update=wt===ge?null:Z(),z(ge),t.body=F(),Tt.pop(),
I(t,"ForStatement")}function X(t,e){return t.left=e,t.right=Z(),z(ge),t.body=F(),
Tt.pop(),I(t,"ForInStatement")}function W(t,e){for(t.declarations=[],t.kind="var";;){
var i=R();if(i.id=ct(),Pt&&Ue(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),
i.init=V(Se)?Z(!0,e):null,t.declarations.push(I(i,"VariableDeclarator")),!V(be))break;
}return t}function Z(t,e){var n=K(e);if(!t&&wt===be){var i=O(n);for(i.expressions=[n];V(be);)i.expressions.push(K(e));
return I(i,"SequenceExpression")}return n}function K(t){var e=J(t);if(wt.isAssign){
var n=O(e);return n.operator=St,n.left=e,M(),n.right=K(t),U(e),I(n,"AssignmentExpression");
}return e}function J(t){var e=Q(t);if(V(xe)){var n=O(e);return n.test=e,n.consequent=Z(!0),
z(ye),n.alternate=Z(!0,t),I(n,"ConditionalExpression")}return e}function Q(t){return tt(et(),-1,t);
}function tt(t,e,n){var i=wt.binop;if(null!=i&&(!n||wt!==ue)&&i>e){var r=O(t);r.left=t,
r.operator=St,M(),r.right=tt(et(),i,n);var a=I(r,/&&|\|\|/.test(r.operator)?"LogicalExpression":"BinaryExpression");
return tt(a,e,n)}return t}function et(){if(wt.prefix){var t=R(),e=wt.isUpdate;return t.operator=St,
t.prefix=!0,Ct=!0,M(),t.argument=et(),e?U(t.argument):Pt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),
I(t,e?"UpdateExpression":"UnaryExpression")}for(var i=nt();wt.postfix&&!N();){var t=O(i);
t.operator=St,t.prefix=!1,t.argument=i,U(i),M(),i=I(t,"UpdateExpression")}return i;
}function nt(){return it(rt())}function it(t,e){if(V(_e)){var n=O(t);return n.object=t,
n.property=ct(!0),n.computed=!1,it(I(n,"MemberExpression"),e)}if(V(de)){var n=O(t);
return n.object=t,n.property=Z(),n.computed=!0,z(he),it(I(n,"MemberExpression"),e);
}if(!e&&V(me)){var n=O(t);return n.callee=t,n.arguments=ut(ge,!1),it(I(n,"CallExpression"),e);
}return t}function rt(){switch(wt){case ae:var t=R();return M(),I(t,"ThisExpression");
case Vt:return ct();case Ot:case Dt:case It:var t=R();return t.value=St,t.raw=ht.slice(pt,yt),
M(),I(t,"Literal");case se:case oe:case le:var t=R();return t.value=wt.atomValue,
t.raw=wt.keyword,M(),I(t,"Literal");case me:var e=_t,n=pt;M();var i=Z();return i.start=n,
i.end=yt,dt.locations&&(i.loc.start=e,i.loc.end=xt),dt.ranges&&(i.range=[n,yt]),z(ge),
i;case de:var t=R();return M(),t.elements=ut(he,!0,!0),I(t,"ArrayExpression");case ve:
return st();case Wt:var t=R();return M(),lt(t,!1);case re:return at();default:G();
}}function at(){var t=R();return M(),t.callee=it(rt(),!0),V(me)?t.arguments=ut(ge,!1):t.arguments=Rt,
I(t,"NewExpression")}function st(){var t=R(),e=!0,i=!1;for(t.properties=[],M();!V(fe);){
if(e)e=!1;else if(z(be),dt.allowTrailingCommas&&V(fe))break;var r=void 0,a={key:ot()
},s=!1;if(V(ye)?(a.value=Z(!0),r=a.kind="init"):dt.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(s=i=!0,
r=a.kind=a.key.name,a.key=ot(),wt!==me&&G(),a.value=lt(R(),!1)):G(),"Identifier"===a.key.type&&(Pt||i))for(var o=0;o<t.properties.length;++o){
var l=t.properties[o];if(l.key.name===a.key.name){var u=r==l.kind||s&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);
u&&!Pt&&"init"===r&&"init"===l.kind&&(u=!1),u&&n(a.key.start,"Redefinition of property");
}}t.properties.push(a)}return I(t,"ObjectExpression")}function ot(){return wt===Ot||wt===Dt?rt():ct(!0);
}function lt(t,e){wt===Vt?t.id=ct():e?G():t.id=null,t.params=[];var i=!0;for(z(me);!V(ge);)i?i=!1:z(be),
t.params.push(ct());var r=jt,a=Tt;if(jt=!0,Tt=[],t.body=$(!0),jt=r,Tt=a,Pt||t.body.body.length&&D(t.body.body[0]))for(var s=t.id?-1:0;s<t.params.length;++s){
var o=0>s?t.id:t.params[s];if((Ge(o.name)||Ue(o.name))&&n(o.start,"Defining '"+o.name+"' in strict mode"),
s>=0)for(var l=0;s>l;++l)o.name===t.params[l].name&&n(o.start,"Argument name clash in strict mode");
}return I(t,e?"FunctionDeclaration":"FunctionExpression")}function ut(t,e,n){for(var i=[],r=!0;!V(t);){
if(r)r=!1;else if(z(be),e&&dt.allowTrailingCommas&&V(t))break;n&&wt===be?i.push(null):i.push(Z(!0));
}return i}function ct(t){var e=R();return e.name=wt===Vt?St:t&&!dt.forbidReserved&&wt.keyword||G(),
Ct=!1,M(),I(e,"Identifier")}t.version="0.4.0";var dt,ht,vt,ft;t.parse=function(t,n){
return ht=String(t),vt=ht.length,e(n),a(),H(dt.program)};var mt=t.defaultOptions={
ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,
onComment:null,ranges:!1,program:null,sourceFile:null},gt=t.getLineInfo=function(t,e){
for(var n=1,i=0;;){Ze.lastIndex=i;var r=Ze.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length;
}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return y(t),r.start=pt,
r.end=yt,r.startLoc=_t,r.endLoc=xt,r.type=wt,r.value=St,r}ht=String(t),vt=ht.length,
e(n),a();var r={};return i.jumpTo=function(t,e){if(bt=t,dt.locations){Et=1,kt=Ze.lastIndex=0;
for(var n=void 0;(n=Ze.exec(ht))&&n.index<t;)++Et,kt=n.index+n[0].length}Ct=e,u();
},i};var bt,pt,yt,_t,xt,wt,St,Ct,Et,kt,At,Lt,Mt,jt,Tt,Pt,Rt=[],Ot={type:"num"},It={
type:"regexp"},Dt={type:"string"},Vt={type:"name"},Nt={type:"eof"},Bt={keyword:"break"
},zt={keyword:"case",beforeExpr:!0},Gt={keyword:"catch"},Ut={keyword:"continue"},Ht={
keyword:"debugger"},Ft={keyword:"default"},qt={keyword:"do",isLoop:!0},$t={keyword:"else",
beforeExpr:!0},Yt={keyword:"finally"},Xt={keyword:"for",isLoop:!0},Wt={keyword:"function"
},Zt={keyword:"if"},Kt={keyword:"return",beforeExpr:!0},Jt={keyword:"switch"},Qt={
keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ne={keyword:"while",
isLoop:!0},ie={keyword:"with"},re={keyword:"new",beforeExpr:!0},ae={keyword:"this"
},se={keyword:"null",atomValue:null},oe={keyword:"true",atomValue:!0},le={keyword:"false",
atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},ce={"break":Bt,"case":zt,"catch":Gt,
"continue":Ut,"debugger":Ht,"default":Ft,"do":qt,"else":$t,"finally":Yt,"for":Xt,
"function":Wt,"if":Zt,"return":Kt,"switch":Jt,"throw":Qt,"try":te,"var":ee,"while":ne,
"with":ie,"null":se,"true":oe,"false":le,"new":re,"in":ue,"instanceof":{keyword:"instanceof",
binop:7,beforeExpr:!0},"this":ae,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0
},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,
beforeExpr:!0}},de={type:"[",beforeExpr:!0},he={type:"]"},ve={type:"{",beforeExpr:!0
},fe={type:"}"},me={type:"(",beforeExpr:!0},ge={type:")"},be={type:",",beforeExpr:!0
},pe={type:";",beforeExpr:!0},ye={type:":",beforeExpr:!0},_e={type:"."},xe={type:"?",
beforeExpr:!0},we={binop:10,beforeExpr:!0},Se={isAssign:!0,beforeExpr:!0},Ce={isAssign:!0,
beforeExpr:!0},Ee={binop:9,prefix:!0,beforeExpr:!0},ke={postfix:!0,prefix:!0,isUpdate:!0
},Ae={prefix:!0,beforeExpr:!0},Le={binop:1,beforeExpr:!0},Me={binop:2,beforeExpr:!0
},je={binop:3,beforeExpr:!0},Te={binop:4,beforeExpr:!0},Pe={binop:5,beforeExpr:!0
},Re={binop:6,beforeExpr:!0},Oe={binop:7,beforeExpr:!0},Ie={binop:8,beforeExpr:!0
},De={binop:10,beforeExpr:!0};t.tokTypes={bracketL:de,bracketR:he,braceL:ve,braceR:fe,
parenL:me,parenR:ge,comma:be,semi:pe,colon:ye,dot:_e,question:xe,slash:we,eq:Se,name:Vt,
eof:Nt,num:Ot,regexp:It,string:Dt};for(var Ve in ce)t.tokTypes["_"+Ve]=ce[Ve];var Ne,Be=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ze=i("class enum extends super const export import"),Ge=i("implements interface let package private protected public static yield"),Ue=i("eval arguments"),He=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Fe=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,qe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",$e="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ye=new RegExp("["+qe+"]"),Xe=new RegExp("["+qe+$e+"]"),We=/[\n\r\u2028\u2029]/,Ze=/\r\n|[\n\r\u2028\u2029]/g,Ke=t.isIdentifierStart=function(t){
return 65>t?36===t:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Ye.test(String.fromCharCode(t));
},Je=t.isIdentifierChar=function(t){return 48>t?36===t:58>t?!0:65>t?!1:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Xe.test(String.fromCharCode(t));
},Qe={kind:"loop"},tn={kind:"switch"}});var g={"+":"__add","-":"__subtract","*":"__multiply",
"/":"__divide","%":"__modulo","==":"equals","!=":"equals"},b={"-":"__negate","+":null
},p=n.each(["add","subtract","multiply","divide","modulo","negate"],function(t){this["__"+t]="#"+t;
},{});return u.inject(p),d.inject(p),V.inject(p),"complete"===document.readyState?setTimeout(c):U.add(window,{
load:c}),{compile:s,execute:o,load:h,parse:a}}.call(this),t=new(r.inject(n.exports,{
enumerable:!0,Base:n,Numerical:o,Key:Y})),"function"==typeof define&&define.amd?define("paper",t):"object"===("undefined"==typeof module?"undefined":$traceurRuntime["typeof"](module))&&module&&(module.exports=t),
t};t.setup(document.createElement("canvas"));var e=t;return{get default(){return e;
}}}),System.registerModule("utils/array",[],function(){"use strict";var t=function(t,e){
var n=void 0!==arguments[2]?arguments[2]:!1;if(t.length!==e.length)return!1;if(n)for(var i in t){
var r=t[i];if(r!==e[i])return!1}else{for(var a=0;a<t.length;a+=1)if(!e.includes(t[a]))return!1;
for(var a=0;a<e.length;a+=1)if(!t.includes(e[a]))return!1}return!0},e=function(t){
return $traceurRuntime.spread(new Set(t))},n=function(t,e){if(0===t.length)return!1;
for(var n=0;n<t.length;n+=1)if(t[n]!==e)return!1;return!0};return{get compareArrays(){
return t},get removeDuplicates(){return e},get includesOnly(){return n}}}),System.registerModule("utils/artwork",[],function(){
"use strict";var t=System.get("elements/bx-rectpath")["default"],e=System.get("elements/bx-ringpath")["default"],n=System.get("elements/bx-starpath")["default"],i=System.get("libs/pako")["default"],r=System.get("utils/array").removeDuplicates,a=System.get("utils/dom"),s=a.createElement,o=(a.createSVGLength,
a.createSVGRect,a.insertAfter,a.normalizeWhitespace),l=System.get("utils/font"),u=l.isCSSRuleGoogleFontsImportRule,c=l.parseGoogleFontsImportRule,d=System.get("utils/gradient"),h=d.normalizeLinearGradient,v=d.normalizeRadialGradient,f=System.get("utils/path"),m=f.circleToEllipse,g=f.lineToPath,b=f.polylineToPath,p=f.polygonToPath,y=System.get("utils/pattern"),_=y.getComputedPatternProperties,x=y.isDerivedPattern,w=System.get("utils/string").collapseWhitespace,S=System.get("utils/style").reflectStyleElementCSSOM,C=System.get("utils/text").normalizeText,E=System.get("utils/constants"),k=E.PROPERTIES,A=E.DEPRACATED_ELEMENTS,L=E.XMLNS_NAMESPACE,M=E.XLINK_NAMESPACE,j=E.SVG_NAMESPACE,T=E.BX_NAMESPACE,P=Number.parseFloat,R=(Object.keys,
SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX),O=SVGLength,I=(O.SVG_LENGTHTYPE_NUMBER,
O.SVG_LENGTHTYPE_PERCENTAGE),D=function(t){var e=void 0!==arguments[1]?arguments[1]:"xml";
t=t.cloneNode(!0),$(t,e);var n;if("xml"===e){var i=new XMLSerializer,r='<?xml version="1.0" encoding="utf-8"?>\n';
n=r+i.serializeToString(t)}else if("html"===e){var a="<!doctype html>\n";n=a+t.outerHTML,
n=n.replaceAll(' xmlns:xlink="http://www.w3.org/1999/xlink"',"")}return n=n.replaceAll("url(&quot;","url("),
n=n.replaceAll("&quot;)",")")},V=function(t){var e=new DOMParser,n=e.parseFromString(t,"text/html");
return null!==n.querySelector("svg")},N=function(t){var e=new DOMParser,n=e.parseFromString(t,"text/html"),i=n.querySelector("svg")||null;
return i&&(q(i),i=document.importNode(i,!0)),i},B=function(t){var e=void 0!==arguments[1]?arguments[1]:"png",n=void 0!==arguments[2]?arguments[2]:1,i=void 0!==arguments[3]?arguments[3]:!0;
return new Promise(function(r){var a=D(t,"xml"),o=s("canvas"),l=o.getContext("2d"),u=new Blob([a],{
type:"image/svg+xml;charset=utf-8"}),c=URL.createObjectURL(u),d=new Image;d.src=c,
d.addEventListener("load",function(){o.width=d.naturalWidth,o.height=d.naturalHeight,
"jpg"===e?(l.fillStyle="white",l.fillRect(0,0,d.naturalWidth,d.naturalHeight)):"png"===e&&i===!1&&(l.fillStyle="white",
l.fillRect(0,0,d.naturalWidth,d.naturalHeight)),l.drawImage(d,0,0);var t=null;"png"===e?t=o.toDataURL("image/png",n):"jpg"===e&&(t=o.toDataURL("image/jpeg",n)),
r(t),URL.revokeObjectURL(c)})})},z=function(t){try{for(var e=i.inflate(t),n="",r=0,a=e.length;a>r;r+=1){
var s=String.fromCharCode(e[r]);n+=s}return n}catch(o){return null}},G=function(t,e){
for(var n=[],i=[],r=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT),a=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();)s.id&&i.push(s.id);
for(;s=r.nextNode();)s.id&&n.push(s.id);var o=n.filter(function(t){return i.includes(t);
}),l=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=o[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var f=h.value,m=t.querySelector("#"+f),g=void 0;
g="linearGradient"===m.localName||"radialGradient"===m.localName?"gradient":"clipPath"===m.localName?"path":m.localName;
for(var b=void 0,p=1;;){var y=g+"-"+p;if(!t.querySelector("#"+y)&&!e.querySelector("#"+y)){
b=y;break}p+=1}for(var _=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT),x=null;x=_.nextNode();){
x.id===f&&(x.id=b),x.href&&x.href.baseVal==="#"+f&&(x.href.baseVal="#"+b);var w=!0,S=!1,C=void 0;
try{for(var E=void 0,k=l[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){var A=E.value,L=x.style.getPropertyValue(A);
if(L&&L.startsWith("url(")){var M=L.substring(5,L.length-2);M===f&&x.style.setProperty(A,"url(#"+b+")");
}}}catch(j){S=!0,C=j}finally{try{w||null==k["return"]||k["return"]()}finally{if(S)throw C;
}}}}}catch(T){c=!0,d=T}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}},U=function(t){var e={1:"",2:"%",3:"ems",4:"exs",5:"px",6:"cm",7:"mm",8:"in",9:"pt",
10:"pc"},n={width:null,height:null,widthUnit:"",heightUnit:""};if(t.style.width){
n.width=P(t.style.width);var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=["%","ems","exs","px","cm","mm","in","pt","pc"][Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t.style.width.endsWith(l)&&(n.widthUnit=l)}}catch(u){r=!0,a=u}finally{
try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}}else t.hasAttribute("width")&&(n.width=t.width.baseVal.valueInSpecifiedUnits,
n.widthUnit=e[t.width.baseVal.unitType]);if(t.style.height){n.height=P(t.style.height);
var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=["%","ems","exs","px","cm","mm","in","pt","pc"][Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;t.style.height.endsWith(m)&&(n.heightUnit=m)}}catch(g){d=!0,h=g}finally{
try{c||null==f["return"]||f["return"]()}finally{if(d)throw h}}}else t.hasAttribute("height")&&(n.height=t.height.baseVal.valueInSpecifiedUnits,
n.heightUnit=e[t.height.baseVal.unitType]);return n},H=function(t,e,n){t=t.cloneNode(!0),
t.setAttribute("width","1000000px"),t.setAttribute("height","100px"),t.setAttribute("viewBox","0 0 1000000 100");
var i=s("svg:g");i.style.opacity="0";var r=!0,a=!1,o=void 0;try{for(var l=void 0,u=t.children[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value;i.append(c)}}catch(d){a=!0,o=d}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw o}}t.append(i);var h=$traceurRuntime.spread(t.querySelectorAll("symbol")),v={},f=1e5,m=!0,g=!1,b=void 0;
try{for(var p=void 0,y=h[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value,x=s("svg:use");
x.setAttribute("width","100"),x.setAttribute("height","100"),x.setAttribute("x",f),
x.href.baseVal="#"+_.id,t.append(x),v[_.id]=f,f+=200}}catch(w){g=!0,b=w}finally{try{
m||null==y["return"]||y["return"]()}finally{if(g)throw b}}var S=D(t,"xml"),C=s("canvas"),E=C.getContext("2d"),k=new Blob([S],{
type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),L=new Image,M=function(t){
for(var i=0===h.length;t.timeRemaining()>20&&i===!1;){var r=h.pop(),a=v[r.id];i=0===h.length,
E.clearRect(0,0,100,100),E.drawImage(L,-a,0),e(r.id,C.toDataURL("image/png"),i)}i===!1?requestIdleCallback(M):(URL.revokeObjectURL(A),
n&&n())};L.addEventListener("load",function(){C.width=100,C.height=100,requestIdleCallback(M);
}),L.src=A},F=function(t,e,n){t=t.cloneNode(!0),t.setAttribute("width","1000000px"),
t.setAttribute("height","100px"),t.setAttribute("viewBox","0 0 1000000 100");var i=s("svg:g");
i.style.opacity="0";var r=!0,a=!1,o=void 0;try{for(var l=void 0,u=t.children[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value;i.append(c)}}catch(d){a=!0,o=d}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw o}}t.append(i);var h={},v=1e5,f=$traceurRuntime.spread(t.querySelectorAll("pattern"));
f=f.filter(function(t){return x(t)===!1});var m=!0,g=!1,b=void 0;try{for(var p=void 0,y=f[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value;_.removeAttribute("patternTransform");var w=s("svg:rect");w.setAttribute("width","100"),
w.setAttribute("height","100"),w.setAttribute("x",v),w.setAttribute("fill",'url("#'+_.id+'")'),
t.append(w),h[_.id]=v,v+=200}}catch(S){g=!0,b=S}finally{try{m||null==y["return"]||y["return"]();
}finally{if(g)throw b}}var C=D(t,"xml"),E=s("canvas"),k=E.getContext("2d"),A=new Blob([C],{
type:"image/svg+xml;charset=utf-8"}),L=URL.createObjectURL(A),M=new Image,j=function(t){
for(var i=0===f.length;t.timeRemaining()>20&&i===!1;){var r=f.pop(),a=h[r.id];i=0===f.length,
k.clearRect(0,0,100,100),k.drawImage(M,-a,0),e(r.id,E.toDataURL("image/png"),i)}i===!1?requestIdleCallback(j):(URL.revokeObjectURL(L),
n&&n())};M.addEventListener("load",function(){E.width=100,E.height=100,requestIdleCallback(j);
}),M.src=L},q=function(i){for(var r,a=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT);r=a.nextNode();)if(r.nodeName.includes(":"))if(r.nodeName.startsWith("bx:")){
var s=r.nodeName.split(":")[1],o=document.createElement("bx-"+s),l=!0,u=!1,c=void 0;
try{for(var d=void 0,f=$traceurRuntime.spread(r.attributes)[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){
var y=d.value;o.setAttribute(y.name,y.value)}}catch(_){u=!0,c=_}finally{try{l||null==f["return"]||f["return"]();
}finally{if(u)throw c}}var x=!0,w=!1,S=void 0;try{for(var E=void 0,L=$traceurRuntime.spread(r.childNodes)[Symbol.iterator]();!(x=(E=L.next()).done);x=!0){
var M=E.value;o.append(M)}}catch(j){w=!0,S=j}finally{try{x||null==L["return"]||L["return"]();
}finally{if(w)throw S}}r.replace(o)}else r.remove();else{var T=!0,P=!1,R=void 0;try{
for(var O=void 0,I=$traceurRuntime.spread(r.attributes)[Symbol.iterator]();!(T=(O=I.next()).done);T=!0){
var D=O.value,V=D.name,N=D.value;if(V.includes(":")){if("xlink:href"===V)continue;
if(V.startsWith("bx:")){var B=V.split(":")[1];r.setAttribute("data-bx-"+B,N),r.removeAttribute(V);
}else r.removeAttribute(V)}}}catch(z){P=!0,R=z}finally{try{T||null==I["return"]||I["return"]();
}finally{if(P)throw R}}}for(a=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT);r=a.nextNode();)if("#comment"!==r.nodeName)if(A.includes(r.nodeName))r.remove();else if("script"!==r.nodeName&&"foreignObject"!==r.nodeName&&"title"!==r.nodeName&&"metadata"!==r.nodeName&&"switch"!==r.nodeName){
if("path"===r.nodeName)if(r.hasAttribute("data-bx-is")){var G=r.getAttribute("data-bx-is"),U=null;
if("bx-rectpath"===G?U=t.fromSVGPath(r):"bx-ringpath"===G?U=e.fromSVGPath(r):"bx-starpath"===G&&(U=n.fromSVGPath(r)),
U){r.replace(U);continue}var H=!0,F=!1,q=void 0;try{for(var $=void 0,K=$traceurRuntime.spread(r.attributes)[Symbol.iterator]();!(H=($=K.next()).done);H=!0){
var J=$.value,Q=J.name;J.value;Q.startsWith("data-bx-")&&r.removeAttribute(Q)}}catch(tt){
F=!0,q=tt}finally{try{H||null==K["return"]||K["return"]()}finally{if(F)throw q}}}else r.hasAttribute("is");else{
if("circle"===r.nodeName){r.replace(m(r));continue}if("rect"===r.nodeName){r.replace(t.fromSVGRect(r));
continue}if("line"===r.nodeName){r.replace(g(r));continue}if("polyline"===r.nodeName){
r.replace(b(r));continue}if("polygon"===r.nodeName){r.replace(p(r));continue}if("linearGradient"===r.nodeName)h(r);else if("radialGradient"===r.nodeName)v(r);else if("text"===r.nodeName)C(r);else if("symbol"===r.nodeName){
if(r.hasAttribute("id")===!1){for(var et=0;null!==i.querySelector("#symbol-"+et);)et+=1;
r.setAttribute("id","symbol-"+et)}}else if("pattern"===r.nodeName&&r.hasAttribute("id")===!1){
for(var nt=0;null!==i.querySelector("#pattern-"+nt);)nt+=1;r.setAttribute("id","pattern-"+nt);
}}var it=!0,rt=!1,at=void 0;try{for(var st=void 0,ot=$traceurRuntime.spread(r.attributes)[Symbol.iterator]();!(it=(st=ot.next()).done);it=!0){
var lt=st.value;if("requiredFeatures"===lt.name||"requiredExtensions"===lt.name||"externalResourcesRequired"===lt.name||"systemLanguage"===lt.name)r.removeAttribute(lt.name);else if(lt.name.startsWith("on"))r.removeAttribute(lt.name);else if(k.includes(lt.name)){
var ut=lt.name;""===r.style.getPropertyValue(ut)&&r.style.setProperty(ut,r.getAttribute(ut)),
r.removeAttribute(lt.name)}}}catch(ct){rt=!0,at=ct}finally{try{it||null==ot["return"]||ot["return"]();
}finally{if(rt)throw at}}}else r.remove();else r.remove();X(i),Y(i),W(i),Z(i)},$=function(t){
for(var e,n=void 0!==arguments[1]?arguments[1]:"xml",i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT);e=i.nextNode();)if("path"===e.localName){
if(e.hasAttribute("is")){var r=e.getAttribute("is");if("bx-rectpath"===r){var a=e.toSVGRect();
if(a)e.replace(a);else{var s=e.toSVGPath();e.replace(s)}}else if("bx-ringpath"===r||"bx-starpath"===r){
var l=e.toSVGPath();e.replace(l)}else e.remove()}}else"ellipse"===e.localName||"style"===e.localName&&""===w(e.textContent)&&e.remove();
if(o(t),"xml"===n){for(var u,c=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT),d=!1,h=!1;u=c.nextNode();)if(u.localName.startsWith("bx-")){
h=!0;var v=document.createElementNS(T,"bx:"+u.localName.substring(3)),f=!0,m=!1,g=void 0;
try{for(var b=void 0,p=$traceurRuntime.spread(u.attributes)[Symbol.iterator]();!(f=(b=p.next()).done);f=!0){
var y=b.value;v.setAttribute(y.name,y.value)}}catch(_){m=!0,g=_}finally{try{f||null==p["return"]||p["return"]();
}finally{if(m)throw g}}var x=!0,S=!1,C=void 0;try{for(var E=void 0,k=$traceurRuntime.spread(u.childNodes)[Symbol.iterator]();!(x=(E=k.next()).done);x=!0){
var A=E.value;v.append(A)}}catch(P){S=!0,C=P}finally{try{x||null==k["return"]||k["return"]();
}finally{if(S)throw C}}u.replace(v)}else{var R=!0,O=!1,I=void 0;try{for(var D=void 0,V=$traceurRuntime.spread(u.attributes)[Symbol.iterator]();!(R=(D=V.next()).done);R=!0){
var N=D.value;if("xlink:href"===N.name)d=!0;else if(N.name.startsWith("data-bx-")){
var B=N.name.substring(8);u.setAttributeNS(T,"bx:"+B,N.value),u.removeAttribute(N.name),
h=!0}}}catch(z){O=!0,I=z}finally{try{R||null==V["return"]||V["return"]()}finally{
if(O)throw I}}}t.setAttributeNS(L,"xmlns",j),d&&t.setAttributeNS(L,"xmlns:xlink",M),
h&&t.setAttributeNS(L,"xmlns:bx",T)}},Y=function(t){var e,n,i,a=null,o=[],l=!0,d=!1,h=void 0;
try{for(var v=void 0,f=t.querySelectorAll("style")[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){
for(var m=v.value,g=[],b=0,p=m.sheet.rules.length;p>b;b+=1){var y=m.sheet.rules[b];
if(u(y)){var _=!0,x=!1,w=void 0;try{for(var C=function(){var t=E.value,r=(n=t[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),a=(i=n.next()).done?void 0:i.value,s=o.find(function(t){
return t.familyName===r});s?(e=s.variants).push.apply(e,$traceurRuntime.spread(a)):o.push({
familyName:r,variants:a})},E=void 0,k=c(y)[Symbol.iterator]();!(_=(E=k.next()).done);_=!0)C();
}catch(A){x=!0,w=A}finally{try{_||null==k["return"]||k["return"]()}finally{if(x)throw w;
}}g.push(b)}}if(g.length>0){var L=!0,M=!1,j=void 0;try{for(var T=void 0,P=g.reverse()[Symbol.iterator]();!(L=(T=P.next()).done);L=!0){
var R=T.value;m.sheet.deleteRule(R)}}catch(O){M=!0,j=O}finally{try{L||null==P["return"]||P["return"]();
}finally{if(M)throw j}}S(m),0===m.sheet.rules.length&&(null===a?a=m:m.remove())}}
}catch(I){d=!0,h=I}finally{try{l||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}if(o.length>0){if(null===a){a=s("svg:style");var D=t.querySelector("defs");D.insertBefore(a,D.querySelector("style"));
}var V="@import url(https://fonts.googleapis.com/css?family=";o.sort(function(t,e){
return t.familyName>e.familyName});var N=!0,B=!1,z=void 0;try{for(var G=void 0,U=o[Symbol.iterator]();!(N=(G=U.next()).done);N=!0){
var H=G.value,F=H,q=F.familyName,$=F.variants;$=r($),$.sort(),H!==o[0]&&(V+="|"),
V+=q.replace(" ","+")+":"+$.join(",")}}catch(Y){B=!0,z=Y}finally{try{N||null==U["return"]||U["return"]();
}finally{if(B)throw z}}V+=");",a.textContent=V}},X=function(t){var e,n=t.querySelectorAll("defs");
if(0===n.length)e=s("svg:defs"),t.prepend(e);else if(1===n.length)e=n[0],e.parentElement!==t&&t.prepend(e);else if(n.length>1){
e=s("svg:defs");var i=!0,r=!1,a=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value,c=!0,d=!1,h=void 0;try{for(var v=void 0,f=$traceurRuntime.spread(u.children)[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;e.append(m)}}catch(g){d=!0,h=g}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}u.remove()}}catch(b){r=!0,a=b}finally{try{i||null==l["return"]||l["return"]();
}finally{if(r)throw a}}t.prepend(e)}var p=!0,y=!1,_=void 0;try{for(var x=void 0,w=t.querySelectorAll("symbol")[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;e.contains(S)===!1&&e.append(S)}}catch(C){y=!0,_=C}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}var E=!0,k=!1,A=void 0;try{for(var L=void 0,M=t.querySelectorAll("style")[Symbol.iterator]();!(E=(L=M.next()).done);E=!0){
var j=L.value;e.contains(j)===!1&&e.append(j)}}catch(T){k=!0,A=T}finally{try{E||null==M["return"]||M["return"]();
}finally{if(k)throw A}}},W=function(t){},Z=function(t){var e,n,i=!0,r=!1,a=void 0;
try{for(var o=void 0,l=t.querySelectorAll("pattern")[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value,c=_(u).patternUnits;c===R&&(u.hasAttribute("x")&&u.x.baseVal.unitType===I&&u.setAttribute("x",u.x.baseVal.valueInSpecifiedUnits/100),
u.hasAttribute("y")&&u.y.baseVal.unitType===I&&u.setAttribute("y",u.y.baseVal.valueInSpecifiedUnits/100),
u.hasAttribute("width")&&u.width.baseVal.unitType===I&&u.setAttribute("width",u.width.baseVal.valueInSpecifiedUnits/100),
u.hasAttribute("height")&&u.height.baseVal.unitType===I&&u.setAttribute("height",u.height.baseVal.valueInSpecifiedUnits/100));
}}catch(d){r=!0,a=d}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw a;
}}for(var h=$traceurRuntime.spread(t.querySelectorAll("pattern")),v=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT),f=null,m=Symbol();f=v.nextNode();){
var g=!0,b=!1,p=void 0;try{for(var y=function(){var t=x.value,e=f.style[t];if(e&&e.startsWith("url(")){
var n=e.substring(6,e.length-2),i=h.find(function(t){return t.id===n});i&&(i[m]||(i[m]=[]),
i[m].push([f,t]))}},x=void 0,w=["fill","stroke"][Symbol.iterator]();!(g=(x=w.next()).done);g=!0)y();
}catch(S){b=!0,p=S}finally{try{g||null==w["return"]||w["return"]()}finally{if(b)throw p;
}}}var C=!0,E=!1,k=void 0;try{for(var A=void 0,L=h[Symbol.iterator]();!(C=(A=L.next()).done);C=!0){
var M=A.value,j=M[m]||[],T=t.querySelector("defs");if(j.length>1){j.shift();var P=!0,O=!1,D=void 0;
try{for(var V=void 0,N=j[Symbol.iterator]();!(P=(V=N.next()).done);P=!0){for(var B=V.value,z=(e=B[Symbol.iterator](),
(n=e.next()).done?void 0:n.value),G=(n=e.next()).done?void 0:n.value,U=0,H=void 0;;){
U+=1;var F=M.id+"-"+U;if(null===t.querySelector("#"+F)){H=F;break}}var q=s("svg:pattern");
q.setAttribute("id",H),q.setAttribute("href","#"+M.getAttribute("id")),M.hasAttribute("patternTransform")?q.setAttribute("patternTransform",M.getAttribute("patternTransform")):q.setAttribute("patternTransform",""),
T.append(q),z.style[G]='url("#'+H+'")'}}catch($){O=!0,D=$}finally{try{P||null==N["return"]||N["return"]();
}finally{if(O)throw D}}}}}catch(Y){E=!0,k=Y}finally{try{C||null==L["return"]||L["return"]();
}finally{if(E)throw k}}};return{get serializeArtwork(){return D},get isArtworkString(){
return V},get deserializeArtwork(){return N},get rasterizeArtwork(){return B},get uncompressArtwork(){
return z},get resolveConflictingIDs(){return G},get getComputedViewport(){return U;
},get getSymbolThumbnails(){return H},get getPatternThumbnails(){return F}}}),System.registerModule("utils/bbox",[],function(){
"use strict";var t=System.get("utils/dom"),e=t.closest,n=t.createSVGRect,i=System.get("utils/rect").combineRects,r=System.get("utils/text").getRangeOffsetRelativeToElement,a={
fill:!0,stroke:!0,marker:!0,clipped:!0},s=function(t){var s,o=void 0!==arguments[1]?arguments[1]:a;
if("tspan"===t.localName){var l=document.createRange();if(l.selectNodeContents(t),
l.collapsed===!1){for(var u=e(l.startContainer,"text"),c=r(l,u,"start"),d=r(l,u,"end"),h=[],v=c;d>v;v+=1){
var f=u.getExtentOfChar(v);h.push(f)}s=i(h)}else s=n(0,0,0,0)}else if("use"===t.localName){
var m=t.getBBox(),g=m.x,b=m.y,p=m.width,y=m.height;s=n(t.hasAttribute("x")?t.x.baseVal.value:g,t.hasAttribute("y")?t.y.baseVal.value:b,t.hasAttribute("width")?t.width.baseVal.value:p,t.hasAttribute("height")?t.height.baseVal.value:y);
}else s=t.getBBox(o);return s},o=function(t){var e=t.getBoundingClientRect();return n(e.left,e.top,e.width,e.height);
};return{get getUserBBox(){return s},get getClientBBox(){return o}}}),System.registerModule("utils/bool",[],function(){
"use strict";var t=(System.get("utils/dom").createElement,System.get("utils/path").anyToPath),e=System.get("utils/transform").reduceTransform,n=System.get("libs/paper")["default"],i=function(t,e){
return o("union",t,e)},r=function(t,e){return o("difference",t,e)},a=function(t,e){
return o("intersection",t,e)},s=function(t,e){return o("exclusion",t,e)},o=function(t,e,n){
var i,r=l(e),a=l(n);"union"===t?i=r.unite(a):"intersection"===t?i=r.intersect(a):"difference"===t?i=r.subtract(a):"exclusion"===t&&(i=r.exclude(a));
var s=i.exportSVG();return s&&s.setAttribute("style",e.getAttribute("style")),s},l=function(i){
i=t(i),i.setPathData(i.getPathData({normalize:!0})),e(i);var r,a=i.getAttribute("d"),s=(a.match(/M/g)||[]).length>1;
if(s){r=new n.CompoundPath(a);var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=r.children[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h.closed||h.closePath()}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}}else r=new n.Path(a),r.closed||r.closePath();return r};return{
get getUnionPath(){return i},get getDifferencePath(){return r},get getIntersectionPath(){
return a},get getExclusionPath(){return s}}}),System.registerModule("utils/color",[],function(){
"use strict";var t=System.get("classes/string-scanner")["default"],e=System.get("utils/constants"),n=e.NAMED_COLORS,i=e.MATERIAL_COLORS,r=System.get("utils/math"),a=r.normalize,s=r.round,o=System.get("utils/random").getRandomNumber,l=System.get("utils/type").isNumber,u=Math,c=u.min,d=u.max,h=u.floor,v=Number,f=v.parseFloat,m=v.parseInt,g=function(){
var t=o(0,i.length-1,0);return i[t]},b=function(){return"#"+Math.floor(16777215*Math.random()).toString(16);
},p=function(t){var e=void 0!==arguments[1]?arguments[1]:"rgba",n=System.get("classes/color")["default"];
if("rgba"===e){var i=L(t,"rgba"),r=i.r,a=i.g,s=i.b,o=i.a;return new n(r,a,s,o,"rgba");
}var l=L(t,"hsla"),u=l.h,c=l.s,d=l.l,h=l.a;return new n(u,c,d,h,"hsla")},y=function(t){
try{L(t)}catch(e){return!1}return!0},_=function(t){if(t=t.toLowerCase(),"#"!==t[0])return!1;
if(4!==t.length&&7!==t.length)return!1;t=t.substring(1);var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if(!e.includes(o))return!1}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!0},x=function(t,e,n){t/=360,e/=100,n/=100;var i=t,r=(2-e)*n,a=e*n;
return 1>=r?0===r?a=0:a/=r:2===r?a=0:a/=2-r,r/=2,i=360*i,a=100*d(0,c(1,a)),r=100*d(0,c(1,r)),
[i,a,r]},w=function(t,e,n){t/=360,e/=100,n=n/100*2,e*=1>=n?n:2-n;var i,r,a=t;return i=n+e===0?0:2*e/(n+e),
r=(n+e)/2,a=360*a,i=100*d(0,c(1,i)),r=100*d(0,c(1,r)),[a,i,r]},S=function(t,e,n){
t/=360,e/=100,n/=100;var i,r,s;if(0===e)i=r=s=n;else{var o,l,u=function(t,e,n){return 0>n&&(n+=1),
n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t};o=.5>n?n*(1+e):n+e-n*e,
l=2*n-o,i=u(l,o,t+1/3),r=u(l,o,t),s=u(l,o,t-1/3)}return i=a(255*i,0,255,0),r=a(255*r,0,255,0),
s=a(255*s,0,255,0),[i,r,s]},C=function(t,e,n){t/=255,e/=255,n/=255;var i,r,s,o=d(t,e,n),l=c(t,e,n);
if(i=r=s=(o+l)/2,o===l)i=r=0;else{var u=o-l;if(r=s>.5?u/(2-o-l):u/(o+l),o===t){var h;
h=n>e?6:0,i=(e-n)/u+h}else o===e?i=(n-t)/u+2:o===n&&(i=(t-e)/u+4)}return i=a(i/6*360,0,360,0),
r=a(100*r,0,100,1),s=a(100*s,0,100,1),[i,r,s]},E=function(t,e,n){t/=360,e/=100,n/=100;
var i=h(6*t),r=6*t-i,a=n*(1-e),s=n*(1-r*e),o=n*(1-(1-r)*e),l=0,u=0,c=0;return i%6===0?(l=n,
u=o,c=a):i%6===1?(l=s,u=n,c=a):i%6===2?(l=a,u=n,c=o):i%6===3?(l=a,u=s,c=n):i%6===4?(l=o,
u=a,c=n):i%6===5&&(l=n,u=a,c=s),l=255*l,u=255*u,c=255*c,[l,u,c]},k=function(t,e,n){
t/=255,e/=255,n/=255;var i=d(t,e,n),r=c(t,e,n),a=0,s=0,o=i,l=i-r;return s=0===i?0:l/i,
i===r?a=0:(i===t?a=(e-n)/l+(n>e?6:0):i===e?a=(n-t)/l+2:i===n&&(a=(t-e)/l+4),a/=6),
a=360*a,s=100*s,o=100*o,[a,s,o]},A=function(t,e){var n=L(t),i=M(n,e);return i},L=function(t){
var e,i,r,s,o,u=void 0!==arguments[1]?arguments[1]:"auto",c=j(t);if(7===c.length&&"rgb("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"NUM"===c[3].type&&","===c[4].text&&"NUM"===c[5].type&&")"===c[6].text)o={
r:f(c[1].text),g:f(c[3].text),b:f(c[5].text),a:1};else if(7===c.length&&"rgb("===c[0].text&&"PERCENTAGE"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&")"===c[6].text)o={
r:f(c[1].text)/100*255,g:f(c[3].text)/100*255,b:f(c[5].text)/100*255,a:1};else if(9===c.length&&"rgba("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"NUM"===c[3].type&&","===c[4].text&&"NUM"===c[5].type&&","===c[6].text&&"NUM"===c[7].type&&")"===c[8].text)o={
r:f(c[1].text),g:f(c[3].text),b:f(c[5].text),a:f(c[7].text)};else if(9===c.length&&"rgb("===c[0].text&&"PERCENTAGE"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&","===c[6].text&&"NUM"===c[7].type&&")"===c[8].text)o={
r:f(c[1].text)/100*255,g:f(c[3].text)/100*255,b:f(c[5].text)/100*255,a:f(c[7].text)
};else if(7===c.length&&"hsl("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&")"===c[6].text)o={
h:f(c[1].text),s:f(c[3].text),l:f(c[5].text),a:1};else if(9===c.length&&"hsla("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&","===c[6].text&&"NUM"===c[7].type&&")"===c[8].text)o={
h:f(c[1].text),s:f(c[3].text),l:f(c[5].text),a:f(c[7].text)};else if("HEX"===c[0].type&&void 0===c[1]){
var d,h,v,g=c[0].text.substring(1);3===g.length?(d=g[0]+g[0],h=g[1]+g[1],v=g[2]+g[2]):(d=g[0]+g[1],
h=g[2]+g[3],v=g[4]+g[5]),o={r:m(d,16),g:m(h,16),b:m(v,16),a:1}}else n[t]&&(o={r:n[t][0],
g:n[t][1],b:n[t][2],a:1});if(!o)throw o=null,new Error('Invalid color string: "'+t+'"');
if(l(o.r)?(o.r=a(o.r,0,255,0),o.g=a(o.g,0,255,0),o.b=a(o.b,0,255,0),o.a=a(o.a,0,1,2)):l(o.h)&&(o.h=a(o.h,0,360,0),
o.s=a(o.s,0,100,1),o.l=a(o.l,0,100,1),o.a=a(o.a,0,1,2)),"rgba"===u&&l(o.h)){var b=S(o.h,o.s,o.l),p=(e=b[Symbol.iterator](),
(i=e.next()).done?void 0:i.value),y=(i=e.next()).done?void 0:i.value,_=(i=e.next()).done?void 0:i.value,x=o.a;
o={r:p,g:y,b:_,a:x}}else if("hsla"===u&&l(o.r)){var w=C(o.r,o.g,o.b),E=(r=w[Symbol.iterator](),
(s=r.next()).done?void 0:s.value),k=(s=r.next()).done?void 0:s.value,A=(s=r.next()).done?void 0:s.value,L=o.a;
o={h:E,s:k,l:A,a:L}}return o},M=function(t){var e,n,i,r,o,u,c=void 0!==arguments[1]?arguments[1]:"rgba",d=null;
if(["rgb","rgba","rgb%","rgba%","hex"].includes(c)){var h,v,f,m;if(l(t.r)?(h=t.r,
v=t.g,f=t.b,m=t.a):(e=S(t.h,t.s,t.l),n=e[Symbol.iterator](),h=(i=n.next()).done?void 0:i.value,
v=(i=n.next()).done?void 0:i.value,f=(i=n.next()).done?void 0:i.value,e,m=t.a),("rgb%"===c||"rgba%"===c)&&(h=s(h/255*100,1),
v=s(v/255*100,1),f=s(f/255*100,1)),h=a(h,0,255,0),v=a(v,0,255,0),f=a(f,0,255,0),m=a(m,0,1,2),
"rgb"===c)d="rgb("+h+", "+v+", "+f+")";else if("rgba"===c)d="rgba("+h+", "+v+", "+f+", "+m+")";else if("rgb%"===c)d="rgb("+h+"%, "+v+"%, "+f+"%)";else if("rgba%"===c)d="rgb("+h+"%, "+v+"%, "+f+"%, "+m+")";else if("hex"===c){
var g=h.toString(16),b=v.toString(16),p=f.toString(16);1===g.length&&(g="0"+g),1===b.length&&(b="0"+b),
1===p.length&&(p="0"+p),d="#"+g+b+p}}else if("hsl"===c||"hsla"===c){var y,_,x,w;l(t.h)?(y=t.h,
_=t.s,x=t.l,w=t.a):(r=C(t.r,t.g,t.b),o=r[Symbol.iterator](),y=(u=o.next()).done?void 0:u.value,
_=(u=o.next()).done?void 0:u.value,x=(u=o.next()).done?void 0:u.value,r,w=t.a),y=a(y,0,360,0),
_=a(_,0,100,1),x=a(x,0,100,1),w=a(w,0,1,2),"hsl"===c?d="hsl("+y+", "+_+"%, "+x+"%)":"hsla"===c&&(d="hsla("+y+", "+_+"%, "+x+"%, "+w+")");
}return d},j=function(e){for(var n=[],i=new t(e.toLowerCase()),r=function(){var t=i.read();
!function(){if("r"===t||"h"===t){var e=t;if(t+i.peek(3)==="rgb("?e+=i.read(3):t+i.peek(4)==="rgba("?e+=i.read(4):t+i.peek(3)==="hsl("?e+=i.read(3):t+i.peek(4)==="hsla("&&(e+=i.read(4)),
e!==t)return void n.push({type:"FUNCTION",text:e})}if("#"===t){if(_(t+i.peek(6))){
var r=t+i.read(6);return void n.push({type:"HEX",text:r})}if(_(t+i.peek(3)))return e=t+i.read(3),
void n.push({type:"HEX",text:e})}if(["0","1","2","3","4","5","6","7","8","9",".","-"].includes(t)){
for(var a=t;;){if(!["0","1","2","3","4","5","6","7","8","9","."].includes(i.peek()))break;
a+=i.read()}return void("%"===i.peek()?(a+=i.read(),n.push({type:"PERCENTAGE",text:a
})):n.push({type:"NUM",text:a}))}/\u0009|\u000a|\u000c|\u000d|\u0020/.test(t)||n.push({
type:"CHAR",text:t})}()};null!==i.peek();)r();return n};return{get getRandomMaterialColor(){
return g},get getRandomHexColorString(){return b},get parseColor(){return p},get isValidColorString(){
return y},get isHexColorString(){return _},get hsvToHsl(){return x},get hslToHsv(){
return w},get hslToRgb(){return S},get rgbToHsl(){return C},get hsvToRgb(){return E;
},get rgbToHsv(){return k},get formatColorString(){return A},get stringToColor(){
return L},get colorToString(){return M}}}),System.registerModule("utils/constants",[],function(){
"use strict";var t="http://www.w3.org/2000/svg",e="http://www.w3.org/1999/xlink",n="http://www.w3.org/1999/xhtml",i="http://www.w3.org/1998/Math/MathML",r="http://www.w3.org/2000/xmlns/",a="http://www.boxy-svg.com/bx",s=["a","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","script","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view"],o=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","menuitem","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],l=["font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","altGlyph","altGlyphDef","altGlyphItem","glyph","glyphRef","missing-glyph","hkern","vkern","set","animate","animateColor","animateMotion","animateTransform","mpath"],u=["solidColor","linearGradient","radialGradient","meshGradient","pattern","hatch"],c=["a","defs","g","marker","mask","pattern","svg","switch","symbol"],d=["circle","ellipse","image","line","path","polygon","polyline","rect","text","use"],h=["a","g","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","foreignObject"],v=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"],f=["circle","ellipse","line","path","polygon","polyline","rect"],m=["text","textPath","tref","tspan"],g=["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-rendering","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"],b={
aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],
azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],
blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],
cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],
cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],
darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],
darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],
darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],
darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],
darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],
deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],
firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],
gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],
gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],
khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],
lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],
lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],
lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],
lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],
lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],
linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],
mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],
mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],
mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],
moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],
olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],
orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],
palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],
pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],
red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],
salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],
sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],
slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],
steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],
turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],
whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},p=["#f44336","#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#ff8a80","#ff5252","#ff1744","#d50000","#e91e63","#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#ff80ab","#ff4081","#f50057","#c51162","#9c27b0","#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#6a1b9a","#4a148c","#ea80fc","#e040fb","#d500f9","#aa00ff","#673ab7","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#512da8","#4527a0","#311b92","#b388ff","#7c4dff","#651fff","#6200ea","#3f51b5","#e8eaf6","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#8c9eff","#536dfe","#3d5afe","#304ffe","#2196f3","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#82b1ff","#448aff","#2979ff","#2962ff","#03a9f4","#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#80d8ff","#40c4ff","#00b0ff","#0091ea","#00bcd4","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#84ffff","#18ffff","#00e5ff","#00b8d4","#009688","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#a7ffeb","#64ffda","#1de9b6","#00bfa5","#4caf50","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#b9f6ca","#69f0ae","#00e676","#00c853","#8bc34a","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#ccff90","#b2ff59","#76ff03","#64dd17","#cddc39","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#f4ff81","#eeff41","#c6ff00","#aeea00","#ffeb3b","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#ffff8d","#ffff00","#ffea00"," #ffd600","#ffc107","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107"," #ffb300","#ffa000"," #ff8f00","#ff6f00","#ffe57f","#ffd740","#ffc400","#ffab00","#ff9800","#fff3e0"," #ffe0b2","#ffcc80"," #ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#ffd180"," #ffab40"," #ff9100"," #ff6d00","#ff5722","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722"," #f4511e"," #e64a19"," #d84315","#bf360c","#ff9e80","#ff6e40","#ff3d00","#dd2c00","#795548","#efebe9"," #d7ccc8"," #bcaaa4"," #a1887f","#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723","#9e9e9e"," #fafafa"," #f5f5f5"," #eeeeee","#e0e0e0","#bdbdbd","#9e9e9e","#757575","#616161","#424242"," #212121"," #607d8b"," #eceff1"," #cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#455a64"," #37474f"," #263238"," #000000"," #ffffff"],y={
100:["100","200","300","400","500","600","700","800","900"],200:["200","100","300","400","500","600","700","800","900"],
300:["300","200","100","400","500","600","700","800","900"],400:["400","500","300","200","100","600","700","800","900"],
500:["500","400","300","200","100","600","700","800","900"],600:["600","700","800","900","500","400","300","200","100"],
700:["700","800","900","600","500","400","300","200","100"],800:["800","900","700","600","500","400","300","200","100"],
900:["900","800","700","600","500","400","300","200","100"]},_=[{name:"Arial",variants:["400","700","400italic","700italic"],
provider:"system"},{name:"Arial Black",variants:["900"],provider:"system"},{name:"Comic Sans MS",
variants:["400","700"],provider:"system"},{name:"Courier New",variants:["400","700","400italic","700italic"],
provider:"system"},{name:"Georgia",variants:["400","700","400italic","700italic"],
provider:"system"},{name:"Impact",variants:["900"],provider:"system"},{name:"Tahoma",
variants:["400","700"],provider:"system"},{name:"Times New Roman",variants:["400","700","400italic","700italic"],
provider:"system"},{name:"Trebuchet MS",variants:["400","700","400italic","700italic"],
provider:"system"},{name:"Verdana",variants:["400","700","400italic","700italic"],
provider:"system"}];return{get SVG_NAMESPACE(){return t},get XLINK_NAMESPACE(){return e;
},get XHTML_NAMESPACE(){return n},get MATHML_NAMESPACE(){return i},get XMLNS_NAMESPACE(){
return r},get BX_NAMESPACE(){return a},get SVG_ELEMENTS(){return s},get HTML_ELEMENTS(){
return o},get DEPRACATED_ELEMENTS(){return l},get PAINT_SERVER_ELEMENTS(){return u;
},get CONTAINER_ELEMENTS(){return c},get GRAPHICS_ELEMENTS(){return d},get TRANSFORMABLE_ELEMENTS(){
return h},get FILTER_ELEMENTS(){return v},get SHAPE_ELEMENTS(){return f},get TEXT_CONTENT_ELEMENTS(){
return m},get PROPERTIES(){return g},get NAMED_COLORS(){return b},get MATERIAL_COLORS(){
return p},get FONT_WEIGHTS_BY_MATCHING_ORDER(){return y},get WEB_SAFE_SYSTEM_FONT_FAMILIES(){
return _}}}),System.registerModule("utils/dom",[],function(){"use strict";var t=System.get("utils/type").isNumber,e=System.get("utils/constants"),n=e.TRANSFORMABLE_ELEMENTS,i=e.CONTAINER_ELEMENTS,r=e.GRAPHICS_ELEMENTS,a=e.SVG_NAMESPACE,s=document.createElementNS(a,"svg"),o=function(t){
var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.append(n.firstChild);
return e.childElementCount>1?e:1===e.childElementCount?e.children[0]:null},l=function(t){
var e=document.createDocumentFragment(),n=document.createElementNS(a,"svg");for(n.innerHTML=t;n.firstChild;)e.append(n.firstChild);
return e.childElementCount>1?e:1===e.childElementCount?e.children[0]:null},u=function(t,e){
var n=void 0!==arguments[2]?arguments[2]:null;if(null===n){var i=e;return document.registerElement(t,i);
}var r=e,a=n;return document.registerElement(r,{"extends":t,prototype:a.prototype
})},c=function(t){var e,n,i,r,s=void 0!==arguments[1]?arguments[1]:null,o=t.split(":"),l=null;
if(1===o.length){var u=(e=o[Symbol.iterator](),(n=e.next()).done?void 0:n.value);l=document.createElement(u,s);
}else if(2===o.length){var c=o,d=(i=c[Symbol.iterator](),(r=i.next()).done?void 0:r.value),h=(r=i.next()).done?void 0:r.value;
"svg"===d&&(l=document.createElementNS(a,h,s))}return l},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
var n=s.createSVGPoint(),i=t.length;return 0===i?(n.x=0,n.y=0):1===i?(n.x=t[0].x,
n.y=t[0].y):(n.x=t[0],n.y=t[1]),n},h=function(){var t=void 0!==arguments[0]?arguments[0]:0,e=s.createSVGLength();
return e.valueAsString=t,e},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
var n=s.createSVGRect(),i=t.length;return 0===i?(n.x=0,n.y=0,n.width=0,n.height=0):1===i?(n.x=t[0].x,
n.y=t[0].y,n.width=t[0].width,n.height=t[0].height):(n.x=t[0],n.y=t[1],n.width=t[2],
n.height=t[3]),n},f=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];
var i=s.createSVGMatrix(),r=e.length;if(0===r)i.a=1,i.b=0,i.c=0,i.d=1,i.e=0,i.f=0;else if(1===r){
var a=e[0];t(a.a)?(i.a=a.a,i.b=a.b,i.c=a.c,i.d=a.d,i.e=a.e,i.f=a.f):a instanceof Array&&(i.a=a[0],
i.b=a[1],i.c=a[2],i.d=a[3],i.e=a[4],i.f=a[5])}else{if(6!==r)throw new Error("Invalid number of arguments");
var o=e;i.a=o[0],i.b=o[1],i.c=o[2],i.d=o[3],i.e=o[4],i.f=o[5]}return i},m=function(){
var t,e=void 0!==arguments[0]?arguments[0]:null;return t=e?s.createSVGTransformFromMatrix(e):s.createSVGTransform();
},g=function(t){for(var e,n=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,null),i={
text:!0,textPath:!0,tspan:!0};e=n.nextNode();)i[e.parentElement.localName]||x(e.textContent)&&e.remove();
},b=function(t){var e=void 0!==arguments[1]?arguments[1]:2;g(t);for(var n="",i={text:!0,
textPath:!0,tspan:!0},r=0;e>r;r+=1)n+=" ";var a=function(t){var e=void 0!==arguments[1]?arguments[1]:2;
if(!i[t.localName]){var r=!0,s=!1,o=void 0;try{for(var l=void 0,u=t.children[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value,d=t.firstChild===c,h=t.lastChild===c;if(d===!0){var v=document.createTextNode("\n");
c.parentNode.insertBefore(v,c)}for(var f="",m=0;e>m;m+=1)f+=n;var g=document.createTextNode(f);
if(t.insertBefore(g,c),h===!0){var b=document.createTextNode("\n");t.appendChild(b);
for(var p="",y=0;e-1>y;y+=1)p+=n;var _=document.createTextNode(p);t.appendChild(_);
}else{var x=document.createTextNode("\n");t.insertBefore(x,c.nextSibling)}c.childElementCount>0&&a(c,e+1);
}}catch(w){s=!0,o=w}finally{try{r||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}};a(t,1)},p=function(t){return n.includes(t.localName)?!0:!1},y=function(t){return r.includes(t.localName)?!0:!1;
},_=function(t){return i.includes(t.localName)?!0:!1},x=function(t){return!/[^\t\n\r ]/.test(t);
},w=function(t,e){return document.elementFromPoint(t,e)},S=function(t,e){for(;t;){
if(t.localName===e)return t;t=t.parentElement}},C=function(t){for(var e=t;e;e=e.parentNode)if(e instanceof ShadowRoot||e===window.document)return e;
},E=function(t,e){e.parentElement.insertBefore(t,e.nextSibling)},k=function(t){switch(t){
case 0:return"";case 1:return"";case 2:return"%";case 3:return"ems";case 4:return"exs";
case 5:return"px";case 6:return"cm";case 7:return"mm";case 8:return"in";case 9:return"pt";
case 10:return"pc";default:return""}};return{get parseHTML(){return o},get parseSVG(){
return l},get registerElement(){return u},get createElement(){return c},get createSVGPoint(){
return d},get createSVGLength(){return h},get createSVGRect(){return v},get createSVGMatrix(){
return f},get createSVGTransform(){return m},get stripWhitespace(){return g},get normalizeWhitespace(){
return b},get isTransformableElement(){return p},get isGraphicsElement(){return y;
},get isContainer(){return _},get isDOMWhiteSpace(){return x},get getElementFromPoint(){
return w},get closest(){return S},get getClosestShadowRoot(){return C},get insertAfter(){
return E},get unitTypeToString(){return k}}}),System.registerModule("utils/event",[],function(){
"use strict";var t=Math,e=t.sqrt,n=t.pow,i=function(t,i){var r=void 0!==arguments[2]?arguments[2]:3,a=e(n(i.clientX-t.clientX,2)+n(i.clientY-t.clientY,2));
return r>a&&i.timeStamp-t.timeStamp<50?!1:!0};return{get isMouseMoveIntentional(){
return i}}}),System.registerModule("utils/font",[],function(){"use strict";var t=function(t){
switch(t){case"regular":return"400";case"bold":return"700";case"italic":return"400italic";
case"bolditalic":return"700italic";case"r":return"400";case"b":return"700";case"i":
return"400italic";default:return t}},e=function(t){switch(t){case"normal":return"400";
case"bold":return"700";default:return t}},n=function(e){var n=t(e);switch(n){case"100":
case"100italic":return"100";case"200":case"200italic":return"200";case"300":case"300italic":
return"300";case"400":case"400italic":return"400";case"500":case"500italic":return"500";
case"600":case"600italic":return"600";case"700":case"700italic":return"700";case"800":
case"800italic":return"800";case"900":case"900italic":return"900";default:return"400";
}},i=function(t){var n=e(t);switch(n){case"100":return"Thin";case"200":return"Extra-Light";
case"300":return"Light";case"400":return"Normal";case"500":return"Medium";case"600":
return"Semi-Bold";case"700":return"Bold";case"800":return"Extra-Bold";case"900":return"Ultra-Bold";
default:return"Normal"}},r=function(e){return t(e).endsWith("italic")},a=function(t){
if(t.type===CSSRule.IMPORT_RULE&&t.href){var e=new URL(t.href);if("fonts.googleapis.com"===e.host)return!0;
}return!1},s=function(e){var n,i,r=new URL(e.href),a=r.search.split("?family=")[1].split("&")[0],s=a.split("|"),o=[],l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value,f=v.split(":"),m=(n=f[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),g=(i=n.next()).done?void 0:i.value,b=m.replaceAll("+"," "),p=void 0;
p=g?g.split(",").map(function(e){return t(e)}).sort():["400"],o.push([b,p])}}catch(y){
u=!0,c=y}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}return o;
};return{get normalizeFontVariant(){return t},get normalizeFontWeight(){return e},
get getFontVariantWeight(){return n},get formatFontWeightForDisplay(){return i},get isFontVariantItalic(){
return r},get isCSSRuleGoogleFontsImportRule(){return a},get parseGoogleFontsImportRule(){
return s}}}),System.registerModule("utils/gradient",[],function(){"use strict";var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/color").parseColor,n=System.get("utils/dom"),i=n.createElement,r=n.createSVGMatrix,a=n.createSVGPoint,s=System.get("utils/math"),o=(s.round,
s.normalize),l=SVGLength.SVG_LENGTHTYPE_PERCENTAGE,u=SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,c=["x1","x2","y1","y2","gradientUnits","gradientTransform","spreadMethod","style"],d=["r","cx","cx","fx","fy","fr","gradientUnits","gradientTransform","spreadMethod","style"],h=function(t){
var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=t.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;"stop"!==s.localName&&t.removeChild(s)}}catch(d){n=!0,i=d}finally{try{
e||null==a["return"]||a["return"]()}finally{if(n)throw i}}if(""!==t.href.baseVal){
if(b(t)===!1){var h=p(t),v=!0,f=!1,m=void 0;try{for(var g=void 0,_=h[Symbol.iterator]();!(v=(g=_.next()).done);v=!0){
var x=g.value;t.append(x.cloneNode())}}catch(w){f=!0,m=w}finally{try{v||null==_["return"]||_["return"]();
}finally{if(f)throw m}}}var S=!0,C=!1,E=void 0;try{for(var k=void 0,A=c[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){
var L=k.value;if(t.hasAttribute(L)===!1){var M=y(t,L);null!==M&&t.setAttribute(L,M);
}}}catch(j){C=!0,E=j}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E;
}}t.removeAttribute("href")}var T=0,P=!0,R=!1,O=void 0;try{for(var I=void 0,D=t.children[Symbol.iterator]();!(P=(I=D.next()).done);P=!0){
var V=I.value,N=V.offset.baseVal;T>N&&(N=T),N=o(N,0,1,4),T=N,V.setAttribute("offset",N);
}}catch(B){R=!0,O=B}finally{try{P||null==D["return"]||D["return"]()}finally{if(R)throw O;
}}t.gradientUnits.baseVal===u&&(t.x1.baseVal.unitType===l&&t.setAttribute("x1",t.x1.baseVal.valueInSpecifiedUnits/100),
t.y1.baseVal.unitType===l&&t.setAttribute("y1",t.y1.baseVal.valueInSpecifiedUnits/100),
t.x2.baseVal.unitType===l&&t.setAttribute("x2",t.x2.baseVal.valueInSpecifiedUnits/100),
t.y2.baseVal.unitType===l&&t.setAttribute("y2",t.y2.baseVal.valueInSpecifiedUnits/100));
},v=function(t){if(""!==t.href.baseVal){if(b(t)===!1){var e=p(t),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;
t.append(c.cloneNode())}}catch(h){i=!0,r=h}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}}var v=!0,f=!1,m=void 0;try{for(var g=void 0,_=d[Symbol.iterator]();!(v=(g=_.next()).done);v=!0){
var x=g.value;if(t.hasAttribute(x)===!1){var w=y(t,x);null!==w&&t.setAttribute(x,w);
}}}catch(S){f=!0,m=S}finally{try{v||null==_["return"]||_["return"]()}finally{if(f)throw m;
}}t.removeAttribute("href")}var C=0,E=function(){var e=0,n=[],i=!0,r=!1,a=void 0;try{
for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),k=!0,A=!1,L=void 0;try{for(var M=void 0,j=E[Symbol.iterator]();!(k=(M=j.next()).done);k=!0){
var T=M.value,P=T.offset.baseVal;C>P&&(P=C),P=o(P,0,1,4),C=P,T.setAttribute("offset",P);
}}catch(R){A=!0,L=R}finally{try{k||null==j["return"]||j["return"]()}finally{if(A)throw L;
}}t.removeAttribute("fx"),t.removeAttribute("fy"),t.removeAttribute("fr"),t.gradientUnits.baseVal===u&&(t.r.baseVal.unitType===l&&t.setAttribute("r",t.r.baseVal.valueInSpecifiedUnits/100),
t.cx.baseVal.unitType===l&&t.setAttribute("cx",t.cx.baseVal.valueInSpecifiedUnits/100),
t.cy.baseVal.unitType===l&&t.setAttribute("cy",t.cy.baseVal.valueInSpecifiedUnits/100));
},f=function(e,n){if(e.gradientUnits.baseVal===u){var i=r(e.gradientTransform.baseVal.consolidate().matrix),s=n.getScreenCTM(),o=n.getScreenCTM().inverse(),l=t(n),c=a(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),d=a(e.cx.baseVal.valueInSpecifiedUnits+e.r.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),h=a(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits-e.r.baseVal.valueInSpecifiedUnits),v=c.matrixTransform(i),f=d.matrixTransform(i),m=h.matrixTransform(i),g=a(l.x+v.x*l.width,l.y+v.y*l.height),b=a(l.x+f.x*l.width,l.y+f.y*l.height),p=a(l.x+m.x*l.width,l.y+m.y*l.height),y=g.matrixTransform(s),_=b.matrixTransform(s),x=p.matrixTransform(s);
c=a(0,0),d=a(100,0),h=a(0,-100);var w=System.get("utils/transform").getTransformFromPoints,S=w(c,d,h,y,_,x),C=r();
C.multiplySelf(o),C.multiplySelf(S),e.setAttribute("gradientUnits","userSpaceOnUse"),
e.setAttribute("gradientTransform",C),e.setAttribute("cx","0"),e.setAttribute("cy","0"),
e.setAttribute("r","100")}},m=function(t,n){var r,a,s=i("canvas");s.width=r=100,s.height=a=10;
var o=s.getContext("2d");o.clearRect(0,0,r,a);var l=o.createLinearGradient(0,0,r,0),u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=t.children[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;"stop"===f.localName&&l.addColorStop(f.offset.baseVal,f.style.stopColor);
}}catch(m){c=!0,d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}o.fillStyle=l,o.fillRect(0,0,r,a);var g=o.getImageData(n*r,0,1,1).data,b="rgb("+g[0]+", "+g[1]+", "+g[2]+")",p=e(b,"hsla");
return p},g=function(t){if(0===t.length)return!1;if(1===t.length)return!0;var e=t[0].childElementCount,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if(o!=t[0]&&o.childElementCount!==e)return!1}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}for(var u=0;e>u;u+=1){var c=t[0].children[u],d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=t[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value;
if(g!==t[0]){if(g.children[u].offset.baseVal!==c.offset.baseVal)return!1;if(g.children[u].style.stopColor!==c.style.stopColor)return!1;
}}}catch(b){h=!0,v=b}finally{try{d||null==m["return"]||m["return"]()}finally{if(h)throw v;
}}}return!0},b=function(t){var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=t.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;if("stop"===s.localName)return!0}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}return!1},p=function(t){var e=[],n=function(i){var r=t.ownerSVGElement.querySelector(i.href.baseVal);
if(r){var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r.children[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;"stop"===c.localName&&e.push(c)}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}0===e.length&&r.href.baseVal&&n(r)}};return n(t),e},y=function(t,e){
var n=null;if(t.hasAttribute(e))n=t.getAttribute(e);else if(""!==t.href.baseVal){
var i=t.ownerSVGElement.querySelector(t.href.baseVal);i&&(n=y(i,e))}return n};return{
get normalizeLinearGradient(){return h},get normalizeRadialGradient(){return v},get convertRadialGradientToUserSpace(){
return f},get getGradientColorAtOffset(){return m},get compareGradients(){return g;
}}}),System.registerModule("utils/image",[],function(){"use strict";var t=function(t){
return new Promise(function(e){var n=new Image;n.onload=function(){e({width:n.naturalWidth,
height:n.naturalHeight})},n.src=t})};return{get extractImageSize(){return t}}}),System.registerModule("utils/json",[],function(){
"use strict";var t=function(t){var e=null;try{e=JSON.stringify(t)}catch(n){return console.error("Failed to generate JSON string",n),
e}return e},e=function(t){var e=void 0!==arguments[1]?arguments[1]:!0,i=void 0!==arguments[2]?arguments[2]:!1;
i&&(t=n(t));var r=null;try{r=JSON.parse(t)}catch(a){return void(e&&console.error("Failed to parse JSON string",t,a));
}return r},n=function(t){for(var e="",n="",i=0,r=t.length,a=null,s=null,o=null;r>i;)if(n=t.charAt(i),
"/"===n)nextChar=t.charAt(i+=1),"/"===nextChar?(a=t.indexOf("\n",i),-1===a&&(a=t.indexOf("\r",i)),
i=a>-1?a:r):"*"===nextChar?(s=t.indexOf("*/",i),s>-1?i=s+=2:console.error("Unclosed block comment")):(msg="JSON.stripComments(): Unexpected char "+n+" at position "+i,
console.error(msg));else if('"'===n){for(o=i;r>i;)if(i+=1,n=t.charAt(i),"\\"===n)i+=1;else if('"'===n)break;
'"'===t.charAt(i)?e+=t.slice(o,i+=1):console.error("Unclosed string")}else e+=n,i+=1;
return e};return{get toJSON(){return t},get fromJSON(){return e}}}),System.registerModule("utils/math",[],function(){
"use strict";var t=Math,e=t.max,n=t.pow,i=t.PI,r=function(t,e,n){var i=void 0!==arguments[3]?arguments[3]:99;
return t=a(t,i),e>t?t=e:t>n&&(t=n),t},a=function(t){var e=void 0!==arguments[1]?arguments[1]:0,i=n(10,e),r=Math.round(t*i)/i;
return r},s=function(t){var e=t*(180/i);return e},o=function(t){var e=i*t/180;return e;
},l=function(t){return 0>t?-1:t>0?1:0},u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
for(var n=0,i=0;i<t.length;i+=1)n+=t[i];return n/t.length},c=function(t){var n,i=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
return n=i?e(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0};return{get normalize(){return r;
},get round(){return a},get radToDeg(){return s},get degToRad(){return o},get signum(){
return l},get average(){return u},get countDecimalPlaces(){return c}}}),System.registerModule("utils/matrix",[],function(){
"use strict";var t=System.get("utils/dom").createSVGMatrix,e=System.get("utils/math").round,n=function(t,e){
return t.a===e.a&&t.b===e.b&&t.c===e.c&&t.d===e.d&&t.e===e.e&&t.f===e.f},i=function(n,i){
var r=t(n);return r.a=e(r.a,i),r.b=e(r.b,i),r.c=e(r.c,i),r.d=e(r.d,i),r.e=e(r.e,i),
r.f=e(r.f,i),r};return{get compareMatrixes(){return n},get roundMatrix(){return i;
}}}),System.registerModule("utils/network",[],function(){"use strict";var t=function(t){
return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET",t),i.send(),
i.addEventListener("load",function(t){i.status>=200&&i.status<300?e(i.response):n({
status:t.status,statusText:t.statusText})}),i.addEventListener("error",function(t){
n({status:t.status,statusText:t.statusText})})})};return{get httpRequest(){return t;
}}}),System.registerModule("utils/object",[],function(){"use strict";var t=function(t){
return JSON.parse(JSON.stringify(t))};return{get cloneObject(){return t}}}),System.registerModule("utils/paint",[],function(){
"use strict";var t=System.get("utils/array").includesOnly,e=System.get("utils/color").isValidColorString,n=System.get("utils/constants").PAINT_SERVER_ELEMENTS,i=System.get("utils/gradient").compareGradients,r=System.get("utils/pattern").comparePatterns,a=function(t){
var n=void 0!==arguments[1]?arguments[1]:"fill",i="none";if("inherit"===t.style[n])i="inherit";else{
var r=getComputedStyle(t).getPropertyValue(n);if(e(r))i="solid";else if(r&&r.startsWith("url(")){
var a=r.substring(5,r.length-2),s=t.ownerSVGElement.querySelector(a),o=s?s.localName:null;
("linearGradient"===o||"radialGradient"===o||"pattern"===o)&&(i=o)}}return i},s=function(t){
var e=void 0!==arguments[1]?arguments[1]:"fill",i=null,r=getComputedStyle(t)[e];if(r&&r.toLowerCase().startsWith("url(")&&r.endsWith(")")){
var a=r.substring(5,r.length-2),s=t.ownerSVGElement.querySelector(a);s&&n.includes(s.localName)&&(i=s);
}return i},o=function(t){var e=void 0!==arguments[1]?arguments[1]:"fill",n=null,i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value,c=a(u,e);
if(u!==t[0]&&n!==c)return!1;n=c}}catch(d){r=!0,s=d}finally{try{i||null==l["return"]||l["return"]();
}finally{if(r)throw s}}return null===n?!1:!0},l=function(e){var n=void 0!==arguments[1]?arguments[1]:"fill",a=[],o=[],l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value,f=getComputedStyle(v).getPropertyValue(n),m=s(v);
a.push(f),o.push(m)}}catch(g){u=!0,c=g}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}if(a.legth<=1)return!1;if(t(a,a[0]))return!1;var b=o.filter(function(t){
return t&&"linearGradient"===t.localName}),p=o.filter(function(t){return t&&"radialGradient"===t.localName;
}),y=o.filter(function(t){return t&&"pattern"===t.localName});return b.length===e.length&&i(b)?!1:p.length===e.length&&i(p)?!1:y.length===e.length&&r(y)?!1:!0;
},u=function(e){var n=void 0!==arguments[1]?arguments[1]:"fill",i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=getComputedStyle(u).getPropertyValue(n);
i.push(c)}}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]()}finally{
if(a)throw s}}return 0===i.legth?!0:t(i,i[0])?!0:!1},c=function(t,e){if(e&&e.startsWith('url("#')&&e.endsWith('")')){
var n=e.substring(5,e.length-2),i=t.querySelector(n);if(i)return i}return null};return{
get getPaintType(){return a},get getPaintServer(){return s},get isSamePaintType(){
return o},get isMixedPaint(){return l},get isSamePaint(){return u},get getDefFromURL(){
return c}}}),System.registerModule("utils/path",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.createSVGPoint,i=(System.get("utils/math").degToRad,
System.get("utils/string").collapseWhitespace),r=Math,a=r.abs,s=(r.sin,r.asin,r.cos),o=r.acos,l=(r.tan,
r.pow),u=r.sqrt,c=r.PI,d=function(t){if(!t.find(function(t){return"C"===t.type||"L"===t.type;
}))return[];var e=[],n=null,i=0,r=0,a=0,s=0,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;"M"===h.type?("M"===n&&e.pop(),e.push(h),i=h.values[0],r=h.values[1],
a=h.values[0],s=h.values[1]):"L"===h.type?("Z"===n&&e.push({type:"M",values:[a,s]
}),e.push(h),i=h.values[0],r=h.values[1]):"C"===h.type?("Z"===n&&e.push({type:"M",
values:[a,s]}),e.push(h),i=h.values[4],r=h.values[5]):"Z"===h.type&&((i!==a||r!==s)&&e.push({
type:"L",values:[a,s]}),e.push(h),i=a,r=s),n=h.type}}catch(v){l=!0,u=v}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}return e},h=function(t,e,n,i,r){
var d=function(t){return a(t)<1e-11?0:t>0?1:-1},h=function(t,e,n,i){var r=(n-t)*(n-t),a=(i-e)*(i-e);
return u(r+a)},v=function(t,e,n,i,r){var a=-t+3*e-3*n+i,s=3*t-6*e+3*n,o=-3*t+3*e,l=-r+t,u=[3,-1];
f(u,s/a,o/a,l/a);var c=[],d=!0,h=!1,v=void 0;try{for(var m=void 0,g=u[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){
var b=m.value;b>=0&&1>=b&&c.push(b)}}catch(p){h=!0,v=p}finally{try{d||null==g["return"]||g["return"]();
}finally{if(h)throw v}}return c},f=function(t,e,n,i){var r=(l(e,2)-3*n)/9,h=(2*l(e,3)-9*e*n+27*i)/54;
if(l(h,2)<l(r,3)){var v=o(h/u(l(r,3)))/3;return t.splice(0,0,-2*u(r)*s(v)-e/3),t.splice(1,0,-2*u(r)*s(v+4*c/3)-e/3),
t.splice(2,0,-2*u(r)*s(v-4*c/3)-e/3),3}var f=-d(h)*l(a(h)+u(l(h,2)-l(r,3)),1/3),m=0==d(f)?0:r/f;
return t.splice(0,0,f+m-e/3),t.splice(1,0,-.5*(f+m)-e/3),t.splice(2,0,.5*u(3)*a(f-m)),
t[2]+1===1?2:1},m=$traceurRuntime.spread(v(e.x,n.x,i.x,r.x,t.x),v(e.y,n.y,i.y,r.y,t.y));
if(0===m.length)return-1;var g=-1,b=3,p=!0,y=!1,_=void 0;try{for(var x=void 0,w=m[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value,C=l(1-S,3)*e.x+3*l(1-S,2)*S*n.x+3*(1-S)*l(S,2)*i.x+l(S,3)*r.x,E=l(1-S,3)*e.y+3*l(1-S,2)*S*n.y+3*(1-S)*l(S,2)*i.y+l(S,3)*r.y,k=h(t.x,t.y,C,E);
b>k&&(g=S,b=k)}}catch(A){y=!0,_=A}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}return g},v=function(t,e,i,r,a){var s=(e.x-t.x)*a+t.x,o=(e.y-t.y)*a+t.y,l=(i.x-e.x)*a+e.x,u=(i.y-e.y)*a+e.y,c=(r.x-i.x)*a+i.x,d=(r.y-i.y)*a+i.y,h=(l-s)*a+s,v=(u-o)*a+o,f=(c-l)*a+l,m=(d-u)*a+u,g=(f-h)*a+h,b=(m-v)*a+v,p=[n(t.x,t.y),n(s,o),n(h,v),n(g,b)],y=[n(g,b),n(f,m),n(c,d),n(r.x,r.y)];
return[p,y]},f=function(t,e){for(var n=t.getTotalLength(),i=t.getPathData(),r=n/i.length*.125,a=null,s=null,o=1/0,u=function(t){
return l(t.x-e.x,2)+l(t.y-e.y,2)},c=0;n>=c;c+=r){var d=t.getPointAtLength(c),h=u(d);
o>h&&(a=d,s=c,o=h)}for(r*=.5;r>.5;){var v=s-r,f=t.getPointAtLength(v),m=u(f);if(v>=0&&o>m)a=f,
s=v,o=m;else{var g=s+r,b=t.getPointAtLength(g),p=u(b);n>=g&&o>p?(a=b,s=g,o=p):r*=.5;
}}return[a,s,o]},m=function(t){var e,n=t.localName;return e="rect"===n?g(t):"circle"===n?b(t):"ellipse"===n?p(t):"line"===n?y(t):"polyline"===n?_(t):"polygon"===n?x(t):"path"===n?t.cloneNode(!0):null;
},g=function(t){var n=void 0!==arguments[1]?arguments[1]:!0,r=e("svg:path");if(n){
var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=t.attributes[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;["x","y","width","height","rx","ry"].includes(c.name)||r.setAttribute(c.name,c.value);
}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}var h,v=t.x.baseVal.value,f=t.y.baseVal.value,m=t.rx.baseVal.value,g=t.ry.baseVal.value,b=t.width.baseVal.value,p=t.height.baseVal.value;
return m>b/2&&(m=b/2),g>p/2&&(g=p/2),h=0===m&&0===g?"\n      M "+v+" "+f+"\n      L "+(v+b)+" "+f+"\n      L "+(v+b)+" "+(f+p)+"\n      L "+v+" "+(f+p)+"\n      L "+v+" "+f+"\n    ":"\n      M "+(v+m)+" "+f+"\n      L "+(v+b-m)+" "+f+"\n      A "+m+" "+g+" 0 0 1 "+(v+b)+" "+(f+g)+"\n      L "+(v+b)+" "+(f+p-g)+"\n      A "+m+" "+g+" 0 0 1 "+(v+b-m)+" "+(f+p)+"\n      L "+(v+m)+" "+(f+p)+"\n      A "+m+" "+g+" 0 0 1 "+v+" "+(f+p-g)+"\n      L "+v+" "+(f+g)+"\n      A "+m+" "+g+" 0 0 1 "+(v+m)+" "+f+"\n    ",
r.setAttribute("d",i(h)),r},b=function(t){var e=C(t),n=p(e);return n},p=function(t){
var n=e("svg:path"),r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t.attributes[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;["cx","cy","rx","ry"].includes(u.name)||n.setAttribute(u.name,u.value);
}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}var d=t.cx.baseVal.value,h=t.cy.baseVal.value,v=t.rx.baseVal.value,f=t.ry.baseVal.value,m="\n    M "+d+" "+(h-f)+"\n    A "+v+" "+f+" 0 0 0 "+d+" "+(h+f)+"\n    A "+v+" "+f+" 0 0 0 "+d+" "+(h-f)+"\n  ";
return n.setAttribute("d",i(m)),n},y=function(t){var n=e("svg:path"),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=t.attributes[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;["x1","y1","x2","y2"].includes(u.name)||n.setAttribute(u.name,u.value);
}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}var d=t.x1.baseVal.value,h=t.y1.baseVal.value,v=t.x2.baseVal.value,f=t.y2.baseVal.value,m="\n    M "+d+" "+h+"\n    L "+v+" "+f+"\n  ";
return n.setAttribute("d",i(m)),n},_=function(t){var n=e("svg:path"),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"points"!==l.name&&n.setAttribute(l.name,l.value)}}catch(u){r=!0,a=u;
}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}for(var c="",d=0;d<t.points.numberOfItems;d+=1){
var h=t.points.getItem(d),v=h.x,f=h.y;c+=0===d?"M "+v+" "+f:" L "+v+" "+f}return n.setAttribute("d",c),
n},x=function(t){var n=e("svg:path"),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"points"!==l.name&&n.setAttribute(l.name,l.value)}}catch(u){r=!0,a=u;
}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}for(var c="",d=0;d<t.points.numberOfItems;d+=1){
var h=t.points.getItem(d),v=h.x,f=h.y;c+=0===d?"M "+v+" "+f:" L "+v+" "+f}return c+=" Z",
n.setAttribute("d",c),n},w=function(t,e){},S=function(t,e){},C=function(t){var n=e("svg:ellipse"),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"r"===l.name?(n.setAttribute("rx",l.value),n.setAttribute("ry",l.value)):n.setAttribute(l.name,l.value);
}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}return n},E=function(t){var e,n,i,r,a=d(t.getPathData({normalize:!0})),s=k(a),o=!0,l=!1,u=void 0;
try{for(var c=void 0,h=s[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){for(var v=c.value,f=v[0],m=[],g=null,b=1;b<v.length;b+=1){
var p=v[b];"Z"===p.type?g=p:m.push(p)}var y=f.values[0],_=f.values[1];"C"===m[m.length-1].type?(f.values[0]=m[m.length-1].values[4],
f.values[1]=m[m.length-1].values[5]):(f.values[0]=m[m.length-1].values[0],f.values[1]=m[m.length-1].values[1]);
var x=!0,w=!1,S=void 0;try{for(var C=void 0,E=m[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var A=C.value;if("L"===A.type){var L=A.values,M=(e=L[Symbol.iterator](),(n=e.next()).done?void 0:n.value),j=(n=e.next()).done?void 0:n.value;
A.values=[y,_],y=M,_=j}else if("C"===A.type){var T=A.values,P=(i=T[Symbol.iterator](),
(r=i.next()).done?void 0:r.value),R=(r=i.next()).done?void 0:r.value,O=(r=i.next()).done?void 0:r.value,I=(r=i.next()).done?void 0:r.value,D=(r=i.next()).done?void 0:r.value,V=(r=i.next()).done?void 0:r.value;
A.values=[O,I,P,R,y,_],y=D,_=V}}}catch(N){w=!0,S=N}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}m.reverse(),v.length=0,v.push(f);var B=!0,z=!1,G=void 0;try{
for(var U=void 0,H=m[Symbol.iterator]();!(B=(U=H.next()).done);B=!0){var F=U.value;
v.push(F)}}catch(q){z=!0,G=q}finally{try{B||null==H["return"]||H["return"]()}finally{
if(z)throw G}}g&&v.push(g)}}catch($){l=!0,u=$}finally{try{o||null==h["return"]||h["return"]();
}finally{if(l)throw u}}s.reverse(),a=[];var Y=!0,X=!1,W=void 0;try{for(var Z=void 0,K=s[Symbol.iterator]();!(Y=(Z=K.next()).done);Y=!0){
var J=Z.value,Q=!0,tt=!1,et=void 0;try{for(var nt=void 0,it=J[Symbol.iterator]();!(Q=(nt=it.next()).done);Q=!0){
var rt=nt.value;a.push(rt)}}catch(at){tt=!0,et=at}finally{try{Q||null==it["return"]||it["return"]();
}finally{if(tt)throw et}}}}catch(st){X=!0,W=st}finally{try{Y||null==K["return"]||K["return"]();
}finally{if(X)throw W}}t.setPathData(a)},k=function(t){var e=[],n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
"C"===l.type||"L"===l.type?n.push(l):"M"===l.type?(n.length>0&&(e.push(n),n=[]),n.push(l)):"Z"===l.type&&(n.push(l),
e.push(n),n=[])}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n.length>0&&e.push(n),e};return{get harmonizePathData(){
return d},get getCubicCurveTParam(){return h},get splitCurve(){return v},get getNearestPointOnPath(){
return f},get anyToPath(){return m},get rectToPath(){return g},get circleToPath(){
return b},get ellipseToPath(){return p},get lineToPath(){return y},get polylineToPath(){
return _},get polygonToPath(){return x},get textToPath(){return w},get imageToPath(){
return S},get circleToEllipse(){return C},get reversePath(){return E},get getSubpathsData(){
return k}}}),System.registerModule("utils/pattern",[],function(){"use strict";var t=System.get("utils/bbox").getUserBBox,e=System.get("utils/dom"),n=e.createSVGLength,i=e.createSVGMatrix,r=e.createSVGPoint,a=e.createSVGRect,s=SVGUnitTypes,o=s.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,l=s.SVG_UNIT_TYPE_USERSPACEONUSE,u=function(t){
var e=null;if(t.hasAttribute("href")){var n=t.getAttribute("href"),i=t.ownerSVGElement.querySelector(n);
i&&"pattern"===i.localName&&i!==t&&(e=i)}return e},c=function(t){for(var e=null,n=t;n;){
if(v(n)===!1)return n;n=u(n)}return e},d=function(t){for(var e=t,n=null;e;){if(e.childElementCount>0){
n=e;break}e=u(e)}return n},h=function(t){for(var e=[],r=t,s={viewBox:null};r;){e.push(r);
var o=r.getAttribute("href"),l=o?r.ownerSVGElement.querySelector(o):null;if(!l||"pattern"!==l.localName||e.includes(l)!==!1)break;
r=l}var u=e[e.length-1],c=!0,d=!1,h=void 0;try{for(var v=void 0,f=["x","y","width","height"][Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value,g=!0,b=!1,p=void 0;try{for(var y=void 0,_=e[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){
var x=y.value;if(x.hasAttribute(m)||x===u){s[m]=n(x[m].baseVal.valueAsString);break;
}}}catch(w){b=!0,p=w}finally{try{g||null==_["return"]||_["return"]()}finally{if(b)throw p;
}}}}catch(S){d=!0,h=S}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}var C=!0,E=!1,k=void 0;try{for(var A=void 0,L=["patternUnits","patternContentUnits"][Symbol.iterator]();!(C=(A=L.next()).done);C=!0){
var M=A.value,j=!0,T=!1,P=void 0;try{for(var R=void 0,O=e[Symbol.iterator]();!(j=(R=O.next()).done);j=!0){
var I=R.value;if(I.hasAttribute(M)||I===u){s[M]=I[M].baseVal;break}}}catch(D){T=!0,
P=D}finally{try{j||null==O["return"]||O["return"]()}finally{if(T)throw P}}}}catch(V){
E=!0,k=V}finally{try{C||null==L["return"]||L["return"]()}finally{if(E)throw k}}var N=!0,B=!1,z=void 0;
try{for(var G=void 0,U=e[Symbol.iterator]();!(N=(G=U.next()).done);N=!0){var H=G.value;
if(H.hasAttribute("patternTransform")||H===u){s.patternTransform=i(H.patternTransform.baseVal.consolidate().matrix);
break}}}catch(F){B=!0,z=F}finally{try{N||null==U["return"]||U["return"]()}finally{
if(B)throw z}}var q=!0,$=!1,Y=void 0;try{for(var X=void 0,W=e[Symbol.iterator]();!(q=(X=W.next()).done);q=!0){
var Z=X.value;if(Z.hasAttribute("viewBox")||Z===u){s.viewBox=a(Z.viewBox.baseVal);
break}}}catch(K){$=!0,Y=K}finally{try{q||null==W["return"]||W["return"]()}finally{
if($)throw Y}}var J=!0,Q=!1,tt=void 0;try{for(var et=void 0,nt=e[Symbol.iterator]();!(J=(et=nt.next()).done);J=!0){
var it=et.value;if(it.hasAttribute("preserveAspectRatio")||it===u){s.preserveAspectRatio={
align:it.preserveAspectRatio.baseVal.align,meetOrSlice:it.preserveAspectRatio.baseVal.meetOrSlice
};break}}}catch(rt){Q=!0,tt=rt}finally{try{J||null==nt["return"]||nt["return"]()}finally{
if(Q)throw tt}}return s},v=function(t){if(t.hasAttribute("href")===!1)return!1;if(t.childElementCount>0)return!1;
var e=["x","y","width","height","patternUnits","patternContentUnits","viewBox","preserveAspectRatio"],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value;if(t.hasAttribute("name"))return!1;
}}catch(o){i=!0,r=o}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return!0},f=function(t){var e=t[0],n=c(e);if(null===n)return!1;var i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
if(l!==e&&c(l)!==n)return!1}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return!0},m=function(e,n){var i,a,s,u,c,d,v=System.get("utils/transform").getTransformFromPoints,f=h(e),m=f.x,g=f.y,b=f.width,p=f.height,y=f.patternUnits,_=t(n);
if(y===l)i=r(m.value,g.value),a=r(m.value+b.value,g.value),s=r(m.value+b.value,g.value+p.value),
u=r(_.x+_.width/2-b.value/2,_.y+_.height/2-p.value/2),c=r(_.x+_.width/2+b.value/2,_.y+_.height/2-p.value/2),
d=r(_.x+_.width/2+b.value/2,_.y+_.height/2+p.value/2);else if(y===o){var x=r(m.valueInSpecifiedUnits,g.valueInSpecifiedUnits),w=r(m.valueInSpecifiedUnits+b.valueInSpecifiedUnits,g.valueInSpecifiedUnits),S=r(m.valueInSpecifiedUnits+b.valueInSpecifiedUnits,g.valueInSpecifiedUnits+p.valueInSpecifiedUnits);
i=r(_.x+x.x*_.width,_.y+x.y*_.height),a=r(_.x+w.x*_.width,_.y+w.y*_.height),s=r(_.x+S.x*_.width,_.y+S.y*_.height),
u=r(_.x+_.width/2-_.width*b.valueInSpecifiedUnits/2,_.y+_.height/2-_.height*p.valueInSpecifiedUnits/2),
c=r(_.x+_.width/2+_.width*b.valueInSpecifiedUnits/2,_.y+_.height/2-_.height*p.valueInSpecifiedUnits/2),
d=r(_.x+_.width/2+_.width*b.valueInSpecifiedUnits/2,_.y+_.height/2+_.height*p.valueInSpecifiedUnits/2);
}var C=v(i,a,s,u,c,d);e.setAttribute("patternTransform",C.toString())};return{get getParentPattern(){
return u},get getClosestBasePattern(){return c},get getClosestPatternWithChildren(){
return d},get getComputedPatternProperties(){return h},get isDerivedPattern(){return v;
},get comparePatterns(){return f},get centerPattern(){return m}}}),System.registerModule("utils/point",[],function(){
"use strict";var t=System.get("classes/vector")["default"],e=System.get("utils/math"),n=e.radToDeg,i=e.degToRad,r=e.round,a=System.get("utils/dom").createSVGPoint,s=System.get("utils/vector"),o=s.sumVectors,l=s.vectorsDotProduct,u=s.getAngleBetweenVectors,c=Math,d=c.sin,h=c.cos,v=c.acos,f=c.abs,m=c.sqrt,g=c.pow,b=Number.isNaN,p=function(t,e){
var n=void 0!==arguments[2]?arguments[2]:null;return null!==n?r(t.x,n)===r(e.x,n)&&r(t.y,n)===r(e.y,n):t.x===e.x&&t.y===e.y;
},y=function(e,i,r){var a=void 0!==arguments[3]?arguments[3]:0;if(0===a){var s=(e.x*(i.y-r.y)+i.x*(r.y-e.y)+r.x*(e.y-i.y))/2;
return 0===s}var o=new t(e,i),u=new t(i,r),c=l(o,u),d=v(c/(o.length*u.length));if(b(d))return!0;
var h=n(d);return a>h},_=function(t,e){var n=e.x-t.x;n*=n;var i=e.y-t.y;i*=i;var r=m(n+i);
return r},x=function(t,e){var n=(t.x+e.x)/2,i=(t.y+e.y)/2;return a(n,i)},w=function(e,n,i){
var r,s=void 0!==arguments[3]?arguments[3]:!0,u=a(0,0),c=a(e.x,e.y),d=a(n.x,n.y),h=i,v=new t(u,c),f=new t(c,d),m=new t(c,h),g=l(m,f),b=l(f,f);
r=0!==b?g/b:0,s===!1&&(0>r?r=0:r>1&&(r=1));var p=o(v,f.multiply(r)),y=a(p.x,p.y);return[y,r];
},S=function(t,e){var n=void 0!==arguments[2]?arguments[2]:.5,i=e.x-t.x,r=e.y-t.y,s=a(t.x+n*i,t.y+n*r);
return s},C=function(e,n){for(var r=void 0!==arguments[2]?arguments[2]:22.5,s=new t(e,a(e.x,e.y-1e3)),o=new t(e,n),l=u(s,o),c=[],v=0;360>=v;v+=r)c.push(v);
var m=1/0,g=!0,b=!1,p=void 0;try{for(var y=void 0,x=c[Symbol.iterator]();!(g=(y=x.next()).done);g=!0){
var w=y.value,S=w-l;f(S)<f(m)&&(m=S)}}catch(C){b=!0,p=C}finally{try{g||null==x["return"]||x["return"]();
}finally{if(b)throw p}}l+=m,360===l&&(l=0);var E=i(l-90),k=_(e,n),A=new t(h(E),d(E));
A.length=k;var L=a(e.x+A.x,e.y+A.y);return[L,l]},E=function(e,n){var r=void 0!==arguments[2]?arguments[2]:90,s=new t(e,a(e.x,e.y-1e3)),o=new t(e,n),l=u(s,o),c=r-l;
l+=c,360===l&&(l=0);var v=i(l-90),f=_(e,n),m=new t(h(v),d(v));m.length=f;var g=a(e.x+m.x,e.y+m.y);
return g},k=function(t,e,n){var i=(n.y-e.y)/(n.x-e.x),r=e.y-i*e.x,a=f(i*t.x-t.y+r)/m(g(i,2)+1);
return a},A=function(t){var e=void 0!==arguments[1]?arguments[1]:1,n=0,i=0;if(t.length-1>2)for(var r=2;r<t.length;r+=1){
var a=k(t[r],t[1],t[t.length-1]);a>i&&(n=r,i=a)}var s;if(i>e){var o=A(t.slice(1,n),e),l=A(t.slice(n),e);
s=o.concat(l)}else s=t;return s};return{get comparePoints(){return p},get checkCollinearity(){
return y},get getDistanceBetweenPoints(){return _},get getPointBetweenTwoPoints(){
return x},get getNearestPointOnLine(){return w},get getPointAtFraction(){return S;
},get snapPointToAngleMultiple(){return C},get snapPointToAngle(){return E},get getPerpendicularDistance(){
return k},get getRamerDouglasPeuckerPoints(){return A}}}),System.registerModule("utils/random",[],function(){
"use strict";var t=System.get("utils/math").round,e=Math.floor,n=function(){var e=void 0!==arguments[0]?arguments[0]:0,n=void 0!==arguments[1]?arguments[1]:100,i=void 0!==arguments[2]?arguments[2]:0,r=e+Math.random()*(n-e);
return t(r,i)},i=function(){for(var t=void 0!==arguments[0]?arguments[0]:10,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz!@#$%^&*()_+-={}[]:<>,.",n="",i=0;t>i;i+=1){
var r=Math.floor(Math.random()*e.length);n+=e.substring(r,r+1)}return n},r=function(t){
for(var i=t.length;--i;){var r=n(0,1,5),a=e(r*(i+1)),s=t[a];t[a]=t[i],t[i]=s}return t;
};return{get getRandomNumber(){return n},get getRandomString(){return i},get shuffle(){
return r}}}),System.registerModule("utils/rect",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createSVGPoint,n=t.createSVGRect,i=Math.max,r=function(t,i){
var r=e(t.left,t.top),a=e(t.right,t.bottom);r=r.matrixTransform(i),a=a.matrixTransform(i);
var s=n({x:r.x,y:r.y,width:a.x-r.x,height:a.y-r.y});return s},a=function(t){var e=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value,u=l.width*l.height;
e.push(u)}}catch(c){r=!0,a=c}finally{try{n||null==o["return"]||o["return"]()}finally{
if(r)throw a}}var d=i.apply(void 0,$traceurRuntime.spread(e)),h=e.indexOf(d),v=t[h];
return v},s=function(t){if(0===t.length)return n(0,0,0,0);if(1===t.length){var i=t[0];
return n(i.x,i.y,i.width,i.height)}var r=[],a=[],s=!0,o=!1,l=void 0;try{for(var u=void 0,c=t[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;r.push(e(d.x,d.y)),a.push(e(d.x+d.width,d.y+d.height))}}catch(h){o=!0,
l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}var v=e(r[0]),f=e(a[0]),m=!0,g=!1,b=void 0;
try{for(var p=void 0,y=r[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value;
_.x<v.x&&(v.x=_.x),_.y<v.y&&(v.y=_.y)}}catch(x){g=!0,b=x}finally{try{m||null==y["return"]||y["return"]();
}finally{if(g)throw b}}var w=!0,S=!1,C=void 0;try{for(var E=void 0,k=a[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){
var A=E.value;A.x>f.x&&(f.x=A.x),A.y>f.y&&(f.y=A.y)}}catch(L){S=!0,C=L}finally{try{
w||null==k["return"]||k["return"]()}finally{if(S)throw C}}var M=n(v.x,v.y,f.x-v.x,f.y-v.y);
return M},o=function(t,e){return e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height?!0:!1;
},l=function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height?!0:!1;
},u=function(t,e){return t.left<=e.right&&e.left<=t.right&&t.top<=e.bottom&&e.top<=t.bottom;
};return{get transformRect(){return r},get getBiggestRect(){return a},get combineRects(){
return s},get rectContainsRect(){return o},get rectContainsPoint(){return l},get rectIntersectsRect(){
return u}}}),System.registerModule("utils/relationship",[],function(){"use strict";
var t=System.get("utils/constants"),e=t.CONTAINER_ELEMENTS,n=t.SHAPE_ELEMENTS,i=t.GRAPHICS_ELEMENTS,r=t.TEXT_CONTENT_ELEMENTS,a=System.get("utils/text").getTspansIntersectedByRange,s=Number.parseInt,o=function(t){
var e=[],n=["path","text","rect","circle","ellipse","line","polyline","polygon","use"],i=!0,r=!1,a=void 0;
try{for(var s=void 0,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.localName;
n.includes(c)?e.push(u):("g"===c||"a"===c)&&(e=$traceurRuntime.spread(e,o(u.children)));
}}catch(d){r=!0,a=d}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw a;
}}return e},l=function(t,s){var o=void 0!==arguments[2]?arguments[2]:null,u=[];if("fill"===t||"fill-opacity"===t||"fill-rule"===t||"stroke"===t||"stroke-dasharray"===t||"stroke-dashoffset"===t||"stroke-linecap"===t||"stroke-linejoin"===t||"stroke-miterlimit"===t||"stroke-opacity"===t||"stroke-width"===t||"vector-effect"===t){
var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value,g=m.localName;if("text"===g)if(o&&o.intersectsNode(m)){var b=a(o);if(b.length>0){
var p="backward"===o.direction?b[b.length-1]:b[0],y=b.remove(p);u=$traceurRuntime.spread(u,[p],y);
}}else u=$traceurRuntime.spread(u,l(t,m.children,o));else n.includes(g)||r.includes(g)?u.push(m):"g"===g||"a"===g?u=$traceurRuntime.spread(u,l(t,m.children,o)):"use"===g&&("fill"===t||"stroke"===t)&&u.push(m);
}}catch(_){d=!0,h=_}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}}else if("buffered-rendering"===t||"clip-path"===t||"filter"===t||"mask"===t||"opacity"===t||"mix-blend-mode"===t||"isolation"===t){
var x=!0,w=!1,S=void 0;try{for(var C=void 0,E=s[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value,A=k.localName;(i.includes(A)||e.includes(A))&&u.push(k)}}catch(L){w=!0,
S=L}finally{try{x||null==E["return"]||E["return"]()}finally{if(w)throw S}}}else if("direction"===t||"font"===t||"font-family"===t||"font-size"===t||"font-size-adjust"===t||"font-stretch"===t||"font-style"===t||"font-variant"===t||"font-weight"===t||"glyph-orientation-horizontal"===t||"glyph-orientation-vertical"===t||"letter-spacing"===t||"text-anchor"===t||"text-transform"===t||"text-decoration"===t||"word-spacing"===t||"white-space"===t){
var M=!0,j=!1,T=void 0;try{for(var P=void 0,R=s[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){
var O=P.value,I=O.localName;if("text"===I)if(o&&o.intersectsNode(O)){var D=a(o);if(D.length>0){
var V="backward"===o.direction?D[D.length-1]:D[0],N=D.remove(V);u=$traceurRuntime.spread(u,[V],N);
}}else u=$traceurRuntime.spread(u,l(t,O.children,o));else r.includes(I)?u.push(O):("g"===I||"a"===I)&&(u=$traceurRuntime.spread(u,l(t,O.children,o)));
}}catch(B){j=!0,T=B}finally{try{M||null==R["return"]||R["return"]()}finally{if(j)throw T;
}}}return u},u=function(t){for(var e=[],n=0;n<t.parentElement.childElementCount;n+=1)t.parentElement.children[n]!==t&&e.push(t.parentElement.children[n]);
return e},c=function(t,n){var i=d(t,n);if(i)for(;!e.includes(i.localName);)i=i.parentNode;
return i},d=function(t,e){for(;t=t.parentNode;)if(t.contains&&t.contains(e))return t;
return null},h=function(t){var n=void 0!==arguments[1]?arguments[1]:document.documentElement,i=[];
if(t!==n)for(;t.parentElement&&t.parentElement!==n;)t=t.parentElement,e.includes(t.localName)&&i.unshift(t);
return i},v=function(t){var e=[],n=function(t){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;e.push(l),l.childElementCount>0&&n(l)}}catch(u){r=!0,a=u}finally{try{
i||null==o["return"]||o["return"]()}finally{if(r)throw a}}};return n(t),e},f=function(t){
var e=void 0!==arguments[1]?arguments[1]:!0,n=System.get("utils/dom").isGraphicsElement,i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
"g"===u.localName||"a"===u.localName?e&&(i=i.concat(m(u,e))):n(u)&&i.push(u)}}catch(c){
a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}return i;
},m=function(t){var e=System.get("utils/dom").isGraphicsElement,n=v(t),i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
e(u)&&i.push(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return i},g=function(t){for(var e in t.parentElement.children){
var n=t.parentElement.children[e];if(n===t)return s(e)}},b=function(t){var e=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
e.push(o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}return e.sort(function(t,e){return 3-(6&t.compareDocumentPosition(e));
}),e},p=function(t){var e=[];t=b(t);var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(o===t[0])e.push([o]);else{var l=!1,u=!0,c=!1,d=void 0;try{for(var h=void 0,v=e[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;o.parentElement===f[0].parentElement&&(f.push(o),l=!0)}}catch(m){c=!0,
d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d}}l===!1&&e.push([o]);
}}}catch(g){i=!0,r=g}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return e},y=function(t){var e=void 0!==arguments[1]?arguments[1]:1;if("max"===e)for(;t.previousElementSibling;)t.parentNode.insertBefore(t,t.previousElementSibling);else for(var n=0;e>n;n+=1)t.previousElementSibling&&t.parentNode.insertBefore(t,t.previousElementSibling);
},_=function(t){var e=void 0!==arguments[1]?arguments[1]:1;if("max"===e)for(;t.nextElementSibling;)t.parentNode.insertBefore(t.nextElementSibling,t);else for(var n=0;e>n;n+=1)t.nextElementSibling&&t.parentNode.insertBefore(t.nextElementSibling,t);
},x=function(t){var e=System.get("utils/bbox").getClientBBox,n=(System.get("utils/rect").transformRect,
t.ownerSVGElement.getScreenCTM().inverse(),e(t)),i=t.ownerSVGElement.getIntersectionList(n,t.ownerSVGElement);
return i=Array.from(i),i.remove(t),i},w=function(t){var e=[],n=!0,i=!1,r=void 0;try{
for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
e.push(o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}for(;e.length>1;){var u=e[0].compareDocumentPosition(e[1]);4===u||20===u?e.remove(e[0]):e.remove(e[1]);
}return e[0]},S=function(t,e){var n=(System.get("utils/dom").isGraphicsElement,System.get("utils/bbox").getClientBBox),i=System.get("utils/rect"),r=(i.transformRect,
i.rectIntersectsRect);if(!t.transform||!e.transform)return!1;var a=(t.getScreenCTM().inverse(),
n(t)),s=(e.getScreenCTM().inverse(),n(e));return r(a,s)},C=function(t){var e=[],n=[],i=!0,r=!1,a=void 0;
try{for(var s=function(){var i=o.value,r=[],a=function(e){var i=!0,s=!1,o=void 0;try{
for(var l=void 0,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=!r.includes(c)&&!n.includes(c);
c!==e&&d&&S(c,e)&&(r.push(c),n.push(c),a(c))}}catch(h){s=!0,o=h}finally{try{i||null==u["return"]||u["return"]();
}finally{if(s)throw o}}};a(i),r.length>0&&e.push(b(r))},o=void 0,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)s();
}catch(u){r=!0,a=u}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw a;
}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=t[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;n.includes(m)||e.push([m])}}catch(g){d=!0,h=g}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}return e};return{get queryClippingElements(){return o},get queryStylableElements(){
return l},get getSiblings(){return u},get getCommonContainer(){return c},get getCommonAncestor(){
return d},get getContainers(){return h},get getDescendants(){return v},get getGraphicsElements(){
return f},get getGraphicsDescendants(){return m},get getElementIndex(){return g},
get sortByDomPosition(){return b},get sortBySiblingElements(){return p},get moveElementUp(){
return y},get moveElementDown(){return _},get getIntersectingElements(){return x},
get getTopStackedElement(){return w},get isElementIntersectingElement(){return S},
get sortByIntersectingElements(){return C}}}),System.registerModule("utils/schneider-curves",[],function(){
"use strict";var t=System.get("classes/vector")["default"],e=System.get("utils/dom").createSVGPoint,n=System.get("utils/point").getDistanceBetweenPoints,i=System.get("utils/vector"),r=i.subtractVectors,a=i.sumVectors,s=i.vectorsDotProduct,o=Math,l=o.abs,u=o.floor,c=o.max,d=function(e,n){
var i=r(new t(e[1]),new t(e[0])),a=r(new t(e[e.length-3]),new t(e[e.length-2]));i=i.normalize(),
a=a.normalize();var s=h(e,0,e.length-1,i,a,n);return s},h=function(i,s,o,l,u,d){var g,b;
if(o-s===1){var y=i[s],_=i[o],x=n(y,_)/3,w=new t(y),S=new t(_),C=a(w,l.scale(x)),E=a(S,u.scale(x)),k=[y,e(C),e(E),_];
return[k]}for(var A,L=f(i,s,o),M=c(d,d*d),j=0;4>=j;j+=1){var T=v(i,s,o,L,l,u),P=p(i,s,o,T,L),R=(g=P[Symbol.iterator](),
(b=g.next()).done?void 0:b.value),O=(b=g.next()).done?void 0:b.value;if(d>R)return[T];
if(A=O,R>=M)break;m(i,s,o,L,T),M=R}var I=r(new t(i[A-1]),new t(i[A])),D=r(new t(i[A]),new t(i[A+1])),V=a(I,D).multiply(.5).normalize(),N=h(i,s,A,l,V,d),B=h(i,A,o,V.multiply(-1),u,d),z=N.concat(B);
return z},v=function(i,o,u,c,d,h){for(var v=i[o],f=i[u],m=new t(v),g=new t(f),b=[[0,0],[0,0]],p=[0,0],y=u-o+1,_=0;y>_;_+=1){
var x=c[_],w=1-x,S=3*x*w,C=w*w*w,E=S*w,k=S*x,A=x*x*x,L=d.scale(E),M=h.scale(k);b[0][0]+=s(L,L),
b[0][1]+=s(L,M),b[1][0]=b[0][1],b[1][1]+=s(M,M);var j=r(new t(i[o+_]),m.multiply(C+E));
j=r(j,g.multiply(k+A)),p[0]+=s(L,j),p[1]+=s(M,j)}var T,P,R=b[0][0]*b[1][1]-b[1][0]*b[0][1],O=1e-6;
if(l(R)>O){var I=b[0][0]*p[1]-b[1][0]*p[0],D=p[0]*b[1][1]-p[1]*b[0][1];T=D/R,P=I/R;
}else{var V=b[0][0]+b[0][1],N=b[1][0]+b[1][1];T=P=l(V)>O?p[0]/V:l(N)>O?p[1]/N:0}var B=n(f,v);
O*=B,(O>T||O>P)&&(T=P=B/3);var z=a(m,d.scale(T)),G=a(g,h.scale(P)),U=[v,e(z),e(G),f];
return U},f=function(t,e,i){for(var r=[0],a=e+1;i>=a;a+=1)r[a-e]=r[a-e-1]+n(t[a],t[a-1]);
for(var s=1,o=i-e;o>=s;s+=1)r[s]/=r[i-e];return r},m=function(t,e,n,i,r){for(var a=[],s=e;n>=s;s+=1)a[s-e]=g(r,t[s],i[s-e]);
return a},g=function(e,n,i){for(var a=[],o=[],u=0;2>=u;u+=1){var c=r(new t(e[u+1]),new t(e[u]));
a[u]=c.multiply(3)}for(var d=0;1>=d;d++){var h=r(a[d+1],a[d]);o[d]=h.multiply(2)}
var v=b(3,e,i),f=b(2,a,i),m=b(1,o,i),g=r(v,new t(n)),p=s(f,f)+s(g,m);return l(p)<1e-6?i:i-s(g,f)/p;
},b=function(e,n,i){for(var r=function(){var e=0,i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[e++]=new t(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return i}(),s=1;e>=s;s+=1)for(var o=0;e-s>=o;o+=1)r[o]=a(r[o].multiply(1-i),r[o+1].multiply(i));
return r[0]},p=function(e,n,i,a,s){for(var o=u((i-n+1)/2),l=0,c=n+1;i>c;c++){var d=r(b(3,a,s[c-n]),new t(e[c])),h=d.length;
h>=l&&(l=h,o=c)}return[l,o]};return{get getSchneiderCurves(){return d}}}),System.registerModule("utils/string",[],function(){
"use strict";var t=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},e=function(t){
return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});
},n=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase();
})},i=function(t){return t===t.toLowerCase()},r=function(t){return t.replace(/\s+/g," ").trim();
},a=function(t){return t.sort(function(t,e){return t.id.localeCompare(e.id)})};return{
get capitalize(){return t},get toCamelCase(){return e},get toDashCase(){return n},
get isLowerCase(){return i},get collapseWhitespace(){return r},get sortAlphabetically(){
return a}}}),System.registerModule("utils/style",[],function(){"use strict";var t=function(t){
var e="",n=t.sheet.rules[0],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.sheet.rules[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l!==n&&(e+="\n"),e+=l.cssText}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}t.textContent=e};return{get reflectStyleElementCSSOM(){return t;
}}}),System.registerModule("utils/text",[],function(){"use strict";var t=System.get("utils/dom"),e=t.createElement,n=t.closest,i=(System.get("utils/json").fromJSON,
Object.keys),r=function(t){var n=t.getElementsByTagName("textPath")[0];n&&(t.innerHTML="",
t.append(n)),t.style.whiteSpace="pre",t.normalize();var r=t.querySelectorAll("tref"),a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=c.getAttribute("href")||c.getAttribute("xlink:href"),h=d?t.ownerSVGElement.querySelector(d):null;
if(h){var v=e("tspan");v.textContent=h.textContent,c.replace(h)}else c.remove()}}catch(f){
s=!0,o=f}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}for(var m=[],g=n?n:t,b=document.createTreeWalker(g,NodeFilter.SHOW_TEXT,null),p=function(t,e){
var n=i(t),r=i(e);if(n.length!==r.length)return!1;var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;if(t[c]!==e[c])return!1}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}return!0};b.nextNode();){for(var y=b.currentNode,_={},x=y.parentNode;x!==t;x=x.parentNode){
var w=!0,S=!1,C=void 0;try{for(var E=void 0,k=x.style[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){
var A=E.value;void 0===_[A]&&(_[A]=x.style[A])}}catch(L){S=!0,C=L}finally{try{w||null==k["return"]||k["return"]();
}finally{if(S)throw C}}}var M=m[m.length-1];if(M&&p(M.style,_))M.textContent+=y.textContent;else{
var j={textContent:y.textContent,style:_};m.push(j)}}var T=document.createDocumentFragment(),P=!0,R=!1,O=void 0;
try{for(var I=void 0,D=m[Symbol.iterator]();!(P=(I=D.next()).done);P=!0){var V=I.value,N=e("svg:tspan");
N.textContent=V.textContent;var B=!0,z=!1,G=void 0;try{for(var U=void 0,H=i(V.style)[Symbol.iterator]();!(B=(U=H.next()).done);B=!0){
var F=U.value;N.style[F]=V.style[F]}}catch(q){z=!0,G=q}finally{try{B||null==H["return"]||H["return"]();
}finally{if(z)throw G}}T.appendChild(N)}}catch($){R=!0,O=$}finally{try{P||null==D["return"]||D["return"]();
}finally{if(R)throw O}}g.innerHTML="",g.append(T)},a=function(t){if(t&&!t.collapsed){
var e=n(t.startContainer,"text");if(t){var i=o(t,e,"start"),r=o(t,e,"end"),a=e.getElementsByTagName("textPath")[0],s=a?a:e,l=function(t){
var e=0,n=null,i=null,r=!0,a=!1,o=void 0;try{for(var l=void 0,u=s.children[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value,d=0,h=!0,v=!1,f=void 0;try{for(var m=void 0,g=c.textContent[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){
m.value;e===t&&(n=c,i=d),e+=1,d+=1}}catch(b){v=!0,f=b}finally{try{h||null==g["return"]||g["return"]();
}finally{if(v)throw f}}}}catch(p){a=!0,o=p}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw o}}if(n){var y=n.textContent,_=y.slice(0,i),x=y.slice(i,y.length);
if(_.length>0&&x.length>0){var w=document.createDocumentFragment(),S=n.cloneNode(!1);
S.textContent=_,w.appendChild(S);var C=n.cloneNode(!1);C.textContent=x,w.appendChild(C),
n.replace(w)}}};l(i),l(r);var u=0,c=null,d=null,h=!0,v=!1,f=void 0;try{for(var m=void 0,g=s.children[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){
var b=m.value,p=!0,y=!1,_=void 0;try{for(var x=void 0,w=b.textContent[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
x.value;u===i&&(c=b),u===r-1&&(d=b),u+=1}}catch(S){y=!0,_=S}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}}}catch(C){v=!0,f=C}finally{try{h||null==g["return"]||g["return"]();
}finally{if(v)throw f}}t.setStart(c.childNodes[0],0),t.setEnd(d.childNodes[0],d.childNodes[0].length);
}}},s=function(t){if(t&&!t.collapsed){n(t.startContainer,"text")}},o=function(t,e){
var n=void 0!==arguments[2]?arguments[2]:"start";t=t.cloneRange(),"start"===n?t.collapse(!0):"end"===n&&t.collapse(!1);
for(var i=0,r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,function(e){var n=new Range;
return n.selectNode(e),n.compareBoundaryPoints(Range.END_TO_END,t)<1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT;
});r.nextNode();)i+=r.currentNode.length;return 3===t.startContainer.nodeType&&(i+=t.startOffset),
i},l=function(t){var e=0,n=0;return t.x.baseVal.numberOfItems>0&&(e=t.x.baseVal.getItem(0).value),
t.y.baseVal.numberOfItems>0&&(n=t.y.baseVal.getItem(0).value),{x:e,y:n}},u=function(t){
var e=[];if(t.commonAncestorContainer.nodeType===Document.TEXT_NODE){for(var n=t.commonAncestorContainer;n=n.parentElement;)if("tspan"===n.localName){
e.push(n);break}}else for(var i,r=document.createTreeWalker(t.commonAncestorContainer,NodeFilter.SHOW_ELEMENT,null);i=r.nextNode();)t.intersectsNode(i)&&"tspan"===i.localName&&e.push(i);
return e},c=function(t){var n=e("div");return n.style.fontFamily=t,""!==n.style.fontFamily;
};return{get normalizeText(){return r},get normalizeTextInRangeBeforeEditing(){return a;
},get normalizeTextInRangeAfterEditing(){return s},get getRangeOffsetRelativeToElement(){
return o},get getTextOffset(){return l},get getTspansIntersectedByRange(){return u;
},get isValidFontFamilyValue(){return c}}}),System.registerModule("utils/time",[],function(){
"use strict";var t=arguments,e=(System.get("utils/type").isNumber,function(t){var e=void 0!==arguments[1]?arguments[1]:500,n=arguments[2],i=null,r=null,a=null,s=0,o=function(){
s=new Date,r=null,a=t.apply(n,i)},l=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];
var c=new Date,d=e-(c-s);return i=l,0>=d?(clearTimeout(r),r=null,s=c,a=t.apply(n,i)):r||(r=setTimeout(o,d)),
a};return l}),n=function(e,n,i){var r=void 0!==arguments[3]?arguments[3]:!1,a=null,s=null,o=function(){
var o=t,l=function(){a=null,r||(s=e.apply(i,o))},u=r&&!a;return clearTimeout(a),a=setTimeout(l,n),
u&&(s=e.apply(i,o)),s};return o},i=function(t){return new Promise(function(e,n){setTimeout(function(){
return e()},t)})},r=function(t){return new Promise(function(e,n){var i=function(n){
n.timeRemaining()>=t?e():requestIdleCallback(i)};requestIdleCallback(i)})},a=function(t){
requestAnimationFrame(t)},s=function(t){return t/1e3/60/60/24},o=function(){return Date.now();
},l=function(){var t=new Date,e=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2),i=("0"+t.getDate()).slice(-2),r=("0"+t.getHours()).slice(-2),a=("0"+t.getMinutes()).slice(-2),s=("0"+t.getSeconds()).slice(-2),o=e+"-"+n+"-"+i+"T"+r+":"+a+":"+s;
return o};return{get throttle(){return e},get debounce(){return n},get sleep(){return i;
},get sleepUntilIdle(){return r},get nextTick(){return a},get milisecondsToDays(){
return s},get getTimeStamp(){return o},get getISOTimestamp(){return l}}}),System.registerModule("utils/transform",[],function(){
"use strict";var t=System.get("utils/bbox"),e=t.getUserBBox,n=t.getClientBBox,i=System.get("utils/dom"),r=(i.createElement,
i.createSVGMatrix),a=i.createSVGPoint,s=(i.createSVGLength,i.createSVGRect,System.get("utils/math")),o=s.degToRad,l=(s.radToDeg,
s.round),u=System.get("utils/matrix").roundMatrix,c=System.get("utils/paint").getPaintServer,d=System.get("utils/pattern").getComputedPatternProperties,h=System.get("utils/rect"),v=(h.transformRect,
h.combineRects),f=System.get("classes/decomposed-transform")["default"],m=System.get("classes/enum")["default"],g=System.get("classes/vector")["default"],b=Math,p=b.abs,y=(b.sqrt,
b.pow,b.tan),_=(b.atan2,b.min),x=Number.parseFloat,w=SVGUnitTypes,S=w.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,C=w.SVG_UNIT_TYPE_USERSPACEONUSE,E=new m("initialStartClientPoint","initialEndClientPoint","initialNormalClientPoint","initialCenterClientPoint","initialR1ClientPoint","initialR2ClientPoint","initialP1ClientPoint","initialP2ClientPoint","initialP3ClientPoint"),k=function(t){
var e=void 0!==arguments[1]?arguments[1]:!1,n=void 0!==arguments[2]?arguments[2]:!0,i=void 0!==arguments[3]?arguments[3]:!0,r=t.localName;
if("ellipse"===r)j(t,e,i);else if("image"===r)P(t);else if("text"===r)R(t,e,i);else if("path"===r)if(t.hasAttribute("is")){
var a=t.getAttribute("is");"bx-rectpath"===a?M(t,e,n,i):"bx-starpath"===a||"bx-ringpath"===a||T(t,e,i);
}else T(t,e,i);t.transform&&t.transform.baseVal.consolidate().matrix.isIdentity()&&t.removeAttribute("transform");
},A=function(t){var n=[c(t,"fill"),c(t,"stroke")],i=n.filter(function(t){return t&&t.localName.endsWith("Gradient");
}),r=n.filter(function(t){return t&&"pattern"===t.localName}),s=t.getScreenCTM(),o=!0,l=!1,u=void 0;
try{for(var h=void 0,v=i[Symbol.iterator]();!(o=(h=v.next()).done);o=!0){var f=h.value,m=f.gradientTransform.baseVal.consolidate().matrix;
if(f.gradientUnits.baseVal===C)if("linearGradient"===f.localName){var b=a(f.x1.baseVal.value,f.y1.baseVal.value),p=a(f.x2.baseVal.value,f.y2.baseVal.value),y=new g(b,p).getNormalVector(),_=y.transformPoint(b),x=b.matrixTransform(m),w=p.matrixTransform(m),k=_.matrixTransform(m);
f[E.initialStartClientPoint]=x.matrixTransform(s),f[E.initialEndClientPoint]=w.matrixTransform(s),
f[E.initialNormalClientPoint]=k.matrixTransform(s)}else if("radialGradient"===f.localName){
var A=a(f.cx.baseVal.value,f.cy.baseVal.value),L=a(f.cx.baseVal.value+f.r.baseVal.value,f.cy.baseVal.value),M=a(f.cx.baseVal.value,f.cy.baseVal.value-f.r.baseVal.value),j=A.matrixTransform(m),T=L.matrixTransform(m),P=M.matrixTransform(m);
f[E.initialCenterClientPoint]=j.matrixTransform(s),f[E.initialR1ClientPoint]=T.matrixTransform(s),
f[E.initialR2ClientPoint]=P.matrixTransform(s)}}}catch(R){l=!0,u=R}finally{try{o||null==v["return"]||v["return"]();
}finally{if(l)throw u}}var O=!0,I=!1,D=void 0;try{for(var V=void 0,N=r[Symbol.iterator]();!(O=(V=N.next()).done);O=!0){
var B=V.value,z=d(B),G=z.x,U=z.y,H=z.width,F=z.height,q=(z.viewBox,z.patternUnits),$=z.patternTransform;
if(q===C){var Y=a(G.value,U.value),X=a(G.value+H.value,U.value),W=a(G.value+H.value,U.value+F.value),Z=Y.matrixTransform($),K=X.matrixTransform($),J=W.matrixTransform($);
B[E.initialP1ClientPoint]=Z.matrixTransform(s),B[E.initialP2ClientPoint]=K.matrixTransform(s),
B[E.initialP3ClientPoint]=J.matrixTransform(s)}else if(q===S){var Q=t.getScreenCTM(),tt=e(t),et=a(G.valueInSpecifiedUnits,U.valueInSpecifiedUnits),nt=a(G.valueInSpecifiedUnits+H.valueInSpecifiedUnits,U.valueInSpecifiedUnits),it=a(G.valueInSpecifiedUnits+H.valueInSpecifiedUnits,U.valueInSpecifiedUnits+F.valueInSpecifiedUnits),rt=a(tt.x+et.x*tt.width,tt.y+et.y*tt.height),at=a(tt.x+nt.x*tt.width,tt.y+nt.y*tt.height),st=a(tt.x+it.x*tt.width,tt.y+it.y*tt.height),ot=rt.matrixTransform($),lt=at.matrixTransform($),ut=st.matrixTransform($),ct=ot.matrixTransform(Q),dt=lt.matrixTransform(Q),ht=ut.matrixTransform(Q);
B[E.initialP1ClientPoint]=ct,B[E.initialP2ClientPoint]=dt,B[E.initialP3ClientPoint]=ht;
}}}catch(vt){I=!0,D=vt}finally{try{O||null==N["return"]||N["return"]()}finally{if(I)throw D;
}}},L=function(t){var n=[c(t,"fill"),c(t,"stroke")],i=n.filter(function(t){return t&&t.localName.endsWith("Gradient");
}),r=n.filter(function(t){return t&&"pattern"===t.localName}),s=t.getScreenCTM().inverse(),o=!0,l=!1,u=void 0;
try{for(var h=void 0,v=i[Symbol.iterator]();!(o=(h=v.next()).done);o=!0){var f=h.value;
if(f.gradientUnits.baseVal===C){var m=void 0;if("linearGradient"===f.localName){var b=a(f.x1.baseVal.value,f.y1.baseVal.value),p=a(f.x2.baseVal.value,f.y2.baseVal.value),y=new g(b,p).getNormalVector().transformPoint(b);
m=I(b,p,y,f[E.initialStartClientPoint].matrixTransform(s),f[E.initialEndClientPoint].matrixTransform(s),f[E.initialNormalClientPoint].matrixTransform(s));
}else if("radialGradient"===f.localName){var _=a(f.cx.baseVal.value,f.cy.baseVal.value),x=a(f.cx.baseVal.value+f.r.baseVal.value,f.cy.baseVal.value),w=a(f.cx.baseVal.value,f.cy.baseVal.value-f.r.baseVal.value);
m=I(_,x,w,f[E.initialCenterClientPoint].matrixTransform(s),f[E.initialR1ClientPoint].matrixTransform(s),f[E.initialR2ClientPoint].matrixTransform(s));
}f.setAttribute("gradientTransform",m.toString())}}}catch(k){l=!0,u=k}finally{try{
o||null==v["return"]||v["return"]()}finally{if(l)throw u}}var A=!0,L=!1,M=void 0;try{
for(var j=void 0,T=r[Symbol.iterator]();!(A=(j=T.next()).done);A=!0){var P=j.value,R=d(P),O=R.x,D=R.y,V=R.width,N=R.height,B=R.patternUnits,z=R.patternTransform;
if(B===C){var G=a(O.value,D.value),U=a(O.value+V.value,D.value),H=a(O.value+V.value,D.value+N.value),F=I(G,U,H,P[E.initialP1ClientPoint].matrixTransform(s),P[E.initialP2ClientPoint].matrixTransform(s),P[E.initialP3ClientPoint].matrixTransform(s));
P.setAttribute("patternTransform",F.toString())}else if(B===S){var q=e(t),$=a(O.valueInSpecifiedUnits,D.valueInSpecifiedUnits),Y=a(O.valueInSpecifiedUnits+V.valueInSpecifiedUnits,D.valueInSpecifiedUnits),X=a(O.valueInSpecifiedUnits+V.valueInSpecifiedUnits,D.valueInSpecifiedUnits+N.valueInSpecifiedUnits),W=a(q.x+$.x*q.width,q.y+$.y*q.height),Z=a(q.x+Y.x*q.width,q.y+Y.y*q.height),K=a(q.x+X.x*q.width,q.y+X.y*q.height),J=P[E.initialP1ClientPoint].matrixTransform(s),Q=P[E.initialP2ClientPoint].matrixTransform(s),tt=P[E.initialP3ClientPoint].matrixTransform(s),et=J.matrixTransform(z.inverse()),nt=Q.matrixTransform(z.inverse()),it=tt.matrixTransform(z.inverse()),rt=I(W,Z,K,et,nt,it);
P.setAttribute("patternTransform",z.multiply(rt).toString())}}}catch(at){L=!0,M=at;
}finally{try{A||null==T["return"]||T["return"]()}finally{if(L)throw M}}},M=function(t,e,n){
if(t.hasAttribute("transform")!==!1){var i=t.transform.baseVal.consolidate().matrix,r=f.fromSVGMatrix(i),s=r.scaleX,o=r.scaleY;
A(t);var l=a(t.x,t.y).matrixTransform(i),c=a(t.x+t.width,t.y).matrixTransform(i),d=a(t.x,t.y+t.height).matrixTransform(i),h=t.x*s,v=t.y*o,m=t.width*p(s),g=t.height*p(o),b=a(h,v),y=a(h+m,v),w=a(h,v+g),S=I(b,y,w,l,c,d);
if(S=u(S,6),1===p(S.a)&&0===S.b&&0===S.c&&1===p(S.d)&&(0!==S.e||0!==S.f)&&(h=1===S.a?h+S.e:h-S.e,
v=1===S.d?v+S.f:v-S.f,S.e=0,S.f=0),t.setAttribute("transform",S.toString()),t.setAttribute("data-bx-x",h),
t.setAttribute("data-bx-y",v),t.setAttribute("data-bx-width",m),t.setAttribute("data-bx-height",g),
n===!0&&(t.setAttribute("data-bx-r1x",t.r1x*p(s)),t.setAttribute("data-bx-r1y",t.r1y*p(o)),
t.setAttribute("data-bx-r2x",t.r2x*p(s)),t.setAttribute("data-bx-r2y",t.r2y*p(o)),
t.setAttribute("data-bx-r3x",t.r3x*p(s)),t.setAttribute("data-bx-r3y",t.r3y*p(o)),
t.setAttribute("data-bx-r4x",t.r4x*p(s)),t.setAttribute("data-bx-r4y",t.r4y*p(o))),
e===!0){var C=getComputedStyle(t).strokeWidth;C=x(C),t.style.strokeWidth=_(C*s,C*o);
}L(t)}},j=function(t,e){if(t.hasAttribute("transform")!==!1){var n=8,i=t.transform.baseVal.consolidate().matrix,r=f.fromSVGMatrix(i),s=r.scaleX,o=r.scaleY;
A(t);var c=t.cx.baseVal.value,d=t.cy.baseVal.value,h=t.rx.baseVal.value,v=t.ry.baseVal.value,m=a(c,d).matrixTransform(i),b=a(c+h,d).matrixTransform(i),y=a(c,d-v).matrixTransform(i);
c*=s,d*=o,h*=s,v*=o;var w=a(c,d),S=a(c+h,d),C=a(c,d-v),E=I(w,S,C,m,b,y);if(E=u(E,5),
1===p(E.a)&&0===E.b&&0===E.c&&1===p(E.d)&&(w=w.matrixTransform(E),S=S.matrixTransform(E),
C=C.matrixTransform(E),E.e=0,E.f=0),h=new g(w,S).length,v=new g(w,C).length,t.setAttribute("transform",E.toString()),
t.setAttribute("cx",l(w.x,n)),t.setAttribute("cy",l(w.y,n)),t.setAttribute("rx",l(h,n)),
t.setAttribute("ry",l(v,n)),e===!0){var k=getComputedStyle(t).strokeWidth;k=x(k),
t.style.strokeWidth=_(k*s,k*o)}L(t)}},T=function(t,e,n){if(t.hasAttribute("transform")){
A(t);var i=r(t.transform.baseVal.consolidate().matrix),s=t.getPathData({normalize:!0
}),o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;if("M"===h.type||"L"===h.type){var v=a(h.values[0],h.values[1]).matrixTransform(i);
h.values=[v.x,v.y]}else if("C"===h.type){var f=a(h.values[0],h.values[1]).matrixTransform(i),m=a(h.values[2],h.values[3]).matrixTransform(i),g=a(h.values[4],h.values[5]).matrixTransform(i);
h.values=[f.x,f.y,m.x,m.y,g.x,g.y]}}}catch(b){l=!0,u=b}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}t.setPathData(s),t.removeAttribute("transform"),L(t)}},P=function(t){
if(t.hasAttribute("transform")){var e=f.fromSVGMatrix(t.transform.baseVal.consolidate().matrix);
(1!==e.scaleX||1!==e.scaleY)&&(t.setAttribute("preserveAspectRatio","none"),t.setAttribute("x",t.x.baseVal.value*e.scaleX),
t.setAttribute("y",t.y.baseVal.value*e.scaleY),t.setAttribute("width",t.width.baseVal.value*e.scaleX),
t.setAttribute("height",t.height.baseVal.value*e.scaleY),e.scaleX=1,e.scaleY=1),0===e.rotateZ&&0===e.skewXY&&(t.setAttribute("x",t.x.baseVal.value+e.translateX),
t.setAttribute("y",t.y.baseVal.value+e.translateY),e.translateX=0,e.translateY=0),
t.setAttribute("transform",e.toSVGMatrix().toString())}},R=function(t,e,n){if(t.hasAttribute("transform")){
var i=new Map,r=!0,a=!1,s=void 0;try{for(var o=void 0,u=t.children[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){
var c=o.value;i.set(c,c.getBBox())}}catch(d){a=!0,s=d}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw s}}var h=f.fromSVGMatrix(t.transform.baseVal.consolidate().matrix),v=new f;
if(h.scaleX===h.scaleY){var m=!0,g=!1,b=void 0;try{for(var p=void 0,y=t.children[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var w=p.value,S=getComputedStyle(w).fontSize;S=x(S),S=l(S*h.scaleY,1),w.style.fontSize=S;
var C=getComputedStyle(w).wordSpacing;C=x(C),C=l(C*h.scaleY,2),w.style.wordSpacing=C;
var E=getComputedStyle(w).letterSpacing;E=x(E),E=l(E*h.scaleY,2),w.style.letterSpacing=E;
}}catch(k){g=!0,b=k}finally{try{m||null==y["return"]||y["return"]()}finally{if(g)throw b;
}}for(var A="",L="",M=0;M<t.x.baseVal.numberOfItems;M+=1)A+=t.x.baseVal.getItem(M).value*h.scaleX,
M!==t.x.baseVal.numberOfItems-1&&(A+=" ");for(var j=0;j<t.y.baseVal.numberOfItems;j+=1)L+=t.y.baseVal.getItem(j).value*h.scaleY,
j!==t.y.baseVal.numberOfItems-1&&(L+=" ");if(t.setAttribute("x",A),t.setAttribute("y",L),
e===!0){var T=getComputedStyle(t).strokeWidth;T=x(T),t.style.strokeWidth=_(T*h.scaleX,T*h.scaleY);
}v.scaleX=h.scaleX,v.scaleY=h.scaleY,h.scaleX=1,h.scaleY=1}if(1===h.scaleX&&1===h.scaleY&&0===h.rotateZ&&0===h.skewXY){
var P="",R="";if(t.x.baseVal.numberOfItems>0)for(var O=0;O<t.x.baseVal.numberOfItems;O+=1)P+=t.x.baseVal.getItem(O).value+h.translateX,
O!==t.x.baseVal.numberOfItems-1&&(P+=" ");else P=h.translateX;if(t.y.baseVal.numberOfItems>0)for(var I=0;I<t.y.baseVal.numberOfItems;I+=1)R+=t.y.baseVal.getItem(I).value+h.translateY,
I!==t.y.baseVal.numberOfItems-1&&(R+=" ");else R=h.translateY;t.setAttribute("x",P),
t.setAttribute("y",R),v.translateX=h.translateX,v.translateY=h.translateY,h.translateX=0,
h.translateY=0}t.setAttribute("transform",h.toSVGMatrix().toString());var D=!0,V=!1,N=void 0;
try{for(var B=void 0,z=t.children[Symbol.iterator]();!(D=(B=z.next()).done);D=!0){
B.value}}catch(G){V=!0,N=G}finally{try{D||null==z["return"]||z["return"]()}finally{
if(V)throw N}}}},O=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];
var r,s=[],o=!0,l=!1,u=void 0;try{for(var c=void 0,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,f=e(h),m=h.getScreenCTM(),g=0,b=0;if(h.hasAttribute("data-transform-origin")){
var p=h.getAttribute("data-transform-origin").split(" ");g=x(p[0]),b=x(p[1])}var y=f.x+f.width/2+g,_=f.y+f.height/2+b;
r=a(y,_),r=r.matrixTransform(m),s.push(r)}}catch(w){l=!0,u=w}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}if(1===t.length)r=s[0];else{var S=!0,C=!0,E=!1,k=void 0;try{
for(var A=void 0,L=s[Symbol.iterator]();!(C=(A=L.next()).done);C=!0){var M=A.value;
if(M.x<s[0].x-3||M.x>s[0].x+3||M.y<s[0].y-3||M.y>s[0].y+3){S=!1;break}}}catch(j){
E=!0,k=j}finally{try{C||null==L["return"]||L["return"]()}finally{if(E)throw k}}if(S)r=s[0];else{
var T=function(){var e=0,i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[e++]=n(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return i}(),P=v(T);r=a(P.x+P.width/2,P.y+P.height/2)}}return r;
},I=function(t,e,n,i,a,s){var o=function(t){return t[0][0]*(t[1][1]*t[2][2]-t[1][2]*t[2][1])-t[0][1]*(t[1][0]*t[2][2]-t[1][2]*t[2][0])+t[0][2]*(t[1][0]*t[2][1]-t[1][1]*t[2][0]);
},l=o([[t.x,t.y,1],[e.x,e.y,1],[n.x,n.y,1]]),u=o([[i.x,t.y,1],[a.x,e.y,1],[s.x,n.y,1]]),c=o([[i.y,t.y,1],[a.y,e.y,1],[s.y,n.y,1]]),d=o([[t.x,i.x,1],[e.x,a.x,1],[n.x,s.x,1]]),h=o([[t.x,i.y,1],[e.x,a.y,1],[n.x,s.y,1]]),v=o([[t.x,t.y,i.x],[e.x,e.y,a.x],[n.x,n.y,s.x]]),f=o([[t.x,t.y,i.y],[e.x,e.y,a.y],[n.x,n.y,s.y]]);
return r(u/l,c/l,d/l,h/l,v/l,f/l)},D=function(t,e){return e.getScreenCTM().inverse().multiply(t.getScreenCTM());
},V=function(t,e,n){var i=r(t);return i.e=i.e+e*i.a+n*i.c,i.f=i.f+e*i.b+n*i.d,i},N=function(t,e,n){
var i=void 0!==arguments[3]?arguments[3]:0,a=void 0!==arguments[4]?arguments[4]:0,s=r(t),l=o(e),u=o(n),c=r();
return c=B(c,y(l),y(u)),s=V(s,i,a),s.multiplySelf(c),s=V(s,-i,-a)},B=function(t,e,n){
var i=r(t),a=i.a,s=i.b;return i.a+=n*i.c,i.b+=n*i.d,i.c+=e*a,i.d+=e*s,i};return{get reduceTransform(){
return k},get getTransformOriginPoint(){return O},get getTransformFromPoints(){return I;
},get getTransformToElement(){return D},get skew(){return N},get shear(){return B;
}}}),System.registerModule("utils/type",[],function(){"use strict";var t=Number,e=t.isFinite,n=t.isNaN,i=t.parseFloat,r=function(t){
return n(t)?!1:"number"==typeof t?!0:!1},a=function(t){return t===!!t},s=function(t){
var r=i(t);return n(r)===!1&&e(r)};return{get isNumber(){return r},get isBoolean(){
return a},get isNumeric(){return s}}}),System.registerModule("utils/vector",[],function(){
"use strict";var t=System.get("utils/math").radToDeg,e=System.get("classes/vector")["default"],n=Math,i=n.abs,r=n.atan2,a=function(e,n){
var a=r(n.y,n.x)-r(e.y,e.x),s=t(a);return 0>s&&(s=360-i(s)),s},s=function(t,e){return t.x*e.x+t.y*e.y;
},o=function(t,n){return new e(t.x-n.x,t.y-n.y)},l=function(t,n){return new e(t.x+n.x,t.y+n.y);
},u=function(t,e){return t.x===e.x&&t.y===e.y?!0:!1};return{get getAngleBetweenVectors(){
return a},get vectorsDotProduct(){return s},get subtractVectors(){return o},get sumVectors(){
return l},get compareVectors(){return u}}});