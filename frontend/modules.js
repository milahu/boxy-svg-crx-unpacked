System.registerModule("classes/bridge",[],function(){"use strict";var e=function(){
function e(){var e=this;this._counter=0,this._requestCallbacks={},this._responseCallbacks={},
this._postMessageCache=[],this._masterWindow=null,this._masterOrigin=null,window.addEventListener("message",function(t){
return e._onMessage(t)})}return $traceurRuntime.createClass(e,{postMessage:function(e){
var t=void 0!==arguments[1]?arguments[1]:null,n=void 0!==arguments[2]?arguments[2]:null,i=this,r=function(){
var r=i._counter++,a="request",s={channel:a,id:r,name:e,arg:t};n&&(i._responseCallbacks[s.id]=n),
i._masterWindow.postMessage(s,i._masterOrigin)};this._masterWindow&&this._masterOrigin?r():this._postMessageCache.push(r);
},addMessageListener:function(e,t){this._requestCallbacks[e]||(this._requestCallbacks[e]=[]),
this._requestCallbacks[e].push(t)},removeMessageListener:function(e,t){this._requestCallbacks[e]&&(this._requestCallbacks[e]=this._requestCallbacks[e].filter(function(e){
return e!==t}))},_onMessage:function(e){var t=this,n=e.data,i=n.channel,r=n.id,a=n.name,s=n.arg;
if(null===this._masterWindow){this._masterWindow=e.source,this._masterOrigin=e.origin;
var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=this._postMessageCache[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h()}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}this._postMessageCache=[]}"request"===i?this._requestCallbacks[a]&&this._requestCallbacks[a].forEach(function(e){
e(s,function(e){var n={channel:"response",id:r,name:a,arg:e};t._masterWindow.postMessage(n,t._masterOrigin);
})}):"response"===i&&this._responseCallbacks[r]&&(this._responseCallbacks[r](s),delete this._responseCallbacks[r]);
}},{})}(),t=function(){function e(){var e=this;this._counter=0,this._requestCallbacks={},
this._responseCallbacks={},ipcRenderer.on("request",function(t,n){return e._onRequestMessage(n);
}),ipcRenderer.on("response",function(t,n){return e._onResponseMessage(n)})}return $traceurRuntime.createClass(e,{
postMessage:function(e){var t=void 0!==arguments[1]?arguments[1]:null,n=void 0!==arguments[2]?arguments[2]:null,i=this._counter++,r={
name:e,arg:t,id:i};n&&(this._responseCallbacks[r.id]=n),ipcRenderer.isWebview?ipcRenderer.sendToHost("request",r):ipcRenderer.send("request",r);
},addMessageListener:function(e,t){this._requestCallbacks[e]||(this._requestCallbacks[e]=[]),
this._requestCallbacks[e].push(t)},removeMessageListener:function(e,t){this._requestCallbacks[e]&&(this._requestCallbacks[e]=this._requestCallbacks[e].filter(function(e){
return e!==t}))},_onRequestMessage:function(e){var t=e,n=t.name,i=t.arg,r=t.id,a=this._requestCallbacks[n];
a&&a.forEach(function(e){e(i,function(e){var t={id:r,name:n,arg:e};ipcRenderer.isWebview?ipcRenderer.sendToHost("response",t):ipcRenderer.send("response",t);
})})},_onResponseMessage:function(e){this._responseCallbacks[e.id]&&(this._responseCallbacks[e.id](e.arg),
delete this._responseCallbacks[e.id])}},{})}(),n=window.ipcRenderer?t:e;return{get default(){
return n}}}),System.registerModule("classes/color",[],function(){"use strict";var e=System.get("utils/color"),t=e.stringToColor,n=e.colorToString,i=e.rgbToHsl,r=e.hslToRgb,a=function(){
function e(){var e=void 0!==arguments[0]?arguments[0]:0,t=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:0,i=void 0!==arguments[3]?arguments[3]:1,r=void 0!==arguments[4]?arguments[4]:"rgba";
"rgba"===r?(this.r=e,this.g=t,this.b=n):"hsla"===r&&(this.h=e,this.s=t,this.l=n),
this.a=i,this.space=r}return $traceurRuntime.createClass(e,{setSpace:function(e){
var t,n,a,s;if("rgba"===e&&"hsla"===this.space){var o=r(this.h,this.s,this.l),l=(t=o[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),u=(n=t.next()).done?void 0:n.value,c=(n=t.next()).done?void 0:n.value;
this.r=l,this.g=u,this.b=c,delete this.h,delete this.s,delete this.l,this.space="rgba";
}else if("hsla"===e&&"rgba"===this.space){var d=i(this.r,this.g,this.b),h=(a=d[Symbol.iterator](),
(s=a.next()).done?void 0:s.value),v=(s=a.next()).done?void 0:s.value,f=(s=a.next()).done?void 0:s.value;
this.h=h,this.s=v,this.l=f,delete this.r,delete this.g,delete this.b,this.space="hsla";
}},clone:function(){return"rgba"===this.space?new e(this.r,this.g,this.b,this.a,"rgba"):"hsla"===this.space?new e(this.h,this.s,this.l,this.a,"hsla"):void 0;
},log:function(){var e=this.toString();console.log("%c     ","background: "+e,e)},
toString:function(){var e=void 0!==arguments[0]?arguments[0]:"rgba";return n(this,e);
}},{fromString:function(n){var i=void 0!==arguments[1]?arguments[1]:"rgba";if("rgba"===i){
var r=t(n,"rgba"),a=r.r,s=r.g,o=r.b,l=r.a;return new e(a,s,o,l,"rgba")}var u=t(n,"hsla"),c=u.h,d=u.s,h=u.l,v=u.a;
return new e(c,d,h,v,"hsla")}})}(),s=a;return{get default(){return s}}}),System.registerModule("classes/decomposed-transform",[],function(){
"use strict";var e=Math,t=e.abs,n=e.sqrt,i=e.asin,r=e.sin,a=e.cos,s=(e.tan,e.atan2),o=1e-8,l=function(){
function e(){var e=void 0!==arguments[0]?arguments[0]:"eulerAngles";this._translateX=0,
this._translateY=0,this._translateZ=0,this._scaleX=1,this._scaleY=1,this._scaleZ=1,
this._perspectiveX=0,this._perspectiveY=0,this._perspectiveZ=0,this._perspectiveW=1,
this._skewXY=0,this._skewXZ=0,this._skewYZ=0,this._rotation=e,"eulerAngles"===e?(this._rotateX=0,
this._rotateY=0,this._rotateZ=0):"quaternions"===e&&(this._quaternionX=0,this._quaternionY=0,
this._quaternionZ=0,this._quaternionW=0)}return $traceurRuntime.createClass(e,{toSVGMatrix:function(){
var e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];if(e[0][3]=this.perspectiveX,e[1][3]=this.perspectiveY,
e[2][3]=this.perspectiveZ,e[3][3]=this.perspectiveW,w(e,this.translateX,this.translateY,this.translateZ),
"eulerAngles"===this.rotation){var t=a(this.rotateX),n=r(this.rotateX),i=a(this.rotateY),s=r(this.rotateY),o=a(this.rotateZ),l=r(this.rotateZ),u=i*o,c=i*l,d=s*o,h=s*l,v=[[u-h*n,c+d*n,-t*s,0],[-t*l,t*o,n,0],[d+c*n,h-u*n,t*i,0],[0,0,0,1]];
e=S(e,v)}else if("quaternions"===this.rotation){var f=this.quaternionX*this.quaternionX,m=this.quaternionX*this.quaternionY,b=this.quaternionX*this.quaternionZ,g=this.quaternionX*this.quaternionW,p=this.quaternionY*this.quaternionY,y=this.quaternionY*this.quaternionZ,_=this.quaternionY*this.quaternionW,x=this.quaternionZ*this.quaternionZ,C=this.quaternionZ*this.quaternionW,k=[[1-2*(p+x),2*(m-C),2*(b+_),0],[2*(m+C),1-2*(f+x),2*(y-g),0],[2*(b-_),2*(y+g),1-2*(f+p),0],[0,0,0,1]];
e=S(e,k)}if(this.skewYZ){var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];A[2][1]=this.skewYZ,
e=S(e,A)}if(this.skewXZ){var T=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];T[2][1]=0,
T[2][0]=this.skewXZ,e=S(e,T)}if(this.skewXY){var L=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
L[2][0]=0,L[1][0]=this.skewXY,e=S(e,L)}return E(e,this.scaleX,this.scaleY,this.scaleZ),
new SVGMatrix([e[0][0],e[0][1],e[1][0],e[1][1],e[3][0],e[3][1]])},clone:function(){
var t=new e(this._rotation);return t.translateX=this._translateX,t.translateY=this._translateY,
t.translateZ=this._translateZ,t.scaleX=this._scaleX,t.scaleY=this._scaleY,t.scaleZ=this._scaleZ,
t.perspectiveX=this._perspectiveX,t.perspectiveY=this._perspectiveY,t.perspectiveZ=this._perspectiveZ,
t.perspectiveW=this._perspectiveW,t.skewXY=this._skewXY,t.skewXZ=this._skewXZ,t.skewYZ=this._skewYZ,
"eulerAngles"===this._rotation?(t.rotateX=this._rotateX,t.rotateY=this._rotateY,t.rotateZ=this._rotateZ):"quaternions"===this._rotation&&(t.quaternionX=this._quaternionX,
t.quaternionY=this._quaternionY,t.quaternionZ=this._quaternionZ,t.quaternionW=this._quaternionW),
t},get translateX(){return this._translateX},set translateX(e){this._translateX=e;
},get translateY(){return this._translateY},set translateY(e){this._translateY=e},
get translateZ(){return this._translateZ},set translateZ(e){this._translateZ=e},get scaleX(){
return this._scaleX},set scaleX(e){this._scaleX=e},get scaleY(){return this._scaleY;
},set scaleY(e){this._scaleY=e},get scaleZ(){return this._scaleZ},set scaleZ(e){this._scaleZ=e;
},get perspectiveX(){return this._perspectiveX},set perspectiveX(e){this._perspectiveX=e;
},get perspectiveY(){return this._perspectiveY},set perspectiveY(e){this._perspectiveY=e;
},get perspectiveZ(){return this._perspectiveZ},set perspectiveZ(e){this._perspectiveZ=e;
},get perspectiveW(){return this._perspectiveW},set perspectiveW(e){this._perspectiveW=e;
},get skewXY(){return this._skewXY},set skewXY(e){this._skewXY=e},get skewXZ(){return this._skewXZ;
},set skewXZ(e){this._skewXZ=e},get skewYZ(){return this._skewYZ},set skewYZ(e){this._skewYZ=e;
},get rotation(){return this._rotation},set rotation(e){throw new Error('"rotation" property is read-only.');
},get rotateX(){if("eulerAngles"===this._rotation)return this._rotateX;throw new Error('Can\'t get "rotateX" propery - decomposed transform does not use Euler angles.');
},set rotateX(e){if("eulerAngles"!==this._rotation)throw new Error('Can\'t set "rotateX" propery - decomposed transform does not use Euler angles.');
this._rotateX=e},get rotateY(){if("eulerAngles"===this._rotation)return this._rotateY;
throw new Error('Can\'t get "rotateY" propery - decomposed transform does not use Euler angles.');
},set rotateY(e){if("eulerAngles"!==this._rotation)throw new Error('Can\'t set "rotateY" propery - decomposed transform does not use Euler angles.');
this._rotateY=e},get rotateZ(){if("eulerAngles"===this._rotation)return this._rotateZ;
throw new Error('Can\'t get "rotateZ" propery - decomposed transform does not use Euler angles.');
},set rotateZ(e){if("eulerAngles"!==this._rotation)throw new Error('Can\'t set "rotateZ" propery - decomposed transform does not use Euler angles.');
this._rotateZ=e},get quaternionX(){if("quaternions"===this._rotation)return this._quaternionX;
throw new Error('Can\'t get "quaternionX" propery - decomposed transform does not use quaternions.');
},set quaternionX(e){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionX" propery - decomposed transform does not use quaternions.');
this._quaternionX=e},get quaternionY(){if("quaternions"===this._rotation)return this._quaternionY;
throw new Error('Can\'t get "quaternionY" propery - decomposed transform does not use quaternions.');
},set quaternionY(e){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionY" propery - decomposed transform does not use quaternions.');
this._quaternionY=e},get quaternionZ(){if("quaternions"===this._rotation)return this._quaternionZ;
throw new Error('Can\'t get "quaternionZ" propery - decomposed transform does not use quaternions.');
},set quaternionZ(e){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionZ" propery - decomposed transform does not use quaternions.');
this._quaternionX=e},get quaternionW(){if("quaternions"===this._rotation)return this._quaternionW;
throw new Error('Can\'t get "quaternionW" propery - decomposed transform does not use quaternions.');
},set quaternionW(e){if("quaternions"!==this._rotation)throw new Error('Can\'t set "quaternionW" propery - decomposed transform does not use quaternions.');
this._quaternionW=e}},{fromSVGMatrix:function(t){var r=void 0!==arguments[1]?arguments[1]:"eulerAngles",o=new e(r),l=[[t.a,t.b,0,0],[t.c,t.d,0,0],[0,0,1,0],[t.e,t.f,0,1]];
if(0==l[3][3])return!1;for(var u=0;4>u;u++)for(var c=0;4>c;c++)l[u][c]/=l[3][3];for(var d=[],v=0;4>v;v++){
d[v]=[];for(var w=0;4>w;w++)d[v][w]=l[v][w]}for(var S=0;3>S;S++)d[S][3]=0;if(d[3][3]=1,
0==h(d))return!1;if(0!=l[0][3]||0!=l[1][3]||0!=l[2][3]){var C=[0,0,0,0];C[0]=l[0][3],
C[1]=l[1][3],C[2]=l[2][3],C[3]=l[3][3];var E=f(d),k=m(E),A=b(C,k);o.perspectiveX=A[0],
o.perspectiveY=A[1],o.perspectiveZ=A[2],o.perspectiveW=A[3],l[0][3]=l[1][3]=l[2][3]=0,
l[3][3]=1}else o.perspectiveX=o.perspectiveY=o.perspectiveZ=0,o.perspectiveW=1;o.translateX=l[3][0],
l[3][0]=0,o.translateY=l[3][1],l[3][1]=0,o.translateZ=l[3][2],l[3][2]=0;for(var T=[[],[],[]],L=[0,0,0],M=0;3>M;M++)T[M][0]=l[M][0],
T[M][1]=l[M][1],T[M][2]=l[M][2];if(o.scaleX=g(T[0]),p(T[0],1),o.skewXY=y(T[0],T[1]),
_(T[1],T[0],T[1],1,-o.skewXY),o.scaleY=g(T[1]),p(T[1],1),o.skewXY/=o.scaleY,o.skewXZ=y(T[0],T[2]),
_(T[2],T[0],T[2],1,-o.skewXZ),o.skewYZ=y(T[1],T[2]),_(T[2],T[1],T[2],1,-o.skewYZ),
o.scaleZ=g(T[2]),p(T[2],1),o.skewXZ/=o.scaleZ,o.skewYZ/=o.scaleZ,x(T[1],T[2],L),y(T[0],L)<0){
o.scaleX*=-1,o.scaleY*=-1,o.scaleZ*=-1;for(var P=0;3>P;P++)T[P][0]*=-1,T[P][1]*=-1,
T[P][2]*=-1}if("eulerAngles"===r)o.rotateY=i(-T[0][2]),0!==a(o.rotateY)?(o.rotateX=s(T[1][2],T[2][2]),
o.rotateZ=s(T[0][1],T[0][0])):(o.rotateX=s(-T[2][0],T[1][1]),o.rotateZ=0);else if("quaternions"===r){
var R,j,O,V,D,G;j=T[0][0]+T[1][1]+T[2][2]+1,j>1e-4?(R=.5/n(j),G=.25/R,O=(T[2][1]-T[1][2])*R,
V=(T[0][2]-T[2][0])*R,D=(T[1][0]-T[0][1])*R):T[0][0]>T[1][1]&&T[0][0]>T[2][2]?(R=2*n(1+T[0][0]-T[1][1]-T[2][2]),
O=.25*R,V=(T[0][1]+T[1][0])/R,D=(T[0][2]+T[2][0])/R,G=(T[2][1]-T[1][2])/R):T[1][1]>T[2][2]?(R=2*n(1+T[1][1]-T[0][0]-T[2][2]),
O=(T[0][1]+T[1][0])/R,V=.25*R,D=(T[1][2]+T[2][1])/R,G=(T[0][2]-T[2][0])/R):(R=2*n(1+T[2][2]-T[0][0]-T[1][1]),
O=(T[0][2]+T[2][0])/R,V=(T[1][2]+T[2][1])/R,D=.25*R,G=(T[1][0]-T[0][1])/R),o.quaternionX=O,
o.quaternionY=V,o.quaternionZ=D,o.quaternionW=G}return o}})}(),u=l,c=function(e,t,n,i){
return e*i-t*n},d=function(e,t,n,i,r,a,s,o,l){return e*c(r,a,o,l)-i*c(t,n,o,l)+s*c(t,n,r,a);
},h=function(e){var t=e[0][0],n=e[0][1],i=e[0][2],r=e[0][3],a=e[1][0],s=e[1][1],o=e[1][2],l=e[1][3],u=e[2][0],c=e[2][1],h=e[2][2],v=e[2][3],f=e[3][0],m=e[3][1],b=e[3][2],g=e[3][3];
return t*d(s,c,m,o,h,b,l,v,g)-n*d(a,u,f,o,h,b,l,v,g)+i*d(a,u,f,s,c,m,l,v,g)-r*d(a,u,f,s,c,m,o,h,b);
},v=function(e){var t=[[],[],[],[]],n=e[0][0],i=e[0][1],r=e[0][2],a=e[0][3],s=e[1][0],o=e[1][1],l=e[1][2],u=e[1][3],c=e[2][0],h=e[2][1],v=e[2][2],f=e[2][3],m=e[3][0],b=e[3][1],g=e[3][2],p=e[3][3];
t[0][0]=d(o,h,b,l,v,g,u,f,p),t[1][0]=-d(s,c,m,l,v,g,u,f,p),t[2][0]=d(s,c,m,o,h,b,u,f,p),
t[3][0]=-d(s,c,m,o,h,b,l,v,g),t[0][1]=-d(i,h,b,r,v,g,a,f,p),t[1][1]=d(n,c,m,r,v,g,a,f,p),
t[2][1]=-d(n,c,m,i,h,b,a,f,p),t[3][1]=d(n,c,m,i,h,b,r,v,g),t[0][2]=d(i,o,b,r,l,g,a,u,p),
t[1][2]=-d(n,s,m,r,l,g,a,u,p),t[2][2]=d(n,s,m,i,o,b,a,u,p),t[3][2]=-d(n,s,m,i,o,b,r,l,g),
t[0][3]=-d(i,o,h,r,l,v,a,u,f),t[1][3]=d(n,s,c,r,l,v,a,u,f),t[2][3]=-d(n,s,c,i,o,h,a,u,f),
t[3][3]=d(n,s,c,i,o,h,r,l,v)},f=function(e){var n=v(e),i=h(e);if(t(i)<o)return!1;for(var r=0;4>r;r++)for(var a=0;4>a;a++)n[r][a]=n[r][a]/i;
return n},m=function(e){for(var t=[[],[],[],[]],n=0;4>n;n++)for(var i=0;4>i;i++)t[n][i]=e[i][n];
return t},b=function(e,t){var n=[];return n[0]=e[0]*t[0][0]+e[1]*t[1][0]+e[2]*t[2][0]+e[3]*t[3][0],
n[1]=e[0]*t[0][1]+e[1]*t[1][1]+e[2]*t[2][1]+e[3]*t[3][1],n[2]=e[0]*t[0][2]+e[1]*t[1][2]+e[2]*t[2][2]+e[3]*t[3][2],
n[3]=e[0]*t[0][3]+e[1]*t[1][3]+e[2]*t[2][3]+e[3]*t[3][3],n},g=function(e){return n(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);
},p=function(e,t){var n=g(e);if(0!=n){var i=t/n;e[0]*=i,e[1]*=i,e[2]*=i}},y=function(e,t){
return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},_=function(e,t,n,i,r){n[0]=i*e[0]+r*t[0],n[1]=i*e[1]+r*t[1],
n[2]=i*e[2]+r*t[2]},x=function(e,t,n){n[0]=e[1]*t[2]-e[2]*t[1],n[1]=e[2]*t[0]-e[0]*t[2],
n[2]=e[0]*t[1]-e[1]*t[0]},w=function(e,t,n,i){e[3][0]+=t*e[0][0]+n*e[1][0]+i*e[2][0],
e[3][1]+=t*e[0][1]+n*e[1][1]+i*e[2][1],e[3][2]+=t*e[0][2]+n*e[1][2]+i*e[2][2],e[3][3]+=t*e[0][3]+n*e[1][3]+i*e[2][3];
},S=function(e,t){var n=[[],[],[],[]];return n[0][0]=t[0][0]*e[0][0]+t[0][1]*e[1][0]+t[0][2]*e[2][0]+t[0][3]*e[3][0],
n[0][1]=t[0][0]*e[0][1]+t[0][1]*e[1][1]+t[0][2]*e[2][1]+t[0][3]*e[3][1],n[0][2]=t[0][0]*e[0][2]+t[0][1]*e[1][2]+t[0][2]*e[2][2]+t[0][3]*e[3][2],
n[0][3]=t[0][0]*e[0][3]+t[0][1]*e[1][3]+t[0][2]*e[2][3]+t[0][3]*e[3][3],n[1][0]=t[1][0]*e[0][0]+t[1][1]*e[1][0]+t[1][2]*e[2][0]+t[1][3]*e[3][0],
n[1][1]=t[1][0]*e[0][1]+t[1][1]*e[1][1]+t[1][2]*e[2][1]+t[1][3]*e[3][1],n[1][2]=t[1][0]*e[0][2]+t[1][1]*e[1][2]+t[1][2]*e[2][2]+t[1][3]*e[3][2],
n[1][3]=t[1][0]*e[0][3]+t[1][1]*e[1][3]+t[1][2]*e[2][3]+t[1][3]*e[3][3],n[2][0]=t[2][0]*e[0][0]+t[2][1]*e[1][0]+t[2][2]*e[2][0]+t[2][3]*e[3][0],
n[2][1]=t[2][0]*e[0][1]+t[2][1]*e[1][1]+t[2][2]*e[2][1]+t[2][3]*e[3][1],n[2][2]=t[2][0]*e[0][2]+t[2][1]*e[1][2]+t[2][2]*e[2][2]+t[2][3]*e[3][2],
n[2][3]=t[2][0]*e[0][3]+t[2][1]*e[1][3]+t[2][2]*e[2][3]+t[2][3]*e[3][3],n[3][0]=t[3][0]*e[0][0]+t[3][1]*e[1][0]+t[3][2]*e[2][0]+t[3][3]*e[3][0],
n[3][1]=t[3][0]*e[0][1]+t[3][1]*e[1][1]+t[3][2]*e[2][1]+t[3][3]*e[3][1],n[3][2]=t[3][0]*e[0][2]+t[3][1]*e[1][2]+t[3][2]*e[2][2]+t[3][3]*e[3][2],
n[3][3]=t[3][0]*e[0][3]+t[3][1]*e[1][3]+t[3][2]*e[2][3]+t[3][3]*e[3][3],n},C=function(e,t,n){
e[0][0]*=t,e[0][1]*=t,e[0][2]*=t,e[0][3]*=t,e[1][0]*=n,e[1][1]*=n,e[1][2]*=n,e[1][3]*=n;
},E=function(e,t,n,i){C(e,t,n),e[2][0]*=i,e[2][1]*=i,e[2][2]*=i,e[2][3]*=i};return{
get default(){return u}}}),System.registerModule("classes/dom-undo-manager",[],function(){
"use strict";var e=System.get("classes/event-emitter")["default"],t=System.get("utils/type").isBoolean,n={
childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0
},i=function(e){function i(e){var t;$traceurRuntime.superConstructor(i).call(this),
this._rootElement=e,this._groups=[],this._position=0,this._disabled=!1,this._observer=new MutationObserver((t=this,
function(e){var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;t._onDOMTransaction(o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}})),this._onDisabledChange()}return $traceurRuntime.createClass(i,{
get disabled(){return this._disabled},set disabled(e){t(e)&&e!==this._disabled&&(this._disabled=e,
this._onDisabledChange())},get undoLabel(){var e="Undo";if(this.canUndo()){var t;t=this._groups[this._position-1].transactions.length>0?this._groups[this._position-1]:this._groups[this._position-2],
e="Undo: "+t.label}return e},get redoLabel(){var e="Redo";if(this.canRedo()){var t=this._groups[this._position];
e="Redo: "+t.label}return e},clear:function(){this._groups=[],0!==this._position&&(this._position=0,
this.dispatchEvent(new CustomEvent("positionchange",{detail:"reset"})))},checkpoint:function(e){
this._observer.takeRecords(),this._position<this._groups.length&&(this._groups=this._groups.slice(0,this._position));
var t={label:e,transactions:[]};this._groups.push(t),this._position+=1,this.dispatchEvent(new CustomEvent("positionchange",{
detail:"increment"}))},undo:function(){if(this.canUndo()){this._discardCurrentGroupIfEmpty(),
this.disabled=!0,this._position-=1;var e=this._groups[this._position].transactions;
e=$traceurRuntime.spread(e).reverse();var t=new Set,n=new Set,i=new Set,r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
if("childList"===u.type){var c=document.createDocumentFragment(),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=u.addedNodes[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var b=f.value;u.target.removeChild(b),n.add(b),t["delete"](b)}}catch(g){h=!0,v=g}finally{
try{d||null==m["return"]||m["return"]()}finally{if(h)throw v}}var p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=u.removedNodes[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;c.append(S),t.add(S),n["delete"](S)}}catch(C){y=!0,_=C}finally{try{
p||null==w["return"]||w["return"]()}finally{if(y)throw _}}u.nextSibling?u.target.insertBefore(c,u.nextSibling):u.previousSibling?u.target.insertBefore(c,u.previousSibling.nextSibling):u.target.append(c);
}else"attributes"===u.type?(null===u.oldValue?"gradientUnits"===u.attributeName?u.target.setAttribute("gradientUnits","objectBoundingBox"):"patternUnits"===u.attributeName?u.target.setAttribute("patternUnits","objectBoundingBox"):"patternContentUnits"===u.attributeName?u.target.setAttribute("patternContentUnits","userSpaceOnUse"):u.target.removeAttribute(u.attributeName):u.target.setAttribute(u.attributeName,u.oldValue),
i.add(u.target)):"characterData"===u.type&&(u.target.data=u.oldValue,i.add(u.target));
}}catch(E){a=!0,s=E}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.disabled=!1,this.dispatchEvent(new CustomEvent("undo",{detail:{addedNodes:t,
removedNodes:n,modifiedNodes:i}})),this.dispatchEvent(new CustomEvent("positionchange",{
detail:"decrement"}))}else console.info("Can't undo")},redo:function(){if(this.canRedo()){
this.disabled=!0;var e=this._groups[this._position].transactions;this._position+=1;
var t=new Set,n=new Set,i=new Set,r=!0,a=!1,s=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if("childList"===u.type){var c=document.createDocumentFragment(),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=u.removedNodes[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var b=f.value;u.target.removeChild(b),n.add(b),t["delete"](b)}}catch(g){h=!0,v=g}finally{
try{d||null==m["return"]||m["return"]()}finally{if(h)throw v}}var p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=u.addedNodes[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;c.append(S),t.add(S),n["delete"](S)}}catch(C){y=!0,_=C}finally{try{
p||null==w["return"]||w["return"]()}finally{if(y)throw _}}u.nextSibling?u.target.insertBefore(c,u.nextSibling):u.previousSibling?u.target.insertBefore(c,u.previousSibling.nextSibling):u.target.append(c);
}else"attributes"===u.type?(null===u.newValue?u.target.removeAttribute(u.attributeName):u.target.setAttribute(u.attributeName,u.newValue),
i.add(u.target)):"characterData"===u.type&&(u.target.data=u.newValue,i.add(u.target));
}}catch(E){a=!0,s=E}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.disabled=!1,this.dispatchEvent(new CustomEvent("redo",{detail:{addedNodes:t,
removedNodes:n,modifiedNodes:i}})),this.dispatchEvent(new CustomEvent("positionchange",{
detail:"increment"}))}else console.info("Can't redo")},canUndo:function(){return 0===this._position||this.disabled?!1:1!==this._position||!this._isCurrentGroupEmpty();
},canRedo:function(){return this._position!==this._groups.length&&!this.disabled},
_onDisabledChange:function(){this.disabled===!0?(this._observer.takeRecords(),this._observer.disconnect()):this.disabled===!1&&this._observer.observe(this._rootElement,n);
},_onDOMTransaction:function(e){if(0!==this._groups.length){var t=this._groups[this._groups.length-1].transactions;
if("attributes"===e.type){var n=e.attributeName,i=t.find(function(t){return"attributes"===t.type&&t.attributeName===n&&t.target===e.target;
});i?i.newValue=i.target.getAttribute(n):(i={type:"attributes",target:e.target,attributeName:n,
oldValue:e.oldValue,newValue:e.target.getAttribute(n)},t.push(i))}else if("characterData"===e.type){
var r=t.find(function(t){return"characterData"===t.type&&t.target===e.target});if(r)r.newValue=r.target.data;else{
var a={type:"characterData",target:e.target,oldValue:e.oldValue,newValue:e.target.data
};t.push(a)}}else if("childList"===e.type){var s={type:"childList",target:e.target,
addedNodes:$traceurRuntime.spread(e.addedNodes),removedNodes:$traceurRuntime.spread(e.removedNodes),
nextSibling:e.nextSibling,previousSibling:e.previousSibling};t.push(s)}}},_isCurrentGroupEmpty:function(){
return 0===this._groups[this._position-1].transactions.length},_discardCurrentGroupIfEmpty:function(){
this._position>0&&0===this._groups[this._position-1].transactions.length&&(this._groups.remove(this._groups[this._position]),
this._position-=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"
})))}},{},e)}(e),r=i;return{get default(){return r}}}),System.registerModule("classes/enum",[],function(){
"use strict";var e=Object,t=e.defineProperty,n=e.freeze,i=function(){function e(){
for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=!0,a=!1,s=void 0;try{
for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=Symbol(u);
t(this,u,{enumerable:!0,configurable:!1,value:c}),t(this,c,{enumerable:!1,configurable:!1,
value:u})}}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]()}finally{
if(a)throw s}}n(this)}return $traceurRuntime.createClass(e,{},{})}(),r=i;return{get default(){
return r}}}),System.registerModule("classes/event-emitter",[],function(){"use strict";
var e=function(){function e(){}return $traceurRuntime.createClass(e,{addEventListener:function(e,t){
this._events||(this._events={});var n=this._events[e];n||(this._events[e]=n=[]),n.push(t),
n.length>300&&console.warn("Potential EventEmitter memory leak: "+n.length+" listeners "+('subscribed to event "'+e+'"'));
},removeEventListener:function(e,t){if(this._events&&this._events[e]){for(var n=[],i=0;i<this._events[e].length;i+=1)this._events[e][i]!==t&&n.push(this._events[e][i]);
this._events[e]=n}},dispatchEvent:function(e){if(this._events){var t=this._events[e.type];
if(t){for(var n=null,i=t.length-1;i>=0;i-=1){var r,a=t[i];try{r=a.call(window,e)}catch(s){
null===n&&(n=s)}if(r===!1)break}if(n)throw n}}}},{})}(),t=e;return{get default(){
return t}}}),System.registerModule("classes/google-fonts-manager",[],function(){"use strict";
var e=System.get("utils/constants"),t=e.GOOGLE_FONTS_API_KEY,n=e.TEXT_PROPERTIES,i=System.get("utils/element"),r=i.createElement,a=i.isConnectedElement,s=System.get("utils/json").fromJSON,o=System.get("utils/network").httpRequest,l=System.get("utils/path-general").deserializePathData,u=System.get("utils/time"),c=u.getTimeStamp,d=u.milisecondsToDays,h=u.sleepUntilIdle,v=System.get("utils/transform-reduction").reduceTransform,f=System.get("utils/font"),m=f.getOpenTypeFont,b=f.getOpenTypeGlyphPath,g=(f.matchFontWeight,
f.matchGoogleFontFace),p=f.normalizeFontWeight,y=f.parseGoogleFontsURL,_=f.normalizeGoogleFontFace,x=Number.parseFloat,w=Object,S=w.entries,C=w.keys,E=(w.freeze,
window.getComputedStyle),k="\n  Google Fonts Manager can't be created with root element that is disconnected from the document tree because it\n  relies on window.getComputeStyle() and SVGStyleElement.sheet.rules APIs.\n",A=function(){
function e(e){if(a(e)===!1)throw new Error(k);this._rootElement=e,this._registry=null,
this._renderingCanvas=null}return $traceurRuntime.createClass(e,{getAllFamilies:function(){
var e=void 0!==arguments[0]?arguments[0]:"alphabetical",t=this;return new Promise(function(n){
var i,r;return $traceurRuntime.asyncWrap(function(a){for(;;)switch(a.state){case 0:
return void Promise.resolve(t._getRegistry()).then(a.createCallback(3),a.errback);
case 3:i=a.value,a.state=2;break;case 2:i?"alphabetical"===e?(r=i.items.map(function(e){
return e.family}),n(r)):"popularity"!==e&&"trending"!==e&&"date"!==e||n(i.sortedFamilies[e]):n(null),
a.state=-2;break;default:return a.end()}},this)})},getImportedFamilies:function(){
var e,t,n=this._rootElement.querySelector("style#bx-google-fonts"),i=n?n.sheet.rules[0]:void 0,r=new Set;
if(i){var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=y(i.href)[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=(e=l.value[Symbol.iterator](),(t=e.next()).done?void 0:t.value);r.add(c)}}catch(d){
s=!0,o=d}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}}return $traceurRuntime.spread(r);
},getUsedImportedFamilies:function(){var e=new Set,t=this.getImportedFamilies(),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this._rootElement.querySelectorAll("tspan")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=E(o).fontFamily.replaceAll("'","").replaceAll('"',"");e.add(l)}}catch(u){
i=!0,r=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}return e=$traceurRuntime.spread(e).filter(function(e){
return t.includes(e)})},getImportedWeights:function(e){var t,n,i=this._rootElement.querySelector("style#bx-google-fonts"),r=i?i.sheet.rules[0]:void 0,a=new Set;
if(r){var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=y(r.href)[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=(t=d[Symbol.iterator](),(n=t.next()).done?void 0:n.value),v=(n=t.next()).done?void 0:n.value;
if(h===e){var f=!0,m=!1,b=void 0;try{for(var g=void 0,p=v[Symbol.iterator]();!(f=(g=p.next()).done);f=!0){
var _=g.value,x=_.endsWith("italic")?_.substring(0,3):_;a.add(x)}}catch(w){m=!0,b=w;
}finally{try{f||null==p["return"]||p["return"]()}finally{if(m)throw b}}}}}catch(S){
o=!0,l=S}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}return $traceurRuntime.spread(a);
},getThumbnail:function(e){var t=this;return new Promise(function(n){var i,r,a,s;return $traceurRuntime.asyncWrap(function(o){
for(;;)switch(o.state){case 0:return void Promise.resolve(t._dbGetThumbnailEntry(e)).then(o.createCallback(3),o.errback);
case 3:i=o.value,o.state=2;break;case 2:r=c(),o.state=19;break;case 19:o.state=i?11:12;
break;case 11:o.state=d(r-i.timeStamp)<90?9:4;break;case 9:n(i.thumbnail),o.state=-2;
break;case 4:return void Promise.resolve(t._createThumbnail(e)).then(o.createCallback(6),o.errback);
case 6:a=o.value,o.state=5;break;case 5:a?(t._dbSetThumbnailEntry(e,{thumbnail:a,
timeStamp:r}),n(a)):n(i.thumbnail),o.state=-2;break;case 12:return void Promise.resolve(t._createThumbnail(e)).then(o.createCallback(14),o.errback);
case 14:s=o.value,o.state=13;break;case 13:s?(t._dbSetThumbnailEntry(e,{thumbnail:s,
timeStamp:r}),n(s)):n(null),o.state=-2;break;default:return o.end()}},this)})},_createThumbnail:function(e){
var t=this;return new Promise(function(n){var i,a,s,o,l,u;return $traceurRuntime.asyncWrap(function(c){
for(;;)switch(c.state){case 0:return void Promise.resolve(t._getRegistry()).then(c.createCallback(3),c.errback);
case 3:i=c.value,c.state=2;break;case 2:c.state=i?15:17;break;case 15:a=i.items.find(function(t){
return t.family===e}),c.state=16;break;case 16:c.state=a?8:12;break;case 8:s=a.urls[400]||a.urls[C(a.urls)[0]],
o=new FontFace("BX "+e,"url("+s+")",{}),c.state=9;break;case 9:return void Promise.resolve(o.load()).then(c.createCallback(5),c.errback);
case 5:return void Promise.resolve(h(20)).then(c.createCallback(7),c.errback);case 7:
document.fonts.add(o),null===t._renderingCanvas&&(t._renderingCanvas=r("canvas"),
t._renderingCanvas.width=300,t._renderingCanvas.height=40),l=t._renderingCanvas.getContext("2d"),
l.clearRect(0,0,300,40),l.font='30px "BX '+e+'"',l.fillStyle="white",l.fillText(e,5,30),
document.fonts["delete"](o),u=t._renderingCanvas.toDataURL("image/png"),n(u),c.state=-2;
break;case 12:n(null),c.state=-2;break;case 17:n(null),c.state=-2;break;default:return c.end();
}},this)})},_getRegistry:function(){var e=this;return new Promise(function(t){var n,i,r,a;
return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){case 0:s.state=e._registry?20:1;
break;case 20:t(e._registry),s.state=-2;break;case 1:return void Promise.resolve(e._dbGetRegistry()).then(s.createCallback(3),s.errback);
case 3:n=s.value,s.state=2;break;case 2:i=c(),s.state=19;break;case 19:s.state=n?11:12;
break;case 11:s.state=d(i-n.timeStamp)<30?9:4;break;case 9:t(n),s.state=-2;break;case 4:
return void Promise.resolve(e._createRegistry()).then(s.createCallback(6),s.errback);
case 6:r=s.value,s.state=5;break;case 5:r?(e._dbSetRegistry(r),t(r)):t(n),s.state=-2;
break;case 12:return void Promise.resolve(e._createRegistry()).then(s.createCallback(14),s.errback);
case 14:a=s.value,s.state=13;break;case 13:a?(e._dbSetRegistry(a),t(a)):t(null),s.state=-2;
break;default:return s.end()}},this)})},_createRegistry:function(){return new Promise(function(e){
var n,i,r,a,l,u,d,h,v,f,m,b,g,p,y,x,w,C,E,k,A,T,L,M,P,R,j,O,V,D,G,I;return $traceurRuntime.asyncWrap(function(N){
for(;;)switch(N.state){case 0:r="https://www.googleapis.com/webfonts/v1/webfonts?key="+t,
N.state=28;break;case 28:return void Promise.resolve(o(r+"&sort=alpha")).then(N.createCallback(3),N.errback);
case 3:a=N.value,N.state=2;break;case 2:l=s(a),u={timeStamp:c(),items:[],sortedFamilies:{}
},d=!0,h=!1,v=void 0;try{for(f=void 0,m=l.items[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
b=f.value,g=[],p={},y=!0,x=!1,w=void 0;try{for(C=void 0,E=S(b.files)[Symbol.iterator]();!(y=(C=E.next()).done);y=!0)k=C.value,
n=k[Symbol.iterator](),A=(i=n.next()).done?void 0:i.value,T=(i=n.next()).done?void 0:i.value,
A=_(A),g.push(A),p[A]=T}catch(B){x=!0,w=B}finally{try{y||null==E["return"]||E["return"]();
}finally{if(x)throw w}}L={family:b.family,category:b.category,subsets:b.subsets,faces:g,
urls:p},u.items.push(L)}}catch(U){h=!0,v=U}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}M=!0,P=!1,R=void 0,N.state=30;break;case 30:N.pushTry(14,15),
N.state=17;break;case 17:j=void 0,O=["popularity","trending","date"][Symbol.iterator](),
N.state=13;break;case 13:N.state=(M=(j=O.next()).done)?11:9;break;case 8:M=!0,N.state=13;
break;case 9:V=j.value,N.state=10;break;case 10:return void Promise.resolve(o(r+"&sort="+V)).then(N.createCallback(6),N.errback);
case 6:D=N.value,N.state=5;break;case 5:G=s(D),u.sortedFamilies[V]=G.items.map(function(e){
return e.family}),N.state=8;break;case 11:N.popTry(),N.state=15,N.finallyFallThrough=19;
break;case 14:N.popTry(),N.maybeUncatchable(),I=N.storedException,N.state=20;break;
case 20:P=!0,R=I,N.state=15,N.finallyFallThrough=19;break;case 15:N.popTry(),N.state=26;
break;case 26:try{M||null==O["return"]||O["return"]()}finally{if(P)throw R}N.state=24;
break;case 19:e(u),N.state=-2;break;case 24:N.state=N.finallyFallThrough;break;default:
return N.end()}},this)})},importFamily:function(e){var t=this;return new Promise(function(n){
var i,a,s,o,l,u,c,d,h,v,f,m,b,g,p,_,x,w,S,C;return $traceurRuntime.asyncWrap(function(E){
for(;;)switch(E.state){case 0:return void Promise.resolve(t._getRegistry()).then(E.createCallback(3),E.errback);
case 3:s=E.value,E.state=2;break;case 2:E.state=s?12:14;break;case 12:o=s.items.find(function(t){
return t.family===e}),E.state=13;break;case 13:E.state=o?4:9;break;case 4:return void Promise.resolve(t._loadFamily(e)).then(E.createCallback(6),E.errback);
case 6:l=E.value,E.state=5;break;case 5:if(l){if(u=[],c=t._rootElement.querySelector("style#bx-google-fonts")){
if(d=c.sheet.rules[0]){h=!0,v=!1,f=void 0;try{for(m=void 0,b=y(d.href)[Symbol.iterator]();!(h=(m=b.next()).done);h=!0)g=m.value,
i=g[Symbol.iterator](),p=(a=i.next()).done?void 0:a.value,_=(a=i.next()).done?void 0:a.value,
p!==e&&u.push({family:p,faces:_})}catch(k){v=!0,f=k}finally{try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}}}}else x=r("svg:style"),x.id="bx-google-fonts",w=t._rootElement.querySelector("defs"),
w||(w=r("svg:defs"),t._rootElement.append(w)),w.append(x);u.push({family:o.family,
faces:o.faces}),u.sort(function(e,t){return e.family>t.family}),S=u.map(function(e){
var t=e,n=t.family,i=t.faces;return n.replaceAll(" ","+")+":"+i.join(",")}),C="@import url(https://fonts.googleapis.com/css?family="+S.join("|")+");",
c=t._rootElement.querySelector("style#bx-google-fonts"),c.textContent=C,n(!0)}else n(!1);
E.state=-2;break;case 9:n(!1),E.state=-2;break;case 14:n(!1),E.state=-2;break;default:
return E.end()}},this)})},deportFamily:function(e){var t,n,i=this._rootElement.querySelector("style#bx-google-fonts"),r=i?i.sheet.rules[0]:null;
if(r){var a=[],s=!0,o=!1,l=void 0;try{for(var u=void 0,c=y(r.href)[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=(t=d[Symbol.iterator](),(n=t.next()).done?void 0:n.value),v=(n=t.next()).done?void 0:n.value;
h!==e&&a.push([h,v])}}catch(f){o=!0,l=f}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}var m=a.map(function(e){var t,n,i=e,r=(t=i[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),a=(n=t.next()).done?void 0:n.value;return r.replaceAll(" ","+")+":"+a.join(",");
});if(m.length>0){var b="@import url(https://fonts.googleapis.com/css?family="+m.join("|")+");";
i.textContent=b}else i.remove()}},deportUnsusedFamilies:function(){var e=this.getImportedFamilies(),t=this.getUsedImportedFamilies(),n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
t.includes(l)===!1&&n.push(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=n[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.deportFamily(m)}}catch(b){d=!0,h=b}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}},loadImportedFamilies:function(){var e=this;return new Promise(function(t){
var n,i,r,a,s,o,l,u;return $traceurRuntime.asyncWrap(function(c){for(;;)switch(c.state){
case 0:n=e.getImportedFamilies(),i=!0,r=!1,a=void 0,c.state=22;break;case 22:c.pushTry(8,9),
c.state=11;break;case 11:s=void 0,o=e.getImportedFamilies()[Symbol.iterator](),c.state=7;
break;case 7:c.state=(i=(s=o.next()).done)?5:3;break;case 2:i=!0,c.state=7;break;case 3:
l=s.value,c.state=4;break;case 4:return void Promise.resolve(e._loadFamily(l)).then(c.createCallback(2),c.errback);
case 5:c.popTry(),c.state=9,c.finallyFallThrough=13;break;case 8:c.popTry(),c.maybeUncatchable(),
u=c.storedException,c.state=14;break;case 14:r=!0,a=u,c.state=9,c.finallyFallThrough=13;
break;case 9:c.popTry(),c.state=20;break;case 20:try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}c.state=18;break;case 13:t(),c.state=-2;break;case 18:c.state=c.finallyFallThrough;
break;default:return c.end()}},this)})},_loadFamily:function(e){var t=this;return new Promise(function(n){
var i,r,a;return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){case 0:
return void Promise.resolve(t._getRegistry()).then(s.createCallback(3),s.errback);
case 3:i=s.value,s.state=2;break;case 2:s.state=i?13:15;break;case 13:r=i.items.find(function(t){
return t.family===e}),s.state=14;break;case 14:s.state=r?6:10;break;case 6:a=r.faces.map(function(t){
return new Promise(function(n){var i,a,s,o;return $traceurRuntime.asyncWrap(function(l){
for(;;)switch(l.state){case 0:i=t.substring(0,3),a=t.includes("italic")?"italic":"normal",
s=r.urls[t],o=new FontFace(e,"url("+s+")",{style:a,weight:i}),l.state=4;break;case 4:
return void Promise.resolve(o.load()).then(l.createCallback(2),l.errback);case 2:
document.fonts.add(o),n(),l.state=-2;break;default:return l.end()}},this)})}),s.state=7;
break;case 7:return void Promise.resolve(Promise.all(a)).then(s.createCallback(5),s.errback);
case 5:n(!0),s.state=-2;break;case 10:n(!1),s.state=-2;break;case 15:n(!1),s.state=-2;
break;default:return s.end()}},this)})},replaceTextWithPaths:function(e){var t=this;
return new Promise(function(i){var a,s,o,l,u,c,d,h,f,m,b,g,y,_,w,S,C,k,A,T,L,M,P,R,j,O,V,D,G,I,N,B,U,z,H,F,q,Y,$,W,X,Z,K,J,Q,ee,te,ne,ie,re,ae;
return $traceurRuntime.asyncWrap(function(se){for(;;)switch(se.state){case 0:o=SVGMatrix.fromMatrix(e.transform.baseVal.consolidate().matrix),
l=document.createDocumentFragment(),u=e.firstElementChild&&"textPath"===e.firstElementChild.localName?$traceurRuntime.spread(e.firstElementChild.children):$traceurRuntime.spread(e.children),
c=!0,d=!1,h=void 0,se.state=34;break;case 34:se.pushTry(20,21),se.state=23;break;case 23:
f=void 0,m=u[Symbol.iterator](),se.state=19;break;case 19:se.state=(c=(f=m.next()).done)?17:15;
break;case 9:c=!0,se.state=19;break;case 15:b=f.value,se.state=16;break;case 16:g=b.textContent.split(""),
y=E(b),_=y.fontFamily.replaceAll("'","").replaceAll('"',""),w=x(y.fontSize),S=p(y.fontWeight),
C=y.fontStyle,k=y.textDecoration,se.state=12;break;case 12:return void Promise.resolve(t._getGlyphs(g,_,w,S,C,k)).then(se.createCallback(3),se.errback);
case 3:A=se.value,se.state=2;break;case 2:T=[],se.state=14;break;case 14:se.state=A?8:6;
break;case 8:for(L=0;L<A.length;L+=1)M=A[L],M.length>0&&(P=b.getStartPositionOfChar(L),
R=b.getRotationOfChar(L),j=new SVGMatrix,j.translateSelf(P.x,P.y),j.rotateSelf(R),
O=r("svg:path"),O.setPathData(M),O.setAttribute("transform",j.toString()),v(O),T.push(O));
if(T.length>0){V=T,a=V[Symbol.iterator](),D=(s=a.next()).done?void 0:s.value,G=$traceurRuntime.iteratorToArray(a),
I=D.getAttribute("d"),N=!0,B=!1,U=void 0;try{for(z=void 0,H=G[Symbol.iterator]();!(N=(z=H.next()).done);N=!0)F=z.value,
I+=F.getAttribute("d")}catch(oe){B=!0,U=oe}finally{try{N||null==H["return"]||H["return"]();
}finally{if(B)throw U}}q=r("svg:path"),q.setAttribute("d",I),q.setAttribute("transform",o.toString()),
Y=!0,$=!1,W=void 0;try{for(X=void 0,Z=e.style[Symbol.iterator]();!(Y=(X=Z.next()).done);Y=!0)K=X.value,
n.includes(K)===!1&&q.style.setProperty(K,e.style.getPropertyValue(K))}catch(le){
$=!0,W=le}finally{try{Y||null==Z["return"]||Z["return"]()}finally{if($)throw W}}J=!0,
Q=!1,ee=void 0;try{for(te=void 0,ne=b.style[Symbol.iterator]();!(J=(te=ne.next()).done);J=!0)ie=te.value,
n.includes(ie)===!1&&q.style.setProperty(ie,b.style.getPropertyValue(ie))}catch(ue){
Q=!0,ee=ue}finally{try{J||null==ne["return"]||ne["return"]()}finally{if(Q)throw ee;
}}l.append(q)}se.state=9;break;case 6:l=null,se.state=17;break;case 17:se.popTry(),
se.state=21,se.finallyFallThrough=25;break;case 20:se.popTry(),se.maybeUncatchable(),
ae=se.storedException,se.state=26;break;case 26:d=!0,h=ae,se.state=21,se.finallyFallThrough=25;
break;case 21:se.popTry(),se.state=32;break;case 32:try{c||null==m["return"]||m["return"]();
}finally{if(d)throw h}se.state=30;break;case 25:l?(re=$traceurRuntime.spread(l.children),
e.replace(l),i(re)):i(null),se.state=-2;break;case 30:se.state=se.finallyFallThrough;
break;default:return se.end()}},this)})},canReplaceTextWithPaths:function(e){var t=this;
return new Promise(function(n){var i,r,a,s,o,l,u,c,d,h;return $traceurRuntime.asyncWrap(function(v){
for(;;)switch(v.state){case 0:return void Promise.resolve(t._getRegistry()).then(v.createCallback(3),v.errback);
case 3:i=v.value,v.state=2;break;case 2:v.state=i?31:35;break;case 31:r=!0,a=!0,s=!1,
o=void 0,v.state=32;break;case 32:v.pushTry(18,19),v.state=21;break;case 21:l=function(){
var e=c.value,t=E(e).fontFamily.replaceAll("'","").replaceAll('"',""),n=i.items.find(function(e){
return e.family===t});return n?void 0:(r=!1,0)},v.state=17;break;case 17:c=void 0,
d=e.children[Symbol.iterator](),v.state=15;break;case 15:v.state=(a=(c=d.next()).done)?6:11;
break;case 5:a=!0,v.state=15;break;case 11:u=l(),v.state=12;break;case 12:switch(u){
default:v.state=5;break;case 0:v.state=6}break;case 6:v.popTry(),v.state=19,v.finallyFallThrough=23;
break;case 18:v.popTry(),v.maybeUncatchable(),h=v.storedException,v.state=24;break;
case 24:s=!0,o=h,v.state=19,v.finallyFallThrough=23;break;case 19:v.popTry(),v.state=30;
break;case 30:try{a||null==d["return"]||d["return"]()}finally{if(s)throw o}v.state=28;
break;case 23:n(r),v.state=-2;break;case 35:n(!1),v.state=-2;break;case 28:v.state=v.finallyFallThrough;
break;default:return v.end()}},this)})},_getGlyphs:function(e,t,n,i,r,a){var s=this;
return new Promise(function(o){var u,c,d,h,v,f,p,y,_,x,w,S,C,E,k,A;return $traceurRuntime.asyncWrap(function(T){
for(;;)switch(T.state){case 0:return void Promise.resolve(s._getRegistry()).then(T.createCallback(3),T.errback);
case 3:u=T.value,T.state=2;break;case 2:T.state=u?14:16;break;case 14:c=u.items.find(function(e){
return e.family===t}),T.state=15;break;case 15:T.state=c?7:11;break;case 7:d=g(c.faces,i,r),
T.state=8;break;case 8:return void Promise.resolve(m(c.urls[d])).then(T.createCallback(6),T.errback);
case 6:h=T.value,T.state=5;break;case 5:if(null===h)o(null);else{v=[],f=("italic"===r||"oblique"===r)&&!d.includes("italic"),
p=!0,y=!1,_=void 0;try{for(x=void 0,w=e[Symbol.iterator]();!(p=(x=w.next()).done);p=!0)S=x.value,
C=h.charToGlyph(S),E=b(C,h,n,a,f),k=E.toPathData(),A=l(k),v.push(A)}catch(L){y=!0,
_=L}finally{try{p||null==w["return"]||w["return"]()}finally{if(y)throw _}}o(v)}T.state=-2;
break;case 11:o(null),T.state=-2;break;case 16:o(null),T.state=-2;break;default:return T.end();
}},this)})},_dbOpen:function(){return new Promise(function(e,t){var n=indexedDB.open("google-fonts-manager",1);
n.addEventListener("upgradeneeded",function(e){var t=e.target.result;e.oldVersion<1&&(t.createObjectStore("registry",{
autoIncrement:!0}),t.createObjectStore("thumbnails",{autoIncrement:!0}))}),n.addEventListener("success",function(t){
return e(t.target.result)}),n.addEventListener("error",function(e){return t("Failed to open IndexedDB database");
})})},_dbPromiseOpen:function(){var e=this;return new Promise(function(t){e._database?t():e._dbOpen().then(function(n){
e._database=n,t()})})},_dbGetRegistry:function(){var e=this;return new Promise(function(t,n){
var i,r;return $traceurRuntime.asyncWrap(function(a){for(;;)switch(a.state){case 0:
return void Promise.resolve(e._dbPromiseOpen()).then(a.createCallback(2),a.errback);
case 2:i=e._database.transaction(["registry"],"readonly").objectStore("registry"),
r=i.get("registry"),r.onsuccess=function(e){return t(e.target.result)},r.onerror=function(e){
return n("Failed to get registry from IndexedDB")},a.state=-2;break;default:return a.end();
}},this)})},_dbSetRegistry:function(e){var t=this;return new Promise(function(n,i){
var r,a;return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){case 0:
return void Promise.resolve(t._dbPromiseOpen()).then(s.createCallback(2),s.errback);
case 2:r=t._database.transaction(["registry"],"readwrite").objectStore("registry"),
a=r.put(e,"registry"),a.addEventListener("success",function(e){return n()}),a.addEventListener("error",function(e){
return i("Failed to store registry in IndexedDB database")}),s.state=-2;break;default:
return s.end()}},this)})},_dbGetThumbnailEntry:function(e){var t=this;return new Promise(function(n,i){
var r,a,s;return $traceurRuntime.asyncWrap(function(o){for(;;)switch(o.state){case 0:
return void Promise.resolve(t._dbPromiseOpen()).then(o.createCallback(2),o.errback);
case 2:r=t._database.transaction(["thumbnails"],"readonly"),a=r.objectStore("thumbnails"),
s=a.get(e),s.addEventListener("success",function(e){return n(e.target.result)}),s.addEventListener("error",function(e){
return i("Failed to get thumbnail")}),o.state=-2;break;default:return o.end()}},this);
})},_dbSetThumbnailEntry:function(e,t){var n=this;return new Promise(function(i,r){
var a,s,o;return $traceurRuntime.asyncWrap(function(l){for(;;)switch(l.state){case 0:
return void Promise.resolve(n._dbPromiseOpen()).then(l.createCallback(2),l.errback);
case 2:a=n._database.transaction(["thumbnails"],"readwrite"),s=a.objectStore("thumbnails"),
o=s.put(t,e),o.addEventListener("success",function(e){return i()}),o.addEventListener("error",function(e){
return r("Failed to store thumbnail in IndexedDB database")}),l.state=-2;break;default:
return l.end()}},this)})}},{})}(),T=A;return{get default(){return T}}}),System.registerModule("classes/shortcut",[],function(){
"use strict";var e=["iPhone","iPad"].includes(navigator.platform)||navigator.platform.startsWith("Mac"),t=function(){
function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.ctrl=!1,
this.alt=!1,this.meta=!1,this.shift=!1,this.base=null;var n=!0,i=!1,r=void 0;try{
for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"Control"===o?this.ctrl=!0:"Alt"===o?this.alt=!0:"Meta"===o?this.meta=!0:"Shift"===o?this.shift=!0:this.base=o;
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}}return $traceurRuntime.createClass(t,{matches:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];
var n=!1,i=!1,r=!1,a=!1,s=null,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;"Control"===h?n=!0:"Alt"===h?i=!0:"Meta"===h?r=!0:"Shift"===h?a=!0:s=h;
}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u;
}}return n===this.ctrl&&i===this.alt&&r===this.meta&&a===this.shift&&s===this.base;
},includes:function(e){return"Control"===e?this.ctrl:"Alt"===e?this.alt:"Meta"===e?this.meta:"Shift"===e?this.shift:this.base===e;
},compare:function(e){return this.ctrl===e.ctrl&&this.alt===e.alt&&this.meta===e.meta&&this.shift===e.shift&&this.base===e.base;
},isVoid:function(){return this.ctrl===!1&&this.alt===!1&&this.meta===!1&&this.shift===!1&&null===this.base;
},toDisplayString:function(){var t="";if(e){this.meta&&(t+="^"),this.alt&&(t+="⌥"),
this.shift&&(t+="⇧"),this.ctrl&&(t+="⌘");var n={ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",
ArrowRight:"→",Backspace:"⌦"};null!==this.base&&(t+=n[this.base]||this.base)}else{
var i=[];this.ctrl&&i.push("Ctrl"),this.alt&&i.push("Alt"),this.meta&&i.push("Meta"),
this.shift&&i.push("Shift");var r={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",
ArrowRight:"Right"};null!==this.base&&i.push(r[this.base]||this.base),t=i.join("+");
}return t},toAccelerator:function(){var e=[];return this.ctrl&&e.push("CmdOrCtrl"),
this.alt&&e.push("Alt"),this.shift&&e.push("Shift"),this.meta,null!==this.base&&("ArrowUp"===this.base?e.push("Up"):"ArrowDown"===this.base?e.push("Down"):"ArrowLeft"===this.base?e.push("Left"):"ArrowRight"===this.base?e.push("Right"):e.push(this.base)),
e.join("+")},toJSON:function(){return this.toString()},toString:function(){var e=[];
return this.ctrl&&e.push("Control"),this.alt&&e.push("Alt"),this.meta&&e.push("Meta"),
this.shift&&e.push("Shift"),null!==this.base&&e.push(this.base),e.join("+")}},{fromEvent:function(n){
var i=new t;i.ctrl=e?n.metaKey:n.ctrlKey,i.alt=n.altKey,i.meta=e?n.ctrlKey:n.metaKey,
i.shift=n.shiftKey;var r=null,a=n.keyIdentifier,s={"U+00C0":"U+0060","U+00BD":"U+002D",
"U+00BB":"U+003D","U+00DB":"U+005B","U+00DD":"U+005D","U+00DC":"U+005C","U+00BA":"U+003B",
"U+00DE":"U+0027","U+00BC":"U+002C","U+00BE":"U+002E","U+00BF":"U+002F",Win:"Meta",
Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};for(var o in s)if(a===o){
var l=s[o];a=l}if("U"===a[0]&&"+"===a[1]){var u=parseInt(a.substring(2),16);27===u?r="Escape":8===u?r="Backspace":(r=String.fromCharCode(u),
"	"===r?r="Tab":" "===r?r="Space":n.shiftKey===!1&&(r=r.toLowerCase()))}else r=a;return r&&"Control"!==r&&"Alt"!==r&&"Shift"!==r&&"Meta"!==r?1===r.length?i.base=r.toUpperCase():i.base=r:i.base=null,
i},fromAccelerator:function(e){var n=e.split("+"),i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;"CmdOrCtrl"===u||"CommandOrControl"===u?i.push("Control"):"Up"===u?i.push("ArrowUp"):"Down"===u?i.push("ArrowDown"):"Left"===u?i.push("ArrowLeft"):"Right"===u?i.push("ArrowRight"):""!==u&&i.push(u);
}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}var d=new(Function.prototype.bind.apply(t,$traceurRuntime.spread([null],i)));return d;
},fromString:function(e){return new(Function.prototype.bind.apply(t,$traceurRuntime.spread([null],e.split("+").filter(function(e){
return""!==e}))))}})}(),n=t;return{get default(){return n}}}),System.registerModule("classes/string-scanner",[],function(){
"use strict";var e=function(){function e(e){this.text=e,this.counter=0,this.storedPosition=0;
}return $traceurRuntime.createClass(e,{read:function(){for(var e=void 0!==arguments[0]?arguments[0]:1,t="",n=this.counter,i=0;e>i;i+=1){
var r=this.text[n+i];if(void 0===r)break;t+=r,this.counter+=1}return""===t?null:t;
},peek:function(){for(var e=void 0!==arguments[0]?arguments[0]:1,t="",n=0;e>n;n+=1){
var i=this.text[this.counter+n];if(void 0===i)break;t+=i}return""===t?null:t},storePosition:function(){
this.storedPosition=this.counter},restorePosition:function(){this.counter=this.storedPosition;
}},{})}(),t=e;return{get default(){return t}}}),System.registerModule("classes/undo-manager",[],function(){
"use strict";var e={label:"Sample label",icon:"stub",undo:function(){},redo:function(){}
},t=function(){function t(){this._entries=[],this._position=0}return $traceurRuntime.createClass(t,{
get undoLabel(){if(this.canUndo()){var e=this._entries[this._position-1];if(e[0]&&e[0].label)return"Undo: "+e[0].label;
}return"Undo"},get redoLabel(){if(this.canRedo()){var e=this._entries[this._position];
if(e[0]&&e[0].label)return"Redo: "+e[0].label}return"Redo"},register:function(t){
t.__proto__=e,this._position<this._entries.length&&(this._entries=this._entries.slice(0,this._position));
var n=[];this._entries.push(n),this._position+=1,n.push(t)},undo:function(){if(this.canUndo()){
var e=this._entries[this._position-1],t=$traceurRuntime.spread(e).reverse(),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
o.undo()}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}this._position-=1}},redo:function(){if(this.canRedo()){var e=this._entries[this._position],t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;
s.redo()}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]()}finally{
if(n)throw i}}this._position+=1}},reset:function(){this._entries=[],this._position=0;
},canUndo:function(){return 0!==this._position},canRedo:function(){return this._position!==this._entries.length;
}},{})}(),n=t;return{get default(){return n}}}),System.registerModule("classes/vector",[],function(){
"use strict";var e=System.get("utils/type").isNumber,t=Math.sqrt,n="Invalid argument passed to Vector contstructor",i=function(){
function i(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(0===t.length)this.x=0,
this.y=0;else if(1===t.length){if(!e(t[0].x)||!e(t[0].y))throw new Error(n);this.x=t[0].x,
this.y=t[0].y}else{if(2!==t.length)throw new Error(n);if(e(t[0])&&e(t[1]))this.x=t[0],
this.y=t[1];else{if(!(t[0]instanceof SVGPoint&&t[1]instanceof SVGPoint))throw new Error(n);
var r=t[0],a=t[1];this.x=a.x-r.x,this.y=a.y-r.y}}}return $traceurRuntime.createClass(i,{
get length(){return t(this.x*this.x+this.y*this.y)},set length(e){0!==this.length&&(e/=this.length,
this.x=this.x*e,this.y=this.y*e)},getNormalVector:function(){return new i(-this.y,this.x);
},getOppositeVector:function(){return new i(-this.x,-this.y)},negate:function(){var e=this.multiply(-1);
return e},multiply:function(e){return new i(this.x*e,this.y*e)},multiplySelf:function(e){
return this.x=this.x*e,this.y=this.y*e,this},divide:function(e){return new i(this.x/e,this.y/e);
},divideSelf:function(e){return this.x=this.x/e,this.y=this.y/e,this},normalize:function(){
return 0===this.length?new i(this):new i(this.x/this.length,this.y/this.length)},
scale:function(e){return 0===this.length?new i(this):(e/=this.length,new i(this.x*e,this.y*e));
},transformPoint:function(e){return new SVGPoint(e.x+this.x,e.y+this.y)},toString:function(){
return"("+this.x+", "+this.y+")"}},{})}(),r=i;return{get default(){return r}}}),System.registerModule("elements/bx-aboutbody",[],function(){
"use strict";var e=System.get("elements/bx-body")["default"],t=System.get("utils/element").registerElement,n='\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-aboutbody.css");</style>\n\n  <main>\n    <div id="titlebar" hidden></div>\n    <img id="logo" src="images/logo.svg"></img>\n\n    <div id="headings">\n      <h1 id="app-name">Boxy SVG</h1>\n      <h2 id="version"></h2>\n    </div>\n\n    <div id="scroll">\n      <h3>Libraries</h3>\n      <ul id="libraries">\n        <li><a href="http://electron.atom.io/">Electron</a></li>\n        <li><a href="https://nodejs.org/">Node.js</a></li>\n        <li><a href="http://opentype.js.org/">Opentype.js</a></li>\n        <li><a href="ttp://nodeca.github.io/pako/">Pako</a></li>\n        <li><a href="http://paperjs.org/">Paper.js</a></li>\n        <li><a href="https://github.com/google/traceur-compiler">Traceur</a></li>\n      </ul>\n\n      <h3>Snippets</h3>\n      <dl>\n        <dt><a href="https://github.com/DmitryBaranovskiy">Dmitry Baranovskiy</a></dt>\n        <dd><a href="http://raphaeljs.com/">Arc to cubic curve conversion</a></dd>\n\n        <dt><a href="http://bost.ocks.org/mike/">Mike Bostock</a></dt>\n        <dd><a href="https://gist.github.com/mbostock/8027637">Closest point on path</a></dd>\n\n        <dt><a href="http://xn--dahlstrm-t4a.net/">Erik Dahlström</a></dt>\n        <dd><a href="http://xn--dahlstrm-t4a.net/svg/path/donut-shop.html">Ring shape</a></dd>\n\n        <dt><a href="http://ariya.blogspot.com/">Ariya Hidayat</a></dt>\n        <dd>HSV↔HSL conversion</dd>\n\n        <dt><a href="http://mjijackson.com/">Michael Jackson</a></dt>\n        <dd><a href="https://goo.gl/H72pO3">HSV↔RGB↔HSL conversion</a></dd>\n\n        <dt><a href="http://tmotooka.hatenablog.jp/">Tadahisa Motooka</a></dt>\n        <dd><a href="https://github.com/motooka/SVGPathNormalizer">Path normalization</a></dd>\n\n        <dt><a href="https://github.com/kennethormandy">Kenneth Ormandy</a></dt>\n        <dd><a href="https://github.com/kennethormandy/normalize-opentype.css">OpenType normalization</a></dd>\n\n        <dt><a href="https://github.com/progers">Philip Rogers</a></dt>\n        <dd><a href="https://github.com/progers/pathseg">Path parser</a></dd>\n\n        <dt><a href="http://svg-whiz.com/">Doug Schepers</a></dt>\n        <dd><a href="http://svg-whiz.com/experiments.html">Star and n-gon primitives</a></dd>\n\n        <dt>Philip J. Schneider</dt>\n        <dd>Bezier curve fitting</dd>\n\n        <dt><a href="https://github.com/johan">Johan Sundström</a></dt>\n        <dd>Path normalization</dd>\n      </dl>\n    </div>\n\n    <h2 id="copyright">© '+(new Date).getFullYear()+' <a href="http://foksa.name/">Jarosław Foksa</a></h2>\n  </main>\n',i=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;$traceurRuntime.superGet(this,t.prototype,"createdCallback").call(this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=n;
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this.bridge.postMessage("getAppVersion",null,function(t){return e["#version"].textContent="Version "+t;
}),this.bridge.postMessage("getAppName",null,function(t){return e["#app-name"].textContent=t;
}),this.bridge.postMessage("getBackendName",null,function(t){return e["#titlebar"].hidden="electron"!==t;
}),this._shadowRoot.addEventListener("click",function(t){return e._onShadowRootClick(t);
})},_onShadowRootClick:function(e){"a"===e.target.localName&&e.target.href&&(e.preventDefault(),
this.bridge.postMessage("openExternalURL",e.target.href))}},{},e)}(e),r=t("body","bx-aboutbody",i);
return{get default(){return r}}}),System.registerModule("elements/bx-alignmentselect",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t='\n  <style>\n    @import url("stylesheets/bx-alignmentselect.css");\n  </style>\n\n  <main>\n    <svg viewBox="10 10 280 280">\n      <rect id="outline" x="50" y="50" width="200" height="200"></rect>\n\n      <g id="buttons">\n        <g class="button" data-value="xMinYMin" transform="translate(0, 0)">\n          <title>Blah</title>\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMidYMin" transform="translate(100, 0)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMaxYMin" transform="translate(200, 0)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMinYMid" transform="translate(0, 100)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMidYMid" transform="translate(100, 100)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMaxYMid" transform="translate(200, 100)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMinYMax" transform="translate(0, 200)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMidYMax" transform="translate(100, 200)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n\n        <g class="button" data-value="xMaxYMax" transform="translate(200, 200)">\n          <rect class="outer-rect" x="0" y="0" width="100" height="100"></rect>\n          <rect class="inner-rect" x="0" y="0" width="100" height="100"></rect>\n        </g>\n      </g>\n    </svg>\n  </main>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=t;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#buttons"].addEventListener("click",function(t){
return e._onButtonsClick(t)})},attributeChangedCallback:function(e){"value"===e&&this._onValueAttributeChange();
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},get value(){return this.getAttribute("value")},set value(e){null===e?this.removeAttribute("value"):this.setAttribute("value",e);
},_onValueAttributeChange:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#buttons"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.getAttribute("data-value")===this.value?a.setAttribute("pressed",""):a.removeAttribute("pressed");
}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_onButtonsClick:function(e){var t=e.target.closest(".button");this.value=t.getAttribute("data-value"),
this.dispatchEvent(new CustomEvent("change"))}},{},e)}(HTMLElement),i=e("bx-alignmentselect",n);
return{get default(){return i}}}),System.registerModule("elements/bx-alphaslider",[],function(){
"use strict";var e=System.get("utils/color").parseColor,t=System.get("utils/element").registerElement,n=System.get("utils/math").normalize,i=Number.parseFloat,r=!1,a='\n  <style>@import url("stylesheets/bx-alphaslider.css");</style>\n\n  <main>\n    <canvas id="canvas"></canvas>\n    <div id="marker"></div>\n  </main>\n',s=function(t){
function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)}return $traceurRuntime.createClass(s,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=a;var t=!0,n=!1,i=void 0;try{for(var r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){
var o=r.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#canvas"].addEventListener("mousedown",function(t){
return e._onMouseDown(t)})},attributeChangedCallback:function(e){"alpha"===e?this._onAlphaAttributeChange():"color"===e&&this._onColorAttributeChange();
},get alpha(){return this.hasAttribute("alpha")?i(this.getAttribute("alpha")):1},
set alpha(e){this.setAttribute("alpha",e)},get color(){return this.hasAttribute("color")?this.getAttribute("color"):"#ffffff";
},set color(e){this.setAttribute("color",e)},get disabled(){return this.hasAttribute("disabled");
},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onAlphaAttributeChange:function(){var e=n(this.alpha,0,1,2);this["#marker"].style.left=100*e+"%";
},_onColorAttributeChange:function(){var t=this["#canvas"].width=800,n=this["#canvas"].height=100,i=this["#canvas"].getContext("2d");
if(i.clearRect(0,0,t,n),null!==this.color){var r=e(this.color),a=r.clone();a.a=0;var s=r.clone();
s.a=1;var o=i.createLinearGradient(0,0,t,0);o.addColorStop(0,a.toString()),o.addColorStop(1,s.toString()),
i.fillStyle=o,i.fillRect(0,0,t,n)}},_onMouseDown:function(e){var t=this;this.dispatchEvent(new CustomEvent("markerdragstart"));
var n,i,r,a=this["#canvas"].getBoundingClientRect().left;this._onMarkerDrag(e.clientX-a),
window.addEventListener("mousemove",n=function(e){e.clientX!==r&&(r=e.clientX,t._onMarkerDrag(e.clientX-a));
}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),t.dispatchEvent(new CustomEvent("markerdragend"));
})},_onMarkerDrag:function(t){var i=n(t/this["#canvas"].clientWidth,0,1,2);if(this.alpha!==i&&(this.alpha=i,
this.dispatchEvent(new CustomEvent("markerdrag",{detail:this.alpha})),r)){var a=e(this.color);
a.a=i,console.log("%c     ","background: "+a,"alpha = "+i)}}},{},t)}(HTMLElement),o=t("bx-alphaslider",s);
return{get default(){return o}}}),System.registerModule("elements/bx-arrangementcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select");var e=System.get("utils/bbox").getClientBBox,t=System.get("utils/rect").getBiggestRect,n=System.get("utils/element").registerElement,i=System.get("utils/rect"),r=i.combineRects,a=i.transformRect,s=System.get("utils/time").throttle,o='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-arrangementcontrols.css");\n  </style>\n\n  <section id="align">\n    <h2 id="align-section-header">Align</h2>\n\n    <bx-select id="align-to-select" value="first-selected">\n      <bx-selectitem value="first-selected" label="To first selected"></bx-selectitem>\n      <bx-selectitem value="last-selected" label="To last selected"></bx-selectitem>\n      <bx-selectitem value="biggest-selected" label="To biggest selected"></bx-selectitem>\n      <bx-selectitem value="view-box" label="To view box"></bx-selectitem>\n    </bx-select>\n\n    <bx-checkbox\n      id="align-individually-checkbox"\n      label="Align each element individually">\n    </bx-checkbox>\n\n    <div id="align-buttons">\n      <div id="align-inside-buttons">\n        <div class="column">\n          <bx-button\n            id="move-left-button"\n            tooltip="Align Left"\n            icon="move-left"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n        </div>\n\n        <div class="column">\n          <bx-button\n            id="move-top-button"\n            tooltip="Align Top"\n            icon="move-top"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n\n          <bx-button\n            id="move-bottom-button"\n            tooltip="Align Bottom"\n            icon="move-bottom"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n        </div>\n\n        <div class="column">\n          <bx-button\n            id="move-right-button"\n            tooltip="Align Right"\n            icon="move-right"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n        </div>\n      </div>\n\n      <div id="center-buttons">\n        <bx-button\n          id="center-horizontally-button"\n          tooltip="Center Horizontally"\n          icon="center-horizontally"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="center-vertically-button"\n          tooltip="Center Vertically"\n          icon="center-vertically"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n\n      <div id="stretch-buttons">\n        <bx-button\n          id="stretch-horizontally-button"\n          tooltip="Stretch horizontally (align left and right)"\n          icon="stretch-horizontally"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="stretch-vertically-button"\n          tooltip="Stretch vertically (align left and right)"\n          icon="stretch-vertically"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </div>\n  </section>\n\n  <section id="transform-section">\n    <h2 id="transform-section-header">Transform</h2>\n\n    <div id="transform-section-buttons" class="buttons-row">\n      <bx-button\n        id="rotate-counterclockwise-button"\n        icon="rotate-counterclockwise"\n        iconsize="30"\n        title="Rotate element(s) counter-clockwise by 90°"\n        skin="iconic"\n        label="Rotate by -90°">\n      </bx-button>\n\n      <bx-button\n        id="rotate-clockwise-button"\n        icon="rotate-clockwise"\n        iconsize="30"\n        title="Rotate element(s) clockwise by 90°"\n        skin="iconic"\n        label="Rotate by +90°">\n      </bx-button>\n\n      <bx-button\n        id="flip-x-button"\n        icon="flip-x"\n        iconsize="30"\n        title="Flip X"\n        skin="iconic"\n        label="Flip X">\n      </bx-button>\n\n      <bx-button\n        id="flip-y-button"\n        icon="flip-y"\n        iconsize="30"\n        title="Flip Y"\n        skin="iconic"\n        label="Flip Y">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="order-section">\n    <h2 id="order-section-header">Z-order</h2>\n\n    <div id="order-section-buttons" class="buttons-row">\n      <bx-button\n        id="raise-button"\n        icon="raise"\n        iconsize="30"\n        title="Raise Selection"\n        skin="iconic"\n        label="Raise">\n      </bx-button>\n\n      <bx-button\n        id="lower-button"\n        icon="lower"\n        iconsize="30"\n        title="Lower Selection"\n        skin="iconic"\n        label="Lower">\n      </bx-button>\n\n      <bx-button\n        id="raise-to-front-button"\n        icon="raise-to-front"\n        iconsize="30"\n        title="Raise Selection to Front"\n        skin="iconic"\n        label="Raise to Front">\n      </bx-button>\n\n      <bx-button\n        id="lower-to-back-button"\n        icon="lower-to-bottom"\n        iconsize="30"\n        title="Lower Selection to Bottom"\n        skin="iconic"\n        label="Lower to Bottom">\n      </bx-button>\n    </div>\n  </section>\n',l=function(n){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var e=this;this._updateWidgets250Th=s(this._updateWidgets,250,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=o;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var l=r.value;this["#"+l.id]=l}}catch(u){n=!0,i=u}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#align-buttons"].addEventListener("click",function(t){
return e._onAlignButtonsClick(t)}),this["#align-to-select"].addEventListener("change",function(){
return e._onAlignToSelectChange()}),this["#align-individually-checkbox"].addEventListener("change",function(){
return e._onAlignIndividuallyCheckboxChange()}),this["#lower-button"].addEventListener("click",function(t){
return e._onLowerButtonClick(t)}),this["#raise-button"].addEventListener("click",function(t){
return e._onRaiseButtonClick(t)}),this["#lower-to-back-button"].addEventListener("click",function(t){
return e._onLowerToBackButtonClick(t)}),this["#raise-to-front-button"].addEventListener("click",function(t){
return e._onRaiseToFrontButtonClick(t)}),this["#rotate-counterclockwise-button"].addEventListener("click",function(){
return e._onRotateByMinus90DegButtonClick()}),this["#rotate-clockwise-button"].addEventListener("click",function(){
return e._onRotateByPlus90DegButtonClick()}),this["#flip-x-button"].addEventListener("click",function(t){
return e._onFlipXButtonClick(t)}),this["#flip-y-button"].addEventListener("click",function(t){
return e._onFlipYButtonClick(t)}),body.getConfig("bx-arrangementcontrols:relativeTo").then(function(t){
null!==t&&(e["#align-to-select"].value=t)}),body.getConfig("bx-arrangmentControls:alignIndividually").then(function(t){
t!==!0&&t!==!1||(e["#align-individually-checkbox"].checked=t)})},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._updateWidgets(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._updateWidgets250Th()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){
e._updateWidgets250Th()})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onAlignToSelectChange:function(){this._updateAlignSection(),body.setConfig("bx-arrangementcontrols:relativeTo",this["#align-to-select"].value);
},_onAlignIndividuallyCheckboxChange:function(){body.setConfig("bx-arrangmentControls:alignIndividually",this["#align-individually-checkbox"].checked);
},_onAlignButtonsClick:function(e){"bx-button"===e.target.localName&&this._onAlignButtonClick(e.target);
},_onAlignButtonClick:function(n){body.canvas.undoManager.checkpoint("Align");var i=this["#align-to-select"].value,r=this["#align-individually-checkbox"].checked,s=n.id.split("-button")[0];
if("view-box"===i){var o=body.canvas.currentArtboard.getScreenCTM(),l=SVGRect.fromRect(body.canvas.currentArtboard.viewBox),u=a(l,o);
this._alignElementsToBBox(body.canvas.selectedElements,u,s,r)}else if("first-selected"===i){
var c=body.canvas.selectedElements[0],d=body.canvas.selectedElements.slice(1),h=e(c);
this._alignElementsToBBox(d,h,s,r)}else if("last-selected"===i){var v=body.canvas.selectedElements[body.canvas.selectedElements.length-1],f=body.canvas.selectedElements.slice(0,body.canvas.selectedElements.length-1),m=e(v);
this._alignElementsToBBox(f,m,s,r)}else if("biggest-selected"===i){var b=$traceurRuntime.spread(body.canvas.selectedElements),g=b.map(function(t){
return e(t)}),p=t(g),y=b[g.indexOf(p)],_=b.filter(function(e){return e!==y}),x=e(y);
this._alignElementsToBBox(_,x,s,r)}},_alignElementsToBBox:function(t,n,i){var a=void 0!==arguments[3]?arguments[3]:!0;
if(a===!0){var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=t[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value,h=SVGMatrix.fromMatrix(d.transform.baseVal.consolidate().matrix),v=d.getScreenCTM(),f=v.inverse(),m=e(d),b=0,g=0,p=1,y=1;
"move-left"===i?b=n.x-m.x:"move-right"===i?b=n.x+n.width-(m.x+m.width):"move-top"===i?g=n.y-m.y:"move-bottom"===i?g=n.y+n.height-(m.y+m.height):"center-horizontally"===i?b=n.x-m.x+n.width/2-m.width/2:"center-vertically"===i?g=n.y-m.y+n.height/2-m.height/2:"stretch-horizontally"===i?(p=n.width/m.width,
b=n.x-m.x*p):"stretch-vertically"===i&&(y=n.height/m.height,g=n.y-m.y*y);var _=h.multiply(f);
_.translateSelf(b,g),_.scaleNonUniformSelf(p,y),_.multiplySelf(v),d.setAttribute("transform",_.toString());
}}catch(x){o=!0,l=x}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}}else if(a===!1){var w=function(){var n=0,i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[n++]=e(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return i}(),S=r(w),C=0,E=0,k=1,A=1;"move-left"===i?C=n.x-S.x:"move-right"===i?C=n.x+n.width-(S.x+S.width):"move-top"===i?E=n.y-S.y:"move-bottom"===i?E=n.y+n.height-(S.y+S.height):"center-horizontally"===i?C=n.x-S.x+n.width/2-S.width/2:"center-vertically"===i?E=n.y-S.y+n.height/2-S.height/2:"stretch-horizontally"===i?(k=n.width/S.width,
C=n.x-S.x*k):"stretch-vertically"===i&&(A=n.height/S.height,E=n.y-S.y*A);var T=!0,L=!1,M=void 0;
try{for(var P=void 0,R=t[Symbol.iterator]();!(T=(P=R.next()).done);T=!0){var j=P.value,O=SVGMatrix.fromMatrix(j.transform.baseVal.consolidate().matrix),V=j.getScreenCTM(),D=V.inverse(),G=O.multiply(D);
G.translateSelf(C,E),G.scaleNonUniformSelf(k,A),G.multiplySelf(V),j.setAttribute("transform",G.toString());
}}catch(I){L=!0,M=I}finally{try{T||null==R["return"]||R["return"]()}finally{if(L)throw M;
}}}},_onRaiseButtonClick:function(){0===event.button&&body.commands.raise.exec()},
_onLowerButtonClick:function(){0===event.button&&body.commands.lower.exec()},_onRaiseToFrontButtonClick:function(){
0===event.button&&body.commands.raiseToFront.exec()},_onLowerToBackButtonClick:function(){
0===event.button&&body.commands.lowerToBack.exec()},_onRotateByMinus90DegButtonClick:function(){
0===event.button&&body.commands.rotateCounterclockwise.exec()},_onRotateByPlus90DegButtonClick:function(){
0===event.button&&body.commands.rotateClockwise.exec()},_onFlipXButtonClick:function(e){
0===e.button&&body.commands.flipX.exec()},_onFlipYButtonClick:function(e){0===e.button&&body.commands.flipY.exec();
},_updateWidgets:function(){this._updateAlignSection(),this._updateOrderSection(),
this._updateTransformSection()},_updateAlignSection:function(){if(0===body.canvas.selectedElements.length)this["#align-section-header"].disabled=!0,
this["#align-to-select"].disabled=!0,this["#align-individually-checkbox"].disabled=!0,
this._disableAlignButtons();else if(1===body.canvas.selectedElements.length){this["#align-section-header"].disabled=!1,
this["#align-to-select"].disabled=!1,this["#align-individually-checkbox"].disabled=!1;
var e=this["#align-to-select"].value;"view-box"===e?this._enableAlignButtons():this._disableAlignButtons();
}else this["#align-section-header"].disabled=!1,this["#align-to-select"].disabled=!1,
this["#align-individually-checkbox"].disabled=!1,this._enableAlignButtons()},_updateOrderSection:function(){
this["#raise-button"].disabled=!body.commands.raise.enabled(),this["#lower-button"].disabled=!body.commands.lower.enabled(),
this["#raise-to-front-button"].disabled=!body.commands.raiseToFront.enabled(),this["#lower-to-back-button"].disabled=!body.commands.lowerToBack.enabled(),
this["#order-section-header"].disabled=this["#raise-button"].disabled&&this["#lower-button"].disabled&&this["#raise-to-front-button"].disabled&&this["#lower-to-back-button"].disabled;
},_updateTransformSection:function(){this["#rotate-counterclockwise-button"].disabled=!body.commands.rotateCounterclockwise.enabled(),
this["#rotate-clockwise-button"].disabled=!body.commands.rotateClockwise.enabled(),
this["#flip-x-button"].disabled=!body.commands.flipX.enabled(),this["#flip-y-button"].disabled=!body.commands.flipY.enabled(),
this["#transform-section-header"].disabled=this["#rotate-counterclockwise-button"].disabled&&this["#rotate-clockwise-button"].disabled&&this["#flip-x-button"].disabled&&this["#flip-y-button"].disabled;
},_enableAlignButtons:function(){this["#move-left-button"].disabled=!1,this["#move-right-button"].disabled=!1,
this["#move-top-button"].disabled=!1,this["#move-bottom-button"].disabled=!1,this["#center-horizontally-button"].disabled=!1,
this["#center-vertically-button"].disabled=!1,this["#stretch-horizontally-button"].disabled=!1,
this["#stretch-vertically-button"].disabled=!1},_disableAlignButtons:function(){this["#move-left-button"].disabled=!0,
this["#move-right-button"].disabled=!0,this["#move-top-button"].disabled=!0,this["#move-bottom-button"].disabled=!0,
this["#center-horizontally-button"].disabled=!0,this["#center-vertically-button"].disabled=!0,
this["#stretch-horizontally-button"].disabled=!0,this["#stretch-vertically-button"].disabled=!0;
}},{},n)}(HTMLElement),u=n("bx-arrangementcontrols",l);return{get default(){return u;
}}}),System.registerModule("elements/bx-backgroundartboard",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t='\n  <polygon\n    fill="white"\n    points="-1000000,-1000000 2000000,0 2000000,20000000, 0,2000000"/>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
get contentType(){return"background"},createdCallback:function(){this._shadowRoot=this.createShadowRoot(),
this._shadowRoot.innerHTML=t}},{},e)}(SVGGElement),i=e("g","bx-backgroundartboard",n);
return{get default(){return i}}}),System.registerModule("elements/bx-body",[],function(){
"use strict";var e=System.get("classes/bridge")["default"],t=System.get("classes/shortcut")["default"],n=System.get("utils/element"),i=n.createElement,r=n.registerElement,a=Object,s=(a.entries,
a.observe,navigator.platform,function(n){function r(){$traceurRuntime.superConstructor(r).apply(this,arguments);
}return $traceurRuntime.createClass(r,{createdCallback:function(){var t=this;this.bridge=new e,
this.tabIndex=-1,this.commands={},this.mouseClientX=0,this.mouseClientY=0,this.isMouseDown=!1,
this._cursors=[],this._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},this.bridge.postMessage("getBackendName",null,function(e){
return t._backendName=e}),this.bridge.addMessageListener("execCommand",function(e){
return t.execCommand(e)}),this.bridge.addMessageListener("validateCommand",function(e,n){
return t.validateCommand(e).then(n)}),this.bridge.addMessageListener("configChanged",function(e){
t.dispatchEvent(new CustomEvent("configchange",{detail:e}))})},attachedCallback:function(){
var e=this;window.addEventListener("keydown",this._keyDownListener=function(t){return e._onKeyDown(t);
}),window.addEventListener("keyup",this._keyUpListener=function(t){return e._onKeyUp(t);
}),window.addEventListener("blur",this._blurListener=function(t){return e._onBlur(t);
}),window.addEventListener("mousedown",this._mouseDownListener=function(t){return e.isMouseDown=!0;
}),window.addEventListener("mouseup",this._mouseUpListener=function(t){return e.isMouseDown=!1;
}),window.addEventListener("mousemove",this._mouseMoveListener=function(t){e.mouseClientX=t.clientX,
e.mouseClientY=t.clientY}),window.addEventListener("drop",this._dropListener=function(t){
e.mouseClientX=t.clientX,e.mouseClientY=t.clientY}),window.addEventListener("dragend",this._dragEndListener=function(t){
e.isMouseDown=!1}),"electron"===this.bridge.name&&window.addEventListener("beforeunload",this._beforeUnloadListener=function(){
e._cursorStyle.innerHTML=""}),this.focus()},detachedCallback:function(){window.removeEventListener("keydown",this._keyDownListener),
window.removeEventListener("keyup",this._keyUpListener),window.removeEventListener("blur",this._blurListener),
window.removeEventListener("drop",this._dropListener),window.removeEventListener("mousedown",this._mouseDownListener),
window.removeEventListener("mousemove",this._mouseMoveListener),window.removeEventListener("mouseup",this._mouseUpListener),
window.removeEventListener("dragend",this._dragEndListener),"electron"===this.bridge.name&&window.removeEventListener("beforeunload",this._beforeUnloadListener);
},get modKeys(){var e=this._modKeys,t=e.ctrl,n=e.alt,i=e.meta,r=e.shift;return{ctrl:t,
alt:n,meta:i,shift:r}},getConfig:function(e){var t=this;return new Promise(function(n){
t.bridge.postMessage("getConfig",e,function(e){n(e)})})},setConfig:function(e,t){
var n=this;return new Promise(function(i){n.bridge.postMessage("setConfig",{key:e,
value:t},function(){i()})})},registerCursor:function(e){var t=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:0,i=void 0!==arguments[3]?arguments[3]:0;
e.includes("/")&&(e="url("+e+") "+n+" "+i+", auto");var r={name:e,weight:t};return this._cursors.push(r),
this._updateCursorStyle(),r},unregisterCursor:function(e){this._cursors=this._cursors.filter(function(t){
return t!==e}),this._updateCursorStyle()},execCommand:function(e){for(var t=document.activeElement;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;
for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var i=n.commands[e];
if(i){i.enabled&&!i.enabled()||i.exec();break}}},validateCommand:function(e){return new Promise(function(t,n){
for(var i=document.activeElement;i._shadowRoot&&i._shadowRoot.activeElement;)i=i._shadowRoot.activeElement;
for(var r=i;r;r=r.parentNode||r.host)if(r.commands&&r.commands[e]){var a=r.commands[e];
if(a)if(void 0!==a.enabled){var s=a.enabled();t(s)}else t(!0)}return!0})},_onKeyDown:function(e){
var n=t.fromEvent(e);n.ctrl===this._modKeys.ctrl&&n.alt===this._modKeys.alt&&n.meta===this._modKeys.meta&&n.shift===this._modKeys.shift||(this._modKeys={
ctrl:n.ctrl,alt:n.alt,meta:n.meta,shift:n.shift},this.dispatchEvent(new CustomEvent("modkeyschange"))),
"chrome"===this._backendName&&(n.matches("Control","Z")||n.matches("Control","Shift","Z")||n.matches("Control","X")||n.matches("Control","C")||n.matches("Control","V")||n.matches("Control","A"))&&e.preventDefault();
},_onKeyUp:function(e){var n=t.fromEvent(e),i=n.ctrl,r=n.alt,a=n.meta,s=n.shift;i===this._modKeys.ctrl&&r===this._modKeys.alt&&a===this._modKeys.meta&&s===this._modKeys.shift||(this._modKeys={
ctrl:i,alt:r,meta:a,shift:s},this.dispatchEvent(new CustomEvent("modkeyschange")));
},_onBlur:function(e){var t=this._modKeys,n=t.ctrl,i=t.alt,r=t.meta,a=t.shift;(n||i||r||a)&&(this._modKeys={
ctrl:!1,alt:!1,meta:!1,shift:!1},this.dispatchEvent(new CustomEvent("modkeyschange")));
},_updateCursorStyle:function(){var e=$traceurRuntime.spread(this._cursors);if(e.sort(function(e,t){
return e.weight>t.weight?1:e.weight<t.weight?-1:0}),this._cursorStyle||(this._cursorStyle=i("style"),
this._cursorStyle.id="cursor-style",this.prepend(this._cursorStyle)),e.length>0){
var t=e[e.length-1].name;this._cursorStyle.innerHTML="* {cursor: "+t+"!important}";
}else this._cursorStyle.innerHTML=""}},{},n)}(HTMLBodyElement)),o=r("bx-body",s);return{
get default(){return o}}}),System.registerModule("elements/bx-breadcrumb",[],function(){
"use strict";System.get("elements/bx-breadcrumbitem");var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/time").debounce,r='\n  <style>@import url("stylesheets/bx-breadcrumb.css");</style>\n  <main id="main"></main>\n',a=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){n=!0,a=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(n)throw a}}this._update80Db=i(this._update,80,this),this["#main"].addEventListener("click",function(t){
return e._onItemClick(t)})},attachedCallback:function(){var e=this;body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._update80Db()}),body.canvas.addEventListener("currentcontainerchange",this._currentContainerChangeListener=function(){
e._update80Db()})},detachedCallback:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("currentcontainerchange",this._currentContainerChangeListener);
},_onItemClick:function(e){var t=e.target,n=t.ref;n===body.canvas.currentArtboard?(body.canvas.selectedElements=[],
body.canvas.currentContainer=null):n===body.canvas.masterArtboard?("symbol"===body.canvas.currentArtboard.contentType?body.canvas.editSymbolEnd():"pattern"===body.canvas.currentArtboard.contentType&&body.canvas.editPatternEnd(),
body.canvas.selectedElements=[],body.canvas.currentContainer=null):(body.canvas.selectedElements=[n],
body.canvas.currentContainer=n.parentElement===body.canvas.currentArtboard?null:n.parentElement);
},_update:function(){var e=this,n=[body.canvas.masterArtboard];if(body.canvas.currentArtboard!==body.canvas.masterArtboard&&n.push(body.canvas.currentArtboard),
body.canvas.currentContainer){for(var i=[],r=body.canvas.currentContainer;r!==body.canvas.currentArtboard;r=r.parentElement)i.unshift(r);
n=$traceurRuntime.spread(n,i)}for(body.canvas.selectedElements.length>0&&n.push(body.canvas.selectedElements[0]);this["#main"].childElementCount>n.length;)this["#main"].lastElementChild.remove();
for(;this["#main"].childElementCount<n.length;)this["#main"].append(t("bx-breadcrumbitem"));
n.forEach(function(t,n){var i=e["#main"].children[n];i.ref=t});var a=null;body.canvas.selectedElements.length>0?a=body.canvas.selectedElements[0]:body.canvas.currentContainer||(a=body.canvas.currentArtboard);
var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=this["#main"].children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.highlighted=d.ref===a}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}}},{},e)}(HTMLElement),s=n("bx-breadcrumb",a);return{get default(){
return s}}}),System.registerModule("elements/bx-breadcrumbitem",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("utils/string").capitalize,n=System.get("utils/path-shapes").getShapeData,i='\n  <style>@import url("stylesheets/bx-breadcrumbitem.css");</style>\n\n  <main>\n    <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n      <use id="use" width="100" height="100"></use>\n    </svg>\n\n    <div id="label"></div>\n  </main>\n',r=function(e){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){this._ref=null,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=i;var e=!0,t=!1,n=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){t=!0,n=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(t)throw n}}},get ref(){return this._ref},set ref(e){e!==this._ref&&(this._ref=e,
this._onRefChange())},get mixed(){return this.hasAttribute("mixed")},set mixed(e){
e?this.setAttribute("mixed",""):this.removeAttribute("mixed")},get highlighted(){
return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},_onRefChange:function(){var e=this._ref;if(e)if("a"===e.localName)this["#label"].textContent="Anchor",
this["#use"].setAttribute("href","images/icons.svg#object-anchor");else if("ellipse"===e.localName)this["#label"].textContent="Ellipse",
this["#use"].setAttribute("href","images/icons.svg#object-ellipse");else if("text"===e.localName)this["#label"].textContent="Text",
this["#use"].setAttribute("href","images/icons.svg#object-text");else if("image"===e.localName)this["#label"].textContent="Image",
this["#use"].setAttribute("href","images/icons.svg#object-image");else if("foreignObject"===e.localName)this["#label"].textContent="Foreign Object",
this["#use"].setAttribute("href","images/icons.svg#object-image");else if("svg"===e.localName)this["#label"].textContent="SVG",
this["#use"].setAttribute("href","images/icons.svg#object-svg");else if("g"===e.localName){
var i=e.getAttribute("is");"bx-svgartboard"===i?(this["#label"].textContent="SVG",
this["#use"].setAttribute("href","images/icons.svg#object-svg")):"bx-symbolartboard"===i?(this["#label"].textContent="Symbol",
this["#use"].setAttribute("href","images/icons.svg#object-symbol")):"bx-patternartboard"===i?(this["#label"].textContent="Pattern",
this["#use"].setAttribute("href","images/icons.svg#object-pattern")):(this["#label"].textContent="Group",
this["#use"].setAttribute("href","images/icons.svg#object-group"))}else if("path"===e.localName){
var r=n(e),a=r?r.type:null;"triangle"===a?(this["#label"].textContent="Triangle",
this["#use"].setAttribute("href","images/icons.svg#object-triangle")):"rect"===a?(this["#label"].textContent="Rectangle",
this["#use"].setAttribute("href","images/icons.svg#object-rect")):"n-gon"===a?(this["#label"].textContent="N-gon",
this["#use"].setAttribute("href","images/icons.svg#object-ngon")):"star"===a?(this["#label"].textContent="Star",
this["#use"].setAttribute("href","images/icons.svg#object-star")):"ring"===a?(this["#label"].textContent="Ring",
this["#use"].setAttribute("href","images/icons.svg#object-ring")):(this["#label"].textContent="Path",
this["#use"].setAttribute("href","images/icons.svg#object-path"))}else if("use"===e.localName){
var s=body.canvas.artboards.querySelector(e.href.baseVal);this["#use"].setAttribute("href","images/icons.svg#object-symbol"),
s&&"symbol"===s.localName?this["#label"].textContent="Symbol Use":this["#label"].textContent="Use";
}else this["#label"].textContent=t(e.localName)}},{},e)}(HTMLElement),a=e("bx-breadcrumbitem",r);
return{get default(){return a}}}),System.registerModule("elements/bx-button",[],function(){
"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=Number.parseInt,r='\n  <style id="skin-stylesheet"></style>\n\n  <main>\n    <svg id="icon" preserveAspectRatio="none" viewBox="0 0 100 100" style="width: 20px; height: 20px;">\n      <use id="icon-use" x="0" y="0" width="100%" height="100%"></use>\n    </svg>\n\n    <label id="label"></label>\n  </main>\n',a=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=r;var e=!0,t=!1,n=void 0;try{for(var i=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){t=!0,n=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(t)throw n}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}this._updateSkin()},attributeChangedCallback:function(e){
"label"===e?this._onLabelAttributeChange():"icon"===e?this._onIconAttributeChange():"iconsize"===e?this._onIconSizeAttributeChange():"skin"===e?this._onSkinAttributeChange():"hidden"===e&&this._onHiddenAttributeChange();
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(e){
this.setAttribute("label",e)},get value(){return this.getAttribute("value")},set value(e){
null===e?this.removeAttribute("value"):this.setAttribute("value",e)},get icon(){return this.getAttribute("icon");
},set icon(e){null===e?this.removeAttribute("icon"):this.setAttribute("icon",e)},
get iconSize(){return this.hasAttribute("iconsize")?i(this.getAttribute("iconsize")):20;
},set iconSize(e){this.setAttribute("iconsize",e)},get skin(){return this.getAttribute("skin");
},set skin(e){e?this.setAttribute("skin",e):this.removeAttribute("skin")},get href(){
return this.hasAttribute("href")?this.getAttribute("href"):""},set href(e){this.setAttribute("href",e);
},get pressed(){return this.hasAttribute("pressed")},set pressed(e){e===!0?this.setAttribute("pressed",""):this.removeAttribute("pressed");
},get mixed(){return this.hasAttribute("mixed")},set mixed(e){e===!0?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e===!0?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onLabelAttributeChange:function(){this["#label"].textContent=this.label},_onIconAttributeChange:function(){
this["#icon-use"].remove(),this["#icon-use"]=t("svg:use"),this["#icon"].append(this["#icon-use"]),
this.icon&&this["#icon-use"].setAttribute("href","images/icons.svg#"+this.icon)},
_onIconSizeAttributeChange:function(){this["#icon"].style.width=this.iconSize+"px",
this["#icon"].style.height=this.iconSize+"px"},_onSkinAttributeChange:function(){
this._updateSkin()},_onHiddenAttributeChange:function(){this.dispatchEvent(new CustomEvent("hiddenchange",{
detail:this,bubbles:!0}))},_updateSkin:function(){this.skin?this["#skin-stylesheet"].innerText='@import url("stylesheets/bx-button@'+this.skin+'.css");':this["#skin-stylesheet"].innerText='@import url("stylesheets/bx-button.css");';
}},{},e)}(HTMLElement),s=n("bx-button",a);return{get default(){return s}}}),System.registerModule("elements/bx-canvas",[],function(){
"use strict";System.get("elements/bx-svgartboard"),System.get("elements/bx-symbolartboard"),
System.get("elements/bx-patternartboard"),System.get("elements/bx-backgroundartboard"),
System.get("elements/bx-viewboxhud"),System.get("elements/bx-viewboxedithud"),System.get("elements/bx-outlineshud"),
System.get("elements/bx-trianglehud"),System.get("elements/bx-recthud"),System.get("elements/bx-ellipsehud"),
System.get("elements/bx-ngonhud"),System.get("elements/bx-starhud"),System.get("elements/bx-ringhud"),
System.get("elements/bx-pathsedithud"),System.get("elements/bx-selectedtextrangehud"),
System.get("elements/bx-lineargradienthud"),System.get("elements/bx-radialgradienthud"),
System.get("elements/bx-patternhud"),System.get("elements/bx-transformhud"),System.get("elements/bx-rubberbandhud"),
System.get("elements/bx-cubicsegsdrawhud"),System.get("elements/bx-quadsegsdrawhud"),
System.get("elements/bx-freehandsegsdrawhud"),System.get("elements/bx-guide");var e=System.get("classes/dom-undo-manager")["default"],t=System.get("classes/google-fonts-manager")["default"],n=System.get("utils/artwork-compression").uncompressArtwork,i=System.get("utils/artwork-import").importArtwork,r=System.get("utils/artwork-general").prepareArtworkForInsertion,a=System.get("utils/bbox").getClientBBox,s=System.get("utils/constants"),o=s.SVG_NAMESPACE,l=s.XLINK_NAMESPACE,u=System.get("utils/element"),c=u.createElement,d=u.registerElement,h=u.sortByDomPosition,v=System.get("utils/element"),f=v.isTransformableElement,m=v.mirrorAttributes,b=System.get("utils/font").parseGoogleFontsURL,g=System.get("utils/math").normalize,p=System.get("utils/image").extractImageSize,y=System.get("utils/markup").parseSVG,_=System.get("utils/node").closest,x=System.get("utils/rect"),w=x.transformRect,S=x.combineRects,C=x.rectIntersectsRect,E=System.get("utils/transform-general").getTransformToElement,k=Math.min,A=Object,T=A.defineProperty,L=A.freeze,M=.39,P=1e4,R=20,j=window.screen.width,O=window.screen.height,V={
childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1
},D=[[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[-3,-2],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[-3,-1],[-2,-1],[-1,-1],[0,-1],[1,-1],[2,-1],[3,-1],[-3,0],[-2,0],[-1,0],[0,0],[1,0],[2,0],[3,0],[-3,1],[-2,1],[-1,1],[0,1],[1,1],[2,1],[3,1],[-3,2],[-2,2],[-1,2],[0,2],[1,2],[2,2],[3,2],[-3,3],[-2,3],[-1,3],[0,3],[1,3],[2,3],[3,3]],G='\n  <style>@import url("stylesheets/bx-canvas.css");</style>\n\n  <main id="main">\n    <svg id="svg">\n      <g id="artboards">\n        <g is="bx-backgroundartboard"></g>\n      </g>\n\n      <g id="huds">\n        <g id="viewbox-hud" is="bx-viewboxhud"></g>\n        <g id="outlines-hud" is="bx-outlineshud"></g>\n        <g id="transform-hud" is="bx-transformhud"></g>\n        <g id="triangle-hud" is="bx-trianglehud"></g>\n        <g id="rect-hud" is="bx-recthud"></g>\n        <g id="ellipse-hud" is="bx-ellipsehud"></g>\n        <g id="n-gon-hud" is="bx-ngonhud"></g>\n        <g id="star-hud" is="bx-starhud"></g>\n        <g id="ring-hud" is="bx-ringhud"></g>\n        <g id="paths-edit-hud" is="bx-pathsedithud"></g>\n        <g id="selected-text-range-hud" is="bx-selectedtextrangehud"></g>\n        <g id="linear-gradient-fill-hud" is="bx-lineargradienthud" context="fill"></g>\n        <g id="linear-gradient-stroke-hud" is="bx-lineargradienthud" context="stroke"></g>\n        <g id="radial-gradient-fill-hud" is="bx-radialgradienthud" context="fill"></g>\n        <g id="radial-gradient-stroke-hud" is="bx-radialgradienthud" context="stroke"></g>\n        <g id="pattern-fill-hud" is="bx-patternhud" context="fill"></g>\n        <g id="pattern-stroke-hud" is="bx-patternhud" context="stroke"></g>\n        <g id="rubber-band-hud" is="bx-rubberbandhud" enabled></g>\n        <g id="draw-cubic-segs-hud" is="bx-cubicsegsdrawhud"></g>\n        <g id="draw-quad-segs-hud" is="bx-quadsegsdrawhud"></g>\n        <g id="draw-freehand-segs-hud" is="bx-freehandsegsdrawhud"></g>\n        <g id="viewbox-edit-hud" is="bx-viewboxedithud"></g>\n      </g>\n\n      <filter id="grippie-drop-shadow" width="100" height="100">\n        <feGaussianBlur id="grippie-fe-blur" in="SourceAlpha" result="blur-out" stdDeviation="1"/>\n        <feOffset id="grippie-fe-offset" in="blur-out" result="the-shadow" dx="1" dy="1"/>\n        <feBlend in="SourceGraphic" in2="the-shadow" mode="normal"/>\n      </filter>\n    </svg>\n  </main>\n',I=function(s){
function u(){$traceurRuntime.superConstructor(u).apply(this,arguments)}return $traceurRuntime.createClass(u,{
createdCallback:function(){var n=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=G;var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=this,f=function(){var e=m.value;
T(v,e.id.toCamelCase(),{get:function(){return e}})},m=void 0,b=this["#huds"].children[Symbol.iterator]();!(c=(m=b.next()).done);c=!0)f();
}catch(g){d=!0,h=g}finally{try{c||null==b["return"]||b["return"]()}finally{if(d)throw h;
}}this["#svg"].setAttribute("width",j+"px"),this["#svg"].setAttribute("height",O+"px"),
this["#svg"].pauseAnimations(),this._undoManager=new e(this["#artboards"]),this._googleFontsManager=new t(this["#artboards"]),
this._selectedElements=[],this._selectedTextRange=null,this._currentContainer=null,
this._scrollX=0,this._scrollY=0,this._zoom=100,this._textInputMode=!1;var p=new MutationObserver(function(e){
return n._onArtboardMutation(e)});p.observe(this["#artboards"],V),this._shadowRoot.addEventListener("click",function(e){
return n._onClick(e)}),this._shadowRoot.addEventListener("wheel",function(e){return n._onMouseWheel(e);
}),this._shadowRoot.addEventListener("dragover",function(e){return n._onDragOver(e);
}),this._shadowRoot.addEventListener("drop",function(e){return n._onDrop(e)}),this._undoManager.addEventListener("undo",function(e){
return n._onUndoManagerUndoOrRedo(e)}),this._undoManager.addEventListener("redo",function(e){
return n._onUndoManagerUndoOrRedo(e)}),this._undoManager.addEventListener("positionchange",function(e){
return n._onUndoManagerPositionChange(e)}),this["#main"].addEventListener("scroll",function(e){
return n._onScroll(e)}),this.enableHud("viewbox-hud")},get selectedElements(){return L($traceurRuntime.spread(this._selectedElements));
},set selectedElements(e){this._selectedElements=e,this.dispatchEvent(new CustomEvent("selectedelementschange"));
},get selectedTextRange(){return this._selectedTextRange?this._selectedTextRange:null;
},set selectedTextRange(e){this._selectedTextRange=e?e:null,this.dispatchEvent(new CustomEvent("selectedtextrangechange"));
},get currentContainer(){return this._currentContainer},set currentContainer(e){this._currentContainer=e,
this.dispatchEvent(new CustomEvent("currentcontainerchange"))},get artboards(){return this["#artboards"];
},get masterArtboard(){return this.artboards.querySelector('g[is="bx-svgartboard"]');
},get currentArtboard(){return this["#artboards"].lastElementChild},get defs(){return this.masterArtboard.querySelector("defs");
},get huds(){return this["#huds"]},get zoom(){return this._zoom},get scale(){return this._zoom/100;
},get textInputMode(){return this._textInputMode},set textInputMode(e){e!==this._textInputMode&&(this._textInputMode=e,
this._onTextInputModeChange())},get undoManager(){return this._undoManager},get googleFontsManager(){
return this._googleFontsManager},enableHud:function(e){var t=!0,n=!1,i=void 0;try{
for(var r=void 0,a=this["#huds"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.id===e&&(s.enabled=!0)}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},disableHud:function(e){var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#huds"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.id===e&&(s.enabled=!1)}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},editPattern:function(e){var t=this.masterArtboard.querySelector("pattern#"+e);
if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Pattern"),
"pattern"===this.currentArtboard.contentType?this.editPatternEnd(!1):"symbol"===this.currentArtboard.contentType&&this.editSymbolEnd(!1);
var n=c("svg:g","bx-patternartboard");m(t,n,["is"]),n.innerHTML=t.innerHTML,this["#artboards"].append(n),
this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,this.currentArtboard.viewBox.width>0&&this.currentArtboard.viewBox.height>0?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
}},editPatternEnd:function(){var e=void 0!==arguments[0]?arguments[0]:!0;if("pattern"===this.currentArtboard.contentType){
e&&this.undoManager.checkpoint("Edit Pattern");var t=this.currentArtboard,n=this.masterArtboard.querySelector("pattern#"+t.id);
m(t,n,["is"]),t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,
this.currentContainer=null}},editSymbol:function(e){var t=this.masterArtboard.querySelector("symbol#"+e);
if(null!==t&&this.currentArtboard.id!==t.id){this.undoManager.checkpoint("Edit Symbol"),
"pattern"===this.currentArtboard.contentType?this.editPatternEnd(!1):"symbol"===this.currentArtboard.contentType&&this.editSymbolEnd(!1);
var n=c("svg:g","bx-symbolartboard");m(t,n,["is"]),n.innerHTML=t.innerHTML,this["#artboards"].append(n),
this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,this.currentArtboard.viewBox.width>0&&this.currentArtboard.viewBox.height>0?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
}},editSymbolEnd:function(){var e=void 0!==arguments[0]?arguments[0]:!0;if("symbol"===this.currentArtboard.contentType){
e&&this.undoManager.checkpoint("Edit Symbol");var t=this.currentArtboard,n=this.masterArtboard.querySelector("symbol#"+t.id);
m(t,n,["is"]),t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,
this.currentContainer=null}},loadArtwork:function(e){var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=$traceurRuntime.spread(this.artboards.children)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;"bx-backgroundartboard"!==s.getAttribute("is")&&s.remove()}}catch(o){
n=!0,i=o}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}var l=c("svg:g","bx-svgartboard");
for(m(e,l,["is","xmlns"]);e.firstChild;)l.append(e.firstChild);this.artboards.append(l),
this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,this.undoManager.clear(),
this.googleFontsManager.loadImportedFamilies(),this.currentArtboard.viewBox.width>0&&this.currentArtboard.viewBox.height>0?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll(),
this.dispatchEvent(new CustomEvent("artworkload"))},extractArtwork:function(){this._googleFontsManager.deportUnsusedFamilies();
var e=c("svg:svg"),t=this.masterArtboard,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=["id","class","style","x","y","width","height","viewBox","preserveAspectRatio"][Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;t.hasAttribute(o)&&e.setAttribute(o,t.getAttribute(o))}}catch(l){i=!0,
r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}var u=!0,d=!1,h=void 0;
try{for(var v=void 0,f=t.childNodes[Symbol.iterator]();!(u=(v=f.next()).done);u=!0){
var b=v.value;e.append(b.cloneNode(!0))}}catch(g){d=!0,h=g}finally{try{u||null==f["return"]||f["return"]();
}finally{if(d)throw h}}if("pattern"===this.currentArtboard.contentType){var p=this.currentArtboard,y=e.querySelector("#"+p.id);
m(p,y,["is"]),y.innerHTML=p.innerHTML}else if("symbol"===this.currentArtboard.contentType){
var _=this.currentArtboard,x=e.querySelector("symbol#"+_.id);m(_,x,["is"]),x.innerHTML=_.innerHTML;
}return e},extractArtworkWithSelectedElements:function(){var e=this,t=this._extractArtworkWithElements(this.selectedElements),n=function(){
var t=0,n=[],i=!0,r=!1,s=void 0;try{for(var o=void 0,l=e.selectedElements[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;n[t++]=a(u)}}catch(c){r=!0,s=c}finally{try{i||null==l["return"]||l["return"]();
}finally{if(r)throw s}}return n}(),i=S(n);i=w(i,this.currentArtboard.getCTM().inverse());
var r=!0,s=!1,o=void 0;try{for(var l=void 0,u=["x","y","width","height"][Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value;t.viewBox.baseVal[c]=i[c]}}catch(d){s=!0,o=d}finally{try{r||null==u["return"]||u["return"]();
}finally{if(s)throw o}}return t.setAttribute("width",i.width),t.setAttribute("height",i.height),
t},extractArtworkWithViewBoxElements:function(){var e=[],t=SVGRect.fromRect(this.currentArtboard.viewBox),n=this.currentArtboard.getCTM().inverse(),i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=this.currentArtboard.children[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;if(f(u)){var c=a(u);c=w(c,n),C(t,c)&&e.push(u)}}}catch(d){r=!0,s=d}finally{
try{i||null==l["return"]||l["return"]()}finally{if(r)throw s}}var h=this._extractArtworkWithElements(e),v=!0,m=!1,b=void 0;
try{for(var g=void 0,p=["x","y","width","height"][Symbol.iterator]();!(v=(g=p.next()).done);v=!0){
var y=g.value;h.viewBox.baseVal[y]=t[y]}}catch(_){m=!0,b=_}finally{try{v||null==p["return"]||p["return"]();
}finally{if(m)throw b}}return h.setAttribute("width",t.width),h.setAttribute("height",t.height),
h},_extractArtworkWithElements:function(e){this._googleFontsManager.deportUnsusedFamilies(),
e=h(e);var t=this._getIdsReferencedByElementsAndTheirDescendants(e),n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=this.currentArtboard.querySelector("#"+l);
u||this.currentArtboard===this.masterArtboard||(u=this.masterArtboard.querySelector("#"+l)),
u&&n.push(u)}}catch(d){r=!0,a=d}finally{try{i||null==o["return"]||o["return"]()}finally{
if(r)throw a}}n=n.filter(function(t){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;if(l.contains(t)||l===t)return!1}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=n[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;if(m.contains(t)&&m!==t)return!1}}catch(b){d=!0,h=b}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}return!0});var v=c("svg:svg"),f=c("svg:defs"),m=!0,b=!1,g=void 0;
try{for(var p=void 0,y=n[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value;
_.closest("defs")?f.append(_.cloneNode(!0)):v.append(_.cloneNode(!0))}}catch(x){b=!0,
g=x}finally{try{m||null==y["return"]||y["return"]()}finally{if(b)throw g}}var w=!0,S=!1,C=void 0;
try{for(var k=void 0,A=this.defs.querySelectorAll("style")[Symbol.iterator]();!(w=(k=A.next()).done);w=!0){
var T=k.value;f.append(T.cloneNode(!0))}}catch(L){S=!0,C=L}finally{try{w||null==A["return"]||A["return"]();
}finally{if(S)throw C}}f.childElementCount>0&&v.append(f);var M=!0,P=!1,R=void 0;try{
for(var j=void 0,O=e[Symbol.iterator]();!(M=(j=O.next()).done);M=!0){var V=j.value,D=E(V,this.currentArtboard),G=V.cloneNode(!0);
G.setAttribute("transform",D),v.append(G)}}catch(I){P=!0,R=I}finally{try{M||null==O["return"]||O["return"]();
}finally{if(P)throw R}}return v},insertArtwork:function(e){var t,n,i=void 0!==arguments[1]?arguments[1]:"canvasCenter",s=this.currentContainer||this.currentArtboard,o=[],l=this.extractArtwork();
r(e,l);var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=$traceurRuntime.spread(e.children)[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var m=h.value;if("defs"===m.localName){var g=!0,p=!1,y=void 0;try{for(var _=void 0,x=$traceurRuntime.spread(m.children)[Symbol.iterator]();!(g=(_=x.next()).done);g=!0){
var w=_.value;if("bx-google-fonts"===w.id){var C=w.textContent,k=C.substring(C.lastIndexOf("(")+1,C.lastIndexOf(")")),A=!0,T=!1,L=void 0;
try{for(var M=void 0,P=b(k)[Symbol.iterator]();!(A=(M=P.next()).done);A=!0){var R=(t=M.value[Symbol.iterator](),
(n=t.next()).done?void 0:n.value);this._googleFontsManager.importFamily(R)}}catch(j){
T=!0,L=j}finally{try{A||null==P["return"]||P["return"]()}finally{if(T)throw L}}}else{
if("desc"===w.localName)continue;if("title"===w.localName)continue;this.defs.append(w);
}}}catch(O){p=!0,y=O}finally{try{g||null==x["return"]||x["return"]()}finally{if(p)throw y;
}}}else if(f(m)){var V=E(s,this.currentArtboard),D=SVGMatrix.fromMatrix(m.transform.baseVal.consolidate().matrix),G=new SVGMatrix;
G.multiplySelf(V.inverse()),G.multiplySelf(D),G.isIdentity()?m.removeAttribute("transform"):m.setAttribute("transform",G.toString()),
s.append(m),f(m)&&o.push(m)}else s.append(m)}}catch(I){c=!0,d=I}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}if("original"!==i){var N;N="canvasCenter"===i?new SVGPoint(this.clientLeft+this.clientWidth/2,this.clientTop+this.clientHeight/2):new SVGPoint(body.mouseClientX,body.mouseClientY);
var B=function(){var e=0,t=[],n=!0,i=!1,r=void 0;try{for(var s=void 0,l=o[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){
var u=s.value;t[e++]=a(u)}}catch(c){i=!0,r=c}finally{try{n||null==l["return"]||l["return"]();
}finally{if(i)throw r}}return t}();B=B.filter(function(e){return e.width>0||e.height>0;
});var U=S(B),z=N.x-(U.x+U.width/2),H=N.y-(U.y+U.height/2),F=!0,q=!1,Y=void 0;try{
for(var $=void 0,W=o[Symbol.iterator]();!(F=($=W.next()).done);F=!0){var X=$.value,Z=X.getScreenCTM(),K=Z.inverse(),J=SVGMatrix.fromMatrix(X.transform.baseVal.consolidate().matrix);
J.multiplySelf(K),J.translateSelf(z,H),J.multiplySelf(Z),X.setAttribute("transform",J.toString());
}}catch(Q){q=!0,Y=Q}finally{try{F||null==W["return"]||W["return"]()}finally{if(q)throw Y;
}}}this.selectedElements=o},insertBitmap:function(e){var t,n,i,r,a,s,o,l,u,d,h,v,f;
return $traceurRuntime.asyncWrap(function(m){for(;;)switch(m.state){case 0:d=p(e),
m.state=5;break;case 5:return void Promise.resolve(d).then(m.createCallback(3),m.errback);
case 3:h=m.value,m.state=2;break;case 2:t=h,v=t.width,n=v,f=t.height,i=f,m.state=7;
break;case 7:r=c("svg:image"),r.setAttribute("href",e),r.setAttribute("width",n),
r.setAttribute("height",i),a=this.currentContainer||this.currentArtboard,s=a.getScreenCTM().inverse(),
o=new SVGPoint(body.mouseClientX,body.mouseClientY),l=o.matrixTransform(s),a.append(r),
u=r.getBBox(),r.setAttribute("x",l.x-u.width/2),r.setAttribute("y",l.y-u.height/2),
this.selectedElements=[r],m.state=-2;break;default:return m.end()}},this)},zoomBy:function(){
var e=void 0!==arguments[0]?arguments[0]:.3,t=this["#svg"].getScreenCTM(),n=t.inverse(),i=new SVGPoint(this.matches(":hover")?body.mouseClientX:this.clientWidth/2,this.matches(":hover")?body.mouseClientY:this.clientHeight/2),r=i.matrixTransform(n);
this._zoom=g(this._zoom+this._zoom*e,M,P,3),this._scrollX=r.x-i.x/this.scale,this._scrollY=r.y-i.y/this.scale,
this["#svg"].viewBox.baseVal.width=j/this.scale,this["#svg"].viewBox.baseVal.height=O/this.scale,
this["#svg"].viewBox.baseVal.x=this._scrollX,this["#svg"].viewBox.baseVal.y=this._scrollY,
this._updateDropShadow(),this.dispatchEvent(new CustomEvent("zoomchange"))},zoomToFitAll:function(){
var e=this.currentArtboard.getBBox();this._zoomToArea(e.x,e.y,e.width,e.height,30);
},zoomToCurrentArtboardViewBox:function(){this._zoomToArea(this.currentArtboard.viewBox.x,this.currentArtboard.viewBox.y,this.currentArtboard.viewBox.width,this.currentArtboard.viewBox.height,30);
},zoomToCurrentArtboardViewBoxWidth:function(){this._zoomToArea(this.currentArtboard.viewBox.x,this.currentArtboard.viewBox.y+this.currentArtboard.viewBox.height/2,this.currentArtboard.viewBox.width,0,30);
},zoomToCurrentArtboardViewBoxHeight:function(){this._zoomToArea(this.currentArtboard.viewBox.x+this.currentArtboard.viewBox.width/2,this.currentArtboard.viewBox.y,0,this.currentArtboard.viewBox.height,30);
},_zoomToArea:function(e,t,n,i){var r=void 0!==arguments[4]?arguments[4]:0,a={width:window.innerWidth,
height:window.innerHeight},s=100*k(a.width/n,a.height/i);r=100*r/s,s=100*k(a.width/(n+r),a.height/(i+r)),
s=g(s,M,P,3),this._zoom=s;var o=a.width/this.scale,l=a.height/this.scale,u=e-(o-n)/2,c=t-(l-i)/2;
this._scrollX=u,this._scrollY=c,this["#svg"].viewBox.baseVal.width=j/this.scale,this["#svg"].viewBox.baseVal.height=O/this.scale,
this["#svg"].viewBox.baseVal.x=this._scrollX,this["#svg"].viewBox.baseVal.y=this._scrollY,
this._updateDropShadow(),this.dispatchEvent(new CustomEvent("zoomchange"))},resetZoom:function(){
var e=(100-this._zoom)/this._zoom;this.zoomBy(e)},selectAll:function(){if(this.textInputMode&&this.selectedTextRange){
var e=_(this.selectedTextRange.startContainer,"text"),t=new Range;t.selectNodeContents(e),
this.selectedTextRange=t}else{var n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this.currentArtboard.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;f(l)&&n.push(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this.selectedElements=$traceurRuntime.spread(n)}},grabColor:function(){
var e=this;return new Promise(function(t){var n=e["#svg"].cloneNode(!0),i=y('\n        <rect\n          x="'+e.currentArtboard.viewBox.x+'"\n          y="'+e.currentArtboard.viewBox.y+'"\n          width="'+e.currentArtboard.viewBox.width+'"\n          height="'+e.currentArtboard.viewBox.height+'"\n          style="fill: none; stroke: #646464; stroke-width: 1; vector-effect: non-scaling-stroke;">\n        </rect>\n      ');
n.appendChild(i),n.setAttribute("xmlns",o),n.setAttribute("xmlns:xlink",l);var r=new Blob([n.outerHTML],{
type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(r),s=new Image;s.src=a,
s.addEventListener("load",function(){var n=document.createElement("canvas"),i=e["#svg"].getBoundingClientRect();
n.width=i.width,n.height=i.height,n.setAttribute("style","\n          position: absolute;\n          top: "+i.top+"px;\n          left: "+i.left+"px;\n          background: white;\n        ");
var r=n.getContext("2d");r.fillStyle="transparent",r.fillRect(0,0,1e3,1e3),r.drawImage(s,0,0),
e.after(n);var o,l,u,c;n.addEventListener("mouseenter",o=function(e){c=body.registerCursor("crosshair",0);
}),n.addEventListener("mouseleave",l=function(e){body.unregisterCursor(c)}),n.addEventListener("click",u=function(s){
n.removeEventListener("click",u),n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",l),
body.unregisterCursor(c),n.remove();var d=s.clientX-i.x,h=s.clientY-i.y,v=e["#svg"].clientWidth,f=e["#svg"].clientHeight,m=r.getImageData(d,h,v,f),b=m.data[0],p=m.data[1],y=m.data[2],_=g(m.data[3]/255,0,1,2),x="rgba("+b+", "+p+", "+y+", "+_+")";
URL.revokeObjectURL(a),t(x)})})})},getHitArtboardElements:function(e,t){var n,i,r=[],a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=D[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=(n=c[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),v=(i=n.next()).done?void 0:i.value,f=this.shadowRoot.elementFromPoint(e+d,t+v);
f&&("tspan"!==f.localName&&"textPath"!==f.localName||(f=_(f,"text")),!r.includes(f)&&this.currentArtboard.contains(f)&&r.push(f));
}}catch(m){s=!0,o=m}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}return h(r)},generateUniqueID:function(e){for(var t=void 0!==arguments[1]?arguments[1]:null,n=0;;){
n+=1;var i=e+"-"+n;if(!this["#artboards"].querySelector("#"+i)){if(!t)return i;if(!t.querySelector("#"+i))return i;
}}},_onTextInputModeChange:function(){this._textInputMode===!0?(this["#main"].setAttribute("contenteditable",""),
this["#main"].focus(),body.bridge.postMessage("toggleTextInputMode",!0)):(this._textInputMode=!1,
this["#main"].removeAttribute("contenteditable"),body.bridge.postMessage("toggleTextInputMode",!1));
},_onArtboardMutation:function(e){var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this.dispatchEvent(new CustomEvent("artboardmutation",{detail:s})),
"childList"===s.type&&s.target===this["#artboards"]&&this._onCurrentArtboardChange();
}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}},_onCurrentArtboardChange:function(){this.dispatchEvent(new CustomEvent("currentartboardchange")),
this.currentArtboard.viewBox.width>0&&this.currentArtboard.viewBox.height>0?this.zoomToCurrentArtboardViewBox():this.zoomToFitAll();
},_onMouseWheel:function(e){var t=g(e.wheelDeltaX,-R,R,1),n=g(e.wheelDeltaY,-R,R,1);
if(!e.metaKey&&!e.ctrlKey||e.altKey||e.shiftKey)this._scrollX=this._scrollX-t/this.scale,
this._scrollY=this._scrollY-n/this.scale,this["#svg"].viewBox.baseVal.width=j/this.scale,
this["#svg"].viewBox.baseVal.height=O/this.scale,this["#svg"].viewBox.baseVal.x=this._scrollX,
this["#svg"].viewBox.baseVal.y=this._scrollY;else{var i=body.modKeys.ctrl?100:800,r=n/i;
this.zoomBy(r)}},_onScroll:function(e){this["#main"].scrollTop=0,this["#main"].scrollLeft=0,
this["#main"].scrollIntoView()},_onClick:function(e){e.target.closest("a")&&e.preventDefault();
},_onUndoManagerUndoOrRedo:function(e){var t=this,n=e.detail,i=n.addedNodes,r=n.removedNodes,a=n.modifiedNodes,s=new Set(this.selectedElements),o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;
s.add(h)}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{
if(l)throw u}}var m=!0,b=!1,g=void 0;try{for(var p=void 0,y=a[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value;s.add(_)}}catch(x){b=!0,g=x}finally{try{m||null==y["return"]||y["return"]();
}finally{if(b)throw g}}var w=!0,S=!1,C=void 0;try{for(var E=void 0,k=r[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){
var A=E.value;s["delete"](A)}}catch(T){S=!0,C=T}finally{try{w||null==k["return"]||k["return"]();
}finally{if(S)throw C}}s=$traceurRuntime.spread(s).filter(function(e){return f(e)&&t.currentArtboard.contains(e)&&null===e.closest("defs")&&t.currentArtboard!==e;
}),this.currentContainer=null,this.selectedElements=s},_onUndoManagerPositionChange:function(e){
body.bridge.postMessage("setChangeCounter",e.detail)},_onDragOver:function(e){e.preventDefault();
},_onDrop:function(e){var t=this;e.preventDefault();var r=e.dataTransfer.files,s=e.dataTransfer.getData("bx-symbolslistitem/symbolID");
if(r.length>0){var o=!0,l=!1,u=void 0;try{for(var d=void 0,h=r[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){
var v=d.value,f=v.name.substring(v.name.lastIndexOf(".")+1).toLowerCase();if("image/svg+xml"===v.type||"text/html"===v.type)if("svgz"===f){
var m=new FileReader;m.readAsArrayBuffer(v),m.addEventListener("load",function(e){
var r=new Uint8Array(e.target.result),a=n(r);if(a){var s=i(a);s&&(t.undoManager.checkpoint("Paste"),
t.insertArtwork(s))}})}else{var b=new FileReader;b.readAsText(v,"UTF-8"),b.addEventListener("load",function(e){
var n=i(e.target.result);n&&(t.undoManager.checkpoint("Paste"),t.insertArtwork(n));
})}else if(["image/png","image/jpeg","image/webp","image/gif"].includes(v.type)){
var g=new FileReader;g.readAsDataURL(v),g.addEventListener("load",function(e){var n=e.target.result;
n&&(t.undoManager.checkpoint("Paste"),t.insertBitmap(n))})}}}catch(p){l=!0,u=p}finally{
try{o||null==h["return"]||h["return"]()}finally{if(l)throw u}}}else if(s){if("symbol"===this.currentArtboard.contentType&&this.currentArtboard.id===s)return void e.preventDefault();
this.undoManager.checkpoint("Create symbol reference");var y=this.currentContainer||this.currentArtboard,_=this.masterArtboard.querySelector("#"+s),x=c("svg:use");
x.setAttribute("href","#"+s),_.hasAttribute("viewBox")&&(x.setAttribute("width",_.viewBox.baseVal.width),
x.setAttribute("height",_.viewBox.baseVal.height)),y.append(x);var w=x.getScreenCTM().inverse(),S=SVGMatrix.fromMatrix(x.transform.baseVal.consolidate().matrix);
S.multiplySelf(w),x.setAttribute("transform",S.toString());var C=a(x);x.setAttribute("x",e.clientX-C.width/2),
x.setAttribute("y",e.clientY-C.height/2),this.selectedElements=[x]}},_updateDropShadow:function(){
this["#grippie-fe-offset"].dx.baseVal=1/this.scale,this["#grippie-fe-offset"].dy.baseVal=1/this.scale,
this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this.scale;
},_getIdsReferencedByElementsAndTheirDescendants:function(e){e=h(e);var t=new Set,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=!0,u=!1,c=void 0;
try{for(var d=void 0,v=this._getIdsReferencedByElementAndItsDescendants(o)[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){
var f=d.value;t.add(f)}}catch(m){u=!0,c=m}finally{try{l||null==v["return"]||v["return"]();
}finally{if(u)throw c}}}}catch(b){i=!0,r=b}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return $traceurRuntime.spread(t)},_getIdsReferencedByElementAndItsDescendants:function(e){
var t=this,n=new Set,i=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],r=function(e){
for(var a=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();){
var o=getComputedStyle(s),l=!0,u=!1,c=void 0;try{for(var d=void 0,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=o.getPropertyValue(v);if(f&&f.startsWith('url("#')){var m=f.substring(6,f.length-2);
if(n.has(m)===!1){n.add(m);var b=t.currentArtboard.querySelector("#"+m);b||t.currentArtboard===t.masterArtboard||(b=t.masterArtboard.querySelector("#"+m)),
b&&r(b)}else n.add(m)}}}catch(g){u=!0,c=g}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}if(s.href&&"#"===s.href.baseVal[0]){var p=s.href.baseVal.substring(1,s.href.baseVal.length);
if(n.has(p)===!1){n.add(p);var y=t.currentArtboard.querySelector("#"+p);y||t.currentArtboard===t.masterArtboard||(y=t.masterArtboard.querySelector("#"+p)),
y&&r(y)}else n.add(p)}}};return r(e),$traceurRuntime.spread(n)}},{},s)}(HTMLElement),N=d("bx-canvas",I);
return{get MIN_ZOOM(){return M},get MAX_ZOOM(){return P},get default(){return N}};
}),System.registerModule("elements/bx-checkbox",[],function(){"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i="images/icons.svg#checkbox-on",r="images/icons.svg#checkbox-off",a='\n  <style>@import url("stylesheets/bx-checkbox.css");</style>\n\n  <main>\n    <svg id="icon" preserveAspectRatio="none" viewBox="0 0 100 100">\n      <use id="icon-use" x="0" y="0" width="100%" height="100%"></use>\n    </svg>\n\n    <label id="label"></label>\n  </main>\n',s=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this.tabIndex=0,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=a;var t=!0,n=!1,i=void 0;try{for(var r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){
var o=r.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this._updateIcon(),this.addEventListener("click",function(t){
return e._onClick(t)}),this.addEventListener("keydown",function(t){return e._onKeyDown(t);
})},attributeChangedCallback:function(e){"label"===e?this._onLabelAttributeChange():"checked"===e&&this._onCheckedAttributeChange();
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(e){
this.setAttribute("label",e)},get checked(){return this.hasAttribute("checked")},
set checked(e){e?this.setAttribute("checked",""):this.removeAttribute("checked")},
get mixed(){return this.hasAttribute("mixed")},set mixed(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onLabelAttributeChange:function(){this["#label"].textContent=this.label},_onCheckedAttributeChange:function(){
this._updateIcon()},_onClick:function(e){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change"));
},_onKeyDown:function(e){"Enter"===e.keyIdentifier&&(this.checked=!this.checked)},
_updateIcon:function(){this["#icon-use"].remove(),this["#icon-use"]=t("svg:use"),
this["#icon"].append(this["#icon-use"]),this.checked?this["#icon-use"].setAttribute("href",i):this["#icon-use"].setAttribute("href",r);
}},{},e)}(HTMLElement),o=n("bx-checkbox",s);return{get default(){return o}}}),System.registerModule("elements/bx-colorpicker",[],function(){
"use strict";System.get("elements/bx-alphaslider"),System.get("elements/bx-hueslider"),
System.get("elements/bx-satlightslider"),System.get("elements/bx-input"),System.get("elements/bx-button");
var e=System.get("classes/color")["default"],t=System.get("utils/color"),n=t.isValidColorString,i=t.parseColor,r=System.get("utils/element").registerElement,a="hex",s='\n  <style>\n    @import url("stylesheets/bx-colorpicker.css");\n  </style>\n\n  <main>\n    <bx-hueslider id="hue-slider"></bx-hueslider>\n    <bx-satlightslider id="satlight-slider"></bx-satlightslider>\n    <bx-alphaslider id="alpha-slider"></bx-alphaslider>\n\n    <div>\n      <bx-input id="color-input" title="Color"></bx-input>\n\n      <bx-button\n        id="grab-color-button"\n        title="Grab color"\n        icon="grab-color"\n        iconsize="25"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </main>\n',o=function(t){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){var e=this;this._isDraggingSlider=!1,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=s;var t=!0,i=!1,r=void 0;try{for(var a=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){
var l=a.value;this["#"+l.id]=l}}catch(u){i=!0,r=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(i)throw r}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this.hasAttribute("color")||this.attributeChangedCallback("color"),
this["#hue-slider"].addEventListener("markerdragstart",function(){return e._onHueSliderDragStart();
}),this["#satlight-slider"].addEventListener("markerdragstart",function(){return e._onSatlightSliderDragStart();
}),this["#alpha-slider"].addEventListener("markerdragstart",function(){return e._onAlphaSliderDragStart();
}),this["#grab-color-button"].addEventListener("click",function(t){return e._onGrabColorButtonClick(t);
}),this["#color-input"].addEventListener("change",function(){return e._onColorInputChange(event);
}),this["#color-input"].validate=function(e){return n(e)}},attributeChangedCallback:function(e){
"color"===e&&this._onColorAttributeChange()},get color(){return this.hasAttribute("color")?this.getAttribute("color"):"#ffffff";
},set color(e){this.setAttribute("color",e)},get mixed(){this["#color-input"].mixed;
},set mixed(e){this["#color-input"].mixed=e},get disabled(){return this.hasAttribute("disabled");
},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onColorAttributeChange:function(){if(this._isDraggingSlider===!1){var e=i(this.color,"hsla");
this["#hue-slider"].hue=e.h,this["#satlight-slider"].hue=e.h,this["#satlight-slider"].saturation=e.s,
this["#satlight-slider"].lightness=e.l,this["#alpha-slider"].color=this.color,this["#alpha-slider"].alpha=e.a,
this["#color-input"].value=e.toString(a)}},_onHueSliderDragStart:function(){var e=this;
this._isDraggingSlider=!0;var t,n,r=i(this.color,"hsla");this.dispatchEvent(new CustomEvent("changestart")),
this["#hue-slider"].addEventListener("markerdrag",t=function(t){r.h=e["#hue-slider"].hue,
e.color=r.toString("rgba"),e["#satlight-slider"].hue=e["#hue-slider"].hue,e["#alpha-slider"].color=e.color,
e["#color-input"].value=r.toString(a),e.dispatchEvent(new CustomEvent("change"))}),
this["#hue-slider"].addEventListener("markerdragend",n=function(){e["#hue-slider"].removeEventListener("markerdrag",t),
e["#hue-slider"].removeEventListener("markerdragend",n),e._isDraggingSlider=!1,e.dispatchEvent(new CustomEvent("changeend"));
})},_onSatlightSliderDragStart:function(){var t=this;this._isDraggingSlider=!0;var n,i,r=new e(this["#hue-slider"].hue,50,50,this["#alpha-slider"].alpha,"hsla");
this.dispatchEvent(new CustomEvent("changestart")),this["#satlight-slider"].addEventListener("markerdrag",n=function(){
r.s=t["#satlight-slider"].saturation,r.l=t["#satlight-slider"].lightness,t.color=r.toString("rgba"),
t["#alpha-slider"].color=t.color,t["#color-input"].value=r.toString(a),t.dispatchEvent(new CustomEvent("change"));
}),this["#satlight-slider"].addEventListener("markerdragend",i=function(){t["#satlight-slider"].removeEventListener("markerdrag",n),
t["#satlight-slider"].removeEventListener("markerdragend",i),t._isDraggingSlider=!1,
t.dispatchEvent(new CustomEvent("changeend"))})},_onAlphaSliderDragStart:function(){
var e=this;this._isDraggingSlider=!0;var t,n,r=i(this.color,"hsla");this.dispatchEvent(new CustomEvent("changestart")),
this["#alpha-slider"].addEventListener("markerdrag",t=function(t){r.a=t.detail,e.color=r.toString("rgba"),
e["#color-input"].value=r.toString(a),e.dispatchEvent(new CustomEvent("change"))}),
this["#alpha-slider"].addEventListener("markerdragend",n=function(){e["#alpha-slider"].removeEventListener("markerdrag",t),
e["#alpha-slider"].removeEventListener("markerdragend",n),e._isDraggingSlider=!1,
e.dispatchEvent(new CustomEvent("changeend"))})},_onColorInputChange:function(){this.dispatchEvent(new CustomEvent("changestart")),
this.color=this["#color-input"].value,this.dispatchEvent(new CustomEvent("change")),
this.dispatchEvent(new CustomEvent("changeend"))},_onGrabColorButtonClick:function(){
var e;return $traceurRuntime.asyncWrap(function(t){for(;;)switch(t.state){case 0:
this["#grab-color-button"].pressed=!0,t.state=5;break;case 5:return void Promise.resolve(body.canvas.grabColor()).then(t.createCallback(3),t.errback);
case 3:e=t.value,t.state=2;break;case 2:this["#grab-color-button"].pressed=!1,this.dispatchEvent(new CustomEvent("changestart")),
this.color=e,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")),
t.state=-2;break;default:return t.end()}},this)}},{},t)}(HTMLElement),l=r("bx-colorpicker",o);
return{get default(){return l}}}),System.registerModule("elements/bx-compositingcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select");var e=System.get("utils/element"),t=(e.createElement,
e.registerElement),n=System.get("utils/math").round,i=(System.get("utils/paint").getDefFromURL,
System.get("utils/style").queryStylableElements),r=System.get("utils/time").throttle,a=Number.parseFloat,s='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-compositingcontrols.css");\n  </style>\n\n  <section id="opacity-section">\n    <h2 id="opacity-section-heading">Opacity</h2>\n\n    <bx-slider\n      id="opacity-slider"\n      title="Opacity"\n      value="1"\n      min="0"\n      max="1"\n      precision="2">\n    </bx-slider>\n  </section>\n\n  <section id="blend-mode-section">\n    <h2 id="blend-mode-section-heading">Blend Mode</h2>\n\n    <bx-select id="blend-mode-select" value="normal">\n      <bx-selectitem value="normal" label="Normal"></bx-selectitem>\n      <hr>\n      <bx-selectitem value="darken" label="Darken"></bx-selectitem>\n      <bx-selectitem value="multiply" label="Multiply"></bx-selectitem>\n      <bx-selectitem value="color-burn" label="Color Burn"></bx-selectitem>\n      <hr>\n      <bx-selectitem value="lighten" label="Lighten"></bx-selectitem>\n      <bx-selectitem value="screen" label="Screen"></bx-selectitem>\n      <bx-selectitem value="color-dodge" label="Color Dodge"></bx-selectitem>\n      <hr>\n      <bx-selectitem value="overlay" label="Overlay"></bx-selectitem>\n      <bx-selectitem value="soft-light" label="Soft Light"></bx-selectitem>\n      <bx-selectitem value="hard-light" label="Hard Light"></bx-selectitem>\n      <hr>\n      <bx-selectitem value="difference" label="Difference"></bx-selectitem>\n      <bx-selectitem value="exclusion" label="Exclusion"></bx-selectitem>\n      <hr>\n      <bx-selectitem value="hue" label="Hue"></bx-selectitem>\n      <bx-selectitem value="saturation" label="Saturation"></bx-selectitem>\n      <bx-selectitem value="color" label="Color"></bx-selectitem>\n      <bx-selectitem value="luminosity" label="Luminosity"></bx-selectitem>\n    </bx-select>\n\n    <bx-checkbox label="Isolate" id="isolate-checkbox"></bx-checkbox>\n  </section>\n',o=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;this._update200Th=r(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=s;
var t=!0,n=!1,i=void 0;try{for(var a=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){
var l=a.value;this["#"+l.id]=l}}catch(u){n=!0,i=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(n)throw i}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#opacity-slider"].addEventListener("changestart",function(){
return e._onOpacitySliderChangeStart()}),this["#blend-mode-select"].addEventListener("change",function(){
return e._onBlendModeSelectChange()}),this["#isolate-checkbox"].addEventListener("change",function(){
return e._onIsolateCheckboxChange()})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update200Th()},_onSelectedTextRangeChange:function(){
this._update200Th()},_onArtboardMutation:function(e){this._update200Th()},_onOpacitySliderChangeStart:function(){
var e=this;body.canvas.undoManager.checkpoint("Opacity");var t,n,r=body.canvas.selectedElements,a=i("opacity",r);
a[0]||null;this._isChangingOpacitySlider=!0,this["#opacity-slider"].addEventListener("change",t=function(){
var t=!0,n=!1,i=void 0;try{for(var r=void 0,s=a[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){
var o=r.value;o.style.opacity=e["#opacity-slider"].value}}catch(l){n=!0,i=l}finally{
try{t||null==s["return"]||s["return"]()}finally{if(n)throw i}}e["#opacity-slider"].mixed=!1;
}),this["#opacity-slider"].addEventListener("changeend",n=function(){e["#opacity-slider"].removeEventListener("change",t),
e["#opacity-slider"].removeEventListener("changeend",n),e._isChangingOpacitySlider=!1;
})},_onBlendModeSelectChange:function(){body.canvas.undoManager.checkpoint("Blend mode");
var e=i("mix-blend-mode",body.canvas.selectedElements),t=!0,n=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;o.style.mixBlendMode=this["#blend-mode-select"].value}}catch(l){n=!0,
r=l}finally{try{t||null==s["return"]||s["return"]()}finally{if(n)throw r}}},_onIsolateCheckboxChange:function(){
body.canvas.undoManager.checkpoint("Isolate");var e=i("isolation",body.canvas.selectedElements),t=!0,n=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;
this["#isolate-checkbox"].checked?o.style.isolation="isolate":o.style.isolation="auto";
}}catch(l){n=!0,r=l}finally{try{t||null==s["return"]||s["return"]()}finally{if(n)throw r;
}}},_update:function(){this._updateOpacitySection(),this._updateBlendModeSection();
},_updateOpacitySection:function(){if(!this._isChangingOpacitySlider){var e=i("opacity",body.canvas.selectedElements),t=e[0]||null;
if(null===t)this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1;else{
this["#opacity-slider"].disabled=!1;var r=n(a(getComputedStyle(t).opacity),2),s=!1,o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;
if(h!==t){var v=n(a(getComputedStyle(h).opacity),2);v!==r&&(s=!0)}}}catch(f){l=!0,
u=f}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}this["#opacity-slider"].value=r,
this["#opacity-slider"].mixed=s}this["#opacity-section-heading"].disabled=this["#opacity-slider"].disabled;
}},_updateBlendModeSection:function(){var e=i("mix-blend-mode",body.canvas.selectedElements),t=e[0]||null;
if(null===t)this["#blend-mode-select"].value="normal",this["#blend-mode-select"].disabled=!0,
this["#blend-mode-select"].mixed=!1;else{var n=!1,r=getComputedStyle(t).mixBlendMode,a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;
if(c!==t){var d=getComputedStyle(c).mixBlendMode;if(d!==r){n=!0;break}}}}catch(h){
s=!0,o=h}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}this["#blend-mode-select"].value=getComputedStyle(t).mixBlendMode,
this["#blend-mode-select"].disabled=!1,this["#blend-mode-select"].mixed=n}if(null===t)this["#isolate-checkbox"].disabled=!0,
this["#isolate-checkbox"].checked=!1,this["#isolate-checkbox"].mixed=!1;else{var v=getComputedStyle(t).isolation,f=!1,m=!0,b=!1,g=void 0;
try{for(var p=void 0,y=e[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value;
if(_!==t){var x=getComputedStyle(_).isolation;if(x!==v){f=!0;break}}}}catch(w){b=!0,
g=w}finally{try{m||null==y["return"]||y["return"]()}finally{if(b)throw g}}this["#isolate-checkbox"].disabled=!1,
this["#isolate-checkbox"].checked="isolate"===v,this["#isolate-checkbox"].mixed=f;
}this["#blend-mode-section-heading"].disabled=this["#blend-mode-select"].disabled&&this["#isolate-checkbox"].disabled;
}},{},e)}(HTMLElement),l=t("bx-compositingcontrols",o);return{get default(){return l;
}}}),System.registerModule("elements/bx-contextmenu",[],function(){"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/node").closestShadowRoot,n=System.get("classes/shortcut")["default"];
System.get("elements/bx-menu");var i='\n  <style>@import url("stylesheets/bx-contextmenu.css");</style>\n  <div id="overlay" hidden></div>\n\n  <bx-menu id="root-menu">\n    <content></content>\n  </bx-menu>\n',r=function(e){
function r(){$traceurRuntime.superConstructor(r).apply(this,arguments)}return $traceurRuntime.createClass(r,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=i;var t=!0,n=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,r=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw r}}this.addEventListener("menuitemtrigger",function(t){return e._close();
}),this["#overlay"].addEventListener("mousedown",function(t){return e._onOverlayMouseDown(t);
}),this["#root-menu"].addEventListener("mousedown",function(t){return e._onRootMenuMouseDown(t);
}),$traceurRuntime.spread([this["#root-menu"]],this.querySelectorAll("bx-menu")).forEach(function(t){
t.menuWillShow=function(){return e.menuWillShow(t)},t.menuItemWillTrigger=function(t){
return e.menuItemWillTrigger(t)}})},menuWillShow:function(e){return Promise.resolve();
},menuItemWillTrigger:function(e){return Promise.resolve()},open:function(e,t){var n=this;
this["#root-menu"].openAtPosition(e,t),this["#overlay"].hidden=!1,window.addEventListener("keydown",this._keyDownListener=function(e){
return n._onKeyDown(e)},!0),window.addEventListener("resize",this._resizeListener=function(){
return n._close()}),window.addEventListener("blur",this._blurListener=function(){
return n._close()})},_close:function(){this["#root-menu"].close(),this["#overlay"].hidden=!0,
window.removeEventListener("keydown",this._keyDownListener,!0),window.removeEventListener("resize",this._resizeListener),
window.removeEventListener("blur",this._blurListener),this.blur()},_onOverlayMouseDown:function(e){
event.preventDefault(),this._close()},_onRootMenuMouseDown:function(e){e.preventDefault();
},_onKeyDown:function(e){var i=n.fromEvent(e);if(i.matches("ArrowUp")||i.matches("ArrowDown")){
var r=$traceurRuntime.spread(this.querySelectorAll("bx-menuitem[highlighted]")),a=r.length>0?r[r.length-1]:null,s=this["#root-menu"],o=this.querySelectorAll("bx-menu[opened]"),l=$traceurRuntime.spread([s],o);
if(e.stopPropagation(),e.preventDefault(),a){var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=l[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;f.items.includes(a)&&(i.matches("ArrowUp")?f.highlightPreviousItem():f.highlightNextItem());
}}catch(m){c=!0,d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}}else{var b=l.length>0?l[l.length-1]:null;b&&(i.matches("ArrowUp")?b.highlightPreviousItem():b.highlightNextItem());
}}else if(i.matches("ArrowLeft")){var g=this.querySelectorAll("bx-menu[opened]");if(e.stopPropagation(),
e.preventDefault(),g.length>0){var p=g[g.length-1];p.items.find(function(e){return e.highlighted;
})&&p.highlightItem(null)}}else if(i.matches("ArrowRight")){var y=$traceurRuntime.spread(this.querySelectorAll("bx-menuitem[highlighted]")),_=y.length>0?y[y.length-1]:null,x=_?_.querySelector("bx-menu"):null;
if(e.stopPropagation(),e.preventDefault(),x){var w=x.getBoundingClientRect(),S=_.getBoundingClientRect(),C=w.x+w.width/2,E=S.y+S.height/2,k=t(this).elementFromPoint(C,E);
k.disabled?x.highlightNextItem(k):x.highlightItem(k)}}else if(i.matches("Enter")){
var A=$traceurRuntime.spread(this.querySelectorAll("bx-menuitem[highlighted]")),T=A.length>0?A[A.length-1]:null;
if(e.stopPropagation(),e.preventDefault(),T){if(!T.querySelector("bx-menu")){var L=this["#root-menu"],M=this.querySelectorAll("bx-menu[opened]"),P=$traceurRuntime.spread([L],M),R=!0,j=!1,O=void 0;
try{for(var V=void 0,D=P[Symbol.iterator]();!(R=(V=D.next()).done);R=!0){var G=V.value;
if(G.items.includes(T)){G.triggerItem(T);break}}}catch(I){j=!0,O=I}finally{try{R||null==D["return"]||D["return"]();
}finally{if(j)throw O}}}}else this._close()}else null!==i.base&&this._close()}},{},e);
}(HTMLElement),a=e("bx-contextmenu",r);return{get default(){return a}}}),System.registerModule("elements/bx-cubicbeziertool",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=function(e){function t(){
$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("draw-cubic-segs-hud");
},_onDisabled:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("draw-cubic-segs-hud");
}},{},e)}(HTMLElement),n=e("bx-cubicbeziertool",t);return{get default(){return n}
}}),System.registerModule("elements/bx-cubicsegsdrawhud",[],function(){"use strict";
var e=System.get("classes/enum")["default"],t=System.get("classes/shortcut")["default"],n=System.get("classes/vector")["default"],i=System.get("utils/element"),r=i.createElement,a=i.registerElement,s=System.get("utils/path-general").reversePath,o=System.get("utils/transform-general").getTransformToElement,l=System.get("utils/transform-reduction").reduceTransform;
System.get("elements/bx-cubicsegsketch");var u=10,c=new e("path"),d='\n  <style>@import url("stylesheets/bx-cubicsegsdrawhud.css");</style>\n  <g id="node-grippies"></g>\n  <g id="seg-sketch" is="bx-cubicsegsketch"></g>\n',h=function(e){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=d;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var o=!0,l=!1,u=void 0;try{for(var c=void 0,h=this.attributes[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){
var v=c.value;this.attributeChangedCallback(v.name)}}catch(f){l=!0,u=f}finally{try{
o||null==h["return"]||h["return"]()}finally{if(l)throw u}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._mode="select",this._currentPath=null,window.addEventListener("keydown",this._keyDownListener=function(t){
e._onKeyDown(t)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)}),body.canvas.artboards.addEventListener("mousedown",this._canvasMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),this["#node-grippies"].addEventListener("mousedown",this._nodeGrippiesMouseDownListener=function(t){
e._onNodeGrippieMouseDown(t)}),this._onSelectedElementsChange()},_onDisabled:function(){
window.removeEventListener("keydown",this._keyDownListener),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.artboards.removeEventListener("mousedown",this._canvasMouseDownListener),
this["#node-grippies"].removeEventListener("mousedown",this._nodeGrippiesMouseDownListener),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide()},_onSelectedElementsChange:function(){
this._updateNodeGrippies()},_onZoomChange:function(){this._updateNodeGrippiesSize();
},_onArtboardMutation:function(e){var t=e.detail;if("childList"===t.type){var n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t.removedNodes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;(o===this._currentPath||o.contains(this._currentPath))&&(this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies())}}catch(l){
i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}else(t.target===this._currentPath||t.target.contains(this._currentPath))&&this._updateNodeGrippies();
},_onArtboardMouseDown:function(e){var t,i,r=this,a=new SVGPoint(e.clientX,e.clientY),s=0;
window.addEventListener("mousemove",t=function(e){var t=new SVGPoint(e.clientX,e.clientY),i=new n(a,t).length;
i>s&&(s=i)}),window.addEventListener("mouseup",i=function(n){window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",i),r._onArtboardClick(e,n),4>s&&r._onArtboardDirectClick(e,n);
})},_onArtboardClick:function(e){var t;if("draw-forward"===this._mode){var n=this._currentPath.getPathData({
normalize:!0}),i=$traceurRuntime.spread(n);i.length>1&&body.canvas.undoManager.checkpoint("Draw path segment"),
this["#seg-sketch"].curved?i.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):i.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),this._currentPath.setPathData(i)}else if("draw-backward"===this._mode){body.canvas.undoManager.checkpoint("Draw path segment");
var r=this._currentPath.getPathData({normalize:!0}),a=[];a.push({type:"M",values:[this["#seg-sketch"].startPoint.x,this["#seg-sketch"].startPoint.y]
}),this["#seg-sketch"].curved?a.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):a.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),(t=a).push.apply(t,$traceurRuntime.spread(r.slice(1))),this._currentPath.setPathData(a);
}},_onArtboardDirectClick:function(e){var t=e,n=t.clientX,i=t.clientY;if("select"===this._mode){
body.canvas.undoManager.checkpoint("Draw path segment");var a=r("svg:path");a.style.stroke="black",
a.style.fill="none";var s=body.canvas.currentContainer||body.canvas.currentArtboard;
s.append(a);var o=a.getScreenCTM().inverse(),l=new SVGPoint(n,i).matrixTransform(o),u=l.x,c=l.y;
a.setAttribute("d","M "+u+" "+c),body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[a]),
this._mode="draw-forward",this._currentPath=a,this["#seg-sketch"].show(a,"end")}},
_onNodeGrippieMouseDown:function(e){var t,n,i=this,r=e.target;this["#node-grippies"].addEventListener("mouseup",t=function(e){
i["#node-grippies"].removeEventListener("mouseup",t),window.removeEventListener("mouseup",n);
var a=e.target,s=i._onNodeGrippieClick(r,e);r!==a||s||i._onNodeGrippieDirectClick(r,e);
}),window.addEventListener("mouseup",n=function(e){i["#node-grippies"].removeEventListener("mouseup",t),
window.removeEventListener("mouseup",n),i._onNodeGrippieClick(r,e)})},_onNodeGrippieClick:function(e,t){
var n,i,r,a;if("select"===this._mode)return!1;if(e[c.path]===this._currentPath){var u=e.getAttribute("data-position"),d=this._currentPath,h=d.getPathData({
normalize:!0}),v=h[0],f=h[h.length-1];if("draw-forward"===this._mode&&"start"===u){
body.canvas.undoManager.checkpoint("Draw path segment");var m=$traceurRuntime.spread(h);
this["#seg-sketch"].curved?m.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,v.values[0],v.values[1]]
}):m.push({type:"L",values:[v.values[0],v.values[1]]}),m.push({type:"Z",values:[]
}),d.setPathData(m),this._updateNodeGrippies()}else if("draw-backward"===this._mode&&"end"===u){
body.canvas.undoManager.checkpoint("Draw path segment");var b=[];b.push({type:"M",
values:["C"===f.type?f.values[4]:f.values[0],"C"===f.type?f.values[5]:f.values[1]]
}),this["#seg-sketch"].curved?b.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,v.values[0],v.values[1]]
}):b.push({type:"L",values:[v.values[0],v.values[1]]}),(n=b).push.apply(n,$traceurRuntime.spread(h.slice(1))),
b.push({type:"Z",values:[]}),d.setPathData(b),this._updateNodeGrippies()}return this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),!0}var g=e.getAttribute("data-position"),p=this._currentPath,y=e[c.path],_=p.getPathData({
normalize:!0});_.length>1&&body.canvas.undoManager.checkpoint("Draw path segment");
var x=o(y,p);if(y.setAttribute("transform",x.toString()),l(y),"draw-forward"===this._mode){
"end"===g&&s(y);var w=$traceurRuntime.spread(_),S=y.getPathData({normalize:!0}),C=S[0];
this["#seg-sketch"].curved?w.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,C.values[0],C.values[1]]
}):w.push({type:"L",values:[C.values[0],C.values[1]]}),(i=w).push.apply(i,$traceurRuntime.spread(S.slice(1))),
p.setPathData(w),y.setPathData([]),y.remove()}else if("draw-backward"===this._mode){
"start"===g&&s(y);var E=[],k=y.getPathData({normalize:!0}),A=_[0];(r=E).push.apply(r,$traceurRuntime.spread(k)),
this["#seg-sketch"].curved?E.push({type:"C",values:[this["#seg-sketch"].controlPoint1.x,this["#seg-sketch"].controlPoint1.y,this["#seg-sketch"].controlPoint2.x,this["#seg-sketch"].controlPoint2.y,A.values[0],A.values[1]]
}):E.push({type:"L",values:[A.values[0],A.values[1]]}),(a=E).push.apply(a,$traceurRuntime.spread(_.slice(1))),
p.setPathData(E),y.setPathData([]),y.remove()}return body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==y}),this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),
!0},_onNodeGrippieDirectClick:function(e,t){if("select"===this._mode){this._currentPath=e[c.path];
var n=e.getAttribute("data-position");"start"===n?(this._mode="draw-backward",this["#seg-sketch"].show(e[c.path],"start")):(this._mode="draw-forward",
this["#seg-sketch"].show(e[c.path],"end"))}},_onKeyDown:function(e){if("draw-forward"===this._mode||"draw-backward"===this._mode){
var n=t.fromEvent(e);if(n.matches("Enter")||n.matches("Escape"))e.stopPropagation(),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies();else if(n.matches("Shift","Enter")){
e.stopPropagation();var i=(this._currentPath.getAttribute("d"),{type:"Z",values:[]
}),r=this._currentPath.getPathData();r.push(i),this._currentPath.setPathData(r),this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies()}}},_updateNodeGrippies:function(){
this["#node-grippies"].innerHTML="";var e=!0,t=!1,n=void 0;try{for(var i=void 0,a=this._getSelectedPaths()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){
var s=i.value,l=s.getPathData({normalize:!0}),u=l.length,d=void 0,h=void 0;0===u?(d=null,
h=null):1===u?(d=l[0],h=null):u>1&&(d=l[0],h=l[u-1]);var v=o(s,this),f=h&&"Z"===h.type;
if(d&&!f){var m=new SVGPoint(d.values[0],d.values[1]).matrixTransform(v),b=r("svg:ellipse");
b.setAttribute("class","node-grippie"),b.setAttribute("cx",m.x),b.setAttribute("cy",m.y),
b.setAttribute("data-position","start"),b[c.path]=s,this["#node-grippies"].append(b);
}if(h&&!f){var g=void 0;"M"===h.type||"L"===h.type?g=new SVGPoint(h.values[0],h.values[1]).matrixTransform(v):"C"===h.type&&(g=new SVGPoint(h.values[4],h.values[5]).matrixTransform(v));
var p=r("svg:ellipse");p.setAttribute("class","node-grippie"),p.setAttribute("cx",g.x),
p.setAttribute("cy",g.y),p.setAttribute("data-position","end"),p[c.path]=s,this["#node-grippies"].append(p);
}}}catch(y){t=!0,n=y}finally{try{e||null==a["return"]||a["return"]()}finally{if(t)throw n;
}}this._updateNodeGrippiesSize()},_updateNodeGrippiesSize:function(){var e=u/2/body.canvas.scale,t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#node-grippies"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.setAttribute("rx",e),s.setAttribute("ry",e)}}catch(o){n=!0,i=o}finally{
try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_getSelectedPaths:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("data-bx-shape")===!1?t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),v=a("g","bx-cubicsegsdrawhud",h);return{get default(){
return v}}}),System.registerModule("elements/bx-cubicsegsketch",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("utils/geometry"),n=t.comparePoints,i=t.snapPointToAngleMultiple,r=System.get("utils/transform-general").getTransformToElement,a=System.get("classes/vector")["default"],s=(Object.freeze,
'\n  <style>@import url("stylesheets/bx-cubicsegsketch.css");</style>\n\n  <path id="outline" d="M 0 0 C 0 0 0 0 0 0"></path>\n\n  <line id="control-line-1"></line>\n  <line id="control-line-2"></line>\n\n  <circle id="control-point-1-grippie"></circle>\n  <circle id="control-point-2-grippie"></circle>\n'),o=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=s;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,
this._clientX=null,this._clientY=null},get startPoint(){return this._startPoint},
get endPoint(){return this._endPoint},get controlPoint1(){return this._controlPoint1;
},get controlPoint2(){return this._controlPoint2},get curved(){return n(this.startPoint,this.controlPoint1)===!1||n(this.endPoint,this.controlPoint2)===!1;
},show:function(e){var t=void 0!==arguments[1]?arguments[1]:"end";this._position=t,
this._path=e,this._snap="none",this.style.visibility="visible",this._hasListeners===!1&&this._addListeners(),
this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),
this._updateOutlines()},hide:function(){this._path=null,this._clientX=null,this._clientY=null,
this.style.visibility="hidden",this._hasListeners===!0&&this._removeListeners()},
_addListeners:function(){var e=this;this._hasListeners=!0,this._mouseDown=!1,body.addEventListener("modkeyschange",this._modKeysChangeListener=function(){
e._mouseDown===!1&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines());
}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)}),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
var n,r,a,s,o=e._path.getScreenCTM().inverse();if(e._mouseDown=!0,e._mouseDownPoint=new SVGPoint(t.clientX,t.clientY),
e._mouseDownPoint=e._mouseDownPoint.matrixTransform(o),e._mouseDownControlPoint1=SVGPoint.fromPoint(e._controlPoint1),
e._mouseDownControlPoint2=SVGPoint.fromPoint(e._controlPoint2),"end"===e._position)if("paraxialPolygon"===e._snap){
var l=(n=i(e._startPoint,e._endPoint,45)[Symbol.iterator](),(r=n.next()).done?void 0:r.value);
e._endPoint=l}else e._endPoint=SVGPoint.fromPoint(e._mouseDownPoint);else if("start"===e._position)if("paraxialPolygon"===e._snap){
var u=(a=i(e._startPoint,e._endPoint,45)[Symbol.iterator](),(s=a.next()).done?void 0:s.value);
e._endPoint=u}else e._endPoint=new SVGPoint(e._firstSeg.values[0],e._firstSeg.values[1]);
}),window.addEventListener("mousemove",this._mouseMoveListener=function(t){e._clientX=t.clientX,
e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("mouseup",this._mouseUpListener=function(t){
e._mouseDown=!1,e._updateSnapProperty()})},_removeListeners:function(){this._hasListeners=!1,
body.removeEventListener("modkeyschange",this._modKeysChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("mousedown",this._mouseDownListener),window.removeEventListener("mousemove",this._mouseMoveListener),
window.removeEventListener("mouseup",this._mouseUpListener)},_onArtboardMutation:function(e){
var t=e.detail;(t.target===this._path||t.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),
this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())},
_updateSegProperties:function(){if("end"===this._position){var e=this._path.getPathData({
normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1;n>=0;n-=1){var i=e[n];
if("Z"!==i.type){this._lastNonZSeg=i;break}}"C"===t.type?this._lastSegControlPoint=new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?this._lastSegControlPoint=new SVGPoint(t.values[0],t.values[1]):this._lastSegControlPoint=null,
"C"===t.type?this._lastSegIsSmooth=t.values[2]!==t.values[4]||t.values[3]!==t.values[5]:this._lastSegIsSmooth=!1;
}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),a=r[0],s=r[1];
this._firstSeg=a,"C"===s.type?this._secondSegControlPoint=new SVGPoint(s.values[0],s.values[1]):"M"===s.type||"L"===s.type?this._secondSegControlPoint=new SVGPoint(a.values[0],a.values[1]):this._secondSegControlPoint=null,
"C"===s.type?this._secondSegIsSmooth=s.values[0]!==a.values[0]&&s.values[1]!==a.values[1]:this._secondSegIsSmooth=!1;
}},_updatePointProperties:function(){var e,t,n,r;if(this._mouseDown===!1){var s=this._path.getScreenCTM().inverse();
if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),
null===this._clientX?this._endPoint=SVGPoint.fromPoint(this._startPoint):this._endPoint=new SVGPoint(this._clientX,this._clientY).matrixTransform(s)):"start"===this._position&&(null===this._clientX?this._startPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):this._startPoint=new SVGPoint(this._clientX,this._clientY).matrixTransform(s),
this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){
var o;new a(this._startPoint,this._endPoint);"end"===this._position?o=new a(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(o=new a(this._endPoint,this._secondSegControlPoint)),
o=o.negate(),"end"===this._position?(this._controlPoint1=new SVGPoint(this._startPoint.x+o.x,this._startPoint.y+o.y),
this._controlPoint2=SVGPoint.fromPoint(this._endPoint)):"start"===this._position&&(this._controlPoint2=new SVGPoint(this._endPoint.x+o.x,this._endPoint.y+o.y),
this._controlPoint1=SVGPoint.fromPoint(this._startPoint))}else if("polygon"===this._snap)this._controlPoint1=SVGPoint.fromPoint(this._startPoint),
this._controlPoint2=SVGPoint.fromPoint(this._endPoint);else if("paraxialPolygon"===this._snap){
if("end"===this._position){var l=(e=i(this._startPoint,this._endPoint,45)[Symbol.iterator](),
(t=e.next()).done?void 0:t.value);this._endPoint=l}else if("start"===this._position){
var u=(n=i(this._endPoint,this._startPoint,45)[Symbol.iterator](),(r=n.next()).done?void 0:r.value);
this._startPoint=u}this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint);
}}else if(this._mouseDown===!0){var c=this._path.getScreenCTM().inverse(),d=new SVGPoint(this._clientX,this._clientY);
d=d.matrixTransform(c);var h=new a(this._mouseDownPoint,d).negate();"end"===this._position?this._controlPoint2=new SVGPoint(this._mouseDownControlPoint2.x+h.x,this._mouseDownControlPoint2.y+h.y):"start"===this._position&&(this._controlPoint1=new SVGPoint(this._mouseDownControlPoint1.x+h.x,this._mouseDownControlPoint1.y+h.y));
}},_updateSnapProperty:function(){var e=body.modKeys,t=e.ctrl,n=(e.alt,e.shift);t&&!n?this._snap="polygon":t&&n?this._snap="paraxialPolygon":this._snap="none",
"end"===this._position?this._lastSegIsSmooth||"none"!==this._snap||(this._snap="polygon"):"start"===this._position&&(this._secondSegIsSmooth||"none"!==this._snap||(this._snap="polygon"));
},_updateOutlines:function(){var e=r(this._path,this),t=this._startPoint.matrixTransform(e),n=this._endPoint.matrixTransform(e),i=this._controlPoint1.matrixTransform(e),a=this._controlPoint2.matrixTransform(e),s=3/body.canvas.scale,o=[{
type:"M",values:[t.x,t.y]},{type:"C",values:[i.x,i.y,a.x,a.y,n.x,n.y]}];this["#outline"].setPathData(o),
this["#control-point-1-grippie"].cx.baseVal.value=i.x,this["#control-point-1-grippie"].cy.baseVal.value=i.y,
this["#control-point-1-grippie"].r.baseVal.value=s,this["#control-point-2-grippie"].cx.baseVal.value=a.x,
this["#control-point-2-grippie"].cy.baseVal.value=a.y,this["#control-point-2-grippie"].r.baseVal.value=s,
this["#control-line-1"].x1.baseVal.value=t.x,this["#control-line-1"].y1.baseVal.value=t.y,
this["#control-line-1"].x2.baseVal.value=i.x,this["#control-line-1"].y2.baseVal.value=i.y,
this["#control-line-2"].x1.baseVal.value=n.x,this["#control-line-2"].y1.baseVal.value=n.y,
this["#control-line-2"].x2.baseVal.value=a.x,this["#control-line-2"].y2.baseVal.value=a.y;
}},{},e)}(SVGGElement),l=e("g","bx-cubicsegsketch",o);return{get default(){return l;
}}}),System.registerModule("elements/bx-defscontrols",[],function(){"use strict";System.get("elements/bx-button"),
System.get("elements/bx-patternslist"),System.get("elements/bx-symbolslist");var e=System.get("utils/element").registerElement,t='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-defscontrols.css");\n  </style>\n\n  <main>\n    <div id="buttons">\n      <bx-button\n        id="symbols-button"\n        class="button"\n        href="#symbols-list"\n        tooltip="Symbols"\n        icon="symbols-button"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="patterns-button"\n        class="button"\n        href="#patterns-list"\n        tooltip="Patterns"\n        icon="paint-pattern"\n        iconsize="30"\n        skin="iconic">\n      </bx-button>\n    </div>\n\n    <div id="lists">\n      <bx-symbolslist id="symbols-list" class="list"></bx-symbolslist>\n      <bx-patternslist id="patterns-list" class="list"></bx-patternslist>\n    </div>\n  </main>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=t;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#buttons"].addEventListener("click",function(t){
return e._onButtonsClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e;return $traceurRuntime.asyncWrap(function(t){for(;;)switch(t.state){
case 0:return void Promise.resolve(body.getConfig("bx-defscontrols:currentListID")).then(t.createCallback(3),t.errback);
case 3:e=t.value,t.state=2;break;case 2:this._toggleList(e||"symbols-list"),t.state=-2;
break;default:return t.end()}},this)},_onDisabled:function(){this._toggleList(null);
},_onButtonsClick:function(e){"bx-button"===e.target.localName&&0===e.button&&this._onButtonClick(e.target);
},_onButtonClick:function(e){e.pressed===!1&&this._toggleList(e.href.substring(1));
},_toggleList:function(e){var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#buttons"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;null!==e&&s.href==="#"+e?s.pressed=!0:s.pressed=!1}}catch(o){n=!0,i=o;
}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=this["#lists"].children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;null!==e&&v.id===e?(v.enabled=!0,v.hidden=!1):(v.enabled=!1,v.hidden=!0);
}}catch(f){u=!0,c=f}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c;
}}null!==e&&body.setConfig("bx-defscontrols:currentListID",e)}},{},e)}(HTMLElement),i=e("bx-defscontrols",n);
return{get default(){return i}}}),System.registerModule("elements/bx-dock",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/time"),n=t.sleep,i=t.throttle,r='\n  <style>@import url("stylesheets/bx-dock.css");</style>\n\n  <main>\n    <div id="up-grippie" class="grippie">\n      <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n        <use href="images/icons.svg#arrow-up" width="100" height="100"></use>\n      </svg>\n    </div>\n\n    <div id="buttons">\n      <content></content>\n    </div>\n\n    <div id="down-grippie" class="grippie">\n      <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n        <use href="images/icons.svg#arrow-down" width="100" height="100"></use>\n      </svg>\n    </div>\n  </main>\n',a=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r,this._pressedButton=null,this._updateGrippiesVisibility250Th=i(this._updateGrippiesVisibility,250,this);
var t=!0,n=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){n=!0,a=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(n)throw a}}window.addEventListener("resize",function(){return e._updateGrippiesVisibility250Th();
}),this["#buttons"].addEventListener("scroll",function(){return e._updateGrippiesVisibility();
}),this["#buttons"].addEventListener("hiddenchange",function(){return e._updateGrippiesVisibility();
})},attachedCallback:function(){var e;return $traceurRuntime.asyncWrap(function(t){
for(;;)switch(t.state){case 0:e=this,this.addEventListener("mouseenter",this._mouseEnterListener=function(){
e._defaultCursor=body.registerCursor("default",200)}),this.addEventListener("mouseleave",this._mouseLeaveListener=function(){
body.unregisterCursor(e._defaultCursor)}),t.state=6;break;case 6:return void Promise.resolve(n(100)).then(t.createCallback(2),t.errback);
case 2:this._updateGrippiesVisibility(),t.state=8;break;case 8:return void Promise.resolve(n(1e3)).then(t.createCallback(4),t.errback);
case 4:this._updateGrippiesVisibility(),t.state=-2;break;default:return t.end()}},this);
},detachedCallback:function(){this.removeEventListener("mouseenter",this._mouseEnterListener),
this.removeEventListener("mouseleave",this._mouseLeaveListener)},_updateGrippiesVisibility:function(){
0===this["#buttons"].scrollTop?this["#up-grippie"].setAttribute("disabled",""):this["#up-grippie"].removeAttribute("disabled"),
this["#buttons"].scrollTop>=this["#buttons"].scrollHeight-this["#buttons"].offsetHeight?this["#down-grippie"].setAttribute("disabled",""):this["#down-grippie"].removeAttribute("disabled");
}},{},e)}(HTMLElement),s=e("bx-dock",a);return{get default(){return s}}}),System.registerModule("elements/bx-editorbody",[],function(){
"use strict";var e=System.get("elements/bx-body")["default"];System.get("elements/bx-button"),
System.get("elements/bx-canvas"),System.get("elements/bx-dock"),System.get("elements/bx-panel"),
System.get("elements/bx-breadcrumb"),System.get("elements/bx-contextmenu"),System.get("elements/bx-menuitem"),
System.get("elements/bx-fillcontrols"),System.get("elements/bx-strokecontrols"),System.get("elements/bx-compositingcontrols"),
System.get("elements/bx-maskcontrols"),System.get("elements/bx-typographycontrols"),
System.get("elements/bx-viewcontrols"),System.get("elements/bx-arrangementcontrols"),
System.get("elements/bx-defscontrols"),System.get("elements/bx-pathcontrols"),System.get("elements/bx-exportcontrols"),
System.get("elements/bx-geometrycontrols"),System.get("elements/bx-transformtool"),
System.get("elements/bx-edittool"),System.get("elements/bx-quadbeziertool"),System.get("elements/bx-cubicbeziertool"),
System.get("elements/bx-freehandtool"),System.get("elements/bx-texttool"),System.get("elements/bx-triangletool"),
System.get("elements/bx-rectangletool"),System.get("elements/bx-ellipsetool"),System.get("elements/bx-ngontool"),
System.get("elements/bx-startool"),System.get("elements/bx-ringtool");var t=System.get("utils/artwork-rasterization").rasterizeArtwork,n=System.get("utils/artwork-general").isArtworkString,i=System.get("utils/artwork-export").exportArtwork,r=System.get("utils/artwork-import").importArtwork,a=System.get("utils/bbox").getClientBBox,s=System.get("utils/markup").parseSVG,o=System.get("utils/paint").getDefFromURL,l=System.get("utils/path-conversion").ellipseToPath,u=System.get("utils/path-general"),c=u.getSubpathsData,d=u.reversePath,h=System.get("utils/node").closest,v=System.get("utils/path-boolops"),f=v.unite,m=v.subtract,b=v.intersect,g=v.exclude,p=System.get("utils/rect").combineRects,y=System.get("utils/string").capitalize,_=(System.get("utils/time").sleep,
System.get("utils/transform-general")),x=_.getComputedTransformOriginClientPoint,w=_.getTransformToElement,S=System.get("utils/transform-reduction").reduceTransform,C=System.get("utils/element"),E=C.createElement,k=C.registerElement,A=C.getElementIndex,T=C.queryClippingElements,L=(C.queryGraphicsElements,
C.sortByDomPosition),M=C.sortBySiblingElements,P=C.sortByIntersectingElements,R=C.isElementIntersectingElement,j=C.isTransformableElement,O=System.get("classes/shortcut")["default"],V='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"></svg>',D="http://sarasoueidan.com/blog/svg-coordinate-systems/",G='\n  <style>@import url("stylesheets/bx-editorbody.css");</style>\n\n  <main>\n    <bx-canvas id="canvas"></bx-canvas>\n    <bx-breadcrumb id="breadcrumb"></bx-breadcrumb>\n\n    <bx-dock id="tools-dock">\n      <bx-button\n        title="Transform Tool"\n        icon="transform-tool"\n        skin="bx-dock"\n        href="#transform-tool">\n      </bx-button>\n\n      <bx-button\n        title="Edit Tool"\n        icon="edit-tool"\n        skin="bx-dock"\n        href="#edit-tool">\n      </bx-button>\n\n      <bx-button\n        title="Quad Bezier Tool"\n        icon="quad-bezier-tool"\n        skin="bx-dock"\n        href="#quad-bezier-tool">\n      </bx-button>\n\n      <bx-button\n        title="Cubic Bezier Tool"\n        icon="cubic-bezier-tool"\n        skin="bx-dock"\n        href="#cubic-bezier-tool">\n      </bx-button>\n\n      <bx-button id="freehand"\n        title="Freehand Tool"\n        icon="freehand-tool"\n        skin="bx-dock"\n        href="#freehand-tool">\n      </bx-button>\n\n      <bx-button\n        title="Text Tool"\n        icon="text-tool"\n        skin="bx-dock"\n        href="#text-tool">\n      </bx-button>\n\n      <bx-button\n        title="Triangle Tool"\n        icon="triangle-tool"\n        skin="bx-dock"\n        href="#triangle-tool">\n      </bx-button>\n\n      <bx-button\n        title="Rectangle Tool"\n        icon="rectangle-tool"\n        skin="bx-dock"\n        href="#rectangle-tool">\n      </bx-button>\n\n      <bx-button\n        title="N-gon Tool"\n        icon="n-gon-tool"\n        skin="bx-dock"\n        href="#n-gon-tool">\n      </bx-button>\n\n      <bx-button\n        title="Star Tool"\n        icon="star-tool"\n        skin="bx-dock"\n        href="#star-tool">\n      </bx-button>\n\n      <bx-button\n        title="Ellipse Tool"\n        icon="ellipse-tool"\n        skin="bx-dock"\n        href="#ellipse-tool">\n      </bx-button>\n\n      <bx-button\n        title="Ring Tool"\n        icon="ring-tool"\n        skin="bx-dock"\n        href="#ring-tool">\n      </bx-button>\n    </bx-dock>\n\n    <bx-dock id="panels-dock">\n      <bx-button\n        title="Fill Panel"\n        icon="fill-panel"\n        iconsize="23"\n        skin="bx-dock"\n        href="#fill-panel">\n      </bx-button>\n\n      <bx-button\n        title="Stroke Panel"\n        icon="stroke-panel"\n        skin="bx-dock"\n        href="#stroke-panel">\n      </bx-button>\n\n      <bx-button\n        title="Compositing Panel"\n        icon="compositing-panel"\n        skin="bx-dock"\n        href="#compositing-panel">\n      </bx-button>\n\n      <bx-button\n        title="View Panel"\n        icon="view-panel"\n        skin="bx-dock"\n        href="#view-panel">\n      </bx-button>\n\n      <bx-button\n        title="Arrangement Panel"\n        icon="arrangement-panel"\n        skin="bx-dock"\n        href="#arrangement-panel">\n      </bx-button>\n\n      <bx-button\n        title="Typography Panel"\n        icon="typography-panel"\n        iconsize="22"\n        skin="bx-dock"\n        href="#typography-panel">\n      </bx-button>\n\n      <bx-button\n        title="Defs Panel"\n        icon="defs-panel"\n        skin="bx-dock"\n        href="#defs-panel">\n      </bx-button>\n\n      <bx-button\n        title="Mask Panel"\n        icon="mask-panel"\n        skin="bx-dock"\n        href="#mask-panel">\n      </bx-button>\n\n      <bx-button\n        title="Geometry Panel"\n        icon="geometry-panel"\n        skin="bx-dock"\n        href="#geometry-panel">\n      </bx-button>\n\n      <bx-button\n        title="Path Panel"\n        icon="path-panel"\n        skin="bx-dock"\n        href="#path-panel">\n      </bx-button>\n\n      <bx-button\n        title="Export Panel"\n        icon="export-panel"\n        skin="bx-dock"\n        href="#export-panel">\n      </bx-button>\n    </bx-dock>\n\n    <div id="tools">\n      <bx-transformtool id="transform-tool"></bx-transformtool>\n      <bx-edittool id="edit-tool"></bx-edittool>\n      <bx-quadbeziertool id="quad-bezier-tool"></bx-quadbeziertool>\n      <bx-cubicbeziertool id="cubic-bezier-tool"></bx-cubicbeziertool>\n      <bx-freehandtool id="freehand-tool"></bx-freehandtool>\n      <bx-texttool id="text-tool"></bx-texttool>\n      <bx-triangletool id="triangle-tool"></bx-triangletool>\n      <bx-rectangletool id="rectangle-tool"></bx-rectangletool>\n      <bx-ellipsetool id="ellipse-tool"></bx-ellipsetool>\n      <bx-ngontool id="n-gon-tool"></bx-ringtool>\n      <bx-startool id="star-tool"></bx-startool>\n      <bx-ringtool id="ring-tool"></bx-ringtool>\n    </div>\n\n    <div id="panels">\n      <bx-panel id="fill-panel" label="Fill">\n        <bx-fillcontrols></bx-fillcontrols>\n      </bx-panel>\n\n      <bx-panel id="stroke-panel" label="Stroke">\n        <bx-strokecontrols></bx-strokecontrols>\n      </bx-panel>\n\n      <bx-panel id="compositing-panel" label="Compositing">\n        <bx-compositingcontrols></bx-compositingcontrols>\n      </bx-panel>\n\n      <bx-panel id="typography-panel" label="Typography">\n        <bx-typographycontrols></bx-typographycontrols>\n      </bx-panel>\n\n      <bx-panel id="view-panel" height="497" label="View" help="'+D+'">\n        <bx-viewcontrols></bx-viewcontrols>\n      </bx-panel>\n\n      <bx-panel id="arrangement-panel" label="Arrangement">\n        <bx-arrangementcontrols></bx-arrangementcontrols>\n      </bx-panel>\n\n      <bx-panel id="defs-panel" label="Defs">\n        <bx-defscontrols></bx-defscontrols>\n      </bx-panel>\n\n      <bx-panel id="mask-panel" label="Mask">\n        <bx-maskcontrols></bx-maskcontrols>\n      </bx-panel>\n\n      <bx-panel id="geometry-panel" label="Geometry">\n        <bx-geometrycontrols></bx-geometrycontrols>\n      </bx-panel>\n\n      <bx-panel id="path-panel" label="Path">\n        <bx-pathcontrols></bx-pathcontrols>\n      </bx-panel>\n\n      <bx-panel id="export-panel" label="Export">\n        <bx-exportcontrols></bx-exportcontrols>\n      </bx-panel>\n    </div>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n      <bx-menuitem commandid="duplicate" label="Duplicate"></bx-menuitem>\n      <bx-menuitem commandid="delete" label="Delete"></bx-menuitem>\n      <hr/>\n      <bx-menuitem commandid="raise" label="Raise"></bx-menuitem>\n      <bx-menuitem commandid="lower" label="Lower"></bx-menuitem>\n      <hr/>\n      <bx-menuitem commandid="group" label="Group"></bx-menuitem>\n      <bx-menuitem commandid="ungroup" label="Ungroup"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n',I=function(e){
function u(){$traceurRuntime.superConstructor(u).apply(this,arguments)}return $traceurRuntime.createClass(u,{
createdCallback:function(){var e,t,n,a,s,o,l;return $traceurRuntime.asyncWrap(function(c){
for(;;)switch(c.state){case 0:e=this,$traceurRuntime.superGet(this,u.prototype,"createdCallback").call(this),
this.commands={transformTool:{exec:function(){return e.toggleTool("transform-tool");
}},editTool:{exec:function(){return e.toggleTool("edit-tool")}},quadBezierTool:{exec:function(){
return e.toggleTool("quad-bezier-tool")}},cubicBezierTool:{exec:function(){return e.toggleTool("cubic-bezier-tool");
}},freehandTool:{exec:function(){return e.toggleTool("freehand-tool")}},textTool:{
exec:function(){return e.toggleTool("text-tool")}},triangleTool:{exec:function(){
return e.toggleTool("triangle-tool")}},rectangleTool:{exec:function(){return e.toggleTool("rectangle-tool");
}},ellipseTool:{exec:function(){return e.toggleTool("ellipse-tool")}},nGonTool:{exec:function(){
return e.toggleTool("n-gon-tool")}},starTool:{exec:function(){return e.toggleTool("star-tool");
}},ringTool:{exec:function(){return e.toggleTool("ring-tool")}},fillPanel:{exec:function(){
return e.togglePanel("fill-panel")}},strokePanel:{exec:function(){return e.togglePanel("stroke-panel");
}},compositingPanel:{exec:function(){return e.togglePanel("compositing-panel")}},
maskPanel:{exec:function(){return e.togglePanel("mask-panel")}},geometryPanel:{exec:function(){
return e.togglePanel("geometry-panel")}},typographyPanel:{exec:function(){return e.togglePanel("typography-panel");
}},pathPanel:{exec:function(){return e.togglePanel("path-panel")}},exportPanel:{exec:function(){
return e.togglePanel("export-panel")}},viewPanel:{exec:function(){return e.togglePanel("view-panel");
}},arrangementPanel:{exec:function(){return e.togglePanel("arrangement-panel")}},
defsPanel:{exec:function(){return e.togglePanel("defs-panel")}},zoomIn:{exec:function(){
return e.canvas.zoomBy(.3)}},zoomOut:{exec:function(){return e.canvas.zoomBy(-.3);
}},resetZoom:{enabled:function(){return 100!==e.canvas.zoom},exec:function(){return e.canvas.resetZoom();
}},zoomToFitAll:{exec:function(){return e.canvas.zoomToFitAll()}},zoomToViewBox:{
enabled:function(){return e.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){
return e.canvas.zoomToCurrentArtboardViewBox()}},zoomToViewBoxWidth:{enabled:function(){
return e.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){return e.canvas.zoomToCurrentArtboardViewBoxWidth();
}},zoomToViewBoxHeight:{enabled:function(){return e.canvas.currentArtboard.hasAttribute("viewBox");
},exec:function(){return e.canvas.zoomToCurrentArtboardViewBoxHeight()}},undo:{enabled:function(){
return e.canvas.undoManager.canUndo()&&e.isMouseDown===!1},exec:function(){return e.canvas.undoManager.undo();
}},redo:{enabled:function(){return e.canvas.undoManager.canRedo()&&e.isMouseDown===!1;
},exec:function(){return e.canvas.undoManager.redo()}},group:{enabled:function(){
return e._canGroup()},exec:function(){return e._group()}},ungroup:{enabled:function(){
return e._canUngroup()},exec:function(){return e._ungroup()}},convertToPath:{enabled:function(){
return e._canConvertToPath()},exec:function(){return e._convertToPath()}},reversePath:{
enabled:function(){return e._canReversePath()},exec:function(){return e._reversePath();
}},unite:{enabled:function(){return e._canPerformBooleanOperation()},exec:function(){
return e._performBooleanOperation("unite")}},subtract:{enabled:function(){return e._canPerformBooleanOperation();
},exec:function(){return e._performBooleanOperation("subtract")}},intersect:{enabled:function(){
return e._canPerformBooleanOperation()},exec:function(){return e._performBooleanOperation("intersect");
}},exclude:{enabled:function(){return e._canPerformBooleanOperation()},exec:function(){
return e._performBooleanOperation("exclude")}},combine:{enabled:function(){return e._canCombine();
},exec:function(){return e._combine()}},breakApart:{enabled:function(){return e._canBreakApart();
},exec:function(){return e._breakApart()}},raise:{enabled:function(){return e._canRaise();
},exec:function(){return e._raise()}},raiseToFront:{enabled:function(){return e._canRaise();
},exec:function(){return e._raiseToFront()}},lower:{enabled:function(){return e._canLower();
},exec:function(){return e._lower()}},lowerToBack:{enabled:function(){return e._canLower();
},exec:function(){return e._lowerToBack()}},clip:{enabled:function(){return e._canClip();
},exec:function(){return e._clip()}},unclip:{enabled:function(){return e._canUnclip();
},exec:function(){return e._unclip()}},mask:{enabled:function(){return e._canMask();
},exec:function(){return e._mask()}},unmask:{enabled:function(){return e._canUnmask();
},exec:function(){return e._unmask()}},rotateClockwise:{enabled:function(){return e._canRotate();
},exec:function(){return e._rotate(90)}},rotateCounterclockwise:{enabled:function(){
return e._canRotate()},exec:function(){return e._rotate(-90)}},flipX:{enabled:function(){
return e._canFlip()},exec:function(){return e._flip("x")}},flipY:{enabled:function(){
return e._canFlip()},exec:function(){return e._flip("y")}},moveOneUnitLeft:{enabled:function(){
return e._canMove()},exec:function(){return e._move(1,"left")}},moveOneUnitRight:{
enabled:function(){return e._canMove()},exec:function(){return e._move(1,"right");
}},moveOneUnitUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"up");
}},moveOneUnitDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"down");
}},moveTenUnitsLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"left");
}},moveTenUnitsRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"right");
}},moveTenUnitsUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"up");
}},moveTenUnitsDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"down");
}},selectAll:{exec:function(){return e.canvas.selectAll()}},deselectAll:{enabled:function(){
return e.canvas.selectedElements.length>0},exec:function(){return e.canvas.selectedElements=[];
}},copy:{enabled:function(){return e.canvas.selectedElements.length>0},exec:function(){
return e._copy()}},cut:{enabled:function(){return e.canvas.selectedElements.length>0;
},exec:function(){return e._cut()}},paste:{exec:function(){return e._paste()}},duplicate:{
enabled:function(){return e.canvas.selectedElements.length>0},exec:function(){return e._duplicate();
}},"delete":{enabled:function(){return e.canvas.selectedElements.length>0},exec:function(){
return e._delete()}},previousTool:{enabled:function(){return null!==e._previousToolID;
},exec:function(){return e.toggleTool(e._previousToolID)}}},this._previousToolID=null,
this.innerHTML=G,t=!0,n=!1,a=void 0;try{for(s=void 0,o=this.querySelectorAll("[id]")[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)l=s.value,
this["#"+l.id]=l}catch(d){n=!0,a=d}finally{try{t||null==o["return"]||o["return"]();
}finally{if(n)throw a}}this.addEventListener("contextmenu",function(t){return e._onContextMenu(t);
}),this["#tools-dock"].addEventListener("click",function(t){return e._onToolsDockClick(t);
}),this["#panels-dock"].addEventListener("click",function(t){return e._onPanelsDockClick(t);
}),this["#context-menu"].menuWillShow=function(t){return e._menuWillShow(t)},this["#context-menu"].menuItemWillTrigger=function(t){
return e._menuItemWillTrigger(t)},this["#context-menu"].addEventListener("menuitemtrigger",function(t){
return e.execCommand(t.detail.commandID)}),this.bridge.addMessageListener("init",function(t,n){
var i=t,a=i.artwork,s=i.distribution;e._distribution=s,e._updateDockButtonsForDistribution(s),
e.canvas.loadArtwork(r(a)),n()}),this.bridge.addMessageListener("getArtwork",function(t,n){
var r=i(e.canvas.extractArtwork(),t);n(r)}),this.bridge.addMessageListener("getArtworkFromSelectedElements",function(t,n){
var i=e._getArtworkFromSelectedElements(t);n(i)}),this.bridge.addMessageListener("setArtwork",function(t){
var n=r(t);e.canvas.loadArtwork(n)}),this.bridge.addMessageListener("distributionChanged",function(t){
e._updateDockButtonsForDistribution(t)}),this.toggleTool("transform-tool"),c.state=-2;
break;default:return c.end()}},this)},get canvas(){return this.querySelector("#canvas");
},get tools(){return $traceurRuntime.spread(this["#tools"].children)},get panels(){
return $traceurRuntime.spread(this["#panels"].children)},get currentTool(){var e=null,t=this["#tools-dock"].querySelector("bx-button[pressed]");
if(t){var n=t.href.slice(1);e=this["#tools"].querySelector("#"+n)}return e},get currentPanel(){
var e=null,t=this["#panels-dock"].querySelector("bx-button[pressed]");if(t){var n=t.href.slice(1);
e=this["#panels"].querySelector("#"+n)}return e},toggleTool:function(e){var t=this["#tools"].querySelector("#"+e);
if(t){var n=this["#tools-dock"].querySelector('bx-button[href="#'+e+'"]');if(n.pressed===!1){
var i=this["#tools-dock"].querySelector("bx-button[pressed]");if(i){i.pressed=!1,
this._previousToolID=i.href.substring(1);var r=i.href.slice(1),a=this["#tools"].querySelector("#"+r);
a&&(a.enabled=!1)}n.pressed=!0,t.enabled=!0,this.dispatchEvent(new CustomEvent("toolchange",{
detail:e})),this.bridge.postMessage("toolChanged",e.toCamelCase())}}},togglePanel:function(e){
var t=this["#panels"].querySelector("#"+e);if(t){var n=this["#panels-dock"].querySelector('bx-button[href="#'+e+'"]');
if(n.pressed)n.pressed=!1,t.enabled=!1,this.bridge.postMessage("panelChanged",null);else{
var i=this["#panels-dock"].querySelector("bx-button[pressed]");if(i){i.pressed=!1;
var r=i.href.slice(1),a=this["#panels"].querySelector("#"+r);a&&(a.enabled=!1)}n.pressed=!0,
t.enabled=!0,this.bridge.postMessage("panelChanged",e.toCamelCase())}}},rasterizeArtwork:function(e){
var n=void 0!==arguments[1]?arguments[1]:"png",r=void 0!==arguments[2]?arguments[2]:1,a=void 0!==arguments[3]?arguments[3]:!0,s=this;
return new Promise(function(o){var l,u;return $traceurRuntime.asyncWrap(function(c){
for(;;)switch(c.state){case 0:c.state=s._distribution.backendSupportsRasterization?6:1;
break;case 6:l={artwork:i(e,"xml"),format:n,compression:r,transparent:a},s.bridge.postMessage("rasterizeArtwork",l,function(e){
o(e)}),c.state=-2;break;case 1:return void Promise.resolve(t(e,n,r,a)).then(c.createCallback(3),c.errback);
case 3:u=c.value,c.state=2;break;case 2:o(u),c.state=-2;break;default:return c.end();
}},this)})},_onKeyDown:function(e){$traceurRuntime.superGet(this,u.prototype,"_onKeyDown").call(this,e);
var t=O.fromEvent(e);this.canvas.selectedElements.length>0&&(t.matches("Backspace")?this._delete():t.matches("ArrowDown")?this._move(1,"down"):t.matches("ArrowUp")?this._move(1,"up"):t.matches("ArrowLeft")?this._move(1,"left"):t.matches("ArrowRight")?this._move(1,"right"):t.matches("Shift","ArrowDown")?this._move(10,"down"):t.matches("Shift","ArrowUp")?this._move(10,"up"):t.matches("Shift","ArrowLeft")?this._move(10,"left"):t.matches("Shift","ArrowRight")&&this._move(10,"right"));
},_onToolsDockClick:function(e){e.target!==this["#tools-dock"]&&this._onToolsDockButtonClick(e);
},_onPanelsDockClick:function(e){e.target!==this["#panels-dock"]&&this._onPanelsDockButtonClick(e);
},_onToolsDockButtonClick:function(e){var t=e.target,n=t.href.slice(1);this.toggleTool(n);
},_onPanelsDockButtonClick:function(e){var t=e.target,n=t.href.slice(1);this.togglePanel(n);
},_onContextMenu:function(e){this.canvas.contains(e.target)&&(e.preventDefault(),
this["#context-menu"].open(e.clientX,e.clientY))},_menuWillShow:function(e){var t=this;
return new Promise(function(n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(e){this._validateMenuItem(e);
},_validateMenuItem:function(e){var t=this;return new Promise(function(n){var i=e.commandID||null,r=i?t.commands[i]:null;
r&&(e.disabled=r.enabled?!r.enabled():!1),n()})},_getArtworkFromSelectedElements:function(e){
if(0===this.canvas.selectedElements.length)return V;var t=this.canvas.extractArtworkWithSelectedElements(),n=i(t,e);
return n},_updateDockButtonsForDistribution:function(e){var t=!0,n=!1,i=void 0;try{
for(var r=void 0,a=this["#tools-dock"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value,o=s.href.substring(1);s.hidden=e.tools&&e.tools.includes(o)===!1}}catch(l){
n=!0,i=l}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=this["#panels-dock"].children[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value,m=f.href.substring(1);f.hidden=e.panels&&e.panels.includes(m)===!1}
}catch(b){c=!0,d=b}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}"embedded"===e.backend&&this["#tools-dock"].setAttribute("data-extra-whitespace","");
},_copy:function(){var e,t,n,r,a,s,o,l;return $traceurRuntime.asyncWrap(function(u){
for(;;)switch(u.state){case 0:e=this.canvas,t=e.selectedElements,n=e.selectedTextRange,
n&&n.collapsed===!1?(r={"text/plain":n.toString()},this.bridge.postMessage("setClipboardData",r)):t.length>0&&(a=this.canvas.extractArtworkWithSelectedElements(),
s=i(a,"html"),o=i(a,"xml"),l={"text/plain":s,"text/html":s,"image/svg+xml":o},this.bridge.postMessage("setClipboardData",l)),
u.state=-2;break;default:return u.end()}},this)},_paste:function(){var e=this,t=this.canvas.matches(":hover")?"pointer":"canvasCenter";
this.bridge.postMessage("getClipboardData",null,function(i){i["text/html"]&&n(i["text/html"])?e._pasteSVG(i["text/html"],t):i["image/png"]?e._pastePNG(i["image/png"],t):i["text/plain"]&&e._pasteText(i["text/plain"],t);
})},_pasteSVG:function(e,t){this.canvas.undoManager.checkpoint("Paste");var n=r(e);
this.canvas.insertArtwork(n,t)},_pastePNG:function(e){this.canvas.undoManager.checkpoint("Paste"),
this.canvas.insertBitmap(e)},_pasteText:function(e){this.canvas.undoManager.checkpoint("Paste");
var t=this.canvas.selectedTextRange;if(t){var n=h(t.startContainer,"tspan"),i=n.parentElement,r=null,a=null,o=[],l=!0,u=!1,c=void 0;
try{for(var d=void 0,v=i.children[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){
var f=d.value;if(f.contains(t.startContainer)&&(r=f),f.contains(t.endContainer)){
a=f;break}r&&f!==r&&o.push(f)}}catch(m){u=!0,c=m}finally{try{l||null==v["return"]||v["return"]();
}finally{if(u)throw c}}if(r===a){var b=r,g=t.startOffset,p=b.textContent.substring(0,t.startOffset),y=b.textContent.substring(t.endOffset);
b.textContent=p+e+y;var _=new Range;_.setStart(b.firstChild,g+e.length),_.setEnd(b.firstChild,g+e.length),
this.canvas.selectedTextRange=_}else{var x=t.startOffset,S=r.textContent.substring(0,t.startOffset),C=a.textContent.substring(t.endOffset);
r.textContent=S+e,a.textContent=C;var E=!0,k=!1,A=void 0;try{for(var T=void 0,L=o[Symbol.iterator]();!(E=(T=L.next()).done);E=!0){
var M=T.value;M.textContent=""}}catch(P){k=!0,A=P}finally{try{E||null==L["return"]||L["return"]();
}finally{if(k)throw A}}var R=!0,j=!1,O=void 0;try{for(var V=void 0,D=$traceurRuntime.spread(i.children)[Symbol.iterator]();!(R=(V=D.next()).done);R=!0){
var G=V.value;""===G.textContent&&G.remove()}}catch(I){j=!0,O=I}finally{try{R||null==D["return"]||D["return"]();
}finally{if(j)throw O}}var N=new Range;N.setStart(r.firstChild,x+e.length),N.setEnd(r.firstChild,x+e.length),
this.canvas.selectedTextRange=N}}else{var B=this.canvas.currentContainer||this.canvas.currentArtboard,U=B.getScreenCTM().inverse(),z=new SVGPoint(this.mouseClientX,this.mouseClientY),H=z.matrixTransform(U),F=w(B,this.canvas.currentArtboard).inverse(),q=s('<text style="font-size: 30;"><tspan>'+e+"</tspan></text>");
q.setAttribute("transform",F.toString()),q.setAttribute("x",H.x),q.setAttribute("y",H.y),
B.append(q),this.canvas.selectedElements=[q],this.canvas.currentContainer=B===this.canvas.currentArtboard?null:B;
}},_duplicate:function(){this.canvas.undoManager.checkpoint("Duplicate");var e=this.canvas.extractArtworkWithSelectedElements();
this.canvas.insertArtwork(e,"original"),this.canvas.transformHud.blink()},_cut:function(){
this.canvas.undoManager.checkpoint("Cut"),this._copy();var e=L(this.canvas.selectedElements);
e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.remove()}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},_delete:function(){if(this.canvas.selectedElements.length>0){
this.canvas.undoManager.checkpoint("Delete");var e=L(this.canvas.selectedElements);
e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.remove()}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}},_clip:function(){this.canvas.undoManager.checkpoint("Clip");
var e=this.canvas.selectedElements[0],t=T(this.canvas.selectedElements.slice(1)),n=this.canvas.generateUniqueID("clip"),i=E("svg:clipPath");
i.id=n,this.canvas.defs.append(i);var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,c=w(u,e);u.setAttribute("transform",c.toString()),i.appendChild(u)}
}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.canvas.selectedElements=this.canvas.selectedElements.filter(function(e){return t.includes(e)===!1;
}),e.style.clipPath="url(#"+n+")"},_canClip:function(){var e=!1,t=this.canvas.selectedElements[0]||null,n=this.canvas.selectedElements.slice(1),i=T(n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
if(R(u,t)){e=!0;break}}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return null!==t&&e!==!1},_unclip:function(){this.canvas.undoManager.checkpoint("Unclip");
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;if("none"!==getComputedStyle(a).clipPath){var s=a,l=o(this.canvas.masterArtboard,a.style.clipPath);
if(l){var u=$traceurRuntime.spread(l.children),c=!0,d=!1,h=void 0;try{for(var v=void 0,f=u[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value,b=w(m,this.canvas.currentArtboard),g=s.transform.baseVal.consolidate().matrix.multiply(b);
m.setAttribute("transform",g.toString()),this.canvas.currentArtboard.appendChild(m);
}}catch(p){d=!0,h=p}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}a.style.clipPath=null}}}}catch(y){t=!0,n=y}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}},_canUnclip:function(){var e=!1,t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this.canvas.selectedElements[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value,l=getComputedStyle(s).clipPath;if("none"!==l){var u=o(this.canvas.masterArtboard,l);
if(u){e=!0;break}}}}catch(c){n=!0,i=c}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}return e},_mask:function(){this.canvas.undoManager.checkpoint("Mask");
var e=this.canvas.selectedElements[0],t=this.canvas.selectedElements.slice(1),n=this.canvas.generateUniqueID("mask"),i=E("svg:mask");
i.id=n,this.canvas.defs.append(i);var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,c=w(u,e);u.setAttribute("transform",c.toString()),i.appendChild(u)}
}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}this.canvas.selectedElements=this.canvas.selectedElements.filter(function(e){return t.includes(e)===!1;
}),e.style.mask="url(#"+n+")"},_canMask:function(){var e=!1,t=this.canvas.selectedElements[0]||null,n=this.canvas.selectedElements.slice(1),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
if(R(l,t)){e=!0;break}}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return null!==t&&e!==!1},_unmask:function(){this.canvas.undoManager.checkpoint("Unmask");
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;if("none"!==getComputedStyle(a).mask){var s=a,l=o(this.canvas.masterArtboard,a.style.mask);
if(l){var u=$traceurRuntime.spread(l.children),c=!0,d=!1,h=void 0;try{for(var v=void 0,f=u[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value,b=w(m,this.canvas.currentArtboard),g=s.transform.baseVal.consolidate().matrix.multiply(b);
m.setAttribute("transform",g.toString()),this.canvas.currentArtboard.appendChild(m);
}}catch(p){d=!0,h=p}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}a.style.mask=null}}}}catch(y){t=!0,n=y}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}},_canUnmask:function(){var e=!1,t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this.canvas.selectedElements[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value,l=getComputedStyle(s).mask;if("none"!==l){var u=o(this.canvas.masterArtboard,l);
if(u){e=!0;break}}}}catch(c){n=!0,i=c}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}return e},_move:function(){var e=void 0!==arguments[0]?arguments[0]:1,t=void 0!==arguments[1]?arguments[1]:"left";
this.canvas.undoManager.checkpoint("Move");var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this.canvas.selectedElements[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=SVGMatrix.fromMatrix(o.transform.baseVal.consolidate().matrix),u=w(o,this.canvas.currentArtboard),c=u.inverse(),d=new SVGMatrix;
"left"===t?d.translateSelf(-e,0):"right"===t?d.translateSelf(e,0):"up"===t?d.translateSelf(0,-e):"down"===t&&d.translateSelf(0,e);
var h=SVGMatrix.fromMatrix(l);h.multiplySelf(c),h.multiplySelf(d),h.multiplySelf(u),
o.setAttribute("transform",h.toString())}}catch(v){i=!0,r=v}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}},_canMove:function(){return this.canvas.selectedElements.length>0;
},_flip:function(){var e=void 0!==arguments[0]?arguments[0]:"x";this.canvas.undoManager.checkpoint("Flip");
var t=$traceurRuntime.spread(this.canvas.selectedElements),n=function(){var e=0,n=[],i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;
n[e++]=a(u)}}catch(c){r=!0,s=c}finally{try{i||null==l["return"]||l["return"]()}finally{
if(r)throw s}}return n}(),i=p(n),r=!0,s=!1,o=void 0;try{for(var l=void 0,u=t[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value,d=SVGMatrix.fromMatrix(c.transform.baseVal.consolidate().matrix),h=c.getScreenCTM(),v=h.inverse(),f=void 0;
if("x"===e){var m=2*(i.x+i.width/2);f=new SVGMatrix([-1,0,0,1,m,0])}else if("y"===e){
var b=2*(i.y+i.height/2);f=new SVGMatrix([1,0,0,-1,0,b])}var g=SVGMatrix.fromMatrix(d);
g.multiplySelf(v),g.multiplySelf(f),g.multiplySelf(h),c.setAttribute("transform",g.toString());
}}catch(y){s=!0,o=y}finally{try{r||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}},_canFlip:function(){return this.canvas.selectedElements.length>0},_raise:function(){
this.canvas.undoManager.checkpoint("Raise");var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=M(this.canvas.selectedElements)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var e=v.value,t=$traceurRuntime.spread(e[0].parentElement.children).filter(function(t){
if(e.includes(t))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(R(t,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=t.find(function(t){return A(t)>A(e[e.length-1]);
});if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=e.reverse()[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.after(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=P(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(b){t=!0,n=b}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_raiseToFront:function(){this.canvas.undoManager.checkpoint("Raise to Front");
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=M(this.canvas.selectedElements)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var e=v.value,t=$traceurRuntime.spread(e[0].parentElement.children).filter(function(t){
if(e.includes(t))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(R(t,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=t[t.length-1];if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=e.reverse()[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.after(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=P(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(b){t=!0,n=b}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_canRaise:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=M(this.canvas.selectedElements)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=function(){var e=d.value,t=$traceurRuntime.spread(e[0].parentElement.children).filter(function(t){
if(e.includes(t))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(R(t,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=t.find(function(t){return A(t)>A(e[e.length-1]);
});return n?{v:!0}:void 0},c=void 0,d=void 0,h=P(a)[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)if(c=u(),
"object"===("undefined"==typeof c?"undefined":$traceurRuntime["typeof"](c)))return c.v;
}catch(v){o=!0,l=v}finally{try{s||null==h["return"]||h["return"]()}finally{if(o)throw l;
}}}}catch(f){t=!0,n=f}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}return!1},_lower:function(){this.canvas.undoManager.checkpoint("Lower");var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=M(this.canvas.selectedElements)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var e=v.value,t=$traceurRuntime.spread(e[0].parentElement.children).filter(function(t){
if(e.includes(t))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(R(t,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=t.reverse().find(function(t){return A(t)<A(e[0]);
});if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=e[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.before(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=P(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(b){t=!0,n=b}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_lowerToBack:function(){this.canvas.undoManager.checkpoint("Lower to Back");var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=M(this.canvas.selectedElements)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=void 0,d=void 0,h=function(){
var e=v.value,t=$traceurRuntime.spread(e[0].parentElement.children).filter(function(t){
if(e.includes(t))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(R(t,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=t[0];if(n){u=!0,c=!1,d=void 0;try{for(var i=void 0,r=e[Symbol.iterator]();!(u=(i=r.next()).done);u=!0){
var a=i.value;n.before(a)}}catch(s){c=!0,d=s}finally{try{u||null==r["return"]||r["return"]();
}finally{if(c)throw d}}}},v=void 0,f=P(a)[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h();
}catch(m){o=!0,l=m}finally{try{s||null==f["return"]||f["return"]()}finally{if(o)throw l;
}}}}catch(b){t=!0,n=b}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_canLower:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=M(this.canvas.selectedElements)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=function(){var e=d.value,t=$traceurRuntime.spread(e[0].parentElement.children).filter(function(t){
if(e.includes(t))return!1;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(R(t,o))return!0}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!1}),n=t.reverse().find(function(t){return A(t)<A(e[0]);
});return n?{v:!0}:void 0},c=void 0,d=void 0,h=P(a)[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)if(c=u(),
"object"===("undefined"==typeof c?"undefined":$traceurRuntime["typeof"](c)))return c.v;
}catch(v){o=!0,l=v}finally{try{s||null==h["return"]||h["return"]()}finally{if(o)throw l;
}}}}catch(f){t=!0,n=f}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}return!1},_rotate:function(){var e=void 0!==arguments[0]?arguments[0]:90;this.canvas.undoManager.checkpoint("Rotate");
var t=$traceurRuntime.spread(this.canvas.selectedElements),n=x(t),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=SVGMatrix.fromMatrix(l.transform.baseVal.consolidate().matrix),c=l.getScreenCTM(),d=c.inverse(),h=SVGMatrix.fromMatrix(u);
h.multiplySelf(d),h.rotateSelf(e,n.x,n.y),h.multiplySelf(c),l.setAttribute("transform",h.toString());
}}catch(v){r=!0,a=v}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}},_canRotate:function(){return this.canvas.selectedElements.length>0},_group:function(){
this.canvas.undoManager.checkpoint("Group");var e=$traceurRuntime.spread(this.canvas.selectedElements),t=E("svg:g");
e[0].after(t),e=L(e);var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=w(o,t);o.setAttribute("transform",l.toString()),t.append(o)}}catch(u){
i=!0,r=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}this.canvas.selectedElements=[t];
},_canGroup:function(){return this.canvas.selectedElements.length>0},_ungroup:function(){
this.canvas.undoManager.checkpoint("Ungroup");var e=$traceurRuntime.spread(this.canvas.selectedElements),t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if("g"===o.localName){var l=o,u=!0,c=!1,d=void 0;try{for(var h=void 0,v=$traceurRuntime.spread(l.children)[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;if(j(f)){var m=w(f,l.parentElement);f.setAttribute("transform",m.toString()),
t.push(f)}l.before(f)}}catch(b){c=!0,d=b}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}l.remove()}else j(f)&&t.push(o)}}catch(g){i=!0,r=g}finally{
try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}this.canvas.selectedElements=$traceurRuntime.spread(t);
},_canUngroup:function(){return this.canvas.selectedElements.length>0},_convertToPath:function(){
var e,t,n,i,r,a,s,o,u,c,d;return $traceurRuntime.asyncWrap(function(h){for(;;)switch(h.state){
case 0:h.state=this._canConvertToPath()===!1?1:3;break;case 1:h.returnValue=void 0,
h.state=2;break;case 2:h.state=-2;break;case 3:this.canvas.undoManager.checkpoint("Convert to path"),
body.canvas.selectedTextRange=null,e=[],t=!0,n=!1,i=void 0,h.state=44;break;case 44:
h.pushTry(30,31),h.state=33;break;case 33:r=void 0,a=this.canvas.selectedElements[Symbol.iterator](),
h.state=29;break;case 29:h.state=(t=(r=a.next()).done)?27:25;break;case 23:t=!0,h.state=29;
break;case 25:s=r.value,h.state=26;break;case 26:h.state="ellipse"===s.localName?22:21;
break;case 22:o=l(s),s.replace(o),e.push(o),h.state=23;break;case 21:h.state="path"===s.localName?19:18;
break;case 19:s.hasAttribute("data-bx-shape")&&s.removeAttribute("data-bx-shape"),
e.push(s),h.state=23;break;case 18:h.state="text"===s.localName?5:16;break;case 5:
return void Promise.resolve(this.canvas.googleFontsManager.canReplaceTextWithPaths(s)).then(h.createCallback(7),h.errback);
case 7:u=h.value,h.state=6;break;case 6:h.state=u?8:13;break;case 8:return void Promise.resolve(this.canvas.googleFontsManager.replaceTextWithPaths(s)).then(h.createCallback(10),h.errback);
case 10:c=h.value,h.state=9;break;case 9:e=$traceurRuntime.spread(e,c),h.state=23;
break;case 13:e.push(s),h.state=23;break;case 16:e.push(s),h.state=23;break;case 27:
h.popTry(),h.state=31,h.finallyFallThrough=35;break;case 30:h.popTry(),h.maybeUncatchable(),
d=h.storedException,h.state=36;break;case 36:n=!0,i=d,h.state=31,h.finallyFallThrough=35;
break;case 31:h.popTry(),h.state=42;break;case 42:try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}h.state=40;break;case 35:body.canvas.selectedElements=e,h.state=-2;
break;case 40:h.state=h.finallyFallThrough;break;default:return h.end()}},this)},
_canConvertToPath:function(){var e=this;return new Promise(function(t){var n,i,r,a,s,o,l,u;
return $traceurRuntime.asyncWrap(function(c){for(;;)switch(c.state){case 0:n=!1,i=!0,
r=!1,a=void 0,c.state=38;break;case 38:c.pushTry(24,25),c.state=27;break;case 27:
s=void 0,o=e.canvas.selectedElements[Symbol.iterator](),c.state=23;break;case 23:
c.state=(i=(s=o.next()).done)?21:19;break;case 17:i=!0,c.state=23;break;case 19:l=s.value,
c.state=20;break;case 20:c.state="ellipse"===l.localName?16:15;break;case 16:n=!0,
c.state=17;break;case 15:c.state="path"===l.localName?7:14;break;case 7:c.state=l.hasAttribute("data-bx-shape")?5:3;
break;case 5:n=!0,c.state=17;break;case 3:n=!1,c.state=21;break;case 14:c.state="text"===l.localName?8:17;
break;case 8:return void Promise.resolve(e.canvas.googleFontsManager.canReplaceTextWithPaths(l)).then(c.createCallback(10),c.errback);
case 10:n=c.value,c.state=9;break;case 9:c.state=n===!1?21:17;break;case 21:c.popTry(),
c.state=25,c.finallyFallThrough=29;break;case 24:c.popTry(),c.maybeUncatchable(),
u=c.storedException,c.state=30;break;case 30:r=!0,a=u,c.state=25,c.finallyFallThrough=29;
break;case 25:c.popTry(),c.state=36;break;case 36:try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}c.state=34;break;case 29:t(n),c.state=-2;break;case 34:c.state=c.finallyFallThrough;
break;default:return c.end()}},this)})},_reversePath:function(){if(this._canReversePath()!==!1){
this.canvas.undoManager.checkpoint("Reverse path");var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;"path"===a.localName&&a.hasAttribute("data-bx-shape")===!1&&d(a)}}catch(s){
t=!0,n=s}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}}},
_canReversePath:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;if("path"===a.localName&&a.hasAttribute("data-bx-shape")===!1)return!0;
}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}return!1},_performBooleanOperation:function(){var e,t,n,i,r=void 0!==arguments[0]?arguments[0]:"unite";
if(this._canPerformBooleanOperation()!==!1){this.canvas.undoManager.checkpoint(y(r));
var a=this.canvas.selectedElements,s=(e=a[Symbol.iterator](),(t=e.next()).done?void 0:t.value),o=$traceurRuntime.iteratorToArray(e),u=[],c=!0,d=!1,h=void 0;
try{for(var v=void 0,p=this.canvas.selectedElements[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){
var _=v.value,x=void 0;"path"===_.localName?(x=_.cloneNode(),x.hasAttribute("data-bx-shape")&&x.removeAttribute("data-bx-shape")):"ellipse"===_.localName&&(x=l(_));
var C=w(_,s.parentElement).toString();x.setAttribute("transform",C),x.setPathData(x.getPathData({
normalize:!0})),S(x),u.push(x)}}catch(E){d=!0,h=E}finally{try{c||null==p["return"]||p["return"]();
}finally{if(d)throw h}}var k=u,A=(n=k[Symbol.iterator](),(i=n.next()).done?void 0:i.value),T=$traceurRuntime.iteratorToArray(n),L=!0,M=!1,P=void 0;
try{for(var R=void 0,j=T[Symbol.iterator]();!(L=(R=j.next()).done);L=!0){var O=R.value,V=A.getAttribute("d"),D=O.getAttribute("d"),G=null;
"unite"===r?G=f(V,D):"subtract"===r?G=m(V,D):"intersect"===r?G=b(V,D):"exclude"===r&&(G=g(V,D)),
G?A.setAttribute("d",G):A.removeAttribute("d")}}catch(I){M=!0,P=I}finally{try{L||null==j["return"]||j["return"]();
}finally{if(M)throw P}}A.hasAttribute("d")?s.replace(A):s.remove();var N=!0,B=!1,U=void 0;
try{for(var z=void 0,H=o[Symbol.iterator]();!(N=(z=H.next()).done);N=!0){var F=z.value;
F.remove()}}catch(q){B=!0,U=q}finally{try{N||null==H["return"]||H["return"]()}finally{
if(B)throw U}}A.hasAttribute("d")?this.canvas.selectedElements=[A]:this.canvas.selectedElements=[];
}},_canPerformBooleanOperation:function(){if(this.canvas.selectedElements.length<2)return!1;
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;if(["path","ellipse"].includes(a.localName)===!1)return!1}}catch(s){
t=!0,n=s}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}return!0;
},_combine:function(){var e,t,n,i;if(this._canCombine()!==!1){this.canvas.undoManager.checkpoint("Combine");
var r=this.canvas.selectedElements,a=(e=r[Symbol.iterator](),(t=e.next()).done?void 0:t.value),s=$traceurRuntime.iteratorToArray(e),o=[],u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=this.canvas.selectedElements[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value,m=void 0;"path"===f.localName?(m=f.cloneNode(),m.removeAttribute("data-bx-shape")):"ellipse"===f.localName&&(m=l(f));
var b=w(f,a.parentElement).toString();m.setAttribute("transform",b),m.setPathData(m.getPathData({
normalize:!0})),S(m),o.push(m)}}catch(g){c=!0,d=g}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}var p=o,y=(n=p[Symbol.iterator](),(i=n.next()).done?void 0:i.value),_=$traceurRuntime.iteratorToArray(n),x=y.getPathData(),C=!0,E=!1,k=void 0;
try{for(var A=void 0,T=_[Symbol.iterator]();!(C=(A=T.next()).done);C=!0){var L=A.value,M=L.getPathData();
x=$traceurRuntime.spread(x,M)}}catch(P){E=!0,k=P}finally{try{C||null==T["return"]||T["return"]();
}finally{if(E)throw k}}y.setPathData(x),a.replace(y);var R=!0,j=!1,O=void 0;try{for(var V=void 0,D=s[Symbol.iterator]();!(R=(V=D.next()).done);R=!0){
var G=V.value;G.remove()}}catch(I){j=!0,O=I}finally{try{R||null==D["return"]||D["return"]();
}finally{if(j)throw O}}this.canvas.selectedElements=[y]}},_canCombine:function(){
if(this.canvas.selectedElements.length<2)return!1;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;if(["path","ellipse"].includes(a.localName)===!1)return!1}}catch(s){
t=!0,n=s}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}return!0;
},_breakApart:function(){},_canBreakApart:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.canvas.selectedElements[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;if("path"===a.localName&&a.hasAttribute("data-bx-shape")===!1){var s=c(a.getPathData(!0));
if(s.length>1)return!1}}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}return!1}},{},e)}(e),N=k("body","bx-editorbody",I);return{
get default(){return N}}}),System.registerModule("elements/bx-edittool",[],function(){
"use strict";var e=System.get("utils/bbox").getClientBBox,t=System.get("utils/element"),n=(t.isTransformableElement,
t.registerElement),i=t.queryGraphicsElements,r=System.get("utils/event").isMouseMoveIntentional,a=System.get("utils/node").closest,s=System.get("utils/rect"),o=s.rectContainsRect,l=s.transformRect,u=System.get("utils/text").getRangeOffsetRelativeToElement,c=System.get("utils/time").debounce,d=(System.get("classes/vector")["default"],
System.get("classes/shortcut")["default"]),h=System.get("utils/constants").GRAPHICS_ELEMENTS,v=Node.DOCUMENT_POSITION_PRECEDING,f=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._onKeyPress300Db=c(this._onKeyPress300Db,300,this,!0),
this._onBackspaceKeyDown600Db=c(this._onBackspaceKeyDown600Db,600,this,!0);var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_enableTextInputMode:function(){var e=this;body.canvas.textInputMode=!0,document.addEventListener("selectionchange",this._selectionChangeListener=function(){
e._onSystemSelectionChange()}),document.addEventListener("mousedown",this._documentMouseDownListener=function(t){
e._onDocumentMouseDown(t)}),document.addEventListener("keydown",this._keydownListener=function(t){
e._onKeyDown(t)}),document.addEventListener("keypress",this._keypressListener=function(t){
e._onKeyPress300Db(t),e._onKeyPress(t)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
e._onUndoOrRedo()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
e._onUndoOrRedo()})},_disableTextInputMode:function(){body.canvas.textInputMode=!1,
document.removeEventListener("selectionchange",this._selectionChangeListener),document.removeEventListener("mousedown",this._documentMouseDownListener),
document.removeEventListener("keydown",this._keydownListener),document.removeEventListener("keypress",this._keypressListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.undoManager.removeEventListener("undo",this._undoListener),body.canvas.undoManager.removeEventListener("redo",this._redoListener);
},_onEnabled:function(){var e=this;if(body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("triangle-hud"),
body.canvas.enableHud("rect-hud"),body.canvas.enableHud("ellipse-hud"),body.canvas.enableHud("n-gon-hud"),
body.canvas.enableHud("star-hud"),body.canvas.enableHud("ring-hud"),body.canvas.enableHud("paths-edit-hud"),
body.canvas.enableHud("rubber-band-hud"),body.canvas.enableHud("selected-text-range-hud"),
body.canvas.artboards.addEventListener("mousedown",this._artboardMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),1===body.canvas.selectedElements.length&&"text"===body.canvas.selectedElements[0].localName){
var t=body.canvas.selectedElements[0];this._enableTextInputMode();var n=new Range;
n.selectNodeContents(t),body.canvas.selectedTextRange=n,this._setSystemSelectionToCanvasSelectedTextRange();
}},_onDisabled:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("triangle-hud"),
body.canvas.disableHud("rect-hud"),body.canvas.disableHud("ellipse-hud"),body.canvas.disableHud("n-gon-hud"),
body.canvas.disableHud("star-hud"),body.canvas.disableHud("ring-hud"),body.canvas.disableHud("paths-edit-hud"),
body.canvas.disableHud("rubber-band-hud"),body.canvas.disableHud("selected-text-range-hud"),
body.canvas.artboards.removeEventListener("mousedown",this._artboardMouseDownListener),
body.canvas.selectedTextRange=null,this._disableTextInputMode()},_onSelectedElementsChange:function(){
if(body.canvas.selectedTextRange){var e=a(body.canvas.selectedTextRange.startContainer,"text"),t=body.canvas.selectedElements.find(function(t){
return t===e||t.contains(e)});t||(body.canvas.selectedTextRange=null)}},_onSystemSelectionChange:function(){
var e=body.canvas._shadowRoot.getSelection();if("None"!==e.type){var t=i(body.canvas.selectedElements),n=t.length>0?t[0]:null,r=e.getRangeAt(0).cloneRange(),a=n&&"text"===n.localName?n:null;
a&&a.contains(r.startContainer)&&a!==r.startContainer&&a.contains(r.endContainer)&&a!==r.endContainer&&(r.direction=this._getSelectionDirection(e),
body.canvas.selectedTextRange=r)}},_onUndoOrRedo:function(){body.canvas.selectedTextRange=null,
this._setSystemSelectionToCanvasSelectedTextRange()},_onKeyDown:function(e){var t=d.fromEvent(e);
t.ctrl||t.alt||t.meta||e.stopImmediatePropagation(),body.isMouseDown?(e.preventDefault(),
e.stopImmediatePropagation()):t.includes("ArrowUp")||t.includes("ArrowDown")?(e.preventDefault(),
e.stopImmediatePropagation()):t.includes("ArrowLeft")||t.includes("ArrowRight")?this._setSystemSelectionToCanvasSelectedTextRange():t.matches("Control","A")?(e.preventDefault(),
e.stopImmediatePropagation(),this._selectAll()):t.matches("Enter")?(e.preventDefault(),
e.stopImmediatePropagation()):t.includes("Backspace")&&(e.preventDefault(),e.stopImmediatePropagation(),
this._onBackspaceKeyDown600Db(e),this._onBackspaceKeyDown(e))},_onBackspaceKeyDown:function(e){
this._setSystemSelectionToCanvasSelectedTextRange();var t=body.canvas.selectedTextRange,n=a(t.startContainer,"text"),i=u(t,n,"start");
t.collapsed===!0&&0===i||(document.execCommand("delete"),0===n.textContent.length&&(n.remove(),
body.canvas.selectedTextRange=null,this._disableTextInputMode()))},_onBackspaceKeyDown600Db:function(e){
body.canvas.undoManager.checkpoint("Delete text")},_onKeyPress:function(e){var t=a(body.canvas.selectedTextRange.startContainer,"text"),n=a(body.canvas.selectedTextRange.startContainer,"textPath"),i=n||t,r=body.canvas.selectedTextRange;
if(r.collapsed===!1&&r.toString()===i.textContent){var s=i.children[0],o=String.fromCharCode(e.keyCode);
for(s.innerHTML=o;i.childElementCount>1;)i.lastChild.remove();e.preventDefault(),
r.selectNodeContents(s),r.collapse(),this._setSystemSelectionToCanvasSelectedTextRange();
}},_onKeyPress300Db:function(e){body.canvas.undoManager.checkpoint("Text")},_onDocumentMouseDown:function(e){
e.target!==body.canvas&&this._disableTextInputMode()},_onArtboardMouseDown:function(e){
var t=this;if(0===e.button){var n=body.canvas.getHitArtboardElements(e.clientX,e.clientY),i=n.length>0?n[n.length-1]:null,a=i&&"text"===i.localName?i:null;
if(a?this._onMouseDownTextElementHit(i,e):i?this._onMouseDownNonTextElementHit(i,e):this._onMouseDownEmptySpaceHit(),
null===a){var s,o;window.addEventListener("mousemove",s=function(n){r(e,n)&&(window.removeEventListener("mousemove",s),
t._onArtboardIntentionalDragStart(e,n))}),window.addEventListener("mouseup",o=function(n){
window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o),
e.clientX===n.clientX&&e.clientY===n.clientY&&t._onArtboardClick(n)})}}},_onMouseDownTextElementHit:function(e,t){
var n=body.modKeys.shift;if(n===!1)body.canvas.selectedElements=[e],this._updateCurrentContainer(),
body.canvas.textInputMode||this._enableTextInputMode(e);else if(n===!0){var i=body.canvas.selectedElements.find(function(t){
return t.contains(e)});i?(body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==i}),body.canvas.selectedTextRange=null):body.canvas.selectedElements.includes(e)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==e}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[e]),
this._updateCurrentContainer(),body.canvas.textInputMode||this._enableTextInputMode(e);
}t.detail>=3&&(t.preventDefault(),this._selectAll())},_onMouseDownNonTextElementHit:function(){
this._disableTextInputMode(),null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null);
},_onMouseDownEmptySpaceHit:function(){this._disableTextInputMode(),null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null);
},_onArtboardIntentionalDragStart:function(e){var t,n,i,r,a;return $traceurRuntime.asyncWrap(function(s){
for(;;)switch(s.state){case 0:t=e,n=t.clientX,i=t.clientY,s.state=5;break;case 5:
return void Promise.resolve(body.canvas.rubberBandHud.grabSelection(n,i)).then(s.createCallback(3),s.errback);
case 3:r=s.value,s.state=2;break;case 2:a=this._getSelectedPaths(),a.length>0?body.canvas.pathsEditHud.rubberBandSelectionCallback(r):(null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null),
body.canvas.selectedElements=this._getElementsInBBox(r),this._updateCurrentContainer()),
s.state=-2;break;default:return s.end()}},this)},_onArtboardClick:function(e){var t=body.modKeys.shift,n=body.canvas.getHitArtboardElements(e.clientX,e.clientY),i=n.length>0?n[n.length-1]:null;
if(i){if(t===!1)body.canvas.selectedElements=[i],null!==body.canvas.selectedTextRange&&(body.canvas.selectedTextRange=null),
this._updateCurrentContainer();else if(t===!0){var r=body.canvas.selectedElements.find(function(e){
return e.contains(i)});r?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==r}):body.canvas.selectedElements.includes(i)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==i}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[i]),
this._updateCurrentContainer()}}else body.canvas.selectedElements=[],this._updateCurrentContainer();
},_selectAll:function(){if(null!==body.canvas.selectedTextRange){var e=a(body.canvas.selectedTextRange.startContainer,"text"),t=a(body.canvas.selectedTextRange.startContainer,"textPath"),n=t||e,i=n.childNodes[0],r=n.childNodes[n.childNodes.length-1],s=new Range;
s.setStart(i.childNodes[0],0),s.setEnd(r.childNodes[0],r.childNodes[0].textContent.length),
body.canvas.selectedTextRange=s,this._setSystemSelectionToCanvasSelectedTextRange();
}},_getSelectionDirection:function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode);
return!t&&e.anchorOffset>e.focusOffset||t===v?"backward":"forward"},_getSelectedPaths:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("d")&&!o.hasAttribute("data-bx-shape")?t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t},_getElementsInBBox:function(t){var n=[],i=body.canvas.currentArtboard.getScreenCTM().inverse(),r=function(a){
var s=!0,u=!1,c=void 0;try{for(var d=void 0,v=a.children[Symbol.iterator]();!(s=(d=v.next()).done);s=!0){
var f=d.value;if(h.includes(f.localName)){var m=e(f);m=l(m,i);var b=0===m.width&&0===m.height;
!b&&o(t,m)&&n.push(f)}else"g"!==f.localName&&"a"!==f.localName||r(f)}}catch(g){u=!0,
c=g}finally{try{s||null==v["return"]||v["return"]()}finally{if(u)throw c}}};return r(body.canvas.currentArtboard),
n},_setSystemSelectionToCanvasSelectedTextRange:function(){var e=document.getSelection(),t=body.canvas.selectedTextRange;
null===t?e.removeAllRanges():(e.removeAllRanges(),e.addRange(t))},_updateCurrentContainer:function(){
var e=body.canvas.selectedElements.length>0?body.canvas.selectedElements[0]:null,t=null;
if(e){var n=e.closest("g, a");n!==body.canvas.currentArtboard&&(t=n)}body.canvas.currentContainer=t;
}},{},t)}(HTMLElement),m=n("bx-edittool",f);return{get default(){return m}}}),System.registerModule("elements/bx-ellipsehud",[],function(){
"use strict";var e=System.get("utils/element"),t=(e.createElement,e.registerElement),n=System.get("utils/math").normalize,i=System.get("utils/time").throttle,r=System.get("utils/transform-general").getTransformToElement,a=System.get("classes/enum")["default"],s=new a("ellipse"),o=6,l=8,u='\n  <style>@import url("stylesheets/bx-ellipsehud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <circle class="grippie" data-axis="rx" fill="none"></circle>\n      <circle class="grippie" data-axis="ry" fill="none"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',c=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._installed=!1,this._selectedEllipses=[],this._draggedGrippie=null,
this._updateGrippiesPosition200Th=i(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=u;var e=!0,t=!1,n=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){t=!0,n=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(t)throw n}}var l=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(c)throw d}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_install:function(){var e=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){this._selectedEllipses=this._getSelectedEllipses(),
0===this._selectedEllipses.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onArtboardMutation:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(e){
e.target.classList.contains("grippie")&&this._onGrippieMouseDown(e)},_onGrippieMouseDown:function(e){
var t=this;if(0===e.button){var i,r,a,o=e.target,u=o.parentElement,c=u[s.ellipse],d=o.getAttribute("data-axis"),h=c.getCTM().inverse(),v={
rx:c.rx.baseVal.value,ry:c.ry.baseVal.value},f=new SVGPoint(e.clientX,e.clientY).matrixTransform(h),m=new SVGPoint(f.x,f.y),b="normal",g=!1;
o.parentElement.append(o),this._draggedGrippie=o;var p=function(){var e=body.modKeys,t=e.ctrl,n=e.shift;
t===!0&&n===!1?b="normal":t===!1&&n===!0?b="symmetric":t===!0&&n===!0?b="symmetric":c.rx.baseVal.value===c.ry.baseVal.value&&(b="symmetric");
},y=function(){var e=m.x-f.x,t=m.y-f.y;if("rx"===d){if("normal"===b){var i=n(v.rx+e,0,1/0,l);
c.setAttribute("rx",i)}else if("symmetric"===b){var r=n(v.rx+e,0,1/0,l);c.setAttribute("rx",r),
c.setAttribute("ry",r)}}else if("ry"===d)if("normal"===b){var a=n(v.ry+t,0,1/0,l);
c.setAttribute("ry",a)}else if("symmetric"===b){var s=n(v.ry+t,0,1/0,l);c.setAttribute("rx",s),
c.setAttribute("ry",s)}};window.addEventListener("mousemove",i=function(e){g||(g=!0,
body.canvas.undoManager.checkpoint("Ellipse radius")),m=new SVGPoint(e.clientX,e.clientY).matrixTransform(h),
y()}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r),body.removeEventListener("modkeyschange",a),
t._draggedGrippie=null}),body.addEventListener("modkeyschange",a=function(){p(),y();
}),p()}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=this._selectedEllipses[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[s.ellipse]=a,
this["#subhuds"].append(o)}}catch(l){t=!0,n=l}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()},
_updateGrippiesPosition:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,a=this["#subhuds"].children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){
var o=i.value,l=o[s.ellipse],u=r(l,this),c=!0,d=!1,h=void 0;try{for(var v=void 0,f=o.children[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value,b=m.getAttribute("data-axis");if("rx"===b){var g=new SVGPoint(l.cx.baseVal.value+l.rx.baseVal.value,l.cy.baseVal.value).matrixTransform(u);
m.setAttribute("cx",g.x),m.setAttribute("cy",g.y)}else if("ry"===b){var p=new SVGPoint(l.cx.baseVal.value,l.cy.baseVal.value+l.ry.baseVal.value).matrixTransform(u);
m.setAttribute("cx",p.x),m.setAttribute("cy",p.y)}}}catch(y){d=!0,h=y}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}}}catch(_){t=!0,n=_}finally{
try{e||null==a["return"]||a["return"]()}finally{if(t)throw n}}},_updateGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,l=!1,u=void 0;try{for(var c=void 0,d=a.children[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){
var h=c.value;h.setAttribute("r",o/body.canvas.scale)}}catch(v){l=!0,u=v}finally{
try{s||null==d["return"]||d["return"]()}finally{if(l)throw u}}}}catch(f){t=!0,n=f;
}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_getSelectedEllipses:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"ellipse"===o.localName?t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedEllipses(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),d=t("g","bx-ellipsehud",c);return{get default(){
return d}}}),System.registerModule("elements/bx-ellipsetool",[],function(){"use strict";
var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/geometry"),a=r.getRotationAngleFromPoints,s=r.snapRotationAngle,o=System.get("utils/transform-reduction").reduceTransform,l=System.get("classes/vector")["default"],u=Math,c=u.abs,d=u.min,h=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._ellipseCursor=body.registerCursor("images/cursor-ellipse.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
return e._onMouseDown(t)})},_onDisabled:function(){body.unregisterCursor(this._ellipseCursor),
body.unregisterCursor(this._mouseDownEllipseCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(e){
var t,n,r=this;window.addEventListener("mousemove",t=function(a){i(e,a)!==!1&&(window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),r._onIntentionalDragStart(e))}),window.addEventListener("mouseup",n=function(e){
window.removeEventListener("mousemove",t),body.canvas.removeEventListener("mouseend",n);
})},_onIntentionalDragStart:function(e){var n,i,r,u=this,h=body.canvas.currentContainer||body.canvas.currentArtboard,v=body.modKeys.ctrl?"polar":"planar",f=0,m=0,b=0,g=0;
body.canvas.undoManager.checkpoint("Draw Ellipse");var p=t("svg:ellipse");p.style.fill="#d8d8d8",
h.append(p),body.canvas.selectedElements=[p],this._mouseDownEllipseCursor=body.registerCursor("images/cursor-ellipse.png",900,8,7);
var y=p.getScreenCTM().inverse(),_=p.transform.baseVal.consolidate().matrix.multiply(y);
p.setAttribute("transform",_.toString()),window.addEventListener("mousemove",n=function(t){
if("planar"===v){var n=t.clientX-e.clientX||1,i=t.clientY-e.clientY||1,r=c(n),o=c(i);
if(body.modKeys.shift){var u=d(r,o);r=u,o=u}var h=0>n?e.clientX-r:e.clientX,y=0>i?e.clientY-o:e.clientY;
f=h+r/2,m=y+o/2,b=r/2,g=o/2}else if("polar"===v){var x=new SVGPoint(e.clientX,e.clientY),w=new SVGPoint(x.x,x.y-100),S=new SVGPoint(t.clientX,t.clientY),C=new l(x,S),E=a(x,w,S);
f=x.x,m=x.y,b=C.length,g=C.length,body.modKeys.shift&&(E=s(E,45));var k=(new SVGMatrix).rotate(E,x.x,x.y);
p.setAttribute("transform",_.multiply(k).toString())}p.setAttribute("cx",f),p.setAttribute("cy",m),
p.setAttribute("rx",b),p.setAttribute("ry",g)}),window.addEventListener("mouseup",i=function(){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
body.removeEventListener("toolchange",r),body.unregisterCursor(u._mouseDownEllipseCursor),
o(p)}),body.addEventListener("toolchange",r=function(e){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("toolchange",r),
body.unregisterCursor(u._mouseDownEllipseCursor),o(p)})}},{},e)}(HTMLElement),v=n("bx-ellipsetool",h);
return{get default(){return v}}}),System.registerModule("elements/bx-exportcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select"),System.get("elements/bx-selectitem"),System.get("elements/bx-slider");
var e=System.get("utils/element"),t=(e.createElement,e.registerElement),n=System.get("utils/time").throttle,i='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-exportcontrols.css");\n  </style>\n\n  <section id="export-bitmap-section">\n    <div id="format-div">\n      <h3>Format</h3>\n\n      <bx-select id="format-select" value="png">\n        <bx-selectitem value="png" label="PNG"></bx-selectitem>\n        <bx-selectitem value="jpg" label="JPEG"></bx-selectitem>\n      </bx-select>\n    </div>\n\n    <div id="area-div">\n      <h3>Area</h3>\n\n      <bx-select id="area-select" value="viewBox">\n        <bx-selectitem value="selected" label="Selected objects"></bx-selectitem>\n        <bx-selectitem value="viewBox" label="View box"></bx-selectitem>\n      </bx-select>\n    </div>\n\n    <div id="compression-div">\n      <h3>Compression</h3>\n\n      <bx-slider\n        id="compression-slider"\n        title="Compression"\n        min="0"\n        max="1"\n        value="0.82"\n        precision="2">\n      </bx-slider>\n    </div>\n\n    <bx-checkbox label="Transparent background" id="transparent-checkbox" checked></bx-checkbox>\n\n    <bx-button id="export-button" label="Export"></bx-button>\n  </section>\n',r=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;this._update200Th=n(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=i;
var t=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#area-select"].addEventListener("change",function(){
return e._update200Th()}),this["#format-select"].addEventListener("change",function(){
return e._onFormatSelectChange()}),this["#export-button"].addEventListener("click",function(t){
return e._onExportButtonClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update200Th()},_onArtboardMutation:function(e){
this._update200Th()},_onFormatSelectChange:function(){var e=this["#format-select"].value;
"png"===e?(this["#compression-div"].hidden=!1,this["#transparent-checkbox"].hidden=!1):"jpg"===e&&(this["#compression-div"].hidden=!1,
this["#transparent-checkbox"].hidden=!0)},_onExportButtonClick:function(e){var t,n,i,r,a,s,o,l;
return $traceurRuntime.asyncWrap(function(e){for(;;)switch(e.state){case 0:t=this["#format-select"].value,
n=this["#area-select"].value,i="viewBox"===n?body.canvas.extractArtworkWithViewBoxElements():body.canvas.extractArtworkWithSelectedElements(),
e.state=18;break;case 18:e.state="png"===t?4:15;break;case 4:r=this["#compression-slider"].value,
a=this["#transparent-checkbox"].checked,e.state=5;break;case 5:return void Promise.resolve(body.rasterizeArtwork(i,"png",r,a)).then(e.createCallback(3),e.errback);
case 3:s=e.value,e.state=2;break;case 2:body.bridge.postMessage("exportFile",{format:"png",
data:s}),e.state=-2;break;case 15:e.state="jpg"===t?11:-2;break;case 11:o=this["#compression-slider"].value,
e.state=12;break;case 12:return void Promise.resolve(body.rasterizeArtwork(i,"jpg",o)).then(e.createCallback(10),e.errback);
case 10:l=e.value,e.state=9;break;case 9:body.bridge.postMessage("exportFile",{format:"jpg",
data:l}),e.state=-2;break;default:return e.end()}},this)},_update:function(){"selected"===this["#area-select"].value&&0===body.canvas.selectedElements.length?this["#export-button"].disabled=!0:this["#export-button"].disabled=!1;
}},{},e)}(HTMLElement),a=t("bx-exportcontrols",r);return{get default(){return a}};
}),System.registerModule("elements/bx-fillcontrols",[],function(){"use strict";System.get("elements/bx-button"),
System.get("elements/bx-slider"),System.get("elements/bx-paintsection");var e=System.get("utils/element").registerElement,t=System.get("utils/math").round,n=System.get("utils/style").queryStylableElements,i=System.get("utils/text").normalizeTextInRangeBeforeEditing,r=System.get("utils/time").throttle,a=Number.parseFloat,s='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-fillcontrols.css");\n  </style>\n\n  <main>\n    <section id="paint-section" is="bx-paintsection" context="fill"></section>\n\n    <section id="opacity-section">\n      <h2 id="opacity-section-heading">Opacity</h2>\n\n      <bx-slider\n        id="opacity-slider"\n        title="Fill Opacity"\n        value="1"\n        min="0"\n        max="1"\n        precision="2">\n      </bx-slider>\n    </section>\n\n    <section id="fill-rule-section">\n      <h2 id="fill-rule-section-heading">Fill Rule</h2>\n\n      <div id="fill-rule-buttons">\n        <bx-button\n          id="non-zero-fill-rule-button"\n          value="nonzero"\n          icon="fill-rule-non-zero"\n          iconsize="28"\n          title="Non-zero"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="even-odd-fill-rule-button"\n          value="evenodd"\n          icon="fill-rule-even-odd"\n          iconsize="28"\n          title="Even-odd"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </section>\n  </main>\n',o=function(e){
function o(){$traceurRuntime.superConstructor(o).apply(this,arguments)}return $traceurRuntime.createClass(o,{
createdCallback:function(){var e=this;this._update200Th=r(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=s;
var t=!0,n=!1,i=void 0;try{for(var a=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){
var l=a.value;this["#"+l.id]=l}}catch(u){n=!0,i=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(n)throw i}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#opacity-slider"].addEventListener("changestart",function(){
return e._onOpacitySliderChangeStart()}),this["#non-zero-fill-rule-button"].addEventListener("click",function(){
return e._onFillRuleButtonClick(event)}),this["#even-odd-fill-rule-button"].addEventListener("click",function(){
return e._onFillRuleButtonClick(event)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this["#paint-section"].enabled=!0,this._toggleHuds(),
this._onSelectedElementsChange(),body.addEventListener("toolchange",this._toolChangeListener=function(){
e._toggleHuds()}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)})},_onDisabled:function(){this["#paint-section"].enabled=!1,
this._toggleHuds(),body.removeEventListener("toolchange",this._toolChangeListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update200Th()},_onSelectedTextRangeChange:function(){
this._update200Th()},_onArtboardMutation:function(e){this._update200Th()},_onOpacitySliderChangeStart:function(){
var e=this;body.canvas.undoManager.checkpoint("Fill opacity");var t=body.canvas,r=t.selectedElements,a=t.selectedTextRange;
i(a);var s,o,l=n("fill-opacity",r,a);this._isChangingOpacitySlider=!0,this["#opacity-slider"].addEventListener("change",s=function(){
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=l[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.style.fillOpacity=e["#opacity-slider"].value}}catch(o){n=!0,i=o}finally{
try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}e["#opacity-slider"].mixed=!1;
}),this["#opacity-slider"].addEventListener("changeend",o=function(){e["#opacity-slider"].removeEventListener("change",s),
e["#opacity-slider"].removeEventListener("changeend",o),e._isChangingOpacitySlider=!1;
})},_onFillRuleButtonClick:function(e){var t=e.target,r=t.pressed,a=t.mixed,s=t.value;
if(0===e.button&&(r!==!0||a!==!1)){body.canvas.undoManager.checkpoint("Fill rule");
var o=body.canvas,l=o.selectedElements,u=o.selectedTextRange;i(u);var c=n("fill-rule",l,u),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var b=f.value;
b.style.fillRule=s}}catch(g){h=!0,v=g}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}}},_update:function(){this._updateOpacitySection(),this._updateFillRuleSection();
},_updateOpacitySection:function(){if(!this._isChangingOpacitySlider){var e=body.canvas,i=e.selectedElements,r=e.selectedTextRange,s=n("fill-opacity",i,r),o=s[0]||null;
if(null===o?this["#opacity-section-heading"].disabled=!0:this["#opacity-section-heading"].disabled=!1,
null===o)this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1;else{
this["#opacity-slider"].disabled=!1;var l=t(a(getComputedStyle(o).fillOpacity),2),u=!1,c=!0,d=!1,h=void 0;
try{for(var v=void 0,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var m=v.value;
if(m!==o){var b=t(a(getComputedStyle(m).fillOpacity),2);if(b!==l){u=!0;break}}}}catch(g){
d=!0,h=g}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#opacity-slider"].value=l,
this["#opacity-slider"].mixed=u}}},_updateFillRuleSection:function(){var e=body.canvas,t=e.selectedElements,i=e.selectedTextRange,r=n("fill-rule",t,i),a=r[0]||null;
if(null===a?this["#fill-rule-section-heading"].disabled=!0:this["#fill-rule-section-heading"].disabled=!1,
null===a)this["#non-zero-fill-rule-button"].disabled=!0,this["#non-zero-fill-rule-button"].pressed=!1,
this["#non-zero-fill-rule-button"].mixed=!1,this["#even-odd-fill-rule-button"].disabled=!0,
this["#even-odd-fill-rule-button"].pressed=!1,this["#even-odd-fill-rule-button"].mixed=!1;else{
this["#non-zero-fill-rule-button"].disabled=!1,this["#even-odd-fill-rule-button"].disabled=!1;
var s=getComputedStyle(a).fillRule,o=!1,l=!0,u=!1,c=void 0;try{for(var d=void 0,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=getComputedStyle(v).fillRule;f!==s&&(o=!0)}}catch(m){u=!0,c=m}finally{
try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}"evenodd"===s?(this["#non-zero-fill-rule-button"].pressed=!1,
this["#non-zero-fill-rule-button"].mixed=!1,this["#even-odd-fill-rule-button"].pressed=!0,
this["#even-odd-fill-rule-button"].mixed=o):"nonzero"===s&&(this["#non-zero-fill-rule-button"].pressed=!0,
this["#non-zero-fill-rule-button"].mixed=o,this["#even-odd-fill-rule-button"].pressed=!1,
this["#even-odd-fill-rule-button"].mixed=!1)}},_toggleHuds:function(){"edit-tool"===body.currentTool.id&&body.currentPanel&&"fill-panel"===body.currentPanel.id?(body.canvas.enableHud("linear-gradient-fill-hud"),
body.canvas.enableHud("radial-gradient-fill-hud"),body.canvas.enableHud("pattern-fill-hud")):(body.canvas.disableHud("linear-gradient-fill-hud"),
body.canvas.disableHud("radial-gradient-fill-hud"),body.canvas.disableHud("pattern-fill-hud"));
}},{},e)}(HTMLElement),l=e("bx-fillcontrols",o);return{get default(){return l}}}),
System.registerModule("elements/bx-filterinput",[],function(){"use strict";System.get("elements/bx-contextmenu"),
System.get("elements/bx-menuitem");var e=System.get("classes/shortcut")["default"],t=System.get("classes/undo-manager")["default"],n=System.get("utils/element").registerElement,i=System.get("utils/time").debounce,r=(Object.entries,
'\n  <style>@import url("stylesheets/bx-filterinput.css");</style>\n\n  <main>\n    <input id="input" type="text" spellcheck="false" tabindex="0"></input>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n'),a=function(n){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this.commands={selectAll:{exec:function(){return e["#input"].select();
}},cut:{enabled:function(){return e["#input"].selectionStart!==e["#input"].selectionEnd;
},exec:function(){return e._cutInputValue()}},copy:{enabled:function(){return e["#input"].selectionStart!==e["#input"].selectionEnd;
},exec:function(){return e._copyInputValue()}},paste:{exec:function(){return e._pasteInputValue();
}},undo:{enabled:function(){return e._undoManager.canUndo()},exec:function(){return e._undoManager.undo();
}},redo:{enabled:function(){return e._undoManager.canRedo()},exec:function(){return e._undoManager.redo();
}}};var n=null;this._onInputInput250Db=i(this._onInputInput250Db,250,this),this._undoManager=new t,
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=r;
var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;this["#"+c.id]=c}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}var h=!0,v=!1,f=void 0;try{for(var m=void 0,b=this.attributes[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){
var g=m.value;this.attributeChangedCallback(g.name)}}catch(p){v=!0,f=p}finally{try{
h||null==b["return"]||b["return"]()}finally{if(v)throw f}}this.addEventListener("contextmenu",function(t){
return e._onContextMenu(t)}),this["#input"].addEventListener("focusin",function(t){
return e._onInputFocus(t)}),this["#input"].addEventListener("blur",function(t){return e._onInputBlur(t);
}),this["#input"].addEventListener("keydown",function(t){return e._onInputKeyDown(t);
}),this["#input"].addEventListener("input",function(t){return e._onInputInput(t)}),
this["#input"].addEventListener("input",function(t){return e._onInputInput250Db(t);
}),this["#input"].addEventListener("mousemove",function(t){return e._onInputMouseMove(t);
}),this["#input"].addEventListener("mouseenter",function(e){return n=body.registerCursor("text",200);
}),this["#input"].addEventListener("mouseleave",function(e){return body.unregisterCursor(n);
}),this["#context-menu"].menuWillShow=function(t){return e._menuWillShow(t)},this["#context-menu"].menuItemWillTrigger=function(t){
return e._menuItemWillTrigger(t)},this["#context-menu"].addEventListener("menuitemtrigger",function(t){
return e._onContextMenuItemTrigger(t)})},attributeChangedCallback:function(e){"value"===e?this._onValueAttributeChange():"placeholder"===e?this._onPlaceholderAttributeChange():"disabled"===e&&this._onDisabledAttributeChange();
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):""},set value(e){
this.setAttribute("value",e)},get placeholder(){return this.hasAttribute("placeholder")?this.getAttribute("placeholder"):"";
},set placeholder(e){""===e?this.removeAttribute("placeholder"):this.setAttribute("placeholder",e);
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onValueAttributeChange:function(){this["#input"].value!==this.value&&(this["#input"].value=this.value);
},_onPlaceholderAttributeChange:function(){this["#input"].placeholder=this.placeholder;
},_onDisabledAttributeChange:function(){this["#input"].tabIndex=this.disabled?-1:0;
},_onInputFocus:function(e){body.bridge.postMessage("toggleTextInputMode",!0),this._cachedValue=this["#input"].value;
},_onInputBlur:function(e){body.bridge.postMessage("toggleTextInputMode",!1),this._undoManager.reset();
},_onInputMouseMove:function(e){this["#input"].matches(":focus")===!1&&e.preventDefault();
},_onInputKeyDown:function(t){var n=e.fromEvent(t);n.matches("Enter")?this.blur():(n.matches("Backspace")||n.matches("ArrowDown")||n.matches("Shift","ArrowDown")||n.matches("ArrowUp")||n.matches("Shift","ArrowUp")||n.matches("ArrowLeft")||n.matches("Shift","ArrowLeft")||n.matches("ArrowRight")||n.matches("Shift","ArrowRight"))&&t.stopPropagation();
},_onInputInput:function(e){this.value=this["#input"].value},_onInputInput250Db:function(e){
var t=this,n=this._cachedValue,i=this["#input"].value;this._cachedValue=this["#input"].value,
this._undoManager.register({label:"Typing",undo:function(){t["#input"].value=t._cachedValue=n,
t["#input"].select()},redo:function(){t["#input"].value=t._cachedValue=i,t["#input"].select();
}})},_onContextMenu:function(e){e.preventDefault(),this["#input"].focus(),this["#context-menu"].open(e.clientX,e.clientY);
},_onContextMenuItemTrigger:function(e){var t=e.detail,n=this.commands[t.commandID];
n&&n.exec()},_menuWillShow:function(e){var t=this;return new Promise(function(n){
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(e){this._validateMenuItem(e);
},_validateMenuItem:function(e){var t=this;return new Promise(function(n){var i=e.commandID||null,r=i?t.commands[i]:null;
r&&(e.disabled=r.enabled?!r.enabled():!1),n()})},_copyInputValue:function(){var e=this["#input"].value.substring(this["#input"].selectionStart,this["#input"].selectionEnd);
body.bridge.postMessage("setClipboardData",{"text/plain":e})},_pasteInputValue:function(){
var e=this;body.bridge.postMessage("getClipboardData",null,function(t){if(t["text/plain"]){
var n=e["#input"].selectionStart,i=e["#input"].selectionEnd,r=t["text/plain"],a=e["#input"].value.substring(0,n),s=e["#input"].value.substring(i,e["#input"].value.length);
e["#input"].value=a+r+s,e["#input"].dispatchEvent(new Event("input",{bubbles:!0})),
e["#input"].setSelectionRange(n+r.length,n+r.length)}})},_cutInputValue:function(){
var e=this["#input"].selectionStart,t=this["#input"].selectionEnd,n=this["#input"].value.substring(e,t),i=this["#input"].value.substring(0,e),r=this["#input"].value.substring(t,this["#input"].value.length);
this["#input"].value=i+r,this["#input"].dispatchEvent(new Event("input",{bubbles:!0
})),this["#input"].setSelectionRange(e,e),body.bridge.postMessage("setClipboardData",{
"text/plain":n})}},{},n)}(HTMLElement),s=n("bx-filterinput",a);return{get default(){
return s}}}),System.registerModule("elements/bx-fontfamilybutton",[],function(){"use strict";
var e=System.get("utils/element"),t=(e.createElement,e.registerElement),n='\n  <style>@import url("stylesheets/bx-fontfamilybutton.css");</style>\n\n  <main>\n    <label id="label"></label>\n\n    <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n      <use href="images/icons.svg#arrow-right" width="100" height="100"></use>\n    </svg>\n  </main>\n',i=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=n;var e=!0,t=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){t=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(t)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"label"===e&&this._onLabelAttributeChange()},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(e){this.setAttribute("label",e)},get mixed(){return this.hasAttribute("mixed");
},set mixed(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed")},get disabled(){
return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onLabelAttributeChange:function(){this["#label"].textContent=this.label}},{},e);
}(HTMLElement),r=t("bx-fontfamilybutton",i);return{get default(){return r}}}),System.registerModule("elements/bx-fontfamilypicker",[],function(){
"use strict";System.get("elements/bx-filterinput"),System.get("elements/bx-fontslistitem");
var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/time"),r=i.sleep,a=i.debounce,s=System.get("classes/shortcut")["default"],o=(Object.keys,
'\n  <style>\n    @import url("stylesheets/scrollbars.css");\n    @import url("stylesheets/bx-fontfamilypicker.css");\n  </style>\n\n  <main>\n    <div id="items">\n      <div id="primary-items"></div>\n      <div id="secondary-items"></div>\n      <div id="placeholder" hidden>No families found.</div>\n    </div>\n\n    <bx-filterinput id="filter-input" placeholder="Filter"></bx-filterinput>\n  </main>\n'),l=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this.tabIndex=0,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=o;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(l){n=!0,i=l}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("focusin",function(t){
return e._onHostFocusIn(t)}),this.addEventListener("keydown",function(t){return e._onKeyDown(t);
}),this["#items"].addEventListener("mousedown",function(t){return e._onItemsMouseDown(t);
}),this["#items"].addEventListener("dblclick",function(t){return e._onItemsDblClick(t);
}),this["#items"].addEventListener("focusin",function(t){return e._onItemsFocusIn(t);
}),this["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput();
})},attributeChangedCallback:function(e){"value"===e?this._onValueAttributeChange():"enabled"===e&&this.enabled&&this._onEnabled();
},get value(){return this.getAttribute("value")},set value(e){e?this.setAttribute("value",e):this.removeAttribute("value");
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e,t,n,i,r,a,s;return $traceurRuntime.asyncWrap(function(o){
for(;;)switch(o.state){case 0:return void Promise.resolve(this._updatePrimaryItems()).then(o.createCallback(2),o.errback);
case 2:o.state=0===this["#secondary-items"].childElementCount?3:4;break;case 3:return void Promise.resolve(this._updateSecondaryItems()).then(o.createCallback(4),o.errback);
case 4:this._updateThumbnails(),this._updatePlaceholderVisibility(),e=!1,t=!0,n=!1,
i=void 0;try{for(r=void 0,a=this["#items"].querySelectorAll("bx-fontslistitem")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)s=r.value,
e===!1&&s.value===this.value?(s.highlighted=!0,e=!0):s.highlighted=!1}catch(l){n=!0,
i=l}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}o.state=-2;
break;default:return o.end()}},this)},_onValueAttributeChange:function(){var e=this["#items"].querySelector("bx-fontslistitem[highlighted]");
if(!e||e.value!==this.value){var t=!1,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].querySelectorAll("bx-fontslistitem")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;t===!1&&o.value===this.value?(o.highlighted=!0,t=!0):o.highlighted=!1;
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}}},_onHostFocusIn:function(e){var t=this["#primary-items"].querySelector("[highlighted]");
t&&r(100).then(function(){return t.focus()})},_onItemsMouseDown:function(e){"bx-fontslistitem"===e.target.localName&&this._onItemMouseDown(e);
},_onItemsDblClick:function(e){"bx-fontslistitem"===e.target.localName&&this._onItemDblClick(e);
},_onItemsFocusIn:function(e){var t=e.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].querySelectorAll("bx-fontslistitem")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===t}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}},_onItemMouseDown:function(e){var t=e.target;t&&t.value!==this.value&&(this.value=t.value,
this.dispatchEvent(new CustomEvent("change")))},_onItemDblClick:function(e){var t=e.target;
if(t.parentElement===this["#secondary-items"]){var n=t.value.replaceAll(" ","+");body.bridge.postMessage("openExternalURL","https://www.google.com/fonts/specimen/"+n);
}},_onFilterInputInput:function(){var e=this["#filter-input"].value,t=$traceurRuntime.spread(this["#primary-items"].children,this["#secondary-items"].children),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
o.hidden=o.value.toLowerCase().startsWith(e.toLowerCase())===!1}}catch(l){i=!0,r=l;
}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}this._updatePlaceholderVisibility();
},_onKeyDown:function(e){var t=s.fromEvent(e);t.matches("ArrowUp")?(e.preventDefault(),
e.stopPropagation(),this._selectPreviousItem()):t.matches("ArrowDown")&&(e.preventDefault(),
e.stopPropagation(),this._selectNextItem())},_updatePrimaryItems:function(){var e=this;
return new Promise(function(n,i){e["#primary-items"].innerHTML="";var r=body.canvas.googleFontsManager.getImportedFamilies(),a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=t("bx-fontslistitem");
d.value=c,d.hidden=d.value.toLowerCase().startsWith(e["#filter-input"].value.toLowerCase())===!1,
e.value!==d.value||e["#items"].querySelector("bx-fontslistitem[highlighted]")||(d.highlighted=!0),
e["#primary-items"].append(d)}}catch(h){s=!0,o=h}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}n()})},_updateSecondaryItems:function(){var e=this;return new Promise(function(n,i){
var r,a;return $traceurRuntime.asyncWrap(function(i){for(;;)switch(i.state){case 0:
return void Promise.resolve(body.canvas.googleFontsManager.getAllFamilies()).then(i.createCallback(3),i.errback);
case 3:r=i.value,i.state=2;break;case 2:e["#secondary-items"].innerHTML="",a=function(i){
for(;i.timeRemaining()>20&&r.length>0;){var s=t("bx-fontslistitem");s.value=r.shift(),
s.hidden=s.value.toLowerCase().startsWith(e["#filter-input"].value.toLowerCase())===!1,
s.highlighted=e.value===s.value,e["#secondary-items"].append(s)}r.length>0?requestIdleCallback(a):n();
},r.length>0?requestIdleCallback(a):n(),i.state=-2;break;default:return i.end()}},this);
})},_updateThumbnails:function(){var e=this,t=this["#primary-items"].children,n=this["#secondary-items"].children,i=$traceurRuntime.spread(t,n),r=a(function(){
var t=e["#items"].scrollTop,n=!0,r=!1,a=void 0;try{for(var s=void 0,o=$traceurRuntime.spread(i).reverse()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;l.offsetTop>=t&&l.offsetTop<=t+e["#items"].clientHeight&&l.hidden===!1&&(i.remove(l),
i.unshift(l))}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]()}finally{
if(r)throw a}}},150),s=function(t){var n;return $traceurRuntime.asyncWrap(function(r){
for(;;)switch(r.state){case 0:r.state=t.timeRemaining()>10&&i.length>0&&e.enabled===!0?5:7;
break;case 5:n=i.shift(),r.state=6;break;case 6:r.state=n.thubmnail?0:1;break;case 1:
return void Promise.resolve(body.canvas.googleFontsManager.getThumbnail(n.value)).then(r.createCallback(3),r.errback);
case 3:n.thumbnail=r.value,r.state=0;break;case 7:o(),r.state=-2;break;default:return r.end();
}},this)},o=function(){i.length>0&&e.enabled===!0?requestIdleCallback(s):(e["#items"].removeEventListener("scroll",r),
e["#filter-input"].removeEventListener("input",r))};this["#items"].addEventListener("scroll",r),
this["#filter-input"].addEventListener("input",r),o()},_updatePlaceholderVisibility:function(){
this["#placeholder"].hidden=null!==this["#items"].querySelector("bx-fontslistitem:not([hidden])");
},_selectPreviousItem:function(){var e=this["#items"].querySelector("[highlighted]"),t=null;
if(e&&"bx-fontslistitem"===e.localName){for(var n=e.previousElementSibling;n;n=n.previousElementSibling)if(n.hidden===!1){
t=n;break}if(null===t&&"secondary-items"===e.parentElement.id)for(var i=this["#primary-items"].lastElementChild;i;i=i.previousElementSibling)if(i.hidden===!1){
t=i;break}}t&&(t.focus(),this.value=t.value,this.dispatchEvent(new CustomEvent("change")));
},_selectNextItem:function(){var e=this["#items"].querySelector("[highlighted]"),t=null;
if(e&&"bx-fontslistitem"===e.localName){for(var n=e.nextElementSibling;n;n=n.nextElementSibling)if(n.hidden===!1){
t=n;break}if(null===t&&"primary-items"===e.parentElement.id)for(var i=this["#secondary-items"].firstElementChild;i;i=i.nextElementSibling)if(i.hidden===!1){
t=i;break}}t&&(t.focus(),this.value=t.value,this.dispatchEvent(new CustomEvent("change")));
}},{},e)}(HTMLElement),u=n("bx-fontfamilypicker",l);return{get default(){return u;
}}}),System.registerModule("elements/bx-fontslistitem",[],function(){"use strict";
var e=System.get("utils/element"),t=(e.createElement,e.registerElement),n='\n  <style>@import url("stylesheets/bx-fontslistitem.css");</style>\n\n  <main>\n    <div id="label"></div>\n    <img id="thumbnail" hidden></img>\n  </main>\n',i=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this.tabIndex=0,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=n;var e=!0,t=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){t=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(t)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"value"===e&&this._onValueAttributeChange()},get value(){return this.getAttribute("value");
},set value(e){e?this.setAttribute("value",e):this.removeAttribute("value")},get highlighted(){
return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get thumbnail(){return this["#thumbnail"].src||null},set thumbnail(e){this["#thumbnail"].src=e?e:"",
this._onThumbnailChange()},_onValueAttributeChange:function(){this["#label"].textContent=this.value?this.value:"";
},_onThumbnailChange:function(){this.thumbnail?(this["#label"].hidden=!0,this["#thumbnail"].hidden=!1):(this["#label"].hidden=!1,
this["#thumbnail"].hidden=!0)}},{},e)}(HTMLElement),r=t("bx-fontslistitem",i);return{
get default(){return r}}}),System.registerModule("elements/bx-freehandsegsdrawhud",[],function(){
"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/curves-schneider").getSchneiderCurves,r=System.get("utils/path-general").reversePath,a=System.get("utils/time").debounce,s=System.get("utils/transform-general").getTransformToElement,o=System.get("utils/transform-reduction").reduceTransform;
System.get("elements/bx-freehandsegsketch");var l=10,u=10,c=4,d=60,h='\n  <style>@import url("stylesheets/bx-freehandsegsdrawhud.css");</style>\n  <g id="node-grippies"></g>\n  <g id="seg-sketch" is="bx-freehandsegsketch"></g>\n',v=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=h;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=this.attributes[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var v=c.value;this.attributeChangedCallback(v.name)}}catch(f){l=!0,u=f}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._currentPath=null,body.canvas.artboards.addEventListener("mousedown",this._artboardMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)}),this["#node-grippies"].addEventListener("mousedown",this._nodeGrippiesMouseDownListener=function(t){
e._onNodeGrippieMouseDown(t)}),this._onSelectedElementsChange()},_onDisabled:function(){
body.canvas.artboards.removeEventListener("mousedown",this._artboardMouseDownListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this["#node-grippies"].removeEventListener("mousedown",this._nodeGrippiesMouseDownListener),
this._currentPath=null,this["#seg-sketch"].hide()},_onSelectedElementsChange:function(){
this._updateNodeGrippies()},_onZoomChange:function(){this._updateNodeGrippiesSize();
},_onArtboardMutation:function(e){this._updateNodeGrippies()},_onNodeGrippieMouseDown:function(e){
var t=this;body.canvas.undoManager.checkpoint("Draw freehand path segments");var n,l,h=e.target,v=h.ownerPath,f=h.getAttribute("data-position");
this._currentPath=v,"end"===f?this._mode="draw-forward":"start"===f&&(this._mode="draw-backward"),
this["#seg-sketch"].show(v,h),this._updateNodeGrippies();var m=function(){var e=t["#seg-sketch"].points,n=[];
if("draw-forward"===t._mode){if(n=v.getPathData({normalize:!0}),0===e.length)return;
if(1===e.length||2===e.length)n.push({type:"L",values:[e[e.length-1].x,e[e.length-1].y]
});else if(e.length>=3){var r=i(e,c/body.canvas.scale),a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var d=l.value;n.push({type:"C",values:[d[1].x,d[1].y,d[2].x,d[2].y,d[3].x,d[3].y]
})}}catch(h){s=!0,o=h}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}}else if("draw-backward"===t._mode){if(e=$traceurRuntime.spread(e).reverse(),0===e.length)return;
if(1===e.length||2===e.length){n.push({type:"M",values:[e[0].x,e[0].y]});for(var f=1;f<e.length;f+=1){
var m=e[f];n.push({type:"L",values:[m.x,m.y]})}}else if(e.length>=3){var b=i(e,c/body.canvas.scale);
n.push({type:"M",values:[b[0][0].x,b[0][0].y]});var g=!0,p=!1,y=void 0;try{for(var _=void 0,x=b[Symbol.iterator]();!(g=(_=x.next()).done);g=!0){
var w=_.value;n.push({type:"C",values:[w[1].x,w[1].y,w[2].x,w[2].y,w[3].x,w[3].y]
})}}catch(S){p=!0,y=S}finally{try{g||null==x["return"]||x["return"]()}finally{if(p)throw y;
}}for(var C=v.getPathData({normalize:!0}),E=1;E<C.length;E+=1){var k=C[E];n.push(k);
}}}v.setPathData(n),t["#seg-sketch"].clear()};window.addEventListener("mousemove",n=a(function(){
t["#seg-sketch"].points.length>=u&&m()},d,this,!1)),window.addEventListener("mouseup",l=function(e){
window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",n),
t["#seg-sketch"].points.length>1&&m();var i=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);
if(i&&t["#node-grippies"].contains(i)){var a=i,u=a.ownerPath;if(u===v){var c={type:"Z",
values:[]},d=v.getPathData();d.push(c),v.setPathData(d)}else{var h=s(u,v);u.setAttribute("transform",h.toString()),
o(u);var f=a.getAttribute("data-position");if("draw-forward"===t._mode){"end"===f&&r(u);
for(var b=v.getPathData({normalize:!0}),g=u.getPathData({normalize:!0}),p=1;p<g.length;p+=1){
var y=g[p];b.push(y)}v.setPathData(b),u.setPathData([]),u.remove()}else if("draw-backward"===t._mode){
"start"===f&&r(u);for(var _=u.getPathData({normalize:!0}),x=v.getPathData({normalize:!0
}),w=1;w<x.length;w+=1){var S=x[w];_.push(S)}v.setPathData(_),u.setPathData([]),u.remove();
}}}t["#seg-sketch"].hide(),"select"===t._mode,t._currentPath=null,t._updateNodeGrippies();
})},_onArtboardMouseDown:function(e){var n=this;body.canvas.undoManager.checkpoint("Draw freehand path segments");
var l=body.canvas.currentContainer||body.canvas.currentArtboard,h=t("svg:path");h.style.stroke="black",
h.style.fill="none",l.append(h);var v=h.getScreenCTM().inverse(),f=e,m=f.clientX,b=f.clientY,g=new SVGPoint(m,b).matrixTransform(v),p=g.x,y=g.y;
h.setAttribute("d","M "+p+" "+y),body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[h]);
var _,x;this._mode="draw-forward",this._currentPath=h,this["#seg-sketch"].show(h),
this._updateNodeGrippies();var w=function(){var e=n["#seg-sketch"].points,t=h.getAttribute("d");
if(0!==e.length){if(1===e.length||2===e.length)t+=" L "+e[e.length-1].x+" "+e[e.length-1].y;else if(e.length>=3){
var r=i(e,c/body.canvas.scale),a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var d=l.value;t+=" C "+d[1].x+" "+d[1].y+" "+d[2].x+" "+d[2].y+" "+d[3].x+" "+d[3].y;
}}catch(v){s=!0,o=v}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}h.setAttribute("d",t),n["#seg-sketch"].clear()}};window.addEventListener("mousemove",_=a(function(){
n["#seg-sketch"].points.length>=u&&w()},d,this,!1)),window.addEventListener("mouseup",x=function(e){
window.removeEventListener("mouseup",x),window.removeEventListener("mousemove",_);
var t=n._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(n["#seg-sketch"].points.length>0&&w(),
t&&n["#node-grippies"].contains(t)){var i=t;if(i.ownerPath===n._currentPath){var a=n._currentPath.getPathData();
a.push({type:"Z",values:[]}),n._currentPath.setPathData(a)}else{var l=i.getAttribute("data-position"),u=n._currentPath,c=i.ownerPath,d=s(c,u);
c.setAttribute("transform",d.toString()),o(c),"end"===l&&r(c);for(var h=u.getPathData({
normalize:!0}),v=c.getPathData({normalize:!0}),f=1;f<v.length;f+=1){var m=v[f];h.push(m);
}u.setPathData(h),c.setPathData([]),c.remove()}}n["#seg-sketch"].hide(),n._mode="select",
n._currentPath=null,n._updateNodeGrippies()})},_updateNodeGrippies:function(){this["#node-grippies"].innerHTML="";
var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._getSelectedPaths()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var o=r.value,l=o.getPathData({normalize:!0}),u=void 0,c=void 0;0===l.length?(u=null,
c=null):1===l.length?(u=l[0],c=null):l.length>1&&(u=l[0],c=l[l.length-1]);var d=s(o,this),h=c&&"Z"===c.type;
if(u&&!h&&(o!==this._currentPath||"draw-backward"!==this._mode)){var v=new SVGPoint(u.values[0],u.values[1]).matrixTransform(d),f=t("svg:ellipse");
f.setAttribute("class","node-grippie"),f.setAttribute("cx",v.x),f.setAttribute("cy",v.y),
f.setAttribute("data-position","start"),f.ownerPath=o,this["#node-grippies"].append(f);
}if(c&&!h&&(o!==this._currentPath||"draw-forward"!==this._mode)){var m=void 0;m="C"===c.type?new SVGPoint(c.values[4],c.values[5]).matrixTransform(d):new SVGPoint(c.values[0],c.values[1]).matrixTransform(d);
var b=t("svg:ellipse");b.setAttribute("class","node-grippie"),b.setAttribute("cx",m.x),
b.setAttribute("cy",m.y),b.setAttribute("data-position","end"),b.ownerPath=o,this["#node-grippies"].append(b);
}}}catch(g){n=!0,i=g}finally{try{e||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}this._updateNodeGrippiesSize()},_updateNodeGrippiesSize:function(){var e=l/2/body.canvas.scale,t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#node-grippies"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.setAttribute("rx",e),s.setAttribute("ry",e)}}catch(o){n=!0,i=o}finally{
try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_getSelectedPaths:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("data-bx-shape")===!1?t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),f=n("g","bx-freehandsegsdrawhud",v);return{get default(){
return f}}}),System.registerModule("elements/bx-freehandsegsketch",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/transform-general").getTransformToElement,n='\n  <style>@import url("stylesheets/bx-freehandsegsketch.css");</style>\n  <polyline id="outline"></polyline>\n',i=function(e){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=n;var e=!0,t=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){t=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(t)throw i}}this._path=null,this._hasListeners=!1},get points(){return this["#outline"].points;
},show:function(e){var n=void 0!==arguments[1]?arguments[1]:null;if(this._path=e,
this["#outline"].setAttribute("points",""),this._path.hasAttribute("transform")?this["#outline"].setAttribute("transform",this._path.getAttribute("transform")):this["#outline"].removeAttribute("transform"),
this.style.visibility="visible",n){var i=t(n,this._path),r=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value);
r=r.matrixTransform(i),this["#outline"].points.appendItem(r)}this._hasListeners===!1&&this._addListeners();
},hide:function(){this._path=null,this.style.visibility="hidden",this["#outline"].setAttribute("points",""),
this._hasListeners===!0&&this._removeListeners()},clear:function(){this["#outline"].setAttribute("points","");
},_addListeners:function(){var e=this;this._hasListeners=!0,window.addEventListener("mousemove",this._mouseMoveListener=function(t){
var n=e._path.getScreenCTM().inverse(),i=new SVGPoint(t.clientX,t.clientY),r=i.matrixTransform(n);
e["#outline"].points.appendItem(r)})},_removeListeners:function(){this._hasListeners=!1,
window.removeEventListener("mousemove",this._mouseMoveListener)}},{},e)}(SVGGElement),r=e("g","bx-freehandsegsketch",i);
return{get default(){return r}}}),System.registerModule("elements/bx-freehandtool",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=function(e){function t(){
$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("draw-freehand-segs-hud");
},_onDisabled:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("draw-freehand-segs-hud");
}},{},e)}(HTMLElement),n=e("bx-freehandtool",t);return{get default(){return n}}}),
System.registerModule("elements/bx-geometrycontrols",[],function(){"use strict";System.get("elements/bx-slider"),
System.get("elements/bx-button");var e=System.get("utils/bbox"),t=e.getUserBBox,n=(e.getClientBBox,
System.get("utils/element")),i=(n.createElement,n.registerElement),r=System.get("utils/geometry"),a=r.getDistanceBetweenPoints,s=r.snapRotationAngle,o=System.get("utils/math").round,l=(System.get("utils/paint").getDefFromURL,
System.get("utils/rect")),u=l.transformRect,c=l.combineRects,d=(System.get("utils/style").queryStylableElements,
System.get("utils/time").throttle),h=System.get("utils/transform-reduction").reduceTransform,v=System.get("utils/transform-general"),f=v.getElementRotationAngle,m=(v.setElementRotationAngle,
v.getTransformOriginBBoxPoint),b=(v.getTransformOriginUserPoint,v.getComputedTransformOriginClientPoint),g=v.getTransformToElement,p=v.setTransformOriginBBoxPoint,y=v.bboxPointToUserPoint,_=v.userPointToBBoxPoint,x=(System.get("classes/enum")["default"],
Math.min),w='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-geometrycontrols.css");\n  </style>\n\n  <section id="object-section">\n    <h2 id="object-section-heading">Object</h2>\n\n    <div id="object-position-div" class="hbox">\n      <div id="object-x-div">\n        <h3 id="object-x-heading">X</h3>\n        <bx-slider id="object-x-slider" value="0" precision="0"></bx-slider>\n      </div>\n\n      <div id="object-y-div">\n        <h3 id="object-y-heading">Y</h3>\n        <bx-slider id="object-y-slider" value="0" precision="0"></bx-slider>\n      </div>\n    </div>\n\n    <div id="object-size-div" class="hbox">\n      <div id="object-width-div">\n        <h3 id="object-width-heading">Width</h3>\n        <bx-slider id="object-width-slider" min="1" value="0" precision="0"></bx-slider>\n      </div>\n\n      <div id="object-height-div">\n        <h3 id="object-height-heading">Height</h3>\n        <bx-slider id="object-height-slider" min="1" value="0" precision="0"></bx-slider>\n      </div>\n    </div>\n\n    <div id="object-rotation-div">\n      <h3 id="object-rotation-heading">Rotation</h2>\n      <bx-slider id="object-rotation-slider" value="0" min="-180" max="180" precision="0" after="°"></bx-slider>\n    </div>\n\n    <div id="object-origin-div" class="hbox">\n      <div id="object-origin-x-div">\n        <h3 id="object-origin-x-heading">Origin X</h3>\n        <bx-slider id="object-origin-x-slider" value = "0" precision="0"></bx-slider>\n      </div>\n\n      <div id="object-origin-y-div">\n        <h3 id="object-origin-y-heading">Origin Y</h3>\n        <bx-slider id="object-origin-y-slider" value = "0" precision="0"></bx-slider>\n      </div>\n    </div>\n  </section>\n',S=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this._update100Th=d(this._update,100,this),
this._isChangingObjectXSlider=!1,this._isChangingObjectYSlider=!1,this._isChangingObjectWidthSlider=!1,
this._isChangingObjectHeightSlider=!1,this._isChangingObjectRotationSlider=!1,this._isChangingObjectOriginXSlider=!1,
this._isChangingObjectOriginYSlider=!1,this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=w;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){u=!0,c=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(u)throw c}}this["#object-width-slider"].addEventListener("changestart",function(){
e._onObjectWidthSliderChangeStart()}),this["#object-height-slider"].addEventListener("changestart",function(){
e._onObjectHeightSliderChangeStart()}),this["#object-x-slider"].addEventListener("changestart",function(){
e._onObjectXSliderChangeStart()}),this["#object-y-slider"].addEventListener("changestart",function(){
e._onObjectYSliderChangeStart()}),this["#object-rotation-slider"].addEventListener("changestart",function(){
e._onObjectRotationSliderChangeStart()}),this["#object-origin-x-slider"].addEventListener("changestart",function(){
e._onObjectOriginXSliderChangeStart()}),this["#object-origin-y-slider"].addEventListener("changestart",function(){
e._onObjectOriginYSliderChangeStart()})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update100Th()},_onArtboardMutation:function(e){
this._update100Th()},_onObjectXSliderChangeStart:function(){var e=this;body.canvas.undoManager.checkpoint("X");
var n,i,r=body.canvas.selectedElements,a=Symbol(),s=[];this._isChangingObjectXSlider=!0;
var o=!0,l=!1,d=void 0;try{for(var v=void 0,f=r[Symbol.iterator]();!(o=(v=f.next()).done);o=!0){
var m=v.value,b=g(m,body.canvas.currentArtboard),p=b.inverse(),y=SVGMatrix.fromMatrix(m.transform.baseVal.consolidate().matrix);
m[a]={userTransform:y,userToArtboardTransform:b,artboardToUserTransform:p};var _=t(m);
s.push(u(_,b))}}catch(x){l=!0,d=x}finally{try{o||null==f["return"]||f["return"]();
}finally{if(l)throw d}}var w=c(s).x;this["#object-x-slider"].addEventListener("change",n=function(){
var t=e["#object-x-slider"].value-w,n=0,i=!0,s=!1,o=void 0;try{for(var l=void 0,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){
var c=l.value,d=c[a],h=d.userTransform,v=d.userToArtboardTransform,f=d.artboardToUserTransform,m=SVGMatrix.fromMatrix(h);
m.multiplySelf(f),m.translateSelf(t,n),m.multiplySelf(v),c.setAttribute("transform",m.toString());
}}catch(b){s=!0,o=b}finally{try{i||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}),this["#object-x-slider"].addEventListener("changeend",i=function(){e["#object-x-slider"].removeEventListener("change",n),
e["#object-x-slider"].removeEventListener("changeend",i),e._isChangingObjectXSlider=!1;
var t=!0,a=!1,s=void 0;try{for(var o=void 0,l=r[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){
var u=o.value;h(u)}}catch(c){a=!0,s=c}finally{try{t||null==l["return"]||l["return"]();
}finally{if(a)throw s}}})},_onObjectYSliderChangeStart:function(){var e=this;body.canvas.undoManager.checkpoint("Y");
var n,i,r=body.canvas.selectedElements,a=Symbol(),s=[];this._isChangingObjectYSlider=!0;
var o=!0,l=!1,d=void 0;try{for(var v=void 0,f=r[Symbol.iterator]();!(o=(v=f.next()).done);o=!0){
var m=v.value,b=g(m,body.canvas.currentArtboard),p=b.inverse(),y=SVGMatrix.fromMatrix(m.transform.baseVal.consolidate().matrix);
m[a]={userTransform:y,userToArtboardTransform:b,artboardToUserTransform:p};var _=t(m);
s.push(u(_,b))}}catch(x){l=!0,d=x}finally{try{o||null==f["return"]||f["return"]();
}finally{if(l)throw d}}var w=c(s).y;this["#object-y-slider"].addEventListener("change",n=function(){
var t=0,n=e["#object-y-slider"].value-w,i=!0,s=!1,o=void 0;try{for(var l=void 0,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){
var c=l.value,d=c[a],h=d.userTransform,v=d.userToArtboardTransform,f=d.artboardToUserTransform,m=SVGMatrix.fromMatrix(h);
m.multiplySelf(f),m.translateSelf(t,n),m.multiplySelf(v),c.setAttribute("transform",m.toString());
}}catch(b){s=!0,o=b}finally{try{i||null==u["return"]||u["return"]()}finally{if(s)throw o;
}}}),this["#object-y-slider"].addEventListener("changeend",i=function(){e["#object-y-slider"].removeEventListener("change",n),
e["#object-y-slider"].removeEventListener("changeend",i),e._isChangingObjectYSlider=!1;
var t=!0,a=!1,s=void 0;try{for(var o=void 0,l=r[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){
var u=o.value;h(u)}}catch(c){a=!0,s=c}finally{try{t||null==l["return"]||l["return"]();
}finally{if(a)throw s}}})},_onObjectWidthSliderChangeStart:function(){var e=this,n=body.canvas.selectedElements;
if(1===n.length){body.canvas.undoManager.checkpoint("Width"),this._isChangingObjectWidthSlider=!0;
var i,r,s=n[0],o=t(s),l=g(s,body.canvas.currentArtboard),d=SVGMatrix.fromMatrix(s.transform.baseVal.consolidate().matrix),v=a(new SVGPoint(o.x,o.y).matrixTransform(l),new SVGPoint(o.x+o.width,o.y).matrixTransform(l));
this["#object-width-slider"].addEventListener("change",i=function(){var t=e["#object-width-slider"].value,n=t/v,i=1,r=-o.x*(n-1),a=0,l=SVGMatrix.fromMatrix(d);
l.translateSelf(r,a),l.scaleNonUniformSelf(n,i),s.setAttribute("transform",l.toString());
}),this["#object-width-slider"].addEventListener("changeend",r=function(){e["#object-width-slider"].removeEventListener("change",i),
e["#object-width-slider"].removeEventListener("changeend",r),e._isChangingObjectWidthSlider=!1,
h(s)})}else if(n.length>1){body.canvas.undoManager.checkpoint("Width"),this._isChangingObjectWidthSlider=!0;
var f,m,b=[],p=Symbol(),y=!0,_=!1,x=void 0;try{for(var w=void 0,S=n[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){
var C=w.value,E=SVGMatrix.fromMatrix(C.transform.baseVal.consolidate().matrix),k=g(C,body.canvas.currentArtboard),A=k.inverse();
C[p]={userTransform:E,userToArtboardTransform:k,artboardToUserTransform:A};var T=u(t(C),k);
b.push(T)}}catch(L){_=!0,x=L}finally{try{y||null==S["return"]||S["return"]()}finally{
if(_)throw x}}var M=c(b),P=M.width;this["#object-width-slider"].addEventListener("change",f=function(){
var t=e["#object-width-slider"].value,i=!0,r=!1,a=void 0;try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=l[p],c=u.userTransform,d=u.userToArtboardTransform,h=u.artboardToUserTransform,v=t/P,f=1,m=-M.x*(v-1),b=0,g=SVGMatrix.fromMatrix(c);
g.multiplySelf(h),g.translateSelf(m,b),g.scaleNonUniformSelf(v,f),g.multiplySelf(d),
l.setAttribute("transform",g.toString())}}catch(y){r=!0,a=y}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}}),this["#object-width-slider"].addEventListener("changeend",m=function(){
e["#object-width-slider"].removeEventListener("change",f),e["#object-width-slider"].removeEventListener("changeend",m),
e._isChangingObjectWidthSlider=!1;var t=!0,i=!1,r=void 0;try{for(var a=void 0,s=n[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;h(o)}}catch(l){i=!0,r=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(i)throw r}}})}},_onObjectHeightSliderChangeStart:function(){var e=this,n=body.canvas.selectedElements;
if(1===n.length){body.canvas.undoManager.checkpoint("Height"),this._isChangingObjectHeightSlider=!0;
var i,r,s=n[0],o=t(s),l=g(s,body.canvas.currentArtboard),d=SVGMatrix.fromMatrix(s.transform.baseVal.consolidate().matrix),v=a(new SVGPoint(o.x,o.y).matrixTransform(l),new SVGPoint(o.x,o.y+o.height).matrixTransform(l));
this["#object-height-slider"].addEventListener("change",i=function(){var t=e["#object-height-slider"].value,n=1,i=t/v,r=0,a=-o.y*(i-1),l=SVGMatrix.fromMatrix(d);
l.translateSelf(r,a),l.scaleNonUniformSelf(n,i),s.setAttribute("transform",l.toString());
}),this["#object-height-slider"].addEventListener("changeend",r=function(){e["#object-height-slider"].removeEventListener("change",i),
e["#object-height-slider"].removeEventListener("changeend",r),e._isChangingObjectHeightSlider=!1,
h(s)})}else if(n.length>1){body.canvas.undoManager.checkpoint("Height"),this._isChangingObjectHeightSlider=!0;
var f,m,b=[],p=Symbol(),y=!0,_=!1,x=void 0;try{for(var w=void 0,S=n[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){
var C=w.value,E=SVGMatrix.fromMatrix(C.transform.baseVal.consolidate().matrix),k=g(C,body.canvas.currentArtboard),A=k.inverse();
C[p]={userTransform:E,userToArtboardTransform:k,artboardToUserTransform:A};var T=u(t(C),k);
b.push(T)}}catch(L){_=!0,x=L}finally{try{y||null==S["return"]||S["return"]()}finally{
if(_)throw x}}var M=c(b),P=M.height;this["#object-height-slider"].addEventListener("change",f=function(){
var t=e["#object-height-slider"].value,i=!0,r=!1,a=void 0;try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=l[p],c=u.userTransform,d=u.userToArtboardTransform,h=u.artboardToUserTransform,v=1,f=t/P,m=0,b=-M.y*(f-1),g=SVGMatrix.fromMatrix(c);
g.multiplySelf(h),g.translateSelf(m,b),g.scaleNonUniformSelf(v,f),g.multiplySelf(d),
l.setAttribute("transform",g.toString())}}catch(y){r=!0,a=y}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}}),this["#object-height-slider"].addEventListener("changeend",m=function(){
e["#object-height-slider"].removeEventListener("change",f),e["#object-height-slider"].removeEventListener("changeend",m),
e._isChangingObjectHeightSlider=!1;var t=!0,i=!1,r=void 0;try{for(var a=void 0,s=n[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;h(o)}}catch(l){i=!0,r=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(i)throw r}}})}},_onObjectRotationSliderChangeStart:function(){var e=this;
body.canvas.undoManager.checkpoint("Rotation"),this._isChangingObjectRotationSlider=!0;
var t,n,i=body.canvas.selectedElements,r=this["#object-rotation-slider"].value,a=b(i),o=Symbol(),l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value,f=SVGMatrix.fromMatrix(v.transform.baseVal.consolidate().matrix),m=v.getScreenCTM(),g=m.inverse();
v[o]={clientToUserTransform:m,userToClientTransform:g,userTransform:f}}}catch(p){
u=!0,c=p}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}this["#object-rotation-slider"].addEventListener("change",t=function(){
body.modKeys.shift&&(e["#object-rotation-slider"].value=s(e["#object-rotation-slider"].value,15));
var t=e["#object-rotation-slider"].value,n=t-r,l=!0,u=!1,c=void 0;try{for(var d=void 0,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=v[o],m=f.clientToUserTransform,b=f.userToClientTransform,g=f.userTransform,p=SVGMatrix.fromMatrix(g);
p.multiplySelf(b),p.rotateSelf(n,a.x,a.y),p.multiplySelf(m),v.setAttribute("transform",p.toString());
}}catch(y){u=!0,c=y}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c;
}}}),this["#object-rotation-slider"].addEventListener("changeend",n=function(){e["#object-rotation-slider"].removeEventListener("change",t),
e["#object-rotation-slider"].removeEventListener("changeend",n),e._isChangingObjectRotationSlider=!1;
})},_onObjectOriginXSliderChangeStart:function(){var e=this;body.canvas.undoManager.checkpoint("Origin X"),
this._isChangingObjectOriginXSlider=!0;var n,i,r=Symbol(),a=Symbol(),s=body.canvas.selectedElements,o=body.canvas.currentArtboard.getCTM().inverse(),l=b(s),u=l.matrixTransform(o),c=!0,d=!1,h=void 0;
try{for(var v=void 0,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var m=v.value;
m[r]=g(m,body.canvas.currentArtboard).inverse(),m[a]=t(m)}}catch(y){d=!0,h=y}finally{
try{c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#object-origin-x-slider"].addEventListener("change",n=function(){
var t=new SVGPoint(e["#object-origin-x-slider"].value,u.y),n=!0,i=!1,o=void 0;try{
for(var l=void 0,c=s[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var d=l.value,h=t.matrixTransform(d[r]),v=_(h,d[a]);
p(d,v)}}catch(f){i=!0,o=f}finally{try{n||null==c["return"]||c["return"]()}finally{
if(i)throw o}}}),this["#object-origin-x-slider"].addEventListener("changeend",i=function(){
e["#object-origin-x-slider"].removeEventListener("change",n),e["#object-origin-x-slider"].removeEventListener("changeend",i),
e._isChangingObjectOriginXSlider=!1})},_onObjectOriginYSliderChangeStart:function(){
var e=this;body.canvas.undoManager.checkpoint("Origin Y"),this._isChangingObjectOriginYSlider=!0;
var n,i,r=Symbol(),a=Symbol(),s=body.canvas.selectedElements,o=body.canvas.currentArtboard.getCTM().inverse(),l=b(s),u=l.matrixTransform(o),c=!0,d=!1,h=void 0;
try{for(var v=void 0,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var m=v.value;
m[r]=g(m,body.canvas.currentArtboard).inverse(),m[a]=t(m)}}catch(y){d=!0,h=y}finally{
try{c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#object-origin-y-slider"].addEventListener("change",n=function(){
var t=new SVGPoint(u.x,e["#object-origin-y-slider"].value),n=!0,i=!1,o=void 0;try{
for(var l=void 0,c=s[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var d=l.value,h=t.matrixTransform(d[r]),v=_(h,d[a]);
p(d,v)}}catch(f){i=!0,o=f}finally{try{n||null==c["return"]||c["return"]()}finally{
if(i)throw o}}}),this["#object-origin-y-slider"].addEventListener("changeend",i=function(){
e["#object-origin-y-slider"].removeEventListener("change",n),e["#object-origin-y-slider"].removeEventListener("changeend",i),
e._isChangingObjectOriginYSlider=!1})},_update:function(){this._updateObjectSection();
},_updateObjectSection:function(){var e=body.canvas.selectedElements;if(0===e.length)this["#object-section-heading"].disabled=!0,
this["#object-x-heading"].disabled=!0,this["#object-x-slider"].disabled=!0,this["#object-x-slider"].value=0,
this["#object-y-heading"].disabled=!0,this["#object-y-slider"].disabled=!0,this["#object-y-slider"].value=0,
this["#object-width-heading"].disabled=!0,this["#object-width-slider"].disabled=!0,
this["#object-width-slider"].value=0,this["#object-height-heading"].disabled=!0,this["#object-height-slider"].disabled=!0,
this["#object-height-slider"].value=0,this["#object-rotation-heading"].disabled=!0,
this["#object-rotation-slider"].disabled=!0,this["#object-rotation-slider"].value=0,
this["#object-origin-x-heading"].disabled=!0,this["#object-origin-x-slider"].disabled=!0,
this["#object-origin-x-slider"].value=0,this["#object-origin-y-heading"].disabled=!0,
this["#object-origin-y-slider"].disabled=!0,this["#object-origin-y-slider"].value=0;else if(1===e.length){
var n=e[0],i=g(n,body.canvas.currentArtboard),r=t(n),s=[new SVGPoint(r.x,r.y).matrixTransform(i),new SVGPoint(r.x+r.width,r.y).matrixTransform(i),new SVGPoint(r.x+r.width,r.y+r.height).matrixTransform(i),new SVGPoint(r.x,r.y+r.height).matrixTransform(i)],l=a(s[0],s[1]),d=a(s[1],s[2]),h=s.map(function(e){
return e.x}),v=s.map(function(e){return e.y}),p=x.apply(void 0,$traceurRuntime.spread(h)),_=x.apply(void 0,$traceurRuntime.spread(v)),w=f(n),S=m(n),C=y(S,r),E=C.matrixTransform(i),k=E.x,A=E.y;
this["#object-section-heading"].disabled=!1,this._isChangingObjectXSlider===!1&&(this["#object-x-heading"].disabled=!1,
this["#object-x-slider"].disabled=!1,this["#object-x-slider"].value=o(p,2)),this._isChangingObjectYSlider===!1&&(this["#object-y-heading"].disabled=!1,
this["#object-y-slider"].disabled=!1,this["#object-y-slider"].value=o(_,2)),this._isChangingObjectWidthSlider===!1&&(this["#object-width-heading"].disabled=!1,
this["#object-width-slider"].disabled=!1,this["#object-width-slider"].value=o(l,2)),
this._isChangingObjectHeightSlider===!1&&(this["#object-height-heading"].disabled=!1,
this["#object-height-slider"].disabled=!1,this["#object-height-slider"].value=o(d,2)),
this._isChangingObjectRotationSlider===!1&&(this["#object-rotation-heading"].disabled=!1,
this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=o(w,2)),
this._isChangingObjectOriginXSlider===!1&&(this["#object-origin-x-heading"].disabled=!1,
this["#object-origin-x-slider"].disabled=!1,this["#object-origin-x-slider"].value=o(k,2)),
this._isChangingObjectOriginYSlider===!1&&(this["#object-origin-y-heading"].disabled=!1,
this["#object-origin-y-slider"].disabled=!1,this["#object-origin-y-slider"].value=o(A,2));
}else if(e.length>1){var T=e.map(function(e){var n=g(e,body.canvas.currentArtboard),i=t(e),r=u(i,n);
return r}),L=c(T),M=body.canvas.currentArtboard.getCTM().inverse(),P=b(e,!1),R=P.matrixTransform(M),j=R.x,O=R.y;
this["#object-section-heading"].disabled=!1,this._isChangingObjectXSlider===!1&&(this["#object-x-heading"].disabled=!1,
this["#object-x-slider"].disabled=!1,this["#object-x-slider"].value=o(L.x,2)),this._isChangingObjectYSlider===!1&&(this["#object-y-heading"].disabled=!1,
this["#object-y-slider"].disabled=!1,this["#object-y-slider"].value=o(L.y,2)),this._isChangingObjectWidthSlider===!1&&(this["#object-width-heading"].disabled=!1,
this["#object-width-slider"].disabled=!1,this["#object-width-slider"].value=o(L.width,2)),
this._isChangingObjectHeightSlider===!1&&(this["#object-height-heading"].disabled=!1,
this["#object-height-slider"].disabled=!1,this["#object-height-slider"].value=o(L.height,2)),
this._isChangingObjectRotationSlider===!1&&(this["#object-rotation-heading"].disabled=!1,
this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=0),
this._isChangingObjectOriginXSlider===!1&&(this["#object-origin-x-heading"].disabled=!1,
this["#object-origin-x-slider"].disabled=!1,this["#object-origin-x-slider"].value=o(j,2)),
this._isChangingObjectOriginYSlider===!1&&(this["#object-origin-y-heading"].disabled=!1,
this["#object-origin-y-slider"].disabled=!1,this["#object-origin-y-slider"].value=o(O,2));
}}},{},e)}(HTMLElement),C=i("bx-geometrycontrols",S);return{get default(){return C;
}}}),System.registerModule("elements/bx-guide",[],function(){"use strict";var e=System.get("utils/element").registerElement,t=Number.parseFloat,n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
get x(){return this.hasAttribute("x")?t(this.getAttribute("x")):0},set x(e){this.setAttribute("x",e);
},get y(){return this.hasAttribute("y")?t(this.getAttribute("y")):0},set y(e){this.setAttribute("y",e);
},get angle(){return this.hasAttribute("angle")?t(this.getAttribute("angle")):0},
set angle(e){this.setAttribute("angle",e)}},{},e)}(SVGGElement),i=e("g","bx-guide",n);
return{get default(){return i}}}),System.registerModule("elements/bx-huerotatefilter",[],function(){
"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=Number.parseFloat,r=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._update()},attributeChangedCallback:function(e){"data-angle"===e&&this._onAngleChange();
},get angle(){return this.hasAttribute("data-angle")?i(this.getAttribute("data-angle")):0;
},set angle(e){this.setAttribute("data-angle",e)},_onAngleChange:function(){this._update();
},_update:function(){this.innerHTML='<feColorMatrix type="hueRotate" values="'+this.angle+'"/>';
}},{fromSVGFilter:function(e){var n=void 0!==arguments[1]?arguments[1]:!1,r=path.hasAttribute("data-bx-angle")?i(path.getAttribute("data-bx-angle")):0;
if(path.children[0].getAttribute("values")!==""+r)return n&&(path.removeAttribute("data-bx-is"),
path.removeAttribute("data-bx-angle")),null;var a=t("svg:filter","bx-huerotatefilter");
return a}},e)}(SVGFilterElement),a=n("filter","bx-huerotatefilter",r);return{get default(){
return a}}}),System.registerModule("elements/bx-hueslider",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("utils/math").normalize,n=Number.parseInt,i=!1,r='\n  <style>\n    @import url("stylesheets/bx-hueslider.css");\n  </style>\n\n  <main>\n    <canvas id="canvas"></canvas>\n    <div id="marker"></div>\n  </main>\n',a=[[0,[255,0,0]],[.15,[255,255,0]],[.33,[0,255,0]],[.49,[0,255,255]],[.67,[0,0,255]],[.84,[255,0,255]],[1,[255,0,0]]],s=function(e){
function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)}return $traceurRuntime.createClass(s,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#canvas"].addEventListener("mousedown",function(t){
return e._onMouseDown(t)}),this._drawSpectrum()},attributeChangedCallback:function(e){
"hue"===e&&this._onHueAttributeChange()},get hue(){return this.hasAttribute("hue")?n(this.getAttribute("hue")):360;
},set hue(e){this.setAttribute("hue",e)},_onHueAttributeChange:function(){var e=t(this.hue,0,360,0);
this["#marker"].style.left=e/360*100+"%"},_onMouseDown:function(e){var t=this;this.dispatchEvent(new CustomEvent("markerdragstart"));
var n,i,r,a=this["#canvas"].getBoundingClientRect().left;this._onMarkerDrag(e.clientX-a),
window.addEventListener("mousemove",i=function(e){e.clientX!==n&&(n=e.clientX,t._onMarkerDrag(e.clientX-a));
}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r),t.dispatchEvent(new CustomEvent("markerdragend"));
})},_onMarkerDrag:function(e){var n=t(e/this["#canvas"].clientWidth*360,0,360,0);this.hue!==n&&(this.hue=n,
this.dispatchEvent(new CustomEvent("markerdrag",{detail:this.hue})),i&&console.log("%c     ","background: hsl("+n+", 100%, 50%)","hue = "+n));
},_drawSpectrum:function(){var e=this["#canvas"].width=800,t=this["#canvas"].height=100,n=this["#canvas"].getContext("2d"),i=n.createLinearGradient(0,0,e,0),r=!0,s=!1,o=void 0;
try{for(var l=void 0,u=a[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;
i.addColorStop(c[0],"rgb("+c[1][0]+", "+c[1][1]+", "+c[1][2]+")")}}catch(d){s=!0,
o=d}finally{try{r||null==u["return"]||u["return"]()}finally{if(s)throw o}}n.fillStyle=i,
n.fillRect(0,0,e,t)}},{},e)}(HTMLElement),o=e("bx-hueslider",s);return{get default(){
return o}}}),System.registerModule("elements/bx-input",[],function(){"use strict";
System.get("elements/bx-contextmenu"),System.get("elements/bx-menuitem");var e=System.get("classes/shortcut")["default"],t=System.get("classes/undo-manager")["default"],n=System.get("utils/element").registerElement,i=System.get("utils/time").debounce,r=(Object.entries,
'\n  <style id="skin-style">@import url("stylesheets/bx-input.css");</style>\n\n  <main>\n    <input id="input" type="text" spellcheck="false" tabindex="0" value=""></input>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n'),a=function(n){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this.commands={selectAll:{exec:function(){return e["#input"].select();
}},copy:{enabled:function(){return e["#input"].selectionStart!==e["#input"].selectionEnd;
},exec:function(){return e._copyInputValue()}},cut:{enabled:function(){return e["#input"].selectionStart!==e["#input"].selectionEnd;
},exec:function(){return e._cutInputValue()}},paste:{exec:function(){return e._pasteInputValue();
}},undo:{enabled:function(){return e._undoManager.canUndo()},exec:function(){return e._undoManager.undo();
}},redo:{enabled:function(){return e._undoManager.canRedo()},exec:function(){return e._undoManager.redo();
}}},this._textCursor=null,this._undoManager=new t,this._onInputInput250Db=i(this._onInputInput250Db,250,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=r;
var n=!0,a=!1,s=void 0;try{for(var o=void 0,l=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var u=o.value;this["#"+u.id]=u}}catch(c){a=!0,s=c}finally{try{n||null==l["return"]||l["return"]();
}finally{if(a)throw s}}var d=!0,h=!1,v=void 0;try{for(var f=void 0,m=this.attributes[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var b=f.value;this.attributeChangedCallback(b.name)}}catch(g){h=!0,v=g}finally{try{
d||null==m["return"]||m["return"]()}finally{if(h)throw v}}this._updateInputValidity(),
this.addEventListener("mouseenter",function(t){return e._onMouseEnter(t)}),this.addEventListener("mouseleave",function(t){
return e._onMouseLeave(t)}),this.addEventListener("mousemove",function(t){return e._onMouseMove(t);
}),this.addEventListener("mouseup",function(t){return e._onMouseUp(t)}),this.addEventListener("contextmenu",function(t){
return e._onContextMenu(t)}),this["#input"].addEventListener("focusin",function(t){
return e._onInputFocus(t)}),this["#input"].addEventListener("blur",function(t){return e._onInputBlur(t);
}),this["#input"].addEventListener("keydown",function(t){return e._onInputKeyDown(t);
}),this["#input"].addEventListener("input",function(t){return e._onInputInput(t)}),
this["#input"].addEventListener("input",function(t){return e._onInputInput250Db(t);
}),this["#context-menu"].menuWillShow=function(t){return e._menuWillShow(t)},this["#context-menu"].menuItemWillTrigger=function(t){
return e._menuItemWillTrigger(t)},this["#context-menu"].addEventListener("menuitemtrigger",function(t){
return e._onContextMenuItemTrigger(t)})},attributeChangedCallback:function(e){"value"===e?this._onValueAttributeChange():"skin"===e?this._onSkinAttributeChange():"disabled"===e&&this._onDisabledAttributeChange();
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):""},set value(e){
this.setAttribute("value",e)},get mixed(){return this.hasAttribute("mixed")},set mixed(e){
e?this.setAttribute("mixed",""):this.removeAttribute("mixed")},get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):null;
},set skin(e){null===e?this.removeAttribute("skin"):this.setAttribute("skin",e)},
get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},validate:function(e){return!0},focus:function(){this["#input"].focus()},selectAll:function(){
this["#input"].select()},_onValueAttributeChange:function(){this["#input"].value=this.value,
this._updateInputValidity()},_onSkinAttributeChange:function(){null===this.skin?this["#skin-style"].innerText='@import url("stylesheets/bx-input.css");':this["#skin-style"].innerText='@import url("stylesheets/bx-input@'+this.skin+'.css");';
},_onDisabledAttributeChange:function(){this.disabled?this["#input"].tabIndex=-1:this["#input"].tabIndex=0;
},_onMouseEnter:function(e){body.isMouseDown?this["#input"].style.pointerEvents="none":(this["#input"].style.pointerEvents=null,
this._textCursor=body.registerCursor("text",200))},_onMouseLeave:function(e){this["#input"].style.pointerEvents=null,
null!==this._textCursor&&(body.unregisterCursor(this._textCursor),this._textCursor=null);
},_onMouseMove:function(e){this["#input"].matches(":focus")===!1&&e.preventDefault();
},_onMouseUp:function(e){this["#input"].style.pointerEvents=null,null===this._textCursor&&(this._textCursor=body.registerCursor("text",200));
},_onInputFocus:function(e){body.bridge.postMessage("toggleTextInputMode",!0),this._cachedValue=this["#input"].value,
this._updateInputValidity()},_onInputBlur:function(e){body.bridge.postMessage("toggleTextInputMode",!1),
this._undoManager.reset(),this["#input"].value!==this.value&&(this.validate(this["#input"].value)===!1?this["#input"].value=this.value:(this.value=this["#input"].value,
this.dispatchEvent(new CustomEvent("change"))))},_onInputKeyDown:function(t){var n=e.fromEvent(t);
n.matches("Enter")?this._confirmInputChange():n.matches("Escape")?this._cancelInputChange():(n.matches("Backspace")||n.matches("ArrowDown")||n.matches("Shift","ArrowDown")||n.matches("ArrowUp")||n.matches("Shift","ArrowUp")||n.matches("ArrowLeft")||n.matches("Shift","ArrowLeft")||n.matches("ArrowRight")||n.matches("Shift","ArrowRight"))&&t.stopPropagation();
},_onInputInput:function(e){this._updateInputValidity()},_onInputInput250Db:function(e){
var t=this,n=this._cachedValue,i=this["#input"].value;this._cachedValue=this["#input"].value,
this._undoManager.register({label:"Typing",undo:function(){t["#input"].value=t._cachedValue=n,
t._updateInputValidity(),t["#input"].select()},redo:function(){t["#input"].value=t._cachedValue=i,
t._updateInputValidity(),t["#input"].select()}})},_onContextMenu:function(e){e.preventDefault(),
this["#input"].focus(),this["#context-menu"].open(e.clientX,e.clientY)},_onContextMenuItemTrigger:function(e){
var t=e.detail,n=this.commands[t.commandID];n&&n.exec()},_menuWillShow:function(e){
var t=this;return new Promise(function(n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(e){this._validateMenuItem(e);
},_validateMenuItem:function(e){var t=this;return new Promise(function(n){var i=e.commandID||null,r=i?t.commands[i]:null;
r&&(e.disabled=r.enabled?!r.enabled():!1),n()})},_updateInputValidity:function(){
this.validate(this["#input"].value)?this["#input"].setCustomValidity(""):this["#input"].setCustomValidity("Invalid value");
},_confirmInputChange:function(){this.blur(),this.dispatchEvent(new CustomEvent("confirm"));
},_cancelInputChange:function(){this["#input"].value=this.value,this.blur(),this.dispatchEvent(new CustomEvent("cancel"));
},_copyInputValue:function(){var e=this["#input"].value.substring(this["#input"].selectionStart,this["#input"].selectionEnd);
body.bridge.postMessage("setClipboardData",{"text/plain":e})},_pasteInputValue:function(){
var e=this;body.bridge.postMessage("getClipboardData",null,function(t){if(t["text/plain"]){
var n=e["#input"].selectionStart,i=e["#input"].selectionEnd,r=t["text/plain"],a=e["#input"].value.substring(0,n),s=e["#input"].value.substring(i,e["#input"].value.length);
e["#input"].value=a+r+s,e["#input"].setSelectionRange(n+r.length,n+r.length),e["#input"].dispatchEvent(new Event("input",{
bubbles:!0}))}})},_cutInputValue:function(){var e=this["#input"].selectionStart,t=this["#input"].selectionEnd,n=this["#input"].value.substring(e,t),i=this["#input"].value.substring(0,e),r=this["#input"].value.substring(t,this["#input"].value.length);
this["#input"].value=i+r,this["#input"].setSelectionRange(e,e),this["#input"].dispatchEvent(new Event("input",{
bubbles:!0})),body.bridge.postMessage("setClipboardData",{"text/plain":n})}},{},n);
}(HTMLElement),s=n("bx-input",a);return{get default(){return s}}}),System.registerModule("elements/bx-lineargradienthud",[],function(){
"use strict";var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/element"),n=t.createElement,i=t.registerElement,r=t.queryGraphicsElements,a=System.get("utils/event").isMouseMoveIntentional,s=System.get("utils/gradient").getGradientColorAtOffset,o=System.get("utils/math").normalize,l=System.get("utils/paint"),u=l.getPaintType,c=l.getPaintServer,d=System.get("utils/style").queryStylableElements,h=System.get("utils/time").throttle,v=System.get("utils/geometry"),f=v.getPointAtFraction,m=(v.getPointBetweenTwoPoints,
v.getNearestPointOnLine),b=v.getDistanceBetweenPoints,g=v.getRotationAngleFromPoints,p=v.snapPointToAngleMultiple,y=System.get("utils/transform-general"),_=y.getTransformFromPoints,x=y.getTransformToElement,w=y.bboxPointToUserPoint,S=y.userPointToBBoxPoint,C=System.get("classes/enum")["default"],E=System.get("classes/shortcut")["default"],k=System.get("classes/vector")["default"],A=(Object.keys,
new C("gradient","gradientUser","stop")),T=SVGUnitTypes,L=T.SVG_UNIT_TYPE_USERSPACEONUSE,M=T.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,P=6,R='\n  <style>@import url("stylesheets/bx-lineargradienthud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud" tabindex="0">\n      <line class="slider-shadow"></line>\n      <line class="slider"></line>\n      <g class="stop-grippies"></g>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',j=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var e=this;this.commands={selectAll:{enabled:function(){
return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){
return!0},exec:function(){return e._deselectAllStops()}}},this.tabIndex=-1,this._updateAll200Th=h(this._updateAll,200,this),
this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=R;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,v=this.attributes[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){
var f=d.value;this.attributeChangedCallback(f.name)}}catch(m){u=!0,c=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(u)throw c}}this._shadowRoot.addEventListener("keydown",function(t){
return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("mousedown",function(t){
return e._onShadowRootMouseDown(t)}),this._shadowRoot.addEventListener("mouseup",function(t){
return e._onShadowRootMouseUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){
return e._onShadowRootDblClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},get selectedStops(){return $traceurRuntime.spread(this._selectedStops)},_onEnabled:function(){
var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.artboards.addEventListener("mousedown",this._artboardMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),body.canvas.huds.addEventListener("mousedown",this._hudMouseDownListener=function(t){
e._onHudMouseDown(t)}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
e._onUndoOrRedo()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
e._onUndoOrRedo()})},_onDisabled:function(){this._selectStops([]),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.artboards.removeEventListener("mousedown",this._artboardMouseDownListener),
body.canvas.huds.removeEventListener("mousedown",this._hudMouseDownListener),body.canvas.undoManager.removeEventListener("undo",this._undoListener),
body.canvas.undoManager.removeEventListener("redo",this._redoListener)},_onSelectedElementsChange:function(){
this._updateAll200Th()},_onSelectedTextRangeChange:function(){this._updateAll200Th();
},_onArtboardMutation:function(e){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement.parentElement):this._draggedSlider?this._updatePositions(this._draggedSlider.parentElement):"style"===e.attributeName&&"stop"===e.target.localName?this._updateGrippiesColor():this._updateAll200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onUndoOrRedo:function(){this._selectStops([]);
},_onArtboardMouseDown:function(e){0===e.button&&this._selectStops([])},_onHudMouseDown:function(e){
0===e.button&&e.target!==this&&this._selectStops([])},_onShadowRootMouseDown:function(e){
var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderMouseDown(e):e.target.classList.contains("stop-grippie")&&this._onStopGrippieMouseDown(e);
var n,i;this._mouseMovedAfterMouseDown=!1,this._mouseDownTimeStamp=e.timeStamp,window.addEventListener("mousemove",n=function(){
t._mouseMovedAfterMouseDown=!0}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mouseup",i),
window.removeEventListener("mousemove",n)})}},_onShadowRootMouseUp:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippieMouseUp(e);
},_onShadowRootDblClick:function(e){e.timeStamp-this._mouseDownTimeStamp<100&&e.target.classList.contains("slider")&&this._onSliderDblClick(e);
},_onStopGrippieMouseDown:function(e){var t=e.target,n=t[A.stop],i=n.closest("linearGradient"),r=this._selectedStops.filter(function(e){
return e.closest("linearGradient")===i}),a=function(){var e=0,t=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=i.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(t[e++]=l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}(),s=a[0],o=a[a.length-1],l=body.modKeys,u=l.alt,c=l.shift;
this._mouseDownSelectedStops=$traceurRuntime.spread(r),c===!1?r.includes(n)===!1&&this._selectStops([n]):c===!0&&r.includes(n)===!1&&(r.push(n),
this._selectStops(r)),n===s&&0===n.offset.baseVal&&u===!1?this._onBoundingStopGrippieOrSliderEdgeMouseDown(e,"start"):n===o&&1===n.offset.baseVal&&u===!1?this._onBoundingStopGrippieOrSliderEdgeMouseDown(e,"end"):this._onDraggableStopGrippieMouseDown(e);
},_onStopGrippieMouseUp:function(e){if(!this._mouseMovedAfterMouseDown){var t=e.target,n=this._mouseDownSelectedStops,i=t[A.stop],a=t.closest(".subhud"),s=a[A.gradientUser],o=body.modKeys.shift,l=[],u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=body.canvas.selectedElements[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;if("g"!==f.localName&&"a"!==f.localName||!f.contains(s))l.push(f);else{
var m=!0,b=!1,g=void 0;try{for(var p=void 0,y=r($traceurRuntime.spread(f.children))[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value;l.unshift(_)}}catch(x){b=!0,g=x}finally{try{m||null==y["return"]||y["return"]();
}finally{if(b)throw g}}}}}catch(w){c=!0,d=w}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}l.remove(s),l.unshift(s),body.canvas.selectedElements=l;for(var S=s.parentElement;S!==body.canvas.currentArtboard;S=S.parentElement)if("g"===S.localName||"a"===S.localName){
body.canvas.currentContainer=S;break}o===!0&&this._mouseDownSelectedStops.includes(i)===!0&&(n.remove(i),
this._selectStops(n))}},_onDraggableStopGrippieMouseDown:function(e){var t,n,i,r,a=this,s=e.target,o=s.closest(".subhud"),l=o.querySelector(".slider"),u=this._getMoveOffsetsForSelectedStops(),c=this.getScreenCTM(),d=c.inverse(),h=new SVGPoint(l.x1.baseVal.value,l.y1.baseVal.value),v=new SVGPoint(l.x2.baseVal.value,l.y2.baseVal.value),f=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value),g=f.matrixTransform(c),p=(t=m(h,v,f,!1)[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),y=b(h,p)/b(h,v),_=!1;this._draggedGrippie=s,window.addEventListener("mousemove",i=function(t){
var n,i;_===!1&&(body.canvas.undoManager.checkpoint("Move gradient stop"),_=!0);var r=new SVGPoint(g.x+t.clientX-e.clientX,g.y+t.clientY-e.clientY),s=r.matrixTransform(d),o=(n=m(h,v,s,!1)[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),l=b(h,o)/b(h,v),c=l-y,f=!0,p=!1,x=void 0;try{for(var w=void 0,S=a._selectedStops[Symbol.iterator]();!(f=(w=S.next()).done);f=!0){
var C=w.value,E=u.get(C),k=E.minOffset,A=E.maxOffset,T=E.initialOffset;k>T+c?C.setAttribute("offset",k):T+c>A?C.setAttribute("offset",A):C.setAttribute("offset",T+c);
}}catch(L){p=!0,x=L}finally{try{f||null==S["return"]||S["return"]()}finally{if(p)throw x;
}}}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r),a._draggedGrippie=null})},_onBoundingStopGrippieOrSliderEdgeMouseDown:function(t){
var n,i,r,s,o,l,u,c,d=void 0!==arguments[1]?arguments[1]:"start",h=this,v=$traceurRuntime.spread(this["#subhuds"].children).find(function(e){
return e.contains(t.target)}),f=v[A.gradient],m=v[A.gradientUser],b=e(m),y=m.getScreenCTM(),x=y.inverse(),C=SVGMatrix.fromMatrix(f.gradientTransform.baseVal.consolidate().matrix),E=!1,T=!1;
t.target.matches(".stop-grippie")?this._draggedGrippie=t.target:t.target.matches(".slider")&&(this._draggedSlider=t.target);
var P=function(){if(f.gradientUnits.baseVal===L){"start"===d?(r=new SVGPoint(f.x1.baseVal.value,f.y1.baseVal.value),
s=new SVGPoint(f.x2.baseVal.value,f.y2.baseVal.value)):"end"===d&&(r=new SVGPoint(f.x2.baseVal.value,f.y2.baseVal.value),
s=new SVGPoint(f.x1.baseVal.value,f.y1.baseVal.value));var e=new k(s,r).getNormalVector();
o=new SVGPoint(s.x+e.x,s.y+e.y);var t=r.matrixTransform(C),n=s.matrixTransform(C),i=o.matrixTransform(C);
l=t.matrixTransform(y),u=n.matrixTransform(y),c=i.matrixTransform(y)}else if(f.gradientUnits.baseVal===M){
"start"===d?(r=new SVGPoint(f.x1.baseVal.valueInSpecifiedUnits,f.y1.baseVal.valueInSpecifiedUnits),
s=new SVGPoint(f.x2.baseVal.valueInSpecifiedUnits,f.y2.baseVal.valueInSpecifiedUnits)):"end"===d&&(r=new SVGPoint(f.x2.baseVal.valueInSpecifiedUnits,f.y2.baseVal.valueInSpecifiedUnits),
s=new SVGPoint(f.x1.baseVal.valueInSpecifiedUnits,f.y1.baseVal.valueInSpecifiedUnits));
var a=new k(s,r).getNormalVector();o=new SVGPoint(s.x+a.x,s.y+a.y);var h=r.matrixTransform(C),v=s.matrixTransform(C),m=o.matrixTransform(C),g=w(h,b),p=w(v,b),_=w(m,b);
l=g.matrixTransform(y),u=p.matrixTransform(y),c=_.matrixTransform(y)}};window.addEventListener("mousemove",n=function(e){
var n,i;if(E===!1){if(!a(t,e,5))return;E=!0,body.canvas.undoManager.checkpoint("Transform gradient"),
P()}var d,h,v,m,y=body.modKeys.shift,w=new SVGPoint(e.clientX+(l.x-t.clientX),e.clientY+(l.y-t.clientY)),A=new SVGPoint(l.x+e.clientX-t.clientX,l.y+e.clientY-t.clientY),R=SVGPoint.fromPoint(u);
if(y===!1){var j=g(u,l,w),O=(new SVGMatrix).rotate(j,u.x,u.y);m=c.matrixTransform(O);
}else if(y===!0){T=!0;var V=(n=p(u,A,22.5)[Symbol.iterator](),(i=n.next()).done?void 0:i.value);
A=V}if(T){var D=new k(R,A).getNormalVector();m=new SVGPoint(R.x+D.x,R.y+D.y)}if(f.gradientUnits.baseVal===L){
var G=A.matrixTransform(x),I=R.matrixTransform(x),N=m.matrixTransform(x);d=G.matrixTransform(C.inverse()),
h=I.matrixTransform(C.inverse()),v=N.matrixTransform(C.inverse())}else if(f.gradientUnits.baseVal===M){
var B=A.matrixTransform(x),U=R.matrixTransform(x),z=m.matrixTransform(x),H=S(B,b),F=S(U,b),q=S(z,b);
d=H.matrixTransform(C.inverse()),h=F.matrixTransform(C.inverse()),v=q.matrixTransform(C.inverse());
}var Y=_(r,s,o,d,h,v);f.setAttribute("gradientTransform",C.multiply(Y).toString());
}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),h._draggedGrippie=null,h._draggedSlider=null;
})},_onSliderMouseDown:function(e){var t=e.target,n=t.closest(".subhud"),i=(n[A.gradientUser],
t.getScreenCTM()),r=new SVGPoint(e.clientX,e.clientY),a=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),o=a.matrixTransform(i),l=s.matrixTransform(i),u=new k(o,r).length,c=new k(l,r).length;
5>=u?this._onBoundingStopGrippieOrSliderEdgeMouseDown(e,"start"):5>=c?this._onBoundingStopGrippieOrSliderEdgeMouseDown(e,"end"):this._onSliderBodyMouseDown(e);
},_onSliderBodyMouseDown:function(t){var n,i,r,s,o=this,l=t.target,u=l.closest(".subhud"),c=u[A.gradientUser],d=u[A.gradient],h=e(c),v=c.getScreenCTM(),f=v.inverse(),m=SVGMatrix.fromMatrix(d.gradientTransform.baseVal.consolidate().matrix),b=!1;
if(this._draggedSlider=l,d.gradientUnits.baseVal===L){var g=new SVGPoint(d.x1.baseVal.value,d.y1.baseVal.value),p=new SVGPoint(d.x2.baseVal.value,d.y2.baseVal.value),y=g.matrixTransform(m),_=p.matrixTransform(m);
r=y.matrixTransform(v),s=_.matrixTransform(v)}else if(d.gradientUnits.baseVal===M){
var x=new SVGPoint(d.x1.baseVal.valueInSpecifiedUnits,d.y1.baseVal.valueInSpecifiedUnits),C=new SVGPoint(d.x2.baseVal.valueInSpecifiedUnits,d.y2.baseVal.valueInSpecifiedUnits),E=x.matrixTransform(m),k=C.matrixTransform(m),T=w(E,h),P=w(k,h);
r=T.matrixTransform(v),s=P.matrixTransform(v)}window.addEventListener("mousemove",n=function(e){
if(b===!1){if(!a(t,e,5))return;b=!0,body.canvas.undoManager.checkpoint("Transform gradient");
}var n,i;if(d.gradientUnits.baseVal===L){var o=new SVGPoint(r.x+e.clientX-t.clientX,r.y+e.clientY-t.clientY),l=new SVGPoint(s.x+e.clientX-t.clientX,s.y+e.clientY-t.clientY),u=o.matrixTransform(f),c=l.matrixTransform(f);
n=u.matrixTransform(m.inverse()),i=c.matrixTransform(m.inverse())}else if(d.gradientUnits.baseVal===M){
var v=new SVGPoint(r.x+e.clientX-t.clientX,r.y+e.clientY-t.clientY),g=new SVGPoint(s.x+e.clientX-t.clientX,s.y+e.clientY-t.clientY),p=v.matrixTransform(f),y=g.matrixTransform(f),_=S(p,h),x=S(y,h);
n=_.matrixTransform(m.inverse()),i=x.matrixTransform(m.inverse())}d.setAttribute("x1",n.x),
d.setAttribute("y1",n.y),d.setAttribute("x2",i.x),d.setAttribute("y2",i.y)}),window.addEventListener("mouseup",i=function(){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
o._draggedSlider=null})},_onSliderDblClick:function(e){body.canvas.undoManager.checkpoint("Add Stop");
var t=e.target,i=t.closest(".subhud"),r=i[A.gradient],a=this.getScreenCTM().inverse(),l=function(){
var e=0,t=[],n=!0,i=!1,a=void 0;try{for(var s=void 0,o=r.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(t[e++]=l)}}catch(u){i=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw a}}return t}(),u=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),c=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(a),h=b(u,d),v=b(u,c),f=h/v;
f=o(f,0,1,5);for(var m=null,g=0;g<l.length;g+=1){var p=l[g];if(p.offset.baseVal<f)m=g;else if(p.offset.baseVal>f)break;
}var y=n("svg:stop");y.setAttribute("offset",f),y.style.stopColor=s(r,f).toString("hsl"),
null===m?0===r.childElementCount?r.append(y):r.children[0].before(y):l[m].after(y),
this._selectStops([y])},_onShadowRootKeyDown:function(e){var t=E.fromEvent(e);0!==this._selectedStops.length&&(t.matches("Backspace")?(e.stopPropagation(),
this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),
this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Left"),
this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Right"),
this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),
this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 10 Units Left"),
this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 10 Units Right"),
this._moveSelectedStops(10,"right"))))},_updateAll:function(){var e=this,t=d(this.context,body.canvas.selectedElements,body.canvas.selectedTextRange),i=t.filter(function(t){
return"linearGradient"===u(t,e.context)});if(0===i.length)this["#subhuds"].innerHTML="";else{
var r=this._shadowRoot.activeElement,a=[];this["#subhuds"].innerHTML="";var s=!0,o=!1,l=void 0;
try{var h,v,f,m,b=this,g=function(){var e=p.value,t=c(e,b.context);if(a.includes(t))return 0;
a.push(t);var i=function(){var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),r=b["#subhud-template"].cloneNode(!0);r.removeAttribute("id"),
r[A.gradient]=t,r[A.gradientUser]=e;var s=r.querySelector(".stop-grippies"),o=document.createDocumentFragment();
h=!0,v=!1,f=void 0;try{for(var l=void 0,u=i[Symbol.iterator]();!(h=(l=u.next()).done);h=!0){
var d=l.value,m=n("svg:circle");m.setAttribute("class","stop-grippie"),m[A.stop]=d,
d.offset.baseVal>.95?o.prepend(m):s.append(m)}}catch(g){v=!0,f=g}finally{try{h||null==u["return"]||u["return"]();
}finally{if(v)throw f}}s.append(o),b["#subhuds"].append(r)};e:for(var p=void 0,y=i[Symbol.iterator]();!(s=(p=y.next()).done);s=!0)switch(m=g()){
case 0:continue e}}catch(_){o=!0,l=_}finally{try{s||null==y["return"]||y["return"]();
}finally{if(o)throw l}}if(r){var x=$traceurRuntime.spread(this["#subhuds"].children).find(function(e){
return e[A.gradient]===r[A.gradient]});x&&x.focus()}this._updatePositions(),this._updateGrippiesSize(),
this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder();
}},_updatePositions:function(){var t=void 0!==arguments[0]?arguments[0]:null,n=!0,i=!1,r=void 0;
try{var a,s,o,l,u,c,d,h=this,v=function(){var n=m.value;if(t&&n!==t)return 0;var i=n[A.gradient],r=n[A.gradientUser],d=function(){
var e=0,t=[],n=!0,r=!1,a=void 0;try{for(var s=void 0,o=i.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(t[e++]=l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}(),v=SVGMatrix.fromMatrix(i.gradientTransform.baseVal.consolidate().matrix),b=x(r,h),g=n.querySelector(".slider"),p=n.querySelector(".slider-shadow"),y=$traceurRuntime.spread(n.querySelector(".stop-grippies").children);
if(i.gradientUnits.baseVal===L){var _=new SVGPoint(i.x1.baseVal.value,i.y1.baseVal.value),w=new SVGPoint(i.x2.baseVal.value,i.y2.baseVal.value),S=_.matrixTransform(v),C=w.matrixTransform(v),E=S.matrixTransform(b),k=C.matrixTransform(b);
g.setAttribute("x1",E.x),g.setAttribute("y1",E.y),g.setAttribute("x2",k.x),g.setAttribute("y2",k.y),
p.setAttribute("x1",E.x),p.setAttribute("y1",E.y),p.setAttribute("x2",k.x),p.setAttribute("y2",k.y),
a=!0,s=!1,o=void 0;try{for(var T=function(){var e=P.value,t=y.find(function(t){return t[A.stop]===e;
}),n=f(E,k,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},P=void 0,R=d[Symbol.iterator]();!(a=(P=R.next()).done);a=!0)T();
}catch(j){s=!0,o=j}finally{try{a||null==R["return"]||R["return"]()}finally{if(s)throw o;
}}}else if(i.gradientUnits.baseVal===M){var O=e(r),V=new SVGPoint(i.x1.baseVal.valueInSpecifiedUnits,i.y1.baseVal.valueInSpecifiedUnits),D=new SVGPoint(i.x2.baseVal.valueInSpecifiedUnits,i.y2.baseVal.valueInSpecifiedUnits),G=V.matrixTransform(v),I=D.matrixTransform(v),N=new SVGPoint(O.x+G.x*O.width,O.y+G.y*O.height),B=new SVGPoint(O.x+I.x*O.width,O.y+I.y*O.height),U=N.matrixTransform(b),z=B.matrixTransform(b);
g.setAttribute("x1",U.x),g.setAttribute("y1",U.y),g.setAttribute("x2",z.x),g.setAttribute("y2",z.y),
p.setAttribute("x1",U.x),p.setAttribute("y1",U.y),p.setAttribute("x2",z.x),p.setAttribute("y2",z.y),
l=!0,u=!1,c=void 0;try{for(var H=function(){var e=F.value,t=y.find(function(t){return t[A.stop]===e;
}),n=f(U,z,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},F=void 0,q=d[Symbol.iterator]();!(l=(F=q.next()).done);l=!0)H();
}catch(Y){u=!0,c=Y}finally{try{l||null==q["return"]||q["return"]()}finally{if(u)throw c;
}}}};e:for(var m=void 0,b=this["#subhuds"].children[Symbol.iterator]();!(n=(m=b.next()).done);n=!0)switch(d=v()){
case 0:continue e}}catch(g){i=!0,r=g}finally{try{n||null==b["return"]||b["return"]();
}finally{if(i)throw r}}},_updateGrippiesColor:function(){var e=!0,t=!1,n=void 0;try{
for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.style.fill=d[A.stop].style.stopColor}}catch(h){o=!0,l=h}finally{try{
s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){t=!0,n=v}finally{
try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_updateGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.setAttribute("r",P/body.canvas.scale)}}catch(s){t=!0,n=s}finally{
try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_updateGrippiesSelectedState:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;this._selectedStops.includes(d[A.stop])?d.setAttribute("data-selected",""):d.removeAttribute("data-selected");
}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}}}catch(v){t=!0,n=v}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_updateGrippiesZOrder:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this._selectedStops[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h[A.stop]===s&&h.parentElement.append(h)}}catch(v){l=!0,u=v}finally{
try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}}catch(f){n=!0,i=f;
}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_selectStops:function(e){
0===e.length&&0===this._selectedStops.length||(this._selectedStops=$traceurRuntime.spread(e),
this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")));
},_selectAllStops:function(){var e=this._shadowRoot.activeElement,t=e[A.gradient],n=function(){
var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._selectedStops[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.closest("linearGradient")!==t&&n.push(l)}}catch(u){r=!0,a=u}finally{
try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}this._selectStops(n);
},_deselectAllStops:function(){var e=this._shadowRoot.activeElement,t=e[A.gradient];
this._selectStops(this._selectedStops.filter(function(e){return e.closest("linearGradient")!==t;
}))},_selectNextStop:function(){var e=this._shadowRoot.activeElement,t=e[A.gradient];
if(t){var n=function(){var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t;
}),r=i[i.length-1],a=n[0];n.length>1&&(this._selectStops(this._selectedStops.filter(function(e){
return e.closest("linearGradient")!==t})),r.nextElementSibling?this._selectStops($traceurRuntime.spread([r.nextElementSibling],this._selectedStops)):this._selectStops($traceurRuntime.spread([a],this._selectedStops)));
}},_deleteSelectedStops:function(){var e=this._shadowRoot.activeElement;if(null!==e){
var t=e[A.gradient],n=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t;
});if(n.length>0){body.canvas.undoManager.checkpoint("Delete gradient stop(s)");var i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
l.remove()}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{
if(r)throw a}}}this._selectStops([])}},_moveSelectedStops:function(){var e=void 0!==arguments[0]?arguments[0]:1,t=void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;
if(null!==n){var i=n.querySelector(".slider"),r=n[A.gradient],a=this._selectedStops.filter(function(e){
return e.closest("linearGradient")===r}),s=this._getMoveOffsetsForSelectedStops(),l=this.getScreenCTM(),u=new SVGPoint(i.x1.baseVal.value,i.y1.baseVal.value),c=new SVGPoint(i.x2.baseVal.value,i.y2.baseVal.value),d=u.matrixTransform(l),h=c.matrixTransform(l),v=new k(d,h),f=e/v.length,m=!0,b=!1,g=void 0;
try{for(var p=void 0,y=a[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value,x=s.get(_),w=x.minOffset,S=x.maxOffset;
if("left"===t){var C=o(_.offset.baseVal-f,w,S);_.setAttribute("offset",C)}else if("right"===t){
var E=o(_.offset.baseVal+f,w,S);_.setAttribute("offset",E)}}}catch(T){b=!0,g=T}finally{
try{m||null==y["return"]||y["return"]()}finally{if(b)throw g}}}},_canMoveActiveSelectedStops:function(){
var e=void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){
var n=(t.querySelector(".slider"),t[A.gradient]),i=this._selectedStops.find(function(e){
return e.closest("linearGradient")===n});if(null!==i){var r=this._getMoveOffsetsForSelectedStops(),a=r.get(i),s=a.minOffset,o=a.maxOffset;
return"left"===e?i.offset.baseVal>s:"right"===e?i.offset.baseVal<o:void 0}}},_getPreviousNotSelectedStop:function(e){
for(;e.previousElementSibling;){if(this._selectedStops.includes(e.previousElementSibling)===!1)return e.previousElementSibling;
e=e.previousElementSibling}return null},_getNextNotSelectedStop:function(e){for(;e.nextElementSibling;){
if(this._selectedStops.includes(e.nextElementSibling)===!1)return e.nextElementSibling;
e=e.nextElementSibling}return null},_getMoveOffsetsForSelectedStops:function(){var e=new Map,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this._selectedStops[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=this._getPreviousNotSelectedStop(o),u=this._getNextNotSelectedStop(o),c={};
l?c.min=o.offset.baseVal-l.offset.baseVal:c.min=o.offset.baseVal,u?c.max=u.offset.baseVal-o.offset.baseVal:c.max=1-o.offset.baseVal,
t.push(c)}}catch(d){i=!0,r=d}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}if(t.length>0){var h=t[0].min,v=t[0].max,f=!0,m=!1,b=void 0;try{for(var g=void 0,p=t[Symbol.iterator]();!(f=(g=p.next()).done);f=!0){
var y=g.value;y.min<h&&(h=y.min),y.max<v&&(v=y.max)}}catch(_){m=!0,b=_}finally{try{
f||null==p["return"]||p["return"]()}finally{if(m)throw b}}var x=!0,w=!1,S=void 0;try{
for(var C=void 0,E=this._selectedStops[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;e.set(k,{initialOffset:k.offset.baseVal,minOffset:k.offset.baseVal-h,
maxOffset:k.offset.baseVal+v})}}catch(A){w=!0,S=A}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}}return e}},{},t)}(SVGGElement),O=i("g","bx-lineargradienthud",j);
return{get default(){return O}}}),System.registerModule("elements/bx-maskcontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select");var e=System.get("utils/element"),t=(e.createElement,
e.registerElement),n=(System.get("utils/math").round,System.get("utils/paint").getDefFromURL,
System.get("utils/style").queryStylableElements,System.get("utils/time").throttle),i='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-maskcontrols.css");\n  </style>\n\n  <section id="clip-section">\n    <h2 id="clip-section-heading">Clipping Mask</h2>\n\n    <div id="clip-buttons" class="hbox">\n      <bx-button\n        id="clip-button"\n        icon="set"\n        iconsize="25"\n        label="Clip">\n      </bx-button>\n\n      <bx-button\n        id="unclip-button"\n        icon="unset"\n        iconsize="25"\n        label="Unclip">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="mask-section">\n    <h2 id="mask-section-heading">Opacity Mask</h2>\n\n    <div id="mask-buttons" class="hbox">\n      <bx-button\n        id="mask-button"\n        icon="set"\n        iconsize="25"\n        label="Mask">\n      </bx-button>\n\n      <bx-button\n        id="unmask-button"\n        icon="unset"\n        iconsize="25"\n        label="Unmask">\n      </bx-button>\n    </div>\n  </section>\n',r=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;this._update200Th=n(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=i;
var t=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#clip-button"].addEventListener("click",function(t){
return e._onClipButtonClick(t)}),this["#unclip-button"].addEventListener("click",function(t){
return e._onUnclipButtonClick(t)}),this["#mask-button"].addEventListener("click",function(t){
return e._onMaskButtonClick(t)}),this["#unmask-button"].addEventListener("click",function(t){
return e._onUnmaskButtonClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update200Th()},_onSelectedTextRangeChange:function(){
this._update200Th()},_onArtboardMutation:function(e){this._update200Th()},_onClipButtonClick:function(e){
0===e.button&&body.commands.clip.exec()},_onUnclipButtonClick:function(e){0===e.button&&body.commands.unclip.exec();
},_onMaskButtonClick:function(e){0===e.button&&body.commands.mask.exec()},_onUnmaskButtonClick:function(e){
0===e.button&&body.commands.unmask.exec()},_update:function(){this._updateClipSection(),
this._updateMaskSection()},_updateClipSection:function(){this["#clip-button"].disabled=!body.commands.clip.enabled(),
this["#unclip-button"].disabled=!body.commands.unclip.enabled(),this["#clip-section-heading"].disabled=this["#clip-button"].disabled&&this["#unclip-button"].disabled;
},_updateMaskSection:function(){this["#mask-button"].disabled=!body.commands.mask.enabled(),
this["#unmask-button"].disabled=!body.commands.unmask.enabled(),this["#mask-section-heading"].disabled=this["#mask-button"].disabled&&this["#unmask-button"].disabled;
}},{},e)}(HTMLElement),a=t("bx-maskcontrols",r);return{get default(){return a}}}),
System.registerModule("elements/bx-menu",[],function(){"use strict";System.get("elements/bx-menuitem");
var e=System.get("utils/element").registerElement,t=System.get("utils/time").sleep,n=75,i=300,r='\n  <style>\n    @import url("stylesheets/scrollbars.css");\n    @import url("stylesheets/bx-menu.css");\n  </style>\n\n  <main id="main">\n    <content id="content"></content>\n  </main>\n',a=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this._mouseLocs=[],this._mouseInsideMenuBlock=!1,
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=r;
var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this["#main"].addEventListener("mousemove",function(t){return e._onMouseMove(t);
}),this.addEventListener("mouseover",function(t){return e._onMouseOver(t)}),this.addEventListener("mouseout",function(t){
return e._onMouseOut(t)}),this.addEventListener("click",function(t){return e._onClick(t);
})},menuWillShow:function(){return Promise.resolve()},menuItemWillTrigger:function(e){
return Promise.resolve()},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(e){this.setAttribute("label",e)},get opened(){return this.hasAttribute("opened");
},get items(){var e=[],t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;if("content"===s.localName){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s.getDistributedNodes()[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;"bx-menuitem"!==h.localName&&"hr"!==h.localName||e.push(h)}}catch(v){
l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else"bx-menuitem"!==s.localName&&"hr"!==s.localName||e.push(s);
}}catch(f){n=!0,i=f}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}return e},openBelowElement:function(e){var t,n,i,r=arguments;return $traceurRuntime.asyncWrap(function(a){
for(;;)switch(a.state){case 0:t=void 0!==r[1]?r[1]:0,a.state=4;break;case 4:return void Promise.resolve(this.menuWillShow()).then(a.createCallback(2),a.errback);
case 2:this.setAttribute("opened",""),n=e.getBoundingClientRect(),this.style.height=null,
this.style.top=n.top+n.height+t+"px",this.style.left=n.left+"px",i=this.getBoundingClientRect(),
i.left+i.width>window.innerWidth&&(this.style.left=n.left+n.width-i.width+"px"),i.top+i.height+t+5>window.innerHeight&&(this.style.height=window.innerHeight-(n.top+n.height+t)-10+"px"),
this.dispatchEvent(new CustomEvent("menuopen",{bubbles:!0,detail:this})),a.state=-2;
break;default:return a.end()}},this)},openNextToElement:function(e){var t,n,i,r,a=arguments;
return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){case 0:t=void 0!==a[1]?a[1]:0,
s.state=4;break;case 4:return void Promise.resolve(this.menuWillShow()).then(s.createCallback(2),s.errback);
case 2:this.setAttribute("opened",""),n=e.getBoundingClientRect(),this.style.height=null,
this.style.top=n.top+"px",this.style.left=n.left+n.width+t+"px",i=this.getBoundingClientRect(),
i.left+i.width+t>window.innerWidth&&(this.style.left=n.left-i.width-t+"px",i=this.getBoundingClientRect()),
i.top+i.height+5>window.innerHeight&&(r=window.innerHeight-(i.top+i.height)-5,this.style.top=n.top+r+"px",
i=this.getBoundingClientRect(),i.top<0&&(this.style.top="5px",this.style.height=window.innerHeight-10+"px")),
this.dispatchEvent(new CustomEvent("menuopen",{bubbles:!0,detail:this})),s.state=-2;
break;default:return s.end()}},this)},openAtPosition:function(e,t){var n,i;return $traceurRuntime.asyncWrap(function(r){
for(;;)switch(r.state){case 0:return void Promise.resolve(this.menuWillShow()).then(r.createCallback(2),r.errback);
case 2:this.setAttribute("opened",""),this.style.height=null,this.style.left=e+"px",
this.style.top=t+"px",n=this.getBoundingClientRect(),n.left+n.width>window.innerWidth&&(this.style.left=e-n.width+"px",
n=this.getBoundingClientRect()),n.top+n.height+5>window.innerHeight&&(i=window.innerHeight-(n.top+n.height)-5,
this.style.top=t+i+"px",n=this.getBoundingClientRect(),n.top<0&&(this.style.top="5px",
this.style.height=window.innerHeight-10+"px")),this.dispatchEvent(new CustomEvent("menuopen",{
bubbles:!0,detail:this})),r.state=-2;break;default:return r.end()}},this)},close:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.items[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.highlighted&&(a.highlighted=!1)}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this.style.left=null,this.style.top=null,this.removeAttribute("opened"),
this._openedSubmenu&&(this._openedSubmenu.close(),this._openedSubmenu=null),this.dispatchEvent(new CustomEvent("menuclose",{
bubbles:!0,detail:this}))},triggerItem:function(e){var n=this;return new Promise(function(i){
var r,a,s,o,l,u;return $traceurRuntime.asyncWrap(function(c){for(;;)switch(c.state){
case 0:return void Promise.resolve(n.menuItemWillTrigger(e)).then(c.createCallback(2),c.errback);
case 2:c.state=e.disabled===!1&&0===e.childElementCount?13:16;break;case 13:c.state=n.opened?7:12;
break;case 7:r=!0,a=!1,s=void 0;try{for(o=void 0,l=n.items[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)u=o.value,
u.highlighted&&(u.highlighted=!1)}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}n._willClose=!0,c.state=8;break;case 8:return void Promise.resolve(t(100)).then(c.createCallback(4),c.errback);
case 4:e.highlighted=!0,c.state=10;break;case 10:return void Promise.resolve(t(100)).then(c.createCallback(6),c.errback);
case 6:e.highlighted=!1,n._willClose=!1,n.close(),c.state=12;break;case 12:n.dispatchEvent(new CustomEvent("menuitemtrigger",{
bubbles:!0,detail:e})),i(),c.state=-2;break;case 16:i(),c.state=-2;break;default:
return c.end()}},this)})},highlightItem:function(e){var n,i;return $traceurRuntime.asyncWrap(function(r){
for(;;)switch(r.state){case 0:r.state=this._willClose?1:3;break;case 1:r.returnValue=void 0,
r.state=2;break;case 2:r.state=-2;break;case 3:n=this.items.find(function(e){return e.highlighted===!0;
}),r.state=21;break;case 21:r.state=n?10:7;break;case 10:r.state=n===e?5:8;break;case 5:
r.returnValue=void 0,r.state=6;break;case 6:r.state=-2;break;case 8:n.highlighted=!1,
r.state=7;break;case 7:this._openedSubmenu&&(this._openedSubmenu.close(),this._openedSubmenu=null),
r.state=23;break;case 23:r.state=e&&e.disabled===!1?17:-2;break;case 17:i=e.children[0]&&"bx-menu"===e.children[0].localName?e.children[0]:null,
e.highlighted=!0,r.state=18;break;case 18:r.state=i?12:-2;break;case 12:return void Promise.resolve(t(100)).then(r.createCallback(13),r.errback);
case 13:e.highlighted&&e.highlighted&&(this._openedSubmenu=i,i.openNextToElement(e,0)),
r.state=-2;break;default:return r.end()}},this)},highlightPreviousItem:function(){
var e=void 0!==arguments[0]?arguments[0]:null,t=this.items;if(null===e&&(e=t.find(function(e){
return e.highlighted===!0})),e)for(var n=t.indexOf(e)-1;n>=0;n-=1){var i=t[n];if(i.disabled===!1&&i.hidden===!1&&"bx-menuitem"===i.localName)return this.highlightItem(i),
void i.scrollIntoViewIfNeeded()}for(var r=t.length-1;r>=0;r-=1){var a=t[r];if(a.disabled===!1&&a.hidden===!1&&"bx-menuitem"===a.localName&&a!==e)return this.highlightItem(a),
void a.scrollIntoViewIfNeeded()}},highlightNextItem:function(){var e=void 0!==arguments[0]?arguments[0]:null,t=this.items;
if(null===e&&(e=t.find(function(e){return e.highlighted===!0})),e)for(var n=t.indexOf(e)+1;n<t.length;n+=1){
var i=t[n];if(i.disabled===!1&&i.hidden===!1&&"bx-menuitem"===i.localName)return this.highlightItem(i),
void i.scrollIntoViewIfNeeded()}for(var r=0;r<t.length;r+=1){var a=t[r];if(a.disabled===!1&&a.hidden===!1&&"bx-menuitem"===a.localName&&a!==e)return this.highlightItem(a),
void a.scrollIntoViewIfNeeded()}},_onMouseMove:function(e){this._mouseLocs.push({
x:e.pageX,y:e.pageY}),this._mouseLocs.length>3&&this._mouseLocs.shift()},_onMouseOver:function(e){
e.target===this||e.target.parentElement===this||this.items.includes(e.target)?(this._mouseInsideMenuBlock===!1&&(this._mouseInsideMenuBlock=!0),
"bx-menuitem"===e.target.localName&&this._onMenuItemMouseEnter(e.target)):this._mouseInsideMenuBlock===!0&&(this._mouseInsideMenuBlock=!1,
this._onMenuBlockMouseLeave())},_onMouseOut:function(e){e.toElement&&(e.toElement===this||this.items.includes(e.toElement))||this._mouseInsideMenuBlock===!0&&(this._mouseInsideMenuBlock=!1,
this._onMenuBlockMouseLeave())},_onClick:function(e){if(0===e.button&&"bx-menuitem"===e.target.localName&&(e.target.parentElement===this||this.items.includes(e.target))){
var t=e.target;this.triggerItem(t)}},_onMenuItemMouseEnter:function(e){this._timeoutID&&clearTimeout(this._timeoutID),
this._highlightItemWithDelay(e)},_onMenuBlockMouseLeave:function(){this._timeoutID&&clearTimeout(this._timeoutID);
var e=this.items.find(function(e){return e.highlighted===!0});if(e){var t=e.children[0];
t&&t.opened!==!1||(e.highlighted=!1)}},_highlightItemWithDelay:function(e){var t=this,n=this._getHighlightDelay();
n?this._timeoutID=setTimeout(function(){t._highlightItemWithDelay(e)},n):this.highlightItem(e);
},_getHighlightDelay:function(){var e="right",t=this._mouseLocs[this._mouseLocs.length-1],r=this._mouseLocs[0];
if(!this._openedSubmenu)return 0;if(!t)return 0;r||(r=t);var a=this.getBoundingClientRect(),s={
x:a.left,y:a.top-n},o={x:a.left+a.width,y:s.y},l={x:a.left,y:a.top+a.height+n},u={
x:a.left+a.width,y:l.y};if(r.x<a.left||r.x>u.x||r.y<a.top||r.y>u.y)return 0;if(this._lastDelayLoc&&t.x==this._lastDelayLoc.x&&t.y==this._lastDelayLoc.y)return 0;
var c=o,d=u;"left"==e?(c=l,d=s):"below"==e?(c=u,d=l):"above"==e&&(c=s,d=o);var h=function(e,t){
return(t.y-e.y)/(t.x-e.x)},v=h(t,c),f=h(t,d),m=h(r,c),b=h(r,d);return m>v&&f>b?(this._lastDelayLoc=t,
i):(this._lastDelayLoc=null,0)}},{},e)}(HTMLElement),s=e("bx-menu",a);return{get default(){
return s}}}),System.registerModule("elements/bx-menuitem",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("classes/shortcut")["default"],n="images/icons.svg#arrow-right",i="images/icons.svg#circle",r="images/icons.svg#check-mark",a='\n  <style>@import url("stylesheets/bx-menuitem.css");</style>\n\n  <main>\n    <div id="state-icons">\n      <svg class="icon" id="selected-state-icon" viewBox="0 0 100 100" hidden>\n        <use href="'+i+'" width="100" height="100"></use>\n      </svg>\n\n      <svg class="icon" id="toggled-state-icon" viewBox="0 0 100 100" hidden>\n        <use href="'+r+'" width="100" height="100"></use>\n      </svg>\n    </div>\n\n    <div id="label"></div>\n    <div id="shortcut"></div>\n    <svg id="arrow-icon" viewBox="0 0 100 100"><use href="'+n+'" width="100" height="100"></use></svg>\n  </main>\n\n  <content select="bx-menu"></content>\n',s=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=a;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"label"===e?this._onLabelAttributeChange():"state"===e?this._onStateAttributeChange():"shortcut"!==e&&"usershortcut"!==e||this._onShortcutAttributeChange();
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(e){
this.setAttribute("label",e)},get state(){return this.hasAttribute("state")?this.getAttribute("state"):null;
},set state(e){null===e?this.removeAttribute("state"):this.setAttribute("state",e);
},get commandID(){return this.hasAttribute("commandid")?this.getAttribute("commandid"):"";
},set commandID(e){this.setAttribute("commandid",e)},get shortcut(){return this.hasAttribute("shortcut")?t.fromString(this.getAttribute("shortcut")):null;
},set shortcut(e){null===e?this.removeAttribute("shortcut"):this.setAttribute("shortcut",e.toString());
},get userShortcut(){return this.hasAttribute("usershortcut")?t.fromString(this.getAttribute("usershortcut")):null;
},set userShortcut(e){null===e?this.removeAttribute("usershortcut"):this.setAttribute("usershortcut",e.toString());
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onLabelAttributeChange:function(){this["#label"].textContent=this.label},_onStateAttributeChange:function(){
"selected"===this.state?(this["#selected-state-icon"].removeAttribute("hidden"),this["#toggled-state-icon"].setAttribute("hidden","")):"toggled"===this.state?(this["#selected-state-icon"].setAttribute("hidden",""),
this["#toggled-state-icon"].removeAttribute("hidden")):(this["#selected-state-icon"].setAttribute("hidden",""),
this["#toggled-state-icon"].setAttribute("hidden",""))},_onShortcutAttributeChange:function(){
var e=this.userShortcut||this.shortcut||null;e?this["#shortcut"].textContent=e.toDisplayString():this["#shortcut"].textContent="";
}},{},e)}(HTMLElement),o=e("bx-menuitem",s);return{get default(){return o}}}),System.registerModule("elements/bx-ngonhud",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/math"),n=t.round,i=t.normalize,r=System.get("utils/path-shapes"),a=r.getShapeData,s=r.setShapeData,o=r.getNGonVertexPoint,l=System.get("utils/time").throttle,u=System.get("utils/transform-general").getTransformToElement,c=System.get("utils/geometry"),d=c.getNearestPointOnLine,h=c.getPointAtFraction,v=c.getDistanceBetweenPoints,f=c.getRotationAngleFromPoints,m=System.get("classes/enum")["default"],b=System.get("classes/vector")["default"],g=Math,p=(g.sin,
g.cos,g.PI,new m("path")),y=6,_='\n  <style>@import url("stylesheets/bx-ngonhud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <circle class="grippie arms-grippie"></circle>\n      <circle class="grippie r-grippie"></circle>\n      <circle class="grippie corner-grippie"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',x=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,
this._updateGrippiesPosition200Th=l(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=_;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var o=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
o||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_install:function(){var e=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){this._selectedNGons=this._getSelectedNGons(),
0===this._selectedNGons.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onArtboardMutation:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(e){
e.target.matches(".arms-grippie")?this._onArmsGrippieMouseDown(e):e.target.matches(".r-grippie")?this._onRGrippieMouseDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippieMouseDown(e);
},_onArmsGrippieMouseDown:function(e){var t,i,r=this;if(0===e.button){var o,l,u=e.target,c=u.parentElement,d=c[p.path],h=a(d).values,v=(t=h[Symbol.iterator](),
(i=t.next()).done?void 0:i.value),f=(i=t.next()).done?void 0:i.value,m=(i=t.next()).done?void 0:i.value,b=(i=t.next()).done?void 0:i.value,g=(i=t.next()).done?void 0:i.value,y=b,_=!1;
u.parentElement.append(u),this._draggedGrippie=u,window.addEventListener("mousemove",o=function(t){
var i=n((t.clientX-e.clientX)/10,0);b=y+i,5>b&&(b=5),_===!1&&b!==y&&(body.canvas.undoManager.checkpoint("Change number of n-gon arms"),
_=!0),s(d,{type:"n-gon",values:[v,f,m,b,g]})}),window.addEventListener("mouseup",l=function(){
window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l),
r._draggedGrippie=null})}},_onRGrippieMouseDown:function(e){var t,n,i=this;if(0===e.button){
var r,l,u=e.target,c=u.parentElement,d=c[p.path],h=SVGMatrix.fromMatrix(d.transform.baseVal.consolidate().matrix),m=d.getCTM().inverse(),g=a(d).values,y=(t=g[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),_=(n=t.next()).done?void 0:n.value,x=(n=t.next()).done?void 0:n.value,w=(n=t.next()).done?void 0:n.value,S=(n=t.next()).done?void 0:n.value,C=new SVGPoint(e.clientX,e.clientY),E=C.matrixTransform(m),k=new SVGPoint(y,_),A=o(2,y,_,x,w),T=new SVGPoint(E.x,E.y),L=!1;
u.parentElement.append(u),this._draggedGrippie=u,window.addEventListener("mousemove",r=function(e){
L===!1&&(L=!0,body.canvas.undoManager.checkpoint("N-gon radius"));var t=new SVGPoint(e.clientX,e.clientY);
T=t.matrixTransform(m),T=new b(A,E).getOppositeVector().transformPoint(T);var n=f(k,A,T),i=h.rotate(n,k.x,k.y);
d.setAttribute("transform",i.toString()),x=v(k,T),s(d,{type:"n-gon",values:[y,_,x,w,S]
})}),window.addEventListener("mouseup",l=function(){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",l),i._draggedGrippie=null})}},_onCornerGrippieMouseDown:function(e){
var t,n,r=this;if(0===e.button){var l,u,c=e.target,h=c.parentElement,v=h[p.path],f=(SVGMatrix.fromMatrix(v.transform.baseVal.consolidate().matrix),
v.getCTM().inverse()),m=a(v).values,g=(t=m[Symbol.iterator](),(n=t.next()).done?void 0:n.value),y=(n=t.next()).done?void 0:n.value,_=(n=t.next()).done?void 0:n.value,x=(n=t.next()).done?void 0:n.value,w=((n=t.next()).done?void 0:n.value,
new SVGPoint(e.clientX,e.clientY)),S=w.matrixTransform(f),C=new SVGPoint(S.x,S.y),E=o(0,g,y,_,x),k=o(1,g,y,_,x),A=!1;
c.parentElement.append(c),this._draggedGrippie=c,window.addEventListener("mousemove",l=function(e){
var t,n;A===!1&&(A=!0,body.canvas.undoManager.checkpoint("N-gon radius"));var r=new SVGPoint(e.clientX,e.clientY);
C=r.matrixTransform(f);var a=(t=d(E,k,C,!1)[Symbol.iterator](),(n=t.next()).done?void 0:n.value),o=new b(E,a),l=new b(E,k),u=o.length/l.length,c=i(u,0,.5,2);
s(v,{type:"n-gon",values:[g,y,_,x,c]})}),window.addEventListener("mouseup",u=function(){
window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u),
r._draggedGrippie=null})}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._selectedNGons[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=this["#subhud-template"].cloneNode(!0);s.removeAttribute("id"),s[p.path]=a,
this["#subhuds"].append(s)}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()},
_updateGrippiesPosition:function(){var e,t,n=!0,i=!1,r=void 0;try{for(var s=void 0,l=this["#subhuds"].children[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){
var c=s.value,d=c[p.path],v=u(d,this),f=a(d).values,m=(e=f[Symbol.iterator](),(t=e.next()).done?void 0:t.value),b=(t=e.next()).done?void 0:t.value,g=(t=e.next()).done?void 0:t.value,y=(t=e.next()).done?void 0:t.value,_=(t=e.next()).done?void 0:t.value,x=!0,w=!1,S=void 0;
try{for(var C=void 0,E=c.children[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;if(k.matches(".arms-grippie")){var A=new SVGPoint(m,b).matrixTransform(v);
k.setAttribute("cx",A.x),k.setAttribute("cy",A.y)}else if(k.matches(".r-grippie")){
var T=o(2,m,b,g,y).matrixTransform(v);k.setAttribute("cx",T.x),k.setAttribute("cy",T.y);
}else if(k.matches(".corner-grippie")){var L=o(0,m,b,g,y).matrixTransform(v),M=o(1,m,b,g,y).matrixTransform(v),P=h(L,M,_);
k.setAttribute("cx",P.x),k.setAttribute("cy",P.y)}}}catch(R){w=!0,S=R}finally{try{
x||null==E["return"]||E["return"]()}finally{if(w)throw S}}}}catch(j){i=!0,r=j}finally{
try{n||null==l["return"]||l["return"]()}finally{if(i)throw r}}},_updateGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.setAttribute("r",y/body.canvas.scale)}}catch(h){o=!0,l=h}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){t=!0,n=v;
}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_getSelectedNGons:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName?o.hasAttribute("data-bx-shape")&&o.getAttribute("data-bx-shape").startsWith("n-gon")&&t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedNGons(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),w=e("g","bx-ngonhud",x);return{get default(){return w;
}}}),System.registerModule("elements/bx-ngontool",[],function(){"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/geometry"),a=r.getRotationAngleFromPoints,s=r.snapRotationAngle,o=System.get("utils/math").normalize,l=System.get("utils/path-shapes"),u=(l.getShapeData,
l.setShapeData),c=l.getNGonVertexPoint,d=System.get("utils/transform-general").getTransformFromPoints,h=System.get("utils/transform-reduction").reduceTransform,v=System.get("classes/shortcut")["default"],f=System.get("classes/vector")["default"],m=Math,b=m.abs,g=m.min,p=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._nGonCursor=body.registerCursor("images/cursor-n-gon.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
return e._onMouseDown(t)})},_onDisabled:function(){body.unregisterCursor(this._nGonCursor),
body.unregisterCursor(this._mouseDownNGonCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(e){
var t,n,r=this;window.addEventListener("mousemove",t=function(a){i(e,a)!==!1&&(window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),r._onIntentionalDragStart(e))}),window.addEventListener("mouseup",n=function(e){
window.removeEventListener("mousemove",t),body.canvas.removeEventListener("mouseend",n);
})},_onIntentionalDragStart:function(e){var n,i,r,l,m=this,p=body.canvas.currentContainer||body.canvas.currentArtboard,y=body.modKeys.ctrl?"polar":"planar",_=0,x=0,w=0,S=5,C=0;
body.canvas.undoManager.checkpoint("Draw n-gon shape");var E=t("svg:path");E.style.fill="#d8d8d8",
u(E,{type:"n-gon",values:[_,x,w,S,C]}),p.append(E),body.canvas.selectedElements=[E],
this._mouseDownNGonCursor=body.registerCursor("images/cursor-n-gon.png",900,8,7);var k=E.getScreenCTM().inverse(),A=E.transform.baseVal.consolidate().matrix.multiply(k);
E.setAttribute("transform",A.toString()),window.addEventListener("mousemove",n=function(t){
if("planar"==y){var n=t.clientX-e.clientX||1,i=t.clientY-e.clientY||1,r=b(n),o=b(i),l=g(r,o);
body.modKeys.shift&&(r=l,o=l);var h=0>n?e.clientX-r:e.clientX,v=0>i?e.clientY-o:e.clientY;
if(_=h+l/2,x=v+l/2,w=l/2,r!==o){var m=new SVGPoint(h,v),p=new SVGPoint(h+l,v),k=new SVGPoint(h,v+l),T=new SVGPoint(h,v),L=new SVGPoint(h+r,v),M=new SVGPoint(h,v+o),P=d(m,p,k,T,L,M);
E.setAttribute("transform",A.multiply(P).toString())}else E.setAttribute("transform",A);
}else if("polar"===y){var R=new SVGPoint(e.clientX,e.clientY),j=c(2,_,x,w,S),O=new SVGPoint(t.clientX,t.clientY),V=new f(R,O),D=a(R,j,O);
_=R.x,x=R.y,w=V.length,body.modKeys.shift&&(D=s(D,180/S));var G=(new SVGMatrix).rotate(D,R.x,R.y);
E.setAttribute("transform",A.multiply(G).toString())}u(E,{type:"n-gon",values:[_,x,w,S,C]
})}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("keydown",r),body.removeEventListener("toolchange",l),
body.unregisterCursor(m._mouseDownNGonCursor),h(E)}),body.addEventListener("toolchange",l=function(e){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
body.removeEventListener("keydown",r),body.removeEventListener("toolchange",l),body.unregisterCursor(m._mouseDownNGonCursor),
h(E)}),body.addEventListener("keydown",r=function(e){var t=v.fromEvent(event);t.matches("ArrowUp")?(event.preventDefault(),
event.stopPropagation(),S+=1,u(E,{type:"n-gon",values:[_,x,w,S,C]})):t.matches("ArrowDown")?(event.preventDefault(),
event.stopPropagation(),S>5&&(S-=1,u(E,{type:"n-gon",values:[_,x,w,S,C]}))):t.matches("ArrowLeft")?(event.preventDefault(),
event.stopPropagation(),C>0&&(C=o(C-.04,0,.5,2),u(E,{type:"n-gon",values:[_,x,w,S,C]
}))):t.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),.5>C&&(C=o(C+.04,0,.5,2),
u(E,{type:"n-gon",values:[_,x,w,S,C]})))})}},{},e)}(HTMLElement),y=n("bx-ngontool",p);
return{get default(){return y}}}),System.registerModule("elements/bx-outlineshud",[],function(){
"use strict";var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/element"),n=t.createElement,i=t.registerElement,r=t.queryGraphicsElements,a=System.get("utils/path-conversion"),s=a.ellipseToPath,o=a.rectToPath,l=System.get("utils/time"),u=(l.sleep,
l.throttle),c=System.get("utils/transform-general").getTransformToElement,d='\n  <style>@import url("stylesheets/bx-outlineshud.css");</style>\n  <g id="outlines"></g>\n',h=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._updateOutlines30Th=u(this._updateOutlines,30,this),
this._updateOutlines200Th=u(this._updateOutlines,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=d;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var o=!0,l=!1,c=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(o=(h=v.next()).done);o=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){l=!0,c=m}finally{try{
o||null==v["return"]||v["return"]()}finally{if(l)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._updateOutlines(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation()})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._updateOutlines()},_onArtboardMutation:function(){
body.isMouseDown?this._updateOutlines30Th():this._updateOutlines200Th()},_updateOutlines:function(){
var t=document.createDocumentFragment(),i=!1,a=[],l=!0,u=!1,d=void 0;try{for(var h=void 0,v=r(body.canvas.selectedElements)[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value,m={};if(m.transform=c(f,this).toString(),"path"===f.localName)m.d=f.getAttribute("d");else if("rect"===f.localName)m.d=o(f,"plain").getAttribute("d");else if("ellipse"===f.localName)m.d=s(f,"plain").getAttribute("d");else{
var b=e(f);m.d="\n          M "+b.x+" "+b.y+"\n          L "+(b.x+b.width)+" "+b.y+"\n          L "+(b.x+b.width)+" "+(b.y+b.height)+"\n          L "+b.x+" "+(b.y+b.height)+"\n          L "+b.x+" "+b.y+"\n        ";
}body.canvas.selectedElements.includes(f)===!1&&(m.isContainer=!0),i===!1&&(i=!0,
m.isPrimary=!0),a.push(m)}}catch(g){u=!0,d=g}finally{try{l||null==v["return"]||v["return"]();
}finally{if(u)throw d}}for(;this["#outlines"].children.length>a.length;)this["#outlines"].lastElementChild.remove();
for(var p=0;p<a.length;p+=1){var y,_=a[p];this["#outlines"].children[p]?y=this["#outlines"].children[p]:(y=n("svg:path"),
t.append(y)),y.setAttribute("d",_.d?_.d:""),y.setAttribute("class","outline"),y.setAttribute("transform",_.transform.toString()),
_.isContainer?y.setAttribute("data-container",""):y.removeAttribute("data-container");
}this["#outlines"].append(t)}},{},t)}(SVGGElement),v=i("g","bx-outlineshud",h);return{
get default(){return v}}}),System.registerModule("elements/bx-paintsection",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-colorpicker"),
System.get("elements/bx-select");var e=System.get("classes/color")["default"],t=System.get("utils/artwork-rasterization").getPatternThumbnails,n=System.get("utils/bbox").getUserBBox,i=System.get("utils/color").parseColor,r=System.get("utils/element"),a=r.createElement,s=r.registerElement,o=System.get("utils/markup").parseSVG,l=System.get("utils/paint"),u=l.getPaintType,c=l.getPaintServer,d=l.getDefFromURL,h=l.isMixedPaint,v=System.get("utils/pattern"),f=v.centerPattern,m=v.getParentPattern,b=System.get("utils/style").queryStylableElements,g=System.get("utils/text").normalizeTextInRangeBeforeEditing,p=System.get("utils/time"),y=p.debounce,_=p.throttle,x="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",w='\n  <style>@import url("stylesheets/bx-paintsection.css");</style>\n\n  <main>\n    <header id="section-header">\n      <h2 id="section-heading">Paint</h2>\n    </header>\n\n    <section id="paint-type-subsection">\n      <h3 id="paint-type-heading">Type</h3>\n\n      <div id="paint-type-buttons">\n        <bx-button\n          id="solid-paint-button"\n          value="solid"\n          tooltip="Solid Color"\n          icon="paint-solid"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="linear-gradient-paint-button"\n          value="linear-gradient"\n          tooltip="Linear Gradient"\n          icon="paint-linear-gradient"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="radial-gradient-paint-button"\n          value="radial-gradient"\n          tooltip="Radial Gradient"\n          icon="paint-radial-gradient"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="pattern-paint-button"\n          value="pattern"\n          tooltip="Pattern"\n          icon="paint-pattern"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="none-paint-button"\n          value="none"\n          tooltip="None"\n          icon="paint-none"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="inherit-paint-button"\n          value="inherit"\n          tooltip="Inherit"\n          icon="paint-inherit"\n          iconsize="30"\n          hidden\n          skin="iconic">\n        </bx-button>\n      </div>\n    </section>\n\n    <section id="spread-method-subsection">\n      <h3>Spread</h3>\n\n      <div id="spread-method-buttons">\n        <bx-button\n          id="pad-spread-method-button"\n          value="pad"\n          tooltip="Pad spread method"\n          icon="spread-method-pad"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="repeat-spread-method-button"\n          value="repeat"\n          tooltip="Repeat spread method"\n          icon="spread-method-repeat"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="reflect-spread-method-button"\n          value="reflect"\n          tooltip="Reflect spread method"\n          icon="spread-method-reflect"\n          iconsize="30"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </section>\n\n    <section id="color-subsection">\n      <h3>Color</h3>\n      <bx-colorpicker id="color-picker"></bx-colorpicker>\n      <p id="color-picker-hint"></p>\n    </section>\n\n    <section id="pattern-subsection">\n      <h3>Pattern</h3>\n\n      <div class="hbox">\n        <bx-select id="pattern-select" value="pattern-0">\n          <bx-selectitem value="pattern-0" label="#pattern-0"></bx-selectitem>\n          <bx-selectitem value="pattern-1" label="#pattern-1"></bx-selectitem>\n          <bx-selectitem value="pattern-2" label="#pattern-2"></bx-selectitem>\n        </bx-select>\n\n        <bx-button\n          id="edit-pattern-button"\n          tooltip="Edit pattern"\n          icon="forward"\n          iconsize="22"\n          skin="iconic">\n        </bx-button>\n      </div>\n\n      <div id="pattern-select-hint">Add more patterns in <span id="defs-panel-span">Defs Panel</span>.</div>\n    </section>\n  </main>\n',S=function(r){
function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)}return $traceurRuntime.createClass(s,{
createdCallback:function(){var e=this;this._update200Th=_(this._update,200,this),
this._updatePatternThumbnails2000Db=y(this._updatePatternThumbnails,2e3,this),"fill"===this.context?(this._linearGradientHud=body.canvas.linearGradientFillHud,
this._radialGradientHud=body.canvas.radialGradientFillHud):"stroke"===this.context&&(this._linearGradientHud=body.canvas.linearGradientStrokeHud,
this._radialGradientHud=body.canvas.radialGradientStrokeHud),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=w;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}this["#paint-type-buttons"].addEventListener("click",function(t){
return e._onPaintTypeButtonsClick(t)}),this["#spread-method-buttons"].addEventListener("click",function(t){
return e._onSpreadMethodButtonsClick(t)}),this["#color-picker"].addEventListener("changestart",function(t){
return e._onColorPickerColorChangeStart(t)}),this["#color-picker-hint"].addEventListener("click",function(t){
return e._onColorPickerHintClick(t)}),this["#pattern-select"].addEventListener("change",function(){
return e._onPatternSelectChange()}),this["#pattern-select-hint"].addEventListener("click",function(t){
return e._onPatternSelectHintClick(t)}),this["#edit-pattern-button"].addEventListener("click",function(t){
return e._onEditPatternButtonClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},set context(e){"fill"!==e&&"stroke"!==e||this.setAttribute("context",e)},_onEnabled:function(){
var e=this;body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),body.canvas.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){
e._onCurrentArtboardChange()}),this._linearGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener1=function(){
e._onSelectedElementsChange()}),this._radialGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener2=function(){
e._onSelectedElementsChange()}),this._onCurrentArtboardChange(),this._onSelectedElementsChange();
},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),
this._linearGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener1),
this._radialGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener2);
},_onArtboardMutation:function(e){this._update200Th()},_onSelectedElementsChange:function(){
this._update200Th()},_onSelectedTextRangeChange:function(){this._update()},_onCurrentArtboardChange:function(){
var e=body.canvas.currentArtboard.contentType;"symbol"===e?this["#inherit-paint-button"].hidden=!1:this["#inherit-paint-button"].hidden=!0;
},_onPaintTypeButtonsClick:function(e){var t=e.target,n=t.value,i=(t.localName,t.pressed),r=t.mixed;
"bx-button"===e.target.localName&&(i===!0&&r===!1||("solid"===n?this._onSolidPaintButtonClick():"linear-gradient"===n?this._onLinearGradientPaintButtonClick():"radial-gradient"===n?this._onRadialGradientPaintButtonClick():"pattern"===n?this._onPatternPaintButtonClick():"inherit"===n?this._onInheritPaintButtonClick():"none"===n&&this._onNonePaintButtonClick()));
},_onSolidPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Paint type");
var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;g(n);var r,a=b(this.context,t,n),s=a[0]||null,o=u(s,this.context);
if("solid"===o)r=getComputedStyle(s)[this.context];else if("linearGradient"===o||"radialGradient"===o){
var l=c(s,this.context),d=l.children[0],h=d.style.stopColor||"#000",v=i(h,"hsla");
r=v.toString("hsl")}else r="#bada55";var f=!0,m=!1,p=void 0;try{for(var y=void 0,_=a[Symbol.iterator]();!(f=(y=_.next()).done);f=!0){
var x=y.value;x.style[this.context]=r}}catch(w){m=!0,p=w}finally{try{f||null==_["return"]||_["return"]();
}finally{if(m)throw p}}},_onLinearGradientPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Change paint type");
var t=body.canvas,r=t.selectedElements,s=t.selectedTextRange;g(s);var l,c=b(this.context,r,s),h=c[0]||null,v=u(h,this.context);
if("solid"===v){var f=getComputedStyle(h)[this.context],m=i(f,"hsla"),p=m.l-20;0>p&&(p=0),
l=a("svg:linearGradient");var y=a("svg:stop");y.offset.baseVal=0,y.style.stopColor=m.toString("hsl"),
1!==m.a&&(y.style.stopOpacity=m.a),l.append(y);var _=a("svg:stop");_.offset.baseVal=1;
var x=new e(m.h,m.s,p,1,"hsla");_.style.stopColor=x.toString("hsl"),l.append(_)}else if("linearGradient"===v){
var w=getComputedStyle(h)[this.context];l=d(body.canvas.masterArtboard,w)}else if("radialGradient"===v){
var S=getComputedStyle(h)[this.context],C=d(body.canvas.masterArtboard,S);l=a("svg:linearGradient"),
l.innerHTML=C.innerHTML}else l=o('\n        <linearGradient>\n          <stop offset="0" style="stop-color: #bada55"></stop>\n          <stop offset="1" style="stop-color: #758d29"></stop>\n        </linearGradient>\n      ');
var E=null,k=!0,A=!1,T=void 0;try{for(var L=void 0,M=c[Symbol.iterator]();!(k=(L=M.next()).done);k=!0){
var P=L.value;if("tspan"===P.localName&&E&&E.closest("text")===P.closest("text"))P.style[this.context]=E.style[this.context];else if("use"===P.localName){
var R=l.cloneNode(!0);R.setAttribute("id",body.canvas.generateUniqueID("gradient")),
R.setAttribute("gradientUnits","objectBoundingBox"),R.setAttribute("x1","0.5"),R.setAttribute("y1","0"),
R.setAttribute("x2","0.5"),R.setAttribute("y2","1"),body.canvas.defs.append(R),P.style[this.context]="url(#"+R.id+")";
}else{var j=n(P),O=l.cloneNode(!0);O.setAttribute("id",body.canvas.generateUniqueID("gradient")),
O.setAttribute("gradientUnits","userSpaceOnUse"),O.setAttribute("x1",j.x+j.width/2),
O.setAttribute("y1",j.y),O.setAttribute("x2",j.x+j.width/2),O.setAttribute("y2",j.y+j.height),
body.canvas.defs.append(O),P.style[this.context]="url(#"+O.id+")"}"tspan"===P.localName&&(E=P);
}}catch(V){A=!0,T=V}finally{try{k||null==M["return"]||M["return"]()}finally{if(A)throw T;
}}},_onRadialGradientPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Change paint type");
var t=body.canvas,r=t.selectedElements,s=t.selectedTextRange;g(s);var l,c=b(this.context,r,s),h=c[0]||null,v=u(h,this.context);
if("solid"===v){var f=getComputedStyle(h)[this.context],m=i(f,"hsla"),p=m.l-20;0>p&&(p=0),
l=a("svg:radialGradient");var y=a("svg:stop");y.offset.baseVal=0,y.style.stopColor=m.toString("hsl"),
1!==m.a&&(y.style.stopOpacity=m.a),l.append(y);var _=a("svg:stop");_.offset.baseVal=1;
var x=new e(m.h,m.s,p,1,"hsla");_.style.stopColor=x.toString("hsl"),l.append(_)}else if("linearGradient"===v){
var w=getComputedStyle(h)[this.context],S=d(body.canvas.masterArtboard,w);l=a("svg:radialGradient"),
l.innerHTML=S.innerHTML}else if("radialGradient"===v){var C=getComputedStyle(h)[this.context];
l=d(body.canvas.masterArtboard,C)}else l=o('\n        <radialGradient>\n          <stop offset="0" style="stop-color: #bada55"></stop>\n          <stop offset="1" style="stop-color: #758d29"></stop>\n        </radialGradient>\n      ');
var E=null,k=!0,A=!1,T=void 0;try{for(var L=void 0,M=c[Symbol.iterator]();!(k=(L=M.next()).done);k=!0){
var P=L.value;if("tspan"===P.localName&&E&&E.closest("text")===P.closest("text"))P.style[this.context]=E.style[this.context];else if("use"===P.localName){
var R=l.cloneNode(!0);R.setAttribute("id",body.canvas.generateUniqueID("gradient")),
R.setAttribute("gradientUnits","objectBoundingBox"),R.setAttribute("cx","0.5"),R.setAttribute("cy","0.5"),
R.setAttribute("r","0.5"),body.canvas.defs.append(R),P.style[this.context]="url(#"+R.id+")";
}else{var j=n(P),O=l.cloneNode(!0);O.setAttribute("id",body.canvas.generateUniqueID("gradient")),
O.setAttribute("gradientUnits","userSpaceOnUse"),O.setAttribute("cx",j.x+j.width/2),
O.setAttribute("cy",j.y+j.height/2),O.setAttribute("r",j.width/2),body.canvas.defs.append(O),
P.style[this.context]="url(#"+O.id+")"}"tspan"===P.localName&&(E=P)}}catch(V){A=!0,
T=V}finally{try{k||null==M["return"]||M["return"]()}finally{if(A)throw T}}},_onPatternPaintButtonClick:function(){
body.canvas.undoManager.checkpoint("Paint type");var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;
g(n);var i=b(this.context,t,n),r=i[0]||null,s=u(r,this.context),l=null,c=$traceurRuntime.spread(i);
if("pattern"===s){var h=getComputedStyle(r)[this.context],v=d(body.canvas.masterArtboard,h);
l=v.hasAttribute("href")===!1?v:m(v),c=c.filter(function(e){return e!==r})}if(!l){
var p=$traceurRuntime.spread(body.canvas.masterArtboard.querySelectorAll("pattern"));
l=p.find(function(e){return e.hasAttribute("href")===!1})}if(!l){var y=body.canvas.generateUniqueID("pattern");
l=o('\n        <pattern id="'+y+'" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse" viewBox="0 0 100 100">\n          <path d="M 0 0 L 50 0 L 50 100 L 0 100 Z" style="fill: black;"></path>\n        </pattern>\n      '),
body.canvas.defs.append(l)}var _=!0,x=!1,w=void 0;try{for(var S=void 0,C=c[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value,k=a("svg:pattern");k.setAttribute("id",body.canvas.generateUniqueID(l.id)),
k.setAttribute("href","#"+l.id),k.setAttribute("patternTransform",""),body.canvas.defs.append(k),
E.style[this.context]="url(#"+k.id+")",f(k,E)}}catch(A){x=!0,w=A}finally{try{_||null==C["return"]||C["return"]();
}finally{if(x)throw w}}},_onInheritPaintButtonClick:function(){body.canvas.undoManager.checkpoint("Paint type");
var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;g(n);var i=b(this.context,t,n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
u.style[this.context]="inherit"}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}},_onNonePaintButtonClick:function(){body.canvas.undoManager.checkpoint("Paint type");
var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;g(n);var i=b(this.context,t,n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
u.style[this.context]="none"}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}},_onSpreadMethodButtonsClick:function(e){var t=e.target,n=t.pressed,i=t.mixed,r=t.value;
if("bx-button"===e.target.localName&&0===e.button&&(n!==!0||i!==!1)){body.canvas.undoManager.checkpoint("Spread Method");
var a=body.canvas,s=a.selectedElements,o=a.selectedTextRange,l=b(this.context,s,o),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=l[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value,p=u(g,this.context);
if("linearGradient"===p||"radialGradient"===p){var y=c(g,this.context);y.setAttribute("spreadMethod",r);
}}}catch(_){h=!0,v=_}finally{try{d||null==m["return"]||m["return"]()}finally{if(h)throw v;
}}}},_onColorPickerColorChangeStart:function(e){var t=this;body.canvas.undoManager.checkpoint("Change Color");
var n=body.canvas,i=n.selectedElements,r=n.selectedTextRange;g(r);var a,s,o,l=b(this.context,i,r),d=l[0]||null,h=u(d,this.context);
if("solid"===h)o=getComputedStyle(d)[this.context];else if("linearGradient"===h||"radialGradient"===h){
var v=c(d,this.context),f=v.children[0];o=f.style.stopColor||"#000"}else o="#bada55";
var m=!0,p=!1,y=void 0;try{for(var _=void 0,x=l[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){
var w=_.value;w!==d&&"solid"===h&&(w.style[this.context]=o)}}catch(S){p=!0,y=S}finally{
try{m||null==x["return"]||x["return"]()}finally{if(p)throw y}}this["#color-picker"].addEventListener("change",a=function(){
var e=!0,n=!1,i=void 0;try{for(var r,a,s,o,d,h,v=function(){var e=f.value,n=u(e,t.context);
if("solid"===n)e.style[t.context]=t["#color-picker"].color;else if("linearGradient"===n){
var i=c(e,t.context),l=t._linearGradientHud.selectedStops.filter(function(e){return e.parentElement===i;
});r=!0,a=!1,s=void 0;try{for(var v=void 0,m=l[Symbol.iterator]();!(r=(v=m.next()).done);r=!0){
var b=v.value;b.style.stopColor=t["#color-picker"].color}}catch(g){a=!0,s=g}finally{
try{r||null==m["return"]||m["return"]()}finally{if(a)throw s}}}else if("radialGradient"===n){
var p=c(e,t.context),y=t._radialGradientHud.selectedStops.filter(function(e){return e.parentElement===p;
});o=!0,d=!1,h=void 0;try{for(var _=void 0,x=y[Symbol.iterator]();!(o=(_=x.next()).done);o=!0){
var w=_.value;w.style.stopColor=t["#color-picker"].color}}catch(S){d=!0,h=S}finally{
try{o||null==x["return"]||x["return"]()}finally{if(d)throw h}}}},f=void 0,m=l[Symbol.iterator]();!(e=(f=m.next()).done);e=!0)v();
}catch(b){n=!0,i=b}finally{try{e||null==m["return"]||m["return"]()}finally{if(n)throw i;
}}}),this["#color-picker"].addEventListener("changeend",s=function(){t["#color-picker"].removeEventListener("change",a),
t["#color-picker"].removeEventListener("changeend",s)})},_onColorPickerHintClick:function(e){
0===e.button&&"edit-tool-span"===e.target.id&&body.toggleTool("edit-tool")},_onPatternSelectChange:function(){
body.canvas.undoManager.checkpoint("Pattern");var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;
g(n);var i=b(this.context,t,n),r=this["#pattern-select"].value,s=body.canvas.masterArtboard.querySelector("#"+r),o=!0,l=!1,c=void 0;
try{for(var h=void 0,v=i[Symbol.iterator]();!(o=(h=v.next()).done);o=!0){var p=h.value,y=u(p,this.context);
if("pattern"===y){var _=getComputedStyle(p)[this.context],x=d(body.canvas.masterArtboard,_),w=x.hasAttribute("href")?m(x):x;
if(w===s)continue}var S=a("svg:pattern");S.setAttribute("id",body.canvas.generateUniqueID(s.id)),
S.setAttribute("href","#"+s.id),S.setAttribute("patternTransform",""),body.canvas.defs.append(S),
p.style[this.context]="url(#"+S.id+")",f(S,p)}}catch(C){l=!0,c=C}finally{try{o||null==v["return"]||v["return"]();
}finally{if(l)throw c}}},_onPatternSelectHintClick:function(e){0===e.button&&"defs-panel-span"===e.target.id&&body.togglePanel("defs-panel");
},_onEditPatternButtonClick:function(e){0===e.button&&body.canvas.editPattern(this["#pattern-select"].value);
},_update:function(){var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;
this._selectedStylableElements=b(this.context,t,n),this._updateHeader(),this._updatePaintTypeSubsection(),
this._updateSpreadMethodSubsection(),this._updateColorSubsection(),this._updatePatternSubsection();
},_updateHeader:function(){var e=this._selectedStylableElements[0]||null;null===e?this["#section-heading"].disabled=!0:this["#section-heading"].disabled=!1;
},_updatePaintTypeSubsection:function(){var e=this._selectedStylableElements,t=e[0]||null;
if(null===t){this["#paint-type-heading"].disabled=!0;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#paint-type-buttons"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.disabled=!0,o.pressed=!1,o.mixed=!1}}catch(l){i=!0,r=l}finally{try{
n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}else{var c=u(t,this.context),d=h(e,this.context);
if(this["#paint-type-heading"].disabled=!1,"solid"===c){var v=!0,f=!1,m=void 0;try{
for(var b=void 0,g=this["#paint-type-buttons"].children[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){
var p=b.value;p.disabled=!1,"solid"===p.value?(p.pressed=!0,p.mixed=d):(p.pressed=!1,
p.mixed=!1)}}catch(y){f=!0,m=y}finally{try{v||null==g["return"]||g["return"]()}finally{
if(f)throw m}}}else if("linearGradient"===c){var _=!0,x=!1,w=void 0;try{for(var S=void 0,C=this["#paint-type-buttons"].children[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value;E.disabled=!1,"linear-gradient"===E.value?(E.pressed=!0,E.mixed=d):(E.pressed=!1,
E.mixed=!1)}}catch(k){x=!0,w=k}finally{try{_||null==C["return"]||C["return"]()}finally{
if(x)throw w}}}else if("radialGradient"===c){var A=!0,T=!1,L=void 0;try{for(var M=void 0,P=this["#paint-type-buttons"].children[Symbol.iterator]();!(A=(M=P.next()).done);A=!0){
var R=M.value;R.disabled=!1,"radial-gradient"===R.value?(R.pressed=!0,R.mixed=d):(R.pressed=!1,
R.mixed=!1)}}catch(j){T=!0,L=j}finally{try{A||null==P["return"]||P["return"]()}finally{
if(T)throw L}}}else if("pattern"===c){var O=!0,V=!1,D=void 0;try{for(var G=void 0,I=this["#paint-type-buttons"].children[Symbol.iterator]();!(O=(G=I.next()).done);O=!0){
var N=G.value;N.disabled=!1,"pattern"===N.value?(N.pressed=!0,N.mixed=d):(N.pressed=!1,
N.mixed=!1)}}catch(B){V=!0,D=B}finally{try{O||null==I["return"]||I["return"]()}finally{
if(V)throw D}}}else if("inherit"===c){var U=!0,z=!1,H=void 0;try{for(var F=void 0,q=this["#paint-type-buttons"].children[Symbol.iterator]();!(U=(F=q.next()).done);U=!0){
var Y=F.value;Y.disabled=!1,"inherit"===Y.value?(Y.pressed=!0,Y.mixed=d):(Y.pressed=!1,
Y.mixed=!1)}}catch($){z=!0,H=$}finally{try{U||null==q["return"]||q["return"]()}finally{
if(z)throw H}}}else if("none"===c){var W=!0,X=!1,Z=void 0;try{for(var K=void 0,J=this["#paint-type-buttons"].children[Symbol.iterator]();!(W=(K=J.next()).done);W=!0){
var Q=K.value;Q.disabled=!1,"none"===Q.value?(Q.pressed=!0,Q.mixed=d):(Q.pressed=!1,
Q.mixed=!1)}}catch(ee){X=!0,Z=ee}finally{try{W||null==J["return"]||J["return"]()}finally{
if(X)throw Z}}}}},_updateSpreadMethodSubsection:function(){var e=this._selectedStylableElements,t=e[0]||null;
if(null===t)this["#spread-method-subsection"].hidden=!0;else{var n=u(t,this.context);
if("linearGradient"===n||"radialGradient"===n){this["#spread-method-subsection"].hidden=!1;
var i=c(t,this.context),r=!1,a=!0,s=!1,o=void 0;try{for(var l=void 0,d=e[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){
var h=l.value,v=c(h,this.context);v&&v.localName.endsWith("Gradient")&&v.spreadMethod.baseVal!==i.spreadMethod.baseVal&&(r=!0);
}}catch(f){s=!0,o=f}finally{try{a||null==d["return"]||d["return"]()}finally{if(s)throw o;
}}i.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REPEAT?(this["#repeat-spread-method-button"].pressed=!0,
this["#repeat-spread-method-button"].mixed=r,this["#pad-spread-method-button"].pressed=!1,
this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].pressed=!1,
this["#reflect-spread-method-button"].mixed=!1):i.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_PAD?(this["#repeat-spread-method-button"].pressed=!1,
this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].pressed=!0,
this["#pad-spread-method-button"].mixed=r,this["#reflect-spread-method-button"].pressed=!1,
this["#reflect-spread-method-button"].mixed=!1):i.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REFLECT&&(this["#repeat-spread-method-button"].pressed=!1,
this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].pressed=!1,
this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].pressed=!0,
this["#reflect-spread-method-button"].mixed=r)}else this["#spread-method-subsection"].hidden=!0;
}},_updateColorSubsection:function(){var e=this._selectedStylableElements,t=e[0]||null;
if(null===t)this["#color-subsection"].hidden=!0;else{var n=u(t,this.context),i=h(e,this.context);
if("solid"===n)this["#color-subsection"].hidden=!1,this["#color-picker"].hidden=!1,
this["#color-picker"].color=getComputedStyle(t)[this.context],this["#color-picker"].mixed=i,
this["#color-picker-hint"].innerHTML="";else if("linearGradient"===n||"radialGradient"===n){
var r=this["_"+n+"Hud"].selectedStops;this["#color-subsection"].hidden=!1,this["#color-picker"].mixed=i,
0===r.length?(this["#color-picker"].hidden=!0,this["#color-picker-hint"].innerHTML='Select stop with <span id="edit-tool-span">Edit Tool</span>.'):(this["#color-picker"].hidden=!1,
this["#color-picker"].color=r[0].style.stopColor||"#000",this["#color-picker-hint"].innerHTML="");
}else this["#color-subsection"].hidden=!0}},_updatePatternSubsection:function(){var e=this._selectedStylableElements,t=e[0]||null;
if(null===t||"pattern"!==u(t,this.context))this["#pattern-subsection"].hidden=!0;else{
this["#pattern-subsection"].hidden=!1,this["#pattern-select"].mixed=h(e,this.context);
var n=$traceurRuntime.spread(body.canvas.masterArtboard.querySelectorAll("pattern"));
if(n=n.filter(function(e){return e.hasAttribute("href")===!1}),this["#pattern-select"].childElementCount===n.length)for(var i=0;i<n.length;i+=1){
var r=n[i],s=this["#pattern-select"].children[i];s.label="#"+r.id,s.value=r.id}else{
this["#pattern-select"].innerHTML="";var o=!0,l=!1,d=void 0;try{for(var v=void 0,f=n[Symbol.iterator]();!(o=(v=f.next()).done);o=!0){
var b=v.value,g=a("bx-selectitem");g.label="#"+b.id,g.value=b.id,g.thumbnail=x,this["#pattern-select"].append(g);
}}catch(p){l=!0,d=p}finally{try{o||null==f["return"]||f["return"]()}finally{if(l)throw d;
}}}var y=c(t,this.context),_=y.hasAttribute("href")?m(y):y;this["#pattern-select"].value=_.id,
this._updatedPatternThumbnailsForFirstTime?this._updatePatternThumbnails2000Db():(this._updatedPatternThumbnailsForFirstTime=!0,
this._updatePatternThumbnails())}},_updatePatternThumbnails:function(){var e=this,n=body.canvas.extractArtwork();
t(n,function(t,n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e["#pattern-select"].children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.value===t&&(l.thumbnail=n)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}})}},{},r)}(HTMLElement),C=s("section","bx-paintsection",S);
return{get default(){return C}}}),System.registerModule("elements/bx-panel",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=(System.get("utils/math").normalize,
System.get("utils/time")),n=t.getTimeStamp,i=t.sleep,r=Number.parseFloat,a=window.getComputedStyle,s=5,o=7,l=5,u=7,c=!1,d='\n  <style>\n    @import url("stylesheets/scrollbars.css");\n    @import url("stylesheets/bx-panel.css");\n  </style>\n\n  <div id="container">\n    <header>\n      <h1 id="heading">Panel</h1>\n\n      <svg id="help-icon" viewBox="0 0 100 100" preserveAspectRatio="none" hidden>\n        <use href="images/icons.svg#help" width="100" height="100"></use>\n      </svg>\n    </header>\n\n    <main>\n      <content></content>\n    </main>\n\n    <div id="resize-grippies">\n      <div class="grippie edge" data-position="top"></div>\n      <div class="grippie edge" data-position="bottom"></div>\n      <div class="grippie edge" data-position="left"></div>\n      <div class="grippie edge" data-position="right"></div>\n      <div class="grippie corner" data-position="top-left"></div>\n      <div class="grippie corner" data-position="top-right"></div>\n      <div class="grippie corner" data-position="bottom-left"></div>\n      <div class="grippie corner" data-position="bottom-right"></div>\n    </div>\n  </div>\n',h=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e,t,i,r,a,s,o,l,u,h,v,f,m;return $traceurRuntime.asyncWrap(function(b){
for(;;)switch(b.state){case 0:e=this,this._createdTimeStamp=n(),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=d,t=!0,i=!1,r=void 0;try{for(a=void 0,
s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0)o=a.value,
this["#"+o.id]=o}catch(g){i=!0,r=g}finally{try{t||null==s["return"]||s["return"]();
}finally{if(i)throw r}}l=!0,u=!1,h=void 0;try{for(v=void 0,f=this.attributes[Symbol.iterator]();!(l=(v=f.next()).done);l=!0)m=v.value,
this.attributeChangedCallback(m.name)}catch(p){u=!0,h=p}finally{try{l||null==f["return"]||f["return"]();
}finally{if(u)throw h}}c&&this.setAttribute("debug",""),this.addEventListener("mouseenter",function(){
return e._defaultCursor=body.registerCursor("default",-100)}),this.addEventListener("mouseleave",function(){
return body.unregisterCursor(e._defaultCursor)}),this["#help-icon"].addEventListener("mousedown",function(t){
return e._onHelpIconMouseDown(t)}),this["#resize-grippies"].addEventListener("mousedown",function(t){
return e._onResizeGrippieMouseDown(t)}),b.state=8;break;case 8:return void Promise.resolve(body.getConfig("bx-panel#"+this.id+":customWidth")).then(b.createCallback(3),b.errback);
case 3:this._customWidth=b.value,b.state=2;break;case 2:return void Promise.resolve(body.getConfig("bx-panel#"+this.id+":customHeight")).then(b.createCallback(6),b.errback);
case 6:this._customHeight=b.value,b.state=5;break;case 5:this._updateGeometry(),b.state=-2;
break;default:return b.end()}},this)},attributeChangedCallback:function(e){"label"===e?this._onLabelAttributeChange():"help"===e?this._onHelpAttributeChange():"enabled"===e&&this._onEnabledAttributeChange();
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},get label(){return this.getAttribute("label")},set label(e){e?this.setAttribute("label",e):this.removeAttribute("label");
},get help(){return this.getAttribute("help")},set help(e){e?this.setAttribute("help",e):this.removeAttribute("help");
},get button(){for(var e=this.parentNode;e.parentNode;)e=e.parentNode;return e?e.querySelector('bx-button[href="#'+this.id+'"]'):null;
},_onEnabledAttributeChange:function(){this.enabled?this._onEnabled():this._onDisabled();
},_onLabelAttributeChange:function(){this["#heading"].textContent=this.label},_onHelpAttributeChange:function(){
this.help?this["#help-icon"].removeAttribute("hidden"):this["#help-icon"].setAttribute("hidden","");
},_onEnabled:function(){var e,t,n,i,r,a,s;return $traceurRuntime.asyncWrap(function(o){
for(;;)switch(o.state){case 0:e=this,t=!0,n=!1,i=void 0;try{for(r=void 0,a=this.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)s=r.value,
s.enabled===!1&&(s.enabled=!0)}catch(l){n=!0,i=l}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}o.state=8;break;case 8:return void Promise.resolve(body.getConfig("bx-panel#"+this.id+":customWidth")).then(o.createCallback(3),o.errback);
case 3:this._customWidth=o.value,o.state=2;break;case 2:return void Promise.resolve(body.getConfig("bx-panel#"+this.id+":customHeight")).then(o.createCallback(6),o.errback);
case 6:this._customHeight=o.value,o.state=5;break;case 5:this._updateGeometry(),window.addEventListener("resize",this._windowResizeListener=function(){
return e._onWindowResize()}),o.state=-2;break;default:return o.end()}},this)},_onDisabled:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.enabled===!0&&(a.enabled=!1)}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}window.removeEventListener("resize",this._windowResizeListener);
},_onHelpIconMouseDown:function(){this.help&&body.bridge.postMessage("openExternalURL",this.help);
},_onWindowResize:function(){this._updateGeometry()},_onResizeGrippieMouseDown:function(e){
var t,n,c=this,d=e.target.dataset.position,h=this.button.getBoundingClientRect(),v=this.getBoundingClientRect(),f=a(this),m=v.left,b=v.top,g=v.width,p=v.height,y=m,_=b,x=g,w=p,S="none"===f.minWidth?0:r(f.minWidth),C="none"===f.minHeight?0:r(f.minHeight),E="none"===f.maxWidth?1/0:r(f.maxWidth),k="none"===f.maxHeight?1/0:r(f.maxHeight),A=null;
"top"===d||"bottom"===d?A="ns-resize":"left"===d||"right"===d?A="ew-resize":"top-left"===d?A="nwse-resize":"top-right"===d?A="nesw-resize":"bottom-left"===d?A="nesw-resize":"bottom-right"===d&&(A="nwse-resize");
var T=body.registerCursor(A,900);window.addEventListener("mousemove",t=function(t){
var n=t.clientX-e.clientX,i=t.clientY-e.clientY,r=function(){g=S>x+n?S:x+n>E?E:x+n,
y+g+u>window.innerWidth&&(g=window.innerWidth-y-u),c.style.width=g+"px"},a=function(){
S>x-n?(m=y+(x-S),g=S):x-n>E?(m=y+(x-E),g=E):(m=y+n,g=x-n),l>m&&(m=l,g=y+x-l),c.style.left=m+"px",
c.style.width=g+"px"},h=function(){C>w-i?(b=_+(w-C),p=C):w-i>k?(b=_+(w-k),p=k):(b=_+i,
p=w-i),s>b&&(b=s,p=_+w-s),c.style.top=b+"px",c.style.height=p+"px"},v=function(){
p=C>w+i?C:w+i>k?k:w+i,_+p+o>window.innerHeight&&(p=window.innerHeight-_-o),c.style.height=p+"px";
};"right"===d?r():"left"===d?a():"top"===d?h():"bottom"===d?v():"bottom-right"===d?(v(),
r()):"bottom-left"===d?(v(),a()):"top-left"===d?(h(),a()):"top-right"===d&&(h(),r());
}),window.addEventListener("mouseup",n=function(){window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),body.unregisterCursor(T);var e=h.top+p+o-window.innerHeight;
m=h.right+l+g+u<=window.innerWidth?h.right+u:h.left-u-g,0>=e?b=h.top:h.top-e>=s?b=h.top-e:(b=s,
p=window.innerHeight-s-o),c.style.transition="ease 0.3s all",c.style.left=m+"px",
c.style.top=b+"px",c.style.width=g+"px",c.style.height=p+"px",i(300).then(function(){
return c.style.transition=null}),c.id&&(g!==x&&body.setConfig("bx-panel#"+c.id+":customWidth",g),
p!==w&&body.setConfig("bx-panel#"+c.id+":customHeight",p))})},_updateGeometry:function(){
var e,t,r,c,d,h,v;return $traceurRuntime.asyncWrap(function(f){for(;;)switch(f.state){
case 0:f.state=void 0===this._defaultWidth&&void 0===this._defaultHeight?3:5;break;
case 3:f.state=n()-this._createdTimeStamp<100?1:2;break;case 1:return void Promise.resolve(i(100)).then(f.createCallback(2),f.errback);
case 2:e=a(this),this._defaultWidth="auto"===e.width?null:parseInt(e.width),this._defaultHeight="auto"===e.height?null:parseInt(e.height),
f.state=5;break;case 5:t=this.button.getBoundingClientRect(),r=this._customWidth||this._defaultWidth||235,
c=this._customHeight||this._defaultHeight||450,d=null,h=null,d=t.right+l+r+u<=window.innerWidth?t.right+l:t.left-u-r,
t.top+c+o>window.innerHeight?(v=t.top+c+o-window.innerHeight,t.top-v<s?(h=s,c=window.innerHeight-s-o):h=t.top-v):h=t.top,
this.style.width=r+"px",this.style.height=c+"px",null!==d&&(this.style.left=d+"px"),
null!==h&&(this.style.top=h+"px"),f.state=-2;break;default:return f.end()}},this);
}},{},e)}(HTMLElement),v=e("bx-panel",h);return{get default(){return v}}}),System.registerModule("elements/bx-pathcontrols",[],function(){
"use strict";System.get("elements/bx-button");var e=System.get("utils/element"),t=(e.createElement,
e.registerElement),n=System.get("utils/time").throttle,i='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-pathcontrols.css");\n  </style>\n\n  <section>\n    <bx-button\n      id="convert-to-path-button"\n      label="Convert to Path">\n    </bx-button>\n\n    <bx-button\n      id="reverse-path-button"\n      label="Reverse">\n    </bx-button>\n  </section>\n\n  <section id="boolean-operations-section">\n    <h2 id="boolean-operations-heading">Boolean Operations</h2>\n\n    <div class="hbox">\n      <bx-button\n        id="union-button"\n        icon="union"\n        iconsize="25"\n        label="Unite">\n      </bx-button>\n\n      <bx-button\n        id="difference-button"\n        icon="difference"\n        iconsize="25"\n        label="Subtract">\n      </bx-button>\n    </div>\n\n    <div class="hbox">\n      <bx-button\n        id="intersection-button"\n        icon="intersection"\n        iconsize="25"\n        label="Intersect">\n      </bx-button>\n\n      <bx-button\n        id="exclusion-button"\n        icon="exclusion"\n        iconsize="25"\n        label="Exclude">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="outline-section">\n    <h2 id="compound-path-heading">Compound Path</h2>\n\n    <div class="hbox">\n      <bx-button\n        id="combine-button"\n        iconsize="25"\n        label="Combine">\n      </bx-button>\n\n      <bx-button\n        id="break-apart-button"\n        iconsize="25"\n        label="Break Apart">\n      </bx-button>\n    </div>\n  </section>\n',r=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;this._update200Th=n(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=i;
var t=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{t||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#convert-to-path-button"].addEventListener("click",function(t){
return e._onConvertToPathButtonClick(t)}),this["#reverse-path-button"].addEventListener("click",function(t){
return e._onReversePathButtonClick(t)}),this["#union-button"].addEventListener("click",function(t){
return e._onUnionButtonClick(t)}),this["#difference-button"].addEventListener("click",function(t){
return e._onDifferenceButtonClick(t)}),this["#intersection-button"].addEventListener("click",function(t){
return e._onIntersectionButtonClick(t)}),this["#exclusion-button"].addEventListener("click",function(t){
return e._onExclusionButtonClick(t)}),this["#combine-button"].addEventListener("click",function(t){
return e._onCombineButtonClick(t)}),this["#break-apart-button"].addEventListener("click",function(t){
return e._onBreakApartButtonClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update200Th()},_onArtboardMutation:function(e){
this._update200Th()},_onConvertToPathButtonClick:function(e){0===e.button&&body.commands.convertToPath.exec();
},_onReversePathButtonClick:function(e){0===e.button&&body.commands.reversePath.exec();
},_onUnionButtonClick:function(e){0===e.button&&body.commands.unite.exec()},_onDifferenceButtonClick:function(e){
0===e.button&&body.commands.subtract.exec()},_onIntersectionButtonClick:function(e){
0===e.button&&body.commands.intersect.exec()},_onExclusionButtonClick:function(e){
0===e.button&&body.commands.exclude.exec()},_onCombineButtonClick:function(e){0===e.button&&body.commands.combine.exec();
},_onBreakApartButtonClick:function(e){0===e.button&&body.commands.breakApart.exec();
},_update:function(){this._updateBoolOpsSection()},_updateBoolOpsSection:function(){
var e,t,n,i,r,a;return $traceurRuntime.asyncWrap(function(s){for(;;)switch(s.state){
case 0:e=this["#convert-to-path-button"],t=body.commands,n=t.convertToPath,i=n.enabled,
r=i.call(n),s.state=5;break;case 5:return void Promise.resolve(r).then(s.createCallback(3),s.errback);
case 3:a=s.value,s.state=2;break;case 2:e.disabled=!a,s.state=7;break;case 7:this["#reverse-path-button"].disabled=!body.commands.reversePath.enabled(),
this["#union-button"].disabled=!body.commands.unite.enabled(),this["#difference-button"].disabled=!body.commands.subtract.enabled(),
this["#intersection-button"].disabled=!body.commands.intersect.enabled(),this["#exclusion-button"].disabled=!body.commands.exclude.enabled(),
this["#boolean-operations-heading"].disabled=this["#union-button"].disabled&&this["#difference-button"].disabled&&this["#intersection-button"].disabled&&this["#exclusion-button"].disabled,
this["#combine-button"].disabled=!body.commands.combine.enabled(),this["#break-apart-button"].disabled=!body.commands.breakApart.enabled(),
this["#compound-path-heading"].disabled=this["#combine-button"].disabled&&this["#break-apart-button"].disabled,
s.state=-2;break;default:return s.end()}},this)}},{},e)}(HTMLElement),a=t("bx-pathcontrols",r);
return{get default(){return a}}}),System.registerModule("elements/bx-pathsedithud",[],function(){
"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/math").round,a=System.get("utils/path-general"),s=a.getSubpathsData,o=a.getNearestPointOnPath,l=a.harmonizePathData,u=System.get("utils/curves-general"),c=u.getCubicCurveTParam,d=u.splitCurve,h=System.get("utils/geometry"),v=h.checkCollinearity,f=h.comparePoints,m=System.get("utils/rect").rectContainsRect,b=System.get("utils/time").throttle,g=System.get("utils/transform-general").getTransformToElement,p=(System.get("classes/decomposed-transform")["default"],
System.get("classes/enum")["default"]),y=System.get("classes/shortcut")["default"],_=System.get("classes/vector")["default"],x=Math,w=(x.max,
x.pow),S=Number.parseFloat,C=(Object.keys,5),E=4,k='\n  <style>@import url("stylesheets/bx-pathsedithud.css");</style>\n  <g id="outline-grippies"></g>\n  <g id="control-lines"></g>\n  <g id="node-grippies"></g>\n  <g id="control-grippies"></g>\n',A=new p("path","seg","segIndex","selectedSegsIndexes"),T=function(e){
return e.map(function(e){return{type:e.type,values:$traceurRuntime.spread(e.values)
}})},L=function(e,t){var n=[],i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;"C"===u.type||"L"===u.type?i.push(u):"M"===u.type?(i.length>0&&(n.push(i),
i=[]),i.push(u)):"Z"===u.type&&(i.push(u),n.push(i),i=[])}}catch(c){a=!0,s=c}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}return i.length>0&&n.push(i),
n.find(function(t){return t.includes(e)})||null},M=function(e,n){M.cachedPath||(M.cachedPath=t("svg:path"));
for(var i=M.cachedPath,r=[],a=0;a<e.length;a+=1){var s=e[a];r.push(s),i.setPathData(r);
var o=i.getTotalLength();if(o>=n)return a}return e.length-1},P=function(e,t){var n=void 0!==arguments[2]?arguments[2]:2,i="sharp";
if(e&&t&&"C"===e.type&&"C"===t.type){var a=new SVGPoint(e.values[4],e.values[5]),s=new SVGPoint(t.values[0],t.values[1]),o=new SVGPoint(e.values[2],e.values[3]);
if(f(a,s)===!1&&f(a,o)===!1&&v(s,a,o,n)===!0){var l=new _(a,s),u=new _(a,o),c=r(l.length,2),d=r(u.length,2);
i=c===d?"symmetric-smooth":"smooth"}}return i},R=function(e,t){var n=void 0!==arguments[2]?arguments[2]:!1,i=new SVGPoint(t.values[4],t.values[5]),r=new SVGPoint(e.values[0],e.values[1]),a=new SVGPoint(t.values[2],t.values[3]),s=new _(i,r),o=new _(i,a),l=s.getOppositeVector();
n===!1&&(l.length=o.length),t.values[2]=i.x+l.x,t.values[3]=i.y+l.y},j=function(e,t){
var n=void 0!==arguments[2]?arguments[2]:!1,i=new SVGPoint(e.values[4],e.values[5]),r=new SVGPoint(e.values[2],e.values[3]),a=new SVGPoint(t.values[0],t.values[1]),s=new _(i,r),o=new _(i,a),l=s.getOppositeVector();
n===!1&&(l.length=o.length),t.values[0]=i.x+l.x,t.values[1]=i.y+l.y},O=function(e,t,n){
var i;"M"===e.type||"L"===e.type?i=new SVGPoint(e.values[0],e.values[1]):"C"===e.type&&(i=new SVGPoint(e.values[4],e.values[5]));
var r=new SVGPoint(n.values[4],n.values[5]),a=new SVGPoint(t.values[4],t.values[5]),s=new _(a,i),o=new _(a,r),l=s.length/o.length,u=new _(l*o.x-s.x,l*o.y-s.y).normalize();
t.values[2]=a.x+-u.x*(s.length/3),t.values[3]=a.y+-u.y*(s.length/3),n.values[0]=a.x+u.x*(o.length/3),
n.values[1]=a.y+u.y*(o.length/3)},V=function(e){var t,n,i=null,r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
if("L"===u.type){var c=u.values,d=(t=c[Symbol.iterator](),(n=t.next()).done?void 0:n.value),h=(n=t.next()).done?void 0:n.value,v="C"===i.type?i.values[4]:i.values[0],f="C"===i.type?i.values[5]:i.values[1];
u.type="C",u.values=[v,f,d,h,d,h]}i=u}}catch(m){a=!0,s=m}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}},D=function(e){var t,n,i=null,r=!0,a=!1,s=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if("C"===u.type){var c=u.values,d=(t=c[Symbol.iterator](),(n=t.next()).done?void 0:n.value),h=(n=t.next()).done?void 0:n.value,v=(n=t.next()).done?void 0:n.value,f=(n=t.next()).done?void 0:n.value,m=(n=t.next()).done?void 0:n.value,b=(n=t.next()).done?void 0:n.value,g="C"===i.type?i.values[4]:i.values[0],p="C"===i.type?i.values[5]:i.values[1];
d===g&&h===p&&v===m&&f===b&&(u.type="L",u.values=[m,b])}i=u}}catch(y){a=!0,s=y}finally{
try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}},G=function(e,t){var n=L(e,t);
return"Z"===n[n.length-1].type},I=function(e){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){var e=this;this.commands={
selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllSegs();
}}},this.tabIndex=-1,this._installed=!1,this._selectedPaths=[],this._draggedNodeGrippie=null,
this._draggedControlGrippie=null,this._draggedOutlineGrippie=null,this._updateOutlineGrippies1500Th=b(this._updateOutlineGrippies,1500,this),
this._updateNodeGrippies40Th=b(this._updateNodeGrippies,40,this),this._updateControlGrippies40Th=b(this._updateControlGrippies,40,this),
this._updateNodeGrippiesSize40Th=b(this._updateNodeGrippiesSize,40,this),this._updateControlGrippiesSize40Th=b(this._updateControlGrippiesSize,40,this),
this._updateOutlineGrippiesSize1500Th=b(this._updateOutlineGrippiesSize,1500,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=k;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},rubberBandSelectionCallback:function(e){
var t=body.modKeys.shift,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this["#node-grippies"].children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=l.getBBox();m(e,u)&&n.push(l)}}catch(c){r=!0,a=c}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var d=!0,h=!1,v=void 0;try{for(var f,b,g,p=function(){var e=y.value,i=n.filter(function(t){
return t[A.path]===e}),r=i.map(function(e){return e[A.segIndex]});if(e[A.selectedSegsIndexes]||(e[A.selectedSegsIndexes]=[]),
t===!1)e[A.selectedSegsIndexes]=r;else{f=!0,b=!1,g=void 0;try{for(var a=void 0,s=r[Symbol.iterator]();!(f=(a=s.next()).done);f=!0){
var o=a.value;e[A.selectedSegsIndexes].includes(o)===!1&&e[A.selectedSegsIndexes].push(o);
}}catch(l){b=!0,g=l}finally{try{f||null==s["return"]||s["return"]()}finally{if(b)throw g;
}}}},y=void 0,_=this._selectedPaths[Symbol.iterator]();!(d=(y=_.next()).done);d=!0)p();
}catch(x){h=!0,v=x}finally{try{d||null==_["return"]||_["return"]()}finally{if(h)throw v;
}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th(),
n.length>0&&this.focus()},get enabled(){return this.hasAttribute("enabled")},set enabled(e){
e?this.setAttribute("enabled",""):this.removeAttribute("enabled")},_install:function(){
var e=this;this._installed=!0,body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){
e._onArtboardMutation()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.artboards.addEventListener("mousedown",this._artboardMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
e._deselectAllSegs()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
e._deselectAllSegs()}),this.addEventListener("keydown",this._keyDownListener=function(t){
e._onKeyDown(t)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)}),this._shadowRoot.addEventListener("dblclick",this._shadowRootDblClickListener=function(t){
e._onShadowRootDblClick(t)})},_uninstall:function(){this._selectedPaths=[],this._installed=!1,
this["#outline-grippies"].innerHTML="",this["#node-grippies"].innerHTML="",this["#control-grippies"].innerHTML="",
this["#control-lines"].innerHTML="",body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.artboards.removeEventListener("mousedown",this._artboardMouseDownListener),
body.canvas.undoManager.removeEventListener("undo",this._undoListener),body.canvas.undoManager.removeEventListener("redo",this._redoListener),
this.removeEventListener("keydown",this._keyDownListener),this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener),
this._shadowRoot.removeEventListener("dblclick",this._shadowRootDblClickListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._selectedPaths[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a[A.selectedSegsIndexes]=[]}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._selectedPaths=this._getSelectedPaths(),0===this._selectedPaths.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateOutlineGrippies1500Th(),this._updateNodeGrippies40Th())},_onArtboardMutation:function(){
this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th();
},_onZoomChange:function(){this._updateNodeGrippiesSize40Th(),this._updateControlGrippiesSize40Th(),
this._updateOutlineGrippiesSize1500Th()},_onShadowRootMouseDown:function(e){e.preventDefault(),
this.focus(),e.target.classList.contains("node-grippie")?this._onNodeGrippieMouseDown(e):e.target.classList.contains("control-grippie")?this._onControlGrippieMouseDown(e):e.target.classList.contains("outline-grippie")&&this._onOutlineGrippieMouseDown(e);
},_onShadowRootDblClick:function(e){e.target.classList.contains("node-grippie")?this._onNodeGrippieDblClick(e):e.target.classList.contains("control-grippie")?this._onControlGrippieDblClick(e):e.target.classList.contains("outline-grippie")&&this._onOutlineGrippieDblClick(e);
},_onArtboardMouseDown:function(e){var t,n=this;e.preventDefault(),window.addEventListener("mouseup",t=function(i){
window.removeEventListener("mouseup",t),i.clientX===e.clientX&&i.clientY===e.clientY&&n._deselectAllSegs();
})},_onNodeGrippieMouseDown:function(e){var t=this;if(0===e.button){var n=body.modKeys.shift,r=e.target,a=r[A.path],s=r[A.segIndex];
a[A.selectedSegsIndexes]||(a[A.selectedSegsIndexes]=[]);var o,l,u=a[A.selectedSegsIndexes].includes(s),c=!1;
if(u===!1){if(n===!1){a[A.selectedSegsIndexes]=[s];var d=!0,h=!1,v=void 0;try{for(var f=void 0,m=this._selectedPaths[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var b=f.value;b!==a&&(b[A.selectedSegsIndexes]=[])}}catch(g){h=!0,v=g}finally{try{
d||null==m["return"]||m["return"]()}finally{if(h)throw v}}}else n===!0&&a[A.selectedSegsIndexes].push(s);
this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),c=!0}window.addEventListener("mousemove",o=function(n){
if(i(e,n)){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l);
var a=new SVGPoint(n.clientX,n.clientY);t._onNodeGrippieDragStart(e,r,a)}}),window.addEventListener("mouseup",l=function(e){
window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l),
c===!1&&n===!0&&(a[A.selectedSegsIndexes].remove(s),t._updateNodeGrippies40Th(),t._updateControlGrippies40Th());
})}},_onNodeGrippieDragStart:function(e,t,n){var i=this;body.canvas.undoManager.checkpoint("Edit path");
var r,a,s=new p("initialPathData","pathData","transform");this._draggedNodeGrippie=t;
var o=!0,u=!1,c=void 0;try{for(var d=void 0,h=this._selectedPaths[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){
var v=d.value,f=l(v.getPathData({normalize:!0})),m=T(f);v[s.transform]=v.getScreenCTM().inverse(),
v[s.pathData]=f,v[s.initialPathData]=m}}catch(b){u=!0,c=b}finally{try{o||null==h["return"]||h["return"]();
}finally{if(u)throw c}}window.addEventListener("mousemove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=!0,a=!1,o=void 0;
try{for(var l=void 0,u=i._selectedPaths[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value,d=n.matrixTransform(c[s.transform]),h=t.matrixTransform(c[s.transform]),v=h.x-d.x,f=h.y-d.y,m=c[s.pathData],b=c[s.initialPathData],g=c[A.selectedSegsIndexes]||[],p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=g[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){var S=x.value,C=m[S],E=m[S+1],k=b[S],T=b[S+1];
if("M"===C.type||"L"===C.type){if(C.values[0]=k.values[0]+v,C.values[1]=k.values[1]+f,
E&&"C"===E.type)E.values[0]=T.values[0]+v,E.values[1]=T.values[1]+f;else if(E&&"Z"===E.type){
var M=L(C,m),P=M[0];P.values[0]=C.values[0],P.values[1]=C.values[1]}}else if("C"===C.type)if(C.values[2]=k.values[2]+v,
C.values[3]=k.values[3]+f,C.values[4]=k.values[4]+v,C.values[5]=k.values[5]+f,E&&"C"===E.type)E.values[0]=T.values[0]+v,
E.values[1]=T.values[1]+f;else if(E&&"Z"===E.type){var R=L(C,m),j=R[0],O=R[1],V=L(k,b);
j.values[0]=C.values[4],j.values[1]=C.values[5],"C"===O.type&&(O.values[0]=V[1].values[0]+v,
O.values[1]=V[1].values[1]+f)}}}catch(D){y=!0,_=D}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}c.setPathData(m)}}catch(G){a=!0,o=G}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw o}}}),window.addEventListener("mouseup",a=function(e){window.removeEventListener("mousemove",r),
window.removeEventListener("mouseup",a),i._draggedNodeGrippie=null,i._updateOutlineGrippies();
})},_onControlGrippieMouseDown:function(e){var t=this;if(0===e.button){var n,r,a=e.target;
window.addEventListener("mousemove",n=function(s){if(i(e,s)){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",r);var o=new SVGPoint(s.clientX,s.clientY);t._onControlGrippieDragStart(e,a,o);
}}),window.addEventListener("mouseup",r=function(e){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",r)})}},_onControlGrippieDragStart:function(e,t,n){
var i=this;body.canvas.undoManager.checkpoint("Move control point");var r=t.getAttribute("data-index"),a=t[A.path],s=t[A.segIndex],o=l(a.getPathData({
normalize:!0}));V(o);var u=o[s],c=o[s-1]||null,d=o[s+1]||null,h=L(u,o),v=G(u,o),f=a.getScreenCTM().inverse(),m=n.matrixTransform(f),b={
type:"C",values:$traceurRuntime.spread(u.values)},g=null,p=null,y=null;g="M"===c.type&&v?h[h.length-2]:c,
d&&("Z"===d.type?p=v?h[1]:null:"C"===d.type&&(p=d)),"1"===r?"M"===g.type||"L"===g.type?y=new SVGPoint(g.values[0],g.values[1]):"C"===g.type&&(y=new SVGPoint(g.values[4],g.values[5])):"2"===r&&(y=new SVGPoint(u.values[4],u.values[5]));
var x,w,S,C="sharp",E=new SVGPoint(m.x,m.y);this._draggedControlGrippie=t;var k=function(){
var e=body.modKeys,t=e.ctrl,n=e.shift;t===!0&&n===!1?C="sharp":t===!1&&n===!0?"1"===r?C=g&&"C"===g.type?"smooth":"sharp":"2"===r&&(C=p&&"C"===p.type?"smooth":"sharp"):t===!0&&n===!0?"1"===r?C=g&&"C"===g.type?"symmetric-smooth":"sharp":"2"===r&&(C=p&&"C"===p.type?"symmetric-smooth":"sharp"):t===!1&&n===!1&&("1"===r?C=P(g,u):"2"===r&&(C=P(u,p)));
},T=function(){var e=E.x-m.x,t=E.y-m.y;if("1"===r){var n=new SVGPoint(b.values[0]+e,b.values[1]+t);
if(u.values[0]=n.x,u.values[1]=n.y,"smooth"===C){var i=new SVGPoint(g.values[2],g.values[3]),s=new _(y,n),l=new _(y,i),c=s.getOppositeVector();
c.length=l.length,g.values[2]=y.x+c.x,g.values[3]=y.y+c.y}else if("symmetric-smooth"===C){
var d=new _(y,n);d=d.negate(),g.values[2]=y.x+d.x,g.values[3]=y.y+d.y}}else if("2"===r){
var h=new SVGPoint(b.values[2]+e,b.values[3]+t);if(u.values[2]=h.x,u.values[3]=h.y,
"smooth"===C){var v=new SVGPoint(p.values[0],p.values[1]),f=new _(y,h),x=new _(y,v),w=f.getOppositeVector();
w.length=x.length,p.values[0]=y.x+w.x,p.values[1]=y.y+w.y}else if("symmetric-smooth"===C){
var S=new _(y,h);S=S.negate(),p.values[0]=y.x+S.x,p.values[1]=y.y+S.y}}a.setPathData(o);
};window.addEventListener("mousemove",x=function(e){var t=new SVGPoint(e.clientX,e.clientY);
E=t.matrixTransform(f),T()}),window.addEventListener("mouseup",w=function(e){window.removeEventListener("mousemove",x),
window.removeEventListener("mouseup",w),body.removeEventListener("modkeyschange",S),
D(o),a.setPathData(o),i._draggedControlGrippie=null}),body.addEventListener("modkeyschange",S=function(){
k(),T()}),k()},_onOutlineGrippieMouseDown:function(e){var t=this;if(0===e.button){
var n,r,a=!1,s=e.target;window.addEventListener("mousemove",n=function(o){i(e,o)&&(window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",r),t._onOutlineGrippieDragStart(o,s),a=!0)}),
window.addEventListener("mouseup",r=function(i){var u,c;if(window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",r),a===!1){var d=s[A.path],h=l(d.getPathData({
normalize:!0})),v=d.getScreenCTM().inverse(),f=new SVGPoint(e.clientX,e.clientY),m=f.matrixTransform(v),b=o(d,m),g=(u=b[Symbol.iterator](),
(c=u.next()).done?void 0:c.value,(c=u.next()).done?void 0:c.value),p=M(h,g),y=p-1,_=h[p],x=h[y],w=L(_,h),S=G(_,h);
S&&"M"===x.type?d[A.selectedSegsIndexes]=[p,w.length-2]:d[A.selectedSegsIndexes]=[p,y],
t._updateNodeGrippies40Th(),t._updateControlGrippies40Th()}})}},_onOutlineGrippieDragStart:function(e,t){
var n,i,r=this;body.canvas.undoManager.checkpoint("Edit path"),this._draggedOutlineGrippie=e.target;
var a,s,u,d=t[A.path],h=l(d.getPathData({normalize:!0})),v=d.getScreenCTM().inverse(),f=new SVGPoint(e.clientX,e.clientY).matrixTransform(v),m=o(d,f),b=(n=m[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),g=(i=n.next()).done?void 0:i.value,p=M(h,g),y=h[p],x=h[p-1],S=h[p+1],C=L(y,h),E=G(y,h),k=new _(f,b),T=new SVGPoint(f.x,f.y),O=null,I=null,N=null,B=null,U=!1,z=!1;
V(h),O="M"===x.type&&E?C[C.length-2]:x,S&&("Z"===S.type?I=E?C[1]:null:"C"===S.type&&(I=S)),
"M"===O.type||"L"===O.type?N=new SVGPoint(O.values[0],O.values[1]):"C"===O.type&&(N=new SVGPoint(O.values[4],O.values[5])),
"M"===y.type||"L"===y.type?B=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(B=new SVGPoint(y.values[4],y.values[5]));
var H=function(){var e=body.modKeys,t=e.ctrl,n=e.shift;t===!0&&n===!1?(U=!1,z=!1):t===!1&&n===!0?(U=O&&"C"===O.type?"smooth":!1,
z=I&&"C"===I.type?"smooth":!1):t===!0&&n===!0?(U=O&&"C"===O.type?"symmetric-smooth":!1,
z=I&&"C"===I.type?"symmetric-smooth":!1):t===!1&&n===!1&&(U=P(O,y),z=P(y,I))},F=function(){
var e=new SVGPoint(y.values[0],y.values[1]),t=new SVGPoint(y.values[2],y.values[3]),n=c(b,N,e,t,B),i=1;
if(1/6>=n?i=0:.5>=n?i=w((6*n-1)/2,3)/2:5/6>=n&&(i=(1-w((6*(1-n)-1)/2,3))/2+.5),-1!==n){
var r=(1-i)/(3*n*(1-n)*(1-n)),a=i/(3*n*n*(1-n)),s=T.x-b.x,o=T.y-b.y;y.values[0]=y.values[0]+r*s,
y.values[1]=y.values[1]+r*o,y.values[2]=y.values[2]+a*s,y.values[3]=y.values[3]+a*o,
"smooth"===U?R(y,O,!1):"symmetric-smooth"===U&&R(y,O,!0),"smooth"===z?j(y,I,!1):"symmetric-smooth"===z&&j(y,I,!0),
b=T,d.setPathData(h)}};window.addEventListener("mousemove",a=function(e){T=new SVGPoint(e.clientX,e.clientY).matrixTransform(v),
T.x+=k.x,T.y+=k.y,F()}),window.addEventListener("mouseup",s=function(e){body.removeEventListener("modkeyschange",u),
window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",s),
D(h),d.setPathData(h),r._draggedOutlineGrippie=null,r._updateOutlineGrippies()}),
body.addEventListener("modkeyschange",u=function(){H(),F()}),H()},_onNodeGrippieDblClick:function(e){
var t=e.target,n=t[A.path],i=t[A.segIndex],r=l(n.getPathData({normalize:!0})),a=r[i],s=r[i+1]||null,o=r[i-1]||null,u=L(a,r),c=!1;
if(V(r),"M"===a.type){if("C"===s.type){var d=s.values[0]===a.values[0]&&s.values[1]===a.values[1];
d===!1&&(s.values[0]=a.values[0],s.values[1]=a.values[1],c=!0)}}else if("C"===a.type)if(null===s||"M"===s.type){
var h=a.values[2]===a.values[4]&&a.values[3]===a.values[5];h===!1&&(a.values[2]=a.values[4],
a.values[3]=a.values[5],c=!0)}else if("Z"===s.type){var v=u[1];if("C"===v.type){var f=a.values[4]===v.values[0]&&a.values[5]===v.values[1]&&a.values[4]===a.values[2]&&a.values[5]===a.values[3];
f===!1?(v.values[0]=a.values[4],v.values[1]=a.values[5],a.values[2]=a.values[4],a.values[3]=a.values[5]):O(o,a,v),
c=!0}}else if("C"===s.type){var m=s.values[0]===a.values[4]&&s.values[1]===a.values[5]&&a.values[2]===a.values[4]&&a.values[3]===a.values[5];
m===!1?(a.values[2]=a.values[4],a.values[3]=a.values[5],s.values[0]=a.values[4],s.values[1]=a.values[5]):O(o,a,s),
c=!0}c&&(body.canvas.undoManager.checkpoint("Edit path"),D(r),n.setPathData(r))},
_onControlGrippieDblClick:function(e){var t=e.target,n=t.getAttribute("data-index"),i=t[A.path],r=t[A.segIndex],a=l(i.getPathData({
normalize:!0})),s=a[r],o=a[r-1]||null;"1"===n?"C"===o.type?(s.values[0]=o.values[4],
s.values[1]=o.values[5]):"M"!==o.type&&"L"!==o.type||(s.values[0]=o.values[0],s.values[1]=o.values[1]):"2"===n&&(s.values[2]=s.values[4],
s.values[3]=s.values[5]),body.canvas.undoManager.checkpoint("Edit path"),D(a),i.setPathData(a);
},_onOutlineGrippieDblClick:function(e){var t,n,i,r,a=e.target[A.path],s=l(a.getPathData({
normalize:!0})),u=a.getScreenCTM().inverse(),h=new SVGPoint(e.clientX,e.clientY).matrixTransform(u),v=o(a,h),f=(t=v[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),m=(n=t.next()).done?void 0:n.value,b=M(s,m),g=s[b];
if("L"===g.type){var p=new SVGPoint(g.values[0],g.values[1]);i={type:"L",values:[f.x,f.y]
},r={type:"L",values:[p.x,p.y]}}else if("C"===g.type){var y,_=s[b-1]||null;"M"===_.type||"L"===_.type?y=new SVGPoint(_.values[0],_.values[1]):"C"===_.type&&(y=new SVGPoint(_.values[4],_.values[5]));
var x=new SVGPoint(g.values[4],g.values[5]),w=new SVGPoint(g.values[0],g.values[1]),S=new SVGPoint(g.values[2],g.values[3]),C=c(f,y,w,S,x),E=d(y,w,S,x,C);
i={type:"C",values:[E[0][1].x,E[0][1].y,E[0][2].x,E[0][2].y,E[0][3].x,E[0][3].y]},
r={type:"C",values:[E[1][1].x,E[1][1].y,E[1][2].x,E[1][2].y,E[1][3].x,E[1][3].y]};
}body.canvas.undoManager.checkpoint("Add path node"),s=$traceurRuntime.spread(s.slice(0,b),[i,r],s.slice(b+1)),
a.setPathData(s),a[A.selectedSegsIndexes]=[b];var k=!0,T=!1,L=void 0;try{for(var P=void 0,R=this._selectedPaths[Symbol.iterator]();!(k=(P=R.next()).done);k=!0){
var j=P.value;j!==a&&(j[A.selectedSegsIndexes]=[])}}catch(O){T=!0,L=O}finally{try{
k||null==R["return"]||R["return"]()}finally{if(T)throw L}}this._updateNodeGrippies(),
this._updateControlGrippies()},_onKeyDown:function(e){if(this["#node-grippies"].querySelector("[data-selected]")){
var t=y.fromEvent(e);t.matches("Backspace")?(e.preventDefault(),e.stopPropagation(),
this._deleteSelectedSegs("smooth")):t.matches("Shift","Backspace")&&(e.preventDefault(),
e.stopPropagation(),this._deleteSelectedSegs("sharp"))}},_updateOutlineGrippies:function(){
if(!(this._draggedOutlineGrippie||this._draggedNodeGrippie||this._draggedControlGrippie)){
var e=document.createDocumentFragment(),n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._selectedPaths[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=g(o,this),u=t("svg:path");u[A.path]=o,u.setAttribute("class","outline-grippie"),
u.setAttribute("transform",l.toString());var c=o.getPathData();u.setPathData(c),e.append(u);
}}catch(d){i=!0,r=d}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}this["#outline-grippies"].innerHTML="",this["#outline-grippies"].append(e),this._updateOutlineGrippiesSize();
}},_updateNodeGrippies:function(){if(!this._draggedOutlineGrippie&&!this._draggedControlGrippie){
var e=document.createDocumentFragment(),n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._selectedPaths[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)for(var o=a.value,u=l(o.getPathData({
normalize:!0})),c=g(o,this),d=0;d<u.length;d+=1){var h=u[d],v=void 0;if("C"===h.type)v=new SVGPoint(h.values[4],h.values[5]);else if("L"===h.type)v=new SVGPoint(h.values[0],h.values[1]);else{
if("M"!==h.type||G(h,u)!==!1)continue;v=new SVGPoint(h.values[0],h.values[1])}var f=v.matrixTransform(c),m=t("svg:circle");
m.setAttribute("class","node-grippie"),m.setAttribute("cx",f.x),m.setAttribute("cy",f.y),
m.setAttribute("r",C/body.canvas.scale),m[A.path]=o,m[A.segIndex]=d,e.append(m),o[A.selectedSegsIndexes]&&o[A.selectedSegsIndexes].includes(d)&&m.setAttribute("data-selected","");
}}catch(b){i=!0,r=b}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}this["#node-grippies"].innerHTML="",this["#node-grippies"].append(e)}},_updateControlGrippies:function(){
var e=document.createDocumentFragment(),n=document.createDocumentFragment(),i=new p("cachedPathToHudTransform"),r=!0,a=!1,s=void 0;
try{for(var o=void 0,u=this._selectedPaths[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){
var c=o.value,d=l(c.getPathData({normalize:!0})),h=c[A.selectedSegsIndexes]||[],v=!0,m=!1,b=void 0;
try{for(var y=void 0,_=h[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var x=y.value,w=d[x],S=d[x+1]||null,C=L(w,d)[1],k=d.indexOf(C),T=void 0,M=null,P=null,R=null;
if("M"===w.type||"L"===w.type?T=new SVGPoint(w.values[0],w.values[1]):"C"===w.type&&(T=new SVGPoint(w.values[4],w.values[5])),
M=c[i.cachedPathToHudTransform]?c[i.cachedPathToHudTransform]:c[i.cachedPathToHudTransform]=g(c,this),
"C"===w.type&&(P=new SVGPoint(w.values[2],w.values[3])),S&&("C"===S.type?R=new SVGPoint(S.values[0],S.values[1]):"Z"===S.type&&"C"===C.type&&(R=new SVGPoint(C.values[0],C.values[1]))),
P&&f(T,P)===!1){var j=T.matrixTransform(M),O=P.matrixTransform(M),V=t("svg:circle");
V.setAttribute("class","control-grippie"),V.setAttribute("data-index","2"),V.setAttribute("cx",O.x),
V.setAttribute("cy",O.y),V.setAttribute("r",E/body.canvas.scale),V[A.path]=c,V[A.segIndex]=x;
var D=t("svg:line");D.setAttribute("class","control-line"),D.setAttribute("x1",j.x),
D.setAttribute("y1",j.y),D.setAttribute("x2",O.x),D.setAttribute("y2",O.y),e.append(V),
n.append(D)}if(R&&f(T,R)===!1){var G=T.matrixTransform(M),I=R.matrixTransform(M),N=t("svg:circle");
N.setAttribute("class","control-grippie"),N.setAttribute("data-index","1"),N.setAttribute("cx",I.x),
N.setAttribute("cy",I.y),N.setAttribute("r",E/body.canvas.scale),N[A.path]=c,N[A.segIndex]="Z"===S.type?k:x+1;
var B=t("svg:line");B.setAttribute("class","control-line"),B.setAttribute("x1",G.x),
B.setAttribute("y1",G.y),B.setAttribute("x2",I.x),B.setAttribute("y2",I.y),e.append(N),
n.append(B)}}}catch(U){m=!0,b=U}finally{try{v||null==_["return"]||_["return"]()}finally{
if(m)throw b}}}}catch(z){a=!0,s=z}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw s}}this["#control-grippies"].innerHTML="",this["#control-grippies"].append(e),
this["#control-lines"].innerHTML="",this["#control-lines"].append(n)},_updateNodeGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#node-grippies"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.setAttribute("r",C/body.canvas.scale)}}catch(s){t=!0,n=s}finally{
try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_updateControlGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#control-grippies"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.setAttribute("r",E/body.canvas.scale)}}catch(s){t=!0,n=s}finally{
try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_updateOutlineGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#outline-grippies"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=a[A.path],o=getComputedStyle(s),l=S(o.strokeWidth)*body.canvas.scale;
10>l&&(l=10),a.style.strokeWidth=l}}catch(u){t=!0,n=u}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}},_selectAllSegs:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._selectedPaths[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
for(var a=i.value,s=l(a.getPathData({normalize:!0})),o=[],u=0;u<s.length;u+=1){var c=s[u];
"C"===c.type||"L"===c.type?o.push(u):"M"===c.type&&G(c,s)===!1&&o.push(u)}a[A.selectedSegsIndexes]=o;
}}catch(d){t=!0,n=d}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}this._updateNodeGrippies(),this._updateControlGrippies()},_deselectAllSegs:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._selectedPaths[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a[A.selectedSegsIndexes]=[]}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th();
},_deleteSelectedSegs:function(){var e=void 0!==arguments[0]?arguments[0]:"smooth";
body.canvas.undoManager.checkpoint("Delete segments");var t=!0,n=!1,i=void 0;try{
var r,a,o,u,c,d,h,v,f,m,b,g,p,y=function(){var t=_.value,n=l(t.getPathData({normalize:!0
}));V(n);var i=$traceurRuntime.spread(t[A.selectedSegsIndexes]).sort(function(e,t){
return t-e}),p=i.filter(function(e){return"C"===n[e].type}),y=i.filter(function(e){
return"M"===n[e].type});if(0===i.length)return 0;r=!0,a=!1,o=void 0;try{for(var x=void 0,w=p[Symbol.iterator]();!(r=(x=w.next()).done);r=!0){
var S=x.value,C=n[S],E=n[S+1]||null,k=n[S-1]||null;if(null===E)n.remove(C);else if("M"===E.type)n.remove(C);else if("Z"===E.type){
var T=L(C,n),M=T[0],P=T[1];n.remove(C),"L"===k.type||"M"===k.type?(M.values[0]=k.values[0],
M.values[1]=k.values[1]):"C"===k.type&&(M.values[0]=k.values[4],M.values[1]=k.values[5]),
"C"===P.type&&("smooth"===e?(P.values[0]=C.values[0],P.values[1]=C.values[1]):"sharp"===e&&("L"===k.type||"M"===k.type?(P.values[0]=k.values[0],
P.values[1]=k.values[1]):"C"===k.type&&(P.values[0]=k.values[4],P.values[1]=k.values[5]),
P.values[2]=P.values[4],P.values[3]=P.values[5]))}else"C"===E.type?(n.remove(C),"smooth"===e?(E.values[0]=C.values[0],
E.values[1]=C.values[1]):"sharp"===e&&("M"===k.type||"L"===k.type?(E.values[0]=k.values[0],
E.values[1]=k.values[1]):"C"===k.type&&(E.values[0]=k.values[4],E.values[1]=k.values[5]),
E.values[2]=E.values[4],E.values[3]=E.values[5])):"L"===E.type&&n.remove(C)}}catch(R){
a=!0,o=R}finally{try{r||null==w["return"]||w["return"]()}finally{if(a)throw o}}u=!0,
c=!1,d=void 0;try{for(var j=void 0,O=y[Symbol.iterator]();!(u=(j=O.next()).done);u=!0){
var G=j.value,I=n[G],N=L(I,n);if(N.length>1){var B=N[0],U=N[1];n.remove(U),"L"===U.type?(B.values[0]=U.values[0],
B.values[1]=U.values[1]):"C"===U.type&&(B.values[0]=U.values[4],B.values[1]=U.values[5]);
}}}catch(z){c=!0,d=z}finally{try{u||null==O["return"]||O["return"]()}finally{if(c)throw d;
}}h=!0,v=!1,f=void 0;try{for(var H=void 0,F=s(n)[Symbol.iterator]();!(h=(H=F.next()).done);h=!0){
var q=H.value,Y=q.filter(function(e){return"C"===e.type}),$="Z"===q[q.length-1].type,W=$?2:1;
if(Y.length<W){m=!0,b=!1,g=void 0;try{for(var X=void 0,Z=q[Symbol.iterator]();!(m=(X=Z.next()).done);m=!0){
var K=X.value;n.remove(K)}}catch(J){b=!0,g=J}finally{try{m||null==Z["return"]||Z["return"]();
}finally{if(b)throw g}}}}}catch(Q){v=!0,f=Q}finally{try{h||null==F["return"]||F["return"]();
}finally{if(v)throw f}}t[A.selectedSegsIndexes]=[],D(n),t.setPathData(n),t.hasAttribute("d")===!1&&t.remove();
};e:for(var _=void 0,x=this._selectedPaths[Symbol.iterator]();!(t=(_=x.next()).done);t=!0)switch(p=y()){
case 0:continue e}}catch(w){n=!0,i=w}finally{try{t||null==x["return"]||x["return"]();
}finally{if(n)throw i}}},_getSelectedPaths:function(){var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("d")&&!o.hasAttribute("data-bx-shape")?t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),N=n("g","bx-pathsedithud",I);return{get default(){
return N}}}),System.registerModule("elements/bx-patternartboard",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("utils/reflect"),n=t.createReflectedSVGLength,i=t.createReflectedSVGRect,r=t.createReflectedSVGPreserveAspectRatio,a=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._x=n(this,"x"),this._y=n(this,"y"),this._width=n(this,"width"),
this._height=n(this,"height"),this._viewBox=i(this,"viewBox"),this._preserveAspectRatio=r(this,"preserveAspectRatio");
},get contentType(){return"pattern"},get x(){return this._x},get y(){return this._y;
},get width(){return this._width},get height(){return this._height},get viewBox(){
return this._viewBox},get preserveAspectRatio(){return this._preserveAspectRatio},
get patternUnits(){return"userSpaceOnUse"===this.getAttribute("patternUnits")?1:2;
},set patternUnits(e){this.setAttribute("patternUnits",1===e?"userSpaceOnUse":"objectBoundingBox");
},get patternContentUnits(){return"objectBoundingBox"===this.getAttribute("patternContentUnits")?2:1;
},set patternContentUnits(e){this.setAttribute("patternContentUnits",1===e?"userSpaceOnUse":"objectBoundingBox");
},get href(){return this.hasAttribute("href")?this.getAttribute("href"):""},set href(e){
this.setAttribute("href",e)}},{},e)}(SVGGElement),s=e("g","bx-patternartboard",a);
return{get default(){return s}}}),System.registerModule("elements/bx-patternhud",[],function(){
"use strict";var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/element"),n=(t.createElement,
t.registerElement),i=System.get("utils/geometry"),r=i.getRotationAngleFromPoints,a=i.snapRotationAngle,s=System.get("utils/paint"),o=s.getPaintType,l=s.getPaintServer,u=System.get("utils/pattern").getParentPattern,c=System.get("utils/style").queryStylableElements,d=System.get("utils/time").throttle,h=System.get("utils/transform-general"),v=h.getTransformFromPoints,f=h.getTransformToElement,m=System.get("classes/enum")["default"],b=System.get("classes/vector")["default"],g=SVGUnitTypes,p=g.SVG_UNIT_TYPE_USERSPACEONUSE,y=g.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_=6,x=new m("pattern","patternUser"),w='\n  <style>@import url("stylesheets/bx-patternhud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <path class="outline"></path>\n      <circle class="grippie rotate-grippie"></circle>\n      <rect class="grippie scale-grippie"></rect>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',S=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this._draggedGrippie=null,this._draggedOutline=null,
this._update50Th=d(this._update,50,this),this._update200Th=d(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=w;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){u=!0,c=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(u)throw c}}this._shadowRoot.addEventListener("mousedown",function(t){
return e._onShadowRootMouseDown(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener)},_onSelectedElementsChange:function(){
this._update200Th()},_onSelectedTextRangeChange:function(){this._update200Th()},_onZoomChange:function(){
this._update50Th()},_onArtboardMutation:function(e){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement):this._draggedOutline?this._updatePositions(this._draggedOutline.parentElement):this._update200Th();
},_onShadowRootMouseDown:function(e){0===e.button&&(e.target.classList.contains("outline")?this._onTileOutlineMouseDown(e):e.target.classList.contains("scale-grippie")?this._onScaleGrippieMouseDown(e):e.target.classList.contains("rotate-grippie")&&this._onRotateGrippieMouseDown(e));
},_onTileOutlineMouseDown:function(t){var n=this,i=t.target,r=i.parentElement,a=r[x.pattern],s=r[x.patternUser],o=s.getScreenCTM(),l=o.inverse(),c=e(s),d=a.hasAttribute("href")?u(a):a,h=SVGMatrix.fromMatrix(a.patternTransform.baseVal.consolidate().matrix);
this._draggedOutline=i;var f,m,g,_,w;if(d.patternUnits.baseVal===p)g=new SVGPoint(d.x.baseVal.value,d.y.baseVal.value),
_=new SVGPoint(d.x.baseVal.value+d.width.baseVal.value,d.y.baseVal.value),w=new SVGPoint(d.x.baseVal.value+d.width.baseVal.value,d.y.baseVal.value+d.height.baseVal.value);else if(d.patternUnits.baseVal===y){
var S=new SVGPoint(d.x.baseVal.valueInSpecifiedUnits,d.y.baseVal.valueInSpecifiedUnits),C=new SVGPoint(d.x.baseVal.valueInSpecifiedUnits+d.width.baseVal.valueInSpecifiedUnits,d.y.baseVal.valueInSpecifiedUnits),E=new SVGPoint(d.x.baseVal.valueInSpecifiedUnits+d.width.baseVal.valueInSpecifiedUnits,d.y.baseVal.valueInSpecifiedUnits+d.height.baseVal.valueInSpecifiedUnits);
g=new SVGPoint(c.x+S.x*c.width,c.y+S.y*c.height),_=new SVGPoint(c.x+C.x*c.width,c.y+C.y*c.height),
w=new SVGPoint(c.x+E.x*c.width,c.y+E.y*c.height)}var k=g.matrixTransform(h),A=_.matrixTransform(h),T=w.matrixTransform(h),L=k.matrixTransform(o),M=A.matrixTransform(o),P=T.matrixTransform(o);
body.canvas.undoManager.checkpoint("Transform pattern"),window.addEventListener("mousemove",f=function(e){
var n=new b(e.clientX-t.clientX,e.clientY-t.clientY),i=new SVGPoint(L.x+n.x,L.y+n.y),r=new SVGPoint(M.x+n.x,M.y+n.y),s=new SVGPoint(P.x+n.x,P.y+n.y),o=i.matrixTransform(l),u=r.matrixTransform(l),c=s.matrixTransform(l),d=o.matrixTransform(h.inverse()),f=u.matrixTransform(h.inverse()),m=c.matrixTransform(h.inverse()),p=v(g,_,w,d,f,m);
a.setAttribute("patternTransform",h.multiply(p).toString())}),window.addEventListener("mouseup",m=function(e){
window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",m),
n._draggedOutline=null})},_onRotateGrippieMouseDown:function(t){var n=this,i=t.target,s=i.parentElement,o=s[x.pattern],l=s[x.patternUser],c=l.getScreenCTM(),d=c.inverse(),h=e(l),f=o.hasAttribute("href")?u(o):o,m=SVGMatrix.fromMatrix(o.patternTransform.baseVal.consolidate().matrix);
this._draggedGrippie=i;var b,g,_,w,S;if(f.patternUnits.baseVal===p)_=new SVGPoint(f.x.baseVal.value+f.width.baseVal.value/2,f.y.baseVal.value+f.height.baseVal.value/2),
w=new SVGPoint(f.x.baseVal.value+f.width.baseVal.value,f.y.baseVal.value),S=new SVGPoint(f.x.baseVal.value+f.width.baseVal.value,f.y.baseVal.value+f.height.baseVal.value);else if(f.patternUnits.baseVal===y){
var C=new SVGPoint(f.x.baseVal.valueInSpecifiedUnits+f.width.baseVal.valueInSpecifiedUnits/2,f.y.baseVal.valueInSpecifiedUnits+f.height.baseVal.valueInSpecifiedUnits/2),E=new SVGPoint(f.x.baseVal.valueInSpecifiedUnits+f.width.baseVal.valueInSpecifiedUnits,f.y.baseVal.valueInSpecifiedUnits),k=new SVGPoint(f.x.baseVal.valueInSpecifiedUnits+f.width.baseVal.valueInSpecifiedUnits,f.y.baseVal.valueInSpecifiedUnits+f.height.baseVal.valueInSpecifiedUnits);
_=new SVGPoint(h.x+C.x*h.width,h.y+C.y*h.height),w=new SVGPoint(h.x+E.x*h.width,h.y+E.y*h.height),
S=new SVGPoint(h.x+k.x*h.width,h.y+k.y*h.height)}var A=_.matrixTransform(m),T=w.matrixTransform(m),L=S.matrixTransform(m),M=A.matrixTransform(c),P=T.matrixTransform(c),R=L.matrixTransform(c);
body.canvas.undoManager.checkpoint("Transform pattern"),window.addEventListener("mousemove",b=function(e){
var n=new SVGPoint(e.clientX+(P.x-t.clientX),e.clientY+(P.y-t.clientY)),i=r(M,P,n);
body.modKeys.shift&&(i=a(i,45));var s=(new SVGMatrix).rotate(i,M.x,M.y),l=P.matrixTransform(s),u=R.matrixTransform(s),c=l.matrixTransform(d),h=u.matrixTransform(d),f=c.matrixTransform(m.inverse()),b=h.matrixTransform(m.inverse()),g=v(_,w,S,_,f,b);
o.setAttribute("patternTransform",m.multiply(g).toString())}),window.addEventListener("mouseup",g=function(e){
window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",g),
n._draggedGrippie=null})},_onScaleGrippieMouseDown:function(t){var n=this,i=t.target,r=i.parentElement,a=r[x.pattern],s=r[x.patternUser],o=s.getScreenCTM(),l=o.inverse(),c=e(s),d=a.hasAttribute("href")?u(a):a,h=SVGMatrix.fromMatrix(a.patternTransform.baseVal.consolidate().matrix);
this._draggedGrippie=i;var f,m,b,g,_;if(d.patternUnits.baseVal===p)b=new SVGPoint(d.x.baseVal.value,d.y.baseVal.value),
g=new SVGPoint(d.x.baseVal.value+d.width.baseVal.value,d.y.baseVal.value),_=new SVGPoint(d.x.baseVal.value+d.width.baseVal.value,d.y.baseVal.value+d.height.baseVal.value);else if(d.patternUnits.baseVal===y){
var w=new SVGPoint(d.x.baseVal.valueInSpecifiedUnits,d.y.baseVal.valueInSpecifiedUnits),S=new SVGPoint(d.x.baseVal.valueInSpecifiedUnits+d.width.baseVal.valueInSpecifiedUnits,d.y.baseVal.valueInSpecifiedUnits),C=new SVGPoint(d.x.baseVal.valueInSpecifiedUnits+d.width.baseVal.valueInSpecifiedUnits,d.y.baseVal.valueInSpecifiedUnits+d.height.baseVal.valueInSpecifiedUnits);
b=new SVGPoint(c.x+w.x*c.width,c.y+w.y*c.height),g=new SVGPoint(c.x+S.x*c.width,c.y+S.y*c.height),
_=new SVGPoint(c.x+C.x*c.width,c.y+C.y*c.height)}var E=_.matrixTransform(h),k=E.matrixTransform(o);
body.canvas.undoManager.checkpoint("Transform pattern"),window.addEventListener("mousemove",f=function(e){
var n=new SVGPoint(k.x+e.clientX-t.clientX,k.y+e.clientY-t.clientY),i=n.matrixTransform(l),r=i.matrixTransform(h.inverse()),s=new SVGPoint(r.x,g.y),o=v(b,g,_,b,s,r);
a.setAttribute("patternTransform",h.multiply(o).toString())}),window.addEventListener("mouseup",m=function(e){
window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",m),
n._draggedGrippie=null})},_update:function(){var e=this,t=c(this.context,body.canvas.selectedElements,body.canvas.selectedTextRange),n=t.filter(function(t){
return"pattern"===o(t,e.context)});if(this["#subhuds"].innerHTML="",n.length>0){var i=Symbol(),r=!0,a=!1,s=void 0;
try{for(var d=void 0,h=n[Symbol.iterator]();!(r=(d=h.next()).done);r=!0){var v=d.value,f=l(v,this.context),m=f.hasAttribute("href")?u(f):f;
if(!f[i]&&(f[i]=!0,0!==m.width.baseVal.valueInSpecifiedUnits&&0!==m.height.baseVal.valueInSpecifiedUnits)){
var b=this["#subhud-template"].cloneNode(!0);b.removeAttribute("id"),b[x.pattern]=f,
b[x.patternUser]=v,this["#subhuds"].append(b)}}}catch(g){a=!0,s=g}finally{try{r||null==h["return"]||h["return"]();
}finally{if(a)throw s}}this._updatePositions()}},_updatePositions:function(){var t=void 0!==arguments[0]?arguments[0]:null,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this["#subhuds"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(!t||o===t){var l=o[x.patternUser],c=o[x.pattern],d=o.querySelector(".rotate-grippie"),h=o.querySelector(".scale-grippie"),v=o.querySelector(".outline"),m=f(l,this),b=e(l),g=c.hasAttribute("href")?u(c):c,w=SVGMatrix.fromMatrix(c.patternTransform.baseVal.consolidate().matrix),S=void 0,C=void 0,E=void 0,k=void 0;
if(g.patternUnits.baseVal===p)S=new SVGPoint(g.x.baseVal.value,g.y.baseVal.value),
C=new SVGPoint(g.x.baseVal.value+g.width.baseVal.value,g.y.baseVal.value),E=new SVGPoint(g.x.baseVal.value+g.width.baseVal.value,g.y.baseVal.value+g.height.baseVal.value),
k=new SVGPoint(g.x.baseVal.value,g.y.baseVal.value+g.height.baseVal.value);else if(g.patternUnits.baseVal===y){
var A=new SVGPoint(g.x.baseVal.valueInSpecifiedUnits,g.y.baseVal.valueInSpecifiedUnits),T=new SVGPoint(g.x.baseVal.valueInSpecifiedUnits+g.width.baseVal.valueInSpecifiedUnits,g.y.baseVal.valueInSpecifiedUnits),L=new SVGPoint(g.x.baseVal.valueInSpecifiedUnits+g.width.baseVal.valueInSpecifiedUnits,g.y.baseVal.valueInSpecifiedUnits+g.height.baseVal.valueInSpecifiedUnits),M=new SVGPoint(g.x.baseVal.valueInSpecifiedUnits,g.y.baseVal.valueInSpecifiedUnits+g.height.baseVal.valueInSpecifiedUnits);
S=new SVGPoint(b.x+A.x*b.width,b.y+A.y*b.height),C=new SVGPoint(b.x+T.x*b.width,b.y+T.y*b.height),
E=new SVGPoint(b.x+L.x*b.width,b.y+L.y*b.height),k=new SVGPoint(b.x+M.x*b.width,b.y+M.y*b.height);
}var P=S.matrixTransform(w),R=C.matrixTransform(w),j=E.matrixTransform(w),O=k.matrixTransform(w),V=P.matrixTransform(m),D=R.matrixTransform(m),G=j.matrixTransform(m),I=O.matrixTransform(m);
v.setAttribute("d","\n        M "+V.x+" "+V.y+"\n        L "+D.x+" "+D.y+"\n        L "+G.x+" "+G.y+"\n        L "+I.x+" "+I.y+"\n        Z\n      ");
var N=_/body.canvas.scale;d.cx.baseVal.value=D.x,d.cy.baseVal.value=D.y,d.r.baseVal.value=N,
h.width.baseVal.value=2*N,h.height.baseVal.value=2*N,h.x.baseVal.value=G.x-h.width.baseVal.value/2,
h.y.baseVal.value=G.y-h.height.baseVal.value/2,h.hudPoint=G}}}catch(B){i=!0,r=B}finally{
try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}},{},t)}(SVGGElement),C=n("g","bx-patternhud",S);
return{get default(){return C}}}),System.registerModule("elements/bx-patternslist",[],function(){
"use strict";System.get("elements/bx-patternslistitem"),System.get("elements/bx-filterinput");
var e=System.get("utils/artwork-rasterization"),t=e.getPatternThumbnails,n=e.rasterizeArtwork,i=System.get("utils/bbox").getClientBBox,r=System.get("utils/math").round,a=System.get("utils/rect"),s=a.combineRects,o=a.transformRect,l=System.get("utils/time"),u=l.debounce,c=l.sleep,d=System.get("utils/transform-general").getTransformToElement,h=System.get("utils/element"),v=h.createElement,f=h.registerElement,m=h.insertElementAfter,b=h.getElementIndex,g=h.sortByDomPosition,p=System.get("classes/shortcut")["default"],y=Number.parseFloat,_=(Object.keys,
'\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-patternslist.css");</style>\n\n  <main>\n    <header>\n      <h2>Patterns</h2>\n\n      <bx-button\n        id="delete-pattern-button"\n        skin="iconic"\n        icon="minus"\n        title="Delete pattern"\n        iconsize="15">\n      </bx-button>\n\n      <bx-button\n        id="create-pattern-button"\n        title="Create new pattern"\n        skin="iconic"\n        icon="plus"\n        iconsize="15">\n      </bx-button>\n    </header>\n\n    <div id="items"></div>\n    <div id="placeholder">No patterns found.</div>\n    <div id="drag-separator"></div>\n    <bx-filterinput id="filter-input" placeholder="Filter patterns"></bx-filterinput>\n  </main>\n'),x=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this._update2000Db=u(this._update,2e3,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("keydown",function(t){
return e._onKeyDown(t)}),this["#items"].addEventListener("focusin",function(t){return e._onItemsFocusIn(t);
}),this["#items"].addEventListener("rename",function(t){return e._onItemRename(t);
}),this["#items"].addEventListener("dragstart",function(t){return e._onItemDragStart(t);
}),this["#delete-pattern-button"].addEventListener("click",function(t){return e._onDeletePatternButtonClick(t);
}),this["#create-pattern-button"].addEventListener("click",function(t){return e._onCreatePatternButtonClick(t);
}),this["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput();
})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled===!0?this._onEnabled():this._onDisabled());
},get enabled(){return!!this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
"id"===t.detail.attributeName&&"pattern"===t.detail.target.localName?e._update():t.detail.addedNodes[0]&&"pattern"===t.detail.addedNodes[0].localName?e._update():e._update2000Db();
})},_onDisabled:function(){body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onDeletePatternButtonClick:function(e){0===e.button&&this._maybeDeleteHighlightedItem();
},_onCreatePatternButtonClick:function(e){if(0===e.button){body.canvas.undoManager.checkpoint("Create pattern");
var t=body.canvas.generateUniqueID("pattern"),a=v("bx-patternslistitem");a.patternID=t,
this["#items"].append(a);var l=!0,u=!1,h=void 0;try{for(var f=void 0,b=this["#items"].children[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){
var p=f.value;p.highlighted=p===a}}catch(y){u=!0,h=y}finally{try{l||null==b["return"]||b["return"]();
}finally{if(u)throw h}}body.canvas.selectedElements.length>0&&n(body.canvas.extractArtworkWithSelectedElements()).then(function(e){
a.thumbnail=e}),c(100).then(function(){return a.focus()});var _=body.canvas.defs.querySelectorAll("pattern"),x=_[_.length-1],w=v("svg:pattern");
if(x?m(w,x):body.canvas.defs.append(w),0===body.canvas.selectedElements.length)w.setAttribute("id",t),
w.setAttribute("viewBox","0 0 100 100"),w.setAttribute("patternUnits","userSpaceOnUse"),
w.setAttribute("width","100"),w.setAttribute("height","100");else{var S=s(function(){
var e=0,t=[],n=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;t[e++]=i(l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}());S=o(S,body.canvas.currentArtboard.getCTM().inverse());
var C=-S.x,E=-S.y,k=r(S.width,4),A=r(S.height,4),T=!0,L=!1,M=void 0;try{for(var P=void 0,R=g(body.canvas.selectedElements)[Symbol.iterator]();!(T=(P=R.next()).done);T=!0){
var j=P.value,O=new SVGMatrix;O.translateSelf(C,E),O.multiplySelf(d(j,body.canvas.currentArtboard)),
j.setAttribute("transform",O),w.append(j)}}catch(V){L=!0,M=V}finally{try{T||null==R["return"]||R["return"]();
}finally{if(L)throw M}}w.setAttribute("id",t),w.setAttribute("viewBox","0 0 "+k+" "+A),
w.setAttribute("patternUnits","userSpaceOnUse"),w.setAttribute("width","100"),w.setAttribute("height","100"),
body.canvas.selectedElements=[],body.canvas.selectedTextRange=null,body.canvas.currentContainer=null;
}}},_onItemsFocusIn:function(e){var t=e.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===t}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this["#delete-pattern-button"].disabled=!1},_onItemRename:function(e){
body.canvas.undoManager.checkpoint("Rename pattern");var t=e.target,n=e.detail,i=n.oldID,r=n.newID;
t.patternID=r;for(var a=document.createNodeIterator(body.canvas.artboards,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();){
"pattern"===s.localName&&(s.id===i&&s.setAttribute("id",r),s.href.baseVal==="#"+i&&s.setAttribute("href","#"+r));
var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=["fill","stroke"][Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=s.style.getPropertyValue(h);if(v&&v.startsWith("url(")){var f=v.substring(6,v.length-2);
f===i&&s.style.setProperty(h,"url(#"+r+")")}}}catch(m){l=!0,u=m}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}}},_onItemDragStart:function(e){var t,n,i,r=this,a=e.target,s=($traceurRuntime.spread(this["#items"].children),
y(getComputedStyle(this["#drag-separator"]).height)),o=b(a),l=null;window.addEventListener("dragover",t=function(e){
var t=r._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(t&&"bx-patternslistitem"===t.localName){
var n=t,i=n.getBoundingClientRect();r["#drag-separator"].hidden=!1,r["#drag-separator"].style.width=i.width+"px",
r["#drag-separator"].style.left=i.x+"px",e.clientY<i.y+i.height/2?(r["#drag-separator"].style.top=i.y-s/2+"px",
l=b(n)):(r["#drag-separator"].style.top=i.y+i.height-s/2+"px",l=b(n)+1)}else r["#drag-separator"].hidden=!0,
l=null}),this["#items"].addEventListener("dragend",i=function(e){if(r["#items"].removeEventListener("dragover",t),
r["#items"].removeEventListener("dragleave",n),r["#items"].removeEventListener("dragend",i),
r["#drag-separator"].hidden=!0,null!==l&&o!==l&&o!==l-1){a.style.display="none",r["#items"].insertBefore(a,r["#items"].children[l]),
setTimeout(function(){a.style.display=null,a.focus()},50),body.canvas.undoManager.checkpoint("Reorder patterns");
var s=$traceurRuntime.spread(body.canvas.defs.querySelectorAll("pattern")),u=s.find(function(e){
return e.id===a.patternID});s[l]?s[l].parentElement.insertBefore(u,s[l]):body.canvas.defs.append(u);
}})},_onFilterInputInput:function(){var e=this["#filter-input"].value,t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#items"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.hidden=("#"+s.patternID.toLowerCase()).includes(e.toLowerCase())===!1;
}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}this._updatePlaceholderVisibility()},_onKeyDown:function(e){var t=p.fromEvent(e);
t.matches("Backspace")?null!==this["#items"].querySelector(":focus")&&(e.preventDefault(),
e.stopPropagation(),this._maybeDeleteHighlightedItem()):t.matches("ArrowUp")?(e.preventDefault(),
e.stopPropagation(),this._focusPreviousItem()):t.matches("ArrowDown")&&(e.preventDefault(),
e.stopPropagation(),this._focusNextItem())},_update:function(){var e=this;if(this._updating)return void setTimeout(1e3,function(){
return e._update(callback)});this._updating=!0;var n=$traceurRuntime.spread(body.canvas.masterArtboard.querySelectorAll("pattern"));
n=n.filter(function(e){return e.hasAttribute("href")===!1});var i=$traceurRuntime.spread(this["#items"].children),r=0;
if(i.length>n.length)for(var a=n.length;a<i.length;a+=1)i[a].remove();else i.length<n.length&&(this["#create-pattern-button"].disabled=!0,
this["#delete-pattern-button"].disabled=!0);var s=function(t){for(var i=$traceurRuntime.spread(e["#items"].children),a=e["#items"].querySelector("[highlighted]"),l=a?a.patternID:null,u=e["#filter-input"].value;t.timeRemaining()>10&&r<n.length;){
var c=n[r],d=i[r];d||(d=v("bx-patternslistitem"),e["#items"].append(d)),d.patternID=c.id,
d.hidden=("#"+d.patternID.toLowerCase()).includes(u.toLowerCase())===!1,d.highlighted=c.id===l,
r+=1}e._updatePlaceholderVisibility(),r<n.length?requestIdleCallback(s):(e._updateButtons(),
o())},o=function(){var n=body.canvas.extractArtwork(),i={},r=!0,a=!1,s=void 0;try{
for(var o=void 0,l=e["#items"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[u.patternID]=u}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}t(n,function(e,t){i[e]&&(i[e].thumbnail=t)},function(){e._updating=!1;
})};requestIdleCallback(s)},_updateButtons:function(){this["#create-pattern-button"].disabled=!1,
this["#delete-pattern-button"].disabled=null===this["#items"].querySelector("[highlighted]");
},_updatePlaceholderVisibility:function(){this["#placeholder"].hidden=null!==this["#items"].querySelector(":not([hidden])");
},_focusPreviousItem:function(){var e=this._shadowRoot.querySelector(":focus"),t=this._getPreviousVisibleItem(e);
t&&t.focus()},_focusNextItem:function(){var e=this._shadowRoot.querySelector(":focus"),t=this._getNextVisibleItem(e);
t&&t.focus()},_maybeDeleteHighlightedItem:function(){var e=this,t=this["#items"].querySelector("[highlighted]");
if(t){var n=t.patternID,i=function(){body.canvas.undoManager.checkpoint("Delete pattern"),
"pattern"===body.canvas.currentArtboard.contentType&&body.canvas.currentArtboard.id===n&&body.canvas.editPatternEnd(!1);
var i=e._getNextVisibleItem(t),r=e._getPreviousVisibleItem(t);i?i.focus():r?r.focus():e["#delete-pattern-button"].disabled=!0,
t.remove(),e._updatePlaceholderVisibility();var a=body.canvas.artboards.querySelector("#"+n);
a&&a.remove()};i()}},_assertItemsLength:function(e){var t=this["#items"].childElementCount;
if(e>t)for(var n=t;e>n;n+=1){var i=v("bx-patternslistitem");this["#items"].append(i);
}else if(t>e)for(var r=t-1;r>=e;r-=1)this["#items"].children[r].remove()},_getPreviousVisibleItem:function(e){
for(;e.previousElementSibling;){if(e.previousElementSibling.hidden===!1)return e.previousElementSibling;
e=e.previousElementSibling}return null},_getNextVisibleItem:function(e){for(;e.nextElementSibling;){
if(e.nextElementSibling.hidden===!1)return e.nextElementSibling;e=e.nextElementSibling;
}return null}},{},e)}(HTMLElement),w=f("bx-patternslist",x);return{get default(){
return w}}}),System.registerModule("elements/bx-patternslistitem",[],function(){"use strict";
System.get("elements/bx-input");var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("classes/shortcut")["default"],r='\n  <style>@import url("stylesheets/bx-patternslistitem.css");</style>\n\n  <main>\n    <img id="thumbnail"></img>\n    <bx-input id="input" skin="bx-defscontrols"></bx-input>\n  </main>\n',a=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this.tabIndex=0,this.draggable=!0,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("dragstart",function(t){
return e._onHostDragStart(t)}),this.addEventListener("dragend",function(t){return e._onHostDragEnd(t);
}),this.addEventListener("keydown",function(t){return e._onHostKeyDown(t)}),this._shadowRoot.addEventListener("dblclick",function(t){
return e._onShadowRootDblClick(t)}),this["#input"].addEventListener("focusin",function(t){
return e._onInputFocusIn(t)}),this["#input"].addEventListener("focusout",function(t){
return e._onInputFocusOut(t)}),this["#input"].addEventListener("keydown",function(t){
return e._onInputKeyDown(t)}),this["#input"].addEventListener("change",function(t){
return e._onInputChange(t)}),this["#input"].addEventListener("confirm",function(){
return e.focus()}),this["#input"].addEventListener("cancel",function(){return e.focus();
}),this["#input"].validate=function(t){return e._validateInputValue(t)}},attributeChangedCallback:function(e){
"patternid"===e&&this._onPatternIDAttributeChange()},get patternID(){return this.hasAttribute("patternid")?this.getAttribute("patternid"):null;
},set patternID(e){e?this.setAttribute("patternid",e):this.removeAttribute("patternid");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get thumbnail(){return this["#thumbnail"].src},set thumbnail(e){null===e?this["#thumbnail"].src="":this["#thumbnail"].src=e;
},_onPatternIDAttributeChange:function(){null===this.patternID?this["#input"].value="":this["#input"].value="#"+this.patternID;
},_onShadowRootDblClick:function(e){e.target===this["#thumbnail"]?body.canvas.editPattern(this.patternID):this["#input"].matches(":focus")===!1&&this["#input"].focus();
},_onHostDragStart:function(e){this._dragImage=t("img"),this._dragImage.id="drag-image",
this._dragImage.src=this["#thumbnail"].src,this._dragImage.style.position="fixed",
this._dragImage.style.transform="translate(9999px, 9999px)",this._dragImage.width=38,
this._dragImage.height=38,this._shadowRoot.append(this._dragImage),e.dataTransfer.setData("text","#"+this.patternID),
e.dataTransfer.setData("bx-patternslistitem/patternID",this.patternID),e.dataTransfer.setDragImage(this._dragImage,this._dragImage.width/2,this._dragImage.height/2);
},_onHostDragEnd:function(e){this._dragImage.remove()},_onHostKeyDown:function(e){
var t=i.fromEvent(e);t.matches("Enter")&&(this["#input"].focus(),this["#input"].selectAll());
},_onInputFocusIn:function(){this["#input"].style.pointerEvents="auto",this["#input"].selectAll(),
this.draggable=!1,this.setAttribute("inputmode","")},_onInputFocusOut:function(e){
this["#input"].style.pointerEvents="none",this.draggable=!0,this.removeAttribute("inputmode");
},_onInputKeyDown:function(e){var t=i.fromEvent(e);(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),
this.focus())},_onInputChange:function(){var e=this.patternID,t=this["#input"].value.substring(1);
this.dispatchEvent(new CustomEvent("rename",{bubbles:!0,detail:{oldID:e,newID:t}}));
},_validateInputValue:function(e){var t=/^#[a-z]+[a-z0-9\-_]*$/i.test(e);return t?e==="#"+this.patternID?!0:null===body.canvas.artboards.querySelector(e):!1;
}},{},e)}(HTMLElement),s=n("bx-patternslistitem",a);return{get default(){return s;
}}}),System.registerModule("elements/bx-preferencesbody",[],function(){"use strict";
var e=System.get("elements/bx-body")["default"];System.get("elements/bx-button"),
System.get("elements/bx-checkbox"),System.get("elements/bx-shortcutseditor");var t=System.get("utils/element").registerElement,n='\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-preferencesbody.css");</style>\n\n  <main id="main">\n    <div id="buttons">\n      <bx-button\n        id="general-button"\n        data-view="general"\n        icon="prefs-general"\n        iconsize="25"\n        skin="bx-preferences"\n        label="General">\n      </bx-button>\n\n      <bx-button\n        id="shortcuts-button"\n        data-view="shortcuts"\n        icon="prefs-shortcuts"\n        iconsize="25"\n        skin="bx-preferences"\n        label="Shortcuts">\n      </bx-button>\n    </div>\n\n    <div id="views">\n      <div data-view="general" class="view" hidden>\n        <header>\n          <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n            <use href="images/icons.svg#prefs-general" width="100" height="100"></use>\n          </svg>\n          <h1>General</h1>\n        </header>\n\n        <section>\n          <bx-checkbox\n            id="experimental-features-checkbox"\n            label="Enable experimental features">\n          </bx-checkbox>\n        </section>\n      </div>\n\n      <div data-view="shortcuts" class="view" hidden>\n        <header>\n          <svg class="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n            <use href="images/icons.svg#prefs-shortcuts" width="100" height="100"></use>\n          </svg>\n          <h1>Shortcuts</h1>\n        </header>\n\n        <section>\n          <bx-shortcutseditor></bx-shortcutseditor>\n        </section>\n      </div>\n    </div>\n  </main>\n',i=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;$traceurRuntime.superGet(this,t.prototype,"createdCallback").call(this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=n;
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;this["#"+l.id]=l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}this.bridge.postMessage("getBackendName",null,function(t){
"electron"===t&&e["#main"].setAttribute("data-extra-whitespace","")}),this.getConfig("bx-preferences:currentView").then(function(t){
e._toggleView(t||"general")}),this.getConfig("bx-preferences:experimentalFeatures").then(function(t){
t===!0&&e["#experimental-features-checkbox"].setAttribute("checked","")}),this["#buttons"].addEventListener("click",function(t){
e._onButtonsClick(t)}),this["#experimental-features-checkbox"].addEventListener("change",function(){
e._onExperimentalFeaturesCheckboxChange()})},_onButtonsClick:function(e){"bx-button"===e.target.localName&&0===e.button&&this._toggleView(e.target.dataset.view);
},_onExperimentalFeaturesCheckboxChange:function(){this.setConfig("bx-preferences:experimentalFeatures",this["#experimental-features-checkbox"].checked);
},_toggleView:function(e){var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this["#views"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.dataset.view===e?s.hidden=!1:s.hidden=!0}}catch(o){n=!0,i=o}finally{
try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=this["#buttons"].children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;v.dataset.view===e?v.pressed=!0:v.pressed=!1}}catch(f){u=!0,c=f}finally{
try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}this.setConfig("bx-preferences:currentView",e);
}},{},e)}(e),r=t("body","bx-preferencesbody",i);return{get default(){return r}}}),
System.registerModule("elements/bx-quadbeziertool",[],function(){"use strict";var e=System.get("utils/element").registerElement,t=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("draw-quad-segs-hud");
},_onDisabled:function(){body.canvas.disableHud("outlines-hud"),body.canvas.disableHud("draw-quad-segs-hud");
}},{},e)}(HTMLElement),n=e("bx-quadbeziertool",t);return{get default(){return n}};
}),System.registerModule("elements/bx-quadsegsdrawhud",[],function(){"use strict";
var e=System.get("classes/enum")["default"],t=System.get("classes/shortcut")["default"],n=System.get("classes/vector")["default"],i=System.get("utils/element"),r=i.createElement,a=i.registerElement,s=System.get("utils/path-general").reversePath,o=System.get("utils/transform-general").getTransformToElement,l=System.get("utils/transform-reduction").reduceTransform;
System.get("elements/bx-quadsegsketch");var u=10,c=new e("path"),d='\n  <style>@import url("stylesheets/bx-quadsegsdrawhud.css");</style>\n  <g id="node-grippies"></g>\n  <g id="seg-sketch" is="bx-quadsegsketch"></g>\n',h=function(e){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=d;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var o=!0,l=!1,u=void 0;try{for(var c=void 0,h=this.attributes[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){
var v=c.value;this.attributeChangedCallback(v.name,null,v.value)}}catch(f){l=!0,u=f;
}finally{try{o||null==h["return"]||h["return"]()}finally{if(l)throw u}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._mode="select",this._currentPath=null,window.addEventListener("keydown",this._keyDownListener=function(t){
e._onKeyDown(t)}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)}),body.canvas.artboards.addEventListener("mousedown",this._artboardMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),this["#node-grippies"].addEventListener("mousedown",this._nodeGrippiesMouseDownListener=function(t){
e._onNodeGrippieMouseDown(t)}),this._onSelectedElementsChange()},_onDisabled:function(){
window.removeEventListener("keydown",this._keyDownListener),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.artboards.removeEventListener("mousedown",this._artboardMouseDownListener),
this["#node-grippies"].removeEventListener("mousedown",this._nodeGrippiesMouseDownListener),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide()},_onSelectedElementsChange:function(){
this._updateNodeGrippies()},_onZoomChange:function(){this._updateNodeGrippiesSize();
},_onArtboardMutation:function(e){var t=e.detail;if("childList"===t.type){var n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t.removedNodes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;(o===this._currentPath||o.contains(this._currentPath))&&(this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies())}}catch(l){
i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}}else(t.target===this._currentPath||t.target.contains(this._currentPath))&&this._updateNodeGrippies();
},_onArtboardMouseDown:function(e){var t,i,r=this,a=new SVGPoint(e.clientX,e.clientY),s=0;
window.addEventListener("mousemove",t=function(e){var t=new SVGPoint(e.clientX,e.clientY),i=new n(a,t).length;
i>s&&(s=i)}),window.addEventListener("mouseup",i=function(n){window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",i),r._onArtboardClick(e,n),4>s&&r._onArtboardDirectClick(e,n);
})},_onArtboardClick:function(e){var t,n;if("draw-forward"===this._mode){var i=this._currentPath.getPathData({
normalize:!0}),r=[];i.length>1&&body.canvas.undoManager.checkpoint("Draw path segment"),
(t=r).push.apply(t,$traceurRuntime.spread(i)),this["#seg-sketch"].curved?r.push({
type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):r.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),this._currentPath.setPathData(r)}else if("draw-backward"===this._mode){body.canvas.undoManager.checkpoint("Draw path segment");
var a=this._currentPath.getPathData({normalize:!0}),s=[];s.push({type:"M",values:[this["#seg-sketch"].startPoint.x,this["#seg-sketch"].startPoint.y]
}),this["#seg-sketch"].curved?s.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}):s.push({type:"L",values:[this["#seg-sketch"].endPoint.x,this["#seg-sketch"].endPoint.y]
}),(n=s).push.apply(n,$traceurRuntime.spread(a.slice(1))),this._currentPath.setPathData(s);
}},_onArtboardDirectClick:function(e){var t=e,n=t.clientX,i=t.clientY;if("select"===this._mode){
body.canvas.undoManager.checkpoint("Draw path segment");var a=r("svg:path");a.style.stroke="black",
a.style.fill="none";var s=body.canvas.currentContainer||body.canvas.currentArtboard;
s.append(a);var o=a.getScreenCTM().inverse(),l=new SVGPoint(n,i).matrixTransform(o),u=l.x,c=l.y;
a.setAttribute("d","M "+u+" "+c),body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[a]),
this._mode="draw-forward",this._currentPath=a,this["#seg-sketch"].show(a,"end")}},
_onNodeGrippieMouseDown:function(e){var t,n,i=this,r=e.target;this["#node-grippies"].addEventListener("mouseup",t=function(e){
i["#node-grippies"].removeEventListener("mouseup",t),window.removeEventListener("mouseup",n);
var a=e.target,s=i._onNodeGrippieClick(r,e);r!==a||s||i._onNodeGrippieDirectClick(r,e);
}),window.addEventListener("mouseup",n=function(e){i["#node-grippies"].removeEventListener("mouseup",t),
window.removeEventListener("mouseup",n),i._onNodeGrippieClick(r,e)})},_onNodeGrippieClick:function(e,t){
var n,i,r,a,u;if("select"===this._mode)return!1;if(e[c.path]===this._currentPath){
var d=e.getAttribute("data-position"),h=this._currentPath,v=h.getPathData({normalize:!0
}),f=v[0],m=v[v.length-1];if("draw-forward"===this._mode&&"start"===d){body.canvas.undoManager.checkpoint("Draw path segment");
var b=$traceurRuntime.spread(v);this["#seg-sketch"].curved?b.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,f.values[0],f.values[1]]
}):b.push({type:"L",values:[f.values[0],f.values[1]]}),b.push({type:"Z",values:[]
}),h.setPathData(b),this._updateNodeGrippies()}else if("draw-backward"===this._mode&&"end"===d){
body.canvas.undoManager.checkpoint("Draw path segment");var g=[];g.push({type:"M",
values:["C"===m.type?m.values[4]:m.values[0],"C"===m.type?m.values[5]:m.values[1]]
}),this["#seg-sketch"].curved?g.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,f.values[0],f.values[1]]
}):g.push({type:"L",values:[f.values[0],f.values[1]]}),(n=g).push.apply(n,$traceurRuntime.spread(v.slice(1))),
g.push({type:"Z",values:[]}),h.setPathData(g),this._updateNodeGrippies()}return this._mode="select",
this._currentPath=null,this["#seg-sketch"].hide(),!0}var p=e.getAttribute("data-position"),y=this._currentPath,_=e[c.path],x=y.getPathData({
normalize:!0});x.length>1&&body.canvas.undoManager.checkpoint("Draw path segment");
var w=o(_,y);if(_.setAttribute("transform",w.toString()),l(_),"draw-forward"===this._mode){
"end"===p&&s(_);var S=[],C=_.getPathData({normalize:!0});(i=S).push.apply(i,$traceurRuntime.spread(x)),
this["#seg-sketch"].curved?S.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,C[0].values[0],C[0].values[1]]
}):S.push({type:"L",values:[C[0].values[0],C[0].values[1]]}),(r=S).push.apply(r,$traceurRuntime.spread(C.slice(1))),
y.setPathData(S),_.setPathData([]),_.remove()}else if("draw-backward"===this._mode){
"start"===p&&s(_);var E=_.getPathData({normalize:!0}),k=[];(a=k).push.apply(a,$traceurRuntime.spread(E)),
this["#seg-sketch"].curved?k.push({type:"Q",values:[this["#seg-sketch"].controlPoint.x,this["#seg-sketch"].controlPoint.y,x[0].values[0],x[0].values[1]]
}):k.push({type:"L",values:[x[0].values[0],x[0].values[1]]}),(u=k).push.apply(u,$traceurRuntime.spread(x.slice(1))),
y.setPathData(k),_.setPathData([]),_.remove()}return body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return e!==_}),this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),
!0},_onNodeGrippieDirectClick:function(e,t){if("select"===this._mode){this._currentPath=e[c.path];
var n=e.getAttribute("data-position");"start"===n?(this._mode="draw-backward",this["#seg-sketch"].show(e[c.path],"start")):(this._mode="draw-forward",
this["#seg-sketch"].show(e[c.path],"end"))}},_onKeyDown:function(e){if("draw-forward"===this._mode||"draw-backward"===this._mode){
var n=t.fromEvent(e);if(n.matches("Enter")||n.matches("Escape"))e.stopPropagation(),
this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),this._updateNodeGrippies();else if(n.matches("Shift","Enter")){
e.stopPropagation();var i={type:"Z",values:[]},r=this._currentPath.getPathData();r.push(i),
this._currentPath.setPathData(r),this._mode="select",this._currentPath=null,this["#seg-sketch"].hide(),
this._updateNodeGrippies()}}},_updateNodeGrippies:function(){this["#node-grippies"].innerHTML="";
var e=!0,t=!1,n=void 0;try{for(var i=void 0,a=this._getSelectedPaths()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){
var s=i.value,l=s.getPathData({normalize:!0}),u=void 0,d=void 0;0===l.length?(u=null,
d=null):1===l.length?(u=l[0],d=null):l.length>1&&(u=l[0],d=l[l.length-1]);var h=o(s,this),v=d&&"Z"===d.type;
if(u&&!v){var f=new SVGPoint(u.values[0],u.values[1]).matrixTransform(h),m=r("svg:ellipse");
m.setAttribute("class","node-grippie"),m.setAttribute("cx",f.x),m.setAttribute("cy",f.y),
m.setAttribute("data-position","start"),m[c.path]=s,this["#node-grippies"].append(m);
}if(d&&!v){var b=void 0;"M"===d.type||"L"===d.type?b=new SVGPoint(d.values[0],d.values[1]).matrixTransform(h):"C"===d.type&&(b=new SVGPoint(d.values[4],d.values[5]).matrixTransform(h));
var g=r("svg:ellipse");g.setAttribute("class","node-grippie"),g.setAttribute("cx",b.x),
g.setAttribute("cy",b.y),g.setAttribute("data-position","end"),g[c.path]=s,this["#node-grippies"].append(g);
}}}catch(p){t=!0,n=p}finally{try{e||null==a["return"]||a["return"]()}finally{if(t)throw n;
}}this._updateNodeGrippiesSize()},_updateNodeGrippiesSize:function(){var e=u/2/body.canvas.scale,t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#node-grippies"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.setAttribute("rx",e),s.setAttribute("ry",e)}}catch(o){n=!0,i=o}finally{
try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_getSelectedPaths:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName&&o.hasAttribute("data-bx-shape")===!1?t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedPaths(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),v=a("g","bx-quadsegsdrawhud",h);return{get default(){
return v}}}),System.registerModule("elements/bx-quadsegsketch",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("utils/geometry"),n=t.getPointBetweenTwoPoints,i=t.getNearestPointOnLine,r=t.snapPointToAngleMultiple,a=System.get("utils/transform-general").getTransformToElement,s=System.get("classes/vector")["default"],o=(Object.freeze,
'\n  <style>@import url("stylesheets/bx-quadsegsketch.css");</style>\n  <path id="outline" d="M 0 0 Q 0 0 0 0"></path>\n  <line id="control-line-1"></line>\n  <line id="control-line-2"></line>\n  <circle id="control-point-grippie"></circle>\n'),l=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._path=null,this._position="end",this._snap="none",
this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=o;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}},get startPoint(){return this._startPoint},get endPoint(){
return this._endPoint},get controlPoint(){return this._controlPoint},get curved(){
var e=n(this._startPoint,this._endPoint);return this._controlPoint.x!==e.x||this._controlPoint.y!==e.y;
},show:function(e){var t=void 0!==arguments[1]?arguments[1]:"end";this._position=t,
this._path=e,this._snap="none",this.style.visibility="visible",this._hasListeners===!1&&this._addListeners(),
this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),
this._updateOutlines()},hide:function(){this._path=null,this._clientX=null,this._clientY=null,
this.style.visibility="hidden",this._hasListeners===!0&&this._removeListeners()},
_addListeners:function(){var e=this;this._hasListeners=!0,this._mouseDown=!1,body.addEventListener("modkeyschange",this._modKeysChangeListener=function(){
e._mouseDown===!1&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines());
}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)}),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
var n,i,a,s,o=e._path.getScreenCTM().inverse();if(e._mouseDown=!0,e._mouseDownPoint=new SVGPoint(t.clientX,t.clientY),
e._mouseDownPoint=e._mouseDownPoint.matrixTransform(o),e._mouseDownControlPoint=SVGPoint.fromPoint(e._controlPoint),
"end"===e._position)if("paraxialPolygon"===e._snap){var l=(n=r(e._startPoint,e._endPoint,45)[Symbol.iterator](),
(i=n.next()).done?void 0:i.value);e._endPoint=l}else e._endPoint=SVGPoint.fromPoint(e._mouseDownPoint);else if("start"===e._position)if("paraxialPolygon"===e._snap){
var u=(a=r(e._startPoint,e._endPoint,45)[Symbol.iterator](),(s=a.next()).done?void 0:s.value);
e._endPoint=u}else e._endPoint=new SVGPoint(e._firstSeg.values[0],e._firstSeg.values[1]);
}),window.addEventListener("mousemove",this._mouseMoveListener=function(t){e._clientX=t.clientX,
e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("mouseup",this._mouseUpListener=function(t){
e._mouseDown=!1,e._updateSnapProperty()})},_removeListeners:function(){this._hasListeners=!1,
body.removeEventListener("modkeyschange",this._modKeysChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("mousedown",this._mouseDownListener),window.removeEventListener("mousemove",this._mouseMoveListener),
window.removeEventListener("mouseup",this._mouseUpListener)},_onArtboardMutation:function(e){
var t=e.detail;(t.target===this._path||t.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),
this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())},
_updateSegProperties:function(){if("end"===this._position){var e=this._path.getPathData({
normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1;n>=0;n-=1){var i=e[n];
if("Z"!==i.type){this._lastNonZSeg=i;break}}"C"===t.type?this._lastSegControlPoint=new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?this._lastSegControlPoint=new SVGPoint(t.values[0],t.values[1]):this._lastSegControlPoint=null,
"C"===this._lastSeg.type?this._lastSegIsSmooth=t.values[2]!==t.values[4]||t.values[3]!==t.values[5]:this._lastSegIsSmooth=!1;
}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),a=r[0],s=r[1];
this._firstSeg=a,"C"===s.type?this._secondSegControlPoint=new SVGPoint(s.values[0],s.values[1]):"M"===s.type||"L"===s.type?this._secondSegControlPoint=new SVGPoint(a.values[0],a.values[1]):this._secondSegControlPoint=null,
"C"===s.type?this._secondSegIsSmooth=s.values[0]!==this._firstSeg.values[0]&&s.values[1]!==this._firstSeg.values[1]:this._secondSegIsSmooth=!1;
}},_updatePointProperties:function(){var e,t,a,o,l,u,c,d;if(this._mouseDown===!1){
var h=this._path.getScreenCTM().inverse();if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),
null===this._clientX?this._endPoint=SVGPoint.fromPoint(this._startPoint):this._endPoint=new SVGPoint(this._clientX,this._clientY).matrixTransform(h)):"start"===this._position&&(null===this._clientX?this._startPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):this._startPoint=new SVGPoint(this._clientX,this._clientY).matrixTransform(h),
this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){
var v,f=new s(this._startPoint,this._endPoint);"end"===this._position?v=new s(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(v=new s(this._endPoint,this._secondSegControlPoint)),
v=v.negate().scale(f.length/2),"end"===this._position?this._controlPoint=new SVGPoint(this._startPoint.x+v.x,this._startPoint.y+v.y):"start"===this._position&&(this._controlPoint=new SVGPoint(this._endPoint.x+v.x,this._endPoint.y+v.y));
}else if("polygon"===this._snap)this._controlPoint=n(this._startPoint,this._endPoint);else if("paraxialPolygon"===this._snap){
if("end"===this._position){var m=(e=r(this._startPoint,this._endPoint,45)[Symbol.iterator](),
(t=e.next()).done?void 0:t.value);this._endPoint=m}else if("start"===this._position){
var b=(a=r(this._endPoint,this._startPoint,45)[Symbol.iterator](),(o=a.next()).done?void 0:o.value);
this._startPoint=b}this._controlPoint=n(this._startPoint,this._endPoint)}}else if(this._mouseDown===!0){
var g=this._path.getScreenCTM().inverse(),p=new SVGPoint(this._clientX,this._clientY);
p=p.matrixTransform(g);var y=new s(this._mouseDownPoint,p);if(this._controlPoint=new SVGPoint(this._mouseDownControlPoint.x-y.x,this._mouseDownControlPoint.y-y.y),
"none"===this._snap)if("end"===this._position){var _=i(this._lastSegControlPoint,this._startPoint,this._controlPoint,!0),x=(l=_[Symbol.iterator](),
(u=l.next()).done?void 0:u.value),w=(u=l.next()).done?void 0:u.value;1>w?this._controlPoint=SVGPoint.fromPoint(this._startPoint):this._controlPoint=x;
}else if("start"===this._position){var S=i(this._secondSegControlPoint,this._endPoint,this._controlPoint,!0),C=(c=S[Symbol.iterator](),
(d=c.next()).done?void 0:d.value),E=(d=c.next()).done?void 0:d.value;1>E?this._controlPoint=SVGPoint.fromPoint(this._endPoint):this._controlPoint=C;
}}},_updateSnapProperty:function(){var e=body.modKeys,t=e.ctrl,n=(e.alt,e.shift);t&&!n?this._snap="polygon":t&&n?this._snap="paraxialPolygon":this._snap="none",
"end"===this._position?this._lastSegIsSmooth||"none"!==this._snap||(this._snap="polygon"):"start"===this._position&&(this._secondSegIsSmooth||"none"!==this._snap||(this._snap="polygon"));
},_updateOutlines:function(){var e=a(this._path,this),t=this._startPoint.matrixTransform(e),n=this._endPoint.matrixTransform(e),i=this._controlPoint.matrixTransform(e),r=3/body.canvas.scale,s=[{
type:"M",values:[t.x,t.y]},{type:"Q",values:[i.x,i.y,n.x,n.y]}];this["#outline"].setPathData(s),
this["#control-point-grippie"].cx.baseVal.value=i.x,this["#control-point-grippie"].cy.baseVal.value=i.y,
this["#control-point-grippie"].r.baseVal.value=r,this["#control-line-1"].x1.baseVal.value=t.x,
this["#control-line-1"].y1.baseVal.value=t.y,this["#control-line-1"].x2.baseVal.value=i.x,
this["#control-line-1"].y2.baseVal.value=i.y,this["#control-line-2"].x1.baseVal.value=n.x,
this["#control-line-2"].y1.baseVal.value=n.y,this["#control-line-2"].x2.baseVal.value=i.x,
this["#control-line-2"].y2.baseVal.value=i.y}},{},e)}(SVGGElement),u=e("g","bx-quadsegsketch",l);
return{get default(){return u}}}),System.registerModule("elements/bx-radialgradienthud",[],function(){
"use strict";var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/element"),n=t.createElement,i=t.registerElement,r=t.queryGraphicsElements,a=System.get("utils/event").isMouseMoveIntentional,s=System.get("utils/gradient").getGradientColorAtOffset,o=System.get("utils/math").normalize,l=(System.get("utils/matrix").compareMatrixes,
System.get("utils/math")),u=(l.sin,l.cos,l.round,System.get("utils/paint")),c=u.getPaintType,d=u.getPaintServer,h=System.get("utils/style").queryStylableElements,v=System.get("utils/time").throttle,f=System.get("utils/geometry"),m=(f.comparePoints,
f.getPointAtFraction),b=f.getNearestPointOnLine,g=f.getDistanceBetweenPoints,p=f.getRotationAngleFromPoints,y=f.snapPointToAngle,_=f.snapPointToAngleMultiple,x=System.get("utils/transform-general"),w=x.getTransformFromPoints,S=x.getTransformToElement,C=x.bboxPointToUserPoint,E=x.userPointToBBoxPoint,k=System.get("classes/decomposed-transform")["default"],A=System.get("classes/enum")["default"],T=System.get("classes/shortcut")["default"],L=System.get("classes/vector")["default"],M=(Object.keys,
new A("gradient","gradientUser","stop")),P=SVGUnitTypes,R=P.SVG_UNIT_TYPE_USERSPACEONUSE,j=P.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,O=6,V='\n  <style>@import url("stylesheets/bx-radialgradienthud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud" tabindex="0">\n      <line class="r2-outline"></line>\n      <line class="slider-shadow"></line>\n      <line class="slider"></line>\n      <circle class="r2-grippie grippie"></circle>\n      <g class="stop-grippies"></g>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',D=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var e=this;this.commands={selectAll:{enabled:function(){
return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){
return!0},exec:function(){return e._deselectAllStops()}}},this.tabIndex=-1,this._selectedStops=[],
this._draggedGrippie=null,this._draggedSlider=null,this._updateAll200Th=v(this._updateAll,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=V;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var f=d.value;this.attributeChangedCallback(f.name)}}catch(m){u=!0,c=m}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}this._shadowRoot.addEventListener("keydown",function(t){
return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("mousedown",function(t){
return e._onShadowRootMouseDown(t)}),this._shadowRoot.addEventListener("mouseup",function(t){
return e._onShadowRootMouseUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){
return e._onShadowRootDblClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},get context(){return this.hasAttribute("context")?this.getAttribute("context"):"fill";
},get selectedStops(){return $traceurRuntime.spread(this._selectedStops)},_onEnabled:function(){
var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.artboards.addEventListener("mousedown",this._artboardMouseDownListener=function(t){
e._onArtboardMouseDown(t)}),body.canvas.huds.addEventListener("mousedown",this._hudsMouseDownListener=function(t){
e._onHudsMouseDown(t)}),body.canvas.undoManager.addEventListener("undo",this._undoListener=function(){
e._onUndoOrRedo()}),body.canvas.undoManager.addEventListener("redo",this._redoListener=function(){
e._onUndoOrRedo()})},_onDisabled:function(){this._selectStops([]),body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.artboards.removeEventListener("mousedown",this._artboardMouseDownListener),
body.canvas.huds.removeEventListener("mousedown",this._hudsMouseDownListener),body.canvas.undoManager.removeEventListener("undo",this._undoListener),
body.canvas.undoManager.removeEventListener("redo",this._redoListener)},_onSelectedElementsChange:function(){
this._updateAll200Th()},_onSelectedTextRangeChange:function(){this._updateAll200Th();
},_onArtboardMutation:function(e){this._draggedGrippie?this._updatePositions(this._draggedGrippie.closest(".subhud")):this._draggedSlider?this._updatePositions(this._draggedSlider.parentElement):"style"===e.attributeName&&"stop"===e.target.localName?this._updateGrippiesColor():this._updateAll200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onUndoOrRedo:function(){this._selectStops([]);
},_onArtboardMouseDown:function(e){0===e.button&&e.target!==this&&this._selectStops([]);
},_onHudsMouseDown:function(e){0===e.button&&e.target!==this&&this._selectStops([]);
},_onShadowRootMouseDown:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderMouseDown(e):e.target.classList.contains("stop-grippie")?this._onStopGrippieMouseDown(e):e.target.classList.contains("r2-grippie")&&this._onRadiusGrippieOrSliderEdgeMouseDown(e,"r2");
var n,i;this._mouseMovedAfterMouseDown=!1,this._mouseDownTimeStamp=e.timeStamp,window.addEventListener("mousemove",n=function(){
t._mouseMovedAfterMouseDown=!0}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mouseup",i),
window.removeEventListener("mousemove",n)})}},_onShadowRootMouseUp:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippieMouseUp(e);
},_onShadowRootDblClick:function(e){e.timeStamp-this._mouseDownTimeStamp<100&&e.target.classList.contains("slider")&&this._onSliderDblClick(e);
},_onStopGrippieMouseDown:function(e){var t=e.target,n=t[M.stop],i=n.closest("radialGradient"),r=this._selectedStops.filter(function(e){
return e.closest("radialGradient")===i}),a=function(){var e=0,t=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=i.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(t[e++]=l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}(),s=a[0],o=a[a.length-1],l=body.modKeys,u=l.alt,c=l.shift;
this._mouseDownSelectedStops=$traceurRuntime.spread(r),c===!1?r.includes(n)===!1&&this._selectStops([n]):c===!0&&r.includes(n)===!1&&(r.push(n),
this._selectStops(r)),n===s&&0===n.offset.baseVal&&u===!1?this._onCenterGrippieOrSliderBodyMouseDown(e):n===o&&1===n.offset.baseVal&&u===!1?this._onRadiusGrippieOrSliderEdgeMouseDown(e,"r1"):this._onDraggableStopGrippieMouseDown(e);
},_onStopGrippieMouseUp:function(e){if(!this._mouseMovedAfterMouseDown){var t=e.target,n=this._mouseDownSelectedStops,i=t[M.stop],a=t.closest(".subhud"),s=a[M.gradientUser],o=body.modKeys.shift,l=[],u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=body.canvas.selectedElements[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;if("g"!==f.localName&&"a"!==f.localName||!f.contains(s))l.push(f);else{
var m=!0,b=!1,g=void 0;try{for(var p=void 0,y=r($traceurRuntime.spread(f.children))[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){
var _=p.value;l.unshift(_)}}catch(x){b=!0,g=x}finally{try{m||null==y["return"]||y["return"]();
}finally{if(b)throw g}}}}}catch(w){c=!0,d=w}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}l.remove(s),l.unshift(s),body.canvas.selectedElements=l;for(var S=s.parentElement;S!==body.canvas.currentArtboard;S=S.parentElement)if("g"===S.localName||"a"===S.localName){
body.canvas.currentContainer=S;break}o===!0&&this._mouseDownSelectedStops.includes(i)===!0&&(n.remove(i),
this._selectStops([n]))}},_onDraggableStopGrippieMouseDown:function(e){var t,n,i,r,a=this,s=e.target,o=s.closest(".subhud"),l=o.querySelector(".slider"),u=this._getMoveOffsetsForSelectedStops(),c=this.getScreenCTM(),d=c.inverse(),h=new SVGPoint(l.x1.baseVal.value,l.y1.baseVal.value),v=new SVGPoint(l.x2.baseVal.value,l.y2.baseVal.value),f=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value),m=f.matrixTransform(c),p=(t=b(h,v,f,!1)[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),y=g(h,p)/g(h,v),_=!1;this._draggedGrippie=s,window.addEventListener("mousemove",i=function(t){
var n,i;_===!1&&(body.canvas.undoManager.checkpoint("Move gradient stop"),_=!0);var r=new SVGPoint(m.x+t.clientX-e.clientX,m.y+t.clientY-e.clientY),s=r.matrixTransform(d),o=(n=b(h,v,s,!1)[Symbol.iterator](),
(i=n.next()).done?void 0:i.value),l=g(h,o)/g(h,v),c=l-y,f=!0,p=!1,x=void 0;try{for(var w=void 0,S=a._selectedStops[Symbol.iterator]();!(f=(w=S.next()).done);f=!0){
var C=w.value,E=u.get(C),k=E.minOffset,A=E.maxOffset,T=E.initialOffset;k>T+c?C.setAttribute("offset",k):T+c>A?C.setAttribute("offset",A):C.setAttribute("offset",T+c);
}}catch(L){p=!0,x=L}finally{try{f||null==S["return"]||S["return"]()}finally{if(p)throw x;
}}}),window.addEventListener("mouseup",r=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r),a._draggedGrippie=null})},_onRadiusGrippieOrSliderEdgeMouseDown:function(t){
var n,i,r,s,o,l,u,c,d=void 0!==arguments[1]?arguments[1]:"r1",h=this,v=$traceurRuntime.spread(this["#subhuds"].children).find(function(e){
return e.contains(t.target)}),f=v[M.gradient],m=v[M.gradientUser],b=e(m),g=m.getScreenCTM(),x=g.inverse(),S=k.fromSVGMatrix(g),A=SVGMatrix.fromMatrix(f.gradientTransform.baseVal.consolidate().matrix),T=!1,P=!1;
t.target.matches(".grippie")?this._draggedGrippie=t.target:t.target.matches(".slider")&&(this._draggedSlider=t.target);
var O=function(){if(f.gradientUnits.baseVal===R){r=new SVGPoint(f.cx.baseVal.value,f.cy.baseVal.value),
s=new SVGPoint(f.cx.baseVal.value+f.r.baseVal.value,f.cy.baseVal.value),o=new SVGPoint(f.cx.baseVal.value,f.cy.baseVal.value-f.r.baseVal.value);
var e=r.matrixTransform(A),t=s.matrixTransform(A),n=o.matrixTransform(A);l=e.matrixTransform(g),
u=t.matrixTransform(g),c=n.matrixTransform(g)}else if(f.gradientUnits.baseVal===j){
r=new SVGPoint(f.cx.baseVal.valueInSpecifiedUnits,f.cy.baseVal.valueInSpecifiedUnits),
s=new SVGPoint(f.cx.baseVal.valueInSpecifiedUnits+f.r.baseVal.valueInSpecifiedUnits,f.cy.baseVal.valueInSpecifiedUnits),
o=new SVGPoint(f.cx.baseVal.valueInSpecifiedUnits,f.cy.baseVal.valueInSpecifiedUnits-f.r.baseVal.valueInSpecifiedUnits);
var i=r.matrixTransform(A),a=s.matrixTransform(A),d=o.matrixTransform(A),h=C(i,b),v=C(a,b),m=C(d,b);
l=h.matrixTransform(g),u=v.matrixTransform(g),c=m.matrixTransform(g)}};window.addEventListener("mousemove",n=function(e){
var n,i,h,v;if(T===!1){if(!a(t,e,5))return;T=!0,body.canvas.undoManager.checkpoint("Transform gradient"),
O()}var m,g,C=body.modKeys,k=C.ctrl,M=C.shift;"r1"===d?(m=new SVGPoint(e.clientX+(u.x-t.clientX),e.clientY+(u.y-t.clientY)),
g=p(l,u,m)):"r2"===d&&(m=new SVGPoint(e.clientX+(c.x-t.clientX),e.clientY+(c.y-t.clientY)),
g=p(l,c,m));var V=(new SVGMatrix).rotate(g,l.x,l.y),D=l.matrixTransform(V),G=u.matrixTransform(V),I=c.matrixTransform(V),N=new L(D,G),B=new L(D,I),U=new L(D,m);
if("r1"===d){if(N.length=U.length,G.x=D.x+N.x,G.y=D.y+N.y,k){var z=new L(D,c);B.length=U.length,
z.length=U.length,I.x=D.x+B.x,I.y=D.y+B.y,c.x=D.x+z.x,c.y=D.y+z.y}if(M){var H=_(D,G,22.5),F=(n=H[Symbol.iterator](),
(i=n.next()).done?void 0:i.value);(i=n.next()).done?void 0:i.value;G=F,P=!0}if(P){
var q=new SVGPoint(l.x,l.y-100),Y=p(l,q,G);I=S.scaleX<0&&S.scaleY<0?y(D,I,Y+90):y(D,I,Y-90);
}}else if("r2"===d){if(B.length=U.length,I.x=D.x+B.x,I.y=D.y+B.y,k){var $=new L(D,u);
N.length=U.length,$.length=U.length,G.x=D.x+N.x,G.y=D.y+N.y,u.x=D.x+$.x,u.y=D.y+$.y;
}if(M){var W=_(D,I,22.5),X=(h=W[Symbol.iterator](),(v=h.next()).done?void 0:v.value);
(v=h.next()).done?void 0:v.value;I=X,P=!0}if(P){var Z=new SVGPoint(l.x,l.y-100),K=p(l,Z,I);
G=S.scaleX<0&&S.scaleY<0?y(D,G,K-90):y(D,G,K+90)}}var J,Q,ee;if(f.gradientUnits.baseVal===R){
var te=D.matrixTransform(x),ne=G.matrixTransform(x),ie=I.matrixTransform(x);J=te.matrixTransform(A.inverse()),
Q=ne.matrixTransform(A.inverse()),ee=ie.matrixTransform(A.inverse())}else if(f.gradientUnits.baseVal===j){
var re=D.matrixTransform(x),ae=G.matrixTransform(x),se=I.matrixTransform(x),oe=E(re,b),le=E(ae,b),ue=E(se,b);
J=oe.matrixTransform(A.inverse()),Q=le.matrixTransform(A.inverse()),ee=ue.matrixTransform(A.inverse());
}var ce=w(r,s,o,J,Q,ee);f.setAttribute("gradientTransform",A.multiply(ce).toString());
}),window.addEventListener("mouseup",i=function(e){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),h._draggedGrippie=null,h._draggedSlider=null;
})},_onSliderMouseDown:function(e){var t=e.target,n=t.getScreenCTM(),i=new SVGPoint(e.clientX,e.clientY),r=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),a=r.matrixTransform(n),s=g(a,i);
5>=s?this._onRadiusGrippieOrSliderEdgeMouseDown(e,"r1"):this._onCenterGrippieOrSliderBodyMouseDown(e);
},_onCenterGrippieOrSliderBodyMouseDown:function(t){var n,i,r,s=this,o=t.target.closest(".subhud"),l=o[M.gradientUser],u=o[M.gradient],c=e(l),d=SVGMatrix.fromMatrix(u.gradientTransform.baseVal.consolidate().matrix),h=l.getScreenCTM(),v=l.getScreenCTM().inverse(),f=new SVGPoint(t.clientX,t.clientY),m=!1;
if(t.target.matches(".grippie")?this._draggedGrippie=t.target:t.target.matches(".slider")&&(this._draggedSlider=t.target),
u.gradientUnits.baseVal===R){var b=new SVGPoint(u.cx.baseVal.value,u.cy.baseVal.value),g=b.matrixTransform(d);
r=g.matrixTransform(h)}else if(u.gradientUnits.baseVal===j){var p=new SVGPoint(u.cx.baseVal.valueInSpecifiedUnits,u.cy.baseVal.valueInSpecifiedUnits),y=p.matrixTransform(d),_=C(y,c);
r=_.matrixTransform(h)}window.addEventListener("mousemove",n=function(e){if(m===!1){
if(!a(t,e,5))return;m=!0,body.canvas.undoManager.checkpoint("Transform gradient");
}var n,i=new SVGPoint(e.clientX,e.clientY),s=new L(f,i);if(u.gradientUnits.baseVal===R){
var o=new SVGPoint(r.x+s.x,r.y+s.y),l=o.matrixTransform(v);n=l.matrixTransform(d.inverse());
}else if(u.gradientUnits.baseVal===j){var h=new SVGPoint(r.x+s.x,r.y+s.y),b=h.matrixTransform(v),g=E(b,c);
n=g.matrixTransform(d.inverse())}u.setAttribute("cx",n.x),u.setAttribute("cy",n.y);
}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),s._draggedGrippie=null,s._draggedSlider=null;
})},_onSliderDblClick:function(e){body.canvas.undoManager.checkpoint("Add Stop");for(var t=e.target,i=t.closest(".subhud"),r=i[M.gradient],a=this.getScreenCTM().inverse(),l=function(){
var e=0,t=[],n=!0,i=!1,a=void 0;try{for(var s=void 0,o=r.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(t[e++]=l)}}catch(u){i=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(i)throw a}}return t}(),u=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),c=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(a),h=g(u,d),v=g(u,c),f=o(h/v,0,1,5),m=null,b=0;b<l.length;b+=1){
var p=l[b];if(p.offset.baseVal<f)m=b;else if(p.offset.baseVal>f)break}var y=n("svg:stop");
y.setAttribute("offset",f),y.style.stopColor=s(r,f).toString("hex"),null===m?0===r.childElementCount?r.append(y):r.children[0].before(y):l[m].after(y),
this._selectStops([y])},_onShadowRootKeyDown:function(e){var t=T.fromEvent(e);0!==this._selectedStops.length&&(t.matches("Backspace")?(e.stopPropagation(),
this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),
this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Left"),
this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 1 Unit Right"),
this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),
this._canMoveActiveSelectedStops("left")&&(body.canvas.undoManager.checkpoint("Move 10 Units Left"),
this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),
this._canMoveActiveSelectedStops("right")&&(body.canvas.undoManager.checkpoint("Move 10 Units Right"),
this._moveSelectedStops(10,"right"))))},_updateAll:function(){var e=this,t=h(this.context,body.canvas.selectedElements,body.canvas.selectedTextRange),i=t.filter(function(t){
return"radialGradient"===c(t,e.context)});if(0===i.length)this["#subhuds"].innerHTML="";else{
var r=this._shadowRoot.activeElement,a=[];this["#subhuds"].innerHTML="";var s=!0,o=!1,l=void 0;
try{var u,v,f,m,b=this,g=function(){var e=p.value,t=d(e,b.context);if(a.includes(t))return 0;
a.push(t);var i=function(){var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),r=b["#subhud-template"].cloneNode(!0);r.removeAttribute("id"),
r[M.gradient]=t,r[M.gradientUser]=e;var s=r.querySelector(".stop-grippies"),o=document.createDocumentFragment();
u=!0,v=!1,f=void 0;try{for(var l=void 0,c=i[Symbol.iterator]();!(u=(l=c.next()).done);u=!0){
var h=l.value,m=n("svg:circle");m.setAttribute("class","stop-grippie grippie"),m[M.stop]=h,
h.offset.baseVal>.95?o.prepend(m):s.append(m)}}catch(g){v=!0,f=g}finally{try{u||null==c["return"]||c["return"]();
}finally{if(v)throw f}}s.append(o),b["#subhuds"].append(r)};e:for(var p=void 0,y=i[Symbol.iterator]();!(s=(p=y.next()).done);s=!0)switch(m=g()){
case 0:continue e}}catch(_){o=!0,l=_}finally{try{s||null==y["return"]||y["return"]();
}finally{if(o)throw l}}if(r){var x=$traceurRuntime.spread(this["#subhuds"].children).find(function(e){
return e[M.gradient]===r[M.gradient]});x&&x.focus()}this._updatePositions(),this._updateGrippiesSize(),
this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder();
}},_updatePositions:function(){var t=void 0!==arguments[0]?arguments[0]:null,n=!0,i=!1,r=void 0;
try{var a,s,o,l,u,c,d,h=this,v=function(){var n=f.value;if(t&&n!==t)return 0;var i=n[M.gradient],r=n[M.gradientUser],d=function(){
var e=0,t=[],n=!0,r=!1,a=void 0;try{for(var s=void 0,o=i.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;"stop"===l.localName&&(t[e++]=l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}(),v=SVGMatrix.fromMatrix(i.gradientTransform.baseVal.consolidate().matrix),b=S(r,h),g=n.querySelector(".slider"),p=n.querySelector(".slider-shadow"),y=$traceurRuntime.spread(n.querySelector(".stop-grippies").children),_=n.querySelector(".r2-grippie"),x=n.querySelector(".r2-outline");
if(i.gradientUnits.baseVal===R){var w=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value),E=new SVGPoint(i.cx.baseVal.value+i.r.baseVal.value,i.cy.baseVal.value),k=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value-i.r.baseVal.value),A=w.matrixTransform(v),T=E.matrixTransform(v),L=k.matrixTransform(v),P=A.matrixTransform(b),O=T.matrixTransform(b),V=L.matrixTransform(b);
g.setAttribute("x1",P.x),g.setAttribute("y1",P.y),g.setAttribute("x2",O.x),g.setAttribute("y2",O.y),
p.setAttribute("x1",P.x),p.setAttribute("y1",P.y),p.setAttribute("x2",O.x),p.setAttribute("y2",O.y),
x.setAttribute("x1",P.x),x.setAttribute("y1",P.y),x.setAttribute("x2",V.x),x.setAttribute("y2",V.y),
_.setAttribute("cx",V.x),_.setAttribute("cy",V.y),a=!0,s=!1,o=void 0;try{for(var D=function(){
var e=G.value,t=y.find(function(t){return t[M.stop]===e}),n=m(P,O,e.offset.baseVal);
t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},G=void 0,I=d[Symbol.iterator]();!(a=(G=I.next()).done);a=!0)D();
}catch(N){s=!0,o=N}finally{try{a||null==I["return"]||I["return"]()}finally{if(s)throw o;
}}}else if(i.gradientUnits.baseVal===j){var B=e(r),U=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),z=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits+i.r.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),H=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits-i.r.baseVal.valueInSpecifiedUnits),F=U.matrixTransform(v),q=z.matrixTransform(v),Y=H.matrixTransform(v),$=C(F,B),W=C(q,B),X=C(Y,B),Z=$.matrixTransform(b),K=W.matrixTransform(b),J=X.matrixTransform(b);
g.setAttribute("x1",Z.x),g.setAttribute("y1",Z.y),g.setAttribute("x2",K.x),g.setAttribute("y2",K.y),
p.setAttribute("x1",Z.x),p.setAttribute("y1",Z.y),p.setAttribute("x2",K.x),p.setAttribute("y2",K.y),
x.setAttribute("x1",Z.x),x.setAttribute("y1",Z.y),x.setAttribute("x2",J.x),x.setAttribute("y2",J.y),
_.setAttribute("cx",J.x),_.setAttribute("cy",J.y),l=!0,u=!1,c=void 0;try{for(var Q=function(){
var e=ee.value,t=y.find(function(t){return t[M.stop]===e});if(t){var n=m(Z,K,e.offset.baseVal);
t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y}},ee=void 0,te=d[Symbol.iterator]();!(l=(ee=te.next()).done);l=!0)Q();
}catch(ne){u=!0,c=ne}finally{try{l||null==te["return"]||te["return"]()}finally{if(u)throw c;
}}}};e:for(var f=void 0,b=this["#subhuds"].children[Symbol.iterator]();!(n=(f=b.next()).done);n=!0)switch(d=v()){
case 0:continue e}}catch(g){i=!0,r=g}finally{try{n||null==b["return"]||b["return"]();
}finally{if(i)throw r}}},_updateGrippiesColor:function(){var e=!0,t=!1,n=void 0;try{
for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.style.fill=d[M.stop].style.stopColor}}catch(h){o=!0,l=h}finally{try{
s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){t=!0,n=v}finally{
try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_updateGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll(".grippie")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;a.setAttribute("r",O/body.canvas.scale)}}catch(s){t=!0,n=s}finally{
try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_updateGrippiesSelectedState:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.querySelectorAll(".stop-grippie")[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;this._selectedStops.includes(d[M.stop])?d.setAttribute("data-selected",""):d.removeAttribute("data-selected");
}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}}}catch(v){t=!0,n=v}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n;
}}},_updateGrippiesZOrder:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this._selectedStops[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h[M.stop]===s&&h.parentElement.append(h)}}catch(v){l=!0,u=v}finally{
try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}}catch(f){n=!0,i=f;
}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_selectStops:function(e){
0===e.length&&0===this._selectedStops.length||(this._selectedStops=$traceurRuntime.spread(e),
this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")));
},_selectAllStops:function(){var e=this._shadowRoot.activeElement,t=e[M.gradient],n=function(){
var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=this._selectedStops[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l.closest("radialGradient")!==t&&n.push(l)}}catch(u){r=!0,a=u}finally{
try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}this._selectStops(n);
},_deselectAllStops:function(){var e=this._shadowRoot.activeElement,t=e[M.gradient];
this._selectStops(this._selectedStops.filter(function(e){return e.closest("radialGradient")!==t;
}))},_selectNextStop:function(){var e=this._shadowRoot.activeElement,t=e[M.gradient],n=function(){
var e=0,n=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"stop"===l.localName&&(n[e++]=l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n}(),i=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t;
}),r=i[i.length-1],a=n[0];n.length>1&&(this._selectStops(this._selectedStops.filter(function(e){
return e.closest("radialGradient")!==t})),r.nextElementSibling?this._selectStops($traceurRuntime.spread([r.nextElementSibling],this._selectedStops)):this._selectStops($traceurRuntime.spread([a],this._selectedStops)));
},_deleteSelectedStops:function(){var e=this._shadowRoot.activeElement;if(null!==e){
var t=e[M.gradient],n=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t;
});if(n.length>0){body.canvas.undoManager.checkpoint("Delete gradient stop(s)");var i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
l.remove()}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{
if(r)throw a}}}this._selectStops([])}},_moveSelectedStops:function(){var e=void 0!==arguments[0]?arguments[0]:1,t=void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;
if(null!==n){var i=n.querySelector(".slider"),r=n[M.gradient],a=this._selectedStops.filter(function(e){
return e.parentElement===r}),s=this._getMoveOffsetsForSelectedStops(),l=this.getScreenCTM(),u=new SVGPoint(i.x1.baseVal.value,i.y1.baseVal.value),c=new SVGPoint(i.x2.baseVal.value,i.y2.baseVal.value),d=u.matrixTransform(l),h=c.matrixTransform(l),v=new L(d,h),f=e/v.length,m=!0,b=!1,g=void 0;
try{for(var p=void 0,y=a[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var _=p.value,x=s.get(_),w=x.minOffset,S=x.maxOffset;
if("left"===t){var C=o(_.offset.baseVal-f,w,S);_.setAttribute("offset",C)}else if("right"===t){
var E=o(_.offset.baseVal+f,w,S);_.setAttribute("offset",E)}}}catch(k){b=!0,g=k}finally{
try{m||null==y["return"]||y["return"]()}finally{if(b)throw g}}}},_canMoveActiveSelectedStops:function(){
var e=void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){
var n=(t.querySelector(".slider"),t[M.gradient]),i=this._selectedStops.find(function(e){
return e.parentElement===n});if(null!==i){var r=this._getMoveOffsetsForSelectedStops(),a=r.get(i),s=a.minOffset,o=a.maxOffset;
return"left"===e?i.offset.baseVal>s:"right"===e?i.offset.baseVal<o:void 0}}},_getPreviousNotSelectedStop:function(e){
for(;e.previousElementSibling;){if(this._selectedStops.includes(e.previousElementSibling)===!1)return e.previousElementSibling;
e=e.previousElementSibling}return null},_getNextNotSelectedStop:function(e){for(;e.nextElementSibling;){
if(this._selectedStops.includes(e.nextElementSibling)===!1)return e.nextElementSibling;
e=e.nextElementSibling}return null},_getMoveOffsetsForSelectedStops:function(){var e=new Map,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this._selectedStops[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value,l=this._getPreviousNotSelectedStop(o),u=this._getNextNotSelectedStop(o),c={};
l?c.min=o.offset.baseVal-l.offset.baseVal:c.min=o.offset.baseVal,u?c.max=u.offset.baseVal-o.offset.baseVal:c.max=1-o.offset.baseVal,
t.push(c)}}catch(d){i=!0,r=d}finally{try{n||null==s["return"]||s["return"]()}finally{
if(i)throw r}}if(t.length>0){var h=t[0].min,v=t[0].max,f=!0,m=!1,b=void 0;try{for(var g=void 0,p=t[Symbol.iterator]();!(f=(g=p.next()).done);f=!0){
var y=g.value;y.min<h&&(h=y.min),y.max<v&&(v=y.max)}}catch(_){m=!0,b=_}finally{try{
f||null==p["return"]||p["return"]()}finally{if(m)throw b}}var x=!0,w=!1,S=void 0;try{
for(var C=void 0,E=this._selectedStops[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;e.set(k,{initialOffset:k.offset.baseVal,minOffset:k.offset.baseVal-h,
maxOffset:k.offset.baseVal+v})}}catch(A){w=!0,S=A}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}}return e}},{},t)}(SVGGElement),G=i("g","bx-radialgradienthud",D);
return{get default(){return G}}}),System.registerModule("elements/bx-rectangletool",[],function(){
"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/geometry"),a=r.getDistanceBetweenPoints,s=r.getRotationAngleFromPoints,o=r.snapRotationAngle,l=System.get("utils/path-shapes"),u=(l.getShapeData,
l.setShapeData),c=System.get("utils/transform-reduction").reduceTransform,d=Math,h=d.abs,v=d.min,f=(d.sqrt,
d.pow,function(e){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._rectangleCursor=body.registerCursor("images/cursor-rectangle.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
return e._onMouseDown(t)})},_onDisabled:function(){body.unregisterCursor(this._rectangleCursor),
body.unregisterCursor(this._mouseDownRectangleCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(e){
var t,n,r=this;window.addEventListener("mousemove",t=function(a){i(e,a)!==!1&&(window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),r._onIntentionalDragStart(e))}),window.addEventListener("mouseup",n=function(){
window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n);
})},_onIntentionalDragStart:function(e){var n,i,r,l=this,d=body.canvas.currentContainer||body.canvas.currentArtboard,f=body.modKeys.ctrl?"polar":"planar",m=0,b=0,g=0,p=0,y=0,_=0,x=0,w=0;
body.canvas.undoManager.checkpoint("Draw Rectangle");var S=t("svg:path");S.style.fill="#d8d8d8",
u(S,{type:"rect",values:[m,b,g,p,y,_,x,w,y,_,x,w]}),d.append(S),body.canvas.selectedElements=[S],
this._mouseDownRectangleCursor=body.registerCursor("images/cursor-rectangle.png",900,8,7);
var C=S.getScreenCTM().inverse(),E=S.transform.baseVal.consolidate().matrix.multiply(C);
S.setAttribute("transform",E.toString()),window.addEventListener("mousemove",n=function(t){
if("planar"===f){var n=t.clientX-e.clientX||1,i=t.clientY-e.clientY||1;if(g=h(n),
p=h(i),body.modKeys.shift){var r=v(g,p);g=r,p=r}m=0>n?e.clientX-g:e.clientX,b=0>i?e.clientY-p:e.clientY;
}else if("polar"===f){var l=new SVGPoint(e.clientX,e.clientY),c=new SVGPoint(t.clientX,t.clientY),d=a(l,c),C=new SVGPoint(l.x,l.y-d),k=C.matrixTransform((new SVGMatrix).rotate(-45,l.x,l.y)),A=C.matrixTransform((new SVGMatrix).rotate(45,l.x,l.y)),T=C.matrixTransform((new SVGMatrix).rotate(135,l.x,l.y)),L=a(k,A);
m=e.clientX-L/2,b=e.clientY-L/2,g=L,p=L;var M=s(l,T,c);body.modKeys.shift&&(M=o(M,45));
var P=(new SVGMatrix).rotate(M,l.x,l.y);S.setAttribute("transform",E.multiply(P).toString());
}u(S,{type:"rect",values:[m,b,g,p,y,_,x,w,y,_,x,w]})}),window.addEventListener("mouseup",i=function(){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
body.removeEventListener("toolchange",r),body.unregisterCursor(l._mouseDownRectangleCursor),
c(S)}),body.addEventListener("toolchange",r=function(e){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("toolchange",r),
body.unregisterCursor(l._mouseDownRectangleCursor),c(S)})}},{},e)}(HTMLElement)),m=n("bx-rectangletool",f);
return{get default(){return m}}}),System.registerModule("elements/bx-recthud",[],function(){
"use strict";var e=System.get("utils/element"),t=(e.createElement,e.registerElement),n=System.get("utils/math").normalize,i=System.get("utils/path-shapes"),r=i.getShapeData,a=i.setShapeData,s=System.get("utils/time").throttle,o=System.get("utils/transform-general").getTransformToElement,l=System.get("classes/enum")["default"],u=Math.min,c=new l("rect"),d=6,h=8,v='\n  <style>@import url("stylesheets/bx-recthud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <circle class="grippie" data-corner="1"></circle>\n      <circle class="grippie" data-corner="2"></circle>\n      <circle class="grippie" data-corner="3"></circle>\n      <circle class="grippie" data-corner="4"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',f=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._installed=!1,this._selectedRects=[],this._draggedGrippie=null,
this._updateGrippiesPosition200Th=s(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=v;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var f=d.value;this.attributeChangedCallback(f.name)}}catch(m){u=!0,c=m}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_install:function(){var e=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){this._selectedRects=this._getSelectedRects(),
0===this._selectedRects.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onArtboardMutation:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(e){
e.target.matches(".grippie")&&this._onGrippieMouseDown(e)},_onGrippieMouseDown:function(e){
var t=this;if(0===e.button){var i,s,o,l=e.target,d=l.parentElement,v=d[c.rect],f=l.getAttribute("data-corner"),m=v.getCTM().inverse(),b=r(v),g=new SVGPoint(e.clientX,e.clientY).matrixTransform(m),p=new SVGPoint(g.x,g.y),y="normal",_=!1;
l.parentElement.append(l),this._draggedGrippie=l;var x=function(){var e,t,n=body.modKeys,i=n.ctrl,a=n.shift;
if(i===!0&&a===!1)y="normal";else if(i===!1&&a===!0)y="symmetric-1234";else if(i===!0&&a===!0)y="symmetric-1234";else{
var s,o,l=r(v).values,u=(e=l[Symbol.iterator](),(t=e.next()).done?void 0:t.value,
(t=e.next()).done?void 0:t.value,(t=e.next()).done?void 0:t.value,(t=e.next()).done?void 0:t.value,
(t=e.next()).done?void 0:t.value),c=(t=e.next()).done?void 0:t.value,d=(t=e.next()).done?void 0:t.value,h=(t=e.next()).done?void 0:t.value,m=(t=e.next()).done?void 0:t.value,b=(t=e.next()).done?void 0:t.value,g=(t=e.next()).done?void 0:t.value,p=(t=e.next()).done?void 0:t.value,_=[];
if("1"===f&&(s=u,o=m),"2"===f&&(s=c,o=b),"3"===f&&(s=d,o=g),"4"===f&&(s=h,o=p),u===s&&m===o&&_.push("1"),
c===s&&b===o&&_.push("2"),d===s&&g===o&&_.push("3"),h===s&&p===o&&_.push("4"),1===_.length)y="normal";else{
y="symmetric-";var x=!0,w=!1,S=void 0;try{for(var C=void 0,E=_[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;y+=k}}catch(A){w=!0,S=A}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}}}},w=function(){var e,t,i=(r(v),p.x-g.x),s=(p.y-g.y,r(v).values),o=(e=s[Symbol.iterator](),
(t=e.next()).done?void 0:t.value),l=(t=e.next()).done?void 0:t.value,c=(t=e.next()).done?void 0:t.value,d=(t=e.next()).done?void 0:t.value,m=(t=e.next()).done?void 0:t.value,_=(t=e.next()).done?void 0:t.value,x=(t=e.next()).done?void 0:t.value,w=(t=e.next()).done?void 0:t.value,S=(t=e.next()).done?void 0:t.value,C=(t=e.next()).done?void 0:t.value,E=(t=e.next()).done?void 0:t.value,k=(t=e.next()).done?void 0:t.value,A=0;
"1"===f?A=b.values[4]+i:"2"===f?A=b.values[5]-i:"3"===f?A=b.values[6]-i:"4"===f&&(A=b.values[7]+i),
A=n(A,0,u(c/2,d/2),h),"normal"===y?"1"===f?(m=A,S=A):"2"===f?(_=A,C=A):"3"===f?(x=A,
E=A):"4"===f&&(w=A,k=A):(y.includes("1")&&(m=A,S=A),y.includes("2")&&(_=A,C=A),y.includes("3")&&(x=A,
E=A),y.includes("4")&&(w=A,k=A)),a(v,{type:"rect",values:[o,l,c,d,m,_,x,w,S,C,E,k]
})};window.addEventListener("mousemove",i=function(e){_||(_=!0,body.canvas.undoManager.checkpoint("Round corners")),
p=new SVGPoint(e.clientX,e.clientY).matrixTransform(m),w()}),window.addEventListener("mouseup",s=function(){
window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s),
body.removeEventListener("modkeyschange",o),t._draggedGrippie=null}),body.addEventListener("modkeyschange",o=function(){
x(),w()}),x()}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=this._selectedRects[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=this["#subhud-template"].cloneNode(!0);s.removeAttribute("id"),s[c.rect]=a,
this["#subhuds"].append(s)}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()},
_updateGrippiesPosition:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,a=this["#subhuds"].children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){
var s=i.value,l=s[c.rect],u=o(l,this),d=void 0,h=void 0,v=void 0,f=void 0,m=void 0,b=void 0,g=void 0,p=void 0;
if("rect"===l.localName)d=l.x.baseVal.value,h=l.y.baseVal.value,v=l.width.baseVal.value,
f=l.height.baseVal.value,m=0,b=0,g=0,p=0;else if("path"===l.localName){var y=r(l);
d=y.values[0],h=y.values[1],v=y.values[2],f=y.values[3],m=y.values[4],b=y.values[5],
g=y.values[6],p=y.values[7]}var _=!0,x=!1,w=void 0;try{for(var S=void 0,C=s.children[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value,k=E.getAttribute("data-corner"),A=void 0;"1"===k&&(A=new SVGPoint(d+m,h)),
"2"===k?A=new SVGPoint(d+v-b,h):"3"===k?A=new SVGPoint(d+v-g,h+f):"4"===k&&(A=new SVGPoint(d+p,h+f));
var T=A.matrixTransform(u);E.setAttribute("cx",T.x),E.setAttribute("cy",T.y)}}catch(L){
x=!0,w=L}finally{try{_||null==C["return"]||C["return"]()}finally{if(x)throw w}}}}catch(M){
t=!0,n=M}finally{try{e||null==a["return"]||a["return"]()}finally{if(t)throw n}}},
_updateGrippiesSize:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var h=u.value;h.setAttribute("r",d/body.canvas.scale)}}catch(v){o=!0,l=v}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(f){t=!0,n=f;
}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_getSelectedRects:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName?o.hasAttribute("data-bx-shape")&&o.getAttribute("data-bx-shape").startsWith("rect")&&t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedRects(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),m=t("g","bx-recthud",f);return{get default(){return m;
}}}),System.registerModule("elements/bx-ringhud",[],function(){"use strict";var e=System.get("utils/element"),t=(e.createElement,
e.registerElement),n=System.get("utils/math").normalize,i=System.get("utils/path-shapes"),r=i.getShapeData,a=i.setShapeData,s=System.get("utils/time").throttle,o=System.get("utils/transform-general").getTransformToElement,l=System.get("classes/enum")["default"],u=Math,c=u.min,d=u.max,h=new l("ring"),v=6,f=8,m='\n  <style>@import url("stylesheets/bx-ringhud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <circle class="grippie" data-axis="r1x"></circle>\n      <circle class="grippie" data-axis="r1y"></circle>\n      <circle class="grippie" data-axis="r2x"></circle>\n      <circle class="grippie" data-axis="r2y"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',b=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,
this._updateGrippiesPosition200Th=s(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=m;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_install:function(){var e=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){this._selectedRings=this._getSelectedRings(),
0===this._selectedRings.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onArtboardMutation:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(e){
e.target.classList.contains("grippie")&&this._onGrippieMouseDown(e)},_onGrippieMouseDown:function(e){
var t,i,s=this;if(0===e.button){var o,l,u,v=e.target,m=v.parentElement,b=m[h.ring],g=b.getCTM().inverse(),p=new SVGPoint(e.clientX,e.clientY),y=p.matrixTransform(g),_=v.getAttribute("data-axis"),x=new SVGPoint(y.x,y.y),w="normal",S=!1,C=r(b).values,E=(t=C[Symbol.iterator](),
(i=t.next()).done?void 0:i.value),k=(i=t.next()).done?void 0:i.value,A=(i=t.next()).done?void 0:i.value,T=(i=t.next()).done?void 0:i.value,L=(i=t.next()).done?void 0:i.value,M=(i=t.next()).done?void 0:i.value,P=A,R=T,j=L,O=M;
v.parentElement.append(v),this._draggedGrippie=v;var V=function(){var e=body.modKeys,t=e.ctrl,n=e.shift;
t===!0&&n===!1?w="normal":t===!1&&n===!0?w="symmetric":t===!0&&n===!0?w="double-symmetric":("r1x"===_&&A===T?w="symmetric":"r1y"===_&&A===T&&(w="symmetric"),
"r2x"===_&&L===M?w="symmetric":"r2y"===_&&L===M&&(w="symmetric"))},D=function(){var e=x.x-y.x,t=x.y-y.y;
if("r1x"===_){if("normal"===w){var i=1,r=L-1;A=n(P+e,i,r,f)}else if("symmetric"===w){
var s=1,o=c(L,M)-1,l=n(P+e,s,o,f);A=T=l}else if("double-symmetric"===w){var u=1,h=1/0,v=L-A,m=n(P+e,u,h,f),g=m+v;
A=T=m,L=M=g}}else if("r1y"===_){if("normal"===w){var p=1,S=M-1;T=n(R+t,p,S,f)}else if("symmetric"===w){
var C=1,V=c(L,M)-1,D=n(R+t,C,V,f);A=T=D}else if("double-symmetric"===w){var G=1,I=1/0,N=M-T,B=n(R+t,G,I,f),U=B+N;
A=T=B,L=M=U}}else if("r2x"===_){if("normal"===w){var z=A+1,H=1/0;L=n(j+e,z,H,f)}else if("symmetric"===w){
var F=d(A,T)+1,q=1/0,Y=n(j+e,F,q,f);L=M=Y}else if("double-symmetric"===w){var $=L-A,W=$+1,X=1/0,Z=n(j+e,W,X,f),K=Z-$;
A=T=K,L=M=Z}}else if("r2y"===_)if("normal"===w){var J=T+1,Q=1/0;M=n(O+t,J,Q,f)}else if("symmetric"===w){
var ee=d(A,T)+1,te=1/0,ne=n(O+t,ee,te,f);L=M=ne}else if("double-symmetric"===w){var ie=M-T,re=ie+1,ae=n(O+t,re,q,f),se=ae-ie;
A=T=se,L=M=ae}a(b,{type:"ring",values:[E,k,A,T,L,M]})};window.addEventListener("mousemove",o=function(e){
S||(body.canvas.undoManager.checkpoint("Ring radius"),S=!0),x=new SVGPoint(e.clientX,e.clientY).matrixTransform(g),
D()}),window.addEventListener("mouseup",l=function(){window.removeEventListener("mousemove",o),
window.removeEventListener("mouseup",l),body.removeEventListener("modkeyschange",u),
s._draggedGrippie=null}),body.addEventListener("modkeyschange",u=function(){V(),D();
}),V()}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=this._selectedRings[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=this["#subhud-template"].cloneNode(!0);s.removeAttribute("id"),s[h.ring]=a,
this["#subhuds"].append(s)}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()},
_updateGrippiesPosition:function(){var e,t,n=!0,i=!1,a=void 0;try{for(var s=void 0,l=this["#subhuds"].children[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){
var u=s.value,c=u[h.ring],d=o(c,this),v=r(c).values,f=(e=v[Symbol.iterator](),(t=e.next()).done?void 0:t.value),m=(t=e.next()).done?void 0:t.value,b=(t=e.next()).done?void 0:t.value,g=(t=e.next()).done?void 0:t.value,p=(t=e.next()).done?void 0:t.value,y=(t=e.next()).done?void 0:t.value,_=!0,x=!1,w=void 0;
try{for(var S=void 0,C=u.children[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value,k=E.getAttribute("data-axis");if("r1x"===k){var A=new SVGPoint(f+b,m).matrixTransform(d);
E.setAttribute("cx",A.x),E.setAttribute("cy",A.y)}else if("r1y"===k){var T=new SVGPoint(f,m+g).matrixTransform(d);
E.setAttribute("cx",T.x),E.setAttribute("cy",T.y)}else if("r2x"===k){var L=new SVGPoint(f+p,m).matrixTransform(d);
E.setAttribute("cx",L.x),E.setAttribute("cy",L.y)}else if("r2y"===k){var M=new SVGPoint(f,m+y).matrixTransform(d);
E.setAttribute("cx",M.x),E.setAttribute("cy",M.y)}}}catch(P){x=!0,w=P}finally{try{
_||null==C["return"]||C["return"]()}finally{if(x)throw w}}}}catch(R){i=!0,a=R}finally{
try{n||null==l["return"]||l["return"]()}finally{if(i)throw a}}},_updateGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.setAttribute("r",v/body.canvas.scale)}}catch(h){o=!0,l=h}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(f){t=!0,n=f;
}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_getSelectedRings:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName?o.hasAttribute("data-bx-shape")&&o.getAttribute("data-bx-shape").startsWith("ring")&&t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedRings(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),g=t("g","bx-ringhud",b);return{get default(){return g;
}}}),System.registerModule("elements/bx-ringtool",[],function(){"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/geometry"),a=r.getRotationAngleFromPoints,s=r.snapRotationAngle,o=System.get("utils/path-shapes"),l=(o.getShapeData,
o.setShapeData),u=System.get("utils/transform-reduction").reduceTransform,c=System.get("classes/vector")["default"],d=Math,h=d.abs,v=d.min,f=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._ringCursor=body.registerCursor("images/cursor-ellipse.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
return e._onMouseDown(t)})},_onDisabled:function(){body.unregisterCursor(this._ringCursor),
body.unregisterCursor(this._mouseDownRingCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(e){
var t,n,r=this;window.addEventListener("mousemove",t=function(a){i(e,a)!==!1&&(window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),r._onIntentionalDragStart(e))}),window.addEventListener("mouseup",n=function(e){
window.removeEventListener("mousemove",t),body.canvas.removeEventListener("mouseend",n);
})},_onIntentionalDragStart:function(e){var n,i,r,o=this,d=body.canvas.currentContainer||body.canvas.currentArtboard,f=body.modKeys.ctrl?"polar":"planar",m=0,b=0,g=0,p=0,y=1,_=1;
body.canvas.undoManager.checkpoint("Draw Ring Shape");var x=t("svg:path");x.style.fill="#d8d8d8",
d.append(x),body.canvas.selectedElements=[x],this._mouseDownRingCursor=body.registerCursor("images/cursor-ellipse.png",900,8,7);
var w=x.getScreenCTM().inverse(),S=x.transform.baseVal.consolidate().matrix.multiplySelf(w);
x.setAttribute("transform",S.toString()),window.addEventListener("mousemove",n=function(t){
if("planar"===f){var n=t.clientX-e.clientX||1,i=t.clientY-e.clientY||1,r=h(n),o=h(i);
if(body.modKeys.shift){var u=v(r,o);r=u,o=u}var d=0>n?e.clientX-r:e.clientX,w=0>i?e.clientY-o:e.clientY;
m=d+r/2,b=w+o/2,y=r/2,_=o/2,g=.6*y,p=.6*_}else if("polar"===f){var C=new SVGPoint(e.clientX,e.clientY),E=new SVGPoint(C.x,C.y-100),k=new SVGPoint(t.clientX,t.clientY),A=new c(C,k),T=a(C,E,k);
m=C.x,b=C.y,y=A.length,_=A.length,g=.6*y,p=.6*_,body.modKeys.shift&&(T=s(T,45));var L=(new SVGMatrix).rotate(T,C.x,C.y);
x.setAttribute("transform",S.multiply(L).toString())}l(x,{type:"ring",values:[m,b,g,p,y,_]
})}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("toolchange",r),
body.unregisterCursor(o._mouseDownRingCursor),u(x)}),body.addEventListener("toolchange",r=function(e){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
body.removeEventListener("toolchange",r),body.unregisterCursor(o._mouseDownRingCursor),
u(x)})}},{},e)}(HTMLElement),m=n("bx-ringtool",f);return{get default(){return m}};
}),System.registerModule("elements/bx-rubberbandhud",[],function(){"use strict";var e=System.get("utils/element").registerElement,t='\n  <style>@import url("stylesheets/bx-rubberbandhud.css");</style>\n  <rect id="rect" x="0" y="0" width="0" height="0"></rect>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=t;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},get enabled(){return this.hasAttribute("enabled")},set enabled(e){
e?this.setAttribute("enabled",""):this.removeAttribute("enabled")},grabSelection:function(e,t){
var n=this;return new Promise(function(i){var r,a,s=n.getScreenCTM(),o=s.inverse(),l=new SVGPoint(e,t),u=l.matrixTransform(o);
n["#rect"].style.visibility="visible",n["#rect"].style.vectorEffect="non-scaling-stroke";
var c,d,h,v,f=body.registerCursor("default",900);window.addEventListener("mousemove",r=function(e){
var t=new SVGPoint(e.clientX,e.clientY),i=t.matrixTransform(o);h=i.x-u.x,v=i.y-u.y,
0>h?(h=-h,c=u.x-h):c=u.x,0>v?(v=-v,d=u.y-v):d=u.y,n["#rect"].x.baseVal.value=c,n["#rect"].y.baseVal.value=d,
n["#rect"].width.baseVal.value=h,n["#rect"].height.baseVal.value=v}),window.addEventListener("mouseup",a=function(e){
window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a),
body.unregisterCursor(f),n["#rect"].style.visibility="hidden",n["#rect"].style.vectorEffect=null;
var t=new SVGRect(c,d,h,v);i(t),n["#rect"].x.baseVal.value=0,n["#rect"].y.baseVal.value=0,
n["#rect"].width.baseVal.value=0,n["#rect"].height.baseVal.value=0})})}},{},e)}(SVGGElement),i=e("g","bx-rubberbandhud",n);
return{get default(){return i}}}),System.registerModule("elements/bx-satlightslider",[],function(){
"use strict";var e=System.get("classes/color")["default"],t=System.get("utils/color"),n=t.hslToHsv,i=t.hsvToHsl,r=t.colorToString,a=System.get("utils/element").registerElement,s=System.get("utils/math").normalize,o=Number.parseFloat,l=!1,u='\n  <style>\n    @import url("stylesheets/bx-satlightslider.css");\n  </style>\n\n  <main>\n    <canvas id="canvas" width="800" height="800"></canvas>\n    <div id="marker"></div>\n  </main>\n',c=function(t){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=u;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#canvas"].addEventListener("mousedown",function(t){
return e._onMouseDown(t)})},attributeChangedCallback:function(e){"hue"===e?this._onHueAttributeChange():"saturation"===e?this._onSaturationAttributeChange():"lightness"===e&&this._onLightnessAttributeChange();
},get hue(){return this.hasAttribute("hue")?o(this.getAttribute("hue")):0},set hue(e){
this.setAttribute("hue",e)},get saturation(){return this.hasAttribute("saturation")?o(this.getAttribute("saturation")):0;
},set saturation(e){this.setAttribute("saturation",e)},get lightness(){return this.hasAttribute("lightness")?o(this.getAttribute("lightness")):0;
},set lightness(e){this.setAttribute("lightness",e)},_onHueAttributeChange:function(){
this._isDraggingMarker||this._updateCanvas()},_onLightnessAttributeChange:function(){
this._updateMarker()},_onSaturationAttributeChange:function(){this._updateMarker();
},_onMouseDown:function(e){var t,n,i,r,a=this,o=this["#canvas"].getBoundingClientRect(),l=(e.clientX-o.left)/this.clientWidth*100,u=(e.clientY-o.top)/this.clientHeight*100;
this.dispatchEvent(new CustomEvent("markerdragstart")),this._isDraggingMarker=!0,
this._onMarkerDrag(l,u),window.addEventListener("mousemove",i=function(e){e.clientX===t&&e.clientY===n||(t=e.clientX,
n=e.clientY,l=(e.clientX-o.left)/a.clientWidth*100,u=(e.clientY-o.top)/a.clientHeight*100,
l=s(l,0,100,2),u=s(u,0,100,2),a._onMarkerDrag(l,u))}),window.addEventListener("mouseup",r=function(){
window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r),
a._isDraggingMarker=!1,a.dispatchEvent(new CustomEvent("markerdragend"))})},_onMarkerDrag:function(e,t){
var n,a;this["#marker"].style.left=e+"%",this["#marker"].style.top=t+"%";var s=i(this.hue,e,100-t),o=(n=s[Symbol.iterator](),
(a=n.next()).done?void 0:a.value),u=(a=n.next()).done?void 0:a.value,c=(a=n.next()).done?void 0:a.value;
if((this.hue!==o||this.saturation!==u||this.lightness!==c)&&(this.hue=o,this.saturation=u,
this.lightness=c,this.dispatchEvent(new CustomEvent("markerdrag")),l)){var d=r({h:o,
s:u,l:c},"hex");console.log("%c     ","background: "+d,'color = "'+d+'"')}},_updateCanvas:function(){
var t=this["#canvas"].width,n=this["#canvas"].height,i=this["#canvas"].getContext("2d");
i.clearRect(0,0,t,n);var r=new e(this.hue,100,50,1,"hsla");i.fillStyle=r.toString("hex"),
i.fillRect(0,0,t,n);var a=i.createLinearGradient(0,0,t,0);a.addColorStop(0,"rgba(255,255,255,1)"),
a.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=a,i.fillRect(0,0,t,n);var s=i.createLinearGradient(0,0,0,n);
s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=s,
i.fillRect(0,0,t,n)},_updateMarker:function(){var e,t,i=n(this.hue,this.saturation,this.lightness),r=(e=i[Symbol.iterator](),
(t=e.next()).done?void 0:t.value,(t=e.next()).done?void 0:t.value),a=(t=e.next()).done?void 0:t.value;
this["#marker"].style.left=r/100*100+"%",this["#marker"].style.top=100-a/100*100+"%";
}},{},t)}(HTMLElement),d=a("bx-satlightslider",c);return{get default(){return d}};
}),System.registerModule("elements/bx-select",[],function(){"use strict";System.get("elements/bx-selectitem");
var e=System.get("utils/element").registerElement,t=System.get("utils/time").sleep,n=System.get("classes/shortcut")["default"],i=Number.parseFloat,r=(Object.values,
'\n  <style>\n    @import url("stylesheets/scrollbars.css");\n    @import url("stylesheets/bx-select.css");\n  </style>\n\n  <div id="button">\n    <img id="thumbnail"></img>\n    <div id="label">None</div>\n\n    <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n      <use href="images/icons.svg#select-arrows" width="100" height="100"></use>\n    </svg>\n  </div>\n\n  <div id="overlay"></div>\n\n  <div id="popup" style="visibility: hidden"">\n    <content></content>\n  </div>\n'),a=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this.tabIndex=0,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("focus",function(t){
return e._onFocus()}),this.addEventListener("blur",function(t){return e._onBlur();
}),this.addEventListener("keydown",function(t){return e._onKeyDown(t)}),this.addEventListener("thumbnailchange",function(t){
return e._onItemThumbnailChange(t)}),this["#overlay"].addEventListener("mousedown",function(t){
return e._onOverlayMouseDown(t)}),this["#button"].addEventListener("click",function(t){
return e._onButtonClick(t)}),this["#popup"].addEventListener("click",function(t){
return e._onPopupElementClick(t)}),this["#popup"].addEventListener("mouseover",function(t){
return e._onPopupMouseOver(t)}),this["#popup"].addEventListener("mouseout",function(t){
return e._onPopupMouseOut(t)}),this["#popup"].addEventListener("mousewheel",function(t){
return e._onPopupMouseWheel(t)}),this["#popup"].addEventListener("scroll",function(t){
return e._onPopupScroll(t)})},attributeChangedCallback:function(e){"value"===e?this._onValueAttributeChange():"disabled"===e&&this._onDisabledAttributeChange();
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):null},
set value(e){null===e?this.removeAttribute("value"):this.setAttribute("value",e)},
get mixed(){return this.hasAttribute("mixed")},set mixed(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onValueAttributeChange:function(){var e=this,t=$traceurRuntime.spread(this.querySelectorAll("bx-selectitem")),n=null===this.value?null:t.find(function(t){
return t.getAttribute("value")===e.value});if(n){n.setAttribute("checked",""),this["#label"].textContent=n.getAttribute("label"),
n.thumbnail?(this["#thumbnail"].style.display="block",this["#thumbnail"].src=n.thumbnail):this["#thumbnail"].style.display="none";
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l!==n&&l.removeAttribute("checked")}}catch(u){r=!0,a=u}finally{try{
i||null==o["return"]||o["return"]()}finally{if(r)throw a}}}else{this["#label"].textContent="None",
this["#thumbnail"].style.display="none";var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=t[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;m.removeAttribute("checked")}}catch(b){d=!0,h=b}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}}},_onDisabledAttributeChange:function(){this.tabIndex=this.disabled?-1:0;
},_onFocus:function(){var e=this,t=this._getItemWithValue(this.value)||this.querySelector("bx-selectitem");
if(!t)return void this.blur();this["#popup"].style.pointerEvents="all",this["#popup"].style.visibility="visible",
this["#popup"].style.height="auto",this["#popup"].style.left="0px",this["#popup"].style.top="0px",
this["#popup"].style.overflow=null,this["#popup"].scrollTop=0,this["#overlay"].style.display="block";
var n=t.getLabelBoundingClientRect(),r=this["#label"].getBoundingClientRect(),a=this["#button"].getBoundingClientRect(),s=r.left-n.left,o=r.top-n.top,l=a.right-s+3;
this["#popup"].style.left=s+"px",this["#popup"].style.top=o+"px",this["#popup"].style.width=l+"px";
var u=this["#popup"].getBoundingClientRect();if(u.top<0){i(this["#popup"].style.top);
this["#popup"].style.height=u.height+u.top-5+"px",this["#popup"].style.top="5px",
this["#popup"].scrollTop=9999}u=this["#popup"].getBoundingClientRect();var c=!1;if(u.bottom+5>window.innerHeight){
c=!0;var d=u.bottom-window.innerHeight;this["#popup"].style.height=u.height-d-5+"px";
}t.disabled===!1&&this._highlightItem(t),window.addEventListener("resize",this._windowResizeListener=function(){
return e.blur()})},_onBlur:function(){this["#overlay"].style.display="none",this["#popup"].style.visibility="hidden",
window.removeEventListener("resize",this._windowResizeListener)},_onKeyDown:function(e){
var t=n.fromEvent(e);t.matches("ArrowUp")?(e.preventDefault(),this._highlightPreviousItem()):t.matches("ArrowDown")?(e.preventDefault(),
this._highlightNextItem()):t.matches("Control","ArrowUp")?(e.preventDefault(),this._highlightFirstItem()):t.matches("Control","ArrowDown")?(e.preventDefault(),
this._highlightLastItem()):t.matches("Enter")&&(e.preventDefault(),this._selectHighlightedItem());
},_onItemThumbnailChange:function(e){var t=e.target;t.value===this.value&&(t.thumbnail?(this["#thumbnail"].src=t.thumbnail,
this["#thumbnail"].style.display="block"):this["#thumbnail"].style.display="none");
},_onButtonClick:function(e){"visible"===this["#popup"].style.visibility?this.blur():this.focus();
},_onOverlayMouseDown:function(e){e.preventDefault(),this.blur()},_onPopupElementClick:function(e){
"bx-selectitem"==e.target.localName&&0===e.button&&this._onSelectItemClick(e.target);
},_onSelectItemClick:function(e){var n;return $traceurRuntime.asyncWrap(function(i){
for(;;)switch(i.state){case 0:i.state=e.disabled===!1?5:-2;break;case 5:this["#popup"].style.pointerEvents="none",
e.highlighted=!e.highlighted,i.state=6;break;case 6:return void Promise.resolve(t(100)).then(i.createCallback(2),i.errback);
case 2:e.highlighted=!e.highlighted,i.state=8;break;case 8:return void Promise.resolve(t(100)).then(i.createCallback(4),i.errback);
case 4:n=e.value!==this.value,this.value=e.value,this.blur(),(n||this.mixed)&&this.dispatchEvent(new CustomEvent("change")),
i.state=-2;break;default:return i.end()}},this)},_onPopupMouseOver:function(e){"bx-selectitem"===e.target.localName&&this._onSelectItemMouseEnter(e.target);
},_onPopupMouseOut:function(e){e.toElement!==this&&this._highlightItem(null)},_onPopupMouseWheel:function(e){
e.preventDefault(),this._scroll(e.deltaY)},_onPopupScroll:function(e){e.stopImmediatePropagation(),
e.preventDefault()},_onSelectItemMouseEnter:function(e){e.disabled===!1&&this._highlightItem(e);
},_scroll:function(e){var t=this["#popup"],n=t.scrollTop+t.offsetHeight<=t.scrollHeight,r=t.scrollTop>0;
if((!(0>e)||r)&&(!(e>0)||n)){var a=i(t.style.top),s=i(t.style.height);if(e>0)if(a-e>5){
s+e+10>window.innerHeight&&(e=window.innerHeight-s-10),s+e>t.scrollHeight&&(e=t.scrollHeight-s,
t.style.overflow="hidden");var o=s+e,l=a-e;t.style.height=o+"px",t.style.top=l+"px",
t.scrollTop=0}else if(s+e+10>window.innerHeight){var u=window.innerHeight-10,c=u-s;
t.style.top="5px",t.style.height=u+"px",t.scrollTop+=e-c}else t.scrollTop+=e;else if(0>e){
var d=window.innerHeight-s-a;if(d>5)if(window.innerHeight-s+e-10<0){var h=window.innerHeight-10,v=h-s;
t.style.height=h+"px",t.scrollTop+=e+v}else if(s-e>t.scrollHeight)t.style.overflow="hidden",
t.style.height=t.scrollHeight+"px";else{var f=s-e;t.style.height=f+"px"}else t.scrollTop+=e;
}}},_highlightItem:function(e){if(null===e)this._highlightedItem&&(this._highlightedItem.highlighted=!1);else{
this._highlightedItem&&this._highlightedItem!==e&&(this._highlightedItem.highlighted=!1,
this._highlightedItem=null),e.highlighted=!0,this._highlightedItem=e;var t=(e.offsetTop,
this["#popup"].clientHeight,e.clientHeight,e.getBoundingClientRect()),n=this["#popup"].getBoundingClientRect();
if(t.bottom>n.bottom){var i=t.bottom-n.bottom;this._scroll(i)}else if(t.top<n.top){
var r=t.top-n.top;this._scroll(r)}}},_highlightPreviousItem:function(){for(var e=this.querySelectorAll("bx-selectitem:not([disabled])"),t=null,n=0;n<e.length;n+=1){
var i=e[n];if(i.highlighted){t=n;break}}if(0!==t)if(null===t){var r=e[e.length-1];
this._highlightItem(r)}else{var a=e[t-1];this._highlightItem(a)}},_highlightNextItem:function(){
for(var e=this.querySelectorAll("bx-selectitem:not([disabled])"),t=null,n=0;n<e.length;n+=1){
var i=e[n];if(i.highlighted){t=n;break}}if(t!==e.length-1)if(null===t){var r=e[0];
this._highlightItem(r)}else{var a=e[t+1];this._highlightItem(a)}},_highlightFirstItem:function(){
var e=this.querySelector("bx-selectitem:not([disabled])");e&&this._highlightItem(e);
},_highlightLastItem:function(){var e=this.querySelectorAll("bx-selectitem:not([disabled])");
if(e.length>0){var t=e[e.length-1];this._highlightItem(t)}},_selectHighlightedItem:function(){
var e=this.querySelector("bx-selectitem[highlighted]");e&&(this.value=e.value),this.blur(),
this.dispatchEvent(new CustomEvent("change"))},_getItemWithValue:function(e){var t=null,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=this.querySelectorAll("bx-selectitem")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(o.value===e){t=o;break}}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return t}},{},e)}(HTMLElement),s=e("bx-select",a);return{get default(){
return s}}}),System.registerModule("elements/bx-selectedtextrangehud",[],function(){
"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/node").closest,r=(System.get("utils/rect").combineRects,
System.get("utils/text").getRangeOffsetRelativeToElement),a=System.get("utils/time").throttle,s=System.get("utils/transform-general").getTransformToElement,o='\n  <style>@import url("stylesheets/bx-selectedtextrangehud.css");</style>\n  <line id="caret-line"></line>\n  <g id="selection-rects"></g>\n',l=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._update200Th=a(this._update,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=o;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var s=i.value;this["#"+s.id]=s}}catch(l){t=!0,n=l}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._update200Th()})},_onDisabled:function(){body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedTextRangeChange:function(){this._update()},_update:function(){this._updateCaretLine(),
this._udpateSelectionRects()},_updateCaretLine:function(){var e=body.canvas.selectedTextRange;
if(e){var t=i(e.startContainer,"text"),n=t.getNumberOfChars(),a="backward"===e.direction?"end":"start",o=r(e,t,a);
if(0===o){var l=t.getExtentOfChar(o),u=t.getStartPositionOfChar(o),c=t.getSubStringLength(o,1),d=l.height,h=t.getRotationOfChar(o),v=new SVGMatrix;
v.multiplySelf(s(t,this)),v.rotateSelf(h,u.x+c/2,u.y),this["#caret-line"].setAttribute("x1",u.x),
this["#caret-line"].setAttribute("y1",l.y),this["#caret-line"].setAttribute("x2",u.x),
this["#caret-line"].setAttribute("y2",l.y+d),this["#caret-line"].setAttribute("transform",v.toString()),
this["#caret-line"].style.visibility="visible"}else if(o>0&&n>=o){var f=t.getExtentOfChar(o-1),m=t.getEndPositionOfChar(o-1),b=t.getSubStringLength(o-1,1),g=f.height,p=t.getRotationOfChar(o-1),y=new SVGMatrix;
y.multiplySelf(s(t,this)),y.rotateSelf(p,m.x-b/2,m.y),this["#caret-line"].setAttribute("x1",m.x),
this["#caret-line"].setAttribute("y1",f.y),this["#caret-line"].setAttribute("x2",m.x),
this["#caret-line"].setAttribute("y2",f.y+g),this["#caret-line"].setAttribute("transform",y.toString()),
this["#caret-line"].style.visibility="visible"}else o>n&&(this["#caret-line"].style.visibility="hidden");
}else this["#caret-line"].style.visibility="hidden"},_udpateSelectionRects:function(){
var e=body.canvas.selectedTextRange;if(this["#selection-rects"].innerHTML="",e&&e.collapsed===!1)for(var n=i(e.startContainer,"text"),a=r(e,n,"start"),o=r(e,n,"end"),l=n.getNumberOfChars(),u=a;o>u&&l>u;u+=1){
var c=n.getExtentOfChar(u),d=n.getStartPositionOfChar(u),h=(n.getEndPositionOfChar(u),
n.getSubStringLength(u,1)),v=c.height,f=n.getRotationOfChar(u),m=new SVGMatrix;m.multiplySelf(s(n,this)),
m.rotateSelf(f,d.x+h/2,d.y);var b=t("svg:rect");b.setAttribute("x",d.x),b.setAttribute("y",c.y),
b.setAttribute("width",h),b.setAttribute("height",v),b.setAttribute("transform",m.toString()),
this["#selection-rects"].append(b)}}},{},e)}(SVGGElement),u=n("g","bx-selectedtextrangehud",l);
return{get default(){return u}}}),System.registerModule("elements/bx-selectitem",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t='\n  <style>@import url("stylesheets/bx-selectitem.css");</style>\n\n  <main>\n    <svg id="icon" viewBox="0 0 100 100" preserveAspectRatio="none">\n      <use id="icon-use" width="100" height="100"></use>\n    </svg>\n\n    <img id="thumbnail"></img>\n    <div id="label"></div>\n  </main>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=t;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"label"===e?this._onLabelAttributeChange():"checked"===e&&this._onCheckedAttributeChange();
},get value(){return this.hasAttribute("value")?this.getAttribute("value"):""},set value(e){
this.setAttribute("value",e)},get label(){return this.hasAttribute("label")?this.getAttribute("label"):"";
},set label(e){this.setAttribute("label",e)},get checked(){return this.hasAttribute("checked");
},set checked(e){e===!0?this.setAttribute("checked",""):this.removeAttribute("checked");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},get thumbnail(){return this["#thumbnail"].src},set thumbnail(e){null===e?this["#thumbnail"].removeAttribute("src"):this["#thumbnail"].setAttribute("src",e),
this.dispatchEvent(new CustomEvent("thumbnailchange",{bubbles:!0}))},getLabelBoundingClientRect:function(){
return this["#label"].getBoundingClientRect()},_onLabelAttributeChange:function(){
this["#label"].textContent=this.label},_onCheckedAttributeChange:function(){this["#icon-use"].href.baseVal=this.checked?"images/icons.svg#check-mark":"";
}},{},e)}(HTMLElement),i=e("bx-selectitem",n);return{get default(){return i}}}),System.registerModule("elements/bx-shortcutseditor",[],function(){
"use strict";System.get("elements/bx-shortcutseditorrow");var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("classes/shortcut")["default"],r=function(e){
return"string"==typeof e},a='\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-shortcutseditor.css");</style>\n\n  <main>\n    <header>\n      <div>Command</div>\n      <div>Shortcut</div>\n    </header>\n\n    <div id="rows"></div>\n  </main>\n',s=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e,t,n,i,r,s,o;return $traceurRuntime.asyncWrap(function(l){
for(;;)switch(l.state){case 0:e=this,this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=a,t=!0,n=!1,i=void 0;try{for(r=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)o=r.value,
this["#"+o.id]=o}catch(u){n=!0,i=u}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}this.addEventListener("keydown",function(t){return e._onKeyDown(t);
}),this["#rows"].addEventListener("change",function(t){return e._onRowChange(t)}),
this["#rows"].addEventListener("focusin",function(t){return e._onRowFocusIn(t)}),
body.bridge.postMessage("getShortcutsEditorModel",null,function(t){return e._onModelReady(t);
}),l.state=-2;break;default:return l.end()}},this)},attachedCallback:function(){var e=this;
body.addEventListener("configchange",this._configChangeListener=function(t){return e._onConfigChange(t);
})},detachedCallback:function(){body.removeEventListener("configchange",this._configChangeListener);
},_onConfigChange:function(e){var t=e.detail,n=t.key,a=t.value;if("bx-shortcutseditor:userShortcuts"===n){
var s=a,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=this["#rows"].children[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=s[h.commandID];h.userShortcut=r(v)?i.fromString(v):null}}catch(f){
l=!0,u=f}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}this._markConflictingRows();
}},_onModelReady:function(e){var n,a,s,o,l,u,c,d,h,v,f,m;return $traceurRuntime.asyncWrap(function(b){
for(;;)switch(b.state){case 0:h=body.getConfig,v=h.call(body,"bx-shortcutseditor:userShortcuts"),
b.state=5;break;case 5:return void Promise.resolve(v).then(b.createCallback(3),b.errback);
case 3:f=b.value,b.state=2;break;case 2:m=f?f:{},n=m,b.state=7;break;case 7:a=!0,
s=!1,o=void 0;try{for(l=void 0,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)c=l.value,
d=t("bx-shortcutseditorrow"),d.commandID=c.id,d.label=c.label,d.defaultShortcut=r(c.shortcut)?i.fromString(c.shortcut):null,
d.userShortcut=r(n[c.id])?i.fromString(n[c.id]):null,this["#rows"].append(d)}catch(g){
s=!0,o=g}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}this._markConflictingRows(),
b.state=-2;break;default:return b.end()}},this)},_onRowChange:function(e){var t,n,i,r,a,s,o,l;
return $traceurRuntime.asyncWrap(function(u){for(;;)switch(u.state){case 0:e.stopPropagation(),
t=e.target,n=t.commandID,i=t.userShortcut,u.state=9;break;case 9:a=body.getConfig,
s=a.call(body,"bx-shortcutseditor:userShortcuts"),u.state=5;break;case 5:return void Promise.resolve(s).then(u.createCallback(3),u.errback);
case 3:o=u.value,u.state=2;break;case 2:l=o?o:{},r=l,u.state=7;break;case 7:null===i?delete r[n]:r[n]=i.toString(),
body.setConfig("bx-shortcutseditor:userShortcuts",r),u.state=-2;break;default:return u.end();
}},this)},_onRowFocusIn:function(e){var t=e.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#rows"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===t}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}},_onKeyDown:function(e){e.preventDefault();var t=i.fromEvent(e);
if(t.matches("ArrowUp")){var n=this._shadowRoot.querySelector(":focus");n.previousElementSibling&&n.previousElementSibling.focus();
}else if(t.matches("ArrowDown")){var r=this._shadowRoot.querySelector(":focus");r.nextElementSibling&&r.nextElementSibling.focus();
}},_markConflictingRows:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#rows"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!1;if(a.shortcut&&a.shortcut.isVoid()===!1){var o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=this["#rows"].children[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;if(h!==a&&h.shortcut&&null!==h.shortcut.base&&a.shortcut.compare(h.shortcut)===!0){
s=!0;break}}}catch(v){l=!0,u=v}finally{try{o||null==d["return"]||d["return"]()}finally{
if(l)throw u}}}a.conflicting=s}}catch(f){t=!0,n=f}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}}},{},e)}(HTMLElement),o=n("bx-shortcutseditor",s);return{
get default(){return o}}}),System.registerModule("elements/bx-shortcutseditorrow",[],function(){
"use strict";var e=System.get("utils/element"),t=(e.createElement,e.registerElement),n=System.get("classes/shortcut")["default"],i=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Shift+ArrowUp","Shift+ArrowDown","Shift+ArrowLeft","Shift+ArrowRight","Tab","Escape","Enter"],r='\n  <style>@import url("stylesheets/bx-shortcutseditorrow.css");</style>\n\n  <main>\n    <div id="label"></div>\n    <div id="shortcut-preview"></div>\n\n    <div id="buttons">\n      <bx-button\n        id="clear-button"\n        icon="clear-shortcut"\n        iconsize="12"\n        title="Clear"\n        skin="bx-shortcutseditorrow">\n      </bx-button>\n\n      <bx-button\n        id="reset-button"\n        icon="reset-shortcut"\n        iconsize="12"\n        title="Reset to default shortcut"\n        skin="bx-shortcutseditorrow">\n      </bx-button>\n    </div>\n  </main>\n',a=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=this;this.tabIndex=0,this._userShortcut=null,this._defaultShortcut=null,
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=r;
var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this._shadowRoot.addEventListener("click",function(t){
return e._onClick(t)}),this.addEventListener("keydown",function(t){return e._onKeyDown(t);
}),this.addEventListener("blur",function(){return e._onBlur()}),body.bridge.postMessage("getBackendName",null,function(t){
return e._backendName=t})},attributeChangedCallback:function(e){"commandid"===e?this._update():"label"===e?this._updateLabel():"editable"===e&&this._update();
},get commandID(){return this.hasAttribute("commandid")?this.getAttribute("commandid"):null;
},set commandID(e){e?this.setAttribute("commandid",e):this.removeAttribute("commandid");
},get label(){return this.hasAttribute("label")?this.getAttribute("label"):""},set label(e){
this.setAttribute("label",e)},get editable(){return this.hasAttribute("editable");
},set editable(e){e?this.setAttribute("editable",""):this.removeAttribute("editable");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get conflicting(){return this.hasAttribute("conflicting")},set conflicting(e){e?this.setAttribute("conflicting",""):this.removeAttribute("conflicting");
},get userShortcut(){return this._userShortcut},set userShortcut(e){this._userShortcut=e,
this._updateShortcutPreview(),this._updateButtons()},get defaultShortcut(){return this._defaultShortcut;
},set defaultShortcut(e){this._defaultShortcut=e,this._updateShortcutPreview(),this._updateButtons();
},get shortcut(){return this._userShortcut||this._defaultShortcut||null},_update:function(){
this._updateLabel(),this._updateShortcutPreview(),this._updateButtons()},_updateLabel:function(){
this["#label"].textContent=this.label},_updateShortcutPreview:function(){this.editable===!0?this["#shortcut-preview"].textContent="Press new shortcut":this.editable===!1&&(this.userShortcut?(this["#shortcut-preview"].textContent=this.userShortcut.toDisplayString(),
this["#shortcut-preview"].classList.add("user-shortcut")):(this["#shortcut-preview"].textContent=this.defaultShortcut?this.defaultShortcut.toDisplayString():"",
this["#shortcut-preview"].classList.remove("user-shortcut")))},_updateButtons:function(){
this.userShortcut?this["#reset-button"].hidden=!1:this["#reset-button"].hidden=!0,
null===this.shortcut||this.shortcut.isVoid()?this["#clear-button"].hidden=!0:this["#clear-button"].hidden=!1;
},_onKeyDown:function(e){var t=n.fromEvent(e);if(this.editable)if(e.preventDefault(),
e.stopPropagation(),t.matches("Backspace")||t.matches("Escape")||t.matches("Enter"))this.editable=!1;else{
if(t.meta&&"electron"===this._backendName)return;t.base&&i.includes(t.toString())===!1&&(this.userShortcut&&t.matches(this.userShortcut)?this.editable=!1:this.defaultShortcut&&t.matches(this.defaultShortcut)?(this.userShortcut=null,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.editable=!1):(this.userShortcut=t,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.editable=!1))}else t.matches("Enter")?this.editable=!0:t.matches("Backspace")&&(this.userShortcut?(this.userShortcut=null,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))):this.defaultShortcut&&(this.userShortcut=new n,
this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))))},_onClick:function(e){
0===e.button&&(e.target===this["#clear-button"]?this._onClearButtonClick(e):e.target===this["#reset-button"]?this._onResetButtonClick(e):2===e.detail&&(this.editable=!0));
},_onClearButtonClick:function(e){this.userShortcut=new n,this.dispatchEvent(new CustomEvent("change",{
bubbles:!0}))},_onResetButtonClick:function(e){this.userShortcut=null,this.dispatchEvent(new CustomEvent("change",{
bubbles:!0}))},_onBlur:function(){this.editable=!1}},{},e)}(HTMLElement),s=t("bx-shortcutseditorrow",a);
return{get default(){return s}}}),System.registerModule("elements/bx-slider",[],function(){
"use strict";System.get("elements/bx-contextmenu"),System.get("elements/bx-menuitem");
var e=System.get("classes/shortcut")["default"],t=System.get("classes/undo-manager")["default"],n=System.get("utils/element").registerElement,i=System.get("utils/math"),r=i.normalize,a=i.round,s=i.countDecimalPlaces,o=System.get("utils/time").debounce,l=System.get("utils/type"),u=l.isNumeric,c=l.isNumber,d=Math.pow,h=Number,v=h.isFinite,f=h.parseFloat,m=(Object.entries,
'\n  <style id="skin-style">@import url("stylesheets/bx-slider.css");</style>\n\n  <main>\n    <input id="input" type="text" spellcheck="false" value="0" tabindex="0"></input>\n    <div id="bar"></div>\n\n    <bx-contextmenu id="context-menu">\n      <bx-menuitem commandid="cut" label="Cut"></bx-menuitem>\n      <bx-menuitem commandid="copy" label="Copy"></bx-menuitem>\n      <bx-menuitem commandid="paste" label="Paste"></bx-menuitem>\n    </bx-contextmenu>\n  </main>\n'),b=function(n){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var e=this;this.commands={selectAll:{exec:function(){return e["#input"].select();
}},copy:{enabled:function(){return e["#input"].selectionStart!==e["#input"].selectionEnd;
},exec:function(){return e._copyInputValue()}},cut:{enabled:function(){return e["#input"].selectionStart!==e["#input"].selectionEnd;
},exec:function(){return e._cutInputValue()}},paste:{exec:function(){return e._pasteInputValue();
}},undo:{enabled:function(){return e._undoManager.canUndo()},exec:function(){return e._undoManager.undo();
}},redo:{enabled:function(){return e._undoManager.canRedo()},exec:function(){return e._undoManager.redo();
}}},this._undoManager=new t,this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=m;var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(b){c=!0,d=b}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("mousedown",function(t){
return e._onMouseDown(t)}),this.addEventListener("contextmenu",function(t){return e._onContextMenu(t);
}),this["#input"].addEventListener("focus",function(t){return e._onInputFocus(t)}),
this["#input"].addEventListener("keydown",function(t){return e._onInputKeyDown(t);
}),this["#context-menu"].addEventListener("menuitemtrigger",function(t){return e._onContextMenuItemTrigger(t);
}),this["#context-menu"].menuWillShow=function(t){return e._menuWillShow(t)},this["#context-menu"].menuItemWillTrigger=function(t){
return e._menuItemWillTrigger(t)}},attributeChangedCallback:function(e){"value"===e?this._onValueAttributeChange():"skin"===e?this._onSkinAttributeChange():"disabled"===e?this._onDisabledAttributeChange():"before"===e?this._onBeforeAttributeChange():"after"===e&&this._onAfterAttributeChange();
},get value(){return this.hasAttribute("value")?f(this.getAttribute("value")):this.min!==-(1/0)?this.min:0;
},set value(e){this.setAttribute("value",e)},get min(){return this.hasAttribute("min")?f(this.getAttribute("min")):-(1/0);
},set min(e){c(e)?this.setAttribute("min",e):this.removeAttribute("min")},get max(){
return this.hasAttribute("max")?f(this.getAttribute("max")):1/0},set max(e){c(e)?this.setAttribute("max",e):this.removeAttribute("max");
},get before(){return this.hasAttribute("before")?this.getAttribute("before"):""},
set before(e){null===e?this.removeAttribute("before"):this.setAttribute("before",e);
},get after(){return this.hasAttribute("after")?this.getAttribute("after"):""},set after(e){
null===e?this.removeAttribute("after"):this.setAttribute("after",e)},get mixed(){
return this.hasAttribute("mixed")},set mixed(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get precision(){return this.hasAttribute("precision")?f(this.getAttribute("precision")):2;
},set precision(e){this.setAttribute("precision",e)},get step(){return this.hasAttribute("step")?f(this.getAttribute("step")):a(d(.1,this.precision),this.precision);
},set step(e){this.setAttribute("step",step)},get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):null;
},set skin(e){null===e?this.removeAttribute("skin"):this.setAttribute("skin",e)},
get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},validate:function(e){return u(e)},_onValueAttributeChange:function(){var e=this["#input"].matches(":focus");
this["#input"].value=e?this.value:this._serializeValue(this.value),this._updateBar(),
this._updateInputValidity()},_onSkinAttributeChange:function(){var e=this.skin?"bx-slider@"+this.skin+".css":"bx-slider.css";
this["#skin-style"].innerText='@import url("stylesheets/'+e+'"'},_onDisabledAttributeChange:function(){
this["#input"].tabIndex=this.disabled?-1:0},_onBeforeAttributeChange:function(){var e=this["#input"].matches(":focus");
e===!1&&(this["#input"].value=this._serializeValue(this.value))},_onAfterAttributeChange:function(){
var e=this["#input"].matches(":focus");e===!1&&(this["#input"].value=this._serializeValue(this.value));
},_onMouseDown:function(e){var t=this;if(0!==e.button)e.preventDefault();else if(this["#input"].matches(":focus")===!1){
e.preventDefault();var n,i,a,s=1,o=this.value,l=(this["#bar"].clientWidth,this.value),u=null,c=null,d=!1;
a=v(this.min)&&v(this.max)?(this.max-this.min)/this.clientWidth:this.step,u=body.registerCursor("col-resize",100),
window.addEventListener("mousemove",n=function(n){if(n.clientX!==c){c=n.clientX;var i=n.clientX-e.clientX;
if(d===!1){if(i>=-s&&s>=i)return;d=!0,t.dispatchEvent(new CustomEvent("changestart"));
}-s>i?i+=s:i>s&&(i-=s);var l=o+i*a;l=r(l,t.min,t.max,t.precision),t.value=l,t.dispatchEvent(new CustomEvent("change"));
}}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.unregisterCursor(u),d===!0?(d=!1,t.dispatchEvent(new CustomEvent("changeend",{
detail:t.value!==l}))):(t["#input"].focus(),t["#input"].select())})}},_onInputFocus:function(e){
var t,n,i,a=this,s=this.value,l=this.value;body.bridge.postMessage("toggleTextInputMode",!0),
this["#input"].value=this.value,this._hideBar(),this._updateInputValidity(),this.dispatchEvent(new CustomEvent("changestart")),
this["#input"].addEventListener("input",t=function(){a._updateInputValidity()}),this["#input"].addEventListener("input",n=o(function(){
var e=l,t=a["#input"].value;l=a["#input"].value,a._undoManager.register({label:"Typing",
undo:function(){a["#input"].value=l=e,a._updateInputValidity(),a["#input"].select();
},redo:function(){a["#input"].value=l=t,a._updateInputValidity(),a["#input"].select();
}})},250,this)),this.addEventListener("blur",i=function(e){a["#input"].removeEventListener("input",t),
a["#input"].removeEventListener("input",n),a.removeEventListener("blur",i),body.bridge.postMessage("toggleTextInputMode",!1),
a._undoManager.reset();var o=f(a["#input"].value);o=r(o,a.min,a.max,9);var l=a.validate(f(a["#input"].value))===!0,u=o!==s;
(l&&u===!0||u===!1&&a.mixed===!0)&&(a.value=o,a.dispatchEvent(new CustomEvent("change"))),
a["#input"].value=a._serializeValue(a.value),a.dispatchEvent(new CustomEvent("changeend",{
detail:u})),a._showBar()})},_onInputKeyDown:function(t){var n=e.fromEvent(t);n.matches("Enter")?(this._confirmInputChange(),
t.preventDefault(),t.stopPropagation()):n.matches("Escape")?(this._cancelInputChange(),
t.preventDefault(),t.stopPropagation()):n.matches("ArrowUp")?(this._changeInputValueByStep(this.step),
t.preventDefault(),t.stopPropagation()):n.matches("ArrowDown")?(this._changeInputValueByStep(-this.step),
t.preventDefault(),t.stopPropagation()):n.matches("Shift","ArrowUp")?(this._changeInputValueByStep(10*this.step),
t.preventDefault(),t.stopPropagation()):n.matches("Shift","ArrowDown")?(this._changeInputValueByStep(10*-this.step),
t.preventDefault(),t.stopPropagation()):(n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("Shift","ArrowLeft")||n.matches("ArrowRight")||n.matches("Shift","ArrowRight"))&&t.stopPropagation();
},_onContextMenu:function(e){e.preventDefault(),this["#input"].focus(),this["#input"].select(),
this["#context-menu"].open(e.clientX,e.clientY)},_onContextMenuItemTrigger:function(e){
var t=e.detail,n=this.commands[t.commandID];n&&n.exec()},_menuWillShow:function(e){
var t=this;return new Promise(function(n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.items[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t._validateMenuItem(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}n()})},_menuItemWillTrigger:function(e){this._validateMenuItem(e);
},_validateMenuItem:function(e){var t=this;return new Promise(function(n){var i=e.commandID||null,r=i?t.commands[i]:null;
r&&(e.disabled=r.enabled?!r.enabled():!1),n()})},_serializeValue:function(e){var t;
return t=s(e)<this.precision?e.toFixed(this.precision):e.toString(),t=this.before+t+this.after;
},_changeInputValueByStep:function(e){if(u(this["#input"].value)){var t=f(this["#input"].value)+e;
t=r(t,this.min,this.max,this.precision),this["#input"].value=t.toFixed(this.precision),
this["#input"].select(),this["#input"].dispatchEvent(new Event("input",{bubbles:!0
}))}},_updateInputValidity:function(){this.validate(this["#input"].value)===!0?this["#input"].setCustomValidity(""):this["#input"].setCustomValidity("Invalid value");
},_confirmInputChange:function(){this.blur()},_cancelInputChange:function(){this["#input"].value=this.value,
this.blur()},_showBar:function(){this["#bar"].style.visibility=null,this._updateBar();
},_hideBar:function(){this["#bar"].style.visibility="hidden"},_updateBar:function(){
if(v(this.min)&&v(this.max)){var e=(this.value-this.min)/(this.max-this.min)*100;this["#bar"].style.width=e+"%";
}},_copyInputValue:function(){var e=this["#input"].value.substring(this["#input"].selectionStart,this["#input"].selectionEnd);
body.bridge.postMessage("setClipboardData",{"text/plain":e})},_pasteInputValue:function(){
var e=this;body.bridge.postMessage("getClipboardData",null,function(t){if(t["text/plain"]){
var n=e["#input"].selectionStart,i=e["#input"].selectionEnd,r=t["text/plain"],a=e["#input"].value.substring(0,n),s=e["#input"].value.substring(i,e["#input"].value.length);
e["#input"].value=a+r+s,e["#input"].setSelectionRange(n+r.length,n+r.length),e["#input"].dispatchEvent(new Event("input",{
bubbles:!0}))}})},_cutInputValue:function(){var e=this["#input"].selectionStart,t=this["#input"].selectionEnd,n=this["#input"].value.substring(e,t),i=this["#input"].value.substring(0,e),r=this["#input"].value.substring(t,this["#input"].value.length);
this["#input"].value=i+r,this["#input"].setSelectionRange(e,e),this["#input"].dispatchEvent(new Event("input",{
bubbles:!0})),body.bridge.postMessage("setClipboardData",{"text/plain":n})}},{},n);
}(HTMLElement),g=n("bx-slider",b);return{get default(){return g}}}),System.registerModule("elements/bx-starhud",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/math").round,n=System.get("utils/path-shapes"),i=n.getShapeData,r=n.setShapeData,a=System.get("utils/time").throttle,s=System.get("utils/transform-general").getTransformToElement,o=System.get("utils/geometry"),l=o.degToRad,u=o.getNearestPointOnLine,c=o.getDistanceBetweenPoints,d=o.getRotationAngleFromPoints,h=System.get("classes/enum")["default"],v=System.get("classes/vector")["default"],f=Math,m=f.sin,b=f.cos,g=f.PI,p=new h("star"),y=6,_='\n  <style>@import url("stylesheets/bx-starhud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <circle class="grippie arms-grippie"></circle>\n      <circle class="grippie r1-grippie"></circle>\n      <circle class="grippie r2-grippie"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',x=function(e,t,n,i,r){
var a=g/i-g/2+l(r);return new SVGPoint(n*b(a)+e,n*m(a)+t)},w=function(e,t,n,i){var r=-(g/2);
return new SVGPoint(n*b(r)+e,n*m(r)+t)},S=function(e){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){this._installed=!1,
this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=a(this._updateGrippiesPosition,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_;
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var s=i.value;this["#"+s.id]=s}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_install:function(){var e=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){this._selectedStars=this._getSelectedStars(),
0===this._selectedStars.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onArtboardMutation:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(e){
e.target.matches(".r1-grippie")?this._onR1GrippieMouseDown(e):e.target.matches(".r2-grippie")?this._onR2GrippieMouseDown(e):e.target.matches(".arms-grippie")&&this._onArmsGrippieMouseDown(e);
},_onR1GrippieMouseDown:function(e){var t,n,a=this;if(0===e.button){var s,o,l,h=e.target,f=h.parentElement,m=f[p.star],b=m.getCTM().inverse(),g=i(m).values,y=(t=g[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),_=(n=t.next()).done?void 0:n.value,w=(n=t.next()).done?void 0:n.value,S=(n=t.next()).done?void 0:n.value,C=(n=t.next()).done?void 0:n.value,E=(n=t.next()).done?void 0:n.value,k=E,A=new SVGPoint(e.clientX,e.clientY),T=A.matrixTransform(b),L=new SVGPoint(y,_),M=x(y,_,w,C,E),P=new SVGPoint(T.x,T.y),R="normal",j=!1;
h.parentElement.append(h),this._draggedGrippie=h;var O=function(){var e=body.modKeys,t=e.ctrl,n=e.shift;
R=t===!0&&n===!1?"shifted":t===!1&&n===!0?"normal":t===!0&&n===!0?"normal":0!==E?"shifted":"normal";
},V=function(){var e,t,n=new v(M,T),i=n.getOppositeVector().transformPoint(P),a=L,s=x(y,_,999999999,C,E),o=(e=u(a,s,i,!1)[Symbol.iterator](),
(t=e.next()).done?void 0:t.value);w=c(L,o),1>w&&(w=1),E="normal"===R?0:k+d(L,M,i),
r(m,{type:"star",values:[y,_,w,S,C,E]})};window.addEventListener("mousemove",s=function(e){
j===!1&&(j=!0,body.canvas.undoManager.checkpoint("Inner star radius"));var t=new SVGPoint(e.clientX,e.clientY);
P=t.matrixTransform(b),V()}),window.addEventListener("mouseup",o=function(){window.removeEventListener("mousemove",s),
window.removeEventListener("mouseup",o),body.removeEventListener("modkeyschange",l),
a._draggedGrippie=null}),body.addEventListener("modkeyschange",l=function(){O(),V();
}),O()}},_onR2GrippieMouseDown:function(e){var t,n,a=this;if(0===e.button){var s,o,l=e.target,u=l.parentElement,h=u[p.star],f=SVGMatrix.fromMatrix(h.transform.baseVal.consolidate().matrix),m=h.getCTM().inverse(),b=i(h).values,g=(t=b[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),y=(n=t.next()).done?void 0:n.value,_=(n=t.next()).done?void 0:n.value,x=(n=t.next()).done?void 0:n.value,S=(n=t.next()).done?void 0:n.value,C=(n=t.next()).done?void 0:n.value,E=new SVGPoint(e.clientX,e.clientY),k=E.matrixTransform(m),A=new SVGPoint(g,y),T=w(g,y,x,S),L=new SVGPoint(k.x,k.y),M=!1;
l.parentElement.append(l),this._draggedGrippie=l,window.addEventListener("mousemove",s=function(e){
M===!1&&(M=!0,body.canvas.undoManager.checkpoint("Inner star radius"));var t=new SVGPoint(e.clientX,e.clientY);
L=t.matrixTransform(m),L=new v(T,k).getOppositeVector().transformPoint(L);var n=d(A,T,L),i=f.rotate(n,A.x,A.y);
h.setAttribute("transform",i.toString()),x=c(A,L),r(h,{type:"star",values:[g,y,_,x,S,C]
})}),window.addEventListener("mouseup",o=function(){window.removeEventListener("mousemove",s),
window.removeEventListener("mouseup",o),a._draggedGrippie=null})}},_onArmsGrippieMouseDown:function(e){
var n,a,s=this;if(0===e.button){var o,l,u=e.target,c=u.parentElement,d=c[p.star],h=i(d).values,v=(n=h[Symbol.iterator](),
(a=n.next()).done?void 0:a.value),f=(a=n.next()).done?void 0:a.value,m=(a=n.next()).done?void 0:a.value,b=(a=n.next()).done?void 0:a.value,g=(a=n.next()).done?void 0:a.value,y=(a=n.next()).done?void 0:a.value,_=g,x=!1;
u.parentElement.append(u),this._draggedGrippie=u,window.addEventListener("mousemove",o=function(n){
var i=t((n.clientX-e.clientX)/10,0);g=_+i,3>g&&(g=3),x===!1&&g!==_&&(body.canvas.undoManager.checkpoint("Change number of star arms"),
x=!0),r(d,{type:"star",values:[v,f,m,b,g,y]})}),window.addEventListener("mouseup",l=function(){
window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l),
s._draggedGrippie=null})}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._selectedStars[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=this["#subhud-template"].cloneNode(!0);s.removeAttribute("id"),s[p.star]=a,
this["#subhuds"].append(s)}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()},
_updateGrippiesPosition:function(){var e,t,n=!0,r=!1,a=void 0;try{for(var o=void 0,l=this["#subhuds"].children[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var u=o.value,c=u[p.star],d=s(c,this),h=i(c).values,v=(e=h[Symbol.iterator](),(t=e.next()).done?void 0:t.value),f=(t=e.next()).done?void 0:t.value,m=(t=e.next()).done?void 0:t.value,b=(t=e.next()).done?void 0:t.value,g=(t=e.next()).done?void 0:t.value,y=(t=e.next()).done?void 0:t.value,_=!0,S=!1,C=void 0;
try{for(var E=void 0,k=u.children[Symbol.iterator]();!(_=(E=k.next()).done);_=!0){
var A=E.value;if(A.matches(".r1-grippie")){var T=x(v,f,m,g,y).matrixTransform(d);A.setAttribute("cx",T.x),
A.setAttribute("cy",T.y)}else if(A.matches(".r2-grippie")){var L=w(v,f,b,g).matrixTransform(d);
A.setAttribute("cx",L.x),A.setAttribute("cy",L.y)}else if(A.matches(".arms-grippie")){
var M=new SVGPoint(v,f).matrixTransform(d);A.setAttribute("cx",M.x),A.setAttribute("cy",M.y);
}}}catch(P){S=!0,C=P}finally{try{_||null==k["return"]||k["return"]()}finally{if(S)throw C;
}}}}catch(R){r=!0,a=R}finally{try{n||null==l["return"]||l["return"]()}finally{if(r)throw a;
}}},_updateGrippiesSize:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.setAttribute("r",y/body.canvas.scale)}}catch(h){o=!0,l=h}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){t=!0,n=v;
}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_getSelectedStars:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName?o.hasAttribute("data-bx-shape")&&o.getAttribute("data-bx-shape").startsWith("star")&&t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedStars(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),C=e("g","bx-starhud",S);return{get default(){return C;
}}}),System.registerModule("elements/bx-startool",[],function(){"use strict";var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/geometry"),a=r.getRotationAngleFromPoints,s=r.snapRotationAngle,o=System.get("utils/path-shapes"),l=(o.getShapeData,
o.setShapeData),u=System.get("utils/transform-general").getTransformFromPoints,c=System.get("utils/transform-reduction").reduceTransform,d=System.get("classes/shortcut")["default"],h=System.get("classes/vector")["default"],v=Math,f=v.abs,m=v.min,b=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._starCursor=body.registerCursor("images/cursor-star.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
return e._onMouseDown(t)})},_onDisabled:function(){body.unregisterCursor(this._starCursor),
body.unregisterCursor(this._mouseDownStarCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(e){
var t,n,r=this;window.addEventListener("mousemove",t=function(a){i(e,a)!==!1&&(window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),r._onIntentionalDragStart(e))}),window.addEventListener("mouseup",n=function(e){
window.removeEventListener("mousemove",t),body.canvas.removeEventListener("mouseend",n);
})},_onIntentionalDragStart:function(e){var n,i,r,o,v=this,b=body.canvas.currentContainer||body.canvas.currentArtboard,g=body.modKeys.ctrl?"polar":"planar",p=0,y=0,_=0,x=0,w=5,S=0;
body.canvas.undoManager.checkpoint("Draw Star Shape");var C=t("svg:path");C.style.fill="#d8d8d8",
l(C,{type:"star",values:[p,y,_,x,w,S]}),b.append(C),body.canvas.selectedElements=[C],
this._mouseDownStarCursor=body.registerCursor("images/cursor-star.png",900,8,7);var E=C.getScreenCTM().inverse(),k=C.transform.baseVal.consolidate().matrix.multiply(E);
C.setAttribute("transform",k.toString()),window.addEventListener("mousemove",n=function(t){
if("planar"===g){var n=t.clientX-e.clientX||1,i=t.clientY-e.clientY||1,r=f(n),o=f(i),c=m(r,o);
body.modKeys.shift&&(r=c,o=c);var d=0>n?e.clientX-r:e.clientX,v=0>i?e.clientY-o:e.clientY;
if(p=d+c/2,y=v+c/2,x=c/2,_=2*x/5,r!==o){var b=new SVGPoint(d,v),E=new SVGPoint(d+c,v),A=new SVGPoint(d,v+c),T=new SVGPoint(d,v),L=new SVGPoint(d+r,v),M=new SVGPoint(d,v+o),P=u(b,E,A,T,L,M);
C.setAttribute("transform",k.multiply(P).toString())}else C.setAttribute("transform",k);
}else if("polar"===g){var R=new SVGPoint(e.clientX,e.clientY),j=new SVGPoint(R.x,R.y-100),O=new SVGPoint(t.clientX,t.clientY),V=new h(R,O),D=a(R,j,O);
p=R.x,y=R.y,_=2*V.length/5,x=V.length,body.modKeys.shift&&(D=s(D,180/w/2));var G=(new SVGMatrix).rotate(D,R.x,R.y);
C.setAttribute("transform",k.multiply(G).toString())}l(C,{type:"star",values:[p,y,_,x,w,S]
})}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("keydown",r),body.removeEventListener("toolchange",o),
body.unregisterCursor(v._mouseDownStarCursor),c(C)}),body.addEventListener("toolchange",o=function(e){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
body.removeEventListener("keydown",r),body.removeEventListener("toolchange",o),body.unregisterCursor(v._mouseDownStarCursor),
c(C)}),body.addEventListener("keydown",r=function(e){var t=d.fromEvent(event);t.matches("ArrowUp")?(event.preventDefault(),
event.stopPropagation(),w+=1,l(C,{type:"star",values:[p,y,_,x,w,S]})):t.matches("ArrowDown")&&(event.preventDefault(),
event.stopPropagation(),w>3&&(w-=1,l(C,{type:"star",values:[p,y,_,x,w,S]})))})}},{},e);
}(HTMLElement),g=n("bx-startool",b);return{get default(){return g}}}),System.registerModule("elements/bx-strokecontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-checkbox"),
System.get("elements/bx-paintsection"),System.get("elements/bx-slider");var e=System.get("utils/element").registerElement,t=System.get("utils/math").round,n=System.get("utils/style").queryStylableElements,i=System.get("utils/text").normalizeTextInRangeBeforeEditing,r=System.get("utils/time").throttle,a=System.get("utils/transform-general").getTransformToElement,s=System.get("classes/decomposed-transform")["default"],o=Math.abs,l=Number.parseFloat,u='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-strokecontrols.css");\n  </style>\n\n  <section id="paint-section" is="bx-paintsection" context="stroke"></section>\n\n  <section id="opacity-section">\n    <h2 id="opacity-section-heading">Opacity</h2>\n\n    <bx-slider\n      id="opacity-slider"\n      title="Stroke Opacity"\n      value="1"\n      min="0"\n      max="1"\n      precision="2">\n    </bx-slider>\n  </section>\n\n  <section id="width-section">\n    <h2 id="width-section-heading">Width</h2>\n\n    <bx-slider\n      id="width-slider"\n      title="Stroke width"\n      value="1"\n      min="0"\n      precision="0">\n    </bx-slider>\n\n    <bx-checkbox\n      id="non-scaling-stroke-checkbox"\n      label="Non-scaling stroke">\n    </bx-checkbox>\n  </section>\n\n  <section id="line-cap-section">\n    <h2 id="line-cap-section-heading">Line Cap</h2>\n\n    <div id="line-cap-buttons" class="buttons">\n      <bx-button\n        id="butt-line-cap-button"\n        value="butt"\n        icon="cap-butt"\n        iconsize="30"\n        title="Butt cap"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="round-line-cap-button"\n        value="round"\n        icon="cap-round"\n        iconsize="30"\n        title="Round cap"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="square-line-cap-button"\n        value="square"\n        icon="cap-square"\n        iconsize="30"\n        title="Square cap"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n\n  <section id="line-join-section">\n    <h2 id="line-join-section-heading">Line Join</h2>\n\n    <div id="line-join-buttons" class="buttons">\n      <bx-button\n        id="miter-line-join-button"\n        value="miter"\n        icon="join-miter"\n        iconsize="30"\n        title="Miter Join"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="round-line-join-button"\n        value="round"\n        icon="join-round"\n        iconsize="30"\n        title="Round Join"\n        skin="iconic">\n      </bx-button>\n\n      <bx-button\n        id="bevel-line-join-button"\n        value="bevel"\n        icon="join-bevel"\n        iconsize="30"\n        title="Bevel Join"\n        skin="iconic">\n      </bx-button>\n    </div>\n  </section>\n',c=function(e){
function c(){$traceurRuntime.superConstructor(c).apply(this,arguments)}return $traceurRuntime.createClass(c,{
createdCallback:function(){var e=this;this._update200Th=r(this._update,200,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=u;
var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=this.attributes[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;this.attributeChangedCallback(m.name)}}catch(b){d=!0,h=b}finally{try{
c||null==f["return"]||f["return"]()}finally{if(d)throw h}}this["#opacity-slider"].addEventListener("changestart",function(){
return e._onOpacitySliderChangeStart()}),this["#width-slider"].addEventListener("changestart",function(){
return e._onWidthSliderChangeStart()}),this["#non-scaling-stroke-checkbox"].addEventListener("change",function(){
return e._onNonScalingStrokeCheckboxChange()}),this["#line-cap-buttons"].addEventListener("click",function(t){
return e._onLineCapButtonsClick(t)}),this["#line-join-buttons"].addEventListener("click",function(t){
return e._onLineJoinButtonsClick(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this["#paint-section"].enabled=!0,this._toggleHuds(),
this._update(),body.addEventListener("toolchange",this._toolChangeListener=function(){
e._toggleHuds()}),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){this["#paint-section"].enabled=!1,
this._toggleHuds(),body.removeEventListener("toolchange",this._toolChangeListener),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onSelectedElementsChange:function(){this._update200Th()},_onSelectedTextRangeChange:function(){
this._update200Th()},_onArtboardMutation:function(e){this._update200Th()},_onOpacitySliderChangeStart:function(){
var e=this;body.canvas.undoManager.checkpoint("Stroke opacity");var t=body.canvas,r=t.selectedElements,a=t.selectedTextRange;
i(a);var s,o,l=n("stroke-opacity",r,a);l[0]||null;this._isChangingOpacitySlider=!0,
this["#opacity-slider"].addEventListener("change",s=function(){var t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=l[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;
s.style.strokeOpacity=e["#opacity-slider"].value}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}e["#opacity-slider"].mixed=!1}),this["#opacity-slider"].addEventListener("changeend",o=function(){
e["#opacity-slider"].removeEventListener("change",s),e["#opacity-slider"].removeEventListener("changeend",o),
e._isChangingOpacitySlider=!1})},_onWidthSliderChangeStart:function(){var e=this;body.canvas.undoManager.checkpoint("Stroke width");
var t=body.canvas,r=t.selectedElements,l=t.selectedTextRange;i(l);var u,c,d=n("stroke-width",r,l);
this._isChangingWidthSlider=!0,this["#width-slider"].addEventListener("change",u=function(){
var t=!0,n=!1,i=void 0;try{for(var r=void 0,l=d[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){
var u=r.value,c=a(u,body.canvas.masterArtboard),h=s.fromSVGMatrix(c),v=h.scaleX,f=h.scaleY,m=(o(v)+o(f))/2,b=e["#width-slider"].value/m;
u.style.strokeWidth=b+""}}catch(g){n=!0,i=g}finally{try{t||null==l["return"]||l["return"]();
}finally{if(n)throw i}}e["#width-slider"].mixed=!1}),this["#width-slider"].addEventListener("changeend",c=function(){
e["#width-slider"].removeEventListener("change",u),e["#width-slider"].removeEventListener("changeend",c),
e._isChangingWidthSlider=!1})},_onNonScalingStrokeCheckboxChange:function(){body.canvas.undoManager.checkpoint("Non-scaling stroke");
var e=body.canvas,t=e.selectedElements,r=e.selectedTextRange;i(r);var a=n("vector-effect",t,r),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=a[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;
this["#non-scaling-stroke-checkbox"].checked?d.style.vectorEffect="non-scaling-stroke":d.style.vectorEffect=null;
}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l;
}}},_onLineCapButtonsClick:function(e){if("bx-button"===e.target.localName&&0===e.button){
var t=e.target,r=t.pressed,a=t.mixed,s=t.value;if(r!==!0||a!==!1){body.canvas.undoManager.checkpoint("Line cap");
var o=body.canvas,l=o.selectedElements,u=o.selectedTextRange;i(u);var c=n("stroke-linecap",l,u),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var b=f.value;
b.style.strokeLinecap=s}}catch(g){h=!0,v=g}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}}}},_onLineJoinButtonsClick:function(e){if("bx-button"===e.target.localName&&0===e.button){
var t=e.target,r=t.pressed,a=t.mixed,s=t.value;if(r!==!0||a!==!1){body.canvas.undoManager.checkpoint("Line join");
var o=body.canvas,l=o.selectedElements,u=o.selectedTextRange;i(u);var c=n("stroke-linejoin",l,u),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var b=f.value;
b.style.strokeLinejoin=s}}catch(g){h=!0,v=g}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}}}},_update:function(){this._updateOpacitySection(),this._updateWidthSection(),
this._updateLineCapSection(),this._updateLineJoinSection()},_updateOpacitySection:function(){
if(!this._isChangingOpacitySlider){var e=body.canvas,i=e.selectedElements,r=e.selectedTextRange,a=n("stroke-opacity",i,r),s=a[0]||null;
if(null===s?this["#opacity-section-heading"].disabled=!0:this["#opacity-section-heading"].disabled=!1,
null===s)this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1;else{
this["#opacity-slider"].disabled=!1;var o=l(getComputedStyle(s).strokeOpacity);o=t(o,2);
var u=!1,c=!0,d=!1,h=void 0;try{for(var v=void 0,f=a[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;if(m!==s){var b=t(l(getComputedStyle(m).strokeOpacity),2);b!==o&&(u=!0);
}}}catch(g){d=!0,h=g}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}this["#opacity-slider"].value=o,this["#opacity-slider"].mixed=u}}},_updateWidthSection:function(){
if(!this._isChangingWidthSlider){var e=body.canvas,t=e.selectedElements,i=e.selectedTextRange,r=n("stroke-width",t,i),a=r[0]||null;
if(null===a?this["#width-section-heading"].disabled=!0:this["#width-section-heading"].disabled=!1,
null===a)this["#width-slider"].value=0,this["#width-slider"].disabled=!0,this["#width-slider"].mixed=!1;else{
var s=this._getComputedStrokeWidth(a),o=!1,l=!0,u=!1,c=void 0;try{for(var d=void 0,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;if(v!==a){var f=this._getComputedStrokeWidth(v);if(f!==s){o=!0;break;
}}}}catch(m){u=!0,c=m}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c;
}}this["#width-slider"].value=s,this["#width-slider"].disabled=!1,this["#width-slider"].mixed=o;
}if(null===a)this["#non-scaling-stroke-checkbox"].disabled=!0,this["#non-scaling-stroke-checkbox"].checked=!1,
this["#non-scaling-stroke-checkbox"].mixed=!1;else{var b=getComputedStyle(a).vectorEffect,g=!1,p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=r[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){var S=x.value;
if(S!==a){var C=getComputedStyle(S).vectorEffect;if(C!==b){g=!0;break}}}}catch(E){
y=!0,_=E}finally{try{p||null==w["return"]||w["return"]()}finally{if(y)throw _}}this["#non-scaling-stroke-checkbox"].disabled=!1,
this["#non-scaling-stroke-checkbox"].checked="non-scaling-stroke"===b,this["#non-scaling-stroke-checkbox"].mixed=g;
}}},_updateLineCapSection:function(){var e=body.canvas,t=e.selectedElements,i=e.selectedTextRange,r=n("stroke-linecap",t,i),a=r[0]||null;
null===a?this["#line-cap-section-heading"].disabled=!0:this["#line-cap-section-heading"].disabled=!1;
var s=[this["#butt-line-cap-button"],this["#round-line-cap-button"],this["#square-line-cap-button"]];
if(null===a){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h.disabled=!0,h.pressed=!1,h.mixed=!1}}catch(v){l=!0,u=v}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else{var f=!0,m=!1,b=void 0;
try{for(var g=void 0,p=s[Symbol.iterator]();!(f=(g=p.next()).done);f=!0){var y=g.value;
y.disabled=!1}}catch(_){m=!0,b=_}finally{try{f||null==p["return"]||p["return"]()}finally{
if(m)throw b}}var x=getComputedStyle(a).strokeLinecap,w=!1,S=!0,C=!1,E=void 0;try{
for(var k=void 0,A=r[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var T=k.value;
if(T!==a){var L=getComputedStyle(T).strokeLinecap;if(L!==x){w=!0;break}}}}catch(M){
C=!0,E=M}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E}}var P=!0,R=!1,j=void 0;
try{for(var O=void 0,V=s[Symbol.iterator]();!(P=(O=V.next()).done);P=!0){var D=O.value;
D.value===x?(D.pressed=!0,D.mixed=w):(D.pressed=!1,D.mixed=!1)}}catch(G){R=!0,j=G;
}finally{try{P||null==V["return"]||V["return"]()}finally{if(R)throw j}}}},_updateLineJoinSection:function(){
var e=body.canvas,t=e.selectedElements,i=e.selectedTextRange,r=n("stroke-linejoin",t,i),a=r[0]||null;
null===a?this["#line-join-section-heading"].disabled=!0:this["#line-join-section-heading"].disabled=!1;
var s=[this["#miter-line-join-button"],this["#round-line-join-button"],this["#bevel-line-join-button"]];
if(null===a){var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h.disabled=!0,h.pressed=!1,h.mixed=!1}}catch(v){l=!0,u=v}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}}else{var f=!0,m=!1,b=void 0;
try{for(var g=void 0,p=s[Symbol.iterator]();!(f=(g=p.next()).done);f=!0){var y=g.value;
y.disabled=!1}}catch(_){m=!0,b=_}finally{try{f||null==p["return"]||p["return"]()}finally{
if(m)throw b}}var x=getComputedStyle(a).strokeLinejoin,w=!1,S=!0,C=!1,E=void 0;try{
for(var k=void 0,A=r[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var T=k.value;
if(T!==a){var L=getComputedStyle(T).strokeLinejoin;if(L!==x){w=!0;break}}}}catch(M){
C=!0,E=M}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E}}var P=!0,R=!1,j=void 0;
try{for(var O=void 0,V=s[Symbol.iterator]();!(P=(O=V.next()).done);P=!0){var D=O.value;
D.value===x?(D.pressed=!0,D.mixed=w):(D.pressed=!1,D.mixed=!1)}}catch(G){R=!0,j=G;
}finally{try{P||null==V["return"]||V["return"]()}finally{if(R)throw j}}}},_toggleHuds:function(){
"edit-tool"===body.currentTool.id&&body.currentPanel&&"stroke-panel"===body.currentPanel.id?(body.canvas.enableHud("linear-gradient-stroke-hud"),
body.canvas.enableHud("radial-gradient-stroke-hud"),body.canvas.enableHud("pattern-stroke-hud")):(body.canvas.disableHud("linear-gradient-stroke-hud"),
body.canvas.disableHud("radial-gradient-stroke-hud"),body.canvas.disableHud("pattern-stroke-hud"));
},_getComputedStrokeWidth:function(e){var n=a(e,body.canvas.masterArtboard),i=s.fromSVGMatrix(n),r=i.scaleX,u=i.scaleY,c=(o(r)+o(u))/2,d=c*l(getComputedStyle(e).strokeWidth);
return d=t(d,3)}},{},e)}(HTMLElement),d=e("bx-strokecontrols",c);return{get default(){
return d}}}),System.registerModule("elements/bx-svgartboard",[],function(){"use strict";
var e=System.get("utils/element").registerElement,t=System.get("utils/reflect"),n=t.createReflectedSVGLength,i=t.createReflectedSVGRect,r=t.createReflectedSVGPreserveAspectRatio,a=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._x=n(this,"x"),this._y=n(this,"y"),this._width=n(this,"width"),
this._height=n(this,"height"),this._viewBox=i(this,"viewBox"),this._preserveAspectRatio=r(this,"preserveAspectRatio");
},get contentType(){return"svg"},get x(){return this._x},get y(){return this._y},
get width(){return this._width},get height(){return this._height},get viewBox(){return this._viewBox;
},get preserveAspectRatio(){return this._preserveAspectRatio}},{},e)}(SVGGElement),s=e("g","bx-svgartboard",a);
return{get default(){return s}}}),System.registerModule("elements/bx-switch",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t='\n  <style>\n    @import url("stylesheets/bx-switch.css");\n  </style>\n\n  <main>\n    <div id="track"></div>\n\n    <svg id="thumb" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">\n      <ellipse cx="50" cy="50" rx="50" ry="50"></ellipse>\n    </svg>\n  </main>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=t;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},attachedCallback:function(){var e=this;this.parentElement.addEventListener("click",this._parentMouseDownListener=function(t){
e._onParentElementClick(t)})},detachedCallback:function(){this.parentElement.removeEventListener("click",this._parentMouseDownListener);
},get toggled(){return!!this.hasAttribute("toggled")},set toggled(e){e?this.setAttribute("toggled",""):this.removeAttribute("toggled");
},get mixed(){return!!this.hasAttribute("mixed")},set mixed(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed");
},get disabled(){return this.hasAttribute("disabled")},set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled");
},_onParentElementClick:function(e){if(!this.disabled){var t=[{left:"0px"},{left:this.clientWidth-this["#thumb"].clientWidth+"px"
}];this["#thumb"].animate(this.toggled?t.reverse():t,{duration:100,iterations:1,delay:0
}),this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("change"))}}},{},e);
}(HTMLElement),i=e("bx-switch",n);return{get default(){return i}}}),System.registerModule("elements/bx-symbolartboard",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/reflect"),n=(t.createReflectedSVGLength,
t.createReflectedSVGRect),i=t.createReflectedSVGPreserveAspectRatio,r=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._viewBox=n(this,"viewBox"),this._preserveAspectRatio=i(this,"preserveAspectRatio");
},get contentType(){return"symbol"},get viewBox(){return this._viewBox},get preserveAspectRatio(){
return this._preserveAspectRatio}},{},e)}(SVGGElement),a=e("g","bx-symbolartboard",r);
return{get default(){return a}}}),System.registerModule("elements/bx-symbolslist",[],function(){
"use strict";System.get("elements/bx-symbolslistitem"),System.get("elements/bx-filterinput");
var e=System.get("utils/artwork-rasterization"),t=e.getSymbolThumbnails,n=e.rasterizeArtwork,i=System.get("utils/bbox").getClientBBox,r=System.get("utils/math").round,a=System.get("utils/rect"),s=a.combineRects,o=a.transformRect,l=System.get("utils/time"),u=l.debounce,c=l.sleep,d=System.get("utils/transform-general").getTransformToElement,h=System.get("utils/element"),v=h.createElement,f=h.registerElement,m=h.insertElementAfter,b=h.getElementIndex,g=h.sortByDomPosition,p=System.get("classes/shortcut")["default"],y=Number.parseFloat,_=(Object.keys,
'\n  <style>@import url("stylesheets/scrollbars.css");</style>\n  <style>@import url("stylesheets/bx-symbolslist.css");</style>\n\n  <main>\n    <header>\n      <h2>Symbols</h2>\n\n      <bx-button\n        id="delete-symbol-button"\n        skin="iconic"\n        icon="minus"\n        title="Delete symbol"\n        iconsize="15">\n      </bx-button>\n\n      <bx-button\n        id="create-symbol-button"\n        title="Create new symbol"\n        skin="iconic"\n        icon="plus"\n        iconsize="15">\n      </bx-button>\n    </header>\n\n    <div id="items"></div>\n    <div id="placeholder">No symbols found.</div>\n    <div id="drag-separator"></div>\n    <bx-filterinput id="filter-input" placeholder="Filter symbols"></bx-filterinput>\n  </main>\n'),x=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this._update2000Db=u(this._update,2e3,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("keydown",function(t){
return e._onKeyDown(t)}),this["#items"].addEventListener("focusin",function(t){return e._onItemsFocusIn(t);
}),this["#items"].addEventListener("rename",function(t){return e._onItemRename(t);
}),this["#items"].addEventListener("dragstart",function(t){return e._onItemDragStart(t);
}),this["#delete-symbol-button"].addEventListener("click",function(t){return e._onDeleteSymbolButtonClick(t);
}),this["#create-symbol-button"].addEventListener("click",function(t){return e._onCreateSymbolButtonClick(t);
}),this["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput();
})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled===!0?this._onEnabled():this._onDisabled());
},get enabled(){return!!this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._update(),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
"id"===t.detail.attributeName&&"symbol"===t.detail.target.localName?e._update():t.detail.addedNodes[0]&&"symbol"===t.detail.addedNodes[0].localName?e._update():e._update2000Db();
})},_onDisabled:function(){body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onDeleteSymbolButtonClick:function(e){0===e.button&&this._maybeDeleteHighlightedItem();
},_onCreateSymbolButtonClick:function(e){if(0===e.button){body.canvas.undoManager.checkpoint("Create symbol");
var t=body.canvas.generateUniqueID("symbol"),a=v("bx-symbolslistitem");a.symbolID=t,
this["#items"].append(a);var l=!0,u=!1,h=void 0;try{for(var f=void 0,b=this["#items"].children[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){
var p=f.value;p.highlighted=p===a}}catch(y){u=!0,h=y}finally{try{l||null==b["return"]||b["return"]();
}finally{if(u)throw h}}body.canvas.selectedElements.length>0&&n(body.canvas.extractArtworkWithSelectedElements()).then(function(e){
a.thumbnail=e}),c(100).then(function(){return a.focus()});var _=body.canvas.defs.querySelectorAll("symbol"),x=_[_.length-1],w=v("svg:symbol");
if(x?m(w,x):body.canvas.defs.append(w),0===body.canvas.selectedElements.length)w.setAttribute("id",t),
w.setAttribute("viewBox","0 0 100 100");else{var S=s(function(){var e=0,t=[],n=!0,r=!1,a=void 0;
try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;t[e++]=i(l)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}());S=o(S,body.canvas.currentArtboard.getCTM().inverse());
var C=-S.x,E=-S.y,k=r(S.width,4),A=r(S.height,4),T=!0,L=!1,M=void 0;try{for(var P=void 0,R=g(body.canvas.selectedElements)[Symbol.iterator]();!(T=(P=R.next()).done);T=!0){
var j=P.value,O=new SVGMatrix;O.translateSelf(C,E),O.multiplySelf(d(j,body.canvas.currentArtboard)),
j.setAttribute("transform",O),w.append(j)}}catch(V){L=!0,M=V}finally{try{T||null==R["return"]||R["return"]();
}finally{if(L)throw M}}w.setAttribute("id",t),w.setAttribute("viewBox","0 0 "+k+" "+A),
body.canvas.selectedElements=[],body.canvas.selectedTextRange=null,body.canvas.currentContainer=null;
}}},_onItemsFocusIn:function(e){var t=e.target,n=!0,i=!1,r=void 0;try{for(var a=void 0,s=this["#items"].children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;o.highlighted=o===t}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}this["#delete-symbol-button"].disabled=!1},_onItemRename:function(e){
body.canvas.undoManager.checkpoint("Rename symbol");var t=e.target,n=e.detail,i=n.oldID,r=n.newID;
t.symbolID=r;for(var a=document.createNodeIterator(body.canvas.artboards,NodeFilter.SHOW_ELEMENT),s=null;s=a.nextNode();)"symbol"===s.localName&&s.id===i?s.setAttribute("id",r):"g"===s.localName&&"symbol"===s.contentType?s.setAttribute("id",r):"use"===s.localName&&s.href.baseVal==="#"+i&&s.setAttribute("href","#"+r);
},_onItemDragStart:function(e){var t,n,i,r=this,a=e.target,s=($traceurRuntime.spread(this["#items"].children),
y(getComputedStyle(this["#drag-separator"]).height)),o=b(a),l=null;window.addEventListener("dragover",t=function(e){
var t=r._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(t&&"bx-symbolslistitem"===t.localName){
var n=t,i=n.getBoundingClientRect();r["#drag-separator"].hidden=!1,r["#drag-separator"].style.width=i.width+"px",
r["#drag-separator"].style.left=i.x+"px",e.clientY<i.y+i.height/2?(r["#drag-separator"].style.top=i.y-s/2+"px",
l=b(n)):(r["#drag-separator"].style.top=i.y+i.height-s/2+"px",l=b(n)+1)}else r["#drag-separator"].hidden=!0,
l=null}),this["#items"].addEventListener("dragend",i=function(e){if(r["#items"].removeEventListener("dragover",t),
r["#items"].removeEventListener("dragleave",n),r["#items"].removeEventListener("dragend",i),
r["#drag-separator"].hidden=!0,null!==l&&o!==l&&o!==l-1){a.style.display="none",r["#items"].insertBefore(a,r["#items"].children[l]),
c(50).then(function(){a.style.display=null,a.focus()}),body.canvas.undoManager.checkpoint("Reorder symbols");
var s=$traceurRuntime.spread(body.canvas.defs.querySelectorAll("symbol")),u=s.find(function(e){
return e.id===a.symbolID});s[l]?s[l].parentElement.insertBefore(u,s[l]):body.canvas.defs.append(u);
}})},_onFilterInputInput:function(){var e=this["#filter-input"].value,t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=this["#items"].children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.hidden=("#"+s.symbolID.toLowerCase()).includes(e.toLowerCase())===!1;
}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]()}finally{if(n)throw i;
}}this._updatePlaceholderVisibility()},_onKeyDown:function(e){var t=p.fromEvent(e);
t.matches("Backspace")?null!==this["#items"].querySelector(":focus")&&(e.preventDefault(),
e.stopPropagation(),this._maybeDeleteHighlightedItem()):t.matches("ArrowUp")?(e.preventDefault(),
e.stopPropagation(),this._focusPreviousItem()):t.matches("ArrowDown")&&(e.preventDefault(),
e.stopPropagation(),this._focusNextItem())},_update:function(){var e=this;if(this._updating)return void c(1e3).then(function(){
return e._update()});this._updating=!0;var n=body.canvas.masterArtboard.querySelectorAll("symbol"),i=$traceurRuntime.spread(this["#items"].children),r=0;
if(i.length>n.length)for(var a=n.length;a<i.length;a+=1)i[a].remove();else i.length<n.length&&(this["#create-symbol-button"].disabled=!0,
this["#delete-symbol-button"].disabled=!0);var s=function(t){for(var i=$traceurRuntime.spread(e["#items"].children),a=e["#items"].querySelector("[highlighted]"),l=a?a.symbolID:null,u=e["#filter-input"].value;t.timeRemaining()>10&&r<n.length;){
var c=n[r],d=i[r];d||(d=v("bx-symbolslistitem"),e["#items"].append(d)),d.symbolID=c.id,
d.hidden=("#"+d.symbolID.toLowerCase()).includes(u.toLowerCase())===!1,d.highlighted=c.id===l,
r+=1}e._updatePlaceholderVisibility(),r<n.length?requestIdleCallback(s):(e._updateButtons(),
o())},o=function(){var n=body.canvas.extractArtwork(),i={},r=!0,a=!1,s=void 0;try{
for(var o=void 0,l=e["#items"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[u.symbolID]=u}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}t(n,function(e,t){i[e]&&(i[e].thumbnail=t)},function(){e._updating=!1;
})};requestIdleCallback(s)},_updateButtons:function(){this["#create-symbol-button"].disabled=!1,
this["#delete-symbol-button"].disabled=null===this["#items"].querySelector("[highlighted]");
},_updatePlaceholderVisibility:function(){this["#placeholder"].hidden=null!==this["#items"].querySelector(":not([hidden])");
},_focusPreviousItem:function(){var e=this._shadowRoot.querySelector(":focus"),t=this._getPreviousVisibleItem(e);
t&&t.focus()},_focusNextItem:function(){var e=this._shadowRoot.querySelector(":focus"),t=this._getNextVisibleItem(e);
t&&t.focus()},_maybeDeleteHighlightedItem:function(){var e=this,t=this["#items"].querySelector("[highlighted]");
if(t){var n=t.symbolID,i=$traceurRuntime.spread(body.canvas.artboards.querySelectorAll("use")).filter(function(e){
return e.href.baseVal==="#"+n}),r=function(){body.canvas.undoManager.checkpoint("Delete symbol"),
"symbol"===body.canvas.currentArtboard.contentType&&body.canvas.currentArtboard.id===n&&body.canvas.editSymbolEnd(!1);
var i=e._getNextVisibleItem(t),r=e._getPreviousVisibleItem(t);i?i.focus():r?r.focus():e["#delete-symbol-button"].disabled=!0,
t.remove(),e._updatePlaceholderVisibility();for(var a=document.createNodeIterator(body.canvas.artboards,NodeFilter.SHOW_ELEMENT),s=null,o=[];s=a.nextNode();)"symbol"===s.localName&&s.id===n?(s.remove(),
o.push(s)):"use"===s.localName&&s.href.baseVal==="#"+n&&(s.remove(),o.push(s));body.canvas.selectedElements=body.canvas.selectedElements.filter(function(e){
return!o.includes(e)})};if(0===i.length)r();else{var a={message:"Delete the sybmol with "+i.length+" instance(s)?",
buttons:["Cancel","Delete"]};body.bridge.postMessage("showMessageBox",a,function(e){
1===e&&r()})}}},_assertItemsLength:function(e){var t=this["#items"].childElementCount;
if(e>t)for(var n=t;e>n;n+=1){var i=v("bx-symbolslistitem");this["#items"].append(i);
}else if(t>e)for(var r=t-1;r>=e;r-=1)this["#items"].children[r].remove()},_getPreviousVisibleItem:function(e){
for(;e.previousElementSibling;){if(e.previousElementSibling.hidden===!1)return e.previousElementSibling;
e=e.previousElementSibling}return null},_getNextVisibleItem:function(e){for(;e.nextElementSibling;){
if(e.nextElementSibling.hidden===!1)return e.nextElementSibling;e=e.nextElementSibling;
}return null}},{},e)}(HTMLElement),w=f("bx-symbolslist",x);return{get default(){return w;
}}}),System.registerModule("elements/bx-symbolslistitem",[],function(){"use strict";
System.get("elements/bx-input");var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("classes/shortcut")["default"],r='\n  <style>@import url("stylesheets/bx-symbolslistitem.css");</style>\n\n  <main>\n    <img id="thumbnail"></img>\n    <bx-input id="input" skin="bx-defscontrols"></bx-input>\n  </main>\n',a=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=this;this.tabIndex=0,this.draggable=!0,this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this.addEventListener("dragstart",function(t){
return e._onHostDragStart(t)}),this.addEventListener("dragend",function(t){return e._onHostDragEnd(t);
}),this.addEventListener("keydown",function(t){return e._onHostKeyDown(t)}),this._shadowRoot.addEventListener("dblclick",function(t){
return e._onShadowRootDblClick(t)}),this["#input"].addEventListener("focusin",function(t){
return e._onInputFocusIn(t)}),this["#input"].addEventListener("focusout",function(t){
return e._onInputFocusOut(t)}),this["#input"].addEventListener("keydown",function(t){
return e._onInputKeyDown(t)}),this["#input"].addEventListener("change",function(t){
return e._onInputChange(t)}),this["#input"].addEventListener("confirm",function(){
return e.focus()}),this["#input"].addEventListener("cancel",function(){return e.focus();
}),this["#input"].validate=function(t){return e._validateInputValue(t)}},attributeChangedCallback:function(e){
"symbolid"===e&&this._onSymbolIDAttributeChange()},get symbolID(){return this.hasAttribute("symbolid")?this.getAttribute("symbolid"):null;
},set symbolID(e){e?this.setAttribute("symbolid",e):this.removeAttribute("symbolid");
},get highlighted(){return this.hasAttribute("highlighted")},set highlighted(e){e?this.setAttribute("highlighted",""):this.removeAttribute("highlighted");
},get thumbnail(){return this["#thumbnail"].src},set thumbnail(e){null===e?this["#thumbnail"].src="":this["#thumbnail"].src=e;
},_onSymbolIDAttributeChange:function(){null===this.symbolID?this["#input"].value="":this["#input"].value="#"+this.symbolID;
},_onShadowRootDblClick:function(e){e.target===this["#thumbnail"]?body.canvas.editSymbol(this.symbolID):this["#input"].matches(":focus")===!1&&this["#input"].focus();
},_onHostDragStart:function(e){this._dragImage=t("img"),this._dragImage.id="drag-image",
this._dragImage.src=this["#thumbnail"].src,this._dragImage.style.position="fixed",
this._dragImage.style.transform="translate(9999px, 9999px)",this._dragImage.width=38,
this._dragImage.height=38,this._shadowRoot.append(this._dragImage),e.dataTransfer.setData("text","#"+this.symbolID),
e.dataTransfer.setData("bx-symbolslistitem/symbolID",this.symbolID),e.dataTransfer.setDragImage(this._dragImage,this._dragImage.width/2,this._dragImage.height/2);
},_onHostDragEnd:function(e){this._dragImage.remove()},_onHostKeyDown:function(e){
var t=i.fromEvent(e);t.matches("Enter")&&(this["#input"].focus(),this["#input"].selectAll());
},_onInputFocusIn:function(){this["#input"].style.pointerEvents="auto",this["#input"].selectAll(),
this.draggable=!1,this.setAttribute("inputmode","")},_onInputFocusOut:function(e){
this["#input"].style.pointerEvents="none",this.draggable=!0,this.removeAttribute("inputmode");
},_onInputKeyDown:function(e){var t=i.fromEvent(e);(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),
this.focus())},_onInputChange:function(){var e=this.symbolID,t=this["#input"].value.substring(1);
this.dispatchEvent(new CustomEvent("rename",{bubbles:!0,detail:{oldID:e,newID:t}}));
},_validateInputValue:function(e){var t=/^#[a-z]+[a-z0-9\-_]*$/i.test(e);return t?e==="#"+this.symbolID?!0:null===body.canvas.artboards.querySelector(e):!1;
}},{},e)}(HTMLElement),s=n("bx-symbolslistitem",a);return{get default(){return s}
}}),System.registerModule("elements/bx-texttool",[],function(){"use strict";var e=System.get("utils/element"),t=(e.createElement,
e.registerElement),n=System.get("utils/markup").parseSVG,i=function(e){function t(){
$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("click",this._clickListener=function(t){
return e._onClick(t)})},_onDisabled:function(){body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("click",this._clickListener)},_onClick:function(e){
var t,i,r,a,s,o,l;return $traceurRuntime.asyncWrap(function(u){for(;;)switch(u.state){
case 0:body.canvas.undoManager.checkpoint("Text"),body.canvas.googleFontsManager.importFamily("Roboto"),
t=body.canvas.currentContainer||body.canvas.currentArtboard,i=t.getScreenCTM().inverse(),
r=new SVGPoint(e.clientX,e.clientY),a=r.matrixTransform(i),s='<tspan style="font-size: 16; font-family: Roboto;">Enter your text here</tspan>',
o='<text x="'+a.x+'" y="'+a.y+'" style="white-space: pre;">'+s+"</text>",l=n(o),t.append(l),
body.canvas.selectedElements=[l],body.toggleTool("edit-tool"),u.state=-2;break;default:
return u.end()}},this)}},{},e)}(HTMLElement),r=t("bx-texttool",i);return{get default(){
return r}}}),System.registerModule("elements/bx-transformhud",[],function(){"use strict";
var e=System.get("utils/bbox"),t=e.getUserBBox,n=e.getClientBBox,i=System.get("utils/element").registerElement,r=System.get("utils/event").isMouseMoveIntentional,a=System.get("utils/geometry"),s=a.getRotationAngleFromPoints,o=a.snapRotationAngle,l=System.get("utils/rect"),u=l.transformRect,c=l.combineRects,d=System.get("utils/time"),h=d.sleep,v=d.throttle,f=System.get("utils/transform-reduction").reduceTransform,m=System.get("utils/transform-general"),b=m.getComputedTransformOriginClientPoint,g=m.getTransformToElement,p=m.getElementRotationAngle,y=m.setElementRotationAngle,_=m.skew,x=m.userPointToBBoxPoint,w=System.get("classes/decomposed-transform")["default"],S=System.get("classes/enum")["default"],C=System.get("classes/vector")["default"],E=Math,k=E.abs,A=E.min,T=E.max,L=(E.atan2,
Number.parseFloat),M=12,P=12,R=12,j=10,O=new S("initialStrokeWidth","initialVectorEffect","initialTransforms","initialUserBBox"),V='\n  <style>@import url("stylesheets/bx-transformhud.css");</style>\n\n  <g id="grippies">\n    <g id="scale-grippies">\n      <rect class="grippie" data-position="top"></rect>\n      <rect class="grippie" data-position="left"></rect>\n      <rect class="grippie" data-position="bottom"></rect>\n      <rect class="grippie" data-position="right"></rect>\n      <rect class="grippie" data-position="top-left"></rect>\n      <rect class="grippie" data-position="top-right"></rect>\n      <rect class="grippie" data-position="bottom-left"></rect>\n      <rect class="grippie" data-position="bottom-right"></rect>\n    </g>\n\n    <g id="rotate-grippies">\n      <rect class="grippie" rx="999" data-position="top-left"></rect>\n      <rect class="grippie" rx="999" data-position="top-right"></rect>\n      <rect class="grippie" rx="999" data-position="bottom-left"></rect>\n      <rect class="grippie" rx="999" data-position="bottom-right"></rect>\n    </g>\n\n    <g id="skew-grippies">\n      <rect class="grippie" data-position="top"></rect>\n      <rect class="grippie" data-position="left"></rect>\n      <rect class="grippie" data-position="bottom"></rect>\n      <rect class="grippie" data-position="right"></rect>\n    </g>\n\n    <svg id="origin-grippie" viewBox="0 0 50 50" visibility="hidden">\n      <use href="images/icons.svg#cross" x="0" y="0" width="50" height="50"></use>\n      <rect x="0" y="0" width="50" height="50" style="opacity: 0;"/>\n    </svg>\n  </g>\n',D=function(e){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var e=this;this._scaleGrippiesByPosition={},this._skewGrippiesByPosition={},
this._rotateGrippiesByPosition={},this._scaleStroke=!1,this._scaleRadii=!1,this._preserveAspectRatio=!1,
this._isDraggingRotateGrippie=!1,this._updateGrippies25Th=v(this._updateGrippies,25,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=V;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this["#scale-grippies"].children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var f=d.value;this._scaleGrippiesByPosition[f.getAttribute("data-position")]=f}}catch(m){
u=!0,c=m}finally{try{l||null==h["return"]||h["return"]()}finally{if(u)throw c}}var b=!0,g=!1,p=void 0;
try{for(var y=void 0,_=this["#rotate-grippies"].children[Symbol.iterator]();!(b=(y=_.next()).done);b=!0){
var x=y.value;this._rotateGrippiesByPosition[x.getAttribute("data-position")]=x}}catch(w){
g=!0,p=w}finally{try{b||null==_["return"]||_["return"]()}finally{if(g)throw p}}var S=!0,C=!1,E=void 0;
try{for(var k=void 0,A=this["#skew-grippies"].children[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){
var T=k.value;this._skewGrippiesByPosition[T.getAttribute("data-position")]=T}}catch(L){
C=!0,E=L}finally{try{S||null==A["return"]||A["return"]()}finally{if(C)throw E}}this._shadowRoot.addEventListener("mousedown",function(t){
e._onMouseDown(t)}),this._shadowRoot.addEventListener("dblclick",function(t){e._onDblClick(t);
}),body.getConfig("bx-transformtoolcontrols:scaleStroke").then(function(t){null!==t&&(e._scaleStroke=t);
}),body.getConfig("bx-transformtoolcontrols:scaleRadii").then(function(t){null!==t&&(e._scaleRadii=t);
}),body.getConfig("bx-transformtoolcontrols:preserveAspectRatio").then(function(t){
null!==t&&(e._preserveAspectRatio=t)});var M=!0,P=!1,R=void 0;try{for(var j=void 0,O=this.attributes[Symbol.iterator]();!(M=(j=O.next()).done);M=!0){
var D=j.value;this.attributeChangedCallback(D.name)}}catch(G){P=!0,R=G}finally{try{
M||null==O["return"]||O["return"]()}finally{if(P)throw R}}},attributeChangedCallback:function(e){
"enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"mode"===e&&this._onModeAttributeChange();
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},get mode(){return this.hasAttribute("mode")?this.getAttribute("mode"):"scale"},
set mode(e){this.setAttribute("mode",e)},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),
this._onZoomChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.addEventListener("configchange",this._configChangeListener=function(t){
e._onConfigChange(t)})},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.removeEventListener("configchange",this._configChangeListener);
},_onModeAttributeChange:function(){"scale"===this.mode?(this["#scale-grippies"].style.visibility="visible",
this["#rotate-grippies"].style.visibility="hidden",this["#skew-grippies"].style.visibility="hidden",
this["#origin-grippie"].style.visibility="hidden"):"rotate-and-skew"===this.mode&&(this["#scale-grippies"].style.visibility="hidden",
this["#rotate-grippies"].style.visibility="visible",this["#skew-grippies"].style.visibility="visible",
this["#origin-grippie"].style.visibility="visible"),this._updateGrippies()},_onConfigChange:function(e){
var t=e.detail,n=t.key,i=t.value;"bx-transformtoolcontrols:scaleStroke"===n?this._scaleStroke=i||!1:"bx-transformtoolcontrols:scaleRadii"===n?this._scaleRadii=i||!1:"bx-transformtoolcontrols:preserveAspectRatio"===n&&(this._preserveAspectRatio=i||!1);
},_onSelectedElementsChange:function(){0===body.canvas.selectedElements.length?this["#grippies"].style.display="none":this["#grippies"].style.display="block",
this._updateGrippies()},_onArtboardMutation:function(e){this._updateGrippies25Th();
},_onZoomChange:function(){this._updateGrippies25Th()},_onMouseDown:function(e){var t,n,i=this,a=e.target;
window.addEventListener("mousemove",t=function(n){r(e,n)&&(window.removeEventListener("mousemove",t),
i._onDragStart(a,e,n))}),window.addEventListener("mouseup",n=function(e){window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n)})},_onDblClick:function(e){var t=e.target.parentElement;
t===this["#rotate-grippies"]?this._onRotateGrippieDblClick(e):t===this["#skew-grippies"]?this._onSkewGrippieDblClick(e):t===this["#origin-grippie"]&&this._onOriginGrippieDblClick(e);
},_onDragStart:function(e,t){var n=e.parentElement;n===this["#scale-grippies"]?this._onScaleGrippieDragStart(t):n===this["#rotate-grippies"]?this._onRotateGrippieDragStart(t):n===this["#skew-grippies"]?this._onSkewGrippieDragStart(t):n===this["#origin-grippie"]&&this._onOriginGrippieDragStart(t);
},_onScaleGrippieDragStart:function(e){var i,r,a=this,s=$traceurRuntime.spread(body.canvas.selectedElements),o=e.path[0].getAttribute("data-position");
body.canvas.undoManager.checkpoint("Scale Transform"),body.canvas.outlinesHud.enabled=!1;
var l=!0,u=!1,d=void 0;try{for(var h=void 0,v=s[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var m=h.value;if(this._scaleStroke===!1){var b=m.getScreenCTM(),g=w.fromSVGMatrix(b),p=g.scaleX,y=g.scaleY,_="left"===o||"right"===o?p:y,x=getComputedStyle(m);
m[O.initialStrokeWidth]=m.style.strokeWidth,m[O.initialVectorEffect]=m.style.vectorEffect;
var S=k(_)*L(x.strokeWidth);m.style.strokeWidth=S,m.style.vectorEffect="non-scaling-stroke";
}}}catch(C){u=!0,d=C}finally{try{l||null==v["return"]||v["return"]()}finally{if(u)throw d;
}}if(1===s.length){var E=s[0],A=t(E),T=E.getScreenCTM(),M=T.inverse(),P=SVGMatrix.fromMatrix(E.transform.baseVal.consolidate().matrix),R=new SVGPoint(e.clientX,e.clientY);
R=R.matrixTransform(M),window.addEventListener("mousemove",i=function(e){var t=new SVGPoint(e.clientX,e.clientY);
t=t.matrixTransform(M);var n=t.x-R.x,i=t.y-R.y,r=a._scaleParams(n,i,A,o),s=r.centerX,l=r.centerY,u=r.scaleX,c=r.scaleY,d=-s*(u-1),h=-l*(c-1),v=SVGMatrix.fromMatrix(P);
v.translateSelf(d,h),v.scaleNonUniformSelf(u,c),E.setAttribute("transform",v.toString());
})}else if(s.length>1){var j=function(){var e=0,t=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t[e++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}(),V=c(j),D=!0,G=!1,I=void 0;try{for(var N=void 0,B=s[Symbol.iterator]();!(D=(N=B.next()).done);D=!0){
var U=N.value,z=U.getScreenCTM(),H=z.inverse(),F=SVGMatrix.fromMatrix(U.transform.baseVal.consolidate().matrix);
U[O.initialTransforms]={clientToUserTransform:z,userToClientTransform:H,userTransform:F
}}}catch(q){G=!0,I=q}finally{try{D||null==B["return"]||B["return"]()}finally{if(G)throw I;
}}window.addEventListener("mousemove",i=function(t){var n=!0,i=!1,r=void 0;try{for(var l=void 0,u=s[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){
var c=l.value,d=t.clientX-e.clientX,h=t.clientY-e.clientY,v=c[O.initialTransforms],f=v.clientToUserTransform,m=v.userToClientTransform,b=v.userTransform,g=a._scaleParams(d,h,V,o),p=g.centerX,y=g.centerY,_=g.scaleX,x=g.scaleY,w=-p*(_-1),S=-y*(x-1),C=SVGMatrix.fromMatrix(b);
C.multiplySelf(m),C.translateSelf(w,S),C.scaleNonUniformSelf(_,x),C.multiplySelf(f),
c.setAttribute("transform",C.toString())}}catch(E){i=!0,r=E}finally{try{n||null==u["return"]||u["return"]();
}finally{if(i)throw r}}})}window.addEventListener("mouseup",r=function(e){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r);var t=!0,n=!1,o=void 0;try{for(var l=void 0,u=s[Symbol.iterator]();!(t=(l=u.next()).done);t=!0){
var c=l.value;a._scaleStroke===!1&&(c.style.strokeWidth=c[O.initialStrokeWidth],c.style.vectorEffect=c[O.initialVectorEffect]),
f(c,a._scaleStroke,a._scaleRadii)}}catch(d){n=!0,o=d}finally{try{t||null==u["return"]||u["return"]();
}finally{if(n)throw o}}body.canvas.outlinesHud.enabled=!0})},_onRotateGrippieDragStart:function(e){
var t=this,n=$traceurRuntime.spread(body.canvas.selectedElements);if(body.canvas.undoManager.checkpoint("Rotate Transform"),
body.canvas.outlinesHud.enabled=!1,1===n.length){var i,r,a=n[0],l=p(a),u=new SVGPoint(e.clientX,e.clientY),c=b([a]);
this._isDraggingRotateGrippie=!0,window.addEventListener("mousemove",i=function(e){
var t=new SVGPoint(e.clientX,e.clientY),n=s(c,u,t),i=l+n;body.modKeys.shift&&(i=o(i,15)),
y(a,i)}),window.addEventListener("mouseup",r=function(e){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",r),f(a,!0,!0),t._isDraggingRotateGrippie=!1,
body.canvas.outlinesHud.enabled=!0})}else{var d,h,v=b(n),m=new SVGPoint(e.clientX,e.clientY),g=!0,_=!1,x=void 0;
try{for(var w=void 0,S=n[Symbol.iterator]();!(g=(w=S.next()).done);g=!0){var C=w.value,E=SVGMatrix.fromMatrix(C.transform.baseVal.consolidate().matrix),k=C.getScreenCTM(),A=k.inverse();
C[O.initialTransforms]={clientToUserTransform:k,userToClientTransform:A,userTransform:E
}}}catch(T){_=!0,x=T}finally{try{g||null==S["return"]||S["return"]()}finally{if(_)throw x;
}}this._isDraggingRotateGrippie=!0,window.addEventListener("mousemove",d=function(e){
var t=!0,i=!1,r=void 0;try{for(var a=void 0,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){
var u=a.value,c=u[O.initialTransforms],d=c.clientToUserTransform,h=c.userToClientTransform,f=c.userTransform,b=new SVGPoint(e.clientX,e.clientY),g=s(v,m,b);
body.modKeys.shift&&(g=o(g,15));var p=SVGMatrix.fromMatrix(f);p.multiplySelf(h),p.rotateSelf(g,v.x,v.y),
p.multiplySelf(d),u.setAttribute("transform",p.toString())}}catch(y){i=!0,r=y}finally{
try{t||null==l["return"]||l["return"]()}finally{if(i)throw r}}}),window.addEventListener("mouseup",h=function(e){
window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h);
var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;f(l,!0,!0)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}t._isDraggingRotateGrippie=!1,body.canvas.outlinesHud.enabled=!0;
})}},_onSkewGrippieDragStart:function(e){var t,n,i,r=$traceurRuntime.spread(body.canvas.selectedElements),a=e.path[0].getAttribute("data-position");
i="top"===a||"bottom"===a?"horizontal":"vertical",body.canvas.undoManager.checkpoint("Skew Transform"),
body.canvas.outlinesHud.enabled=!1;var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;h[O.initialStrokeWidth]=h.style.strokeWidth,h[O.initialVectorEffect]=h.style.vectorEffect;
var v=h.getScreenCTM(),m=w.fromSVGMatrix(v),g=m.scaleX,p=m.scaleY,y=(g+p)/2,x=getComputedStyle(h),S=k(y)*L(x.strokeWidth);
h.style.strokeWidth=S,h.style.vectorEffect="non-scaling-stroke"}}catch(C){l=!0,u=C;
}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}if(1===r.length){
var E=r[0],A=E.getScreenCTM(),T=A.inverse(),M=SVGMatrix.fromMatrix(E.transform.baseVal.consolidate().matrix),P=new SVGPoint(e.clientX,e.clientY);
P=P.matrixTransform(T);var R=b(r);R=R.matrixTransform(T),window.addEventListener("mousemove",t=function(e){
var t=body.modKeys,n=(t.ctrl,t.alt,t.shift,new SVGPoint(e.clientX,e.clientY));n=n.matrixTransform(T);
var r=s(R,P,n),a=SVGMatrix.fromMatrix(M);a="horizontal"===i?_(a,-r,0,R.x,R.y):_(a,0,r,R.x,R.y),
E.setAttribute("transform",a.toString())})}else if(r.length>1){var j=new SVGPoint(e.clientX,e.clientY),V=b(r),D=!0,G=!1,I=void 0;
try{for(var N=void 0,B=r[Symbol.iterator]();!(D=(N=B.next()).done);D=!0){var U=N.value,z=U.getScreenCTM(),H=z.inverse(),F=SVGMatrix.fromMatrix(U.transform.baseVal.consolidate().matrix);
U[O.initialTransforms]={clientToUserTransform:z,userToClientTransform:H,userTransform:F
}}}catch(q){G=!0,I=q}finally{try{D||null==B["return"]||B["return"]()}finally{if(G)throw I;
}}window.addEventListener("mousemove",t=function(e){var t=!0,n=!1,a=void 0;try{for(var o=void 0,l=r[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){
var u=o.value,c=u[O.initialTransforms],d=c.clientToUserTransform,h=c.userToClientTransform,v=c.userTransform,f=new SVGPoint(e.clientX,e.clientY),m=s(V,j,f),b=SVGMatrix.fromMatrix(v);
b.multiplySelf(h),b="horizontal"===i?_(b,-m,0,V.x,V.y):_(b,0,m,V.x,V.y),b.multiplySelf(d),
u.setAttribute("transform",b.toString())}}catch(g){n=!0,a=g}finally{try{t||null==l["return"]||l["return"]();
}finally{if(n)throw a}}})}window.addEventListener("mouseup",n=function(e){window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n);var i=!0,a=!1,s=void 0;try{for(var o=void 0,l=r[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;u.style.strokeWidth=u[O.initialStrokeWidth],u.style.vectorEffect=u[O.initialVectorEffect];
}}catch(c){a=!0,s=c}finally{try{i||null==l["return"]||l["return"]()}finally{if(a)throw s;
}}f(h,!0,!0),body.canvas.outlinesHud.enabled=!0})},_onOriginGrippieDragStart:function(e){
var n,i,r=$traceurRuntime.spread(body.canvas.selectedElements),a=new SVGPoint(e.clientX,e.clientY),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,h=d.getScreenCTM().inverse(),v=t(d);
d[O.initialTransforms]={clientToUserTransform:h},d[O.initialUserBBox]=v}}catch(f){
o=!0,l=f}finally{try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}body.canvas.undoManager.checkpoint("Transform Origin"),
body.canvas.outlinesHud.enabled=!1;var m=b(r);window.addEventListener("mousemove",n=function(e){
var t=new SVGPoint(e.clientX,e.clientY),n=new C(a,t),i=new SVGPoint(m.x+n.x,m.y+n.y),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,h=d[O.initialTransforms].clientToUserTransform,v=d[O.initialUserBBox],f=i.matrixTransform(h),b=x(f,v);
d.setAttribute("data-bx-origin",b.x+" "+b.y)}}catch(g){o=!0,l=g}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}}),window.addEventListener("mouseup",i=function(e){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.canvas.outlinesHud.enabled=!0})},_onRotateGrippieDblClick:function(e){
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=body.canvas.selectedElements[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.removeAttribute("transform")}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},_onSkewGrippieDblClick:function(e){var t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=body.canvas.selectedElements[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.removeAttribute("transform")}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}},_onOriginGrippieDblClick:function(e){var t=!0,n=!1,i=void 0;
try{for(var r=void 0,a=body.canvas.selectedElements[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;s.removeAttribute("data-bx-origin")}}catch(o){n=!0,i=o}finally{try{
t||null==a["return"]||a["return"]()}finally{if(n)throw i}}},_updateGrippies:function(){
"scale"===this.mode?this._updateScaleGrippies():"rotate-and-skew"===this.mode&&(this._updateRotateGrippies(),
this._updateSkewGrippies(),this._isDraggingRotateGrippie===!1&&this._updateOriginGrippie());
},_updateRotateGrippies:function(){var e=P/body.canvas.scale,i=(3/body.canvas.scale,
this._rotateGrippiesByPosition),r=!0,a=!1,s=void 0;try{for(var o=void 0,l=this["#rotate-grippies"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var d=o.value;d.width.baseVal.value=e,d.height.baseVal.value=e}}catch(h){a=!0,s=h;
}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}if(1===body.canvas.selectedElements.length){
var v,f,m=body.canvas.selectedElements[0],b=g(m,this),p=t(m);f=new SVGPoint(p.x,p.y),
v=f.matrixTransform(b),i["top-left"].x.baseVal.value=v.x-e/2,i["top-left"].y.baseVal.value=v.y-e/2,
f=new SVGPoint(p.x+p.width,p.y),v=f.matrixTransform(b),i["top-right"].x.baseVal.value=v.x-e/2,
i["top-right"].y.baseVal.value=v.y-e/2,f=new SVGPoint(p.x,p.y+p.height),v=f.matrixTransform(b),
i["bottom-left"].x.baseVal.value=v.x-e/2,i["bottom-left"].y.baseVal.value=v.y-e/2,
f=new SVGPoint(p.x+p.width,p.y+p.height),v=f.matrixTransform(b),i["bottom-right"].x.baseVal.value=v.x-e/2,
i["bottom-right"].y.baseVal.value=v.y-e/2}else if(body.canvas.selectedElements.length>1){
var y=this.getScreenCTM().inverse(),_=c(function(){var e=0,t=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t[e++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}());_=u(_,y),i["top-left"].x.baseVal.value=_.x-e/2,
i["top-left"].y.baseVal.value=_.y-e/2,i["top-right"].x.baseVal.value=_.x+_.width-e/2,
i["top-right"].y.baseVal.value=_.y-e/2,i["bottom-left"].x.baseVal.value=_.x-e/2,i["bottom-left"].y.baseVal.value=_.y+_.height-e/2,
i["bottom-right"].x.baseVal.value=_.x+_.width-e/2,i["bottom-right"].y.baseVal.value=_.y+_.height-e/2;
}},_updateSkewGrippies:function(){var e=R/body.canvas.scale,i=(3/body.canvas.scale,
this._skewGrippiesByPosition),r=!0,a=!1,s=void 0;try{for(var o=void 0,l=this["#skew-grippies"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var d=o.value;d.width.baseVal.value=e,d.height.baseVal.value=e}}catch(h){a=!0,s=h;
}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}if(1===body.canvas.selectedElements.length){
var v,f=body.canvas.selectedElements[0],m=g(f,this),b=t(f);v=new SVGPoint(b.x+b.width/2,b.y),
v=v.matrixTransform(m),i.top.x.baseVal.value=v.x-e/2,i.top.y.baseVal.value=v.y-e/2,
v=new SVGPoint(b.x+b.width/2,b.y+b.height),v=v.matrixTransform(m),i.bottom.x.baseVal.value=v.x-e/2,
i.bottom.y.baseVal.value=v.y-e/2,v=new SVGPoint(b.x,b.y+b.height/2),v=v.matrixTransform(m),
i.left.x.baseVal.value=v.x-e/2,i.left.y.baseVal.value=v.y-e/2,v=new SVGPoint(b.x+b.width,b.y+b.height/2),
v=v.matrixTransform(m),i.right.x.baseVal.value=v.x-e/2,i.right.y.baseVal.value=v.y-e/2;
}else if(body.canvas.selectedElements.length>1){var p=this.getScreenCTM().inverse(),y=c(function(){
var e=0,t=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t[e++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}());y=u(y,p),i.top.x.baseVal.value=y.x+y.width/2-e/2,
i.top.y.baseVal.value=y.y-e/2,i.bottom.x.baseVal.value=y.x+y.width/2-e/2,i.bottom.y.baseVal.value=y.y+y.height-e/2,
i.left.x.baseVal.value=y.x-e/2,i.left.y.baseVal.value=y.y+y.height/2-e/2,i.right.x.baseVal.value=y.x+y.width-e/2,
i.right.y.baseVal.value=y.y+y.height/2-e/2}},_updateScaleGrippies:function(){var e=M/body.canvas.scale,i=(3/body.canvas.scale,
this._scaleGrippiesByPosition),r=!0,a=!1,s=void 0;try{for(var o=void 0,l=this["#scale-grippies"].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var d=o.value;d.width.baseVal.value=e,d.height.baseVal.value=e}}catch(h){a=!0,s=h;
}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}if(1===body.canvas.selectedElements.length){
var v,f=body.canvas.selectedElements[0],m=g(f,this),b=t(f);v=new SVGPoint(b.x+b.width/2,b.y),
v=v.matrixTransform(m),i.top.x.baseVal.value=v.x-e/2,i.top.y.baseVal.value=v.y-e/2,
v=new SVGPoint(b.x+b.width/2,b.y+b.height),v=v.matrixTransform(m),i.bottom.x.baseVal.value=v.x-e/2,
i.bottom.y.baseVal.value=v.y-e/2,v=new SVGPoint(b.x,b.y+b.height/2),v=v.matrixTransform(m),
i.left.x.baseVal.value=v.x-e/2,i.left.y.baseVal.value=v.y-e/2,v=new SVGPoint(b.x+b.width,b.y+b.height/2),
v=v.matrixTransform(m),i.right.x.baseVal.value=v.x-e/2,i.right.y.baseVal.value=v.y-e/2,
v=new SVGPoint(b.x,b.y),v=v.matrixTransform(m),i["top-left"].x.baseVal.value=v.x-e/2,
i["top-left"].y.baseVal.value=v.y-e/2,v=new SVGPoint(b.x+b.width,b.y),v=v.matrixTransform(m),
i["top-right"].x.baseVal.value=v.x-e/2,i["top-right"].y.baseVal.value=v.y-e/2,v=new SVGPoint(b.x,b.y+b.height),
v=v.matrixTransform(m),i["bottom-left"].x.baseVal.value=v.x-e/2,i["bottom-left"].y.baseVal.value=v.y-e/2,
v=new SVGPoint(b.x+b.width,b.y+b.height),v=v.matrixTransform(m),i["bottom-right"].x.baseVal.value=v.x-e/2,
i["bottom-right"].y.baseVal.value=v.y-e/2}else if(body.canvas.selectedElements.length>1){
var p=this.getScreenCTM().inverse(),y=c(function(){var e=0,t=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=body.canvas.selectedElements[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;t[e++]=n(l)}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t}());y=u(y,p),i.top.x.baseVal.value=y.x+y.width/2-e/2,
i.top.y.baseVal.value=y.y-e/2,i.bottom.x.baseVal.value=y.x+y.width/2-e/2,i.bottom.y.baseVal.value=y.y+y.height-e/2,
i.left.x.baseVal.value=y.x-e/2,i.left.y.baseVal.value=y.y+y.height/2-e/2,i.right.x.baseVal.value=y.x+y.width-e/2,
i.right.y.baseVal.value=y.y+y.height/2-e/2,i["top-left"].x.baseVal.value=y.x-e/2,
i["top-left"].y.baseVal.value=y.y-e/2,i["top-right"].x.baseVal.value=y.x+y.width-e/2,
i["top-right"].y.baseVal.value=y.y-e/2,i["bottom-left"].x.baseVal.value=y.x-e/2,i["bottom-left"].y.baseVal.value=y.y+y.height-e/2,
i["bottom-right"].x.baseVal.value=y.x+y.width-e/2,i["bottom-right"].y.baseVal.value=y.y+y.height-e/2;
}},_updateOriginGrippie:function(){if(body.canvas.selectedElements.length>=1){var e=j/body.canvas.scale,t=body.canvas.currentArtboard.getScreenCTM().inverse(),n=b(body.canvas.selectedElements);
n=n.matrixTransform(t),this["#origin-grippie"].setAttribute("width",e),this["#origin-grippie"].setAttribute("height",e),
this["#origin-grippie"].setAttribute("x",n.x-e/2),this["#origin-grippie"].setAttribute("y",n.y-e/2);
}},blink:function(){return $traceurRuntime.asyncWrap(function(e){for(;;)switch(e.state){
case 0:this["#grippies"].style.display="none",e.state=4;break;case 4:return void Promise.resolve(h(200)).then(e.createCallback(2),e.errback);
case 2:body.canvas.selectedElements.length>0&&(this["#grippies"].style.display="block"),
e.state=-2;break;default:return e.end()}},this)},_scaleParams:function(e,t,n,i){var r,a,s,o,l=body.modKeys,u=l.ctrl,c=(l.alt,
l.shift);return"top"===i?u||c?u&&!c?(r=n.x+n.width/2,a=n.y+n.height,o=(n.height-t)/n.height,
s=o):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=1,o=(n.height-n.height/2-t)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,o=(n.height-n.height/2-t)/(n.height-n.height/2),s=o):(r=n.x+n.width/2,
a=n.y+n.height,s=1,o=(n.height-t)/n.height):"bottom"===i?u||c?u&&!c?(r=n.x+n.width/2,
a=n.y,o=(n.height+t)/n.height,s=o):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=1,o=(n.height-n.height/2+t)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,o=(n.height-n.height/2+t)/(n.height-n.height/2),s=o):(r=n.x+n.width/2,
a=n.y,s=1,o=(n.height+t)/n.height):"left"===i?u||c?u&&!c?(r=n.x+n.width,a=n.y+n.height/2,
s=(n.width-e)/n.width,o=s):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=(n.width-n.width/2-e)/(n.width-n.width/2),
o=1):u&&c&&(r=n.x+n.width/2,a=n.y+n.height/2,s=(n.width-n.width/2-e)/(n.width-n.width/2),
o=s):(r=n.x+n.width,a=n.y+n.height/2,s=(n.width-e)/n.width,o=1):"right"===i&&(u||c?u&&!c?(r=n.x,
a=n.y+n.height/2,s=(n.width+e)/n.width,o=s):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,
s=(n.width-n.width/2+e)/(n.width-n.width/2),o=1):u&&c&&(r=n.x+n.width/2,a=n.y+n.height/2,
s=o=(n.width-n.width/2+e)/(n.width-n.width/2)):(r=n.x,a=n.y+n.height/2,s=(n.width+e)/n.width,
o=1)),"top-left"===i?u||c?u&&!c?(r=n.x+n.width,a=n.y+n.height,s=(n.width-e)/n.width,
o=(n.height-t)/n.height,s=o=A(s,o)):!u&&c?(r=n.x+n.width/2,a=n.y+n.height/2,s=(n.width-n.width/2-e)/(n.width-n.width/2),
o=(n.height-n.height/2-t)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,a=n.y+n.height/2,
s=(n.width-n.width/2-e)/(n.width-n.width/2),o=(n.height-n.height/2-t)/(n.height-n.height/2),
s>=0&&o>=0?s=o=A(s,o):0>=s&&0>=o?s=o=T(s,o):k(s)>=k(o)?s=-o:o=-s):(r=n.x+n.width,
a=n.y+n.height,s=(n.width-e)/n.width,o=(n.height-t)/n.height):"top-right"===i?u||c?u&&!c?(r=n.x,
a=n.y+n.height,s=(n.width+e)/n.width,o=(n.height-t)/n.height,s=o=A(s,o)):!u&&c?(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+e)/(n.width-n.width/2),o=(n.height-n.height/2-t)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+e)/(n.width-n.width/2),o=(n.height-n.height/2-t)/(n.height-n.height/2),
s>=0&&o>=0?s=o=A(s,o):0>=s&&0>=o?s=o=T(s,o):k(s)>=k(o)?s=-o:o=-s):(r=n.x,a=n.y+n.height,
s=(n.width+e)/n.width,o=(n.height-t)/n.height):"bottom-left"===i?u||c?u&&!c?(r=n.x+n.width,
a=n.y,s=(n.width-e)/n.width,o=(n.height+t)/n.height,s=o=A(s,o)):!u&&c?(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2-e)/(n.width-n.width/2),o=(n.height-n.height/2+t)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2-e)/(n.width-n.width/2),o=(n.height-n.height/2+t)/(n.height-n.height/2),
s>=0&&o>=0?s=o=A(s,o):0>=s&&0>=o?s=o=T(s,o):k(s)>=k(o)?s=-o:o=-s):(r=n.x+n.width,
a=n.y,s=(n.width-e)/n.width,o=(n.height+t)/n.height):"bottom-right"===i&&(u||c?u&&!c?(r=n.x,
a=n.y,s=(n.width+e)/n.width,o=(n.height+t)/n.height,s=o=A(s,o)):!u&&c?(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+e)/(n.width-n.width/2),o=(n.height-n.height/2+t)/(n.height-n.height/2)):u&&c&&(r=n.x+n.width/2,
a=n.y+n.height/2,s=(n.width-n.width/2+e)/(n.width-n.width/2),o=(n.height-n.height/2+t)/(n.height-n.height/2),
s>=0&&o>=0?s=o=A(s,o):0>=s&&0>=o?s=o=T(s,o):k(s)>=k(o)?s=-o:o=-s):(r=n.x,a=n.y,s=(n.width+e)/n.width,
o=(n.height+t)/n.height)),{centerX:r,centerY:a,scaleX:s,scaleY:o}}},{},e)}(SVGGElement),G=i("g","bx-transformhud",D);
return{get default(){return G}}}),System.registerModule("elements/bx-transformtool",[],function(){
"use strict";var e=System.get("utils/bbox").getClientBBox,t=System.get("utils/element"),n=t.registerElement,i=t.getCommonContainer,r=t.getContainers,a=t.isTransformableElement,s=System.get("utils/event").isMouseMoveIntentional,o=System.get("utils/rect"),l=o.rectContainsRect,u=o.transformRect,c=System.get("utils/constants").GRAPHICS_ELEMENTS,d=System.get("classes/enum")["default"],h=System.get("classes/vector")["default"],v=Math.abs,f=new d("initialTransforms"),m=function(t){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;body.canvas.enableHud("outlines-hud"),body.canvas.enableHud("transform-hud"),
body.canvas.enableHud("rubber-band-hud"),body.canvas.artboards.addEventListener("mousedown",this._mouseDownListener=function(t){
e._onArtboardMouseDown(t)}),body.canvas.artboards.addEventListener("contextmenu",this._contextMenuListener=function(t){
e._onArtboardContextMenu(t)})},_onDisabled:function(){body.canvas.disableHud("outlines-hud"),
body.canvas.disableHud("transform-hud"),body.canvas.disableHud("rubber-band-hud"),
body.canvas.artboards.removeEventListener("mousedown",this._mouseDownListener),body.canvas.artboards.removeEventListener("contextmenu",this._contextMenuListener);
},_onArtboardContextMenu:function(e){var t=body.canvas.getHitArtboardElements(e.clientX,e.clientY);
if(t.length>0){var n=t[t.length-1],i=r(n,body.canvas.currentArtboard),a=body.canvas.selectedElements.includes(n),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;
body.canvas.selectedElements.includes(d)&&(a=!0)}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}a===!1&&this._onArtboardClickSelectableElementHit(n)}else this._onArtboardClickBackgroundHit(e);
},_onArtboardMouseDown:function(e){var t=this;if(0===e.button){var n,i,r=e.target;
this._intentionalDragStarted=!1,window.addEventListener("mousemove",n=function(i){
if(s(e,i)!==!1){window.removeEventListener("mousemove",n),t._intentionalDragStarted=!0;
var r=new h(i.clientX-e.clientX,i.clientY-e.clientY),a=v(r.x)>v(r.y)?"horizontal":"vertical";
t._onIntentionalDragStart(e,i,a)}}),window.addEventListener("mouseup",i=function(a){
window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),
e.clientX===a.clientX&&e.clientY===a.clientY&&t._onArtboardClick(r,a)})}},_onArtboardClick:function(e,t){
if(0===t.button&&!body.canvas.huds.contains(e)&&!this._intentionalDragStarted){var n=body.canvas["#transform-hud"],i=body.canvas.getHitArtboardElements(t.clientX,t.clientY);
if(i.length>0){var r=i[i.length-1];if(t.detail%2===1)a(r)&&this._onArtboardClickSelectableElementHit(r);else if(t.detail%2===0){
var s=this._getContainerForHitElement(r);if(s)body.canvas.currentContainer=s,body.canvas.selectedElements=[];else if("use"===r.localName){
var o=body.canvas.artboards.querySelector(r.href.baseVal);if(o&&"symbol"===o.localName){
var l=o;body.canvas.editSymbol(l.id)}else n.mode="scale",body.toggleTool("edit-tool");
}else"text"===r.localName?(n.mode="scale",body.toggleTool("edit-tool")):(n.mode="scale",
body.toggleTool("edit-tool"))}}else this._onArtboardClickBackgroundHit(t)}},_onIntentionalDragStart:function(e,t,n){
if(!body.canvas.huds.contains(e.target)){var i=body.canvas.getHitArtboardElements(t.clientX,t.clientY);
i.length>0?this._onArtboardElementDragStart(t,i[i.length-1],n):this._onEmptySpaceDragStart(e);
}},_onArtboardClickSelectableElementHit:function(e){var t=body.modKeys,n=t.ctrl,a=(t.alt,
t.shift),s=r(e,body.canvas.currentArtboard),o=body.canvas.selectedElements.includes(e),l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value;
body.canvas.selectedElements.includes(v)&&(o=!0)}}catch(f){u=!0,c=f}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}if(n||a){if(!n&&a)if(0===s.length)body.canvas.currentContainer=null,
body.canvas.selectedElements.includes(e)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==e}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[e]);else if(body.canvas.currentContainer&&body.canvas.currentContainer.contains(e)){
for(;e.parentNode!==body.canvas.currentContainer;)e=e.parentNode;body.canvas.selectedElements.includes(e)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==e}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[e]);
}else{for(var m=i(e,body.canvas.currentContainer);e.parentNode!==m&&e.parentNode!==body.canvas.currentArtboard;)e=e.parentNode;
body.canvas.currentContainer=m,body.canvas.selectedElements.includes(e)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==e}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[e]);
}else if(n&&!a){for(var b=null,g=e.parentElement;g!==body.canvas.currentArtboard;g=g.parentElement)if("g"===g.localName||"a"===g.localName){
b=g;break}body.canvas.selectedElements=[e],body.canvas.currentContainer=b}else if(n&&a)if(body.canvas.selectedElements.includes(e)?body.canvas.selectedElements=body.canvas.selectedElements.filter(function(t){
return t!==e}):body.canvas.selectedElements=$traceurRuntime.spread(body.canvas.selectedElements,[e]),
0===body.canvas.selectedElements.length)body.canvas.currentContainer=null;else for(var p=body.canvas.selectedElements[0].parentElement;p!==body.canvas.currentArtboard;p=p.parentElement)if("g"===p.localName||"a"===p.localName){
body.canvas.currentContainer=p;break}}else if(o)"scale"===body.canvas.transformHud.mode?body.canvas.transformHud.mode="rotate-and-skew":body.canvas.transformHud.mode="scale";else if(body.canvas.transformHud.mode="scale",
0===s.length)body.canvas.currentContainer=null,body.canvas.selectedElements=[e];else{
var y=body.canvas.currentContainer;if(y&&y.contains(e)){for(;e.parentNode!==y;)e=e.parentNode;
body.canvas.selectedElements=[e]}else{for(var _=i(e,y);e.parentNode!==_&&e.parentNode!==body.canvas.currentArtboard;)e=e.parentNode;
body.canvas.currentContainer=_,body.canvas.selectedElements=[e]}}},_onArtboardElementDragStart:function(e,t,n){
var a,s,o=r(t,body.canvas.currentArtboard),l=!1;body.canvas.undoManager.checkpoint("Transform"),
body.canvas.outlinesHud.enabled=!1,body.canvas.selectedElements.includes(t)&&(l=!0);
var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=o[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var m=h.value;body.canvas.selectedElements.includes(m)&&(l=!0)}}catch(b){c=!0,d=b;
}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d}}if(!l)if(0===o.length)body.canvas.currentContainer=null,
body.canvas.selectedElements=[t];else{for(var g=i(t,body.canvas.currentArtboard);t.parentNode!==g&&t.parentNode!==body.canvas.currentArtboard;)t=t.parentNode;
body.canvas.currentContainer=g,body.canvas.selectedElements=[t]}var p=body.registerCursor("move",300),y=!0,_=!1,x=void 0;
try{for(var w=void 0,S=body.canvas.selectedElements[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){
var C=w.value,E=C.getScreenCTM(),k=E.inverse(),A=SVGMatrix.fromMatrix(C.transform.baseVal.consolidate().matrix),T=A.multiplySelf(k);
C[f.initialTransforms]={clientToUserTransform:E,initialClientTransform:T}}}catch(L){
_=!0,x=L}finally{try{y||null==S["return"]||S["return"]()}finally{if(_)throw x}}window.addEventListener("mousemove",a=function(t){
var i=t.clientX-e.clientX,r=t.clientY-e.clientY;body.modKeys.shift&&("vertical"===n?i=0:"horizontal"===n&&(r=0));
var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=body.canvas.selectedElements[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value,d=c[f.initialTransforms],h=d.clientToUserTransform,v=d.initialClientTransform,m=SVGMatrix.fromMatrix(v);
m.translateSelf(i,r),m.multiplySelf(h),c.setAttribute("transform",m.toString())}}catch(b){
s=!0,o=b}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}}),
window.addEventListener("mouseup",s=function(){window.removeEventListener("mousemove",a),
window.removeEventListener("mouseup",s),body.unregisterCursor(p),body.canvas.outlinesHud.enabled=!0;
})},_onArtboardClickBackgroundHit:function(e){if(0===e.button){var t=body.modKeys,n=t.ctrl,i=t.shift;
n||i||(2===e.detail&&(body.canvas.currentContainer=null),body.canvas.selectedElements=[]);
}},_onEmptySpaceDragStart:function(t){var n,i,r,a,s,o,d,h,v,f,m,b,g,p,y;return $traceurRuntime.asyncWrap(function(_){
for(;;)switch(_.state){case 0:n=t,i=n.clientX,r=n.clientY,_.state=5;break;case 5:
return void Promise.resolve(body.canvas.rubberBandHud.grabSelection(i,r)).then(_.createCallback(3),_.errback);
case 3:a=_.value,_.state=2;break;case 2:s=body.canvas.currentContainer||body.canvas.currentArtboard,
o=body.canvas.currentArtboard.getScreenCTM().inverse(),d=[],h=!0,v=!1,f=void 0;try{
for(m=void 0,b=s.children[Symbol.iterator]();!(h=(m=b.next()).done);h=!0)g=m.value,
(c.includes(g.localName)||"g"===g.localName)&&(p=e(g),p=u(p,o),y=0===p.width&&0===p.height,
!y&&l(a,p)&&d.push(g))}catch(x){v=!0,f=x}finally{try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}}body.canvas.selectedElements=$traceurRuntime.spread(d),_.state=-2;
break;default:return _.end()}},this)},_getContainerForHitElement:function(e){for(var t=[],n=e.parentElement;n!==body.canvas.currentArtboard&&n!==body.canvas.currentContainer;n=n.parentElement)"g"!==n.localName&&"a"!==n.localName||t.push(n);
var i=t.length>0?t[t.length-1]:null;return i}},{},t)}(HTMLElement),b=n("bx-transformtool",m);
return{get default(){return b}}}),System.registerModule("elements/bx-trianglehud",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/geometry"),n=t.getNearestPointOnLine,i=t.getPointAtFraction,r=System.get("utils/math").normalize,a=System.get("utils/path-shapes"),s=a.getShapeData,o=a.setShapeData,l=System.get("utils/time").throttle,u=System.get("utils/transform-general").getTransformToElement,c=System.get("classes/enum")["default"],d=System.get("classes/vector")["default"],h=Math,v=h.abs,f=(h.sin,
h.cos,h.PI,new c("path")),m=6,b='\n  <style>@import url("stylesheets/bx-trianglehud.css");</style>\n\n  <defs>\n    <g id="subhud-template" class="subhud">\n      <circle class="grippie shift-grippie"></circle>\n      <circle class="grippie corner-grippie"></circle>\n    </g>\n  </defs>\n\n  <g id="subhuds"></g>\n',g=function(e){
function t(){$traceurRuntime.superConstructor(t).apply(this,arguments)}return $traceurRuntime.createClass(t,{
createdCallback:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,
this._updateGrippiesPosition200Th=l(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({
mode:"closed"}),this._shadowRoot.innerHTML=b;var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this["#"+a.id]=a}}catch(s){t=!0,n=s}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}var o=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
o||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_install:function(){var e=this;this._installed=!0,body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(){
e._onZoomChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("mousedown",this._shadowRootMouseDownListener=function(t){
e._onShadowRootMouseDown(t)})},_uninstall:function(){this._installed=!1,this["#subhuds"].innerHTML="",
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener),body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
this._shadowRoot.removeEventListener("mousedown",this._shadowRootMouseDownListener);
},_onEnabled:function(){var e=this;this._onSelectedElementsChange(),body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()})},_onDisabled:function(){this._installed&&this._uninstall(),
body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener);
},_onSelectedElementsChange:function(){this._selectedTriangles=this._getSelectedTriangles(),
0===this._selectedTriangles.length?this._installed&&this._uninstall():(this._installed||this._install(),
this._updateSubhuds())},_onArtboardMutation:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th();
},_onZoomChange:function(){this._updateGrippiesSize()},_onShadowRootMouseDown:function(e){
e.target.matches(".shift-grippie")?this._onShiftGrippieMouseDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippieMouseDown(e);
},_onShiftGrippieMouseDown:function(e){var t,i,a=this;if(0===e.button){var l,u,c=e.target,h=c.parentElement,m=h[f.path],b=m.getCTM().inverse(),g=s(m).values,p=(t=g[Symbol.iterator](),
(i=t.next()).done?void 0:i.value),y=(i=t.next()).done?void 0:i.value,_=(i=t.next()).done?void 0:i.value,x=(i=t.next()).done?void 0:i.value,w=(i=t.next()).done?void 0:i.value,S=(i=t.next()).done?void 0:i.value,C=new SVGPoint(p,y),E=new SVGPoint(p+_,y),k=new SVGPoint(e.clientX,e.clientY),A=k.matrixTransform(b),T=new SVGPoint(p+_*w,y),L=new d(T,A).getOppositeVector(),M=!1;
c.parentElement.append(c),this._draggedGrippie=c,window.addEventListener("mousemove",l=function(e){
var t,i;M===!1&&(M=!0,body.canvas.undoManager.checkpoint("Triangle radius"));var a=new SVGPoint(e.clientX,e.clientY),s=a.matrixTransform(b);
s=L.transformPoint(s);var l=(t=n(C,E,s,!1)[Symbol.iterator](),(i=t.next()).done?void 0:i.value);
w=(l.x-C.x)/_,w=r(w,0,1,4),body.modKeys.shift&&(w=[0,.5,1].reduce(function(e,t){return v(t-w)<v(e-w)?t:e;
})),o(m,{type:"triangle",values:[p,y,_,x,w,S]})}),window.addEventListener("mouseup",u=function(){
window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u),
a._draggedGrippie=null})}},_onCornerGrippieMouseDown:function(e){var t,i,a=this;if(0===e.button){
var l,u,c=e.target,h=c.parentElement,v=h[f.path],m=(SVGMatrix.fromMatrix(v.transform.baseVal.consolidate().matrix),
v.getCTM().inverse()),b=s(v).values,g=(t=b[Symbol.iterator](),(i=t.next()).done?void 0:i.value),p=(i=t.next()).done?void 0:i.value,y=(i=t.next()).done?void 0:i.value,_=(i=t.next()).done?void 0:i.value,x=(i=t.next()).done?void 0:i.value,w=((i=t.next()).done?void 0:i.value,
new SVGPoint(g+y*x,p)),S=new SVGPoint(g+y,p+_),C=new SVGPoint(e.clientX,e.clientY),E=C.matrixTransform(m),k=new SVGPoint(E.x,E.y),A=!1;
c.parentElement.append(c),this._draggedGrippie=c,window.addEventListener("mousemove",l=function(e){
var t,i;A===!1&&(A=!0,body.canvas.undoManager.checkpoint("Triangle radius"));var a=new SVGPoint(e.clientX,e.clientY);
k=a.matrixTransform(m);var s=(t=n(S,w,k,!1)[Symbol.iterator](),(i=t.next()).done?void 0:i.value),l=new d(S,s),u=new d(S,w),c=l.length/u.length,h=r(c,0,.5,4);
o(v,{type:"triangle",values:[g,p,y,_,x,h]})}),window.addEventListener("mouseup",u=function(){
window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u),
a._draggedGrippie=null})}},_updateSubhuds:function(){this["#subhuds"].innerHTML="";
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this._selectedTriangles[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=this["#subhud-template"].cloneNode(!0);s.removeAttribute("id"),s[f.path]=a,
this["#subhuds"].append(s)}}catch(o){t=!0,n=o}finally{try{e||null==r["return"]||r["return"]();
}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()},
_updateGrippiesPosition:function(){var e,t,n=!0,r=!1,a=void 0;try{for(var o=void 0,l=this["#subhuds"].children[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){
var c=o.value,d=c[f.path],h=u(d,this),v=s(d).values,m=(e=v[Symbol.iterator](),(t=e.next()).done?void 0:t.value),b=(t=e.next()).done?void 0:t.value,g=(t=e.next()).done?void 0:t.value,p=(t=e.next()).done?void 0:t.value,y=(t=e.next()).done?void 0:t.value,_=(t=e.next()).done?void 0:t.value,x=!0,w=!1,S=void 0;
try{for(var C=void 0,E=c.children[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value;if(k.matches(".shift-grippie")){var A=new SVGPoint(m+g*y,b).matrixTransform(h);
k.setAttribute("cx",A.x),k.setAttribute("cy",A.y)}else if(k.matches(".corner-grippie")){
var T=new SVGPoint(m+g*y,b).matrixTransform(h),L=new SVGPoint(m+g,b+p).matrixTransform(h),M=i(L,T,_);
k.setAttribute("cx",M.x),k.setAttribute("cy",M.y)}}}catch(P){w=!0,S=P}finally{try{
x||null==E["return"]||E["return"]()}finally{if(w)throw S}}}}catch(R){r=!0,a=R}finally{
try{n||null==l["return"]||l["return"]()}finally{if(r)throw a}}},_updateGrippiesSize:function(){
var e=!0,t=!1,n=void 0;try{for(var i=void 0,r=this["#subhuds"].children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value,s=!0,o=!1,l=void 0;try{for(var u=void 0,c=a.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;d.setAttribute("r",m/body.canvas.scale)}}catch(h){o=!0,l=h}finally{
try{s||null==c["return"]||c["return"]()}finally{if(o)throw l}}}}catch(v){t=!0,n=v;
}finally{try{e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},_getSelectedTriangles:function(){
var e=void 0!==arguments[0]?arguments[0]:body.canvas.selectedElements,t=[],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"path"===o.localName?o.hasAttribute("data-bx-shape")&&o.getAttribute("data-bx-shape").startsWith("triangle")&&t.push(o):"g"!==o.localName&&"a"!==o.localName||(t=$traceurRuntime.spread(t,this._getSelectedTriangles(o.children)));
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t}},{},e)}(SVGGElement),p=e("g","bx-trianglehud",g);return{get default(){
return p}}}),System.registerModule("elements/bx-triangletool",[],function(){"use strict";
var e=System.get("utils/element"),t=e.createElement,n=e.registerElement,i=System.get("utils/event").isMouseMoveIntentional,r=System.get("utils/geometry"),a=r.getDistanceBetweenPoints,s=r.getRotationAngleFromPoints,o=r.snapRotationAngle,l=System.get("utils/math").normalize,u=System.get("utils/path-shapes"),c=(u.getShapeData,
u.setShapeData),d=System.get("utils/transform-reduction").reduceTransform,h=System.get("classes/shortcut")["default"],v=(System.get("classes/vector")["default"],
Math),f=v.abs,m=v.min,b=(v.sqrt,function(e){function n(){$traceurRuntime.superConstructor(n).apply(this,arguments);
}return $traceurRuntime.createClass(n,{createdCallback:function(){var e=!0,t=!1,n=void 0;
try{for(var i=void 0,r=this.attributes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){
var a=i.value;this.attributeChangedCallback(a.name)}}catch(s){t=!0,n=s}finally{try{
e||null==r["return"]||r["return"]()}finally{if(t)throw n}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._triangleCursor=body.registerCursor("images/cursor-triangle.png",-100,8,7),
body.canvas.enableHud("outlines-hud"),body.canvas.addEventListener("mousedown",this._mouseDownListener=function(t){
return e._onMouseDown(t)})},_onDisabled:function(){body.unregisterCursor(this._triangleCursor),
body.unregisterCursor(this._mouseDownTriangleCursor),body.canvas.disableHud("outlines-hud"),
body.canvas.removeEventListener("mousedown",this._mouseDownListener)},_onMouseDown:function(e){
var t,n,r=this;window.addEventListener("mousemove",t=function(a){i(e,a)!==!1&&(window.removeEventListener("mousemove",t),
window.removeEventListener("mouseup",n),r._onIntentionalDragStart(e))}),window.addEventListener("mouseup",n=function(){
window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n);
})},_onIntentionalDragStart:function(e){var n,i,r,u,v=this,b=body.canvas.currentContainer||body.canvas.currentArtboard,g=body.modKeys.ctrl?"polar":"planar",p=0,y=0,_=0,x=0,w=.5,S=0;
body.canvas.undoManager.checkpoint("Draw triangle");var C=t("svg:path");C.style.fill="#d8d8d8",
c(C,{type:"triangle",values:[p,y,_,x,w,S]}),b.append(C),body.canvas.selectedElements=[C],
this._mouseDownTriangleCursor=body.registerCursor("images/cursor-triangle.png",900,8,7);
var E=C.getScreenCTM().inverse(),k=C.transform.baseVal.consolidate().matrix.multiply(E);
C.setAttribute("transform",k.toString()),window.addEventListener("mousemove",n=function(t){
if("planar"===g){var n=t.clientX-e.clientX||1,i=t.clientY-e.clientY||1;if(_=f(n),
x=f(i),body.modKeys.shift){var r=m(_,x);_=r,x=r}p=0>n?e.clientX-_:e.clientX,y=0>i?e.clientY-x:e.clientY;
}else if("polar"===g){var l=new SVGPoint(e.clientX,e.clientY),u=new SVGPoint(t.clientX,t.clientY),d=a(l,u),h=new SVGPoint(l.x,l.y-d),v=h.matrixTransform((new SVGMatrix).rotate(120,l.x,l.y)),b=v.matrixTransform((new SVGMatrix).rotate(120,l.x,l.y)),E=s(l,v,u);
_=v.x-b.x,x=v.y-h.y,p=b.x,y=h.y,body.modKeys.shift&&(E=o(E,45));var A=(new SVGMatrix).rotate(E,l.x,l.y);
C.setAttribute("transform",k.multiply(A).toString())}c(C,{type:"triangle",values:[p,y,_,x,w,S]
})}),window.addEventListener("mouseup",i=function(){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("toolchange",r),
body.removeEventListener("keydown",u),body.unregisterCursor(v._mouseDownTriangleCursor),
d(C)}),body.addEventListener("toolchange",r=function(e){window.removeEventListener("mousemove",n),
window.removeEventListener("mouseup",i),body.removeEventListener("toolchange",r),
body.removeEventListener("keydown",u),body.unregisterCursor(v._mouseDownTriangleCursor),
d(C)}),body.addEventListener("keydown",u=function(e){var t=h.fromEvent(event);t.matches("ArrowLeft")?(event.preventDefault(),
event.stopPropagation(),S>0&&(S=l(S-.04,0,.5,2),c(C,{type:"triangle",values:[p,y,_,x,w,S]
}))):t.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),.5>S&&(S=l(S+.04,0,.5,2),
c(C,{type:"triangle",values:[p,y,_,x,w,S]})))})}},{},e)}(HTMLElement)),g=n("bx-triangletool",b);
return{get default(){return g}}}),System.registerModule("elements/bx-typographycontrols",[],function(){
"use strict";System.get("elements/bx-button"),System.get("elements/bx-fontfamilybutton"),
System.get("elements/bx-fontfamilypicker"),System.get("elements/bx-select"),System.get("elements/bx-selectitem"),
System.get("elements/bx-slider");var e=System.get("utils/bbox").getUserBBox,t=(System.get("utils/constants").TEXT_CONTENT_ELEMENTS,
System.get("utils/element")),n=t.createElement,i=t.registerElement,r=System.get("utils/font"),a=r.formatFontWeightForDisplay,s=r.matchFontWeight,o=r.normalizeFontWeight,l=System.get("utils/math").round,u=System.get("utils/style").queryStylableElements,c=System.get("utils/time").throttle,d=System.get("utils/transform-general").getTransformToElement,h=System.get("utils/text"),v=(h.isValidFontFamilyValue,
h.getTspansIntersectedByRange,h.normalizeTextInRangeBeforeEditing),f=h.normalizeTextInRangeAfterEditing,m=System.get("classes/decomposed-transform")["default"],b=Number.parseFloat,g='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-typographycontrols.css");\n  </style>\n\n  <div id="master-view">\n    <section id="font-section">\n      <h2 id="font-heading">Font</h2>\n\n      <div id="font-family-div">\n        <h3 id="font-family-heading">Family</h3>\n        <bx-fontfamilybutton id="font-family-button" label="Arial"></bx-fontfamilybutton>\n      </div>\n\n      <div id="font-face-div">\n        <h3 id="font-face-heading">Face</h3>\n\n        <div class="hbox">\n          <bx-select id="font-weight-select" value="400">\n            <bx-selectitem value="400" label="Normal"></bx-selectitem>\n          </bx-select>\n\n          <bx-button\n            id="italic-font-style-button"\n            value="italic"\n            tooltip="Italic"\n            icon="italic"\n            iconsize="28"\n            skin="iconic">\n          </bx-button>\n\n          <bx-button\n            id="small-caps-font-variant-button"\n            value="small-caps"\n            tooltip="Small Caps"\n            icon="small-caps"\n            iconsize="28"\n            skin="iconic">\n          </bx-button>\n        </div>\n      </div>\n\n      <div id="font-size-div">\n        <h3 id="font-size-heading">Size</h3>\n\n        <bx-slider\n          id="font-size-slider"\n          title=""\n          value="0"\n          min="1"\n          precision="0">\n        </bx-slider>\n      </div>\n    </section>\n\n    <section id="transform-section">\n      <h2 id="transform-heading">Transform</h2>\n\n      <div class="hbox">\n        <div id="transform-buttons">\n          <bx-button\n            id="capitalize-button"\n            value="capitalize"\n            tooltip="Capitalize"\n            icon="capitalize"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n\n          <bx-button\n            id="uppercase-button"\n            value="uppercase"\n            tooltip="Uppercase"\n            icon="uppercase"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n\n          <bx-button\n            id="lowercase-button"\n            value="lowercase"\n            tooltip="Lowercase"\n            icon="lowercase"\n            iconsize="32"\n            skin="iconic">\n          </bx-button>\n        </div>\n\n        <bx-button\n          id="text-on-path-button"\n          value="text-on-path"\n          tooltip="Text on Path"\n          icon="text-on-path"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </section>\n\n    <section id="decoration-section">\n      <h2 id="decoration-heading">Decoration</h2>\n\n      <div id="decoration-buttons">\n        <bx-button\n          id="underline-button"\n          value="underline"\n          tooltip="Underline"\n          icon="underline"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="line-through-button"\n          value="line-through"\n          tooltip="Line-through"\n          icon="line-through"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n\n        <bx-button\n          id="overline-button"\n          value="overline"\n          tooltip="Overline"\n          icon="overline"\n          iconsize="32"\n          skin="iconic">\n        </bx-button>\n      </div>\n    </section>\n\n    <section id="spacing-section">\n      <h2 id="spacing-heading">Spacing</h2>\n\n      <div id="letter-spacing-div">\n        <h3 id="letter-spacing-heading">Letter</h2>\n\n        <bx-slider\n          id="letter-spacing-slider"\n          title=""\n          value="0"\n          step="0.1"\n          precision="2">\n        </bx-slider>\n      </div>\n\n      <div id="word-spacing-div">\n        <h3 id="word-spacing-heading">Word</h2>\n\n        <bx-slider\n          id="word-spacing-slider"\n          title=""\n          value="0"\n          step="0.1"\n          precision="2">\n        </bx-slider>\n      </div>\n    </section>\n  </div>\n\n  <div id="font-family-view" hidden>\n    <nav id="navbar">\n      <bx-button\n        id="back-button"\n        icon="back"\n        iconsize="20"\n        skin="iconic"\n        label="<">\n      </bx-button>\n\n      <h1>Font family</h1>\n    </nav>\n\n    <section id="font-family-picker-section">\n      <bx-fontfamilypicker id="font-family-picker"></bx-fontfamilypicker>\n    </section>\n  </div>\n',p=function(t){
function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)}return $traceurRuntime.createClass(i,{
createdCallback:function(){var e=this;this._update60Th=c(this._update,60,this),this._update300Th=c(this._update,300,this),
this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=g;
var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){u=!0,d=m}finally{try{
l||null==v["return"]||v["return"]()}finally{if(u)throw d}}this["#font-family-button"].addEventListener("click",function(t){
return e._onFontFamilyButtonClick(t)}),this["#font-weight-select"].addEventListener("change",function(t){
return e._onFontWeightSelectChange()}),this["#italic-font-style-button"].addEventListener("click",function(t){
return e._onItalicFontStyleButtonClick(t)}),this["#small-caps-font-variant-button"].addEventListener("click",function(t){
e._onSmallCapsFontVariantButtonClick(t)}),this["#font-size-slider"].addEventListener("changestart",function(){
return e._onFontSizeSliderChangeStart()}),this["#capitalize-button"].addEventListener("click",function(t){
return e._onTextTransformButtonClick(t)}),this["#uppercase-button"].addEventListener("click",function(t){
return e._onTextTransformButtonClick(t)}),this["#lowercase-button"].addEventListener("click",function(t){
return e._onTextTransformButtonClick(t)}),this["#text-on-path-button"].addEventListener("click",function(t){
return e._onTextOnPathButtonClick(t)}),this["#underline-button"].addEventListener("click",function(t){
return e._onTextDecorationButtonClick(t)}),this["#line-through-button"].addEventListener("click",function(t){
return e._onTextDecorationButtonClick(t)}),this["#overline-button"].addEventListener("click",function(t){
return e._onTextDecorationButtonClick(t)}),this["#letter-spacing-slider"].addEventListener("changestart",function(){
return e._onLetterSpacingSliderChangeStart()}),this["#word-spacing-slider"].addEventListener("changestart",function(){
return e._onWordSpacingSliderChangeStart()}),this["#back-button"].addEventListener("click",function(t){
return e._onBackButtonClick(t)}),this["#font-family-picker"].addEventListener("change",function(){
return e._onFontFamilyPickerValueChange()})},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;body.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){
e._onSelectedElementsChange()}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)}),body.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){
e._onSelectedTextRangeChange()}),this._update()},_onDisabled:function(){body.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),
this._hideFontFamilyPickerView()},_onSelectedElementsChange:function(){this["#font-family-view"].hidden||this._hideFontFamilyPickerView(),
this._update60Th()},_onSelectedTextRangeChange:function(){this._update300Th()},_onArtboardMutation:function(e){
this._update300Th()},_onFontFamilyButtonClick:function(e){this._showFontFamilyPickerView();
},_onFontWeightSelectChange:function(){body.canvas.undoManager.checkpoint("Font weight");
var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;v(n);var i=u("font-weight",t,n),r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;
c.style.fontWeight=this["#font-weight-select"].value}}catch(d){a=!0,s=d}finally{try{
r||null==l["return"]||l["return"]()}finally{if(a)throw s}}f(n)},_onItalicFontStyleButtonClick:function(e){
if(0===e.button){body.canvas.undoManager.checkpoint("Font style");var t=body.canvas,n=t.selectedElements,i=t.selectedTextRange;
v(i);var r=u("font-style",n,i),a=!0,s=!1,o=void 0;try{for(var l=void 0,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){
var d=l.value;d.style.fontStyle=e.target.pressed&&!e.target.mixed?"normal":"italic";
}}catch(h){s=!0,o=h}finally{try{a||null==c["return"]||c["return"]()}finally{if(s)throw o;
}}}},_onSmallCapsFontVariantButtonClick:function(e){if(0===e.button){body.canvas.undoManager.checkpoint("Font variant");
var t=body.canvas,n=t.selectedElements,i=t.selectedTextRange;v(i);var r=u("font-variant",n,i),a=!0,s=!1,o=void 0;
try{for(var l=void 0,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;
d.style.fontVariant=e.target.pressed&&!e.target.mixed?"normal":"small-caps"}}catch(h){
s=!0,o=h}finally{try{a||null==c["return"]||c["return"]()}finally{if(s)throw o}}}},
_onTextTransformButtonClick:function(e){if(0===e.button){body.canvas.undoManager.checkpoint("Text transform");
var t=body.canvas,n=t.selectedElements,i=t.selectedTextRange;v(i);var r=u("text-transform",n,i),a=!0,s=!1,o=void 0;
try{for(var l=void 0,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;
d.style.textTransform=e.target.pressed&&!e.target.mixed?"none":e.target.value}}catch(h){
s=!0,o=h}finally{try{a||null==c["return"]||c["return"]()}finally{if(s)throw o}}f(i);
}},_onTextDecorationButtonClick:function(){if(0===event.button){body.canvas.undoManager.checkpoint("Text decoration");
var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;v(n);var i=u("text-decoration",t,n),r=event.target,a=r.pressed,s=r.mixed,o=!0,l=!1,c=void 0;
try{for(var d=void 0,h=i[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){var m=d.value,b=m.style.textDecoration.includes("underline"),g=m.style.textDecoration.includes("line-through"),p=m.style.textDecoration.includes("overline");
"underline"===event.target.value?b=!a||a&&s:"line-through"===event.target.value?g=!a||a&&s:"overline"===event.target.value&&(p=!a||a&&s);
var y="";b&&(y+="underline "),g&&(y+="line-through "),p&&(y+="overline "),""===y?m.style.textDecoration=null:m.style.textDecoration=y.trim();
}}catch(_){l=!0,c=_}finally{try{o||null==h["return"]||h["return"]()}finally{if(l)throw c;
}}f(n)}},_onFontSizeSliderChangeStart:function(){var e=this;body.canvas.undoManager.checkpoint("Font size");
var t=body.canvas,n=t.selectedElements,i=t.selectedTextRange;v(i);var r,a,s=u("font-size",n,i);
this._isChangingFontSizeSlider=!0,this["#font-size-slider"].addEventListener("change",r=function(){
e["#font-size-slider"].mixed=!1;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=s[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var o=r.value,l=d(o,body.canvas.currentArtboard).inverse(),u=m.fromSVGMatrix(l).scaleY,c=e["#font-size-slider"].value*u;
o.style.fontSize=c}}catch(h){n=!0,i=h}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}),this["#font-size-slider"].addEventListener("changeend",a=function(){
e["#font-size-slider"].removeEventListener("change",r),e["#font-size-slider"].removeEventListener("changeend",a),
f(i),e._isChangingFontSizeSlider=!1})},_onLetterSpacingSliderChangeStart:function(){
var e=this;body.canvas.undoManager.checkpoint("Letter spacing");var t=body.canvas,n=t.selectedElements,i=t.selectedTextRange;
v(i);var r,a,s=u("letter-spacing",n,i);this._isChangingLetterSpacingSlider=!0,this["#letter-spacing-slider"].addEventListener("change",r=function(){
e["#letter-spacing-slider"].mixed=!1;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=s[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var o=r.value,l=d(o,body.canvas.currentArtboard).inverse(),u=m.fromSVGMatrix(l).scaleX,c=e["#letter-spacing-slider"].value*u;
o.style.letterSpacing=c}}catch(h){n=!0,i=h}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}),this["#letter-spacing-slider"].addEventListener("changeend",a=function(){
e["#letter-spacing-slider"].removeEventListener("change",r),e["#letter-spacing-slider"].removeEventListener("changeend",a),
f(i),e._isChangingLetterSpacingSlider=!1})},_onWordSpacingSliderChangeStart:function(){
var e=this;body.canvas.undoManager.checkpoint("Word spacing");var t=body.canvas,n=t.selectedElements,i=t.selectedTextRange;
v(i);var r,a,s=u("word-spacing",n,i);this._isChangingWordSpacingSlider=!0,this["#word-spacing-slider"].addEventListener("change",r=function(){
e["#word-spacing-slider"].mixed=!1;var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=s[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var o=r.value,l=d(o,body.canvas.currentArtboard).inverse(),u=m.fromSVGMatrix(l).scaleX,c=e["#word-spacing-slider"].value*u;
o.style.wordSpacing=c}}catch(h){n=!0,i=h}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}}),this["#word-spacing-slider"].addEventListener("changeend",a=function(){
e["#word-spacing-slider"].removeEventListener("change",r),e["#word-spacing-slider"].removeEventListener("changeend",a),
f(i),e._isChangingWordSpacingSlider=!1})},_onTextOnPathButtonClick:function(t){body.canvas.undoManager.checkpoint("Put text on path");
var i=$traceurRuntime.spread(body.canvas.selectedElements).filter(function(e){return"text"===e.localName;
}),r=!0,a=!1,s=void 0;try{for(var o=void 0,u=i[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){
var c=o.value,d=$traceurRuntime.spread(c.children).find(function(e){return"textPath"===e.localName;
});if(d){var h=e(c),v=body.canvas.artboards.querySelector(d.href.baseVal);v.remove(),
c.innerHTML=d.innerHTML,c.setAttribute("x",h.x),c.setAttribute("y",h.y+h.height/2);
}else{var f=e(c),g=SVGMatrix.fromMatrix(c.transform.baseVal.consolidate().matrix),p=b(getComputedStyle(c).fontSize),y=m.fromSVGMatrix(g).scaleY,_=l(p*y,2);
c.style.fontSize=_;var x=new SVGPoint(f.x,f.y+f.height).matrixTransform(g),w=new SVGPoint(f.x+f.width/2,f.y).matrixTransform(g),S=new SVGPoint(f.x+f.width,f.y+f.height).matrixTransform(g),C="M "+x.x+" "+x.y+" Q "+w.x+" "+w.y+" "+S.x+" "+S.y,E=n("svg:path");
E.setAttribute("id",body.canvas.generateUniqueID("path")),E.setAttribute("d",C),E.setAttribute("style","fill: none; stroke: red; stroke-width: 2;"),
c.parentElement.append(E),c.removeAttribute("x"),c.removeAttribute("y"),c.removeAttribute("transform");
var k=n("svg:textPath");k.setAttribute("href","#"+E.id),k.innerHTML=c.innerHTML,c.innerHTML="",
c.append(k)}}}catch(A){a=!0,s=A}finally{try{r||null==u["return"]||u["return"]()}finally{
if(a)throw s}}},_onFontFamilyPickerValueChange:function(){var e,t,n,i,r,a,s,o,l,c,d;
return $traceurRuntime.asyncWrap(function(h){for(;;)switch(h.state){case 0:e=this["#font-family-picker"].value,
h.state=9;break;case 9:h.state=e?3:-2;break;case 3:t=body.canvas,n=t.selectedElements,
i=t.selectedTextRange,body.canvas.undoManager.checkpoint("Font family"),h.state=4;
break;case 4:return void Promise.resolve(body.canvas.googleFontsManager.importFamily(e)).then(h.createCallback(2),h.errback);
case 2:v(i),r=u("font-family",n,i),a=!0,s=!1,o=void 0;try{for(l=void 0,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)d=l.value,
d.style.fontFamily="'"+e+"'"}catch(m){s=!0,o=m}finally{try{a||null==c["return"]||c["return"]();
}finally{if(s)throw o}}f(i),body.canvas.googleFontsManager.deportUnsusedFamilies(),
h.state=-2;break;default:return h.end()}},this)},_onBackButtonClick:function(e){0===e.button&&this._hideFontFamilyPickerView();
},_showFontFamilyPickerView:function(){this["#font-family-view"].hidden=!1,this["#font-family-picker"].enabled=!0,
this["#master-view"].hidden=!0},_hideFontFamilyPickerView:function(){this["#font-family-view"].hidden=!0,
this["#font-family-picker"].enabled=!1,this["#master-view"].hidden=!1},_update:function(){
var e=body.canvas,t=e.selectedElements,n=e.selectedTextRange;this._selectedTextContentElements=u("font-family",t,n),
this._updateFontSection(),this._updateTransformSection(),this._updateDecorationSection(),
this._updateSpacingSection()},_updateFontSection:function(){var e,t;if(!this._isChangingFontSizeSlider){
var i=this._selectedTextContentElements,r=(e=i[Symbol.iterator](),(t=e.next()).done?void 0:t.value),u=$traceurRuntime.iteratorToArray(e);
if(r){var c=getComputedStyle(r),h=c.fontFamily.split(",")[0].replaceAll("'","").replaceAll('"',""),v=b(c.fontSize),f=o(c.fontWeight),g=body.canvas.googleFontsManager.getImportedWeights(h);
0===g.length&&(g=["100","200","300","400","500","600","700","800","900"]);var p=s(f,g),y=d(r.closest("text"),body.canvas.currentArtboard),_=m.fromSVGMatrix(y).scaleY,x=l(v*_,2),w=!1,S=!1,C=!1,E=!1,k=!1,A=!0,T=!1,L=void 0;
try{for(var M=void 0,P=u[Symbol.iterator]();!(A=(M=P.next()).done);A=!0){var R=M.value,j=getComputedStyle(R),O=j.fontFamily.split(",")[0].replaceAll("'","").replaceAll('"',""),V=b(j.fontSize),D=o(j.fontWeight),G=body.canvas.googleFontsManager.getImportedWeights(O);
0===G.length&&(G=["100","200","300","400","500","600","700","800","900"]);var I=s(D,G);
O!==h&&(w=!0),I!==p&&(S=!0),j.fontStyle!==c.fontStyle&&(C=!0),j.fontVariant!==c.fontVariant&&(E=!0),
V!==v&&(k=!0)}}catch(N){T=!0,L=N}finally{try{A||null==P["return"]||P["return"]()}finally{
if(T)throw L}}this["#font-weight-select"].innerHTML="";var B=!0,U=!1,z=void 0;try{
for(var H=void 0,F=g[Symbol.iterator]();!(B=(H=F.next()).done);B=!0){var q=H.value,Y=n("bx-selectitem");
Y.value=q,Y.label=a(q),this["#font-weight-select"].append(Y)}}catch($){U=!0,z=$}finally{
try{B||null==F["return"]||F["return"]()}finally{if(U)throw z}}this["#font-heading"].disabled=!1,
this["#font-family-heading"].disabled=!1,this["#font-family-button"].disabled=!1,
this["#font-family-button"].label=h,this["#font-family-button"].mixed=w,this["#font-face-heading"].disabled=!1,
this["#font-weight-select"].disabled=!1,this["#font-weight-select"].value=p,this["#font-weight-select"].mixed=S,
this["#italic-font-style-button"].disabled=!1,this["#italic-font-style-button"].mixed=C,
this["#italic-font-style-button"].pressed="italic"===c.fontStyle,this["#small-caps-font-variant-button"].disabled=!1,
this["#small-caps-font-variant-button"].mixed=E,this["#small-caps-font-variant-button"].pressed="small-caps"===c.fontVariant,
this["#font-size-heading"].disabled=!1,this["#font-size-slider"].disabled=!1,this["#font-size-slider"].value=x,
this["#font-size-slider"].mixed=k}else this["#font-heading"].disabled=!0,this["#font-family-heading"].disabled=!0,
this["#font-family-button"].disabled=!0,this["#font-family-button"].mixed=!1,this["#font-face-heading"].disabled=!0,
this["#font-weight-select"].disabled=!0,this["#font-weight-select"].mixed=!1,this["#italic-font-style-button"].disabled=!0,
this["#italic-font-style-button"].mixed=!1,this["#italic-font-style-button"].pressed=!1,
this["#small-caps-font-variant-button"].disabled=!0,this["#small-caps-font-variant-button"].mixed=!1,
this["#small-caps-font-variant-button"].pressed=!1,this["#font-size-heading"].disabled=!0,
this["#font-size-slider"].value=0,this["#font-size-slider"].mixed=!1,this["#font-size-slider"].disabled=!0,
this._hideFontFamilyPickerView()}},_updateTransformSection:function(){var e,t,n=this._selectedTextContentElements,i=(e=n[Symbol.iterator](),
(t=e.next()).done?void 0:t.value),r=$traceurRuntime.iteratorToArray(e);if(i){var a=getComputedStyle(i),s=!1,o=!0,l=!1,u=void 0;
try{for(var c=void 0,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,v=getComputedStyle(h);
v.textTransform!==a.textTransform&&(s=!0)}}catch(f){l=!0,u=f}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}this["#transform-heading"].disabled=!1,this["#capitalize-button"].disabled=!1,
this["#capitalize-button"].mixed=s,this["#capitalize-button"].pressed="capitalize"===a.textTransform,
this["#uppercase-button"].disabled=!1,this["#uppercase-button"].pressed="uppercase"===a.textTransform,
this["#uppercase-button"].mixed=s,this["#lowercase-button"].disabled=!1,this["#lowercase-button"].pressed="lowercase"===a.textTransform,
this["#lowercase-button"].mixed=s}else this["#transform-heading"].disabled=!0,this["#capitalize-button"].disabled=!0,
this["#capitalize-button"].mixed=!1,this["#capitalize-button"].pressed=!1,this["#uppercase-button"].disabled=!0,
this["#uppercase-button"].mixed=!1,this["#uppercase-button"].pressed=!1,this["#lowercase-button"].disabled=!0,
this["#lowercase-button"].mixed=!1,this["#lowercase-button"].pressed=!1;var m=$traceurRuntime.spread(body.canvas.selectedElements).filter(function(e){
return"text"===e.localName});if(0===m.length)this["#text-on-path-button"].pressed=!1,
this["#text-on-path-button"].disabled=!0;else{var b=!1,g=null!==m[0].querySelector("textPath"),p=!0,y=!1,_=void 0;
try{for(var x=void 0,w=m[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){var S=x.value,C=null!==S.querySelector("textPath");
if(C!==g){b=!0;break}}}catch(E){y=!0,_=E}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}this["#text-on-path-button"].pressed=g,this["#text-on-path-button"].disabled=!1,
this["#text-on-path-button"].mixed=b}},_updateDecorationSection:function(){var e,t,n=body.canvas,i=n.selectedElements,r=n.selectedTextRange,a=u("text-decoration",i,r),s=a,o=(e=s[Symbol.iterator](),
(t=e.next()).done?void 0:t.value),l=$traceurRuntime.iteratorToArray(e);if(o){var c=o.style.textDecoration,d=!1,h=!1,v=!1,f=!0,m=!1,b=void 0;
try{for(var g=void 0,p=l[Symbol.iterator]();!(f=(g=p.next()).done);f=!0){var y=(g.value,
o.style.textDecoration);c!==y&&(c.includes("underline")!==y.includes("underline")&&(d=!0),
c.includes("line-through")!==y.includes("line-through")&&(h=!0),c.includes("overline")!==y.includes("overline")&&(v=!0));
}}catch(_){m=!0,b=_}finally{try{f||null==p["return"]||p["return"]()}finally{if(m)throw b;
}}this["#decoration-heading"].disabled=!1,this["#underline-button"].disabled=!1,this["#underline-button"].mixed=d,
this["#underline-button"].pressed=c.includes("underline"),this["#line-through-button"].disabled=!1,
this["#line-through-button"].mixed=h,this["#line-through-button"].pressed=c.includes("line-through"),
this["#overline-button"].disabled=!1,this["#overline-button"].mixed=v,this["#overline-button"].pressed=c.includes("overline");
}else this["#decoration-heading"].disabled=!0,this["#underline-button"].disabled=!0,
this["#underline-button"].mixed=!1,this["#underline-button"].pressed=!1,this["#line-through-button"].disabled=!0,
this["#line-through-button"].mixed=!1,this["#line-through-button"].pressed=!1,this["#overline-button"].disabled=!0,
this["#overline-button"].mixed=!1,this["#overline-button"].pressed=!1},_updateSpacingSection:function(){
var e,t;if(!this._isChangingLetterSpacingSlider&&!this._isChangingWordSpacingSlider){
var n=this._selectedTextContentElements,i=(e=n[Symbol.iterator](),(t=e.next()).done?void 0:t.value),r=$traceurRuntime.iteratorToArray(e);
if(i){var a=getComputedStyle(i),s=a.letterSpacing;s="normal"===s?0:b(s);var o=a.wordSpacing;
o="normal"===o?0:b(o);var u=!1,c=!1,d=!0,h=!1,v=void 0;try{for(var f=void 0,m=r[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var g=f.value,p=getComputedStyle(g),y=p.letterSpacing;y="normal"===y?0:b(y);var _=p.wordSpacing;
_="normal"===_?0:b(_),y!==s&&(u=!0),_!==o&&(c=!0)}}catch(x){h=!0,v=x}finally{try{
d||null==m["return"]||m["return"]()}finally{if(h)throw v}}this["#spacing-heading"].disabled=!1,
this["#letter-spacing-heading"].disabled=!1,this["#letter-spacing-slider"].value=l(s,2),
this["#letter-spacing-slider"].mixed=u,this["#letter-spacing-slider"].disabled=!1,
this["#word-spacing-heading"].disabled=!1,this["#word-spacing-slider"].value=l(o,2),
this["#word-spacing-slider"].mixed=c,this["#word-spacing-slider"].disabled=!1}else this["#spacing-heading"].disabled=!0,
this["#letter-spacing-heading"].disabled=!0,this["#letter-spacing-slider"].value=0,
this["#letter-spacing-slider"].mixed=!1,this["#letter-spacing-slider"].disabled=!0,
this["#word-spacing-heading"].disabled=!0,this["#word-spacing-slider"].value=0,this["#word-spacing-slider"].mixed=!1,
this["#word-spacing-slider"].disabled=!0}}},{},t)}(HTMLElement),y=i("bx-typographycontrols",p);
return{get default(){return y}}}),System.registerModule("elements/bx-viewboxedithud",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t=System.get("utils/event").isMouseMoveIntentional,n=System.get("utils/math").round,i=Math.abs,r='\n  <style>@import url("stylesheets/bx-viewboxedithud.css");</style>\n\n  <path id="outer-area"></path>\n  <rect id="inner-area" width="0" height="0" x="0" y="0"></rect>\n\n  <g id="resize-grippies" opacity="0">\n    <line class="resize-grippie side-resize-grippie" data-position="left"></line>\n    <line class="resize-grippie side-resize-grippie" data-position="right"></line>\n    <line class="resize-grippie side-resize-grippie" data-position="top"></line>\n    <line class="resize-grippie side-resize-grippie" data-position="bottom"></line>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="top-left">\n      <rect width="30" height="30"></rect>\n      <path d="M 15 15 h 15 v -5 h -20 v 20 h 5 z"/>\n    </g>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="top-right">\n      <rect width="30" height="30"></rect>\n      <path d="M 0 15 h 15 v 15 h 5 v -20 h -20 z"/>\n    </g>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="bottom-left">\n      <rect width="30" height="30"></rect>\n      <path d="M 15 15 h 15 v 5 h -20 v -20 h 5 z"/>\n    </g>\n\n    <g class="resize-grippie corner-resize-grippie" data-position="bottom-right">\n      <rect width="30" height="30"></rect>\n      <path d="M 15 15 v -15 h 5 v 20 h -20 v -5 z"/>\n    </g>\n  </g>\n',a=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#inner-area"].addEventListener("mousedown",function(t){
return e._onInnerAreaMouseDown(t)}),this["#resize-grippies"].addEventListener("mousedown",function(t){
return e._onResizeGrippiesMouseDown(t)})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)}),body.canvas.addEventListener("zoomchange",this._zoomChangeListener=function(t){
e._onZoomChange()}),this["#resize-grippies"].style.opacity="1",this._update()},_onDisabled:function(){
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.removeEventListener("zoomchange",this._zoomChangeListener)},_onArtboardMutation:function(e){
e.target!==body.canvas&&e.target.parentElement!==body.canvas||this._update()},_onZoomChange:function(){
this._update()},_onInnerAreaMouseDown:function(e){var n,i,r=this;window.addEventListener("mousemove",i=function(a){
t(e,a,7)!==!1&&(window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",n),
r._onInnerAreaDragStart(e))}),window.addEventListener("mouseup",n=function(){window.removeEventListener("mousemove",i),
window.removeEventListener("mouseup",n)})},_onInnerAreaDragStart:function(e){body.canvas.undoManager.checkpoint("View box");
var t,i,r=body.registerCursor("-webkit-grabbing",900),a=body.canvas.currentArtboard.viewBox.x,s=body.canvas.currentArtboard.viewBox.y,o=body.canvas.currentArtboard.getScreenCTM().inverse(),l=body.canvas.zoom<500?0:2,u=new SVGPoint(e.clientX,e.clientY);
u=u.matrixTransform(o),window.addEventListener("mousemove",i=function(e){var t=new SVGPoint(e.clientX,e.clientY);
t=t.matrixTransform(o);var i={x:t.x-u.x,y:t.y-u.y},r=a+i.x,c=s+i.y;null!==r&&(body.canvas.currentArtboard.viewBox.x=n(r,l)),
null!==c&&(body.canvas.currentArtboard.viewBox.y=n(c,l))}),window.addEventListener("mouseup",t=function(){
window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",t),
body.unregisterCursor(r)})},_onResizeGrippiesMouseDown:function(e){body.canvas.undoManager.checkpoint("View box");
var t=e.target.closest(".resize-grippie"),r=t.getAttribute("data-position"),a=body.canvas.currentArtboard.getScreenCTM().inverse(),s=body.canvas.currentArtboard.viewBox.x,o=body.canvas.currentArtboard.viewBox.y,l=body.canvas.currentArtboard.viewBox.width,u=body.canvas.currentArtboard.viewBox.height,c=body.canvas.zoom<500?0:2,d=new SVGPoint(e.clientX,e.clientY);
d=d.matrixTransform(a);var h,v,f;"left"===r||"right"===r?f="ew-resize":"top"===r||"bottom"===r?f="ns-resize":"top-left"===r?f="nwse-resize":"top-right"===r?f="nesw-resize":"bottom-left"===r?f="nesw-resize":"bottom-right"===r&&(f="nwse-resize");
var m=body.registerCursor(f,999);window.addEventListener("mousemove",h=function(e){
var t=new SVGPoint(e.clientX,e.clientY);t=t.matrixTransform(a);var h={x:t.x-d.x,y:t.y-d.y
},v=null,f=null,m=null,b=null;"left"===r?(m=l-h.x,v=s+h.x,0>m&&(m=i(m),v=s+l)):"right"===r?(m=l+h.x,
0>m&&(m=i(m),v=s-m)):"top"===r?(b=u-h.y,f=o+h.y,0>b&&(b=i(b),f=o+u)):"bottom"===r?(b=u+h.y,
0>b&&(b=i(b),f=o-b)):"top-left"===r?(m=l-h.x,b=u-h.y,v=s+h.x,f=o+h.y,0>m&&(m=i(m),
v=s+l),0>b&&(b=i(b),f=o+u)):"top-right"===r?(m=l+h.x,b=u-h.y,f=o+h.y,0>m&&(m=i(m),
v=s-m),0>b&&(b=i(b),f=o+u)):"bottom-left"===r?(m=l-h.x,b=u+h.y,v=s+h.x,0>m&&(m=i(m),
v=s+l),0>b&&(b=i(b),f=o-b)):"bottom-right"===r&&(m=l+h.x,b=u+h.y,0>m&&(m=i(m),v=s-m),
0>b&&(b=i(b),f=o-b)),null!==v&&(body.canvas.currentArtboard.viewBox.x=n(v,c)),null!==f&&(body.canvas.currentArtboard.viewBox.y=n(f,c)),
null!==m&&(body.canvas.currentArtboard.viewBox.width=n(m,c)),null!==b&&(body.canvas.currentArtboard.viewBox.height=n(b,c));
}),window.addEventListener("mouseup",v=function(){window.removeEventListener("mousemove",h),
window.removeEventListener("mouseup",v),body.unregisterCursor(m)})},_update:function(){
if(body.canvas.currentArtboard.hasAttribute("viewBox")===!1)this.style.visibility="hidden";else{
this.style.visibility="visible";var e=body.canvas.currentArtboard.viewBox,t=e.x,n=e.y,i=e.width,r=e.height;
this["#inner-area"].setAttribute("x",t),this["#inner-area"].setAttribute("y",n),this["#inner-area"].setAttribute("width",i),
this["#inner-area"].setAttribute("height",r);var a=1e6,s="\n        M "+-a+", "+-a+"\n        L "+2*a+", "+-a+"\n        L "+2*a+", "+2*a+"\n        L "+-a+", "+2*a+"\n        Z\n        M "+t+", "+n+"\n        L "+t+", "+(n+r)+"\n        L "+(t+i)+", "+(n+r)+"\n        L "+(t+i)+", "+n+"\n        Z\n      ";
this["#outer-area"].setAttribute("d",s);var o=(10/body.canvas.scale,!0),l=!1,u=void 0;
try{for(var c=void 0,d=this["#resize-grippies"].children[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=h.getAttribute("data-position");if("left"===v)h.x1.baseVal.value=t,
h.y1.baseVal.value=n,h.x2.baseVal.value=t,h.y2.baseVal.value=n+r;else if("right"===v)h.x1.baseVal.value=t+i,
h.y1.baseVal.value=n,h.x2.baseVal.value=t+i,h.y2.baseVal.value=n+r;else if("top"===v)h.x1.baseVal.value=t,
h.y1.baseVal.value=n,h.x2.baseVal.value=t+i,h.y2.baseVal.value=n;else if("bottom"===v)h.x1.baseVal.value=t,
h.y1.baseVal.value=n+r,h.x2.baseVal.value=t+i,h.y2.baseVal.value=n+r;else if("top-left"===v){
var f=new SVGMatrix;f.scaleSelf(1/body.canvas.scale,t,n),f.translateSelf(t-15,n-15),
h.setAttribute("transform",f.toString())}else if("top-right"===v){var m=new SVGMatrix;
m.scaleSelf(1/body.canvas.scale,t+i,n),m.translateSelf(t+i-15,n-15),h.setAttribute("transform",m.toString());
}else if("bottom-left"===v){var b=new SVGMatrix;b.scaleSelf(1/body.canvas.scale,t,n+r),
b.translateSelf(t-15,n+r-15),h.setAttribute("transform",b.toString())}else if("bottom-right"===v){
var g=new SVGMatrix;g.scaleSelf(1/body.canvas.scale,t+i,n+r),g.translateSelf(t+i-15,n+r-15),
h.setAttribute("transform",g.toString())}}}catch(p){l=!0,u=p}finally{try{o||null==d["return"]||d["return"]();
}finally{if(l)throw u}}}}},{},e)}(SVGGElement),s=e("g","bx-viewboxedithud",a);return{
get default(){return s}}}),System.registerModule("elements/bx-viewboxhud",[],function(){
"use strict";var e=System.get("utils/element").registerElement,t='\n  <style>@import url("stylesheets/bx-viewboxhud.css");</style>\n  <rect id="outline" width="0" height="0" x="0" y="0"></rect>\n  <path id="overlay"></path>\n',n=function(e){
function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)}return $traceurRuntime.createClass(n,{
createdCallback:function(){this._shadowRoot=this.createShadowRoot({mode:"closed"}),
this._shadowRoot.innerHTML=t;var e=!0,n=!1,i=void 0;try{for(var r=void 0,a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){
var s=r.value;this["#"+s.id]=s}}catch(o){n=!0,i=o}finally{try{e||null==a["return"]||a["return"]();
}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d=void 0,h=this.attributes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;this.attributeChangedCallback(v.name)}}catch(f){u=!0,c=f}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}},attributeChangedCallback:function(e){
"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())},get enabled(){
return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t)})},_onDisabled:function(){body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener);
},_onArtboardMutation:function(e){e.target!==body.canvas&&e.target.parentElement!==body.canvas||this._update();
},_update:function(){body.canvas.currentArtboard.hasAttribute("viewBox")?(this["#outline"].setAttribute("width",body.canvas.currentArtboard.viewBox.width),
this["#outline"].setAttribute("height",body.canvas.currentArtboard.viewBox.height),
this["#outline"].setAttribute("x",body.canvas.currentArtboard.viewBox.x),this["#outline"].setAttribute("y",body.canvas.currentArtboard.viewBox.y)):(this["#outline"].setAttribute("width",0),
this["#outline"].setAttribute("height",0),this["#outline"].setAttribute("x",-99999),
this["#outline"].setAttribute("y",-99999))}},{},e)}(SVGGElement),i=e("g","bx-viewboxhud",n);
return{get default(){return i}}}),System.registerModule("elements/bx-viewcontrols",[],function(){
"use strict";System.get("elements/bx-alignmentselect"),System.get("elements/bx-checkbox"),
System.get("elements/bx-select"),System.get("elements/bx-slider"),System.get("elements/bx-switch"),
System.get("elements/bx-input");var e=System.get("utils/element").registerElement,t=System.get("utils/math").round,n={
1:"none",2:"xMinYMin",3:"xMidYMin",4:"xMaxYMin",5:"xMinYMid",6:"xMidYMid",7:"xMaxYMid",
8:"xMinYMax",9:"xMidYMax",10:"xMaxYMax"},i={0:"",1:"",2:"%",3:"ems",4:"exs",5:"px",
6:"cm",7:"mm",8:"in",9:"pt",10:"pc"},r='\n  <style>\n    @import url("stylesheets/controls.css");\n    @import url("stylesheets/bx-viewcontrols.css");\n  </style>\n\n  <main>\n    <section id="view-box-section">\n      <div class="row-div">\n        <h2>View box</h2>\n        <bx-switch id="view-box-switch"></bx-switch>\n      </div>\n\n      <div class="row-div">\n        <div id="view-box-x-div">\n          <h3 id="view-box-x-heading">X</h3>\n\n          <bx-slider\n            id="view-box-x-slider"\n            title="View box X"\n            value="0"\n            precision="0">\n          </bx-slider>\n        </div>\n\n        <div id="view-box-y-div">\n          <h3 id="view-box-y-heading">Y</h3>\n\n          <bx-slider\n            id="view-box-y-slider"\n            title="View box Y"\n            value="0"\n            precision="0">\n          </bx-slider>\n        </div>\n\n        <div id="view-box-width-div">\n          <h3 id="view-box-width-heading">↔</h3>\n\n          <bx-slider\n            id="view-box-width-slider"\n            title="View box Width"\n            value="0"\n            precision="0">\n          </bx-slider>\n        </div>\n\n        <div id="view-box-height-div">\n          <h3 id="view-box-height-heading">↕</h3>\n\n          <bx-slider\n            id="view-box-height-slider"\n            title="View box Height"\n            value="0"\n            precision="0">\n          </bx-slider>\n        </div>\n      </div>\n    </section>\n\n    <section id="aspect-ratio-section">\n      <div class="row-div">\n        <h2 id="preserve-aspect-ratio-heading">Preserve aspect ratio</h2>\n        <bx-switch id="preserve-aspect-ratio-switch"></bx-switch>\n      </div>\n\n      <h3 id="align-heading">Align</h3>\n      <div class="row-div">\n        <bx-alignmentselect id="align-select"></bx-alignmentselect>\n        <bx-checkbox label="Slice" id="slice-checkbox"></bx-checkbox>\n      </div>\n    </section>\n\n    <section id="viewport-section">\n      <h2>Viewport</h2>\n\n      <div id="viewport-width-div">\n        <div class="row-div">\n          <h3>Width</h2>\n          <bx-switch id="viewport-width-switch"></bx-switch>\n        </div>\n\n        <div class="row-div">\n          <bx-slider\n            id="viewport-width-slider"\n            title="Viewport Width"\n            value="0"\n            min="0"\n            precision="0">\n          </bx-slider>\n\n          <bx-select id="viewport-width-unit-select" value="px">\n            <bx-selectitem value="px"  label="px"></bx-selectitem>\n            <bx-selectitem value="cm"  label="cm"></bx-selectitem>\n            <bx-selectitem value="mm"  label="mm"></bx-selectitem>\n            <bx-selectitem value="in"  label="in"></bx-selectitem>\n            <bx-selectitem value="pt"  label="pt"></bx-selectitem>\n            <bx-selectitem value="pc"  label="pc"></bx-selectitem>\n            <bx-selectitem value="ems" label="ems"></bx-selectitem>\n            <bx-selectitem value="exs" label="exs"></bx-selectitem>\n            <bx-selectitem value="%"   label="%"></bx-selectitem>\n            <bx-selectitem value=""    label=" "></bx-selectitem>\n          </bx-select>\n        </div>\n      </div>\n\n      <div id="viewport-height-div">\n        <div class="row-div">\n          <h3>Height</h2>\n          <bx-switch id="viewport-height-switch"></bx-switch>\n        </div>\n\n        <div class="row-div">\n          <bx-slider\n            id="viewport-height-slider"\n            title="Viewport Height"\n            value="0"\n            min="0"\n            precision="0">\n          </bx-slider>\n\n          <bx-select id="viewport-height-unit-select" value="px">\n            <bx-selectitem value="px"  label="px"></bx-selectitem>\n            <bx-selectitem value="cm"  label="cm"></bx-selectitem>\n            <bx-selectitem value="mm"  label="mm"></bx-selectitem>\n            <bx-selectitem value="in"  label="in"></bx-selectitem>\n            <bx-selectitem value="pt"  label="pt"></bx-selectitem>\n            <bx-selectitem value="pc"  label="pc"></bx-selectitem>\n            <bx-selectitem value="ems" label="ems"></bx-selectitem>\n            <bx-selectitem value="exs" label="exs"></bx-selectitem>\n            <bx-selectitem value="%"   label="%"></bx-selectitem>\n            <bx-selectitem value=""    label=" "></bx-selectitem>\n          </bx-select>\n        </div>\n      </div>\n    </section>\n  </main>\n',a=function(e){
function a(){$traceurRuntime.superConstructor(a).apply(this,arguments)}return $traceurRuntime.createClass(a,{
createdCallback:function(){var e=this;this._shadowRoot=this.createShadowRoot({mode:"closed"
}),this._shadowRoot.innerHTML=r;var t=!0,n=!1,i=void 0;try{for(var a=void 0,s=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){
var o=a.value;this["#"+o.id]=o}}catch(l){n=!0,i=l}finally{try{t||null==s["return"]||s["return"]();
}finally{if(n)throw i}}var u=!0,c=!1,d=void 0;try{for(var h=void 0,v=this.attributes[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;this.attributeChangedCallback(f.name)}}catch(m){c=!0,d=m}finally{try{
u||null==v["return"]||v["return"]()}finally{if(c)throw d}}this["#view-box-switch"].addEventListener("change",function(){
return e._onViewBoxSwitchChange()}),this["#view-box-x-slider"].addEventListener("changestart",function(){
return e._onViewBoxXSliderChangeStart()}),this["#view-box-y-slider"].addEventListener("changestart",function(){
return e._onViewBoxYSliderChangeStart()}),this["#view-box-width-slider"].addEventListener("changestart",function(){
return e._onViewBoxWidthSliderChangeStart()}),this["#view-box-height-slider"].addEventListener("changestart",function(){
return e._onViewBoxHeightSliderChangeStart()}),this["#viewport-width-switch"].addEventListener("change",function(){
return e._onViewportWidthSwitchChange()}),this["#viewport-width-slider"].addEventListener("changestart",function(){
return e._onViewportWidthSliderChangeStart()}),this["#viewport-width-unit-select"].addEventListener("change",function(){
return e._onViewportWidthUnitSelectChange()}),this["#viewport-height-switch"].addEventListener("change",function(){
return e._onViewportHeightSwitchChange()}),this["#viewport-height-slider"].addEventListener("changestart",function(){
return e._onViewportHeightSliderChangeStart()}),this["#viewport-height-unit-select"].addEventListener("change",function(){
return e._onViewportHeightUnitSelectChange()}),this["#preserve-aspect-ratio-switch"].addEventListener("change",function(){
return e._onPreserveAspectRatioSwitchChange()}),this["#slice-checkbox"].addEventListener("change",function(){
return e._onSliceCheckboxChange()}),this["#align-select"].addEventListener("change",function(){
return e._onAlignSelectChange()})},attributeChangedCallback:function(e){"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled());
},get enabled(){return this.hasAttribute("enabled")},set enabled(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled");
},_onEnabled:function(){var e=this;this._isChangingSlider=!1,this._update(),this._toggleViewboxHud(),
body.addEventListener("toolchange",this._toolChangeListener=function(){e._toggleViewboxHud();
}),body.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){
e._onArtboardMutation(t.detail)})},_onDisabled:function(){body.removeEventListener("toolchange",this._toolChangeListener),
body.canvas.removeEventListener("artboardmutation",this._artboardMutationListener),
body.canvas.disableHud("viewbox-edit-hud")},_onArtboardMutation:function(e){this._isChangingSlider||e.target!==body.canvas.artboards&&e.target.parentNode!==body.canvas.artboards||this._update();
},_onViewBoxSwitchChange:function(){body.canvas.undoManager.checkpoint("View box"),
this["#view-box-switch"].toggled===!0?this._lastViewBox?body.canvas.currentArtboard.setAttribute("viewBox",this._lastViewBox):body.canvas.currentArtboard.setAttribute("viewBox","0 0 500 500"):(this._lastViewBox=body.canvas.currentArtboard.getAttribute("viewBox"),
body.canvas.currentArtboard.removeAttribute("viewBox"))},_onViewBoxXSliderChangeStart:function(e){
var t,n,i=this,r=this["#view-box-x-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",t=function(){body.canvas.currentArtboard.viewBox.x=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",t),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewBoxYSliderChangeStart:function(e){
var t,n,i=this,r=this["#view-box-y-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",t=function(){body.canvas.currentArtboard.viewBox.y=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",t),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewBoxWidthSliderChangeStart:function(e){
var t,n,i=this,r=this["#view-box-width-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",t=function(){body.canvas.currentArtboard.viewBox.width=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",t),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewBoxHeightSliderChangeStart:function(e){
var t,n,i=this,r=this["#view-box-height-slider"];body.canvas.undoManager.checkpoint("View Box"),
this._isChangingSlider=!0,r.addEventListener("change",t=function(){body.canvas.currentArtboard.viewBox.height=r.value;
}),r.addEventListener("changeend",n=function(){r.removeEventListener("change",t),
r.removeEventListener("changeend",n),i._isChangingSlider=!1})},_onViewportWidthSwitchChange:function(){
body.canvas.undoManager.checkpoint("Viewport width"),this["#viewport-width-switch"].toggled===!0?this._lastViewportWidth?body.canvas.currentArtboard.setAttribute("width",this._lastViewportWidth):body.canvas.currentArtboard.setAttribute("width","500px"):(this._lastViewportWidth=body.canvas.currentArtboard.getAttribute("width"),
body.canvas.currentArtboard.removeAttribute("width"))},_onViewportWidthSliderChangeStart:function(){
var e,t,n=this,i=this["#viewport-width-slider"],r=this["#viewport-width-unit-select"];
body.canvas.undoManager.checkpoint("Viewport width"),this._isChangingSlider=!0,i.addEventListener("change",e=function(){
body.canvas.currentArtboard.setAttribute("width",i.value+r.value)}),i.addEventListener("changeend",t=function(){
i.removeEventListener("change",e),i.removeEventListener("changeend",t),n._isChangingSlider=!1;
})},_onViewportWidthUnitSelectChange:function(){var e=this["#viewport-width-slider"],t=this["#viewport-width-unit-select"];
body.canvas.undoManager.checkpoint("Viewport width unit"),body.canvas.currentArtboard.setAttribute("width",e.value+t.value);
},_onViewportHeightSwitchChange:function(){body.canvas.undoManager.checkpoint("Viewport height"),
this["#viewport-height-switch"].toggled===!0?this._lastViewportHeight?body.canvas.currentArtboard.setAttribute("height",this._lastViewportHeight):body.canvas.currentArtboard.setAttribute("height","500px"):(this._lastViewportHeight=body.canvas.currentArtboard.getAttribute("height"),
body.canvas.currentArtboard.removeAttribute("height"))},_onViewportHeightSliderChangeStart:function(){
var e,t,n=this,i=this["#viewport-height-slider"],r=this["#viewport-height-unit-select"];
body.canvas.undoManager.checkpoint("Viewport height"),this._isChangingSlider=!0,i.addEventListener("change",e=function(){
body.canvas.currentArtboard.setAttribute("height",i.value+r.value)}),i.addEventListener("changeend",t=function(){
i.removeEventListener("change",e),i.removeEventListener("changeend",t),n._isChangingSlider=!1;
})},_onViewportHeightUnitSelectChange:function(){var e=this["#viewport-height-slider"],t=this["#viewport-height-unit-select"];
body.canvas.undoManager.checkpoint("Viewport height unit"),body.canvas.currentArtboard.setAttribute("height",e.value+t.value);
},_onPreserveAspectRatioSwitchChange:function(){body.canvas.undoManager.checkpoint("Preserve aspect ratio"),
this["#preserve-aspect-ratio-switch"].toggled?this._lastAspectRatio?body.canvas.currentArtboard.setAttribute("preserveAspectRatio",this._lastAspectRatio):body.canvas.currentArtboard.removeAttribute("preserveAspectRatio"):(this._lastAspectRatio=body.canvas.currentArtboard.getAttribute("preserveAspectRatio"),
body.canvas.currentArtboard.setAttribute("preserveAspectRatio","none"))},_onSliceCheckboxChange:function(){
if(body.canvas.undoManager.checkpoint("Slice"),"xMidYMid"===this["#align-select"].value&&this["#slice-checkbox"].checked===!1)body.canvas.currentArtboard.removeAttribute("preserveAspectRatio");else{
var e=this["#align-select"].value;"none"!==e&&this["#slice-checkbox"].checked&&(e+=" slice"),
body.canvas.currentArtboard.setAttribute("preserveAspectRatio",e)}},_onAlignSelectChange:function(){
if(body.canvas.undoManager.checkpoint("Align"),"xMidYMid"===this["#align-select"].value&&this["#slice-checkbox"].checked===!1)body.canvas.currentArtboard.removeAttribute("preserveAspectRatio");else{
var e=this["#align-select"].value;"none"!==e&&this["#slice-checkbox"].checked&&(e+=" slice"),
body.canvas.currentArtboard.setAttribute("preserveAspectRatio",e)}},_update:function(){
this._updateViewBoxSection(),this._updateViewportSection(),this._updateAspectRatioSection();
},_updateViewBoxSection:function(){body.canvas.currentArtboard.hasAttribute("viewBox")?(this["#view-box-switch"].toggled=!0,
this["#view-box-x-slider"].value=t(body.canvas.currentArtboard.viewBox.x,4),this["#view-box-x-slider"].disabled=!1,
this["#view-box-x-heading"].disabled=!1,this["#view-box-y-slider"].value=t(body.canvas.currentArtboard.viewBox.y,4),
this["#view-box-y-slider"].disabled=!1,this["#view-box-y-heading"].disabled=!1,this["#view-box-width-slider"].value=t(body.canvas.currentArtboard.viewBox.width,4),
this["#view-box-width-slider"].disabled=!1,this["#view-box-width-heading"].disabled=!1,
this["#view-box-height-slider"].value=t(body.canvas.currentArtboard.viewBox.height,4),
this["#view-box-height-slider"].disabled=!1,this["#view-box-height-heading"].disabled=!1):(this["#view-box-switch"].toggled=!1,
this["#view-box-x-slider"].value=0,this["#view-box-x-slider"].disabled=!0,this["#view-box-x-heading"].disabled=!0,
this["#view-box-y-slider"].value=0,this["#view-box-y-slider"].disabled=!0,this["#view-box-y-heading"].disabled=!0,
this["#view-box-width-slider"].value=0,this["#view-box-width-slider"].disabled=!0,
this["#view-box-width-heading"].disabled=!0,this["#view-box-height-slider"].value=0,
this["#view-box-height-slider"].disabled=!0,this["#view-box-height-heading"].disabled=!0);
},_updateViewportSection:function(){body.canvas.currentArtboard!==body.canvas.masterArtboard?this["#viewport-section"].hidden=!0:(this["#viewport-section"].hidden=!1,
body.canvas.currentArtboard.hasAttribute("width")===!1?(this["#viewport-width-slider"].disabled=!0,
this["#viewport-width-slider"].value=0,this["#viewport-width-switch"].toggled=!1,
this["#viewport-width-unit-select"].disabled=!0,this["#viewport-width-unit-select"].value="px"):(this["#viewport-width-slider"].disabled=!1,
this["#viewport-width-slider"].value=body.canvas.currentArtboard.width.valueInSpecifiedUnits,
this["#viewport-width-switch"].toggled=!0,this["#viewport-width-unit-select"].disabled=!1,
this["#viewport-width-unit-select"].value=i[body.canvas.currentArtboard.width.unitType]),
body.canvas.currentArtboard.hasAttribute("height")===!1?(this["#viewport-height-slider"].disabled=!0,
this["#viewport-height-slider"].value=0,this["#viewport-height-switch"].toggled=!1,
this["#viewport-height-unit-select"].disabled=!0,this["#viewport-height-unit-select"].value="px"):(this["#viewport-height-slider"].disabled=!1,
this["#viewport-height-slider"].value=body.canvas.currentArtboard.height.valueInSpecifiedUnits,
this["#viewport-height-switch"].toggled=!0,this["#viewport-height-unit-select"].disabled=!1,
this["#viewport-height-unit-select"].value=i[body.canvas.currentArtboard.height.unitType]));
},_updateAspectRatioSection:function(){body.canvas.currentArtboard.hasAttribute("viewBox")===!1?(this["#preserve-aspect-ratio-heading"].disabled=!0,
this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!0,
this["#slice-checkbox"].checked=!1,this["#slice-checkbox"].disabled=!0,this["#align-heading"].disabled=!0,
this["#align-select"].value=null,this["#align-select"].disabled=!0):"none"===n[body.canvas.currentArtboard.preserveAspectRatio.align]?(this["#preserve-aspect-ratio-heading"].disabled=!1,
this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!1,
this["#align-heading"].disabled=!0,this["#align-select"].value=null,this["#align-select"].disabled=!0,
this["#slice-checkbox"].checked=!1,this["#slice-checkbox"].disabled=!0):(this["#preserve-aspect-ratio-heading"].disabled=!1,
this["#preserve-aspect-ratio-switch"].toggled=!0,this["#preserve-aspect-ratio-switch"].disabled=!1,
this["#align-heading"].disabled=!1,this["#align-select"].value=n[body.canvas.currentArtboard.preserveAspectRatio.align],
this["#align-select"].disabled=!1,this["#slice-checkbox"].checked=2===body.canvas.currentArtboard.preserveAspectRatio.meetOrSlice,
this["#slice-checkbox"].disabled=!1)},_toggleViewboxHud:function(){"transform-tool"===body.currentTool.id||"edit-tool"===body.currentTool.id?body.canvas.enableHud("viewbox-edit-hud"):body.canvas.disableHud("viewbox-edit-hud");
}},{},e)}(HTMLElement),s=e("bx-viewcontrols",a);return{get default(){return s}}}),
System.registerModule("libs/opentype",[],function(){"use strict";!function(e){if("object"===("undefined"==typeof exports?"undefined":$traceurRuntime["typeof"](exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{
var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,
t.opentype=e()}}(function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){
var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);
var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={
exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i);
}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);
return r}({1:[function(e,t,n){function i(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288);
}function r(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,
this.destLen=0,this.ltree=new i,this.dtree=new i}function a(e,t,n,i){var r,a;for(r=0;n>r;++r)e[r]=0;
for(r=0;30-n>r;++r)e[r+n]=r/n|0;for(a=i,r=0;30>r;++r)t[r]=a,a+=1<<e[r]}function s(e,t){
var n;for(n=0;7>n;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,
n=0;24>n;++n)e.trans[n]=256+n;for(n=0;144>n;++n)e.trans[24+n]=n;for(n=0;8>n;++n)e.trans[168+n]=280+n;
for(n=0;112>n;++n)e.trans[176+n]=144+n;for(n=0;5>n;++n)t.table[n]=0;for(t.table[5]=32,
n=0;32>n;++n)t.trans[n]=n}function o(e,t,n,i){var r,a;for(r=0;16>r;++r)e.table[r]=0;
for(r=0;i>r;++r)e.table[t[n+r]]++;for(e.table[0]=0,a=0,r=0;16>r;++r)k[r]=a,a+=e.table[r];
for(r=0;i>r;++r)t[n+r]&&(e.trans[k[t[n+r]]++]=r)}function l(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],
e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function u(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,
e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+n}function c(e,t){
for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,i=0,r=0,a=e.tag;
do i=2*i+(1&a),a>>>=1,++r,n+=t.table[r],i-=t.table[r];while(i>=0);return e.tag=a,
e.bitcount-=r,t.trans[n+i]}function d(e,t,n){var i,r,a,s,l,d;for(i=u(e,5,257),r=u(e,5,1),
a=u(e,4,4),s=0;19>s;++s)E[s]=0;for(s=0;a>s;++s){var h=u(e,3,0);E[S[s]]=h}for(o(C,E,0,19),
l=0;i+r>l;){var v=c(e,C);switch(v){case 16:var f=E[l-1];for(d=u(e,2,3);d;--d)E[l++]=f;
break;case 17:for(d=u(e,3,3);d;--d)E[l++]=0;break;case 18:for(d=u(e,7,11);d;--d)E[l++]=0;
break;default:E[l++]=v}}o(t,E,0,i),o(n,E,i,r)}function h(e,t,n){for(;;){var i=c(e,t);
if(256===i)return m;if(256>i)e.dest[e.destLen++]=i;else{var r=void 0,a=void 0,s=void 0,o=void 0;
for(i-=257,r=u(e,y[i],_[i]),a=c(e,n),s=e.destLen-u(e,x[a],w[a]),o=s;s+r>o;++o)e.dest[e.destLen++]=e.dest[o];
}}}function v(e){for(var t,n,i;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],
t=256*t+e.source[e.sourceIndex],n=e.source[e.sourceIndex+3],n=256*n+e.source[e.sourceIndex+2],
t!==(65535&~n))return b;for(e.sourceIndex+=4,i=t;i;--i)e.dest[e.destLen++]=e.source[e.sourceIndex++];
return e.bitcount=0,m}function f(e,t){var n,i,a=new r(e,t);do{switch(n=l(a),btype=u(a,2,0),
btype){case 0:i=v(a);break;case 1:i=h(a,g,p);break;case 2:d(a,a.ltree,a.dtree),i=h(a,a.ltree,a.dtree);
break;default:i=b}if(i!==m)throw new Error("Data error")}while(!n);return a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest;
}var m=0,b=-3,g=new i,p=new i,y=new Uint8Array(30),_=new Uint16Array(30),x=new Uint8Array(30),w=new Uint16Array(30),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new i,E=new Uint8Array(320),k=new Uint16Array(16);
s(g,p),a(y,_,4,3),a(x,w,2,1),y[28]=0,_[28]=258,t.exports=f},{}],2:[function(e,t,n){
n.argument=function(e,t){if(!e)throw new Error(t)},n.assert=n.argument},{}],3:[function(e,t,n){
function i(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(i,r),e.stroke()}n.line=i;
},{}],4:[function(e,t,n){function i(e){this.font=e}function r(e){this.cmap=e}function a(e,t){
this.encoding=e,this.charset=t}function s(e){var t;switch(e.version){case 1:this.names=n.standardNames.slice();
break;case 2:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<n.standardNames.length?this.names[t]=n.standardNames[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-n.standardNames.length];
break;case 2.5:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)this.names[t]=n.standardNames[t+e.glyphNameIndex[t]];
break;case 3:this.names=[]}}function o(e){for(var t,n=e.tables.cmap.glyphIndexMap,i=Object.keys(n),r=0;r<i.length;r+=1){
var a=i[r],s=n[a];t=e.glyphs.get(s),t.addUnicode(parseInt(a))}for(r=0;r<e.glyphs.length;r+=1)t=e.glyphs.get(r),
e.cffEncoding?t.name=e.cffEncoding.charset[r]:t.name=e.glyphNames.glyphIndexToName(r);
}var l=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],u=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],d=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];
i.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),n=this.font.glyphs;
if(!n)return null;for(var i=0;i<n.length;i+=1)for(var r=n.get(i),a=0;a<r.unicodes.length;a+=1)if(r.unicodes[a]===t)return i;
},r.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0;
},a.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),n=this.encoding[t];
return this.charset.indexOf(n)},s.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e);
},s.prototype.glyphIndexToName=function(e){return this.names[e]},n.cffStandardStrings=l,
n.cffStandardEncoding=u,n.cffExpertEncoding=c,n.standardNames=d,n.DefaultEncoding=i,
n.CmapEncoding=r,n.CffEncoding=a,n.GlyphNames=s,n.addGlyphNames=o},{}],5:[function(e,t,n){
function i(e){e=e||{},e.empty||(l.checkArgument(e.familyName,"When creating a new Font object, familyName is required."),
l.checkArgument(e.styleName,"When creating a new Font object, styleName is required."),
l.checkArgument(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),
l.checkArgument(e.ascender,"When creating a new Font object, ascender is required."),
l.checkArgument(e.descender,"When creating a new Font object, descender is required."),
l.checkArgument(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={
fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName
},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "
},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{
en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "
},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{
en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,
this.ascender=e.ascender,this.descender=e.descender),this.supported=!0,this.glyphs=new o.GlyphSet(this,e.glyphs||[]),
this.encoding=new s.DefaultEncoding(this),this.tables={}}var r=e("./path"),a=e("./tables/sfnt"),s=e("./encoding"),o=e("./glyphset"),l=e("./util");
i.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},
i.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e);
},i.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);
return n||(n=this.glyphs.get(0)),n},i.prototype.stringToGlyphs=function(e){for(var t=[],n=0;n<e.length;n+=1){
var i=e[n];t.push(this.charToGlyph(i))}return t},i.prototype.nameToGlyphIndex=function(e){
return this.glyphNames.nameToGlyphIndex(e)},i.prototype.nameToGlyph=function(e){var t=this.nametoGlyphIndex(e),n=this.glyphs.get(t);
return n||(n=this.glyphs.get(0)),n},i.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):"";
},i.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.getGposKerningValue;
return n?n(e,t):this.kerningPairs[e+","+t]||0},i.prototype.forEachGlyph=function(e,t,n,i,r,a){
t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:72,r=r||{};for(var s=void 0===r.kerning?!0:r.kerning,o=1/this.unitsPerEm*i,l=this.stringToGlyphs(e),u=0;u<l.length;u+=1){
var c=l[u];if(a(c,t,n,i,r),c.advanceWidth&&(t+=c.advanceWidth*o),s&&u<l.length-1){
var d=this.getKerningValue(c,l[u+1]);t+=d*o}}},i.prototype.getPath=function(e,t,n,i,a){
var s=new r.Path;return this.forEachGlyph(e,t,n,i,a,function(e,t,n,i){var r=e.getPath(t,n,i);
s.extend(r)}),s},i.prototype.getPaths=function(e,t,n,i,r){var a=[];return this.forEachGlyph(e,t,n,i,r,function(e,t,n,i){
var r=e.getPath(t,n,i);a.push(r)}),a},i.prototype.draw=function(e,t,n,i,r,a){this.getPath(t,n,i,r,a).draw(e);
},i.prototype.drawPoints=function(e,t,n,i,r,a){this.forEachGlyph(t,n,i,r,a,function(t,n,i,r){
t.drawPoints(e,n,i,r)})},i.prototype.drawMetrics=function(e,t,n,i,r,a){this.forEachGlyph(t,n,i,r,a,function(t,n,i,r){
t.drawMetrics(e,n,i,r)})},i.prototype.getEnglishName=function(e){var t=this.names[e];
return t?t.en:void 0},i.prototype.validate=function(){function e(e,t){e||n.push(t);
}function t(t){var n=i.getEnglishName(t);e(n&&n.trim().length>0,"No English "+t+" specified.");
}var n=[],i=this;t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),
t("version"),e(this.unitsPerEm>0,"No unitsPerEm specified.")},i.prototype.toTables=function(){
return a.fontToTable(this)},i.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),
this.toArrayBuffer()},i.prototype.toArrayBuffer=function(){for(var e=this.toTables(),t=e.encode(),n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t[r];
return n},i.prototype.download=function(){var t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily"),i=t.replace(/\s/g,"")+"-"+n+".otf",r=this.toArrayBuffer();
if(l.isBrowser())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,
window.requestFileSystem(window.TEMPORARY,r.byteLength,function(e){e.root.getFile(i,{
create:!0},function(e){e.createWriter(function(t){var n=new DataView(r),i=new Blob([n],{
type:"font/opentype"});t.write(i),t.addEventListener("writeend",function(){location.href=e.toURL();
},!1)})})},function(e){throw e});else{var a=e("fs"),s=l.arrayBufferToNodeBuffer(r);
a.writeFileSync(i,s)}},n.Font=i},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":27,
"./util":29,fs:void 0}],6:[function(e,t,n){function i(e,t){var n=t||{commands:[]};
return{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){
n=e}}}function r(e){this.bindConstructorValues(e)}var a=e("./check"),s=e("./draw"),o=e("./path");
r.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,
this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],
e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),
e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",i(this,e.path));
},r.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e);
},r.prototype.getPath=function(e,t,n){e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;
for(var i=1/this.path.unitsPerEm*n,r=new o.Path,a=this.path.commands,s=0;s<a.length;s+=1){
var l=a[s];"M"===l.type?r.moveTo(e+l.x*i,t+-l.y*i):"L"===l.type?r.lineTo(e+l.x*i,t+-l.y*i):"Q"===l.type?r.quadraticCurveTo(e+l.x1*i,t+-l.y1*i,e+l.x*i,t+-l.y*i):"C"===l.type?r.curveTo(e+l.x1*i,t+-l.y1*i,e+l.x2*i,t+-l.y2*i,e+l.x*i,t+-l.y*i):"Z"===l.type&&r.closePath();
}return r},r.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){
var i=this.points[n];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return a.argument(0===t.length,"There are still points left in the current contour."),
e},r.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],i=0;i<e.length;i+=1){
var r=e[i];"Z"!==r.type&&(t.push(r.x),n.push(r.y)),"Q"!==r.type&&"C"!==r.type||(t.push(r.x1),
n.push(r.y1)),"C"===r.type&&(t.push(r.x2),n.push(r.y2))}var a={xMin:Math.min.apply(null,t),
yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),
leftSideBearing:this.leftSideBearing};return isFinite(a.xMin)||(a.xMin=0),isFinite(a.xMax)||(a.xMax=this.advanceWidth),
isFinite(a.yMin)||(a.yMin=0),isFinite(a.yMax)||(a.yMax=0),a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),
a},r.prototype.draw=function(e,t,n,i){this.getPath(t,n,i).draw(e)},r.prototype.drawPoints=function(e,t,n,i){
function r(t,n,i,r){var a=2*Math.PI;e.beginPath();for(var s=0;s<t.length;s+=1)e.moveTo(n+t[s].x*r,i+t[s].y*r),
e.arc(n+t[s].x*r,i+t[s].y*r,2,0,a,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,
i=void 0!==i?i:24;for(var a=1/this.path.unitsPerEm*i,s=[],o=[],l=this.path,u=0;u<l.commands.length;u+=1){
var c=l.commands[u];void 0!==c.x&&s.push({x:c.x,y:-c.y}),void 0!==c.x1&&o.push({x:c.x1,
y:-c.y1}),void 0!==c.x2&&o.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",r(s,t,n,a),e.fillStyle="red",
r(o,t,n,a)},r.prototype.drawMetrics=function(e,t,n,i){var r;t=void 0!==t?t:0,n=void 0!==n?n:0,
i=void 0!==i?i:24,r=1/this.path.unitsPerEm*i,e.lineWidth=1,e.strokeStyle="black",
s.line(e,t,-1e4,t,1e4),s.line(e,-1e4,n,1e4,n);var a=this.xMin||0,o=this.yMin||0,l=this.xMax||0,u=this.yMax||0,c=this.advanceWidth||0;
e.strokeStyle="blue",s.line(e,t+a*r,-1e4,t+a*r,1e4),s.line(e,t+l*r,-1e4,t+l*r,1e4),
s.line(e,-1e4,n+-o*r,1e4,n+-o*r),s.line(e,-1e4,n+-u*r,1e4,n+-u*r),e.strokeStyle="green",
s.line(e,t+c*r,-1e4,t+c*r,1e4)},n.Glyph=r},{"./check":2,"./draw":3,"./path":10}],
7:[function(e,t,n){function i(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];
this.length=t&&t.length||0}function r(e,t){return new o.Glyph({index:t,font:e})}function a(e,t,n,i,r,a){
return function(){var s=new o.Glyph({index:t,font:e});return s.path=function(){n(s,i,r);
var t=a(e.glyphs,s);return t.unitsPerEm=e.unitsPerEm,t},s}}function s(e,t,n,i){return function(){
var r=new o.Glyph({index:t,font:e});return r.path=function(){var t=n(e,r,i);return t.unitsPerEm=e.unitsPerEm,
t},r}}var o=e("./glyph");i.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),
this.glyphs[e]},i.prototype.push=function(e,t){this.glyphs[e]=t,this.length++},n.GlyphSet=i,
n.glyphLoader=r,n.ttfGlyphLoader=a,n.cffGlyphLoader=s},{"./glyph":6}],8:[function(e,t,n){
function i(t,n){var i=e("fs");i.readFile(t,function(e,t){return e?n(e.message):void n(null,g.nodeBufferToArrayBuffer(t));
})}function r(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",
n.onload=function(){return 200!==n.status?t("Font could not be loaded: "+n.statusText):t(null,n.response);
},n.send()}function a(e,t){for(var n=[],i=12,r=0;t>r;r+=1){var a=m.getTag(e,i),s=m.getULong(e,i+8);
n.push({tag:a,offset:s,compression:!1}),i+=16}return n}function s(e,t){for(var n=[],i=44,r=0;t>r;r+=1){
var a=m.getTag(e,i),s=m.getULong(e,i+4),o=m.getULong(e,i+8),l=m.getULong(e,i+12),u=void 0;
u=l>o?"WOFF":!1,n.push({tag:a,offset:s,compression:u,compressedLength:o,originalLength:l
}),i+=20}return n}function o(e,t){if("WOFF"===t.compression){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.originalLength);
if(d(n,i),i.byteLength!==t.originalLength)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");
var r=new DataView(i.buffer,0);return{data:r,offset:0}}return{data:e,offset:t.offset
}}function l(e){var t,n,i,r=new v.Font({empty:!0}),l=new DataView(e,0),u=[],c=m.getTag(l,0);
if(c===String.fromCharCode(0,1,0,0))r.outlinesFormat="truetype",i=m.getUShort(l,4),
u=a(l,i);else if("OTTO"===c)r.outlinesFormat="cff",i=m.getUShort(l,4),u=a(l,i);else{
if("wOFF"!==c)throw new Error("Unsupported OpenType signature "+c);var d=m.getTag(l,4);
if(d===String.fromCharCode(0,1,0,0))r.outlinesFormat="truetype";else{if("OTTO"!==d)throw new Error("Unsupported OpenType flavor "+c);
r.outlinesFormat="cff"}i=m.getUShort(l,12),u=s(l,i)}for(var f,b,g,j,O,V,D,G,I=0;i>I;I+=1){
var N=u[I],B=void 0;switch(N.tag){case"cmap":B=o(l,N),r.tables.cmap=p.parse(B.data,B.offset),
r.encoding=new h.CmapEncoding(r.tables.cmap);break;case"fvar":b=N;break;case"head":
B=o(l,N),r.tables.head=S.parse(B.data,B.offset),r.unitsPerEm=r.tables.head.unitsPerEm,
t=r.tables.head.indexToLocFormat;break;case"hhea":B=o(l,N),r.tables.hhea=C.parse(B.data,B.offset),
r.ascender=r.tables.hhea.ascender,r.descender=r.tables.hhea.descender,r.numberOfHMetrics=r.tables.hhea.numberOfHMetrics;
break;case"hmtx":O=N;break;case"ltag":B=o(l,N),n=A.parse(B.data,B.offset);break;case"maxp":
B=o(l,N),r.tables.maxp=L.parse(B.data,B.offset),r.numGlyphs=r.tables.maxp.numGlyphs;
break;case"name":G=N;break;case"OS/2":B=o(l,N),r.tables.os2=P.parse(B.data,B.offset);
break;case"post":B=o(l,N),r.tables.post=R.parse(B.data,B.offset),r.glyphNames=new h.GlyphNames(r.tables.post);
break;case"glyf":g=N;break;case"loca":D=N;break;case"CFF ":f=N;break;case"kern":V=N;
break;case"GPOS":j=N}}var U=o(l,G);if(r.tables.name=M.parse(U.data,U.offset,n),r.names=r.tables.name,
g&&D){var z=0===t,H=o(l,D),F=T.parse(H.data,H.offset,r.numGlyphs,z),q=o(l,g);r.glyphs=x.parse(q.data,q.offset,F,r);
}else{if(!f)throw new Error("Font doesn't contain TrueType or CFF outlines.");var Y=o(l,f);
y.parse(Y.data,Y.offset,r)}var $=o(l,O);if(E.parse($.data,$.offset,r.numberOfHMetrics,r.numGlyphs,r.glyphs),
h.addGlyphNames(r),V){var W=o(l,V);r.kerningPairs=k.parse(W.data,W.offset)}else r.kerningPairs={};
if(j){var X=o(l,j);w.parse(X.data,X.offset,r)}if(b){var Z=o(l,b);r.tables.fvar=_.parse(Z.data,Z.offset,r.names);
}return r}function u(e,t){var n="undefined"==typeof window,a=n?i:r;a(e,function(e,n){
if(e)return t(e);var i=l(n);return t(null,i)})}function c(t){var n=e("fs"),i=n.readFileSync(t);
return l(g.nodeBufferToArrayBuffer(i))}var d=e("tiny-inflate"),h=e("./encoding"),v=e("./font"),f=e("./glyph"),m=e("./parse"),b=e("./path"),g=e("./util"),p=e("./tables/cmap"),y=e("./tables/cff"),_=e("./tables/fvar"),x=e("./tables/glyf"),w=e("./tables/gpos"),S=e("./tables/head"),C=e("./tables/hhea"),E=e("./tables/hmtx"),k=e("./tables/kern"),A=e("./tables/ltag"),T=e("./tables/loca"),L=e("./tables/maxp"),M=e("./tables/name"),P=e("./tables/os2"),R=e("./tables/post");
n._parse=m,n.Font=v.Font,n.Glyph=f.Glyph,n.Path=b.Path,n.parse=l,n.load=u,n.loadSync=c;
},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,
"./tables/cmap":13,"./tables/fvar":14,"./tables/glyf":15,"./tables/gpos":16,"./tables/head":17,
"./tables/hhea":18,"./tables/hmtx":19,"./tables/kern":20,"./tables/loca":21,"./tables/ltag":22,
"./tables/maxp":23,"./tables/name":24,"./tables/os2":25,"./tables/post":26,"./util":29,
fs:void 0,"tiny-inflate":1}],9:[function(e,t,n){function i(e,t){this.data=e,this.offset=t,
this.relativeOffset=0}n.getByte=function(e,t){return e.getUint8(t)},n.getCard8=n.getByte,
n.getUShort=function(e,t){return e.getUint16(t,!1)},n.getCard16=n.getUShort,n.getShort=function(e,t){
return e.getInt16(t,!1)},n.getULong=function(e,t){return e.getUint32(t,!1)},n.getFixed=function(e,t){
var n=e.getInt16(t,!1),i=e.getUint16(t+2,!1);return n+i/65535},n.getTag=function(e,t){
for(var n="",i=t;t+4>i;i+=1)n+=String.fromCharCode(e.getInt8(i));return n},n.getOffset=function(e,t,n){
for(var i=0,r=0;n>r;r+=1)i<<=8,i+=e.getUint8(t+r);return i},n.getBytes=function(e,t,n){
for(var i=[],r=t;n>r;r+=1)i.push(e.getUint8(r));return i},n.bytesToString=function(e){
for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t};var r={"byte":1,
uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};i.prototype.parseByte=function(){
var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,
e},i.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);
return this.relativeOffset+=1,e},i.prototype.parseCard8=i.prototype.parseByte,i.prototype.parseUShort=function(){
var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,
e},i.prototype.parseCard16=i.prototype.parseUShort,i.prototype.parseSID=i.prototype.parseUShort,
i.prototype.parseOffset16=i.prototype.parseUShort,i.prototype.parseShort=function(){
var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,
e},i.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;
return this.relativeOffset+=2,e},i.prototype.parseULong=function(){var e=n.getULong(this.data,this.offset+this.relativeOffset);
return this.relativeOffset+=4,e},i.prototype.parseFixed=function(){var e=n.getFixed(this.data,this.offset+this.relativeOffset);
return this.relativeOffset+=4,e},i.prototype.parseOffset16List=i.prototype.parseUShortList=function(e){
for(var t=new Array(e),i=this.data,r=this.offset+this.relativeOffset,a=0;e>a;a++)t[a]=n.getUShort(i,r),
r+=2;return this.relativeOffset+=2*e,t},i.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,i="";
this.relativeOffset+=e;for(var r=0;e>r;r++)i+=String.fromCharCode(t.getUint8(n+r));
return i},i.prototype.parseTag=function(){return this.parseString(4)},i.prototype.parseLongDateTime=function(){
var e=n.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,
e},i.prototype.parseFixed=function(){var e=n.getULong(this.data,this.offset+this.relativeOffset);
return this.relativeOffset+=4,e/65536},i.prototype.parseVersion=function(){var e=n.getUShort(this.data,this.offset+this.relativeOffset),t=n.getUShort(this.data,this.offset+this.relativeOffset+2);
return this.relativeOffset+=4,e+t/4096/10},i.prototype.skip=function(e,t){void 0===t&&(t=1),
this.relativeOffset+=r[e]*t},n.Parser=i},{}],10:[function(e,t,n){function i(){this.commands=[],
this.fill="black",this.stroke=null,this.strokeWidth=1}i.prototype.moveTo=function(e,t){
this.commands.push({type:"M",x:e,y:t})},i.prototype.lineTo=function(e,t){this.commands.push({
type:"L",x:e,y:t})},i.prototype.curveTo=i.prototype.bezierCurveTo=function(e,t,n,i,r,a){
this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:i,x:r,y:a})},i.prototype.quadTo=i.prototype.quadraticCurveTo=function(e,t,n,i){
this.commands.push({type:"Q",x1:e,y1:t,x:n,y:i})},i.prototype.close=i.prototype.closePath=function(){
this.commands.push({type:"Z"})},i.prototype.extend=function(e){e.commands&&(e=e.commands),
Array.prototype.push.apply(this.commands,e)},i.prototype.draw=function(e){e.beginPath();
for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath();
}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,
e.lineWidth=this.strokeWidth,e.stroke())},i.prototype.toPathData=function(e){function t(t){
return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function n(){for(var e="",n=0;n<arguments.length;n+=1){
var i=arguments[n];i>=0&&n>0&&(e+=" "),e+=t(i)}return e}e=void 0!==e?e:2;for(var i="",r=0;r<this.commands.length;r+=1){
var a=this.commands[r];"M"===a.type?i+="M"+n(a.x,a.y):"L"===a.type?i+="L"+n(a.x,a.y):"C"===a.type?i+="C"+n(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?i+="Q"+n(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(i+="Z");
}return i},i.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),
t+='"',this.fill&"black"!==this.fill&&(t+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),
this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),
t+="/>"},n.Path=i},{}],11:[function(e,t,n){function i(e,t,n){var i;for(i=0;i<t.length;i+=1){
var r=t[i];this[r.name]=r.value}if(this.tableName=e,this.fields=t,n){var a=Object.keys(n);
for(i=0;i<a.length;i+=1){var s=a[i],o=n[s];void 0!==this[s]&&(this[s]=o)}}}var r=e("./check"),a=e("./types").encode,s=e("./types").sizeOf;
i.prototype.sizeOf=function(){for(var e=0,t=0;t<this.fields.length;t+=1){var n=this.fields[t],i=this[n.name];
if(void 0===i&&(i=n.value),"function"==typeof i.sizeOf)e+=i.sizeOf();else{var a=s[n.type];
r.assert("function"==typeof a,"Could not find sizeOf function for field"+n.name),
e+=a(i)}}return e},i.prototype.encode=function(){return a.TABLE(this)},n.Table=i},{
"./check":2,"./types":28}],12:[function(e,t,n){function i(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){
if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!i(e[n],t[n]))return!1;
return!0}return!1}function r(e,t,n){var i,r,a,s=[],o=[],l=O.getCard16(e,t);if(0!==l){
var u=O.getByte(e,t+2);r=t+(l+1)*u+2;var c=t+3;for(i=0;l+1>i;i+=1)s.push(O.getOffset(e,c,u)),
c+=u;a=r+s[l]}else a=t+2;for(i=0;i<s.length-1;i+=1){var d=O.getBytes(e,r+s[i],r+s[i+1]);
n&&(d=n(d)),o.push(d)}return{objects:o,startOffset:t,endOffset:a}}function a(e){for(var t="",n=15,i=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){
var r=e.parseByte(),a=r>>4,s=15&r;if(a===n)break;if(t+=i[a],s===n)break;t+=i[s]}return parseFloat(t);
}function s(e,t){var n,i,r,s;if(28===t)return n=e.parseByte(),i=e.parseByte(),n<<8|i;
if(29===t)return n=e.parseByte(),i=e.parseByte(),r=e.parseByte(),s=e.parseByte(),
n<<24|i<<16|r<<8|s;if(30===t)return a(e);if(t>=32&&246>=t)return t-139;if(t>=247&&250>=t)return n=e.parseByte(),
256*(t-247)+n+108;if(t>=251&&254>=t)return n=e.parseByte(),256*-(t-251)-n-108;throw new Error("Invalid b0 "+t);
}function o(e){for(var t={},n=0;n<e.length;n+=1){var i=e[n][0],r=e[n][1],a=void 0;
if(a=1===r.length?r[0]:r,t.hasOwnProperty(i))throw new Error("Object "+t+" already has key "+i);
t[i]=a}return t}function l(e,t,n){t=void 0!==t?t:0;var i=new O.Parser(e,t),r=[],a=[];
for(n=void 0!==n?n:e.length;i.relativeOffset<n;){var l=i.parseByte();21>=l?(12===l&&(l=1200+i.parseByte()),
r.push([l,a]),a=[]):a.push(s(i,l))}return o(r)}function u(e,t){return t=390>=t?R.cffStandardStrings[t]:e[t-391];
}function c(e,t,n){for(var i={},r=0;r<t.length;r+=1){var a=t[r],s=e[a.op];void 0===s&&(s=void 0!==a.value?a.value:null),
"SID"===a.type&&(s=u(n,s)),i[a.name]=s}return i}function d(e,t){var n={};return n.formatMajor=O.getCard8(e,t),
n.formatMinor=O.getCard8(e,t+1),n.size=O.getCard8(e,t+2),n.offsetSize=O.getCard8(e,t+3),
n.startOffset=t,n.endOffset=t+4,n}function h(e,t){var n=l(e,0,e.byteLength);return c(n,G,t);
}function v(e,t,n,i){var r=l(e,t,n);return c(r,I,i)}function f(e,t,n,i){var r,a,s,o=new O.Parser(e,t);
n-=1;var l=[".notdef"],c=o.parseCard8();if(0===c)for(r=0;n>r;r+=1)a=o.parseSID(),
l.push(u(i,a));else if(1===c)for(;l.length<=n;)for(a=o.parseSID(),s=o.parseCard8(),
r=0;s>=r;r+=1)l.push(u(i,a)),a+=1;else{if(2!==c)throw new Error("Unknown charset format "+c);
for(;l.length<=n;)for(a=o.parseSID(),s=o.parseCard16(),r=0;s>=r;r+=1)l.push(u(i,a)),
a+=1}return l}function m(e,t,n){var i,r,a={},s=new O.Parser(e,t),o=s.parseCard8();
if(0===o){var l=s.parseCard8();for(i=0;l>i;i+=1)r=s.parseCard8(),a[r]=i}else{if(1!==o)throw new Error("Unknown encoding format "+o);
var u=s.parseCard8();for(r=1,i=0;u>i;i+=1)for(var c=s.parseCard8(),d=s.parseCard8(),h=c;c+d>=h;h+=1)a[h]=r,
r+=1}return new R.CffEncoding(a,n)}function b(e,t,n){function i(e,t){m&&c.closePath(),
c.moveTo(e,t),m=!0}function r(){var t;t=d.length%2!==0,t&&!v&&(f=d.shift()+e.nominalWidthX),
h+=d.length>>1,d.length=0,v=!0}function a(n){for(var p,y,_,x,w,S,C,E,k,A,T,L,M=0;M<n.length;){
var P=n[M];switch(M+=1,P){case 1:r();break;case 3:r();break;case 4:d.length>1&&!v&&(f=d.shift()+e.nominalWidthX,
v=!0),g+=d.pop(),i(b,g);break;case 5:for(;d.length>0;)b+=d.shift(),g+=d.shift(),c.lineTo(b,g);
break;case 6:for(;d.length>0&&(b+=d.shift(),c.lineTo(b,g),0!==d.length);)g+=d.shift(),
c.lineTo(b,g);break;case 7:for(;d.length>0&&(g+=d.shift(),c.lineTo(b,g),0!==d.length);)b+=d.shift(),
c.lineTo(b,g);break;case 8:for(;d.length>0;)s=b+d.shift(),o=g+d.shift(),l=s+d.shift(),
u=o+d.shift(),b=l+d.shift(),g=u+d.shift(),c.curveTo(s,o,l,u,b,g);break;case 10:w=d.pop()+e.subrsBias,
S=e.subrs[w],S&&a(S);break;case 11:return;case 12:switch(P=n[M],M+=1,P){case 35:s=b+d.shift(),
o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),C=l+d.shift(),E=u+d.shift(),k=C+d.shift(),
A=E+d.shift(),T=k+d.shift(),L=A+d.shift(),b=T+d.shift(),g=L+d.shift(),d.shift(),c.curveTo(s,o,l,u,C,E),
c.curveTo(k,A,T,L,b,g);break;case 34:s=b+d.shift(),o=g,l=s+d.shift(),u=o+d.shift(),
C=l+d.shift(),E=u,k=C+d.shift(),A=u,T=k+d.shift(),L=g,b=T+d.shift(),c.curveTo(s,o,l,u,C,E),
c.curveTo(k,A,T,L,b,g);break;case 36:s=b+d.shift(),o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),
C=l+d.shift(),E=u,k=C+d.shift(),A=u,T=k+d.shift(),L=A+d.shift(),b=T+d.shift(),c.curveTo(s,o,l,u,C,E),
c.curveTo(k,A,T,L,b,g);break;case 37:s=b+d.shift(),o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),
C=l+d.shift(),E=u+d.shift(),k=C+d.shift(),A=E+d.shift(),T=k+d.shift(),L=A+d.shift(),
Math.abs(T-b)>Math.abs(L-g)?b=T+d.shift():g=L+d.shift(),c.curveTo(s,o,l,u,C,E),c.curveTo(k,A,T,L,b,g);
break;default:console.log("Glyph "+t.index+": unknown operator 1200"+P),d.length=0;
}break;case 14:d.length>0&&!v&&(f=d.shift()+e.nominalWidthX,v=!0),m&&(c.closePath(),
m=!1);break;case 18:r();break;case 19:case 20:r(),M+=h+7>>3;break;case 21:d.length>2&&!v&&(f=d.shift()+e.nominalWidthX,
v=!0),g+=d.pop(),b+=d.pop(),i(b,g);break;case 22:d.length>1&&!v&&(f=d.shift()+e.nominalWidthX,
v=!0),b+=d.pop(),i(b,g);break;case 23:r();break;case 24:for(;d.length>2;)s=b+d.shift(),
o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),b=l+d.shift(),g=u+d.shift(),c.curveTo(s,o,l,u,b,g);
b+=d.shift(),g+=d.shift(),c.lineTo(b,g);break;case 25:for(;d.length>6;)b+=d.shift(),
g+=d.shift(),c.lineTo(b,g);s=b+d.shift(),o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),
b=l+d.shift(),g=u+d.shift(),c.curveTo(s,o,l,u,b,g);break;case 26:for(d.length%2&&(b+=d.shift());d.length>0;)s=b,
o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),b=l,g=u+d.shift(),c.curveTo(s,o,l,u,b,g);
break;case 27:for(d.length%2&&(g+=d.shift());d.length>0;)s=b+d.shift(),o=g,l=s+d.shift(),
u=o+d.shift(),b=l+d.shift(),g=u,c.curveTo(s,o,l,u,b,g);break;case 28:p=n[M],y=n[M+1],
d.push((p<<24|y<<16)>>16),M+=2;break;case 29:w=d.pop()+e.gsubrsBias,S=e.gsubrs[w],
S&&a(S);break;case 30:for(;d.length>0&&(s=b,o=g+d.shift(),l=s+d.shift(),u=o+d.shift(),
b=l+d.shift(),g=u+(1===d.length?d.shift():0),c.curveTo(s,o,l,u,b,g),0!==d.length);)s=b+d.shift(),
o=g,l=s+d.shift(),u=o+d.shift(),g=u+d.shift(),b=l+(1===d.length?d.shift():0),c.curveTo(s,o,l,u,b,g);
break;case 31:for(;d.length>0&&(s=b+d.shift(),o=g,l=s+d.shift(),u=o+d.shift(),g=u+d.shift(),
b=l+(1===d.length?d.shift():0),c.curveTo(s,o,l,u,b,g),0!==d.length);)s=b,o=g+d.shift(),
l=s+d.shift(),u=o+d.shift(),b=l+d.shift(),g=u+(1===d.length?d.shift():0),c.curveTo(s,o,l,u,b,g);
break;default:32>P?console.log("Glyph "+t.index+": unknown operator "+P):247>P?d.push(P-139):251>P?(p=n[M],
M+=1,d.push(256*(P-247)+p+108)):255>P?(p=n[M],M+=1,d.push(256*-(P-251)-p-108)):(p=n[M],
y=n[M+1],_=n[M+2],x=n[M+3],M+=4,d.push((p<<24|y<<16|_<<8|x)/65536))}}}var s,o,l,u,c=new V.Path,d=[],h=0,v=!1,f=e.defaultWidthX,m=!1,b=0,g=0;
return a(n),t.advanceWidth=f,c}function g(e){var t;return t=e.length<1240?107:e.length<33900?1131:32768;
}function p(e,t,n){n.tables.cff={};var i=d(e,t),a=r(e,i.endOffset,O.bytesToString),s=r(e,a.endOffset),o=r(e,s.endOffset,O.bytesToString),l=r(e,o.endOffset);
n.gsubrs=l.objects,n.gsubrsBias=g(n.gsubrs);var u=new DataView(new Uint8Array(s.objects[0]).buffer),c=h(u,o.objects);
n.tables.cff.topDict=c;var p=t+c["private"][1],y=v(e,p,c["private"][0],o.objects);
if(n.defaultWidthX=y.defaultWidthX,n.nominalWidthX=y.nominalWidthX,0!==y.subrs){var _=p+y.subrs,x=r(e,_);
n.subrs=x.objects,n.subrsBias=g(n.subrs)}else n.subrs=[],n.subrsBias=0;var w=r(e,t+c.charStrings);
n.nGlyphs=w.objects.length;var S=f(e,t+c.charset,n.nGlyphs,o.objects);0===c.encoding?n.cffEncoding=new R.CffEncoding(R.cffStandardEncoding,S):1===c.encoding?n.cffEncoding=new R.CffEncoding(R.cffExpertEncoding,S):n.cffEncoding=m(e,t+c.encoding,S),
n.encoding=n.encoding||n.cffEncoding,n.glyphs=new j.GlyphSet(n);for(var C=0;C<n.nGlyphs;C+=1){
var E=w.objects[C];n.glyphs.push(C,j.cffGlyphLoader(n,C,b,E))}}function y(e,t){var n,i=R.cffStandardStrings.indexOf(e);
return i>=0&&(n=i),i=t.indexOf(e),i>=0?n=i+R.cffStandardStrings.length:(n=R.cffStandardStrings.length+t.length,
t.push(e)),n}function _(){return new D.Table("Header",[{name:"major",type:"Card8",
value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4
},{name:"major",type:"Card8",value:1}])}function x(e){var t=new D.Table("Name INDEX",[{
name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({
name:"name_"+n,type:"NAME",value:e[n]});return t}function w(e,t,n){for(var r={},a=0;a<e.length;a+=1){
var s=e[a],o=t[s.name];void 0===o||i(o,s.value)||("SID"===s.type&&(o=y(o,n)),r[s.op]={
name:s.name,type:s.type,value:o})}return r}function S(e,t){var n=new D.Table("Top DICT",[{
name:"dict",type:"DICT",value:{}}]);return n.dict=w(G,e,t),n}function C(e){var t=new D.Table("Top DICT INDEX",[{
name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",
value:e}],t}function E(e){var t=new D.Table("String INDEX",[{name:"strings",type:"INDEX",
value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,
type:"STRING",value:e[n]});return t}function k(){return new D.Table("Global Subr INDEX",[{
name:"subrs",type:"INDEX",value:[]}])}function A(e,t){for(var n=new D.Table("Charsets",[{
name:"format",type:"Card8",value:0}]),i=0;i<e.length;i+=1){var r=e[i],a=y(r,t);n.fields.push({
name:"glyph_"+i,type:"SID",value:a})}return n}function T(e){var t=[],n=e.path;t.push({
name:"width",type:"NUMBER",value:e.advanceWidth});for(var i=0,r=0,a=0;a<n.commands.length;a+=1){
var s=void 0,o=void 0,l=n.commands[a];if("Q"===l.type){var u=1/3,c=2/3;l={type:"C",
x:l.x,y:l.y,x1:u*i+c*l.x1,y1:u*r+c*l.y1,x2:u*l.x+c*l.x1,y2:u*l.y+c*l.y1}}if("M"===l.type)s=Math.round(l.x-i),
o=Math.round(l.y-r),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",
value:o}),t.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(l.x),r=Math.round(l.y);else if("L"===l.type)s=Math.round(l.x-i),
o=Math.round(l.y-r),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",
value:o}),t.push({name:"rlineto",type:"OP",value:5}),i=Math.round(l.x),r=Math.round(l.y);else if("C"===l.type){
var d=Math.round(l.x1-i),h=Math.round(l.y1-r),v=Math.round(l.x2-l.x1),f=Math.round(l.y2-l.y1);
s=Math.round(l.x-l.x2),o=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:d
}),t.push({name:"dy1",type:"NUMBER",value:h}),t.push({name:"dx2",type:"NUMBER",value:v
}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:s
}),t.push({name:"dy",type:"NUMBER",value:o}),t.push({name:"rrcurveto",type:"OP",value:8
}),i=Math.round(l.x),r=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14
}),t}function L(e){for(var t=new D.Table("CharStrings INDEX",[{name:"charStrings",
type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var i=e.get(n),r=T(i);t.charStrings.push({
name:i.name,type:"CHARSTRING",value:r})}return t}function M(e,t){var n=new D.Table("Private DICT",[{
name:"dict",type:"DICT",value:{}}]);return n.dict=w(I,e,t),n}function P(e,t){for(var n,i=new D.Table("CFF ",[{
name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",
type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"
},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDict",
type:"TABLE"}]),r=1/t.unitsPerEm,a={version:t.version,fullName:t.fullName,familyName:t.familyName,
weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,
encoding:0,charStrings:999,"private":[0,999]},s={},o=[],l=1;l<e.length;l+=1)n=e.get(l),
o.push(n.name);var u=[];i.header=_(),i.nameIndex=x([t.postScriptName]);var c=S(a,u);
i.topDictIndex=C(c),i.globalSubrIndex=k(),i.charsets=A(o,u),i.charStringsIndex=L(e),
i.privateDict=M(s,u),i.stringIndex=E(u);var d=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf();
return a.charset=d,a.encoding=0,a.charStrings=a.charset+i.charsets.sizeOf(),a["private"][1]=a.charStrings+i.charStringsIndex.sizeOf(),
c=S(a,u),i.topDictIndex=C(c),i}var R=e("../encoding"),j=e("../glyphset"),O=e("../parse"),V=e("../path"),D=e("../table"),G=[{
name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",
op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"
},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0
},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,
type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50
},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,
type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],
value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",
op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",
op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",
op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",
op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]
}],I=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",
value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];n.parse=p,n.make=P},{
"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(e,t,n){
function i(e,t){var n,i={};i.version=l.getUShort(e,t),o.argument(0===i.version,"cmap table version should be 0."),
i.numTables=l.getUShort(e,t+2);var r=-1;for(n=0;n<i.numTables;n+=1){var a=l.getUShort(e,t+4+8*n),s=l.getUShort(e,t+4+8*n+2);
if(3===a&&(1===s||0===s)){r=l.getULong(e,t+4+8*n+4);break}}if(-1===r)return null;var u=new l.Parser(e,t+r);
i.format=u.parseUShort(),o.argument(4===i.format,"Only format 4 cmap tables are supported."),
i.length=u.parseUShort(),i.language=u.parseUShort();var c;i.segCount=c=u.parseUShort()>>1,
u.skip("uShort",3),i.glyphIndexMap={};var d=new l.Parser(e,t+r+14),h=new l.Parser(e,t+r+16+2*c),v=new l.Parser(e,t+r+16+4*c),f=new l.Parser(e,t+r+16+6*c),m=t+r+16+8*c;
for(n=0;c-1>n;n+=1)for(var b=void 0,g=d.parseUShort(),p=h.parseUShort(),y=v.parseShort(),_=f.parseUShort(),x=p;g>=x;x+=1)0!==_?(m=f.offset+f.relativeOffset-2,
m+=_,m+=2*(x-p),b=l.getUShort(e,m),0!==b&&(b=b+y&65535)):b=x+y&65535,i.glyphIndexMap[x]=b;
return i}function r(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0});
}function a(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function s(e){
var t,n=new u.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",
type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",
type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",
value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0
},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0
},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0
}]);for(n.segments=[],t=0;t<e.length;t+=1){for(var i=e.get(t),s=0;s<i.unicodes.length;s+=1)r(n,i.unicodes[s],t);
n.segments=n.segments.sort(function(e,t){return e.start-t.start})}a(n);var o;o=n.segments.length,
n.segCountX2=2*o,n.searchRange=2*Math.pow(2,Math.floor(Math.log(o)/Math.log(2))),
n.entrySelector=Math.log(n.searchRange/2)/Math.log(2),n.rangeShift=n.segCountX2-n.searchRange;
var l=[],c=[],d=[],h=[],v=[];for(t=0;o>t;t+=1){var f=n.segments[t];l=l.concat({name:"end_"+t,
type:"USHORT",value:f.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:f.start
}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:f.delta}),h=h.concat({name:"idRangeOffset_"+t,
type:"USHORT",value:f.offset}),void 0!==f.glyphId&&(v=v.concat({name:"glyph_"+t,type:"USHORT",
value:f.glyphId}))}return n.fields=n.fields.concat(l),n.fields.push({name:"reservedPad",
type:"USHORT",value:0}),n.fields=n.fields.concat(c),n.fields=n.fields.concat(d),n.fields=n.fields.concat(h),
n.fields=n.fields.concat(v),n.length=14+2*l.length+2+2*c.length+2*d.length+2*h.length+2*v.length,
n}var o=e("../check"),l=e("../parse"),u=e("../table");n.parse=i,n.make=s},{"../check":2,
"../parse":9,"../table":11}],14:[function(e,t,n){function i(e,t){var n=JSON.stringify(e),i=256;
for(var r in t){var a=parseInt(r);if(a&&!(256>a)){if(JSON.stringify(t[r])===n)return a;
a>=i&&(i=a+1)}}return t[i]=e,i}function r(e,t){var n=i(e.name,t);return new h.Table("fvarAxis",[{
name:"tag",type:"TAG",value:e.tag},{name:"minValue",type:"FIXED",value:e.minValue<<16
},{name:"defaultValue",type:"FIXED",value:e.defaultValue<<16},{name:"maxValue",type:"FIXED",
value:e.maxValue<<16},{name:"flags",type:"USHORT",value:0},{name:"nameID",type:"USHORT",
value:n}])}function a(e,t,n){var i={},r=new d.Parser(e,t);return i.tag=r.parseTag(),
i.minValue=r.parseFixed(),i.defaultValue=r.parseFixed(),i.maxValue=r.parseFixed(),
r.skip("uShort",1),i.name=n[r.parseUShort()]||{},i}function s(e,t,n){for(var r=i(e.name,n),a=[{
name:"nameID",type:"USHORT",value:r},{name:"flags",type:"USHORT",value:0}],s=0;s<t.length;++s){
var o=t[s].tag;a.push({name:"axis "+o,type:"FIXED",value:e.coordinates[o]<<16})}return new h.Table("fvarInstance",a);
}function o(e,t,n,i){var r={},a=new d.Parser(e,t);r.name=i[a.parseUShort()]||{},a.skip("uShort",1),
r.coordinates={};for(var s=0;s<n.length;++s)r.coordinates[n[s].tag]=a.parseFixed();
return r}function l(e,t){var n=new h.Table("fvar",[{name:"version",type:"ULONG",value:65536
},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",
value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",
value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",
type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var i=0;i<e.axes.length;i++)n.fields.push({
name:"axis "+i,type:"TABLE",value:r(e.axes[i],t)});for(var a=0;a<e.instances.length;a++)n.fields.push({
name:"instance "+a,type:"TABLE",value:s(e.instances[a],e.axes,t)});return n}function u(e,t,n){
var i=new d.Parser(e,t),r=i.parseULong();c.argument(65536===r,"Unsupported fvar table version.");
var s=i.parseOffset16();i.skip("uShort",1);for(var l=i.parseUShort(),u=i.parseUShort(),h=i.parseUShort(),v=i.parseUShort(),f=[],m=0;l>m;m++)f.push(a(e,t+s+m*u,n));
for(var b=[],g=t+s+l*u,p=0;h>p;p++)b.push(o(e,g+p*v,f,n));return{axes:f,instances:b
}}var c=e("../check"),d=e("../parse"),h=e("../table");n.make=l,n.parse=u},{"../check":2,
"../parse":9,"../table":11}],15:[function(e,t,n){function i(e,t,n,i,r){var a;return(t&i)>0?(a=e.parseByte(),
0===(t&r)&&(a=-a),a=n+a):a=(t&r)>0?n:n+e.parseShort(),a}function r(e,t,n){var r=new h.Parser(t,n);
e.numberOfContours=r.parseShort(),e.xMin=r.parseShort(),e.yMin=r.parseShort(),e.xMax=r.parseShort(),
e.yMax=r.parseShort();var a,s;if(e.numberOfContours>0){var o,l=e.endPointIndices=[];
for(o=0;o<e.numberOfContours;o+=1)l.push(r.parseUShort());for(e.instructionLength=r.parseUShort(),
e.instructions=[],o=0;o<e.instructionLength;o+=1)e.instructions.push(r.parseByte());
var u=l[l.length-1]+1;for(a=[],o=0;u>o;o+=1)if(s=r.parseByte(),a.push(s),(8&s)>0)for(var d=r.parseByte(),v=0;d>v;v+=1)a.push(s),
o+=1;if(c.argument(a.length===u,"Bad flags."),l.length>0){var f,m=[];if(u>0){for(o=0;u>o;o+=1)s=a[o],
f={},f.onCurve=!!(1&s),f.lastPointOfContour=l.indexOf(o)>=0,m.push(f);var b=0;for(o=0;u>o;o+=1)s=a[o],
f=m[o],f.x=i(r,s,b,2,16),b=f.x;var g=0;for(o=0;u>o;o+=1)s=a[o],f=m[o],f.y=i(r,s,g,4,32),
g=f.y}e.points=m}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{
e.isComposite=!0,e.points=[],e.components=[];for(var p=!0;p;){a=r.parseUShort();var y={
glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&a)>0?(y.dx=r.parseShort(),
y.dy=r.parseShort()):(y.dx=r.parseChar(),y.dy=r.parseChar()),(8&a)>0?y.xScale=y.yScale=r.parseF2Dot14():(64&a)>0?(y.xScale=r.parseF2Dot14(),
y.yScale=r.parseF2Dot14()):(128&a)>0&&(y.xScale=r.parseF2Dot14(),y.scale01=r.parseF2Dot14(),
y.scale10=r.parseF2Dot14(),y.yScale=r.parseF2Dot14()),e.components.push(y),p=!!(32&a);
}}}function a(e,t){for(var n=[],i=0;i<e.length;i+=1){var r=e[i],a={x:t.xScale*r.x+t.scale01*r.y+t.dx,
y:t.scale10*r.x+t.yScale*r.y+t.dy,onCurve:r.onCurve,lastPointOfContour:r.lastPointOfContour
};n.push(a)}return n}function s(e){for(var t=[],n=[],i=0;i<e.length;i+=1){var r=e[i];
n.push(r),r.lastPointOfContour&&(t.push(n),n=[])}return c.argument(0===n.length,"There are still points left in the current contour."),
t}function o(e){var t=new v.Path;if(!e)return t;for(var n=s(e),i=0;i<n.length;i+=1){
var r=n[i],a=r[0],o=r[r.length-1],l=void 0,u=void 0;a.onCurve?(l=null,u=!0):(a=o.onCurve?o:{
x:(a.x+o.x)/2,y:(a.y+o.y)/2},l=a,u=!1),t.moveTo(a.x,a.y);for(var c=u?1:0;c<r.length;c+=1){
var d=r[c],h=0===c?a:r[c-1];if(h.onCurve&&d.onCurve)t.lineTo(d.x,d.y);else if(h.onCurve&&!d.onCurve)l=d;else if(h.onCurve||d.onCurve){
if(h.onCurve||!d.onCurve)throw new Error("Invalid state.");t.quadraticCurveTo(l.x,l.y,d.x,d.y),
l=null}else{var f={x:(h.x+d.x)/2,y:(h.y+d.y)/2};t.quadraticCurveTo(h.x,h.y,f.x,f.y),
l=d}}a!==o&&(l?t.quadraticCurveTo(l.x,l.y,a.x,a.y):t.lineTo(a.x,a.y))}return t.closePath(),
t}function l(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var i=t.components[n],r=e.get(i.glyphIndex);
if(r.getPath(),r.points){var s=a(r.points,i);t.points=t.points.concat(s)}}return o(t.points);
}function u(e,t,n,i){var a,s=new d.GlyphSet(i);for(a=0;a<n.length-1;a+=1){var o=n[a],u=n[a+1];
o!==u?s.push(a,d.ttfGlyphLoader(i,a,r,e,t+o,l)):s.push(a,d.glyphLoader(i,a))}return s;
}var c=e("../check"),d=e("../glyphset"),h=e("../parse"),v=e("../path");n.parse=u},{
"../check":2,"../glyphset":7,"../parse":9,"../path":10}],16:[function(e,t,n){function i(e,t){
for(var n=new c.Parser(e,t),i=n.parseUShort(),r=[],a=0;i>a;a++)r[n.parseTag()]={offset:n.parseUShort()
};return r}function r(e,t){var n=new c.Parser(e,t),i=n.parseUShort(),r=n.parseUShort();
if(1===i)return n.parseUShortList(r);if(2===i){for(var a=[];r--;)for(var s=n.parseUShort(),o=n.parseUShort(),l=n.parseUShort(),u=s;o>=u;u++)a[l++]=u;
return a}}function a(e,t){var n=new c.Parser(e,t),i=n.parseUShort();if(1===i){var r=n.parseUShort(),a=n.parseUShort(),s=n.parseUShortList(a);
return function(e){return s[e-r]||0}}if(2===i){for(var o=n.parseUShort(),l=[],u=[],d=[],h=0;o>h;h++)l[h]=n.parseUShort(),
u[h]=n.parseUShort(),d[h]=n.parseUShort();return function(e){for(var t=0,n=l.length-1;n>t;){
var i=t+n+1>>1;e<l[i]?n=i-1:t=i}return l[t]<=e&&e<=u[t]?d[t]||0:0}}}function s(e,t){
var n,i,s=new c.Parser(e,t),o=s.parseUShort(),l=s.parseUShort(),u=r(e,t+l),d=s.parseUShort(),h=s.parseUShort();
if(4===d&&0===h){var v={};if(1===o){for(var f=s.parseUShort(),m=[],b=s.parseOffset16List(f),g=0;f>g;g++){
var p=b[g],y=v[p];if(!y){y={},s.relativeOffset=p;for(var _=s.parseUShort();_--;){
var x=s.parseUShort();d&&(n=s.parseShort()),h&&(i=s.parseShort()),y[x]=n}}m[u[g]]=y;
}return function(e,t){var n=m[e];return n?n[t]:void 0}}if(2===o){for(var w=s.parseUShort(),S=s.parseUShort(),C=s.parseUShort(),E=s.parseUShort(),k=a(e,t+w),A=a(e,t+S),T=[],L=0;C>L;L++)for(var M=T[L]=[],P=0;E>P;P++)d&&(n=s.parseShort()),
h&&(i=s.parseShort()),M[P]=n;var R={};for(L=0;L<u.length;L++)R[u[L]]=1;return function(e,t){
if(R[e]){var n=k(e),i=A(t),r=T[n];return r?r[i]:void 0}}}}}function o(e,t){var n=new c.Parser(e,t),i=n.parseUShort(),r=n.parseUShort(),a=16&r,o=n.parseUShort(),l=n.parseOffset16List(o),u={
lookupType:i,lookupFlag:r,markFilteringSet:a?n.parseUShort():-1};if(2===i){for(var d=[],h=0;o>h;h++)d.push(s(e,t+l[h]));
u.getKerningValue=function(e,t){for(var n=d.length;n--;){var i=d[n](e,t);if(void 0!==i)return i;
}return 0}}return u}function l(e,t,n){var r=new c.Parser(e,t),a=r.parseFixed();u.argument(1===a,"Unsupported GPOS table version."),
i(e,t+r.parseUShort()),i(e,t+r.parseUShort());var s=r.parseUShort();r.relativeOffset=s;
for(var l=r.parseUShort(),d=r.parseOffset16List(l),h=t+s,v=0;l>v;v++){var f=o(e,h+d[v]);
2!==f.lookupType||n.getGposKerningValue||(n.getGposKerningValue=f.getKerningValue);
}}var u=e("../check"),c=e("../parse");n.parse=l},{"../check":2,"../parse":9}],17:[function(e,t,n){
function i(e,t){var n={},i=new s.Parser(e,t);return n.version=i.parseVersion(),n.fontRevision=Math.round(1e3*i.parseFixed())/1e3,
n.checkSumAdjustment=i.parseULong(),n.magicNumber=i.parseULong(),a.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),
n.flags=i.parseUShort(),n.unitsPerEm=i.parseUShort(),n.created=i.parseLongDateTime(),
n.modified=i.parseLongDateTime(),n.xMin=i.parseShort(),n.yMin=i.parseShort(),n.xMax=i.parseShort(),
n.yMax=i.parseShort(),n.macStyle=i.parseUShort(),n.lowestRecPPEM=i.parseUShort(),
n.fontDirectionHint=i.parseShort(),n.indexToLocFormat=i.parseShort(),n.glyphDataFormat=i.parseShort(),
n}function r(e){return new o.Table("head",[{name:"version",type:"FIXED",value:65536
},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",
value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",
value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",
value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",
value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",
type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",
type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",
type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var a=e("../check"),s=e("../parse"),o=e("../table");
n.parse=i,n.make=r},{"../check":2,"../parse":9,"../table":11}],18:[function(e,t,n){
function i(e,t){var n={},i=new a.Parser(e,t);return n.version=i.parseVersion(),n.ascender=i.parseShort(),
n.descender=i.parseShort(),n.lineGap=i.parseShort(),n.advanceWidthMax=i.parseUShort(),
n.minLeftSideBearing=i.parseShort(),n.minRightSideBearing=i.parseShort(),n.xMaxExtent=i.parseShort(),
n.caretSlopeRise=i.parseShort(),n.caretSlopeRun=i.parseShort(),n.caretOffset=i.parseShort(),
i.relativeOffset+=8,n.metricDataFormat=i.parseShort(),n.numberOfHMetrics=i.parseUShort(),
n}function r(e){return new s.Table("hhea",[{name:"version",type:"FIXED",value:65536
},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{
name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0
},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",
value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",
value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",
value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0
},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{
name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",
value:0}],e)}var a=e("../parse"),s=e("../table");n.parse=i,n.make=r},{"../parse":9,
"../table":11}],19:[function(e,t,n){function i(e,t,n,i,r){for(var s,o,l=new a.Parser(e,t),u=0;i>u;u+=1){
n>u&&(s=l.parseUShort(),o=l.parseShort());var c=r.get(u);c.advanceWidth=s,c.leftSideBearing=o;
}}function r(e){for(var t=new s.Table("hmtx",[]),n=0;n<e.length;n+=1){var i=e.get(n),r=i.advanceWidth||0,a=i.leftSideBearing||0;
t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),t.fields.push({name:"leftSideBearing_"+n,
type:"SHORT",value:a})}return t}var a=e("../parse"),s=e("../table");n.parse=i,n.make=r;
},{"../parse":9,"../table":11}],20:[function(e,t,n){function i(e,t){var n={},i=new a.Parser(e,t),s=i.parseUShort();
r.argument(0===s,"Unsupported kern table version."),i.skip("uShort",1);var o=i.parseUShort();
r.argument(0===o,"Unsupported kern sub-table version."),i.skip("uShort",2);var l=i.parseUShort();
i.skip("uShort",3);for(var u=0;l>u;u+=1){var c=i.parseUShort(),d=i.parseUShort(),h=i.parseShort();
n[c+","+d]=h}return n}var r=e("../check"),a=e("../parse");n.parse=i},{"../check":2,
"../parse":9}],21:[function(e,t,n){function i(e,t,n,i){for(var a=new r.Parser(e,t),s=i?a.parseUShort:a.parseULong,o=[],l=0;n+1>l;l+=1){
var u=s.call(a);i&&(u*=2),o.push(u)}return o}var r=e("../parse");n.parse=i},{"../parse":9
}],22:[function(e,t,n){function i(e){for(var t=new o.Table("ltag",[{name:"version",
type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",
value:e.length}]),n="",i=12+4*e.length,r=0;r<e.length;++r){var a=n.indexOf(e[r]);0>a&&(a=n.length,
n+=e[r]),t.fields.push({name:"offset "+r,type:"USHORT",value:i+a}),t.fields.push({
name:"length "+r,type:"USHORT",value:e[r].length})}return t.fields.push({name:"stringPool",
type:"CHARARRAY",value:n}),t}function r(e,t){var n=new s.Parser(e,t),i=n.parseULong();
a.argument(1===i,"Unsupported ltag table version."),n.skip("uLong",1);for(var r=n.parseULong(),o=[],l=0;r>l;l++){
for(var u="",c=t+n.parseUShort(),d=n.parseUShort(),h=c;c+d>h;++h)u+=String.fromCharCode(e.getInt8(h));
o.push(u)}return o}var a=e("../check"),s=e("../parse"),o=e("../table");n.make=i,n.parse=r;
},{"../check":2,"../parse":9,"../table":11}],23:[function(e,t,n){function i(e,t){
var n={},i=new a.Parser(e,t);return n.version=i.parseVersion(),n.numGlyphs=i.parseUShort(),
1===n.version&&(n.maxPoints=i.parseUShort(),n.maxContours=i.parseUShort(),n.maxCompositePoints=i.parseUShort(),
n.maxCompositeContours=i.parseUShort(),n.maxZones=i.parseUShort(),n.maxTwilightPoints=i.parseUShort(),
n.maxStorage=i.parseUShort(),n.maxFunctionDefs=i.parseUShort(),n.maxInstructionDefs=i.parseUShort(),
n.maxStackElements=i.parseUShort(),n.maxSizeOfInstructions=i.parseUShort(),n.maxComponentElements=i.parseUShort(),
n.maxComponentDepth=i.parseUShort()),n}function r(e){return new s.Table("maxp",[{
name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}]);
}var a=e("../parse"),s=e("../table");n.parse=i,n.make=r},{"../parse":9,"../table":11
}],24:[function(e,t,n){function i(e,t,n){switch(e){case 0:if(65535===t)return"und";
if(n)return n[t];break;case 1:return g[t];case 3:return y[t]}}function r(e,t,n){switch(e){
case 0:return _;case 1:return w[n]||x[t];case 3:if(1===t||10===t)return _}}function a(e,t,n){
for(var a={},s=new f.Parser(e,t),o=s.parseUShort(),l=s.parseUShort(),u=s.offset+s.parseUShort(),c=0;l>c;c++){
var d=s.parseUShort(),v=s.parseUShort(),m=s.parseUShort(),g=s.parseUShort(),p=b[g]||g,y=s.parseUShort(),x=s.parseUShort(),w=i(d,m,n),S=r(d,v,m);
if(void 0!==S&&void 0!==w){var C=void 0;if(C=S===_?h.UTF16(e,u+x,y):h.MACSTRING(e,u+x,y,S)){
var E=a[p];void 0===E&&(E=a[p]={}),E[w]=C}}}var k=0;return 1===o&&(k=s.parseUShort()),
a}function s(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function o(e,t,n,i,r,a){
return new m.Table("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",
type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",
value:i},{name:"length",type:"USHORT",value:r},{name:"offset",type:"USHORT",value:a
}])}function l(e,t){var n=e.length,i=t.length-n+1;e:for(var r=0;i>r;r++)for(;i>r;r++){
for(var a=0;n>a;a++)if(t[r+a]!==e[a])continue e;return r}return-1}function u(e,t){
var n=l(e,t);if(0>n){n=t.length;for(var i=0,r=e.length;r>i;++i)t.push(e[i])}return n;
}function c(e,t){var n,i=[],a={},l=s(b);for(var c in e){var d=l[c];void 0===d&&(d=c),
n=parseInt(d),a[n]=e[c],i.push(n)}for(var h=s(g),f=s(y),_=[],x=[],w=0;w<i.length;w++){
n=i[w];var S=a[n];for(var C in S){var E=S[C],k=1,A=h[C],T=p[A],L=r(k,T,A),M=v.MACSTRING(E,L);
void 0===M&&(k=0,A=t.indexOf(C),0>A&&(A=t.length,t.push(C)),T=4,M=v.UTF16(E));var P=u(M,x);
_.push(o(k,T,A,n,M.length,P));var R=f[C];if(void 0!==R){var j=v.UTF16(E),O=u(j,x);
_.push(o(3,1,R,n,j.length,O))}}}_.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID;
});for(var V=new m.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",
type:"USHORT",value:_.length},{name:"stringOffset",type:"USHORT",value:6+12*_.length
}]),D=0;D<_.length;D++)V.fields.push({name:"record_"+D,type:"TABLE",value:_[D]});return V.fields.push({
name:"strings",type:"LITERAL",value:x}),V}var d=e("../types"),h=d.decode,v=d.encode,f=e("../parse"),m=e("../table"),b=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],g={
0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",
12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",
22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",
33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",
43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",
52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",
62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",
73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",
84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",
94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",
137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",
146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},p={0:0,1:0,2:0,3:0,
4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,
22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,
37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,
53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,
69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,
83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,
131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,
145:0,146:0,147:0,148:6,149:0,150:0,151:0},y={1078:"af",1052:"sq",1156:"gsw",1118:"am",
5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",
4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",
14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",
1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",
1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",
1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",
3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",
8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",
11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",
1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",
1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",
1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",
1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",
1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",
1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",
2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",
1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",
1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",
1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",
8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",
2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",
13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",
4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",
10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",
2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",
1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",
2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"
},_="utf-16",x={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",
6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",
12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",
17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",
22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",
27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"
},w={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",
26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",
38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};n.parse=a,
n.make=c},{"../parse":9,"../table":11,"../types":28}],25:[function(e,t,n){function i(e){
for(var t=0;t<l.length;t+=1){var n=l[t];if(e>=n.begin&&e<n.end)return t}return-1}
function r(e,t){var n={},i=new s.Parser(e,t);n.version=i.parseUShort(),n.xAvgCharWidth=i.parseShort(),
n.usWeightClass=i.parseUShort(),n.usWidthClass=i.parseUShort(),n.fsType=i.parseUShort(),
n.ySubscriptXSize=i.parseShort(),n.ySubscriptYSize=i.parseShort(),n.ySubscriptXOffset=i.parseShort(),
n.ySubscriptYOffset=i.parseShort(),n.ySuperscriptXSize=i.parseShort(),n.ySuperscriptYSize=i.parseShort(),
n.ySuperscriptXOffset=i.parseShort(),n.ySuperscriptYOffset=i.parseShort(),n.yStrikeoutSize=i.parseShort(),
n.yStrikeoutPosition=i.parseShort(),n.sFamilyClass=i.parseShort(),n.panose=[];for(var r=0;10>r;r++)n.panose[r]=i.parseByte();
return n.ulUnicodeRange1=i.parseULong(),n.ulUnicodeRange2=i.parseULong(),n.ulUnicodeRange3=i.parseULong(),
n.ulUnicodeRange4=i.parseULong(),n.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),
n.fsSelection=i.parseUShort(),n.usFirstCharIndex=i.parseUShort(),n.usLastCharIndex=i.parseUShort(),
n.sTypoAscender=i.parseShort(),n.sTypoDescender=i.parseShort(),n.sTypoLineGap=i.parseShort(),
n.usWinAscent=i.parseUShort(),n.usWinDescent=i.parseUShort(),n.version>=1&&(n.ulCodePageRange1=i.parseULong(),
n.ulCodePageRange2=i.parseULong()),n.version>=2&&(n.sxHeight=i.parseShort(),n.sCapHeight=i.parseShort(),
n.usDefaultChar=i.parseUShort(),n.usBreakChar=i.parseUShort(),n.usMaxContent=i.parseUShort()),
n}function a(e){return new o.Table("OS/2",[{name:"version",type:"USHORT",value:3},{
name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0
},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0
},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",
value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",
type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",
type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",
type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",
type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",
type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",
value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0
},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0
},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{
name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0
},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",
value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",
value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",
type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",
type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",
type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",
type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",
type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",
value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",
value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var s=e("../parse"),o=e("../table"),l=[{
begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,
end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,
end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,
end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,
end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,
end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,
end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,
end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,
end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,
end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,
end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,
end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,
end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591
},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,
end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871
},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,
end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055
},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,
end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,
end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,
end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,
end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{
begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,
end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039
},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,
end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{
begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,
end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687
},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,
end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103
},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,
end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999
},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];n.unicodeRanges=l,
n.getUnicodeRange=i,n.parse=r,n.make=a},{"../parse":9,"../table":11}],26:[function(e,t,n){
function i(e,t){var n,i={},r=new s.Parser(e,t);switch(i.version=r.parseVersion(),
i.italicAngle=r.parseFixed(),i.underlinePosition=r.parseShort(),i.underlineThickness=r.parseShort(),
i.isFixedPitch=r.parseULong(),i.minMemType42=r.parseULong(),i.maxMemType42=r.parseULong(),
i.minMemType1=r.parseULong(),i.maxMemType1=r.parseULong(),i.version){case 1:i.names=a.standardNames.slice();
break;case 2:for(i.numberOfGlyphs=r.parseUShort(),i.glyphNameIndex=new Array(i.numberOfGlyphs),
n=0;n<i.numberOfGlyphs;n++)i.glyphNameIndex[n]=r.parseUShort();for(i.names=[],n=0;n<i.numberOfGlyphs;n++)if(i.glyphNameIndex[n]>=a.standardNames.length){
var o=r.parseChar();i.names.push(r.parseString(o))}break;case 2.5:for(i.numberOfGlyphs=r.parseUShort(),
i.offset=new Array(i.numberOfGlyphs),n=0;n<i.numberOfGlyphs;n++)i.offset[n]=r.parseChar();
}return i}function r(){return new o.Table("post",[{name:"version",type:"FIXED",value:196608
},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",
value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",
value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",
value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",
value:0}])}var a=e("../encoding"),s=e("../parse"),o=e("../table");n.parse=i,n.make=r;
},{"../encoding":4,"../parse":9,"../table":11}],27:[function(e,t,n){function i(e){
return Math.log(e)/Math.log(2)|0}function r(e){for(;e.length%4!==0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];
return t%=Math.pow(2,32)}function a(e,t,n,i){return new d.Table("Table Record",[{
name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0
},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==i?i:0
}])}function s(e){var t=new d.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"
},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0
},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0
}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,i(t.numTables));t.searchRange=16*n,
t.entrySelector=i(n),t.rangeShift=16*t.numTables-t.searchRange;for(var s=[],o=[],l=t.sizeOf()+a().sizeOf()*t.numTables;l%4!==0;)l+=1,
o.push({name:"padding",type:"BYTE",value:0});for(var u=0;u<e.length;u+=1){var h=e[u];
c.argument(4===h.tableName.length,"Table name"+h.tableName+" is invalid.");var v=h.sizeOf(),f=a(h.tableName,r(h.encode()),l,v);
for(s.push({name:f.tag+" Table Record",type:"TABLE",value:f}),o.push({name:h.tableName+" table",
type:"TABLE",value:h}),l+=v,c.argument(!isNaN(l),"Something went wrong calculating the offset.");l%4!==0;)l+=1,
o.push({name:"padding",type:"BYTE",value:0})}return s.sort(function(e,t){return e.value.tag>t.value.tag?1:-1;
}),t.fields=t.fields.concat(s),t.fields=t.fields.concat(o),t}function o(e,t,n){for(var i=0;i<t.length;i+=1){
var r=e.charToGlyphIndex(t[i]);if(r>0){var a=e.glyphs.get(r);return a.getMetrics();
}}return n}function l(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length;
}function u(e){for(var t,n=[],i=[],a=[],u=[],c=[],d=[],w=[],S=0,C=0,E=0,k=0,A=0,T=0;T<e.glyphs.length;T+=1){
var L=e.glyphs.get(T),M=0|L.unicode;(t>M||null===t)&&(t=M),M>S&&(S=M);var P=_.getUnicodeRange(M);
if(32>P)C|=1<<P;else if(64>P)E|=1<<P-32;else if(96>P)k|=1<<P-64;else{if(!(123>P))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");
A|=1<<P-96}if(".notdef"!==L.name){var R=L.getMetrics();n.push(R.xMin),i.push(R.yMin),
a.push(R.xMax),u.push(R.yMax),d.push(R.leftSideBearing),w.push(R.rightSideBearing),
c.push(L.advanceWidth)}}var j={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,i),
xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,u),advanceWidthMax:Math.max.apply(null,c),
advanceWidthAvg:l(c),minLeftSideBearing:Math.min.apply(null,d),maxLeftSideBearing:Math.max.apply(null,d),
minRightSideBearing:Math.min.apply(null,w)};j.ascender=e.ascender,j.descender=e.descender;
var O=f.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:j.xMin,yMin:j.yMin,xMax:j.xMax,
yMax:j.yMax,lowestRecPPEM:3}),V=m.make({ascender:j.ascender,descender:j.descender,
advanceWidthMax:j.advanceWidthMax,minLeftSideBearing:j.minLeftSideBearing,minRightSideBearing:j.minRightSideBearing,
xMaxExtent:j.maxLeftSideBearing+(j.xMax-j.xMin),numberOfHMetrics:e.glyphs.length}),D=p.make(e.glyphs.length),G=_.make({
xAvgCharWidth:Math.round(j.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:t,
usLastCharIndex:S,ulUnicodeRange1:C,ulUnicodeRange2:E,ulUnicodeRange3:k,ulUnicodeRange4:A,
fsSelection:64,sTypoAscender:j.ascender,sTypoDescender:j.descender,sTypoLineGap:0,
usWinAscent:j.yMax,usWinDescent:Math.abs(j.yMin),ulCodePageRange1:1,sxHeight:o(e,"xyvw",{
yMax:Math.round(j.ascender/2)}).yMax,sCapHeight:o(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",j).yMax,
usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),I=b.make(e.glyphs),N=h.make(e.glyphs),B=e.getEnglishName("fontFamily"),U=e.getEnglishName("fontSubfamily"),z=B+" "+U,H=e.getEnglishName("postScriptName");
H||(H=B.replace(/\s/g,"")+"-"+U);var F={};for(var q in e.names)F[q]=e.names[q];F.uniqueID||(F.uniqueID={
en:e.getEnglishName("manufacturer")+":"+z}),F.postScriptName||(F.postScriptName={
en:H}),F.preferredFamily||(F.preferredFamily=e.names.fontFamily),F.preferredSubfamily||(F.preferredSubfamily=e.names.fontSubfamily);
var Y=[],$=y.make(F,Y),W=Y.length>0?g.make(Y):void 0,X=x.make(),Z=v.make(e.glyphs,{
version:e.getEnglishName("version"),fullName:z,familyName:B,weightName:U,postScriptName:H,
unitsPerEm:e.unitsPerEm,fontBBox:[0,j.yMin,j.ascender,j.advanceWidthMax]}),K=[O,V,D,G,$,N,X,Z,I];
W&&K.push(W);var J=s(K),Q=J.encode(),ee=r(Q),te=J.fields,ne=!1;for(T=0;T<te.length;T+=1)if("head table"===te[T].name){
te[T].value.checkSumAdjustment=2981146554-ee,ne=!0;break}if(!ne)throw new Error("Could not find head table with checkSum to adjust.");
return J}var c=e("../check"),d=e("../table"),h=e("./cmap"),v=e("./cff"),f=e("./head"),m=e("./hhea"),b=e("./hmtx"),g=e("./ltag"),p=e("./maxp"),y=e("./name"),_=e("./os2"),x=e("./post");
n.computeCheckSum=r,n.make=s,n.fontToTable=u},{"../check":2,"../table":11,"./cff":12,
"./cmap":13,"./head":17,"./hhea":18,"./hmtx":19,"./ltag":22,"./maxp":23,"./name":24,
"./os2":25,"./post":26}],28:[function(e,t,n){function i(e){return function(){return e;
}}var r=e("./check"),a=32768,s=2147483648,o={},l={},u={};l.BYTE=function(e){return r.argument(e>=0&&255>=e,"Byte value should be between 0 and 255."),
[e]},u.BYTE=i(1),l.CHAR=function(e){return[e.charCodeAt(0)]},u.CHAR=i(1),l.CHARARRAY=function(e){
for(var t=[],n=0;n<e.length;n+=1)t.push(e.charCodeAt(n));return t},u.CHARARRAY=function(e){
return e.length},l.USHORT=function(e){return[e>>8&255,255&e]},u.USHORT=i(2),l.SHORT=function(e){
return e>=a&&(e=-(2*a-e)),[e>>8&255,255&e]},u.SHORT=i(2),l.UINT24=function(e){return[e>>16&255,e>>8&255,255&e];
},u.UINT24=i(3),l.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},u.ULONG=i(4),
l.LONG=function(e){return e>=s&&(e=-(2*s-e)),[e>>24&255,e>>16&255,e>>8&255,255&e];
},u.LONG=i(4),l.FIXED=l.ULONG,u.FIXED=u.ULONG,l.FWORD=l.SHORT,u.FWORD=u.SHORT,l.UFWORD=l.USHORT,
u.UFWORD=u.USHORT,l.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},u.LONGDATETIME=i(8),
l.TAG=function(e){return r.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),
[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},u.TAG=i(4),l.Card8=l.BYTE,
u.Card8=u.BYTE,l.Card16=l.USHORT,u.Card16=u.USHORT,l.OffSize=l.BYTE,u.OffSize=u.BYTE,
l.SID=l.USHORT,u.SID=u.USHORT,l.NUMBER=function(e){return e>=-107&&107>=e?[e+139]:e>=108&&1131>=e?(e-=108,
[(e>>8)+247,255&e]):e>=-1131&&-108>=e?(e=-e-108,[(e>>8)+251,255&e]):e>=-32768&&32767>=e?l.NUMBER16(e):l.NUMBER32(e);
},u.NUMBER=function(e){return l.NUMBER(e).length},l.NUMBER16=function(e){return[28,e>>8&255,255&e];
},u.NUMBER16=i(3),l.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e];
},u.NUMBER32=i(5),l.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);
if(n){var i=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*i)/i).toString();
}var r,a,s="";for(r=0,a=t.length;a>r;r+=1){var o=t[r];s+="e"===o?"-"===t[++r]?"c":"b":"."===o?"a":"-"===o?"e":o;
}s+=1&s.length?"f":"ff";var l=[30];for(r=0,a=s.length;a>r;r+=2)l.push(parseInt(s.substr(r,2),16));
return l},u.REAL=function(e){return l.REAL(e).length},l.NAME=l.CHARARRAY,u.NAME=u.CHARARRAY,
l.STRING=l.CHARARRAY,u.STRING=u.CHARARRAY,o.UTF16=function(e,t,n){for(var i=[],r=n/2,a=0;r>a;a++,
t+=2)i[a]=e.getUint16(t);return String.fromCharCode.apply(null,i)},l.UTF16=function(e){
for(var t=[],n=0;n<e.length;n+=1){var i=e.charCodeAt(n);t.push(i>>8&255),t.push(255&i);
}return t},u.UTF16=function(e){return 2*e.length};var c={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ",
"x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю",
"x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ",
"x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­",
"x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ",
"x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł",
"x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",
macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ",
"x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ",
"x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"
};o.MACSTRING=function(e,t,n,i){var r=c[i];if(void 0!==r){for(var a="",s=0;n>s;s++){
var o=e.getUint8(t+s);a+=127>=o?String.fromCharCode(o):r[127&o]}return a}};var d,h="function"==typeof WeakMap&&new WeakMap,v=function(e){
if(!d){d={};for(var t in c)d[t]=new String(t)}var n=d[e];if(void 0!==n){if(h){var i=h.get(n);
if(void 0!==i)return i}var r=c[e];if(void 0!==r){for(var a={},s=0;s<r.length;s++)a[r.charCodeAt(s)]=s+128;
return h&&h.set(n,a),a}}};l.MACSTRING=function(e,t){var n=v(t);if(void 0!==n){for(var i=[],r=0;r<e.length;r++){
var a=e.charCodeAt(r);if(a>=128&&(a=n[a],void 0===a))return;i.push(a)}return i}},
u.MACSTRING=function(e,t){var n=l.MACSTRING(e,t);return void 0!==n?n.length:0},l.INDEX=function(e){
var t,n=1,i=[n],r=[],a=0;for(t=0;t<e.length;t+=1){var s=l.OBJECT(e[t]);Array.prototype.push.apply(r,s),
a+=s.length,n+=s.length,i.push(n)}if(0===r.length)return[0,0];var o=[],u=1+Math.floor(Math.log(a)/Math.log(2))/8|0,c=[void 0,l.BYTE,l.USHORT,l.UINT24,l.ULONG][u];
for(t=0;t<i.length;t+=1){var d=c(i[t]);Array.prototype.push.apply(o,d)}return Array.prototype.concat(l.Card16(e.length),l.OffSize(u),o,r);
},u.INDEX=function(e){return l.INDEX(e).length},l.DICT=function(e){for(var t=[],n=Object.keys(e),i=n.length,r=0;i>r;r+=1){
var a=parseInt(n[r],0),s=e[a];t=t.concat(l.OPERAND(s.value,s.type)),t=t.concat(l.OPERATOR(a));
}return t},u.DICT=function(e){return l.DICT(e).length},l.OPERATOR=function(e){return 1200>e?[e]:[12,e-1200];
},l.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var i=0;i<t.length;i+=1)r.argument(e.length===t.length,"Not enough arguments given for type"+t),
n=n.concat(l.OPERAND(e[i],t[i]));else if("SID"===t)n=n.concat(l.NUMBER(e));else if("offset"===t)n=n.concat(l.NUMBER32(e));else if("number"===t)n=n.concat(l.NUMBER(e));else{
if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(l.REAL(e))}return n;
},l.OP=l.BYTE,u.OP=u.BYTE;var f="function"==typeof WeakMap&&new WeakMap;l.CHARSTRING=function(e){
if(f){var t=f.get(e);if(void 0!==t)return t}for(var n=[],i=e.length,r=0;i>r;r+=1){
var a=e[r];n=n.concat(l[a.type](a.value))}return f&&f.set(e,n),n},u.CHARSTRING=function(e){
return l.CHARSTRING(e).length},l.OBJECT=function(e){var t=l[e.type];return r.argument(void 0!==t,"No encoding function for type "+e.type),
t(e.value)},u.OBJECT=function(e){var t=u[e.type];return r.argument(void 0!==t,"No sizeOf function for type "+e.type),
t(e.value)},l.TABLE=function(e){for(var t=[],n=e.fields.length,i=0;n>i;i+=1){var a=e.fields[i],s=l[a.type];
r.argument(void 0!==s,"No encoding function for field type "+a.type);var o=e[a.name];
void 0===o&&(o=a.value);var u=s(o);t=t.concat(u)}return t},u.TABLE=function(e){for(var t=0,n=e.fields.length,i=0;n>i;i+=1){
var a=e.fields[i],s=u[a.type];r.argument(void 0!==s,"No sizeOf function for field type "+a.type);
var o=e[a.name];void 0===o&&(o=a.value),t+=s(o)}return t},l.LITERAL=function(e){return e;
},u.LITERAL=function(e){return e.length},n.decode=o,n.encode=l,n.sizeOf=u},{"./check":2
}],29:[function(e,t,n){n.isBrowser=function(){return"undefined"!=typeof window},n.isNode=function(){
return"undefined"==typeof window},n.nodeBufferToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;++i)n[i]=e[i];
return t},n.arrayBufferToNodeBuffer=function(e){for(var t=new Buffer(e.byteLength),n=new Uint8Array(e),i=0;i<t.length;++i)t[i]=n[i];
return t},n.checkArgument=function(e,t){if(!e)throw t}},{}]},{},[8])(8)});var e=window.opentype;
return{get default(){return e}}}),System.registerModule("libs/pako",[],function(){
"use strict";!function(e){if("object"==("undefined"==typeof exports?"undefined":$traceurRuntime["typeof"](exports)))module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{
var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),
t.pako=e()}}(function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){
var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);
throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){
var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);
return r}({1:[function(e,t,n){var i=e("./lib/zlib/utils").assign,r=e("./lib/deflate"),a=e("./lib/inflate"),s=e("./lib/zlib/constants"),o={};
i(o,r,a,s),t.exports=o},{"./lib/deflate":2,"./lib/inflate":3,"./lib/zlib/constants":5,
"./lib/zlib/utils":13}],2:[function(e,t,n){function i(e,t){var n=new g(t);if(n.push(e,!0),
n.err)throw n.msg;return n.result}function r(e,t){return t=t||{},t.raw=!0,i(e,t)}
function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=e("./zlib/deflate.js"),o=e("./zlib/utils"),l=e("./zlib/messages"),u=e("./zlib/zstream"),c=0,d=4,h=0,v=1,f=-1,m=0,b=8,g=function(e){
this.options=o.assign({level:f,method:b,chunkSize:16384,windowBits:15,memLevel:8,
strategy:m},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),
this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);
if(n!==h)throw new Error(l[n])};g.prototype.push=function(e,t){var n,i,r=this.strm,a=this.options.chunkSize;
if(this.ended)return!1;i=t===~~t?t:t===!0?d:c,r.next_in=e,r.next_in_index=0,r.avail_in=r.next_in.length,
r.next_out=new o.Buf8(a);do{if(r.avail_out=this.options.chunkSize,r.next_out_index=0,
n=s.deflate(r,i),n!==v&&n!==h)return this.onEnd(n),this.ended=!0,!1;r.next_out_index&&(this.onData(o.shrinkBuf(r.next_out,r.next_out_index)),
(r.avail_in>0||0===r.avail_out)&&(r.next_out=new o.Buf8(this.options.chunkSize)));
}while(r.avail_in>0||0===r.avail_out);return i===d?(n=s.deflateEnd(this.strm),this.onEnd(n),
this.ended=!0,n===h):!0},g.prototype.onData=function(e){this.chunks.push(e)},g.prototype.onEnd=function(e){
e===h&&(this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg;
},n.Deflate=g,n.deflate=i,n.deflateRaw=r,n.gzip=a},{"./zlib/deflate.js":7,"./zlib/messages":11,
"./zlib/utils":13,"./zlib/zstream":14}],3:[function(e,t,n){function i(e,t){var n=new c(t);
if(n.push(e,!0),n.err)throw n.msg;return n.result}function r(e,t){return t=t||{},
t.raw=!0,i(e,t)}var a=e("./zlib/inflate.js"),s=e("./zlib/utils"),o=e("./zlib/constants"),l=e("./zlib/messages"),u=e("./zlib/zstream"),c=function(e){
this.options=s.assign({chunkSize:16384,windowBits:0},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,
0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),
t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,
this.msg="",this.ended=!1,this.chunks=[],this.strm=new u;var n=a.inflateInit2(this.strm,t.windowBits);
if(n!==o.Z_OK)throw new Error(l[n])};c.prototype.push=function(e,t){var n,i,r=this.strm,l=this.options.chunkSize;
if(this.ended)return!1;i=o.Z_NO_FLUSH,r.next_in=e,r.next_in_index=0,r.avail_in=r.next_in.length,
r.next_out=new s.Buf8(l);do{if(r.avail_out=this.options.chunkSize,r.next_out_index=0,
n=a.inflate(r,i),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,
!1;r.next_out_index&&(this.onData(s.shrinkBuf(r.next_out,r.next_out_index)),(r.avail_in>0||0===r.avail_out)&&(r.next_out=new s.Buf8(this.options.chunkSize)));
}while(r.avail_in>0||0===r.avail_out);return i=t===~~t?t:t===!0?o.Z_FINISH:o.Z_NO_FLUSH,
i===o.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):!0;
},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){
e===o.Z_OK&&(this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,
this.msg=this.strm.msg},n.Inflate=c,n.inflate=i,n.inflateRaw=r},{"./zlib/constants":5,
"./zlib/inflate.js":9,"./zlib/messages":11,"./zlib/utils":13,"./zlib/zstream":14}],
4:[function(e,t,n){function i(e,t,n,i){for(var r=65535&e|0,a=e>>>16&65535|0,s=0;0!==n;){
s=n>2e3?2e3:n,n-=s;do r=r+t[i++]|0,a=a+r|0;while(--s);r%=65521,a%=65521}return r|a<<16|0;
}t.exports=i},{}],5:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,
Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,
Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,
Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,
Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],
6:[function(e,t,n){function i(){for(var e,t=[],n=0;256>n;n++){e=n;for(var i=0;8>i;i++)e=1&e?3988292384^e>>>1:e>>>1;
t[n]=e}return t}function r(e,t,n,i){var r=a,s=i+n;e=-1^e;for(var o=i;s>o;o++)e=e>>>8^r[255&(e^t[o])];
return-1^e}var a=i();t.exports=r},{}],7:[function(e,t,n){function i(e,t){return e.msg=P[t],
t}function r(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t;)e[t]=0;
}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(A.arraySet(e.next_out,t.pending_buf,t.pending_out,n,e.next_out_index),
e.next_out_index+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0));
}function o(e,t){T._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),
e.block_start=e.strstart,s(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){
e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,i){
var r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,A.arraySet(t,e.next_in,e.next_in_index,r,n),
1===e.state.wrap?e.adler=L(e.adler,t,r,n):2===e.state.wrap&&(e.adler=M(e.adler,t,r,n)),
e.next_in_index+=r,e.total_in+=r,r)}function d(e,t){var n,i,r=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-le?e.strstart-(e.w_size-le):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+oe,v=u[a+s-1],f=u[a+s];
e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do if(n=t,u[n+s]===f&&u[n+s-1]===v&&u[n]===u[a]&&u[++n]===u[a+1]){
a+=2,n++;do;while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&h>a);
if(i=oe-(h-a),a=h-oe,i>s){if(e.match_start=t,s=i,i>=o)break;v=u[a+s-1],f=u[a+s]}}while((t=d[t&c])>l&&0!==--r);
return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,i,r,a,s=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,
e.strstart>=s+(s-le)){A.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,
e.block_start-=s,n=e.hash_size,t=n;do i=e.head[--t],e.head[t]=i>=s?i-s:0;while(--n);
n=s,t=n;do i=e.prev[--t],e.prev[t]=i>=s?i-s:0;while(--n);r+=s}if(0===e.strm.avail_in)break;
if(n=c(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=se)for(a=e.strstart-e.insert,
e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+se-1])&e.hash_mask,
e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<se)););
}while(e.lookahead<le&&0!==e.strm.avail_in)}function v(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){
if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===R)return ge;if(0===e.lookahead)break;
}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,
e.strstart=i,o(e,!1),0===e.strm.avail_out))return ge;if(e.strstart-e.block_start>=e.w_size-le&&(o(e,!1),
0===e.strm.avail_out))return ge}return e.insert=0,t===V?(o(e,!0),0===e.strm.avail_out?ye:_e):e.strstart>e.block_start&&(o(e,!1),
0===e.strm.avail_out)?ge:ge}function f(e,t){for(var n,i;;){if(e.lookahead<le){if(h(e),
e.lookahead<le&&t===R)return ge;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,
n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-le&&(e.match_length=d(e,n)),
e.match_length>=se)if(i=T._tr_tally(e,e.strstart-e.match_start,e.match_length-se),
e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;
do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,
n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);
e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],
e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=T._tr_tally(e,0,e.window[e.strstart]),
e.lookahead--,e.strstart++;if(i&&(o(e,!1),0===e.strm.avail_out))return ge}return e.insert=e.strstart<se-1?e.strstart:se-1,
t===V?(o(e,!0),0===e.strm.avail_out?ye:_e):e.last_lit&&(o(e,!1),0===e.strm.avail_out)?ge:pe;
}function m(e,t){for(var n,i,r;;){if(e.lookahead<le){if(h(e),e.lookahead<le&&t===R)return ge;
if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,
n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,
e.prev_match=e.match_start,e.match_length=se-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-le&&(e.match_length=d(e,n),
e.match_length<=5&&(e.strategy===H||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),
e.prev_length>=se&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-se,i=T._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),
e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,
n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);
if(e.match_available=0,e.match_length=se-1,e.strstart++,i&&(o(e,!1),0===e.strm.avail_out))return ge;
}else if(e.match_available){if(i=T._tr_tally(e,0,e.window[e.strstart-1]),i&&o(e,!1),
e.strstart++,e.lookahead--,0===e.strm.avail_out)return ge}else e.match_available=1,
e.strstart++,e.lookahead--}return e.match_available&&(i=T._tr_tally(e,0,e.window[e.strstart-1]),
e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===V?(o(e,!0),0===e.strm.avail_out?ye:_e):e.last_lit&&(o(e,!1),
0===e.strm.avail_out)?ge:pe}function b(e,t){for(var n,i,r,a,s=e.window;;){if(e.lookahead<=oe){
if(h(e),e.lookahead<=oe&&t===R)return ge;if(0===e.lookahead)break}if(e.match_length=0,
e.lookahead>=se&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){
a=e.strstart+oe;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&a>r);
e.match_length=oe-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}
if(e.match_length>=se?(n=T._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,
e.strstart+=e.match_length,e.match_length=0):(n=T._tr_tally(e,0,e.window[e.strstart]),
e.lookahead--,e.strstart++),n&&(o(e,!1),0===e.strm.avail_out))return ge}return e.insert=0,
t===V?(o(e,!0),0===e.strm.avail_out?ye:_e):e.last_lit&&(o(e,!1),0===e.strm.avail_out)?ge:pe;
}function g(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===R)return ge;
break}if(e.match_length=0,n=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,
n&&(o(e,!1),0===e.strm.avail_out))return ge}return e.insert=0,t===V?(o(e,!0),0===e.strm.avail_out?ye:_e):e.last_lit&&(o(e,!1),
0===e.strm.avail_out)?ge:pe}function p(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=k[e.level].max_lazy,
e.good_match=k[e.level].good_length,e.nice_match=k[e.level].nice_length,e.max_chain_length=k[e.level].max_chain,
e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,
e.match_available=0,e.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,
this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,
this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,
this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,
this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,
this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,
this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,
this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*re),this.dyn_dtree=new A.Buf16(2*(2*ne+1)),
this.bl_tree=new A.Buf16(2*(2*ie+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),
this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(ae+1),
this.heap=new A.Buf16(2*te+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*te+1),
a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,
this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0,this.high_water=0;
}function _(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=W,t=e.state,
t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ce:me,e.adler=2===t.wrap?0:1,
t.last_flush=R,T._tr_init(t),G):i(e,N)}function x(e){var t=_(e);return t===G&&p(e.state),
t}function w(e,t,n,r,a,s){if(!e)return i(e,N);var o=1;if(t===z&&(t=6),0>r?(o=0,r=-r):r>15&&(o=2,
r-=16),1>a||a>Z||n!==X||8>r||r>15||0>t||t>9||0>s||s>Y)return i(e,N);8===r&&(r=9);var l=new y;
return e.state=l,l.strm=e,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,
l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,
l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),
l.prev=new A.Buf16(l.w_size),l.high_water=0,l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,
l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,
l.level=t,l.strategy=s,l.method=n,x(e)}function S(e,t){return w(e,t,X,K,J,$)}function C(e,t){
var n,o;if(!e||!e.state||t>D||0>t)return i(e,N);if(o=e.state,!e.next_out||!e.next_in&&0!==e.avail_in||o.status===be&&t!==V)return i(e,0===e.avail_out?U:N);
if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===ce)if(2===o.wrap){if(e.adler=0,
l(o,31),l(o,139),l(o,8),o.gzhead)throw new Error("Custom GZIP headers not supported");
l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=F||o.level<2?4:0),
l(o,xe),o.status=me}else{var c=X+(o.w_bits-8<<4)<<8,d=-1;d=o.strategy>=F||o.level<2?0:o.level<6?1:6===o.level?2:3,
c|=d<<6,0!==o.strstart&&(c|=ue),c+=31-c%31,o.status=me,u(o,c),0!==o.strstart&&(u(o,e.adler>>>16),
u(o,65535&e.adler)),e.adler=1}if(0!==o.pending){if(s(e),0===e.avail_out)return o.last_flush=-1,
G}else if(0===e.avail_in&&r(t)<=r(n)&&t!==V)return i(e,U);if(o.status===be&&0!==e.avail_in)return i(e,U);
if(0!==e.avail_in||0!==o.lookahead||t!==R&&o.status!==be){var h=o.strategy===F?g(o,t):o.strategy===q?b(o,t):k[o.level].func(o,t);
if(h!==ye&&h!==_e||(o.status=be),h===ge||h===ye)return 0===e.avail_out&&(o.last_flush=-1),
G;if(h===pe&&(t===j?T._tr_align(o):t!==D&&(T._tr_stored_block(o,0,0,!1),t===O&&(a(o.head),
0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(e),0===e.avail_out))return o.last_flush=-1,
G}return t!==V?G:o.wrap<=0?I:(2===o.wrap?(l(o,255&e.adler),l(o,e.adler>>8&255),l(o,e.adler>>16&255),
l(o,e.adler>>24&255),l(o,255&e.total_in),l(o,e.total_in>>8&255),l(o,e.total_in>>16&255),
l(o,e.total_in>>24&255)):(u(o,e.adler>>>16),u(o,65535&e.adler)),s(e),o.wrap>0&&(o.wrap=-o.wrap),
0!==o.pending?G:I)}function E(e){var t=e.state.status;return t!==ce&&t!==de&&t!==he&&t!==ve&&t!==fe&&t!==me&&t!==be?i(e,N):(e.state=null,
t===me?i(e,B):G)}var k,A=e("./utils"),T=e("./trees"),L=e("./adler32"),M=e("./crc32"),P=e("./messages"),R=0,j=1,O=3,V=4,D=5,G=0,I=1,N=-2,B=-3,U=-5,z=-1,H=1,F=2,q=3,Y=4,$=0,W=2,X=8,Z=9,K=15,J=8,Q=29,ee=256,te=ee+1+Q,ne=30,ie=19,re=2*te+1,ae=15,se=3,oe=258,le=oe+se+1,ue=32,ce=42,de=69,he=73,ve=91,fe=103,me=113,be=666,ge=1,pe=2,ye=3,_e=4,xe=3,we=function(e,t,n,i,r){
this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r;
};k=[new we(0,0,0,0,v),new we(4,4,8,4,f),new we(4,5,16,8,f),new we(4,6,32,32,f),new we(4,4,16,16,m),new we(8,16,32,32,m),new we(8,16,128,128,m),new we(8,32,128,256,m),new we(32,128,258,1024,m),new we(32,258,258,4096,m)],
n.deflateInit=S,n.deflateInit2=w,n.deflateReset=x,n.deflate=C,n.deflateEnd=E,n.deflateInfo="pako deflate (from Nodeca project)";
},{"./adler32":4,"./crc32":6,"./messages":11,"./trees":12,"./utils":13}],8:[function(e,t,n){
var i=30,r=12;t.exports=function(e,t){var n,a,s,o,l,u,c,d,h,v,f,m,b,g,p,y,_,x,w,S,C,E,k,A,T;
n=e.state,a=e.next_in_index,A=e.next_in,s=a+(e.avail_in-5),o=e.next_out_index,T=e.next_out,
l=o-(t-e.avail_out),u=o+(e.avail_out-257),c=n.dmax,d=n.wsize,h=n.whave,v=n.wnext,
f=n.window,m=n.hold,b=n.bits,g=n.lencode,p=n.distcode,y=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;
e:do{15>b&&(m+=A[a++]<<b,b+=8,m+=A[a++]<<b,b+=8),x=g[m&y];t:for(;;){if(w=x>>>24,m>>>=w,
b-=w,w=x>>>16&255,0===w)T[o++]=65535&x;else{if(!(16&w)){if(0===(64&w)){x=g[(65535&x)+(m&(1<<w)-1)];
continue t}if(32&w){n.mode=r;break e}e.msg="invalid literal/length code",n.mode=i;
break e}S=65535&x,w&=15,w&&(w>b&&(m+=A[a++]<<b,b+=8),S+=m&(1<<w)-1,m>>>=w,b-=w),15>b&&(m+=A[a++]<<b,
b+=8,m+=A[a++]<<b,b+=8),x=p[m&_];n:for(;;){if(w=x>>>24,m>>>=w,b-=w,w=x>>>16&255,!(16&w)){
if(0===(64&w)){x=p[(65535&x)+(m&(1<<w)-1)];continue n}e.msg="invalid distance code",
n.mode=i;break e}if(C=65535&x,w&=15,w>b&&(m+=A[a++]<<b,b+=8,w>b&&(m+=A[a++]<<b,b+=8)),
C+=m&(1<<w)-1,C>c){e.msg="invalid distance too far back",n.mode=i;break e}if(m>>>=w,
b-=w,w=o-l,C>w){if(w=C-w,w>h&&n.sane){e.msg="invalid distance too far back",n.mode=i;
break e}if(E=0,k=f,0===v){if(E+=d-w,S>w){S-=w;do T[o++]=f[E++];while(--w);E=o-C,k=T;
}}else if(w>v){if(E+=d+v-w,w-=v,S>w){S-=w;do T[o++]=f[E++];while(--w);if(E=0,S>v){
w=v,S-=w;do T[o++]=f[E++];while(--w);E=o-C,k=T}}}else if(E+=v-w,S>w){S-=w;do T[o++]=f[E++];while(--w);
E=o-C,k=T}for(;S>2;)T[o++]=k[E++],T[o++]=k[E++],T[o++]=k[E++],S-=3;S&&(T[o++]=k[E++],
S>1&&(T[o++]=k[E++]))}else{E=o-C;do T[o++]=T[E++],T[o++]=T[E++],T[o++]=T[E++],S-=3;while(S>2);
S&&(T[o++]=T[E++],S>1&&(T[o++]=T[E++]))}break}}break}}while(s>a&&u>o);S=b>>3,a-=S,
b-=S<<3,m&=(1<<b)-1,e.next_in_index=a,e.next_out_index=o,e.avail_in=s>a?5+(s-a):5-(a-s),
e.avail_out=u>o?257+(u-o):257-(o-u),n.hold=m,n.bits=b}},{}],9:[function(e,t,n){function i(e){
return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function r(){this.mode=0,
this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,
this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,
this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,
this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,
this.have=0,this.next=null,this.next_index=0,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),
this.codes=new p.Buf32(ge),this.sane=0,this.back=0,this.was=0}function a(e,t,n,i,r,a,s,o){
this.type=e,this.lens=t,this.lens_index=n,this.codes=i,this.table=r,this.table_index=a,
this.bits=s,this.work=o}function s(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,
t.wrap&&(e.adler=1&t.wrap),t.mode=G,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,
t.hold=0,t.bits=0,t.lencode=new p.Buf32(ge),t.distcode=new p.Buf32(ge),t.sane=1,t.back=-1,
L):R}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,
s(e)):R}function l(e,t){var n,i;return e&&e.state?(i=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,
48>t&&(t&=15)),t&&(8>t||t>15)?R:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,
i.wbits=t,o(e))):R}function u(e,t){var n,i;return e?(i=new r,e.state=i,i.window=null,
n=l(e,t),n!==L&&(e.state=null),n):R}function c(e){return u(e,ye)}function d(e,t,n){
var i;return e&&e.state?(i=e.state,0>t?(i.hold=0,i.bits=0,L):t>16||i.bits+t>32?R:(n&=(1<<t)-1,
i.hold+=n<<i.bits,i.bits+=t,L)):R}function h(e){if(_e){var t,n;for(b=new p.Buf32(512),
g=new p.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;
for(;288>t;)e.lens[t++]=8;for(n=9,w(new a(C,e.lens,0,288,b,0,n,e.work)),t=0;32>t;)e.lens[t++]=5;
n=5,w(new a(E,e.lens,0,32,g,0,n,e.work)),_e=!1}e.lencode=b,e.lenbits=9,e.distcode=g,
e.distbits=5}function v(e,t,n,i){var r,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,
a.wnext=0,a.whave=0,a.window=new p.Buf8(a.wsize)),i>=a.wsize?(p.arraySet(a.window,t,n-a.wsize,a.wsize,0),
a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),p.arraySet(a.window,t,n-i,r,a.wnext),
i-=r,i?(p.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),
a.whave<a.wsize&&(a.whave+=r))),0}function f(e,t){var n,r,s,o,l,u,c,d,f,m,b,g,me,be,ge,pe,ye,_e,xe,we,Se,Ce,Ee,ke,Ae=0,Te=new p.Buf8(4),Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];
n=e.state,n.mode===W&&(n.mode=X),l=e.next_out_index,s=e.next_out,c=e.avail_out,o=e.next_in_index,
r=e.next_in,u=e.avail_in,d=n.hold,f=n.bits,m=u,b=c,Ce=L;e:for(;;)switch(n.mode){case G:
if(0===n.wrap){n.mode=X;break}for(;16>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}
if(2&n.wrap&&35615===d){n.check=0,Te[0]=255&d,Te[1]=d>>>8&255,n.check=_(n.check,Te,2,0),
d=0,f=0,n.mode=I;break}if(n.flags=0,n.head&&(n.head.done=-1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){
e.msg="incorrect header check",n.mode=he;break}if((15&d)!==D){e.msg="unknown compression method",
n.mode=he;break}if(d>>>=4,f-=4,Se=(15&d)+8,0===n.wbits)n.wbits=Se;else if(Se>n.wbits){
e.msg="invalid window size",n.mode=he;break}n.dmax=1<<Se,e.adler=n.check=1,n.mode=512&d?Y:W,
d=0,f=0;break;case I:for(;16>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if(n.flags=d,
(255&n.flags)!==D){e.msg="unknown compression method",n.mode=he;break}if(57344&n.flags){
e.msg="unknown header flags set",n.mode=he;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Te[0]=255&d,
Te[1]=d>>>8&255,n.check=_(n.check,Te,2,0)),d=0,f=0,n.mode=N;case N:for(;32>f;){if(0===u)break e;
u--,d+=r[o++]<<f,f+=8}n.head&&(n.head.time=d),512&n.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,
Te[2]=d>>>16&255,Te[3]=d>>>24&255,n.check=_(n.check,Te,4,0)),d=0,f=0,n.mode=B;case B:
for(;16>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),
512&n.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,n.check=_(n.check,Te,2,0)),d=0,f=0,n.mode=U;
case U:if(1024&n.flags){for(;16>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}n.length=d,
n.head&&(n.head.extra_len=d),512&n.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,n.check=_(n.check,Te,2,0)),
d=0,f=0}else n.head&&(n.head.extra=null);n.mode=z;case z:if(1024&n.flags){if(g=n.length,
g>u&&(g=u),g){if(n.head&&n.head.extra)throw Se=n.head.extra_len-n.length,"Review & implement right";
512&n.flags&&(n.check=_(n.check,r,g,o)),u-=g,o+=g,n.length-=g}if(n.length)break e;
}n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===u)break e;g=0;do Se=r[o+g++],
n.head&&n.head.name&&n.length<n.head.name_max&&(n.head.name[n.length++]=Se);while(Se&&u>g);
if(512&n.flags&&(n.check=_(n.check,r,g,o)),u-=g,o+=g,Se)break e}else n.head&&(n.head.name=null);
n.length=0,n.mode=F;case F:if(4096&n.flags){if(0===u)break e;g=0;do Se=r[o+g++],n.head&&n.head.comment&&n.length<n.head.comm_max&&(n.head.comment[n.length++]=Se);while(Se&&u>g);
if(512&n.flags&&(n.check=_(n.check,r,g,o)),u-=g,o+=g,Se)break e}else n.head&&(n.head.comment=null);
n.mode=q;case q:if(512&n.flags){for(;16>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8;
}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=he;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,
n.head.done=1),e.adler=n.check=0,n.mode=W;break;case Y:for(;32>f;){if(0===u)break e;
u--,d+=r[o++]<<f,f+=8}e.adler=n.check=i(d),d=0,f=0,n.mode=$;case $:if(0===n.havedict)return e.next_out_index=l,
e.avail_out=c,e.next_in_index=o,e.avail_in=u,n.hold=d,n.bits=f,P;e.adler=n.check=1,
n.mode=W;case W:if(t===A||t===T)break e;case X:if(n.last){d>>>=7&f,f-=7&f,n.mode=ue;
break}for(;3>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}switch(n.last=1&d,d>>>=1,
f-=1,3&d){case 0:n.mode=Z;break;case 1:if(h(n),n.mode=ne,t===T){d>>>=2,f-=2;break e;
}break;case 2:n.mode=Q;break;case 3:e.msg="invalid block type",n.mode=he}d>>>=2,f-=2;
break;case Z:for(d>>>=7&f,f-=7&f;32>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){
e.msg="invalid stored block lengths",n.mode=he;break}if(n.length=65535&d,d=0,f=0,
n.mode=K,t===T)break e;case K:n.mode=J;case J:if(g=n.length){if(g>u&&(g=u),g>c&&(g=c),
0===g)break e;p.arraySet(s,r,o,g,l),u-=g,o+=g,c-=g,l+=g,n.length-=g;break}n.mode=W;
break;case Q:for(;14>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if(n.nlen=(31&d)+257,
d>>>=5,f-=5,n.ndist=(31&d)+1,d>>>=5,f-=5,n.ncode=(15&d)+4,d>>>=4,f-=4,n.nlen>286||n.ndist>30){
e.msg="too many length or distance symbols",n.mode=he;break}n.have=0,n.mode=ee;case ee:
for(;n.have<n.ncode;){for(;3>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}n.lens[Le[n.have++]]=7&d,
d>>>=3,f-=3}for(;n.have<19;)n.lens[Le[n.have++]]=0;if(p.arraySet(n.lencode,n.codes,0,n.codes.length,0),
n.lenbits=7,Ee=new a(S,n.lens,0,19,n.lencode,0,n.lenbits,n.work),Ce=w(Ee),n.lenbits=Ee.bits,
Ce){e.msg="invalid code lengths set",n.mode=he;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){
for(;Ae=n.lencode[d&(1<<n.lenbits)-1],ge=Ae>>>24,pe=Ae>>>16&255,ye=65535&Ae,!(f>=ge);){
if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if(16>ye)d>>>=ge,f-=ge,n.lens[n.have++]=ye;else{
if(16===ye){for(ke=ge+2;ke>f;){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if(d>>>=ge,
f-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=he;break}Se=n.lens[n.have-1],
g=3+(3&d),d>>>=2,f-=2}else if(17===ye){for(ke=ge+3;ke>f;){if(0===u)break e;u--,d+=r[o++]<<f,
f+=8}d>>>=ge,f-=ge,Se=0,g=3+(7&d),d>>>=3,f-=3}else{for(ke=ge+7;ke>f;){if(0===u)break e;
u--,d+=r[o++]<<f,f+=8}d>>>=ge,f-=ge,Se=0,g=11+(127&d),d>>>=7,f-=7}if(n.have+g>n.nlen+n.ndist){
e.msg="invalid bit length repeat",n.mode=he;break}for(;g--;)n.lens[n.have++]=Se}}
if(n.mode===he)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",
n.mode=he;break}if(p.arraySet(n.lencode,n.codes,0,n.codes.length,0),n.lenbits=9,Ee=new a(C,n.lens,0,n.nlen,n.lencode,0,n.lenbits,n.work),
Ce=w(Ee),n.lenbits=Ee.bits,Ce){e.msg="invalid literal/lengths set",n.mode=he;break;
}if(n.distbits=6,p.arraySet(n.distcode,n.codes,0,n.codes.length,0),Ee=new a(E,n.lens,n.nlen,n.ndist,n.distcode,0,n.distbits,n.work),
Ce=w(Ee),n.distbits=Ee.bits,Ce){e.msg="invalid distances set",n.mode=he;break}if(n.mode=ne,
t===T)break e;case ne:n.mode=ie;case ie:if(u>=6&&c>=258){e.next_out_index=l,e.avail_out=c,
e.next_in_index=o,e.avail_in=u,n.hold=d,n.bits=f,x(e,b),l=e.next_out_index,s=e.next_out,
c=e.avail_out,o=e.next_in_index,r=e.next_in,u=e.avail_in,d=n.hold,f=n.bits,n.mode===W&&(n.back=-1);
break}for(n.back=0;Ae=n.lencode[d&(1<<n.lenbits)-1],ge=Ae>>>24,pe=Ae>>>16&255,ye=65535&Ae,
!(f>=ge);){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if(pe&&0===(240&pe)){for(_e=ge,
xe=pe,we=ye;Ae=n.lencode[we+((d&(1<<_e+xe)-1)>>_e)],ge=Ae>>>24,pe=Ae>>>16&255,ye=65535&Ae,
!(f>=_e+ge);){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ge,
f-=ge,n.back+=ge,n.length=ye,0===pe){n.mode=le;break}if(32&pe){n.back=-1,n.mode=W;
break}if(64&pe){e.msg="invalid literal/length code",n.mode=he;break}n.extra=15&pe,
n.mode=re;case re:if(n.extra){for(ke=n.extra;ke>f;){if(0===u)break e;u--,d+=r[o++]<<f,
f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,
n.mode=ae;case ae:for(;Ae=n.distcode[d&(1<<n.distbits)-1],ge=Ae>>>24,pe=Ae>>>16&255,
ye=65535&Ae,!(f>=ge);){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}if(0===(240&pe)){for(_e=ge,
xe=pe,we=ye;Ae=n.distcode[we+((d&(1<<_e+xe)-1)>>_e)],ge=Ae>>>24,pe=Ae>>>16&255,ye=65535&Ae,
!(f>=_e+ge);){if(0===u)break e;u--,d+=r[o++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ge,
f-=ge,n.back+=ge,64&pe){e.msg="invalid distance code",n.mode=he;break}n.offset=ye,
n.extra=15&pe,n.mode=se;case se:if(n.extra){for(ke=n.extra;ke>f;){if(0===u)break e;
u--,d+=r[o++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra;
}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=he;break}n.mode=oe;
case oe:if(0===c)break e;if(g=b-c,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){
e.msg="invalid distance too far back",n.mode=he;break}g>n.wnext?(g-=n.wnext,me=n.wsize-g):me=n.wnext-g,
g>n.length&&(g=n.length),be=n.window}else be=s,me=l-n.offset,g=n.length;g>c&&(g=c),
c-=g,n.length-=g;do s[l++]=be[me++];while(--g);0===n.length&&(n.mode=ie);break;case le:
if(0===c)break e;s[l++]=n.length,c--,n.mode=ie;break;case ue:if(n.wrap){for(;32>f;){
if(0===u)break e;u--,d|=r[o++]<<f,f+=8}if(b-=c,e.total_out+=b,n.total+=b,b&&(e.adler=n.check=n.flags?_(n.check,s,b,l-b):y(n.check,s,b,l-b)),
b=c,(n.flags?d:i(d))!==n.check){e.msg="incorrect data check",n.mode=he;break}d=0,
f=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;32>f;){if(0===u)break e;u--,d+=r[o++]<<f,
f+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=he;break}
d=0,f=0}n.mode=de;case de:Ce=M;break e;case he:Ce=j;break e;case ve:return O;case fe:
default:return R}return e.next_out_index=l,e.avail_out=c,e.next_in_index=o,e.avail_in=u,
n.hold=d,n.bits=f,(n.wsize||b!==e.avail_out&&n.mode<he&&(n.mode<ue||t!==k))&&v(e,e.next_out,e.next_out_index,b-e.avail_out)?(n.mode=ve,
O):(m-=e.avail_in,b-=e.avail_out,e.total_in+=m,e.total_out+=b,n.total+=b,n.wrap&&b&&(e.adler=n.check=n.flags?_(n.check,s,b,e.next_out_index-b):y(n.check,s,b,e.next_out_index-b)),
e.data_type=n.bits+(n.last?64:0)+(n.mode===W?128:0)+(n.mode===ne||n.mode===K?256:0),
(0===m&&0===b||t===k)&&Ce===L&&(Ce=V),Ce)}function m(e){var t=e.state;return t.window&&(t.window=null),
e.state=null,L}var b,g,p=e("./utils"),y=e("./adler32"),_=e("./crc32"),x=e("./inffast"),w=e("./inftrees"),S=0,C=1,E=2,k=4,A=5,T=6,L=0,M=1,P=2,R=-2,j=-3,O=-4,V=-5,D=8,G=1,I=2,N=3,B=4,U=5,z=6,H=7,F=8,q=9,Y=10,$=11,W=12,X=13,Z=14,K=15,J=16,Q=17,ee=18,te=19,ne=20,ie=21,re=22,ae=23,se=24,oe=25,le=26,ue=27,ce=28,de=29,he=30,ve=31,fe=32,me=852,be=592,ge=me+be,pe=15,ye=pe,_e=!0;
n.inflateReset=o,n.inflateReset2=l,n.inflateResetKeep=s,n.inflateInit=c,n.inflateInit2=u,
n.inflatePrime=d,n.inflate=f,n.inflateEnd=m,n.inflateInfo="pako inflate (from Nodeca project)";
},{"./adler32":4,"./crc32":6,"./inffast":8,"./inftrees":10,"./utils":13}],10:[function(e,t,n){
var i=e("./utils"),r=15,a=852,s=592,o=0,l=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];
t.exports=function(e){var t,n,f,m,b,g,p,y,_,x=e.type,w=e.lens,S=e.codes,C=e.table,E=e.bits,k=e.work,A=0,T=0,L=0,M=0,P=0,R=0,j=0,O=0,V=0,D=0,G=null,I=0,N=new i.Buf16(r+1),B=new i.Buf16(r+1),U=null,z=0;
for(A=0;r>=A;A++)N[A]=0;for(T=0;S>T;T++)N[w[e.lens_index+T]]++;for(P=E,M=r;M>=1&&0===N[M];M--);
if(P>M&&(P=M),0===M)return C[e.table_index++]=20971520,C[e.table_index++]=20971520,
e.bits=1,0;for(L=1;M>L&&0===N[L];L++);for(L>P&&(P=L),O=1,A=1;r>=A;A++)if(O<<=1,O-=N[A],
0>O)return-1;if(O>0&&(x===o||1!==M))return-1;for(B[1]=0,A=1;r>A;A++)B[A+1]=B[A]+N[A];
for(T=0;S>T;T++)0!==w[e.lens_index+T]&&(k[B[w[e.lens_index+T]]++]=T);switch(x){case o:
G=U=k,g=19;break;case l:G=c,I-=257,U=d,z-=257,g=256;break;default:G=h,U=v,g=-1}if(D=0,
T=0,A=L,b=e.table_index,R=P,j=0,f=-1,V=1<<P,m=V-1,x===l&&V>a||x===u&&V>s)return 1;
for(var H=0;;){H++,p=A-j,k[T]<g?(y=0,_=k[T]):k[T]>g?(y=U[z+k[T]],_=G[I+k[T]]):(y=96,
_=0),t=1<<A-j,n=1<<R,L=n;do n-=t,C[b+(D>>j)+n]=p<<24|y<<16|_|0;while(0!==n);for(t=1<<A-1;D&t;)t>>=1;
if(0!==t?(D&=t-1,D+=t):D=0,T++,0===--N[A]){if(A===M)break;A=w[e.lens_index+k[T]]}
if(A>P&&(D&m)!==f){for(0===j&&(j=P),b+=L,R=A-j,O=1<<R;M>R+j&&(O-=N[R+j],!(0>=O));)R++,
O<<=1;if(V+=1<<R,x===l&&V>a||x===u&&V>s)return 1;f=D&m,C[f]=P<<24|R<<16|b-e.table_index;
}}return 0!==D&&(C[b+D]=A-j<<24|64<<16|0),e.table_index+=V,e.bits=P,0}},{"./utils":13
}],11:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error",
"-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error",
"-6":"incompatible version"}},{}],12:[function(e,t,n){function i(e){for(var t=e.length;--t;)e[t]=0;
}function r(e){return 256>e?se[e]:se[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,
e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,n){e.bi_valid>$-n?(e.bi_buf|=t<<e.bi_valid&65535,
a(e,e.bi_buf),e.bi_buf=t>>$-e.bi_valid,e.bi_valid+=n-$):(e.bi_buf|=t<<e.bi_valid&65535,
e.bi_valid+=n)}function o(e,t,n){s(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do n|=1&e,
e>>>=1,n<<=1;while(--t>0);return n>>>1}function u(e){16===e.bi_valid?(a(e,e.bi_buf),
e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,
e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var n,i,r,a,s,o,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;
for(a=0;Y>=a;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;q>n;n++)i=e.heap[n],
a=l[2*l[2*i+1]+1]+1,a>f&&(a=f,m++),l[2*i+1]=a,i>u||(e.bl_count[a]++,s=0,i>=v&&(s=h[i-v]),
o=l[2*i],e.opt_len+=o*(a+s),d&&(e.static_len+=o*(c[2*i+1]+s)));if(0!==m){do{for(a=f-1;0===e.bl_count[a];)a--;
e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(a=f;0!==a;a--)for(i=e.bl_count[a];0!==i;)r=e.heap[--n],
r>u||(l[2*r+1]!==a&&(e.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}}function d(e,t,n){
var i,r,a=new Array(Y+1),s=0;for(i=1;Y>=i;i++)a[i]=s=s+n[i-1]<<1;for(r=0;t>=r;r++){
var o=e[2*r+1];0!==o&&(e[2*r]=l(a[o]++,o))}}function h(){var e,t,n,i,r,a=new Array(Y+1);
for(n=0,i=0;B-1>i;i++)for(le[i]=n,e=0;e<1<<Q[i];e++)oe[n++]=i;for(oe[n-1]=i,r=0,i=0;16>i;i++)for(ue[i]=r,
e=0;e<1<<ee[i];e++)se[r++]=i;for(r>>=7;H>i;i++)for(ue[i]=r<<7,e=0;e<1<<ee[i]-7;e++)se[256+r++]=i;
for(t=0;Y>=t;t++)a[t]=0;for(e=0;143>=e;)re[2*e+1]=8,e++,a[8]++;for(;255>=e;)re[2*e+1]=9,
e++,a[9]++;for(;279>=e;)re[2*e+1]=7,e++,a[7]++;for(;287>=e;)re[2*e+1]=8,e++,a[8]++;
for(d(re,z+1,a),e=0;H>e;e++)ae[2*e+1]=5,ae[2*e]=l(e,5);ce=new ve(re,Q,U+1,z,Y),de=new ve(ae,ee,0,H,Y),
he=new ve(new Array(0),te,0,F,W)}function v(e){var t;for(t=0;z>t;t++)e.dyn_ltree[2*t]=0;
for(t=0;H>t;t++)e.dyn_dtree[2*t]=0;for(t=0;F>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*X]=1,
e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),
e.bi_buf=0,e.bi_valid=0}function m(e,t,n,i){f(e),i&&(a(e,n),a(e,~n)),M.arraySet(e.pending_buf,e.window,t,n,e.pending),
e.pending+=n}function b(e,t,n,i){var r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n];
}function g(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&b(t,e.heap[r+1],e.heap[r],e.depth)&&r++,
!b(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function p(e,t,n){
var i,a,l,u,c=0;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],
a=e.pending_buf[e.l_buf+c],c++,0===i?o(e,a,t):(l=oe[a],o(e,l+U+1,t),u=Q[l],0!==u&&(a-=le[l],
s(e,a,u)),i--,l=r(i),o(e,l,n),u=ee[l],0!==u&&(i-=ue[l],s(e,i,u)));while(c<e.last_lit);
o(e,X,t)}function y(e,t){var n,i,r,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;
for(e.heap_len=0,e.heap_max=q,n=0;l>n;n++)0!==a[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):a[2*n+1]=0;
for(;e.heap_len<2;)r=e.heap[++e.heap_len]=2>u?++u:0,a[2*r]=1,e.depth[r]=0,e.opt_len--,
o&&(e.static_len-=s[2*r+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)g(e,a,n);r=l;
do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],g(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=n,
e.heap[--e.heap_max]=i,a[2*r]=a[2*n]+a[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,
a[2*n+1]=a[2*i+1]=r,e.heap[1]=r++,g(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],
c(e,t),d(a,u,e.bl_count)}function _(e,t,n){var i,r,a=-1,s=t[1],o=0,l=7,u=4;for(0===s&&(l=138,
u=3),t[2*(n+1)+1]=65535,i=0;n>=i;i++)r=s,s=t[2*(i+1)+1],++o<l&&r===s||(u>o?e.bl_tree[2*r]+=o:0!==r?(r!==a&&e.bl_tree[2*r]++,
e.bl_tree[2*Z]++):10>=o?e.bl_tree[2*K]++:e.bl_tree[2*J]++,o=0,a=r,0===s?(l=138,u=3):r===s?(l=6,
u=3):(l=7,u=4))}function x(e,t,n){var i,r,a=-1,l=t[1],u=0,c=7,d=4;for(0===l&&(c=138,
d=3),i=0;n>=i;i++)if(r=l,l=t[2*(i+1)+1],!(++u<c&&r===l)){if(d>u){do o(e,r,e.bl_tree);while(0!==--u);
}else 0!==r?(r!==a&&(o(e,r,e.bl_tree),u--),o(e,Z,e.bl_tree),s(e,u-3,2)):10>=u?(o(e,K,e.bl_tree),
s(e,u-3,3)):(o(e,J,e.bl_tree),s(e,u-11,7));u=0,a=r,0===l?(c=138,d=3):r===l?(c=6,d=3):(c=7,
d=4)}}function w(e){var t;for(_(e,e.dyn_ltree,e.l_desc.max_code),_(e,e.dyn_dtree,e.d_desc.max_code),
y(e,e.bl_desc),t=F-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,
t}function S(e,t,n,i){var r;for(s(e,t-257,5),s(e,n-1,5),s(e,i-4,4),r=0;i>r;r++)s(e,e.bl_tree[2*ne[r]+1],3);
x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,n-1)}function C(e){var t,n=4093624447;for(t=0;31>=t;t++,
n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return R;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return j;
for(t=32;U>t;t++)if(0!==e.dyn_ltree[2*t])return j;return R}function E(e){me||(h(),
me=!0),e.l_desc=new fe(e.dyn_ltree,ce),e.d_desc=new fe(e.dyn_dtree,de),e.bl_desc=new fe(e.bl_tree,he),
e.bi_buf=0,e.bi_valid=0,v(e)}function k(e,t,n,i){s(e,(V<<1)+(i?1:0),3),m(e,t,n,!0);
}function A(e){s(e,D<<1,3),o(e,X,re),u(e)}function T(e,t,n,i){var r,a,o=0;e.level>0?(e.strm.data_type===O&&(e.strm.data_type=C(e)),
y(e,e.l_desc),y(e,e.d_desc),o=w(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,r>=a&&(r=a)):r=a=n+5,
r>=n+4&&-1!==t?k(e,t,n,i):e.strategy===P||a===r?(s(e,(D<<1)+(i?1:0),3),p(e,re,ae)):(s(e,(G<<1)+(i?1:0),3),
S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),p(e,e.dyn_ltree,e.dyn_dtree)),v(e),
i&&f(e)}function L(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,
e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,
t--,e.dyn_ltree[2*(oe[n]+U+1)]++,e.dyn_dtree[2*r(t)]++),e.last_lit===e.lit_bufsize-1;
}var M=e("./utils"),P=4,R=0,j=1,O=2,V=0,D=1,G=2,I=3,N=258,B=29,U=256,z=U+1+B,H=30,F=19,q=2*z+1,Y=15,$=16,W=7,X=256,Z=16,K=17,J=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=512,re=new Array(2*(z+2));
i(re);var ae=new Array(2*H);i(ae);var se=new Array(ie);i(se);var oe=new Array(N-I+1);
i(oe);var le=new Array(B);i(le);var ue=new Array(H);i(ue);var ce,de,he,ve=function(e,t,n,i,r){
this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,
this.has_stree=e&&e.length},fe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t;
},me=!1;n._tr_init=E,n._tr_stored_block=k,n._tr_flush_block=T,n._tr_tally=L,n._tr_align=A;
},{"./utils":13}],13:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;
n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){
var n=t.shift();if(n){if("object"!==$traceurRuntime["typeof"](n))throw new TypeError(n+"must be non-object");
for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){
return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,i,r){
if(t.subarray)return void e.set(t.subarray(n,n+i),r);for(var a=0;i>a;a++)e[r+a]=t[n+a];
},flattenChunks:function(e){var t,n,i,r,a,s;for(i=0,t=0,n=e.length;n>t;t++)i+=e[t].length;
for(s=new Uint8Array(i),r=0,t=0,n=e.length;n>t;t++)a=e[t],s.set(a,r),r+=a.length;return s;
}},a={arraySet:function(e,t,n,i,r){for(var a=0;i>a;a++)e[r+a]=t[n+a]},flattenChunks:function(e){
return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,
n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a));
},n.setTyped(i)},{}],14:[function(e,t,n){function i(){this.next_in=null,this.next_in_index=0,
this.avail_in=0,this.total_in=0,this.next_out=null,this.next_out_index=0,this.avail_out=0,
this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i;
},{}]},{},[1])(1)});var e=window.pako;return{get default(){return e}}}),System.registerModule("libs/paper",[],function(){
"use strict";var e=new function(t){var n=new function(){function e(e,t,i,r,s){function o(a,o){
o=o||(o=u(t,a))&&(o.get?o:o.value),"string"==typeof o&&"#"===o[0]&&(o=e[o.substring(1)]||o);
var c,h="function"==typeof o,v=o,f=s||h&&!o.base?o&&o.get?a in e:e[a]:null;s&&f||(h&&f&&(o.base=f),
h&&r!==!1&&(c=a.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),
v&&!h&&v.get&&"function"==typeof v.get&&n.isPlainObject(v)||(v={value:v,writable:!0
}),(u(e,a)||{configurable:!0}).configurable&&(v.configurable=!0,v.enumerable=i),d(e,a,v));
}var l={};if(t){for(var c in t)t.hasOwnProperty(c)&&!a.test(c)&&o(c);for(var c in l){
var h=l[c],v=e["set"+h],f=e["get"+h]||v&&e["is"+h];!f||r!==!0&&0!==f.length||o(c,{
get:f,set:v})}}return e}function i(e,t,n){return e&&("length"in e&&!e.getLength&&"number"==typeof e.length?s:o).call(e,t,n=n||e),
n}function r(e,t,n){for(var i in t)!t.hasOwnProperty(i)||n&&n[i]||(e[i]=t[i]);return e;
}var a=/^(statics|enumerable|beans|preserve)$/,s=[].forEach||function(e,t){for(var n=0,i=this.length;i>n;n++)e.call(t,this[n],n,this);
},o=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this);
},l=Object.create||function(e){return{__proto__:e}},u=Object.getOwnPropertyDescriptor||function(e,t){
var n=e.__lookupGetter__&&e.__lookupGetter__(t);return n?{get:n,set:e.__lookupSetter__(t),
enumerable:!0,configurable:!0}:e.hasOwnProperty(t)?{value:e[t],enumerable:!0,configurable:!0,
writable:!0}:null},c=Object.defineProperty||function(e,t,n){return(n.get||n.set)&&e.__defineGetter__?(n.get&&e.__defineGetter__(t,n.get),
n.set&&e.__defineSetter__(t,n.set)):e[t]=n.value,e},d=function(e,t,n){return delete e[t],
c(e,t,n)};return e(function(){for(var e=0,t=arguments.length;t>e;e++)r(this,arguments[e]);
},{inject:function(t){if(t){var n=t.statics===!0?t:t.statics,i=t.beans,r=t.preserve;
n!==t&&e(this.prototype,t,t.enumerable,i,r),e(this,n,!0,i,r)}for(var a=1,s=arguments.length;s>a;a++)this.inject(arguments[a]);
return this},extend:function(){for(var t,n,i=this,r=0,a=arguments.length;a>r&&!(t=arguments[r].initialize);r++);
return t=t||function(){i.apply(this,arguments)},n=t.prototype=l(this.prototype),d(n,"constructor",{
value:t,writable:!0,configurable:!0}),e(t,this,!0),arguments.length&&this.inject.apply(t,arguments),
t.base=i,t}},!0).inject({inject:function(){for(var t=0,n=arguments.length;n>t;t++){
var i=arguments[t];i&&e(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){
var e=l(this);return e.inject.apply(e,arguments)},each:function(e,t){return i(this,e,t);
},set:function(e){return r(this,e)},clone:function(){return new this.constructor(this);
},statics:{each:i,create:l,define:d,describe:u,set:r,clone:function(e){return r(new e.constructor,e);
},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===n||"Object"===t.name);
},pick:function(e,n){return e!==t?e:n}}})};"undefined"!=typeof module&&(module.exports=n),
n.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+n.each(this,function(e,t){
if(!/^_/.test(t)){var n="undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e);
this.push(t+": "+("number"===n?s.instance.number(e):"string"===n?"'"+e+"'":e))}},[]).join(", ")+" }";
},getClassName:function(){return this._class||""},exportJSON:function(e){return n.exportJSON(this,e);
},toJSON:function(){return n.serialize(this)},_set:function(e,i,r){if(e&&(r||n.isPlainObject(e))){
for(var a=Object.keys(e._filtering||e),s=0,o=a.length;o>s;s++){var l=a[s];if(!i||!i[l]){
var u=e[l];u!==t&&(this[l]=u)}}return!0}},statics:{exports:{enumerable:!0},extend:function ne(){
var e=ne.base.apply(this,arguments),t=e.prototype._class;return t&&!n.exports[t]&&(n.exports[t]=e),
e},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);
if(e&&t&&"object"===("undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e))&&"object"===("undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t))){
if(Array.isArray(e)&&Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(;i--;)if(!n.equals(e[i],t[i]))return!1;
}else{var r=Object.keys(e),i=r.length;if(i!==Object.keys(t).length)return!1;for(;i--;){
var a=r[i];if(!t.hasOwnProperty(a)||!n.equals(e[a],t[a]))return!1}}return!0}return!1;
},read:function(e,i,r,a){if(this===n){var s=this.peek(e,i);return e.__index++,s}var o=this.prototype,l=o._readIndex,u=i||l&&e.__index||0;
a||(a=e.length-u);var c=e[u];return c instanceof this||r&&r.readNull&&null==c&&1>=a?(l&&(e.__index=u+1),
c&&r&&r.clone?c.clone():c):(c=n.create(this.prototype),l&&(c.__read=!0),c=c.initialize.apply(c,u>0||a<e.length?Array.prototype.slice.call(e,u,u+a):e)||c,
l&&(e.__index=u+c.__read,c.__read=t),c)},peek:function(e,t){return e[e.__index=t||e.__index||0];
},remain:function(e){return e.length-(e.__index||0)},readAll:function(e,t,n){for(var i,r=[],a=t||0,s=e.length;s>a;a++)r.push(Array.isArray(i=e[a])?this.read(i,0,n):this.read(e,a,n,1));
return r},readNamed:function(e,i,r,a,s){var o=this.getNamed(e,i),l=o!==t;if(l){var u=e._filtered;
u||(u=e._filtered=n.create(e[0]),u._filtering=e[0]),u[i]=t}return this.read(l?[o]:e,r,a,s);
},getNamed:function(e,i){var r=e[0];return e._hasObject===t&&(e._hasObject=1===e.length&&n.isPlainObject(r)),
e._hasObject?i?r[i]:e._filtered||r:void 0},hasNamed:function(e,t){return!!this.getNamed(e,t);
},isPlainValue:function(e,t){return this.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e;
},serialize:function(e,t,i,r){t=t||{};var a,o=!r;if(o&&(t.formatter=new s(t.precision),
r={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,i=this.references[n];
if(!i){this.length++;var r=t.call(e),a=e._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,
i=this.references[n]=[n]}return i}}),e&&e._serialize){a=e._serialize(t,r);var l=e._class;
!l||i||a._compact||a[0]===l||a.unshift(l)}else if(Array.isArray(e)){a=[];for(var u=0,c=e.length;c>u;u++)a[u]=n.serialize(e[u],t,i,r);
i&&(a._compact=!0)}else if(n.isPlainObject(e)){a={};for(var d=Object.keys(e),u=0,c=d.length;c>u;u++){
var h=d[u];a[h]=n.serialize(e[h],t,i,r)}}else a="number"==typeof e?t.formatter.number(e,t.precision):e;
return o&&r.length>0?[["dictionary",r.definitions],a]:a},deserialize:function(e,t,i,r){
var a=e,s=!i;if(i=i||{},Array.isArray(e)){var o=e[0],l="dictionary"===o;if(1==e.length&&/^#/.test(o))return i.dictionary[o];
o=n.exports[o],a=[],r&&(i.dictionary=a);for(var u=o?1:0,c=e.length;c>u;u++)a.push(n.deserialize(e[u],t,i,l));
if(o){var d=a;t?a=t(o,d):(a=n.create(o.prototype),o.apply(a,d))}}else if(n.isPlainObject(e)){
a={},r&&(i.dictionary=a);for(var h in e)a[h]=n.deserialize(e[h],t,i)}return s&&e&&e.length&&"dictionary"===e[0][0]?a[1]:a;
},exportJSON:function(e,t){var i=n.serialize(e,t);return t&&t.asString===!1?i:JSON.stringify(i);
},importJSON:function(e,t){return n.deserialize("string"==typeof e?JSON.parse(e):e,function(e,i){
var r=t&&t.constructor===e,a=r?t:n.create(e.prototype),s=r?a._initialize||a._set:e;
if(1===i.length&&a instanceof y&&(r||!(a instanceof x))){var o=i[0];n.isPlainObject(o)&&(o.insert=!1);
}return s.apply(a,i),r&&(t=null),a})},splice:function(e,n,i,r){var a=n&&n.length,s=i===t;
i=s?e.length:i,i>e.length&&(i=e.length);for(var o=0;a>o;o++)n[o]._index=i+o;if(s)return e.push.apply(e,n),
[];var l=[i,r];n&&l.push.apply(l,n);for(var u=e.splice.apply(e,l),o=0,c=u.length;c>o;o++)u[o]._index=t;
for(var o=i+a,c=e.length;c>o;o++)e[o]._index=o;return u},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){
return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){
return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();
}}});var i={on:function(e,t){if("string"!=typeof e)n.each(e,function(e,t){this.on(t,e);
},this);else{var i=this._eventTypes,r=i&&i[e],a=this._callbacks=this._callbacks||{};
a=a[e]=a[e]||[],-1===a.indexOf(t)&&(a.push(t),r&&r.install&&1===a.length&&r.install.call(this,e));
}return this},off:function(e,t){if("string"!=typeof e)return void n.each(e,function(e,t){
this.off(t,e)},this);var i,r=this._eventTypes,a=r&&r[e],s=this._callbacks&&this._callbacks[e];
return s&&(!t||-1!==(i=s.indexOf(t))&&1===s.length?(a&&a.uninstall&&a.uninstall.call(this,e),
delete this._callbacks[e]):-1!==i&&s.splice(i,1)),this},once:function(e,t){return this.on(e,function(){
t.apply(this,arguments),this.off(e,t)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];
if(!n)return!1;var i=[].slice.call(arguments,1);n=n.slice();for(var r=0,a=n.length;a>r;r++)if(n[r].apply(this,i)===!1){
t&&t.stop&&t.stop();break}return!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e]);
},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._callbacks,n=e?"install":"uninstall";
for(var i in t)if(t[i].length>0){var r=this._eventTypes,a=r&&r[i],s=a&&a[n];s&&s.call(this,i);
}},statics:{inject:function ie(e){var t=e._events;if(t){var i={};n.each(t,function(t,r){
var a="string"==typeof t,s=a?t:r,o=n.capitalize(s),l=s.substring(2).toLowerCase();
i[l]=a?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(e){
var t=this[s];t&&this.off(l,t),e&&this.on(l,e),this[s]=e}}),e._eventTypes=i}return ie.base.apply(this,arguments);
}}},r=n.extend({_class:"PaperScope",initialize:function re(){e=this,this.settings=new n({
applyMatrix:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],
this.palettes=[],this._id=re._id++,re._scopes[this._id]=this;var t=re.prototype;if(!this.support){
var i=J.getContext(1,1);t.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:Q.nativeModes
},J.release(i)}if(!this.browser){var r=navigator.userAgent.toLowerCase(),a=(/(win)/.exec(r)||/(mac)/.exec(r)||/(linux)/.exec(r)||[])[0],s=t.browser={
platform:a};a&&(s[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:([.\d]+))?/g,function(e,t,n,i,r){
if(!s.chrome){var a="opera"===t?i:n;"trident"===t&&(a=r,t="msie"),s.version=a,s.versionNumber=parseFloat(a),
s.name=t,s[t]=!0}}),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.9.25",
getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this;
},execute:function(t,n,i){e.PaperScript.execute(t,this,n,i),H.updateFocus()},install:function(e){
var t=this;n.each(["project","view","tool"],function(i){n.define(e,i,{configurable:!0,
get:function(){return t[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(e[i]=this[i]);
},setup:function(t){return e=this,this.project=new g(t),this},activate:function(){
e=this},clear:function(){for(var e=this.projects,t=this.tools,n=this.palettes,i=e.length-1;i>=0;i--)e[i].remove();
for(var i=t.length-1;i>=0;i--)t[i].remove();for(var i=n.length-1;i>=0;i--)n[i].remove();
},remove:function(){this.clear(),delete r._scopes[this._id]},statics:new function(){
function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n);
}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),
hasAttribute:e("has")}}}),a=n.extend(i,{initialize:function(t){this._scope=e,this._index=this._scope[this._list].push(this)-1,
!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;
var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,
this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this;
},remove:function(){return null==this._index?!1:(n.splice(this._scope[this._list],null,this._index,1),
this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,
!0)},getView:function(){return this._scope.getView()}}),s=n.extend({initialize:function(e){
this.precision=n.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){
return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){
return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y);
},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},
rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});s.instance=new s;
var o=new function(){function e(e,t,n){return t>e?t:e>n?n:e}var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],n=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,a=Math.pow,s=1e-12,l=1.12e-16;
return{TOLERANCE:1e-6,EPSILON:s,MACHINE_EPSILON:l,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,
WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-7,KAPPA:4*(r(2)-1)/3,
isZero:function(e){return e>=-s&&s>=e},clamp:e,integrate:function(e,i,r,a){for(var s=t[a-2],o=n[a-2],l=.5*(r-i),u=l+i,c=0,d=a+1>>1,h=1&a?o[c++]*e(u):0;d>c;){
var v=l*s[c];h+=o[c++]*(e(u+v)+e(u-v))}return l*h},findRoot:function(e,t,n,r,a,s,o){
for(var l=0;s>l;l++){var u=e(n),c=u/t(n),d=n-c;if(i(c)<o)return d;u>0?(a=n,n=r>=d?.5*(r+a):d):(r=n,
n=d>=a?.5*(r+a):d)}return n},solveQuadratic:function(t,n,o,u,c,d){var h,v,f=0,m=c-s,b=d+s,g=1/0,p=n;
if(n/=-2,v=n*n-t*o,0!==v&&i(v)<l){var y=a(i(t*n*o),1/3);if(1e-8>y){var _=a(10,i(Math.floor(Math.log(y)*Math.LOG10E)));
isFinite(_)||(_=0),t*=_,n*=_,o*=_,v=n*n-t*o}}if(i(t)<s){if(i(p)<s)return i(o)<s?-1:0;
h=-o/p}else if(v>=-l){var x=0>v?0:r(v),w=n+(0>n?-x:x);0===w?(h=o/t,g=-h):(h=w/t,g=o/w);
}return isFinite(h)&&(null==c||h>m&&b>h)&&(u[f++]=null==c?h:e(h,c,d)),g!==h&&isFinite(g)&&(null==c||g>m&&b>g)&&(u[f++]=null==c?g:e(g,c,d)),
f},solveCubic:function(t,n,u,c,d,h,v){var f,m,b,g=0;if(i(t)<s)t=n,m=u,b=c,f=1/0;else if(i(c)<s)m=n,
b=u,f=0;else{var p,y,_,x,w,S,C,E=1+l;if(f=-(n/t)/3,C=t*f,m=C+n,b=m*f+u,_=(C+m)*f+b,
y=b*f+c,x=y/t,w=a(i(x),1/3),S=0>x?-1:1,x=-_/t,w=x>0?1.3247179572*Math.max(w,r(x)):w,
p=f-S*w,p!==f){do f=p,C=t*f,m=C+n,b=m*f+u,_=(C+m)*f+b,y=b*f+c,p=0===_?f:f-y/_/E;while(S*p>S*f);
i(t)*f*f>i(c/f)&&(b=-c/f,m=(b-u)/f)}}var g=o.solveQuadratic(t,m,b,d,h,v);return isFinite(f)&&(0===g||f!==d[g-1])&&(null==h||f>h-s&&v+s>f)&&(d[g++]=null==h?f:e(f,h,v)),
g}}},l={_id:1,_pools:{},get:function(e){if(e){var t=e._class,n=this._pools[t];return n||(n=this._pools[t]={
_id:1}),n._id++}return this._id++}},u=n.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){
var n="undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e);if("number"===n){
var i="number"==typeof t;this.x=e,this.y=i?t:e,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===e?(this.x=this.y=0,
this.__read&&(this.__read=null===e?1:0)):(Array.isArray(e)?(this.x=e[0],this.y=e.length>1?e[1]:e[0]):null!=e.x?(this.x=e.x,
this.y=e.y):null!=e.width?(this.x=e.width,this.y=e.height):null!=e.angle?(this.x=e.length,
this.y=0,this.setAngle(e.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1));
},set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1;
},clone:function(){return new u(this.x,this.y)},toString:function(){var e=s.instance;
return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){
var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){
return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){
var t=this._angle||0;this.set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();
o.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI;
},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",
setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=u.read(arguments),t=this.getLength()*e.getLength();
if(o.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(-1>n?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x);
},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();
this.set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3;
}},{beans:!1,getDirectedAngle:function(){var e=u.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI;
},getDistance:function(){var e=u.read(arguments),t=e.x-this.x,i=e.y-this.y,r=t*t+i*i,a=n.read(arguments);
return a?r:Math.sqrt(r)},normalize:function(e){e===t&&(e=1);var n=this.getLength(),i=0!==n?e/n:0,r=new u(this.x*i,this.y*i);
return i>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(0===e)return this.clone();
e=e*Math.PI/180;var n=t?this.subtract(t):this,i=Math.sin(e),r=Math.cos(e);return n=new u(n.x*r-n.y*i,n.x*i+n.y*r),
t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){
var e=u.read(arguments);return new u(this.x+e.x,this.y+e.y)},subtract:function(){
var e=u.read(arguments);return new u(this.x-e.x,this.y-e.y)},multiply:function(){
var e=u.read(arguments);return new u(this.x*e.x,this.y*e.y)},divide:function(){var e=u.read(arguments);
return new u(this.x/e.x,this.y/e.y)},modulo:function(){var e=u.read(arguments);return new u(this.x%e.x,this.y%e.y);
},negate:function(){return new u(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this);
},isClose:function(){var e=u.read(arguments),t=n.read(arguments);return this.getDistance(e)<t;
},isCollinear:function(){var e=u.read(arguments);return u.isCollinear(this.x,this.y,e.x,e.y);
},isColinear:"#isCollinear",isOrthogonal:function(){var e=u.read(arguments);return u.isOrthogonal(this.x,this.y,e.x,e.y);
},isZero:function(){return o.isZero(this.x)&&o.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y);
},dot:function(){var e=u.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){
var e=u.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=u.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);
return new u(e.x*t,e.y*t)},statics:{min:function(){var e=u.read(arguments),t=u.read(arguments);
return new u(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var e=u.read(arguments),t=u.read(arguments);
return new u(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new u(Math.random(),Math.random());
},isCollinear:function(e,t,n,i){return Math.abs(e*i-t*n)<=1e-7*Math.sqrt((e*e+t*t)*(n*n+i*i));
},isOrthogonal:function(e,t,n,i){return Math.abs(e*n+t*i)<=1e-7*Math.sqrt((e*e+t*t)*(n*n+i*i));
}}},n.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){
return new u(t(this.x),t(this.y))}},{})),c=u.extend({initialize:function(e,t,n,i){
this._x=e,this._y=t,this._owner=n,this._setter=i},set:function(e,t,n){return this._x=e,
this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x;
},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y;
},setY:function(e){this._y=e,this._owner[this._setter](this)}}),d=n.extend({_class:"Size",
_readIndex:!0,initialize:function(e,t){var n="undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e);
if("number"===n){var i="number"==typeof t;this.width=e,this.height=i?t:e,this.__read&&(this.__read=i?2:1);
}else"undefined"===n||null===e?(this.width=this.height=0,this.__read&&(this.__read=null===e?1:0)):(Array.isArray(e)?(this.width=e[0],
this.height=e.length>1?e[1]:e[0]):null!=e.width?(this.width=e.width,this.height=e.height):null!=e.x?(this.width=e.x,
this.height=e.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1));
},set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1;
},clone:function(){return new d(this.width,this.height)},toString:function(){var e=s.instance;
return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){
var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){
var e=d.read(arguments);return new d(this.width+e.width,this.height+e.height)},subtract:function(){
var e=d.read(arguments);return new d(this.width-e.width,this.height-e.height)},multiply:function(){
var e=d.read(arguments);return new d(this.width*e.width,this.height*e.height)},divide:function(){
var e=d.read(arguments);return new d(this.width/e.width,this.height/e.height)},modulo:function(){
var e=d.read(arguments);return new d(this.width%e.width,this.height%e.height)},negate:function(){
return new d(-this.width,-this.height)},isZero:function(){return o.isZero(this.width)&&o.isZero(this.height);
},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){
return new d(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){
return new d(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){
return new d(Math.random(),Math.random())}}},n.each(["round","ceil","floor","abs"],function(e){
var t=Math[e];this[e]=function(){return new d(t(this.width),t(this.height))}},{})),h=d.extend({
initialize:function(e,t,n,i){this._width=e,this._height=t,this._owner=n,this._setter=i;
},set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),
this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,
this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){
this._height=e,this._owner[this._setter](this)}}),v=n.extend({_class:"Rectangle",
_readIndex:!0,beans:!0,initialize:function(e,i,r,a){var s="undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e),o=0;
if("number"===s?(this.x=e,this.y=i,this.width=r,this.height=a,o=4):"undefined"===s||null===e?(this.x=this.y=this.width=this.height=0,
o=null===e?1:0):1===arguments.length&&(Array.isArray(e)?(this.x=e[0],this.y=e[1],
this.width=e[2],this.height=e[3],o=1):e.x!==t||e.width!==t?(this.x=e.x||0,this.y=e.y||0,
this.width=e.width||0,this.height=e.height||0,o=1):e.from===t&&e.to===t&&(this.x=this.y=this.width=this.height=0,
this._set(e),o=1)),!o){var l=u.readNamed(arguments,"from"),c=n.peek(arguments);if(this.x=l.x,
this.y=l.y,c&&c.x!==t||n.hasNamed(arguments,"to")){var h=u.readNamed(arguments,"to");
this.width=h.x-l.x,this.height=h.y-l.y,this.width<0&&(this.x=h.x,this.width=-this.width),
this.height<0&&(this.y=h.y,this.height=-this.height)}else{var v=d.read(arguments);
this.width=v.width,this.height=v.height}o=arguments.__index}this.__read&&(this.__read=o);
},set:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this},
clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(e){
var t=n.isPlainValue(e)?v.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1;
},toString:function(){var e=s.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }";
},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)];
},getPoint:function(e){var t=e?u:c;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){
var e=u.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?d:h;return new t(this.width,this.height,this,"setSize");
},setSize:function(){var e=d.read(arguments);this._fixX&&(this.x+=(this.width-e.width)*this._fixX),
this._fixY&&(this.y+=(this.height-e.height)*this._fixY),this.width=e.width,this.height=e.height,
this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(e){
this._fixW||(this.width-=e-this.x),this.x=e,this._fixX=0},getTop:function(){return this.y;
},setTop:function(e){this._fixH||(this.height-=e-this.y),this.y=e,this._fixY=0},getRight:function(){
return this.x+this.width},setRight:function(e){this._fixX!==t&&1!==this._fixX&&(this._fixW=0),
this._fixW?this.x=e-this.width:this.width=e-this.x,this._fixX=1},getBottom:function(){
return this.y+this.height},setBottom:function(e){this._fixY!==t&&1!==this._fixY&&(this._fixH=0),
this._fixH?this.y=e-this.height:this.height=e-this.y,this._fixY=1},getCenterX:function(){
return this.x+.5*this.width},setCenterX:function(e){this.x=e-.5*this.width,this._fixX=.5;
},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(e){this.y=e-.5*this.height,
this._fixY=.5},getCenter:function(e){var t=e?u:c;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter");
},setCenter:function(){var e=u.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),
this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height;
},contains:function(e){return e&&e.width!==t||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(u.read(arguments));
},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height;
},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height;
},intersects:function(){var e=v.read(arguments);return e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x+this.width&&e.y<this.y+this.height;
},touches:function(){var e=v.read(arguments);return e.x+e.width>=this.x&&e.y+e.height>=this.y&&e.x<=this.x+this.width&&e.y<=this.y+this.height;
},intersect:function(){var e=v.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width),r=Math.min(this.y+this.height,e.y+e.height);
return new v(t,n,i-t,r-n)},unite:function(){var e=v.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);
return new v(t,n,i-t,r-n)},include:function(){var e=u.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x),r=Math.max(this.y+this.height,e.y);
return new v(t,n,i-t,r-n)},expand:function(){var e=d.read(arguments),t=e.width,n=e.height;
return new v(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,n){
return this.expand(this.width*e-this.width,this.height*(n===t?e:n)-this.height)}},n.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){
var n=e.join(""),i=/^[RL]/.test(n);t>=4&&(e[1]+=i?"Y":"X");var r=e[i?0:1],a=e[i?1:0],s="get"+r,o="get"+a,l="set"+r,d="set"+a,h="get"+n,v="set"+n;
this[h]=function(e){var t=e?u:c;return new t(this[s](),this[o](),this,v)},this[v]=function(){
var e=u.read(arguments);this[l](e.x),this[d](e.y)}},{beans:!0})),f=v.extend({initialize:function(e,t,n,i,r,a){
this.set(e,t,n,i,!0),this._owner=r,this._setter=a},set:function(e,t,n,i,r){return this._x=e,
this._y=t,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){
var e=v.prototype;return n.each(["x","y","width","height"],function(e){var t=n.capitalize(e),i="_"+e;
this["get"+t]=function(){return this[i]},this["set"+t]=function(e){this[i]=e,this._dontNotify||this._owner[this._setter](this);
}},n.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){
var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,
this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected;
},setSelected:function(e){var t=this._owner;t.setSelected&&(t._boundsSelected=e,t.setSelected(e||t._selectedSegmentState>0));
}}))}),m=n.extend({_class:"Matrix",initialize:function ae(e){var t=arguments.length,n=!0;
if(6===t?this.set.apply(this,arguments):1===t?e instanceof ae?this.set(e._a,e._c,e._b,e._d,e._tx,e._ty):Array.isArray(e)?this.set.apply(this,e):n=!1:0===t?this.reset():n=!1,
!n)throw new Error("Unsupported matrix parameters")},set:function(e,t,n,i,r,a,s){
return this._a=e,this._c=t,this._b=n,this._d=i,this._tx=r,this._ty=a,s||this._changed(),
this},_serialize:function(e){return n.serialize(this.getValues(),e)},_changed:function(){
var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(9))},clone:function(){
return new m(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(e){
return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty||!1;
},toString:function(){var e=s.instance;return"[["+[e.number(this._a),e.number(this._b),e.number(this._tx)].join(", ")+"], ["+[e.number(this._c),e.number(this._d),e.number(this._ty)].join(", ")+"]]";
},reset:function(e){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,
e||this._changed(),this},apply:function(e,t){var i=this._owner;return i?(i.transform(null,!0,n.pick(e,!0),t),
this.isIdentity()):!1},translate:function(){var e=u.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._b,
this._ty+=t*this._c+n*this._d,this._changed(),this},scale:function(){var e=u.read(arguments),t=u.read(arguments,0,{
readNull:!0});return t&&this.translate(t),this._a*=e.x,this._c*=e.x,this._b*=e.y,
this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(e){
e*=Math.PI/180;var t=u.read(arguments,1),n=t.x,i=t.y,r=Math.cos(e),a=Math.sin(e),s=n-n*r+i*a,o=i-n*a-i*r,l=this._a,c=this._b,d=this._c,h=this._d;
return this._a=r*l+a*c,this._b=-a*l+r*c,this._c=r*d+a*h,this._d=-a*d+r*h,this._tx+=s*l+o*c,
this._ty+=s*d+o*h,this._changed(),this},shear:function(){var e=u.read(arguments),t=u.read(arguments,0,{
readNull:!0});t&&this.translate(t);var n=this._a,i=this._c;return this._a+=e.y*this._b,
this._c+=e.y*this._d,this._b+=e.x*n,this._d+=e.x*i,t&&this.translate(t.negate()),
this._changed(),this},skew:function(){var e=u.read(arguments),t=u.read(arguments,0,{
readNull:!0}),n=Math.PI/180,i=new u(Math.tan(e.x*n),Math.tan(e.y*n));return this.shear(i,t);
},concatenate:function(e){var t=this._a,n=this._b,i=this._c,r=this._d,a=e._a,s=e._b,o=e._c,l=e._d,u=e._tx,c=e._ty;
return this._a=a*t+o*n,this._b=s*t+l*n,this._c=a*i+o*r,this._d=s*i+l*r,this._tx+=u*t+c*n,
this._ty+=u*i+c*r,this._changed(),this},preConcatenate:function(e){var t=this._a,n=this._b,i=this._c,r=this._d,a=this._tx,s=this._ty,o=e._a,l=e._b,u=e._c,c=e._d,d=e._tx,h=e._ty;
return this._a=o*t+l*i,this._b=o*n+l*r,this._c=u*t+c*i,this._d=u*n+c*r,this._tx=o*a+l*s+d,
this._ty=u*a+c*s+h,this._changed(),this},chain:function(e){var t=this._a,n=this._b,i=this._c,r=this._d,a=this._tx,s=this._ty,o=e._a,l=e._b,u=e._c,c=e._d,d=e._tx,h=e._ty;
return new m(o*t+u*n,o*i+u*r,l*t+c*n,l*i+c*r,a+d*t+h*n,s+d*i+h*r)},isIdentity:function(){
return 1===this._a&&0===this._c&&0===this._b&&1===this._d&&0===this._tx&&0===this._ty;
},orNullIfIdentity:function(){return this.isIdentity()?null:this},isInvertible:function(){
return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant();
},transform:function(e,t,n){return arguments.length<3?this._transformPoint(u.read(arguments)):this._transformCoordinates(e,t,n);
},_transformPoint:function(e,t,n){var i=e.x,r=e.y;return t||(t=new u),t.set(i*this._a+r*this._b+this._tx,i*this._c+r*this._d+this._ty,n);
},_transformCoordinates:function(e,t,n){for(var i=0,r=0,a=2*n;a>i;){var s=e[i++],o=e[i++];
t[r++]=s*this._a+o*this._b+this._tx,t[r++]=s*this._c+o*this._d+this._ty}return t},
_transformCorners:function(e){var t=e.x,n=e.y,i=t+e.width,r=n+e.height,a=[t,n,i,n,i,r,t,r];
return this._transformCoordinates(a,a,4)},_transformBounds:function(e,t,n){for(var i=this._transformCorners(e),r=i.slice(0,2),a=r.slice(),s=2;8>s;s++){
var o=i[s],l=1&s;o<r[l]?r[l]=o:o>a[l]&&(a[l]=o)}return t||(t=new v),t.set(r[0],r[1],a[0]-r[0],a[1]-r[1],n);
},inverseTransform:function(){return this._inverseTransform(u.read(arguments))},_getDeterminant:function(){
var e=this._a*this._d-this._b*this._c;return isFinite(e)&&!o.isZero(e)&&isFinite(this._tx)&&isFinite(this._ty)?e:null;
},_inverseTransform:function(e,t,n){var i=this._getDeterminant();if(!i)return null;
var r=e.x-this._tx,a=e.y-this._ty;return t||(t=new u),t.set((r*this._d-a*this._b)/i,(a*this._a-r*this._c)/i,n);
},decompose:function(){var e=this._a,t=this._b,n=this._c,i=this._d;if(o.isZero(e*i-t*n))return null;
var r=Math.sqrt(e*e+t*t);e/=r,t/=r;var a=e*n+t*i;n-=e*a,i-=t*a;var s=Math.sqrt(n*n+i*i);
return n/=s,i/=s,a/=s,t*n>e*i&&(e=-e,t=-t,a=-a,r=-r),{scaling:new u(r,s),rotation:180*-Math.atan2(t,e)/Math.PI,
shearing:a}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty];
},getTranslation:function(){return new u(this._tx,this._ty)},getScaling:function(){
return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation;
},inverted:function(){var e=this._getDeterminant();return e&&new m(this._d/e,-this._c/e,-this._b/e,this._a/e,(this._b*this._ty-this._d*this._tx)/e,(this._c*this._tx-this._a*this._ty)/e);
},shiftless:function(){return new m(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(e){
this.isIdentity()||e.transform(this._a,this._c,this._b,this._d,this._tx,this._ty);
}},n.each(["a","c","b","d","tx","ty"],function(e){var t=n.capitalize(e),i="_"+e;this["get"+t]=function(){
return this[i]},this["set"+t]=function(e){this[i]=e,this._changed()}},{})),b=n.extend({
_class:"Line",initialize:function(e,t,n,i,r){var a=!1;arguments.length>=4?(this._px=e,
this._py=t,this._vx=n,this._vy=i,a=r):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,
a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new u(this._px,this._py);
},getVector:function(){return new u(this._vx,this._vy)},getLength:function(){return this.getVector().getLength();
},intersect:function(e,t){return b.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t);
},getSide:function(e,t){return b.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t);
},getDistance:function(e){return Math.abs(b.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0));
},isCollinear:function(e){return u.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){
return u.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,i,r,a,s,l,c,d){
c||(n-=e,i-=t,s-=r,l-=a);var h=n*l-i*s;if(!o.isZero(h)){var v=e-r,f=t-a,m=(s*f-l*v)/h,b=(n*f-i*v)/h,g=1e-12,p=-g,y=1+g;
if(d||m>p&&y>m&&b>p&&y>b)return d||(m=0>=m?0:m>=1?1:m),new u(e+m*n,t+m*i)}},getSide:function(e,t,n,i,r,a,s,o){
s||(n-=e,i-=t);var l=r-e,u=a-t,c=l*i-u*n;return 0!==c||o||(c=(l*n+l*n)/(n*n+i*i),
c>=0&&1>=c&&(c=0)),0>c?-1:c>0?1:0},getSignedDistance:function(e,t,n,i,r,a,s){return s||(n-=e,
i-=t),0===n?i>0?r-e:e-r:0===i?0>n?a-t:t-a:((r-e)*i-(a-t)*n)/Math.sqrt(n*n+i*i)}}}),g=a.extend({
_class:"Project",_list:"projects",_reference:"project",initialize:function(e){a.call(this,!0),
this._children=[],this._namedChildren={},this._activeLayer=null,this.symbols=[],this._currentStyle=new B(null,null,this),
this._view=H.create(this,e||J.getCanvas(1,1)),this._selectedItems={},this._selectedItemCount=0,
this._updateVersion=0},_serialize:function(e,t){return n.serialize(this._children,e,!0,t);
},_changed:function(e,t){1&e&&(this._needsUpdate=!0);var n=this._changes;if(n&&t){
var i=this._changesById,r=t._id,a=i[r];a?a.flags|=e:n.push(i[r]={item:t,flags:e});
}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove();this.symbols=[];
},isEmpty:function(){return 0===this._children.length},remove:function se(){return se.base.call(this)?(this._view&&this._view.remove(),
!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle;
},setCurrentStyle:function(e){this._currentStyle.initialize(e)},getIndex:function(){
return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){
return this._children},getActiveLayer:function(){return this._activeLayer||new x({
project:this})},getSelectedItems:function(){var e=this._selectedItems,t=[];for(var n in e){
var i=e[n];i.isInserted()?t.push(i):(this._selectedItemCount--,delete e[n])}return t;
},_updateSelection:function(e){var t=e._id,n=this._selectedItems;e._selected?n[t]!==e&&(this._selectedItemCount++,
n[t]=e):n[t]===e&&(this._selectedItemCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;n>t;t++)e[t].setFullySelected(!0);
},deselectAll:function(){var e=this._selectedItems;for(var t in e)e[t].setFullySelected(!1);
},hitTest:function(){for(var e=u.read(arguments),t=E.getOptions(n.read(arguments)),i=this._children,r=i.length-1;r>=0;r--){
var a=i[r]._hitTest(e,t);if(a)return a}return null},addLayer:function(e){return this.insertLayer(t,e);
},insertLayer:function(e,t){return t instanceof x?(t._remove(!1,!0),n.splice(this._children,[t],e,0),
t._setProject(this,!0),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)):t=null,
t},_insertItem:function(e,n,i,r){return n=this.insertLayer(e,n)||(this._activeLayer||this._insertItem(t,new x(y.NO_INSERT),!0,!0)).insertChild(e,n,i),
r&&n.activate&&n.activate(),n},getItems:function(e){return y._getItems(this,e)},getItem:function(e){
return y._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();
var t=this._activeLayer;return n.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){
var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var i in n){
var r=n[i];for(var a in t){var s=t[a];s&&s!=n&&delete s[r._id]}r.remove()}t[e]=null;
}}},draw:function(e,t,i){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,a=new n({
offset:new u(0,0),pixelRatio:i,viewMatrix:t.isIdentity()?null:t,matrices:[new m],
updateMatrix:!0}),s=0,o=r.length;o>s;s++)r[s].draw(e,a);if(e.restore(),this._selectedItemCount>0){
e.save(),e.strokeWidth=1;var l=this._selectedItems,c=this._scope.settings.handleSize,d=this._updateVersion;
for(var h in l)l[h]._drawSelection(e,t,c,l,d);e.restore()}}}),p=n.extend({_class:"Symbol",
initialize:function(t,n){this._id=l.get(),this.project=e.project,this.project.symbols.push(this),
t&&this.setDefinition(t,n)},_serialize:function(e,t){return t.add(this,function(){
return n.serialize([this._class,this._definition],e,!1,t)})},_changed:function(e){
8&e&&y._clearBoundsCache(this),1&e&&this.project._changed(e)},getDefinition:function(){
return this._definition},setDefinition:function(e,t){e._parentSymbol&&(e=e.clone()),
this._definition&&(this._definition._parentSymbol=null),this._definition=e,e.remove(),
e.setSelected(!1),t||e.setPosition(new u),e._parentSymbol=this,this._changed(9)},
place:function(e){return new C(this,e)},clone:function(){return new p(this._definition.clone(!1));
},equals:function(e){return e===this||e&&this.definition.equals(e.definition)||!1;
}}),y=n.extend(i,{statics:{extend:function oe(e){return e._serializeFields&&(e._serializeFields=new n(this.prototype._serializeFields,e._serializeFields)),
oe.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_applyMatrix:!0,
_canApplyMatrix:!0,_canScaleStroke:!1,_boundsSelected:!1,_selectChildren:!1,_serializeFields:{
name:null,applyMatrix:null,matrix:new m,pivot:null,locked:!1,visible:!0,blendMode:"normal",
opacity:1,guide:!1,selected:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(i,r){
var a=i&&n.isPlainObject(i),s=a&&i.internal===!0,o=this._matrix=new m,u=a&&i.project||e.project;
return this._id=s?null:l.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&e.settings.applyMatrix,
r&&o.translate(r),o._owner=this,this._style=new B(u._currentStyle,this,u),s||a&&i.insert===!1?this._setProject(u):(a&&i.parent||u)._insertItem(t,this,!0,!0),
a&&i!==y.NO_INSERT&&this._set(i,{internal:!0,insert:!0,project:!0,parent:!0},!0),
a},_events:n.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(e){
this[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){
this.getView()._countItemEvent(e,-1)}}},{onFrame:{install:function(){this.getView()._animateItem(this,!0);
},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{}}),_serialize:function(e,t){
function i(i){for(var s in i){var o=a[s];n.equals(o,"leading"===s?1.2*i.fontSize:i[s])||(r[s]=n.serialize(o,e,"data"!==s,t));
}}var r={},a=this;return i(this._serializeFields),this instanceof _||i(this._style._defaults),
[this._class,r]},_changed:function(e){var n=this._parentSymbol,i=this._parent||n,r=this._project;
8&e&&(this._bounds=this._position=this._decomposed=this._globalMatrix=t),i&&40&e&&y._clearBoundsCache(i),
2&e&&y._clearBoundsCache(this),r&&r._changed(e,this),n&&n._changed(e)},set:function(e){
return e&&this._set(e),this},getId:function(){return this._id},getName:function(){
return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");
var n=this._getOwner();if(e&&n){var i=n._children,r=n._namedChildren;(r[e]=r[e]||[]).push(this),
e in i||(i[e]=this)}this._name=e||t,this._changed(128)},getStyle:function(){return this._style;
},setStyle:function(e){this.getStyle().set(e)}},n.each(["locked","visible","blendMode","opacity","guide"],function(e){
var t=n.capitalize(e),e="_"+e;this["get"+t]=function(){return this[e]},this["set"+t]=function(t){
t!=this[e]&&(this[e]=t,this._changed("_locked"===e?128:129))}},{}),{beans:!0,_locked:!1,
_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;n>t;t++)if(e[t].isSelected())return!0;
return this._selected},setSelected:function(e,t){if(!t&&this._selectChildren)for(var n=this._children,i=0,r=n.length;r>i;i++)n[i].setSelected(e);
if((e=!!e)^this._selected){this._selected=e;var a=this._project;a&&(a._updateSelection(this),
this._changed(129))}},_selected:!1,isFullySelected:function(){var e=this._children;
if(e&&this._selected){for(var t=0,n=e.length;n>t;t++)if(!e[t].isFullySelected())return!1;
return!0}return this._selected},setFullySelected:function(e){var t=this._children;
if(t)for(var n=0,i=t.length;i>n;n++)t[n].setFullySelected(e);this.setSelected(e,!0);
},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,
e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024));
},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},
setData:function(e){this._data=e},getPosition:function(e){var t=this._position,n=e?u:c;
if(!t){var i=this._pivot;t=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0);
}return new n(t.x,t.y,this,"setPosition")},setPosition:function(){this.translate(u.read(arguments).subtract(this.getPosition(!0)));
},getPivot:function(e){var t=this._pivot;if(t){var n=e?u:c;t=new n(t.x,t.y,this,"setPivot");
}return t},setPivot:function(){this._pivot=u.read(arguments,0,{clone:!0,readNull:!0
}),this._position=t},_pivot:null},n.each(["bounds","strokeBounds","handleBounds","roughBounds","internalBounds","internalHandleBounds","internalRoughBounds"],function(e){
var t="get"+n.capitalize(e),i=e.match(/^internal(.*)$/),r=i?"get"+i[1]:null;this[t]=function(n){
var i=this._boundsGetter,a=!r&&("string"==typeof i?i:i&&i[t])||t,s=this._getCachedBounds(a,n,this,r);
return"bounds"===e?new f(s.x,s.y,s.width,s.height,this,"setBounds"):s}},{beans:!0,
_getBounds:function(e,t,n){var i=this._children;if(!i||0===i.length)return new v;y._updateBoundsCache(this,n);
for(var r=1/0,a=-r,s=r,o=a,l=0,u=i.length;u>l;l++){var c=i[l];if(c._visible&&!c.isEmpty()){
var d=c._getCachedBounds(e,t&&t.chain(c._matrix),n);r=Math.min(d.x,r),s=Math.min(d.y,s),
a=Math.max(d.x+d.width,a),o=Math.max(d.y+d.height,o)}}return isFinite(r)?new v(r,s,a-r,o-s):new v;
},setBounds:function(){var e=v.read(arguments),t=this.getBounds(),n=new m,i=e.getCenter();
n.translate(i),e.width==t.width&&e.height==t.height||n.scale(0!==t.width?e.width/t.width:1,0!==t.height?e.height/t.height:1),
i=t.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getCachedBounds:function(e,t,n,i){
t=t&&t.orNullIfIdentity();var r=i?null:this._matrix.orNullIfIdentity(),a=(!t||t.equals(r))&&e;
if(y._updateBoundsCache(this._parent||this._parentSymbol,n),a&&this._bounds&&this._bounds[a])return this._bounds[a].clone();
var s=this._getBounds(i||e,t||r,n);if(a){this._bounds||(this._bounds={});var o=this._bounds[a]=s.clone();
o._internal=!!i}return s},statics:{_updateBoundsCache:function(e,t){if(e){var n=t._id,i=e._boundsCache=e._boundsCache||{
ids:{},list:[]};i.ids[n]||(i.list.push(t),i.ids[n]=t)}},_clearBoundsCache:function(e){
var n=e._boundsCache;if(n){e._bounds=e._position=e._boundsCache=t;for(var i=0,r=n.list,a=r.length;a>i;i++){
var s=r[i];s!==e&&(s._bounds=s._position=t,s._boundsCache&&y._clearBoundsCache(s));
}}}}}),{beans:!0,_decompose:function(){return this._decomposed=this._matrix.decompose();
},getRotation:function(){var e=this._decomposed||this._decompose();return e&&e.rotation;
},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;
this.rotate(e-t),n.rotation=e,this._decomposed=n}},getScaling:function(e){var t=this._decomposed||this._decompose(),n=t&&t.scaling,i=e?u:c;
return n&&new i(n.x,n.y,this,"setScaling")},setScaling:function(){var e=this.getScaling();
if(e){var t=u.read(arguments,0,{clone:!0}),n=this._decomposed;this.scale(t.x/e.x,t.y/e.y),
n.scaling=t,this._decomposed=n}},getMatrix:function(){return this._matrix},setMatrix:function(){
var e=this._matrix;e.initialize.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix,n=this._project._updateVersion;
if(t&&t._updateVersion!==n&&(t=null),!t){t=this._globalMatrix=this._matrix.clone();
var i=this._parent;i&&t.preConcatenate(i.getGlobalMatrix(!0)),t._updateVersion=n}
return e?t:t.clone()},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){
(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",
setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project;
},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),
this._project=e;for(var n=this._children,i=0,r=n&&n.length;r>i;i++)n[i]._setProject(e);
t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function le(e){
le.base.call(this,e);for(var t=this._children,n=0,i=t&&t.length;i>n;n++)t[n]._installEvents(e);
},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof x)return e;return null;
},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this);
},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e,t){
this.removeChildren(),this.addChildren(e,t)},getFirstChild:function(){return this._children&&this._children[0]||null;
},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null;
},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null;
},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null;
},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1;
},_equals:function(e){return n.equals(this._children,e._children)},clone:function(e){
var n=new this.constructor(y.NO_INSERT),i=this._children;i&&n.copyAttributes(this),
n.copyContent(this),i||n.copyAttributes(this),(e===t||e)&&n.insertAbove(this);var r=this._name,a=this._parent;
if(r&&a){for(var i=a._children,s=r,o=1;i[r];)r=s+" "+o++;r!==s&&n.setName(r)}return n;
},copyContent:function(e){for(var t=e._children,n=0,i=t&&t.length;i>n;n++)this.addChild(t[n].clone(!1),!0);
},copyAttributes:function(e,t){this.setStyle(e._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,a=i.length;a>r;r++){
var s=i[r];e.hasOwnProperty(s)&&(this[s]=e[s])}t||this._matrix.initialize(e._matrix),
this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelected(e._selected);
var o=e._data,l=e._name;this._data=o?n.clone(o):null,l&&this.setName(l)},rasterize:function(e,i){
var r=this.getStrokeBounds(),a=(e||this.getView().getResolution())/72,s=r.getTopLeft().floor(),o=r.getBottomRight().ceil(),l=new d(o.subtract(s)),u=new S(y.NO_INSERT);
if(!l.isZero()){var c=J.getCanvas(l.multiply(a)),h=c.getContext("2d"),v=(new m).scale(a).translate(s.negate());
h.save(),v.applyToContext(h),this.draw(h,new n({matrices:[v]})),h.restore(),u.setCanvas(c);
}return u.transform((new m).translate(s.add(l.divide(2))).scale(1/a)),(i===t||i)&&u.insertAbove(this),
u},contains:function(){return!!this._contains(this._matrix._inverseTransform(u.read(arguments)));
},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;
return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds());
},_asPathItem:function(){return new P.Rectangle({rectangle:this.getInternalBounds(),
matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof y?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1;
},hitTest:function(){return this._hitTest(u.read(arguments),E.getOptions(n.read(arguments)));
},_hitTest:function(e,t){function i(t,i){var r=v["get"+i]();return e.subtract(r).divide(l).length<=1?new E(t,h,{
name:n.hyphenate(i),point:r}):void 0}if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;
var r=this._matrix,a=t._totalMatrix,s=this.getView(),o=t._totalMatrix=a?a.chain(r):this.getGlobalMatrix().preConcatenate(s._matrix),l=t._tolerancePadding=new d(P._getPenPadding(1,o.inverted())).multiply(Math.max(t.tolerance,1e-6));
if(e=r._inverseTransform(e),!e||!this._children&&!this.getInternalRoughBounds().expand(l.multiply(2))._containsPoint(e))return null;
var u,c=!(t.guides&&!this._guide||t.selected&&!this._selected||t.type&&t.type!==n.hyphenate(this._class)||t["class"]&&!(this instanceof t["class"])),h=this;
if(c&&(t.center||t.bounds)&&this._parent){var v=this.getInternalBounds();if(t.center&&(u=i("center","Center")),
!u&&t.bounds)for(var f=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],m=0;8>m&&!u;m++)u=i("bounds",f[m]);
}var b=!u&&this._children;if(b)for(var g=this._getChildHitTestOptions(t),m=b.length-1;m>=0&&!u;m--)u=b[m]._hitTest(e,g);
return!u&&c&&(u=this._hitTestSelf(e,t)),u&&u.point&&(u.point=r.transform(u.point)),
t._totalMatrix=a,u},_getChildHitTestOptions:function(e){return e},_hitTestSelf:function(e,t){
return t.fill&&this.hasFill()&&this._contains(e)?new E("fill",this):void 0},matches:function(e,t){
function i(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r],s=t[r];if(n.isPlainObject(a)&&n.isPlainObject(s)){
if(!i(a,s))return!1}else if(!n.equals(a,s))return!1}return!0}var r="undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e);
if("object"===r){for(var a in e)if(e.hasOwnProperty(a)&&!this.matches(a,e[a]))return!1;
return!0}if("function"===r)return e(this);if("match"===e)return t(this);var s=/^(empty|editable)$/.test(e)?this["is"+n.capitalize(e)]():"type"===e?n.hyphenate(this._class):this[e];
if("class"===e){if("function"==typeof t)return this instanceof t;s=this._class}return t instanceof RegExp?t.test(s):"function"==typeof t?!!t(s):n.isPlainObject(t)?i(t,s):n.equals(s,t);
},getItems:function(e){return y._getItems(this,e,this._matrix)},getItem:function(e){
return y._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function ue(e,t,i,r,a){
if(!r){var s="object"===("undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t))&&t,o=s&&s.overlapping,l=s&&s.inside,u=o||l,c=u&&v.read([u]);
r={items:[],recursive:s&&s.recursive!==!1,inside:!!l,overlapping:!!o,rect:c,path:o&&new P.Rectangle({
rectangle:c,insert:!1})},s&&(t=n.set({},t,{recursive:!0,inside:!0,overlapping:!0}));
}var d=e._children,h=r.items,c=r.rect;i=c&&(i||new m);for(var f=0,b=d&&d.length;b>f;f++){
var g=d[f],p=i&&i.chain(g._matrix),y=!0;if(c){var u=g.getBounds(p);if(!c.intersects(u))continue;
c.contains(u)||r.overlapping&&(u.contains(c)||r.path.intersects(g,p))||(y=!1)}if(y&&g.matches(t)&&(h.push(g),
a))break;if(r.recursive!==!1&&ue(g,t,p,r,a),a&&h.length>0)break}return h}}},{importJSON:function(e){
var t=n.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e,n){
return this.insertChild(t,e,n)},insertChild:function(e,t,n){var i=t?this.insertChildren(e,[t],n):null;
return i&&i[0]},addChildren:function(e,t){return this.insertChildren(this._children.length,e,t);
},insertChildren:function(e,t,i,r){var a=this._children;if(a&&t&&t.length>0){t=Array.prototype.slice.apply(t);
for(var s=t.length-1;s>=0;s--){var o=t[s];if(!r||o instanceof r){var l=o._parent===this&&o._index<e;
o._remove(!1,!0)&&l&&e--}else t.splice(s,1)}n.splice(a,t,e,0);for(var u=this._project,c=u&&u._changes,s=0,d=t.length;d>s;s++){
var o=t[s];o._parent=this,o._setProject(this._project,!0),o._name&&o.setName(o._name),
c&&this._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",
insertAbove:function(e,t){var n=e&&e._getOwner();return n?n._insertItem(e._index+1,this,t):null;
},insertBelow:function(e,t){var n=e&&e._getOwner();return n?n._insertItem(e._index,this,t):null;
},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null;
},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(t,this):null;
},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",
moveBelow:"#insertBelow",copyTo:function(e){return e._insertItem(t,this.clone(!1));
},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);
return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n.copyAttributes(this),
n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;
-1!==a&&(t[i]==this&&delete t[i],r.splice(a,1),r.length?t[i]=r[0]:delete n[i])}},
_remove:function(e,t){var i=this._getOwner(),r=this._project,a=this._index;return i&&null!=a?(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),
this._name&&this._removeNamed(),n.splice(i._children,null,a,1),this._installEvents(!1),
e&&r._changes&&this._changed(5),t&&i._changed(11,this),this._parent=null,!0):!1},
remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);
return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;
e=e||0,t=n.pick(t,this._children.length);for(var i=n.splice(this._children,null,e,t-e),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);
return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){
if(this._children){this._children.reverse();for(var e=0,t=this._children.length;t>e;e++)this._children[e]._index=e;
this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length;
},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent;
}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){
return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow();
},_getOrder:function(e){function t(e){var t=[];do t.unshift(e);while(e=e._parent);
return t}for(var n=t(this),i=t(e),r=0,a=Math.min(n.length,i.length);a>r;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;
return 0},hasChildren:function(){return this._children&&this._children.length>0},
isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){
return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){
return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){
for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1;
},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){
for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;
t=t._parent}return!1}},n.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;
this[e]=function(){var i=(t?n:u).read(arguments),r=u.read(arguments,0,{readNull:!0
});return this.transform((new m)[e](i,r||this.getPosition(!0)))}},{translate:function(){
var e=new m;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n,i){
e&&e.isIdentity()&&(e=null);var r=this._matrix,a=(t||this._applyMatrix)&&(!r.isIdentity()||e||t&&n&&this._children);
if(!e&&!a)return this;if(e&&r.preConcatenate(e),a=a&&this._transformContent(r,n,i)){
var s=this._pivot,o=this._style,l=o.getFillColor(!0),u=o.getStrokeColor(!0);s&&r._transformPoint(s,s,!0),
l&&l.transform(r),u&&u.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0);
}var c=this._bounds,d=this._position;this._changed(9);var h=c&&e&&e.decompose();if(h&&!h.shearing&&h.rotation%90===0){
for(var v in c){var f=c[v];!a&&f._internal||e._transformBounds(f,f)}var m=this._boundsGetter,f=c[m&&m.getBounds||m||"getBounds"];
f&&(this._position=f.getCenter(!0)),this._bounds=c}else e&&d&&(this._position=e._transformPoint(d,d));
return this},_transformContent:function(e,t,n){var i=this._children;if(i){for(var r=0,a=i.length;a>r;r++)i[r].transform(e,!0,t,n);
return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(u.read(arguments));
},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(u.read(arguments));
},parentToLocal:function(){return this._matrix._inverseTransform(u.read(arguments));
},localToParent:function(){return this._matrix._transformPoint(u.read(arguments));
},fitBounds:function(e,t){e=v.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=e.height/e.width,a=(t?i>r:r>i)?e.width/n.width:e.height/n.height,s=new v(new u,new d(n.width*a,n.height*a));
s.setCenter(e.getCenter()),this.setBounds(s)}}),{_setStyles:function(t){var n=this._style,i=n.getFillColor(),r=n.getStrokeColor(),a=n.getShadowColor();
if(i&&(t.fillStyle=i.toCanvasStyle(t)),r){var s=n.getStrokeWidth();if(s>0){t.strokeStyle=r.toCanvasStyle(t),
t.lineWidth=s;var o=n.getStrokeJoin(),l=n.getStrokeCap(),u=n.getMiterLimit();if(o&&(t.lineJoin=o),
l&&(t.lineCap=l),u&&(t.miterLimit=u),e.support.nativeDash){var c=n.getDashArray(),d=n.getDashOffset();
c&&c.length&&("setLineDash"in t?(t.setLineDash(c),t.lineDashOffset=d):(t.mozDash=c,
t.mozDashOffset=d))}}}if(a){var h=n.getShadowBlur();if(h>0){t.shadowColor=a.toCanvasStyle(t),
t.shadowBlur=h;var v=this.getShadowOffset();t.shadowOffsetX=v.x,t.shadowOffsetY=v.y;
}}},draw:function(e,t,n){function i(e){return s?s.chain(e):e}var r=this._updateVersion=this._project._updateVersion;
if(this._visible&&0!==this._opacity){var a=t.matrices,s=t.viewMatrix,o=this._matrix,l=a[a.length-1].chain(o);
if(l.isInvertible()){a.push(l),t.updateMatrix&&(l._updateVersion=r,this._globalMatrix=l);
var u,c,d,h=this._blendMode,v=this._opacity,f="normal"===h,m=Q.nativeModes[h],b=f&&1===v||t.dontStart||t.clip||(m||f&&1>v)&&this._canComposite(),g=t.pixelRatio||1;
if(!b){var p=this.getStrokeBounds(i(l));if(!p.width||!p.height)return;d=t.offset,
c=t.offset=p.getTopLeft().floor(),u=e,e=J.getContext(p.getSize().ceil().add(1).multiply(g)),
1!==g&&e.scale(g,g)}e.save();var y=n?n.chain(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i(l),_=!b&&t.clipItem,x=!y||_;
if(b?(e.globalAlpha=v,m&&(e.globalCompositeOperation=h)):x&&e.translate(-c.x,-c.y),
x&&(b?o:i(l)).applyToContext(e),_&&t.clipItem.draw(e,t.extend({clip:!0})),y){e.setTransform(g,0,0,g,0,0);
var w=t.offset;w&&e.translate(-w.x,-w.y)}this._draw(e,t,y),e.restore(),a.pop(),t.clip&&!t.dontFinish&&e.clip(),
b||(Q.process(h,e,u,v,c.subtract(d).multiply(g)),J.release(e),t.offset=d)}}},_isUpdated:function(e){
var t=this._parent;if(t instanceof R)return t._isUpdated(e);var n=this._updateVersion===e;
return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,i,r){
if((this._drawSelected||this._boundsSelected)&&this._isUpdated(r)){var a,s=this.getSelectedColor(!0)||(a=this.getLayer())&&a.getSelectedColor(!0),o=t.chain(this.getGlobalMatrix(!0));
if(e.strokeStyle=e.fillStyle=s?s.toCanvasStyle(e):"#009dec",this._drawSelected&&this._drawSelected(e,o,i),
this._boundsSelected){var l=n/2,u=o._transformCorners(this.getInternalBounds());e.beginPath();
for(var c=0;8>c;c++)e[0===c?"moveTo":"lineTo"](u[c],u[++c]);e.closePath(),e.stroke();
for(var c=0;8>c;c++)e.fillRect(u[c]-l,u[++c]-l,n,n)}}},_canComposite:function(){return!1;
}},n.each(["down","drag","up","move"],function(e){this["removeOn"+n.capitalize(e)]=function(){
var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){
var n="mouse"+t,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this;
}return this}})),_=y.extend({_class:"Group",_selectChildren:!0,_serializeFields:{
children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments);
},_changed:function ce(e){ce.base.call(this,e),1026&e&&(this._clipItem=t)},_getClipItem:function(){
var e=this._clipItem;if(e===t){e=null;for(var n=this._children,i=0,r=n.length;r>i;i++)if(n[i]._clipMask){
e=n[i];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem();
},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_draw:function(e,t){
var n=t.clip,i=!n&&this._getClipItem(),r=!0;if(t=t.extend({clipItem:i,clip:!1}),n?(e.beginPath(),
t.dontStart=t.dontFinish=!0):i&&i.draw(e,t.extend({clip:!0})),r)for(var a=this._children,s=0,o=a.length;o>s;s++){
var l=a[s];l!==i&&l.draw(e,t)}}}),x=_.extend({_class:"Layer",initialize:function(){
_.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project;
},isInserted:function de(){return this._parent?de.base.call(this):null!=this._index;
},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){return null;
}}),w=y.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,
_boundsSelected:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e){
this._initialize(e)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&n.equals(this._radius,e._radius);
},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius);
},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",
setShape:"#setType",getSize:function(){var e=this._size;return new h(e.width,e.height,this,"setSize");
},setSize:function(){var e=d.read(arguments);if(this._size){if(!this._size.equals(e)){
var t=this._type,n=e.width,i=e.height;if("rectangle"===t){var r=d.min(this._radius,e.divide(2));
this._radius.set(r.width,r.height)}else"circle"===t?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===t&&this._radius.set(n/2,i/2);
this._size.set(n,i),this._changed(9)}}else this._size=e.clone()},getRadius:function(){
var e=this._radius;return"circle"===this._type?e:new h(e.width,e.height,this,"setRadius");
},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;
var n=2*e;this._radius=e,this._size.set(n,n)}else if(e=d.read(arguments),this._radius){
if(this._radius.equals(e))return;if(this._radius.set(e.width,e.height),"rectangle"===t){
var n=d.max(this._size,e.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===t&&this._size.set(2*e.width,2*e.height);
}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(i){
var r=new(P[n.capitalize(this._type)])({center:new u,size:this._size,radius:this._radius,
insert:!1});return r.copyAttributes(this),e.settings.applyMatrix&&r.setApplyMatrix(!0),
(i===t||i)&&r.insertAbove(this),r},toShape:"#clone",_draw:function(e,t,n){var i=this._style,r=i.hasFill(),a=i.hasStroke(),s=t.dontFinish||t.clip,o=!n;
if(r||a||s){var l=this._type,u=this._radius,c="circle"===l;if(t.dontStart||e.beginPath(),
o&&c)e.arc(0,0,u,0,2*Math.PI,!0);else{var d=c?u:u.width,h=c?u:u.height,v=this._size,f=v.width,m=v.height;
if(o&&"rectangle"===l&&0===d&&0===h)e.rect(-f/2,-m/2,f,m);else{var b=f/2,g=m/2,p=.44771525016920644,y=d*p,_=h*p,x=[-b,-g+h,-b,-g+_,-b+y,-g,-b+d,-g,b-d,-g,b-y,-g,b,-g+_,b,-g+h,b,g-h,b,g-_,b-y,g,b-d,g,-b+d,g,-b+y,g,-b,g-_,-b,g-h];
n&&n.transform(x,x,32),e.moveTo(x[0],x[1]),e.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),
b!==d&&e.lineTo(x[8],x[9]),e.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),g!==h&&e.lineTo(x[16],x[17]),
e.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),b!==d&&e.lineTo(x[24],x[25]),
e.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}e.closePath()}s||!r&&!a||(this._setStyles(e),
r&&(e.fill(i.getFillRule()),e.shadowBlur=0),a&&e.stroke())},_canComposite:function(){
return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new v(this._size).setCenter(0,0),i="getStrokeBounds"===e&&this.hasStroke()&&this.getStrokeWidth(),r=i&&this.getStrokeScaling();
return i&&r&&(n=n.expand(i)),t&&(n=t._transformBounds(n)),i&&!r&&(n=n.expand(i)),
n}},new function(){function e(e,t,n){var i=e._radius;if(!i.isZero())for(var r=e._size.divide(2),a=0;4>a;a++){
var s=new u(1&a?1:-1,a>1?1:-1),o=s.multiply(r),l=o.subtract(s.multiply(i)),c=new v(o,l);
if((n?c.expand(n):c).contains(t))return l}}function t(e,t){var n=e.getAngleInRadians(),i=2*t.width,r=2*t.height,a=i*Math.sin(n),s=r*Math.cos(n);
return i*r/(2*Math.sqrt(a*a+s*s))}return{_contains:function n(t){if("rectangle"===this._type){
var i=e(this,t);return i?t.subtract(i).divide(this._radius).getLength()<=1:n.base.call(this,t);
}return t.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,r){var a=!1;
if(this.hasStroke()){var s=this._type,o=this._radius,l=this.getStrokeWidth()+2*r.tolerance;
if("rectangle"===s){var u=e(this,n,l);if(u){var c=n.subtract(u);a=2*Math.abs(c.getLength()-t(c,o))<=l;
}else{var d=new v(this._size).setCenter(0,0),h=d.expand(l),f=d.expand(-l);a=h._containsPoint(n)&&!f._containsPoint(n);
}}else"ellipse"===s&&(o=t(n,o)),a=2*Math.abs(n.getLength()-o)<=l}return a?new E("stroke",this):i.base.apply(this,arguments);
}}},{statics:new function(){function e(e,t,i,r,a){var s=new w(n.getNamed(a));return s._type=e,
s._size=i,s._radius=r,s.translate(t)}return{Circle:function(){var t=u.readNamed(arguments,"center"),i=n.readNamed(arguments,"radius");
return e("circle",t,new d(2*i),i,arguments)},Rectangle:function(){var t=v.readNamed(arguments,"rectangle"),n=d.min(d.readNamed(arguments,"radius"),t.getSize(!0).divide(2));
return e("rectangle",t.getCenter(!0),t.getSize(!0),n,arguments)},Ellipse:function(){
var t=w._readEllipse(arguments),n=t.radius;return e("ellipse",t.center,n.multiply(2),n,arguments);
},_readEllipse:function(e){var t,i;if(n.hasNamed(e,"radius"))t=u.readNamed(e,"center"),
i=d.readNamed(e,"radius");else{var r=v.readNamed(e,"rectangle");t=r.getCenter(!0),
i=r.getSize(!0).divide(2)}return{center:t,radius:i}}}}}),S=y.extend({_class:"Raster",
_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{
crossOrigin:null,source:null},initialize:function(e,n){this._initialize(e,n!==t&&u.read(arguments,1))||("string"==typeof e?this.setSource(e):this.setImage(e)),
this._size||(this._size=new d,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource();
},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this.setImage(t);else if(n){
var i=J.getCanvas(e._size);i.getContext("2d").drawImage(n,0,0),this.setImage(i)}this._crossOrigin=e._crossOrigin;
},getSize:function(){var e=this._size;return new h(e?e.width:0,e?e.height:0,this,"setSize");
},setSize:function(){var e=d.read(arguments);if(!e.equals(this._size))if(e.width>0&&e.height>0){
var t=this.getElement();this.setImage(J.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height);
}else this._canvas&&J.release(this._canvas),this._size=e.clone()},getWidth:function(){
return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight());
},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){
this.setSize(this.getWidth(),e)},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height;
},getResolution:function(){var e=this._matrix,t=new u(0,0).transform(e),n=new u(1,0).transform(e).subtract(t),i=new u(0,1).transform(e).subtract(t);
return new d(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){
return this._image},setImage:function(e){this._canvas&&J.release(this._canvas),e&&e.getContext?(this._image=null,
this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=e&&e.complete),
this._size=new d(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,
this._changed(521)},getCanvas:function(){if(!this._canvas){var e=J.getContext(this._size);
try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){J.release(e);
}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),
e&&(this._image=null,this._changed(513)),this._context},setContext:function(e){this._context=e;
},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){
function n(){var t=r.getView();t&&(e=t._scope,r.setImage(i),r.emit("load"),t.update());
}var i,r=this,a=this._crossOrigin;i=document.getElementById(t)||new Image,a&&(i.crossOrigin=a),
i.naturalWidth&&i.naturalHeight?setTimeout(n,0):(z.add(i,{load:n}),i.src||(i.src=t)),
this.setImage(i)},getCrossOrigin:function(){return this._image&&this._image.crossOrigin||this._crossOrigin||"";
},setCrossOrigin:function(e){this._crossOrigin=e,this._image&&(this._image.crossOrigin=e);
},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,
getSubCanvas:function(){var e=v.read(arguments),t=J.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),
t.canvas},getSubRaster:function(){var e=v.read(arguments),t=new S(y.NO_INSERT);return t.setImage(this.getSubCanvas(e)),
t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.preConcatenate(this._matrix),
t.insertAbove(this),t},toDataURL:function(){var e=this._image&&this._image.src;if(/^data:/.test(e))return e;
var t=this.getCanvas();return t?t.toDataURL.apply(t,arguments):null},drawImage:function(e){
var t=u.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){
var t,i;e?e instanceof M?(i=e,t=e.getBounds()):e.width?t=new v(e):e.x&&(t=new v(e.x-.5,e.y-.5,1,1)):t=this.getBounds();
var r=32,a=Math.min(t.width,r),s=Math.min(t.height,r),o=S._sampleContext;o?o.clearRect(0,0,r+1,r+1):o=S._sampleContext=J.getContext(new d(r)),
o.save();var l=(new m).scale(a/t.width,s/t.height).translate(-t.x,-t.y);l.applyToContext(o),
i&&i.draw(o,new n({clip:!0,matrices:[l]})),this._matrix.applyToContext(o);var u=this.getElement(),c=this._size;
u&&o.drawImage(u,-c.width/2,-c.height/2),o.restore();for(var h=o.getImageData(.5,.5,Math.ceil(a),Math.ceil(s)).data,f=[0,0,0],b=0,g=0,p=h.length;p>g;g+=4){
var y=h[g+3];b+=y,y/=255,f[0]+=h[g]*y,f[1]+=h[g+1]*y,f[2]+=h[g+2]*y}for(var g=0;3>g;g++)f[g]/=b;
return b?G.read(f):null},getPixel:function(){var e=u.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;
return new G("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=u.read(arguments),t=G.read(arguments),n=t._convert("rgb"),i=t._alpha,r=this.getContext(!0),a=r.createImageData(1,1),s=a.data;
s[0]=255*n[0],s[1]=255*n[1],s[2]=255*n[2],s[3]=null!=i?255*i:255,r.putImageData(a,e.x,e.y);
},createImageData:function(){var e=d.read(arguments);return this.getContext().createImageData(e.width,e.height);
},getImageData:function(){var e=v.read(arguments);return e.isEmpty()&&(e=new v(this._size)),
this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){
var t=u.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){
var n=new v(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(e){
if(this._contains(e)){var t=this;return new E("pixel",t,{offset:e.add(t._size.divide(2)).round(),
color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e){var t=this.getElement();
t&&(e.globalAlpha=this._opacity,e.drawImage(t,-this._size.width/2,-this._size.height/2));
},_canComposite:function(){return!0}}),C=y.extend({_class:"PlacedSymbol",_applyMatrix:!1,
_canApplyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,
_serializeFields:{symbol:null},initialize:function(e,n){this._initialize(e,n!==t&&u.read(arguments,1))||this.setSymbol(e instanceof p?e:new p(e));
},_equals:function(e){return this._symbol===e._symbol},copyContent:function(e){this.setSymbol(e._symbol);
},getSymbol:function(){return this._symbol},setSymbol:function(e){this._symbol=e,
this._changed(9)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(e,t,n){
var i=this.symbol._definition;return i._getCachedBounds(e,t&&t.chain(i._matrix),n);
},_hitTestSelf:function(e,t){var n=this._symbol._definition._hitTest(e,t);return n&&(n.item=this),
n},_draw:function(e,t){this.symbol._definition.draw(e,t)}}),E=n.extend({_class:"HitResult",
initialize:function(e,t,n){this.type=e,this.item=t,n&&(n.enumerable=!0,this.inject(n));
},statics:{getOptions:function(t){return new n({type:null,tolerance:e.settings.hitTolerance,
fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1
},t)}}}),k=n.extend({_class:"Segment",beans:!0,initialize:function(e,n,i,r,a,s){var o,l,u,c=arguments.length;
0===c||(1===c?e&&"point"in e?(o=e.point,l=e.handleIn,u=e.handleOut):o=e:2===c&&"number"==typeof e?o=arguments:3>=c?(o=e,
l=n,u=i):(o=e!==t?[e,n]:null,l=i!==t?[i,r]:null,u=a!==t?[a,s]:null)),new A(o,this,"_point"),
new A(l,this,"_handleIn"),new A(u,this,"_handleOut")},_serialize:function(e){return n.serialize(this.hasHandles()?[this._point,this._handleIn,this._handleOut]:this._point,e,!0);
},_changed:function(e){var t=this._path;if(t){var n,i=t._curves,r=this._index;i&&(e&&e!==this._point&&e!==this._handleIn||!(n=r>0?i[r-1]:t._closed?i[i.length-1]:null)||n._changed(),
e&&e!==this._point&&e!==this._handleOut||!(n=i[r])||n._changed()),t._changed(25)}
},getPoint:function(){return this._point},setPoint:function(){var e=u.read(arguments);
this._point.set(e.x,e.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){
var e=u.read(arguments);this._handleIn.set(e.x,e.y)},getHandleOut:function(){return this._handleOut;
},setHandleOut:function(){var e=u.read(arguments);this._handleOut.set(e.x,e.y)},hasHandles:function(){
return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){
this._handleIn.set(0,0),this._handleOut.set(0,0)},_selectionState:0,isSelected:function(e){
var t=this._selectionState;return e?e===this._point?!!(4&t):e===this._handleIn?!!(1&t):e===this._handleOut?!!(2&t):!1:!!(7&t);
},setSelected:function(e,t){var n=this._path,e=!!e,i=this._selectionState,r=i,a=t?t===this._point?4:t===this._handleIn?1:t===this._handleOut?2:0:7;
e?i|=a:i&=~a,this._selectionState=i,n&&i!==r&&(n._updateSelection(this,r,i),n._changed(129));
},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){
return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,
e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new L(e,this===e._segment1?0:1):null;
},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null;
},smooth:function(e,n,i){var r=e||{},a=r.type,s=r.factor,o=this.getPrevious(),l=this.getNext(),c=(o||this)._point,d=this._point,h=(l||this)._point,v=c.getDistance(d),f=d.getDistance(h);
if(a&&"catmull-rom"!==a){if("geometric"!==a)throw new Error("Smoothing method '"+a+"' not supported.");
if(o&&l){var m=c.subtract(h),b=s===t?.4:s,g=b*v/(v+f);n||this.setHandleIn(m.multiply(g)),
i||this.setHandleOut(m.multiply(g-b))}}else{var p=s===t?.5:s,y=Math.pow(v,p),_=y*y,x=Math.pow(f,p),w=x*x;
if(!n&&o){var S=2*w+3*x*y+_,C=3*x*(x+y);this.setHandleIn(0!==C?new u((w*c._x+S*d._x-_*h._x)/C-d._x,(w*c._y+S*d._y-_*h._y)/C-d._y):new u);
}if(!i&&l){var S=2*_+3*y*x+w,C=3*y*(y+x);this.setHandleOut(0!==C?new u((_*h._x+S*d._x-w*c._x)/C-d._x,(_*h._y+S*d._y-w*c._y)/C-d._y):new u);
}}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null;
},isFirst:function(){return 0===this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1;
},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e._x,i=e._y;e.set(t._x,t._y),
t.set(n,i)},reversed:function(){return new k(this._point,this._handleOut,this._handleIn);
},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},
clone:function(){return new k(this._point,this._handleIn,this._handleOut)},equals:function(e){
return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1;
},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),
this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }";
},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed();
},_transformCoordinates:function(e,t,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,s=i._x,o=i._y,l=2;
return t[0]=s,t[1]=o,r&&(t[l++]=r._x+s,t[l++]=r._y+o),a&&(t[l++]=a._x+s,t[l++]=a._y+o),
e&&(e._transformCoordinates(t,t,l/2),s=t[0],o=t[1],n?(i._x=s,i._y=o,l=2,r&&(r._x=t[l++]-s,
r._y=t[l++]-o),a&&(a._x=t[l++]-s,a._y=t[l++]-o)):(r||(t[l++]=s,t[l++]=o),a||(t[l++]=s,
t[l++]=o))),t}}),A=u.extend({initialize:function(e,n,i){var r,a,s;if(e)if((r=e[0])!==t)a=e[1];else{
var o=e;(r=o.x)===t&&(o=u.read(arguments),r=o.x),a=o.y,s=o.selected}else r=a=0;this._x=r,
this._y=a,this._owner=n,n[i]=this,s&&this.setSelected(!0)},set:function(e,t){return this._x=e,
this._y=t,this._owner._changed(this),this},_serialize:function(e){var t=e.formatter,n=t.number(this._x),i=t.number(this._y);
return this.isSelected()?{x:n,y:i,selected:!0}:[n,i]},getX:function(){return this._x;
},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y;
},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){return o.isZero(this._x)&&o.isZero(this._y);
},setSelected:function(e){this._owner.setSelected(e,this)},isSelected:function(){
return this._owner.isSelected(this)}}),T=n.extend({_class:"Curve",initialize:function(e,t,n,i,r,a,s,o){
var l,u,c,d,h,v,f=arguments.length;3===f?(this._path=e,l=t,u=n):0===f?(l=new k,u=new k):1===f?"segment1"in e?(l=new k(e.segment1),
u=new k(e.segment2)):"point1"in e?(c=e.point1,h=e.handle1,v=e.handle2,d=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],
d=[e[6],e[7]],h=[e[2]-e[0],e[3]-e[1]],v=[e[4]-e[6],e[5]-e[7]]):2===f?(l=new k(e),
u=new k(t)):4===f?(c=e,h=t,v=n,d=i):8===f&&(c=[e,t],d=[s,o],h=[n-e,i-t],v=[r-s,a-o]),
this._segment1=l||new k(c,null,h),this._segment2=u||new k(d,v,null)},_serialize:function(e){
return n.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0);
},_changed:function(){this._length=this._bounds=t},clone:function(){return new T(this._segment1,this._segment2);
},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),
this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),
"{ "+e.join(", ")+" }"},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;
e=t.remove(),e&&this._segment1._handleOut.set(n.x,n.y)}return e},getPoint1:function(){
return this._segment1._point},setPoint1:function(){var e=u.read(arguments);this._segment1._point.set(e.x,e.y);
},getPoint2:function(){return this._segment2._point},setPoint2:function(){var e=u.read(arguments);
this._segment2._point.set(e.x,e.y)},getHandle1:function(){return this._segment1._handleOut;
},setHandle1:function(){var e=u.read(arguments);this._segment1._handleOut.set(e.x,e.y);
},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var e=u.read(arguments);
this._segment2._handleIn.set(e.x,e.y)},getSegment1:function(){return this._segment1;
},getSegment2:function(){return this._segment2},getPath:function(){return this._path;
},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;
return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){
var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null;
},isFirst:function(){return 0===this._segment1._index},isLast:function(){var e=this._path;
return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected();
},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),
this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){
return T.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;8>n;n+=2)t.push(new u(e[n],e[n+1]));
return t},getLength:function(){return null==this._length&&(this._length=T.getLength(this.getValues(),0,1)),
this._length},getArea:function(){return T.getArea(this.getValues())},getLine:function(){
return new b(this._segment1._point,this._segment2._point)},getPart:function(e,t){
return new T(T.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return T.getLength(this.getValues(),e,t);
},getIntersections:function(e){return T._getIntersections(this.getValues(),e&&e!==this?e.getValues():null,this,e,[],{});
},_getParameter:function(e,n){return n?e:e&&e.curve===this?e.parameter:e===t&&n===t?.5:this.getParameterAt(e,0);
},divide:function(e,t,n){var i=this._getParameter(e,t),r=4e-7,a=1-r,s=null;if(i>=r&&a>=i){
var o=T.subdivide(this.getValues(),i),l=o[0],c=o[1],d=n||this.hasHandles(),h=this._segment1,v=this._segment2,f=this._path;
d&&(h._handleOut.set(l[2]-l[0],l[3]-l[1]),v._handleIn.set(c[4]-c[6],c[5]-c[7]));var m=l[6],b=l[7],g=new k(new u(m,b),d&&new u(l[4]-m,l[5]-b),d&&new u(c[2]-m,c[3]-b));
f?(f.insert(h._index+1,g),s=this.getNext()):(this._segment2=g,s=new T(g,v))}return s;
},split:function(e,t){return this._path?this._path.split(this._segment1._index,this._getParameter(e,t)):null;
},reversed:function(){return new T(this._segment2.reversed(),this._segment1.reversed());
},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0);
},statics:{getValues:function(e,t,n){var i=e._point,r=e._handleOut,a=t._handleIn,s=t._point,o=[i._x,i._y,i._x+r._x,i._y+r._y,s._x+a._x,s._y+a._y,s._x,s._y];
return n&&n._transformCoordinates(o,o,4),o},subdivide:function(e,n){var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7];
n===t&&(n=.5);var d=1-n,h=d*i+n*a,v=d*r+n*s,f=d*a+n*o,m=d*s+n*l,b=d*o+n*u,g=d*l+n*c,p=d*h+n*f,y=d*v+n*m,_=d*f+n*b,x=d*m+n*g,w=d*p+n*_,S=d*y+n*x;
return[[i,r,h,v,p,y,w,S],[w,S,_,x,b,g,u,c]]},solveCubic:function(e,t,n,i,r,a){var s=e[t],l=e[t+2],u=e[t+4],c=e[t+6],d=3*(l-s),h=3*(u-l)-d,v=c-s-d-h;
return o.solveCubic(v,h,d,s-n,i,r,a)},getParameterOf:function(e,t){var n=new u(e[0],e[1]),i=new u(e[6],e[7]),r=1e-12,a=t.isClose(n,r)?0:t.isClose(i,r)?1:null;
if(null!==a)return a;for(var s=[t.x,t.y],o=[],l=2e-7,c=0;2>c;c++)for(var d=T.solveCubic(e,c,s[c],o,0,1),h=0;d>h;h++)if(a=o[h],
t.isClose(T.getPoint(e,a),l))return a;return t.isClose(n,l)?0:t.isClose(i,l)?1:null;
},getNearestParameter:function(e,t){function n(n){if(n>=0&&1>=n){var i=t.getDistance(T.getPoint(e,n),!0);
if(v>i)return v=i,f=n,!0}}if(T.isStraight(e)){var i=e[0],r=e[1],a=e[6],s=e[7],o=a-i,l=s-r,c=o*o+l*l;
if(0===c)return 0;var d=((t.x-i)*o+(t.y-r)*l)/c;return 1e-12>d?0:d>.999999999999?1:T.getParameterOf(e,new u(i+d*o,r+d*l));
}for(var h=100,v=1/0,f=0,m=0;h>=m;m++)n(m/h);for(var b=1/(2*h);b>4e-7;)n(f-b)||n(f+b)||(b/=2);
return f},getPart:function(e,t,n){var i=t>n;if(i){var r=t;t=n,n=r}return t>0&&(e=T.subdivide(e,t)[1]),
1>n&&(e=T.subdivide(e,(n-t)/(1-t))[0]),i?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e;
},isFlatEnough:function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=3*r-2*n-l,d=3*a-2*i-u,h=3*s-2*l-n,v=3*o-2*u-i;
return Math.max(c*c,h*h)+Math.max(d*d,v*v)<10*t*t},getArea:function(e){var t=e[0],n=e[1],i=e[6],r=e[7],a=(e[2]+t)/2,s=(e[3]+n)/2,o=(e[4]+e[6])/2,l=(e[5]+e[7])/2;
return 6*((t-a)*(s+n)+(a-o)*(l+s)+(o-i)*(r+l))/10},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),i=[0,0],r=0;2>r;r++)T._addBounds(e[r],e[r+2],e[r+4],e[r+6],r,0,t,n,i);
return new v(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,i,r,a,s,l,u){
function c(e,t){var n=e-t,i=e+t;n<s[r]&&(s[r]=n),i>l[r]&&(l[r]=i)}var d=3*(t-n)-e+i,h=2*(e+n)-4*t,v=t-e,f=o.solveQuadratic(d,h,v,u),m=4e-7,b=1-m;
c(i,0);for(var g=0;f>g;g++){var p=u[g],y=1-p;p>m&&b>p&&c(y*y*y*e+3*y*y*p*t+3*y*p*p*n+p*p*p*i,a);
}}}},n.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(e){
this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];if(!t){var n=this._path;
t=this._bounds[e]=P[e]([this._segment1,this._segment2],!1,n&&n.getStyle())}return t.clone();
}},{}),n.each({isStraight:function(e,t,n){if(t.isZero()&&n.isZero())return!0;if(e.isZero())return!1;
if(t.isCollinear(e)&&n.isCollinear(e)){var i=e.dot(e),r=e.dot(t)/i,a=e.dot(n)/i;return r>=0&&1>=r&&0>=a&&a>=-1;
}return!1},isLinear:function(e,t,n){var i=e.divide(3);return t.equals(i)&&n.negate().equals(i);
}},function(e,t){this[t]=function(){var t=this._segment1,n=this._segment2;return e(n._point.subtract(t._point),t._handleOut,n._handleIn);
},this.statics[t]=function(t){var n=t[0],i=t[1],r=t[6],a=t[7];return e(new u(r-n,a-i),new u(t[2]-n,t[3]-i),new u(t[4]-r,t[5]-a));
}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero();
},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine());
},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).y)<1e-7;
},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).x)<1e-7;
}}),{beans:!1,getParameterAt:function(e,t){return T.getParameterAt(this.getValues(),e,t);
},getParameterOf:function(){return T.getParameterOf(this.getValues(),u.read(arguments));
},getLocationAt:function(e,t){var n=t?e:this.getParameterAt(e);return null!=n&&n>=0&&1>=n?new L(this,n):null;
},getLocationOf:function(){return this.getLocationAt(this.getParameterOf(u.read(arguments)),!0);
},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null;
},getNearestLocation:function(){var e=u.read(arguments),t=this.getValues(),n=T.getNearestParameter(t,e),i=T.getPoint(t,n);
return new L(this,n,i,null,e.getDistance(i))},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint();
}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];
return n.each(e,function(e){this[e+"At"]=function(t,n){var i=this.getValues();return T[e](i,n?t:T.getParameterAt(i,t,0));
}},{statics:{evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=9*(i-a)+3*(o-t),c=6*(t+a)-12*i,d=3*(i-t),h=9*(r-s)+3*(l-n),v=6*(n+s)-12*r,f=3*(r-n);
return function(e){var t=(u*e+c)*e+d,n=(h*e+v)*e+f;return Math.sqrt(t*t+n*n)}}function n(e,t){
return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function i(e,t,n,i){if(null==t||0>t||t>1)return null;
var r,a,s=e[0],l=e[1],c=e[2],d=e[3],h=e[4],v=e[5],f=e[6],m=e[7],b=4e-7,g=1-b,p=o.isZero;
if(p(c-s)&&p(d-l)&&(c=s,d=l),p(h-f)&&p(v-m)&&(h=f,v=m),0===n&&(b>t||t>g)){var y=b>t;
r=y?s:f,a=y?l:m}else{var _=3*(c-s),x=3*(h-c)-_,w=f-s-_-x,S=3*(d-l),C=3*(v-d)-S,E=m-l-S-C;
if(0===n)r=((w*t+x)*t+_)*t+s,a=((E*t+C)*t+S)*t+l;else{if(b>t?(r=_,a=S):t>g?(r=3*(f-h),
a=3*(m-v)):(r=(3*w*t+2*x)*t+_,a=(3*E*t+2*C)*t+S),i){0===r&&0===a&&(b>t||t>g)&&(r=h-c,
a=v-d);var k=Math.sqrt(r*r+a*a);k&&(r/=k,a/=k)}if(3===n){var A=6*w*t+2*x,T=6*E*t+2*C,L=Math.pow(r*r+a*a,1.5);
r=0!==L?(r*T-a*A)/L:0,a=0}}}return 2===n?new u(a,-r):new u(r,a)}return{statics:{getLength:function(i,r,a){
if(r===t&&(r=0),a===t&&(a=1),0===r&&1===a&&T.isStraight(i)){var s=i[6]-i[0],l=i[7]-i[1];
return Math.sqrt(s*s+l*l)}var u=e(i);return o.integrate(u,r,a,n(r,a))},getParameterAt:function(i,r,a){
function s(e){return m+=o.integrate(h,a,e,n(a,e)),a=e,m-r}if(a===t&&(a=0>r?1:0),0===r)return a;
var l=Math.abs,u=r>0,c=u?a:0,d=u?1:a,h=e(i),v=o.integrate(h,c,d,n(c,d));if(l(r-v)<1e-12)return u?d:c;
if(l(r)>v)return null;var f=r/v,m=0;return o.findRoot(s,h,a+f,c,d,32,1e-12)},getPoint:function(e,t){
return i(e,t,0,!1)},getTangent:function(e,t){return i(e,t,1,!0)},getWeightedTangent:function(e,t){
return i(e,t,1,!1)},getNormal:function(e,t){return i(e,t,2,!0)},getWeightedNormal:function(e,t){
return i(e,t,2,!1)},getCurvature:function(e,t){return i(e,t,3,!1).x}}}},new function(){
function e(e,t,n,i,r,a,s,o,l,u,c){var d=!c&&t.excludeStart,h=!c&&t.excludeEnd,v=4e-7,f=1-v;
if(null==r&&(r=T.getParameterOf(n,a)),null!==r&&r>=(d?v:0)&&(h?f:1)>=r&&(null==l&&(l=T.getParameterOf(s,u)),
null!==l&&l>=(h?v:0)&&(d?f:1)>=l)){var m=t.renormalize;if(m){var b=m(r,l);r=b[0],
l=b[1]}var g=new L(i,r,a||T.getPoint(n,r),c),p=new L(o,l,u||T.getPoint(s,l),c),y=g.getPath()===p.getPath()&&g.getIndex()>p.getIndex(),_=y?p:g,x=t.include;
g._intersection=p,p._intersection=g,x&&!x(_)||L.insert(e,_,!0)}}function t(r,a,s,o,l,u,c,d,h,v,f,m){
if(!(++m>=26)){var g,p,y=a[0],_=a[1],x=a[6],w=a[7],S=b.getSignedDistance,C=S(y,_,x,w,a[2],a[3]),E=S(y,_,x,w,a[4],a[5]),k=C*E>0?.75:4/9,A=k*Math.min(0,C,E),L=k*Math.max(0,C,E),M=S(y,_,x,w,r[0],r[1]),P=S(y,_,x,w,r[2],r[3]),R=S(y,_,x,w,r[4],r[5]),j=S(y,_,x,w,r[6],r[7]),O=n(M,P,R,j),V=O[0],D=O[1];
if((0!==C||0!==E||0!==M||0!==P||0!==R||0!==j)&&null!=(g=i(V,D,A,L))&&null!=(p=i(V.reverse(),D.reverse(),A,L))){
var G=c+(d-c)*g,I=c+(d-c)*p;if(Math.max(v-h,I-G)<1e-7){var N=(G+I)/2,B=(h+v)/2;r=s.getValues(),
a=o.getValues(),e(l,u,f?a:r,f?o:s,f?B:N,null,f?r:a,f?s:o,f?N:B,null)}else if(r=T.getPart(r,g,p),
p-g>.8)if(I-G>v-h){var U=T.subdivide(r,.5),N=(G+I)/2;t(a,U[0],o,s,l,u,h,v,G,N,!f,m),
t(a,U[1],o,s,l,u,h,v,N,I,!f,m)}else{var U=T.subdivide(a,.5),B=(h+v)/2;t(U[0],r,o,s,l,u,h,B,G,I,!f,m),
t(U[1],r,o,s,l,u,B,v,G,I,!f,m)}else t(a,r,o,s,l,u,h,v,G,I,!f,m)}}}function n(e,t,n,i){
var r,a=[0,e],s=[1/3,t],o=[2/3,n],l=[1,i],u=t-(2*e+i)/3,c=n-(e+2*i)/3;if(0>u*c)r=[[a,s,l],[a,o,l]];else{
var d=u/c;r=[d>=2?[a,s,l]:.5>=d?[a,o,l]:[a,s,o,l],[a,l]]}return 0>(u||c)?r.reverse():r;
}function i(e,t,n,i){return e[0][1]<n?r(e,!0,n):t[0][1]>i?r(t,!1,i):e[0][0]}function r(e,t,n){
for(var i=e[0][0],r=e[0][1],a=1,s=e.length;s>a;a++){var o=e[a][0],l=e[a][1];if(t?l>=n:n>=l)return l===n?o:i+(n-r)*(o-i)/(l-r);
i=o,r=l}return null}function a(t,n,i,r,a,s){for(var l=T.isStraight(t),u=l?n:t,c=l?t:n,d=c[0],h=c[1],v=c[6],f=c[7],m=v-d,b=f-h,g=Math.atan2(-b,m),p=Math.sin(g),y=Math.cos(g),_=[],x=0;8>x;x+=2){
var w=u[x]-d,S=u[x+1]-h;_.push(w*y-S*p,w*p+S*y)}for(var C=[],E=T.solveCubic(_,1,0,C,0,1),x=0;E>x;x++){
var k=C[x],A=T.getPoint(u,k),L=T.getParameterOf(c,A);if(null!==L){var M=T.getPoint(c,L),P=l?L:k,R=l?k:L;
(!s.excludeEnd||R>o.CURVETIME_EPSILON)&&e(a,s,t,i,P,l?M:A,n,r,R,l?A:M)}}}function s(t,n,i,r,a,s){
var o=b.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);o&&e(a,s,t,i,null,o,n,r,null,o);
}return{statics:{_getIntersections:function(n,i,r,o,l,c){if(!i)return T._getSelfIntersection(n,r,l,c);
var d=2e-7,h=n[0],v=n[1],f=n[6],m=n[7],b=i[0],g=i[1],p=i[6],y=i[7],_=(3*n[2]+h)/4,x=(3*n[3]+v)/4,w=(3*n[4]+f)/4,S=(3*n[5]+m)/4,C=(3*i[2]+b)/4,E=(3*i[3]+g)/4,k=(3*i[4]+p)/4,A=(3*i[5]+y)/4,L=Math.min,M=Math.max;
if(!(M(h,_,w,f)+d>L(b,C,k,p)&&L(h,_,w,f)-d<M(b,C,k,p)&&M(v,x,S,m)+d>L(g,E,A,y)&&L(v,x,S,m)-d<M(g,E,A,y)))return l;
var P=T.getOverlaps(n,i);if(P){for(var R=0;2>R;R++){var j=P[R];e(l,c,n,r,j[0],null,i,o,j[1],null,!0);
}return l}var O=T.isStraight(n),V=T.isStraight(i),D=O&&V,G=l.length;if((D?s:O||V?a:t)(n,i,r,o,l,c,0,1,0,1,0,0),
D&&l.length>G)return l;var I=new u(h,v),N=new u(f,m),B=new u(b,g),U=new u(p,y);return I.isClose(B,d)&&e(l,c,n,r,0,I,i,o,0,B),
!c.excludeStart&&I.isClose(U,d)&&e(l,c,n,r,0,I,i,o,1,U),!c.excludeEnd&&N.isClose(B,d)&&e(l,c,n,r,1,N,i,o,0,B),
N.isClose(U,d)&&e(l,c,n,r,1,N,i,o,1,U),l},_getSelfIntersection:function(e,t,n,i){
var r=e[0],a=e[1],s=e[2],l=e[3],c=e[4],d=e[5],h=e[6],v=e[7],f=new b(r,a,h,v,!1),m=f.getSide(new u(s,l),!0),g=f.getSide(new u(c,d),!0);
if(m===g){var p=(r-c)*(l-v)+(s-h)*(d-a);if(p*m>0)return n}var y=h-3*c+3*s-r,_=c-2*s+r,x=s-r,w=v-3*d+3*l-a,S=d-2*l+a,C=l-a,E=w*x-y*C,k=w*_-y*S,A=S*x-_*C;
if(0>E*E-4*k*A){var L,M=[],P=o.solveCubic(y*y+w*w,3*(y*_+w*S),2*(_*_+S*S)+y*x+w*C,_*x+S*C,M,0,1);
if(P>0){for(var R=0,j=0;P>R;R++){var O=Math.abs(t.getCurvatureAt(M[R],!0));O>j&&(j=O,
L=M[R])}var V=T.subdivide(e,L);i.excludeEnd=!0,i.renormalize=function(e,t){return[e*L,t*(1-L)+L];
},T._getIntersections(V[0],V[1],t,t,n,i)}}return n},getOverlaps:function(e,t){function n(e){
var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var i=Math.abs,r=4e-7,a=2e-7,s=T.isStraight(e),o=T.isStraight(t),l=s&&o,c=n(e)<n(t),d=c?t:e,h=c?e:t,v=new b(d[0],d[1],d[6],d[7]);
if(v.getDistance(new u(h[0],h[1]))<a&&v.getDistance(new u(h[6],h[7]))<a)!l&&v.getDistance(new u(d[2],d[3]))<a&&v.getDistance(new u(d[4],d[5]))<a&&v.getDistance(new u(h[2],h[3]))<a&&v.getDistance(new u(h[4],h[5]))<a&&(s=o=l=!0);else if(l)return null;
if(s^o)return null;for(var f=[e,t],m=[],g=0,p=0;2>g&&m.length<2;g+=0===p?0:1,p=1^p){
var y=T.getParameterOf(f[1^g],new u(f[g][0===p?0:6],f[g][0===p?1:7]));if(null!=y){
var _=0===g?[p,y]:[y,p];(0===m.length||i(_[0]-m[0][0])>r&&i(_[1]-m[0][1])>r)&&m.push(_);
}if(1===g&&0===m.length)break}if(2!==m.length)m=null;else if(!l){var x=T.getPart(e,m[0][0],m[1][0]),w=T.getPart(t,m[0][1],m[1][1]);
(i(w[2]-x[2])>a||i(w[3]-x[3])>a||i(w[4]-x[4])>a||i(w[5]-x[5])>a)&&(m=null)}return m;
}}}}),L=n.extend({_class:"CurveLocation",beans:!0,initialize:function he(e,t,n,i,r){
if(t>.9999996){var a=e.getNext();a&&(t=0,e=a)}this._id=l.get(he),this._setCurve(e),
this._parameter=t,this._point=n||e.getPointAt(t,!0),this._overlap=i,this._distance=r,
this._intersection=this._next=this._prev=null},_setCurve:function(e){var t=e._path;
this._path=t,this._version=t?t._version:0,this._curve=e,this._segment=null,this._segment1=e._segment1,
this._segment2=e._segment2},_setSegment:function(e){this._setCurve(e.getCurve()),
this._segment=e,this._parameter=e===this._segment1?0:1,this._point=e._point.clone();
},getSegment:function(){var e=this.getCurve(),t=this._segment;if(!t){var n=this.getParameter();
0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),
this._segment=t}return t},getCurve:function(){function e(e){var t=e&&e.getCurve();
return t&&null!=(n._parameter=t.getParameterOf(n._point))?(n._setCurve(t),n._segment=e,
t):void 0}var t=this._path,n=this;return t&&t._version!==this._version&&(this._parameter=this._curve=this._offset=null),
this._curve||e(this._segment)||e(this._segment1)||e(this._segment2.getPrevious());
},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){
var e=this.getCurve();return e&&e.getIndex()},getParameter:function(){var e=this.getCurve(),t=this._parameter;
return e&&null==t?this._parameter=e.getParameterOf(this._point):t},getPoint:function(){
return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();
if(t&&null!=n)for(var i=t.getCurves(),r=0;n>r;r++)e+=i[r].getLength();this._offset=e+=this.getCurveOffset();
}return e},getCurveOffset:function(){var e=this.getCurve(),t=this.getParameter();return null!=t&&e&&e.getPartLength(0,t);
},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance;
},divide:function(){var e=this.getCurve(),t=null;return e&&(t=e.divide(this.getParameter(),!0),
t&&this._setSegment(t._segment1)),t},split:function(){var e=this.getCurve();return e?e.split(this.getParameter(),!0):null;
},equals:function(e,t){var n=this===e,i=2e-7;if(!n&&e instanceof L&&this.getPath()===e.getPath()&&this.getPoint().isClose(e.getPoint(),i)){
var r=this.getCurve(),a=e.getCurve(),s=Math.abs,o=s((r.isLast()&&a.isFirst()?-1:r.getIndex())+this.getParameter()-((a.isLast()&&r.isFirst()?-1:a.getIndex())+e.getParameter()));
n=(4e-7>o||(o=s(this.getOffset()-e.getOffset()))<i||s(this.getPath().getLength()-o)<i)&&(t||!this._intersection&&!e._intersection||this._intersection&&this._intersection.equals(e._intersection,!0));
}return n},toString:function(){var e=[],t=this.getPoint(),n=s.instance;t&&e.push("point: "+t);
var i=this.getIndex();null!=i&&e.push("index: "+i);var r=this.getParameter();return null!=r&&e.push("parameter: "+n.number(r)),
null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }";
},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){
var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()));
}return!1},isCrossing:function(){function e(e,t,n){return n>t?e>t&&n>e:e>t&&180>=e||e>=-180&&n>e;
}var t=this._intersection;if(!t)return!1;var n=this.getParameter(),i=t.getParameter(),r=4e-7,a=1-r,s=n>r&&a>n,o=i>r&&a>i;
if(s&&o)return!this.isTouching();var l=this.getCurve(),u=r>=n?l.getPrevious():l,c=t.getCurve(),d=r>=i?c.getPrevious():c;
if(n>=a&&(l=l.getNext()),i>=a&&(c=c.getNext()),!(u&&l&&d&&c))return!1;if(s||o){var h=s?l:c;
if(h.isStraight()){var v=h.getLine(),f=s?d:u,m=s?c:l,b=f.isStraight(),g=m.isStraight();
if(b||g)return b&&v.intersect(f.getLine())||g&&v.intersect(m.getLine())}}var p=l.getTangentAt(s?n:r,!0),y=(s?p:u.getTangentAt(a,!0)).negate(),_=c.getTangentAt(o?i:r,!0),x=(o?_:d.getTangentAt(a,!0)).negate(),w=y.getAngle(),S=p.getAngle(),C=x.getAngle(),E=_.getAngle();
return!!(s?e(w,C,E)^e(S,C,E)&&e(w,E,C)^e(S,E,C):e(C,w,S)^e(E,w,S)&&e(C,S,w)^e(E,S,w));
},hasOverlap:function(){return!!this._overlap}},n.each(T.evaluateMethods,function(e){
var t=e+"At";this[e]=function(){var e=this.getParameter(),n=this.getCurve();return null!=e&&n&&n[t](e,!0);
}},{preserve:!0}),new function(){function e(e,t,n){function i(n,i){for(var a=n+i;a>=-1&&r>=a;a+=i){
var s=e[(a%r+r)%r];if(!t.getPoint().isClose(s.getPoint(),2e-7))break;if(t.equals(s))return s;
}return null}for(var r=e.length,a=0,s=r-1;s>=a;){var o=a+s>>>1,l=e[o],u=void 0;if(n&&(u=t.equals(l)?l:i(o,-1)||i(o,1)))return t._overlap&&(u._overlap=u._intersection._overlap=!0),
u;var c=t.getPath(),d=l.getPath(),h=c===d?t.getIndex()+t.getParameter()-(l.getIndex()+l.getParameter()):c._id-d._id;
0>h?s=o-1:a=o+1}return e.splice(a,0,t),t}return{statics:{insert:e,expand:function(t){
for(var n=t.slice(),i=t.length-1;i>=0;i--)e(n,t[i]._intersection,!1);return n}}}}),M=y.extend({
_class:"PathItem",_canScaleStroke:!0,initialize:function(){},getIntersections:function(e,t,n,i){
var r=this===e||!e,a=this._matrix.orNullIfIdentity(),s=r?a:(n||e._matrix).orNullIfIdentity();
if(!r&&!this.getBounds(a).touches(e.getBounds(s)))return[];for(var o,e,l=this.getCurves(),u=r?l:e.getCurves(),c=l.length,d=r?c:u.length,h=[],v=[],f=0;d>f;f++)h[f]=u[f].getValues(s);
for(var f=0;c>f;f++){var m=l[f],b=r?h[f]:m.getValues(a),g=m.getPath();g!==e&&(e=g,
o=[],v.push(o)),r&&T._getSelfIntersection(b,m,o,{include:t,excludeStart:1===c&&m.getPoint1().equals(m.getPoint2())
});for(var p=r?f+1:0;d>p;p++){if(i&&o.length)return o;var y=u[p];T._getIntersections(b,h[p],m,y,o,{
include:t,excludeStart:r&&m.getPrevious()===y,excludeEnd:r&&m.getNext()===y})}}o=[];
for(var f=0,_=v.length;_>f;f++)o.push.apply(o,v[f]);return o},getCrossings:function(e){
return this.getIntersections(e,function(e){return e._overlap||e.isCrossing()})},_asPathItem:function(){
return this},setPathData:function(e){function t(e,t){var n=+i[e];return o&&(n+=l[t]),
n}function n(e){return new u(t(e,"x"),t(e+1,"y"))}var i,r,a,s=e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,l=new u,c=new u;
this.clear();for(var h=0,v=s&&s.length;v>h;h++){var f=s[h],m=f[0],b=m.toLowerCase();
i=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var g=i&&i.length;switch(o=m===b,
"z"!==r||/[mz]/.test(b)||this.moveTo(l=c),b){case"m":case"l":for(var p="m"===b,y=0;g>y;y+=2)this[0===y&&p?"moveTo":"lineTo"](l=n(y));
a=l,p&&(c=l);break;case"h":case"v":for(var _="h"===b?"x":"y",y=0;g>y;y++)l[_]=t(y,_),
this.lineTo(l);a=l;break;case"c":for(var y=0;g>y;y+=6)this.cubicCurveTo(n(y),a=n(y+2),l=n(y+4));
break;case"s":for(var y=0;g>y;y+=4)this.cubicCurveTo(/[cs]/.test(r)?l.multiply(2).subtract(a):l,a=n(y),l=n(y+2)),
r=b;break;case"q":for(var y=0;g>y;y+=4)this.quadraticCurveTo(a=n(y),l=n(y+2));break;
case"t":for(var y=0;g>y;y+=2)this.quadraticCurveTo(a=/[qt]/.test(r)?l.multiply(2).subtract(a):l,l=n(y)),
r=b;break;case"a":for(var y=0;g>y;y+=7)this.arcTo(l=n(y+5),new d(+i[y],+i[y+1]),+i[y+2],+i[y+4],+i[y+3]);
break;case"z":this.closePath(!0)}r=b}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke());
},_contains:function(e){var t=e.isInside(this.getInternalHandleBounds())&&this._getWinding(e);
return!!("evenodd"===this.getFillRule()?1&t:t)}}),P=M.extend({_class:"Path",_serializeFields:{
segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;
var n=Array.isArray(e)?"object"===$traceurRuntime["typeof"](e[0])?e:arguments:!e||e.size!==t||e.x===t&&e.point===t?null:arguments;
n&&n.length>0?this.setSegments(n):(this._curves=t,this._selectedSegmentState=0,n||"string"!=typeof e||(this.setPathData(e),
e=null)),this._initialize(!n&&e)},_equals:function(e){return this._closed===e._closed&&n.equals(this._segments,e._segments);
},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed;var n=e._clockwise;
n!==t&&(this._clockwise=n)},_changed:function ve(e){if(ve.base.call(this,e),8&e){
if(this._length=this._area=this._clockwise=this._monoCurves=t,16&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;i>n;n++)this._curves[n]._changed();
}else 32&e&&(this._bounds=t)},getStyle:function(){var e=this._parent;return(e instanceof R?e:this)._style;
},getSegments:function(){return this._segments},setSegments:function(e){var n=this.isFullySelected();
this._segments.length=0,this._selectedSegmentState=0,this._curves=t,e&&e.length>0&&this._add(k.readAll(e)),
n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0];
},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){
var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);
for(var i=0;n>i;i++)e[i]=new T(this,t[i],t[i+1]||t[0])}return e},getFirstCurve:function(){
return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1];
},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){
if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new T(this,this._segments[t-1],this._segments[0]));
}this._changed(25)}}},{beans:!0,getPathData:function(e,t){function n(t,n){t._transformCoordinates(e,m,!1),
i=m[0],r=m[1],b?(g.push("M"+f.pair(i,r)),b=!1):(l=m[2],u=m[3],l===i&&u===r&&c===a&&d===o?n||g.push("l"+f.pair(i-a,r-o)):g.push("c"+f.pair(c-a,d-o)+" "+f.pair(l-a,u-o)+" "+f.pair(i-a,r-o))),
a=i,o=r,c=m[4],d=m[5]}var i,r,a,o,l,u,c,d,h=this._segments,v=h.length,f=new s(t),m=new Array(6),b=!0,g=[];
if(0===v)return"";for(var p=0;v>p;p++)n(h[p]);return this._closed&&v>0&&(n(h[0],!0),
g.push("z")),g.join("")}},{isEmpty:function(){return 0===this._segments.length},_transformContent:function(e){
for(var t=this._segments,n=new Array(6),i=0,r=t.length;r>i;i++)t[i]._transformCoordinates(e,n,!0);
return!0},_add:function(e,t){for(var n=this._segments,i=this._curves,r=e.length,a=null==t,t=a?n.length:t,s=0;r>s;s++){
var o=e[s];o._path&&(o=e[s]=o.clone()),o._path=this,o._index=t+s,o._selectionState&&this._updateSelection(o,0,o._selectionState);
}if(a)n.push.apply(n,e);else{n.splice.apply(n,[t,0].concat(e));for(var s=t+r,l=n.length;l>s;s++)n[s]._index=s;
}if(i){var u=this._countCurves(),c=t>0&&t+r-1===u?t-1:t,d=c,h=Math.min(c+r,u);e._curves&&(i.splice.apply(i,[c,0].concat(e._curves)),
d+=e._curves.length);for(var s=d;h>s;s++)i.splice(s,0,new T(this,null,null));this._adjustCurves(c,h);
}return this._changed(25),e},_adjustCurves:function(e,t){for(var n,i=this._segments,r=this._curves,a=e;t>a;a++)n=r[a],
n._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&0===e?i.length-1:e-1])&&(n._segment2=i[e]||i[0],
n._changed()),(n=r[t])&&(n._segment1=i[t],n._changed())},_countCurves:function(){
var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){return arguments.length>1&&"number"!=typeof e?this._add(k.readAll(arguments)):this._add([k.read(arguments)])[0];
},insert:function(e,t){return arguments.length>2&&"number"!=typeof t?this._add(k.readAll(arguments,1),e):this._add([k.read(arguments,1)],e)[0];
},addSegment:function(){return this._add([k.read(arguments)])[0]},insertSegment:function(e){
return this._add([k.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(k.readAll(e));
},insertSegments:function(e,t){return this._add(k.readAll(t),e)},removeSegment:function(e){
return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,i){e=e||0,
t=n.pick(t,this._segments.length);var r=this._segments,a=this._curves,s=r.length,o=r.splice(e,t-e),l=o.length;
if(!l)return o;for(var u=0;l>u;u++){var c=o[u];c._selectionState&&this._updateSelection(c,c._selectionState,0),
c._index=c._path=null}for(var u=e,d=r.length;d>u;u++)r[u]._index=u;if(a){for(var h=e>0&&t===s+(this._closed?1:0)?e-1:e,a=a.splice(h,l),u=a.length-1;u>=0;u--)a[u]._path=null;
i&&(o._curves=a.slice(1)),this._adjustCurves(h,h)}return this._changed(25),o},clear:"#removeSegments",
hasHandles:function(){for(var e=this._segments,t=0,n=e.length;n>t;t++)if(e[t].hasHandles())return!0;
return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;n>t;t++)e[t].clearHandles();
},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,i=e.length;i>n;n++)t+=e[n].getLength();
this._length=t}return this._length},getArea:function(){if(null==this._area){for(var e=this._segments,t=e.length,n=t-1,i=0,r=0,a=this._closed?t:n;a>r;r++)i+=T.getArea(T.getValues(e[r],e[n>r?r+1:0]));
this._area=i}return this._area},isClockwise:function(){return this._clockwise!==t?this._clockwise:this.getArea()>=0;
},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse(),this._clockwise=e;
},isFullySelected:function(){var e=this._segments.length;return this._selected&&e>0&&this._selectedSegmentState===7*e;
},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelected:function fe(e){
e||this._selectSegments(!1),fe.base.call(this,e)},_selectSegments:function(e){var t=this._segments.length;
this._selectedSegmentState=e?7*t:0;for(var n=0;t>n;n++)this._segments[n]._selectionState=e?7:0;
},_updateSelection:function(e,t,n){e._selectionState=n;var i=this._selectedSegmentState+=n-t;
i>0&&this.setSelected(!0)},flatten:function(e){for(var t=new j(this,64,.1),n=0,i=t.length/Math.ceil(t.length/e),r=t.length+(this._closed?-i:i)/2,a=[];r>=n;)a.push(new k(t.getPointAt(n))),
n+=i;this.setSegments(a)},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,i=n?2e-7:0,r=t.length-1;r>=0;r--){
var a=t[r];!a.hasHandles()&&(a.getLength()<i||n&&a.isCollinear(a.getNext()))&&a.remove();
}return this},simplify:function(e){if(this._segments.length>2){var t=new O(this,e||2.5);
this.setSegments(t.fit())}},split:function(e,t){if(null===t)return null;if(1===arguments.length){
var n=e;if("number"==typeof n&&(n=this.getLocationAt(n)),!n)return null;e=n.index,
t=n.parameter}var i=4e-7,r=1-i;t>=r&&(e++,t--);var a=this.getCurves();if(e>=0&&e<a.length){
t>=i&&a[e++].divide(t,!0);var s,o=this.removeSegments(e,this._segments.length,!0);
return this._closed?(this.setClosed(!1),s=this):(s=new P(y.NO_INSERT),s.insertAbove(this,!0),
s.copyAttributes(this)),s._add(o,0),this.addSegment(o[0]),s}return null},reverse:function(){
this._segments.reverse();for(var e=0,n=this._segments.length;n>e;e++){var i=this._segments[e],r=i._handleIn;
i._handleIn=i._handleOut,i._handleOut=r,i._index=e}this._curves=null,this._clockwise!==t&&(this._clockwise=!this._clockwise),
this._changed(9)},join:function(e){if(e){var t=e._segments,n=this.getLastSegment(),i=e.getLastSegment();
if(!i)return this;n&&n._point.equals(i._point)&&e.reverse();var r=e.getFirstSegment();
if(n&&n._point.equals(r._point))n.setHandleOut(r._handleOut),this._add(t.slice(1));else{
var a=this.getFirstSegment();a&&a._point.equals(r._point)&&e.reverse(),i=e.getLastSegment(),
a&&a._point.equals(i._point)?(a.setHandleIn(i._handleIn),this._add(t.slice(0,t.length-1),0)):this._add(t.slice());
}e._closed&&this._add([t[0]]),e.remove()}var s=this.getFirstSegment(),o=this.getLastSegment();
return s!==o&&s._point.equals(o._point)&&(s.setHandleIn(o._handleIn),o.remove(),this.setClosed(!0)),
this},toShape:function(e){function n(e,t){var n=h[e],i=n.getNext(),r=h[t],a=r.getNext();
return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point));
}function i(e){var t=h[e],n=t.getPrevious(),i=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&i._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(i._point.subtract(t._point));
}function r(e){var t=h[e],n=t.getNext(),i=t._handleOut,r=n._handleIn,a=.5522847498307936;
if(i.isOrthogonal(r)){var s=t._point,l=n._point,u=new b(s,i,!0).intersect(new b(l,r,!0),!0);
return u&&o.isZero(i.getLength()/u.subtract(s).getLength()-a)&&o.isZero(r.getLength()/u.subtract(l).getLength()-a);
}return!1}function a(e,t){return h[e]._point.getDistance(h[t]._point)}if(!this._closed)return null;
var s,l,u,c,h=this._segments;if(!this.hasHandles()&&4===h.length&&n(0,2)&&n(1,3)&&i(1)?(s=w.Rectangle,
l=new d(a(0,3),a(0,1)),c=h[1]._point.add(h[2]._point).divide(2)):8===h.length&&r(0)&&r(2)&&r(4)&&r(6)&&n(1,5)&&n(3,7)?(s=w.Rectangle,
l=new d(a(1,6),a(0,3)),u=l.subtract(new d(a(0,7),a(1,2))).divide(2),c=h[3]._point.add(h[4]._point).divide(2)):4===h.length&&r(0)&&r(1)&&r(2)&&r(3)&&(o.isZero(a(0,2)-a(1,3))?(s=w.Circle,
u=a(0,2)/2):(s=w.Ellipse,u=new d(a(2,0)/2,a(3,1)/2)),c=h[1]._point),s){var v=this.getPosition(!0),f=new s({
center:v,size:l,radius:u,insert:!1});return f.copyAttributes(this,!0),f._matrix.preConcatenate(this._matrix),
f.rotate(c.subtract(v).getAngle()+90),(e===t||e)&&f.insertAbove(this),f}return null;
},toPath:"#clone",_hitTestSelf:function(e,t){function n(t,n){return e.subtract(t).divide(n).length<=1;
}function i(e,i,r){if(!t.selected||i.isSelected()){var a=e._point;if(i!==a&&(i=i.add(a)),
n(i,_))return new E(r,f,{segment:e,point:i})}}function r(e,n){return(n||t.segments)&&i(e,e._point,"segment")||!n&&t.handles&&(i(e,e._handleIn,"handle-in")||i(e,e._handleOut,"handle-out"));
}function a(e){d.add(e)}function s(t){if(("round"!==o||"round"!==l)&&(d=new P({internal:!0,
closed:!0}),p||t._index>0&&t._index<g-1?"round"!==o&&(t._handleIn.isZero()||t._handleOut.isZero())&&P._addBevelJoin(t,o,C,c,a,!0):"round"!==l&&P._addSquareCap(t,l,C,a,!0),
!d.isEmpty())){var i;return d.contains(e)||(i=d.getNearestLocation(e))&&n(i.getPoint(),y);
}return n(t._point,_)}var o,l,c,d,h,v,f=this,m=this.getStyle(),b=this._segments,g=b.length,p=this._closed,y=t._tolerancePadding,_=y,x=t.stroke&&m.hasStroke(),w=t.fill&&m.hasFill(),S=t.curves,C=x?m.getStrokeWidth()/2:w&&t.tolerance>0||S?0:null;
if(null!==C&&(C>0?(o=m.getStrokeJoin(),l=m.getStrokeCap(),c=C*m.getMiterLimit(),_=y.add(new u(C,C))):o=l="round"),
!t.ends||t.segments||p){if(t.segments||t.handles)for(var k=0;g>k;k++)if(v=r(b[k]))return v;
}else if(v=r(b[0],!0)||r(b[g-1],!0))return v;if(null!==C){if(h=this.getNearestLocation(e)){
var A=h.getParameter();0===A||1===A&&g>1?s(h.getSegment())||(h=null):n(h.getPoint(),_)||(h=null);
}if(!h&&"miter"===o&&g>1)for(var k=0;g>k;k++){var T=b[k];if(e.getDistance(T._point)<=c&&s(T)){
h=T.getLocation();break}}}return!h&&w&&this._contains(e)||h&&!x&&!S?new E("fill",this):h?new E(x?"stroke":"curve",this,{
location:h,point:h.getPoint()}):null}},n.each(T.evaluateMethods,function(e){this[e+"At"]=function(t,n){
var i=this.getLocationAt(t,n);return i&&i[e]()}},{beans:!1,getLocationOf:function(){
for(var e=u.read(arguments),t=this.getCurves(),n=0,i=t.length;i>n;n++){var r=t[n].getLocationOf(e);
if(r)return r}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);
return e?e.getOffset():null},getLocationAt:function(e,t){var n=this.getCurves(),i=0;
if(t){var r=~~e,a=n[r];return a?a.getLocationAt(e-r,!0):null}for(var s=0,o=n.length;o>s;s++){
var l=i,a=n[s];if(i+=a.getLength(),i>e)return a.getLocationAt(e-l)}return n.length>0&&e<=this.getLength()?new L(n[n.length-1],1):null;
},getNearestLocation:function(){for(var e=u.read(arguments),t=this.getCurves(),n=1/0,i=null,r=0,a=t.length;a>r;r++){
var s=t[r].getNearestLocation(e);s._distance<n&&(n=s._distance,i=s)}return i},getNearestPoint:function(){
return this.getNearestLocation.apply(this,arguments).getPoint()},smooth:function(e){
function n(e,t){var n=e&&e.index;if(null!=n){var r=e.path;if(r&&r!==i)throw new Error(e._class+" "+n+" of "+r+" is not part of "+i);
t&&e instanceof T&&n++}else n="number"==typeof e?e:t;return Math.min(0>n&&l?n%o:0>n?n+o:n,o-1);
}var i=this,r=e||{},a=r.type||"asymmetric",s=this._segments,o=s.length,l=this._closed,u=l&&r.from===t&&r.to===t,c=n(r.from,0),d=n(r.to,o-1);
if(c>d)if(l)c-=o;else{var h=c;c=d,d=h}if(/^(?:asymmetric|continuous)$/.test(a)){var v="asymmetric"===a,f=Math.min,m=d-c+1,b=m-1,g=u?f(m,4):1,p=g,y=g,_=[];
if(l||(p=f(1,c),y=f(1,o-d-1)),b+=p+y,1>=b)return;for(var x=0,w=c-p;b>=x;x++,w++)_[x]=s[(0>w?w+o:w)%o]._point;
for(var S=_[0]._x+2*_[1]._x,C=_[0]._y+2*_[1]._y,E=2,k=b-1,A=[S],L=[C],M=[E],P=[],R=[],x=1;b>x;x++){
var j=k>x,O=j?1:v?1:2,V=j?4:v?2:7,D=j?4:v?3:8,G=j?2:v?0:1,I=O/E;E=M[x]=V-I,S=A[x]=D*_[x]._x+G*_[x+1]._x-I*S,
C=L[x]=D*_[x]._y+G*_[x+1]._y-I*C}P[k]=A[k]/M[k],R[k]=L[k]/M[k];for(var x=b-2;x>=0;x--)P[x]=(A[x]-P[x+1])/M[x],
R[x]=(L[x]-R[x+1])/M[x];P[b]=(3*_[b]._x-P[k])/2,R[b]=(3*_[b]._y-R[k])/2;for(var x=p,N=b-y,w=c;N>=x;x++,
w++){var B=s[0>w?w+o:w],U=B._point,z=P[x]-U._x,H=R[x]-U._y;(u||N>x)&&B.setHandleOut(z,H),
(u||x>p)&&B.setHandleIn(-z,-H)}}else for(var x=c;d>=x;x++)s[0>x?x+o:x].smooth(r,!u&&x===c,!u&&x===d);
}}),new function(){function t(e,t,n,i){function r(t){var n=s[t],i=s[t+1];d==n&&h==i||(e.beginPath(),
e.moveTo(d,h),e.lineTo(n,i),e.stroke(),e.beginPath(),e.arc(n,i,a,0,2*Math.PI,!0),
e.fill())}for(var a=i/2,s=new Array(6),o=0,l=t.length;l>o;o++){var u=t[o];u._transformCoordinates(n,s,!1);
var c=u._selectionState,d=s[0],h=s[1];if(1&c&&r(2),2&c&&r(4),e.fillRect(d-a,h-a,i,i),
!(4&c)){var v=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(d-a+1,h-a+1,i-2,i-2),e.fillStyle=v;
}}}function n(e,t,n){function i(t){if(n)t._transformCoordinates(n,f,!1),r=f[0],a=f[1];else{
var i=t._point;r=i._x,a=i._y}if(m)e.moveTo(r,a),m=!1;else{if(n)l=f[2],u=f[3];else{
var h=t._handleIn;l=r+h._x,u=a+h._y}l===r&&u===a&&c===s&&d===o?e.lineTo(r,a):e.bezierCurveTo(c,d,l,u,r,a);
}if(s=r,o=a,n)c=f[4],d=f[5];else{var h=t._handleOut;c=s+h._x,d=o+h._y}}for(var r,a,s,o,l,u,c,d,h=t._segments,v=h.length,f=new Array(6),m=!0,b=0;v>b;b++)i(h[b]);
t._closed&&v>0&&i(h[0])}return{_draw:function(t,i,r){function a(e){return d[(e%h+h)%h];
}var s=i.dontStart,o=i.dontFinish||i.clip,l=this.getStyle(),u=l.hasFill(),c=l.hasStroke(),d=l.getDashArray(),h=!e.support.nativeDash&&c&&d&&d.length;
if(s||t.beginPath(),(u||c&&!h||o)&&(n(t,this,r),this._closed&&t.closePath()),!o&&(u||c)&&(this._setStyles(t),
u&&(t.fill(l.getFillRule()),t.shadowBlur=0),c)){if(h){s||t.beginPath();var v,f=new j(this,32,.25,r),m=f.length,b=-l.getDashOffset(),g=0;
for(b%=m;b>0;)b-=a(g--)+a(g--);for(;m>b;)v=b+a(g++),(b>0||v>0)&&f.drawPart(t,Math.max(b,0),Math.max(v,0)),
b=v+a(g++)}t.stroke()}},_drawSelected:function(i,r){i.beginPath(),n(i,this,r),i.stroke(),
t(i,this._segments,r,e.settings.handleSize)}}},new function(){function e(e){var t=e._segments;
if(0===t.length)throw new Error("Use a moveTo() command first");return t[t.length-1];
}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),
e.length||this._add([new k(u.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.");
},lineTo:function(){this._add([new k(u.read(arguments))])},cubicCurveTo:function(){
var t=u.read(arguments),n=u.read(arguments),i=u.read(arguments),r=e(this);r.setHandleOut(t.subtract(r._point)),
this._add([new k(i,n.subtract(i))])},quadraticCurveTo:function(){var t=u.read(arguments),n=u.read(arguments),i=e(this)._point;
this.cubicCurveTo(t.add(i.subtract(t).multiply(1/3)),t.add(n.subtract(t).multiply(1/3)),n);
},curveTo:function(){var t=u.read(arguments),i=u.read(arguments),r=n.pick(n.read(arguments),.5),a=1-r,s=e(this)._point,o=t.subtract(s.multiply(a*a)).subtract(i.multiply(r*r)).divide(2*r*a);
if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);
this.quadraticCurveTo(o,i)},arcTo:function(){var t,i,r,a,s,o=e(this),l=o._point,c=u.read(arguments),h=n.peek(arguments),v=n.pick(h,!0);
if("boolean"==typeof v)var f=l.add(c).divide(2),t=f.add(f.subtract(l).rotate(v?-90:90));else if(n.remain(arguments)<=2)t=c,
c=u.read(arguments);else{var g=d.read(arguments);if(g.isZero())return this.lineTo(c);
var p=n.read(arguments),v=!!n.read(arguments),y=!!n.read(arguments),f=l.add(c).divide(2),_=l.subtract(f).rotate(-p),x=_.x,w=_.y,S=Math.abs,C=S(g.width),E=S(g.height),A=C*C,T=E*E,L=x*x,M=w*w,P=Math.sqrt(L/A+M/T);
if(P>1&&(C*=P,E*=P,A=C*C,T=E*E),P=(A*T-A*M-T*L)/(A*M+T*L),S(P)<1e-12&&(P=0),0>P)throw new Error("Cannot create an arc with the given arguments");
i=new u(C*w/E,-E*x/C).multiply((y===v?-1:1)*Math.sqrt(P)).rotate(p).add(f),s=(new m).translate(i).rotate(p).scale(C,E),
a=s._inverseTransform(l),r=a.getDirectedAngle(s._inverseTransform(c)),!v&&r>0?r-=360:v&&0>r&&(r+=360);
}if(t){var R=new b(l.add(t).divide(2),t.subtract(l).rotate(90),!0),j=new b(t.add(c).divide(2),c.subtract(t).rotate(90),!0),O=new b(l,c),V=O.getSide(t);
if(i=R.intersect(j,!0),!i){if(!V)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments");
}a=l.subtract(i),r=a.getDirectedAngle(c.subtract(i));var D=O.getSide(i);0===D?r=V*Math.abs(r):V===D&&(r+=0>r?360:-360);
}for(var G=Math.abs(r),I=G>=360?4:Math.ceil(G/90),N=r/I,B=N*Math.PI/360,U=4/3*Math.sin(B)/(1+Math.cos(B)),z=[],H=0;I>=H;H++){
var _=c,F=null;if(I>H&&(F=a.rotate(90).multiply(U),s?(_=s._transformPoint(a),F=s._transformPoint(a.add(F)).subtract(_)):_=i.add(a)),
0===H)o.setHandleOut(F);else{var q=a.rotate(-90).multiply(U);s&&(q=s._transformPoint(a.add(q)).subtract(_)),
z.push(new k(_,q,F))}a=a.rotate(N)}this._add(z)},lineBy:function(){var t=u.read(arguments),n=e(this)._point;
this.lineTo(n.add(t))},curveBy:function(){var t=u.read(arguments),i=u.read(arguments),r=n.read(arguments),a=e(this)._point;
this.curveTo(a.add(t),a.add(i),r)},cubicCurveBy:function(){var t=u.read(arguments),n=u.read(arguments),i=u.read(arguments),r=e(this)._point;
this.cubicCurveTo(r.add(t),r.add(n),r.add(i))},quadraticCurveBy:function(){var t=u.read(arguments),n=u.read(arguments),i=e(this)._point;
this.quadraticCurveTo(i.add(t),i.add(n))},arcBy:function(){var t=e(this)._point,i=t.add(u.read(arguments)),r=n.pick(n.peek(arguments),!0);
"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,t.add(u.read(arguments)))},closePath:function(e){
this.setClosed(!0),e&&this.join()}}},{_getBounds:function(e,t){return P[e](this._segments,this._closed,this.getStyle(),t);
},statics:{getBounds:function(e,t,n,i,r){function a(e){e._transformCoordinates(i,o,!1);
for(var t=0;2>t;t++)T._addBounds(l[t],l[t+4],o[t+2],o[t],t,r?r[t]:0,u,c,d);var n=l;
l=o,o=n}var s=e[0];if(!s)return new v;for(var o=new Array(6),l=s._transformCoordinates(i,new Array(6),!1),u=l.slice(0,2),c=u.slice(),d=new Array(2),h=1,f=e.length;f>h;h++)a(e[h]);
return t&&a(s),new v(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(e,t,n,i){
function r(e){h=h.include(i?i._transformPoint(e,e):e)}function a(e){h=h.unite(g.setCenter(i?i._transformPoint(e._point):e._point));
}function s(e,t){var n=e._handleIn,i=e._handleOut;"round"===t||!n.isZero()&&!i.isZero()&&n.isCollinear(i)?a(e):P._addBevelJoin(e,t,u,b,r);
}function o(e,t){"round"===t?a(e):P._addSquareCap(e,t,u,r)}if(!n.hasStroke())return P.getBounds(e,t,n,i);
for(var l=e.length-(t?0:1),u=n.getStrokeWidth()/2,c=P._getPenPadding(u,i),h=P.getBounds(e,t,n,i,c),f=n.getStrokeJoin(),m=n.getStrokeCap(),b=u*n.getMiterLimit(),g=new v(new d(c).multiply(2)),p=1;l>p;p++)s(e[p],f);
return t?s(e[0],f):l>0&&(o(e[0],m),o(e[e.length-1],m)),h},_getPenPadding:function(e,t){
if(!t)return[e,e];var n=t.shiftless(),i=n.transform(new u(e,0)),r=n.transform(new u(0,e)),a=i.getAngleInRadians(),s=i.getLength(),o=r.getLength(),l=Math.sin(a),c=Math.cos(a),d=Math.tan(a),h=Math.atan2(o*d,s),v=Math.atan2(o,d*s);
return[Math.abs(s*Math.cos(h)*c+o*Math.sin(h)*l),Math.abs(o*Math.sin(v)*c+s*Math.cos(v)*l)];
},_addBevelJoin:function(e,t,n,i,r,a){var s=e.getCurve(),o=s.getPrevious(),l=s.getPointAt(0,!0),c=o.getNormalAt(1,!0),d=s.getNormalAt(0,!0),h=c.getDirectedAngle(d)<0?-n:n;
if(c.setLength(h),d.setLength(h),a&&(r(l),r(l.add(c))),"miter"===t){var v=new b(l.add(c),new u(-c.y,c.x),!0).intersect(new b(l.add(d),new u(-d.y,d.x),!0),!0);
if(v&&l.getDistance(v)<=i&&(r(v),!a))return}a||r(l.add(c)),r(l.add(d))},_addSquareCap:function(e,t,n,i,r){
var a=e._point,s=e.getLocation(),o=s.getNormal().multiply(n);r&&(i(a.subtract(o)),
i(a.add(o))),"square"===t&&(a=a.add(o.rotate(0===s.getParameter()?-90:90))),i(a.add(o)),
i(a.subtract(o))},getHandleBounds:function(e,t,n,i,r,a){for(var s=new Array(6),o=1/0,l=-o,u=o,c=l,d=0,h=e.length;h>d;d++){
var f=e[d];f._transformCoordinates(i,s,!1);for(var m=0;6>m;m+=2){var b=0===m?a:r,g=b?b[0]:0,p=b?b[1]:0,y=s[m],_=s[m+1],x=y-g,w=y+g,S=_-p,C=_+p;
o>x&&(o=x),w>l&&(l=w),u>S&&(u=S),C>c&&(c=C)}}return new v(o,u,l-o,c-u)},getRoughBounds:function(e,t,n,i){
var r=n.hasStroke()?n.getStrokeWidth()/2:0,a=r;return r>0&&("miter"===n.getStrokeJoin()&&(a=r*n.getMiterLimit()),
"square"===n.getStrokeCap()&&(a=Math.max(a,r*Math.sqrt(2)))),P.getHandleBounds(e,t,n,i,P._getPenPadding(r,i),P._getPenPadding(a,i));
}}});P.inject({statics:new function(){function e(e,t,i){var r=n.getNamed(i),a=new P(r&&r.insert===!1&&y.NO_INSERT);
return a._add(e),a._closed=t,a.set(r)}function t(t,n,i){for(var a=new Array(4),s=0;4>s;s++){
var o=r[s];a[s]=new k(o._point.multiply(n).add(t),o._handleIn.multiply(n),o._handleOut.multiply(n));
}return e(a,!0,i)}var i=.5522847498307936,r=[new k([-1,0],[0,i],[0,-i]),new k([0,-1],[-i,0],[i,0]),new k([1,0],[0,-i],[0,i]),new k([0,1],[i,0],[-i,0])];
return{Line:function(){return e([new k(u.readNamed(arguments,"from")),new k(u.readNamed(arguments,"to"))],!1,arguments);
},Circle:function(){var e=u.readNamed(arguments,"center"),i=n.readNamed(arguments,"radius");
return t(e,new d(i),arguments)},Rectangle:function(){var t,n=v.readNamed(arguments,"rectangle"),r=d.readNamed(arguments,"radius",0,{
readNull:!0}),a=n.getBottomLeft(!0),s=n.getTopLeft(!0),o=n.getTopRight(!0),l=n.getBottomRight(!0);
if(!r||r.isZero())t=[new k(a),new k(s),new k(o),new k(l)];else{r=d.min(r,n.getSize(!0).divide(2));
var u=r.width,c=r.height,h=u*i,f=c*i;t=[new k(a.add(u,0),null,[-h,0]),new k(a.subtract(0,c),[0,f]),new k(s.add(0,c),null,[0,-f]),new k(s.add(u,0),[-h,0],null),new k(o.subtract(u,0),null,[h,0]),new k(o.add(0,c),[0,-f],null),new k(l.subtract(0,c),null,[0,f]),new k(l.subtract(u,0),[h,0])];
}return e(t,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=w._readEllipse(arguments);
return t(e.center,e.radius,arguments)},Oval:"#Ellipse",Arc:function(){var e=u.readNamed(arguments,"from"),t=u.readNamed(arguments,"through"),i=u.readNamed(arguments,"to"),r=n.getNamed(arguments),a=new P(r&&r.insert===!1&&y.NO_INSERT);
return a.moveTo(e),a.arcTo(t,i),a.set(r)},RegularPolygon:function(){for(var t=u.readNamed(arguments,"center"),i=n.readNamed(arguments,"sides"),r=n.readNamed(arguments,"radius"),a=360/i,s=i%3===0,o=new u(0,s?-r:r),l=s?-1:.5,c=new Array(i),d=0;i>d;d++)c[d]=new k(t.add(o.rotate((d+l)*a)));
return e(c,!0,arguments)},Star:function(){for(var t=u.readNamed(arguments,"center"),i=2*n.readNamed(arguments,"points"),r=n.readNamed(arguments,"radius1"),a=n.readNamed(arguments,"radius2"),s=360/i,o=new u(0,-1),l=new Array(i),c=0;i>c;c++)l[c]=new k(t.add(o.rotate(s*c).multiply(c%2?a:r)));
return e(l,!0,arguments)}}}});var R=M.extend({_class:"CompoundPath",_serializeFields:{
children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments));
},insertChildren:function me(e,n,i){for(var r=n.length-1;r>=0;r--){var a=n[r];a instanceof R&&(n.splice.apply(n,[r,1].concat(a.removeChildren())),
a.remove())}n=me.base.call(this,e,n,i,P);for(var r=0,s=!i&&n&&n.length;s>r;r++){var a=n[r];
a._clockwise===t&&a.setClockwise(0===a._index)}return n},reverse:function(){for(var e=this._children,t=0,n=e.length;n>t;t++)e[t].reverse();
},reduce:function be(e){for(var t=this._children,n=t.length-1;n>=0;n--){var i=t[n].reduce(e);
i.isEmpty()&&i.remove()}if(0===t.length){var i=new P(y.NO_INSERT);return i.copyAttributes(this),
i.insertAbove(this),this.remove(),i}return be.base.call(this)},smooth:function(e){
for(var t=this._children,n=0,i=t.length;i>n;n++)t[n].smooth(e)},isClockwise:function(){
var e=this.getFirstChild();return e&&e.isClockwise()},setClockwise:function(e){this.isClockwise()!==!!e&&this.reverse();
},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment();
},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment();
},getCurves:function(){for(var e=this._children,t=[],n=0,i=e.length;i>n;n++)t.push.apply(t,e[n].getCurves());
return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve();
},getLastCurve:function(){var e=this.getLastChild();return e&&e.getFirstCurve()},
getArea:function(){for(var e=this._children,t=0,n=0,i=e.length;i>n;n++)t+=e[n].getArea();
return t}},{beans:!0,getPathData:function(e,t){for(var n=this._children,i=[],r=0,a=n.length;a>r;r++){
var s=n[r],o=s._matrix;i.push(s.getPathData(e&&!o.isIdentity()?e.chain(o):e,t))}return i.join(" ");
}},{_getChildHitTestOptions:function(e){return e["class"]===P||"path"===e.type?e:new n(e,{
fill:!1})},_draw:function(e,t,n){var i=this._children;if(0!==i.length){t=t.extend({
dontStart:!0,dontFinish:!0}),e.beginPath();for(var r=0,a=i.length;a>r;r++)i[r].draw(e,t,n);
if(!t.clip){this._setStyles(e);var s=this._style;s.hasFill()&&(e.fill(s.getFillRule()),
e.shadowBlur=0),s.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var i=this._children,r=0,a=i.length;a>r;r++){
var s=i[r],o=s._matrix;n[s._id]||s._drawSelected(e,o.isIdentity()?t:t.chain(o))}}
},new function(){function e(e,t){var n=e._children;if(t&&0===n.length)throw new Error("Use a moveTo() command first");
return n[n.length-1]}var t={moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new P(y.NO_INSERT);
n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),i=u.read(arguments);
this.moveTo(n?i.add(n._point):i)},closePath:function(t){e(this,!0).closePath(t)}};
return n.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(n){
t[n]=function(){var t=e(this,!0);t[n].apply(t,arguments)}}),t});M.inject(new function(){
function e(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return t?n.resolveCrossings():n;
}function t(e,t,n){return e.insertAbove(n&&t.isSibling(n)&&t.getIndex()<n.getIndex()?n:t),
e.copyAttributes(t,!0),e}function i(e,t,n){var i=new e(y.NO_INSERT);return i.addChildren(t,!0),
n&&(i=i.reduce({simplify:!0})),i}function r(n,r,s){function o(e){for(var t=0,n=e.length;n>t;t++){
var i=e[t];b.push.apply(b,i._segments),g.push.apply(g,i._getMonoCurves())}}var u=v[s];
if(u[s]=!0,!n._children&&!n._closed)return a(n,r,u);var c=e(n,!0),f=r&&n!==r&&e(r,!0);
f&&(u.subtract||u.exclude)^f.isClockwise()!==c.isClockwise()&&f.reverse();var m=l(L.expand(c.getCrossings(f))),b=[],g=[],p=!0,_=!0;
o(c._children||[c]),f&&o(f._children||[f]);for(var x=0,w=m.length;w>x;x++)d(m[x]._segment,c,f,g,u);
for(var x=0,w=b.length;w>x;x++){var S=b[x],C=S._intersection;null==S._winding&&d(S,c,f,g,u),
C&&C._overlap||(p=!1,u[S._winding]&&(_=!1))}return t(p?(u.unite||u.intersect)&&n.getArea()?n.clone(!1):new P(y.NO_INSERT):i(R,h(b,u,_),!p),n,r);
}function a(n,r,a){function s(e){return l.contains(e.getPointAt(e.getLength()/2))^c?(d.unshift(e),
!0):void 0}if(!r||!r._children&&!r._closed||!a.subtract&&!a.intersect)return null;
for(var o=e(n,!1),l=e(r,!1),u=o.getCrossings(l),c=a.subtract,d=[],h=u.length-1;h>=0;h--){
var v=u[h].split();v&&(s(v)&&v.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0));
}return s(o),t(i(_,d),n,r)}function s(e,t){for(var n=e;n;){if(n===t)return;n=n._prev;
}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._prev;)t=t._prev;e._next=t,
t._prev=e}}function l(e,t){for(var n,i,r=t&&[],a=4e-7,o=1-a,l=!1,u=[],c=e.length-1;c>=0;c--){
var d=e[c];if(t){if(!t(d))continue;r.unshift(d)}var h=d._curve,v=d._parameter,f=v,m=void 0;
if(h!==n?l=!h.hasHandles():i>0&&(v/=i),a>v)m=h._segment1;else if(v>o)m=h._segment2;else{
var b=h.divide(v,!0,!0);l&&u.push(h,b),m=b._segment1}d._setSegment(m);var g=m._intersection,p=d._intersection;
if(g){s(g,p);for(var y=g;y;)s(y._intersection,g),y=y._next}else m._intersection=p;
n=h,i=f}for(var c=0,_=u.length;_>c;c++)u[c].clearHandles();return r||e}function c(e,t,n){
var i=2e-7,r=e.x,a=e.y,s=0,o=0,l=t.length,d=[],h=Math.abs;if(n){for(var v=-(1/0),f=1/0,m=a-i,b=a+i,g=0;l>g;g++)for(var p=t[g].values,y=T.solveCubic(p,0,r,d,0,1),_=y-1;_>=0;_--){
var x=T.getPoint(p,d[_]).y;m>x&&x>v?v=x:x>b&&f>x&&(f=x)}v=(v+a)/2,f=(f+a)/2,v>-(1/0)&&(s=c(new u(r,v),t)),
1/0>f&&(o=c(new u(r,f),t))}else for(var w,S=r-i,C=r+i,E=0;l>E;){w=E;var k=t[w],A=k.last,L=A.winding,M=A.values[6];
E=w+k.length;for(var g=w;E>g;g++){var k=t[g],P=k.winding,p=k.values,R=p[1],j=p[7];
if(P&&(a>=R&&j>=a||a>=j&&R>=a)){var O=a===R?p[0]:a===j?p[6]:1===T.solveCubic(p,1,a,d,0,1)?T.getPoint(p,d[0]).x:null;
if(null!=O){var V=P===-L;(a!==R||V||0>(O-r)*(M-r))&&(S>O?s+=P:O>C?o+=P:a===R&&V&&(++s,
++o))}L=P,M=p[6]}}}return Math.max(h(s),h(o))}function d(e,t,n,i,r){var a=[],s=e,o=0,l=0;
do{var u=e.getCurve(),d=u.getLength();a.push({segment:e,curve:u,length:d}),o+=d,e=e.getNext();
}while(e&&!e._intersection&&e!==s);for(var h=0;3>h;h++)for(var d=o*(h+1)/4,v=0,f=a.length;f>v;v++){
var m=a[v],b=m.length;if(b>=d){var u=m.curve,g=u._path,p=g._parent,y=u.getParameterAt(d),_=u.getPointAt(y,!0),x=Math.abs(u.getTangentAt(y,!0).y)<1e-7;
p instanceof R&&(g=p),r.subtract&&n&&(g===t&&n._getWinding(_,x)||g===n&&!t._getWinding(_,x))||(l+=c(_,i,x));
break}d-=b}for(var w=Math.round(l/3),v=a.length-1;v>=0;v--)a[v].segment._winding=w;
}function h(e,t,n){function i(e){return!(e._visited||t&&!t[e._winding])}function r(e){
return e===s||e===l}function a(e,n){if(!e._next)return e;for(;e;){var a=e._segment,s=a.getNext(),o=s._intersection;
if(r(a)||r(s)||!a._visited&&!s._visited&&(!t||(!n||i(a))&&(!(n&&o&&o._overlap)&&i(s)||!n&&o&&i(o._segment))))return e;
e=e._next}return null}for(var s,l,u=[],c=0,d=e.length;d>c;c++){var h=null,v=!1,f=e[c],m=f._intersection,b=void 0;
if(!(!i(f)||!n&&m&&f._winding&&m._overlap)){for(s=l=null;;){b=h&&f._handleIn,m=m&&(a(m,!0)||a(m,!1))||m;
var g=m&&m._segment;if(r(f)?v=!0:g&&(r(g)?(v=!0,f=g):i(g)&&(t&&t.intersect&&m._overlap&&(f._visited=!0),
f=g)),v||f._visited){f._visited=!0;break}if(n&&!i(f))break;h||(h=new P(y.NO_INSERT),
s=f,l=g),h.add(new k(f._point,b,f._handleOut)),f._visited=!0,f=f.getNext(),m=f._intersection;
}if(v)h.firstSegment.setHandleIn(b),h.setClosed(!0);else if(h){var p=h.getLength();
p>=2e-7&&console.error("Boolean operation resulted in open path","segments =",h._segments.length,"length =",p),
h=null}h&&(h._segments.length>8||!o.isZero(h.getArea()))&&(u.push(h),h=null)}}return u;
}var v={unite:{0:!0,1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};return{
_getWinding:function(e,t){return c(e,this._getMonoCurves(),t)},unite:function(e){
return r(this,e,"unite")},intersect:function(e){return r(this,e,"intersect")},subtract:function(e){
return r(this,e,"subtract")},exclude:function(e){return r(this,e,"exclude")},divide:function(e){
return t(i(_,[this.subtract(e),this.intersect(e)],!0),this,e)},resolveCrossings:function(){
function e(e){var t=e&&e._intersection;return t&&t._overlap}var t=this._children,i=t||[this],r=!1,a=!1,s=this.getIntersections(null,function(e){
return e._overlap&&(r=!0)||e.isCrossing()&&(a=!0)});if(s=L.expand(s),r)for(var o=l(s,function(e){
return e._overlap}),u=o.length-1;u>=0;u--){var c=o[u]._segment,d=c.getPrevious(),v=c.getNext();
if(c._path&&e(d)&&e(v)){c.remove(),d._handleOut.set(0,0),v._handleIn.set(0,0);var f=d.getCurve();
f.isStraight()&&0===f.getLength()&&d.remove()}}a&&(l(s,r&&function(e){var t=e.getCurve(),n=e._intersection._curve,i=e._segment;
return t&&n&&t._path&&n._path?!0:void(i&&(i._intersection=null))}),i=h(n.each(i,function(e){
this.push.apply(this,e._segments)},[])));var m,b=i.length;if(b>1){i=i.slice().sort(function(e,t){
return t.getBounds().getArea()-e.getBounds().getArea()});for(var g=i[0],p=[g],_={},x="nonzero"===this.getFillRule(),w=x&&n.each(i,function(e){
this.push(e.isClockwise()?1:-1)},[]),u=1;b>u;u++){for(var S=i[u],C=S.getInteriorPoint(),E=!1,k=null,A=!1,T=u-1;T>=0&&!k;T--)if(i[T].contains(C)){
if(x&&!E&&(w[u]+=w[T],w[u]&&w[T])){A=_[u]=!0;break}E=!0,k=!_[T]&&i[T]}A||(S.setClockwise(k?!k.isClockwise():g.isClockwise()),
p.push(S))}i=p,b=p.length}return b>1&&t?(i!==t&&this.setChildren(i,!0),m=this):1!==b||t||(i[0]!==this&&this.setSegments(i[0].removeSegments()),
m=this),m||(m=new R(y.NO_INSERT),m.addChildren(i,!0),m=m.reduce(),m.copyAttributes(this),
this.replaceWith(m)),m}}}),P.inject({_getMonoCurves:function(){function e(e){var t=e[1],r=e[7],a=Math.abs((t-r)/(e[0]-e[6]))<2e-7?0:t>r?-1:1,s={
values:e,winding:a};i.push(s),a&&(n=s)}function t(t){if(0!==T.getLength(t)){var n=t[1],i=t[3],r=t[5],a=t[7];
if(T.isStraight(t)||n>=i==i>=r&&i>=r==r>=a)e(t);else{var s=3*(i-r)-n+a,l=2*(n+r)-4*i,u=i-n,c=4e-7,d=1-c,h=[],v=o.solveQuadratic(s,l,u,h,c,d);
if(0===v)e(t);else{h.sort();var f=h[0],m=T.subdivide(t,f);e(m[0]),v>1&&(f=(h[1]-f)/(1-f),
m=T.subdivide(m[1],f),e(m[0])),e(m[1])}}}}var n,i=this._monoCurves;if(!i){i=this._monoCurves=[];
for(var r=this.getCurves(),a=this._segments,s=0,l=r.length;l>s;s++)t(r[s].getValues());
if(!this._closed&&a.length>1){var u=a[a.length-1]._point,c=a[0]._point,d=u._x,h=u._y,v=c._x,f=c._y;
t([d,h,d,h,v,f,v,f])}if(i.length>0){var m=i[0];m.length=i.length,m.last=n}}return i;
},getInteriorPoint:function(){var e=this.getBounds(),t=e.getCenter(!0);if(!this.contains(t)){
for(var n=this._getMonoCurves(),i=[],r=t.y,a=[],s=0,o=n.length;o>s;s++){var l=n[s].values;
if(1===n[s].winding&&r>=l[1]&&r<=l[7]||r>=l[7]&&r<=l[1])for(var u=T.solveCubic(l,1,r,i,0,1),c=u-1;c>=0;c--)a.push(T.getPoint(l,i[c]).x);
if(a.length>1)break}t.x=(a[0]+a[1])/2}return t}}),R.inject({_getMonoCurves:function(){
for(var e=this._children,t=[],n=0,i=e.length;i>n;n++)t.push.apply(t,e[n]._getMonoCurves());
return t}});var j=n.extend({_class:"PathIterator",initialize:function(e,t,n,i){function r(e,t){
var n=T.getValues(e,t,i);o.push(n),a(n,e._index,0,1)}function a(e,t,i,r){if(r-i>c&&!T.isFlatEnough(e,n||.25)){
var s=T.subdivide(e,.5),o=(i+r)/2;a(s[0],t,i,o),a(s[1],t,o,r)}else{var d=e[6]-e[0],h=e[7]-e[1],v=Math.sqrt(d*d+h*h);
v>1e-6&&(u+=v,l.push({offset:u,value:r,index:t}))}}for(var s,o=[],l=[],u=0,c=1/(t||32),d=e._segments,h=d[0],v=1,f=d.length;f>v;v++)s=d[v],
r(h,s),h=s;e._closed&&r(s,d[0]),this.curves=o,this.parts=l,this.length=u,this.index=0;
},getParameterAt:function(e){for(var t,n=this.index;t=n,!(0===n||this.parts[--n].offset<e););
for(var i=this.parts.length;i>t;t++){var r=this.parts[t];if(r.offset>=e){this.index=t;
var a=this.parts[t-1],s=a&&a.index==r.index?a.value:0,o=a?a.offset:0;return{value:s+(r.value-s)*(e-o)/(r.offset-o),
index:r.index}}}var r=this.parts[this.parts.length-1];return{value:1,index:r.index
}},drawPart:function(e,t,n){t=this.getParameterAt(t),n=this.getParameterAt(n);for(var i=t.index;i<=n.index;i++){
var r=T.getPart(this.curves[i],i==t.index?t.value:0,i==n.index?n.value:1);i==t.index&&e.moveTo(r[0],r[1]),
e.bezierCurveTo.apply(e,r.slice(2))}}},n.each(T.evaluateMethods,function(e){this[e+"At"]=function(t,n){
var i=this.getParameterAt(t);return T[e](this.curves[i.index],i.value,n)}},{})),O=n.extend({
initialize:function(e,t){for(var n,i=this.points=[],r=e._segments,a=0,s=r.length;s>a;a++){
var o=r[a].point.clone();n&&n.equals(o)||(i.push(o),n=o)}e._closed&&(this.closed=!0,
i.unshift(i[i.length-1]),i.push(i[1])),this.error=t},fit:function(){var e=this.points,t=e.length,n=this.segments=t>0?[new k(e[0])]:[];
return t>1&&this.fitCubic(0,t-1,e[1].subtract(e[0]).normalize(),e[t-2].subtract(e[t-1]).normalize()),
this.closed&&(n.shift(),n.pop()),n},fitCubic:function(e,t,n,i){if(t-e==1){var r=this.points[e],a=this.points[t],s=r.getDistance(a)/3;
return void this.addCurve([r,r.add(n.normalize(s)),a.add(i.normalize(s)),a])}for(var o,l=this.chordLengthParameterize(e,t),u=Math.max(this.error,this.error*this.error),c=!0,d=0;4>=d;d++){
var h=this.generateBezier(e,t,l,n,i),v=this.findMaxError(e,t,h,l);if(v.error<this.error&&c)return void this.addCurve(h);
if(o=v.index,v.error>=u)break;c=this.reparameterize(e,t,l,h),u=v.error}var f=this.points[o-1].subtract(this.points[o]),m=this.points[o].subtract(this.points[o+1]),b=f.add(m).divide(2).normalize();
this.fitCubic(e,o,n,b),this.fitCubic(o,t,b.negate(),i)},addCurve:function(e){var t=this.segments[this.segments.length-1];
t.setHandleOut(e[1].subtract(e[0])),this.segments.push(new k(e[3],e[2].subtract(e[3])));
},generateBezier:function(e,t,n,i,r){for(var a=1e-12,s=this.points[e],o=this.points[t],l=[[0,0],[0,0]],u=[0,0],c=0,d=t-e+1;d>c;c++){
var h=n[c],v=1-h,f=3*h*v,m=v*v*v,b=f*v,g=f*h,p=h*h*h,y=i.normalize(b),_=r.normalize(g),x=this.points[e+c].subtract(s.multiply(m+b)).subtract(o.multiply(g+p));
l[0][0]+=y.dot(y),l[0][1]+=y.dot(_),l[1][0]=l[0][1],l[1][1]+=_.dot(_),u[0]+=y.dot(x),
u[1]+=_.dot(x)}var w,S,C=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(Math.abs(C)>a){var E=l[0][0]*u[1]-l[1][0]*u[0],k=u[0]*l[1][1]-u[1]*l[0][1];
w=k/C,S=E/C}else{var A=l[0][0]+l[0][1],T=l[1][0]+l[1][1];w=S=Math.abs(A)>a?u[0]/A:Math.abs(T)>a?u[1]/T:0;
}var L,M,P=o.getDistance(s),R=a*P;if(R>w||R>S)w=S=P/3;else{var j=o.subtract(s);L=i.normalize(w),
M=r.normalize(S),L.dot(j)-M.dot(j)>P*P&&(w=S=P/3,L=M=null)}return[s,s.add(L||i.normalize(w)),o.add(M||r.normalize(S)),o];
},reparameterize:function(e,t,n,i){for(var r=e;t>=r;r++)n[r-e]=this.findRoot(i,this.points[r],n[r-e]);
for(var r=1,a=n.length;a>r;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(e,t,n){
for(var i=[],r=[],a=0;2>=a;a++)i[a]=e[a+1].subtract(e[a]).multiply(3);for(var a=0;1>=a;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);
var s=this.evaluate(3,e,n),o=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=s.subtract(t),c=o.dot(o)+u.dot(l);
return Math.abs(c)<1e-6?n:n-u.dot(o)/c},evaluate:function(e,t,n){for(var i=t.slice(),r=1;e>=r;r++)for(var a=0;e-r>=a;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));
return i[0]},chordLengthParameterize:function(e,t){for(var n=[0],i=e+1;t>=i;i++)n[i-e]=n[i-e-1]+this.points[i].getDistance(this.points[i-1]);
for(var i=1,r=t-e;r>=i;i++)n[i]/=n[r];return n},findMaxError:function(e,t,n,i){for(var r=Math.floor((t-e+1)/2),a=0,s=e+1;t>s;s++){
var o=this.evaluate(3,n,i[s-e]),l=o.subtract(this.points[s]),u=l.x*l.x+l.y*l.y;u>=a&&(a=u,
r=s)}return{error:a,index:r}}}),V=y.extend({_class:"TextItem",_boundsSelected:!0,
_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsGetter:"getBounds",
initialize:function(e){this._content="",this._lines=[];var i=e&&n.isPlainObject(e)&&e.x===t&&e.y===t;
this._initialize(i&&e,!i&&u.read(arguments))},_equals:function(e){return this._content===e._content;
},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content;
},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),
this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",
setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"
}),D=V.extend({_class:"PointText",initialize:function(){V.apply(this,arguments)},
getPoint:function(){var e=this._matrix.getTranslation();return new c(e.x,e.y,this,"setPoint");
},setPoint:function(){var e=u.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()));
},_draw:function(e){if(this._content){this._setStyles(e);var t=this._lines,n=this._style,i=n.hasFill(),r=n.hasStroke(),a=n.getLeading(),s=e.shadowBlur;
e.font=n.getFontStyle(),e.textAlign=n.getJustification();for(var o=0,l=t.length;l>o;o++){
e.shadowBlur=s;var u=t[o];i&&(e.fillText(u,0,0),e.shadowBlur=0),r&&e.strokeText(u,0,0),
e.translate(0,a)}}},_getBounds:function(e,t){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),s=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),l=0;
"left"!==a&&(l-=o/("center"===a?2:1));var u=new v(l,r?-.75*s:0,o,r*s);return t?t._transformBounds(u,u):u;
}}),G=n.extend(new function(){function e(e){var n,i=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);
if(i){n=[0,0,0];for(var r=0;3>r;r++){var s=i[r+1];n[r]=parseInt(1==s.length?s+s:s,16)/255;
}}else if(i=e.match(/^rgba?\((.*)\)$/)){n=i[1].split(",");for(var r=0,o=n.length;o>r;r++){
var s=+n[r];n[r]=3>r?s/255:s}}else{var l=a[e];if(!l){t||(t=J.getContext(1,1),t.globalCompositeOperation="copy"),
t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var u=t.getImageData(0,0,1,1).data;
l=a[e]=[u[0]/255,u[1]/255,u[2]/255]}n=l.slice()}return n}var t,i={gray:["gray"],rgb:["red","green","blue"],
hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]
},r={},a={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(e,t,n){
var i=Math.max(e,t,n),r=Math.min(e,t,n),a=i-r,s=0===a?0:60*(i==e?(t-n)/a+(n>t?6:0):i==t?(n-e)/a+2:(e-t)/a+4);
return[s,0===i?0:a/i,i]},"hsb-rgb":function(e,t,n){e=(e/60%6+6)%6;var i=Math.floor(e),r=e-i,i=o[i],a=[n,n*(1-t),n*(1-t*r),n*(1-t*(1-r))];
return[a[i[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(e,t,n){var i=Math.max(e,t,n),r=Math.min(e,t,n),a=i-r,s=0===a,o=s?0:60*(i==e?(t-n)/a+(n>t?6:0):i==t?(n-e)/a+2:(e-t)/a+4),l=(i+r)/2,u=s?0:.5>l?a/(i+r):a/(2-i-r);
return[o,u,l]},"hsl-rgb":function(e,t,n){if(e=(e/360%1+1)%1,0===t)return[n,n,n];for(var i=[e+1/3,e,e-1/3],r=.5>n?n*(1+t):n+t-n*t,a=2*n-r,s=[],o=0;3>o;o++){
var l=i[o];0>l&&(l+=1),l>1&&(l-=1),s[o]=1>6*l?a+6*(r-a)*l:1>2*l?r:2>3*l?a+(r-a)*(2/3-l)*6:a;
}return s},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){
return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e];
},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return n.each(i,function(e,t){
r[t]=[],n.each(e,function(e,a){var s=n.capitalize(e),o=/^(hue|saturation)$/.test(e),l=r[t][a]="gradient"===e?function(e){
var t=this._components[0];return e=I.read(Array.isArray(e)?e:arguments,0,{readNull:!0
}),t!==e&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:"gradient"===t?function(){
return u.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:e;
};this["get"+s]=function(){return this._type===t||o&&/^hs[bl]$/.test(this._type)?this._components[a]:this._convert(t)[a];
},this["set"+s]=function(e){this._type===t||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(t),
this._properties=i[t],this._type=t),this._components[a]=l.call(this,e),this._changed();
}},this)},{_class:"Color",_readIndex:!0,initialize:function d(t){var n,a,s,o,u=Array.prototype.slice,c=arguments,h=0;
Array.isArray(t)&&(c=t,t=c[0]);var v=null!=t&&("undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t));
if("string"===v&&t in i&&(n=t,t=c[1],Array.isArray(t)?(a=t,s=c[2]):(this.__read&&(h=1),
c=u.call(c,1),v="undefined"==typeof t?"undefined":$traceurRuntime["typeof"](t))),
!a){if(o="number"===v?c:"object"===v&&null!=t.length?t:null){n||(n=o.length>=3?"rgb":"gray");
var f=i[n].length;s=o[f],this.__read&&(h+=o===arguments?f+(null!=s?1:0):1),o.length>f&&(o=u.call(o,0,f));
}else if("string"===v)n="rgb",a=e(t),4===a.length&&(s=a[3],a.length--);else if("object"===v)if(t.constructor===d){
if(n=t._type,a=t._components.slice(),s=t._alpha,"gradient"===n)for(var m=1,b=a.length;b>m;m++){
var g=a[m];g&&(a[m]=g.clone())}}else if(t.constructor===I)n="gradient",o=c;else{n="hue"in t?"lightness"in t?"hsl":"hsb":"gradient"in t||"stops"in t||"radial"in t?"gradient":"gray"in t?"gray":"rgb";
var p=i[n],y=r[n];this._components=a=[];for(var m=0,b=p.length;b>m;m++){var _=t[p[m]];
null==_&&0===m&&"gradient"===n&&"stops"in t&&(_={stops:t.stops,radial:t.radial}),
_=y[m].call(this,_),null!=_&&(a[m]=_)}s=t.alpha}this.__read&&n&&(h=1)}if(this._type=n||"rgb",
this._id=l.get(d),!a){this._components=a=[];for(var y=r[this._type],m=0,b=y.length;b>m;m++){
var _=y[m].call(this,o&&o[m]);null!=_&&(a[m]=_)}}this._components=a,this._properties=i[this._type],
this._alpha=s,this.__read&&(this.__read=h)},_serialize:function(e,t){var i=this.getComponents();
return n.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),e,!0,t);
},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65);
},_convert:function(e){var t;return this._type===e?this._components.slice():(t=c[this._type+"-"+e])?t.apply(this,this._components):c["rgb-"+e].apply(this,c[this._type+"-rgb"].apply(this,this._components));
},convert:function(e){return new G(e,this._convert(e),this._alpha)},getType:function(){
return this._type},setType:function(e){this._components=this._convert(e),this._properties=i[e],
this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),
e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){
this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){
return null!=this._alpha},equals:function(e){var t=n.isPlainValue(e,!0)?G.read(arguments):e;
return t===this||t&&this._class===t._class&&this._type===t._type&&this._alpha===t._alpha&&n.equals(this._components,t._components)||!1;
},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,i=s.instance,r=0,a=e.length;a>r;r++){
var o=this._components[r];null!=o&&t.push(e[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&t.push("alpha: "+i.number(this._alpha)),
"{ "+t.join(", ")+" }"},toCSS:function(e){function t(e){return Math.round(255*(0>e?0:e>1?1:e));
}var n=this._convert("rgb"),i=e||null==this._alpha?1:this._alpha;return n=[t(n[0]),t(n[1]),t(n[2])],
1>i&&n.push(0>i?0:i),e?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")";
},toCanvasStyle:function(e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();
var t,n=this._components,i=n[0],r=i._stops,a=n[1],s=n[2];if(i._radial){var o=s.getDistance(a),l=n[3];
if(l){var u=l.subtract(a);u.getLength()>o&&(l=a.add(u.normalize(o-.1)))}var c=l||a;
t=e.createRadialGradient(c.x,c.y,0,a.x,a.y,o)}else t=e.createLinearGradient(a.x,a.y,s.x,s.y);
for(var d=0,h=r.length;h>d;d++){var v=r[d];t.addColorStop(v._rampPoint,v._color.toCanvasStyle());
}return this._canvasStyle=t},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,i=t.length;i>n;n++){
var r=t[n];e._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){
var e=Math.random;return new G(e(),e(),e())}}})},new function(){var e={add:function(e,t){
return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},
divide:function(e,t){return e/t}};return n.each(e,function(e,t){this[t]=function(t){
t=G.read(arguments);for(var n=this._type,i=this._components,r=t._convert(n),a=0,s=i.length;s>a;a++)r[a]=e(i[a],r[a]);
return new G(n,r,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}},{})}),I=n.extend({
_class:"Gradient",initialize:function(e,t){this._id=l.get(),e&&this._set(e)&&(e=t=null),
this._stops||this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1);
},_serialize:function(e,t){return t.add(this,function(){return n.serialize([this._stops,this._radial],e,!0,t);
})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;t>e;e++)this._owners[e]._changed();
},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){
var n=this._owners?this._owners.indexOf(e):-1;-1!=n&&(this._owners.splice(n,1),0===this._owners.length&&(this._owners=t));
},clone:function(){for(var e=[],t=0,n=this._stops.length;n>t;t++)e[t]=this._stops[t].clone();
return new I(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){
if(this.stops)for(var n=0,i=this._stops.length;i>n;n++)this._stops[n]._owner=t;if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");
this._stops=N.readAll(e,0,{clone:!0});for(var n=0,i=this._stops.length;i>n;n++){var r=this._stops[n];
r._owner=this,r._defaultRamp&&r.setRampPoint(n/(i-1))}this._changed()},getRadial:function(){
return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){
if(e===this)return!0;if(e&&this._class===e._class&&this._stops.length===e._stops.length){
for(var t=0,n=this._stops.length;n>t;t++)if(!this._stops[t].equals(e._stops[t]))return!1;
return!0}return!1}}),N=n.extend({_class:"GradientStop",initialize:function(e,n){if(e){
var i,r;n===t&&Array.isArray(e)?(i=e[0],r=e[1]):e.color?(i=e.color,r=e.rampPoint):(i=e,
r=n),this.setColor(i),this.setRampPoint(r)}},clone:function(){return new N(this._color.clone(),this._rampPoint);
},_serialize:function(e,t){return n.serialize([this._color,this._rampPoint],e,!0,t);
},_changed:function(){this._owner&&this._owner._changed(65)},getRampPoint:function(){
return this._rampPoint},setRampPoint:function(e){this._defaultRamp=null==e,this._rampPoint=e||0,
this._changed()},getColor:function(){return this._color},setColor:function(e){this._color=G.read(arguments),
this._color===e&&(this._color=e.clone()),this._color._owner=this,this._changed()},
equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._rampPoint==e._rampPoint||!1;
}}),B=n.extend(new function(){var e={fillColor:t,fillRule:"nonzero",strokeColor:t,
strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,
dashOffset:0,dashArray:[],shadowColor:t,shadowBlur:0,shadowOffset:new u,selectedColor:t,
fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,font:"sans-serif",leading:null,
justification:"left"},i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,
miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9
},r={beans:!0},a={_defaults:e,_textDefaults:new n(e,{fillColor:new G}),beans:!0};return n.each(e,function(e,s){
var o=/Color$/.test(s),l="shadowOffset"===s,c=n.capitalize(s),d=i[s],h="set"+c,v="get"+c;
a[h]=function(e){var n=this._owner,i=n&&n._children;if(i&&i.length>0&&!(n instanceof R))for(var r=0,a=i.length;a>r;r++)i[r]._style[h](e);else{
var l=this._values[s];l!==e&&(o&&(l&&(l._owner=t),e&&e.constructor===G&&(e._owner&&(e=e.clone()),
e._owner=n)),this._values[s]=e,n&&n._changed(d||65))}},a[v]=function(e){var i,r=this._owner,a=r&&r._children;
if(!a||0===a.length||e||r instanceof R){var i=this._values[s];if(i===t)i=this._defaults[s],
i&&i.clone&&(i=i.clone());else{var c=o?G:l?u:null;!c||i&&i.constructor===c||(this._values[s]=i=c.read([i],0,{
readNull:!0,clone:!0}),i&&o&&(i._owner=r))}return i}for(var d=0,h=a.length;h>d;d++){
var f=a[d]._style[v]();if(0===d)i=f;else if(!n.equals(i,f))return t}return i},r[v]=function(e){
return this._style[v](e)},r[h]=function(e){this._style[h](e)}}),n.each({Font:"FontFamily",
WindingRule:"FillRule"},function(e,t){var n="get"+t,i="set"+t;a[n]=r[n]="#get"+e,
a[i]=r[i]="#set"+e}),y.inject(r),a},{_class:"Style",initialize:function(t,n,i){this._values={},
this._owner=n,this._project=n&&n._project||i||e.project,n instanceof V&&(this._defaults=this._textDefaults),
t&&this.set(t)},set:function(e){var t=e instanceof B,n=t?e._values:e;if(n)for(var i in n)if(i in this._defaults){
var r=n[i];this[i]=r&&t&&r.clone?r.clone():r}},equals:function(e){return e===this||e&&this._class===e._class&&n.equals(this._values,e._values)||!1;
},hasFill:function(){return!!this.getFillColor()},hasStroke:function(){return!!this.getStrokeColor()&&this.getStrokeWidth()>0;
},hasShadow:function(){return!!this.getShadowColor()&&this.getShadowBlur()>0},getView:function(){
return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily();
},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function ge(){var e=ge.base.call(this),t=this.getFontSize();
return/pt|em|%|px/.test(t)&&(t=this.getView().getPixelSize(t)),null!=e?e:1.2*t}}),U=new function(){
function e(e,t,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=t[0].toUpperCase()+t.substring(1),s=0;6>s;s++){
var o=r[s],l=o?o+a:t;if(l in e){if(!n)return e[l];e[l]=i;break}}}return{getStyles:function(e){
var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"");
},getBounds:function(e,t){var n,i=e.ownerDocument,r=i.body,a=i.documentElement;try{
n=e.getBoundingClientRect()}catch(s){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),l=n.top-(a.clientTop||r.clientTop||0);
if(!t){var u=i.defaultView;o+=u.pageXOffset||a.scrollLeft||r.scrollLeft,l+=u.pageYOffset||a.scrollTop||r.scrollTop;
}return new v(o,l,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,i=t.documentElement;
return new v(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(e,t){
return U.getBounds(e,t).getPoint()},getSize:function(e){return U.getBounds(e,!0).getSize();
},isInvisible:function(e){return U.getSize(e).equals(new d(0,0))},isInView:function(e){
return!U.isInvisible(e)&&U.getViewportBounds(e).intersects(U.getBounds(e,!0))},isInserted:function(e){
return document.body.contains(e)},getPrefixed:function(t,n){return e(t,n)},setPrefixed:function(t,n,i){
if("object"===("undefined"==typeof n?"undefined":$traceurRuntime["typeof"](n)))for(var r in n)e(t,r,!0,n[r]);else e(t,n,!0,i);
}}},z={add:function(e,t){for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),a=0,s=r.length;s>a;a++)e.addEventListener(r[a],i,!1);
},remove:function(e,t){for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),a=0,s=r.length;s>a;a++)e.removeEventListener(r[a],i,!1);
},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;
return new u(t.pageX||t.clientX+document.documentElement.scrollLeft,t.pageY||t.clientY+document.documentElement.scrollTop);
},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){
return e.relatedTarget||e.toElement},getOffset:function(e,t){return z.getPoint(e).subtract(U.getOffset(t||z.getTarget(e)));
}};z.requestAnimationFrame=new function(){function e(){for(var t=a.length-1;t>=0;t--){
var o=a[t],l=o[0],u=o[1];(!u||("true"==r.getAttribute(u,"keepalive")||s)&&U.isInView(u))&&(a.splice(t,1),
l())}n&&(a.length?n(e):i=!1)}var t,n=U.getPrefixed(window,"requestAnimationFrame"),i=!1,a=[],s=!0;
return z.add(window,{focus:function(){s=!0},blur:function(){s=!1}}),function(r,s){
a.push([r,s]),n?i||(n(e),i=!0):t||(t=setInterval(e,1e3/60))}};var H=n.extend(i,{_class:"View",
initialize:function pe(e,t){function n(e){return t[e]||parseInt(t.getAttribute(e),10);
}function i(){var e=U.getSize(t);return e.isNaN()||e.isZero()?new d(n("width"),n("height")):e;
}this._project=e,this._scope=e._scope,this._element=t;var a;this._pixelRatio||(this._pixelRatio=window.devicePixelRatio||1),
this._id=t.getAttribute("id"),null==this._id&&t.setAttribute("id",this._id="view-"+pe._id++),
z.add(t,this._viewEvents);var s="none";if(U.setPrefixed(t.style,{userDrag:s,userSelect:s,
touchCallout:s,contentZooming:s,tapHighlightColor:"rgba(0,0,0,0)"}),r.hasAttribute(t,"resize")){
var o=this;z.add(window,this._windowEvents={resize:function(){o.setViewSize(i())}
})}if(this._setViewSize(a=i()),r.hasAttribute(t,"stats")&&"undefined"!=typeof Stats){
this._stats=new Stats;var l=this._stats.domElement,u=l.style,c=U.getOffset(t);u.position="absolute",
u.left=c.x+"px",u.top=c.y+"px",document.body.appendChild(l)}pe._views.push(this),
pe._viewsById[this._id]=this,this._viewSize=a,(this._matrix=new m)._owner=this,this._zoom=1,
pe._focused||(pe._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={};
},remove:function(){if(!this._project)return!1;H._focused===this&&(H._focused=null),
H._views.splice(H._views.indexOf(this),1),delete H._viewsById[this._id];var e=this._project;
return e._view===this&&(e._view=null),z.remove(this._element,this._viewEvents),z.remove(window,this._windowEvents),
this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},
!0},_events:n.each(["onResize","onMouseDown","onMouseUp","onMouseMove","onMouseDrag","onMouseEnter","onMouseLeave"],function(e){
this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause();
}}}),_animate:!1,_time:0,_count:0,_requestFrame:function(){var e=this;z.requestAnimationFrame(function(){
e._requested=!1,e._animate&&(e._requestFrame(),e._handleFrame())},this._element),
this._requested=!0},_handleFrame:function(){e=this._scope;var t=Date.now()/1e3,i=this._before?t-this._before:0;
this._before=t,this._handlingFrame=!0,this.emit("frame",new n({delta:i,time:this._time+=i,
count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.update();
},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0
},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],
0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){
for(var t in this._frameItems){var i=this._frameItems[t];i.item.emit("frame",new n(e,{
time:i.time+=e.delta,count:i.count++}))}},_update:function(){this._project._needsUpdate=!0,
this._handlingFrame||(this._animate?this._handleFrame():this.update())},_changed:function(){
this._project._changed(2049),this._bounds=null},getElement:function(){return this._element;
},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio;
},getViewSize:function(){var e=this._viewSize;return new h(e.width,e.height,this,"setViewSize");
},setViewSize:function(){var e=d.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._viewSize.set(e.width,e.height),
this._setViewSize(e),this.emit("resize",{size:e,delta:t}),this._changed(),this.update());
},_setViewSize:function(e){var t=this._element;t.width=e.width,t.height=e.height},
getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new u,this._viewSize))),
this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){
return this.getBounds().getCenter()},setCenter:function(){var e=u.read(arguments);
this.translate(this.getCenter().subtract(e))},getZoom:function(){return this._zoom;
},setZoom:function(e){this.transform((new m).scale(e/this._zoom,this.getCenter())),
this._zoom=e},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;
e.initialize.apply(e,arguments)},isVisible:function(){return U.isInView(this._element);
},isInserted:function(){return U.isInserted(this._element)}},n.each(["rotate","scale","shear","skew"],function(e){
var t="rotate"===e;this[e]=function(){var i=(t?n:u).read(arguments),r=u.read(arguments,0,{
readNull:!0});return this.transform((new m)[e](i,r||this.getCenter(!0)))}},{translate:function(){
var e=new m;return this.transform(e.translate.apply(e,arguments))},transform:function(e){
this._matrix.concatenate(e)},scrollBy:function(){this.translate(u.read(arguments).negate());
}}),{play:function(){this._animate=!0,this._requested||this._requestFrame()},pause:function(){
this._animate=!1},draw:function(){this.update()},projectToView:function(){return this._matrix._transformPoint(u.read(arguments));
},viewToProject:function(){return this._matrix._inverseTransform(u.read(arguments));
},getEventPoint:function(e){return this.viewToProject(z.getOffset(e,this._element));
}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return"string"==typeof t&&(t=document.getElementById(t)),
new F(e,t)}}},new function(){function n(e){var t=z.getTarget(e);return t.getAttribute&&H._viewsById[t.getAttribute("id")];
}function i(){var e=H._focused;if(!e||!e.isVisible())for(var t=0,n=H._views.length;n>t;t++)if((e=H._views[t]).isVisible()){
H._focused=l=e;break}}function r(e,t,n){e._handleEvent("mousemove",t,n)}function a(e,t,n,i,r,a){
function s(e,t){if(e.responds(t)){if(o||(o=new W(t,n,i,l,r?i.subtract(r):null)),e.emit(t,o)&&(k=!0,
o.stopped))return!0}else{var a=A[t];if(a)return s(e,a)}}for(var o,l=e;e&&e!==a;){
if(s(e,t))return!0;e=e._parent}return!1}function s(e,t,n,i,r,s){return k=!1,x&&a(x,n,i,r,s)||t&&t!==x&&!t.isDescendant(x)&&a(t,A[n]||n,i,r,s,x)||a(e,n,i,r,s);
}var o,l,u,c,d,h=!1,v=!1,f=window.navigator;f.pointerEnabled||f.msPointerEnabled?(u="pointerdown MSPointerDown",
c="pointermove MSPointerMove",d="pointerup pointercancel MSPointerUp MSPointerCancel"):(u="touchstart",
c="touchmove",d="touchend touchcancel","ontouchstart"in window&&f.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(u+=" mousedown",
c+=" mousemove",d+=" mouseup"));var m={},b={mouseout:function(e){var t=H._focused,n=z.getRelatedTarget(e);
if(t&&(!n||"HTML"===n.nodeName)){var i=z.getOffset(e,t._element),a=i.x,s=Math.abs,o=s(a),l=1<<25,u=o-l;
i.x=s(u)<o?u*(0>a?-1:1):a,r(t,e,t.viewToProject(i))}},scroll:i};m[u]=function(e){
var t=H._focused=n(e);h=!0,t._handleEvent("mousedown",e)},b[c]=function(e){var t=H._focused;
if(!v){var a=n(e);a?t!==a&&(t&&r(t,e),o||(o=t),t=H._focused=l=a):l&&l===t&&(o&&!o.isInserted()&&(o=null),
t=H._focused=o,o=null,i())}t&&r(t,e)},b[u]=function(){v=!0},b[d]=function(e){var t=H._focused;
t&&h&&t._handleEvent("mouseup",e),v=h=!1},z.add(document,b),z.add(window,{load:i});
var g,p,y,_,x,w,S,C,E,k=!1,A={doubleclick:"click",mousedrag:"mousemove"},T={mousedown:{
mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,
doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},L=!1;
return{_viewEvents:m,_handleEvent:function(n,i,r){function o(e){return d._itemEvents[e]||d.responds(e)||c&&c.responds(e);
}var l=this._itemEvents[n],u=e.project,c=this._scope.tool,d=this;"mousemove"===n&&h&&(n="mousedrag"),
u&&u.removeOn(n),r||(r=this.getEventPoint(i));var v=this.getBounds().contains(r),f=v&&l&&this._project.hitTest(r,{
tolerance:0,fill:!0,stroke:!0}),m=f&&f.item||t,b=!1,A=!1,T={};T[n.substr(5)]=!0;var M=T.move||T.drag,P=M&&n||"mousemove";
P&&(m!==_&&(_&&a(_,"mouseleave",i,r),m&&a(m,"mouseenter",i,r)),_=m,M&&L^v&&(a(this,v?"mouseenter":"mouseleave",i,r),
E=v?this:null,b=!0),(v||T.drag&&!p.equals(r))&&(A=s(this,m,P,i,r,p),b=!0),L=v),!M&&(b=T.down&&v||T.up&&g)&&(A=s(this,m,n,i,r,g),
T.down?(m&&(C=m===w&&Date.now()-S<300,y=w=m,x=!A&&m),g=p=r):T.up&&(!A&&m&&m===y&&(S=Date.now(),
a(m,C?"doubleclick":"click",i,r,g),C=!1),y=x=null),L=!1),p=r,b&&c&&(k=c._handleEvent(n,i,r,T)||k),
(k&&(!M||o("mousedrag"))||T.down&&o("mouseup"))&&i.preventDefault(),this.update();
},_countItemEvent:function(e,t){var n=this._itemEvents;for(var i in T)n[i]=(n[i]||0)+(T[i][e]||0)*t;
},statics:{updateFocus:i}}}),F=H.extend({_class:"CanvasView",initialize:function(e,t){
if(!(t instanceof HTMLCanvasElement)){var n=d.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));
t=J.getCanvas(n)}if(this._context=t.getContext("2d"),this._pixelRatio=1,!/^off|false$/.test(r.getAttribute(t,"hidpi"))){
var i=window.devicePixelRatio||1,a=U.getPrefixed(this._context,"backingStorePixelRatio")||1;
this._pixelRatio=i/a}H.call(this,e,t)},_setViewSize:function(e){var t=this._element,n=this._pixelRatio,i=e.width,a=e.height;
if(t.width=i*n,t.height=a*n,1!==n){if(!r.hasAttribute(t,"resize")){var s=t.style;s.width=i+"px",
s.height=a+"px"}this._context.scale(n,n)}},getPixelSize:function(t){var n,i=e.browser;
if(i&&i.firefox){var r=this._element.parentNode,a=document.createElement("div");a.style.fontSize=t,
r.appendChild(a),n=parseFloat(U.getStyles(a).fontSize),r.removeChild(a)}else{var s=this._context,o=s.font;
s.font=t+" serif",n=parseFloat(s.font),s.font=o}return n},getTextWidth:function(e,t){
var n=this._context,i=n.font,r=0;n.font=e;for(var a=0,s=t.length;s>a;a++)r=Math.max(r,n.measureText(t[a]).width);
return n.font=i,r},update:function(e){var t=this._project;if(!t||!e&&!t._needsUpdate)return!1;
var n=this._context,i=this._viewSize;return n.clearRect(0,0,i.width+1,i.height+1),
t.draw(n,this._matrix,this._pixelRatio),t._needsUpdate=!1,!0}}),q=n.extend({_class:"Event",
initialize:function(e){this.event=e},prevented:!1,stopped:!1,preventDefault:function(){
this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,
this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault();
},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return $.modifiers;
}}),Y=q.extend({_class:"KeyEvent",initialize:function(e,t,n,i){q.call(this,i),this.type=e?"keydown":"keyup",
this.key=t,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }";
}}),$=new function(){function t(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t?String.fromCharCode(e.keyCode):t,
s[t]||(t.length>1?n.hyphenate(t):t.toLowerCase())}function i(t,a,s,o){var d,h=t?"keydown":"keyup",v=H._focused,f=v&&v.isVisible()&&v._scope,m=f&&f.tool;
if(l[a]=t,t?u[a]=s:delete u[a],a.length>1&&(d=n.camelize(a))in c){c[d]=t;var b=e.browser;
if("meta"===d&&b&&b.mac)if(t)r={};else{for(var g in r)g in u&&i(!1,g,r[g],o);r=null;
}}else t&&r&&(r[a]=s);m&&m.responds(h)&&(e=f,m.emit(h,new Y(t,a,s,o)),v&&v.update());
}var r,a,s={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",
Del:"delete",Win:"meta",Esc:"escape"},o={tab:"	",space:" ",enter:"\r"},l={},u={},c=new n({
shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){
return this.alt}},command:{get:function(){var t=e.browser;return t&&t.mac?this.meta:this.control;
}}});return z.add(document,{keydown:function(n){var r=t(n),s=e.browser;r.length>1||s&&s.chrome&&(n.altKey||s.mac&&n.metaKey||!s.mac&&n.ctrlKey)?i(!0,r,o[r]||(r.length>1?"":r),n):a=r;
},keypress:function(e){if(a){var n=t(e),r=e.charCode,s=r>=32?String.fromCharCode(r):n.length>1?"":n;
n!==a&&(n=s.toLowerCase()),i(!0,n,s,e),a=null}},keyup:function(e){var n=t(e);n in u&&i(!1,n,u[n],e);
}}),z.add(window,{blur:function(e){for(var t in u)i(!1,t,u[t],e)}}),{modifiers:c,
isDown:function(e){return!!l[e]}}},W=q.extend({_class:"MouseEvent",initialize:function(e,t,n,i,r){
q.call(this,t),this.type=e,this.point=n,this.target=i,this.delta=r},toString:function(){
return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }";
}}),X=q.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,
this.type=t,this.event=n},_choosePoint:function(e,t){return e?e:t?t.clone():null},
getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){
this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint);
},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint);
},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint;
},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta;
},setDelta:function(e){this._delta=e},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count;
},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e;
},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());
if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;
this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){
return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }";
}}),Z=a.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],
initialize:function(e){a.call(this),this._firstMove=!0,this._count=0,this._downCount=-1,
this._set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){
this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e);
},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){
this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e);
},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null;
},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleEvent:function(t,n,i,r){
function a(e,t,n){var a=h._point,s=i;if(e)h._count=0;else{if(s.equals(a))return!1;
if(null!=t||null!=n){var u=s.subtract(a),c=u.getLength();if((t||0)>c)return!1;n&&(s=a.add(u.normalize(Math.min(c,n))));
}h._count++}return l&&(h._point=s,h._lastPoint=o||r.drag?e&&o?s:a:h._downPoint||s),
r.down&&(h._downPoint=s,h._downCount++),!0}function s(e){l&&(d=h.emit(t,new X(h,t,n))||d,
h._firstMove=e)}e=this._scope;var o=r.move||r.drag&&!this.responds(t);o&&(t="mousemove");
var l=this.responds(t),u=this.minDistance,c=this.maxDistance,d=!1,h=this;if(r.down)a(l),
s(!1);else if(r.up)a(!1,null,c),s(!0);else if(l)for(;a(this._firstMove,u,c);)s(!1);
return d}}),K={request:function(e,n,i,r){r=r===t?!0:r;var a=window.ActiveXObject||XMLHttpRequest,s=new a("Microsoft.XMLHTTP");
return s.open(e.toUpperCase(),n,r),"overrideMimeType"in s&&s.overrideMimeType("text/plain"),
s.onreadystatechange=function(){if(4===s.readyState){var e=s.status;if(0!==e&&200!==e)throw new Error("Could not load "+n+" (Error "+e+")");
i.call(s,s.responseText)}},s.send(null)}},J={canvases:[],getCanvas:function(e,t){
var n,i=!0;"object"===("undefined"==typeof e?"undefined":$traceurRuntime["typeof"](e))&&(t=e.height,
e=e.width),n=this.canvases.length?this.canvases.pop():document.createElement("canvas");
var r=n.getContext("2d");return n.width===e&&n.height===t?i&&r.clearRect(0,0,e+1,t+1):(n.width=e,
n.height=t),r.save(),n},getContext:function(e,t){return this.getCanvas(e,t).getContext("2d");
},release:function(e){var t=e.canvas?e.canvas:e;t.getContext("2d").restore(),this.canvases.push(t);
}},Q=new function(){function e(e,t,n){return.2989*e+.587*t+.114*n}function t(t,n,i,r){
var a=r-e(t,n,i);v=t+a,f=n+a,m=i+a;var r=e(v,f,m),s=b(v,f,m),o=g(v,f,m);if(0>s){var l=r-s;
v=r+(v-r)*r/l,f=r+(f-r)*r/l,m=r+(m-r)*r/l}if(o>255){var u=255-r,c=o-r;v=r+(v-r)*u/c,
f=r+(f-r)*u/c,m=r+(m-r)*u/c}}function i(e,t,n){return g(e,t,n)-b(e,t,n)}function r(e,t,n,i){
var r,a=[e,t,n],s=g(e,t,n),o=b(e,t,n);o=o===e?0:o===t?1:2,s=s===e?0:s===t?1:2,r=0===b(o,s)?1===g(o,s)?2:1:0,
a[s]>a[o]?(a[r]=(a[r]-a[o])*i/(a[s]-a[o]),a[s]=i):a[r]=a[s]=0,a[o]=0,v=a[0],f=a[1],
m=a[2]}var a,s,o,l,u,c,d,h,v,f,m,b=Math.min,g=Math.max,p=Math.abs,y={multiply:function(){
v=u*a/255,f=c*s/255,m=d*o/255},screen:function(){v=u+a-u*a/255,f=c+s-c*s/255,m=d+o-d*o/255;
},overlay:function(){v=128>u?2*u*a/255:255-2*(255-u)*(255-a)/255,f=128>c?2*c*s/255:255-2*(255-c)*(255-s)/255,
m=128>d?2*d*o/255:255-2*(255-d)*(255-o)/255},"soft-light":function(){var e=a*u/255;
v=e+u*(255-(255-u)*(255-a)/255-e)/255,e=s*c/255,f=e+c*(255-(255-c)*(255-s)/255-e)/255,
e=o*d/255,m=e+d*(255-(255-d)*(255-o)/255-e)/255},"hard-light":function(){v=128>a?2*a*u/255:255-2*(255-a)*(255-u)/255,
f=128>s?2*s*c/255:255-2*(255-s)*(255-c)/255,m=128>o?2*o*d/255:255-2*(255-o)*(255-d)/255;
},"color-dodge":function(){v=0===u?0:255===a?255:b(255,255*u/(255-a)),f=0===c?0:255===s?255:b(255,255*c/(255-s)),
m=0===d?0:255===o?255:b(255,255*d/(255-o))},"color-burn":function(){v=255===u?255:0===a?0:g(0,255-255*(255-u)/a),
f=255===c?255:0===s?0:g(0,255-255*(255-c)/s),m=255===d?255:0===o?0:g(0,255-255*(255-d)/o);
},darken:function(){v=a>u?u:a,f=s>c?c:s,m=o>d?d:o},lighten:function(){v=u>a?u:a,f=c>s?c:s,
m=d>o?d:o},difference:function(){v=u-a,0>v&&(v=-v),f=c-s,0>f&&(f=-f),m=d-o,0>m&&(m=-m);
},exclusion:function(){v=u+a*(255-u-u)/255,f=c+s*(255-c-c)/255,m=d+o*(255-d-d)/255;
},hue:function(){r(a,s,o,i(u,c,d)),t(v,f,m,e(u,c,d))},saturation:function(){r(u,c,d,i(a,s,o)),
t(v,f,m,e(u,c,d))},luminosity:function(){t(u,c,d,e(a,s,o))},color:function(){t(a,s,o,e(u,c,d));
},add:function(){v=b(u+a,255),f=b(c+s,255),m=b(d+o,255)},subtract:function(){v=g(u-a,0),
f=g(c-s,0),m=g(d-o,0)},average:function(){v=(u+a)/2,f=(c+s)/2,m=(d+o)/2},negation:function(){
v=255-p(255-a-u),f=255-p(255-s-c),m=255-p(255-o-d)}},_=this.nativeModes=n.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(e){
this[e]=!0},{}),x=J.getContext(1,1);n.each(y,function(e,t){var n="darken"===t,i=!1;
x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=t,
x.globalCompositeOperation===t&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),
i=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}x.restore(),_[t]=i}),J.release(x),
this.process=function(e,t,n,i,r){var b=t.canvas,g="normal"===e;if(g||_[e])n.save(),
n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,g||(n.globalCompositeOperation=e),n.drawImage(b,r.x,r.y),
n.restore();else{var p=y[e];if(!p)return;for(var x=n.getImageData(r.x,r.y,b.width,b.height),w=x.data,S=t.getImageData(0,0,b.width,b.height).data,C=0,E=w.length;E>C;C+=4){
a=S[C],u=w[C],s=S[C+1],c=w[C+1],o=S[C+2],d=w[C+2],l=S[C+3],h=w[C+3],p();var k=l*i/255,A=1-k;
w[C]=k*v+A*u,w[C+1]=k*f+A*c,w[C+2]=k*m+A*d,w[C+3]=l*i+A*h}n.putImageData(x,r.x,r.y);
}}},ee=n.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],
strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],
strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"
},function(e,t){return!t&&(e instanceof M||e instanceof w||e instanceof V)}],miterLimit:["stroke-miterlimit","number"],
dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],
fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],
justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],
opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){
var i=n.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,
fromSVG:r&&n.each(r,function(e,t){this[e]=t},{}),exportFilter:e[3],get:"get"+i,set:"set"+i
}},{}),te={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"
};return new function(){function e(e,t){for(var n in t){var i=t[n],r=te[n];"number"==typeof i&&(i=w.number(i)),
r?e.setAttributeNS(r,n,i):e.setAttribute(n,i)}return e}function t(t,n){return e(document.createElementNS("http://www.w3.org/2000/svg",t),n);
}function i(e,t,i){var r=new n,a=e.getTranslation();if(t){e=e.shiftless();var s=e._inverseTransform(a);
r[i?"cx":"x"]=s.x,r[i?"cy":"y"]=s.y,a=null}if(!e.isIdentity()){var l=e.decompose();
if(l&&!l.shearing){var u=[],c=l.rotation,d=l.scaling;a&&!a.isZero()&&u.push("translate("+w.point(a)+")"),
o.isZero(d.x-1)&&o.isZero(d.y-1)||u.push("scale("+w.point(d)+")"),c&&u.push("rotate("+w.number(c)+")"),
r.transform=u.join(" ")}else r.transform="matrix("+e.getValues().join(",")+")"}return r;
}function r(n,r){for(var a=i(n._matrix),s=n._children,o=t("g",a),l=0,u=s.length;u>l;l++){
var c=s[l],d=_(c,r);if(d)if(c.isClipMask()){var h=t("clipPath");h.appendChild(d),
b(c,h,"clip"),e(o,{"clip-path":"url(#"+h.id+")"})}else o.appendChild(d)}return o}
function a(e,n){var r=i(e._matrix,!0),a=e.getSize(),s=e.getImage();return r.x-=a.width/2,
r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=n.embedImages===!1&&s&&s.src||e.toDataURL(),
t("image",r)}function l(e,n){var r=n.matchShapes;if(r){var a=e.toShape(!1);if(a)return u(a,n);
}var s,o=e._segments,l=i(e._matrix);if(0===o.length)return null;if(r&&!e.hasHandles())if(o.length>=3){
s=e._closed?"polygon":"polyline";for(var c=[],d=0,h=o.length;h>d;d++)c.push(w.point(o[d]._point));
l.points=c.join(" ")}else{s="line";var v=o[0]._point,f=o[o.length-1]._point;l.set({
x1:v.x,y1:v.y,x2:f.x,y2:f.y})}else s="path",l.d=e.getPathData(null,n.precision);return t(s,l);
}function u(e){var n=e._type,r=e._radius,a=i(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){
n="rect";var s=e._size,o=s.width,l=s.height;a.x-=o/2,a.y-=l/2,a.width=o,a.height=l,
r.isZero()&&(r=null)}return r&&("circle"===n?a.r=r:(a.rx=r.width,a.ry=r.height)),
t(n,a)}function c(e,n){var r=i(e._matrix),a=e.getPathData(null,n.precision);return a&&(r.d=a),
t("path",r)}function d(e,n){var r=i(e._matrix,!0),a=e.getSymbol(),s=m(a,"symbol"),o=a.getDefinition(),l=o.getBounds();
return s||(s=t("symbol",{viewBox:w.rectangle(l)}),s.appendChild(_(o,n)),b(a,s,"symbol")),
r.href="#"+s.id,r.x+=l.x,r.y+=l.y,r.width=w.number(l.width),r.height=w.number(l.height),
r.overflow="visible",t("use",r)}function h(e){var n=m(e,"color");if(!n){var i,r=e.getGradient(),a=r._radial,s=e.getOrigin().transform(),o=e.getDestination().transform();
if(a){i={cx:s.x,cy:s.y,r:s.getDistance(o)};var l=e.getHighlight();l&&(l=l.transform(),
i.fx=l.x,i.fy=l.y)}else i={x1:s.x,y1:s.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",
n=t((a?"radial":"linear")+"Gradient",i);for(var u=r._stops,c=0,d=u.length;d>c;c++){
var h=u[c],v=h._color,f=v.getAlpha();i={offset:h._rampPoint,"stop-color":v.toCSS(!0)
},1>f&&(i["stop-opacity"]=f),n.appendChild(t("stop",i))}b(e,n,"color")}return"url(#"+n.id+")";
}function v(e){var n=t("text",i(e._matrix,!0));return n.textContent=e._content,n}
function f(t,i,r){var a={},s=!r&&t.getParent(),o=[];return null!=t._name&&(a.id=t._name),
n.each(ee,function(e){var i=e.get,r=e.type,l=t[i]();if(e.exportFilter?e.exportFilter(t,l):!s||!n.equals(s[i](),l)){
if("color"===r&&null!=l){var u=l.getAlpha();1>u&&(a[e.attribute+"-opacity"]=u)}"style"===r?o.push(e.attribute+": "+l):a[e.attribute]=null==l?"none":"number"===r?w.number(l):"color"===r?l.gradient?h(l,t):l.toCSS(!0):"array"===r?l.join(","):"lookup"===r?e.toSVG[l]:l;
}}),o.length&&(a.style=o.join(";")),1===a.opacity&&delete a.opacity,t._visible||(a.visibility="hidden"),
e(i,a)}function m(e,t){return S||(S={ids:{},svgs:{}}),e&&S.svgs[t+"-"+e._id]}function b(e,t,n){
S||m();var i=S.ids[n]=(S.ids[n]||0)+1;t.id=n+"-"+i,S.svgs[n+"-"+e._id]=t}function p(e,n){
var i=e,r=null;if(S){i="svg"===e.nodeName.toLowerCase()&&e;for(var a in S.svgs)r||(i||(i=t("svg"),
i.appendChild(e)),r=i.insertBefore(t("defs"),i.firstChild)),r.appendChild(S.svgs[a]);
S=null}return n.asString?(new XMLSerializer).serializeToString(i):i}function _(e,t,n){
var i=C[e._class],r=i&&i(e,t);if(r){var a=t.onExport;a&&(r=a(e,r,t)||r);var s=JSON.stringify(e._data);
s&&"{}"!==s&&"null"!==s&&r.setAttribute("data-paper-data",s)}return r&&f(e,r,n)}function x(e){
return e||(e={}),w=new s(e.precision),e}var w,S,C={Group:r,Layer:r,Raster:a,Path:l,
Shape:u,CompoundPath:c,PlacedSymbol:d,PointText:v};y.inject({exportSVG:function(e){
return e=x(e),p(_(this,e,!0),e)}}),g.inject({exportSVG:function(e){e=x(e);var n=this._children,r=this.getView(),a=r.getViewSize(),s=t("svg",{
x:0,y:0,width:a.width,height:a.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg",
"xmlns:xlink":"http://www.w3.org/1999/xlink"}),o=s,l=r._matrix;l.isIdentity()||(o=s.appendChild(t("g",i(l))));
for(var u=0,c=n.length;c>u;u++)o.appendChild(_(n[u],e,!0));return p(s,e)}})},new function(){
function i(e,t,n,i){var r=te[t],a=r?e.getAttributeNS(r,t):e.getAttribute(t);return"null"===a&&(a=null),
null==a?i?null:n?"":0:n?a:parseFloat(a)}function r(e,t,n,r){return t=i(e,t,!1,r),
n=i(e,n,!1,r),!r||null!=t&&null!=n?new u(t,n):null}function a(e,t,n,r){return t=i(e,t,!1,r),
n=i(e,n,!1,r),!r||null!=t&&null!=n?new d(t,n):null}function s(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?E(e)||e:"lookup"===t?n[e]:e;
}function o(e,t,n,i){var r=e.childNodes,a="clippath"===t,s=new _,o=s._project,l=o._currentStyle,u=[];
if(a||(s=C(s,e,i),o._currentStyle=s._style.clone()),i)for(var c=e.querySelectorAll("defs"),d=0,h=c.length;h>d;d++)k(c[d],n,!1);
for(var d=0,h=r.length;h>d;d++){var v=r[d],f=void 0;1!==v.nodeType||"defs"===v.nodeName.toLowerCase()||!(f=k(v,n,!1))||f instanceof p||u.push(f);
}return s.addChildren(u),a&&(s=C(s.reduce(),e,i)),o._currentStyle=l,(a||"defs"===t)&&(s.remove(),
s=null),s}function l(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;a>r;r+=2)i.push(new u(parseFloat(n[r]),parseFloat(n[r+1])));
var s=new P(i);return"polygon"===t&&s.closePath(),s}function c(e){var t=e.getAttribute("d"),n={
pathData:t};return(t.match(/m/gi)||[]).length>1||/z\S+/i.test(t)?new R(n):new P(n);
}function h(e,t){var n,a=(i(e,"href",!0)||"").substring(1),s="radialgradient"===t;
if(a)n=L[a].getGradient();else{for(var o=e.childNodes,l=[],u=0,c=o.length;c>u;u++){
var d=o[u];1===d.nodeType&&l.push(C(new N,d))}n=new I(l,s)}var h,v,f;return s?(h=r(e,"cx","cy"),
v=h.add(i(e,"r"),0),f=r(e,"fx","fy",!0)):(h=r(e,"x1","y1"),v=r(e,"x2","y2")),C(new G(n,h,v,f),e),
null}function f(e,t,n,i){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new m,s=0,o=r.length;o>s;s++){
var l=r[s];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],d=u[1].split(/[\s,]+/g),h=0,v=d.length;v>h;h++)d[h]=parseFloat(d[h]);
switch(c){case"matrix":a.concatenate(new m(d[0],d[1],d[2],d[3],d[4],d[5]));break;case"rotate":
a.rotate(d[0],d[1],d[2]);break;case"translate":a.translate(d[0],d[1]);break;case"scale":
a.scale(d);break;case"skewX":a.skew(d[0],0);break;case"skewY":a.skew(0,d[0])}}e.transform(a);
}function b(e,t,n){var i=e["fill-opacity"===n?"getFillColor":"getStrokeColor"]();i&&i.setAlpha(parseFloat(t));
}function x(e,i,r){var a=e.attributes[i],s=a&&a.value;if(!s){var o=n.camelize(i);s=e.style[o],
s||r.node[o]===r.parent[o]||(s=r.node[o])}return s?"none"===s?null:s:t}function C(e,i,r){
var a={node:U.getStyles(i)||{},parent:!r&&U.getStyles(i.parentNode)||{}};return n.each(T,function(r,s){
var o=x(i,s,a);o!==t&&(e=n.pick(r(e,o,s,i,a),e))}),e}function E(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/);
return t&&L[t[1]]}function k(t,i,r){function a(t){e=o;var n=k(t,i,r),a=i.onLoad,s=o.project&&o.getView();
a&&a.call(this,n),s.update()}if(!t)return null;i?"function"==typeof i&&(i={onLoad:i
}):i={};var s=t,o=e;if(r)if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){
var l=new FileReader;return l.onload=function(){a(l.result)},l.readAsText(t)}}else{
if(s=document.getElementById(t),!s)return K.request("get",t,a);t=null}if("string"==typeof t&&(s=(new DOMParser).parseFromString(t,"image/svg+xml")),
!s.nodeName)throw new Error("Unsupported SVG source: "+t);var u,c=s.nodeName.toLowerCase(),d=A[c],h=s.getAttribute&&s.getAttribute("data-paper-data"),v=o.settings,f=v.applyMatrix;
if(v.applyMatrix=!1,u=d&&d(s,c,i,r)||null,v.applyMatrix=f,u){"#document"===c||u instanceof _||(u=C(u,s,r));
var m=i.onImport;m&&(u=m(s,u,i)||u),i.expandShapes&&u instanceof w&&(u.remove(),u=u.toPath()),
h&&(u._data=JSON.parse(h))}return r&&(L={},u&&n.pick(i.applyMatrix,f)&&u.matrix.apply(!0,!0)),
u}var A={"#document":function(e,t,n,i){for(var r=e.childNodes,a=0,s=r.length;s>a;a++){
var o=r[a];if(1===o.nodeType){var l=o.nextSibling;document.body.appendChild(o);var u=k(o,n,i);
return l?e.insertBefore(o,l):e.appendChild(o),u}}},g:o,svg:o,clippath:o,polygon:l,
polyline:l,path:c,lineargradient:h,radialgradient:h,image:function(e){var t=new S(i(e,"href",!0));
return t.on("load",function(){var t=a(e,"width","height");this.setSize(t);var n=this._matrix._transformPoint(r(e,"x","y").add(t.divide(2)));
this.translate(n)}),t},symbol:function(e,t,n,i){return new p(o(e,t,n,i),!0)},defs:o,
use:function(e){var t=(i(e,"href",!0)||"").substring(1),n=L[t],a=r(e,"x","y");return n?n instanceof p?n.place(a):n.clone().translate(a):null;
},circle:function(e){return new w.Circle(r(e,"cx","cy"),i(e,"r"))},ellipse:function(e){
return new w.Ellipse({center:r(e,"cx","cy"),radius:a(e,"rx","ry")})},rect:function(e){
var t=r(e,"x","y"),n=a(e,"width","height"),i=a(e,"rx","ry");return new w.Rectangle(new v(t,n),i);
},line:function(e){return new P.Line(r(e,"x1","y1"),r(e,"x2","y2"))},text:function(e){
var t=new D(r(e,"x","y").add(r(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),
t}},T=n.set(n.each(ee,function(e){this[e.attribute]=function(t,n){if(t[e.set](s(n,e.type,e.fromSVG)),
"color"===e.type&&t instanceof w){var i=t[e.get]();i&&i.transform((new m).translate(t.getPosition(!0).negate()));
}}},{}),{id:function(e,t){L[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){
var n=E(t);if(n){if(n=n.clone(),n.setClipMask(!0),!(e instanceof _))return new _(n,e);
e.insertChild(0,n)}},gradientTransform:f,transform:f,"fill-opacity":b,"stroke-opacity":b,
visibility:function(e,t){e.setVisible("visible"===t)},display:function(e,t){e.setVisible(null!==t);
},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){
e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){var n=t.match(/(.*)%$/);
e.setRampPoint(n?n[1]/100:parseFloat(t))},viewBox:function(e,t,n,i,r){var o=new v(s(t,"array")),l=a(i,"width","height",!0);
if(e instanceof _){var u=l?o.getSize().divide(l):1,c=(new m).translate(o.getPoint()).scale(u);
e.transform(c.inverted())}else if(e instanceof p){l&&o.setSize(l);var d="visible"!=x(i,"overflow",r),h=e._definition;
d&&!o.contains(h.getBounds())&&(d=new w.Rectangle(o).transform(h._matrix),d.setClipMask(!0),
h.addChild(d))}}}),L={};y.inject({importSVG:function(e,t){return this.addChild(k(e,t,!0));
}}),g.inject({importSVG:function(e,t){return this.activate(),k(e,t,!0)}})},n.exports.PaperScript=function(){
function t(e,t,n){var i=b[t];if(e&&e[i]){var r=e[i](n);return"!="===t?!r:r}switch(t){
case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":
return e%n;case"==":return e==n;case"!=":return e!=n}}function i(e,t){var n=g[e];if(n&&t&&t[n])return t[n]();
switch(e){case"+":return+t;case"-":return-t}}function a(e,t){return m.acorn.parse(e,t);
}function s(t,n,i){function r(e){for(var t=0,n=c.length;n>t;t++){var i=c[t];if(i[0]>=e)break;
e+=i[1]}return e}function s(e){return t.substring(r(e.range[0]),r(e.range[1]))}function o(e,n){
return t.substring(r(e.range[1]),r(n.range[0]))}function l(e,n){for(var i=r(e.range[0]),a=r(e.range[1]),s=0,o=c.length-1;o>=0;o--)if(i>c[o][0]){
s=o+1;break}c.splice(s,0,[i,n.length-a+i]),t=t.substring(0,i)+n+t.substring(a)}function u(e,t){
if(e){for(var n in e)if("range"!==n&&"loc"!==n){var i=e[n];if(Array.isArray(i))for(var r=0,a=i.length;a>r;r++)u(i[r],e);else i&&"object"===("undefined"==typeof i?"undefined":$traceurRuntime["typeof"](i))&&u(i,e);
}switch(e.type){case"UnaryExpression":if(e.operator in g&&"Literal"!==e.argument.type){
var c=s(e.argument);l(e,'$__("'+e.operator+'", '+c+")")}break;case"BinaryExpression":
if(e.operator in b&&"Literal"!==e.left.type){var d=s(e.left),h=s(e.right),v=o(e.left,e.right),f=e.operator;
l(e,"__$__("+d+","+v.replace(new RegExp("\\"+f),'"'+f+'"')+", "+h+")")}break;case"UpdateExpression":
case"AssignmentExpression":var m=t&&t.type;if(!("ForStatement"===m||"BinaryExpression"===m&&/^[=!<>]/.test(t.operator)||"MemberExpression"===m&&t.computed))if("UpdateExpression"===e.type){
var c=s(e.argument),p="__$__("+c+', "'+e.operator[0]+'", 1)',y=c+" = "+p;e.prefix||"AssignmentExpression"!==m&&"VariableDeclarator"!==m||(s(t.left||t.id)===c&&(y=p),
y=c+"; "+y),l(e,y)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){var d=s(e.left),h=s(e.right);
l(e,d+" = __$__("+d+', "'+e.operator[0]+'", '+h+")")}}}}if(!t)return"";i=i||{},n=n||"";
var c=[],d=null,h=e.browser,v=h.versionNumber,f=/\r\n|\n|\r/gm,m=0;if(h.chrome&&v>=30||h.webkit&&v>=537.76||h.firefox&&v>=23){
if(0===window.location.href.indexOf(n)){var p=document.getElementsByTagName("html")[0].innerHTML;
m=p.substr(0,p.indexOf(t)+1).match(f).length+1}var y=["AAAA"];y.length=(t.match(f)||[]).length+1+m,
d={version:3,file:n,names:[],mappings:y.join(";AACA"),sourceRoot:"",sources:[n]};var _=i.source||!n&&t;
_&&(d.sourcesContent=[_])}return u(a(t,{ranges:!0})),d&&(t=new Array(m+1).join("\n")+t+"\n//# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+"\n//# sourceURL="+(n||"paperscript")),
t}function o(r,a,o,l){function c(e,t){for(var n in e)!t&&/^_/.test(n)||!new RegExp("([\\b\\s\\W]|^)"+n.replace(/\$/g,"\\$")+"\\b").test(r)||(b.push(n),
g.push(e[n]))}e=a;var d,h=a.getView(),v=/\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(r)?new Z:null,f=v?v._events:[],m=["onFrame","onResize"].concat(f),b=[],g=[];
r=s(r,o,l),c({__$__:t,$__:i,paper:a,view:h,tool:v},!0),c(a),m=n.each(m,function(e){
new RegExp("\\s+"+e+"\\b").test(r)&&(b.push(e),this.push(e+": "+e))},[]).join(", "),
m&&(r+="\nreturn { "+m+" };");var p=e.browser;if(p.chrome||p.firefox){var y=document.createElement("script"),_=document.head||document.getElementsByTagName("head")[0];
p.firefox&&(r="\n"+r),y.appendChild(document.createTextNode("paper._execute = function("+b+") {"+r+"\n}")),
_.appendChild(y),d=e._execute,delete e._execute,_.removeChild(y)}else d=Function(b,r);
var x=d.apply(a,g)||{};n.each(f,function(e){var t=x[e];t&&(v[e]=t)}),h&&(x.onResize&&h.setOnResize(x.onResize),
h.emit("resize",{size:h.size,delta:new u}),x.onFrame&&h.setOnFrame(x.onFrame),h.update());
}function l(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==r.getAttribute(e,"ignore")){
var t=r.getAttribute(e,"canvas"),n=document.getElementById(t),i=e.src||e.getAttribute("data-src"),a=r.hasAttribute(e,"async"),s="data-paper-scope";
if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var l=r.get(n.getAttribute(s))||(new r).setup(n);
return n.setAttribute(s,l._id),i?K.request("get",i,function(e){o(e,l,i)},a):o(e.innerHTML,l,e.baseURI),
e.setAttribute("data-paper-ignore","true"),l}}function c(){n.each(document.getElementsByTagName("script"),l);
}function h(e){return e?l(e):c()}var v,f,m=this;!function(e,t){return"object"==("undefined"==typeof v?"undefined":$traceurRuntime["typeof"](v))&&"object"==("undefined"==typeof module?"undefined":$traceurRuntime["typeof"](module))?t(v):"function"==typeof f&&f.amd?f(["exports"],t):void t(e.acorn||(e.acorn={}));
}(this,function(e){function t(e){de=e||{};for(var t in me)Object.prototype.hasOwnProperty.call(de,t)||(de[t]=me[t]);
fe=de.sourceFile||null}function n(e,t){var n=be(he,e);t+=" ("+n.line+":"+n.column+")";
var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=ge,i}function i(e){function t(e){
if(1==e.length)return n+="return str === "+JSON.stringify(e[0])+";";n+="switch(str){";
for(var t=0;t<e.length;++t)n+="case "+JSON.stringify(e[t])+":";n+="return true}return false;";
}e=e.split(" ");var n="",i=[];e:for(var r=0;r<e.length;++r){for(var a=0;a<i.length;++a)if(i[a][0].length==e[r].length){
i[a].push(e[r]);continue e}i.push([e[r]])}if(i.length>3){i.sort(function(e,t){return t.length-e.length;
}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var s=i[r];n+="case "+s[0].length+":",
t(s)}n+="}"}else t(e);return new Function("str",n)}function r(){this.line=Ee,this.column=ge-ke;
}function a(){Ee=1,ge=ke=0,Ce=!0,u()}function s(e,t){ye=ge,de.locations&&(xe=new r),
we=e,u(),Se=t,Ce=e.beforeExpr}function o(){var e=de.onComment&&de.locations&&new r,t=ge,i=he.indexOf("*/",ge+=2);
if(-1===i&&n(ge-2,"Unterminated comment"),ge=i+2,de.locations){Zt.lastIndex=t;for(var a=void 0;(a=Zt.exec(he))&&a.index<ge;)++Ee,
ke=a.index+a[0].length}de.onComment&&de.onComment(!0,he.slice(t+2,i),t,ge,e,de.locations&&new r);
}function l(){for(var e=ge,t=de.onComment&&de.locations&&new r,n=he.charCodeAt(ge+=2);ve>ge&&10!==n&&13!==n&&8232!==n&&8233!==n;)++ge,
n=he.charCodeAt(ge);de.onComment&&de.onComment(!1,he.slice(e+2,ge),e,ge,t,de.locations&&new r);
}function u(){for(;ve>ge;){var e=he.charCodeAt(ge);if(32===e)++ge;else if(13===e){
++ge;var t=he.charCodeAt(ge);10===t&&++ge,de.locations&&(++Ee,ke=ge)}else if(10===e||8232===e||8233===e)++ge,
de.locations&&(++Ee,ke=ge);else if(e>8&&14>e)++ge;else if(47===e){var t=he.charCodeAt(ge+1);
if(42===t)o();else{if(47!==t)break;l()}}else if(160===e)++ge;else{if(!(e>=5760&&Ft.test(String.fromCharCode(e))))break;
++ge}}}function c(){var e=he.charCodeAt(ge+1);return e>=48&&57>=e?C(!0):(++ge,s(_t));
}function d(){var e=he.charCodeAt(ge+1);return Ce?(++ge,x()):61===e?_(Ct,2):_(wt,1);
}function h(){var e=he.charCodeAt(ge+1);return 61===e?_(Ct,2):_(Dt,1)}function v(e){
var t=he.charCodeAt(ge+1);return t===e?_(124===e?At:Tt,2):61===t?_(Ct,2):_(124===e?Lt:Pt,1);
}function f(){var e=he.charCodeAt(ge+1);return 61===e?_(Ct,2):_(Mt,1)}function m(e){
var t=he.charCodeAt(ge+1);return t===e?45==t&&62==he.charCodeAt(ge+2)&&Xt.test(he.slice(Te,ge))?(ge+=3,
l(),u(),y()):_(Et,2):61===t?_(Ct,2):_(Vt,1)}function b(e){var t=he.charCodeAt(ge+1),n=1;
return t===e?(n=62===e&&62===he.charCodeAt(ge+2)?3:2,61===he.charCodeAt(ge+n)?_(Ct,n+1):_(Ot,n)):33==t&&60==e&&45==he.charCodeAt(ge+2)&&45==he.charCodeAt(ge+3)?(ge+=4,
l(),u(),y()):(61===t&&(n=61===he.charCodeAt(ge+2)?3:2),_(jt,n))}function g(e){var t=he.charCodeAt(ge+1);
return 61===t?_(Rt,61===he.charCodeAt(ge+2)?3:2):_(61===e?St:kt,1)}function p(e){
switch(e){case 46:return c();case 40:return++ge,s(mt);case 41:return++ge,s(bt);case 59:
return++ge,s(pt);case 44:return++ge,s(gt);case 91:return++ge,s(dt);case 93:return++ge,
s(ht);case 123:return++ge,s(vt);case 125:return++ge,s(ft);case 58:return++ge,s(yt);
case 63:return++ge,s(xt);case 48:var t=he.charCodeAt(ge+1);if(120===t||88===t)return S();
case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return C(!1);
case 34:case 39:return E(e);case 47:return d(e);case 37:case 42:return h();case 124:
case 38:return v(e);case 94:return f();case 43:case 45:return m(e);case 60:case 62:
return b(e);case 61:case 33:return g(e);case 126:return _(kt,1)}return!1}function y(e){
if(e?ge=pe+1:pe=ge,de.locations&&(_e=new r),e)return x();if(ge>=ve)return s(Ie);var t=he.charCodeAt(ge);
if(Kt(t)||92===t)return T();var i=p(t);if(i===!1){var a=String.fromCharCode(t);if("\\"===a||$t.test(a))return T();
n(ge,"Unexpected character '"+a+"'")}return i}function _(e,t){var n=he.slice(ge,ge+t);
ge+=t,s(e,n)}function x(){for(var e=void 0,t=void 0,i="",r=ge;;){ge>=ve&&n(r,"Unterminated regular expression");
var a=he.charAt(ge);if(Xt.test(a)&&n(r,"Unterminated regular expression"),e)e=!1;else{
if("["===a)t=!0;else if("]"===a&&t)t=!1;else if("/"===a&&!t)break;e="\\"===a}++ge;
}var i=he.slice(r,ge);++ge;var o=A();o&&!/^[gmsiy]*$/.test(o)&&n(r,"Invalid regexp flag");
try{var l=new RegExp(i,o)}catch(u){u instanceof SyntaxError&&n(r,u.message),n(u)}
return s(Ve,l)}function w(e,t){for(var n=ge,i=0,r=0,a=null==t?1/0:t;a>r;++r){var s=void 0,o=he.charCodeAt(ge);
if(s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&57>=o?o-48:1/0,s>=e)break;++ge,i=i*e+s}return ge===n||null!=t&&ge-n!==t?null:i;
}function S(){ge+=2;var e=w(16);return null==e&&n(pe+2,"Expected hexadecimal number"),
Kt(he.charCodeAt(ge))&&n(ge,"Identifier directly after number"),s(Oe,e)}function C(e){
var t=ge,i=!1,r=48===he.charCodeAt(ge);e||null!==w(10)||n(t,"Invalid number"),46===he.charCodeAt(ge)&&(++ge,
w(10),i=!0);var a=he.charCodeAt(ge);(69===a||101===a)&&(a=he.charCodeAt(++ge),(43===a||45===a)&&++ge,
null===w(10)&&n(t,"Invalid number"),i=!0),Kt(he.charCodeAt(ge))&&n(ge,"Identifier directly after number");
var o,l=he.slice(t,ge);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||Re?n(t,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),
s(Oe,o)}function E(e){ge++;for(var t="";;){ge>=ve&&n(pe,"Unterminated string constant");
var i=he.charCodeAt(ge);if(i===e)return++ge,s(De,t);if(92===i){i=he.charCodeAt(++ge);
var r=/^[0-7]+/.exec(he.slice(ge,ge+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);
if("0"===r&&(r=null),++ge,r)Re&&n(ge-2,"Octal literal in strict mode"),t+=String.fromCharCode(parseInt(r,8)),
ge+=r.length-1;else switch(i){case 110:t+="\n";break;case 114:t+="\r";break;case 120:
t+=String.fromCharCode(k(2));break;case 117:t+=String.fromCharCode(k(4));break;case 85:
t+=String.fromCharCode(k(8));break;case 116:t+="	";break;case 98:t+="\b";break;case 118:
t+="\x0B";break;case 102:t+="\f";break;case 48:t+="\x00";break;case 13:10===he.charCodeAt(ge)&&++ge;
case 10:de.locations&&(ke=ge,++Ee);break;default:t+=String.fromCharCode(i)}}else(13===i||10===i||8232===i||8233===i)&&n(pe,"Unterminated string constant"),
t+=String.fromCharCode(i),++ge}}function k(e){var t=w(16,e);return null===t&&n(pe,"Bad character escape sequence"),
t}function A(){It=!1;for(var e=void 0,t=!0,i=ge;;){var r=he.charCodeAt(ge);if(Jt(r))It&&(e+=he.charAt(ge)),
++ge;else{if(92!==r)break;It||(e=he.slice(i,ge)),It=!0,117!=he.charCodeAt(++ge)&&n(ge,"Expecting Unicode escape sequence \\uXXXX"),
++ge;var a=k(4),s=String.fromCharCode(a);s||n(ge-1,"Invalid Unicode escape"),(t?Kt(a):Jt(a))||n(ge-4,"Invalid Unicode escape"),
e+=s}t=!1}return It?e:he.slice(i,ge)}function T(){var e=A(),t=Ge;return!It&&Ht(e)&&(t=ct[e]),
s(t,e)}function L(){Ae=pe,Te=ye,Le=xe,y()}function M(e){if(Re=e,ge=pe,de.locations)for(;ke>ge;)ke=he.lastIndexOf("\n",ke-2)+1,
--Ee;u(),y()}function P(){this.type=null,this.start=pe,this.end=null}function R(){
this.start=_e,this.end=null,null!==fe&&(this.source=fe)}function j(){var e=new P;return de.locations&&(e.loc=new R),
de.directSourceFile&&(e.sourceFile=de.directSourceFile),de.ranges&&(e.range=[pe,0]),
e}function O(e){var t=new P;return t.start=e.start,de.locations&&(t.loc=new R,t.loc.start=e.loc.start),
de.ranges&&(t.range=[e.range[0],0]),t}function V(e,t){return e.type=t,e.end=Te,de.locations&&(e.loc.end=Le),
de.ranges&&(e.range[1]=Te),e}function D(e){return de.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value;
}function G(e){return we===e?(L(),!0):void 0}function I(){return!de.strictSemicolons&&(we===Ie||we===ft||Xt.test(he.slice(Te,pe)));
}function N(){G(pt)||I()||U()}function B(e){we===e?L():U()}function U(){n(pe,"Unexpected token");
}function z(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&n(e.start,"Assigning to rvalue"),
Re&&"Identifier"===e.type&&zt(e.name)&&n(e.start,"Assigning to "+e.name+" in strict mode");
}function H(e){Ae=Te=ge,de.locations&&(Le=new r),Me=Re=null,Pe=[],y();var t=e||j(),n=!0;
for(e||(t.body=[]);we!==Ie;){var i=F();t.body.push(i),n&&D(i)&&M(!0),n=!1}return V(t,"Program");
}function F(){(we===wt||we===Ct&&"/="==Se)&&y(!0);var e=we,t=j();switch(e){case Ne:
case ze:L();var i=e===Ne;G(pt)||I()?t.label=null:we!==Ge?U():(t.label=ce(),N());for(var r=0;r<Pe.length;++r){
var a=Pe[r];if(null==t.label||a.name===t.label.name){if(null!=a.kind&&(i||"loop"===a.kind))break;
if(t.label&&i)break}}return r===Pe.length&&n(t.start,"Unsyntactic "+e.keyword),V(t,i?"BreakStatement":"ContinueStatement");
case He:return L(),N(),V(t,"DebuggerStatement");case qe:return L(),Pe.push(Qt),t.body=F(),
Pe.pop(),B(nt),t.test=q(),N(),V(t,"DoWhileStatement");case We:if(L(),Pe.push(Qt),
B(mt),we===pt)return $(t,null);if(we===tt){var s=j();return L(),X(s,!0),V(s,"VariableDeclaration"),
1===s.declarations.length&&G(ut)?W(t,s):$(t,s)}var s=Z(!1,!0);return G(ut)?(z(s),
W(t,s)):$(t,s);case Xe:return L(),le(t,!0);case Ze:return L(),t.test=q(),t.consequent=F(),
t.alternate=G(Ye)?F():null,V(t,"IfStatement");case Ke:return Me||de.allowReturnOutsideFunction||n(pe,"'return' outside of function"),
L(),G(pt)||I()?t.argument=null:(t.argument=Z(),N()),V(t,"ReturnStatement");case Je:
L(),t.discriminant=q(),t.cases=[],B(vt),Pe.push(en);for(var o=void 0,l=void 0;we!=ft;)if(we===Be||we===Fe){
var u=we===Be;o&&V(o,"SwitchCase"),t.cases.push(o=j()),o.consequent=[],L(),u?o.test=Z():(l&&n(Ae,"Multiple default clauses"),
l=!0,o.test=null),B(yt)}else o||U(),o.consequent.push(F());return o&&V(o,"SwitchCase"),
L(),Pe.pop(),V(t,"SwitchStatement");case Qe:return L(),Xt.test(he.slice(Te,pe))&&n(Te,"Illegal newline after throw"),
t.argument=Z(),N(),V(t,"ThrowStatement");case et:if(L(),t.block=Y(),t.handler=null,
we===Ue){var c=j();L(),B(mt),c.param=ce(),Re&&zt(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),
B(bt),c.guard=null,c.body=Y(),t.handler=V(c,"CatchClause")}return t.guardedHandlers=je,
t.finalizer=G($e)?Y():null,t.handler||t.finalizer||n(t.start,"Missing catch or finally clause"),
V(t,"TryStatement");case tt:return L(),X(t),N(),V(t,"VariableDeclaration");case nt:
return L(),t.test=q(),Pe.push(Qt),t.body=F(),Pe.pop(),V(t,"WhileStatement");case it:
return Re&&n(pe,"'with' in strict mode"),L(),t.object=q(),t.body=F(),V(t,"WithStatement");
case vt:return Y();case pt:return L(),V(t,"EmptyStatement");default:var d=Se,h=Z();
if(e===Ge&&"Identifier"===h.type&&G(yt)){for(var r=0;r<Pe.length;++r)Pe[r].name===d&&n(h.start,"Label '"+d+"' is already declared");
var v=we.isLoop?"loop":we===Je?"switch":null;return Pe.push({name:d,kind:v}),t.body=F(),
Pe.pop(),t.label=h,V(t,"LabeledStatement")}return t.expression=h,N(),V(t,"ExpressionStatement");
}}function q(){B(mt);var e=Z();return B(bt),e}function Y(e){var t,n=j(),i=!0,r=!1;
for(n.body=[],B(vt);!G(ft);){var a=F();n.body.push(a),i&&e&&D(a)&&(t=r,M(r=!0)),i=!1;
}return r&&!t&&M(!1),V(n,"BlockStatement")}function $(e,t){return e.init=t,B(pt),
e.test=we===pt?null:Z(),B(pt),e.update=we===bt?null:Z(),B(bt),e.body=F(),Pe.pop(),
V(e,"ForStatement")}function W(e,t){return e.left=t,e.right=Z(),B(bt),e.body=F(),
Pe.pop(),V(e,"ForInStatement")}function X(e,t){for(e.declarations=[],e.kind="var";;){
var i=j();if(i.id=ce(),Re&&zt(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),
i.init=G(St)?Z(!0,t):null,e.declarations.push(V(i,"VariableDeclarator")),!G(gt))break;
}return e}function Z(e,t){var n=K(t);if(!e&&we===gt){var i=O(n);for(i.expressions=[n];G(gt);)i.expressions.push(K(t));
return V(i,"SequenceExpression")}return n}function K(e){var t=J(e);if(we.isAssign){
var n=O(t);return n.operator=Se,n.left=t,L(),n.right=K(e),z(t),V(n,"AssignmentExpression");
}return t}function J(e){var t=Q(e);if(G(xt)){var n=O(t);return n.test=t,n.consequent=Z(!0),
B(yt),n.alternate=Z(!0,e),V(n,"ConditionalExpression")}return t}function Q(e){return ee(te(),-1,e);
}function ee(e,t,n){var i=we.binop;if(null!=i&&(!n||we!==ut)&&i>t){var r=O(e);r.left=e,
r.operator=Se;var a=we;L(),r.right=ee(te(),i,n);var s=V(r,a===At||a===Tt?"LogicalExpression":"BinaryExpression");
return ee(s,t,n)}return e}function te(){if(we.prefix){var e=j(),t=we.isUpdate;return e.operator=Se,
e.prefix=!0,Ce=!0,L(),e.argument=te(),t?z(e.argument):Re&&"delete"===e.operator&&"Identifier"===e.argument.type&&n(e.start,"Deleting local variable in strict mode"),
V(e,t?"UpdateExpression":"UnaryExpression")}for(var i=ne();we.postfix&&!I();){var e=O(i);
e.operator=Se,e.prefix=!1,e.argument=i,z(i),L(),i=V(e,"UpdateExpression")}return i;
}function ne(){return ie(re())}function ie(e,t){if(G(_t)){var n=O(e);return n.object=e,
n.property=ce(!0),n.computed=!1,ie(V(n,"MemberExpression"),t)}if(G(dt)){var n=O(e);
return n.object=e,n.property=Z(),n.computed=!0,B(ht),ie(V(n,"MemberExpression"),t);
}if(!t&&G(mt)){var n=O(e);return n.callee=e,n.arguments=ue(bt,!1),ie(V(n,"CallExpression"),t);
}return e}function re(){switch(we){case at:var e=j();return L(),V(e,"ThisExpression");
case Ge:return ce();case Oe:case De:case Ve:var e=j();return e.value=Se,e.raw=he.slice(pe,ye),
L(),V(e,"Literal");case st:case ot:case lt:var e=j();return e.value=we.atomValue,
e.raw=we.keyword,L(),V(e,"Literal");case mt:var t=_e,n=pe;L();var i=Z();return i.start=n,
i.end=ye,de.locations&&(i.loc.start=t,i.loc.end=xe),de.ranges&&(i.range=[n,ye]),B(bt),
i;case dt:var e=j();return L(),e.elements=ue(ht,!0,!0),V(e,"ArrayExpression");case vt:
return se();case Xe:var e=j();return L(),le(e,!1);case rt:return ae();default:U();
}}function ae(){var e=j();return L(),e.callee=ie(re(),!0),G(mt)?e.arguments=ue(bt,!1):e.arguments=je,
V(e,"NewExpression")}function se(){var e=j(),t=!0,i=!1;for(e.properties=[],L();!G(ft);){
if(t)t=!1;else if(B(gt),de.allowTrailingCommas&&G(ft))break;var r=void 0,a={key:oe()
},s=!1;if(G(yt)?(a.value=Z(!0),r=a.kind="init"):de.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(s=i=!0,
r=a.kind=a.key.name,a.key=oe(),we!==mt&&U(),a.value=le(j(),!1)):U(),"Identifier"===a.key.type&&(Re||i))for(var o=0;o<e.properties.length;++o){
var l=e.properties[o];if(l.key.name===a.key.name){var u=r==l.kind||s&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);
u&&!Re&&"init"===r&&"init"===l.kind&&(u=!1),u&&n(a.key.start,"Redefinition of property");
}}e.properties.push(a)}return V(e,"ObjectExpression")}function oe(){return we===Oe||we===De?re():ce(!0);
}function le(e,t){we===Ge?e.id=ce():t?U():e.id=null,e.params=[];var i=!0;for(B(mt);!G(bt);)i?i=!1:B(gt),
e.params.push(ce());var r=Me,a=Pe;if(Me=!0,Pe=[],e.body=Y(!0),Me=r,Pe=a,Re||e.body.body.length&&D(e.body.body[0]))for(var s=e.id?-1:0;s<e.params.length;++s){
var o=0>s?e.id:e.params[s];if((Ut(o.name)||zt(o.name))&&n(o.start,"Defining '"+o.name+"' in strict mode"),
s>=0)for(var l=0;s>l;++l)o.name===e.params[l].name&&n(o.start,"Argument name clash in strict mode");
}return V(e,t?"FunctionDeclaration":"FunctionExpression")}function ue(e,t,n){for(var i=[],r=!0;!G(e);){
if(r)r=!1;else if(B(gt),t&&de.allowTrailingCommas&&G(e))break;n&&we===gt?i.push(null):i.push(Z(!0));
}return i}function ce(e){var t=j();return e&&"everywhere"==de.forbidReserved&&(e=!1),
we===Ge?(!e&&(de.forbidReserved&&(3===de.ecmaVersion?Nt:Bt)(Se)||Re&&Ut(Se))&&-1==he.slice(pe,ye).indexOf("\\")&&n(pe,"The keyword '"+Se+"' is reserved"),
t.name=Se):e&&we.keyword?t.name=we.keyword:U(),Ce=!1,L(),V(t,"Identifier")}e.version="0.5.0";
var de,he,ve,fe;e.parse=function(e,n){return he=String(e),ve=he.length,t(n),a(),H(de.program);
};var me=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,
forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,
program:null,sourceFile:null,directSourceFile:null},be=e.getLineInfo=function(e,t){
for(var n=1,i=0;;){Zt.lastIndex=i;var r=Zt.exec(e);if(!(r&&r.index<t))break;++n,i=r.index+r[0].length;
}return{line:n,column:t-i}};e.tokenize=function(e,n){function i(e){return Te=ye,y(e),
r.start=pe,r.end=ye,r.startLoc=_e,r.endLoc=xe,r.type=we,r.value=Se,r}he=String(e),
ve=he.length,t(n),a();var r={};return i.jumpTo=function(e,t){if(ge=e,de.locations){
Ee=1,ke=Zt.lastIndex=0;for(var n=void 0;(n=Zt.exec(he))&&n.index<e;)++Ee,ke=n.index+n[0].length;
}Ce=t,u()},i};var ge,pe,ye,_e,xe,we,Se,Ce,Ee,ke,Ae,Te,Le,Me,Pe,Re,je=[],Oe={type:"num"
},Ve={type:"regexp"},De={type:"string"},Ge={type:"name"},Ie={type:"eof"},Ne={keyword:"break"
},Be={keyword:"case",beforeExpr:!0},Ue={keyword:"catch"},ze={keyword:"continue"},He={
keyword:"debugger"},Fe={keyword:"default"},qe={keyword:"do",isLoop:!0},Ye={keyword:"else",
beforeExpr:!0},$e={keyword:"finally"},We={keyword:"for",isLoop:!0},Xe={keyword:"function"
},Ze={keyword:"if"},Ke={keyword:"return",beforeExpr:!0},Je={keyword:"switch"},Qe={
keyword:"throw",beforeExpr:!0},et={keyword:"try"},tt={keyword:"var"},nt={keyword:"while",
isLoop:!0},it={keyword:"with"},rt={keyword:"new",beforeExpr:!0},at={keyword:"this"
},st={keyword:"null",atomValue:null},ot={keyword:"true",atomValue:!0},lt={keyword:"false",
atomValue:!1},ut={keyword:"in",binop:7,beforeExpr:!0},ct={"break":Ne,"case":Be,"catch":Ue,
"continue":ze,"debugger":He,"default":Fe,"do":qe,"else":Ye,"finally":$e,"for":We,
"function":Xe,"if":Ze,"return":Ke,"switch":Je,"throw":Qe,"try":et,"var":tt,"while":nt,
"with":it,"null":st,"true":ot,"false":lt,"new":rt,"in":ut,"instanceof":{keyword:"instanceof",
binop:7,beforeExpr:!0},"this":at,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0
},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,
beforeExpr:!0}},dt={type:"[",beforeExpr:!0},ht={type:"]"},vt={type:"{",beforeExpr:!0
},ft={type:"}"},mt={type:"(",beforeExpr:!0},bt={type:")"},gt={type:",",beforeExpr:!0
},pt={type:";",beforeExpr:!0},yt={type:":",beforeExpr:!0},_t={type:"."},xt={type:"?",
beforeExpr:!0},wt={binop:10,beforeExpr:!0},St={isAssign:!0,beforeExpr:!0},Ct={isAssign:!0,
beforeExpr:!0},Et={postfix:!0,prefix:!0,isUpdate:!0},kt={prefix:!0,beforeExpr:!0},At={
binop:1,beforeExpr:!0},Tt={binop:2,beforeExpr:!0},Lt={binop:3,beforeExpr:!0},Mt={
binop:4,beforeExpr:!0},Pt={binop:5,beforeExpr:!0},Rt={binop:6,beforeExpr:!0},jt={
binop:7,beforeExpr:!0},Ot={binop:8,beforeExpr:!0},Vt={binop:9,prefix:!0,beforeExpr:!0
},Dt={binop:10,beforeExpr:!0};e.tokTypes={bracketL:dt,bracketR:ht,braceL:vt,braceR:ft,
parenL:mt,parenR:bt,comma:gt,semi:pt,colon:yt,dot:_t,question:xt,slash:wt,eq:St,name:Ge,
eof:Ie,num:Oe,regexp:Ve,string:De};for(var Gt in ct)e.tokTypes["_"+Gt]=ct[Gt];var It,Nt=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Bt=i("class enum extends super const export import"),Ut=i("implements interface let package private protected public static yield"),zt=i("eval arguments"),Ht=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ft=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,qt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Yt="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",$t=new RegExp("["+qt+"]"),Wt=new RegExp("["+qt+Yt+"]"),Xt=/[\n\r\u2028\u2029]/,Zt=/\r\n|[\n\r\u2028\u2029]/g,Kt=e.isIdentifierStart=function(e){
return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&$t.test(String.fromCharCode(e));
},Jt=e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&Wt.test(String.fromCharCode(e));
},Qt={kind:"loop"},en={kind:"switch"}});var b={"+":"__add","-":"__subtract","*":"__multiply",
"/":"__divide","%":"__modulo","==":"equals","!=":"equals"},g={"-":"__negate","+":null
},p=n.each(["add","subtract","multiply","divide","modulo","negate"],function(e){this["__"+e]="#"+e;
},{});return u.inject(p),d.inject(p),G.inject(p),"complete"===document.readyState?setTimeout(c):z.add(window,{
load:c}),{compile:s,execute:o,load:h,parse:a}}.call(this),e=new(r.inject(n.exports,{
enumerable:!0,Base:n,Numerical:o,Key:$})),"function"==typeof define&&define.amd?define("paper",e):"object"===("undefined"==typeof module?"undefined":$traceurRuntime["typeof"](module))&&module&&(module.exports=e),
e};e.setup(document.createElement("canvas"));var t=e;return{get default(){return t;
}}}),System.registerModule("utils/array",[],function(){"use strict";var e=function(e,t){
var n=void 0!==arguments[2]?arguments[2]:!1;if(e.length!==t.length)return!1;if(n)for(var i in e){
var r=e[i];if(r!==t[i])return!1}else{for(var a=0;a<e.length;a+=1)if(!t.includes(e[a]))return!1;
for(var a=0;a<t.length;a+=1)if(!e.includes(t[a]))return!1}return!0},t=function(e){
return $traceurRuntime.spread(new Set(e))},n=function(e,t){if(0===e.length)return!1;
for(var n=0;n<e.length;n+=1)if(e[n]!==t)return!1;return!0};return{get compareArrays(){
return e},get removeDuplicates(){return t},get includesOnly(){return n}}}),System.registerModule("utils/artwork-compression",[],function(){
"use strict";var e=System.get("libs/pako")["default"],t=function(t){for(var n=[],i=0,r=t.length;r>i;i+=1)n.push(t[i].charCodeAt(0));
var a=new Uint8Array(n);return e.gzip(a)},n=function(t){try{for(var n=e.inflate(t),i="",r=0,a=n.length;a>r;r+=1){
var s=String.fromCharCode(n[r]);i+=s}return i}catch(o){return null}};return{get compressArtwork(){
return t},get uncompressArtwork(){return n}}}),System.registerModule("utils/artwork-export",[],function(){
"use strict";var e=System.get("utils/node").normalizeWhitespace,t=System.get("utils/path-conversion").pathToRect,n=System.get("utils/string").collapseWhitespace,i=System.get("utils/constants"),r=i.XMLNS_NAMESPACE,a=i.XLINK_NAMESPACE,s=i.SVG_NAMESPACE,o=i.BX_NAMESPACE,l=function(i){
var r=void 0!==arguments[1]?arguments[1]:"xml";i=i.cloneNode(!0);for(var a,s=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT);a=s.nextNode();)if("path"===a.localName){
if(a.hasAttribute("data-bx-shape")&&a.getAttribute("data-bx-shape").startsWith("rect")){
var o=t(a);o&&a.replace(o)}}else"style"===a.localName?""===n(a.textContent)&&a.remove():"defs"===a.localName&&0===a.children.length&&a.remove();
u(i),c(i),d(i,r),e(i);var l=h(i,r);return l},u=function(e){},c=function(e){},d=function(e,t){
if("xml"===t){for(var n,i=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),l=!1,u=!1;n=i.nextNode();)if(n.localName.startsWith("bx-")){
var c=document.createElementNS(o,"bx:"+n.localName.substring(3)),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=$traceurRuntime.spread(n.attributes)[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var b=f.value;c.setAttribute(b.name,b.value)}}catch(g){h=!0,v=g}finally{try{d||null==m["return"]||m["return"]();
}finally{if(h)throw v}}var p=!0,y=!1,_=void 0;try{for(var x=void 0,w=$traceurRuntime.spread(n.childNodes)[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;c.append(S)}}catch(C){y=!0,_=C}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}n.replace(c),u=!0}else{var E=!0,k=!1,A=void 0;try{for(var T=void 0,L=$traceurRuntime.spread(n.attributes)[Symbol.iterator]();!(E=(T=L.next()).done);E=!0){
var M=T.value;if("href"===M.name)n.setAttribute("xlink:href",n.getAttribute("href")),
n.removeAttribute("href"),l=!0;else if(M.name.startsWith("data-bx-")){var P=M.name.substring(8);
n.setAttributeNS(o,"bx:"+P,M.value),n.removeAttribute(M.name),u=!0}}}catch(R){k=!0,
A=R}finally{try{E||null==L["return"]||L["return"]()}finally{if(k)throw A}}}e.setAttributeNS(r,"xmlns",s),
l&&e.setAttributeNS(r,"xmlns:xlink",a),u&&e.setAttributeNS(r,"xmlns:bx",o)}else if("html"===t)for(var j,O=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT);j=O.nextNode();){
var V=!0,D=!1,G=void 0;try{for(var I=void 0,N=$traceurRuntime.spread(j.attributes)[Symbol.iterator]();!(V=(I=N.next()).done);V=!0){
var B=I.value;"href"===B.name&&(j.setAttribute("xlink:href",j.getAttribute("href")),
j.removeAttribute("href"))}}catch(U){D=!0,G=U}finally{try{V||null==N["return"]||N["return"]();
}finally{if(D)throw G}}}},h=function(e,t){var n;if("xml"===t){var i=new XMLSerializer,r='<?xml version="1.0" encoding="utf-8"?>\n';
n=r+i.serializeToString(e)}else if("html"===t){var a="<!doctype html>\n";n=a+e.outerHTML,
n=n.replaceAll(' xmlns:xlink="http://www.w3.org/1999/xlink"',"")}return n=n.replaceAll("url(&quot;","url("),
n=n.replaceAll("&quot;)",")")};return{get exportArtwork(){return l}}}),System.registerModule("utils/artwork-general",[],function(){
"use strict";var e=System.get("utils/array").removeDuplicates,t=System.get("utils/element").compareElements,n=System.get("utils/constants").PROPERTIES_ACCEPTING_URL_VALUES,i=function(e){
var t=new DOMParser,n=t.parseFromString(e,"text/html");return null!==n.querySelector("svg");
},r=function(i,r){!function(){var e=!0,n=!1,a=void 0;try{for(var s=void 0,o=i.querySelectorAll("use")[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){
var l=s.value;if(""!==l.href.baseVal){var u=i.querySelector(l.href.baseVal),c=r.querySelector(l.href.baseVal);
u&&c&&t(u,c)&&u.remove()}}}catch(d){n=!0,a=d}finally{try{e||null==o["return"]||o["return"]();
}finally{if(n)throw a}}}(),function(){var e=$traceurRuntime.spread(i.querySelectorAll("pattern:not([href])")),n=$traceurRuntime.spread(r.querySelectorAll("pattern:not([href])")),a=!0,s=!1,o=void 0;
try{for(var l=function(){var e=u.value,i=n.find(function(t){return t.id===e.id});i&&t(e,i)&&e.remove();
},u=void 0,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l()}catch(d){s=!0,o=d;
}finally{try{a||null==c["return"]||c["return"]()}finally{if(s)throw o}}}(),function(){
var t=$traceurRuntime.spread(i.querySelectorAll("[id]")).map(function(e){return e.id;
}),a=$traceurRuntime.spread(r.querySelectorAll("[id]")).map(function(e){return e.id;
});i.id&&t.push(i.id),r.id&&a.push(r.id);var s=t.filter(function(e){return a.includes(e);
});s=e(s),s.remove("bx-google-fonts");var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=s[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value,v=i.id===h?i:i.querySelector("#"+h),f=void 0;f="linearGradient"===v.localName||"radialGradient"===v.localName?"gradient":"clipPath"===v.localName?"path":v.localName;
for(var m=void 0,b=1;;){var g=f+"-"+b;if(null===i.querySelector("#"+g)&&null===r.querySelector("#"+g)&&i.id!==g&&r.id!==g){
m=g;break}b+=1}for(var p=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT),y=null;y=p.nextNode();){
y.id===h&&(y.id=m),y.href&&y.href.baseVal==="#"+h&&y.setAttribute("href","#"+m);var _=!0,x=!1,w=void 0;
try{for(var S=void 0,C=n[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){var E=S.value,k=y.style.getPropertyValue(E);
if(k&&k.startsWith("url(")){var A=k.substring(6,k.length-2);A===h&&y.style.setProperty(E,"url(#"+m+")");
}}}catch(T){x=!0,w=T}finally{try{_||null==C["return"]||C["return"]()}finally{if(x)throw w;
}}}}}catch(L){l=!0,u=L}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u;
}}}()};return{get isArtworkString(){return i},get prepareArtworkForInsertion(){return r;
}}}),System.registerModule("utils/artwork-import",[],function(){"use strict";var e=System.get("utils/array").removeDuplicates,t=System.get("utils/element").createElement,n=System.get("utils/font"),i=n.isGoogleFontsImportRule,r=n.parseGoogleFontsURL,a=System.get("utils/gradient"),s=a.hasOwnStops,o=a.getInheritedGradientStops,l=System.get("utils/math").normalize,u=System.get("utils/path-conversion"),c=u.circleToEllipse,d=u.lineToPath,h=u.polylineToPath,v=u.polygonToPath,f=(u.pathToRect,
u.rectToPath),m=System.get("utils/pattern"),b=m.getFurthestAncestorPattern,g=m.getInheritedPatternAttributes,p=m.getParentPattern,y=System.get("utils/path-shapes").validateShapeData,_=(System.get("utils/string").collapseWhitespace,
System.get("utils/style").reflectStyleElementCSSOM),x=System.get("utils/constants"),w=x.PROPERTIES,S=x.DEPRECATED_SVG_ELEMENTS,C=SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,E=SVGLength.SVG_LENGTHTYPE_PERCENTAGE,k=Object.keys,A=["x1","x2","y1","y2","gradientUnits","gradientTransform","spreadMethod","style"],T=["r","cx","cx","fx","fy","fr","gradientUnits","gradientTransform","spreadMethod","style"],L=function(e){
var t=M(e);if(null===t)return null;P(t);for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT);n=i.nextNode();)if("#comment"!==n.nodeName)if(S.includes(n.nodeName))n.remove();else if("script"!==n.nodeName&&"foreignObject"!==n.nodeName&&"title"!==n.nodeName&&"metadata"!==n.nodeName&&"switch"!==n.nodeName)if("circle"!==n.nodeName)if("rect"!==n.nodeName)if("line"!==n.nodeName)if("polyline"!==n.nodeName)if("polygon"!==n.nodeName){
"path"===n.nodeName&&n.hasAttribute("data-bx-shape")&&y(n)===!1&&n.removeAttribute("data-bx-shape");
var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=$traceurRuntime.spread(n.attributes)[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if("requiredFeatures"===u.name||"requiredExtensions"===u.name||"externalResourcesRequired"===u.name||"systemLanguage"===u.name)n.removeAttribute(u.name);else if(u.name.startsWith("on"))n.removeAttribute(u.name);else if(w.includes(u.name)){
var m=u.name;""===n.style.getPropertyValue(m)&&n.style.setProperty(m,n.getAttribute(m)),
n.removeAttribute(u.name)}}}catch(b){a=!0,s=b}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}}else n.replace(v(n));else n.replace(h(n));else n.replace(d(n));else n.replace(f(n,"shape"));else n.replace(c(n));else n.remove();else n.remove();
return R(t),j(t),O(t),V(t),D(t),G(t),I(t),document.importNode(t,!0),t},M=function(e){
var t=new DOMParser,n=t.parseFromString(e,"text/html"),i=n.querySelector("svg")||null;
return i},P=function(e){for(var t,n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT);t=n.nextNode();)if(t.nodeName.includes(":"))if(t.nodeName.startsWith("bx:")){
var i=t.nodeName.split(":")[1],r=document.createElement("bx-"+i),a=!0,s=!1,o=void 0;
try{for(var l=void 0,u=$traceurRuntime.spread(t.attributes)[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;r.setAttribute(c.name,c.value)}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}var h=!0,v=!1,f=void 0;try{for(var m=void 0,b=$traceurRuntime.spread(t.childNodes)[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){
var g=m.value;r.append(g)}}catch(p){v=!0,f=p}finally{try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}}t.replace(r)}else t.remove();else{var y=!0,_=!1,x=void 0;try{
for(var w=void 0,S=$traceurRuntime.spread(t.attributes)[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){
var C=w.value,E=C.name,k=C.value;if(E.includes(":"))if("xlink:href"===E)t.hasAttribute("href")===!1&&t.setAttribute("href",t.getAttribute("xlink:href")),
t.removeAttribute("xlink:href");else if(E.startsWith("bx:")){var A=E.split(":")[1];
t.setAttribute("data-bx-"+A,k),t.removeAttribute(E)}else t.removeAttribute(E)}}catch(T){
_=!0,x=T}finally{try{y||null==S["return"]||S["return"]()}finally{if(_)throw x}}}},R=function(e){
var t=e.querySelectorAll("linearGradient"),n=!0,i=!1,r=void 0;try{for(var a=void 0,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){
var c=a.value,d=!0,h=!1,v=void 0;try{for(var f=void 0,m=$traceurRuntime.spread(c.children)[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){
var b=f.value;"stop"!==b.localName&&c.removeChild(b)}}catch(g){h=!0,v=g}finally{try{
d||null==m["return"]||m["return"]()}finally{if(h)throw v}}if(""!==c.href.baseVal){
if(s(c)===!1){var p=o(c),y=!0,_=!1,x=void 0;try{for(var w=void 0,S=p[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){
var k=w.value;c.append(k.cloneNode())}}catch(T){_=!0,x=T}finally{try{y||null==S["return"]||S["return"]();
}finally{if(_)throw x}}}var L=!0,M=!1,P=void 0;try{for(var R=void 0,j=A[Symbol.iterator]();!(L=(R=j.next()).done);L=!0){
var O=R.value;if(c.hasAttribute(O)===!1){var V=getGradientAttribute(c,O);null!==V&&c.setAttribute(O,V);
}}}catch(D){M=!0,P=D}finally{try{L||null==j["return"]||j["return"]()}finally{if(M)throw P;
}}c.removeAttribute("href")}var G=0,I=!0,N=!1,B=void 0;try{for(var U=void 0,z=c.children[Symbol.iterator]();!(I=(U=z.next()).done);I=!0){
var H=U.value,F=H.offset.baseVal;G>F&&(F=G),F=l(F,0,1,4),G=F,H.setAttribute("offset",F);
}}catch(q){N=!0,B=q}finally{try{I||null==z["return"]||z["return"]()}finally{if(N)throw B;
}}c.gradientUnits.baseVal===C&&(c.x1.baseVal.unitType===E&&c.setAttribute("x1",c.x1.baseVal.valueInSpecifiedUnits/100),
c.y1.baseVal.unitType===E&&c.setAttribute("y1",c.y1.baseVal.valueInSpecifiedUnits/100),
c.x2.baseVal.unitType===E&&c.setAttribute("x2",c.x2.baseVal.valueInSpecifiedUnits/100),
c.y2.baseVal.unitType===E&&c.setAttribute("y2",c.y2.baseVal.valueInSpecifiedUnits/100));
}}catch(Y){i=!0,r=Y}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw r;
}}},j=function(e){var t=e.querySelectorAll("radialGradient"),n=!0,i=!1,r=void 0;try{
for(var a=void 0,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;
if(""!==c.href.baseVal){if(s(c)===!1){var d=o(c),h=!0,v=!1,f=void 0;try{for(var m=void 0,b=d[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){
var g=m.value;c.append(g.cloneNode())}}catch(p){v=!0,f=p}finally{try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}}}var y=!0,_=!1,x=void 0;try{for(var w=void 0,S=T[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){
var k=w.value;if(c.hasAttribute(k)===!1){var A=getGradientAttribute(c,k);null!==A&&c.setAttribute(k,A);
}}}catch(L){_=!0,x=L}finally{try{y||null==S["return"]||S["return"]()}finally{if(_)throw x;
}}c.removeAttribute("href")}var M=0,P=function(){var e=0,t=[],n=!0,i=!1,r=void 0;try{
for(var a=void 0,s=c.children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
"stop"===o.localName&&(t[e++]=o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return t}(),R=!0,j=!1,O=void 0;try{for(var V=void 0,D=P[Symbol.iterator]();!(R=(V=D.next()).done);R=!0){
var G=V.value,I=G.offset.baseVal;M>I&&(I=M),I=l(I,0,1,4),M=I,G.setAttribute("offset",I);
}}catch(N){j=!0,O=N}finally{try{R||null==D["return"]||D["return"]()}finally{if(j)throw O;
}}c.removeAttribute("fx"),c.removeAttribute("fy"),c.removeAttribute("fr"),c.gradientUnits.baseVal===C&&(c.r.baseVal.unitType===E&&c.setAttribute("r",c.r.baseVal.valueInSpecifiedUnits/100),
c.cx.baseVal.unitType===E&&c.setAttribute("cx",c.cx.baseVal.valueInSpecifiedUnits/100),
c.cy.baseVal.unitType===E&&c.setAttribute("cy",c.cy.baseVal.valueInSpecifiedUnits/100));
}}catch(B){i=!0,r=B}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw r;
}}},O=function(e){!function(){var t=e.querySelectorAll("pattern"),n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if(o.hasAttribute("id")===!1){for(var l=0;null!==e.querySelector("#pattern-"+l);)l+=1;
o.setAttribute("id","pattern-"+l)}}}catch(u){i=!0,r=u}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=t[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;if(m.hasAttribute("href")){var p=m.getAttribute("href"),y=e.querySelector(p);
y||m.removeAttribute("href")}}}catch(_){d=!0,h=_}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}var x=!0,w=!1,S=void 0;try{for(var k=void 0,A=t[Symbol.iterator]();!(x=(k=A.next()).done);x=!0){
var T=k.value;if(T.hasAttribute("href")&&T.children.length>0){var L=g(T),M=!0,P=!1,R=void 0;
try{for(var j=void 0,O=L[Symbol.iterator]();!(M=(j=O.next()).done);M=!0){var V=j.value,D=V.name,G=V.value;
T.setAttribute(D,G)}}catch(I){P=!0,R=I}finally{try{M||null==O["return"]||O["return"]();
}finally{if(P)throw R}}T.removeAttribute("href")}}}catch(N){w=!0,S=N}finally{try{
x||null==A["return"]||A["return"]()}finally{if(w)throw S}}var B=!0,U=!1,z=void 0;try{
for(var H=void 0,F=t[Symbol.iterator]();!(B=(H=F.next()).done);B=!0){var q=H.value;
if(q.hasAttribute("href")){var Y=q.getAttribute("href"),$=e.querySelector(Y);if($.hasAttribute("href")){
var W=b(q),X=g(q),Z=!0,K=!1,J=void 0;try{for(var Q=void 0,ee=X[Symbol.iterator]();!(Z=(Q=ee.next()).done);Z=!0){
var te=Q.value,ne=te.name,ie=te.value;W.hasAttribute(ne)===!1&&q.setAttribute(ne,ie);
}}catch(re){K=!0,J=re}finally{try{Z||null==ee["return"]||ee["return"]()}finally{if(K)throw J;
}}q.setAttribute("href","#"+W.id)}}}}catch(ae){U=!0,z=ae}finally{try{B||null==F["return"]||F["return"]();
}finally{if(U)throw z}}var se=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits"],oe=!0,le=!1,ue=void 0;
try{for(var ce=void 0,de=t[Symbol.iterator]();!(oe=(ce=de.next()).done);oe=!0){var he=ce.value;
if(he.hasAttribute("href")){var ve=!0,fe=!1,me=void 0;try{for(var be=void 0,ge=se[Symbol.iterator]();!(ve=(be=ge.next()).done);ve=!0){
var pe=be.value;he.hasAttribute(pe)&&he.removeAttribute(pe)}}catch(ye){fe=!0,me=ye;
}finally{try{ve||null==ge["return"]||ge["return"]()}finally{if(fe)throw me}}}}}catch(_e){
le=!0,ue=_e}finally{try{oe||null==de["return"]||de["return"]()}finally{if(le)throw ue;
}}var xe=!0,we=!1,Se=void 0;try{for(var Ce=void 0,Ee=t[Symbol.iterator]();!(xe=(Ce=Ee.next()).done);xe=!0){
var ke=Ce.value;ke.hasAttribute("href")===!1&&ke.patternUnits.baseVal===C&&(ke.hasAttribute("x")&&ke.x.baseVal.unitType===E&&ke.setAttribute("x",ke.x.baseVal.valueInSpecifiedUnits/100),
ke.hasAttribute("y")&&ke.y.baseVal.unitType===E&&ke.setAttribute("y",ke.y.baseVal.valueInSpecifiedUnits/100),
ke.hasAttribute("width")&&ke.width.baseVal.unitType===E&&ke.setAttribute("width",ke.width.baseVal.valueInSpecifiedUnits/100),
ke.hasAttribute("height")&&ke.height.baseVal.unitType===E&&ke.setAttribute("height",ke.height.baseVal.valueInSpecifiedUnits/100));
}}catch(Ae){we=!0,Se=Ae}finally{try{xe||null==Ee["return"]||Ee["return"]()}finally{
if(we)throw Se}}}(),function(){var n=$traceurRuntime.spread(e.querySelectorAll("pattern")),i=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),r=null,a=Symbol(),s=!0,o=!1,l=void 0;
try{for(var u=void 0,c=n[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;
d[a]=[]}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]()}finally{
if(o)throw l}}for(;r=i.nextNode();){var v=!0,f=!1,m=void 0;try{for(var b=function(){
var e=g.value,t=r.style[e];if(t&&t.startsWith("url(")){var i=t.substring(6,t.length-2),s=n.find(function(e){
return e.id===i});s&&s[a].includes(r)===!1&&s[a].push(r)}},g=void 0,y=["fill","stroke"][Symbol.iterator]();!(v=(g=y.next()).done);v=!0)b();
}catch(_){f=!0,m=_}finally{try{v||null==y["return"]||y["return"]()}finally{if(f)throw m;
}}}var x=!0,w=!1,S=void 0;try{for(var C=void 0,E=n[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value,A=k[a];if(A.length>1){var T=!0,L=!1,M=void 0;try{for(var P=void 0,R=A[Symbol.iterator]();!(T=(P=R.next()).done);T=!0){
var j=P.value,O=!0,V=!1,D=void 0;try{for(var G=void 0,I=["fill","stroke"][Symbol.iterator]();!(O=(G=I.next()).done);O=!0){
var N=G.value;if(j.style[N]==='url("#'+k.id+'")'){for(var B=k.hasAttribute("href")?p(k):k,U=void 0,z=1;;){
if(U=B.id+"-"+z,!e.querySelector("#"+U))break;z+=1}var H=k.hasAttribute("href")?k.cloneNode():t("svg:pattern");
H.setAttribute("id",U),H.setAttribute("href","#"+B.id),e.querySelector("defs").append(H),
j.style[N]="url(#"+H.id+")"}}}catch(F){V=!0,D=F}finally{try{O||null==I["return"]||I["return"]();
}finally{if(V)throw D}}}}catch(q){L=!0,M=q}finally{try{T||null==R["return"]||R["return"]();
}finally{if(L)throw M}}}}}catch(Y){w=!0,S=Y}finally{try{x||null==E["return"]||E["return"]();
}finally{if(w)throw S}}}()},V=function(e){var t=e.querySelectorAll("symbol"),n=0,i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
if(l.hasAttribute("id")===!1){for(;null!==e.querySelector("#symbol-"+n);)n+=1;l.setAttribute("id","symbol-"+n);
}}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}},D=function(e){var n=e.querySelectorAll("text"),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=l.getElementsByTagName("textPath")[0];u&&(l.innerHTML="",l.append(u)),
l.style.whiteSpace="pre",l.normalize();var c=l.querySelectorAll("tref"),d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=c[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var b=f.value,g=b.getAttribute("href"),p=g?e.querySelector(g):null;
if(p){var y=t("tspan");y.textContent=p.textContent,b.replace(p)}else b.remove()}}catch(_){
h=!0,v=_}finally{try{d||null==m["return"]||m["return"]()}finally{if(h)throw v}}for(var x=[],w=u?u:l,S=document.createTreeWalker(w,NodeFilter.SHOW_TEXT,null),C=function(e,t){
var n=k(e),i=k(t);if(n.length!==i.length)return!1;var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if(e[u]!==t[u])return!1}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return!0};S.nextNode();){for(var E=S.currentNode,A={},T=E.parentNode;T!==l;T=T.parentNode){
var L=!0,M=!1,P=void 0;try{for(var R=void 0,j=T.style[Symbol.iterator]();!(L=(R=j.next()).done);L=!0){
var O=R.value;void 0===A[O]&&(A[O]=T.style[O])}}catch(V){M=!0,P=V}finally{try{L||null==j["return"]||j["return"]();
}finally{if(M)throw P}}}var D=x[x.length-1];if(D&&C(D.style,A))D.textContent+=E.textContent;else{
var G={textContent:E.textContent,style:A};x.push(G)}}var I=document.createDocumentFragment(),N=!0,B=!1,U=void 0;
try{for(var z=void 0,H=x[Symbol.iterator]();!(N=(z=H.next()).done);N=!0){var F=z.value,q=t("svg:tspan");
q.textContent=F.textContent;var Y=!0,$=!1,W=void 0;try{for(var X=void 0,Z=k(F.style)[Symbol.iterator]();!(Y=(X=Z.next()).done);Y=!0){
var K=X.value;q.style[K]=F.style[K]}}catch(J){$=!0,W=J}finally{try{Y||null==Z["return"]||Z["return"]();
}finally{if($)throw W}}I.appendChild(q)}}catch(Q){B=!0,U=Q}finally{try{N||null==H["return"]||H["return"]();
}finally{if(B)throw U}}w.innerHTML="",w.append(I)}}catch(ee){r=!0,a=ee}finally{try{
i||null==o["return"]||o["return"]()}finally{if(r)throw a}}},G=function(e){var n,i=e.querySelectorAll("defs");
if(0===i.length)n=t("svg:defs"),e.prepend(n);else if(1===i.length)n=i[0],n.parentElement!==e&&e.prepend(n);else if(i.length>1){
n=t("svg:defs");var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,c=!0,d=!1,h=void 0;try{for(var v=void 0,f=$traceurRuntime.spread(u.children)[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;n.append(m)}}catch(b){d=!0,h=b}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}u.remove()}}catch(g){a=!0,s=g}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}e.prepend(n)}var p=!0,y=!1,_=void 0;try{for(var x=void 0,w=e.querySelectorAll("symbol")[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value;n.contains(S)===!1&&n.append(S)}}catch(C){y=!0,_=C}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}var E=!0,k=!1,A=void 0;try{for(var T=void 0,L=e.querySelectorAll("style")[Symbol.iterator]();!(E=(T=L.next()).done);E=!0){
var M=T.value;n.contains(M)===!1&&n.append(M)}}catch(P){k=!0,A=P}finally{try{E||null==L["return"]||L["return"]();
}finally{if(k)throw A}}},I=function(n){var a,s,o,l=null,u=[],c=!0,d=!1,h=void 0;try{
for(var v=void 0,f=n.querySelectorAll("style")[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
for(var m=v.value,b=[],g=0,p=m.sheet.rules.length;p>g;g+=1){var y=m.sheet.rules[g];
if(i(y)){var x=!0,w=!1,S=void 0;try{for(var C=function(){var e=E.value,t=(s=e[Symbol.iterator](),
(o=s.next()).done?void 0:o.value),n=(o=s.next()).done?void 0:o.value,i=u.find(function(e){
return e.family===t});i?(a=i.faces).push.apply(a,$traceurRuntime.spread(n)):u.push({
family:t,faces:n})},E=void 0,k=r(y.href)[Symbol.iterator]();!(x=(E=k.next()).done);x=!0)C();
}catch(A){w=!0,S=A}finally{try{x||null==k["return"]||k["return"]()}finally{if(w)throw S;
}}b.push(g)}}if(b.length>0){var T=!0,L=!1,M=void 0;try{for(var P=void 0,R=b.reverse()[Symbol.iterator]();!(T=(P=R.next()).done);T=!0){
var j=P.value;m.sheet.deleteRule(j)}}catch(O){L=!0,M=O}finally{try{T||null==R["return"]||R["return"]();
}finally{if(L)throw M}}_(m),0===m.sheet.rules.length&&(null===l?l=m:m.remove())}}
}catch(V){d=!0,h=V}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}if(u.length>0){if(null===l){l=t("svg:style");var D=n.querySelector("defs");D.insertBefore(l,D.querySelector("style"));
}var G="@import url(https://fonts.googleapis.com/css?family=";u.sort(function(e,t){
return e.family>t.family});var I=!0,N=!1,B=void 0;try{for(var U=void 0,z=u[Symbol.iterator]();!(I=(U=z.next()).done);I=!0){
var H=U.value,F=H,q=F.family,Y=F.faces;Y=e(Y),Y.sort(),H!==u[0]&&(G+="|"),G+=q.replaceAll(" ","+")+":"+Y.join(",");
}}catch($){N=!0,B=$}finally{try{I||null==z["return"]||z["return"]()}finally{if(N)throw B;
}}G+=");",l.textContent=G,l.id="bx-google-fonts"}};return{get importArtwork(){return L;
}}}),System.registerModule("utils/artwork-rasterization",[],function(){"use strict";
var e=System.get("utils/artwork-export").exportArtwork,t=System.get("utils/element"),n=t.createElement,i=t.connectElement,r=System.get("classes/google-fonts-manager")["default"],a=function(t){
var a=void 0!==arguments[1]?arguments[1]:"png",s=void 0!==arguments[2]?arguments[2]:1,o=void 0!==arguments[3]?arguments[3]:!0;
return new Promise(function(l){var u,c,d,h,v,f,m,b,g,p,y,_,x,w,S,C;return $traceurRuntime.asyncWrap(function(E){
for(;;)switch(E.state){case 0:u=i(t),c=new r(t),d=c.getUsedImportedFamilies(),h=!0,
v=!1,f=void 0,E.state=22;break;case 22:E.pushTry(8,9),E.state=11;break;case 11:m=void 0,
b=t.querySelectorAll("text")[Symbol.iterator](),E.state=7;break;case 7:E.state=(h=(m=b.next()).done)?5:3;
break;case 2:h=!0,E.state=7;break;case 3:g=m.value,E.state=4;break;case 4:return void Promise.resolve(c.replaceTextWithPaths(g)).then(E.createCallback(2),E.errback);
case 5:E.popTry(),E.state=9,E.finallyFallThrough=13;break;case 8:E.popTry(),E.maybeUncatchable(),
C=E.storedException,E.state=14;break;case 14:v=!0,f=C,E.state=9,E.finallyFallThrough=13;
break;case 9:E.popTry(),E.state=20;break;case 20:try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}E.state=18;break;case 13:u(),p=e(t,"xml"),y=n("canvas"),_=y.getContext("2d"),
x=new Blob([p],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(x),S=new Image,
S.src=w,S.addEventListener("load",function(){y.width=S.naturalWidth,y.height=S.naturalHeight,
"jpg"===a?(_.fillStyle="white",_.fillRect(0,0,S.naturalWidth,S.naturalHeight)):"png"===a&&o===!1&&(_.fillStyle="white",
_.fillRect(0,0,S.naturalWidth,S.naturalHeight)),_.drawImage(S,0,0);var e=null;"png"===a?e=y.toDataURL("image/png",s):"jpg"===a&&(e=y.toDataURL("image/jpeg",s)),
l(e),URL.revokeObjectURL(w)}),E.state=-2;break;case 18:E.state=E.finallyFallThrough;
break;default:return E.end()}},this)})},s=function(t,i,r){t=t.cloneNode(!0),t.setAttribute("width","1000000px"),
t.setAttribute("height","100px"),t.setAttribute("viewBox","0 0 1000000 100");var a=n("svg:g");
a.style.opacity="0";var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=t.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;a.append(d)}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}t.append(a);var v=$traceurRuntime.spread(t.querySelectorAll("symbol")),f={},m=1e5,b=!0,g=!1,p=void 0;
try{for(var y=void 0,_=v[Symbol.iterator]();!(b=(y=_.next()).done);b=!0){var x=y.value,w=n("svg:use");
w.setAttribute("width","100"),w.setAttribute("height","100"),w.setAttribute("x",m),
w.href.baseVal="#"+x.id,t.append(w),f[x.id]=m,m+=200}}catch(S){g=!0,p=S}finally{try{
b||null==_["return"]||_["return"]()}finally{if(g)throw p}}var C=e(t,"xml"),E=n("canvas"),k=E.getContext("2d"),A=new Blob([C],{
type:"image/svg+xml;charset=utf-8"}),T=URL.createObjectURL(A),L=new Image,M=function(e){
for(var t=0===v.length;e.timeRemaining()>20&&t===!1;){var n=v.pop(),a=f[n.id];t=0===v.length,
k.clearRect(0,0,100,100),k.drawImage(L,-a,0),i(n.id,E.toDataURL("image/png"),t)}t===!1?requestIdleCallback(M):(URL.revokeObjectURL(T),
r&&r())};L.addEventListener("load",function(){E.width=100,E.height=100,requestIdleCallback(M);
}),L.src=T},o=function(t,i,r){t=t.cloneNode(!0),t.setAttribute("width","1000000px"),
t.setAttribute("height","100px"),t.setAttribute("viewBox","0 0 1000000 100");var a=n("svg:g");
a.style.opacity="0";var s=!0,o=!1,l=void 0;try{for(var u=void 0,c=t.children[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;a.append(d)}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}t.append(a);var v={},f=1e5,m=$traceurRuntime.spread(t.querySelectorAll("pattern"));
m=m.filter(function(e){return e.hasAttribute("href")===!1});var b=!0,g=!1,p=void 0;
try{for(var y=void 0,_=m[Symbol.iterator]();!(b=(y=_.next()).done);b=!0){var x=y.value;
x.removeAttribute("patternTransform");var w=n("svg:rect");w.setAttribute("width","100"),
w.setAttribute("height","100"),w.setAttribute("x",f),w.setAttribute("fill",'url("#'+x.id+'")'),
t.append(w),v[x.id]=f,f+=200}}catch(S){g=!0,p=S}finally{try{b||null==_["return"]||_["return"]();
}finally{if(g)throw p}}var C=e(t,"xml"),E=n("canvas"),k=E.getContext("2d"),A=new Blob([C],{
type:"image/svg+xml;charset=utf-8"}),T=URL.createObjectURL(A),L=new Image,M=function(e){
for(var t=0===m.length;e.timeRemaining()>20&&t===!1;){var n=m.pop(),a=v[n.id];t=0===m.length,
k.clearRect(0,0,100,100),k.drawImage(L,-a,0),i(n.id,E.toDataURL("image/png"),t)}t===!1?requestIdleCallback(M):(URL.revokeObjectURL(T),
r&&r())};L.addEventListener("load",function(){E.width=100,E.height=100,requestIdleCallback(M);
}),L.src=T};return{get rasterizeArtwork(){return a},get getSymbolThumbnails(){return s;
},get getPatternThumbnails(){return o}}}),System.registerModule("utils/bbox",[],function(){
"use strict";var e=System.get("utils/node").closest,t=System.get("utils/rect").combineRects,n=System.get("utils/text").getRangeOffsetRelativeToElement,i={
fill:!0,stroke:!0,marker:!0,clipped:!0},r=function(r){var a,s=void 0!==arguments[1]?arguments[1]:i;
if("tspan"===r.localName){var o=document.createRange();if(o.selectNodeContents(r),
o.collapsed===!1){for(var l=e(o.startContainer,"text"),u=n(o,l,"start"),c=n(o,l,"end"),d=[],h=u;c>h;h+=1){
var v=l.getExtentOfChar(h);d.push(v)}a=t(d)}else a=new SVGRect(0,0,0,0)}else if("use"===r.localName){
var f=r.getBBox(),m=f.x,b=f.y,g=f.width,p=f.height;a=new SVGRect(r.hasAttribute("x")?r.x.baseVal.value:m,r.hasAttribute("y")?r.y.baseVal.value:b,r.hasAttribute("width")?r.width.baseVal.value:g,r.hasAttribute("height")?r.height.baseVal.value:p);
}else a=r.getBBox(s);return a},a=function(e){var t=e.getBoundingClientRect();return new SVGRect(t.left,t.top,t.width,t.height);
};return{get getUserBBox(){return r},get getClientBBox(){return a}}}),System.registerModule("utils/color",[],function(){
"use strict";var e=System.get("classes/string-scanner")["default"],t=System.get("utils/constants"),n=t.NAMED_COLORS,i=t.MATERIAL_COLORS,r=System.get("utils/math"),a=r.normalize,s=r.round,o=System.get("utils/random").getRandomNumber,l=System.get("utils/type").isNumber,u=Math,c=u.min,d=u.max,h=u.floor,v=Number,f=v.parseFloat,m=v.parseInt,b=function(){
var e=o(0,i.length-1,0);return i[e]},g=function(){return"#"+Math.floor(16777215*Math.random()).toString(16);
},p=function(e){var t=void 0!==arguments[1]?arguments[1]:"rgba",n=System.get("classes/color")["default"];
if("rgba"===t){var i=T(e,"rgba"),r=i.r,a=i.g,s=i.b,o=i.a;return new n(r,a,s,o,"rgba");
}var l=T(e,"hsla"),u=l.h,c=l.s,d=l.l,h=l.a;return new n(u,c,d,h,"hsla")},y=function(e){
try{T(e)}catch(t){return!1}return!0},_=function(e){if(e=e.toLowerCase(),"#"!==e[0])return!1;
if(4!==e.length&&7!==e.length)return!1;e=e.substring(1);var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if(!t.includes(o))return!1}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return!0},x=function(e,t,n){e/=360,t/=100,n/=100;var i=e,r=(2-t)*n,a=t*n;
return 1>=r?0===r?a=0:a/=r:2===r?a=0:a/=2-r,r/=2,i=360*i,a=100*d(0,c(1,a)),r=100*d(0,c(1,r)),
[i,a,r]},w=function(e,t,n){e/=360,t/=100,n=n/100*2,t*=1>=n?n:2-n;var i,r,a=e;return i=n+t===0?0:2*t/(n+t),
r=(n+t)/2,a=360*a,i=100*d(0,c(1,i)),r=100*d(0,c(1,r)),[a,i,r]},S=function(e,t,n){
e/=360,t/=100,n/=100;var i,r,s;if(0===t)i=r=s=n;else{var o,l,u=function(e,t,n){return 0>n&&(n+=1),
n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e};o=.5>n?n*(1+t):n+t-n*t,
l=2*n-o,i=u(l,o,e+1/3),r=u(l,o,e),s=u(l,o,e-1/3)}return i=a(255*i,0,255,0),r=a(255*r,0,255,0),
s=a(255*s,0,255,0),[i,r,s]},C=function(e,t,n){e/=255,t/=255,n/=255;var i,r,s,o=d(e,t,n),l=c(e,t,n);
if(i=r=s=(o+l)/2,o===l)i=r=0;else{var u=o-l;if(r=s>.5?u/(2-o-l):u/(o+l),o===e){var h;
h=n>t?6:0,i=(t-n)/u+h}else o===t?i=(n-e)/u+2:o===n&&(i=(e-t)/u+4)}return i=a(i/6*360,0,360,0),
r=a(100*r,0,100,1),s=a(100*s,0,100,1),[i,r,s]},E=function(e,t,n){e/=360,t/=100,n/=100;
var i=h(6*e),r=6*e-i,a=n*(1-t),s=n*(1-r*t),o=n*(1-(1-r)*t),l=0,u=0,c=0;return i%6===0?(l=n,
u=o,c=a):i%6===1?(l=s,u=n,c=a):i%6===2?(l=a,u=n,c=o):i%6===3?(l=a,u=s,c=n):i%6===4?(l=o,
u=a,c=n):i%6===5&&(l=n,u=a,c=s),l=255*l,u=255*u,c=255*c,[l,u,c]},k=function(e,t,n){
e/=255,t/=255,n/=255;var i=d(e,t,n),r=c(e,t,n),a=0,s=0,o=i,l=i-r;return s=0===i?0:l/i,
i===r?a=0:(i===e?a=(t-n)/l+(n>t?6:0):i===t?a=(n-e)/l+2:i===n&&(a=(e-t)/l+4),a/=6),
a=360*a,s=100*s,o=100*o,[a,s,o]},A=function(e,t){var n=T(e),i=L(n,t);return i},T=function(e){
var t,i,r,s,o,u=void 0!==arguments[1]?arguments[1]:"auto",c=M(e);if(7===c.length&&"rgb("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"NUM"===c[3].type&&","===c[4].text&&"NUM"===c[5].type&&")"===c[6].text)o={
r:f(c[1].text),g:f(c[3].text),b:f(c[5].text),a:1};else if(7===c.length&&"rgb("===c[0].text&&"PERCENTAGE"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&")"===c[6].text)o={
r:f(c[1].text)/100*255,g:f(c[3].text)/100*255,b:f(c[5].text)/100*255,a:1};else if(9===c.length&&"rgba("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"NUM"===c[3].type&&","===c[4].text&&"NUM"===c[5].type&&","===c[6].text&&"NUM"===c[7].type&&")"===c[8].text)o={
r:f(c[1].text),g:f(c[3].text),b:f(c[5].text),a:f(c[7].text)};else if(9===c.length&&"rgb("===c[0].text&&"PERCENTAGE"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&","===c[6].text&&"NUM"===c[7].type&&")"===c[8].text)o={
r:f(c[1].text)/100*255,g:f(c[3].text)/100*255,b:f(c[5].text)/100*255,a:f(c[7].text)
};else if(7===c.length&&"hsl("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&")"===c[6].text)o={
h:f(c[1].text),s:f(c[3].text),l:f(c[5].text),a:1};else if(9===c.length&&"hsla("===c[0].text&&"NUM"===c[1].type&&","===c[2].text&&"PERCENTAGE"===c[3].type&&","===c[4].text&&"PERCENTAGE"===c[5].type&&","===c[6].text&&"NUM"===c[7].type&&")"===c[8].text)o={
h:f(c[1].text),s:f(c[3].text),l:f(c[5].text),a:f(c[7].text)};else if("HEX"===c[0].type&&void 0===c[1]){
var d,h,v,b=c[0].text.substring(1);3===b.length?(d=b[0]+b[0],h=b[1]+b[1],v=b[2]+b[2]):(d=b[0]+b[1],
h=b[2]+b[3],v=b[4]+b[5]),o={r:m(d,16),g:m(h,16),b:m(v,16),a:1}}else n[e]&&(o={r:n[e][0],
g:n[e][1],b:n[e][2],a:1});if(!o)throw o=null,new Error('Invalid color string: "'+e+'"');
if(l(o.r)?(o.r=a(o.r,0,255,0),o.g=a(o.g,0,255,0),o.b=a(o.b,0,255,0),o.a=a(o.a,0,1,2)):l(o.h)&&(o.h=a(o.h,0,360,0),
o.s=a(o.s,0,100,1),o.l=a(o.l,0,100,1),o.a=a(o.a,0,1,2)),"rgba"===u&&l(o.h)){var g=S(o.h,o.s,o.l),p=(t=g[Symbol.iterator](),
(i=t.next()).done?void 0:i.value),y=(i=t.next()).done?void 0:i.value,_=(i=t.next()).done?void 0:i.value,x=o.a;
o={r:p,g:y,b:_,a:x}}else if("hsla"===u&&l(o.r)){var w=C(o.r,o.g,o.b),E=(r=w[Symbol.iterator](),
(s=r.next()).done?void 0:s.value),k=(s=r.next()).done?void 0:s.value,A=(s=r.next()).done?void 0:s.value,T=o.a;
o={h:E,s:k,l:A,a:T}}return o},L=function(e){var t,n,i,r,o,u,c=void 0!==arguments[1]?arguments[1]:"rgba",d=null;
if(["rgb","rgba","rgb%","rgba%","hex"].includes(c)){var h,v,f,m;if(l(e.r)?(h=e.r,
v=e.g,f=e.b,m=e.a):(t=S(e.h,e.s,e.l),n=t[Symbol.iterator](),h=(i=n.next()).done?void 0:i.value,
v=(i=n.next()).done?void 0:i.value,f=(i=n.next()).done?void 0:i.value,t,m=e.a),"rgb%"!==c&&"rgba%"!==c||(h=s(h/255*100,1),
v=s(v/255*100,1),f=s(f/255*100,1)),h=a(h,0,255,0),v=a(v,0,255,0),f=a(f,0,255,0),m=a(m,0,1,2),
"rgb"===c)d="rgb("+h+", "+v+", "+f+")";else if("rgba"===c)d="rgba("+h+", "+v+", "+f+", "+m+")";else if("rgb%"===c)d="rgb("+h+"%, "+v+"%, "+f+"%)";else if("rgba%"===c)d="rgb("+h+"%, "+v+"%, "+f+"%, "+m+")";else if("hex"===c){
var b=h.toString(16),g=v.toString(16),p=f.toString(16);1===b.length&&(b="0"+b),1===g.length&&(g="0"+g),
1===p.length&&(p="0"+p),d="#"+b+g+p}}else if("hsl"===c||"hsla"===c){var y,_,x,w;l(e.h)?(y=e.h,
_=e.s,x=e.l,w=e.a):(r=C(e.r,e.g,e.b),o=r[Symbol.iterator](),y=(u=o.next()).done?void 0:u.value,
_=(u=o.next()).done?void 0:u.value,x=(u=o.next()).done?void 0:u.value,r,w=e.a),y=a(y,0,360,0),
_=a(_,0,100,1),x=a(x,0,100,1),w=a(w,0,1,2),"hsl"===c?d="hsl("+y+", "+_+"%, "+x+"%)":"hsla"===c&&(d="hsla("+y+", "+_+"%, "+x+"%, "+w+")");
}return d},M=function(t){for(var n=[],i=new e(t.toLowerCase()),r=function(){var e=i.read();
!function(){if("r"===e||"h"===e){var t=e;if(e+i.peek(3)==="rgb("?t+=i.read(3):e+i.peek(4)==="rgba("?t+=i.read(4):e+i.peek(3)==="hsl("?t+=i.read(3):e+i.peek(4)==="hsla("&&(t+=i.read(4)),
t!==e)return void n.push({type:"FUNCTION",text:t})}if("#"===e){if(_(e+i.peek(6))){
var r=e+i.read(6);return void n.push({type:"HEX",text:r})}if(_(e+i.peek(3)))return t=e+i.read(3),
void n.push({type:"HEX",text:t})}if(["0","1","2","3","4","5","6","7","8","9",".","-"].includes(e)){
for(var a=e;;){if(!["0","1","2","3","4","5","6","7","8","9","."].includes(i.peek()))break;
a+=i.read()}return void("%"===i.peek()?(a+=i.read(),n.push({type:"PERCENTAGE",text:a
})):n.push({type:"NUM",text:a}))}/\u0009|\u000a|\u000c|\u000d|\u0020/.test(e)||n.push({
type:"CHAR",text:e})}()};null!==i.peek();)r();return n};return{get getRandomMaterialColor(){
return b},get getRandomHexColorString(){return g},get parseColor(){return p},get isValidColorString(){
return y},get isHexColorString(){return _},get hsvToHsl(){return x},get hslToHsv(){
return w},get hslToRgb(){return S},get rgbToHsl(){return C},get hsvToRgb(){return E;
},get rgbToHsv(){return k},get formatColorString(){return A},get stringToColor(){
return T},get colorToString(){return L}}}),System.registerModule("utils/constants",[],function(){
"use strict";var e="http://www.w3.org/1999/xhtml",t="http://www.w3.org/2000/svg",n="http://www.w3.org/1998/Math/MathML",i="http://www.w3.org/1999/xlink",r="http://www.w3.org/2000/xmlns/",a="http://www.boxy-svg.com/bx",s="AIzaSyBZd8UahlnRn53EWC7snRmOAuuktqBaP6k",o=["path","circle","ellipse","line","rect","polygon","polyline","image","text","solidColor","linearGradient","radialGradient","pattern","mesh","meshRow","meshPatch","hatch","hatchPath","stop","filter","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","title","desc","metadata","svg","defs","g","a","symbol","marker","switch","use","view","tspan","textPath","clipPath","mask","script","style","foreignObject"],l=["font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","altGlyph","altGlyphDef","altGlyphItem","glyph","glyphRef","missing-glyph","hkern","vkern","set","animate","animateColor","animateMotion","animateTransform","mpath","cursor","tref","color-profile"],u=["solidColor","linearGradient","radialGradient","mesh","pattern","hatch"],c=["a","defs","g","marker","mask","pattern","svg","switch","symbol"],d=["circle","ellipse","image","line","path","polygon","polyline","rect","text","use"],h=["a","g","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","foreignObject"],v=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"],f=["circle","ellipse","line","path","polygon","polyline","rect"],m=["text","textPath","tspan"],b=["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-rendering","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"],g=["direction","dominant-baseline","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","letter-spacing","text-anchor","text-decoration","text-rendering","unicode-bidi","word-spacing","writing-mode"],p=["glyph-orientation-horizontal","glyph-orientation-vertical","kerning"],y=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],_={
aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],
azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],
blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],
cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],
cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],
darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],
darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],
darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],
darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],
darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],
deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],
firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],
gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],
gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],
khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],
lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],
lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],
lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],
lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],
lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],
linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],
mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],
mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],
mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],
moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],
olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],
orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],
palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],
pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],
red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],
salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],
sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],
slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],
steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],
turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],
whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},x=["#f44336","#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#ff8a80","#ff5252","#ff1744","#d50000","#e91e63","#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#ff80ab","#ff4081","#f50057","#c51162","#9c27b0","#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#6a1b9a","#4a148c","#ea80fc","#e040fb","#d500f9","#aa00ff","#673ab7","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#512da8","#4527a0","#311b92","#b388ff","#7c4dff","#651fff","#6200ea","#3f51b5","#e8eaf6","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#8c9eff","#536dfe","#3d5afe","#304ffe","#2196f3","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#82b1ff","#448aff","#2979ff","#2962ff","#03a9f4","#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#80d8ff","#40c4ff","#00b0ff","#0091ea","#00bcd4","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#84ffff","#18ffff","#00e5ff","#00b8d4","#009688","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#a7ffeb","#64ffda","#1de9b6","#00bfa5","#4caf50","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#b9f6ca","#69f0ae","#00e676","#00c853","#8bc34a","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#ccff90","#b2ff59","#76ff03","#64dd17","#cddc39","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#f4ff81","#eeff41","#c6ff00","#aeea00","#ffeb3b","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#ffff8d","#ffff00","#ffea00"," #ffd600","#ffc107","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107"," #ffb300","#ffa000"," #ff8f00","#ff6f00","#ffe57f","#ffd740","#ffc400","#ffab00","#ff9800","#fff3e0"," #ffe0b2","#ffcc80"," #ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#ffd180"," #ffab40"," #ff9100"," #ff6d00","#ff5722","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722"," #f4511e"," #e64a19"," #d84315","#bf360c","#ff9e80","#ff6e40","#ff3d00","#dd2c00","#795548","#efebe9"," #d7ccc8"," #bcaaa4"," #a1887f","#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723","#9e9e9e"," #fafafa"," #f5f5f5"," #eeeeee","#e0e0e0","#bdbdbd","#9e9e9e","#757575","#616161","#424242"," #212121"," #607d8b"," #eceff1"," #cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#455a64"," #37474f"," #263238"," #000000"," #ffffff"],w={
100:["100","200","300","400","500","600","700","800","900"],200:["200","100","300","400","500","600","700","800","900"],
300:["300","200","100","400","500","600","700","800","900"],400:["400","500","300","200","100","600","700","800","900"],
500:["500","400","300","200","100","600","700","800","900"],600:["600","700","800","900","500","400","300","200","100"],
700:["700","800","900","600","500","400","300","200","100"],800:["800","900","700","600","500","400","300","200","100"],
900:["900","800","700","600","500","400","300","200","100"]};return{get HTML_NAMESPACE(){
return e},get SVG_NAMESPACE(){return t},get MATHML_NAMESPACE(){return n},get XLINK_NAMESPACE(){
return i},get XMLNS_NAMESPACE(){return r},get BX_NAMESPACE(){return a},get GOOGLE_FONTS_API_KEY(){
return s},get SVG_ELEMENTS(){return o},get DEPRECATED_SVG_ELEMENTS(){return l},get PAINT_SERVER_ELEMENTS(){
return u},get CONTAINER_ELEMENTS(){return c},get GRAPHICS_ELEMENTS(){return d},get TRANSFORMABLE_ELEMENTS(){
return h},get FILTER_ELEMENTS(){return v},get SHAPE_ELEMENTS(){return f},get TEXT_CONTENT_ELEMENTS(){
return m},get PROPERTIES(){return b},get TEXT_PROPERTIES(){return g},get DEPRECATED_PROPERTIES(){
return p},get PROPERTIES_ACCEPTING_URL_VALUES(){return y},get NAMED_COLORS(){return _;
},get MATERIAL_COLORS(){return x},get FONT_WEIGHTS_BY_MATCHING_ORDER(){return w}};
}),System.registerModule("utils/curves-general",[],function(){"use strict";var e=System.get("utils/geometry").degToRad,t=Math,n=t.abs,i=t.sin,r=t.asin,a=t.cos,s=t.acos,o=t.tan,l=t.pow,u=t.sqrt,c=t.PI,d=function(e,t,n,i,r){
var a=(t.x-e.x)*r+e.x,s=(t.y-e.y)*r+e.y,o=(n.x-t.x)*r+t.x,l=(n.y-t.y)*r+t.y,u=(i.x-n.x)*r+n.x,c=(i.y-n.y)*r+n.y,d=(o-a)*r+a,h=(l-s)*r+s,v=(u-o)*r+o,f=(c-l)*r+l,m=(v-d)*r+d,b=(f-h)*r+h,g=[new SVGPoint(e.x,e.y),new SVGPoint(a,s),new SVGPoint(d,h),new SVGPoint(m,b)],p=[new SVGPoint(m,b),new SVGPoint(v,f),new SVGPoint(u,c),new SVGPoint(i.x,i.y)];
return[g,p]},h=function(e,t,i,r,o){var d=function(e){return n(e)<1e-11?0:e>0?1:-1;
},h=function(e,t,n,i){var r=(n-e)*(n-e),a=(i-t)*(i-t);return u(r+a)},v=function(e,t,n,i,r){
var a=-e+3*t-3*n+i,s=3*e-6*t+3*n,o=-3*e+3*t,l=-r+e,u=[3,-1];f(u,s/a,o/a,l/a);var c=[],d=!0,h=!1,v=void 0;
try{for(var m=void 0,b=u[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var g=m.value;
g>=0&&1>=g&&c.push(g)}}catch(p){h=!0,v=p}finally{try{d||null==b["return"]||b["return"]();
}finally{if(h)throw v}}return c},f=function(e,t,i,r){var o=(l(t,2)-3*i)/9,h=(2*l(t,3)-9*t*i+27*r)/54;
if(l(h,2)<l(o,3)){var v=s(h/u(l(o,3)))/3;return e.splice(0,0,-2*u(o)*a(v)-t/3),e.splice(1,0,-2*u(o)*a(v+4*c/3)-t/3),
e.splice(2,0,-2*u(o)*a(v-4*c/3)-t/3),3}var f=-d(h)*l(n(h)+u(l(h,2)-l(o,3)),1/3),m=0==d(f)?0:o/f;
return e.splice(0,0,f+m-t/3),e.splice(1,0,-.5*(f+m)-t/3),e.splice(2,0,.5*u(3)*n(f-m)),
e[2]+1===1?2:1},m=$traceurRuntime.spread(v(t.x,i.x,r.x,o.x,e.x),v(t.y,i.y,r.y,o.y,e.y));
if(0===m.length)return-1;var b=-1,g=3,p=!0,y=!1,_=void 0;try{for(var x=void 0,w=m[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value,C=l(1-S,3)*t.x+3*l(1-S,2)*S*i.x+3*(1-S)*l(S,2)*r.x+l(S,3)*o.x,E=l(1-S,3)*t.y+3*l(1-S,2)*S*i.y+3*(1-S)*l(S,2)*r.y+l(S,3)*o.y,k=h(e.x,e.y,C,E);
g>k&&(b=S,g=k)}}catch(A){y=!0,_=A}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}return b},v=function(t,s,l,d,h,f,m,b,g,p){var y,_,x,w,S=[],C=e(m),E=function(e,t,n){
var r=e*a(n)-t*i(n),s=e*i(n)+t*a(n);return{x:r,y:s}};if(p)y=p[0],_=p[1],x=p[2],w=p[3];else{
var k=E(t,s,-C);t=k.x,s=k.y;var A=E(l,d,-C);l=A.x,d=A.y;var T=(t-l)/2,L=(s-d)/2,M=T*T/(h*h)+L*L/(f*f);
M>1&&(M=u(M),h=M*h,f=M*f);var P;P=b===g?-1:1;var R=h*h,j=f*f,O=R*j-R*L*L-j*T*T,V=R*L*L+j*T*T,D=P*u(n(O/V));
x=D*h*L/f+(t+l)/2,w=D*-f*T/h+(s+d)/2,y=r(((s-w)/f).toFixed(9)),_=r(((d-w)/f).toFixed(9)),
x>t&&(y=c-y),x>l&&(_=c-_),0>y&&(y=2*c+y),0>_&&(_=2*c+_),g&&y>_&&(y-=2*c),!g&&_>y&&(_-=2*c);
}var G=_-y;if(n(G)>120*c/180){var I=_,N=l,B=d;_=g&&_>y?y+120*c/180*1:y+120*c/180*-1,
l=x+h*a(_),d=w+f*i(_),S=v(l,d,N,B,h,f,m,0,g,[_,I,x,w])}G=_-y;var U=a(y),z=i(y),H=a(_),F=i(_),q=o(G/4),Y=4/3*h*q,$=4/3*f*q,W=[t,s],X=[t+Y*z,s-$*U],Z=[l+Y*F,d-$*H],K=[l,d];
if(X[0]=2*W[0]-X[0],X[1]=2*W[1]-X[1],p)return[X,Z,K].concat(S);S=[X,Z,K].concat(S).join().split(",");
var J=[],Q=[];return S.forEach(function(e,t){t%2?Q.push(E(S[t-1],S[t],C).y):Q.push(E(S[t],S[t+1],C).x),
6===Q.length&&(J.push(Q),Q=[])}),J},f=function(e){var t=void 0!==arguments[1]?arguments[1]:1,n=0,i=0;
if(e.length-1>2)for(var r=2;r<e.length;r+=1){var a=getPerpendicularDistance(e[r],e[1],e[e.length-1]);
a>i&&(n=r,i=a)}var s;if(i>t){var o=f(e.slice(1,n),t),l=f(e.slice(n),t);s=o.concat(l);
}else s=e;return s};return{get splitCurve(){return d},get getCubicCurveTParam(){return h;
},get arcToCubicCurves(){return v},get getRamerDouglasPeuckerPoints(){return f}}}),
System.registerModule("utils/curves-schneider",[],function(){"use strict";var e=System.get("classes/vector")["default"],t=System.get("utils/geometry").getDistanceBetweenPoints,n=System.get("utils/vector"),i=n.subtractVectors,r=n.sumVectors,a=n.vectorsDotProduct,s=Math,o=s.abs,l=s.floor,u=s.max,c=function(t,n){
var r=i(new e(t[1]),new e(t[0])),a=i(new e(t[t.length-3]),new e(t[t.length-2]));r=r.normalize(),
a=a.normalize();var s=d(t,0,t.length-1,r,a,n);return s},d=function(n,a,s,o,l,c){var m,b;
if(s-a===1){var p=n[a],y=n[s],_=t(p,y)/3,x=new e(p),w=new e(y),S=r(x,o.scale(_)),C=r(w,l.scale(_)),E=[p,new SVGPoint(S.x,S.y),new SVGPoint(C.x,C.y),y];
return[E]}for(var k,A=v(n,a,s),T=u(c,c*c),L=0;4>=L;L+=1){var M=h(n,a,s,A,o,l),P=g(n,a,s,M,A),R=(m=P[Symbol.iterator](),
(b=m.next()).done?void 0:b.value),j=(b=m.next()).done?void 0:b.value;if(c>R)return[M];
if(k=j,R>=T)break;f(n,a,s,A,M),T=R}var O=i(new e(n[k-1]),new e(n[k])),V=i(new e(n[k]),new e(n[k+1])),D=r(O,V).multiply(.5).normalize(),G=d(n,a,k,o,D,c),I=d(n,k,s,D.multiply(-1),l,c),N=G.concat(I);
return N},h=function(n,s,l,u,c,d){for(var h=n[s],v=n[l],f=new e(h),m=new e(v),b=[[0,0],[0,0]],g=[0,0],p=l-s+1,y=0;p>y;y+=1){
var _=u[y],x=1-_,w=3*_*x,S=x*x*x,C=w*x,E=w*_,k=_*_*_,A=c.scale(C),T=d.scale(E);b[0][0]+=a(A,A),
b[0][1]+=a(A,T),b[1][0]=b[0][1],b[1][1]+=a(T,T);var L=i(new e(n[s+y]),f.multiply(S+C));
L=i(L,m.multiply(E+k)),g[0]+=a(A,L),g[1]+=a(T,L)}var M,P,R=b[0][0]*b[1][1]-b[1][0]*b[0][1],j=1e-6;
if(o(R)>j){var O=b[0][0]*g[1]-b[1][0]*g[0],V=g[0]*b[1][1]-g[1]*b[0][1];M=V/R,P=O/R;
}else{var D=b[0][0]+b[0][1],G=b[1][0]+b[1][1];M=P=o(D)>j?g[0]/D:o(G)>j?g[1]/G:0}var I=t(v,h);
j*=I,(j>M||j>P)&&(M=P=I/3);var N=r(f,c.scale(M)),B=r(m,d.scale(P)),U=[h,new SVGPoint(N.x,N.y),new SVGPoint(B.x,B.y),v];
return U},v=function(e,n,i){for(var r=[0],a=n+1;i>=a;a+=1)r[a-n]=r[a-n-1]+t(e[a],e[a-1]);
for(var s=1,o=i-n;o>=s;s+=1)r[s]/=r[i-n];return r},f=function(e,t,n,i,r){for(var a=[],s=t;n>=s;s+=1)a[s-t]=m(r,e[s],i[s-t]);
return a},m=function(t,n,r){for(var s=[],l=[],u=0;2>=u;u+=1){var c=i(new e(t[u+1]),new e(t[u]));
s[u]=c.multiply(3)}for(var d=0;1>=d;d++){var h=i(s[d+1],s[d]);l[d]=h.multiply(2)}
var v=b(3,t,r),f=b(2,s,r),m=b(1,l,r),g=i(v,new e(n)),p=a(f,f)+a(g,m);return o(p)<1e-6?r:r-a(g,f)/p;
},b=function(t,n,i){for(var a=function(){var t=0,i=[],r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;i[t++]=new e(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return i}(),s=1;t>=s;s+=1)for(var o=0;t-s>=o;o+=1)a[o]=r(a[o].multiply(1-i),a[o+1].multiply(i));
return a[0]},g=function(t,n,r,a,s){for(var o=l((r-n+1)/2),u=0,c=n+1;r>c;c++){var d=i(b(3,a,s[c-n]),new e(t[c])),h=d.length;
h>=u&&(u=h,o=c)}return[u,o]};return{get getSchneiderCurves(){return c}}}),System.registerModule("utils/element",[],function(){
"use strict";var e=System.get("utils/constants"),t=e.SVG_NAMESPACE,n=e.TRANSFORMABLE_ELEMENTS,i=e.CONTAINER_ELEMENTS,r=e.GRAPHICS_ELEMENTS,a=System.get("utils/rect"),s=(a.transformRect,
a.rectIntersectsRect),o=Number.parseInt,l=function(e){var n,i,r,a,s=void 0!==arguments[1]?arguments[1]:null,o=e.split(":"),l=null;
if(1===o.length){var u=(n=o[Symbol.iterator](),(i=n.next()).done?void 0:i.value);l=document.createElement(u,s);
}else if(2===o.length){var c=o,d=(r=c[Symbol.iterator](),(a=r.next()).done?void 0:a.value),h=(a=r.next()).done?void 0:a.value;
"svg"===d&&(l=document.createElementNS(t,h,s))}return l},u=function(e,t){var n=void 0!==arguments[2]?arguments[2]:null;
if(null===n){var i=t;return document.registerElement(e,i)}var r=t,a=n;return document.registerElement(r,{
"extends":e,prototype:a.prototype})},c=function(e){for(var t in e.parentElement.children){
var n=e.parentElement.children[t];if(n===e)return o(t)}},d=function(e,t){if(e.localName!==t.localName)return!1;
if(e.namespaceURI!==t.namespaceURI)return!1;if(e.textContent!==t.textContent)return!1;
if(e.children.length!==t.children.length)return!1;if(e.attributes.length!==t.attributes.length)return!1;
var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e.attributes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if("style"===o.name){if(e.style.cssText!==t.style.cssText)return!1}else if(e.getAttribute(o.name)!==t.getAttribute(o.name))return!1;
}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}for(var u=0;u<e.children.length;u+=1)if(d(e.children[u],t.children[u])===!1)return!1;
return!0},h=function(e){return!!n.includes(e.localName)},v=function(e){return!!r.includes(e.localName);
},f=function(e){return!!i.includes(e.localName)},m=function(e){for(var t=e;t;t=t.parentNode||t.host)if(t===document)return!0;
return!1},b=function(e){var t=[],n=!0,i=!1,a=void 0;try{for(var s=void 0,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){
var l=s.value;if("g"===l.localName||"a"===l.localName){var u=$traceurRuntime.spread(l.children);
t=$traceurRuntime.spread(t,b(u))}else r.includes(l.localName)&&t.push(l)}}catch(c){
i=!0,a=c}finally{try{n||null==o["return"]||o["return"]()}finally{if(i)throw a}}return t;
},g=function(e){var t=[],n=["path","text","rect","circle","ellipse","line","polyline","polygon","use"],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=l.localName;
n.includes(u)?t.push(l):"g"!==u&&"a"!==u||(t=$traceurRuntime.spread(t,g(l.children)));
}}catch(c){r=!0,a=c}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}return t},p=function(e,t){var n=y(e,t);if(n)for(;!i.includes(n.localName);)n=n.parentNode;
return n},y=function(e,t){for(;e=e.parentNode;)if(e.contains&&e.contains(t))return e;
return null},_=function(e){var t=void 0!==arguments[1]?arguments[1]:document.documentElement,n=[];
if(e!==t)for(;e.parentElement&&e.parentElement!==t;)e=e.parentElement,i.includes(e.localName)&&n.unshift(e);
return n},x=function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;t.push(o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}return t.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t));
}),t},w=function(e){var t=[];e=x(e);var n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;if(o===e[0])t.push([o]);else{var l=!1,u=!0,c=!1,d=void 0;try{for(var h=void 0,v=t[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;o.parentElement===f[0].parentElement&&(f.push(o),l=!0)}}catch(m){c=!0,
d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d}}l===!1&&t.push([o]);
}}}catch(b){i=!0,r=b}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r;
}}return t},S=function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){
var o=a.value;t.push(o)}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}for(;t.length>1;){var u=t[0].compareDocumentPosition(t[1]);
4===u||20===u?t.remove(t[0]):t.remove(t[1])}return t[0]},C=function(e){var t=System.get("./utils/bbox").getClientBBox,n=(e.ownerSVGElement.getScreenCTM().inverse(),
t(e)),i=e.ownerSVGElement.getIntersectionList(n,e.ownerSVGElement);return i=Array.from(i),
i.remove(e),i},E=function(e,t){if(!e.transform||!t.transform)return!1;var n=System.get("./utils/bbox").getClientBBox,i=(e.getScreenCTM().inverse(),
n(e)),r=(t.getScreenCTM().inverse(),n(t));return s(i,r)},k=function(e){var t=[],n=[],i=!0,r=!1,a=void 0;
try{for(var s=function(){var i=o.value,r=[],a=function(t){var i=!0,s=!1,o=void 0;try{
for(var l=void 0,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=!r.includes(c)&&!n.includes(c);
c!==t&&d&&E(c,t)&&(r.push(c),n.push(c),a(c))}}catch(h){s=!0,o=h}finally{try{i||null==u["return"]||u["return"]();
}finally{if(s)throw o}}};a(i),r.length>0&&t.push(x(r))},o=void 0,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)s();
}catch(u){r=!0,a=u}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw a;
}}var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=e[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value;n.includes(m)||t.push([m])}}catch(b){d=!0,h=b}finally{try{c||null==f["return"]||f["return"]();
}finally{if(d)throw h}}return t},A=function(e){if(m(e))return function(){};for(var t=null,n=e;n;n=n.parentNode||n.host)t=n;
var i="\n      position: fixed;\n      top: -200px;\n      left: -200px;\n      width: 100px;\n      height: 100px;\n      opacity: 0;\n      display: block;\n    ",r=document.createElement("div");
r.setAttribute("style",i),r.createShadowRoot(),r.shadowRoot.append(t),document.body.append(r);
var a=function(){t.remove(),r.remove()};return a},T=function(e,t){t.parentElement.insertBefore(e,t.nextSibling);
},L=function(e,t){var n=void 0!==arguments[2]?arguments[2]:[],i=!0,r=!1,a=void 0;try{
for(var s=void 0,o=e.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=l.name,c=l.value;
n.includes(u)===!1&&t.setAttribute(u,c)}}catch(d){r=!0,a=d}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var h=!0,v=!1,f=void 0;try{for(var m=void 0,b=t.attributes[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){
var g=m.value.name;e.hasAttribute(g)===!1&&n.includes(g)===!1&&t.removeAttribute(g);
}}catch(p){v=!0,f=p}finally{try{h||null==b["return"]||b["return"]()}finally{if(v)throw f;
}}};return{get createElement(){return l},get registerElement(){return u},get getElementIndex(){
return c},get compareElements(){return d},get isTransformableElement(){return h},
get isGraphicsElement(){return v},get isContainerElement(){return f},get isConnectedElement(){
return m},get queryGraphicsElements(){return b},get queryClippingElements(){return g;
},get getCommonContainer(){return p},get getCommonAncestor(){return y},get getContainers(){
return _},get sortByDomPosition(){return x},get sortBySiblingElements(){return w},
get getTopStackedElement(){return S},get getIntersectingElements(){return C},get isElementIntersectingElement(){
return E},get sortByIntersectingElements(){return k},get connectElement(){return A;
},get insertElementAfter(){return T},get mirrorAttributes(){return L}}}),System.registerModule("utils/event",[],function(){
"use strict";var e=Math,t=e.sqrt,n=e.pow,i=function(e,i){var r=void 0!==arguments[2]?arguments[2]:3,a=t(n(i.clientX-e.clientX,2)+n(i.clientY-e.clientY,2));
return!(r>a&&i.timeStamp-e.timeStamp<50)};return{get isMouseMoveIntentional(){return i;
}}}),System.registerModule("utils/font",[],function(){"use strict";var e=System.get("utils/constants").FONT_WEIGHTS_BY_MATCHING_ORDER,t=System.get("libs/opentype")["default"],n=Math,i=n.tan,r=n.PI,a=function(e){
switch(e){case"normal":return"400";case"bold":return"700";default:return e}},s=function(e){
var t=a(e);switch(t){case"100":return"Thin";case"200":return"Extra-Light";case"300":
return"Light";case"400":return"Normal";case"500":return"Medium";case"600":return"Semi-Bold";
case"700":return"Bold";case"800":return"Extra-Bold";case"900":return"Ultra-Bold";default:
return"Normal"}},o=function(t,n){var i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e[t][Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;if(n.includes(l))return l}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}},l=function(e){switch(e){case"regular":return"400";case"bold":
return"700";case"italic":return"400italic";case"bolditalic":return"700italic";case"r":
return"400";case"b":return"700";case"i":return"400italic";default:return e}},u=function(t){
var n=void 0!==arguments[1]?arguments[1]:"400",i=void 0!==arguments[2]?arguments[2]:"normal",r=function(e,t){
var n=e.filter(function(e){return"normal"===t?e.endsWith("italic")===!1:"italic"===t||"oblique"===t?e.endsWith("italic")===!0:void 0;
});return 0===n.length&&(n=$traceurRuntime.spread(e)),n},a=function(t,n){var i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=e[n][Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=t[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var f=h.value;
if(f.substring(0,3)===l)return f}}catch(m){c=!0,d=m}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}}}catch(b){r=!0,a=b}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return t[0]},s=r(t,i),o=a(s,n);return o},c=function(e){if(e.type===CSSRule.IMPORT_RULE&&e.href){
var t=new URL(e.href);if("fonts.googleapis.com"===t.host)return!0}return!1},d=function(e){
var t,n;e=new URL(e);var i=e.search.split("?family=")[1].split("&")[0],r=i.split("|"),a=[],s=!0,o=!1,u=void 0;
try{for(var c=void 0,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,v=h.split(":"),f=(t=v[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),m=(n=t.next()).done?void 0:n.value,b=f.replaceAll("+"," "),g=void 0;
g=m?m.split(",").map(function(e){return l(e)}).sort():["400"],a.push([b,g])}}catch(p){
o=!0,u=p}finally{try{s||null==d["return"]||d["return"]()}finally{if(o)throw u}}return a;
},h=function(e){return new Promise(function(n){t.load(e,function(e,t){return n(e?null:t);
})})},v=function(e){var t;if("M"===e.type||"L"===e.type){var n=e,i=n.type,r=n.x,a=n.y;
t={type:i,x:r,y:a}}else if("Q"===e.type){var s=e,o=s.type,l=s.x1,u=s.y1,c=s.x,d=s.y;
t={type:o,x1:l,y1:u,x:c,y:d}}else if("C"===e.type){var h=e,v=h.type,f=h.x1,m=h.y1,b=h.x2,g=h.y2,p=h.x,y=h.y;
t={type:v,x1:f,y1:m,x2:b,y2:g,x:p,y:y}}else"Z"===e.type&&(t={type:"Z"});return t},f=function(e,n){
var a=r*n/180,s=new SVGMatrix([1,0,i(a),1,0,0]),o=[],l=!0,u=!1,c=void 0;try{for(var d=void 0,h=e.commands[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value;if("M"===v.type){var f=new SVGPoint(v.x,v.y).matrixTransform(s);o.push({
type:"M",x:f.x,y:f.y})}else if("L"===v.type){var m=new SVGPoint(v.x,v.y).matrixTransform(s);
o.push({type:"L",x:m.x,y:m.y})}else if("Q"===v.type){var b=new SVGPoint(v.x1,v.y1).matrixTransform(s),g=new SVGPoint(v.x,v.y).matrixTransform(s);
o.push({type:"Q",x1:b.x,y1:b.y,x:g.x,y:g.y})}else if("C"===v.type){var p=(new SVGPoint(v.x1,v.y1).matrixTransform(s),
new SVGPoint(v.x2,v.y2).matrixTransform(s),new SVGPoint(v.x,v.y).matrixTransform(s));
o.push({type:"C",x1:controlPoint1.x,y1:controlPoint1.y,x2:controlPoint2.x,y2:controlPoint2.y,
x:p.x,y:p.y})}else"Z"===v.type&&o.push({type:"Z"})}}catch(y){u=!0,c=y}finally{try{
l||null==h["return"]||h["return"]()}finally{if(u)throw c}}var _=new t.Path;return _.commands=o,
_.fill=e.fill,_.stroke=e.stroke,_.strokeWidth=e.strokeWidth,_},m=function(e,n,i,r){
var a=[],s=!0,o=!1,l=void 0;try{for(var u=void 0,c=e.commands[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){
var d=u.value;a.push(v(d))}}catch(h){o=!0,l=h}finally{try{s||null==c["return"]||c["return"]();
}finally{if(o)throw l}}a.push({type:"M",x:0,y:r}),a.push({type:"L",x:n,y:r}),a.push({
type:"L",x:n,y:r-i}),a.push({type:"L",x:0,y:r-i}),a.push({type:"Z"});var f=new t.Path;
return f.commands=a,f.fill=e.fill,f.stroke=e.stroke,f.strokeWidth=e.strokeWidth,f;
},b=function(e,n){for(var i=new t.Path,r=0;r<e.commands.length;r+=1){var a=e.commands[r];
"M"===a.type?i.moveTo(a.x*n,-a.y*n):"L"===a.type?i.lineTo(a.x*n,-a.y*n):"Q"===a.type?i.quadraticCurveTo(a.x1*n,-a.y1*n,a.x*n,-a.y*n):"C"===a.type?i.curveTo(a.x1*n,-a.y1*n,a.x2*n,-a.y2*n,a.x*n,-a.y*n):"Z"===a.type&&i.closePath();
}return i},g=function(e,t,n,i,r,a){var s=e.path;if(r&&(s=f(s,14)),i){var o=t.ascender/20;
i.includes("underline")&&(s=m(s,e.advanceWidth,o,t.descender/3)),i.includes("overline")&&(s=m(s,e.advanceWidth,o,t.ascender-o)),
i.includes("line-through")&&(s=m(s,e.advanceWidth,o,(t.ascender+t.descender)/2))}
return s=b(s,1/t.unitsPerEm*n)};return{get normalizeFontWeight(){return a},get formatFontWeightForDisplay(){
return s},get matchFontWeight(){return o},get normalizeGoogleFontFace(){return l},
get matchGoogleFontFace(){return u},get isGoogleFontsImportRule(){return c},get parseGoogleFontsURL(){
return d},get getOpenTypeFont(){return h},get getOpenTypeGlyphPath(){return g}}}),
System.registerModule("utils/geometry",[],function(){"use strict";var e=System.get("classes/vector")["default"],t=System.get("utils/math").round,n=System.get("utils/vector"),i=n.sumVectors,r=n.vectorsDotProduct,a=Math,s=a.sin,o=a.cos,l=a.acos,u=a.atan2,c=a.abs,d=a.sqrt,h=a.pow,v=a.PI,f=Number.isNaN,m=function(e){
var t=e*(180/v);return t},b=function(e){var t=v*e/180;return t},g=function(e,n){var i=void 0!==arguments[2]?arguments[2]:null;
return null!==i?t(e.x,i)===t(n.x,i)&&t(e.y,i)===t(n.y,i):e.x===n.x&&e.y===n.y},p=function(t,n,i){
var a=void 0!==arguments[3]?arguments[3]:0;if(0===a){var s=(t.x*(n.y-i.y)+n.x*(i.y-t.y)+i.x*(t.y-n.y))/2;
return 0===s}var o=new e(t,n),u=new e(n,i),c=r(o,u),d=l(c/(o.length*u.length));if(f(d))return!0;
var h=m(d);return a>h},y=function(e,t){var n=t.x-e.x;n*=n;var i=t.y-e.y;i*=i;var r=d(n+i);
return r},_=function(e,t){var n=(e.x+t.x)/2,i=(e.y+t.y)/2;return new SVGPoint(n,i);
},x=function(t,n,a){var s,o=void 0!==arguments[3]?arguments[3]:!0,l=new SVGPoint(0,0),u=new SVGPoint(t.x,t.y),c=new SVGPoint(n.x,n.y),d=a,h=new e(l,u),v=new e(u,c),f=new e(u,d),m=r(f,v),b=r(v,v);
s=0!==b?m/b:0,o===!1&&(0>s?s=0:s>1&&(s=1));var g=i(h,v.multiply(s)),p=new SVGPoint(g.x,g.y);
return[p,s]},w=function(e,t){var n=void 0!==arguments[2]?arguments[2]:.5,i=t.x-e.x,r=t.y-e.y,a=new SVGPoint(e.x+n*i,e.y+n*r);
return a},S=function(t,n){for(var i=void 0!==arguments[2]?arguments[2]:22.5,r=new SVGPoint(t.x,t.y-1e3),a=E(t,r,n),l=[],u=-180;180>=u;u+=i)l.push(u);
var d=1/0,h=!0,v=!1,f=void 0;try{for(var m=void 0,g=l[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){
var p=m.value,_=p-a;c(_)<c(d)&&(d=_)}}catch(x){v=!0,f=x}finally{try{h||null==g["return"]||g["return"]();
}finally{if(v)throw f}}a+=d;var w=b(a-90),S=y(t,n),C=new e(o(w),s(w));C.length=S;var k=new SVGPoint(t.x+C.x,t.y+C.y);
return[k,a]},C=function(t,n){var i=void 0!==arguments[2]?arguments[2]:90,r=new SVGPoint(t.x,t.y-1e3),a=E(t,r,n),l=i-a;
a+=l;var u=b(a-90),c=y(t,n),d=new e(o(u),s(u));d.length=c;var h=new SVGPoint(t.x+d.x,t.y+d.y);
return h},E=function(t,n,i){var r=new e(t,n),a=new e(t,i),s=u(a.y,a.x)-u(r.y,r.x),o=k(m(s));
return o},k=function(e){for(;-180>e;)e+=360;for(;e>180;)e-=360;return e},A=function(e){
for(var t=void 0!==arguments[1]?arguments[1]:15,n=k(e),i=[],r=-180;180>=r;r+=t)i.push(r);
var a=i.reduce(function(e,t){return c(t-n)<c(e-n)?t:e});return a},T=function(e,t,n){
var i=(n.y-t.y)/(n.x-t.x),r=t.y-i*t.x,a=c(i*e.x-e.y+r)/d(h(i,2)+1);return a};return{
get radToDeg(){return m},get degToRad(){return b},get comparePoints(){return g},get checkCollinearity(){
return p},get getDistanceBetweenPoints(){return y},get getPointBetweenTwoPoints(){
return _},get getNearestPointOnLine(){return x},get getPointAtFraction(){return w;
},get snapPointToAngleMultiple(){return S},get snapPointToAngle(){return C},get getRotationAngleFromPoints(){
return E},get normalizeRotationAngle(){return k},get snapRotationAngle(){return A;
},get getPerpendicularDistance(){return T}}}),System.registerModule("utils/gradient",[],function(){
"use strict";var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/color").parseColor,n=System.get("utils/element").createElement,i=System.get("utils/math"),r=(i.round,
i.normalize,System.get("utils/transform-general").getTransformFromPoints),a=SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,s=function(t,n){
if(t.gradientUnits.baseVal===a){var i=SVGMatrix.fromMatrix(t.gradientTransform.baseVal.consolidate().matrix),s=n.getScreenCTM(),o=n.getScreenCTM().inverse(),l=e(n),u=new SVGPoint(t.cx.baseVal.valueInSpecifiedUnits,t.cy.baseVal.valueInSpecifiedUnits),c=new SVGPoint(t.cx.baseVal.valueInSpecifiedUnits+t.r.baseVal.valueInSpecifiedUnits,t.cy.baseVal.valueInSpecifiedUnits),d=new SVGPoint(t.cx.baseVal.valueInSpecifiedUnits,t.cy.baseVal.valueInSpecifiedUnits-t.r.baseVal.valueInSpecifiedUnits),h=u.matrixTransform(i),v=c.matrixTransform(i),f=d.matrixTransform(i),m=new SVGPoint(l.x+h.x*l.width,l.y+h.y*l.height),b=new SVGPoint(l.x+v.x*l.width,l.y+v.y*l.height),g=new SVGPoint(l.x+f.x*l.width,l.y+f.y*l.height),p=m.matrixTransform(s),y=b.matrixTransform(s),_=g.matrixTransform(s);
u=new SVGPoint(0,0),c=new SVGPoint(100,0),d=new SVGPoint(0,-100);var x=r(u,c,d,p,y,_),w=new SVGMatrix;
w.multiplySelf(o),w.multiplySelf(x),t.setAttribute("gradientUnits","userSpaceOnUse"),
t.setAttribute("gradientTransform",w),t.setAttribute("cx","0"),t.setAttribute("cy","0"),
t.setAttribute("r","100")}},o=function(e,i){var r,a,s=n("canvas");s.width=r=100,s.height=a=10;
var o=s.getContext("2d");o.clearRect(0,0,r,a);var l=o.createLinearGradient(0,0,r,0),u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=e.children[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){
var f=h.value;"stop"===f.localName&&l.addColorStop(f.offset.baseVal,f.style.stopColor||"#000");
}}catch(m){c=!0,d=m}finally{try{u||null==v["return"]||v["return"]()}finally{if(c)throw d;
}}o.fillStyle=l,o.fillRect(0,0,r,a);var b=o.getImageData(i*r,0,1,1).data,g="rgb("+b[0]+", "+b[1]+", "+b[2]+")",p=t(g,"hsla");
return p},l=function(e){if(0===e.length)return!1;if(1===e.length)return!0;var t=e[0].childElementCount,n=!0,i=!1,r=void 0;
try{for(var a=void 0,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;
if(o!=e[0]&&o.childElementCount!==t)return!1}}catch(l){i=!0,r=l}finally{try{n||null==s["return"]||s["return"]();
}finally{if(i)throw r}}for(var u=0;t>u;u+=1){var c=e[0].children[u],d=!0,h=!1,v=void 0;
try{for(var f=void 0,m=e[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var b=f.value;
if(b!==e[0]){if(b.children[u].offset.baseVal!==c.offset.baseVal)return!1;if(b.children[u].style.stopColor!==c.style.stopColor)return!1;
}}}catch(g){h=!0,v=g}finally{try{d||null==m["return"]||m["return"]()}finally{if(h)throw v;
}}}return!0},u=function(e){var t=!0,n=!1,i=void 0;try{for(var r=void 0,a=e.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){
var s=r.value;if("stop"===s.localName)return!0}}catch(o){n=!0,i=o}finally{try{t||null==a["return"]||a["return"]();
}finally{if(n)throw i}}return!1},c=function(e){var t=[],n=function(i){var r=e.ownerSVGElement.querySelector(i.href.baseVal);
if(r){var a=!0,s=!1,o=void 0;try{for(var l=void 0,u=r.children[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var c=l.value;"stop"===c.localName&&t.push(c)}}catch(d){s=!0,o=d}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}0===t.length&&r.href.baseVal&&n(r)}};return n(e),t};return{
get convertRadialGradientToUserSpace(){return s},get getGradientColorAtOffset(){return o;
},get compareGradients(){return l},get hasOwnStops(){return u},get getInheritedGradientStops(){
return c}}}),System.registerModule("utils/image",[],function(){"use strict";var e=function(e){
return new Promise(function(t){var n=new Image;n.onload=function(){t({width:n.naturalWidth,
height:n.naturalHeight})},n.src=e})};return{get extractImageSize(){return e}}}),System.registerModule("utils/json",[],function(){
"use strict";var e=function(e){var t=null;try{t=JSON.stringify(e)}catch(n){return console.error("Failed to generate JSON string",n),
t}return t},t=function(e){var t=void 0!==arguments[1]?arguments[1]:!0,n=null;try{
n=JSON.parse(e)}catch(i){return void(t&&console.error("Failed to parse JSON string",e,i));
}return n};return{get toJSON(){return e},get fromJSON(){return t}}}),System.registerModule("utils/markup",[],function(){
"use strict";var e=System.get("utils/constants").SVG_NAMESPACE,t=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");
for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return t.childElementCount>1?t:1===t.childElementCount?t.children[0]:null;
},n=function(t){var n=document.createDocumentFragment(),i=document.createElementNS(e,"svg");
for(i.innerHTML=t;i.firstChild;)n.append(i.firstChild);return n.childElementCount>1?n:1===n.childElementCount?n.children[0]:null;
};return{get parseHTML(){return t},get parseSVG(){return n}}}),System.registerModule("utils/math",[],function(){
"use strict";var e=Math,t=e.max,n=e.pow,i=function(e,t){var n=void 0!==arguments[2]?arguments[2]:1/0,i=void 0!==arguments[3]?arguments[3]:99;
return e=r(e,i),t>e?e=t:e>n&&(e=n),e},r=function(e){var t=void 0!==arguments[1]?arguments[1]:0,i=n(10,t),r=Math.round(e*i)/i;
return r},a=function(e){return 0>e?-1:e>0?1:0},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];
for(var n=0,i=0;i<e.length;i+=1)n+=e[i];return n/e.length},o=function(e){var n,i=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
return n=i?t(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0};return{get normalize(){return i;
},get round(){return r},get signum(){return a},get average(){return s},get countDecimalPlaces(){
return o}}}),System.registerModule("utils/matrix",[],function(){"use strict";var e=System.get("utils/math").round,t=function(e,t){
return e.a===t.a&&e.b===t.b&&e.c===t.c&&e.d===t.d&&e.e===t.e&&e.f===t.f},n=function(t,n){
var i=e(t.a,n),r=e(t.b,n),a=e(t.c,n),s=e(t.d,n),o=e(t.e,n),l=e(t.f,n);return new SVGMatrix([i,r,a,s,o,l]);
};return{get compareMatrixes(){return t},get roundMatrix(){return n}}}),System.registerModule("utils/network",[],function(){
"use strict";var e=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;
i.open("GET",e),i.send(),i.addEventListener("load",function(e){i.status>=200&&i.status<300?t(i.response):n({
status:e.status,statusText:e.statusText})}),i.addEventListener("error",function(e){
n({status:e.status,statusText:e.statusText})})})};return{get httpRequest(){return e;
}}}),System.registerModule("utils/node",[],function(){"use strict";var e=function(e,t){
for(;e;){if(e.localName===t)return e;e=e.parentElement}},t=function(e){for(var t=e;t;t=t.parentNode)if(t instanceof ShadowRoot||t===window.document)return t;
},n=function(e){var t=void 0!==arguments[1]?arguments[1]:2;i(e);for(var n="",r={text:!0,
textPath:!0,tspan:!0},a=0;t>a;a+=1)n+=" ";var s=function(e){var t=void 0!==arguments[1]?arguments[1]:2;
if(!r[e.localName]){var i=!0,a=!1,o=void 0;try{for(var l=void 0,u=e.children[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){
var c=l.value,d=e.firstChild===c,h=e.lastChild===c;if(d===!0){var v=document.createTextNode("\n");
c.parentNode.insertBefore(v,c)}for(var f="",m=0;t>m;m+=1)f+=n;var b=document.createTextNode(f);
if(e.insertBefore(b,c),h===!0){var g=document.createTextNode("\n");e.appendChild(g);
for(var p="",y=0;t-1>y;y+=1)p+=n;var _=document.createTextNode(p);e.appendChild(_);
}else{var x=document.createTextNode("\n");e.insertBefore(x,c.nextSibling)}c.childElementCount>0&&s(c,t+1);
}}catch(w){a=!0,o=w}finally{try{i||null==u["return"]||u["return"]()}finally{if(a)throw o;
}}}};s(e,1)},i=function(e){for(var t,n=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,null),i={
text:!0,textPath:!0,tspan:!0};t=n.nextNode();)i[t.parentElement.localName]||r(t.textContent)&&t.remove();
},r=function(e){return!/[^\t\n\r ]/.test(e)};return{get closest(){return e},get closestShadowRoot(){
return t},get normalizeWhitespace(){return n}}}),System.registerModule("utils/object",[],function(){
"use strict";var e=function(e){return JSON.parse(JSON.stringify(e))};return{get cloneObject(){
return e}}}),System.registerModule("utils/paint",[],function(){"use strict";var e=System.get("utils/array").includesOnly,t=System.get("utils/color").isValidColorString,n=System.get("utils/constants").PAINT_SERVER_ELEMENTS,i=System.get("utils/gradient").compareGradients,r=System.get("utils/pattern").comparePatterns,a=function(e){
var n=void 0!==arguments[1]?arguments[1]:"fill",i="none";if("inherit"===e.style[n])i="inherit";else{
var r=getComputedStyle(e).getPropertyValue(n);if(t(r))i="solid";else if(r&&r.startsWith("url(")){
var a=r.substring(5,r.length-2),s=e.ownerSVGElement.querySelector(a),o=s?s.localName:null;
"linearGradient"!==o&&"radialGradient"!==o&&"pattern"!==o||(i=o)}}return i},s=function(e){
var t=void 0!==arguments[1]?arguments[1]:"fill",i=null,r=getComputedStyle(e)[t];if(r&&r.toLowerCase().startsWith("url(")&&r.endsWith(")")){
var a=r.substring(5,r.length-2),s=e.ownerSVGElement.querySelector(a);s&&n.includes(s.localName)&&(i=s);
}return i},o=function(e){var t=void 0!==arguments[1]?arguments[1]:"fill",n=null,i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value,c=a(u,t);
if(u!==e[0]&&n!==c)return!1;n=c}}catch(d){r=!0,s=d}finally{try{i||null==l["return"]||l["return"]();
}finally{if(r)throw s}}return null!==n},l=function(t){var n=void 0!==arguments[1]?arguments[1]:"fill",a=[],o=[],l=!0,u=!1,c=void 0;
try{for(var d=void 0,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value,f=getComputedStyle(v).getPropertyValue(n),m=s(v);
a.push(f),o.push(m)}}catch(b){u=!0,c=b}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}if(a.legth<=1)return!1;if(e(a,a[0]))return!1;var g=o.filter(function(e){
return e&&"linearGradient"===e.localName}),p=o.filter(function(e){return e&&"radialGradient"===e.localName;
}),y=o.filter(function(e){return e&&"pattern"===e.localName});return g.length===t.length&&i(g)?!1:p.length===t.length&&i(p)?!1:y.length!==t.length||!r(y);
},u=function(t){var n=void 0!==arguments[1]?arguments[1]:"fill",i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=getComputedStyle(u).getPropertyValue(n);
i.push(c)}}catch(d){a=!0,s=d}finally{try{r||null==l["return"]||l["return"]()}finally{
if(a)throw s}}return 0===i.legth?!0:!!e(i,i[0])},c=function(e,t){if(t&&t.startsWith('url("#')&&t.endsWith('")')){
var n=t.substring(5,t.length-2),i=e.querySelector(n);if(i)return i}return null};return{
get getPaintType(){return a},get getPaintServer(){return s},get isSamePaintType(){
return o},get isMixedPaint(){return l},get isSamePaint(){return u},get getDefFromURL(){
return c}}}),System.registerModule("utils/path-boolops",[],function(){"use strict";
var e=System.get("libs/paper")["default"],t=function(e,t){var n=a(e),i=a(t),r=n.unite(i);
return r?r.exportSVG().getAttribute("d"):null},n=function(e,t){var n=a(e),i=a(t),r=n.subtract(i);
return r?r.exportSVG().getAttribute("d"):null},i=function(e,t){var n=a(e),i=a(t),r=n.intersect(i);
return r?r.exportSVG().getAttribute("d"):null},r=function(e,t){var n=a(e),i=a(t),r=n.exclude(i);
return r?r.exportSVG().getAttribute("d"):null},a=function(t){var n,i=(t.match(/M/g)||[]).length>1;
if(i){n=new e.CompoundPath(t);var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n.children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;u.closed||u.closePath()}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}}else n=new e.Path(t),n.closed||n.closePath();return n};return{
get unite(){return t},get subtract(){return n},get intersect(){return i},get exclude(){
return r}}}),System.registerModule("utils/path-conversion",[],function(){"use strict";
var e=(System.get("utils/constants").SVG_NAMESPACE,System.get("utils/element").createElement),t=System.get("utils/path-shapes"),n=t.getShapeData,i=t.setShapeData,r=t.shapeDataToPathData,a=System.get("utils/string").collapseWhitespace,s=function(t){
var n=void 0!==arguments[1]?arguments[1]:"normal",a=t.x.baseVal.value,s=t.y.baseVal.value,o=t.width.baseVal.value,l=t.height.baseVal.value,u=t.rx.baseVal.value,c=t.ry.baseVal.value,d=e("svg:path"),h={
type:"rect",values:[a,s,o,l,u,u,u,u,c,c,c,c]};if("shape"===n?i(d,h):"normal"!==n&&"plain"!==n||d.setPathData(r(h)),
"normal"===n||"shape"===n){var v=!0,f=!1,m=void 0;try{for(var b=void 0,g=t.attributes[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){
var p=b.value;["x","y","width","height","rx","ry"].includes(p.name)===!1&&d.setAttribute(p.name,p.value);
}}catch(y){f=!0,m=y}finally{try{v||null==g["return"]||g["return"]()}finally{if(f)throw m;
}}}return d},o=function(t){var i,r;if(t.hasAttribute("data-bx-shape")){var a=n(t),s=a.values,o=(i=s[Symbol.iterator](),
(r=i.next()).done?void 0:r.value),l=(r=i.next()).done?void 0:r.value,u=(r=i.next()).done?void 0:r.value,c=(r=i.next()).done?void 0:r.value,d=(r=i.next()).done?void 0:r.value,h=(r=i.next()).done?void 0:r.value,v=(r=i.next()).done?void 0:r.value,f=(r=i.next()).done?void 0:r.value,m=(r=i.next()).done?void 0:r.value,b=(r=i.next()).done?void 0:r.value,g=(r=i.next()).done?void 0:r.value,p=(r=i.next()).done?void 0:r.value;
if(d===h&&d===v&&d===f&&m===b&&m===g&&m===p){var y=e("svg:rect");0!==o&&y.setAttribute("x",o),
0!==l&&y.setAttribute("y",l),0!==u&&y.setAttribute("width",u),0!==c&&y.setAttribute("height",c),
0!==d&&y.setAttribute("rx",d),0!==m&&y.setAttribute("ry",m);var _=!0,x=!1,w=void 0;
try{for(var S=void 0,C=t.attributes[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value;["d","data-bx-shape"].includes(E.name)===!1&&y.setAttribute(E.name,E.value);
}}catch(k){x=!0,w=k}finally{try{_||null==C["return"]||C["return"]()}finally{if(x)throw w;
}}return y}return null}return null},l=function(e){var t=v(e),n=u(t);return n},u=function(t){
var n=e("svg:path"),i=!0,r=!1,s=void 0;try{for(var o=void 0,l=t.attributes[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;["cx","cy","rx","ry"].includes(u.name)||n.setAttribute(u.name,u.value);
}}catch(c){r=!0,s=c}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw s;
}}var d=t.cx.baseVal.value,h=t.cy.baseVal.value,v=t.rx.baseVal.value,f=t.ry.baseVal.value,m="\n    M "+d+" "+(h-f)+"\n    A "+v+" "+f+" 0 0 0 "+d+" "+(h+f)+"\n    A "+v+" "+f+" 0 0 0 "+d+" "+(h-f)+"\n  ";
return n.setAttribute("d",a(m)),n},c=function(t){var n=e("svg:path"),i=!0,r=!1,s=void 0;
try{for(var o=void 0,l=t.attributes[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;["x1","y1","x2","y2"].includes(u.name)||n.setAttribute(u.name,u.value);
}}catch(c){r=!0,s=c}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw s;
}}var d=t.x1.baseVal.value,h=t.y1.baseVal.value,v=t.x2.baseVal.value,f=t.y2.baseVal.value,m="\n    M "+d+" "+h+"\n    L "+v+" "+f+"\n  ";
return n.setAttribute("d",a(m)),n},d=function(t){var n=e("svg:path"),i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"points"!==l.name&&n.setAttribute(l.name,l.value)}}catch(u){r=!0,a=u;
}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}for(var c="",d=0;d<t.points.numberOfItems;d+=1){
var h=t.points.getItem(d),v=h.x,f=h.y;c+=0===d?"M "+v+" "+f:" L "+v+" "+f}return n.setAttribute("d",c),
n},h=function(t){var n=e("svg:path"),i=!0,r=!1,a=void 0;try{for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;"points"!==l.name&&n.setAttribute(l.name,l.value)}}catch(u){r=!0,a=u;
}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}for(var c="",d=0;d<t.points.numberOfItems;d+=1){
var h=t.points.getItem(d),v=h.x,f=h.y;c+=0===d?"M "+v+" "+f:" L "+v+" "+f}return c+=" Z",
n.setAttribute("d",c),n},v=function(t){var n=e("svg:ellipse"),i=!0,r=!1,a=void 0;try{
for(var s=void 0,o=t.attributes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
"r"===l.name?(n.setAttribute("rx",l.value),n.setAttribute("ry",l.value)):n.setAttribute(l.name,l.value);
}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a;
}}return n};return{get rectToPath(){return s},get pathToRect(){return o},get circleToPath(){
return l},get ellipseToPath(){return u},get lineToPath(){return c},get polylineToPath(){
return d},get polygonToPath(){return h},get circleToEllipse(){return v}}}),System.registerModule("utils/path-general",[],function(){
"use strict";var e=System.get("utils/constants").SVG_NAMESPACE,t=Math.pow,n=document.createElementNS(e,"path"),i=function(e){
return n.setPathData(e),n.getAttribute("d")},r=function(e){return n.setAttribute("d",e),
n.getPathData()},a=function(e){return n.setPathData(e),n.getPathData({normalize:!0
})},s=function(e){if(!e.find(function(e){return"C"===e.type||"L"===e.type}))return[];
var t=[],n=null,i=0,r=0,a=0,s=0,o=!0,l=!1,u=void 0;try{for(var c=void 0,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;"M"===h.type?("M"===n&&t.pop(),t.push(h),i=h.values[0],r=h.values[1],
a=h.values[0],s=h.values[1]):"L"===h.type?("Z"===n&&t.push({type:"M",values:[a,s]
}),t.push(h),i=h.values[0],r=h.values[1]):"C"===h.type?("Z"===n&&t.push({type:"M",
values:[a,s]}),t.push(h),i=h.values[4],r=h.values[5]):"Z"===h.type&&(i===a&&r===s||t.push({
type:"L",values:[a,s]}),t.push(h),i=a,r=s),n=h.type}}catch(v){l=!0,u=v}finally{try{
o||null==d["return"]||d["return"]()}finally{if(l)throw u}}return t},o=function(e,t){
if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1){if(e[n].type!==t[n].type){
if("z"===e[n].type.toLowerCase()&&"z"===t[n].type.toLowerCase())continue;return!1;
}var i=e[n].values?e[n].values:[],r=t[n].values?t[n].values:[];if(i.length!==r.length)return!1;
for(var a=0;a<i.length;a+=1)if(i[a]!==r[a])return!1}return!0},l=function(e){var t=[],n=[],i=!0,r=!1,a=void 0;
try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;
"C"===l.type||"L"===l.type?n.push(l):"M"===l.type?(n.length>0&&(t.push(n),n=[]),n.push(l)):"Z"===l.type&&(n.push(l),
t.push(n),n=[])}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}return n.length>0&&t.push(n),t},u=function(e,n){for(var i=e.getTotalLength(),r=e.getPathData(),a=i/r.length*.125,s=null,o=null,l=1/0,u=function(e){
return t(e.x-n.x,2)+t(e.y-n.y,2)},c=0;i>=c;c+=a){var d=e.getPointAtLength(c),h=u(d);
l>h&&(s=d,o=c,l=h)}for(a*=.5;a>.5;){var v=o-a,f=e.getPointAtLength(v),m=u(f);if(v>=0&&l>m)s=f,
o=v,l=m;else{var b=o+a,g=e.getPointAtLength(b),p=u(g);i>=b&&l>p?(s=g,o=b,l=p):a*=.5;
}}return[s,o,l]},c=function(e){var t,n,i,r,a=s(e.getPathData({normalize:!0})),o=l(a),u=!0,c=!1,d=void 0;
try{for(var h=void 0,v=o[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){for(var f=h.value,m=f[0],b=[],g=null,p=1;p<f.length;p+=1){
var y=f[p];"Z"===y.type?g=y:b.push(y)}var _=m.values[0],x=m.values[1];"C"===b[b.length-1].type?(m.values[0]=b[b.length-1].values[4],
m.values[1]=b[b.length-1].values[5]):(m.values[0]=b[b.length-1].values[0],m.values[1]=b[b.length-1].values[1]);
var w=!0,S=!1,C=void 0;try{for(var E=void 0,k=b[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){
var A=E.value;if("L"===A.type){var T=A.values,L=(t=T[Symbol.iterator](),(n=t.next()).done?void 0:n.value),M=(n=t.next()).done?void 0:n.value;
A.values=[_,x],_=L,x=M}else if("C"===A.type){var P=A.values,R=(i=P[Symbol.iterator](),
(r=i.next()).done?void 0:r.value),j=(r=i.next()).done?void 0:r.value,O=(r=i.next()).done?void 0:r.value,V=(r=i.next()).done?void 0:r.value,D=(r=i.next()).done?void 0:r.value,G=(r=i.next()).done?void 0:r.value;
A.values=[O,V,R,j,_,x],_=D,x=G}}}catch(I){S=!0,C=I}finally{try{w||null==k["return"]||k["return"]();
}finally{if(S)throw C}}b.reverse(),f.length=0,f.push(m);var N=!0,B=!1,U=void 0;try{
for(var z=void 0,H=b[Symbol.iterator]();!(N=(z=H.next()).done);N=!0){var F=z.value;
f.push(F)}}catch(q){B=!0,U=q}finally{try{N||null==H["return"]||H["return"]()}finally{
if(B)throw U}}g&&f.push(g)}}catch(Y){c=!0,d=Y}finally{try{u||null==v["return"]||v["return"]();
}finally{if(c)throw d}}o.reverse(),a=[];var $=!0,W=!1,X=void 0;try{for(var Z=void 0,K=o[Symbol.iterator]();!($=(Z=K.next()).done);$=!0){
var J=Z.value,Q=!0,ee=!1,te=void 0;try{for(var ne=void 0,ie=J[Symbol.iterator]();!(Q=(ne=ie.next()).done);Q=!0){
var re=ne.value;a.push(re)}}catch(ae){ee=!0,te=ae}finally{try{Q||null==ie["return"]||ie["return"]();
}finally{if(ee)throw te}}}}catch(se){W=!0,X=se}finally{try{$||null==K["return"]||K["return"]();
}finally{if(W)throw X}}e.setPathData(a)};return{get serializePathData(){return i},
get deserializePathData(){return r},get normalizePathData(){return a},get harmonizePathData(){
return s},get comparePathData(){return o},get getSubpathsData(){return l},get getNearestPointOnPath(){
return u},get reversePath(){return c}}}),System.registerModule("utils/path-shapes",[],function(){
"use strict";var e=System.get("utils/geometry").degToRad,t=System.get("utils/math").round,n=System.get("utils/path-general").comparePathData,i=(System.get("classes/vector")["default"],
Math),r=i.sin,a=i.cos,s=i.PI,o=function(e){var t,n,i=null;if(e.hasAttribute("data-bx-shape")){
var r=e.getAttribute("data-bx-shape").trim().split(/[\s+,]+/),a=r,s=(t=a[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),o=$traceurRuntime.iteratorToArray(t);o=o.map(function(e){
return parseFloat(e)}),i={type:s,values:o}}return i},l=function(e,t){var n=c(t);n&&(e.setPathData(n),
e.setAttribute("data-bx-shape",t.type+" "+t.values.join(" ")))},u=function(e){var t=o(e);
if(t){var i=c(t);return i?n(e.getPathData(),i):!1}return!1},c=function(e){var t=null;
return"triangle"===e.type?t=d(e):"rect"===e.type?t=h(e):"n-gon"===e.type?t=v(e):"star"===e.type?t=f(e):"ring"===e.type&&(t=m(e)),
t},d=function(e){var t,n,i=e.values,r=(t=i[Symbol.iterator](),(n=t.next()).done?void 0:n.value),a=(n=t.next()).done?void 0:n.value,s=(n=t.next()).done?void 0:n.value,o=(n=t.next()).done?void 0:n.value,l=(n=t.next()).done?void 0:n.value,u=(n=t.next()).done?void 0:n.value,c=[];
if(0===u)c.push({type:"M",values:[r+s*l,a]}),c.push({type:"L",values:[r+s,a+o]}),
c.push({type:"L",values:[r,a+o]}),c.push({type:"L",values:[r+s*l,a]});else for(var d=[{
x:r+s*l,y:a},{x:r+s,y:a+o},{x:r,y:a+o}],h=0;h<d.length;h+=1){var v=d[h],f=d[h+1]||d[0],m=d[h-1]||d[d.length-1],b={
x:v.x+(m.x-v.x)*u,y:v.y+(m.y-v.y)*u},g={x:v.x+(f.x-v.x)*u,y:v.y+(f.y-v.y)*u},p={x:v.x,
y:v.y};c.push({type:0===h?"M":"L",values:[b.x,b.y]}),c.push({type:"Q",values:[p.x,p.y,g.x,g.y]
})}return c.push({type:"Z"}),c},h=function(e){var t,n,i=e.values,r=(t=i[Symbol.iterator](),
(n=t.next()).done?void 0:n.value),a=(n=t.next()).done?void 0:n.value,s=(n=t.next()).done?void 0:n.value,o=(n=t.next()).done?void 0:n.value,l=(n=t.next()).done?void 0:n.value,u=(n=t.next()).done?void 0:n.value,c=(n=t.next()).done?void 0:n.value,d=(n=t.next()).done?void 0:n.value,h=l>s/2?s/2:l,v=u>s/2?s/2:u,f=c>s/2?s/2:c,m=d>s/2?s/2:d,b=l>o/2?o/2:l,g=u>o/2?o/2:u,p=c>o/2?o/2:c,y=d>o/2?o/2:d,_=[{
type:"M",values:[r+h,a]},{type:"H",values:[r+s-v]},{type:"A",values:[v,g,0,0,1,r+s,a+g]
},{type:"V",values:[a+o-p]},{type:"A",values:[f,p,0,0,1,r+s-f,a+o]},{type:"H",values:[r+m]
},{type:"A",values:[m,y,0,0,1,r,a+o-y]},{type:"V",values:[a+b]},{type:"A",values:[h,b,0,0,1,r+h,a]
},{type:"Z"}];return _=_.filter(function(e){return"A"!==e.type||0!==e.values[0]||0!==e.values[1];
})},v=function(e){var t,n,i=e.values,o=(t=i[Symbol.iterator](),(n=t.next()).done?void 0:n.value),l=(n=t.next()).done?void 0:n.value,u=(n=t.next()).done?void 0:n.value,c=(n=t.next()).done?void 0:n.value,d=(n=t.next()).done?void 0:n.value,h=[];
if(0===d)for(var v=0;c>v;v+=1){var f=2*s*(v/c)-s/2,m=u*a(f)+o,b=u*r(f)+l;0===v?h.push({
type:"M",values:[m,b]}):h.push({type:"L",values:[m,b]})}else{for(var g=[],p=0;c>p;p+=1){
var y=2*s*(p/c)-s/2;g.push({x:u*a(y)+o,y:u*r(y)+l})}for(var _=0;_<g.length;_+=1){
var x=g[_],w=g[_+1]||g[0],S=g[_-1]||g[g.length-1],C={x:x.x+(S.x-x.x)*d,y:x.y+(S.y-x.y)*d
},E={x:x.x+(w.x-x.x)*d,y:x.y+(w.y-x.y)*d},k={x:x.x,y:x.y};h.push({type:0===_?"M":"L",
values:[C.x,C.y]}),h.push({type:"Q",values:[k.x,k.y,E.x,E.y]})}}return h.push({type:"Z"
}),h},f=function(n){for(var i,o,l=n.values,u=(i=l[Symbol.iterator](),(o=i.next()).done?void 0:o.value),c=(o=i.next()).done?void 0:o.value,d=(o=i.next()).done?void 0:o.value,h=(o=i.next()).done?void 0:o.value,v=(o=i.next()).done?void 0:o.value,f=(o=i.next()).done?void 0:o.value,m=[],b=0;v>b;b+=1){
var g=2*s*(b/v)-s/2,p=h*a(g)+u,y=h*r(g)+c;p=t(p,8),y=t(y,8),0===b?m.push({type:"M",
values:[p,y]}):m.push({type:"L",values:[p,y]}),g=2*s*(b/v)+s/v-s/2+e(f),p=d*a(g)+u,
y=d*r(g)+c,p=t(p,8),y=t(y,8),m.push({type:"L",values:[p,y]})}return m.push({type:"Z"
}),m},m=function(e){var t,n,i=e.values,r=(t=i[Symbol.iterator](),(n=t.next()).done?void 0:n.value),a=(n=t.next()).done?void 0:n.value,s=(n=t.next()).done?void 0:n.value,o=(n=t.next()).done?void 0:n.value,l=(n=t.next()).done?void 0:n.value,u=(n=t.next()).done?void 0:n.value,c=[{
type:"M",values:[r,a]},{type:"m",values:[-l,0]},{type:"a",values:[l,u,0,1,0,2*l,0]
},{type:"a",values:[l,u,0,1,0,-(2*l),0]},{type:"Z"},{type:"M",values:[r,a]},{type:"m",
values:[-s,0]},{type:"a",values:[s,o,0,0,1,2*s,0]},{type:"a",values:[s,o,0,0,1,-(2*s),0]
},{type:"Z"}];return c},b=function(e,t,n,i,o){var l=2*s*(e/o)-s/2,u=i*a(l)+t,c=i*r(l)+n;
return new SVGPoint(u,c)};return{get getShapeData(){return o},get setShapeData(){
return l},get validateShapeData(){return u},get shapeDataToPathData(){return c},get getNGonVertexPoint(){
return b}}}),System.registerModule("utils/pattern",[],function(){"use strict";var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/transform-general").getTransformFromPoints,n=SVGUnitTypes,i=n.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,r=n.SVG_UNIT_TYPE_USERSPACEONUSE,a=(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,
function(e){for(var t=document.createNodeIterator(e.ownerSVGElement,NodeFilter.SHOW_ELEMENT),n=null,i=[];n=t.nextNode();){
var r=!0,a=!1,s=void 0;try{for(var o=void 0,l=["fill","stroke"][Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value,c=n.style[u];if(c&&c.startsWith("url(")){var d=c.substring(6,c.length-2);
d===e.id&&i.includes(n)===!1&&i.push(n)}}}catch(h){a=!0,s=h}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}}return i}),s=function(e){var t=null;if(e.hasAttribute("href")){
var n=e.getAttribute("href"),i=e.ownerSVGElement.querySelector(n);i&&"pattern"===i.localName&&i!==e&&(t=i);
}return t},o=function(e){for(var t=[],n=e;n;){var i=n.getAttribute("href"),r=i?n.ownerSVGElement.querySelector(i):null;
if(!r||"pattern"!==r.localName||r===e||t.includes(r))break;n=r,t.push(r)}return t.length>0?t[t.length-1]:null;
},l=function(e){for(var t=[],n={},i=e,r=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits","patternTransform"];i;){
var a=i.getAttribute("href"),s=a?i.ownerSVGElement.querySelector(a):null;if(!s||"pattern"!==s.localName||s===e||t.includes(s))break;
i=s,t.push(s)}var o=!0,l=!1,u=void 0;try{for(var c=void 0,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){
var h=c.value;if(e.hasAttribute(h)===!1){var v=!0,f=!1,m=void 0;try{for(var b=void 0,g=t[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){
var p=b.value;if(p.hasAttribute(h)){n[h]=p.getAttribute(h);break}}}catch(y){f=!0,
m=y}finally{try{v||null==g["return"]||g["return"]()}finally{if(f)throw m}}}}}catch(_){
l=!0,u=_}finally{try{o||null==d["return"]||d["return"]()}finally{if(l)throw u}}return n;
},u=function(n,a){var o,l,u,c,d,h,v=n.hasAttribute("href")?s(n):n,f=e(a);if(v.patternUnits.baseVal===r)o=new SVGPoint(v.x.baseVal.value,v.y.baseVal.value),
l=new SVGPoint(v.x.baseVal.value+v.width.baseVal.value,v.y.baseVal.value),u=new SVGPoint(v.x.baseVal.value+v.width.baseVal.value,v.y.baseVal.value+v.height.baseVal.value),
c=new SVGPoint(f.x+f.width/2-v.width.baseVal.value/2,f.y+f.height/2-v.height.baseVal.value/2),
d=new SVGPoint(f.x+f.width/2+v.width.baseVal.value/2,f.y+f.height/2-v.height.baseVal.value/2),
h=new SVGPoint(f.x+f.width/2+v.width.baseVal.value/2,f.y+f.height/2+v.height.baseVal.value/2);else if(v.patternUnits.baseVal===i){
var m=new SVGPoint(v.x.baseVal.valueInSpecifiedUnits,v.y.baseVal.valueInSpecifiedUnits),b=new SVGPoint(v.x.baseVal.valueInSpecifiedUnits+v.width.baseVal.valueInSpecifiedUnits,v.y.baseVal.valueInSpecifiedUnits),g=new SVGPoint(v.x.baseVal.valueInSpecifiedUnits+v.width.baseVal.valueInSpecifiedUnits,v.y.baseVal.valueInSpecifiedUnits+v.height.baseVal.valueInSpecifiedUnits);
o=new SVGPoint(f.x+m.x*f.width,f.y+m.y*f.height),l=new SVGPoint(f.x+b.x*f.width,f.y+b.y*f.height),
u=new SVGPoint(f.x+g.x*f.width,f.y+g.y*f.height),c=new SVGPoint(f.x+f.width/2-f.width*v.width.baseVal.valueInSpecifiedUnits/2,f.y+f.height/2-f.height*v.height.baseVal.valueInSpecifiedUnits/2),
d=new SVGPoint(f.x+f.width/2+f.width*v.width.baseVal.valueInSpecifiedUnits/2,f.y+f.height/2-f.height*v.height.baseVal.valueInSpecifiedUnits/2),
h=new SVGPoint(f.x+f.width/2+f.width*v.width.baseVal.valueInSpecifiedUnits/2,f.y+f.height/2+f.height*v.height.baseVal.valueInSpecifiedUnits/2);
}var p=t(o,l,u,c,d,h);n.setAttribute("patternTransform",p.toString())},c=function(e){
var t=e[0],n=t.hasAttribute("href")?s(t):t,i=!0,r=!1,a=void 0;try{for(var o=void 0,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){
var u=o.value;if(u!==t){var c=u.hasAttribute("href")?s(u):u;if(c!==n)return!1}}}catch(d){
r=!0,a=d}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw a}}return!0;
};return{get getPatternUsers(){return a},get getParentPattern(){return s},get getFurthestAncestorPattern(){
return o},get getInheritedPatternAttributes(){return l},get centerPattern(){return u;
},get comparePatterns(){return c}}}),System.registerModule("utils/random",[],function(){
"use strict";var e=System.get("utils/math").round,t=Math.floor,n=function(){var t=void 0!==arguments[0]?arguments[0]:0,n=void 0!==arguments[1]?arguments[1]:100,i=void 0!==arguments[2]?arguments[2]:0,r=t+Math.random()*(n-t);
return e(r,i)},i=function(){for(var e=void 0!==arguments[0]?arguments[0]:10,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz!@#$%^&*()_+-={}[]:<>,.",n="",i=0;e>i;i+=1){
var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}return n},r=function(e){
for(var i=e.length;--i;){var r=n(0,1,5),a=t(r*(i+1)),s=e[a];e[a]=e[i],e[i]=s}return e;
};return{get getRandomNumber(){return n},get getRandomString(){return i},get shuffle(){
return r}}}),System.registerModule("utils/rect",[],function(){"use strict";var e=Math,t=e.min,n=e.max,i=function(e,i){
var r=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],a=r.map(function(e){
return e.matrixTransform(i)}),s=a.map(function(e){return e.x}),o=a.map(function(e){
return e.y}),l=t.apply(void 0,$traceurRuntime.spread(s)),u=t.apply(void 0,$traceurRuntime.spread(o)),c=n.apply(void 0,$traceurRuntime.spread(s)),d=n.apply(void 0,$traceurRuntime.spread(o));
return new SVGRect(l,u,c-l,d-u)},r=function(e){var t=[],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value,u=l.width*l.height;t.push(u)}}catch(c){r=!0,a=c}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}var d=n.apply(void 0,$traceurRuntime.spread(t)),h=t.indexOf(d),v=e[h];
return v},a=function(e){if(0===e.length)return new SVGRect(0,0,0,0);if(1===e.length){
var t=e[0];return new SVGRect(t.x,t.y,t.width,t.height)}var n=[],i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
n.push(new SVGPoint(u.x,u.y)),i.push(new SVGPoint(u.x+u.width,u.y+u.height))}}catch(c){
a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{if(a)throw s}}var d=SVGPoint.fromPoint(n[0]),h=SVGPoint.fromPoint(i[0]),v=!0,f=!1,m=void 0;
try{for(var b=void 0,g=n[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){var p=b.value;
p.x<d.x&&(d.x=p.x),p.y<d.y&&(d.y=p.y)}}catch(y){f=!0,m=y}finally{try{v||null==g["return"]||g["return"]();
}finally{if(f)throw m}}var _=!0,x=!1,w=void 0;try{for(var S=void 0,C=i[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){
var E=S.value;E.x>h.x&&(h.x=E.x),E.y>h.y&&(h.y=E.y)}}catch(k){x=!0,w=k}finally{try{
_||null==C["return"]||C["return"]()}finally{if(x)throw w}}var A=new SVGRect(d.x,d.y,h.x-d.x,h.y-d.y);
return A},s=function(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height;
},o=function(e,t){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},l=function(e,t){
return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom};return{
get transformRect(){return i},get getBiggestRect(){return r},get combineRects(){return a;
},get rectContainsRect(){return s},get rectContainsPoint(){return o},get rectIntersectsRect(){
return l}}}),System.registerModule("utils/reflect",[],function(){"use strict";var e=System.get("utils/element").createElement,t=e("svg:svg"),n=function(e){
return e.trim().split(/[\s+,]+/)},i=Math,r=(i.min,i.max,Number.parseFloat),a={1:"none",
2:"xMinYMin",3:"xMidYMin",4:"xMaxYMin",5:"xMinYMid",6:"xMidYMid",7:"xMaxYMid",8:"xMinYMax",
9:"xMidYMax",10:"xMaxYMax"},s={none:1,xMinYMin:2,xMidYMin:3,xMaxYMin:4,xMinYMid:5,
xMidYMid:6,xMaxYMid:7,xMinYMax:8,xMidYMax:9,xMaxYMax:10},o={meet:1,slice:2},l=function(e){
var i=void 0!==arguments[1]?arguments[1]:"viewBox",a=t.createSVGRect(),s=new Proxy(a,{
ownKeys:function(){return["x","y","width","height","top","bottom","left","right"];
},getPrototypeOf:function(e){return SVGRect.prototype},getOwnPropertyDescriptor:function(e,t){
var n;if(["x","y","width","height"].includes(t)){var i=this.get(e,t);n={value:i,writable:!0,
configurable:!0,enumerable:!0}}else if(["top","bottom","left","right"].includes(t)){
var r=this.get(e,t);n={value:r,writable:!1,configurable:!0,enumerable:!0}}return n;
},get:function(t,s){var o;if(["x","y","width","height","top","bottom","left","right"].includes(s))if(e.hasAttribute(i)){
var l=n(e.getAttribute(i));l=l.map(function(e){return r(e)}),a.x=l[0]||0,a.y=l[1]||0,
a.width=l[2]||0,a.height=l[3]||0,o=a[s]}else o=0;else"__proto__"===s&&(o=this.getPrototypeOf(t));
return o},set:function(t,r,a){var s,o,l=e.hasAttribute(i)?n(e.getAttribute(i)):["0","0","0","0"],u=l,c=(s=u[Symbol.iterator](),
(o=s.next()).done?void 0:o.value),d=(o=s.next()).done?void 0:o.value,h=(o=s.next()).done?void 0:o.value,v=(o=s.next()).done?void 0:o.value;
return"x"===r?e.setAttribute(i,a+" "+d+" "+h+" "+v):"y"===r?e.setAttribute(i,c+" "+a+" "+h+" "+v):"width"===r?e.setAttribute(i,c+" "+d+" "+a+" "+v):"height"===r&&e.setAttribute(i,c+" "+d+" "+h+" "+a),
["x","y","width","height"].includes(r)}});return s},u=function(e){var n=void 0!==arguments[1]?arguments[1]:"x",i=t.createSVGLength(),r=new Proxy(i,{
ownKeys:function(){return["value","valueAsString","valueInSpecifiedUnits","unitType"];
},getPrototypeOf:function(e){return SVGLength.prototype},getOwnPropertyDescriptor:function(e,t){
var n;if("unitType"===t){var i=this.get(e,t);n={value:i,writable:!1,configurable:!0,
enumerable:!0}}else if("value"===t||"valueAsString"===t||"valueInSpecifiedUnits"===t){
var r=this.get(e,t);n={value:r,writable:!0,configurable:!0,enumerable:!0}}return n;
},get:function(t,r){var a;return"value"!==r&&"valueAsString"!==r&&"valueInSpecifiedUnits"!==r&&"unitType"!==r||(i.valueAsString=e.hasAttribute(n)?e.getAttribute(n):""),
"value"===r?a=i.value:"valueAsString"===r?a=i.valueAsString:"valueInSpecifiedUnits"===r?a=i.valueInSpecifiedUnits:"unitType"===r?a=i.unitType:"__proto__"===r&&(a=this.getPrototypeOf(t)),
a},set:function(t,r,a){return"value"===r?(i.valueAsString=e.hasAttribute(n)?e.getAttribute(n):"",
i.value=a,e.setAttribute(n,i.valueAsString)):"valueInSpecifiedUnits"===r?(i.valueAsString=e.hasAttribute(n)?e.getAttribute(n):"",
i.valueInSpecifiedUnits=a,e.setAttribute(n,i.valueAsString)):"valueAsString"===r&&(i.valueAsString=a,
e.setAttribute(n,i.valueAsString)),["value","valueInSpecifiedUnits","valueAsString"].includes(r);
}});return r},c=function(e){var t=void 0!==arguments[1]?arguments[1]:"preserveAspectRatio",i=new Proxy({},{
ownKeys:function(){return["align","meetOrSlice"]},getPrototypeOf:function(e){return SVGPreserveAspectRatio.prototype;
},getOwnPropertyDescriptor:function(e,t){var n;if("align"===t||"meetOrSlice"===t){
var i=this.get(e,t);n={value:i,writable:!0,configurable:!0,enumerable:!0}}return n;
},get:function(i,r){var a;if("align"===r)if(e.hasAttribute(t)){var l=n(e.getAttribute(t))[0];
a=s[l]||s.xMidYMid}else a=s.xMidYMid;else if("meetOrSlice"===r)if(e.hasAttribute(t)){
var u=n(e.getAttribute(t))[1];a=o[u]||o.meet}else a=o.meet;else"__proto__"===r&&(a=this.getPrototypeOf(i));
return a},set:function(n,i,r){if("meetOrSlice"===i){var s=a[this.get(n,"align")];r===o.slice&&(s+=" slice"),
e.setAttribute(t,s)}else if("align"===i){var l=a[r]||"xMidYMid";this.get(n,"meetOrSlice")===o.slice&&(l+=" slice"),
e.setAttribute(t,l)}return["meetOrSlice","align"].includes(i)}});return i};return{
get createReflectedSVGRect(){return l},get createReflectedSVGLength(){return u},get createReflectedSVGPreserveAspectRatio(){
return c}}}),System.registerModule("utils/string",[],function(){"use strict";var e=function(e){
return e.charAt(0).toUpperCase()+e.substr(1)},t=function(e){return e.replace(/(\-[a-z])/g,function(e){
return e.toUpperCase().replace("-","")})},n=function(e){return e.replace(/([A-Z])/g,function(e){
return"-"+e.toLowerCase()})},i=function(e){return e===e.toLowerCase()},r=function(e){
return e.replace(/\s+/g," ").trim()},a=function(e){return e.sort(function(e,t){return e.id.localeCompare(t.id);
})};return{get capitalize(){return e},get toCamelCase(){return t},get toDashCase(){
return n},get isLowerCase(){return i},get collapseWhitespace(){return r},get sortAlphabetically(){
return a}}}),System.registerModule("utils/style",[],function(){"use strict";var e=System.get("utils/constants"),t=e.CONTAINER_ELEMENTS,n=e.SHAPE_ELEMENTS,i=e.GRAPHICS_ELEMENTS,r=e.TEXT_CONTENT_ELEMENTS,a=System.get("utils/text").getTspansIntersectedByRange,s=function(e){
var t="",n=e.sheet.rules[0],i=!0,r=!1,a=void 0;try{for(var s=void 0,o=e.sheet.rules[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){
var l=s.value;l!==n&&(t+="\n"),t+=l.cssText}}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]();
}finally{if(r)throw a}}e.textContent=t},o=function(e,s){var l=void 0!==arguments[2]?arguments[2]:null,u=[];
if("fill"===e||"fill-opacity"===e||"fill-rule"===e||"stroke"===e||"stroke-dasharray"===e||"stroke-dashoffset"===e||"stroke-linecap"===e||"stroke-linejoin"===e||"stroke-miterlimit"===e||"stroke-opacity"===e||"stroke-width"===e||"vector-effect"===e){
var c=!0,d=!1,h=void 0;try{for(var v=void 0,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){
var m=v.value,b=m.localName;if("text"===b)if(l&&l.intersectsNode(m)){var g=a(l);if(g.length>0){
var p="backward"===l.direction?g[g.length-1]:g[0],y=g.remove(p);u=$traceurRuntime.spread(u,[p],y);
}}else u=$traceurRuntime.spread(u,o(e,m.children,l));else"textPath"===b?u=$traceurRuntime.spread(u,o(e,m.children,l)):n.includes(b)||r.includes(b)?u.push(m):"g"===b||"a"===b?u=$traceurRuntime.spread(u,o(e,m.children,l)):"use"===b&&("fill"!==e&&"stroke"!==e||u.push(m));
}}catch(_){d=!0,h=_}finally{try{c||null==f["return"]||f["return"]()}finally{if(d)throw h;
}}}else if("text-decoration"===e){var x=!0,w=!1,S=void 0;try{for(var C=void 0,E=s[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){
var k=C.value,A=k.localName;"tspan"===A?u.push(k):"text"!==A&&"textPath"!==A||(u=$traceurRuntime.spread(u,o(e,k.children,l)));
}}catch(T){w=!0,S=T}finally{try{x||null==E["return"]||E["return"]()}finally{if(w)throw S;
}}}else if("buffered-rendering"===e||"clip-path"===e||"filter"===e||"mask"===e||"opacity"===e||"mix-blend-mode"===e||"isolation"===e){
var L=!0,M=!1,P=void 0;try{for(var R=void 0,j=s[Symbol.iterator]();!(L=(R=j.next()).done);L=!0){
var O=R.value,V=O.localName;(i.includes(V)||t.includes(V))&&u.push(O)}}catch(D){M=!0,
P=D}finally{try{L||null==j["return"]||j["return"]()}finally{if(M)throw P}}}else if("direction"===e||"font"===e||"font-family"===e||"font-size"===e||"font-size-adjust"===e||"font-stretch"===e||"font-style"===e||"font-variant"===e||"font-weight"===e||"glyph-orientation-horizontal"===e||"glyph-orientation-vertical"===e||"letter-spacing"===e||"text-anchor"===e||"text-transform"===e||"word-spacing"===e||"white-space"===e){
var G=!0,I=!1,N=void 0;try{for(var B=void 0,U=s[Symbol.iterator]();!(G=(B=U.next()).done);G=!0){
var z=B.value,H=z.localName;if("text"===H)if(l&&l.intersectsNode(z)){var F=a(l);if(F.length>0){
var q="backward"===l.direction?F[F.length-1]:F[0],Y=F.remove(q);u=$traceurRuntime.spread(u,[q],Y);
}}else u=$traceurRuntime.spread(u,o(e,z.children,l));else r.includes(H)?u.push(z):"g"!==H&&"a"!==H||(u=$traceurRuntime.spread(u,o(e,z.children,l)));
}}catch($){I=!0,N=$}finally{try{G||null==U["return"]||U["return"]()}finally{if(I)throw N;
}}}return u};return{get reflectStyleElementCSSOM(){return s},get queryStylableElements(){
return o}}}),System.registerModule("utils/text",[],function(){"use strict";var e=System.get("utils/element").createElement,t=System.get("utils/node").closest,n=function(e){
if(e&&!e.collapsed){var n=t(e.startContainer,"text");if(e){var i=r(e,n,"start"),a=r(e,n,"end"),s=n.getElementsByTagName("textPath")[0],o=s?s:n,l=function(e){
var t=0,n=null,i=null,r=!0,a=!1,s=void 0;try{for(var l=void 0,u=o.children[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){
var c=l.value,d=0,h=!0,v=!1,f=void 0;try{for(var m=void 0,b=c.textContent[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){
m.value;t===e&&(n=c,i=d),t+=1,d+=1}}catch(g){v=!0,f=g}finally{try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}}}}catch(p){a=!0,s=p}finally{try{r||null==u["return"]||u["return"]();
}finally{if(a)throw s}}if(n){var y=n.textContent,_=y.slice(0,i),x=y.slice(i,y.length);
if(_.length>0&&x.length>0){var w=document.createDocumentFragment(),S=n.cloneNode(!1);
S.textContent=_,w.appendChild(S);var C=n.cloneNode(!1);C.textContent=x,w.appendChild(C),
n.replace(w)}}};l(i),l(a);var u=0,c=null,d=null,h=!0,v=!1,f=void 0;try{for(var m=void 0,b=o.children[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){
var g=m.value,p=!0,y=!1,_=void 0;try{for(var x=void 0,w=g.textContent[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
x.value;u===i&&(c=g),u===a-1&&(d=g),u+=1}}catch(S){y=!0,_=S}finally{try{p||null==w["return"]||w["return"]();
}finally{if(y)throw _}}}}catch(C){v=!0,f=C}finally{try{h||null==b["return"]||b["return"]();
}finally{if(v)throw f}}e.setStart(c.childNodes[0],0),e.setEnd(d.childNodes[0],d.childNodes[0].length);
}}},i=function(e){if(e&&!e.collapsed){t(e.startContainer,"text")}},r=function(e,t){
var n=void 0!==arguments[2]?arguments[2]:"start";e=e.cloneRange(),"start"===n?e.collapse(!0):"end"===n&&e.collapse(!1);
for(var i=0,r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,function(t){var n=new Range;
return n.selectNode(t),n.compareBoundaryPoints(Range.END_TO_END,e)<1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT;
});r.nextNode();)i+=r.currentNode.length;return 3===e.startContainer.nodeType&&(i+=e.startOffset),
i},a=function(e){var t=0,n=0;return e.x.baseVal.numberOfItems>0&&(t=e.x.baseVal.getItem(0).value),
e.y.baseVal.numberOfItems>0&&(n=e.y.baseVal.getItem(0).value),{x:t,y:n}},s=function(e){
var t=[];if(e.commonAncestorContainer.nodeType===Document.TEXT_NODE){for(var n=e.commonAncestorContainer;n=n.parentElement;)if("tspan"===n.localName){
t.push(n);break}}else for(var i,r=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_ELEMENT,null);i=r.nextNode();)e.intersectsNode(i)&&"tspan"===i.localName&&t.push(i);
return t},o=function(t){var n=e("div");return n.style.fontFamily=t,""!==n.style.fontFamily;
};return{get normalizeTextInRangeBeforeEditing(){return n},get normalizeTextInRangeAfterEditing(){
return i},get getRangeOffsetRelativeToElement(){return r},get getTextOffset(){return a;
},get getTspansIntersectedByRange(){return s},get isValidFontFamilyValue(){return o;
}}}),System.registerModule("utils/time",[],function(){"use strict";var e=arguments,t=(System.get("utils/type").isNumber,
function(e){var t=void 0!==arguments[1]?arguments[1]:500,n=arguments[2],i=null,r=null,a=null,s=0,o=function(){
s=new Date,r=null,a=e.apply(n,i)},l=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];
var c=new Date,d=t-(c-s);return i=l,0>=d?(clearTimeout(r),r=null,s=c,a=e.apply(n,i)):r||(r=setTimeout(o,d)),
a};return l}),n=function(t,n,i){var r=void 0!==arguments[3]?arguments[3]:!1,a=null,s=null,o=function(){
var o=e,l=function(){a=null,r||(s=t.apply(i,o))},u=r&&!a;return clearTimeout(a),a=setTimeout(l,n),
u&&(s=t.apply(i,o)),s};return o},i=function(e){return new Promise(function(t,n){setTimeout(function(){
return t()},e)})},r=function(e){return new Promise(function(t,n){var i=function(n){
n.timeRemaining()>=e?t():requestIdleCallback(i)};requestIdleCallback(i)})},a=function(e){
requestAnimationFrame(e)},s=function(e){return e/1e3/60/60/24},o=function(){return Date.now();
},l=function(){var e=new Date,t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),a=("0"+e.getMinutes()).slice(-2),s=("0"+e.getSeconds()).slice(-2),o=t+"-"+n+"-"+i+"T"+r+":"+a+":"+s;
return o};return{get throttle(){return t},get debounce(){return n},get sleep(){return i;
},get sleepUntilIdle(){return r},get nextTick(){return a},get milisecondsToDays(){
return s},get getTimeStamp(){return o},get getISOTimestamp(){return l}}}),System.registerModule("utils/transform-general",[],function(){
"use strict";var e=System.get("utils/bbox"),t=e.getUserBBox,n=e.getClientBBox,i=System.get("utils/geometry"),r=i.degToRad,a=i.getRotationAngleFromPoints,s=i.getDistanceBetweenPoints,o=System.get("utils/rect").combineRects,l=Math,u=(l.abs,
l.tan),c=Number.parseFloat,d=function(e,t,n,i,r,a){var s=function(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0]);
},o=s([[e.x,e.y,1],[t.x,t.y,1],[n.x,n.y,1]]),l=s([[i.x,e.y,1],[r.x,t.y,1],[a.x,n.y,1]]),u=s([[i.y,e.y,1],[r.y,t.y,1],[a.y,n.y,1]]),c=s([[e.x,i.x,1],[t.x,r.x,1],[n.x,a.x,1]]),d=s([[e.x,i.y,1],[t.x,r.y,1],[n.x,a.y,1]]),h=s([[e.x,e.y,i.x],[t.x,t.y,r.x],[n.x,n.y,a.x]]),v=s([[e.x,e.y,i.y],[t.x,t.y,r.y],[n.x,n.y,a.y]]);
return new SVGMatrix([l/o,u/o,c/o,d/o,h/o,v/o])},h=function(e,t){return t.getScreenCTM().inverse().multiply(e.getScreenCTM());
},v=function(e){var t,n;if(e.hasAttribute("data-bx-origin")){var i=e.getAttribute("data-bx-origin").split(" ");
t=c(i[0]),n=c(i[1])}else t=.5,n=.5;return new SVGPoint(t,n)},f=function(e,t){e.setAttribute("data-bx-origin",t.x+" "+t.y);
},m=function(e){var n=t(e),i=v(e),r=S(i,n);return r},b=function(e){var t=e.getScreenCTM(),n=m(e),i=(SVGMatrix.fromMatrix(e.transform.baseVal.consolidate().matrix),
n.matrixTransform(t));return i},g=function(e){var t=void 0!==arguments[1]?arguments[1]:!1,i=e.map(function(e){
return b(e)}),r=i[0],a=!0,l=!0,u=!1,c=void 0;try{for(var d=void 0,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){
var v=d.value,f=s(v,r);if(f>3){a=!1;break}}}catch(m){u=!0,c=m}finally{try{l||null==h["return"]||h["return"]();
}finally{if(u)throw c}}var g=null;if(a)if(t){var p=function(){var t=0,i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
i[t++]=n(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{
if(a)throw s}}return i}(),y=o(p);g=new SVGPoint((i[0].x-y.x)/y.width,(i[0].y-y.y)/y.height);
}else g=i[0];else if(t)g=new SVGPoint(.5,.5);else{var _=function(){var t=0,i=[],r=!0,a=!1,s=void 0;
try{for(var o=void 0,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;
i[t++]=n(u)}}catch(c){a=!0,s=c}finally{try{r||null==l["return"]||l["return"]()}finally{
if(a)throw s}}return i}(),x=o(_);g=new SVGPoint(x.x+x.width/2,x.y+x.height/2)}return g;
},p=function(e){var n=e.getScreenCTM(),i=(n.inverse(),m(e)),r=i.matrixTransform(e.getScreenCTM()),s=(t(e),
r),o=new SVGPoint(r.x-100,r.y),l=new SVGPoint(i.x-100,i.y).matrixTransform(e.getScreenCTM()),u=a(s,o,l);
return u},y=function(e){var t=void 0!==arguments[1]?arguments[1]:0,n=p(e),i=SVGMatrix.fromMatrix(e.transform.baseVal.consolidate().matrix),r=e.getScreenCTM(),a=r.inverse(),s=m(e),o=s.matrixTransform(r),l=SVGMatrix.fromMatrix(i);
l.multiplySelf(a),l.rotateSelf(-n+t,o.x,o.y),l.multiplySelf(r),e.setAttribute("transform",l.toString());
},_=function(e,t,n){var i=void 0!==arguments[3]?arguments[3]:0,a=void 0!==arguments[4]?arguments[4]:0,s=SVGMatrix.fromMatrix(e),o=r(t),l=r(n),c=new SVGMatrix;
return c=x(c,u(o),u(l)),s=w(s,i,a),s.multiplySelf(c),s=w(s,-i,-a)},x=function(e,t,n){
var i=SVGMatrix.fromMatrix(e),r=i.a,a=i.b;return i.a+=n*i.c,i.b+=n*i.d,i.c+=t*r,i.d+=t*a,
i},w=function(e,t,n){var i=SVGMatrix.fromMatrix(e);return i.e=i.e+t*i.a+n*i.c,i.f=i.f+t*i.b+n*i.d,
i},S=function(e,t){var n=new SVGPoint(t.x+e.x*t.width,t.y+e.y*t.height);return n},C=function(e,t){
var n=new SVGPoint((e.x-t.x)/t.width,(e.y-t.y)/t.height);return n};return{get getTransformFromPoints(){
return d},get getTransformToElement(){return h},get getTransformOriginBBoxPoint(){
return v},get setTransformOriginBBoxPoint(){return f},get getTransformOriginUserPoint(){
return m},get getTransformOriginClientPoint(){return b},get getComputedTransformOriginClientPoint(){
return g},get getElementRotationAngle(){return p},get setElementRotationAngle(){return y;
},get skew(){return _},get bboxPointToUserPoint(){return S},get userPointToBBoxPoint(){
return C}}}),System.registerModule("utils/transform-reduction",[],function(){"use strict";
var e=System.get("utils/bbox").getUserBBox,t=System.get("utils/math").round,n=System.get("utils/matrix").roundMatrix,i=System.get("utils/path-general").normalizePathData,r=System.get("utils/paint").getPaintServer,a=System.get("utils/pattern").getParentPattern,s=System.get("utils/path-shapes"),o=s.getShapeData,l=s.setShapeData,u=System.get("utils/transform-general").getTransformFromPoints,c=System.get("classes/decomposed-transform")["default"],d=System.get("classes/enum")["default"],h=System.get("classes/vector")["default"],v=Math,f=v.abs,m=v.min,b=Number.parseFloat,g=SVGUnitTypes,p=g.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,y=g.SVG_UNIT_TYPE_USERSPACEONUSE,_=new d("initialStartClientPoint","initialEndClientPoint","initialNormalClientPoint","initialCenterClientPoint","initialR1ClientPoint","initialR2ClientPoint","initialP1ClientPoint","initialP2ClientPoint","initialP3ClientPoint"),x=function(e){
var t=void 0!==arguments[1]?arguments[1]:!1,n=void 0!==arguments[2]?arguments[2]:!0,i=void 0!==arguments[3]?arguments[3]:!0,r=e.localName;
if("ellipse"===r)E(e,t,i);else if("image"===r)A(e);else if("text"===r)T(e,t,i);else if("path"===r)if(e.hasAttribute("data-bx-shape")){
var a=o(e).type;"rect"===a&&C(e,t,n,i)}else k(e,t,i);e.transform&&e.transform.baseVal.consolidate().matrix.isIdentity()&&e.removeAttribute("transform");
},w=function(t){var n=[r(t,"fill"),r(t,"stroke")],i=n.filter(function(e){return e&&e.localName.endsWith("Gradient");
}),s=n.filter(function(e){return e&&"pattern"===e.localName}),o=t.getScreenCTM(),l=!0,u=!1,c=void 0;
try{for(var d=void 0,v=i[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var f=d.value,m=f.gradientTransform.baseVal.consolidate().matrix;
if(f.gradientUnits.baseVal===y)if("linearGradient"===f.localName){var b=new SVGPoint(f.x1.baseVal.value,f.y1.baseVal.value),g=new SVGPoint(f.x2.baseVal.value,f.y2.baseVal.value),x=new h(b,g).getNormalVector(),w=x.transformPoint(b),S=b.matrixTransform(m),C=g.matrixTransform(m),E=w.matrixTransform(m);
f[_.initialStartClientPoint]=S.matrixTransform(o),f[_.initialEndClientPoint]=C.matrixTransform(o),
f[_.initialNormalClientPoint]=E.matrixTransform(o)}else if("radialGradient"===f.localName){
var k=new SVGPoint(f.cx.baseVal.value,f.cy.baseVal.value),A=new SVGPoint(f.cx.baseVal.value+f.r.baseVal.value,f.cy.baseVal.value),T=new SVGPoint(f.cx.baseVal.value,f.cy.baseVal.value-f.r.baseVal.value),L=k.matrixTransform(m),M=A.matrixTransform(m),P=T.matrixTransform(m);
f[_.initialCenterClientPoint]=L.matrixTransform(o),f[_.initialR1ClientPoint]=M.matrixTransform(o),
f[_.initialR2ClientPoint]=P.matrixTransform(o)}}}catch(R){u=!0,c=R}finally{try{l||null==v["return"]||v["return"]();
}finally{if(u)throw c}}var j=!0,O=!1,V=void 0;try{for(var D=void 0,G=s[Symbol.iterator]();!(j=(D=G.next()).done);j=!0){
var I=D.value,N=I.hasAttribute("href")?a(I):I,B=SVGMatrix.fromMatrix(I.patternTransform.baseVal.consolidate().matrix);
if(N.patternUnits.baseVal===y){var U=new SVGPoint(N.x.baseVal.value,N.y.baseVal.value),z=new SVGPoint(N.x.baseVal.value+N.width.baseVal.value,N.y.baseVal.value),H=new SVGPoint(N.x.baseVal.value+N.width.baseVal.value,N.y.baseVal.value+N.height.baseVal.value),F=U.matrixTransform(B),q=z.matrixTransform(B),Y=H.matrixTransform(B);
I[_.initialP1ClientPoint]=F.matrixTransform(o),I[_.initialP2ClientPoint]=q.matrixTransform(o),
I[_.initialP3ClientPoint]=Y.matrixTransform(o)}else if(N.patternUnits.baseVal===p){
var $=t.getScreenCTM(),W=e(t),X=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits),Z=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits+N.width.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits),K=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits+N.width.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits+N.height.baseVal.valueInSpecifiedUnits),J=new SVGPoint(W.x+X.x*W.width,W.y+X.y*W.height),Q=new SVGPoint(W.x+Z.x*W.width,W.y+Z.y*W.height),ee=new SVGPoint(W.x+K.x*W.width,W.y+K.y*W.height),te=J.matrixTransform(B),ne=Q.matrixTransform(B),ie=ee.matrixTransform(B),re=te.matrixTransform($),ae=ne.matrixTransform($),se=ie.matrixTransform($);
I[_.initialP1ClientPoint]=re,I[_.initialP2ClientPoint]=ae,I[_.initialP3ClientPoint]=se;
}}}catch(oe){O=!0,V=oe}finally{try{j||null==G["return"]||G["return"]()}finally{if(O)throw V;
}}},S=function(t){var n=[r(t,"fill"),r(t,"stroke")],i=n.filter(function(e){return e&&e.localName.endsWith("Gradient");
}),s=n.filter(function(e){return e&&"pattern"===e.localName}),o=t.getScreenCTM().inverse(),l=!0,c=!1,d=void 0;
try{for(var v=void 0,f=i[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var m=v.value;
if(m.gradientUnits.baseVal===y){var b=void 0;if("linearGradient"===m.localName){var g=new SVGPoint(m.x1.baseVal.value,m.y1.baseVal.value),x=new SVGPoint(m.x2.baseVal.value,m.y2.baseVal.value),w=new h(g,x).getNormalVector().transformPoint(g);
b=u(g,x,w,m[_.initialStartClientPoint].matrixTransform(o),m[_.initialEndClientPoint].matrixTransform(o),m[_.initialNormalClientPoint].matrixTransform(o));
}else if("radialGradient"===m.localName){var S=new SVGPoint(m.cx.baseVal.value,m.cy.baseVal.value),C=new SVGPoint(m.cx.baseVal.value+m.r.baseVal.value,m.cy.baseVal.value),E=new SVGPoint(m.cx.baseVal.value,m.cy.baseVal.value-m.r.baseVal.value);
b=u(S,C,E,m[_.initialCenterClientPoint].matrixTransform(o),m[_.initialR1ClientPoint].matrixTransform(o),m[_.initialR2ClientPoint].matrixTransform(o));
}m.setAttribute("gradientTransform",b.toString())}}}catch(k){c=!0,d=k}finally{try{
l||null==f["return"]||f["return"]()}finally{if(c)throw d}}var A=!0,T=!1,L=void 0;try{
for(var M=void 0,P=s[Symbol.iterator]();!(A=(M=P.next()).done);A=!0){var R=M.value,j=R.hasAttribute("href")?a(R):R,O=SVGMatrix.fromMatrix(R.patternTransform.baseVal.consolidate().matrix);
if(j.patternUnits.baseVal===y){var V=new SVGPoint(j.x.baseVal.value,j.y.baseVal.value),D=new SVGPoint(j.x.baseVal.value+j.width.baseVal.value,j.y.baseVal.value),G=new SVGPoint(j.x.baseVal.value+j.width.baseVal.value,j.y.baseVal.value+j.height.baseVal.value),I=u(V,D,G,R[_.initialP1ClientPoint].matrixTransform(o),R[_.initialP2ClientPoint].matrixTransform(o),R[_.initialP3ClientPoint].matrixTransform(o));
R.setAttribute("patternTransform",I.toString())}else if(j.patternUnits.baseVal===p){
var N=e(t),B=new SVGPoint(j.x.baseVal.valueInSpecifiedUnits,j.y.baseVal.valueInSpecifiedUnits),U=new SVGPoint(j.x.baseVal.valueInSpecifiedUnits+j.width.baseVal.valueInSpecifiedUnits,j.y.baseVal.valueInSpecifiedUnits),z=new SVGPoint(j.x.baseVal.valueInSpecifiedUnits+j.width.baseVal.valueInSpecifiedUnits,j.y.baseVal.valueInSpecifiedUnits+j.height.baseVal.valueInSpecifiedUnits),H=new SVGPoint(N.x+B.x*N.width,N.y+B.y*N.height),F=new SVGPoint(N.x+U.x*N.width,N.y+U.y*N.height),q=new SVGPoint(N.x+z.x*N.width,N.y+z.y*N.height),Y=R[_.initialP1ClientPoint].matrixTransform(o),$=R[_.initialP2ClientPoint].matrixTransform(o),W=R[_.initialP3ClientPoint].matrixTransform(o),X=Y.matrixTransform(O.inverse()),Z=$.matrixTransform(O.inverse()),K=W.matrixTransform(O.inverse()),J=u(H,F,q,X,Z,K);
R.setAttribute("patternTransform",O.multiply(J).toString())}}}catch(Q){T=!0,L=Q}finally{
try{A||null==P["return"]||P["return"]()}finally{if(T)throw L}}},C=function(e,t,i){
var r,a;if(e.hasAttribute("transform")!==!1){var s=e.transform.baseVal.consolidate().matrix,d=c.fromSVGMatrix(s),h=d.scaleX,v=d.scaleY;
w(e);var g=o(e).values,p=(r=g[Symbol.iterator](),(a=r.next()).done?void 0:a.value),y=(a=r.next()).done?void 0:a.value,_=(a=r.next()).done?void 0:a.value,x=(a=r.next()).done?void 0:a.value,C=(a=r.next()).done?void 0:a.value,E=(a=r.next()).done?void 0:a.value,k=(a=r.next()).done?void 0:a.value,A=(a=r.next()).done?void 0:a.value,T=(a=r.next()).done?void 0:a.value,L=(a=r.next()).done?void 0:a.value,M=(a=r.next()).done?void 0:a.value,P=(a=r.next()).done?void 0:a.value,R=new SVGPoint(p,y).matrixTransform(s),j=new SVGPoint(p+_,y).matrixTransform(s),O=new SVGPoint(p,y+x).matrixTransform(s);
p*=h,y*=v,_*=f(h),x*=f(v),i===!0&&(C*=f(h),E*=f(h),k*=f(h),A*=f(h),T*=f(v),L*=f(v),
M*=f(v),P*=f(v));var V=new SVGPoint(p,y),D=new SVGPoint(p+_,y),G=new SVGPoint(p,y+x),I=u(V,D,G,R,j,O);
I=n(I,6),1===f(I.a)&&0===I.b&&0===I.c&&1===f(I.d)&&(0===I.e&&0===I.f||(p=1===I.a?p+I.e:p-I.e,
y=1===I.d?y+I.f:y-I.f,I.e=0,I.f=0));var N={type:"rect",values:[p,y,_,x,C,E,k,A,T,L,M,P]
};if(l(e,N),e.setAttribute("transform",I.toString()),t===!0){var B=getComputedStyle(e).strokeWidth;
B=b(B),e.style.strokeWidth=m(B*f(h),B*f(v))}S(e)}},E=function(e,i){if(e.hasAttribute("transform")!==!1){
var r=8,a=e.transform.baseVal.consolidate().matrix,s=c.fromSVGMatrix(a),o=s.scaleX,l=s.scaleY;
w(e);var d=e.cx.baseVal.value,v=e.cy.baseVal.value,g=e.rx.baseVal.value,p=e.ry.baseVal.value,y=new SVGPoint(d,v).matrixTransform(a),_=new SVGPoint(d+g,v).matrixTransform(a),x=new SVGPoint(d,v-p).matrixTransform(a);
d*=o,v*=l,g*=o,p*=l;var C=new SVGPoint(d,v),E=new SVGPoint(d+g,v),k=new SVGPoint(d,v-p),A=u(C,E,k,y,_,x);
if(A=n(A,5),1===f(A.a)&&0===A.b&&0===A.c&&1===f(A.d)&&(C=C.matrixTransform(A),E=E.matrixTransform(A),
k=k.matrixTransform(A),A.e=0,A.f=0),g=new h(C,E).length,p=new h(C,k).length,e.setAttribute("transform",A.toString()),
e.setAttribute("cx",t(C.x,r)),e.setAttribute("cy",t(C.y,r)),e.setAttribute("rx",t(g,r)),
e.setAttribute("ry",t(p,r)),i===!0){var T=getComputedStyle(e).strokeWidth;T=b(T),
e.style.strokeWidth=m(T*f(o),T*f(l))}S(e)}},k=function(e,t,n){if(e.hasAttribute("transform")){
w(e);var i=SVGMatrix.fromMatrix(e.transform.baseVal.consolidate().matrix),r=e.getPathData(),a=L(r,i);
e.setPathData(a),e.removeAttribute("transform"),S(e)}},A=function(e){if(e.hasAttribute("transform")){
var t=c.fromSVGMatrix(e.transform.baseVal.consolidate().matrix);1===t.scaleX&&1===t.scaleY||(e.setAttribute("preserveAspectRatio","none"),
e.setAttribute("x",e.x.baseVal.value*t.scaleX),e.setAttribute("y",e.y.baseVal.value*t.scaleY),
e.setAttribute("width",e.width.baseVal.value*t.scaleX),e.setAttribute("height",e.height.baseVal.value*t.scaleY),
t.scaleX=1,t.scaleY=1),0===t.rotateZ&&0===t.skewXY&&(e.setAttribute("x",e.x.baseVal.value+t.translateX),
e.setAttribute("y",e.y.baseVal.value+t.translateY),t.translateX=0,t.translateY=0),
e.setAttribute("transform",t.toSVGMatrix().toString())}},T=function(e,n,i){if(e.hasAttribute("transform")){
var r=new Map,a=!0,s=!1,o=void 0;try{for(var l=void 0,u=e.children[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){
var d=l.value;r.set(d,d.getBBox())}}catch(h){s=!0,o=h}finally{try{a||null==u["return"]||u["return"]();
}finally{if(s)throw o}}var v=c.fromSVGMatrix(e.transform.baseVal.consolidate().matrix),g=new c;
if(v.scaleX===v.scaleY){var p=!0,y=!1,_=void 0;try{for(var x=void 0,w=e.children[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){
var S=x.value,C=getComputedStyle(S).fontSize;C=b(C),C=t(C*v.scaleY,1),S.style.fontSize=C;
var E=getComputedStyle(S).wordSpacing;E=b(E),E=t(E*v.scaleY,2),S.style.wordSpacing=E;
var k=getComputedStyle(S).letterSpacing;k=b(k),k=t(k*v.scaleY,2),S.style.letterSpacing=k;
}}catch(A){y=!0,_=A}finally{try{p||null==w["return"]||w["return"]()}finally{if(y)throw _;
}}for(var T="",L="",M=0;M<e.x.baseVal.numberOfItems;M+=1)T+=e.x.baseVal.getItem(M).value*v.scaleX,
M!==e.x.baseVal.numberOfItems-1&&(T+=" ");for(var P=0;P<e.y.baseVal.numberOfItems;P+=1)L+=e.y.baseVal.getItem(P).value*v.scaleY,
P!==e.y.baseVal.numberOfItems-1&&(L+=" ");if(e.setAttribute("x",T),e.setAttribute("y",L),
n===!0){var R=getComputedStyle(e).strokeWidth;R=b(R),e.style.strokeWidth=m(R*f(v.scaleX),R*f(v.scaleY));
}g.scaleX=v.scaleX,g.scaleY=v.scaleY,v.scaleX=1,v.scaleY=1}if(1===v.scaleX&&1===v.scaleY&&0===v.rotateZ&&0===v.skewXY){
var j="",O="";if(e.x.baseVal.numberOfItems>0)for(var V=0;V<e.x.baseVal.numberOfItems;V+=1)j+=e.x.baseVal.getItem(V).value+v.translateX,
V!==e.x.baseVal.numberOfItems-1&&(j+=" ");else j=v.translateX;if(e.y.baseVal.numberOfItems>0)for(var D=0;D<e.y.baseVal.numberOfItems;D+=1)O+=e.y.baseVal.getItem(D).value+v.translateY,
D!==e.y.baseVal.numberOfItems-1&&(O+=" ");else O=v.translateY;e.setAttribute("x",j),
e.setAttribute("y",O),g.translateX=v.translateX,g.translateY=v.translateY,v.translateX=0,
v.translateY=0}e.setAttribute("transform",v.toSVGMatrix().toString());var G=!0,I=!1,N=void 0;
try{for(var B=void 0,U=e.children[Symbol.iterator]();!(G=(B=U.next()).done);G=!0){
B.value}}catch(z){I=!0,N=z}finally{try{G||null==U["return"]||U["return"]()}finally{
if(I)throw N}}}},L=function(e,t){var n=i(e),r=!0,a=!1,s=void 0;try{for(var o=void 0,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){
var u=o.value;if("M"===u.type||"L"===u.type){var c=new SVGPoint(u.values[0],u.values[1]).matrixTransform(t);
u.values=[c.x,c.y]}else if("C"===u.type){var d=new SVGPoint(u.values[0],u.values[1]).matrixTransform(t),h=new SVGPoint(u.values[2],u.values[3]).matrixTransform(t),v=new SVGPoint(u.values[4],u.values[5]).matrixTransform(t);
u.values=[d.x,d.y,h.x,h.y,v.x,v.y]}}}catch(f){a=!0,s=f}finally{try{r||null==l["return"]||l["return"]();
}finally{if(a)throw s}}return n};return{get reduceTransform(){return x}}}),System.registerModule("utils/type",[],function(){
"use strict";var e=Number,t=e.isFinite,n=e.isNaN,i=e.parseFloat,r=function(e){return n(e)?!1:"number"==typeof e;
},a=function(e){return e===!!e},s=function(e){var r=i(e);return n(r)===!1&&t(r)};return{
get isNumber(){return r},get isBoolean(){return a},get isNumeric(){return s}}}),System.registerModule("utils/vector",[],function(){
"use strict";var e=System.get("classes/vector")["default"],t=function(e,t){return e.x*t.x+e.y*t.y;
},n=function(t,n){return new e(t.x-n.x,t.y-n.y)},i=function(t,n){return new e(t.x+n.x,t.y+n.y);
},r=function(e,t){return e.x===t.x&&e.y===t.y};return{get vectorsDotProduct(){return t;
},get subtractVectors(){return n},get sumVectors(){return i},get compareVectors(){
return r}}});