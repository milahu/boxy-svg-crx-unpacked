(function() {"use strict";var _get=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,a)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(a)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(e){r=!0,i=e}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_templateObject=_taggedTemplateLiteral(["<div style=\"width: 0px; height: 0px; display: none; contain: strict;\"></div>"],["<div style=\"width: 0px; height: 0px; display: none; contain: strict;\"></div>"]),_templateObject2=_taggedTemplateLiteral(["",""],["",""]),_templateObject3=_taggedTemplateLiteral(["<g data-bx-artboard=\"master\"></g>"],["<g data-bx-artboard=\"master\"></g>"]),_templateObject4=_taggedTemplateLiteral(["<g data-bx-artboard=\"symbol\">","</g>"],["<g data-bx-artboard=\"symbol\">","</g>"]),_templateObject5=_taggedTemplateLiteral(["<g data-bx-artboard=\"pattern\">","</g>"],["<g data-bx-artboard=\"pattern\">","</g>"]),_templateObject6=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <div class=\"item-inner\">\n                <svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"15px\" height=\"15px\">\n                  <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n\n                <div class=\"label\">","</div>\n              </div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <div class=\"item-inner\">\n                <svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"15px\" height=\"15px\">\n                  <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n\n                <div class=\"label\">","</div>\n              </div>\n            </div>\n          "]),_templateObject7=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Symbols</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No symbols found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\" title=\"New symbol\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <x-menuitem value=\"add\">\n                  <x-label>Add symbol</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"add-from-selected\" id=\"add-from-selected-menu-item\">\n                  <x-label>Add symbol from selected</x-label>\n                </x-menuitem>\n              </x-menu>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Symbols</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No symbols found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\" title=\"New symbol\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <x-menuitem value=\"add\">\n                  <x-label>Add symbol</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"add-from-selected\" id=\"add-from-selected-menu-item\">\n                  <x-label>Add symbol from selected</x-label>\n                </x-menuitem>\n              </x-menu>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject8=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\"></div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\"></div>\n            </div>\n          "]),_templateObject9=_taggedTemplateLiteral(["<x-input value=\"","\" instantvalidation><x-label hidden>","</x-label></x-input>"],["<x-input value=\"","\" instantvalidation><x-label hidden>","</x-label></x-input>"]),_templateObject10=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "]),_templateObject11=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #new-button{margin:0 0 0 8px}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Patterns</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No patterns found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"new-button\" skin=\"flat-condensed\" title=\"New pattern\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #new-button{margin:0 0 0 8px}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Patterns</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No patterns found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"new-button\" skin=\"flat-condensed\" title=\"New pattern\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject12=_taggedTemplateLiteral(["\n          <div class=\"item\">\n            <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n          </div>\n        "],["\n          <div class=\"item\">\n            <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n          </div>\n        "]),_templateObject13=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                ","\n                <rect width=\"100\" height=\"100\" style=\"fill: url(#",")\"></rect>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                ","\n                <rect width=\"100\" height=\"100\" style=\"fill: url(#",")\"></rect>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "]),_templateObject14=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{background:#6a9ce8}#items{width:100%;height:100%;box-sizing:border-box}.family-item{width:100%;position:relative;z-index:0}.family-item>.background{position:absolute;top:0;left:0;width:100%;height:38px;z-index:-1}.family-item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.family-item>.main{position:relative;z-index:1;display:flex;height:38px;align-items:center;box-sizing:border-box;padding-right:10px}.family-item[data-selected]>.main,.family-item[data-selected]>.main>.label{color:#fff}.family-item>.main>.label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:24px;font-weight:400}.font-items-outer{overflow:hidden}.font-items{transform-origin:0 0}#drop-marker[hidden],.family-item x-input x-label[hidden],.font-items[hidden]{display:none}.font-item{padding:0 28px 0 42px}.font-item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.family-item x-input{outline:0;border:0;flex:1;font-size:13px}.family-item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:5px;color:#d20f0f;z-index:100;pointer-events:none}.family-item>.main>.arrow-button{width:27px;min-width:27px;height:20px;display:flex;align-items:center;justify-content:center}.family-item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.family-item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.family-item path{fill:currentColor}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{position:absolute;z-index:100;display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;pointer-events:none;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.family-item x-input{width:100%;max-width:none}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Fonts</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No fonts found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-menu>\n                <x-menuitem id=\"add-from-disk-menu-item\">\n                  <x-label>Add from disk...</x-label>\n                </x-menuitem>\n\n                <x-menuitem id=\"add-from-google-fonts-menu-item\">\n                  <x-label>Add from Google Fonts...</x-label>\n                </x-menuitem>\n              </x-menu>\n\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{background:#6a9ce8}#items{width:100%;height:100%;box-sizing:border-box}.family-item{width:100%;position:relative;z-index:0}.family-item>.background{position:absolute;top:0;left:0;width:100%;height:38px;z-index:-1}.family-item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.family-item>.main{position:relative;z-index:1;display:flex;height:38px;align-items:center;box-sizing:border-box;padding-right:10px}.family-item[data-selected]>.main,.family-item[data-selected]>.main>.label{color:#fff}.family-item>.main>.label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:24px;font-weight:400}.font-items-outer{overflow:hidden}.font-items{transform-origin:0 0}#drop-marker[hidden],.family-item x-input x-label[hidden],.font-items[hidden]{display:none}.font-item{padding:0 28px 0 42px}.font-item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.family-item x-input{outline:0;border:0;flex:1;font-size:13px}.family-item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:5px;color:#d20f0f;z-index:100;pointer-events:none}.family-item>.main>.arrow-button{width:27px;min-width:27px;height:20px;display:flex;align-items:center;justify-content:center}.family-item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.family-item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.family-item path{fill:currentColor}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{position:absolute;z-index:100;display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;pointer-events:none;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.family-item x-input{width:100%;max-width:none}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Fonts</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No fonts found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-menu>\n                <x-menuitem id=\"add-from-disk-menu-item\">\n                  <x-label>Add from disk...</x-label>\n                </x-menuitem>\n\n                <x-menuitem id=\"add-from-google-fonts-menu-item\">\n                  <x-label>Add from Google Fonts...</x-label>\n                </x-menuitem>\n              </x-menu>\n\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject15=_taggedTemplateLiteral(["\n            <div class=\"family-item item\" data-family=\"","\">\n              <div class=\"background\"></div>\n\n              <div class=\"main\">\n                <div class=\"arrow-button\">\n                  <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                    <path d=\"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z\"/>\n                  </svg>\n                </div>\n\n                <div class=\"label\" style=\"font-family: '","'\">","</div>\n              </div>\n\n              <div class=\"font-items-outer\">\n                <div class=\"font-items\" hidden></div>\n              </div>\n            </div>\n          "],["\n            <div class=\"family-item item\" data-family=\"","\">\n              <div class=\"background\"></div>\n\n              <div class=\"main\">\n                <div class=\"arrow-button\">\n                  <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                    <path d=\"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z\"/>\n                  </svg>\n                </div>\n\n                <div class=\"label\" style=\"font-family: '","'\">","</div>\n              </div>\n\n              <div class=\"font-items-outer\">\n                <div class=\"font-items\" hidden></div>\n              </div>\n            </div>\n          "]),_templateObject16=_taggedTemplateLiteral(["\n              <div class=\"font-item item\">\n                <div class=\"label\" style=\"","\">","</div>\n              </div>\n            "],["\n              <div class=\"font-item item\">\n                <div class=\"label\" style=\"","\">","</div>\n              </div>\n            "]),_templateObject17=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;padding:4px;box-sizing:border-box;display:flex;flex-flow:column;outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}#items,#items .item{box-sizing:border-box}#items{overflow-x:hidden;overflow-y:auto;background:#fff;border:1px solid #bfbfbf;contain:size layout style paint;width:100%;height:100%}#items #items-inner{display:flex;flex-wrap:wrap;flex-flow:column wrap;max-height:6825px}#items .item{width:180px;height:25px;display:block;padding:0 6px;opacity:.75;overflow:hidden;background:0 0;filter:invert();-webkit-user-drag:none}#items #placeholder[hidden],#items .item[hidden]{display:none}#items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#items #placeholder{display:flex;align-items:center;justify-content:center;height:100%;padding:0 0 0 7px;font-size:12px;opacity:.6}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}#buttons{padding:12px;display:flex;flex-flow:row;justify-content:flex-end;margin-top:auto}#buttons x-button{margin-left:8px}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"placeholder\" hidden>No families found.</div>\n          <div id=\"items-inner\"></div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n\n        <div id=\"buttons\">\n          <x-button id=\"cancel-button\">\n            <x-label>Cancel</x-label>\n          </x-button>\n\n          <x-button id=\"add-button\" disabled toggled>\n            <x-label>Add</x-label>\n          </x-button>\n        </div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;padding:4px;box-sizing:border-box;display:flex;flex-flow:column;outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}#items,#items .item{box-sizing:border-box}#items{overflow-x:hidden;overflow-y:auto;background:#fff;border:1px solid #bfbfbf;contain:size layout style paint;width:100%;height:100%}#items #items-inner{display:flex;flex-wrap:wrap;flex-flow:column wrap;max-height:6825px}#items .item{width:180px;height:25px;display:block;padding:0 6px;opacity:.75;overflow:hidden;background:0 0;filter:invert();-webkit-user-drag:none}#items #placeholder[hidden],#items .item[hidden]{display:none}#items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#items #placeholder{display:flex;align-items:center;justify-content:center;height:100%;padding:0 0 0 7px;font-size:12px;opacity:.6}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}#buttons{padding:12px;display:flex;flex-flow:row;justify-content:flex-end;margin-top:auto}#buttons x-button{margin-left:8px}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"placeholder\" hidden>No families found.</div>\n          <div id=\"items-inner\"></div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n\n        <div id=\"buttons\">\n          <x-button id=\"cancel-button\">\n            <x-label>Cancel</x-label>\n          </x-button>\n\n          <x-button id=\"add-button\" disabled toggled>\n            <x-label>Add</x-label>\n          </x-button>\n        </div>\n      </main>\n    </template>\n  "]),_templateObject18=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#html-canvas{position:absolute}#lens{width:100px;height:100px;position:fixed;top:-200px;left:-200px;background:#fff;border:4px solid #333;box-shadow:2px 6px 20px rgba(0,0,0,.3);border-radius:100px;overflow:hidden}#lens #warning,#lens-inner{position:relative;width:100%;height:100%}#lens #warning{position:absolute;left:0;top:0;display:flex;flex-flow:column;align-items:center;justify-content:center;visibility:hidden}#lens[offscreen] #warning{visibility:visible}#lens #warning p{line-height:1;padding:0;margin:0}#lens #grid{width:100px;height:100px;background:#d4d4d4}#lens[offscreen] #grid{display:none}#grid #center-rect{stroke:red;stroke-width:1.5}#lens[offscreen] #grid #center-rect{stroke-width:0}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\">\n          <canvas id=\"html-canvas\"></canvas>\n        </div>\n\n        <div id=\"lens\">\n          <div id=\"lens-inner\">\n            <svg id=\"grid\"></svg>\n            <div id=\"warning\">\n              <p>Move</p>\n              <p>cursor</p>\n              <p>over</p>\n              <p>canvas</p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#html-canvas{position:absolute}#lens{width:100px;height:100px;position:fixed;top:-200px;left:-200px;background:#fff;border:4px solid #333;box-shadow:2px 6px 20px rgba(0,0,0,.3);border-radius:100px;overflow:hidden}#lens #warning,#lens-inner{position:relative;width:100%;height:100%}#lens #warning{position:absolute;left:0;top:0;display:flex;flex-flow:column;align-items:center;justify-content:center;visibility:hidden}#lens[offscreen] #warning{visibility:visible}#lens #warning p{line-height:1;padding:0;margin:0}#lens #grid{width:100px;height:100px;background:#d4d4d4}#lens[offscreen] #grid{display:none}#grid #center-rect{stroke:red;stroke-width:1.5}#lens[offscreen] #grid #center-rect{stroke-width:0}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\">\n          <canvas id=\"html-canvas\"></canvas>\n        </div>\n\n        <div id=\"lens\">\n          <div id=\"lens-inner\">\n            <svg id=\"grid\"></svg>\n            <div id=\"warning\">\n              <p>Move</p>\n              <p>cursor</p>\n              <p>over</p>\n              <p>canvas</p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </template>\n  "]),_templateObject19=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#helper{padding:5px 10px;position:fixed;overflow:hidden;line-height:1;font-size:13px;white-space:pre;color:var(--text-color);background:#fff;border:1px solid rgba(0,0,0,.25);border-radius:4px;box-shadow:rgba(0,0,0,.3) 0 4px 22px}#helper[hidden]{display:none}#helper,#helper[offscreen]{visibility:visible}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\"></div>\n        <div id=\"helper\">Move cursor over object</div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#helper{padding:5px 10px;position:fixed;overflow:hidden;line-height:1;font-size:13px;white-space:pre;color:var(--text-color);background:#fff;border:1px solid rgba(0,0,0,.25);border-radius:4px;box-shadow:rgba(0,0,0,.3) 0 4px 22px}#helper[hidden]{display:none}#helper,#helper[offscreen]{visibility:visible}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\"></div>\n        <div id=\"helper\">Move cursor over object</div>\n      </main>\n    </template>\n  "]),_templateObject20=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;padding:4px;box-sizing:border-box}:host(:focus){outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}h4{margin:0;padding:5px;background:#f2f2f2;border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3;text-transform:uppercase;font-size:11px}#items{width:100%;flex:1;overflow:auto;contain:strict;box-sizing:border-box;background:#fff;border:1px solid #bfbfbf}#embedded-items-heading{border-top:none}#embedded-items .item{padding:3px 6px;height:28px;display:flex;align-items:center;box-sizing:border-box}#embedded-items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#embedded-items .item[hidden]{display:none}#embedded-items .item .label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:20px}#embedded-items-placeholder,#google-fonts-items-placeholder{padding:5px 7px;font-size:12px;opacity:.6}#google-fonts-items .item{width:182px;height:25px;overflow:hidden;display:block;box-sizing:border-box;padding:0 6px;opacity:.75;background:0 0;-webkit-user-drag:none;filter:invert()}#google-fonts-items .item[hidden]{display:none}#google-fonts-items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"embedded-items-container\">\n            <h4  id=\"embedded-items-heading\">Embedded fonts</h4>\n            <div id=\"embedded-items\"></div>\n            <div id=\"embedded-items-placeholder\" hidden>No families found.</div>\n          </div>\n\n          <div id=\"google-fonts-items-contaner\">\n            <h4  id=\"google-fonts-items-heading\">Google fonts</h4>\n            <div id=\"google-fonts-items\"></div>\n            <div id=\"google-fonts-items-placeholder\" hidden>No families found.</div>\n          </div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;padding:4px;box-sizing:border-box}:host(:focus){outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}h4{margin:0;padding:5px;background:#f2f2f2;border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3;text-transform:uppercase;font-size:11px}#items{width:100%;flex:1;overflow:auto;contain:strict;box-sizing:border-box;background:#fff;border:1px solid #bfbfbf}#embedded-items-heading{border-top:none}#embedded-items .item{padding:3px 6px;height:28px;display:flex;align-items:center;box-sizing:border-box}#embedded-items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#embedded-items .item[hidden]{display:none}#embedded-items .item .label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:20px}#embedded-items-placeholder,#google-fonts-items-placeholder{padding:5px 7px;font-size:12px;opacity:.6}#google-fonts-items .item{width:182px;height:25px;overflow:hidden;display:block;box-sizing:border-box;padding:0 6px;opacity:.75;background:0 0;-webkit-user-drag:none;filter:invert()}#google-fonts-items .item[hidden]{display:none}#google-fonts-items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"embedded-items-container\">\n            <h4  id=\"embedded-items-heading\">Embedded fonts</h4>\n            <div id=\"embedded-items\"></div>\n            <div id=\"embedded-items-placeholder\" hidden>No families found.</div>\n          </div>\n\n          <div id=\"google-fonts-items-contaner\">\n            <h4  id=\"google-fonts-items-heading\">Google fonts</h4>\n            <div id=\"google-fonts-items\"></div>\n            <div id=\"google-fonts-items-placeholder\" hidden>No families found.</div>\n          </div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n      </main>\n    </template>\n  "]),_templateObject21=_taggedTemplateLiteral(["\n            <div class=\"item\" data-family=\"","\">\n              <div class=\"label\" style=\"font-family: '","'\">","</div>\n            </div>\n          "],["\n            <div class=\"item\" data-family=\"","\">\n              <div class=\"label\" style=\"font-family: '","'\">","</div>\n            </div>\n          "]),_templateObject22=_taggedTemplateLiteral(["<div class=\"item\" data-family=\"","\"><img src=\"","\"></img></div>"],["<div class=\"item\" data-family=\"","\"><img src=\"","\"></img></div>"]),_templateObject23=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;position:relative;width:100px;height:100px;box-shadow:inset 1px 1px 0 #acacac,inset -1px -1px 0 #acacac;--button-background: #ffffff;--button-border: 1px solid #ACACAC;--button-toggled-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 15%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))\n  );--button-toggled-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 8%));--button-pressed-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 5%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 7%))\n  );--button-pressed-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 12%))}:host([disabled]){opacity:.5;pointer-events:none}:host(:focus){outline:0}#buttons{width:100%;height:100%}#buttons .button{position:absolute;width:26px;height:26px;min-height:26px;padding:0;background:var(--button-background);border:var(--button-border);border-radius:0}#buttons .button[toggled]{background:var(--button-toggled-background);border:var(--button-toggled-border)}#buttons .button[pressed],#buttons .button[pressed][toggled]{background:var(--button-pressed-background);border:var(--button-pressed-border)}.button[value=xMinYMin]{left:0;top:0}.button[value=xMidYMin]{top:0;left:50%;transform:translate(-50%,0)}.button[value=xMaxYMin]{top:0;right:0}.button[value=xMinYMid]{top:50%;left:0;transform:translate(0,-50%)}.button[value=xMidYMid]{top:50%;left:50%;transform:translate(-50%,-50%)}.button[value=xMaxYMid]{top:50%;right:0;transform:translate(0,-50%)}.button[value=xMinYMax]{left:0;bottom:0}.button[value=xMidYMax]{left:50%;bottom:0;transform:translate(-50%,0)}.button[value=xMaxYMax]{right:0;bottom:0}</style>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button class=\"button\" value=\"xMinYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMin\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMid\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMax\"></x-button>\n      </x-buttons>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;position:relative;width:100px;height:100px;box-shadow:inset 1px 1px 0 #acacac,inset -1px -1px 0 #acacac;--button-background: #ffffff;--button-border: 1px solid #ACACAC;--button-toggled-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 15%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))\n  );--button-toggled-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 8%));--button-pressed-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 5%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 7%))\n  );--button-pressed-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 12%))}:host([disabled]){opacity:.5;pointer-events:none}:host(:focus){outline:0}#buttons{width:100%;height:100%}#buttons .button{position:absolute;width:26px;height:26px;min-height:26px;padding:0;background:var(--button-background);border:var(--button-border);border-radius:0}#buttons .button[toggled]{background:var(--button-toggled-background);border:var(--button-toggled-border)}#buttons .button[pressed],#buttons .button[pressed][toggled]{background:var(--button-pressed-background);border:var(--button-pressed-border)}.button[value=xMinYMin]{left:0;top:0}.button[value=xMidYMin]{top:0;left:50%;transform:translate(-50%,0)}.button[value=xMaxYMin]{top:0;right:0}.button[value=xMinYMid]{top:50%;left:0;transform:translate(0,-50%)}.button[value=xMidYMid]{top:50%;left:50%;transform:translate(-50%,-50%)}.button[value=xMaxYMid]{top:50%;right:0;transform:translate(0,-50%)}.button[value=xMinYMax]{left:0;bottom:0}.button[value=xMidYMax]{left:50%;bottom:0;transform:translate(-50%,0)}.button[value=xMaxYMax]{right:0;bottom:0}</style>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button class=\"button\" value=\"xMinYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMin\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMid\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMax\"></x-button>\n      </x-buttons>\n    </template>\n  "]),_templateObject24=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:14px 20px 20px}#opacity-input{margin-left:6px;width:65px}#rule-section{padding:10px 20px 20px}</style>\n\n      <h2 id=\"panel-heading\">Fill</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"fill\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"rule-section\">\n        <h3 id=\"rule-section-heading\">Rule</h3>\n\n        <x-buttons id=\"rule-buttons\" tracking=\"1\">\n          <x-button id=\"non-zero-rule-button\" value=\"nonzero\" title=\"Non-zero\" skin=\"flat\" toggled>\n            <x-icon name=\"fill-rule-non-zero\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"even-odd-rule-button\" value=\"evenodd\" title=\"Even-odd\" skin=\"flat\">\n            <x-icon name=\"fill-rule-even-odd\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:14px 20px 20px}#opacity-input{margin-left:6px;width:65px}#rule-section{padding:10px 20px 20px}</style>\n\n      <h2 id=\"panel-heading\">Fill</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"fill\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"rule-section\">\n        <h3 id=\"rule-section-heading\">Rule</h3>\n\n        <x-buttons id=\"rule-buttons\" tracking=\"1\">\n          <x-button id=\"non-zero-rule-button\" value=\"nonzero\" title=\"Non-zero\" skin=\"flat\" toggled>\n            <x-icon name=\"fill-rule-non-zero\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"even-odd-rule-button\" value=\"evenodd\" title=\"Even-odd\" skin=\"flat\">\n            <x-icon name=\"fill-rule-even-odd\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "]),_templateObject25=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:15px 20px 20px}#opacity-input{margin-left:6px;width:65px}#width-section{padding:15px 20px 17px}#width-input{margin-left:6px;width:65px}#non-scaling-stroke-box{margin-top:5px}#line-section{padding:15px 20px 17px}#line-section>x-box{justify-content:space-between}#dash-section{padding:10px 20px 20px}#dash-array-select{width:100%;margin-bottom:10px}#dash-array-inputs>x-box{width:40px;margin-left:-1px}#dash-array-inputs x-numberinput{width:100%;text-align:center;--inner-padding: 0 3px}#dash-array-inputs x-label{align-self:center;margin-right:4px;font-weight:900;opacity:.9}#dash-array-inputs x-label[disabled]{opacity:.4}#dash-array-inputs x-label.gap{opacity:.2}#dash-array-inputs x-label.gap[disabled]{opacity:.1}#dash-offset-box{margin-top:16px}#dash-offset-box h4{margin-bottom:2px}#dash-offset-inner-box{width:100%}#dash-offset-input{margin-left:6px;width:65px}</style>\n\n      <h2 id=\"panel-heading\">Stroke</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"stroke\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"width-section\">\n        <h3 id=\"width-section-heading\">Width</h3>\n\n        <x-box id=\"width-box\">\n          <x-slider id=\"width-slider\" value=\"1\" min=\"0\" max=\"50\" step=\"1\"></x-slider>\n\n          <x-numberinput id=\"width-input\" value=\"1\" min=\"0\" step=\"1\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n\n        <x-box id=\"non-scaling-stroke-box\">\n          <x-checkbox id=\"non-scaling-stroke-checkbox\"></x-checkbox>\n          <x-label id=\"non-scaling-stroke-label\" for=\"non-scaling-stroke-checkbox\">Non-scaling stroke</x-label>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"line-section\">\n        <h3 id=\"line-section-heading\">Line</h3>\n\n        <x-box>\n          <x-box id=\"line-cap-box\" vertical>\n            <h4 id=\"line-cap-box-heading\">Cap</h4>\n\n            <x-buttons id=\"line-cap-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"butt-line-cap-button\" value=\"butt\" title=\"Butt cap\" skin=\"flat\">\n                <x-icon name=\"cap-butt\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-cap-button\" value=\"round\" title=\"Round cap\" skin=\"flat\">\n                <x-icon name=\"cap-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"square-line-cap-button\" value=\"square\" title=\"Square cap\" skin=\"flat\">\n                <x-icon name=\"cap-square\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n\n          </x-box>\n\n          <x-box id=\"line-join-box\" vertical>\n            <h4 id=\"line-join-box-heading\">Join</h4>\n\n            <x-buttons id=\"line-join-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"miter-line-join-button\" value=\"miter\" title=\"Miter join\" skin=\"flat\">\n                <x-icon name=\"join-miter\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-join-button\" value=\"round\" title=\"Round join\" skin=\"flat\">\n                <x-icon name=\"join-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"bevel-line-join-button\" value=\"bevel\" title=\"Bevel join\" skin=\"flat\">\n                <x-icon name=\"join-bevel\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"dash-section\">\n        <h3 id=\"dash-section-heading\">Dash</h3>\n\n        <x-box id=\"dash-array-box\" vertical>\n          <h4 id=\"dash-array-box-heading\">Array</h4>\n\n          <x-select id=\"dash-array-select\">\n            <x-menu>\n              ","\n            </x-menu>\n          </x-select>\n\n          <x-box id=\"dash-array-inputs\">\n            <x-box vertical>\n              <x-numberinput id=\"dash-1-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-2-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-3-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-4-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-5-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-6-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"dash-offset-box\" vertical>\n          <h4>Offset</h4>\n\n          <x-box id=\"dash-offset-inner-box\">\n            <x-slider id=\"dash-offset-slider\" value=\"0\" min=\"-50\" max=\"50\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"dash-offset-input\" value=\"0\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:15px 20px 20px}#opacity-input{margin-left:6px;width:65px}#width-section{padding:15px 20px 17px}#width-input{margin-left:6px;width:65px}#non-scaling-stroke-box{margin-top:5px}#line-section{padding:15px 20px 17px}#line-section>x-box{justify-content:space-between}#dash-section{padding:10px 20px 20px}#dash-array-select{width:100%;margin-bottom:10px}#dash-array-inputs>x-box{width:40px;margin-left:-1px}#dash-array-inputs x-numberinput{width:100%;text-align:center;--inner-padding: 0 3px}#dash-array-inputs x-label{align-self:center;margin-right:4px;font-weight:900;opacity:.9}#dash-array-inputs x-label[disabled]{opacity:.4}#dash-array-inputs x-label.gap{opacity:.2}#dash-array-inputs x-label.gap[disabled]{opacity:.1}#dash-offset-box{margin-top:16px}#dash-offset-box h4{margin-bottom:2px}#dash-offset-inner-box{width:100%}#dash-offset-input{margin-left:6px;width:65px}</style>\n\n      <h2 id=\"panel-heading\">Stroke</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"stroke\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"width-section\">\n        <h3 id=\"width-section-heading\">Width</h3>\n\n        <x-box id=\"width-box\">\n          <x-slider id=\"width-slider\" value=\"1\" min=\"0\" max=\"50\" step=\"1\"></x-slider>\n\n          <x-numberinput id=\"width-input\" value=\"1\" min=\"0\" step=\"1\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n\n        <x-box id=\"non-scaling-stroke-box\">\n          <x-checkbox id=\"non-scaling-stroke-checkbox\"></x-checkbox>\n          <x-label id=\"non-scaling-stroke-label\" for=\"non-scaling-stroke-checkbox\">Non-scaling stroke</x-label>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"line-section\">\n        <h3 id=\"line-section-heading\">Line</h3>\n\n        <x-box>\n          <x-box id=\"line-cap-box\" vertical>\n            <h4 id=\"line-cap-box-heading\">Cap</h4>\n\n            <x-buttons id=\"line-cap-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"butt-line-cap-button\" value=\"butt\" title=\"Butt cap\" skin=\"flat\">\n                <x-icon name=\"cap-butt\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-cap-button\" value=\"round\" title=\"Round cap\" skin=\"flat\">\n                <x-icon name=\"cap-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"square-line-cap-button\" value=\"square\" title=\"Square cap\" skin=\"flat\">\n                <x-icon name=\"cap-square\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n\n          </x-box>\n\n          <x-box id=\"line-join-box\" vertical>\n            <h4 id=\"line-join-box-heading\">Join</h4>\n\n            <x-buttons id=\"line-join-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"miter-line-join-button\" value=\"miter\" title=\"Miter join\" skin=\"flat\">\n                <x-icon name=\"join-miter\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-join-button\" value=\"round\" title=\"Round join\" skin=\"flat\">\n                <x-icon name=\"join-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"bevel-line-join-button\" value=\"bevel\" title=\"Bevel join\" skin=\"flat\">\n                <x-icon name=\"join-bevel\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"dash-section\">\n        <h3 id=\"dash-section-heading\">Dash</h3>\n\n        <x-box id=\"dash-array-box\" vertical>\n          <h4 id=\"dash-array-box-heading\">Array</h4>\n\n          <x-select id=\"dash-array-select\">\n            <x-menu>\n              ","\n            </x-menu>\n          </x-select>\n\n          <x-box id=\"dash-array-inputs\">\n            <x-box vertical>\n              <x-numberinput id=\"dash-1-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-2-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-3-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-4-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-5-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-6-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"dash-offset-box\" vertical>\n          <h4>Offset</h4>\n\n          <x-box id=\"dash-offset-inner-box\">\n            <x-slider id=\"dash-offset-slider\" value=\"0\" min=\"-50\" max=\"50\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"dash-offset-input\" value=\"0\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject26=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#opacity-section{padding:10px 20px 20px}#opacity-input{margin-left:6px;width:65px}#blend-mode-section{padding:10px 20px}#blend-mode-select{width:100%}</style>\n\n      <h2 id=\"panel-heading\">Compositing</h2>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box id=\"opacity-box\">\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"blend-mode-section\">\n        <h3 id=\"blend-mode-section-heading\">Blend mode</h3>\n\n        <x-select id=\"blend-mode-select\">\n          <x-menu>\n            <x-menuitem value=\"normal\" selected=\"true\"><x-label>Normal</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"darken\"><x-label>Darken</x-label></x-menuitem>\n            <x-menuitem value=\"multiply\"><x-label>Multiply</x-label></x-menuitem>\n            <x-menuitem value=\"color-burn\"><x-label>Color Burn</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"lighten\"><x-label>Lighten</x-label></x-menuitem>\n            <x-menuitem value=\"screen\"><x-label>Screen</x-label></x-menuitem>\n            <x-menuitem value=\"color-dodge\"><x-label>Color Dodge</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"overlay\"><x-label>Overlay</x-label></x-menuitem>\n            <x-menuitem value=\"soft-light\"><x-label>Soft Light</x-label></x-menuitem>\n            <x-menuitem value=\"hard-light\"><x-label>Hard Light</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"difference\"><x-label>Difference</x-label></x-menuitem>\n            <x-menuitem value=\"exclusion\"><x-label>Exclusion</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"hue\"><x-label>Hue</x-label></x-menuitem>\n            <x-menuitem value=\"saturation\"><x-label>Saturation</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-box id=\"isolation-box\" style=\"margin-top: 8px;\">\n          <x-checkbox id=\"isolation-checkbox\"></x-checkbox>\n          <x-label id=\"isolation-label\" for=\"isolation-checkbox\">Isolate</x-label>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#opacity-section{padding:10px 20px 20px}#opacity-input{margin-left:6px;width:65px}#blend-mode-section{padding:10px 20px}#blend-mode-select{width:100%}</style>\n\n      <h2 id=\"panel-heading\">Compositing</h2>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box id=\"opacity-box\">\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"blend-mode-section\">\n        <h3 id=\"blend-mode-section-heading\">Blend mode</h3>\n\n        <x-select id=\"blend-mode-select\">\n          <x-menu>\n            <x-menuitem value=\"normal\" selected=\"true\"><x-label>Normal</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"darken\"><x-label>Darken</x-label></x-menuitem>\n            <x-menuitem value=\"multiply\"><x-label>Multiply</x-label></x-menuitem>\n            <x-menuitem value=\"color-burn\"><x-label>Color Burn</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"lighten\"><x-label>Lighten</x-label></x-menuitem>\n            <x-menuitem value=\"screen\"><x-label>Screen</x-label></x-menuitem>\n            <x-menuitem value=\"color-dodge\"><x-label>Color Dodge</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"overlay\"><x-label>Overlay</x-label></x-menuitem>\n            <x-menuitem value=\"soft-light\"><x-label>Soft Light</x-label></x-menuitem>\n            <x-menuitem value=\"hard-light\"><x-label>Hard Light</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"difference\"><x-label>Difference</x-label></x-menuitem>\n            <x-menuitem value=\"exclusion\"><x-label>Exclusion</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"hue\"><x-label>Hue</x-label></x-menuitem>\n            <x-menuitem value=\"saturation\"><x-label>Saturation</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-box id=\"isolation-box\" style=\"margin-top: 8px;\">\n          <x-checkbox id=\"isolation-checkbox\"></x-checkbox>\n          <x-label id=\"isolation-label\" for=\"isolation-checkbox\">Isolate</x-label>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject27=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block}#font-section{padding:10px 20px 20px}#font-family-subsection{margin-bottom:15px}#font-family-popover{width:200px}#font-family-hint{margin:7px 0 2px;font-size:11px;font-weight:500;line-height:1;opacity:.8}#font-family-hint[disabled]{opacity:.5;pointer-events:none}#font-family-hint span{text-decoration:underline}#font-family-hint span:hover{cursor:pointer}#font-family-button{width:100%;height:38px}#font-family-label{font-size:20px;line-height:20px;text-align:start}#font-family-popover{height:100%}#font-face-subsection{margin-bottom:15px}#font-face-box,#font-weight-select{width:100%}#font-style-button{height:26px;font-style:italic;margin:0 0 0 8px}#font-size-box{width:100%}#font-size-input{margin-left:6px;width:65px}#text-section{padding:16px 20px 18px}#text-section h4{margin-bottom:4px}#text-transform-box{margin-top:14px}#text-section x-button x-icon{width:20px;height:20px}#text-decoration-buttons,#text-transform-box,#text-transform-buttons{width:100%}#text-decoration-buttons x-button{padding:0 7px;height:28px;flex:1}#text-decoration-buttons x-label{font-weight:600;font-size:12px;text-align:center}#underline-button x-label{text-decoration:underline}#overline-button x-label{text-decoration:overline;line-height:1.3}#line-through-button x-label{text-decoration:line-through}#text-transform-buttons x-button{padding:0 5px;height:28px;flex:1}#text-transform-buttons x-label{font-weight:600;font-size:12px;text-align:center}#text-on-path-button{margin-top:6px;width:100%;text-align:center;height:28px}#spacing-section{padding:15px 20px 18px}#spacing-section-heading{margin-bottom:14px}#letter-spacing-box{margin-bottom:10px}#letter-spacing-heading{margin-bottom:0}#letter-spacing-inner-box{width:100%}#letter-spacing-input{margin-left:6px;width:60px;min-width:60px}#word-spacing-heading{margin-bottom:0}#word-spacing-inner-box{width:100%}#word-spacing-input{margin-left:6px;width:60px;min-width:60px}#text-on-path-section{padding:10px 20px}</style>\n\n      <h2 id=\"panel-heading\">Typography</h2>\n\n      <section id=\"font-section\">\n        <h3 id=\"font-section-heading\">Font</h3>\n\n        <x-box id=\"font-family-subsection\" vertical>\n          <h4 id=\"font-family-heading\">Family</h4>\n\n          <x-button id=\"font-family-button\">\n            <x-label id=\"font-family-label\">Arial</x-label>\n            <x-popover id=\"font-family-popover\">\n              <bx-fontfamilypicker id=\"font-family-picker\"></bx-fontfamilypicker>\n            </x-popover>\n          </x-button>\n\n          <div id=\"font-family-hint\">Add more fonts in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n        </x-box>\n\n        <x-box id=\"font-face-subsection\" vertical>\n          <h4 id=\"font-face-heading\">Face</h4>\n\n          <x-box id=\"font-face-box\">\n            <x-select id=\"font-weight-select\">\n              <x-menu id=\"font-weight-menu\">\n                <x-menuitem value=\"100\"><x-label>100 - Thin</x-label></x-menuitem>\n                <x-menuitem value=\"200\"><x-label>200 - Extra-Light</x-label></x-menuitem>\n                <x-menuitem value=\"300\"><x-label>300 - Light</x-label></x-menuitem>\n                <x-menuitem value=\"400\" selected=\"true\"><x-label>400 - Normal</x-label></x-menuitem>\n                <x-menuitem value=\"500\"><x-label>500 - Medium</x-label></x-menuitem>\n                <x-menuitem value=\"600\"><x-label>600 - Semi-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"700\"><x-label>700 - Bold</x-label></x-menuitem>\n                <x-menuitem value=\"800\"><x-label>800 - Extra-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"900\"><x-label>900 - Ultra-Bold</x-label></x-menuitem>\n              </x-menu>\n            </x-select>\n\n            <x-button id=\"font-style-button\" skin=\"condensed\" togglable>\n              <x-label>Italic</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"font-size-subsection\" vertical>\n          <h4 id=\"font-size-heading\">Size</h4>\n\n          <x-box id=\"font-size-box\">\n            <x-slider id=\"font-size-slider\" value=\"13\" min=\"1\" max=\"150\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"font-size-input\" value=\"13\" min=\"1\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"text-section\">\n        <h3 id=\"text-section-heading\">Text</h3>\n\n        <x-box id=\"text-decoration-box\" vertical>\n          <h4 id=\"text-decoration-heading\">Decoration</h4>\n\n          <x-buttons id=\"text-decoration-buttons\" tracking=\"2\">\n            <x-button id=\"underline-button\" value=\"underline\">\n              <x-box vertical>\n                <x-label>Underline</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"line-through-button\" value=\"line-through\">\n              <x-label>Line-through</x-label>\n            </x-button>\n\n            <x-button id=\"overline-button\" value=\"overline\">\n              <x-label>Overline</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n\n        <x-box id=\"text-transform-box\" vertical>\n          <h4 id=\"text-transform-heading\">Transform</h4>\n\n          <x-buttons id=\"text-transform-buttons\" tracking=\"0\">\n            <x-button id=\"capitalize-button\" value=\"capitalize\" skin=\"\">\n              <x-label>Capitalize</x-label>\n            </x-button>\n\n            <x-button id=\"uppercase-button\" value=\"uppercase\" skin=\"\">\n              <x-label>UPPERCASE</x-label>\n            </x-button>\n\n            <x-button id=\"lowercase-button\" value=\"lowercase\" skin=\"\">\n              <x-label>lowercase</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-button id=\"text-on-path-button\" togglable>\n            <x-label>Text on path</x-label>\n          </x-button>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"spacing-section\">\n        <h3 id=\"spacing-section-heading\">Spacing</h3>\n\n        <x-box id=\"letter-spacing-box\" vertical>\n          <h4 id=\"letter-spacing-heading\">Letter</h4>\n\n          <x-box id=\"letter-spacing-inner-box\">\n            <x-slider id=\"letter-spacing-slider\" value=\"0\" min=\"-20\" max=\"20\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"letter-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"word-spacing-box\" vertical>\n          <h4 id=\"word-spacing-heading\">Word</h4>\n\n          <x-box id=\"word-spacing-inner-box\">\n            <x-slider id=\"word-spacing-slider\" value=\"0\" min=\"-100\" max=\"100\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"word-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block}#font-section{padding:10px 20px 20px}#font-family-subsection{margin-bottom:15px}#font-family-popover{width:200px}#font-family-hint{margin:7px 0 2px;font-size:11px;font-weight:500;line-height:1;opacity:.8}#font-family-hint[disabled]{opacity:.5;pointer-events:none}#font-family-hint span{text-decoration:underline}#font-family-hint span:hover{cursor:pointer}#font-family-button{width:100%;height:38px}#font-family-label{font-size:20px;line-height:20px;text-align:start}#font-family-popover{height:100%}#font-face-subsection{margin-bottom:15px}#font-face-box,#font-weight-select{width:100%}#font-style-button{height:26px;font-style:italic;margin:0 0 0 8px}#font-size-box{width:100%}#font-size-input{margin-left:6px;width:65px}#text-section{padding:16px 20px 18px}#text-section h4{margin-bottom:4px}#text-transform-box{margin-top:14px}#text-section x-button x-icon{width:20px;height:20px}#text-decoration-buttons,#text-transform-box,#text-transform-buttons{width:100%}#text-decoration-buttons x-button{padding:0 7px;height:28px;flex:1}#text-decoration-buttons x-label{font-weight:600;font-size:12px;text-align:center}#underline-button x-label{text-decoration:underline}#overline-button x-label{text-decoration:overline;line-height:1.3}#line-through-button x-label{text-decoration:line-through}#text-transform-buttons x-button{padding:0 5px;height:28px;flex:1}#text-transform-buttons x-label{font-weight:600;font-size:12px;text-align:center}#text-on-path-button{margin-top:6px;width:100%;text-align:center;height:28px}#spacing-section{padding:15px 20px 18px}#spacing-section-heading{margin-bottom:14px}#letter-spacing-box{margin-bottom:10px}#letter-spacing-heading{margin-bottom:0}#letter-spacing-inner-box{width:100%}#letter-spacing-input{margin-left:6px;width:60px;min-width:60px}#word-spacing-heading{margin-bottom:0}#word-spacing-inner-box{width:100%}#word-spacing-input{margin-left:6px;width:60px;min-width:60px}#text-on-path-section{padding:10px 20px}</style>\n\n      <h2 id=\"panel-heading\">Typography</h2>\n\n      <section id=\"font-section\">\n        <h3 id=\"font-section-heading\">Font</h3>\n\n        <x-box id=\"font-family-subsection\" vertical>\n          <h4 id=\"font-family-heading\">Family</h4>\n\n          <x-button id=\"font-family-button\">\n            <x-label id=\"font-family-label\">Arial</x-label>\n            <x-popover id=\"font-family-popover\">\n              <bx-fontfamilypicker id=\"font-family-picker\"></bx-fontfamilypicker>\n            </x-popover>\n          </x-button>\n\n          <div id=\"font-family-hint\">Add more fonts in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n        </x-box>\n\n        <x-box id=\"font-face-subsection\" vertical>\n          <h4 id=\"font-face-heading\">Face</h4>\n\n          <x-box id=\"font-face-box\">\n            <x-select id=\"font-weight-select\">\n              <x-menu id=\"font-weight-menu\">\n                <x-menuitem value=\"100\"><x-label>100 - Thin</x-label></x-menuitem>\n                <x-menuitem value=\"200\"><x-label>200 - Extra-Light</x-label></x-menuitem>\n                <x-menuitem value=\"300\"><x-label>300 - Light</x-label></x-menuitem>\n                <x-menuitem value=\"400\" selected=\"true\"><x-label>400 - Normal</x-label></x-menuitem>\n                <x-menuitem value=\"500\"><x-label>500 - Medium</x-label></x-menuitem>\n                <x-menuitem value=\"600\"><x-label>600 - Semi-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"700\"><x-label>700 - Bold</x-label></x-menuitem>\n                <x-menuitem value=\"800\"><x-label>800 - Extra-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"900\"><x-label>900 - Ultra-Bold</x-label></x-menuitem>\n              </x-menu>\n            </x-select>\n\n            <x-button id=\"font-style-button\" skin=\"condensed\" togglable>\n              <x-label>Italic</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"font-size-subsection\" vertical>\n          <h4 id=\"font-size-heading\">Size</h4>\n\n          <x-box id=\"font-size-box\">\n            <x-slider id=\"font-size-slider\" value=\"13\" min=\"1\" max=\"150\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"font-size-input\" value=\"13\" min=\"1\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"text-section\">\n        <h3 id=\"text-section-heading\">Text</h3>\n\n        <x-box id=\"text-decoration-box\" vertical>\n          <h4 id=\"text-decoration-heading\">Decoration</h4>\n\n          <x-buttons id=\"text-decoration-buttons\" tracking=\"2\">\n            <x-button id=\"underline-button\" value=\"underline\">\n              <x-box vertical>\n                <x-label>Underline</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"line-through-button\" value=\"line-through\">\n              <x-label>Line-through</x-label>\n            </x-button>\n\n            <x-button id=\"overline-button\" value=\"overline\">\n              <x-label>Overline</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n\n        <x-box id=\"text-transform-box\" vertical>\n          <h4 id=\"text-transform-heading\">Transform</h4>\n\n          <x-buttons id=\"text-transform-buttons\" tracking=\"0\">\n            <x-button id=\"capitalize-button\" value=\"capitalize\" skin=\"\">\n              <x-label>Capitalize</x-label>\n            </x-button>\n\n            <x-button id=\"uppercase-button\" value=\"uppercase\" skin=\"\">\n              <x-label>UPPERCASE</x-label>\n            </x-button>\n\n            <x-button id=\"lowercase-button\" value=\"lowercase\" skin=\"\">\n              <x-label>lowercase</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-button id=\"text-on-path-button\" togglable>\n            <x-label>Text on path</x-label>\n          </x-button>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"spacing-section\">\n        <h3 id=\"spacing-section-heading\">Spacing</h3>\n\n        <x-box id=\"letter-spacing-box\" vertical>\n          <h4 id=\"letter-spacing-heading\">Letter</h4>\n\n          <x-box id=\"letter-spacing-inner-box\">\n            <x-slider id=\"letter-spacing-slider\" value=\"0\" min=\"-20\" max=\"20\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"letter-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"word-spacing-box\" vertical>\n          <h4 id=\"word-spacing-heading\">Word</h4>\n\n          <x-box id=\"word-spacing-inner-box\">\n            <x-slider id=\"word-spacing-slider\" value=\"0\" min=\"-100\" max=\"100\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"word-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject28=_taggedTemplateLiteral(["<path id=\"","\" d=\"","\"></path>"],["<path id=\"","\" d=\"","\"></path>"]),_templateObject29=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}section[hidden]+hr{display:none}#panel-heading-box{padding:20px 20px 0}#panel-heading{margin:0;padding:0}#help-button:hover{cursor:default}#viewport-section{padding:16px 20px 20px}#viewport-heading-box{margin-bottom:12px}#viewport-section-heading{margin-bottom:0}#viewport-width-box{margin-bottom:14px}#viewport-height-heading,#viewport-width-heading{margin-bottom:4px}#viewport-height-input,#viewport-width-input{flex:1}#viewport-height-unit-select,#viewport-width-unit-select{margin-left:5px;width:75px}#view-box-section{padding:20px 20px 16px}#view-box-heading-box{margin-bottom:12px}#view-box-section-heading{margin-bottom:0}#view-box-box{justify-content:space-between}#view-box-box x-label{align-self:center;margin:2px 4px 0 0;font-size:11px}#view-box-box x-numberinput{width:56px;text-align:center}#preserve-aspect-ratio-section{padding:18px 20px 20px}#preserve-aspect-ratio-heading-box{margin-bottom:12px}#preserve-aspect-ratio-section-heading{margin-bottom:0}#preserve-aspect-ratio-box{justify-content:space-between}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">View</h2>\n\n        <a href=\"http://sarasoueidan.com/blog/svg-coordinate-systems/\">\n          <x-button skin=\"help\" id=\"help-button\">\n            <x-icon name=\"question\"></x-icon>\n          </x-button>\n        </a>\n      </x-box>\n\n      <section id=\"view-box-section\">\n        <x-box id=\"view-box-heading-box\">\n          <h3 id=\"view-box-section-heading\">View box</h3>\n          <x-switch id=\"view-box-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"view-box-box\">\n          <x-box id=\"view-box-x-box\" vertical>\n            <x-numberinput id=\"view-box-x-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"x\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-x-label\">X</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-y-box\" vertical>\n            <x-numberinput id=\"view-box-y-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"y\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-y-label\">Y</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-width-box\" vertical>\n            <x-numberinput id=\"view-box-width-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"width\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-width-label\">Width</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-height-box\" vertical>\n            <x-numberinput id=\"view-box-height-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"height\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-height-label\">Height</x-label>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"viewport-section\">\n        <x-box id=\"viewport-heading-box\">\n          <h3 id=\"viewport-section-heading\">Viewport</h3>\n          <x-switch id=\"viewport-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <section id=\"viewport-width-subsection\">\n          <h4 id=\"viewport-width-heading\">Width</h4>\n\n          <x-box id=\"viewport-width-box\">\n            <x-numberinput id=\"viewport-width-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-width-unit-select\">\n              <x-menu>\n                ","\n              </x-menu>\n            </x-select>\n          </x-box>\n        </section>\n\n        <section id=\"viewport-height-subsection\">\n          <h4 id=\"viewport-height-heading\">Height</h4>\n\n          <x-box id=\"viewport-height-box\">\n            <x-numberinput id=\"viewport-height-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-height-unit-select\">\n              <x-menu>","</x-menu>\n            </x-select>\n          </x-box>\n        </section>\n      </section>\n\n      <hr/>\n\n      <section id=\"preserve-aspect-ratio-section\">\n        <x-box id=\"preserve-aspect-ratio-heading-box\">\n          <h3 id=\"preserve-aspect-ratio-section-heading\">Preserve aspect ratio</h3>\n          <x-switch id=\"preserve-aspect-ratio-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"preserve-aspect-ratio-box\">\n          <x-box id=\"align-box\" vertical>\n            <h4 id=\"align-heading\">Align</h4>\n            <bx-alignbuttons id=\"align-buttons\" tracking=\"1\" value=\"xMidYMid\"></bx-alignbuttons>\n          </x-box>\n\n          <x-buttons id=\"meet-or-slice-buttons\" tracking=\"1\">\n            <x-button id=\"meet-button\" value=\"meet\" toggled>\n              <x-label>Meet</x-label>\n            </x-button>\n\n            <x-button id=\"slice-button\" value=\"slice\">\n              <x-label>Slice</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}section[hidden]+hr{display:none}#panel-heading-box{padding:20px 20px 0}#panel-heading{margin:0;padding:0}#help-button:hover{cursor:default}#viewport-section{padding:16px 20px 20px}#viewport-heading-box{margin-bottom:12px}#viewport-section-heading{margin-bottom:0}#viewport-width-box{margin-bottom:14px}#viewport-height-heading,#viewport-width-heading{margin-bottom:4px}#viewport-height-input,#viewport-width-input{flex:1}#viewport-height-unit-select,#viewport-width-unit-select{margin-left:5px;width:75px}#view-box-section{padding:20px 20px 16px}#view-box-heading-box{margin-bottom:12px}#view-box-section-heading{margin-bottom:0}#view-box-box{justify-content:space-between}#view-box-box x-label{align-self:center;margin:2px 4px 0 0;font-size:11px}#view-box-box x-numberinput{width:56px;text-align:center}#preserve-aspect-ratio-section{padding:18px 20px 20px}#preserve-aspect-ratio-heading-box{margin-bottom:12px}#preserve-aspect-ratio-section-heading{margin-bottom:0}#preserve-aspect-ratio-box{justify-content:space-between}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">View</h2>\n\n        <a href=\"http://sarasoueidan.com/blog/svg-coordinate-systems/\">\n          <x-button skin=\"help\" id=\"help-button\">\n            <x-icon name=\"question\"></x-icon>\n          </x-button>\n        </a>\n      </x-box>\n\n      <section id=\"view-box-section\">\n        <x-box id=\"view-box-heading-box\">\n          <h3 id=\"view-box-section-heading\">View box</h3>\n          <x-switch id=\"view-box-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"view-box-box\">\n          <x-box id=\"view-box-x-box\" vertical>\n            <x-numberinput id=\"view-box-x-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"x\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-x-label\">X</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-y-box\" vertical>\n            <x-numberinput id=\"view-box-y-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"y\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-y-label\">Y</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-width-box\" vertical>\n            <x-numberinput id=\"view-box-width-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"width\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-width-label\">Width</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-height-box\" vertical>\n            <x-numberinput id=\"view-box-height-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"height\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-height-label\">Height</x-label>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"viewport-section\">\n        <x-box id=\"viewport-heading-box\">\n          <h3 id=\"viewport-section-heading\">Viewport</h3>\n          <x-switch id=\"viewport-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <section id=\"viewport-width-subsection\">\n          <h4 id=\"viewport-width-heading\">Width</h4>\n\n          <x-box id=\"viewport-width-box\">\n            <x-numberinput id=\"viewport-width-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-width-unit-select\">\n              <x-menu>\n                ","\n              </x-menu>\n            </x-select>\n          </x-box>\n        </section>\n\n        <section id=\"viewport-height-subsection\">\n          <h4 id=\"viewport-height-heading\">Height</h4>\n\n          <x-box id=\"viewport-height-box\">\n            <x-numberinput id=\"viewport-height-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-height-unit-select\">\n              <x-menu>","</x-menu>\n            </x-select>\n          </x-box>\n        </section>\n      </section>\n\n      <hr/>\n\n      <section id=\"preserve-aspect-ratio-section\">\n        <x-box id=\"preserve-aspect-ratio-heading-box\">\n          <h3 id=\"preserve-aspect-ratio-section-heading\">Preserve aspect ratio</h3>\n          <x-switch id=\"preserve-aspect-ratio-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"preserve-aspect-ratio-box\">\n          <x-box id=\"align-box\" vertical>\n            <h4 id=\"align-heading\">Align</h4>\n            <bx-alignbuttons id=\"align-buttons\" tracking=\"1\" value=\"xMidYMid\"></bx-alignbuttons>\n          </x-box>\n\n          <x-buttons id=\"meet-or-slice-buttons\" tracking=\"1\">\n            <x-button id=\"meet-button\" value=\"meet\" toggled>\n              <x-label>Meet</x-label>\n            </x-button>\n\n            <x-button id=\"slice-button\" value=\"slice\">\n              <x-label>Slice</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject30=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%}#container{display:flex;flex-flow:column;width:100%;height:100%}#header h2{margin-bottom:16px}#main{flex:1;padding:4px 0;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;contain:strict;box-sizing:border-box;outline:0;position:relative}#drop-marker,.item>.main{display:flex;align-items:center}#drop-marker{top:23px;width:100%;height:2px;color:#1c5ea5;background:currentColor;box-shadow:0 0 0 1px rgba(255,255,255,.7);pointer-events:none;position:fixed;z-index:100}#drop-marker[hidden]{display:none}#drop-marker #drop-marker-circle{width:8px;height:8px;box-sizing:border-box;border:2px solid currentColor;background:#fff;border-radius:99px;box-shadow:0 0 0 1px rgba(255,255,255,.7)}.item{position:relative}.item>.background{position:absolute;z-index:0;top:0;left:0;width:100%;height:20px}.item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]>.background{background:#d20f0f}.item>.main{position:relative;z-index:1;padding:0 0 0 24px}.item[data-selected]>.main{color:#fff}.item>.children-outer{overflow:hidden}.item>.children-outer .children{transform-origin:0 0}.item .action-buttons{margin-left:auto;display:flex}.item x-input{height:100%;outline:0;border:0;max-width:none;flex:1;margin-left:5px;font-size:13px}.item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:1px;color:#d20f0f;z-index:100;pointer-events:none}.item use{fill:currentColor}.item>.main .label{margin-left:10px;font-size:13px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.item>.main .label[data-custom]{font-weight:700}.item>.main .object-icon{width:15px;height:15px;min-width:15px}.item .arrow-button,.item .lock-button,.item .visibility-button{height:20px;display:flex;align-items:center;justify-content:center;visibility:hidden;pointer-events:none}.item .arrow-button{min-width:27px;width:27px}.item[data-expandable]>.main .arrow-button{visibility:visible;pointer-events:all}.item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.item .lock-button,.item .visibility-button{width:20px;opacity:.3}.item>.main:hover .lock-button{visibility:visible;pointer-events:all}.item[data-locked]>.main .lock-button{visibility:visible;pointer-events:all;opacity:1}.item>.main .lock-icon,.item>.main .visibility-icon{width:15px;height:15px;min-width:15px}.item .visibility-button{padding-right:4px}.item>.main:hover .visibility-button{visibility:visible;pointer-events:all}.item[data-hidden]>.main .visibility-button{visibility:visible;pointer-events:all;opacity:1}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}</style>\n\n      <div id=\"container\">\n        <header id=\"header\">\n          <h2>Objects</h2>\n        </header>\n\n        <main id=\"main\" tabindex=\"0\">\n          <div id=\"items\"></div>\n\n          <div id=\"drop-marker\" hidden>\n            <div id=\"drop-marker-circle\"></div>\n          </div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </div>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%}#container{display:flex;flex-flow:column;width:100%;height:100%}#header h2{margin-bottom:16px}#main{flex:1;padding:4px 0;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;contain:strict;box-sizing:border-box;outline:0;position:relative}#drop-marker,.item>.main{display:flex;align-items:center}#drop-marker{top:23px;width:100%;height:2px;color:#1c5ea5;background:currentColor;box-shadow:0 0 0 1px rgba(255,255,255,.7);pointer-events:none;position:fixed;z-index:100}#drop-marker[hidden]{display:none}#drop-marker #drop-marker-circle{width:8px;height:8px;box-sizing:border-box;border:2px solid currentColor;background:#fff;border-radius:99px;box-shadow:0 0 0 1px rgba(255,255,255,.7)}.item{position:relative}.item>.background{position:absolute;z-index:0;top:0;left:0;width:100%;height:20px}.item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]>.background{background:#d20f0f}.item>.main{position:relative;z-index:1;padding:0 0 0 24px}.item[data-selected]>.main{color:#fff}.item>.children-outer{overflow:hidden}.item>.children-outer .children{transform-origin:0 0}.item .action-buttons{margin-left:auto;display:flex}.item x-input{height:100%;outline:0;border:0;max-width:none;flex:1;margin-left:5px;font-size:13px}.item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:1px;color:#d20f0f;z-index:100;pointer-events:none}.item use{fill:currentColor}.item>.main .label{margin-left:10px;font-size:13px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.item>.main .label[data-custom]{font-weight:700}.item>.main .object-icon{width:15px;height:15px;min-width:15px}.item .arrow-button,.item .lock-button,.item .visibility-button{height:20px;display:flex;align-items:center;justify-content:center;visibility:hidden;pointer-events:none}.item .arrow-button{min-width:27px;width:27px}.item[data-expandable]>.main .arrow-button{visibility:visible;pointer-events:all}.item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.item .lock-button,.item .visibility-button{width:20px;opacity:.3}.item>.main:hover .lock-button{visibility:visible;pointer-events:all}.item[data-locked]>.main .lock-button{visibility:visible;pointer-events:all;opacity:1}.item>.main .lock-icon,.item>.main .visibility-icon{width:15px;height:15px;min-width:15px}.item .visibility-button{padding-right:4px}.item>.main:hover .visibility-button{visibility:visible;pointer-events:all}.item[data-hidden]>.main .visibility-button{visibility:visible;pointer-events:all;opacity:1}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}</style>\n\n      <div id=\"container\">\n        <header id=\"header\">\n          <h2>Objects</h2>\n        </header>\n\n        <main id=\"main\" tabindex=\"0\">\n          <div id=\"items\"></div>\n\n          <div id=\"drop-marker\" hidden>\n            <div id=\"drop-marker-circle\"></div>\n          </div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </div>\n    </template>\n  "]),_templateObject31=_taggedTemplateLiteral(["<x-input value=\"","\" instantvalidation><x-label>","</x-label></x-input>"],["<x-input value=\"","\" instantvalidation><x-label>","</x-label></x-input>"]),_templateObject32=_taggedTemplateLiteral(["\n        <div class=\"item\" data-depth=\"","\">\n          <div class=\"background\"></div>\n\n          <div class=\"main\" style=\"padding-left: ","px;\">\n            <div class=\"arrow-button\">\n              <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#arrow\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n            </div>\n\n            <svg class=\"object-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n\n            <div class=\"action-buttons\">\n              <div class=\"lock-button\">\n                <svg class=\"lock-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#lock-on\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n\n              <div class=\"visibility-button\">\n                <svg class=\"visibility-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#visibility-hidden\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"children-outer\">\n            <div class=\"children\"></div>\n          </div>\n        </div>\n      "],["\n        <div class=\"item\" data-depth=\"","\">\n          <div class=\"background\"></div>\n\n          <div class=\"main\" style=\"padding-left: ","px;\">\n            <div class=\"arrow-button\">\n              <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#arrow\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n            </div>\n\n            <svg class=\"object-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n\n            <div class=\"action-buttons\">\n              <div class=\"lock-button\">\n                <svg class=\"lock-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#lock-on\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n\n              <div class=\"visibility-button\">\n                <svg class=\"visibility-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#visibility-hidden\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"children-outer\">\n            <div class=\"children\"></div>\n          </div>\n        </div>\n      "]),_templateObject33=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#n-gon-arms-box h4,#n-gon-corner-box h4,#object-rotation-box h4,#star-arms-box h4,#star-depth-box h4,#triangle-corner-box h4,#triangle-shift-box h4,h2{margin-bottom:0}#object-section{padding:18px 20px}#object-position-box,#object-size-box{margin-top:14px}#line-section x-numberinput,#n-gon-arms-box>x-box,#n-gon-corner-box>x-box,#object-origin-position-box x-numberinput,#object-position-box x-numberinput,#object-rotation-box>x-box,#object-size-box x-numberinput,#star-arms-box>x-box,#star-depth-box>x-box,#triangle-corner-box>x-box,#triangle-shift-box>x-box{width:100%}#object-position-box #object-x-box{flex:1;margin-right:13px}#object-position-box #object-y-box{flex:1;margin-left:13px}#object-size-box #object-height-box,#object-size-box #object-width-box{flex:1}#object-aspect-ratio-button{align-self:flex-end;margin:0}#object-aspect-ratio-button x-icon{width:18px;height:18px;min-width:18px;margin:0 4px 2px;align-self:flex-end;color:#8c8c8c}#object-origin-position-box,#object-rotation-box{margin-top:14px}#object-origin-position-box #object-origin-x-box{flex:1;margin-right:13px}#object-origin-position-box #object-origin-y-box{flex:1;margin-left:13px}#object-rotation-input{margin-left:10px;width:80px}#line-section{padding:18px 20px}#line-section>x-box:last-child,#n-gon-section>x-box:last-child,#star-section>x-box:last-child,#triangle-section>x-box:last-child{margin-top:14px}#line-x1-box,#line-x2-box{flex:1;margin-right:13px}#line-y1-box,#line-y2-box{flex:1;margin-left:13px}#triangle-section{padding:18px 20px}#triangle-shift-box{margin-top:14px}#triangle-shift-input{margin-left:10px;width:80px}#triangle-corner-box{margin-top:14px}#triangle-corner-input{margin-left:10px;width:80px}#n-gon-section{padding:18px 20px}#n-gon-arms-box{margin-top:14px}#n-gon-arms-input{margin-left:10px;width:80px}#n-gon-corner-box{margin-top:14px}#n-gon-corner-input{margin-left:10px;width:80px}#star-section{padding:18px 20px}#star-arms-box{margin-top:14px}#star-arms-input{margin-left:10px;width:80px}#star-depth-box{margin-top:14px}#star-depth-input{margin-left:10px;width:80px}#guide-section{padding:18px 20px}#guide-x-box,#guide-y-box{flex:1}#guide-y-box{margin-left:8px}#guide-x-input,#guide-y-input{width:100%}#guide-orientation-box{margin-top:14px}#guide-orientation-buttons{width:100%}#guide-orientation-buttons x-button{flex:1;text-align:center}</style>\n\n      <main id=\"main\">\n        <h2 id=\"panel-heading\">Geometry</h2>\n\n        <section id=\"object-section\">\n          <h3 id=\"object-section-heading\">Object</h3>\n\n          <x-box id=\"object-position-box\">\n            <x-box id=\"object-x-box\" vertical>\n              <h4 id=\"object-x-heading\">X</h4>\n\n              <x-numberinput id=\"object-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-y-box\" vertical>\n              <h4 id=\"object-y-heading\">Y</h4>\n\n              <x-numberinput id=\"object-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-size-box\">\n            <x-box id=\"object-width-box\" vertical>\n              <h4 id=\"object-width-heading\">Width</h4>\n\n              <x-numberinput id=\"object-width-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"object-aspect-ratio-button\" togglable skin=\"flat\">\n              <x-icon id=\"object-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"object-height-box\" vertical>\n              <h4 id=\"object-height-heading\">Height</h4>\n\n              <x-numberinput id=\"object-height-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-origin-position-box\">\n            <x-box id=\"object-origin-x-box\" vertical>\n              <h4 id=\"object-origin-x-heading\">Origin X</h4>\n\n              <x-numberinput id=\"object-origin-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-origin-y-box\" vertical>\n              <h4 id=\"object-origin-y-heading\">Origin Y</h4>\n\n              <x-numberinput id=\"object-origin-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-rotation-box\" vertical>\n            <h4 id=\"object-rotation-heading\">Rotation</h4>\n\n            <x-box>\n              <x-slider id=\"object-rotation-slider\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"object-rotation-input\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\" suffix=\"\xB0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"line-section\">\n          <h3 id=\"line-section-heading\">Line</h3>\n\n          <x-box>\n            <x-box id=\"line-x1-box\" vertical>\n              <h4 id=\"line-x1-heading\">X1</h4>\n\n              <x-numberinput id=\"line-x1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y1-box\" vertical>\n              <h4 id=\"line-y1-heading\">Y1</h4>\n\n              <x-numberinput id=\"line-y1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box>\n            <x-box id=\"line-x2-box\" vertical>\n              <h4 id=\"line-x2-heading\">X2</h4>\n\n              <x-numberinput id=\"line-x2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y2-box\" vertical>\n              <h4 id=\"line-y2-heading\">Y2</h4>\n\n              <x-numberinput id=\"line-y2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"triangle-section\">\n          <h3 id=\"triangle-section-heading\">Triangle</h3>\n\n          <x-box id=\"triangle-shift-box\" vertical>\n            <h4 id=\"triangle-shift-heading\">Shift</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-shift-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-shift-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n\n          <x-box id=\"triangle-corner-box\" vertical>\n            <h4 id=\"triangle-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"n-gon-section\">\n          <h3 id=\"n-gon-section-heading\">N-gon</h3>\n\n          <x-box id=\"n-gon-arms-box\" vertical>\n            <h4 id=\"n-gon-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-arms-slider\" value=\"5\" min=\"5\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"n-gon-arms-input\" value=\"5\" min=\"5\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"n-gon-corner-box\" vertical>\n            <h4 id=\"n-gon-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"n-gon-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"star-section\">\n          <h3 id=\"star-section-heading\">Star</h3>\n\n          <x-box id=\"star-arms-box\" vertical>\n            <h4 id=\"star-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"star-arms-slider\" value=\"5\" min=\"5\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"star-arms-input\" value=\"5\" min=\"5\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"star-depth-box\" vertical>\n            <h4 id=\"star-depth-heading\">Shift</h4>\n\n            <x-box>\n              <x-slider id=\"star-depth-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"star-depth-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"guide-section\">\n          <h3 id=\"guide-section-heading\">Guide</h3>\n\n          <x-box id=\"guide-position-box\">\n            <x-box id=\"guide-x-box\" vertical>\n              <h4>X</h4>\n\n              <x-numberinput id=\"guide-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"guide-y-box\" vertical>\n              <h4>Y</h4>\n\n              <x-numberinput id=\"guide-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"guide-orientation-box\" vertical>\n            <h4>Orientation</h4>\n\n            <x-buttons id=\"guide-orientation-buttons\" tracking=\"1\">\n              <x-button value=\"horizontal\" toggled>\n                <x-label>Horizontal</x-label>\n              </x-button>\n\n              <x-button value=\"vertical\">\n                <x-label>Vertical</x-label>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </section>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#n-gon-arms-box h4,#n-gon-corner-box h4,#object-rotation-box h4,#star-arms-box h4,#star-depth-box h4,#triangle-corner-box h4,#triangle-shift-box h4,h2{margin-bottom:0}#object-section{padding:18px 20px}#object-position-box,#object-size-box{margin-top:14px}#line-section x-numberinput,#n-gon-arms-box>x-box,#n-gon-corner-box>x-box,#object-origin-position-box x-numberinput,#object-position-box x-numberinput,#object-rotation-box>x-box,#object-size-box x-numberinput,#star-arms-box>x-box,#star-depth-box>x-box,#triangle-corner-box>x-box,#triangle-shift-box>x-box{width:100%}#object-position-box #object-x-box{flex:1;margin-right:13px}#object-position-box #object-y-box{flex:1;margin-left:13px}#object-size-box #object-height-box,#object-size-box #object-width-box{flex:1}#object-aspect-ratio-button{align-self:flex-end;margin:0}#object-aspect-ratio-button x-icon{width:18px;height:18px;min-width:18px;margin:0 4px 2px;align-self:flex-end;color:#8c8c8c}#object-origin-position-box,#object-rotation-box{margin-top:14px}#object-origin-position-box #object-origin-x-box{flex:1;margin-right:13px}#object-origin-position-box #object-origin-y-box{flex:1;margin-left:13px}#object-rotation-input{margin-left:10px;width:80px}#line-section{padding:18px 20px}#line-section>x-box:last-child,#n-gon-section>x-box:last-child,#star-section>x-box:last-child,#triangle-section>x-box:last-child{margin-top:14px}#line-x1-box,#line-x2-box{flex:1;margin-right:13px}#line-y1-box,#line-y2-box{flex:1;margin-left:13px}#triangle-section{padding:18px 20px}#triangle-shift-box{margin-top:14px}#triangle-shift-input{margin-left:10px;width:80px}#triangle-corner-box{margin-top:14px}#triangle-corner-input{margin-left:10px;width:80px}#n-gon-section{padding:18px 20px}#n-gon-arms-box{margin-top:14px}#n-gon-arms-input{margin-left:10px;width:80px}#n-gon-corner-box{margin-top:14px}#n-gon-corner-input{margin-left:10px;width:80px}#star-section{padding:18px 20px}#star-arms-box{margin-top:14px}#star-arms-input{margin-left:10px;width:80px}#star-depth-box{margin-top:14px}#star-depth-input{margin-left:10px;width:80px}#guide-section{padding:18px 20px}#guide-x-box,#guide-y-box{flex:1}#guide-y-box{margin-left:8px}#guide-x-input,#guide-y-input{width:100%}#guide-orientation-box{margin-top:14px}#guide-orientation-buttons{width:100%}#guide-orientation-buttons x-button{flex:1;text-align:center}</style>\n\n      <main id=\"main\">\n        <h2 id=\"panel-heading\">Geometry</h2>\n\n        <section id=\"object-section\">\n          <h3 id=\"object-section-heading\">Object</h3>\n\n          <x-box id=\"object-position-box\">\n            <x-box id=\"object-x-box\" vertical>\n              <h4 id=\"object-x-heading\">X</h4>\n\n              <x-numberinput id=\"object-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-y-box\" vertical>\n              <h4 id=\"object-y-heading\">Y</h4>\n\n              <x-numberinput id=\"object-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-size-box\">\n            <x-box id=\"object-width-box\" vertical>\n              <h4 id=\"object-width-heading\">Width</h4>\n\n              <x-numberinput id=\"object-width-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"object-aspect-ratio-button\" togglable skin=\"flat\">\n              <x-icon id=\"object-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"object-height-box\" vertical>\n              <h4 id=\"object-height-heading\">Height</h4>\n\n              <x-numberinput id=\"object-height-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-origin-position-box\">\n            <x-box id=\"object-origin-x-box\" vertical>\n              <h4 id=\"object-origin-x-heading\">Origin X</h4>\n\n              <x-numberinput id=\"object-origin-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-origin-y-box\" vertical>\n              <h4 id=\"object-origin-y-heading\">Origin Y</h4>\n\n              <x-numberinput id=\"object-origin-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-rotation-box\" vertical>\n            <h4 id=\"object-rotation-heading\">Rotation</h4>\n\n            <x-box>\n              <x-slider id=\"object-rotation-slider\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"object-rotation-input\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\" suffix=\"\xB0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"line-section\">\n          <h3 id=\"line-section-heading\">Line</h3>\n\n          <x-box>\n            <x-box id=\"line-x1-box\" vertical>\n              <h4 id=\"line-x1-heading\">X1</h4>\n\n              <x-numberinput id=\"line-x1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y1-box\" vertical>\n              <h4 id=\"line-y1-heading\">Y1</h4>\n\n              <x-numberinput id=\"line-y1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box>\n            <x-box id=\"line-x2-box\" vertical>\n              <h4 id=\"line-x2-heading\">X2</h4>\n\n              <x-numberinput id=\"line-x2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y2-box\" vertical>\n              <h4 id=\"line-y2-heading\">Y2</h4>\n\n              <x-numberinput id=\"line-y2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"triangle-section\">\n          <h3 id=\"triangle-section-heading\">Triangle</h3>\n\n          <x-box id=\"triangle-shift-box\" vertical>\n            <h4 id=\"triangle-shift-heading\">Shift</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-shift-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-shift-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n\n          <x-box id=\"triangle-corner-box\" vertical>\n            <h4 id=\"triangle-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"n-gon-section\">\n          <h3 id=\"n-gon-section-heading\">N-gon</h3>\n\n          <x-box id=\"n-gon-arms-box\" vertical>\n            <h4 id=\"n-gon-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-arms-slider\" value=\"5\" min=\"5\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"n-gon-arms-input\" value=\"5\" min=\"5\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"n-gon-corner-box\" vertical>\n            <h4 id=\"n-gon-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"n-gon-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"star-section\">\n          <h3 id=\"star-section-heading\">Star</h3>\n\n          <x-box id=\"star-arms-box\" vertical>\n            <h4 id=\"star-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"star-arms-slider\" value=\"5\" min=\"5\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"star-arms-input\" value=\"5\" min=\"5\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"star-depth-box\" vertical>\n            <h4 id=\"star-depth-heading\">Shift</h4>\n\n            <x-box>\n              <x-slider id=\"star-depth-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"star-depth-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"guide-section\">\n          <h3 id=\"guide-section-heading\">Guide</h3>\n\n          <x-box id=\"guide-position-box\">\n            <x-box id=\"guide-x-box\" vertical>\n              <h4>X</h4>\n\n              <x-numberinput id=\"guide-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"guide-y-box\" vertical>\n              <h4>Y</h4>\n\n              <x-numberinput id=\"guide-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"guide-orientation-box\" vertical>\n            <h4>Orientation</h4>\n\n            <x-buttons id=\"guide-orientation-buttons\" tracking=\"1\">\n              <x-button value=\"horizontal\" toggled>\n                <x-label>Horizontal</x-label>\n              </x-button>\n\n              <x-button value=\"vertical\">\n                <x-label>Vertical</x-label>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </section>\n      </main>\n    </template>\n  "]),_templateObject34=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;flex-flow:column;width:100%;height:100%}#accessibility-section,#title-section{padding:10px 20px 20px}#title-heading{margin-bottom:3px}#title-input{width:100%;max-width:none}#desc-box{margin-top:12px}#desc-heading{margin-bottom:3px}#desc-textarea{width:100%;height:120px;max-width:none}#scripting-section{padding:15px 20px 20px}#id-box{margin-top:8px}#id-heading{margin-bottom:3px}#id-input{width:100%;max-width:none}#classes-box{margin-top:20px}#classes-heading{margin-bottom:3px}#classes-input{width:100%;min-height:48px;max-width:none}</style>\n\n      <h2 id=\"panel-heading\">Metadata</h2>\n\n      <section id=\"accessibility-section\">\n        <h3 id=\"accessibility-heading\">Accessibility</h3>\n\n        <x-box id=\"title-box\" vertical>\n          <h4 id=\"title-heading\">Title</h4>\n          <x-input id=\"title-input\" spellcheck></x-input>\n        </x-box>\n\n        <x-box id=\"desc-box\" vertical>\n          <h4 id=\"desc-heading\">Description</h4>\n          <x-textarea id=\"desc-textarea\" spellcheck></x-textarea>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"scripting-section\">\n        <h3 id=\"scripting-heading\">Scripting</h3>\n\n        <x-box id=\"id-box\" vertical>\n          <h4 id=\"id-heading\">ID</h4>\n          <x-input id=\"id-input\" instantvalidation></x-input>\n        </x-box>\n\n        <x-box id=\"classes-box\" vertical>\n          <h4 id=\"classes-heading\">Classes</h4>\n          <x-taginput id=\"classes-input\" delimiter=\" \"></x-taginput>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;flex-flow:column;width:100%;height:100%}#accessibility-section,#title-section{padding:10px 20px 20px}#title-heading{margin-bottom:3px}#title-input{width:100%;max-width:none}#desc-box{margin-top:12px}#desc-heading{margin-bottom:3px}#desc-textarea{width:100%;height:120px;max-width:none}#scripting-section{padding:15px 20px 20px}#id-box{margin-top:8px}#id-heading{margin-bottom:3px}#id-input{width:100%;max-width:none}#classes-box{margin-top:20px}#classes-heading{margin-bottom:3px}#classes-input{width:100%;min-height:48px;max-width:none}</style>\n\n      <h2 id=\"panel-heading\">Metadata</h2>\n\n      <section id=\"accessibility-section\">\n        <h3 id=\"accessibility-heading\">Accessibility</h3>\n\n        <x-box id=\"title-box\" vertical>\n          <h4 id=\"title-heading\">Title</h4>\n          <x-input id=\"title-input\" spellcheck></x-input>\n        </x-box>\n\n        <x-box id=\"desc-box\" vertical>\n          <h4 id=\"desc-heading\">Description</h4>\n          <x-textarea id=\"desc-textarea\" spellcheck></x-textarea>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"scripting-section\">\n        <h3 id=\"scripting-heading\">Scripting</h3>\n\n        <x-box id=\"id-box\" vertical>\n          <h4 id=\"id-heading\">ID</h4>\n          <x-input id=\"id-input\" instantvalidation></x-input>\n        </x-box>\n\n        <x-box id=\"classes-box\" vertical>\n          <h4 id=\"classes-heading\">Classes</h4>\n          <x-taginput id=\"classes-input\" delimiter=\" \"></x-taginput>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject35=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#general-section{padding:10px 20px 20px}#open-close-buttons>.row{width:100%}#open-close-buttons>.row-2{margin-top:8px}#boolop-buttons x-button,#compound-path-buttons x-button,#open-close-buttons x-button{width:100%;height:34px}#boolop-buttons x-button:last-child,#compound-path-buttons x-button:last-child,#open-close-buttons x-button:last-child{margin-left:8px}#open-close-buttons x-button x-icon{width:21px;height:21px}#boolop-buttons x-button x-label,#compound-path-buttons x-button x-label,#open-close-buttons x-button x-label{flex:none;margin-left:5px}#object-to-path-button,#reverse-path-button,#stroke-to-path-button{width:100%;height:34px;margin-top:8px}#object-to-path-button x-icon,#reverse-path-button x-icon,#stroke-to-path-button x-icon{width:20px;height:20px}#object-to-path-button x-label,#reverse-path-button x-label,#stroke-to-path-button x-label{flex:none;margin-left:8px}#boolops-section{padding:10px 20px 20px}#boolop-buttons>.row{width:100%}#boolop-buttons>.row-2{margin-top:8px}#boolop-buttons x-button x-icon{width:24px;height:24px}#compound-path-section{padding:20px}#compound-path-buttons>.row{width:100%}#compound-path-buttons>.row-2{margin-top:8px}#compound-path-buttons x-button x-icon{width:21px;height:21px}</style>\n\n      <h2 id=\"panel-heading\">Path</h2>\n\n      <section id=\"general-section\">\n        <h3 id=\"general-section-heading\" hidden>General</h3>\n\n        <x-box id=\"open-close-buttons\" class=\"row\">\n          <x-button id=\"open-path-button\" value=\"open\">\n            <x-icon name=\"open-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Open</x-label>\n          </x-button>\n\n          <x-button id=\"close-path-button\" value=\"close\">\n            <x-icon name=\"close-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Close</x-label>\n          </x-button>\n        </x-box>\n\n        <x-button id=\"reverse-path-button\">\n          <x-icon name=\"reverse-path\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Reverse</x-label>\n        </x-button>\n\n        <x-button id=\"object-to-path-button\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Object to path</x-label>\n        </x-button>\n\n        <x-button id=\"stroke-to-path-button\" hidden>\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Stroke to path</x-label>\n        </x-button>\n      </section>\n\n      <hr/>\n\n      <section id=\"boolops-section\">\n        <h3 id=\"boolops-section-heading\">Boolops</h3>\n\n        <x-box id=\"boolop-buttons\" vertical>\n          <x-box class=\"row row-1\">\n            <x-button id=\"unite-button\" value=\"unite\">\n              <x-icon name=\"boolop-unite\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Unite</x-label>\n            </x-button>\n\n            <x-button id=\"intersect-button\" value=\"intersect\">\n              <x-icon name=\"boolop-intersect\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Intersect</x-label>\n            </x-button>\n          </x-box>\n\n          <x-box class=\"row row-2\">\n            <x-button id=\"subtract-button\" value=\"subtract\">\n              <x-icon name=\"boolop-subtract\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Subtract</x-label>\n            </x-button>\n\n            <x-button id=\"exclude-button\" value=\"exclude\">\n              <x-icon name=\"boolop-exclude\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Exclude</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"compound-path-section\">\n        <h3 id=\"compound-path-heading\">Compound path</h3>\n\n        <x-box id=\"compound-path-buttons\" class=\"row\">\n          <x-button id=\"join-button\" value=\"join\">\n            <x-icon name=\"compound-path-join\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Join</x-label>\n          </x-button>\n\n          <x-button id=\"split-button\" value=\"split\">\n            <x-icon name=\"compound-path-split\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Split</x-label>\n          </x-button>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#general-section{padding:10px 20px 20px}#open-close-buttons>.row{width:100%}#open-close-buttons>.row-2{margin-top:8px}#boolop-buttons x-button,#compound-path-buttons x-button,#open-close-buttons x-button{width:100%;height:34px}#boolop-buttons x-button:last-child,#compound-path-buttons x-button:last-child,#open-close-buttons x-button:last-child{margin-left:8px}#open-close-buttons x-button x-icon{width:21px;height:21px}#boolop-buttons x-button x-label,#compound-path-buttons x-button x-label,#open-close-buttons x-button x-label{flex:none;margin-left:5px}#object-to-path-button,#reverse-path-button,#stroke-to-path-button{width:100%;height:34px;margin-top:8px}#object-to-path-button x-icon,#reverse-path-button x-icon,#stroke-to-path-button x-icon{width:20px;height:20px}#object-to-path-button x-label,#reverse-path-button x-label,#stroke-to-path-button x-label{flex:none;margin-left:8px}#boolops-section{padding:10px 20px 20px}#boolop-buttons>.row{width:100%}#boolop-buttons>.row-2{margin-top:8px}#boolop-buttons x-button x-icon{width:24px;height:24px}#compound-path-section{padding:20px}#compound-path-buttons>.row{width:100%}#compound-path-buttons>.row-2{margin-top:8px}#compound-path-buttons x-button x-icon{width:21px;height:21px}</style>\n\n      <h2 id=\"panel-heading\">Path</h2>\n\n      <section id=\"general-section\">\n        <h3 id=\"general-section-heading\" hidden>General</h3>\n\n        <x-box id=\"open-close-buttons\" class=\"row\">\n          <x-button id=\"open-path-button\" value=\"open\">\n            <x-icon name=\"open-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Open</x-label>\n          </x-button>\n\n          <x-button id=\"close-path-button\" value=\"close\">\n            <x-icon name=\"close-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Close</x-label>\n          </x-button>\n        </x-box>\n\n        <x-button id=\"reverse-path-button\">\n          <x-icon name=\"reverse-path\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Reverse</x-label>\n        </x-button>\n\n        <x-button id=\"object-to-path-button\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Object to path</x-label>\n        </x-button>\n\n        <x-button id=\"stroke-to-path-button\" hidden>\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Stroke to path</x-label>\n        </x-button>\n      </section>\n\n      <hr/>\n\n      <section id=\"boolops-section\">\n        <h3 id=\"boolops-section-heading\">Boolops</h3>\n\n        <x-box id=\"boolop-buttons\" vertical>\n          <x-box class=\"row row-1\">\n            <x-button id=\"unite-button\" value=\"unite\">\n              <x-icon name=\"boolop-unite\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Unite</x-label>\n            </x-button>\n\n            <x-button id=\"intersect-button\" value=\"intersect\">\n              <x-icon name=\"boolop-intersect\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Intersect</x-label>\n            </x-button>\n          </x-box>\n\n          <x-box class=\"row row-2\">\n            <x-button id=\"subtract-button\" value=\"subtract\">\n              <x-icon name=\"boolop-subtract\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Subtract</x-label>\n            </x-button>\n\n            <x-button id=\"exclude-button\" value=\"exclude\">\n              <x-icon name=\"boolop-exclude\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Exclude</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"compound-path-section\">\n        <h3 id=\"compound-path-heading\">Compound path</h3>\n\n        <x-box id=\"compound-path-buttons\" class=\"row\">\n          <x-button id=\"join-button\" value=\"join\">\n            <x-icon name=\"compound-path-join\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Join</x-label>\n          </x-button>\n\n          <x-button id=\"split-button\" value=\"split\">\n            <x-icon name=\"compound-path-split\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Split</x-label>\n          </x-button>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject36=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#buttons{margin:10px 20px}#lists{height:0;flex:1;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2}#lists .list{height:100%}</style>\n\n      <h2 id=\"panel-heading\">Defs</h2>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button skin=\"flat\" value=\"symbols-list\">\n          <x-icon name=\"object-symbol\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"patterns-list\">\n          <x-icon name=\"object-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"fonts-list\">\n          <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n\n      <div id=\"lists\">\n        <bx-symbolslist id=\"symbols-list\"></bx-symbolslist>\n        <bx-patternslist id=\"patterns-list\"></bx-patternslist>\n        <bx-fontslist id=\"fonts-list\"></bx-fontslist>\n      </div>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#buttons{margin:10px 20px}#lists{height:0;flex:1;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2}#lists .list{height:100%}</style>\n\n      <h2 id=\"panel-heading\">Defs</h2>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button skin=\"flat\" value=\"symbols-list\">\n          <x-icon name=\"object-symbol\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"patterns-list\">\n          <x-icon name=\"object-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"fonts-list\">\n          <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n\n      <div id=\"lists\">\n        <bx-symbolslist id=\"symbols-list\"></bx-symbolslist>\n        <bx-patternslist id=\"patterns-list\"></bx-patternslist>\n        <bx-fontslist id=\"fonts-list\"></bx-fontslist>\n      </div>\n    </template>\n  "]),_templateObject37=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#panel-heading-box{padding:20px 20px 15px}#panel-heading{margin:0;padding:0}#main{position:relative;width:100%;height:0;display:flex;flex:1}#throbber{position:absolute;top:50%;left:50%;margin:-15px 0 0 -15px}#placeholder[hidden],#throbber[hidden]{display:none}#placeholder{position:absolute;top:20px;left:20px;font-size:12px}#items,#items .item{box-sizing:border-box;display:flex}#items{padding:9px 20px 0;flex-wrap:wrap;align-content:flex-start;flex:1;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;width:100%;height:100%;align-items:flex-start;justify-content:space-between}#items .item{width:74px;height:74px;margin:0 0 10px;align-items:center;justify-content:center;border:1px solid #bfbfbf;background:#fff;position:relative}#items .item:focus,#items .item[data-expanded]{outline:2px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#items .item img{display:block;-webkit-user-drag:none;touch-action:none;pointer-events:none}#buttons{position:absolute;bottom:3px;right:3px;display:none}.item:hover #buttons{display:block}#info-button{--arrow-width: 0px;--arrow-height: 0px;--arrow-margin: 0;margin-left:3px}#info-popover{--align: left;width:200px;min-height:80px}#info-popover x-label{font-weight:700;font-size:13px}#info-popover p{margin-top:0;font-size:13px;line-height:1.15;word-wrap:break-word}#info-popover #info-date,#info-popover #info-description,#info-popover #info-downloads,#info-popover #info-license,#info-popover #info-uploader,#info-popover #info-url{margin-top:10px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #search-input{width:100%;max-width:none}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">Library</h2>\n      </x-box>\n\n      <main id=\"main\">\n        <div id=\"items\"></div>\n        <x-throbber id=\"throbber\" hidden></x-throbber>\n        <div id=\"placeholder\" hidden></div>\n\n        <x-box id=\"buttons\">\n          <x-button id=\"info-button\" skin=\"help\">\n            <x-icon name=\"question\"></x-icon>\n            <x-popover id=\"info-popover\">\n              <main>\n                <div id=\"info-title\">\n                  <x-label id=\"info-title-label\">Title</x-label>\n                  <p id=\"info-title-value\"></p>\n                </div>\n\n                <div id=\"info-description\">\n                  <x-label id=\"info-description-label\">Description</x-label>\n                  <p id=\"info-description-value\"></p>\n                </div>\n\n                <div id=\"info-url\">\n                  <x-label id=\"info-url-label\">URL</x-label>\n                  <p id=\"info-url-value\"></p>\n                </div>\n\n                <div id=\"info-uploader\">\n                  <x-label id=\"info-uploader-label\">Uploader</x-label>\n                  <p id=\"info-uploader-value\"></p>\n                </div>\n\n                <div id=\"info-date\">\n                  <x-label id=\"info-date-label\">Date</x-label>\n                  <p id=\"info-date-value\"></p>\n                </div>\n\n                <div id=\"info-downloads\">\n                  <x-label id=\"info-downloads-label\">Downloads</x-label>\n                  <p id=\"info-downloads-value\"></p>\n                </div>\n\n                <div id=\"info-license\">\n                  <x-label id=\"info-license-label\">License</x-label>\n                  <p id=\"info-license-value\">Public Domain</p>\n                </div>\n              </main>\n            </x-popover>\n          </x-button>\n        </x-box>\n      </main>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"search-input\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Search</x-label>\n          </x-input>\n        </x-box>\n      </footer>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#panel-heading-box{padding:20px 20px 15px}#panel-heading{margin:0;padding:0}#main{position:relative;width:100%;height:0;display:flex;flex:1}#throbber{position:absolute;top:50%;left:50%;margin:-15px 0 0 -15px}#placeholder[hidden],#throbber[hidden]{display:none}#placeholder{position:absolute;top:20px;left:20px;font-size:12px}#items,#items .item{box-sizing:border-box;display:flex}#items{padding:9px 20px 0;flex-wrap:wrap;align-content:flex-start;flex:1;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;width:100%;height:100%;align-items:flex-start;justify-content:space-between}#items .item{width:74px;height:74px;margin:0 0 10px;align-items:center;justify-content:center;border:1px solid #bfbfbf;background:#fff;position:relative}#items .item:focus,#items .item[data-expanded]{outline:2px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#items .item img{display:block;-webkit-user-drag:none;touch-action:none;pointer-events:none}#buttons{position:absolute;bottom:3px;right:3px;display:none}.item:hover #buttons{display:block}#info-button{--arrow-width: 0px;--arrow-height: 0px;--arrow-margin: 0;margin-left:3px}#info-popover{--align: left;width:200px;min-height:80px}#info-popover x-label{font-weight:700;font-size:13px}#info-popover p{margin-top:0;font-size:13px;line-height:1.15;word-wrap:break-word}#info-popover #info-date,#info-popover #info-description,#info-popover #info-downloads,#info-popover #info-license,#info-popover #info-uploader,#info-popover #info-url{margin-top:10px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #search-input{width:100%;max-width:none}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">Library</h2>\n      </x-box>\n\n      <main id=\"main\">\n        <div id=\"items\"></div>\n        <x-throbber id=\"throbber\" hidden></x-throbber>\n        <div id=\"placeholder\" hidden></div>\n\n        <x-box id=\"buttons\">\n          <x-button id=\"info-button\" skin=\"help\">\n            <x-icon name=\"question\"></x-icon>\n            <x-popover id=\"info-popover\">\n              <main>\n                <div id=\"info-title\">\n                  <x-label id=\"info-title-label\">Title</x-label>\n                  <p id=\"info-title-value\"></p>\n                </div>\n\n                <div id=\"info-description\">\n                  <x-label id=\"info-description-label\">Description</x-label>\n                  <p id=\"info-description-value\"></p>\n                </div>\n\n                <div id=\"info-url\">\n                  <x-label id=\"info-url-label\">URL</x-label>\n                  <p id=\"info-url-value\"></p>\n                </div>\n\n                <div id=\"info-uploader\">\n                  <x-label id=\"info-uploader-label\">Uploader</x-label>\n                  <p id=\"info-uploader-value\"></p>\n                </div>\n\n                <div id=\"info-date\">\n                  <x-label id=\"info-date-label\">Date</x-label>\n                  <p id=\"info-date-value\"></p>\n                </div>\n\n                <div id=\"info-downloads\">\n                  <x-label id=\"info-downloads-label\">Downloads</x-label>\n                  <p id=\"info-downloads-value\"></p>\n                </div>\n\n                <div id=\"info-license\">\n                  <x-label id=\"info-license-label\">License</x-label>\n                  <p id=\"info-license-value\">Public Domain</p>\n                </div>\n              </main>\n            </x-popover>\n          </x-button>\n        </x-box>\n      </main>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"search-input\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Search</x-label>\n          </x-input>\n        </x-box>\n      </footer>\n    </template>\n  "]),_templateObject38=_taggedTemplateLiteral(["\n        <div class=\"item\" tabindex=\"0\">\n          <img style=\"width: ","px; height: ","px\"></img>\n        </div>\n      "],["\n        <div class=\"item\" tabindex=\"0\">\n          <img style=\"width: ","px; height: ","px\"></img>\n        </div>\n      "]),_templateObject39=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}.options-box[hidden],[hidden]{display:none}#format-section{padding:10px 20px 20px}#format-select{width:100%}#options-section{padding:0 20px 10px;flex:1}#bitmap-area-box,#bitmap-compression-box x-box{width:100%}#bitmap-area-buttons{width:100%;text-align:center}#bitmap-size-box{width:100%;padding-top:18px}#bitmap-area-buttons x-button,#bitmap-height-box,#bitmap-width-box,#pdf-area-buttons x-button,#vector-area-buttons x-button{flex:1}#bitmap-lock-button,#bitmap-lock-icon{align-self:flex-end;margin:0}#bitmap-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#bitmap-compression-box{margin-top:18px;width:100%}#bitmap-compression-heading{margin-bottom:0}#bitmap-compression-input{margin-left:6px;width:65px}#bitmap-background-box{padding-top:18px;padding-bottom:8px}#bitmap-background-color-select x-popover,#pdf-background-color-select x-popover{--align: right}#vector-area-box{width:100%}#vector-area-buttons{width:100%;text-align:center}#pdf-area-box{width:100%}#pdf-area-buttons{width:100%;text-align:center}#pdf-size-box{width:100%;padding-top:18px}#pdf-height-box,#pdf-width-box{flex:1}#pdf-lock-button,#pdf-lock-icon{align-self:flex-end;margin:0}#pdf-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#pdf-background-box{padding-top:18px;padding-bottom:8px}#export-section{padding:15px 20px;border-top:1px solid #ccc;background:#e6e6e6}#export-button{width:100%;height:40px}#export-button x-label{font-size:14px;flex:none}</style>\n\n      <h2 id=\"panel-heading\">Export</h2>\n\n      <section id=\"format-section\">\n        <h3 id=\"format-section-heading\">Format</h3>\n\n        <x-select id=\"format-select\">\n          <x-menu>\n            <x-menuitem value=\"png\" selected=\"true\">\n              <x-label>PNG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"jpeg\">\n              <x-label>JPEG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"webp\">\n              <x-label>WebP</x-label>\n            </x-menuitem>\n\n            <hr/>\n\n            <x-menuitem value=\"svg\">\n              <x-label>SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"svgz\">\n              <x-label>SVGZ</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"html\">\n              <x-label>HTML</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"pdf\" id=\"pdf-menu-item\">\n              <x-label>PDF</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-select>\n      </section>\n\n      <section id=\"options-section\">\n        <h3 id=\"options-section-heading\">Options</h3>\n\n        <x-box id=\"bitmap-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"bitmap-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"bitmap-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"bitmap-size-box\" class=\"size-box\">\n            <x-box id=\"bitmap-width-box\" vertical>\n              <h4 id=\"bitmap-width-heading\">Width</h4>\n\n              <x-numberinput id=\"bitmap-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"bitmap-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"bitmap-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"bitmap-height-box\" vertical>\n              <h4 id=\"bitmap-height-heading\">Height</h4>\n\n              <x-numberinput id=\"bitmap-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-compression-box\" vertical hidden>\n            <h4 id=\"bitmap-compression-heading\">Compression</h4>\n\n            <x-box>\n              <x-slider id=\"bitmap-compression-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"bitmap-compression-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-background-box\" vertical>\n            <h4 id=\"bitmap-background-heading\">Background</h4>\n\n            <x-colorselect id=\"bitmap-background-color-select\" value=\"rgba(255, 255, 255, 0)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"bitmap-background-color-picker\" alphaslider></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"vector-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"vector-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"vector-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"pdf-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"pdf-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"pdf-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"pdf-size-box\" class=\"size-box\">\n            <x-box id=\"pdf-width-box\" vertical>\n              <h4 id=\"pdf-width-heading\">Width</h4>\n\n              <x-numberinput id=\"pdf-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"pdf-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"pdf-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"pdf-height-box\" vertical>\n              <h4 id=\"pdf-height-heading\">Height</h4>\n\n              <x-numberinput id=\"pdf-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"pdf-background-box\" vertical>\n            <h4 id=\"pdf-background-heading\">Background</h4>\n\n            <x-colorselect id=\"pdf-background-color-select\" value=\"rgb(255, 255, 255)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"pdf-background-color-picker\"></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n      </section>\n\n      <section id=\"export-section\">\n        <x-button id=\"export-button\" skin=\"textured\">\n          <x-icon name=\"import-export\"></x-icon>\n          <x-label>Export</x-label>\n        </x-button>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}.options-box[hidden],[hidden]{display:none}#format-section{padding:10px 20px 20px}#format-select{width:100%}#options-section{padding:0 20px 10px;flex:1}#bitmap-area-box,#bitmap-compression-box x-box{width:100%}#bitmap-area-buttons{width:100%;text-align:center}#bitmap-size-box{width:100%;padding-top:18px}#bitmap-area-buttons x-button,#bitmap-height-box,#bitmap-width-box,#pdf-area-buttons x-button,#vector-area-buttons x-button{flex:1}#bitmap-lock-button,#bitmap-lock-icon{align-self:flex-end;margin:0}#bitmap-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#bitmap-compression-box{margin-top:18px;width:100%}#bitmap-compression-heading{margin-bottom:0}#bitmap-compression-input{margin-left:6px;width:65px}#bitmap-background-box{padding-top:18px;padding-bottom:8px}#bitmap-background-color-select x-popover,#pdf-background-color-select x-popover{--align: right}#vector-area-box{width:100%}#vector-area-buttons{width:100%;text-align:center}#pdf-area-box{width:100%}#pdf-area-buttons{width:100%;text-align:center}#pdf-size-box{width:100%;padding-top:18px}#pdf-height-box,#pdf-width-box{flex:1}#pdf-lock-button,#pdf-lock-icon{align-self:flex-end;margin:0}#pdf-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#pdf-background-box{padding-top:18px;padding-bottom:8px}#export-section{padding:15px 20px;border-top:1px solid #ccc;background:#e6e6e6}#export-button{width:100%;height:40px}#export-button x-label{font-size:14px;flex:none}</style>\n\n      <h2 id=\"panel-heading\">Export</h2>\n\n      <section id=\"format-section\">\n        <h3 id=\"format-section-heading\">Format</h3>\n\n        <x-select id=\"format-select\">\n          <x-menu>\n            <x-menuitem value=\"png\" selected=\"true\">\n              <x-label>PNG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"jpeg\">\n              <x-label>JPEG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"webp\">\n              <x-label>WebP</x-label>\n            </x-menuitem>\n\n            <hr/>\n\n            <x-menuitem value=\"svg\">\n              <x-label>SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"svgz\">\n              <x-label>SVGZ</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"html\">\n              <x-label>HTML</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"pdf\" id=\"pdf-menu-item\">\n              <x-label>PDF</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-select>\n      </section>\n\n      <section id=\"options-section\">\n        <h3 id=\"options-section-heading\">Options</h3>\n\n        <x-box id=\"bitmap-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"bitmap-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"bitmap-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"bitmap-size-box\" class=\"size-box\">\n            <x-box id=\"bitmap-width-box\" vertical>\n              <h4 id=\"bitmap-width-heading\">Width</h4>\n\n              <x-numberinput id=\"bitmap-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"bitmap-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"bitmap-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"bitmap-height-box\" vertical>\n              <h4 id=\"bitmap-height-heading\">Height</h4>\n\n              <x-numberinput id=\"bitmap-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-compression-box\" vertical hidden>\n            <h4 id=\"bitmap-compression-heading\">Compression</h4>\n\n            <x-box>\n              <x-slider id=\"bitmap-compression-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"bitmap-compression-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-background-box\" vertical>\n            <h4 id=\"bitmap-background-heading\">Background</h4>\n\n            <x-colorselect id=\"bitmap-background-color-select\" value=\"rgba(255, 255, 255, 0)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"bitmap-background-color-picker\" alphaslider></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"vector-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"vector-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"vector-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"pdf-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"pdf-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"pdf-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"pdf-size-box\" class=\"size-box\">\n            <x-box id=\"pdf-width-box\" vertical>\n              <h4 id=\"pdf-width-heading\">Width</h4>\n\n              <x-numberinput id=\"pdf-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"pdf-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"pdf-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"pdf-height-box\" vertical>\n              <h4 id=\"pdf-height-heading\">Height</h4>\n\n              <x-numberinput id=\"pdf-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"pdf-background-box\" vertical>\n            <h4 id=\"pdf-background-heading\">Background</h4>\n\n            <x-colorselect id=\"pdf-background-color-select\" value=\"rgb(255, 255, 255)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"pdf-background-color-picker\"></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n      </section>\n\n      <section id=\"export-section\">\n        <x-button id=\"export-button\" skin=\"textured\">\n          <x-icon name=\"import-export\"></x-icon>\n          <x-label>Export</x-label>\n        </x-button>\n      </section>\n    </template>\n  "]),_templateObject40=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{position:absolute;bottom:0;left:38px;display:flex;flex-flow:column;width:calc(100% - 76px);height:250px;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-top:1px solid rgba(0,0,0,.1);transition:width .2s cubic-bezier(.4,0,.2,1),transform .2s cubic-bezier(.4,0,.2,1);transform:translateY(100%);will-change:transform}:host([enabled]){transform:translateY(0%)}</style>\n\n      <bx-domeditor id=\"dom-editor\"></bx-domeditor>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{position:absolute;bottom:0;left:38px;display:flex;flex-flow:column;width:calc(100% - 76px);height:250px;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-top:1px solid rgba(0,0,0,.1);transition:width .2s cubic-bezier(.4,0,.2,1),transform .2s cubic-bezier(.4,0,.2,1);transform:translateY(100%);will-change:transform}:host([enabled]){transform:translateY(0%)}</style>\n\n      <bx-domeditor id=\"dom-editor\"></bx-domeditor>\n    </template>\n  "]),_templateObject41=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;outline:0;contain:size layout style}#main{position:relative;width:100%;height:100%;overflow:auto;will-change:scroll-position;touch-action:none}#tree{padding:1px 0;font-size:12px;line-height:16px;font-family:\"Roboto Mono\",\"Menlo\",monospace;word-wrap:break-word}.item{position:relative;margin-left:22px;z-index:2;color:#313a43}.item[data-selected]{color:#fff}.item[data-dragover]{z-index:3}.item[hidden]{display:none}span[contenteditable]{background:#fff;color:#000!important;outline:3px solid #5e99ff;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;text-overflow:clip;min-width:.5ex;-webkit-user-select:text;-webkit-user-modify:read-write-plaintext-only}span[contenteditable]::selection{background:rgba(0,157,255,.3)}span[contenteditable][data-invalid]{outline-color:#ed5c49;background:#ffd9d9}span[contenteditable][data-invalid]::selection{background:#ff9d9d}.item[data-type=text]{word-break:break-all}.item[data-type=element][data-selected]>.tag::before,.item[data-type=text][data-selected]>.content::before{content:\"\";background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));outline:1px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));position:absolute;top:0;left:0;margin-left:-600px;width:calc(100% + 600px);height:100%;z-index:-1}.item[data-type=element][data-dragover=afterend]::after,.item[data-type=element][data-dragover=beforebegin]::before,.item[data-type=text][data-dragover=afterend]::after,.item[data-type=text][data-dragover=beforebegin]::before{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none}.item[data-type=element]>.icon{fill:currentColor;vertical-align:middle;padding:3px;position:absolute;top:2px;left:-19px;transform:rotate(0deg);z-index:2}.item[data-type=element][data-expanded]>.icon{transform:rotate(90deg)}.item[data-type=element]>.icon>path{pointer-events:none}.item[data-type=element]>.tag{position:relative;border-top:1px solid transparent;border-bottom:1px solid transparent}.item[data-type=element]>.tag>.closing-bracket,.item[data-type=element]>.tag>.opening-bracket,.item[data-type=element]>.tag>.tag-name{color:#881280}.item[data-type=element][data-selected]>.tag>.closing-bracket,.item[data-type=element][data-selected]>.tag>.opening-bracket{color:inherit;opacity:.5}.item[data-type=element]>.tag>.opening-bracket[disabled]{opacity:.45}.item[data-type=element][data-selected]>.tag .attribute .name,.item[data-type=element][data-selected]>.tag>.tag-name{color:inherit}.item[data-type=element]>.tag>.tag-name[disabled]{opacity:.45}.item[data-type=element]>.tag .attributes{line-height:1}.item[data-type=element]>.tag .attribute{transition:background .25s;margin-left:6px;color:#a894a6}.item[data-type=element][data-selected]>.tag .attribute{color:rgba(255,255,255,.7)}.item[data-type=element]>.tag .attribute[selected]{background:#bb38b2}.item[data-type=element]>.tag .attribute[disabled]{font-weight:700;opacity:.45}.item[data-type=element]>.tag .attribute .name{color:#994500}.item[data-type=element]>.tag .attribute .value{color:#1919a7}.item[data-type=element][data-selected]>.tag .attribute .ellipsis,.item[data-type=element][data-selected]>.tag .attribute .value{color:#fff}.item[data-type=element]>.tag .attribute .ellipsis{padding-left:4px;color:#1919a7;text-decoration:underline;letter-spacing:-2px;cursor:pointer}.item[data-type=element]>.tag .attribute .ellipsis:hover{text-decoration:none}.item[data-type=element]>.tag .attribute[selected] *{color:#fff}.item[data-type=element][data-dragover=afterbegin]>.subtree::before,.item[data-type=element][data-dragover=beforeend]>.subtree::after{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none;margin-left:22px}</style>\n\n      <main id=\"main\">\n        <div id=\"tree\"></div>\n\n        <x-contextmenu id=\"context-menu\" disabled>\n          <x-menu>\n            <x-menuitem id=\"add-attribute-menu-item\">\n              <x-label>Add Attribute</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-contextmenu>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;outline:0;contain:size layout style}#main{position:relative;width:100%;height:100%;overflow:auto;will-change:scroll-position;touch-action:none}#tree{padding:1px 0;font-size:12px;line-height:16px;font-family:\"Roboto Mono\",\"Menlo\",monospace;word-wrap:break-word}.item{position:relative;margin-left:22px;z-index:2;color:#313a43}.item[data-selected]{color:#fff}.item[data-dragover]{z-index:3}.item[hidden]{display:none}span[contenteditable]{background:#fff;color:#000!important;outline:3px solid #5e99ff;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;text-overflow:clip;min-width:.5ex;-webkit-user-select:text;-webkit-user-modify:read-write-plaintext-only}span[contenteditable]::selection{background:rgba(0,157,255,.3)}span[contenteditable][data-invalid]{outline-color:#ed5c49;background:#ffd9d9}span[contenteditable][data-invalid]::selection{background:#ff9d9d}.item[data-type=text]{word-break:break-all}.item[data-type=element][data-selected]>.tag::before,.item[data-type=text][data-selected]>.content::before{content:\"\";background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));outline:1px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));position:absolute;top:0;left:0;margin-left:-600px;width:calc(100% + 600px);height:100%;z-index:-1}.item[data-type=element][data-dragover=afterend]::after,.item[data-type=element][data-dragover=beforebegin]::before,.item[data-type=text][data-dragover=afterend]::after,.item[data-type=text][data-dragover=beforebegin]::before{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none}.item[data-type=element]>.icon{fill:currentColor;vertical-align:middle;padding:3px;position:absolute;top:2px;left:-19px;transform:rotate(0deg);z-index:2}.item[data-type=element][data-expanded]>.icon{transform:rotate(90deg)}.item[data-type=element]>.icon>path{pointer-events:none}.item[data-type=element]>.tag{position:relative;border-top:1px solid transparent;border-bottom:1px solid transparent}.item[data-type=element]>.tag>.closing-bracket,.item[data-type=element]>.tag>.opening-bracket,.item[data-type=element]>.tag>.tag-name{color:#881280}.item[data-type=element][data-selected]>.tag>.closing-bracket,.item[data-type=element][data-selected]>.tag>.opening-bracket{color:inherit;opacity:.5}.item[data-type=element]>.tag>.opening-bracket[disabled]{opacity:.45}.item[data-type=element][data-selected]>.tag .attribute .name,.item[data-type=element][data-selected]>.tag>.tag-name{color:inherit}.item[data-type=element]>.tag>.tag-name[disabled]{opacity:.45}.item[data-type=element]>.tag .attributes{line-height:1}.item[data-type=element]>.tag .attribute{transition:background .25s;margin-left:6px;color:#a894a6}.item[data-type=element][data-selected]>.tag .attribute{color:rgba(255,255,255,.7)}.item[data-type=element]>.tag .attribute[selected]{background:#bb38b2}.item[data-type=element]>.tag .attribute[disabled]{font-weight:700;opacity:.45}.item[data-type=element]>.tag .attribute .name{color:#994500}.item[data-type=element]>.tag .attribute .value{color:#1919a7}.item[data-type=element][data-selected]>.tag .attribute .ellipsis,.item[data-type=element][data-selected]>.tag .attribute .value{color:#fff}.item[data-type=element]>.tag .attribute .ellipsis{padding-left:4px;color:#1919a7;text-decoration:underline;letter-spacing:-2px;cursor:pointer}.item[data-type=element]>.tag .attribute .ellipsis:hover{text-decoration:none}.item[data-type=element]>.tag .attribute[selected] *{color:#fff}.item[data-type=element][data-dragover=afterbegin]>.subtree::before,.item[data-type=element][data-dragover=beforeend]>.subtree::after{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none;margin-left:22px}</style>\n\n      <main id=\"main\">\n        <div id=\"tree\"></div>\n\n        <x-contextmenu id=\"context-menu\" disabled>\n          <x-menu>\n            <x-menuitem id=\"add-attribute-menu-item\">\n              <x-label>Add Attribute</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-contextmenu>\n      </main>\n    </template>\n  "]),_templateObject42=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#smoothing-input{width:80px;margin-left:8px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Freehand</h2>\n\n      <section id=\"smoothing-section\">\n        <h3>Smoothing</h3>\n\n        <x-box>\n          <x-slider id=\"smoothing-slider\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\"></x-slider>\n          <x-numberinput id=\"smoothing-input\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#smoothing-input{width:80px;margin-left:8px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Freehand</h2>\n\n      <section id=\"smoothing-section\">\n        <h3>Smoothing</h3>\n\n        <x-box>\n          <x-slider id=\"smoothing-slider\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\"></x-slider>\n          <x-numberinput id=\"smoothing-input\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject43=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Quad Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Quad Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject44=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cubic Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cubic Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject45=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Text</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 52 52\">\n            <text id=\"appearance-path\" x=\"50%\" y=\"50%\" style=\"text-anchor: middle; alignment-baseline: central;\">A</text>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Text</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 52 52\">\n            <text id=\"appearance-path\" x=\"50%\" y=\"50%\" style=\"text-anchor: middle; alignment-baseline: central;\">A</text>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject46=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#selection-mode-buttons{margin:4px 0 0}#selection-mode-buttons x-button{height:25px}#transform-preserve-section x-box{margin:5px 0}</style>\n\n      <h2>Transform</h2>\n\n      <section id=\"selection-section\">\n        <h3>Selection mode</h3>\n\n        <x-buttons id=\"selection-mode-buttons\" tracking=\"1\">\n          <x-button value=\"rect-contain\" toggled>\n            <x-label>Contain</x-label>\n          </x-button>\n\n          <x-button value=\"rect-intersect\">\n            <x-label>Intersect</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"transform-preserve-section\">\n        <h3>Preserve</h3>\n\n        <x-box>\n          <x-checkbox id=\"preserve-stroke-width-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-stroke-width-checkbox\">Stroke width</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rect-radii-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rect-radii-checkbox\">Rectangle radii</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rotation-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rotation-checkbox\">Rotation</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-aspect-ratio-checkbox\"></x-checkbox>\n          <x-label for=\"preserve-aspect-ratio-checkbox\">Aspect ratio</x-label>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#selection-mode-buttons{margin:4px 0 0}#selection-mode-buttons x-button{height:25px}#transform-preserve-section x-box{margin:5px 0}</style>\n\n      <h2>Transform</h2>\n\n      <section id=\"selection-section\">\n        <h3>Selection mode</h3>\n\n        <x-buttons id=\"selection-mode-buttons\" tracking=\"1\">\n          <x-button value=\"rect-contain\" toggled>\n            <x-label>Contain</x-label>\n          </x-button>\n\n          <x-button value=\"rect-intersect\">\n            <x-label>Intersect</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"transform-preserve-section\">\n        <h3>Preserve</h3>\n\n        <x-box>\n          <x-checkbox id=\"preserve-stroke-width-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-stroke-width-checkbox\">Stroke width</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rect-radii-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rect-radii-checkbox\">Rectangle radii</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rotation-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rotation-checkbox\">Rotation</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-aspect-ratio-checkbox\"></x-checkbox>\n          <x-label for=\"preserve-aspect-ratio-checkbox\">Aspect ratio</x-label>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject47=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Rectangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\" toggled>\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\">\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <rect id=\"appearance-thumbnail-rect\" x=\"20\" y=\"20\" width=\"60\" height=\"60\"></rect>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Rectangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\" toggled>\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\">\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <rect id=\"appearance-thumbnail-rect\" x=\"20\" y=\"20\" width=\"60\" height=\"60\"></rect>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject48=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ellipse</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <ellipse id=\"appearance-thumbnail-ellipse\" cx=\"50\" cy=\"50\" rx=\"35\" ry=\"35\"></ellipse>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ellipse</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <ellipse id=\"appearance-thumbnail-ellipse\" cx=\"50\" cy=\"50\" rx=\"35\" ry=\"35\"></ellipse>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject49=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Triangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-path\" points=\"20 80 50 20 80 80\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Triangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-path\" points=\"20 80 50 20 80 80\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject50=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>N-gon</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>N-gon</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject51=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Star</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Star</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject52=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ring</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ring</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject53=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Pie</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Pie</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject54=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cog</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cog</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject55=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Line</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <line id=\"appearance-thumbnail-line\" x1=\"20\" y1=\"20\" x2=\"80\" y2=\"80\"></line>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Line</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <line id=\"appearance-thumbnail-line\" x1=\"20\" y1=\"20\" x2=\"80\" y2=\"80\"></line>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject56=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polygon</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-polygon\" points=\"16 85 29 15 84 44 67 85\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polygon</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-polygon\" points=\"16 85 29 15 84 44 67 85\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject57=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polyline</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polyline id=\"appearance-thumbnail-polyline\" points=\"16 85 29 15 84 44 67 85\"></polyline>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polyline</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polyline id=\"appearance-thumbnail-polyline\" points=\"16 85 29 15 84 44 67 85\"></polyline>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject58=_taggedTemplateLiteral(["\n        <g class=\"repr\" transform=\"translate(",", ",") rotate(",")\" data-selected>\n          <line class=\"outer-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <line class=\"inner-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"","\"></rect>\n        </g>\n      "],["\n        <g class=\"repr\" transform=\"translate(",", ",") rotate(",")\" data-selected>\n          <line class=\"outer-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <line class=\"inner-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"","\"></rect>\n        </g>\n      "]),_templateObject59=_taggedTemplateLiteral(["<bx-guide x=\"","\" y=\"","\" angle=\"","\"></bx-guide>"],["<bx-guide x=\"","\" y=\"","\" angle=\"","\"></bx-guide>"]),_templateObject60=_taggedTemplateLiteral(["<line class=\"repr\" x1=\"","\" y1=\"","\" x2=\"","\" y2=\"","\"></line>"],["<line class=\"repr\" x1=\"","\" y1=\"","\" x2=\"","\" y2=\"","\"></line>"]),_templateObject61=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{display:block;box-sizing:border-box;width:100%;height:24px;padding:1px;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border:1px solid hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 10%));border-radius:4px;--thumb-border-radius: 4px}:host(:focus){outline:0}#thumbs,.thumb{width:100%;height:100%;position:relative}.thumb{width:33.333%;padding:0 10px;position:absolute;display:flex;flex:1;justify-content:center;align-items:center;box-sizing:border-box;z-index:0;color:#fff;border-radius:var(--thumb-border-radius);font-size:11px}#thumbs[data-animate] .thumb{transition:left .2s ease-in-out,background .2s ease-in-out}.thumb[data-socket=\"1\"]{left:0%}.thumb[data-socket=\"2\"]{left:33.333%}.thumb[data-socket=\"3\"]{left:66.666%}.thumb[data-dragged]{background:#387ec7;z-index:1}.thumb[data-selected]{background:#fff;color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));font-weight:700}:host(:focus) .thumb[data-selected]{box-shadow:0 0 0 5px rgba(59,153,252,.7)}</style>\n\n      <x-box id=\"thumbs\">\n        <div id=\"fill-thumb\" class=\"thumb\" data-value=\"fill\" data-socket=\"1\" data-selected>Fill</div>\n        <div id=\"stroke-thumb\" class=\"thumb\" data-value=\"stroke\" data-socket=\"2\">Stroke</div>\n        <div id=\"markers-thumb\" class=\"thumb\" data-value=\"markers\" data-socket=\"3\">Markers</div>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <style>:host{display:block;box-sizing:border-box;width:100%;height:24px;padding:1px;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border:1px solid hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 10%));border-radius:4px;--thumb-border-radius: 4px}:host(:focus){outline:0}#thumbs,.thumb{width:100%;height:100%;position:relative}.thumb{width:33.333%;padding:0 10px;position:absolute;display:flex;flex:1;justify-content:center;align-items:center;box-sizing:border-box;z-index:0;color:#fff;border-radius:var(--thumb-border-radius);font-size:11px}#thumbs[data-animate] .thumb{transition:left .2s ease-in-out,background .2s ease-in-out}.thumb[data-socket=\"1\"]{left:0%}.thumb[data-socket=\"2\"]{left:33.333%}.thumb[data-socket=\"3\"]{left:66.666%}.thumb[data-dragged]{background:#387ec7;z-index:1}.thumb[data-selected]{background:#fff;color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));font-weight:700}:host(:focus) .thumb[data-selected]{box-shadow:0 0 0 5px rgba(59,153,252,.7)}</style>\n\n      <x-box id=\"thumbs\">\n        <div id=\"fill-thumb\" class=\"thumb\" data-value=\"fill\" data-socket=\"1\" data-selected>Fill</div>\n        <div id=\"stroke-thumb\" class=\"thumb\" data-value=\"stroke\" data-socket=\"2\">Stroke</div>\n        <div id=\"markers-thumb\" class=\"thumb\" data-value=\"markers\" data-socket=\"3\">Markers</div>\n      </x-box>\n    </template>\n  "]),_templateObject62=_taggedTemplateLiteral(["<x-doctab value=\"about\"><x-label>About</x-label></x-doctab>"],["<x-doctab value=\"about\"><x-label>About</x-label></x-doctab>"]),_templateObject63=_taggedTemplateLiteral(["<bx-about></bx-about>"],["<bx-about></bx-about>"]),_templateObject64=_taggedTemplateLiteral(["<x-doctab value=\"preferences\"><x-label>Preferences</x-label></x-doctab>"],["<x-doctab value=\"preferences\"><x-label>Preferences</x-label></x-doctab>"]),_templateObject65=_taggedTemplateLiteral(["<bx-preferences></bx-preferences>"],["<bx-preferences></bx-preferences>"]),_templateObject66=_taggedTemplateLiteral(["<x-doctab><x-label>","</x-label></x-doctab>"],["<x-doctab><x-label>","</x-label></x-doctab>"]),_templateObject67=_taggedTemplateLiteral(["<bx-editor></bx-editor>"],["<bx-editor></bx-editor>"]),_templateObject68=_taggedTemplateLiteral(["<x-doctab><x-label>Untitled</x-label></x-doctab>"],["<x-doctab><x-label>Untitled</x-label></x-doctab>"]),_templateObject69=_taggedTemplateLiteral(["<webview src=\"","\" style=\"width: 0px; height: 0px;\"></webview>"],["<webview src=\"","\" style=\"width: 0px; height: 0px;\"></webview>"]);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toArray(e){return Array.isArray(e)?e:Array.from(e)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}{"use strict",window.BoxySVG={classes:{},utils:{}};{var define=customElements.define;customElements.define=function(e,t,n){if(SVGElement.isPrototypeOf(t)){if(t.prototype.connectedCallback&&(t.prototype.attachedCallback=t.prototype.connectedCallback),t.prototype.disconnectedCallback&&(t.prototype.dettachedCallback=t.prototype.disconnectedCallback),t.prototype.attributeChangedCallback){var a=t.prototype.attributeChangedCallback;t.prototype.attributeChangedCallback=function(e,n,r){t.observedAttributes&&t.observedAttributes.includes(e)&&a.call(this,e,n,r)}}t.prototype.createdCallback=function(){if(this.init(),t.observedAttributes&&this.attributeChangedCallback){var e=!0,n=!1,a;try{for(var r=this.attributes[Symbol.iterator](),i,o;!(e=(i=r.next()).done);e=!0)o=i.value,t.observedAttributes.includes(o.name)&&this.attributeChangedCallback(o.name)}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}},document.registerElement(e,{extends:n&&n.extends?n.extends:"g",prototype:t.prototype})}else define.call(customElements,e,t,n)}}Object.defineProperty(HTMLHeadingElement.prototype,"disabled",{enumerable:!1,configurable:!1,get:function(){return this.hasAttribute("disabled")},set:function(e){!0===e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),SVGUseElement.prototype.getBBox=function(){var e=SVGGraphicsElement.prototype.getBBox.call(this);return e.x+=this.x.baseVal.value,e.y+=this.y.baseVal.value,e};{var $proxy=Symbol();Object.defineProperty(SVGElement.prototype,"dataset",{enumerable:!0,configurable:!1,get:function(){if(!this[$proxy]){var e=this;this[$proxy]=new Proxy({},{get:function(t,n){var a="data-"+this._toDashCase(n);return e.hasAttribute(a)?e.getAttribute(a):void 0},set:function(t,n,a){var r="data-"+this._toDashCase(n);e.setAttribute(r,a)},getOwnPropertyDescriptor:function(t,n){var a="data-"+this._toDashCase(n);return e.hasAttribute(a)?{value:e.getAttribute(a),writable:!0,configurable:!0,enumerable:!0}:void 0},getPrototypeOf:function(){return DOMStringMap.prototype},deleteProperty:function(t,n){var a="data-"+this._toDashCase(n);return!!e.hasAttribute(a)&&(e.removeAttribute(a),!0)},ownKeys:function(){var t=[],n=!0,a=!1,r;try{for(var i=e.attributes[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"data-"===s.name.substring(0,5)){var l=this._toCamelCase(s.name.substring(5));t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},_toCamelCase:function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},_toDashCase:function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}})}return this[$proxy]}})}if(!SVGPathElement.prototype.getPathData||!SVGPathElement.prototype.setPathData){var commandsMap={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},Source=function(){function e(t){_classCallCheck(this,e),this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}return _createClass(e,[{key:"parseSegment",value:function(){var e=this._string[this._currentIndex],t=commandsMap[e]?commandsMap[e]:null;if(null===t){if(null===this._prevCommand)return null;if(t=("+"===e||"-"===e||"."===e||"0"<=e&&"9">=e)&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null,null===t)return null}else this._currentIndex+=1;this._prevCommand=t;var n=null,a=t.toUpperCase();return"H"===a||"V"===a?n=[this._parseNumber()]:"M"===a||"L"===a||"T"===a?n=[this._parseNumber(),this._parseNumber()]:"S"===a||"Q"===a?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===a?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===a?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===a&&(this._skipOptionalSpaces(),n=[]),null===n||0<=n.indexOf(null)?null:{type:t,values:n}}},{key:"hasMoreData",value:function(){return this._currentIndex<this._endIndex}},{key:"peekSegmentType",value:function(){var e=this._string[this._currentIndex];return commandsMap[e]?commandsMap[e]:null}},{key:"initialCommandIsMoveTo",value:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e}},{key:"_isCurrentSpace",value:function(){var e=this._string[this._currentIndex];return" ">=e&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)}},{key:"_skipOptionalSpaces",value:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex}},{key:"_skipOptionalSpacesOrDelimiter",value:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex]?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)}},{key:"_parseNumber",value:function(){var e=0,t=0,n=1,a=0,r=1,i=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||("0">this._string[this._currentIndex]||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&"9">=this._string[this._currentIndex];)this._currentIndex+=1;if(this._currentIndex!==s)for(var l=this._currentIndex-1,d=1;l>=s;)t+=d*(this._string[l]-"0"),l-=1,d*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||"0">this._string[this._currentIndex]||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&"9">=this._string[this._currentIndex];)n*=10,a+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==o&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,i=-1),this._currentIndex>=this._endIndex||"0">this._string[this._currentIndex]||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&"9">=this._string[this._currentIndex];)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var u=t+a;return(u*=r,e&&(u*=Math.pow(10,i*e)),o===this._currentIndex)?null:(this._skipOptionalSpacesOrDelimiter(),u)}},{key:"_parseArcFlag",value:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else if("1"===t)e=1;else return null;return this._skipOptionalSpacesOrDelimiter(),e}}]),e}(),parsePathDataString=function(e){if(!e||0===e.length)return[];var t=new Source(e),n=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var a=t.parseSegment();if(null===a)break;else n.push(a)}return n},setAttribute=SVGPathElement.prototype.setAttribute,removeAttribute=SVGPathElement.prototype.removeAttribute,$cachedPathData=Symbol(),$cachedNormalizedPathData=Symbol(),arcToCubicCurves=function e(n,a,r,i,o,s,l,d,u,c){var p=Math.asin,b=Math.abs,m=Math.sqrt,g=Math.sin,v=Math.cos,f=Math.PI,_=function(e,t,n){var a=e*v(n)-t*g(n),r=e*g(n)+t*v(n);return{x:a,y:r}},w=function(e){return f*e/180}(l),A=[],C=void 0,S=void 0,E=void 0,T=void 0;if(c)C=c[0],S=c[1],E=c[2],T=c[3];else{var P=_(n,a,-w);n=P.x,a=P.y;var L=_(r,i,-w);r=L.x,i=L.y;var D=(n-r)/2,x=(a-i)/2,y=D*D/(o*o)+x*x/(s*s);1<y&&(y=m(y),o=y*o,s=y*s);var h=d===u?-1:1;var M=o*o,N=s*s,I=h*m(b((M*N-M*x*x-N*D*D)/(M*x*x+N*D*D)));E=I*o*x/s+(n+r)/2,T=I*-s*D/o+(a+i)/2,C=p(parseFloat(((a-T)/s).toFixed(9))),S=p(parseFloat(((i-T)/s).toFixed(9))),n<E&&(C=f-C),r<E&&(S=f-S),0>C&&(C=2*f+C),0>S&&(S=2*f+S),u&&C>S&&(C-=2*f),!u&&S>C&&(S-=2*f)}var k=S-C;if(b(k)>120*f/180){var R=S,V=r,z=i;S=u&&S>C?C+1*(120*f/180):C+-1*(120*f/180),r=E+o*v(S),i=T+s*g(S),A=e(r,i,V,z,o,s,l,0,u,[S,R,E,T])}k=S-C;var G=v(C),B=g(C),O=v(S),q=g(S),j=Math.tan(k/4),t=4/3*o*j,U=4/3*s*j,H=[n,a],$=[n+t*B,a-U*G],F=[r+t*q,i-U*O],Y=[r,i];if($[0]=2*H[0]-$[0],$[1]=2*H[1]-$[1],c)return[$,F,Y].concat(A);A=[$,F,Y].concat(A).join().split(",");var X=[],W=[];return A.forEach(function(e,t){t%2?W.push(_(A[t-1],A[t],w).y):W.push(_(A[t],A[t+1],w).x),6===W.length&&(X.push(W),W=[])}),X},clonePathData=function(e){return e.map(function(e){return{type:e.type,values:[].concat(_toConsumableArray(e.values))}})},absolutizePathData=function(e){var t=[],n=null,a=null,r=null,i=null,o=!0,s=!1,l;try{for(var d=e[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=c.type;if("M"===p){var h=_slicedToArray(c.values,2),b=h[0],x=h[1];t.push({type:"M",values:[b,x]}),r=b,i=x,n=b,a=x}else if("m"===p){var m=_slicedToArray(c.values,2),g=m[0],v=m[1];g+=n,v+=a,t.push({type:"M",values:[g,v]}),r=g,i=v,n=g,a=v}else if("L"===p){var y=_slicedToArray(c.values,2),f=y[0],_=y[1];t.push({type:"L",values:[f,_]}),n=f,a=_}else if("l"===p){var w=_slicedToArray(c.values,2),k=w[0],A=w[1];k+=n,A+=a,t.push({type:"L",values:[k,A]}),n=k,a=A}else if("C"===p){var C=_slicedToArray(c.values,6),S=C[0],E=C[1],T=C[2],P=C[3],L=C[4],D=C[5];t.push({type:"C",values:[S,E,T,P,L,D]}),n=L,a=D}else if("c"===p){var M=_slicedToArray(c.values,6),N=M[0],I=M[1],R=M[2],V=M[3],z=M[4],G=M[5];N+=n,I+=a,R+=n,V+=a,z+=n,G+=a,t.push({type:"C",values:[N,I,R,V,z,G]}),n=z,a=G}else if("Q"===p){var B=_slicedToArray(c.values,4),O=B[0],q=B[1],j=B[2],U=B[3];t.push({type:"Q",values:[O,q,j,U]}),n=j,a=U}else if("q"===p){var H=_slicedToArray(c.values,4),$=H[0],F=H[1],Y=H[2],X=H[3];$+=n,F+=a,Y+=n,X+=a,t.push({type:"Q",values:[$,F,Y,X]}),n=Y,a=X}else if("A"===p){var W=_slicedToArray(c.values,7),K=W[0],Z=W[1],Q=W[2],J=W[3],ee=W[4],te=W[5],ne=W[6];t.push({type:"A",values:[K,Z,Q,J,ee,te,ne]}),n=te,a=ne}else if("a"===p){var ae=_slicedToArray(c.values,7),re=ae[0],ie=ae[1],oe=ae[2],se=ae[3],le=ae[4],de=ae[5],ue=ae[6];de+=n,ue+=a,t.push({type:"A",values:[re,ie,oe,se,le,de,ue]}),n=de,a=ue}else if("H"===p){var ce=_slicedToArray(c.values,1),pe=ce[0];t.push({type:"H",values:[pe]}),n=pe}else if("h"===p){var he=_slicedToArray(c.values,1),be=he[0];be+=n,t.push({type:"H",values:[be]}),n=be}else if("V"===p){var xe=_slicedToArray(c.values,1),me=xe[0];t.push({type:"V",values:[me]}),a=me}else if("v"===p){var ge=_slicedToArray(c.values,1),ve=ge[0];ve+=a,t.push({type:"V",values:[ve]}),a=ve}else if("S"===p){var ye=_slicedToArray(c.values,4),fe=ye[0],_e=ye[1],we=ye[2],ke=ye[3];t.push({type:"S",values:[fe,_e,we,ke]}),n=we,a=ke}else if("s"===p){var Ae=_slicedToArray(c.values,4),Ce=Ae[0],Se=Ae[1],Ee=Ae[2],Te=Ae[3];Ce+=n,Se+=a,Ee+=n,Te+=a,t.push({type:"S",values:[Ce,Se,Ee,Te]}),n=Ee,a=Te}else if("T"===p){var Pe=_slicedToArray(c.values,2),Le=Pe[0],De=Pe[1];t.push({type:"T",values:[Le,De]}),n=Le,a=De}else if("t"===p){var Me=_slicedToArray(c.values,2),Ne=Me[0],Ie=Me[1];Ne+=n,Ie+=a,t.push({type:"T",values:[Ne,Ie]}),n=Ne,a=Ie}else("Z"===p||"z"===p)&&(t.push({type:"Z",values:[]}),n=r,a=i)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}return t},reducePathData=function(e){var t=[],n=null,a=null,r=null,i=null,o=null,s=null,l=null,d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0){if(b=h.value,"M"===b.type){var m=_slicedToArray(b.values,2),g=m[0],x=m[1];t.push({type:"M",values:[g,x]}),s=g,l=x,i=g,o=x}else if("C"===b.type){var v=_slicedToArray(b.values,6),y=v[0],f=v[1],_=v[2],w=v[3],k=v[4],A=v[5];t.push({type:"C",values:[y,f,_,w,k,A]}),a=_,r=w,i=k,o=A}else if("L"===b.type){var C=_slicedToArray(b.values,2),S=C[0],E=C[1];t.push({type:"L",values:[S,E]}),i=S,o=E}else if("H"===b.type){var T=_slicedToArray(b.values,1),P=T[0];t.push({type:"L",values:[P,o]}),i=P}else if("V"===b.type){var L=_slicedToArray(b.values,1),D=L[0];t.push({type:"L",values:[i,D]}),o=D}else if("S"===b.type){var M=_slicedToArray(b.values,4),N=M[0],I=M[1],R=M[2],V=M[3],z=void 0,G=void 0;"C"===n||"S"===n?(z=i+(i-a),G=o+(o-r)):(z=i,G=o),t.push({type:"C",values:[z,G,N,I,R,V]}),a=N,r=I,i=R,o=V}else if("T"===b.type){var B=_slicedToArray(b.values,2),O=B[0],q=B[1],j=void 0,U=void 0;"Q"===n||"T"===n?(j=i+(i-a),U=o+(o-r)):(j=i,U=o);var H=i+2*(j-i)/3,$=o+2*(U-o)/3,F=O+2*(j-O)/3,Y=q+2*(U-q)/3;t.push({type:"C",values:[H,$,F,Y,O,q]}),a=j,r=U,i=O,o=q}else if("Q"===b.type){var X=_slicedToArray(b.values,4),W=X[0],K=X[1],Z=X[2],Q=X[3],J=i+2*(W-i)/3,ee=o+2*(K-o)/3;t.push({type:"C",values:[J,ee,Z+2*(W-Z)/3,Q+2*(K-Q)/3,Z,Q]}),a=W,r=K,i=Z,o=Q}else"A"===b.type?function(){var e=_slicedToArray(b.values,7),n=e[0],a=e[1],r=e[2],s=e[3],l=e[4],d=e[5],u=e[6];if(0===n||0===a)t.push({type:"C",values:[i,o,d,u,d,u]}),i=d,o=u;else if(i!==d||o!==u){var c=arcToCubicCurves(i,o,d,u,n,a,r,s,l);c.forEach(function(e){t.push({type:"C",values:e}),i=d,o=u})}}():"Z"===b.type&&(t.push(b),i=s,o=l);n=b.type}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return t};SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[$cachedPathData]=null,this[$cachedNormalizedPathData]=null),setAttribute.call(this,e,t)},SVGPathElement.prototype.removeAttribute=function(e){"d"===e&&(this[$cachedPathData]=null,this[$cachedNormalizedPathData]=null),removeAttribute.call(this,e)},SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize){if(this[$cachedNormalizedPathData])return clonePathData(this[$cachedNormalizedPathData]);var t;this[$cachedPathData]?t=clonePathData(this[$cachedPathData]):(t=parsePathDataString(this.getAttribute("d")||""),this[$cachedPathData]=clonePathData(t));var n=reducePathData(absolutizePathData(t));return this[$cachedNormalizedPathData]=clonePathData(n),n}if(this[$cachedPathData])return clonePathData(this[$cachedPathData]);var a=parsePathDataString(this.getAttribute("d")||"");return this[$cachedPathData]=clonePathData(a),a},SVGPathElement.prototype.setPathData=function(e){if(0===e.length)this.removeAttribute("d");else{for(var t="",n=0,a=e.length,r;n<a;n+=1)r=e[n],0<n&&(t+=" "),t+=r.type,r.values&&0<r.values.length&&(t+=" "+r.values.join(" "));this.setAttribute("d",t)}},SVGRectElement.prototype.getPathData=function(e){var t=this.x.baseVal.value,n=this.y.baseVal.value,a=this.width.baseVal.value,r=this.height.baseVal.value,i=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,o=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;i>a/2&&(i=a/2),o>r/2&&(o=r/2);var s=[{type:"M",values:[t+i,n]},{type:"H",values:[t+a-i]},{type:"A",values:[i,o,0,0,1,t+a,n+o]},{type:"V",values:[n+r-o]},{type:"A",values:[i,o,0,0,1,t+a-i,n+r]},{type:"H",values:[t+i]},{type:"A",values:[i,o,0,0,1,t,n+r-o]},{type:"V",values:[n+o]},{type:"A",values:[i,o,0,0,1,t+i,n]},{type:"Z",values:[]}];return s=s.filter(function(e){return"A"===e.type&&(0===e.values[0]||0===e.values[1])?!1:!0}),e&&!0===e.normalize&&(s=reducePathData(s)),s},SVGCircleElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.r.baseVal.value,r=[{type:"M",values:[t+a,n]},{type:"A",values:[a,a,0,0,1,t,n+a]},{type:"A",values:[a,a,0,0,1,t-a,n]},{type:"A",values:[a,a,0,0,1,t,n-a]},{type:"A",values:[a,a,0,0,1,t+a,n]},{type:"Z",values:[]}];return e&&!0===e.normalize&&(r=reducePathData(r)),r},SVGEllipseElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.rx.baseVal.value,r=this.ry.baseVal.value,i=[{type:"M",values:[t+a,n]},{type:"A",values:[a,r,0,0,1,t,n+r]},{type:"A",values:[a,r,0,0,1,t-a,n]},{type:"A",values:[a,r,0,0,1,t,n-r]},{type:"A",values:[a,r,0,0,1,t+a,n]},{type:"Z",values:[]}];return e&&!0===e.normalize&&(i=reducePathData(i)),i},SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0,n;t<this.points.numberOfItems;t+=1)n=this.points.getItem(t),e.push({type:0==t?"M":"L",values:[n.x,n.y]});return e},SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0,n;t<this.points.numberOfItems;t+=1)n=this.points.getItem(t),e.push({type:0==t?"M":"L",values:[n.x,n.y]});return e.push({type:"Z",values:[]}),e}}}{{var StringScanner=function(){function e(t){_classCallCheck(this,e),this.text=t,this.cursor=0,this.line=1,this.column=1,this._storedPosition={cursor:0,line:1,column:1}}return _createClass(e,[{key:"read",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t="",n=this.cursor,a=0,r;a<e&&(r=this.text[n+a],void 0!==r);a+=1)t+=r,this.cursor+=1,"\n"===r?(this.line+=1,this.column=1):this.column+=1;return""===t?null:t}},{key:"peek",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t="",n=0,a;n<e&&(a=this.text[this.cursor+n],void 0!==a);n+=1)t+=a;return""===t?null:t}},{key:"storePosition",value:function(){var e=this.cursor,t=this.line,n=this.column;this._storedPosition={cursor:e,line:t,column:n}}},{key:"restorePosition",value:function(){var e=this._storedPosition,t=e.cursor,n=e.line,a=e.column;this.cursor=t,this.line=n,this.column=a}}]),e}();BoxySVG.classes.StringScanner=StringScanner}}{{var TokensScanner=function(){function e(t){_classCallCheck(this,e),this._tokens=t,this.currentToken=null,this.position=0}return _createClass(e,[{key:"read",value:function(){var e=this._tokens[this.position];return this.currentToken=e,"EOF"===e.tokenType?e:(this.position+=1,e)}},{key:"reset",value:function(e){this.position=e}}]),e}();BoxySVG.classes.TokensScanner=TokensScanner}}{{var isAppleDevice=["iPhone","iPad"].includes(navigator.platform)||navigator.platform.startsWith("Mac"),defaultArtworkSVG="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 500 500\"></svg>",namespaces={bx:"https://boxy-svg.com",html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},blendModeNames=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],cursorNames=["context-menu","help","pointer","progress","wait ","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out "],ariaRoles=["alert","alertdialog","application","article","banner","button","cell","checkbox","columnheader","combobox","command","complementary","composite","contentinfo","definition","dialog","directory","document","feed","figure","form","grid","gridcell","group","heading","img","input","landmark","link","list","listbox","listitem","log","main","marquee","math","menu","menubar","menuitem","menuitemcheckbox","menuitemradio","navigation","none","note","option","presentation","progressbar","radio","radiogroup","range","region","roletype","row","rowgroup","rowheader","scrollbar","search","searchbox","section","sectionhead","select","separator","slider","spinbutton","status","structure","switch","tab","table","tablist","tabpanel","term","textbox","timer","toolbar","tooltip","tree","treegrid","treeitem","widget","window"],lengthUnits=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","q","in","pc","pt","px"],angleUnits=["deg","grad","rad","turn"],alignValues=["none","xMinYMin","xMidYMin","xMaxYMin","xMinYMid","xMidYMid","xMaxYMid","xMinYMax","xMidYMax","xMaxYMax"],hitTestPoints=[[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[-3,-2],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[-3,-1],[-2,-1],[-1,-1],[0,-1],[1,-1],[2,-1],[3,-1],[-3,0],[-2,0],[-1,0],[0,0],[1,0],[2,0],[3,0],[-3,1],[-2,1],[-1,1],[0,1],[1,1],[2,1],[3,1],[-3,2],[-2,2],[-1,2],[0,2],[1,2],[2,2],[3,2],[-3,3],[-2,3],[-1,3],[0,3],[1,3],[2,3],[3,3]],shapeElementNames=["circle","ellipse","line","path","polygon","polyline","rect"],graphicsElementNames=[].concat(shapeElementNames,["image","text","textPath","tspan"]),objectElementNames=[].concat(shapeElementNames,["image","text","g","a","svg","use"]),paintServerElementNames=["solidcolor","linearGradient","radialGradient","pattern"],paintableElementNames=[].concat(shapeElementNames,["text","textPath","tspan"]),descriptiveElementNames=["desc","bx-title"],structuralElementNames=["svg","g","defs","symbol","use"],filterPrimitiveElementNames=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"],filterTransferFunctionElementNames=["feFuncA","feFuncB","feFuncG","feFuncR"],filterLightSourceElementNames=["feDistantLight","fePointLight","feSpotLight"],accessibleElementNames=[].concat(_toConsumableArray(graphicsElementNames),["a","g","svg","symbol","use","view"]),svgElementNames=[].concat(_toConsumableArray(graphicsElementNames),paintServerElementNames,descriptiveElementNames,structuralElementNames,filterPrimitiveElementNames,filterTransferFunctionElementNames,filterLightSourceElementNames,["a","marker","mask","feMergeNode","filter","clipPath","stop","script","style","view"]),coreAttributeNames=["id","class","style","lang","tabindex"],filterPrimitiveAttributeNames=["x","y","width","height","result"],transferFunctionAttributeNames=["type","tableValues","slope","intercept","amplitude","exponent","offset"],eventAttributeNames=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointerlockchange","onpointerlockerror","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onselectionchange","onshow","onsort","onstalled","onsubmit","onsuspend","ontimeupdate","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontoggle","onunload","onvolumechange","onwaiting"],textSpecificPropertyNames=["direction","dominant-baseline","font-family","font-size","font-stretch","font-style","font-variant","font-weight","letter-spacing","text-anchor","text-decoration","text-rendering","unicode-bidi","word-spacing","writing-mode"],urlValueAcceptingPropertyNames=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],namedColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fontWeightsByMatchingOrder={100:["100","200","300","400","500","600","700","800","900"],200:["200","100","300","400","500","600","700","800","900"],300:["300","200","100","400","500","600","700","800","900"],400:["400","500","300","200","100","600","700","800","900"],500:["500","400","300","200","100","600","700","800","900"],600:["600","700","800","900","500","400","300","200","100"],700:["700","800","900","600","500","400","300","200","100"],800:["800","900","700","600","500","400","300","200","100"],900:["900","800","700","600","500","400","300","200","100"]},contentSchemas={a:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","#text"]),"bx-title":["#text"],circle:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),clipPath:[].concat(descriptiveElementNames,shapeElementNames,["text","use","script","style"]),defs:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","bx-guide"]),desc:["#text"],ellipse:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),feBlend:[].concat(descriptiveElementNames,["script","style"]),feColorMatrix:[].concat(descriptiveElementNames,["script","style"]),feComponentTransfer:[].concat(descriptiveElementNames,filterTransferFunctionElementNames,["script","style"]),feComposite:[].concat(descriptiveElementNames,["script","style"]),feConvolveMatrix:[].concat(descriptiveElementNames,["script","style"]),feDiffuseLighting:[].concat(descriptiveElementNames,filterLightSourceElementNames,["script","style"]),feDisplacementMap:[].concat(descriptiveElementNames,["script","style"]),feDistantLight:[].concat(descriptiveElementNames,["script","style"]),feDropShadow:[].concat(descriptiveElementNames,["script","style"]),feFlood:[].concat(descriptiveElementNames,["script","style"]),feFuncR:[].concat(descriptiveElementNames,["script","style"]),feFuncG:[].concat(descriptiveElementNames,["script","style"]),feFuncB:[].concat(descriptiveElementNames,["script","style"]),feFuncA:[].concat(descriptiveElementNames,["script","style"]),feGaussianBlur:[].concat(descriptiveElementNames,["script","style"]),feImage:[].concat(descriptiveElementNames,["script","style"]),feMerge:[].concat(descriptiveElementNames,["feMergeNode","script","style"]),feMergeNode:[].concat(descriptiveElementNames,["script","style"]),feMorphology:[].concat(descriptiveElementNames,["script","style"]),feOffset:[].concat(descriptiveElementNames,["script","style"]),fePointLight:[].concat(descriptiveElementNames,["script","style"]),feSpecularLighting:[].concat(descriptiveElementNames,["feDistantLight","fePointLight","feSpotLight","script","style"]),feSpotLight:[].concat(descriptiveElementNames,["script","style"]),feTile:[].concat(descriptiveElementNames,["script","style"]),feTurbulence:[].concat(descriptiveElementNames,["script","style"]),filter:[].concat(filterPrimitiveElementNames,descriptiveElementNames,["script","style"]),g:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),image:[].concat(descriptiveElementNames,["clipPath","mask","script","style"]),line:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),linearGradient:[].concat(descriptiveElementNames,["script","stop","style"]),marker:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),mask:[].concat(descriptiveElementNames,shapeElementNames,structuralElementNames,paintServerElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","text"]),path:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),pattern:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),polygon:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),polyline:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),radialGradient:[].concat(descriptiveElementNames,["script","stop","style"]),rect:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),script:["#text"],solidcolor:[].concat(descriptiveElementNames,["script","style"]),stop:[].concat(descriptiveElementNames,["script","style"]),style:["#text"],svg:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),symbol:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),text:[].concat(descriptiveElementNames,paintServerElementNames,["a","clipPath","marker","mask","script","style","tspan","textPath","#text"]),textPath:[].concat(descriptiveElementNames,paintServerElementNames,["a","clipPath","marker","mask","script","style","tspan","#text"]),tspan:[].concat(descriptiveElementNames,paintServerElementNames,["a","script","style","tspan","#text"]),use:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","mask","script","style"]),view:[].concat(descriptiveElementNames,["script","style"])},attributeSchemas=[{name:"amplitude",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"aria-activedescendant",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-atomic",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-autocomplete",values:[{type:"token",tokens:["inline","list","both","none"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-busy",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-checked",values:[{type:"token",tokens:["true","false","mixed"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colcount",values:[{type:"integer",min:-1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colindex",values:[{type:"integer",min:1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colspan",values:[{type:"integer",min:1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-controls",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-current",values:[{type:"token",tokens:["page","step","location","date","time","true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-describedby",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-details",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-disabled",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-dropeffect",values:[{type:"token-list",tokens:["copy","execute","link","move","none","popup"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-errormessage",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-expanded",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-flowto",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-grabbed",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-haspopup",values:[{type:"token",tokens:["true","false","menu","listbox","tree","grid","dialog"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-hidden",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-invalid",values:[{type:"token",tokens:["true","false","grammar","spelling"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-label",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-labelledby",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-level",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-live",values:[{type:"token",tokens:["assertive","polite","off"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-modal",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-multiline",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-multiselectable",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-orientation",values:[{type:"token",tokens:["horizontal","vertical"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-owns",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-placeholder",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-posinset",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-pressed",values:[{type:"token",tokens:["true","false","mixed"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-readonly",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-relevant",values:[{type:"token-list",tokens:["additions","removals","text","all"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-required",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-roledescription",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowcount",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowindex",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowspan",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-selected",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-setsize",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-sort",values:[{type:"token",tokens:["ascending","descending","none","other"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuemax",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuemin",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuenow",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuetext",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"azimuth",values:[{type:"number"}],appliesTo:["feDistantLight"]},{name:"baseFrequency",values:[{type:"number-optional-number",min:0}],appliesTo:["feTurbulence"]},{name:"bias",values:[{type:"number"}],appliesTo:["feConvolveMatrix"]},{name:"class",values:[{type:"class-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"clipPathUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["clipPath"]},{name:"crossorigin",values:[{type:"token",tokens:["anonymous","use-credentials"]}],appliesTo:["feImage","image","script"]},{name:"cx",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["radialGradient","circle","ellipse"]},{name:"cy",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["radialGradient","circle","ellipse"]},{name:"d",values:[{type:"path-data"}],appliesTo:["path","textPath"]},{name:"diffuseConstant",values:[{type:"number",min:0}],appliesTo:["feDiffuseLighting"]},{name:"divisor",values:[{type:"number"}],appliesTo:["feConvolveMatrix"]},{name:"download",values:[{type:"boolean"}],appliesTo:["a"]},{name:"dx",values:[{type:"number"}],appliesTo:["feDropShadow","feOffset"]},{name:"dy",values:[{type:"number"}],appliesTo:["feDropShadow","feOffset"]},{name:"edgeMode",values:[{type:"token-list",tokens:["duplicate","wrap","none"]}],appliesTo:["feConvolveMatrix","feGaussianBlur"]},{name:"elevation",values:[{type:"number"}],appliesTo:["feDistantLight"]},{name:"exponent",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"filterUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["filter"]},{name:"fr",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"fx",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"fy",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"gradientUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["linearGradient","radialGradient"]},{name:"gradientTransform",values:[{type:"transform-list"}],appliesTo:["linearGradient","radialGradient"]},{name:"height",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","svg","rect","image"])},{name:"href",values:[{type:"href"}],appliesTo:["a","feImage","image","linearGradient","radialGradient","pattern","script","textPath","use"]},{name:"hreflang",values:[{type:"language-tag"}],appliesTo:["a"]},{name:"id",values:[{type:"id-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"in",values:[{type:"token",tokens:["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"]},{type:"ident"}],appliesTo:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feGaussianBlur","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile"]},{name:"in2",values:[{type:"token",tokens:["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"]},{type:"ident"}],appliesTo:["feBlend","feComposite","feDisplacementMap"]},{name:"intercept",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"k1",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k2",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k3",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k4",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"kernelMatrix",values:[{type:"number-list"}],appliesTo:["feConvolveMatrix"]},{name:"kernelUnitLength",values:[{type:"number-optional-number"}],appliesTo:["feConvolveMatrix","feDiffuseLighting","feSpecularLighting"]},{name:"lang",values:[{type:"language-tag"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"lengthAdjust",values:[{type:"token",tokens:["spacing","spacingAndGlyphs"]}],appliesTo:["text","textPath","tspan"]},{name:"limitingConeAngle",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"markerHeight",values:[{type:"length",min:0},{type:"percentage",min:0},{type:"number",min:0}],appliesTo:["marker"]},{name:"markerUnits",values:[{type:"token",tokens:["strokeWidth","userSpaceOnUse"]}],appliesTo:["marker"]},{name:"markerWidth",values:[{type:"length",min:0},{type:"percentage",min:0},{type:"number",min:0}],appliesTo:["marker"]},{name:"maskContentUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["mask"]},{name:"maskUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["mask"]},{name:"media",values:[{type:"media-query-list"}],appliesTo:["style"]},{name:"method",values:[{type:"token",tokens:["align","stretch"]}],appliesTo:["textPath"]},{name:"mode",values:[{type:"token",tokens:[].concat(blendModeNames)}],appliesTo:["feBlend"]},{name:"numOctaves",values:[{type:"integer"}],appliesTo:["feTurbulence"]},{name:"offset",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"offset",values:[{type:"number"},{type:"percentage"}],appliesTo:["stop"]},{name:"operator",values:[{type:"token",tokens:["over","in","out","atop","xor","lighter","arithmetic"]}],appliesTo:["feComposite"]},{name:"operator",values:[{type:"token",tokens:["erode","dilate"]}],appliesTo:["feMorphology"]},{name:"order",values:[{type:"number-optional-number"}],appliesTo:["feConvolveMatrix"]},{name:"orient",values:[{type:"token",tokens:["auto","auto-start-reverse"]},{type:"angle"},{type:"number"}],appliesTo:["marker"]},{name:"path",values:[{type:"path-data"}],appliesTo:["textPath"]},{name:"pathLength",values:[{type:"number"}],appliesTo:["circle","ellipse","line","path","polygon","polyline","rect"]},{name:"patternContentUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["pattern"]},{name:"patternTransform",values:[{type:"transform-list"}],appliesTo:["pattern"]},{name:"patternUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["pattern"]},{name:"points",values:[{type:"points"}],appliesTo:["polygon","polyline"]},{name:"pointsAtX",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"pointsAtY",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"pointsAtZ",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"preserveAlpha",values:[{type:"token",tokens:["true","false"]}],appliesTo:["feConvolveMatrix"]},{name:"preserveAspectRatio",values:[{type:"aspect-ratio"}],appliesTo:["feImage","image","marker","pattern","svg","symbol","view"]},{name:"primitiveUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["filter"]},{name:"r",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["radialGradient","circle"]},{name:"rx",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["ellipse","rect"]},{name:"ry",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["ellipse","rect"]},{name:"radius",values:[{type:"number-optional-number",min:0}],appliesTo:["feMorphology"]},{name:"refX",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["center","left","right"]}],appliesTo:["marker","symbol"]},{name:"refY",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["center","top","bottom"]}],appliesTo:["marker","symbol"]},{name:"rel",values:[{type:"token-list",tokens:["alternate","author","bookmark","external","help","license","next","nofollow","noopener","noreferrer","prev","search","tag"]}],appliesTo:["a"]},{name:"result",values:[{type:"ident"}],appliesTo:[].concat(filterPrimitiveElementNames)},{name:"role",values:[{type:"token-list",tokens:[].concat(ariaRoles)}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"scale",values:[{type:"number"}],appliesTo:["feDisplacementMap"]},{name:"seed",values:[{type:"number"}],appliesTo:["feTurbulence"]},{name:"side",values:[{type:"token",tokens:["left","right"]}],appliesTo:["textPath"]},{name:"slope",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"spacing",values:[{type:"token",tokens:["auto","exact"]}],appliesTo:["textPath"]},{name:"specularConstant",values:[{type:"number"}],appliesTo:["feSpecularLighting"]},{name:"specularExponent",values:[{type:"number"}],appliesTo:["feSpecularLighting","feSpotLight"]},{name:"spreadMethod",values:[{type:"token",tokens:["pad","reflect","repeat"]}],appliesTo:["linearGradient","radialGradient"]},{name:"startOffset",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["textPath"]},{name:"stdDeviation",values:[{type:"number-optional-number"}],appliesTo:["feDropShadow","feGaussianBlur"]},{name:"stitchTiles",values:[{type:"token",tokens:["stitch","noStitch"]}],appliesTo:["feTurbulence"]},{name:"style",values:[{type:"style-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"surfaceScale",values:[{type:"number"}],appliesTo:["feDiffuseLighting","feSpecularLighting"]},{name:"tabindex",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"tableValues",values:[{type:"number-list"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"target",values:[{type:"token",tokens:["_self","_parent","_top","_blank"]}],appliesTo:["a"]},{name:"targetX",values:[{type:"integer"}],appliesTo:["feConvolveMatrix"]},{name:"targetY",values:[{type:"integer"}],appliesTo:["feConvolveMatrix"]},{name:"textLength",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["text","textPath","tspan"]},{name:"transform",values:[{type:"transform-list"}],appliesTo:["circle","ellipse","line","path","polygon","polyline","rect","image","text","tspan","use","a","g","svg"]},{name:"type",values:[{type:"any"}],appliesTo:["a"]},{name:"type",values:[{type:"token",tokens:["matrix","saturate","hueRotate","luminanceToAlpha"]}],appliesTo:["feColorMatrix"]},{name:"type",values:[{type:"token",tokens:["identity","table","discrete","linear","gamma"]}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"type",values:[{type:"token",tokens:["fractalNoise","turbulence"]}],appliesTo:["feTurbulence"]},{name:"type",values:[{type:"any"},{type:"token",tokens:["module"]}],appliesTo:["script"]},{name:"type",values:[{type:"any"}],appliesTo:["style"]},{name:"values",values:[{type:"number-list"}],appliesTo:["feColorMatrix"]},{name:"viewBox",values:[{type:"view-box"}],appliesTo:["marker","pattern","svg","symbol","view"]},{name:"width",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","svg","rect","image"])},{name:"x",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","text","tspan","svg","rect","image"])},{name:"x",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]},{name:"x1",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"x2",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"xChannelSelector",values:[{type:"token",tokens:["R","G","B","A"]}],appliesTo:["feDisplacementMap"]},{name:"y",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","text","tspan","svg","rect","image"])},{name:"y",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]},{name:"y1",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"y2",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"yChannelSelector",values:[{type:"token",tokens:["R","G","B","A"]}],appliesTo:["feDisplacementMap"]},{name:"z",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]}],propertySchemas=[{name:"alignment-baseline",presentationAttributeName:"alignment-baseline",values:[{type:"token",tokens:["baseline","text-bottom","alphabetic","ideographic","middle","central","mathematical","text-top","bottom","center","top","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!1},{name:"baseline-shift",presentationAttributeName:"baseline-shift",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["sub","super","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!1},{name:"clip-path",presentationAttributeName:"clip-path",values:[{type:"url"},{type:"token",tokens:["fill-box","stroke-box","view-box","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!1,inheritable:!1},{name:"clip-rule",presentationAttributeName:"clip-rule",values:[{type:"token",tokens:["nonzero","evenodd","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use"]),animatable:!1,inheritable:!0},{name:"color",presentationAttributeName:"color",values:[{type:"color"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!0,inheritable:!0},{name:"color-interpolation",presentationAttributeName:"color-interpolation",values:[{type:"token",tokens:["auto","sRGB","linearRGB","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","linearGradient","radialGradient"]),animatable:!0,inheritable:!0},{name:"color-interpolation-filters",presentationAttributeName:"color-interpolation-filters",values:[{type:"token",tokens:["auto","sRGB","linearRGB","inherit","initial","unset"]}],appliesTo:[].concat(filterPrimitiveElementNames),animatable:!1,inheritable:!0},{name:"color-rendering",presentationAttributeName:"color-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeQuality","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","linearGradient","radialGradient"]),animatable:!0,inheritable:!0},{name:"cursor",presentationAttributeName:"cursor",values:[{type:"url"},{type:"token",tokens:[].concat(cursorNames,["inherit","initial","unset"])}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!1,inheritable:!0},{name:"direction",values:[{type:"token",tokens:["ltr","rtl","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],presentationAttributeName:"direction",animatable:!1,inheritable:!0},{name:"display",presentationAttributeName:"display",values:[{type:"token",tokens:["none","inline","block","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["textPath","tspan","svg","g","a","use"]),animatable:!1,inheritable:!1},{name:"dominant-baseline",presentationAttributeName:"dominant-baseline",values:[{type:"token",tokens:["auto","use-script","no-change","reset-size","ideographic","alphabetic","hanging","mathematical","central","middle","text-after-edge","text-before-edge","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"fill",presentationAttributeName:"fill",values:[{type:"color"},{type:"url"},{type:"token",tokens:["none","currentColor","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"fill-opacity",presentationAttributeName:"fill-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"fill-rule",presentationAttributeName:"fill-rule",values:[{type:"token",tokens:["nonzero","evenodd","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"filter",presentationAttributeName:"filter",values:[{type:"filter-function-list"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["textPath","tspan","g","a","svg","use"]),animatable:!0,inheritable:!1},{name:"flood-color",presentationAttributeName:"flood-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["feFlood"],animatable:!0,inheritable:!1},{name:"flood-opacity",presentationAttributeName:"flood-opacity",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["feFlood"],animatable:!0,inheritable:!1},{name:"font",presentationAttributeName:"font",values:[{type:"font"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-family",presentationAttributeName:"font-family",values:[{type:"font-family"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-size",presentationAttributeName:"font-size",values:[{type:"token",tokens:["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller","inherit","initial","unset"]},{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-stretch",presentationAttributeName:"font-stretch",values:[{type:"token",tokens:["normal","wider","narrower","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-style",presentationAttributeName:"font-style",values:[{type:"token",tokens:["normal","italic","oblique","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-variant",presentationAttributeName:"font-variant",values:[{type:"token",tokens:["normal","small-caps","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-weight",presentationAttributeName:"font-weight",values:[{type:"token",tokens:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"image-rendering",presentationAttributeName:"image-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeQuality","inherit","initial","unset"]}],appliesTo:["image"],animatable:!0,inheritable:!0},{name:"isolation",presentationAttributeName:null,values:[{type:"token",tokens:["isolate","auto","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!1,inheritable:!1},{name:"letter-spacing",presentationAttributeName:"letter-spacing",values:[{type:"number"},{type:"length"},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"lighting-color",presentationAttributeName:"lighting-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["feDiffuseLighting","feSpecularLighting"],animatable:!0,inheritable:!1},{name:"line-height",presentationAttributeName:"line-height",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!0},{name:"marker",presentationAttributeName:"marker",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-start",presentationAttributeName:"marker-start",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-mid",presentationAttributeName:"marker-mid",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-end",presentationAttributeName:"marker-end",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"mask",presentationAttributeName:"mask",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["g","a","svg","use"]),animatable:!0,inheritable:!1},{name:"mix-blend-mode",presentationAttributeName:null,values:[{type:"token",tokens:[].concat(blendModeNames,["inherit","initial","unset"])}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!1,inheritable:!1},{name:"opacity",presentationAttributeName:"opacity",values:[{type:"number"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!0,inheritable:!1},{name:"overflow",presentationAttributeName:"overflow",values:[{type:"token",tokens:["visible","hidden","scroll","auto","inherit","initial","unset"]}],appliesTo:["svg","symbol","pattern","marker","image"],inheritable:!1,animatable:!0},{name:"paint-order",presentationAttributeName:null,values:[{type:"token",tokens:["normal"]},{type:"token-list",tokens:["fill","stroke","markers"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),inheritable:!0,animatable:!0},{name:"pointer-events",presentationAttributeName:"pointer-events",values:[{type:"token",tokens:["bounding-box","visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),inheritable:!0,animatable:!0},{name:"shape-rendering",presentationAttributeName:"shape-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","crispEdges","geometricPrecision","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"stop-color",presentationAttributeName:"stop-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["stop"],animatable:!0,inheritable:!1},{name:"stop-opacity",presentationAttributeName:"stop-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["stop"],animatable:!0,inheritable:!1},{name:"stroke",presentationAttributeName:"stroke",values:[{type:"color"},{type:"url"},{type:"token",tokens:["none","currentColor","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-dasharray",presentationAttributeName:"stroke-dasharray",values:[{type:"dasharray"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-dashoffset",presentationAttributeName:"stroke-dasharray",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-linecap",presentationAttributeName:"stroke-linecap",values:[{type:"token",tokens:["butt","round","square","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-linejoin",presentationAttributeName:"stroke-linejoin",values:[{type:"token",tokens:["miter","round","bevel","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-miterlimit",presentationAttributeName:"stroke-miterlimit",values:[{type:"number",min:1},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-opacity",presentationAttributeName:"stroke-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-width",presentationAttributeName:"stroke-width",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"text-anchor",presentationAttributeName:"text-anchor",values:[{type:"token",tokens:["start","middle","end","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"text-decoration",presentationAttributeName:"text-decoration",values:[{type:"token-list",tokens:["underline","overline","line-through"]},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!1},{name:"text-rendering",presentationAttributeName:"text-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeLegibility","geometricPrecision","inherit","initial","unset"]}],appliesTo:["text"],animatable:!0,inheritable:!0},{name:"text-transform",presentationAttributeName:null,values:[{type:"token",tokens:["capitalize","uppercase","lowercase","none","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!1,inheritable:!0},{name:"unicode-bidi",presentationAttributeName:"unicode-bidi",values:[{type:"token",tokens:["normal","embed","bidi-override","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!1,inheritable:!1},{name:"vector-effect",presentationAttributeName:"vector-effect",values:[{type:"token",tokens:["non-scaling-stroke","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use"]),animatable:!0,inheritable:!1},{name:"visibility",presentationAttributeName:"visibility",values:[{type:"token",tokens:["visible","hidden","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use","text","textPath","tspan"]),animatable:!0,inheritable:!0},{name:"word-spacing",presentationAttributeName:"word-spacing",values:[{type:"number"},{type:"length"},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"white-space",presentationAttributeName:"white-space",values:[{type:"token",tokens:["normal","pre","nowrap","pre-wrap","pre-line","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"writing-mode",presentationAttributeName:"writing-mode",values:[{type:"token",tokens:["horizontal-tb","vertical-lr","vertical-rl","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath"],animatable:!1,inheritable:!0}],presentationAttributeNames=propertySchemas.map(function(e){return e.presentationAttributeName}).filter(function(e){return e});BoxySVG.utils.variables={isAppleDevice:isAppleDevice,defaultArtworkSVG:defaultArtworkSVG,namespaces:namespaces,lengthUnits:lengthUnits,angleUnits:angleUnits,alignValues:alignValues,hitTestPoints:hitTestPoints,shapeElementNames:shapeElementNames,graphicsElementNames:graphicsElementNames,objectElementNames:objectElementNames,paintServerElementNames:paintServerElementNames,paintableElementNames:paintableElementNames,filterPrimitiveElementNames:filterPrimitiveElementNames,svgElementNames:svgElementNames,eventAttributeNames:eventAttributeNames,textSpecificPropertyNames:textSpecificPropertyNames,urlValueAcceptingPropertyNames:urlValueAcceptingPropertyNames,namedColors:namedColors,fontWeightsByMatchingOrder:fontWeightsByMatchingOrder,contentSchemas:contentSchemas,attributeSchemas:attributeSchemas,propertySchemas:propertySchemas,presentationAttributeNames:presentationAttributeNames}}}{{var getBackgroundWindow=function(){return new Promise(function(e){chrome.runtime.getBackgroundPage(function(t){return e(t)})})},readEntry=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";return new Promise(function(n){e.file(function(e){var a=new FileReader,r,i,o;"text"===t?a.readAsText(e):"dataURL"===t?a.readAsDataURL(e):"arrayBuffer"===t&&a.readAsArrayBuffer(e),a.addEventListener("load",i=function(e){a.removeEventListener("load",i),a.removeEventListener("error",o),r="arrayBuffer"===t?new Uint8Array(e.target.result):e.target.result,n(r)}),a.addEventListener("error",o=function(){a.removeEventListener("load",i),a.removeEventListener("error",o),n(null)})})})},writeEntry=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"text/plain";return new Promise(async function(a,r){var i=await getWritableEntry(e);i?i.createWriter(function(e){var i=new Blob([t],{type:n}),o="write",s,l;e.addEventListener("writeend",s=function(){"write"==o?(o="truncate",e.truncate(i.size)):"truncate"==o&&(e.removeEventListener("writeend",s),e.removeEventListener("error",l),a())}),e.addEventListener("error",l=function(){e.removeEventListener("writeend",s),e.removeEventListener("error",l),r("READ_ONLY")}),e.write(i)},function(){r("NOT_FOUND")}):r("READ_ONLY")})},chooseEntry=function(e){return new Promise(function(t,n){chrome.fileSystem.chooseEntry(e,function(a){chrome.runtime.lastError?"User cancelled"===chrome.runtime.lastError.message?t(!0===e.acceptsMultiple?[]:null):n(chrome.runtime.lastError.message):t(a)})})},restoreEntry=function(e){return new Promise(function(t){chrome.fileSystem.restoreEntry(e,function(e){e?e.file(function(){return t(e)},function(){return t(null)}):t(null)})})},compareEntries=async function(e,t){return new Promise(async function(n){var a=await getEntryDisplayPath(e),r=await getEntryDisplayPath(t);n(a===r)})},getEntryDisplayPath=function(e){return new Promise(function(t){chrome.fileSystem.getDisplayPath(e,function(e){t(e)})})},getEntryBaseName=function(e){return e.name.substring(0,e.name.lastIndexOf("."))},getEntryExtension=function(e){return e.name?e.name.includes(".")?e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase():"":""},getWritableEntry=function(e){return new Promise(function(t){chrome.fileSystem.isWritableEntry(e,function(n){n?t(e):chrome.fileSystem.getWritableEntry(e,function(e){chrome.runtime.lastError?t(null):t(e)})})})};BoxySVG.utils.chrome={getBackgroundWindow:getBackgroundWindow,readEntry:readEntry,writeEntry:writeEntry,chooseEntry:chooseEntry,restoreEntry:restoreEntry,compareEntries:compareEntries,getEntryDisplayPath:getEntryDisplayPath,getEntryBaseName:getEntryBaseName,getEntryExtension:getEntryExtension,getWritableEntry:getWritableEntry}}}{{var replaceAll=function(e,t,n){return e.split(t).join(n)},capitalize=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},toCamelCase=function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},toDashCase=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},isLowerCase=function(e){return e===e.toLowerCase()},collapseWhitespace=function(e){return e.replace(/\s+/g," ").trim()},sortAlphabetically=function(e){return e.sort(function(e,t){return e.id.localeCompare(t.id)})};BoxySVG.utils.string={replaceAll:replaceAll,capitalize:capitalize,toCamelCase:toCamelCase,toDashCase:toDashCase,isLowerCase:isLowerCase,collapseWhitespace:collapseWhitespace,sortAlphabetically:sortAlphabetically}}}{{var _propertySchemas=BoxySVG.utils.variables.propertySchemas,reduceProperty=function(e,t){{var n=_propertySchemas.find(function(t){return t.name===e}),a=n.presentationAttributeName||null;a&&t.hasAttribute(a)&&(""===t.style.getPropertyValue(e)&&t.style.setProperty(e,t.getAttribute(a)),t.removeAttribute(a))}{var r=t.style.getPropertyValue(e);if(""!==r){var i=getComputedStyle(t).getPropertyValue(e);t.style.removeProperty(e);var o=getComputedStyle(t).getPropertyValue(e);i!==o&&t.style.setProperty(e,r)}}},reflectStyleElementCSSOM=function(e){var t="",n=e.sheet.rules[0],a=!0,r=!1,i;try{for(var o=e.sheet.rules[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l!==n&&(t+="\n"),t+=l.cssText}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.textContent!==t&&(e.textContent=t)};BoxySVG.utils.style={reduceProperty:reduceProperty,reflectStyleElementCSSOM:reflectStyleElementCSSOM}}}{{var max=Math.max,_pow=Math.pow,round=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=_pow(10,t);return Math.round(e*n)/n},normalize=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Infinity,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return null!==a&&(e=round(e,a)),e<t?e=t:e>n&&(e=n),e},signum=function(e){return 0>e?-1:0<e?1:0},average=function(){for(var e=0,t=0;t<arguments.length;t+=1)e+=arguments.length<=t?void 0:arguments[t];return e/arguments.length},countDecimalPlaces=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),n;return n=t?max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0,n};BoxySVG.utils.math={round:round,normalize:normalize,signum:signum,average:average,countDecimalPlaces:countDecimalPlaces}}}{{var _round=BoxySVG.utils.math.round,floor=Math.floor,getRandomNumber=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:100,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,a=e+Math.random()*(t-e);return _round(a,n)},getRandomString=function(){for(var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz!@#$%^&*()_+-={}[]:<>,.",n="",a=0,r;a<e;a+=1)r=Math.floor(Math.random()*t.length),n+=t.substring(r,r+1);return n},getHash=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hex",n=2166136261,a=0,r=e.length;a<r;a+=1)n^=e.charCodeAt(a),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>=0,"hex"===t&&(n=("0000000"+n.toString(16)).substr(-8)),n},shuffle=function(e){for(var t=e.length;--t;){var n=getRandomNumber(0,1,5),a=floor(n*(t+1)),r=e[a];e[a]=e[t],e[t]=r}return e};BoxySVG.utils.random={getRandomNumber:getRandomNumber,getRandomString:getRandomString,getHash:getHash,shuffle:shuffle}}}{{var _round2=BoxySVG.utils.math.round,compareMatrixes=function(e,t){return e.a===t.a&&e.b===t.b&&e.c===t.c&&e.d===t.d&&e.e===t.e&&e.f===t.f},roundMatrix=function(t,n){var r=_round2(t.a,n),a=_round2(t.b,n),i=_round2(t.c,n),o=_round2(t.d,n),s=_round2(t.e,n),e=_round2(t.f,n);return new SVGMatrix([r,a,i,o,s,e])};BoxySVG.utils.matrix={compareMatrixes:compareMatrixes,roundMatrix:roundMatrix}}}{{var vectorsDotProduct=function(e,t){return e.x*t.x+e.y*t.y},subtractVectors=function(e,t){var n=BoxySVG.classes.Vector;return new n(e.x-t.x,e.y-t.y)},sumVectors=function(e,t){var n=BoxySVG.classes.Vector;return new n(e.x+t.x,e.y+t.y)},compareVectors=function(e,t){return e.x===t.x&&e.y===t.y};BoxySVG.utils.vector={vectorsDotProduct:vectorsDotProduct,subtractVectors:subtractVectors,sumVectors:sumVectors,compareVectors:compareVectors}}}{{var _round3=BoxySVG.utils.math.round,_BoxySVG$utils$vector=BoxySVG.utils.vector,_sumVectors=_BoxySVG$utils$vector.sumVectors,_vectorsDotProduct=_BoxySVG$utils$vector.vectorsDotProduct,sin=Math.sin,cos=Math.cos,acos=Math.acos,_atan=Math.atan2,abs=Math.abs,_sqrt=Math.sqrt,_pow2=Math.pow,_PI=Math.PI,_min=Math.min,_max=Math.max,_isNaN=Number.isNaN,comparePoints=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return null===n?e.x===t.x&&e.y===t.y:_round3(e.x,n)===_round3(t.x,n)&&_round3(e.y,n)===_round3(t.y,n)},checkCollinearity=function(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;if(0===a){var r=(e.x*(t.y-n.y)+t.x*(n.y-e.y)+n.x*(e.y-t.y))/2;return 0==r}var i=BoxySVG.classes.Vector,o=new i(e,t),s=new i(t,n),l=_vectorsDotProduct(o,s),d=acos(l/(o.length*s.length));if(_isNaN(d))return!0;var u=radToDeg(d);return u<a},getDistanceBetweenPoints=function(e,t){var n=t.x-e.x;n*=n;var a=t.y-e.y;a*=a;var r=_sqrt(n+a);return r},getPointBetweenTwoPoints=function(e,t){var n=(e.x+t.x)/2,a=(e.y+t.y)/2;return new SVGPoint(n,a)},getNearestPointOnLine=function(e,n,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0,i=new SVGPoint(0,0),o=new SVGPoint(e.x,e.y),s=new SVGPoint(n.x,n.y),l=BoxySVG.classes.Vector,d=new l(i,o),u=new l(o,s),c=new l(o,a),p=_vectorsDotProduct(c,u),h=_vectorsDotProduct(u,u),b;b=0===h?0:p/h,!1===r&&(0>b?b=0:1<b&&(b=1));var t=_sumVectors(d,u.multiply(b)),x=new SVGPoint(t.x,t.y);return[x,b]},getPointAtFraction=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0.5,a=t.x-e.x,r=t.y-e.y,i=new SVGPoint(e.x+n*a,e.y+n*r);return i},snapPointToAngleMultiple=function(e,t){for(var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:180/8,a=new SVGPoint(e.x,e.y-1e3),r=getRotationAngleFromPoints(e,a,t),o=[],s=-180;180>=s;s+=n)o.push(s);var i=Infinity,l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=h-r;abs(b)<abs(i)&&(i=b)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}r+=i;var x=degToRad(r-90),m=getDistanceBetweenPoints(e,t),g=BoxySVG.classes.Vector,v=new g(cos(x),sin(x));v.length=m;var y=new SVGPoint(e.x+v.x,e.y+v.y);return[y,r]},snapPointToAngle=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:90,a=new SVGPoint(e.x,e.y-1e3),r=getRotationAngleFromPoints(e,a,t),i=n-r;r+=i;var o=degToRad(r-90),s=getDistanceBetweenPoints(e,t),l=BoxySVG.classes.Vector,d=new l(cos(o),sin(o));d.length=s;var u=new SVGPoint(e.x+d.x,e.y+d.y);return u},getRotationAngleFromPoints=function(e,t,n){var a=BoxySVG.classes.Vector,r=new a(e,t),i=new a(e,n),o=_atan(i.y,i.x)-_atan(r.y,r.x),s=normalizeRotationAngle(radToDeg(o));return s},normalizeRotationAngle=function(e){for(;-180>e;)e+=360;for(;180<e;)e-=360;return e},snapRotationAngle=function(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:15,n=normalizeRotationAngle(e),a=[],r=-180;180>=r;r+=t)a.push(r);var i=a.reduce(function(e,t){return abs(t-n)<abs(e-n)?t:e});return i},_getPerpendicularDistance=function(e,t,n){var a=(n.y-t.y)/(n.x-t.x),r=t.y-a*t.x,i=abs(a*e.x-e.y+r)/_sqrt(_pow2(a,2)+1);return i},radToDeg=function(e){return e*(180/_PI)},degToRad=function(e){return _PI*e/180},compareRects=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return null===n?e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.neight:_round3(e.x,n)===_round3(t.x,n)&&_round3(e.y,n)===_round3(t.y,n)&&_round3(e.width,n)===_round3(t.width,n)&&_round3(e.height,n)===_round3(t.height,n)},roundRect=function(e,t){return new SVGRect(_round3(e.x,t),_round3(e.y,t),_round3(e.width,t),_round3(e.height,t))},transformRect=function(e,t){var n=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],a=n.map(function(e){return e.matrixTransform(t)}),r=a.map(function(e){return e.x}),i=a.map(function(e){return e.y}),o=_min.apply(void 0,_toConsumableArray(r)),s=_min.apply(void 0,_toConsumableArray(i)),l=_max.apply(void 0,_toConsumableArray(r)),d=_max.apply(void 0,_toConsumableArray(i));return new SVGRect(o,s,l-o,d-s)},getBiggestRect=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s.width*s.height;t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var d=_max.apply(void 0,t),u=t.indexOf(d),c=e[u];return c},combineRects=function(e){if(0===e.length)return new SVGRect(0,0,0,0);if(1===e.length){var t=e[0];return new SVGRect(t.x,t.y,t.width,t.height)}var n=[],a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,n.push(new SVGPoint(d.x,d.y)),a.push(new SVGPoint(d.x+d.width,d.y+d.height))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=SVGPoint.fromPoint(n[0]),c=SVGPoint.fromPoint(a[0]),p=!0,h=!1,b;try{for(var x=n[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g.x<u.x&&(u.x=g.x),g.y<u.y&&(u.y=g.y)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}var v=!0,y=!1,f;try{for(var _=a[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,k.x>c.x&&(c.x=k.x),k.y>c.y&&(c.y=k.y)}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=new SVGRect(u.x,u.y,c.x-u.x,c.y-u.y);return A},rectContainsRect=function(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height},rectContainsPoint=function(e,t){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},rectIntersectsRect=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},lineIntersectsRect=function(e,t,n){return lineIntersectsLineSegment(e,t,new SVGPoint(n.x,n.y),new SVGPoint(n.right,n.y))||lineIntersectsLineSegment(e,t,new SVGPoint(n.right,n.y),new SVGPoint(n.right,n.bottom))||lineIntersectsLineSegment(e,t,new SVGPoint(n.right,n.bottom),new SVGPoint(n.x,n.bottom))||lineIntersectsLineSegment(e,t,new SVGPoint(n.x,n.bottom),new SVGPoint(n.x,n.y))},lineSegmentIntersectsRect=function(e,t,n){return lineIntersectsRect(e,t,n)||rectContainsPoint(n,e)&&rectContainsPoint(n,t)},lineIntersectsLineSegment=function(e,t,n,a){var r=getLinesIntersectionPoint(e,t,n,a);return!!r&&r.x>=_min(n.x,a.x)&&r.x<=_max(n.x,a.x)&&r.y>=_min(n.y,a.y)&&r.y<=_max(n.y,a.y)},getLineEquationParametersFromPoints=function(e,t){var n=t.y-e.y,a=e.x-t.x,r=n*e.x+a*e.y;return[n,a,r]},getLinesIntersectionPoint=function(e,t,n,a){var r=getLineEquationParametersFromPoints(e,t),i=_slicedToArray(r,3),o=i[0],s=i[1],l=i[2],d=getLineEquationParametersFromPoints(n,a),u=_slicedToArray(d,3),c=u[0],p=u[1],h=u[2],b=o*p-c*s,x=null;return 0!=b&&(x=new SVGPoint((p*l-s*h)/b,(o*h-c*l)/b)),x};BoxySVG.utils.geometry={comparePoints:comparePoints,checkCollinearity:checkCollinearity,getDistanceBetweenPoints:getDistanceBetweenPoints,getPointBetweenTwoPoints:getPointBetweenTwoPoints,getNearestPointOnLine:getNearestPointOnLine,getPointAtFraction:getPointAtFraction,snapPointToAngleMultiple:snapPointToAngleMultiple,snapPointToAngle:snapPointToAngle,getRotationAngleFromPoints:getRotationAngleFromPoints,normalizeRotationAngle:normalizeRotationAngle,snapRotationAngle:snapRotationAngle,getPerpendicularDistance:_getPerpendicularDistance,radToDeg:radToDeg,degToRad:degToRad,compareRects:compareRects,roundRect:roundRect,transformRect:transformRect,getBiggestRect:getBiggestRect,combineRects:combineRects,rectContainsRect:rectContainsRect,rectContainsPoint:rectContainsPoint,rectIntersectsRect:rectIntersectsRect,lineIntersectsRect:lineIntersectsRect,lineSegmentIntersectsRect:lineSegmentIntersectsRect,lineIntersectsLineSegment:lineIntersectsLineSegment,getLineEquationParametersFromPoints:getLineEquationParametersFromPoints,getLinesIntersectionPoint:getLinesIntersectionPoint}}}{{var _isFinite=Number.isFinite,_isNaN2=Number.isNaN,_parseFloat=Number.parseFloat,isNumber=function(e){return!_isNaN2(e)&&"number"==typeof e},isBoolean=function(e){return e===!!e},isString=function(e){return"string"==typeof e},isNumeric=function(e){return!_isNaN2(_parseFloat(e))&&_isFinite(e)};BoxySVG.utils.type={isNumber:isNumber,isBoolean:isBoolean,isString:isString,isNumeric:isNumeric}}}{{var _isNumber=BoxySVG.utils.type.isNumber,_sqrt2=Math.sqrt,CONSTRUCTOR_ERROR="Invalid argument passed to Vector contstructor",Vector=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];if(0===n.length)this.x=0,this.y=0;else if(1===n.length){if(_isNumber(n[0].x)&&_isNumber(n[0].y))this.x=n[0].x,this.y=n[0].y;else throw new Error(CONSTRUCTOR_ERROR);}else if(2!==n.length)throw new Error(CONSTRUCTOR_ERROR);else if(_isNumber(n[0])&&_isNumber(n[1]))this.x=n[0],this.y=n[1];else if(n[0]instanceof SVGPoint&&n[1]instanceof SVGPoint){var r=n[0],i=n[1];this.x=i.x-r.x,this.y=i.y-r.y}else throw new Error(CONSTRUCTOR_ERROR)}return _createClass(e,[{key:"getNormalVector",value:function(){return new e(-this.y,this.x)}},{key:"getOppositeVector",value:function(){return new e(-this.x,-this.y)}},{key:"negate",value:function(){var e=this.multiply(-1);return e}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"multiplySelf",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"divideSelf",value:function(e){return this.x/=e,this.y/=e,this}},{key:"normalize",value:function(){return 0===this.length?new e(this):new e(this.x/this.length,this.y/this.length)}},{key:"scale",value:function(t){return 0===this.length?new e(this):(t/=this.length,new e(this.x*t,this.y*t))}},{key:"transformPoint",value:function(e){return new SVGPoint(e.x+this.x,e.y+this.y)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"length",get:function(){return _sqrt2(this.x*this.x+this.y*this.y)},set:function(e){0!==this.length&&(e/=this.length,this.x*=e,this.y*=e)}}]),e}();BoxySVG.classes.Vector=Vector}}{{var _isNumber2=BoxySVG.utils.type.isNumber,throttle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:500,n=arguments[2],a=null,r=null,i=null,o=0,s=function(){o=new Date,r=null,i=e.apply(n,a)};return function(){for(var l=arguments.length,d=Array(l),u=0;u<l;u++)d[u]=arguments[u];var c=new Date,p=t-(c-o);return a=d,0>=p?(clearTimeout(r),r=null,o=c,i=e.apply(n,a)):!r&&(r=setTimeout(s,p)),i}},debounce=function(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0&&arguments[3],r=null,i=null;return function(){for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];var d=a&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,a||(i=e.apply(n,s))},t),d&&(i=e.apply(n,s)),i}},sleep=function(e){return new Promise(function(t){setTimeout(function(){return t()},e)})},sleepUntilIdle=function(e){return new Promise(function(t){requestIdleCallback(function n(a){a.timeRemaining()>=e?t():requestIdleCallback(n)})})},nextTick=function(e){requestAnimationFrame(e)},milisecondsToDays=function(e){return e/1e3/60/60/24},getTimeStamp=function(){return Date.now()},getISOTimestamp=function(){var e=new Date,t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);return t+"-"+n+"-"+a+"T"+r+":"+i+":"+o},whenIdle=new Promise(function(e){requestIdleCallback(e)});BoxySVG.utils.time={throttle:throttle,debounce:debounce,sleep:sleep,sleepUntilIdle:sleepUntilIdle,nextTick:nextTick,milisecondsToDays:milisecondsToDays,getTimeStamp:getTimeStamp,getISOTimestamp:getISOTimestamp,whenIdle:whenIdle}}}{{var _BoxySVG$utils$math=BoxySVG.utils.math,_normalize=_BoxySVG$utils$math.normalize,_round4=_BoxySVG$utils$math.round,_namedColors=BoxySVG.utils.variables.namedColors,_min2=Math.min,_max2=Math.max,_floor=Math.floor,_parseFloat2=Number.parseFloat,_parseInt=Number.parseInt,rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var a=_max2(e,t,n),r=_min2(e,t,n),i,o,s;if(i=o=s=(a+r)/2,a===r)i=o=0;else{var l=a-r;if(o=0.5<s?l/(2-a-r):l/(a+r),a===e){var d;d=t<n?6:0,i=(t-n)/l+d}else a===t?i=(n-e)/l+2:a===n&&(i=(e-t)/l+4)}return i=_normalize(360*(i/6),0,360,0),o=_normalize(100*o,0,100,1),s=_normalize(100*s,0,100,1),[i,o,s]},hslToRgb=function(e,t,n){e/=360,t/=100,n/=100;var a,r,i;if(0===t)a=r=i=n;else{var o=function(e,n,a){return 0>a&&(a+=1),1<a&&(a-=1),a<1/6?e+6*(n-e)*a:a<1/2?n:a<2/3?e+6*((n-e)*(2/3-a)):e},s,l;s=0.5>n?n*(1+t):n+t-n*t,l=2*n-s,a=o(l,s,e+1/3),r=o(l,s,e),i=o(l,s,e-1/3)}return a=_normalize(255*a,0,255,0),r=_normalize(255*r,0,255,0),i=_normalize(255*i,0,255,0),[a,r,i]},rgbToHsv=function(e,t,n){e/=255,t/=255,n/=255;var a=_max2(e,t,n),r=_min2(e,t,n),i=0,o=0,s=a,l=a-r;return o=0===a?0:l/a,a===r?i=0:(a===e?i=(t-n)/l+(t<n?6:0):a===t?i=(n-e)/l+2:a===n&&(i=(e-t)/l+4),i/=6),i*=360,o*=100,s*=100,[i,o,s]},hsvToRgb=function(e,n,a){e/=360,n/=100,a/=100;var o=_floor(6*e),i=6*e-o,s=a*(1-n),l=a*(1-i*n),d=a*(1-(1-i)*n),t=0,r=0,u=0;return 0==o%6?(t=a,r=d,u=s):1==o%6?(t=l,r=a,u=s):2==o%6?(t=s,r=a,u=d):3==o%6?(t=s,r=l,u=a):4==o%6?(t=d,r=s,u=a):5==o%6&&(t=a,r=s,u=l),t*=255,r*=255,u*=255,[t,r,u]},hslToHsv=function(e,t,n){e/=360,t/=100,n=2*(n/100),t*=1>=n?n:2-n;var a=e,r,i;return r=0===n+t?0:2*t/(n+t),i=(n+t)/2,a=360*a,r=100*_max2(0,_min2(1,r)),i=100*_max2(0,_min2(1,i)),[a,r,i]},hsvToHsl=function(e,t,n){e/=360,t/=100,n/=100;var a=e,r=(2-t)*n,i=t*n;return 1>=r?0==r?i=0:i/=r:2==r?i=0:i/=2-r,r/=2,a=360*a,i=100*_max2(0,_min2(1,i)),r=100*_max2(0,_min2(1,r)),[a,i,r]},parseColor=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"rgba";e=e.trim();var n=tokenizeColor(e),i=null,o=null;if(7===n.length&&"rgb("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"NUM"===n[3].type&&","===n[4].text&&"NUM"===n[5].type&&")"===n[6].text)i=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),1];else if(7===n.length&&"rgb("===n[0].text&&"PERCENTAGE"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&")"===n[6].text)i=[255*(_parseFloat2(n[1].text)/100),255*(_parseFloat2(n[3].text)/100),255*(_parseFloat2(n[5].text)/100),1];else if(9===n.length&&"rgba("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"NUM"===n[3].type&&","===n[4].text&&"NUM"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)i=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),_parseFloat2(n[7].text)];else if(9===n.length&&"rgb("===n[0].text&&"PERCENTAGE"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)i=[255*(_parseFloat2(n[1].text)/100),255*(_parseFloat2(n[3].text)/100),255*(_parseFloat2(n[5].text)/100),_parseFloat2(n[7].text)];else if(7===n.length&&"hsl("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&")"===n[6].text)o=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),1];else if(9===n.length&&"hsla("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)o=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),_parseFloat2(n[7].text)];else if("HEX"===n[0].type&&n[1]===void 0){var d=n[0].text.substring(1),u,c,p;3===d.length?(u=d[0]+d[0],c=d[1]+d[1],p=d[2]+d[2]):(u=d[0]+d[1],c=d[2]+d[3],p=d[4]+d[5]),i=[_parseInt(u,16),_parseInt(c,16),_parseInt(p,16),1]}else _namedColors[e]&&(i=[_namedColors[e][0],_namedColors[e][1],_namedColors[e][2],1]);if(i){var x=i,m=_slicedToArray(x,4),y=m[0],r=m[1],g=m[2],b=m[3];if(y=_normalize(y,0,255,0),r=_normalize(r,0,255,0),g=_normalize(g,0,255,0),b=_normalize(b,0,1,2),"hsla"===t){var a=rgbToHsl(y,r,g),f=_slicedToArray(a,3),_=f[0],h=f[1],s=f[2];return[_,h,s,b]}if("hsva"===t){var l=rgbToHsv(y,r,g),w=_slicedToArray(l,3),k=w[0],A=w[1],C=w[2];return[k,A,C,b]}return[y,r,g,b]}if(o){var v=o,S=_slicedToArray(v,4),E=S[0],T=S[1],P=S[2],L=S[3];if(E=_normalize(E,0,360,0),T=_normalize(T,0,100,1),P=_normalize(P,0,100,1),L=_normalize(L,0,1,2),"hsla"===t)return[E,T,P,L];if("hsva"===t){var D=hslToHsv(E,T,P),M=_slicedToArray(D,3),N=M[0],I=M[1],R=M[2];return[N,I,R,L]}var V=hslToRgb(E,T,P),z=_slicedToArray(V,3),G=z[0],B=z[1],O=z[2];return[G,B,O,L]}throw new Error("Invalid color string: \""+e+"\"")},serializeColor=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"rgba",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"hex",i=null;if(["rgb","rgba","rgb%","rgba%","hex"].includes(n)){var o,r,d,u;if("rgba"===t){var a=_slicedToArray(e,4);o=a[0],r=a[1],d=a[2],u=a[3]}else if("hsla"===t){var c=hslToRgb.apply(void 0,_toConsumableArray(e)),p=_slicedToArray(c,3);o=p[0],r=p[1],d=p[2],u=e[3]}else if("hsva"===t){var b=hsvToRgb.apply(void 0,_toConsumableArray(e)),x=_slicedToArray(b,3);o=x[0],r=x[1],d=x[2],u=e[3]}if("rgb%"===n||"rgba%"===n?(o=_normalize(100*(o/255),0,100,1),r=_normalize(100*(r/255),0,100,1),d=_normalize(100*(d/255),0,100,1),u=_normalize(u,0,1,2)):(o=_normalize(o,0,255,0),r=_normalize(r,0,255,0),d=_normalize(d,0,255,0),u=_normalize(u,0,1,2)),"rgb"===n)i="rgb("+o+", "+r+", "+d+")";else if("rgba"===n)i="rgba("+o+", "+r+", "+d+", "+u+")";else if("rgb%"===n)i="rgb("+o+"%, "+r+"%, "+d+"%)";else if("rgba%"===n)i="rgb("+o+"%, "+r+"%, "+d+"%, "+u+")";else if("hex"===n){var m=o.toString(16),g=r.toString(16),v=d.toString(16);1===m.length&&(m="0"+m),1===g.length&&(g="0"+g),1===v.length&&(v="0"+v),i="#"+m+g+v}}else if("hsl"===n||"hsla"===n){var y,h,s,l;if("hsla"===t){var f=_slicedToArray(e,4);y=f[0],h=f[1],s=f[2],l=f[3]}else if("hsva"===t){var _=hsvToHsl.apply(void 0,_toConsumableArray(e)),w=_slicedToArray(_,3);y=w[0],h=w[1],s=w[2],l=e[3]}else if("rgba"===t){var k=rgbToHsl.apply(void 0,_toConsumableArray(e)),A=_slicedToArray(k,3);y=A[0],h=A[1],s=A[2],l=e[3]}y=_normalize(y,0,360,0),h=_normalize(h,0,100,1),s=_normalize(s,0,100,1),l=_normalize(l,0,1,2),"hsl"===n?i="hsl("+y+", "+h+"%, "+s+"%)":"hsla"===n&&(i="hsla("+y+", "+h+"%, "+s+"%, "+l+")")}return i},tokenizeColor=function(e){for(var t=BoxySVG.classes.StringScanner,n=[],a=new t(e.toLowerCase()),r=function(){var e=a.read();(function(){if("r"===e||"h"===e){var t=e;if("rgb("===e+a.peek(3)?t+=a.read(3):"rgba("===e+a.peek(4)?t+=a.read(4):"hsl("===e+a.peek(3)?t+=a.read(3):"hsla("===e+a.peek(4)&&(t+=a.read(4)),t!==e)return void n.push({type:"FUNCTION",text:t})}if("#"===e){if(isHexColorString(e+a.peek(6))){var r=e+a.read(6);return void n.push({type:"HEX",text:r})}if(isHexColorString(e+a.peek(3)))return text=e+a.read(3),void n.push({type:"HEX",text:text})}if(["0","1","2","3","4","5","6","7","8","9",".","-"].includes(e)){for(var i=e;["0","1","2","3","4","5","6","7","8","9","."].includes(a.peek());)i+=a.read();return void("%"===a.peek()?(i+=a.read(),n.push({type:"PERCENTAGE",text:i})):n.push({type:"NUM",text:i}))}/\u0009|\u000a|\u000c|\u000d|\u0020/.test(e)||n.push({type:"CHAR",text:e})})()};null!==a.peek();)r();return n},formatColorString=function(e,t){var n=t.startsWith("hsl")?"hsla":"rgba",a=parseColor(e,n),r=serializeColor(a,n,t);return r},isHexColorString=function(e){if(e=e.toLowerCase(),"#"!==e[0])return!1;if(4!==e.length&&7!==e.length)return!1;e=e.substring(1);var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,!t.includes(s))return!1}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!0},isValidColorString=function(e){try{parseColor(e)}catch(e){return!1}return!0},generateWheelSpectrumImage=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=n.createImageData(e,e),l=o.data,u=e/2,c=0;t.width=e,t.height=e;for(var i=0;i<e;i++)for(var p=0;p<e;p++){var x=p-u,m=i-u,v=pow(x,2)+pow(m,2),d=360*((atan2(m,x)+PI)/(2*PI)),h=100*(sqrt(v)/u),s=hsvToRgb(d,h,100),y=_slicedToArray(s,3),f=y[0],r=y[1],g=y[2],b=v>pow(u,2)?0:255;l[c++]=f,l[c++]=r,l[c++]=g,l[c++]=b}n.putImageData(o,0,0),window.open(t.toDataURL("image/png"))},generateRectSpectrumImage=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:500,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:40,n=document.createElement("canvas"),a=n.getContext("2d");n.width=e,n.height=t;var r=[[0,[255,0,0]],[0.15,[255,255,0]],[0.33,[0,255,0]],[0.49,[0,255,255]],[0.67,[0,0,255]],[0.84,[255,0,255]],[1,[255,0,0]]],i=a.createLinearGradient(0,0,e,0),o=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,i.addColorStop(c[0],"rgb("+c[1][0]+", "+c[1][1]+", "+c[1][2]+")")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}a.fillStyle=i,a.fillRect(0,0,e,t),window.open(n.toDataURL("image/png"))};BoxySVG.utils.color={rgbToHsl:rgbToHsl,hslToRgb:hslToRgb,rgbToHsv:rgbToHsv,hsvToRgb:hsvToRgb,hslToHsv:hslToHsv,hsvToHsl:hsvToHsl,parseColor:parseColor,serializeColor:serializeColor,formatColorString:formatColorString,isHexColorString:isHexColorString,isValidColorString:isValidColorString,generateWheelSpectrumImage:generateWheelSpectrumImage,generateRectSpectrumImage:generateRectSpectrumImage}}}{{var _sqrt3=Math.sqrt,_pow3=Math.pow,isPointerMoveIntentional=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,a=_sqrt3(_pow3(t.clientX-e.clientX,2)+_pow3(t.clientY-e.clientY,2));return a<n&&50>t.timeStamp-e.timeStamp?!1:!0};BoxySVG.utils.event={isPointerMoveIntentional:isPointerMoveIntentional}}}{{var closestShadowRoot=function(e){for(var t=e;t;t=t.parentNode)if(t instanceof ShadowRoot||t===window.document)return t},normalizeWhitespace=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;stripWhitespace(e);for(var n="",a={text:!0,textPath:!0,tspan:!0},r=0;r<t;r+=1)n+=" ";(function e(t){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;if(!a[t.localName]){var i=!0,o=!1,s;try{for(var l=t.children[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=t.firstChild===u,p=t.lastChild===u;if(!0==c){var h=document.createTextNode("\n");u.parentNode.insertBefore(h,u)}for(var b="",x=0;x<r;x+=1)b+=n;var m=document.createTextNode(b);if(t.insertBefore(m,u),!0==p){var g=document.createTextNode("\n");t.appendChild(g);for(var v="",y=0;y<r-1;y+=1)v+=n;var f=document.createTextNode(v);t.appendChild(f)}else{var _=document.createTextNode("\n");t.insertBefore(_,u.nextSibling)}0<u.childElementCount&&e(u,r+1)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}})(e,1)},stripWhitespace=function(e){for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,null),n={text:!0,textPath:!0,tspan:!0},a;a=t.nextNode();)n[a.parentElement.localName]||isDOMWhitespace(a.textContent)&&a.remove()},isDOMWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},trimDOMWhitespace=function(e){return e.replace(/^[\t\n\r ]+|[\t\n\r ]+$/g,"")},isConnectedToActiveDocument=function(e){for(var t=e;t;t=t.parentNode||t.host)if(t===document)return!0;return!1},connectNode=function(e){if(!1===e.isConnected){var t=BoxySVG.utils.element.html,n=t(_templateObject),a=n.attachShadow({mode:"closed"});a.append(e),document.body.append(n)}};BoxySVG.utils.node={closestShadowRoot:closestShadowRoot,normalizeWhitespace:normalizeWhitespace,stripWhitespace:stripWhitespace,isDOMWhitespace:isDOMWhitespace,trimDOMWhitespace:trimDOMWhitespace,isConnectedToActiveDocument:isConnectedToActiveDocument,connectNode:connectNode}}}{{var _BoxySVG$utils$geomet=BoxySVG.utils.geometry,_transformRect=_BoxySVG$utils$geomet.transformRect,_rectIntersectsRect=_BoxySVG$utils$geomet.rectIntersectsRect,_capitalize=BoxySVG.utils.string.capitalize,_BoxySVG$utils$variab=BoxySVG.utils.variables,_namespaces=_BoxySVG$utils$variab.namespaces,_graphicsElementNames=_BoxySVG$utils$variab.graphicsElementNames,_parseInt2=Number.parseInt,templateElement=document.createElement("template"),html=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),void 0!==(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a=t.join("");templateElement.innerHTML=a;var r=document.importNode(templateElement.content,!0);return 1===r.children.length?r.firstElementChild:r},svg=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),void 0!==(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a="<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">"+t.join("")+"</svg>";templateElement.innerHTML=a;var r=document.importNode(templateElement.content,!0),i=r.querySelector("svg#x-stub");if(1===i.children.length)return i.firstElementChild;for(var o=[].concat(_toConsumableArray(i.childNodes)),s=0,l;s<o.length;s++)l=o[s],r.appendChild(l);return i.remove(),r},createElement=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,n=e.split(":"),a=null;if(1===n.length){var r=_slicedToArray(n,1),i=r[0];a=document.createElement(i,t)}else if(2===n.length){var o=_slicedToArray(n,2),s=o[0],l=o[1];"svg"===s&&(a=document.createElementNS(_namespaces.svg,l,t))}return a},getOutermostSVGElement=function(e){for(var t="svg"===e.localName?e:null,n=e.ownerSVGElement;n;n=n.ownerSVGElement)t=n;return t},getElementIndex=function(e){for(var t in e.parentElement.children){var n=e.parentElement.children[t];if(n===e)return _parseInt2(t)}},compareElements=function e(t,n){if(t.localName!==n.localName)return!1;if(t.namespaceURI!==n.namespaceURI)return!1;if(t.textContent!==n.textContent)return!1;if(t.children.length!==n.children.length)return!1;if(t.attributes.length!==n.attributes.length)return!1;var a=!0,r=!1,o;try{for(var s=t.attributes[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)if(d=l.value,"style"===d.name){if(t.style.cssText!==n.style.cssText)return!1;}else if(t.getAttribute(d.name)!==n.getAttribute(d.name))return!1}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}for(var u=0;u<t.children.length;u+=1)if(!1===e(t.children[u],n.children[u]))return!1;return!0},elementFromPoint=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=document,r=null;a;)r=a.elementFromPoint(e,t),a=r?r.shadowRoot||r._shadowRoot:null;return r},closest=function e(t,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0,r=t.closest(n);return a&&!r&&t.getRootNode().host?e(t.getRootNode().host,n):r},queryGraphicsElements=function e(t){var n=1<arguments.length&&arguments[1]!==void 0&&arguments[1],a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"g"===d.localName||"a"===d.localName){var u=[].concat(_toConsumableArray(d.children));a=[].concat(_toConsumableArray(a),_toConsumableArray(e(u,n)))}else if(_graphicsElementNames.includes(d.localName)&&(a.push(d),"text"===d.localName&&n)){var c=[].concat(_toConsumableArray(d.children));a=[].concat(_toConsumableArray(a),_toConsumableArray(e(c,n)))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return a},queryClippingElements=function e(t){var n=[],a=["path","text","rect","circle","ellipse","line","polyline","polygon","use"],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.localName;a.includes(u)?n.push(d):("g"===u||"a"===u)&&(n=[].concat(_toConsumableArray(n),_toConsumableArray(e(d.children))))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n},getCommonAncestor=function(e,t){for(;e=e.parentNode;)if(e.contains&&e.contains(t))return e;return null},sortByDomPosition=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),t},sortBySiblingElements=function(e){var t=[];e=sortByDomPosition(e);var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s===e[0])t.push([s]);else{var l=!1,d=!0,u=!1,c=void 0;try{for(var p=t[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,s.parentElement===b[0].parentElement&&(b.push(s),l=!0)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}!1==l&&t.push([s])}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},getObjectElementDisplayName=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"designer",n=null;if("developer"===t)"rect"===e.localName?n="<rect>":"circle"===e.localName?n="<circle>":"ellipse"===e.localName?n="<ellipse>":"line"===e.localName?n="<line>":"polyline"===e.localName?n="<polyline>":"polygon"===e.localName?n="<polygon>":"text"===e.localName?n="<text>":"image"===e.localName?n="<image>":"use"===e.localName?n="<use>":"svg"===e.localName?n="<svg>":"a"===e.localName?n="<a>":"g"===e.localName?"master"===e.getAttribute("data-bx-artboard")?n="<svg>":"symbol"===e.getAttribute("data-bx-artboard")?n="<symbol>":"pattern"===e.getAttribute("data-bx-artboard")?n="<pattern>":n="<g>":"path"===e.localName&&(n="<path>");else if("designer"===t)if("rect"===e.localName)n="Rectangle";else if("circle"===e.localName)n="Circle";else if("ellipse"===e.localName)n="Ellipse";else if("line"===e.localName)n="Line";else if("polyline"===e.localName)n="Polyline";else if("polygon"===e.localName)n="Polygon";else if("text"===e.localName)n="Text";else if("image"===e.localName)n="Image";else if("use"===e.localName)n="Symbol instance";else if("svg"===e.localName)n="SVG";else if("a"===e.localName)n="Anchor";else if("g"===e.localName)n="master"===e.getAttribute("data-bx-artboard")?"SVG":"symbol"===e.getAttribute("data-bx-artboard")?"Symbol":"pattern"===e.getAttribute("data-bx-artboard")?"Pattern":"Group";else if("path"===e.localName){var a=e.getAttribute("data-bx-shape");if(a){var r=a.substring(0,a.indexOf(" "));n="rect"===r?"Rectangle":_capitalize(r)}else n="Path"}return n},getObjectElementIconName=function(e){var t=null;if("rect"===e.localName)t="object-rect";else if("circle"===e.localName)t="object-ellipse";else if("ellipse"===e.localName)t="object-ellipse";else if("line"===e.localName)t="object-line";else if("polyline"===e.localName)t="object-polyline";else if("polygon"===e.localName)t="object-polygon";else if("text"===e.localName)t="object-text";else if("image"===e.localName)t="object-image";else if("a"===e.localName)t="object-anchor";else if("use"===e.localName)t="object-symbol";else if("svg"===e.localName)t="object-svg";else if("g"===e.localName)t="master"===e.getAttribute("data-bx-artboard")?"object-svg":"symbol"===e.getAttribute("data-bx-artboard")?"object-symbol":"pattern"===e.getAttribute("data-bx-artboard")?"object-pattern":"object-group";else if("path"===e.localName){var n=e.getAttribute("data-bx-shape");t=n?"object-"+n.substring(0,n.indexOf(" ")):"object-path"}return t},getTopStackedElement=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}for(;1<t.length;){var l=t[0].compareDocumentPosition(t[1]);4===l||20===l?t.remove(t[0]):t.remove(t[1])}return t[0]},getIntersectingElements=function(e){var t=getOutermostSVGElement(e),n=BoxySVG.utils.bbox.getClientBBox,a=t.getScreenCTM().inverse(),r=n(e),i=t.getIntersectionList(r,t);return i=Array.from(i),i.remove(e),i},isElementIntersectingElement=function(e,t){if(!e.transform||!t.transform)return!1;var n=BoxySVG.utils.bbox.getClientBBox,a=e.getScreenCTM().inverse(),r=n(e),i=t.getScreenCTM().inverse(),o=n(t);return _rectIntersectsRect(r,o)},sortByIntersectingElements=function(e){var t=[],n=[],a=!0,r=!1,i;try{for(var o=function(){var a=l.value,r=[];(function t(a){var i=!0,o=!1,s;try{for(var l=e[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=!r.includes(u)&&!n.includes(u);u!==a&&c&&isElementIntersectingElement(u,a)&&(r.push(u),n.push(u),t(u))}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}})(a),0<r.length&&t.push(sortByDomPosition(r))},s=e[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0)o()}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}var d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,n.includes(b)||t.push([b])}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return t},isValidID=function(e){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);if(!1==(65<=n&&90>=n||97<=n&&122>=n)){if(0==t)return!1;if(!1==(49<=n&&57>=n||45===n||95===n))return!1}}return!0},createUniqueID=function(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"element-",n=document,a=e.parentNode;a;a=a.parentNode)if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE||a.nodeType===Node.DOCUMENT_NODE){n=a;break}for(var r=0,i;r<Infinity;r+=1)if(i=t+r,!n.querySelector("#"+i))return i};BoxySVG.utils.element={html:html,svg:svg,createElement:createElement,getOutermostSVGElement:getOutermostSVGElement,getElementIndex:getElementIndex,compareElements:compareElements,elementFromPoint:elementFromPoint,closest:closest,queryGraphicsElements:queryGraphicsElements,queryClippingElements:queryClippingElements,getCommonAncestor:getCommonAncestor,sortByDomPosition:sortByDomPosition,sortBySiblingElements:sortBySiblingElements,getObjectElementDisplayName:getObjectElementDisplayName,getObjectElementIconName:getObjectElementIconName,getTopStackedElement:getTopStackedElement,getIntersectingElements:getIntersectingElements,isElementIntersectingElement:isElementIntersectingElement,sortByIntersectingElements:sortByIntersectingElements,isValidID:isValidID,createUniqueID:createUniqueID}}}{{var cloneObject=function(e){return JSON.parse(JSON.stringify(e))},compareObjects=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};BoxySVG.utils.object={cloneObject:cloneObject,compareObjects:compareObjects}}}{{var _createElement=BoxySVG.utils.element.createElement,_isConnectedToActiveDocument=BoxySVG.utils.node.isConnectedToActiveDocument,_compareObjects=BoxySVG.utils.object.compareObjects,_BoxySVG$utils$variab2=BoxySVG.utils.variables,_propertySchemas2=_BoxySVG$utils$variab2.propertySchemas,_presentationAttributeNames=_BoxySVG$utils$variab2.presentationAttributeNames,keys=Object.keys,spanifyText=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,n=e.querySelector("textPath")||e,a=getTextModel(e),r=t&&e.contains(t.commonAncestorContainer),o=-1,s=-1;if(r){var l=getGlobalOffset(t.startContainer,t.startOffset),d=_slicedToArray(l,2),u=d[1],c=getGlobalOffset(t.endContainer,t.endOffset),p=_slicedToArray(c,2),h=p[1];o=u,s=h}if(r&&o!==s){var b=0,x=[],m=!0,g=!1,v;try{for(var y=a.childItems[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){for(var _=f.value,w=_.textContent.length,k=b,A=b+_.textContent.length,C=o-k,S=s-k,E="",T=0;T<_.textContent.length;T+=1)(T==C||T==S)&&(E+="\u2605\u2764"),E+=_.textContent[T];var i=!0,P=!1,L=void 0;try{for(var D=E.split("\u2605\u2764")[Symbol.iterator](),M,N;!(i=(M=D.next()).done);i=!0)N=M.value,0<N.length&&x.push({textContent:N,href:_.href,inheritedProperties:_.inheritedProperties,nonInheritedProperties:_.nonInheritedProperties})}catch(e){P=!0,L=e}finally{try{!i&&D.return&&D.return()}finally{if(P)throw L}}b+=_.textContent.length}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}a.childItems=x}{{e.removeAttribute("style");var I=!0,R=!1,V;try{for(var z=_presentationAttributeNames[Symbol.iterator](),G,B;!(I=(G=z.next()).done);I=!0)B=G.value,e.hasAttribute(B)&&e.removeAttribute(B)}catch(e){R=!0,V=e}finally{try{!I&&z.return&&z.return()}finally{if(R)throw V}}var O=getComputedStyle(e),q=!0,j=!1,U;try{for(var H=keys(a.rootItem.inheritedProperties)[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,O.getPropertyValue(F)!==a.rootItem.inheritedProperties[F]&&e.style.setProperty(F,a.rootItem.inheritedProperties[F])}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}var Y=!0,X=!1,W;try{for(var K=keys(a.rootItem.nonInheritedProperties)[Symbol.iterator](),Z,Q;!(Y=(Z=K.next()).done);Y=!0)Q=Z.value,O.getPropertyValue(Q)!==a.rootItem.nonInheritedProperties[Q]&&e.style.setProperty(Q,a.rootItem.nonInheritedProperties[Q])}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}{for(var J=[].concat(_toConsumableArray(n.childNodes)),ee=0,te;ee<J.length;ee++)te=J[ee],("tspan"===te.nodeName||"a"===te.nodeName||"#text"===te.nodeName)&&te.remove();if(0<a.childItems.length){var ne=!0,ae=!1,re;try{for(var ie=a.childItems[Symbol.iterator](),oe;!(ne=(oe=ie.next()).done);ne=!0){var se=oe.value,le=_createElement("svg:tspan");n.append(le);var de=getComputedStyle(le),ue=!0,ce=!1,pe=void 0;try{for(var he=keys(se.inheritedProperties)[Symbol.iterator](),be,xe;!(ue=(be=he.next()).done);ue=!0)xe=be.value,de.getPropertyValue(xe)!==se.inheritedProperties[xe]&&le.style.setProperty(xe,se.inheritedProperties[xe])}catch(e){ce=!0,pe=e}finally{try{!ue&&he.return&&he.return()}finally{if(ce)throw pe}}var me=!0,ge=!1,ve=void 0;try{for(var ye=keys(se.nonInheritedProperties)[Symbol.iterator](),fe,_e;!(me=(fe=ye.next()).done);me=!0)_e=fe.value,de.getPropertyValue(_e)!==se.nonInheritedProperties[_e]&&le.style.setProperty(_e,se.nonInheritedProperties[_e])}catch(e){ge=!0,ve=e}finally{try{!me&&ye.return&&ye.return()}finally{if(ge)throw ve}}if(se.href){var we=_createElement("svg:a");we.setAttribute("_href",se.href),we.textContent=se.textContent,le.append(we)}else le.textContent=se.textContent}}catch(e){ae=!0,re=e}finally{try{!ne&&ie.return&&ie.return()}finally{if(ae)throw re}}}}}if(r){var ke=0,Ae=null,Ce=!0,Se=!1,Ee;try{for(var Te=getRenderedTextNodes(e)[Symbol.iterator](),Pe,Le;!(Ce=(Pe=Te.next()).done);Ce=!0){Le=Pe.value;for(var De=0;De<=Le.textContent.length;De+=1,ke+=1)ke===o&&t.setStart(Le,De),ke===s&&(0==De&&Ae?t.setEnd(Ae,Ae.textContent.length):t.setEnd(Le,De));ke-=1,Ae=Le}}catch(e){Se=!0,Ee=e}finally{try{!Ce&&Te.return&&Te.return()}finally{if(Se)throw Ee}}}},reduceText=function(e,t){var n=e.querySelector("textPath")||e,a=t&&e.contains(t.commonAncestorContainer),r=-1,i=-1;if(a){var o=getGlobalOffset(t.startContainer,t.startOffset),s=_slicedToArray(o,2),l=s[1],d=getGlobalOffset(t.endContainer,t.endOffset),u=_slicedToArray(d,2),c=u[1];r=l,i=c}spanifyText(e,null);var p=n.querySelectorAll("tspan"),h=1===p.length?p[0]:null;if(h&&0===h.style.length){var b=!0,x=!1,m;try{for(var g=h.childNodes[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,n.append(y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}h.remove()}if(a){var f=0,_=null,w=!0,k=!1,A;try{for(var C=getRenderedTextNodes(e)[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0){E=S.value;for(var T=0;T<=E.textContent.length;T+=1,f+=1)f===r&&t.setStart(E,T),f===i&&(0==T&&_?t.setEnd(_,_.textContent.length):t.setEnd(E,T));f-=1,_=E}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}},getLocalOffset=function(e,t){var n=null,a=null,r=0,i=0,o=!0,s=!1,l;try{for(var d=getRenderedTextNodes(e)[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0){c=u.value;for(var p=0;p<=c.textContent.length;p+=1,i+=1)i===t&&(0==p&&n?(a=n,r=n.textContent.length):(a=c,r=p));i-=1,n=c}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}return[a,r]},getGlobalOffset=function(e,t){var n=e.closest("text"),a=0,r=-1,i=!0,o=!1,s;try{for(var l=getRenderedTextNodes(n)[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0){if(u=d.value,u===e){r=a+t;break}a+=u.length}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return[n,r]},getRenderedTextNodes=function(e){var t=[];if(e.closest("text")){for(var n=[],a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);a.nextNode();)n.push(a.currentNode);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.parentElement;if("text"===u.localName||"tspan"===u.localName||"textPath"===u.localName)0<u.getNumberOfChars()&&t.push(d);else if("a"===u.localName){var c=u.getBBox();(0!==c.x||0!==c.y||0!==c.width||0!==c.height)&&t.push(d)}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return t},getRenderedChars=function(e){var t=getRenderedTextNodes(e),n=t.map(function(e){return e.textContent}).join("").split("");return n},getTspansIntersectedByRange=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;null===t&&(t=e.commonAncestorContainer.closest("text"));var n=t.querySelector("textPath"),a=n||t,r=a.querySelectorAll("tspan"),i=[];if(0<r.length){if(e){var o=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,e.intersectsNode(c)&&i.push(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}if(0<i.length){var p=e.direction,h="backward"===p?i[i.length-1]:i[0],b=i.filter(function(e){return e!==h});i=[h].concat(_toConsumableArray(b))}}return i},getComputedTextProperties=function(e){var t=getComputedStyle(e),n={},a={},r=!0,i=!1,o;try{for(var s=_propertySchemas2[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,d.appliesTo.includes("text")||d.appliesTo.includes("tspan"))if("font"===d.name||"display"===d.name)continue;else!0===d.inheritable?n[d.name]=t.getPropertyValue(d.name):!1===d.inheritable&&(a[d.name]=t.getPropertyValue(d.name))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return[n,a]},getTextModel=function(e){var t={rootItem:null,childItems:[]};{var n=getComputedTextProperties(e),a=_slicedToArray(n,2),r=a[0],i=a[1];t.rootItem={inheritedProperties:r,nonInheritedProperties:i}}{var o=!0,s=!1,l;try{for(var d=getRenderedTextNodes(e)[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p={textContent:c.textContent,href:null,inheritedProperties:{},nonInheritedProperties:{}},h=c.closest("tspan, text"),b=getComputedTextProperties(h),x=_slicedToArray(b,2),m=x[0],g=x[1];p.inheritedProperties=m,h!==e&&(p.nonInheritedProperties=g);for(var v=c.parentNode;v!==e;v=v.parentNode)if("a"===v.localName&&v.hasAttribute("_href")){p.href=v.getAttribute("_href");break}t.childItems.push(p)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}var y=!0,f=!1,_;try{for(var w=t.childItems[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=!0,S=!1,E=void 0;try{for(var T=keys(A.inheritedProperties)[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,t.rootItem.inheritedProperties[L]===A.inheritedProperties[L]&&delete A.inheritedProperties[L]}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}if(0<t.childItems.length){var D=_toArray(t.childItems),M=D[0],N=D.slice(1),I=!0,R=!1,V;try{for(var z=keys(M.inheritedProperties)[Symbol.iterator](),G;!(I=(G=z.next()).done);I=!0){var B=G.value,O=!0,q=!0,j=!1,U=void 0;try{for(var H=N[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F.inheritedProperties[B]!==M.inheritedProperties[B]&&(O=!1)}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}if(O){t.rootItem.inheritedProperties[B]=M.inheritedProperties[B];var Y=!0,X=!1,W=void 0;try{for(var K=t.childItems[Symbol.iterator](),Z,Q;!(Y=(Z=K.next()).done);Y=!0)Q=Z.value,delete Q.inheritedProperties[B]}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}}}catch(e){R=!0,V=e}finally{try{!I&&z.return&&z.return()}finally{if(R)throw V}}}if(1<t.childItems.length){var J=[],ee=null,te=!0,ne=!1,ae;try{for(var re=t.childItems[Symbol.iterator](),ie,oe;!(te=(ie=re.next()).done);te=!0)oe=ie.value,ee&&ee.href===oe.href&&_compareObjects(ee.nonInheritedProperties,oe.nonInheritedProperties)&&_compareObjects(ee.inheritedProperties,oe.inheritedProperties)?ee.textContent+=oe.textContent:(J.push(oe),ee=oe)}catch(e){ne=!0,ae=e}finally{try{!te&&re.return&&re.return()}finally{if(ne)throw ae}}t.childItems=J}return t};BoxySVG.utils.text={spanifyText:spanifyText,reduceText:reduceText,getLocalOffset:getLocalOffset,getGlobalOffset:getGlobalOffset,getRenderedTextNodes:getRenderedTextNodes,getRenderedChars:getRenderedChars,getTspansIntersectedByRange:getTspansIntersectedByRange}}}{{var _BoxySVG$utils$geomet2=BoxySVG.utils.geometry,_combineRects=_BoxySVG$utils$geomet2.combineRects,_transformRect2=_BoxySVG$utils$geomet2.transformRect,_BoxySVG$utils$text=BoxySVG.utils.text,_getGlobalOffset9=_BoxySVG$utils$text.getGlobalOffset,_getRenderedTextNodes=_BoxySVG$utils$text.getRenderedTextNodes,DEFAULT_BBOX_OPTIONS={fill:!0,stroke:!0,marker:!0,clipped:!0},getUserBBox=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:DEFAULT_BBOX_OPTIONS,n;if("tspan"===e.localName){var a=_getRenderedTextNodes(e),r=document.createRange();if(0<a.length&&(r.setStart(a[0],0),r.setEnd(a[a.length-1],a[a.length-1].length)),!1===r.collapsed){for(var o=r.startContainer.closest("text"),s=_getGlobalOffset9(r.startContainer,r.startOffset),l=_slicedToArray(s,2),d=l[1],u=_getGlobalOffset9(r.endContainer,r.endOffset),c=_slicedToArray(u,2),p=c[1],h=[],b=d,i;b<p;b+=1)i=o.getExtentOfChar(b),h.push(i);n=_combineRects(h)}else n=new SVGRect(0,0,0,0)}else n="use"===e.localName?new SVGRect(0,0,e.width.baseVal.value,e.height.baseVal.value):e.getBBox(t);return n},getClientBBox=function(e){var t=e.getScreenCTM(),n=getUserBBox(e);return _transformRect2(n,t)};BoxySVG.utils.bbox={getUserBBox:getUserBBox,getClientBBox:getClientBBox}}}{{var _createElement2=BoxySVG.utils.element.createElement,_round5=BoxySVG.utils.math.round,_BoxySVG$utils$geomet3=BoxySVG.utils.geometry,_checkCollinearity=_BoxySVG$utils$geomet3.checkCollinearity,_comparePoints=_BoxySVG$utils$geomet3.comparePoints,_pow4=Math.pow,path=_createElement2("svg:path"),serializePathData=function(e){return path.setPathData(e),path.getAttribute("d")},deserializePathData=function(e){return path.setAttribute("d",e),path.getPathData()},normalizePathData=function(e){return path.setPathData(e),path.getPathData({normalize:!0})},harmonizePathData=function(e){if(!e.find(function(e){return"C"===e.type||"L"===e.type}))return[];var t=[],n=null,a=0,r=0,i=0,o=0,s=!0,l=!1,d;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,"M"===p.type?("M"===n&&t.pop(),t.push(p),a=p.values[0],r=p.values[1],i=p.values[0],o=p.values[1]):"L"===p.type?("Z"===n&&t.push({type:"M",values:[i,o]}),t.push(p),a=p.values[0],r=p.values[1]):"C"===p.type?("Z"===n&&t.push({type:"M",values:[i,o]}),t.push(p),a=p.values[4],r=p.values[5]):"Z"===p.type&&((a!==i||r!==o)&&t.push({type:"L",values:[i,o]}),t.push(p),a=i,r=o),n=p.type}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}return t},comparePathData=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n].type===t[n].type){var a=e[n].values?e[n].values:[],r=t[n].values?t[n].values:[];if(a.length===r.length){for(var i=0;i<a.length;i+=1)if(a[i]!==r[i])return!1;}else return!1}else if("z"===e[n].type.toLowerCase()&&"z"===t[n].type.toLowerCase())continue;else return!1;return!0},_clonePathData=function(e){return e.map(function(e){return{type:e.type,values:[].concat(_toConsumableArray(e.values))}})},getPathDataBySubpath=function(e){var t=[],n=[],a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,"C"===l.type||"L"===l.type?n.push(l):"M"===l.type?(0<n.length&&(t.push(n),n=[]),n.push(l)):"Z"===l.type&&(n.push(l),t.push(n),n=[])}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return 0<n.length&&t.push(n),t},reversePath=function(e){var t=harmonizePathData(e.getPathData({normalize:!0})),n=getPathDataBySubpath(t),a=!0,r=!1,o;try{for(var s=n[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0){for(var d=l.value,u=d[0],c=[],p=null,h=1,i;h<d.length;h+=1)i=d[h],"Z"===i.type?p=i:c.push(i);var b=u.values[0],m=u.values[1];"C"===c[c.length-1].type?(u.values[0]=c[c.length-1].values[4],u.values[1]=c[c.length-1].values[5]):(u.values[0]=c[c.length-1].values[0],u.values[1]=c[c.length-1].values[1]);var g=!0,v=!1,f=void 0;try{for(var _=c[Symbol.iterator](),w,k;!(g=(w=_.next()).done);g=!0)if(k=w.value,"L"===k.type){var A=_slicedToArray(k.values,2),C=A[0],x=A[1];k.values=[b,m],b=C,m=x}else if("C"===k.type){var y=_slicedToArray(k.values,6),S=y[0],E=y[1],T=y[2],P=y[3],L=y[4],D=y[5];k.values=[T,P,S,E,b,m],b=L,m=D}}catch(e){v=!0,f=e}finally{try{!g&&_.return&&_.return()}finally{if(v)throw f}}c.reverse(),d.length=0,d.push(u);var M=!0,N=!1,I=void 0;try{for(var R=c[Symbol.iterator](),V,z;!(M=(V=R.next()).done);M=!0)z=V.value,d.push(z)}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}p&&d.push(p)}}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}n.reverse(),t=[];var G=!0,B=!1,O;try{for(var q=n[Symbol.iterator](),j;!(G=(j=q.next()).done);G=!0){var U=j.value,H=!0,$=!1,F=void 0;try{for(var Y=U[Symbol.iterator](),X,W;!(H=(X=Y.next()).done);H=!0)W=X.value,t.push(W)}catch(e){$=!0,F=e}finally{try{!H&&Y.return&&Y.return()}finally{if($)throw F}}}}catch(e){B=!0,O=e}finally{try{!G&&q.return&&q.return()}finally{if(B)throw O}}e.setPathData(t)},openPath=function(e){var t=e.getPathData({normalize:!0}),n=[],a=!0,r=!1,i;try{for(var o=getPathDataBySubpath(t)[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[l.length-1];"Z"===d.type&&l.pop();var u=!0,c=!1,p=void 0;try{for(var h=l[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,n.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.setPathData(n)},closePath=function(e){var t=e.getPathData({normalize:!0}),n=[],a=!0,r=!1,i;try{for(var o=getPathDataBySubpath(t)[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){if(l=s.value,1<l.length){var d=l[l.length-1];"Z"!==d.type&&l.push({type:"Z",values:[]})}var u=!0,c=!1,p=void 0;try{for(var h=l[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,n.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.setPathData(n)},canOpenPath=function(e){var t=e.getPathData({normalize:!0}),n=!0,a=!1,r;try{for(var i=getPathDataBySubpath(t)[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s[s.length-1];if("Z"===l.type)return!0}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1},canClosePath=function(e){var t=e.getPathData({normalize:!0}),n=!0,a=!1,r;try{for(var i=getPathDataBySubpath(t)[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,1<s.length){var l=s[s.length-1];if("Z"!==l.type)return!0}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1},getNearestPointOnPath=function(e,t){for(var n=e.getTotalLength(),a=e.getPathData(),r=0.125*(n/a.length),i=null,o=null,s=Infinity,l=function(e){return _pow4(e.x-t.x,2)+_pow4(e.y-t.y,2)},d=0;d<=n;d+=r){var u=e.getPointAtLength(d),c=l(u);c<s&&(i=u,o=d,s=c)}for(r*=0.5;0.5<r;){var p=o-r,h=e.getPointAtLength(p),b=l(h);if(0<=p&&b<s)i=h,o=p,s=b;else{var x=o+r,m=e.getPointAtLength(x),g=l(m);x<=n&&g<s?(i=m,o=x,s=g):r*=0.5}}return[i,o,s]},getSegSubpathData=function(e,t){var n=[],a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"C"===d.type||"L"===d.type?a.push(d):"M"===d.type?(0<a.length&&(n.push(a),a=[]),a.push(d)):"Z"===d.type&&(a.push(d),n.push(a),a=[])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return 0<a.length&&n.push(a),n.find(function(t){return t.includes(e)})||null},getSegIndexAtLength=function e(t,n){e.cachedPath||(e.cachedPath=_createElement2("svg:path"));for(var a=e.cachedPath,r=[],o=0,i;o<t.length;o+=1){i=t[o],r.push(i),a.setPathData(r);var s=a.getTotalLength();if(s>=n)return o}return t.length-1},getCurveShapeBetweenSegs=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,a="sharp",r=BoxySVG.classes.Vector;if(e&&t&&"C"===e.type&&"C"===t.type){var i=new SVGPoint(e.values[4],e.values[5]),o=new SVGPoint(t.values[0],t.values[1]),s=new SVGPoint(e.values[2],e.values[3]);if(!1===_comparePoints(i,o)&&!1===_comparePoints(i,s)&&!0===_checkCollinearity(o,i,s,n)){var l=new r(i,o),d=new r(i,s),u=_round5(l.length,2),c=_round5(d.length,2);a=u===c?"symmetric-smooth":"smooth"}}return a},makePrevSegSmooth=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],a=BoxySVG.classes.Vector,r=new SVGPoint(t.values[4],t.values[5]),i=new SVGPoint(e.values[0],e.values[1]),o=new SVGPoint(t.values[2],t.values[3]),s=new a(r,i),l=new a(r,o),d=s.getOppositeVector();!1===n&&(d.length=l.length),t.values[2]=r.x+d.x,t.values[3]=r.y+d.y},makeNextSegSmooth=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],a=BoxySVG.classes.Vector,r=new SVGPoint(e.values[4],e.values[5]),i=new SVGPoint(e.values[2],e.values[3]),o=new SVGPoint(t.values[0],t.values[1]),s=new a(r,i),l=new a(r,o),d=s.getOppositeVector();!1===n&&(d.length=l.length),t.values[0]=r.x+d.x,t.values[1]=r.y+d.y},makeSharpSegsSmooth=function(e,t,n){var a=BoxySVG.classes.Vector,r;"M"===e.type||"L"===e.type?r=new SVGPoint(e.values[0],e.values[1]):"C"===e.type&&(r=new SVGPoint(e.values[4],e.values[5]));var i=new SVGPoint(n.values[4],n.values[5]),o=new SVGPoint(t.values[4],t.values[5]),s=new a(o,r),l=new a(o,i),u=s.length/l.length,d=new a(u*l.x-s.x,u*l.y-s.y).normalize();t.values[2]=o.x+-d.x*(s.length/3),t.values[3]=o.y+-d.y*(s.length/3),n.values[0]=o.x+d.x*(l.length/3),n.values[1]=o.y+d.y*(l.length/3)},convertLSegsToCSegs=function(e){var t=null,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0){if(s=o.value,"L"===s.type){var l=_slicedToArray(s.values,2),d=l[0],u=l[1],c="C"===t.type?t.values[4]:t.values[0],p="C"===t.type?t.values[5]:t.values[1];s.type="C",s.values=[c,p,d,u,d,u]}t=s}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}},convertCSegsToLSegs=function(e){var t=null,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0){if(s=o.value,"C"===s.type){var l=_slicedToArray(s.values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x="C"===t.type?t.values[4]:t.values[0],m="C"===t.type?t.values[5]:t.values[1];d===x&&u===m&&c===h&&p===b&&(s.type="L",s.values=[h,b])}t=s}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}},isSegSubpathClosed=function(e,t){var n=getSegSubpathData(e,t);return"Z"===n[n.length-1].type};BoxySVG.utils.pathGeneral={serializePathData:serializePathData,deserializePathData:deserializePathData,normalizePathData:normalizePathData,harmonizePathData:harmonizePathData,clonePathData:_clonePathData,comparePathData:comparePathData,getPathDataBySubpath:getPathDataBySubpath,openPath:openPath,closePath:closePath,reversePath:reversePath,canOpenPath:canOpenPath,canClosePath:canClosePath,getNearestPointOnPath:getNearestPointOnPath,getSegSubpathData:getSegSubpathData,getSegIndexAtLength:getSegIndexAtLength,getCurveShapeBetweenSegs:getCurveShapeBetweenSegs,makePrevSegSmooth:makePrevSegSmooth,makeNextSegSmooth:makeNextSegSmooth,makeSharpSegsSmooth:makeSharpSegsSmooth,convertLSegsToCSegs:convertLSegsToCSegs,convertCSegsToLSegs:convertCSegsToLSegs,isSegSubpathClosed:isSegSubpathClosed}}}{{var _degToRad=BoxySVG.utils.geometry.degToRad,_round6=BoxySVG.utils.math.round,_BoxySVG$utils$pathGe=BoxySVG.utils.pathGeneral,_comparePathData=_BoxySVG$utils$pathGe.comparePathData,_deserializePathData=_BoxySVG$utils$pathGe.deserializePathData,_getHash=BoxySVG.utils.random.getHash,_Vector=BoxySVG.classes.Vector,_sin=Math.sin,_cos=Math.cos,tan=Math.tan,_PI2=Math.PI,CURRENT_SCHEMA={rect:1,ring:1,pie:1,triangle:1,"n-gon":1,star:1,cog:1},getShapeData=function(e){var t=null;if(e.hasAttribute("data-bx-shape")){var n=e.getAttribute("data-bx-shape"),a=n.trim().split(/[\s+,]+/);if(3<=a.length){var r=a[0],i=a.slice(1,a.length-1),o=a[a.length-1];if(o.includes("@")){var s=o.split("@"),l=_slicedToArray(s,2),d=l[0],u=l[1];i=i.map(function(e){return parseFloat(e)}),t={type:r,values:i}}}}return t},setShapeData=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:9,a=shapeDataToPathData(t,n);if(a){e.setPathData(a);var r=t.values.map(function(e){return _round6(e,n)}),i=e.getAttribute("d"),o=t.type+" "+r.join(" ")+" "+CURRENT_SCHEMA[t.type],s=_getHash(i+" / "+o).toString(32);o+="@"+s,e.setAttribute("data-bx-shape",o)}},validateShapeData=function(e){var t=!1;if(e.hasAttribute("data-bx-shape")){var n=e.getAttribute("d"),a=e.getAttribute("data-bx-shape"),r=a.trim().split(/[\s+,]+/);if(3<=r.length){var i=r[0],o=r.slice(1,r.length-1),s=r[r.length-1];if(s.includes("@")){var l=s.split("@"),d=_slicedToArray(l,2),u=d[0],c=d[1];c===_getHash(n+" / "+i+" "+o.join(" ")+" "+u).toString(32)&&(t=!0)}}}return t},shapeDataToPathData=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=null;return"rect"===e.type?n=rectShapeDataToPathData(e,t):"ring"===e.type?n=ringShapeDataToPathData(e,t):"pie"===e.type?n=pieShapeDataToPathData(e,t):"triangle"===e.type?n=triangleShapeDataToPathData(e,t):"n-gon"===e.type?n=nGonShapeDataToPathData(e,t):"star"===e.type?n=starShapeDataToPathData(e,t):"cog"===e.type&&(n=cogShapeDataToPathData(e,t)),n},triangleShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],s=n[3],l=n[4],d=n[5],u=[];if(0===d)u.push({type:"M",values:[a+o*l,r]}),u.push({type:"L",values:[a+o,r+s]}),u.push({type:"L",values:[a,r+s]}),u.push({type:"L",values:[a+o*l,r]});else for(var c=[{x:a+o*l,y:r},{x:a+o,y:r+s},{x:a,y:r+s}],p=0;p<c.length;p+=1){var i=c[p],h=c[p+1]||c[0],b=c[p-1]||c[c.length-1],m={x:i.x+(b.x-i.x)*d,y:i.y+(b.y-i.y)*d},g={x:i.x+(h.x-i.x)*d,y:i.y+(h.y-i.y)*d},v={x:i.x,y:i.y};u.push({type:0==p?"M":"L",values:[m.x,m.y]}),u.push({type:"Q",values:[v.x,v.y,g.x,g.y]})}u.push({type:"Z",values:[]});var f=!0,_=!1,w;try{for(var k=u[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.values=C.values.map(function(e){return _round6(e,t)})}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}return u},rectShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,12),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=n[6],u=n[7],c=n[8],p=n[9],h=n[10],b=n[11];c===void 0&&(c=s),p===void 0&&(p=l),h===void 0&&(h=d),b===void 0&&(b=u),s=s>i/2?i/2:s,l=l>i/2?i/2:l,d=d>i/2?i/2:d,u=u>i/2?i/2:u,c=c>o/2?o/2:c,p=p>o/2?o/2:p,h=h>o/2?o/2:h,b=b>o/2?o/2:b;var x=[{type:"M",values:[a+s,r]},{type:"H",values:[a+i-l]},{type:"A",values:[l,p,0,0,1,a+i,r+p]},{type:"V",values:[r+o-h]},{type:"A",values:[d,h,0,0,1,a+i-d,r+o]},{type:"H",values:[a+u]},{type:"A",values:[u,b,0,0,1,a,r+o-b]},{type:"V",values:[r+c]},{type:"A",values:[s,c,0,0,1,a+s,r]},{type:"Z",values:[]}];x=x.filter(function(e){return"A"===e.type&&(0===e.values[0]||0===e.values[1])?!1:!0});var m=!0,g=!1,v;try{for(var y=x[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,_.values=_.values.map(function(e){return _round6(e,t)})}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}return x},nGonShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],l=n[3],d=n[4],u=n[5],c=[];if(0===u)for(var p=0;p<d;p+=1){var s=2*_PI2*(p/d)-_PI2/2,h=o*_cos(s)+a,b=l*_sin(s)+r;0==p?c.push({type:"M",values:[h,b]}):c.push({type:"L",values:[h,b]})}else{for(var x=[],m=0,g;m<d;m+=1)g=2*_PI2*(m/d)-_PI2/2,x.push({x:o*_cos(g)+a,y:l*_sin(g)+r});for(var v=0;v<x.length;v+=1){var i=x[v],y=x[v+1]||x[0],f=x[v-1]||x[x.length-1],_={x:i.x+(f.x-i.x)*u,y:i.y+(f.y-i.y)*u},w={x:i.x+(y.x-i.x)*u,y:i.y+(y.y-i.y)*u},k={x:i.x,y:i.y};c.push({type:0==v?"M":"L",values:[_.x,_.y]}),c.push({type:"Q",values:[k.x,k.y,w.x,w.y]})}}c.push({type:"Z",values:[]});var A=!0,C=!1,S;try{for(var E=c[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,P.values=P.values.map(function(e){return _round6(e,t)})}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}return c},starShapeDataToPathData=function(e,t){for(var n=_slicedToArray(e.values,6),a=n[0],r=n[1],i=n[2],o=n[3],l=n[4],d=n[5],u=[],c=0;c<d;c+=1){var s=2*_PI2*(c/d)-_PI2/2,p=i*_cos(s)+a,h=o*_sin(s)+r;0==c?u.push({type:"M",values:[p,h]}):u.push({type:"L",values:[p,h]}),s=2*_PI2*(c/d)+_PI2/d-_PI2/2,p=l*i*_cos(s)+a,h=l*o*_sin(s)+r,u.push({type:"L",values:[p,h]})}u.push({type:"Z",values:[]});var b=!0,x=!1,m;try{for(var g=u[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,y.values=y.values.map(function(e){return _round6(e,t)})}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}return u},ringShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=[{type:"M",values:[a,r]},{type:"m",values:[-s,0]},{type:"a",values:[s,l,0,1,0,2*s,0]},{type:"a",values:[s,l,0,1,0,-(2*s),0]},{type:"Z",values:[]},{type:"M",values:[a,r]},{type:"m",values:[-i,0]},{type:"a",values:[i,o,0,0,1,2*i,0]},{type:"a",values:[i,o,0,0,1,-(2*i),0]},{type:"Z",values:[]}],u=!0,c=!1,p;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,x.values=x.values.map(function(e){return _round6(e,t)})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return d},pieShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=_degToRad(s),u=_degToRad(l),c=a+o*_sin(d),p=r+o*-_cos(d),h=a+o*_sin(u),b=r+o*-_cos(u),x=a+i*_sin(u),m=r+i*-_cos(u),g=l-s,v=180<=g||-180<=g&&0>=g?1:0,y=[{type:"M",values:[c,p]},{type:"A",values:[o,o,0,v,1,h,b]},{type:"L",values:[x,m]}];if(0<i){var f=a+i*_sin(d),_=r+i*-_cos(d);y.push({type:"A",values:[i,i,0,v,0,f,_]})}y.push({type:"Z",values:[]});var w=!0,k=!1,A;try{for(var C=y[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.values=E.values.map(function(e){return _round6(e,t)})}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}return y},cogShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,7),r=n[0],o=n[1],s=n[2],l=n[3],d=n[4],u=n[5],c=n[6],p=360/c,h=p/4,b=tan(_degToRad(h-u*h))*d,x=[];{for(var m=0;m<c;m+=1){var i=p*m-90,a=_degToRad(i),g=_degToRad(i+h+u*h),v=_degToRad(i+p-h-u*h);x.push({type:0==m?"M":"L",values:[r+d*_cos(a)+_sin(a)*b,o+d*_sin(a)-_cos(a)*b]}),x.push({type:"L",values:[r+d*_cos(a)-_sin(a)*b,o+d*_sin(a)+_cos(a)*b]}),x.push({type:"L",values:[r+l*_cos(g),o+l*_sin(g)]}),x.push({type:"A",values:[l,l,0,0,1,r+l*_cos(v),o+l*_sin(v)]})}x.push({type:"Z",values:[]})}x.push({type:"M",values:[r,o-s]}),x.push({type:"A",values:[s,s,0,0,0,r,o+s]}),x.push({type:"A",values:[s,s,0,0,0,r,o-s]});var y=!0,f=!1,_;try{for(var w=x[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.values=A.values.map(function(e){return _round6(e,t)})}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}return x},getNGonShapeVertexPoint=function(e,t,n,a,r,i){var o=2*_PI2*(e/i)-_PI2/2,s=a*_cos(o)+t,l=r*_sin(o)+n;return new SVGPoint(s,l)},getStarShapeVertexPoint=function(e,t,n,a,r,i,o){var s=_PI2*(e/o)-_PI2/2,l;return l=0==e%2?new SVGPoint(a*_cos(s)+t,r*_sin(s)+n):new SVGPoint(i*a*_cos(s)+t,i*r*_sin(s)+n),l};BoxySVG.utils.pathShapes={getShapeData:getShapeData,setShapeData:setShapeData,validateShapeData:validateShapeData,shapeDataToPathData:shapeDataToPathData,getNGonShapeVertexPoint:getNGonShapeVertexPoint,getStarShapeVertexPoint:getStarShapeVertexPoint}}}{{var _BoxySVG$utils$bbox=BoxySVG.utils.bbox,_getUserBBox=_BoxySVG$utils$bbox.getUserBBox,_getClientBBox=_BoxySVG$utils$bbox.getClientBBox,_BoxySVG$utils$geomet4=BoxySVG.utils.geometry,_degToRad2=_BoxySVG$utils$geomet4.degToRad,_getRotationAngleFromPoints=_BoxySVG$utils$geomet4.getRotationAngleFromPoints,_getDistanceBetweenPoints=_BoxySVG$utils$geomet4.getDistanceBetweenPoints,_combineRects2=_BoxySVG$utils$geomet4.combineRects,_normalizePathData=BoxySVG.utils.pathGeneral.normalizePathData,_roundMatrix=BoxySVG.utils.matrix.roundMatrix,_round7=BoxySVG.utils.math.round,_abs=Math.abs,_tan=Math.tan,_parseFloat3=Number.parseFloat,getComputedTransform=function(e){var t=null;return t="linearGradient"===e.localName||"radialGradient"===e.localName?e.gradientTransform.baseVal.consolidate():"pattern"===e.localName?e.patternTransform.baseVal.consolidate():e.transform.baseVal.consolidate(),t?SVGMatrix.fromMatrix(t.matrix):new SVGMatrix},getTransformFromPoints=function(e,t,n,a,r,i){var o=function(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0])},s=o([[e.x,e.y,1],[t.x,t.y,1],[n.x,n.y,1]]),l=o([[a.x,e.y,1],[r.x,t.y,1],[i.x,n.y,1]]),d=o([[a.y,e.y,1],[r.y,t.y,1],[i.y,n.y,1]]),u=o([[e.x,a.x,1],[t.x,r.x,1],[n.x,i.x,1]]),c=o([[e.x,a.y,1],[t.x,r.y,1],[n.x,i.y,1]]),p=o([[e.x,e.y,a.x],[t.x,t.y,r.x],[n.x,n.y,i.x]]),h=o([[e.x,e.y,a.y],[t.x,t.y,r.y],[n.x,n.y,i.y]]);return new SVGMatrix([l/s,d/s,u/s,c/s,p/s,h/s])},getTransformToElement=function(e,t){return t.getScreenCTM().inverse().multiply(e.getScreenCTM())},getTransformOriginBBoxPoint=function(e){var t,n;if(e.hasAttribute("data-bx-origin")){var a=e.getAttribute("data-bx-origin").split(" ");t=_parseFloat3(a[0]),n=_parseFloat3(a[1])}else t=0.5,n=0.5;return new SVGPoint(t,n)},setTransformOriginBBoxPoint=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:6,a=_round7(t.x,n),r=_round7(t.y,n);e.setAttribute("data-bx-origin",a+" "+r)},getTransformOriginUserPoint=function(e){var t=_getUserBBox(e),n=getTransformOriginBBoxPoint(e),a=bboxPointToUserPoint(n,t);return a},getTransformOriginClientPoint=function(e){var t=e.getScreenCTM(),n=getTransformOriginUserPoint(e),a=n.matrixTransform(t);return a},getComputedTransformOriginClientPoint=function(e){var t=1<arguments.length&&arguments[1]!==void 0&&arguments[1],n=e.map(function(e){return getTransformOriginClientPoint(e)}),a=n[0],r=!0,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=_getDistanceBetweenPoints(u,a);if(3<c){r=!1;break}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var p=null;if(r){if(t){var h=e.map(function(e){return _getClientBBox(e)}),b=_combineRects2(h);p=new SVGPoint((n[0].x-b.x)/b.width,(n[0].y-b.y)/b.height)}else p=n[0];}else if(t)p=new SVGPoint(0.5,0.5);else{var x=e.map(function(e){return _getClientBBox(e)}),m=_combineRects2(x);p=new SVGPoint(m.x+m.width/2,m.y+m.height/2)}return p},getElementRotationAngle=function(e){var t=e.getScreenCTM(),n=t.inverse(),a=getTransformOriginUserPoint(e),r=a.matrixTransform(e.getScreenCTM()),i=_getUserBBox(e),o=new SVGPoint(r.x-100,r.y),s=new SVGPoint(a.x-100,a.y).matrixTransform(e.getScreenCTM()),l=_getRotationAngleFromPoints(r,o,s);return l},getElementRotationLocalAngle=function(e){var t=getTransformToElement(e,e.parentElement),n=t.inverse(),a=getTransformOriginUserPoint(e),r=a.matrixTransform(t),i=_getUserBBox(e),o=new SVGPoint(r.x-100,r.y),s=new SVGPoint(a.x-100,a.y).matrixTransform(t),l=_getRotationAngleFromPoints(r,o,s);return l},setElementRotationAngle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=getElementRotationAngle(e),r=getComputedTransform(e),i=e.getScreenCTM(),o=i.inverse(),s=getTransformOriginUserPoint(e),l=s.matrixTransform(i),d=SVGMatrix.fromMatrix(r);d.multiplySelf(o),d.rotateSelf(-a+t,l.x,l.y),d.multiplySelf(i),null!==n&&(d=_roundMatrix(d,n)),!1===d.isIdentity()?e.setAttribute("transform",d.toString()):e.removeAttribute("transform")},setElementRotationLocalAngle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=getElementRotationAngle(e),r=getComputedTransform(e),i=getTransformToElement(e,e.parentElement),o=i.inverse(),s=getTransformOriginUserPoint(e),l=s.matrixTransform(i),d=SVGMatrix.fromMatrix(r);d.multiplySelf(o),d.rotateSelf(-a+t,l.x,l.y),d.multiplySelf(i),null!==n&&(d=_roundMatrix(d,n)),!1===d.isIdentity()?e.setAttribute("transform",d.toString()):e.removeAttribute("transform")},transformPathData=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,a=_normalizePathData(e),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0){if(d=l.value,"M"===d.type||"L"===d.type){var u=new SVGPoint(d.values[0],d.values[1]).matrixTransform(t);d.values=[u.x,u.y]}else if("C"===d.type){var c=new SVGPoint(d.values[0],d.values[1]).matrixTransform(t),p=new SVGPoint(d.values[2],d.values[3]).matrixTransform(t),h=new SVGPoint(d.values[4],d.values[5]).matrixTransform(t);d.values=[c.x,c.y,p.x,p.y,h.x,h.y]}d.values=d.values.map(function(e){return _round7(e,n)})}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return a},skew=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=SVGMatrix.fromMatrix(e),o=_degToRad2(t),s=_degToRad2(n),l=new SVGMatrix;return l=shear(l,_tan(o),_tan(s)),i=translateOrigin(i,a,r),i.multiplySelf(l),i=translateOrigin(i,-a,-r),i},shear=function(e,t,n){var r=SVGMatrix.fromMatrix(e),i=r.a,a=r.b;return r.a+=n*r.c,r.b+=n*r.d,r.c+=t*i,r.d+=t*a,r},translateOrigin=function(e,t,n){var a=SVGMatrix.fromMatrix(e);return a.e=a.e+t*a.a+n*a.c,a.f=a.f+t*a.b+n*a.d,a},bboxPointToUserPoint=function(e,t){var n=new SVGPoint(t.x+e.x*t.width,t.y+e.y*t.height);return n},userPointToBBoxPoint=function(e,t){var n=new SVGPoint((e.x-t.x)/t.width,(e.y-t.y)/t.height);return n};BoxySVG.utils.transformGeneral={getComputedTransform:getComputedTransform,getTransformFromPoints:getTransformFromPoints,getTransformToElement:getTransformToElement,getTransformOriginBBoxPoint:getTransformOriginBBoxPoint,setTransformOriginBBoxPoint:setTransformOriginBBoxPoint,getTransformOriginUserPoint:getTransformOriginUserPoint,getTransformOriginClientPoint:getTransformOriginClientPoint,getComputedTransformOriginClientPoint:getComputedTransformOriginClientPoint,getElementRotationAngle:getElementRotationAngle,getElementRotationLocalAngle:getElementRotationLocalAngle,setElementRotationAngle:setElementRotationAngle,setElementRotationLocalAngle:setElementRotationLocalAngle,transformPathData:transformPathData,skew:skew,bboxPointToUserPoint:bboxPointToUserPoint,userPointToBBoxPoint:userPointToBBoxPoint}}}{{var _TokensScanner=BoxySVG.classes.TokensScanner,_createElement3=BoxySVG.utils.element.createElement,_BoxySVG$utils$variab3=BoxySVG.utils.variables,_lengthUnits=_BoxySVG$utils$variab3.lengthUnits,_alignValues=_BoxySVG$utils$variab3.alignValues,_window=window,tokenize=_window.tokenize,EOFToken=_window.EOFToken,parseACommaSeparatedListOfComponentValues=_window.parseACommaSeparatedListOfComponentValues,_path=_createElement3("path"),parseViewBox=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a,r,i,o;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)a=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)r=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType&&0<=n.currentToken.value)i=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType&&0<=n.currentToken.value)o=n.currentToken.value,n.read();else return null;return"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType?new SVGRect(a,r,i,o):null},parseAspectRatio=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"IDENT"===n.currentToken.tokenType&&_alignValues.includes(n.currentToken.value)){var a=n.currentToken.value,r="meet";if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return[a,r];if("IDENT"===n.currentToken.tokenType&&["meet","slice"].includes(n.currentToken.value)&&(r=n.currentToken.value,n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType))return[a,r]}return null},parseLength=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"DIMENSION"===n.currentToken.tokenType&&_lengthUnits.includes(n.currentToken.unit)){var a=[n.currentToken.value,n.currentToken.unit];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return a}return null},parseUrl=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"URL"===n.currentToken.tokenType){var a=n.currentToken.value;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return a}else if("FUNCTION"===n.currentToken.tokenType&&"url"===n.currentToken.value&&(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"===n.currentToken.tokenType)){var r=n.currentToken.value;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),")"===n.currentToken.tokenType&&(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType))return r.trim()}return null},parseDasharray=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a=[];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:null});else if("PERCENTAGE"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:"%"});else if("LENGTH"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:n.currentToken.unit});else return null;for(;;){var r=!1,i=!1;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&(r=!0,n.read()),","===n.currentToken.tokenType&&(i=!0,n.read()),"WHITESPACE"===n.currentToken.tokenType&&(r=!0,n.read()),"NUMBER"===n.currentToken.tokenType){if(r||i)a.push({value:n.currentToken.value,unit:null});else return null;}else if("PERCENTAGE"!==n.currentToken.tokenType){if("DIMENSION"!==n.currentToken.tokenType)return"EOF"===n.currentToken.tokenType?i?null:a:null;if((r||i)&&_lengthUnits.includes(n.currentToken.unit))a.push({value:n.currentToken.value,unit:n.currentToken.unit});else return null}else if(r||i)a.push({value:n.currentToken.value,unit:"%"});else return null}return null},parsePathData=function(e){return _path.setAttribute("d",e),_path.getPathData()},parseFontFamily=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a=[];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"===n.currentToken.tokenType||"IDENT"===n.currentToken.tokenType)a.push(n.currentToken.value);else return null;for(;;){var r=!1;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&(r=!0,n.read()),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"!==n.currentToken.tokenType&&"IDENT"!==n.currentToken.tokenType)return"EOF"===n.currentToken.tokenType?r?null:a:null;if(r)a.push(n.currentToken.value);else return null}return null},parseFontFaceSrc=function(e){var t=parseACommaSeparatedListOfComponentValues(e),n=[],a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=[].concat(_toConsumableArray(l),[new EOFToken]).filter(function(e){return"WHITESPACE"!==e.tokenType}),u=new _TokensScanner(d),c={};if(u.read(),"FUNCTION"==u.currentToken.type)if("url"===u.currentToken.name){var p=u.currentToken.value[0].value;c.type=p.startsWith("data:")?"embedded":"external",c.url=p,u.read(),"FUNCTION"==u.currentToken.type&&"format"===u.currentToken.name&&(c.format=u.currentToken.value[0].value)}else if("local"===u.currentToken.name){var h=u.currentToken.value[0].value;c.type="local",c.name=h}n.push(c)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return n};BoxySVG.utils.parsing={parseLength:parseLength,parseUrl:parseUrl,parseViewBox:parseViewBox,parseAspectRatio:parseAspectRatio,parseDasharray:parseDasharray,parseFontFamily:parseFontFamily,parseFontFaceSrc:parseFontFaceSrc}}}{{var _getUserBBox2=BoxySVG.utils.bbox.getUserBBox,_parseUrl=BoxySVG.utils.parsing.parseUrl,_BoxySVG$utils$elemen=BoxySVG.utils.element,_createElement4=_BoxySVG$utils$elemen.createElement,_getOutermostSVGElement=_BoxySVG$utils$elemen.getOutermostSVGElement,_roundMatrix2=BoxySVG.utils.matrix.roundMatrix,_getTransformFromPoints=BoxySVG.utils.transformGeneral.getTransformFromPoints,_SVGUnitTypes=SVGUnitTypes,SVG_UNIT_TYPE_OBJECTBOUNDINGBOX=_SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,SVG_UNIT_TYPE_USERSPACEONUSE=_SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,_SVGLength=SVGLength,SVG_LENGTHTYPE_PERCENTAGE=_SVGLength.SVG_LENGTHTYPE_PERCENTAGE,createDerivedPattern=function(e){for(var t=_getOutermostSVGElement(e),n=e.hasAttribute("href")?e.getAttribute("href").substring(1):e.id,a=void 0,r=0,i;r<Infinity&&(a=n+"-"+r,!!t.querySelector("#"+a));r+=1);return e.hasAttribute("href")?(i=e.cloneNode(),i.setAttribute("id",a)):(i=_createElement4("svg:pattern"),i.setAttribute("id",a),i.setAttribute("href","#"+e.id)),i},getPatternUsers=function(e){for(var t=document.createNodeIterator(_getOutermostSVGElement(e),NodeFilter.SHOW_ELEMENT),n=null,a=[];n=t.nextNode();)for(var r=["fill","stroke"],i=0;i<r.length;i++){var o=r[i],s=n.style.getPropertyValue(o),l=_parseUrl(s);if(l){var d=l.substring(1);d===e.id&&!1===a.includes(n)&&a.push(n)}}return a},getParentPattern=function(e){var t=null;if(e.hasAttribute("href")){var n=e.getAttribute("href"),a=_getOutermostSVGElement(e).querySelector(n);a&&"pattern"===a.localName&&a!==e&&(t=a)}return t},getFurthestAncestorPattern=function(e){for(var t=e,n=_getOutermostSVGElement(t),a=[];t;){var r=t.getAttribute("href"),i=r?n.querySelector(r):null;if(i&&"pattern"===i.localName&&i!==e&&!a.includes(i))t=i,a.push(i);else break}return 0<a.length?a[a.length-1]:null},getInheritedPatternAttributes=function(e){for(var t=_getOutermostSVGElement(e),n=[],a={},r=e,i=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits","patternTransform"];r;){var o=r.getAttribute("href"),s=o?t.querySelector(o):null;if(s&&"pattern"===s.localName&&s!==e&&!n.includes(s))r=s,n.push(s);else break}var l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,!1===e.hasAttribute(h)){var b=!0,x=!1,m=void 0;try{for(var g=n[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)if(y=v.value,y.hasAttribute(h)){a[h]=y.getAttribute(h);break}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}return a},centerPattern=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=e.hasAttribute("href")?getParentPattern(e):e,r=_getUserBBox2(t),i,o,s,l,d,u;if(a.patternUnits.baseVal===SVG_UNIT_TYPE_USERSPACEONUSE)i=new SVGPoint(a.x.baseVal.value,a.y.baseVal.value),o=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value,a.y.baseVal.value),s=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value,a.y.baseVal.value+a.height.baseVal.value),l=new SVGPoint(r.x+r.width/2-a.width.baseVal.value/2,r.y+r.height/2-a.height.baseVal.value/2),d=new SVGPoint(r.x+r.width/2+a.width.baseVal.value/2,r.y+r.height/2-a.height.baseVal.value/2),u=new SVGPoint(r.x+r.width/2+a.width.baseVal.value/2,r.y+r.height/2+a.height.baseVal.value/2);else if(a.patternUnits.baseVal===SVG_UNIT_TYPE_OBJECTBOUNDINGBOX){var c=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits),p=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits+a.width.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits),h=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits+a.width.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits+a.height.baseVal.valueInSpecifiedUnits);i=new SVGPoint(r.x+c.x*r.width,r.y+c.y*r.height),o=new SVGPoint(r.x+p.x*r.width,r.y+p.y*r.height),s=new SVGPoint(r.x+h.x*r.width,r.y+h.y*r.height),l=new SVGPoint(r.x+r.width/2-r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2-r.height*a.height.baseVal.valueInSpecifiedUnits/2),d=new SVGPoint(r.x+r.width/2+r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2-r.height*a.height.baseVal.valueInSpecifiedUnits/2),u=new SVGPoint(r.x+r.width/2+r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2+r.height*a.height.baseVal.valueInSpecifiedUnits/2)}var b=_getTransformFromPoints(i,o,s,l,d,u);null!==n&&(b=_roundMatrix2(b,n)),e.setAttribute("patternTransform",b.toString())},comparePatterns=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=a.hasAttribute("href")?getParentPattern(a):a,i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,u!==a){var c=u.hasAttribute("href")?getParentPattern(u):u;if(c!==r)return!1}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return!0};BoxySVG.utils.pattern={createDerivedPattern:createDerivedPattern,getPatternUsers:getPatternUsers,getParentPattern:getParentPattern,getFurthestAncestorPattern:getFurthestAncestorPattern,getInheritedPatternAttributes:getInheritedPatternAttributes,centerPattern:centerPattern,comparePatterns:comparePatterns}}}{{var _getUserBBox3=BoxySVG.utils.bbox.getUserBBox,_parseColor=BoxySVG.utils.color.parseColor,_BoxySVG$utils$elemen2=BoxySVG.utils.element,_createElement5=_BoxySVG$utils$elemen2.createElement,_getOutermostSVGElement2=_BoxySVG$utils$elemen2.getOutermostSVGElement,_BoxySVG$utils$math2=BoxySVG.utils.math,_round8=_BoxySVG$utils$math2.round,_normalize2=_BoxySVG$utils$math2.normalize,_BoxySVG$utils$transf=BoxySVG.utils.transformGeneral,_getComputedTransform=_BoxySVG$utils$transf.getComputedTransform,_getTransformFromPoints2=_BoxySVG$utils$transf.getTransformFromPoints,_SVGUnitTypes2=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX=_SVGUnitTypes2.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,hasOwnStops=function(e){var t=!0,n=!1,a;try{for(var r=e.children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,"stop"===o.localName)return!0}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!1},getGradientOwnStops=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e.children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"stop"===s.localName&&t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},getGradientComputedStops=function(e){for(var t=_getOutermostSVGElement2(e),n=e,a=[];n;){var r=getGradientOwnStops(n);if(0<r.length){a=r;break}else if(""!==e.href.baseVal){var i=t.querySelector(n.href.baseVal);if(i)n=i;else break}else break}return a},getGradientUsers=function(e){for(var t=document.createNodeIterator(_getOutermostSVGElement2(e),NodeFilter.SHOW_ELEMENT),n=null,a=[];n=t.nextNode();)for(var r=["fill","stroke"],i=0;i<r.length;i++){var o=r[i],s=n.style.getPropertyValue(o);if(s&&s.startsWith("url(")){var l=s.substring(6,s.length-2);l===e.id&&!1===a.includes(n)&&a.push(n)}}return a},convertRadialGradientToUserSpace=function(e,t){if(e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX){var n=_getComputedTransform(e),a=t.getScreenCTM(),r=t.getScreenCTM().inverse(),i=_getUserBBox3(t),o=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),s=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits+e.r.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),l=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits-e.r.baseVal.valueInSpecifiedUnits),d=o.matrixTransform(n),u=s.matrixTransform(n),c=l.matrixTransform(n),p=new SVGPoint(i.x+d.x*i.width,i.y+d.y*i.height),h=new SVGPoint(i.x+u.x*i.width,i.y+u.y*i.height),b=new SVGPoint(i.x+c.x*i.width,i.y+c.y*i.height),x=p.matrixTransform(a),m=h.matrixTransform(a),g=b.matrixTransform(a);o=new SVGPoint(0,0),s=new SVGPoint(100,0),l=new SVGPoint(0,-100);var v=_getTransformFromPoints2(o,s,l,x,m,g),y=new SVGMatrix;y.multiplySelf(r),y.multiplySelf(v),e.setAttribute("gradientUnits","userSpaceOnUse"),e.setAttribute("gradientTransform",y),e.setAttribute("cx","0"),e.setAttribute("cy","0"),e.setAttribute("r","100")}},getGradientColorAtOffset=function(e,t){var n=_createElement5("canvas"),a,r;n.width=a=100,n.height=r=10;var i=n.getContext("2d");i.clearRect(0,0,a,r);var o=i.createLinearGradient(0,0,a,0),s=!0,l=!1,d;try{for(var u=getGradientOwnStops(e)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,o.addColorStop(p.offset.baseVal,p.style.getPropertyValue("stop-color")||"#000")}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}i.fillStyle=o,i.fillRect(0,0,a,r);var h=i.getImageData(t*a,0,1,1).data,b="rgb("+h[0]+", "+h[1]+", "+h[2]+")";return b},compareGradients=function(e){if(0===e.length)return!1;if(1===e.length)return!0;var t=_toArray(e),n=t[0],a=t.slice(1),r=Symbol(),i=!0,o=!1,s;try{for(var l=e[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,u[r]=getGradientOwnStops(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,p=!1,h;try{for(var b=a[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)if(m=x.value,m[r].length!==n[r].length)return!1}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}for(var g=0;g<n[r].length;g+=1){var v=n[r][g],y=!0,f=!1,_=void 0;try{for(var w=a[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=A[r][g];if(C.offset.baseVal!==v.offset.baseVal)return!1;if(C.style.getPropertyValue("stop-color")!==v.style.getPropertyValue("stop-color"))return!1}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return!0},getGradientAttribute=function e(t,n){var a=null;if(t.hasAttribute(n))a=t.getAttribute(n);else if(""!==t.href.baseVal){var r=_getOutermostSVGElement2(t).querySelector(t.href.baseVal);r&&(a=e(r,n))}return a};BoxySVG.utils.gradient={hasOwnStops:hasOwnStops,getGradientOwnStops:getGradientOwnStops,getGradientComputedStops:getGradientComputedStops,getGradientUsers:getGradientUsers,convertRadialGradientToUserSpace:convertRadialGradientToUserSpace,getGradientColorAtOffset:getGradientColorAtOffset,compareGradients:compareGradients,getGradientAttribute:getGradientAttribute}}}{{var _namespaces2=BoxySVG.utils.variables.namespaces,_templateElement=document.createElement("template"),_html=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a=t.join("");_templateElement.innerHTML=a;var r=document.importNode(_templateElement.content,!0);return 1===r.children.length?r.firstElementChild:r},_svg=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a="<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">"+t.join("")+"</svg>";_templateElement.innerHTML=a;var r=document.importNode(_templateElement.content,!0),i=r.querySelector("svg#x-stub");if(1===i.children.length)return i.firstElementChild;for(var o=[].concat(_toConsumableArray(i.childNodes)),s=0,l;s<o.length;s++)l=o[s],r.appendChild(l);return i.remove(),r},parseHTML=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return 1<t.childElementCount?t:1===t.childElementCount?t.children[0]:null},parseSVG=function(e){var t=document.createDocumentFragment(),n=document.createElementNS(_namespaces2.svg,"svg");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return 1<t.childElementCount?t:1===t.childElementCount?t.children[0]:null};BoxySVG.utils.markup={html:_html,svg:_svg,parseHTML:parseHTML,parseSVG:parseSVG}}}{{var extractImageSize=function(e){return new Promise(function(t){var n=new Image;n.onload=function(){t({width:n.naturalWidth,height:n.naturalHeight})},n.src=e})};BoxySVG.utils.image={extractImageSize:extractImageSize}}}{{var compareArrays=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2];if(e.length!==t.length)return!1;if(n)for(var a in e){var r=e[a];if(r!==t[a])return!1}else{for(var o=0;o<e.length;o+=1)if(!t.includes(e[o]))return!1;for(var o=0;o<t.length;o+=1)if(!e.includes(t[o]))return!1}return!0},removeDuplicates=function(e){return[].concat(_toConsumableArray(new Set(e)))},includesOnly=function(e,t){if(0===e.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t)return!1;return!0},valuesEqual=function(e){for(var t=1;t<e.length;t+=1)if(e[t]!==e[0])return!1;return!0},dataURLToBinaryArray=function(e){var t=e.substring(e.indexOf(",")+1);return t=atob(t),t=t.split(""),t=t.map(function(e){return e.charCodeAt(0)}),new Uint8Array(t)};BoxySVG.utils.array={compareArrays:compareArrays,removeDuplicates:removeDuplicates,includesOnly:includesOnly,valuesEqual:valuesEqual,dataURLToBinaryArray:dataURLToBinaryArray}}}{{var toJSON=function(e){var t=null;try{t=JSON.stringify(e)}catch(e){return console.error("Failed to generate JSON string",e),t}return t},fromJSON=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0,n=null;try{n=JSON.parse(e)}catch(n){return void(t&&console.error("Failed to parse JSON string",e,n))}return n};BoxySVG.utils.json={toJSON:toJSON,fromJSON:fromJSON}}}{{var _keys=Object.keys,stringify=JSON.stringify,cachedRegistry=null,cachedThumbnails=null,getGoogleFontsThumbnails=function(){return new Promise(async function(e){if(cachedThumbnails)e(cachedThumbnails);else{var t=await fetch("metadata/google-fonts-thumbnails.json"),n=await t.json();cachedThumbnails=n,e(n)}})},getGoogleFontsRegistry=async function(){return new Promise(async function(e){if(cachedRegistry)e(cachedRegistry);else{var t=await fetch("metadata/google-fonts-registry.json"),n=await t.json();cachedRegistry=n,e(n)}})},getGoogleFontsFamilies=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"alphabetical";return new Promise(async function(t){var n=await getGoogleFontsRegistry();if("alphabetical"===e){var a=n.items.map(function(e){return e.family});t(a)}else("popularity"===e||"trending"===e||"date"===e)&&t(n.sortedFamilies[e])})},generateGoogleFontsThumbnailsFile=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return new Promise(async function(t){var n={},a=await getGoogleFontsRegistry(),r=document.createElement("canvas");r.width=240,r.height=25;var i=!0,o=!1,s;try{for(var l=a.items[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0){u=d.value,console.log(u.family);var c=u.urls[400]||u.urls[_keys(u.urls)[0]];c=c.replace("http://","https://");var p=new FontFace("BX "+u.family,"url("+c+")",{});await p.load(),document.fonts.add(p);var h=r.getContext("2d");h.clearRect(0,0,240,25),h.font="20px \"BX "+u.family+"\"",h.fillStyle="white",h.fillText(u.family,0,20),document.fonts.delete(p),n[u.family]=r.toDataURL("image/png",0.5)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var b=e?stringify(n):stringify(n,null,2);t(b)})},generateGoogleFontsRegistryFile=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return new Promise(async function(t){var n="https://www.googleapis.com/webfonts/v1/webfonts",a="AIzaSyBZd8UahlnRn53EWC7snRmOAuuktqBaP6k",r=await fetch(n+"?key="+a+"&sort=alpha");r=await r.json();var i={items:[],sortedFamilies:{}},o=!0,s=!1,l;try{for(var d=r.items[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=[],h={},b=!0,x=!1,m=void 0;try{for(var g=_keys(c.files)[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=c.files[y];y=normalizeGoogleFontFace(y),p.push(y),h[y]=f}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}var _={family:c.family,category:c.category,subsets:c.subsets,faces:p,urls:h};i.items.push(_)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}for(var w=["popularity","trending","date"],k=0;k<w.length;k++){var A=w[k],C=await fetch(n+"?key="+a+"&sort="+A);C=await C.json(),i.sortedFamilies[A]=C.items.map(function(e){return e.family})}var S=e?stringify(i):stringify(i,null,2);t(S)})},normalizeGoogleFontFace=function(e){return"regular"===e?"400":"bold"===e?"700":"italic"===e?"400italic":"bolditalic"===e?"700italic":"r"===e?"400":"b"===e?"700":"i"===e?"400italic":e};BoxySVG.utils.fontGoogle={getGoogleFontsThumbnails:getGoogleFontsThumbnails,getGoogleFontsRegistry:getGoogleFontsRegistry,getGoogleFontsFamilies:getGoogleFontsFamilies}}}{{var compressArtwork=function(e){for(var t=[],n=0,a=e.length;n<a;n+=1)t.push(e[n].charCodeAt(0));var r=new Uint8Array(t);return pako.gzip(r)},uncompressArtwork=function(e){try{for(var t=pako.inflate(e),n="",a=0,r=t.length,i;a<r;a+=1)i=String.fromCharCode(t[a]),n+=i;return n}catch(e){return null}};BoxySVG.utils.artworkCompression={compressArtwork:compressArtwork,uncompressArtwork:uncompressArtwork}}}{{var _createElement6=BoxySVG.utils.element.createElement,_normalizeWhitespace=BoxySVG.utils.node.normalizeWhitespace,_BoxySVG$utils$string=BoxySVG.utils.string,_collapseWhitespace=_BoxySVG$utils$string.collapseWhitespace,_replaceAll=_BoxySVG$utils$string.replaceAll,_namespaces3=BoxySVG.utils.variables.namespaces,exportArtwork=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"xml",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0;e=e.cloneNode(!0);for(var r=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),i;i=r.nextNode();)if("defs"===i.localName)0===i.children.length&&i.remove();else if("style"===i.localName)""===_collapseWhitespace(i.textContent)?i.remove():i.matches("[data-bx-fonts=\"google\"]")&&i.removeAttribute("data-bx-fonts");else if("bx-title"===i.localName){var o=_createElement6("svg:title");o.innerHTML=i.innerHTML;var s=!0,l=!1,d=void 0;try{for(var u=i.attributes[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p.name,b=p.value;o.setAttribute(h,b)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}i.replace(o)}normalizeNamespaces(e,t),_normalizeWhitespace(e,n);var x=serializeArtwork(e,t);return x},serializeArtwork=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"xml",n;if("xml"===t){var a=new XMLSerializer;n="<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"+a.serializeToString(e)}else if("html"===t){n="<!doctype html>\n"+e.outerHTML,n=_replaceAll(n," xmlns:xlink=\"http://www.w3.org/1999/xlink\"","")}return n=_replaceAll(n,"url(&quot;","url("),n=_replaceAll(n,"&quot;)",")"),n},normalizeNamespaces=function(e,t){if("xml"===t){for(var n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),a=!1,r=!1,i;i=n.nextNode();){if(i.localName.startsWith("bx-")){for(var o=document.createElementNS(_namespaces3.bx,"bx:"+i.localName.substring(3)),s=[].concat(_toConsumableArray(i.attributes)),l=0,d;l<s.length;l++)d=s[l],o.setAttribute(d.name,d.value);for(var u=[].concat(_toConsumableArray(i.childNodes)),c=0,p;c<u.length;c++)p=u[c],o.append(p);i.replace(o),r=!0;continue}for(var h=[].concat(_toConsumableArray(i.attributes)),b=0;b<h.length;b++){var x=h[b],m=x.name,g=x.value;if("href"===m||"_href"===m)i.removeAttribute(m),i.setAttribute("xlink:href",g),a=!0;else if(m.startsWith("data-bx-")){var v=m.substring(8);i.setAttributeNS(_namespaces3.bx,"bx:"+v,g),i.removeAttribute(m),r=!0}}}e.removeAttribute("xmlns"),e.removeAttribute("xmlns:bx"),e.removeAttribute("xmlns:xlink"),e.setAttributeNS(_namespaces3.xmlns,"xmlns",_namespaces3.svg),a&&e.setAttributeNS(_namespaces3.xmlns,"xmlns:xlink",_namespaces3.xlink),r&&e.setAttributeNS(_namespaces3.xmlns,"xmlns:bx",_namespaces3.bx)}else if("html"===t)for(var y=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),f;f=y.nextNode();)for(var _=[].concat(_toConsumableArray(f.attributes)),w=0,k;w<_.length;w++)k=_[w],"href"===k.name&&(f.setAttribute("xlink:href",f.getAttribute("href")),f.removeAttribute("href"))};BoxySVG.utils.artworkExport={exportArtwork:exportArtwork,serializeArtwork:serializeArtwork}}}{{var _removeDuplicates=BoxySVG.utils.array.removeDuplicates,_compareElements=BoxySVG.utils.element.compareElements,_parseUrl2=BoxySVG.utils.parsing.parseUrl,_BoxySVG$utils$variab4=BoxySVG.utils.variables,_urlValueAcceptingPropertyNames=_BoxySVG$utils$variab4.urlValueAcceptingPropertyNames,_namespaces4=_BoxySVG$utils$variab4.namespaces,isArtworkString=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html");return null!==n.querySelector("svg")},prepareArtworkForInsertion=function(e,t){{var n=!0,a=!1,r;try{for(var i=e.querySelectorAll("use")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,""!==s.href.baseVal){var l=e.querySelector(s.href.baseVal),d=t.querySelector(s.href.baseVal);l&&d&&_compareElements(l,d)&&l.remove()}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}{var u=[].concat(_toConsumableArray(e.querySelectorAll("pattern:not([href])"))),c=[].concat(_toConsumableArray(t.querySelectorAll("pattern:not([href])"))),p=!0,h=!1,b;try{for(var x=function(){var e=g.value,t=c.find(function(t){return t.id===e.id});t&&_compareElements(e,t)&&e.remove()},m=u[Symbol.iterator](),g;!(p=(g=m.next()).done);p=!0)x()}catch(e){h=!0,b=e}finally{try{!p&&m.return&&m.return()}finally{if(h)throw b}}}{var v=[].concat(_toConsumableArray(e.querySelectorAll("style"))),y=[].concat(_toConsumableArray(t.querySelectorAll("style"))),f=!0,_=!1,w;try{for(var k=v[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=!0,E=!1,T=void 0;try{for(var P=y[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,C.textContent===D.textContent&&C.remove()}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}{var M=[].concat(_toConsumableArray(e.querySelectorAll("[id]"))).map(function(e){return e.id}),N=[].concat(_toConsumableArray(t.querySelectorAll("[id]"))).map(function(e){return e.id});e.id&&M.push(e.id),t.id&&N.push(t.id);var I=M.filter(function(e){return N.includes(e)});I=_removeDuplicates(I);var R=!0,V=!1,z;try{for(var G=I[Symbol.iterator](),B;!(R=(B=G.next()).done);R=!0){var O=B.value,q=e.id===O?e:e.querySelector("#"+O),j=void 0;j="linearGradient"===q.localName||"radialGradient"===q.localName?"gradient":"clipPath"===q.localName?"path":q.localName;for(var U=void 0,H=1;;){var $=j+"-"+H;if(null===e.querySelector("#"+$)&&null===t.querySelector("#"+$)&&e.id!==$&&t.id!==$){U=$;break}else H+=1}for(var F=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),Y=null;Y=F.nextNode();){Y.id===O&&(Y.id=U),Y.href&&Y.href.baseVal==="#"+O&&Y.setAttribute("href","#"+U);var X=!0,W=!1,K=void 0;try{for(var Z=_urlValueAcceptingPropertyNames[Symbol.iterator](),Q;!(X=(Q=Z.next()).done);X=!0){var J=Q.value,ee=Y.style.getPropertyValue(J);if(ee&&ee.startsWith("url(")){var te=ee.substring(6,ee.length-2);te===O&&(Y.style.removeProperty(J),Y.style.setProperty(J,"url(#"+U+")"))}}}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}var ne=!0,ae=!1,re=void 0;try{for(var ie=_urlValueAcceptingPropertyNames[Symbol.iterator](),oe;!(ne=(oe=ie.next()).done);ne=!0){var se=oe.value,le=Y.getAttribute(se);if(le&&le.includes("url(")){var de=_parseUrl2(le);de&&de==="#"+O&&Y.setAttribute(se,"url(#"+U+")")}}}catch(e){ae=!0,re=e}finally{try{!ne&&ie.return&&ie.return()}finally{if(ae)throw re}}}}}catch(e){V=!0,z=e}finally{try{!R&&G.return&&G.return()}finally{if(V)throw z}}}},createArtworkFromBitmapDataURL=function(e){return new Promise(function(t){var n=new Image;n.src=e,n.onload=function(){var a=n.naturalWidth,r=n.naturalHeight,i="<?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\""+_namespaces4.svg+"\" xmlns:xlink=\""+_namespaces4.xlink+"\" viewBox=\"0 0 "+a+" "+r+"\">"+("  <image width=\""+a+"\" height=\""+r+"\" xlink:href=\""+e+"\"></image></svg>");t(i)}})};BoxySVG.utils.artworkGeneral={isArtworkString:isArtworkString,prepareArtworkForInsertion:prepareArtworkForInsertion,createArtworkFromBitmapDataURL:createArtworkFromBitmapDataURL}}}{{var _BoxySVG$utils$elemen3=BoxySVG.utils.element,_createElement7=_BoxySVG$utils$elemen3.createElement,_getOutermostSVGElement3=_BoxySVG$utils$elemen3.getOutermostSVGElement,_BoxySVG$utils$gradie=BoxySVG.utils.gradient,_hasOwnStops=_BoxySVG$utils$gradie.hasOwnStops,_getGradientAttribute=_BoxySVG$utils$gradie.getGradientAttribute,_getGradientComputedStops=_BoxySVG$utils$gradie.getGradientComputedStops,_normalize3=BoxySVG.utils.math.normalize,_BoxySVG$utils$patter=BoxySVG.utils.pattern,_getFurthestAncestorPattern=_BoxySVG$utils$patter.getFurthestAncestorPattern,_getInheritedPatternAttributes=_BoxySVG$utils$patter.getInheritedPatternAttributes,_validateShapeData=BoxySVG.utils.pathShapes.validateShapeData,_reflectStyleElementCSSOM=BoxySVG.utils.style.reflectStyleElementCSSOM,_replaceAll2=BoxySVG.utils.string.replaceAll,_getComputedTransform2=BoxySVG.utils.transformGeneral.getComputedTransform,_BoxySVG$utils$variab5=BoxySVG.utils.variables,_contentSchemas=_BoxySVG$utils$variab5.contentSchemas,_namespaces5=_BoxySVG$utils$variab5.namespaces,_SVGUnitTypes3=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2=_SVGUnitTypes3.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_SVGLength2=SVGLength,_SVG_LENGTHTYPE_PERCENTAGE=_SVGLength2.SVG_LENGTHTYPE_PERCENTAGE,entries=Object.entries,defaultArtwork="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 500 500\"></svg>",importArtwork=function(e){for(var t=deserializeArtwork(e)||deserializeArtwork(defaultArtwork),n=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,a=document.createNodeIterator(t,n),r;r=a.nextNode();)if(r.nodeType!==Node.ELEMENT_NODE){var i=_contentSchemas[r.parentNode.nodeName]||[];!1===i.includes(r.nodeName)&&r.remove()}else if(!r.localName.includes(":")){if("title"===r.localName){var o=_createElement7("svg:bx-title");o.innerHTML=r.innerHTML;var s=!0,l=!1,d=void 0;try{for(var u=r.attributes[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p.name,b=p.value;o.setAttribute(h,b)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}r.replace(o);continue}else if(r!==t){var x=_contentSchemas[r.parentNode.localName]||[];if(!1===x.includes(r.localName)){r.remove();continue}}for(var m=[].concat(_toConsumableArray(r.attributes)),g=0;g<m.length;g++){var v=m[g],y=v.name,b=v.value;if(y.includes(":"))if(r.removeAttribute(y),y.startsWith("bx:"))y="data-bx-"+y.split(":")[1],r.setAttribute(y,b);else if("xlink:href"===y&&!1===r.hasAttribute("href"))y="href",r.setAttribute(y,b);else continue;y.startsWith("data-")?"data-bx-shape"===y&&!1===_validateShapeData(r)&&r.removeAttribute(y):"href"===y&&"a"===r.localName&&(r.removeAttribute(y),r.setAttribute("_href",b))}}else if(r.localName.startsWith("bx:")){for(var f=r.localName.split(":")[1],_=document.createElement("bx-"+f),w=[].concat(_toConsumableArray(r.attributes)),k=0,A;k<w.length;k++)A=w[k],_.setAttribute(A.name,A.value);for(var C=[].concat(_toConsumableArray(r.childNodes)),S=0,E;S<C.length;S++)E=C[S],_.append(E);r.replace(_)}else r.remove();var T=!0,P=!1,L;try{for(var D=t.querySelectorAll("text")[Symbol.iterator](),M,N;!(T=(M=D.next()).done);T=!0)N=M.value,normalizeText(N)}catch(e){P=!0,L=e}finally{try{!T&&D.return&&D.return()}finally{if(P)throw L}}var I=!0,R=!1,V;try{for(var z=t.querySelectorAll("linearGradient")[Symbol.iterator](),G,B;!(I=(G=z.next()).done);I=!0)B=G.value,normalizeLinearGradient(B)}catch(e){R=!0,V=e}finally{try{!I&&z.return&&z.return()}finally{if(R)throw V}}var O=!0,q=!1,j;try{for(var U=t.querySelectorAll("radialGradient")[Symbol.iterator](),H,$;!(O=(H=U.next()).done);O=!0)$=H.value,normalizeRadialGradient($)}catch(e){q=!0,j=e}finally{try{!O&&U.return&&U.return()}finally{if(q)throw j}}var F=!0,Y=!1,X;try{for(var W=t.querySelectorAll("pattern")[Symbol.iterator](),K,Z;!(F=(K=W.next()).done);F=!0)Z=K.value,normalizePattern(Z)}catch(e){Y=!0,X=e}finally{try{!F&&W.return&&W.return()}finally{if(Y)throw X}}var Q=!0,J=!1,ee;try{for(var te=t.querySelectorAll("symbol")[Symbol.iterator](),ne,ae;!(Q=(ne=te.next()).done);Q=!0)ae=ne.value,normalizeSymbol(ae)}catch(e){J=!0,ee=e}finally{try{!Q&&te.return&&te.return()}finally{if(J)throw ee}}var re=!0,ie=!1,oe;try{for(var se=t.querySelectorAll("use")[Symbol.iterator](),le,de;!(re=(le=se.next()).done);re=!0)de=le.value,normalizeUse(de)}catch(e){ie=!0,oe=e}finally{try{!re&&se.return&&se.return()}finally{if(ie)throw oe}}return _normalizeNamespaces(t),normalizeDefs(t),normalizeFonts(t),document.importNode(t,!0),t},normalizeText=function(e){var t=e.querySelectorAll("textPath"),n=e.querySelectorAll("tspan"),a=0<t.length?t[0]:null;{var r=e.hasAttribute("width")||e.hasAttribute("height")?"pre-wrap":"pre";e.style.setProperty("white-space",r)}for(var i=[e].concat(_toConsumableArray(n)),o=0,s;o<i.length;o++)s=i[o],1<s.x.baseVal.numberOfItems&&s.setAttribute("x",s.x.baseVal[0].valueAsString),1<s.y.baseVal.numberOfItems&&s.setAttribute("y",s.y.baseVal[0].valueAsString),s.removeAttribute("dx"),s.removeAttribute("dy"),s.removeAttribute("rotate");if(1<t.length){var l=!0,d=!1,u;try{for(var c=t[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,h!==a&&h.remove()}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}if(a){a.parentElement!==e&&e.append(a);for(var b=[].concat(_toConsumableArray(e.childNodes)),x=0,m;x<b.length;x++)m=b[x],["a","tspan","#text"].includes(m.localName)&&m.remove();if(a.hasAttribute("style")){var g=!0,v=!1,y;try{for(var f=a.style[Symbol.iterator](),_;!(g=(_=f.next()).done);g=!0){var w=_.value,k=e.style.getPropertyValue(w),A=a.style.getPropertyValue(w);k!==A&&e.setProperty(w,A)}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}a.removeAttribute("style")}}},normalizeLinearGradient=function(e){if(""!==e.href.baseVal){if(!1===_hasOwnStops(e)){var t=_getGradientComputedStops(e),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e.append(s.cloneNode())}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}var l=["x1","x2","y1","y2","gradientUnits","gradientTransform","spreadMethod","style"],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)if(b=h.value,!1===e.hasAttribute(b)){var x=_getGradientAttribute(e,b);null!==x&&e.setAttribute(b,x)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.removeAttribute("href")}var m=0,g=[].concat(_toConsumableArray(e.children)).filter(function(e){return"stop"===e.localName}),v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.offset.baseVal;A<m&&(A=m),A=_normalize3(A,0,1,4),m=A,k.setAttribute("offset",A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.x1.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x1",e.x1.baseVal.valueInSpecifiedUnits/100),e.y1.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y1",e.y1.baseVal.valueInSpecifiedUnits/100),e.x2.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x2",e.x2.baseVal.valueInSpecifiedUnits/100),e.y2.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y2",e.y2.baseVal.valueInSpecifiedUnits/100))},normalizeRadialGradient=function(e){if(""!==e.href.baseVal){if(!1===_hasOwnStops(e)){var t=_getGradientComputedStops(e),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e.append(s.cloneNode())}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}var l=["r","cx","cx","fx","fy","fr","gradientUnits","gradientTransform","spreadMethod","style"],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)if(b=h.value,!1===e.hasAttribute(b)){var x=_getGradientAttribute(e,b);null!==x&&e.setAttribute(b,x)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.removeAttribute("href")}var m=0,g=[].concat(_toConsumableArray(e.children)).filter(function(e){return"stop"===e.localName}),v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.offset.baseVal;A<m&&(A=m),A=_normalize3(A,0,1,4),m=A,k.setAttribute("offset",A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.removeAttribute("fx"),e.removeAttribute("fy"),e.removeAttribute("fr"),e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.r.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("r",e.r.baseVal.valueInSpecifiedUnits/100),e.cx.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("cx",e.cx.baseVal.valueInSpecifiedUnits/100),e.cy.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("cy",e.cy.baseVal.valueInSpecifiedUnits/100))},normalizeSymbol=function(e){var t=_getOutermostSVGElement3(e);if(!1===e.hasAttribute("id")){for(var n=0;null!==t.querySelector("#symbol-"+n);)n+=1;e.setAttribute("id","symbol-"+n)}},normalizePattern=function(e){var t=_getOutermostSVGElement3(e);if(!1===e.hasAttribute("id")){for(var n=0;null!==t.querySelector("#pattern-"+n);)n+=1;e.setAttribute("id","pattern-"+n)}if(e.hasAttribute("href")){var a=e.getAttribute("href"),r=t.querySelector(a);r||e.removeAttribute("href")}if(e.hasAttribute("href")&&0<e.children.length){var i=_getInheritedPatternAttributes(e),o=!0,s=!1,l;try{for(var d=i[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=c.name,h=c.value;e.setAttribute(p,h)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}e.removeAttribute("href")}if(e.hasAttribute("href")){var b=e.getAttribute("href"),x=t.querySelector(b);if(x.hasAttribute("href")){var m=_getFurthestAncestorPattern(e),g=_getInheritedPatternAttributes(e),v=!0,y=!1,f;try{for(var _=entries(g)[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,p=k.name,h=k.value;!1===m.hasAttribute(p)&&e.setAttribute(p,h)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.setAttribute("href","#"+m.id)}}if(e.hasAttribute("href")){var A=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits"],C=!0,S=!1,E;try{for(var T=A[Symbol.iterator](),P,p;!(C=(P=T.next()).done);C=!0)p=P.value,e.hasAttribute(p)&&e.removeAttribute(p)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}!1===e.hasAttribute("href")&&e.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.hasAttribute("x")&&e.x.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x",e.x.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("y")&&e.y.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y",e.y.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("width")&&e.width.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("width",e.width.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("height")&&e.height.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("height",e.height.baseVal.valueInSpecifiedUnits/100))},normalizeUse=function(e){var t=_getOutermostSVGElement3(e),n=t.querySelector(e.href.baseVal);if(n&&"symbol"!==n.localName){var a=_getComputedTransform2(n);a.multiplySelf(_getComputedTransform2(e)),a.translateSelf(e.x.baseVal.value,e.y.baseVal.value);var r=n.cloneNode(!0);r.setAttribute("transform",a);var i=!0,o=!1,s;try{for(var l=e.style[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=r.style.getPropertyValue(u),p=e.style.getPropertyValue(u);""===c&&r.style.setProperty(u,p)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var h=!0,b=!1,x;try{for(var m=r.querySelectorAll("*[id]")[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,v.removeAttribute("id")}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}r.id=e.id,e.replace(r)}else{var y=_getComputedTransform2(e);y.translateSelf(e.x.baseVal.value,e.y.baseVal.value),e.setAttribute("transform",y.toString()),e.removeAttribute("x"),e.removeAttribute("y")}},_normalizeNamespaces=function(e){for(var t=[],n=[].concat(_toConsumableArray(e.attributes)),a=0;a<n.length;a++){var r=n[a],i=r.name,o=r.value;e.removeAttribute(i),"xmlns"!==i&&"xmlns:bx"!==i&&t.push({name:i,value:o})}e.setAttribute("xmlns",_namespaces5.svg),e.setAttribute("xmlns:bx",_namespaces5.bx);var s=!0,l=!1,d;try{for(var u=t[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,i=p.name,o=p.value;e.setAttribute(i,o)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}},normalizeDefs=function(e){var t=e.querySelector(":scope > defs");t||(t=_createElement7("svg:defs"),e.prepend(t))},normalizeFonts=function(e){if(!hasNormalizedFonts(e)){var t=e.querySelectorAll("style"),n={},a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){for(var l=s.value,d=[],u=0,c=l.sheet.rules.length,p;u<c;u+=1)if(p=l.sheet.rules[u],p.type===CSSRule.FONT_FACE_RULE){var h=_replaceAll2(p.style.fontFamily,"\"","");void 0===n[h]?n[h]=[p]:n[h].push(p),d.push(u)}if(0<d.length){var b=!0,x=!1,m=void 0;try{for(var g=d.reverse()[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,l.sheet.deleteRule(y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}_reflectStyleElementCSSOM(l),0===l.sheet.rules.length&&l.remove()}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var f=!0,_=!1,w;try{for(var k=entries(n)[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=_slicedToArray(A.value,2),S=C[0],E=C[1],T=E.map(function(e){return e.cssText}).join(" "),P=_createElement7("svg:style");P.setAttribute("data-bx-fonts",S),P.textContent=T;var L=e.querySelector("defs");null===L&&(L=_createElement7("svg:defs"),e.prepend(L)),L.insertBefore(P,L.querySelector("style"))}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}},hasNormalizedFonts=function(e){var t=e.querySelectorAll("style"),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=null,d=!0,u=!1,c=void 0;try{for(var p=s.sheet.rules[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)if(b=h.value,b.type===CSSRule.FONT_FACE_RULE){var x=_replaceAll2(b.style.fontFamily,"\"","");if(null==l)l=x;else if(l!==x)return!1}else if(null!=l)return!1}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(null!==l&&s.getAttribute("data-bx-fonts")!==l)return!1}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!0},deserializeArtwork=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.querySelector("svg")||null;return a};BoxySVG.utils.artworkImport={importArtwork:importArtwork}}}{{var _degToRad3=BoxySVG.utils.geometry.degToRad,_abs2=Math.abs,_sin2=Math.sin,asin=Math.asin,_cos2=Math.cos,_acos=Math.acos,_tan2=Math.tan,_pow5=Math.pow,_sqrt4=Math.sqrt,_PI3=Math.PI,splitCurve=function(e,n,a,r,i){var t=(n.x-e.x)*i+e.x,o=(n.y-e.y)*i+e.y,s=(a.x-n.x)*i+n.x,l=(a.y-n.y)*i+n.y,d=(r.x-a.x)*i+a.x,u=(r.y-a.y)*i+a.y,c=(s-t)*i+t,p=(l-o)*i+o,h=(d-s)*i+s,b=(u-l)*i+l,x=(h-c)*i+c,m=(b-p)*i+p,g=[new SVGPoint(e.x,e.y),new SVGPoint(t,o),new SVGPoint(c,p),new SVGPoint(x,m)],v=[new SVGPoint(x,m),new SVGPoint(h,b),new SVGPoint(d,u),new SVGPoint(r.x,r.y)];return[g,v]},getCubicCurveTParam=function(e,n,a,r,i){var o=function(e){return 1e-11>_abs2(e)?0:0<e?1:-1},s=function(e,t,n,a){return _sqrt4((n-e)*(n-e)+(a-t)*(a-t))},l=function(e,r,i,o,s){var l=-e+3*r-3*i+o;0===l&&(l=1e-10);var a=[3,-1];d(a,(3*e-6*r+3*i)/l,(-3*e+3*r)/l,(-s+e)/l);var t=[],u=!0,c=!1,p;try{for(var h=a[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,0<=x&&1>=x&&t.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return t},d=function(e,n,a,i){var s=(_pow5(n,2)-3*a)/9,l=(2*_pow5(n,3)-9*n*a+27*i)/54;if(_pow5(l,2)<_pow5(s,3)){var r=_acos(l/_sqrt4(_pow5(s,3)))/3;return e.splice(0,0,-2*_sqrt4(s)*_cos2(r)-n/3),e.splice(1,0,-2*_sqrt4(s)*_cos2(r+4*_PI3/3)-n/3),e.splice(2,0,-2*_sqrt4(s)*_cos2(r-4*_PI3/3)-n/3),3}var t=-o(l)*_pow5(_abs2(l)+_sqrt4(_pow5(l,2)-_pow5(s,3)),1/3),d=0==o(t)?0:s/t;return e.splice(0,0,t+d-n/3),e.splice(1,0,-0.5*(t+d)-n/3),e.splice(2,0,0.5*_sqrt4(3)*_abs2(t-d)),1===e[2]+1?2:1},u=[].concat(_toConsumableArray(l(n.x,a.x,r.x,i.x,e.x)),_toConsumableArray(l(n.y,a.y,r.y,i.y,e.y)));if(0===u.length)return-1;var c=-1,p=3,h=!0,b=!1,x;try{for(var m=u[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var v=g.value,t=_pow5(1-v,3)*n.x+3*_pow5(1-v,2)*v*a.x+3*(1-v)*_pow5(v,2)*r.x+_pow5(v,3)*i.x,y=_pow5(1-v,3)*n.y+3*_pow5(1-v,2)*v*a.y+3*(1-v)*_pow5(v,2)*r.y+_pow5(v,3)*i.y,f=s(e.x,e.y,t,y);f<p&&(c=v,p=f)}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}return c},_arcToCubicCurves=function e(n,a,r,i,o,s,l,d,u,c){var p=[],b=_degToRad3(l),m=function(e,t,n){var a=e*_cos2(n)-t*_sin2(n),r=e*_sin2(n)+t*_cos2(n);return{x:a,y:r}},g,v,f,_;if(c)g=c[0],v=c[1],f=c[2],_=c[3];else{var w=m(n,a,-b);n=w.x,a=w.y;var A=m(r,i,-b);r=A.x,i=A.y;var C=(n-r)/2,x=(a-i)/2,y=C*C/(o*o)+x*x/(s*s);1<y&&(y=_sqrt4(y),o=y*o,s=y*s);var h=d===u?-1:1;var S=o*o,E=s*s,T=h*_sqrt4(_abs2((S*E-S*x*x-E*C*C)/(S*x*x+E*C*C)));f=T*o*x/s+(n+r)/2,_=T*-s*C/o+(a+i)/2,g=asin(((a-_)/s).toFixed(9)),v=asin(((i-_)/s).toFixed(9)),n<f&&(g=_PI3-g),r<f&&(v=_PI3-v),0>g&&(g=2*_PI3+g),0>v&&(v=2*_PI3+v),u&&g>v&&(g-=2*_PI3),!u&&v>g&&(v-=2*_PI3)}var k=v-g;if(_abs2(k)>120*_PI3/180){var P=v,L=r,D=i;v=u&&v>g?g+1*(120*_PI3/180):g+-1*(120*_PI3/180),r=f+o*_cos2(v),i=_+s*_sin2(v),p=e(r,i,L,D,o,s,l,0,u,[v,P,f,_])}k=v-g;var M=_cos2(g),N=_sin2(g),I=_cos2(v),R=_sin2(v),V=_tan2(k/4),t=4/3*o*V,z=4/3*s*V,G=[n,a],B=[n+t*N,a-z*M],O=[r+t*R,i-z*I],q=[r,i];if(B[0]=2*G[0]-B[0],B[1]=2*G[1]-B[1],c)return[B,O,q].concat(p);p=[B,O,q].concat(p).join().split(",");var j=[],U=[];return p.forEach(function(e,t){t%2?U.push(m(p[t-1],p[t],b).y):U.push(m(p[t],p[t+1],b).x),6===U.length&&(j.push(U),U=[])}),j},getRamerDouglasPeuckerPoints=function e(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,a=0,r=0;if(2<t.length-1)for(var o=2,i;o<t.length;o+=1)i=getPerpendicularDistance(t[o],t[1],t[t.length-1]),i>r&&(a=o,r=i);var s;if(r>n){var l=e(t.slice(1,a),n),d=e(t.slice(a),n);s=l.concat(d)}else s=t;return s};BoxySVG.utils.curvesGeneral={splitCurve:splitCurve,getCubicCurveTParam:getCubicCurveTParam,arcToCubicCurves:_arcToCubicCurves,getRamerDouglasPeuckerPoints:getRamerDouglasPeuckerPoints}}}{{var _getDistanceBetweenPoints2=BoxySVG.utils.geometry.getDistanceBetweenPoints,_BoxySVG$utils$vector2=BoxySVG.utils.vector,_subtractVectors=_BoxySVG$utils$vector2.subtractVectors,_sumVectors2=_BoxySVG$utils$vector2.sumVectors,_vectorsDotProduct2=_BoxySVG$utils$vector2.vectorsDotProduct,_abs3=Math.abs,_floor2=Math.floor,_max3=Math.max,getSchneiderCurves=function(e,t){var n=BoxySVG.classes.Vector,a=_subtractVectors(new n(e[1]),new n(e[0])),r=_subtractVectors(new n(e[e.length-3]),new n(e[e.length-2]));a=a.normalize(),r=r.normalize();var i=fitCubic(e,0,e.length-1,a,r,t);return i},fitCubic=function e(t,n,a,r,o,s){var l=BoxySVG.classes.Vector;if(1==a-n){var d=t[n],c=t[a],p=_getDistanceBetweenPoints2(d,c)/3,h=new l(d),b=new l(c),x=_sumVectors2(h,r.scale(p)),m=_sumVectors2(b,o.scale(p)),g=[d,new SVGPoint(x.x,x.y),new SVGPoint(m.x,m.y),c];return[g]}for(var v=chordLengthParameterize(t,n,a),u=_max3(s,s*s),y=void 0,f=0;4>=f;f+=1){var i=generateBezier(t,n,a,v,r,o),_=computeMaxError(t,n,a,i,v),w=_slicedToArray(_,2),k=w[0],A=w[1];if(k<s)return[i];if(y=A,k>=u)break;reparameterize(t,n,a,v,i),u=k}var C=_subtractVectors(new l(t[y-1]),new l(t[y])),S=_subtractVectors(new l(t[y]),new l(t[y+1])),E=_sumVectors2(C,S).multiply(0.5).normalize(),T=e(t,n,y,r,E,s),P=e(t,y,a,E.multiply(-1),o,s),L=T.concat(P);return L},generateBezier=function(e,n,a,r,o,s){for(var l=BoxySVG.classes.Vector,d=e[n],c=e[a],p=new l(d),h=new l(c),x=[[0,0],[0,0]],m=[0,0],g=0;g<a-n+1;g+=1){var i=r[g],u=1-i,t=3*i*u,b=t*u,v=t*i,y=o.scale(b),f=s.scale(v);x[0][0]+=_vectorsDotProduct2(y,y),x[0][1]+=_vectorsDotProduct2(y,f),x[1][0]=x[0][1],x[1][1]+=_vectorsDotProduct2(f,f);var _=_subtractVectors(new l(e[n+g]),p.multiply(u*u*u+b));_=_subtractVectors(_,h.multiply(v+i*i*i)),m[0]+=_vectorsDotProduct2(y,_),m[1]+=_vectorsDotProduct2(f,_)}var w=x[0][0]*x[1][1]-x[1][0]*x[0][1],k=1e-6,A,C;if(_abs3(w)>k){var S=x[0][0]*m[1]-x[1][0]*m[0],E=m[0]*x[1][1]-m[1]*x[0][1];A=E/w,C=S/w}else{var T=x[0][0]+x[0][1],P=x[1][0]+x[1][1];A=_abs3(T)>k?C=m[0]/T:_abs3(P)>k?C=m[1]/P:C=0}var L=_getDistanceBetweenPoints2(c,d);k*=L,(A<k||C<k)&&(A=C=L/3);var D=_sumVectors2(p,o.scale(A)),M=_sumVectors2(h,s.scale(C)),N=[d,new SVGPoint(D.x,D.y),new SVGPoint(M.x,M.y),c];return N},chordLengthParameterize=function(e,t,n){for(var a=[0],r=t+1;r<=n;r+=1)a[r-t]=a[r-t-1]+_getDistanceBetweenPoints2(e[r],e[r-1]);for(var i=1;i<=n-t;i+=1)a[i]/=a[n-t];return a},reparameterize=function(e,t,n,a,r){for(var o=[],s=t;s<=n;s+=1)o[s-t]=findNewtonRaphsonRoot(r,e[s],a[s-t]);return o},findNewtonRaphsonRoot=function(e,t,n){for(var a=BoxySVG.classes.Vector,r=[],o=[],s=0,i;2>=s;s+=1)i=_subtractVectors(new a(e[s+1]),new a(e[s])),r[s]=i.multiply(3);for(var l=0,d;1>=l;l++)d=_subtractVectors(r[l+1],r[l]),o[l]=d.multiply(2);var u=evalBezier(3,e,n),c=evalBezier(2,r,n),p=evalBezier(1,o,n),h=_subtractVectors(u,new a(t)),b=_vectorsDotProduct2(c,c)+_vectorsDotProduct2(h,p);return 1e-6>_abs3(b)?n:n-_vectorsDotProduct2(h,c)/b},evalBezier=function(e,n,a){for(var t=BoxySVG.classes.Vector,r=n.map(function(e){return new t(e)}),o=1;o<=e;o+=1)for(var i=0;i<=e-o;i+=1)r[i]=_sumVectors2(r[i].multiply(1-a),r[i+1].multiply(a));return r[0]},computeMaxError=function(e,t,n,a,r){for(var o=BoxySVG.classes.Vector,s=_floor2((n-t+1)/2),l=0,d=t+1;d<n;d++){var i=_subtractVectors(evalBezier(3,a,r[d-t]),new o(e[d])),u=i.length;u>=l&&(l=u,s=d)}return[l,s]};BoxySVG.utils.curvesSchneider={getSchneiderCurves:getSchneiderCurves}}}{{var _tan3=Math.tan,_PI4=Math.PI,getOpenTypeFont=function(e){return new Promise(function(t){opentype.load(e,function(e,n){return e?t(null):t(n)})})},getOpenTypeGlyphPath=function(e,t,n,a,r){var i=e.path;if(r&&(i=getSkewedOpenTypePath(i,14)),a){var o=t.ascender/20;a.includes("underline")&&(i=getOpenTypePathWithLine(i,e.advanceWidth,o,t.descender/3)),a.includes("overline")&&(i=getOpenTypePathWithLine(i,e.advanceWidth,o,t.ascender-o)),a.includes("line-through")&&(i=getOpenTypePathWithLine(i,e.advanceWidth,o,(t.ascender+t.descender)/2))}return i=getScaledOpenTypePath(i,1/t.unitsPerEm*n),i},cloneOpenTypePathCommand=function(e){var t;if("M"===e.type||"L"===e.type){var n=e.type,a=e.x,r=e.y;t={type:n,x:a,y:r}}else if("Q"===e.type){var i=e.type,o=e.x1,s=e.y1,l=e.x,d=e.y;t={type:i,x1:o,y1:s,x:l,y:d}}else if("C"===e.type){var u=e.type,c=e.x1,p=e.y1,h=e.x2,b=e.y2,m=e.x,g=e.y;t={type:u,x1:c,y1:p,x2:h,y2:b,x:m,y:g}}else"Z"===e.type&&(t={type:"Z"});return t},getSkewedOpenTypePath=function(e,t){var n=new SVGMatrix([1,0,_tan3(_PI4*t/180),1,0,0]),a=[],r=!0,i=!1,o;try{for(var s=e.commands[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"M"===d.type){var u=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"M",x:u.x,y:u.y})}else if("L"===d.type){var c=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"L",x:c.x,y:c.y})}else if("Q"===d.type){var p=new SVGPoint(d.x1,d.y1).matrixTransform(n),h=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"Q",x1:p.x,y1:p.y,x:h.x,y:h.y})}else if("C"===d.type){var b=new SVGPoint(d.x1,d.y1).matrixTransform(n),x=new SVGPoint(d.x2,d.y2).matrixTransform(n),m=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"C",x1:controlPoint1.x,y1:controlPoint1.y,x2:controlPoint2.x,y2:controlPoint2.y,x:m.x,y:m.y})}else"Z"===d.type&&a.push({type:"Z"})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var g=new opentype.Path;return g.commands=a,g.fill=e.fill,g.stroke=e.stroke,g.strokeWidth=e.strokeWidth,g},getOpenTypePathWithLine=function(e,t,n,a){var r=[],i=!0,o=!1,s;try{for(var l=e.commands[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,r.push(cloneOpenTypePathCommand(u))}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}r.push({type:"M",x:0,y:a}),r.push({type:"L",x:t,y:a}),r.push({type:"L",x:t,y:a-n}),r.push({type:"L",x:0,y:a-n}),r.push({type:"Z"});var c=new opentype.Path;return c.commands=r,c.fill=e.fill,c.stroke=e.stroke,c.strokeWidth=e.strokeWidth,c},getScaledOpenTypePath=function(e,t){for(var n=new opentype.Path,a=0,r;a<e.commands.length;a+=1)r=e.commands[a],"M"===r.type?n.moveTo(r.x*t,-r.y*t):"L"===r.type?n.lineTo(r.x*t,-r.y*t):"Q"===r.type?n.quadraticCurveTo(r.x1*t,-r.y1*t,r.x*t,-r.y*t):"C"===r.type?n.curveTo(r.x1*t,-r.y1*t,r.x2*t,-r.y2*t,r.x*t,-r.y*t):"Z"===r.type&&n.closePath();return n};BoxySVG.utils.fontOpentype={getOpenTypeFont:getOpenTypeFont,getOpenTypeGlyphPath:getOpenTypeGlyphPath}}}{{var _parseFontFaceSrc=BoxySVG.utils.parsing.parseFontFaceSrc,_getOpenTypeFont=BoxySVG.utils.fontOpentype.getOpenTypeFont,_fontWeightsByMatchingOrder=BoxySVG.utils.variables.fontWeightsByMatchingOrder,_capitalize2=BoxySVG.utils.string.capitalize,_abs4=Math.abs,normalizeFontWeight=function(e){return"normal"===e?"400":"bold"===e?"700":e},formatFontWeightForDisplay=function(e){var t=normalizeFontWeight(e);return"100"===t?"Thin":"200"===t?"Extra-Light":"300"===t?"Light":"400"===t?"Normal":"500"===t?"Medium":"600"===t?"Semi-Bold":"700"===t?"Bold":"800"===t?"Extra-Bold":"900"===t?"Ultra-Bold":"Normal"},matchFontWeight=function(e,t){var n=!0,a=!1,r;try{for(var i=_fontWeightsByMatchingOrder[e][Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,t.includes(s))return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}},getFontDisplayName=function(e){var t=[],n=formatFontWeightForDisplay(normalizeFontWeight(e.weight));if(t.push(n),"normal"!==e.style){var a=_capitalize2(e.style);t.push(a)}if("normal"!==e.stretch){var r=_capitalize2(e.stretch);t.push(r)}return t.join(" ")},getFontBaseline=function(e){return new Promise(async function(t){var n=1;if(e.src){var a=_parseFontFaceSrc(e.src),r=await _getOpenTypeFont(a[0].url);r&&(n=1-_abs4(r.descender)/(_abs4(r.ascender)+_abs4(r.descender)))}t(n)})},matchFont=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"400",a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"normal",r=function(e,t){var n=e.filter(function(e){return e.family===t});return n}(e,t),i=function(e,t){var n=e.filter(function(e){return"normal"===t?"normal"===e.style:"italic"===t||"oblique"===t?"italic"===e.style||"oblique"===e.style:void 0});return 0===n.length&&(n=[].concat(_toConsumableArray(e))),n}(r,a),o=function(e,t){var n=!0,a=!1,r;try{for(var i=_fontWeightsByMatchingOrder[t][Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=!0,d=!1,u=void 0;try{for(var c=e[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,h.weight===s)return h}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e[0]?e[0]:null}(i,n);return o},fetchFontData=function(e){return new Promise(async function(t){var n=await fetch(e),a=await n.blob(),r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){var e=r.result;t(e)}})};BoxySVG.utils.fontGeneral={normalizeFontWeight:normalizeFontWeight,formatFontWeightForDisplay:formatFontWeightForDisplay,matchFontWeight:matchFontWeight,getFontDisplayName:getFontDisplayName,getFontBaseline:getFontBaseline,matchFont:matchFont,fetchFontData:fetchFontData}}}{{var _includesOnly=BoxySVG.utils.array.includesOnly,_isValidColorString=BoxySVG.utils.color.isValidColorString,_parseUrl3=BoxySVG.utils.parsing.parseUrl,_getOutermostSVGElement4=BoxySVG.utils.element.getOutermostSVGElement,_compareGradients=BoxySVG.utils.gradient.compareGradients,_comparePatterns=BoxySVG.utils.pattern.comparePatterns,_paintServerElementNames=BoxySVG.utils.variables.paintServerElementNames,getPaintType=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n="none";if("inherit"===e.style.getPropertyValue(t))n="inherit";else{var a=getComputedStyle(e).getPropertyValue(t);if(_isValidColorString(a))n="solid";else{var r=_parseUrl3(a);if(r){var i=_getOutermostSVGElement4(e).querySelector(r),o=i?i.localName:null;("linearGradient"===o||"radialGradient"===o||"pattern"===o)&&(n=o)}}}return n},getPaintServer=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=null,a=getComputedStyle(e).getPropertyValue(t),r=_parseUrl3(a);if(r){var i=_getOutermostSVGElement4(e).querySelector(r);i&&_paintServerElementNames.includes(i.localName)&&(n=i)}return n},isSamePaintType=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=null,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=getPaintType(l,t);if(l!==e[0]&&n!==d)return!1;n=d}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return null!==n},isMixedPaint=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=[],a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=getComputedStyle(d).getPropertyValue(t),c=getPaintServer(d);n.push(u),a.push(c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(1>=n.legth)return!1;if(_includesOnly(n,n[0]))return!1;var p=a.filter(function(e){return e&&"linearGradient"===e.localName}),h=a.filter(function(e){return e&&"radialGradient"===e.localName}),b=a.filter(function(e){return e&&"pattern"===e.localName});return p.length===e.length&&_compareGradients(p)?!1:h.length===e.length&&_compareGradients(h)?!1:b.length===e.length&&_comparePatterns.apply(void 0,_toConsumableArray(b))?!1:!0},isSamePaint=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=[],a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=getComputedStyle(l).getPropertyValue(t);n.push(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return!(0!==n.legth)||!!_includesOnly(n,n[0])},getDefFromURL=function(e,t){var n=_parseUrl3(t);if(n){var a=e.querySelector(n);if(a)return a}return null};BoxySVG.utils.paint={getPaintType:getPaintType,getPaintServer:getPaintServer,isSamePaintType:isSamePaintType,isMixedPaint:isMixedPaint,isSamePaint:isSamePaint,getDefFromURL:getDefFromURL}}}{{var _round9=BoxySVG.utils.math.round,_BoxySVG$utils$pathGe2=BoxySVG.utils.pathGeneral,_serializePathData=_BoxySVG$utils$pathGe2.serializePathData,_deserializePathData2=_BoxySVG$utils$pathGe2.deserializePathData,_normalizePathData2=_BoxySVG$utils$pathGe2.normalizePathData;window.addEventListener("load",function(){paper.setup(document.createElement("canvas"))});var unite=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"unite",n)},subtract=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"subtract",n)},intersect=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"intersect",n)},exclude=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"exclude",n)},performBoolOp=function(e,t,n,a){var r=getPaperPath(_serializePathData(e)),i=getPaperPath(_serializePathData(t)),o=r[n](i),s=[];if(o){var l=o.exportSVG().getAttribute("d");s=_deserializePathData2(l),s=_normalizePathData2(s);var d=!0,u=!1,c;try{for(var p=s[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,b.values=b.values.map(function(e){return _round9(e,a)})}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}return s},getPaperPath=function(e){var t=1<(e.match(/M/g)||[]).length,n;if(t){n=new paper.CompoundPath(e);var a=!0,r=!1,i;try{for(var o=n.children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.closed||l.closePath()}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}else n=new paper.Path(e),n.closed||n.closePath();return n};BoxySVG.utils.pathBoolops={unite:unite,subtract:subtract,intersect:intersect,exclude:exclude}}}{{var _createElement8=BoxySVG.utils.element.createElement,_round10=BoxySVG.utils.math.round,rectToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,!1===["x","y","width","height","rx","ry"].includes(x.name)&&n.setAttribute(x.name,x.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},circleToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,["cx","cy","r"].includes(x.name)||n.setAttribute(x.name,x.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},ellipseToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,["cx","cy","rx","ry"].includes(x.name)||n.setAttribute(x.name,x.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},lineToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,["x1","y1","x2","y2"].includes(x.name)||n.setAttribute(x.name,x.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},polylineToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,"points"!==x.name&&n.setAttribute(x.name,x.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},polygonToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(e.getPathData());var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,"points"!==x.name&&n.setAttribute(x.name,x.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n};BoxySVG.utils.pathConversion={rectToPath:rectToPath,circleToPath:circleToPath,ellipseToPath:ellipseToPath,lineToPath:lineToPath,polylineToPath:polylineToPath,polygonToPath:polygonToPath}}}{{var _radToDeg=BoxySVG.utils.geometry.radToDeg,_abs5=Math.abs,_sqrt5=Math.sqrt,_asin=Math.asin,_sin3=Math.sin,_cos3=Math.cos,_tan4=Math.tan,_atan2=Math.atan2,SMALL_NUMBER=1e-8,decomposeTransform=function(e){var t={},n=[[e.a,e.b,0,0],[e.c,e.d,0,0],[0,0,1,0],[e.e,e.f,0,1]];if(0==n[3][3])return null;for(var a=0;4>a;a++)for(var r=0;4>r;r++)n[a][r]/=n[3][3];for(var i=[],o=0;4>o;o++){i[o]=[];for(var s=0;4>s;s++)i[o][s]=n[o][s]}for(var l=0;3>l;l++)i[l][3]=0;if(i[3][3]=1,0==determinant4x4(i))return null;if(0!==n[0][3]||0!==n[1][3]||0!==n[2][3]){var d=[0,0,0,0];d[0]=n[0][3],d[1]=n[1][3],d[2]=n[2][3],d[3]=n[3][3];var u=inverse(i),c=transposeMatrix4(u),p=v4MulPointByMatrix(d,c);t.perspectiveX=p[0],t.perspectiveY=p[1],t.perspectiveZ=p[2],t.perspectiveW=p[3],n[0][3]=n[1][3]=n[2][3]=0,n[3][3]=1}else t.perspectiveX=0,t.perspectiveY=0,t.perspectiveZ=0,t.perspectiveW=1;t.translateX=n[3][0],n[3][0]=0,t.translateY=n[3][1],n[3][1]=0,t.translateZ=n[3][2],n[3][2]=0;for(var h=[[],[],[]],b=[0,0,0],x=0;3>x;x++)h[x][0]=n[x][0],h[x][1]=n[x][1],h[x][2]=n[x][2];if(t.scaleX=v3Length(h[0]),v3Scale(h[0],1),t.skewXY=v3Dot(h[0],h[1]),v3Combine(h[1],h[0],h[1],1,-t.skewXY),t.scaleY=v3Length(h[1]),v3Scale(h[1],1),t.skewXY/=t.scaleY,t.skewXZ=v3Dot(h[0],h[2]),v3Combine(h[2],h[0],h[2],1,-t.skewXZ),t.skewYZ=v3Dot(h[1],h[2]),v3Combine(h[2],h[1],h[2],1,-t.skewYZ),t.scaleZ=v3Length(h[2]),v3Scale(h[2],1),t.skewXZ/=t.scaleZ,t.skewYZ/=t.scaleZ,v3Cross(h[1],h[2],b),0>v3Dot(h[0],b)){t.scaleX*=-1,t.scaleY*=-1,t.scaleZ*=-1;for(var m=0;3>m;m++)h[m][0]*=-1,h[m][1]*=-1,h[m][2]*=-1}var g=0,v=_asin(-h[0][2]),y=0;return 0===_cos3(v)?g=_atan2(-h[2][0],h[1][1]):(g=_atan2(h[1][2],h[2][2]),y=_atan2(h[0][1],h[0][0])),t.rotateX=_radToDeg(g),t.rotateY=_radToDeg(v),t.rotateZ=_radToDeg(y),t},determinant2x2=function(e,t,n,a){return e*a-t*n},determinant3x3=function(e,t,n,a,r,i,o,s,l){return e*determinant2x2(r,i,s,l)-a*determinant2x2(t,n,s,l)+o*determinant2x2(t,n,r,i)},determinant4x4=function(e){var t=e[0][0],n=e[0][1],a=e[0][2],r=e[0][3],i=e[1][0],o=e[1][1],s=e[1][2],l=e[1][3],d=e[2][0],u=e[2][1],c=e[2][2],p=e[2][3],h=e[3][0],b=e[3][1],x=e[3][2],m=e[3][3];return t*determinant3x3(o,u,b,s,c,x,l,p,m)-n*determinant3x3(i,d,h,s,c,x,l,p,m)+a*determinant3x3(i,d,h,o,u,b,l,p,m)-r*determinant3x3(i,d,h,o,u,b,s,c,x)},adjoint=function(e){var t=[[],[],[],[]],n=e[0][0],a=e[0][1],r=e[0][2],i=e[0][3],o=e[1][0],s=e[1][1],l=e[1][2],d=e[1][3],u=e[2][0],c=e[2][1],p=e[2][2],h=e[2][3],b=e[3][0],x=e[3][1],m=e[3][2],g=e[3][3];return t[0][0]=determinant3x3(s,c,x,l,p,m,d,h,g),t[1][0]=-determinant3x3(o,u,b,l,p,m,d,h,g),t[2][0]=determinant3x3(o,u,b,s,c,x,d,h,g),t[3][0]=-determinant3x3(o,u,b,s,c,x,l,p,m),t[0][1]=-determinant3x3(a,c,x,r,p,m,i,h,g),t[1][1]=determinant3x3(n,u,b,r,p,m,i,h,g),t[2][1]=-determinant3x3(n,u,b,a,c,x,i,h,g),t[3][1]=determinant3x3(n,u,b,a,c,x,r,p,m),t[0][2]=determinant3x3(a,s,x,r,l,m,i,d,g),t[1][2]=-determinant3x3(n,o,b,r,l,m,i,d,g),t[2][2]=determinant3x3(n,o,b,a,s,x,i,d,g),t[3][2]=-determinant3x3(n,o,b,a,s,x,r,l,m),t[0][3]=-determinant3x3(a,s,c,r,l,p,i,d,h),t[1][3]=determinant3x3(n,o,u,r,l,p,i,d,h),t[2][3]=-determinant3x3(n,o,u,a,s,c,i,d,h),void(t[3][3]=determinant3x3(n,o,u,a,s,c,r,l,p))},inverse=function(e){var t=adjoint(e),n=determinant4x4(e);if(_abs5(n)<SMALL_NUMBER)return!1;for(var a=0;4>a;a++)for(var r=0;4>r;r++)t[a][r]/=n;return t},transposeMatrix4=function(e){for(var t=[[],[],[],[]],n=0;4>n;n++)for(var a=0;4>a;a++)t[n][a]=e[a][n];return t},v4MulPointByMatrix=function(e,t){var n=[];return n[0]=e[0]*t[0][0]+e[1]*t[1][0]+e[2]*t[2][0]+e[3]*t[3][0],n[1]=e[0]*t[0][1]+e[1]*t[1][1]+e[2]*t[2][1]+e[3]*t[3][1],n[2]=e[0]*t[0][2]+e[1]*t[1][2]+e[2]*t[2][2]+e[3]*t[3][2],n[3]=e[0]*t[0][3]+e[1]*t[1][3]+e[2]*t[2][3]+e[3]*t[3][3],n},v3Length=function(e){return _sqrt5(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},v3Scale=function(e,t){var n=v3Length(e);if(0!=n){var a=t/n;e[0]*=a,e[1]*=a,e[2]*=a}},v3Dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},v3Combine=function(e,t,n,a,r){n[0]=a*e[0]+r*t[0],n[1]=a*e[1]+r*t[1],n[2]=a*e[2]+r*t[2]},v3Cross=function(e,t,n){n[0]=e[1]*t[2]-e[2]*t[1],n[1]=e[2]*t[0]-e[0]*t[2],n[2]=e[0]*t[1]-e[1]*t[0]};BoxySVG.utils.transformDecomposition={decomposeTransform:decomposeTransform}}}{{var _getUserBBox4=BoxySVG.utils.bbox.getUserBBox,_getOutermostSVGElement5=BoxySVG.utils.element.getOutermostSVGElement,_BoxySVG$utils$math3=BoxySVG.utils.math,_round11=_BoxySVG$utils$math3.round,_signum=_BoxySVG$utils$math3.signum,_roundMatrix3=BoxySVG.utils.matrix.roundMatrix,_getPaintServer=BoxySVG.utils.paint.getPaintServer,_BoxySVG$utils$pathSh=BoxySVG.utils.pathShapes,_getShapeData=_BoxySVG$utils$pathSh.getShapeData,_setShapeData=_BoxySVG$utils$pathSh.setShapeData,_BoxySVG$utils$patter2=BoxySVG.utils.pattern,_createDerivedPattern=_BoxySVG$utils$patter2.createDerivedPattern,_getParentPattern=_BoxySVG$utils$patter2.getParentPattern,_getPatternUsers=_BoxySVG$utils$patter2.getPatternUsers,_decomposeTransform=BoxySVG.utils.transformDecomposition.decomposeTransform,_paintableElementNames=BoxySVG.utils.variables.paintableElementNames,_BoxySVG$utils$transf2=BoxySVG.utils.transformGeneral,_getComputedTransform3=_BoxySVG$utils$transf2.getComputedTransform,_getTransformFromPoints3=_BoxySVG$utils$transf2.getTransformFromPoints,_getTransformOriginClientPoint=_BoxySVG$utils$transf2.getTransformOriginClientPoint,_getElementRotationAngle=_BoxySVG$utils$transf2.getElementRotationAngle,_setElementRotationAngle=_BoxySVG$utils$transf2.setElementRotationAngle,_transformPathData=_BoxySVG$utils$transf2.transformPathData,_userPointToBBoxPoint=_BoxySVG$utils$transf2.userPointToBBoxPoint,_abs6=Math.abs,_min3=Math.min,_max4=Math.max,_parseFloat4=Number.parseFloat,_SVGUnitTypes4=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3=_SVGUnitTypes4.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_SVG_UNIT_TYPE_USERSPACEONUSE=_SVGUnitTypes4.SVG_UNIT_TYPE_USERSPACEONUSE,$initialScaleX=Symbol(),$initialScaleY=Symbol(),$initialStartClientPoint=Symbol(),$initialEndClientPoint=Symbol(),$initialNormalClientPoint=Symbol(),$initialCenterClientPoint=Symbol(),$initialR1ClientPoint=Symbol(),$initialR2ClientPoint=Symbol(),$initialP1ClientPoint=Symbol(),$initialP2ClientPoint=Symbol(),$initialP3ClientPoint=Symbol(),reduceTransform=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(!1!==e.hasAttribute("transform")){void 0===t.geometryPrecision&&(t.geometryPrecision=3),void 0===t.transformPrecision&&(t.transformPrecision=3),void 0===t.preserveStrokeWidth&&(t.preserveStrokeWidth=!0),void 0===t.preserveRectRadii&&(t.preserveRectRadii=!0),void 0===t.preserveRotation&&(t.preserveRotation=!0),void 0===t.transformDirection&&(t.transformDirection="bottom-right");var n=e.localName;if("g"===n)reduceGroupTransform(e,t);else if("rect"===n)reduceRectTransform(e,t);else if("circle"===n)reduceCircleTransform(e,t);else if("ellipse"===n)reduceEllipseTransform(e,t);else if("text"===n)reduceTextTransform(e,t);else if("image"===n)reduceImageTransform(e,t);else if("line"===n)reduceLineTransform(e,t);else if("polyline"===n)reducePolyTransform(e,t);else if("polygon"===n)reducePolyTransform(e,t);else if("use"===n)reduceUseTransform(e,t);else if("path"===n)if(e.hasAttribute("data-bx-shape")){var a=_getShapeData(e),r=a.type;"rect"===r?reduceRectShapePathTransform(e,t):"ring"===r?reduceRingShapePathTransform(e,t):"pie"===r?reducePieShapePathTransform(e,t):"triangle"===r?reduceTriangleShapePathTransform(e,t):"n-gon"===r?reduceNGonShapePathTransform(e,t):"star"===r?reduceStarShapePathTransform(e,t):"cog"===r?reduceCogShapePathTransform(e,t):reducePathTransform(e,t)}else reducePathTransform(e,t)}},reduceGroupTransform=function(e,t){var n=t.transformPrecision,a=_roundMatrix3(_getComputedTransform3(e),n);a.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",a.toString())},reduceRectTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRectRadii;if(n.is2D){var o=_decomposeTransform(n),s=o.scaleX,l=o.scaleY,d=e.x.baseVal.value,u=e.y.baseVal.value,c=e.width.baseVal.value,p=e.height.baseVal.value,h=e.rx.baseVal.value,b=e.ry.baseVal.value,x=new SVGPoint(d,u).matrixTransform(n),m=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);d*=s,u*=l,c*=_abs6(s),p*=_abs6(l),!1===i&&(h*=_abs6(s),b*=_abs6(l));var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,x,m,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0),storeRelatedGeometry(e);for(var w=[["x",d],["y",u],["width",c],["height",p],["rx",h],["ry",b]],k=0;k<w.length;k++){var A=_slicedToArray(w[k],2),C=A[0],S=A[1];S=_round11(S,a),0===S?e.removeAttribute(C):e.setAttribute(C,S)}_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r).toString())},reduceCircleTransform=function(e,t){var n=_getComputedTransform3(e),a=_decomposeTransform(n),i=a.scaleX,o=a.scaleY,s=t.geometryPrecision,l=t.transformPrecision,d=BoxySVG.classes.Vector;if(n.is2D&&i===o){var u=i,c=e.cx.baseVal.value,p=e.cy.baseVal.value,h=e.r.baseVal.value,r=new SVGPoint(c,p).matrixTransform(n),b=new SVGPoint(c+h,p).matrixTransform(n),x=new SVGPoint(c,p-h).matrixTransform(n);c*=u,p*=u,h*=u;var m=new SVGPoint(c,p),g=new SVGPoint(c+h,p),v=new SVGPoint(c,p-h),y=_getTransformFromPoints3(m,g,v,r,b,x);y=_roundMatrix3(y,l),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(m=m.matrixTransform(y),g=g.matrixTransform(y),v=v.matrixTransform(y),y.e=0,y.f=0),c=_round11(m.x,s),p=_round11(m.y,s),h=_round11(new d(m,g).length,s),storeRelatedGeometry(e),y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString());for(var f=[["cx",c],["cy",p],["r",h]],_=0;_<f.length;_++){var w=_slicedToArray(f[_],2),k=w[0],A=w[1];0===A?e.removeAttribute(k):e.setAttribute(k,A)}restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,l).toString())},reduceEllipseTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=BoxySVG.classes.Vector;if(n.is2D){var o=_decomposeTransform(n),s=o.scaleX,l=o.scaleY,d=e.cx.baseVal.value,u=e.cy.baseVal.value,c=e.rx.baseVal.value,p=e.ry.baseVal.value,h=new SVGPoint(d,u).matrixTransform(n),b=new SVGPoint(d+c,u).matrixTransform(n),x=new SVGPoint(d,u-p).matrixTransform(n);d*=s,u*=l,c*=s,p*=l;var m=new SVGPoint(d,u),g=new SVGPoint(d+c,u),v=new SVGPoint(d,u-p),y=_getTransformFromPoints3(m,g,v,h,b,x);y=_roundMatrix3(y,r),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(m=m.matrixTransform(y),g=g.matrixTransform(y),v=v.matrixTransform(y),y.e=0,y.f=0),d=_round11(m.x,a),u=_round11(m.y,a),c=_round11(new i(m,g).length,a),p=_round11(new i(m,v).length,a),storeRelatedGeometry(e),y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString());for(var f=[["cx",d],["cy",u],["rx",c],["ry",p]],_=0;_<f.length;_++){var w=_slicedToArray(f[_],2),k=w[0],A=w[1];0===A?e.removeAttribute(k):e.setAttribute(k,A)}restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceLineTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(i){var o=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=new SVGPoint(e.x1.baseVal.value,e.y1.baseVal.value),d=new SVGPoint(e.x2.baseVal.value,e.y2.baseVal.value),u=l.matrixTransform(s),c=d.matrixTransform(s);e.setAttribute("x1",_round11(u.x,a)),e.setAttribute("y1",_round11(u.y,a)),e.setAttribute("x2",_round11(c.x,a)),e.setAttribute("y2",_round11(c.y,a)),e.removeAttribute("transform"),_setElementRotationAngle(e,o,r),restoreRelatedGeometry(e,t)}else{var p=_getTransformOriginClientPoint(e),h=_getComputedTransform3(e),b=new SVGPoint(e.x1.baseVal.value,e.y1.baseVal.value),x=new SVGPoint(e.x2.baseVal.value,e.y2.baseVal.value),m=b.matrixTransform(h),g=x.matrixTransform(h);if(storeRelatedGeometry(e),e.setAttribute("x1",_round11(m.x,a)),e.setAttribute("y1",_round11(m.y,a)),e.setAttribute("x2",_round11(g.x,a)),e.setAttribute("y2",_round11(g.y,a)),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var v=_getUserBBox4(e),y=e.getScreenCTM().inverse(),f=p.matrixTransform(y),_=_userPointToBBoxPoint(f,v),w=_round11(_.x,a),k=_round11(_.y,a);e.setAttribute("data-bx-origin",w+" "+k)}restoreRelatedGeometry(e,t)}},reducePolyTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(i){var o=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=[],d=!0,u=!1,c;try{for(var p=e.points[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=h.value,m=b.matrixTransform(s),g=m.x,x=m.y;l.push(_round11(g,a),_round11(x,a))}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.setAttribute("points",l.join(" ")),e.removeAttribute("transform"),_setElementRotationAngle(e,o,r),restoreRelatedGeometry(e,t)}else{var v=_getTransformOriginClientPoint(e),y=[],f=!0,_=!1,w;try{for(var k=e.points[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.matrixTransform(n),g=S.x,x=S.y;y.push(_round11(g,a),_round11(x,a))}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}if(storeRelatedGeometry(e),e.setAttribute("points",y.join(" ")),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var E=_getUserBBox4(e),T=e.getScreenCTM().inverse(),P=v.matrixTransform(T),L=_userPointToBBoxPoint(P,E),D=_round11(L.x,a),M=_round11(L.y,a);e.setAttribute("data-bx-origin",D+" "+M)}restoreRelatedGeometry(e,t)}},reduceUseTransform=function(e,t){var n=t.transformPrecision;if(e.hasAttribute("transform")){var a=_getComputedTransform3(e);a=_roundMatrix3(a,n),a.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",a.toString())}},reducePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(i){var o=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=e.getPathData(),d=_transformPathData(l,s,a);e.setPathData(d),e.removeAttribute("transform"),_setElementRotationAngle(e,o,r),restoreRelatedGeometry(e,t)}else{var u=_getTransformOriginClientPoint(e),c=e.getPathData(),p=_transformPathData(c,n,a);if(storeRelatedGeometry(e),e.setPathData(p),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var h=_getUserBBox4(e),b=e.getScreenCTM().inverse(),x=u.matrixTransform(b),m=_userPointToBBoxPoint(x,h),g=_round11(m.x,a),v=_round11(m.y,a);e.setAttribute("data-bx-origin",g+" "+v)}restoreRelatedGeometry(e,t)}},reduceTriangleShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=new SVGPoint(d,u).matrixTransform(n),m=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);d*=o,u*=s,c*=_abs6(o),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,x,m,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,h,b].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"triangle",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceRectShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRectRadii;if(n.is2D){var o=_decomposeTransform(n),s=o.scaleX,l=o.scaleY,d=_slicedToArray(_getShapeData(e).values,12),u=d[0],c=d[1],p=d[2],h=d[3],b=d[4],x=d[5],m=d[6],g=d[7],v=d[8],y=d[9],f=d[10],_=d[11],w=new SVGPoint(u,c).matrixTransform(n),k=new SVGPoint(u+p,c).matrixTransform(n),A=new SVGPoint(u,c+h).matrixTransform(n);v===void 0&&(v=b),y===void 0&&(y=x),f===void 0&&(f=m),_===void 0&&(_=g),u*=s,c*=l,p*=_abs6(s),h*=_abs6(l),!1===i&&(b*=_abs6(s),x*=_abs6(s),m*=_abs6(s),g*=_abs6(s),v*=_abs6(l),y*=_abs6(l),f*=_abs6(l),_*=_abs6(l));var C=new SVGPoint(u,c),S=new SVGPoint(u+p,c),E=new SVGPoint(u,c+h),T=_getTransformFromPoints3(C,S,E,w,k,A);T=_roundMatrix3(T,r),1===_abs6(T.a)&&0===T.b&&0===T.c&&1===_abs6(T.d)&&(0!==T.e||0!==T.f)&&(u=1===T.a?u+T.e:u-T.e,c=1===T.d?c+T.f:c-T.f,T.e=0,T.f=0);var P;P=b===v&&x===y&&m===f&&g===_?[u,c,p,h,b,x,m,g]:[u,c,p,h,b,x,m,g,v,y,f,_],P=P.map(function(e){return _round11(e,a)}),storeRelatedGeometry(e),_setShapeData(e,{type:"rect",values:P},a),T.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",T.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceNGonShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=new SVGPoint(d,u).matrixTransform(n),m=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);c*=_abs6(o),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,x,m,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,h,b];w=w.map(function(e){return _round11(e,a)}),storeRelatedGeometry(e),_setShapeData(e,{type:"n-gon",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceStarShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=new SVGPoint(d,u).matrixTransform(n),m=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);c*=_abs6(o),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,x,m,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,h,b].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"star",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceRingShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_slicedToArray(_getShapeData(e).values,6),o=i[0],s=i[1],l=i[2],d=i[3],u=i[4],c=i[5],p=_decomposeTransform(n),h=p.scaleX,b=p.scaleY,x=new SVGPoint(o,s).matrixTransform(n),m=new SVGPoint(o+u,s).matrixTransform(n),g=new SVGPoint(o,s+c).matrixTransform(n);l*=_abs6(h),d*=_abs6(b),u*=_abs6(h),c*=_abs6(b);var v=new SVGPoint(o,s),y=new SVGPoint(o+u,s),f=new SVGPoint(o,s+c),_=_getTransformFromPoints3(v,y,f,x,m,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(o=1===_.a?o+_.e:o-_.e,s=1===_.d?s+_.f:s-_.f,_.e=0,_.f=0);var w=[o,s,l,d,u,c].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"ring",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reducePieShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceCogShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceImageTransform=function(e,t){var n=t.geometryPrecision,a=t.transformPrecision,r=t.preserveRectRadii,i=_getComputedTransform3(e),o=_decomposeTransform(i),s=o.scaleX,l=o.scaleY;if(i.is2D&&(s===l||"none"===e.getAttribute("preserveAspectRatio"))){var d=e.x.baseVal.value,u=e.y.baseVal.value,c=e.width.baseVal.value,p=e.height.baseVal.value,h=new SVGPoint(d,u).matrixTransform(i),b=new SVGPoint(d+c,u).matrixTransform(i),x=new SVGPoint(d,u+p).matrixTransform(i);d*=s,u*=l,c*=_abs6(s),p*=_abs6(l);var m=new SVGPoint(d,u),g=new SVGPoint(d+c,u),v=new SVGPoint(d,u+p),y=_getTransformFromPoints3(m,g,v,h,b,x);y=_roundMatrix3(y,a),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(0!==y.e||0!==y.f)&&(d=1===y.a?d+y.e:d-y.e,u=1===y.d?u+y.f:u-y.f,y.e=0,y.f=0),storeRelatedGeometry(e);for(var f=[["x",d],["y",u],["width",c],["height",p]],_=0;_<f.length;_++){var w=_slicedToArray(f[_],2),k=w[0],A=w[1];A=_round11(A,n),0===A?e.removeAttribute(k):e.setAttribute(k,A)}y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString()),restoreRelatedGeometry(e,t)}else i.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(i,a))},reduceTextTransform=function(e,t){var n=t.geometryPrecision,a=t.transformPrecision,r=[].concat(_toConsumableArray(e.children)).find(function(e){return"textPath"===e.localName}),i=null;if(r){var o=_getOutermostSVGElement5(r);i=o.querySelector(r.href.baseVal)}if(i){var s=_roundMatrix3(_getComputedTransform3(e),a);s.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",s.toString())}else{var l=_getComputedTransform3(e),d=_decomposeTransform(l),u=d.scaleX,c=d.scaleY;if(l.is2D&&u===c){var p=0===e.x.baseVal.length?0:e.x.baseVal.getItem(0).value,h=0===e.y.baseVal.length?0:e.y.baseVal.getItem(0).value,b=e.getBBox().width,x=e.getBBox().height,m=new SVGPoint(p,h).matrixTransform(l),g=new SVGPoint(p+b,h).matrixTransform(l),v=new SVGPoint(p,h+x).matrixTransform(l);p*=u,h*=c,b*=_abs6(u),x*=_abs6(c);var y=new SVGPoint(p,h),f=new SVGPoint(p+b,h),_=new SVGPoint(p,h+x),w=_getTransformFromPoints3(y,f,_,m,g,v);w=_roundMatrix3(w,a),1===_abs6(w.a)&&0===w.b&&0===w.c&&1===_abs6(w.d)&&(0!==w.e||0!==w.f)&&(p=1===w.a?p+w.e:p-w.e,h=1===w.d?h+w.f:h-w.f,w.e=0,w.f=0),storeRelatedGeometry(e);var k=!0,A=!1,C;try{for(var S=e.querySelectorAll("tspan")[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,storeRelatedGeometry(T)}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}e.setAttribute("x",_round11(p,n)),e.setAttribute("y",_round11(h,n)),w.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",w.toString()),restoreRelatedGeometry(e,t);var P=e.querySelectorAll("tspan");if(0===P.length){var L=getComputedStyle(e).getPropertyValue("font-size");L=_parseFloat4(L),L=_round11(L*c,1),e.style.setProperty("font-size",L)}else{var D=!0,M=!1,N;try{for(var I=e.querySelectorAll("tspan")[Symbol.iterator](),R;!(D=(R=I.next()).done);D=!0){var V=R.value,z=getComputedStyle(V).getPropertyValue("font-size");z=_parseFloat4(z),z=_round11(z*c,1),V.style.setProperty("font-size",z);var G=getComputedStyle(V).getPropertyValue("word-spacing");G=_parseFloat4(G),G=_round11(G*c,2),V.style.setProperty("word-spacing",G);var B=getComputedStyle(V).getPropertyValue("letter-spacing");B=_parseFloat4(B),B=_round11(B*c,2),V.style.setProperty("letter-spacing",B),restoreRelatedGeometry(V,t)}}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}}}else l.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(l,a))}},storeRelatedGeometry=function(e){var t=e.getScreenCTM(),n=BoxySVG.classes.Vector;if(_paintableElementNames.includes(e.localName)){var a=[_getPaintServer(e,"fill"),_getPaintServer(e,"stroke")],r=a.filter(function(e){return e&&e.localName.endsWith("Gradient")}),i=a.filter(function(e){return e&&"pattern"===e.localName}),o=_decomposeTransform(_getComputedTransform3(e)),s=o.scaleX,l=o.scaleY;e[$initialScaleX]=s,e[$initialScaleY]=l;var d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=h.value,x=_getComputedTransform3(b);if(b.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE)if("linearGradient"===b.localName){var m=new SVGPoint(b.x1.baseVal.value,b.y1.baseVal.value),g=new SVGPoint(b.x2.baseVal.value,b.y2.baseVal.value),v=new n(m,g).getNormalVector(),y=v.transformPoint(m),f=m.matrixTransform(x),_=g.matrixTransform(x),w=y.matrixTransform(x);b[$initialStartClientPoint]=f.matrixTransform(t),b[$initialEndClientPoint]=_.matrixTransform(t),b[$initialNormalClientPoint]=w.matrixTransform(t)}else if("radialGradient"===b.localName){var k=new SVGPoint(b.cx.baseVal.value,b.cy.baseVal.value),A=new SVGPoint(b.cx.baseVal.value+b.r.baseVal.value,b.cy.baseVal.value),C=new SVGPoint(b.cx.baseVal.value,b.cy.baseVal.value-b.r.baseVal.value),S=k.matrixTransform(x),E=A.matrixTransform(x),T=C.matrixTransform(x);b[$initialCenterClientPoint]=S.matrixTransform(t),b[$initialR1ClientPoint]=E.matrixTransform(t),b[$initialR2ClientPoint]=T.matrixTransform(t)}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var P=!0,L=!1,D;try{for(var M=i[Symbol.iterator](),N;!(P=(N=M.next()).done);P=!0){var I=N.value,R=I.hasAttribute("href")?_getParentPattern(I):I,V=_getComputedTransform3(I);if(R.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var z=new SVGPoint(R.x.baseVal.value,R.y.baseVal.value),G=new SVGPoint(R.x.baseVal.value+R.width.baseVal.value,R.y.baseVal.value),B=new SVGPoint(R.x.baseVal.value+R.width.baseVal.value,R.y.baseVal.value+R.height.baseVal.value),O=z.matrixTransform(V),q=G.matrixTransform(V),j=B.matrixTransform(V);I[$initialP1ClientPoint]=O.matrixTransform(t),I[$initialP2ClientPoint]=q.matrixTransform(t),I[$initialP3ClientPoint]=j.matrixTransform(t)}else if(R.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3){var U=e.getScreenCTM(),H=_getUserBBox4(e),$=new SVGPoint(R.x.baseVal.valueInSpecifiedUnits,R.y.baseVal.valueInSpecifiedUnits),F=new SVGPoint(R.x.baseVal.valueInSpecifiedUnits+R.width.baseVal.valueInSpecifiedUnits,R.y.baseVal.valueInSpecifiedUnits),Y=new SVGPoint(R.x.baseVal.valueInSpecifiedUnits+R.width.baseVal.valueInSpecifiedUnits,R.y.baseVal.valueInSpecifiedUnits+R.height.baseVal.valueInSpecifiedUnits),X=new SVGPoint(H.x+$.x*H.width,H.y+$.y*H.height),W=new SVGPoint(H.x+F.x*H.width,H.y+F.y*H.height),K=new SVGPoint(H.x+Y.x*H.width,H.y+Y.y*H.height),Z=X.matrixTransform(V),Q=W.matrixTransform(V),J=K.matrixTransform(V),ee=Z.matrixTransform(U),te=Q.matrixTransform(U),ne=J.matrixTransform(U);I[$initialP1ClientPoint]=ee,I[$initialP2ClientPoint]=te,I[$initialP3ClientPoint]=ne}}}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}}},restoreRelatedGeometry=function(e,t){var n=e.getScreenCTM().inverse(),a=t.geometryPrecision,r=t.preserveStrokeWidth,i=t.transformPrecision,o=t.transformDirection,s=BoxySVG.classes.Vector;if(_paintableElementNames.includes(e.localName)){var l=[_getPaintServer(e,"fill"),_getPaintServer(e,"stroke")],d=l.filter(function(e){return e&&e.localName.endsWith("Gradient")}),u=l.filter(function(e){return e&&"pattern"===e.localName});if(!1===r){var c=e[$initialScaleX],p=e[$initialScaleY],h=getComputedStyle(e).getPropertyValue("stroke-width");h=_parseFloat4(h),h*="left"===o||"right"===o?_abs6(c):"top"===o||"bottom"===o?_abs6(p):(_abs6(c)+_abs6(p))/2,h=_round11(h,a),e.style.setProperty("stroke-width",h)}var b=!0,x=!1,m;try{for(var g=d[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)if(y=v.value,y.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var f=void 0;if("linearGradient"===y.localName){var _=new SVGPoint(y.x1.baseVal.value,y.y1.baseVal.value),w=new SVGPoint(y.x2.baseVal.value,y.y2.baseVal.value),k=new s(_,w).getNormalVector().transformPoint(_);f=_getTransformFromPoints3(_,w,k,y[$initialStartClientPoint].matrixTransform(n),y[$initialEndClientPoint].matrixTransform(n),y[$initialNormalClientPoint].matrixTransform(n))}else if("radialGradient"===y.localName){var A=new SVGPoint(y.cx.baseVal.value,y.cy.baseVal.value),C=new SVGPoint(y.cx.baseVal.value+y.r.baseVal.value,y.cy.baseVal.value),S=new SVGPoint(y.cx.baseVal.value,y.cy.baseVal.value-y.r.baseVal.value);f=_getTransformFromPoints3(A,C,S,y[$initialCenterClientPoint].matrixTransform(n),y[$initialR1ClientPoint].matrixTransform(n),y[$initialR2ClientPoint].matrixTransform(n))}f=_roundMatrix3(f,i),y.setAttribute("gradientTransform",f.toString())}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}var E=!0,T=!1,P;try{for(var L=u[Symbol.iterator](),D;!(E=(D=L.next()).done);E=!0){var M=D.value,N=M.hasAttribute("href")?_getParentPattern(M):M,I=_getComputedTransform3(M),R=_getPatternUsers(M),V=M[$initialP1ClientPoint],z=M[$initialP2ClientPoint],G=M[$initialP3ClientPoint];if(1<R.length){var B=_createDerivedPattern(M);M.after(B);for(var O=["fill","stroke"],q=0,j;q<O.length;q++)j=O[q],e.style.getPropertyValue(j)==="url(\"#"+M.id+"\")"&&e.style.setProperty(j,"url(\"#"+B.id+"\")");M=B}if(N.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var U=new SVGPoint(N.x.baseVal.value,N.y.baseVal.value),H=new SVGPoint(N.x.baseVal.value+N.width.baseVal.value,N.y.baseVal.value),$=new SVGPoint(N.x.baseVal.value+N.width.baseVal.value,N.y.baseVal.value+N.height.baseVal.value),F=_getTransformFromPoints3(U,H,$,V.matrixTransform(n),z.matrixTransform(n),G.matrixTransform(n));I=_roundMatrix3(F,i),M.setAttribute("patternTransform",I.toString())}else if(N.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3){var Y=_getUserBBox4(e),X=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits),W=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits+N.width.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits),K=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits+N.width.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits+N.height.baseVal.valueInSpecifiedUnits),Z=new SVGPoint(Y.x+X.x*Y.width,Y.y+X.y*Y.height),Q=new SVGPoint(Y.x+W.x*Y.width,Y.y+W.y*Y.height),J=new SVGPoint(Y.x+K.x*Y.width,Y.y+K.y*Y.height),ee=V.matrixTransform(n),te=z.matrixTransform(n),ne=G.matrixTransform(n),ae=ee.matrixTransform(I.inverse()),re=te.matrixTransform(I.inverse()),ie=ne.matrixTransform(I.inverse()),oe=_getTransformFromPoints3(Z,Q,J,ae,re,ie);I=I.multiply(oe),I=_roundMatrix3(I,i),M.setAttribute("patternTransform",I.toString())}}}catch(e){T=!0,P=e}finally{try{!E&&L.return&&L.return()}finally{if(T)throw P}}}};BoxySVG.utils.transformReduction={reduceTransform:reduceTransform}}}{{var _BoxySVG$utils$elemen4=BoxySVG.utils.element,_createElement9=_BoxySVG$utils$elemen4.createElement,_getOutermostSVGElement6=_BoxySVG$utils$elemen4.getOutermostSVGElement,_createUniqueID=_BoxySVG$utils$elemen4.createUniqueID,_svg2=_BoxySVG$utils$elemen4.svg,_getPaintServer2=BoxySVG.utils.paint.getPaintServer,_getGradientComputedStops2=BoxySVG.utils.gradient.getGradientComputedStops,_BoxySVG$utils$variab6=BoxySVG.utils.variables,_paintableElementNames2=_BoxySVG$utils$variab6.paintableElementNames,_graphicsElementNames2=_BoxySVG$utils$variab6.graphicsElementNames,isArray=Array.isArray,_entries=Object.entries,textElementNames=["text","textPath","tspan"],paintPropertyNames=["fill","fill-opacity","fill-rule","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","paint-order","vector-effect"],compositingPropertyNames=["opacity","mix-blend-mode","isolation"],textPropertyNames=["font-family","font-size","font-stretch","font-style","font-variant","font-weight","letter-spacing","word-spacing","text-decoration","text-transform"],getAllowedAppearancePropertyNames=function(e){var t=[];return _paintableElementNames2.includes(e.localName)&&t.push.apply(t,paintPropertyNames),_graphicsElementNames2.includes(e.localName)&&t.push.apply(t,compositingPropertyNames),textElementNames.includes(e.localName)&&t.push.apply(t,textPropertyNames),t},getAppearance=function(e){var t={},n=getComputedStyle(e),a=getAllowedAppearancePropertyNames(e);!1===e.isConnected&&console.warn("getAppearance() called with a disconnected element.");var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"fill"===d||"stroke"===d){var u=_getPaintServer2(e,d);if(u){var c=u.localName;if("linearGradient"===c||"radialGradient"===c){var p="",h=!0,b=!1,x=void 0;try{for(var m=_getGradientComputedStops2(u)[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var v=g.value,y=v.offset.baseVal,f=getComputedStyle(v).stopColor,_=getComputedStyle(v).stopOpacity,w="stop-color: "+f+";";"1"!==_&&(w+=" stop-opacity: "+_),p+="<stop offset=\""+y+"\" style=\""+w+"\"></stop>"}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}"linearGradient"===c?t[d]="<linearGradient x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">"+p+"</linearGradient>":"radialGradient"===c&&(t[d]="<radialGradient r=\"0.8\">"+p+"</radialGradient>")}else"pattern"===c&&(t[d]="black")}else t[d]=n[d]}else t[d]=n[d]}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t},setAppearance=function(e,t){var n=getComputedStyle(e),a=getAllowedAppearancePropertyNames(e);!1===e.isConnected&&console.warn("setAppearance() called with a disconnected element.");var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=t[d];if(u===void 0)e.style[d]=null,e.removeAttribute(d);else if("fill"!==d&&"stroke"!==d)n[d]!==u&&(e.style[d]=u);else if(u.startsWith("<linearGradient")||u.startsWith("<radialGradient")){var c=_getOutermostSVGElement6(e),p=c.querySelector("defs"),h=_svg2(_templateObject2,u);h.id=_createUniqueID(c,"gradient-"),(p||c).append(h),e.style[d]="url(#"+h.id+")"}else n[d]!==u&&(e.style[d]=u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}};BoxySVG.utils.appearance={getAppearance:getAppearance,setAppearance:setAppearance}}}{var _BoxySVG$utils$variab7=BoxySVG.utils.variables,_attributeSchemas=_BoxySVG$utils$variab7.attributeSchemas,_propertySchemas3=_BoxySVG$utils$variab7.propertySchemas,_eventAttributeNames=_BoxySVG$utils$variab7.eventAttributeNames,_svgElementNames=_BoxySVG$utils$variab7.svgElementNames,_presentationAttributeNames2=_propertySchemas3.map(function(e){return e.presentationAttributeName}).filter(function(e){return e}),getValidAttributeNames=function e(t){var n=e.__index;if(!n){n={};var a=!0,r=!1,i;try{for(var o=_svgElementNames[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d,u;n[l]=[],(d=n[l]).push.apply(d,_toConsumableArray(_presentationAttributeNames2)),(u=n[l]).push.apply(u,_toConsumableArray(_eventAttributeNames))}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var c=!0,p=!1,h;try{for(var b=_attributeSchemas[Symbol.iterator](),x;!(c=(x=b.next()).done);c=!0){var m=x.value,g=!0,v=!1,y=void 0;try{for(var f=m.appliesTo[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,n[w].push(m.name)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}e.__index=n}return n[t.localName]||[]},splitAttributeText=function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],r=n[1];if(void 0===a)return["",""];if(a=a.trim(),void 0===r)r="";else{if(r=r.trim(),2>r.length)return["",""];if("\""!==r[0]&&"'"!==r[0])return["",""];if(r[0]!==r[r.length-1])return["",""];r=r.substr(1,r.length-2)}return[a,r]};BoxySVG.utils.attribute={getValidAttributeNames:getValidAttributeNames,splitAttributeText:splitAttributeText}}{{var EventEmitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addEventListener",value:function(e,t){this._events||(this._events={});var n=this._events[e];n||(this._events[e]=n=[]),n.push(t),300<n.length&&console.warn("Potential EventEmitter memory leak: "+n.length+" listeners "+("subscribed to event \""+e+"\""))}},{key:"removeEventListener",value:function(e,t){if(this._events&&this._events[e]){for(var n=[],a=0;a<this._events[e].length;a+=1)this._events[e][a]!==t&&n.push(this._events[e][a]);this._events[e]=n}}},{key:"dispatchEvent",value:function(e){if(this._events){var t=this._events[e.type];if(t){for(var n=null,a=t.length-1;0<=a;a-=1){var r=t[a],i=void 0;try{i=r.call(window,e)}catch(e){null==n&&(n=e)}if(!1===i)break}if(n)throw n}}}}]),e}();BoxySVG.classes.EventEmitter=EventEmitter}}{{var _EventEmitter=BoxySVG.classes.EventEmitter,_isBoolean=BoxySVG.utils.type.isBoolean,OBSERVER_OPTIONS={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0},DOMUndoManager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._rootElement=e,n._groups=[],n._position=0,n._disabled=!1,n._observer=new MutationObserver(function(e){var t=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(t=(o=i.next()).done);t=!0)s=o.value,n._onDOMTransaction(s)}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}),n._onDisabledChange(),n}return _inherits(t,e),_createClass(t,[{key:"clear",value:function(){this._groups=[],0!==this._position&&(this._position=0,this.dispatchEvent(new CustomEvent("positionchange",{detail:"reset"})))}},{key:"checkpoint",value:function(e){this._observer.takeRecords(),this._position<this._groups.length&&(this._groups=this._groups.slice(0,this._position));this._groups.push({label:e,transactions:[]}),this._position+=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"increment"}))}},{key:"undo",value:function(){if(this.canUndo()){this._discardCurrentGroupIfEmpty(),this.disabled=!0,this._position-=1;var e=this._groups[this._position].transactions;e=[].concat(_toConsumableArray(e)).reverse();var t=new Set,n=new Set,a=new Set,r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"childList"===d.type){var u=document.createDocumentFragment(),c=!0,p=!1,h=void 0;try{for(var b=d.addedNodes[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,d.target.removeChild(m),n.add(m),t.delete(m)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}var g=!0,v=!1,y=void 0;try{for(var f=d.removedNodes[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,u.append(w),t.add(w),n.delete(w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}d.nextSibling?d.target.insertBefore(u,d.nextSibling):d.previousSibling?d.target.insertBefore(u,d.previousSibling.nextSibling):d.target.append(u)}else"attributes"===d.type?(null===d.oldValue?"gradientUnits"===d.attributeName?d.target.setAttribute("gradientUnits","objectBoundingBox"):"patternUnits"===d.attributeName?d.target.setAttribute("patternUnits","objectBoundingBox"):"patternContentUnits"===d.attributeName?d.target.setAttribute("patternContentUnits","userSpaceOnUse"):d.target.removeAttribute(d.attributeName):d.target.setAttribute(d.attributeName,d.oldValue),a.add(d.target)):"characterData"===d.type&&(d.target.data=d.oldValue,a.add(d.target))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.disabled=!1,this.dispatchEvent(new CustomEvent("undo",{detail:{addedNodes:t,removedNodes:n,modifiedNodes:a}})),this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"}))}else console.info("Can't undo")}},{key:"redo",value:function(){if(this.canRedo()){this.disabled=!0;var e=this._groups[this._position].transactions;this._position+=1;var t=new Set,n=new Set,a=new Set,r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"childList"===d.type){var u=document.createDocumentFragment(),c=!0,p=!1,h=void 0;try{for(var b=d.removedNodes[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,d.target.removeChild(m),n.add(m),t.delete(m)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}var g=!0,v=!1,y=void 0;try{for(var f=d.addedNodes[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,u.append(w),t.add(w),n.delete(w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}d.nextSibling?d.target.insertBefore(u,d.nextSibling):d.previousSibling?d.target.insertBefore(u,d.previousSibling.nextSibling):d.target.append(u)}else"attributes"===d.type?(null===d.newValue?d.target.removeAttribute(d.attributeName):d.target.setAttribute(d.attributeName,d.newValue),a.add(d.target)):"characterData"===d.type&&(d.target.data=d.newValue,a.add(d.target))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.disabled=!1,this.dispatchEvent(new CustomEvent("redo",{detail:{addedNodes:t,removedNodes:n,modifiedNodes:a}})),this.dispatchEvent(new CustomEvent("positionchange",{detail:"increment"}))}else console.info("Can't redo")}},{key:"canUndo",value:function(){return 0===this._position||this.disabled?!1:1===this._position&&this._isCurrentGroupEmpty()?!1:!0}},{key:"canRedo",value:function(){return this._position===this._groups.length||this.disabled?!1:!0}},{key:"_onDisabledChange",value:function(){!0===this.disabled?(this._observer.takeRecords(),this._observer.disconnect()):!1===this.disabled&&this._observer.observe(this._rootElement,OBSERVER_OPTIONS)}},{key:"_onDOMTransaction",value:function(e){if(0!==this._groups.length){var t=this._groups[this._groups.length-1].transactions;if("attributes"===e.type){var n=e.attributeName,a=t.find(function(t){return"attributes"===t.type&&t.attributeName===n&&t.target===e.target});a?a.newValue=a.target.getAttribute(n):(a={type:"attributes",target:e.target,attributeName:n,oldValue:e.oldValue,newValue:e.target.getAttribute(n)},t.push(a))}else if("characterData"===e.type){var r=t.find(function(t){return"characterData"===t.type&&t.target===e.target});if(r)r.newValue=r.target.data;else{var i={type:"characterData",target:e.target,oldValue:e.oldValue,newValue:e.target.data};t.push(i)}}else if("childList"===e.type){var o={type:"childList",target:e.target,addedNodes:[].concat(_toConsumableArray(e.addedNodes)),removedNodes:[].concat(_toConsumableArray(e.removedNodes)),nextSibling:e.nextSibling,previousSibling:e.previousSibling};t.push(o)}}}},{key:"_isCurrentGroupEmpty",value:function(){return 0===this._groups[this._position-1].transactions.length}},{key:"_discardCurrentGroupIfEmpty",value:function(){var e=this;0<this._position&&0===this._groups[this._position-1].transactions.length&&(this._groups=this._groups.filter(function(t){return t!==e._groups[e._position]}),this._position-=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"})))}},{key:"disabled",get:function(){return this._disabled},set:function(e){_isBoolean(e)&&e!==this._disabled&&(this._disabled=e,this._onDisabledChange())}},{key:"undoLabel",get:function(){var e="Undo";if(this.canUndo()){var t;t=0<this._groups[this._position-1].transactions.length?this._groups[this._position-1]:this._groups[this._position-2],e="Undo: "+t.label}return e}},{key:"redoLabel",get:function(){var e="Redo";if(this.canRedo()){var t=this._groups[this._position];e="Redo: "+t.label}return e}}]),t}(_EventEmitter);BoxySVG.classes.DOMUndoManager=DOMUndoManager}}{var _createElement10=BoxySVG.utils.element.createElement,_BoxySVG$utils$fontGe=BoxySVG.utils.fontGeneral,_normalizeFontWeight=_BoxySVG$utils$fontGe.normalizeFontWeight,_matchFont=_BoxySVG$utils$fontGe.matchFont,_fetchFontData=_BoxySVG$utils$fontGe.fetchFontData,_BoxySVG$utils$fontOp=BoxySVG.utils.fontOpentype,_getOpenTypeFont2=_BoxySVG$utils$fontOp.getOpenTypeFont,_getOpenTypeGlyphPath=_BoxySVG$utils$fontOp.getOpenTypeGlyphPath,_deserializePathData3=BoxySVG.utils.pathGeneral.deserializePathData,_BoxySVG$utils$parsin=BoxySVG.utils.parsing,_parseFontFaceSrc2=_BoxySVG$utils$parsin.parseFontFaceSrc,_parseFontFamily=_BoxySVG$utils$parsin.parseFontFamily,_reflectStyleElementCSSOM2=BoxySVG.utils.style.reflectStyleElementCSSOM,_replaceAll3=BoxySVG.utils.string.replaceAll,_getComputedTransform4=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$text2=BoxySVG.utils.text,_getRenderedChars=_BoxySVG$utils$text2.getRenderedChars,_getRenderedTextNodes2=_BoxySVG$utils$text2.getRenderedTextNodes,_spanifyText=_BoxySVG$utils$text2.spanifyText,_textSpecificPropertyNames=BoxySVG.utils.variables.textSpecificPropertyNames,_entries2=Object.entries,FontsManager=function(){function e(t){_classCallCheck(this,e),this._registry=null,this._svgElement=t}return _createClass(e,[{key:"getFamilies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(n=n.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(n=n.filter(function(e){return e.hasAttribute("data-bx-collect")}));var a=n.map(function(e){return e.getAttribute("data-bx-fonts")});return a}},{key:"getWeights",value:function(e){var t=new Set,n=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");if(n){var a=!0,r=!1,i;try{for(var o=n.sheet.rules[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.style.fontWeight?_normalizeFontWeight(l.style.fontWeight):"400";t.add(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}return[].concat(_toConsumableArray(t))}},{key:"reorderFamilies",value:function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=this._svgElement.querySelector("style[data-bx-fonts=\""+s+"\"]");t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var d=this._svgElement.querySelector("defs"),u=!0,c=!1,p;try{for(var h=t[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,d.append(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}},{key:"getFonts",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this.getFamilies()[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,e.push.apply(e,_toConsumableArray(this.getFamilyFonts(o)))}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"getMatchedFont",value:function(e,t,n){var a=this.getFonts(),r=_matchFont(a,e,t,n);return r}},{key:"addFont",value:function(e){var t=this.getFamilyFonts(e.family),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.weight===e.weight&&s.style===e.weight&&s.stretch===e.stretch&&s.unicodeRange===e.unicodeRange&&s.variant===e.variant&&s.featureSettings===e.featureSettings&&t.remove(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}t.push(e),this.setFamilyFonts(t)}},{key:"addFonts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n={},a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,void 0===n[l.family]&&(n[l.family]=[]),n[l.family].push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var d=!0,u=!1,c;try{for(var p=Object.entries(n)[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=_slicedToArray(h.value,2),x=b[0],m=b[1],g=this.getFamilyFonts(x),v=!0,y=!1,f=void 0;try{for(var _=m[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=!0,C=!1,S=void 0;try{for(var E=g[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,P.weight===k.weight&&P.style===k.weight&&P.stretch===k.stretch&&P.unicodeRange===k.unicodeRange&&P.variant===k.variant&&P.featureSettings===k.featureSettings&&g.remove(P)}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}g.push(k)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}this.setFamilyFonts(g,t)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}},{key:"removeFont",value:function(e){var t=this.getFamilyFonts(e.family),n=t.filter(function(t){return t.style!==e.style||t.weight!==e.weight||t.stretch!==e.stretch||t.unicodeRange!==e.unicodeRange});n.length!==t.length&&this.setFamilyFonts(n)}},{key:"getFamilyFonts",value:function(e){var t=[],n=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");if(n){var a=!0,r=!1,i;try{for(var o=n.sheet.rules[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.style.src,u={style:l.style.fontStyle||"normal",weight:l.style.fontWeight?_normalizeFontWeight(l.style.fontWeight):"400",stretch:l.style.fontStretch||"normal",unicodeRange:l.style.unicodeRange||"U+0-10FFFF",variant:l.style.fontVariant||"normal",featureSettings:l.style.fontFeatureSettings||"normal"},c=new FontFace(e,d,u);c.src=d,t.push(c)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}return t}},{key:"setFamilyFonts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=0<e.length?e[0].family:null;if(null!==n){if(e.find(function(e){return e.family!==n}))return void console.error("Passed fonts from different families to fontsManger.setFamilyFonts().");var a=this._svgElement.querySelector("style[data-bx-fonts=\""+n+"\"]");if(!a)a=_createElement10("svg:style"),a.setAttribute("data-bx-fonts",n),this._svgElement.querySelector("defs").append(a),t&&a.setAttribute("data-bx-collect","");else if(!0===a.hasAttribute("data-bx-collect")&&!1===t)a.removeAttribute("data-bx-collect");else if(!1===a.hasAttribute("data-bx-collect")&&!0===t)return;var r="",i=!0,o=!1,s;try{for(var l=e[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,r+=this._getFontCSSText(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}a.textContent=r}}},{key:"removeFamily",value:function(e){var t=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");t&&t.remove()}},{key:"removeUnusedFamilies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=new Set;{for(var a=document.createNodeIterator(this._svgElement,NodeFilter.SHOW_ELEMENT),r;r=a.nextNode();)if(""!==r.style.fontFamily){var i=_parseFontFamily(r.style.fontFamily)||[],o=!0,s=!1,l=void 0;try{for(var d=i[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,n.add(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}var p=!0,h=!1,b;try{for(var x=this._svgElement.querySelectorAll("style")[Symbol.iterator](),m;!(p=(m=x.next()).done);p=!0){var g=m.value,v=!0,y=!1,f=void 0;try{for(var _=g.sheet.rules[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)if(k=w.value,k.type===CSSStyleRule.STYLE_RULE&&""!==k.style.fontFamily){var A=_parseFontFamily(k.style.fontFamily)||[],C=!0,S=!1,E=void 0;try{for(var T=A[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,n.add(L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}}{var D=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(D=D.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(D=D.filter(function(e){return e.hasAttribute("data-bx-collect")}));var M=!0,N=!1,I;try{for(var R=D[Symbol.iterator](),V;!(M=(V=R.next()).done);M=!0){var z=V.value,G=z.getAttribute("data-bx-fonts");!1===n.has(G)&&z.remove()}}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}}}},{key:"renameFamily",value:function(e,t){var n=this,a=!0,r=!1,i;try{for(var o=this._svgElement.querySelectorAll("style[data-bx-fonts]")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.getAttribute("data-bx-fonts")===e){l.setAttribute("data-bx-fonts",t);var d=!0,u=!1,c=void 0;try{for(var p=l.sheet.rules[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,b.style.fontFamily="\""+t+"\"",_reflectStyleElementCSSOM2(l)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}(function(){for(var a=document.createNodeIterator(n._svgElement,NodeFilter.SHOW_ELEMENT),r=["serif","sans-serif","monospace","cursive","fantasy","system-ui","inherit","initial","unset"],i,o;i=a.nextNode();)if(o=_parseFontFamily(i.style.fontFamily)||[],o.includes(e)){var s=o.map(function(n){return r.includes(n)?n:n===e?"\""+t+"\"":"\""+n+"\""}).join(", ");i.style.fontFamily=s}})()}},{key:"embedLinkedFonts",value:async function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(n=n.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(n=n.filter(function(e){return e.hasAttribute("data-bx-collect")}));var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=!1,u=!0,c=!1,p=void 0;try{for(var h=l.sheet.rules[Symbol.iterator](),b;!(u=(b=h.next()).done);u=!0){var x=b.value,m=_parseFontFaceSrc2(x.style.src),g=m[0]||null;if(g&&"external"===g.type){var v=g.url,y=await _fetchFontData(v);x.style.src="url(\""+y+"\")",d=!0}}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}d&&_reflectStyleElementCSSOM2(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"replaceTextWithPaths",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:6;return new Promise(async function(r){_spanifyText(e);var i=_getComputedTransform4(e),o=document.createDocumentFragment(),s=e.querySelectorAll("tspan"),l=!0,u=!1,c;try{for(var p=s[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0){var b=h.value,x=_getRenderedChars(b),m=getComputedStyle(b),g=_parseFontFamily(m.getPropertyValue("font-family"))[0],v=parseFloat(m.getPropertyValue("font-size")),y=_normalizeFontWeight(m.getPropertyValue("font-weight")),f=m.getPropertyValue("font-style"),_=m.getPropertyValue("text-decoration"),w=await t._getGlyphs(x,g,v,y,f,_),k=[];if(w){for(var A=0,C;A<w.length;A+=1)if(C=w[A],0<C.length){var S=b.getStartPositionOfChar(A),E=b.getRotationOfChar(A),T=new SVGMatrix;T.translateSelf(S.x,S.y),T.rotateSelf(E);var P=_createElement10("svg:path");P.setPathData(C),P.setAttribute("transform",T.toString()),_reduceTransform(P,{geometryPrecision:n,transformPrecision:a,preserveRotation:!1}),k.push(P)}if(0<k.length){var L=k[0],D=k.slice(1),M=L.getAttribute("d"),d=!0,N=!1,I=void 0;try{for(var R=D[Symbol.iterator](),V,z;!(d=(V=R.next()).done);d=!0)z=V.value,M+=z.getAttribute("d")}catch(e){N=!0,I=e}finally{try{!d&&R.return&&R.return()}finally{if(N)throw I}}var G=_createElement10("svg:path");G.setAttribute("d",M),G.setAttribute("transform",i.toString());var B=!0,O=!1,q=void 0;try{for(var j=e.style[Symbol.iterator](),U,H;!(B=(U=j.next()).done);B=!0)H=U.value,!1===_textSpecificPropertyNames.includes(H)&&G.style.setProperty(H,e.style.getPropertyValue(H))}catch(e){O=!0,q=e}finally{try{!B&&j.return&&j.return()}finally{if(O)throw q}}var $=!0,F=!1,Y=void 0;try{for(var X=b.style[Symbol.iterator](),W,K;!($=(W=X.next()).done);$=!0)K=W.value,!1===_textSpecificPropertyNames.includes(K)&&G.style.setProperty(K,b.style.getPropertyValue(K))}catch(e){F=!0,Y=e}finally{try{!$&&X.return&&X.return()}finally{if(F)throw Y}}o.append(G)}}else{o=null;break}}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}if(o){var Z=[].concat(_toConsumableArray(o.children));e.replace(o),r(Z)}else r(null)})}},{key:"canReplaceTextWithPaths",value:function(e){var t=!0,n=this.getFamilies(),a=[],r=!0,i=!1,o;try{for(var s=_getRenderedTextNodes2(e)[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.includes(d.parentElement)||a.push(d.parentElement)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var h=a[Symbol.iterator](),b;!(u=(b=h.next()).done);u=!0){var x=b.value,m=getComputedStyle(x),g=_parseFontFamily(m.getPropertyValue("font-family"))[0];if(!1===n.includes(g)){t=!1;break}}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return t}},{key:"_getGlyphs",value:function(e,t,n,a,r,i){var o=this;return new Promise(async function(s){var l=o.getMatchedFont(t,a,r);if(l){var d=_parseFontFaceSrc2(l.src),u=await _getOpenTypeFont2(d[0].url);if(null===u)s(null);else{var c=[],p=("italic"===r||"oblique"===r)&&"italic"!==l.style,h=!0,b=!1,x;try{for(var m=e[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var v=g.value,y=u.charToGlyph(v),f=_getOpenTypeGlyphPath(y,u,n,i,p),_=f.toPathData(),w=_deserializePathData3(_);c.push(w)}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}s(c)}}else s(null)})}},{key:"_getFontCSSText",value:function(e){var t="@font-face { ";return t+="font-family: \""+e.family+"\"; ",t+="font-style: "+e.style+"; ",t+="font-weight: "+e.weight+"; ",t+="font-stretch: "+e.stretch+"; ",t+="font-unicode-range: "+e.unicodeRange+"; ",t+="font-variant: "+e.variant+"; ",t+="font-feature-settings: "+e.featureSettings+"; ",t+="src: "+e.src+"; ",t+="}",t}}]),e}();BoxySVG.classes.FontsManager=FontsManager}{{var _getClientBBox2=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$classes=BoxySVG.classes,_EventEmitter3=_BoxySVG$classes.EventEmitter,_Vector2=_BoxySVG$classes.Vector,_BoxySVG$utils$geomet5=BoxySVG.utils.geometry,_getNearestPointOnLine=_BoxySVG$utils$geomet5.getNearestPointOnLine,_transformRect3=_BoxySVG$utils$geomet5.transformRect,_rectIntersectsRect2=_BoxySVG$utils$geomet5.rectIntersectsRect,_parseViewBox=BoxySVG.utils.parsing.parseViewBox,_abs7=Math.abs,SnapManager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._ownerCanvas=e,n._snappers=[],n}return _inherits(t,e),_createClass(t,[{key:"snapStart",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this._ownerCanvas;if(this._snappers=[],t.showManualGuides){var n=t.currentArtboard.getScreenCTM(),a=t.currentArtboard.querySelectorAll("bx-guide"),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=parseFloat(d.getAttribute("angle")),c=parseFloat(d.getAttribute("x")),p=parseFloat(d.getAttribute("y")),h=new SVGPoint(c,p).matrixTransform(n);0===u?this._snappers.push({type:"manual",orientation:"vertical",snapping:!1,x:h.x,guide:d}):90===u?this._snappers.push({type:"manual",orientation:"horizontal",snapping:!1,y:h.y,guide:d}):this._snappers.push({type:"manual",orientation:"angular",snapping:!1,x:h.x,y:h.y,guide:d})}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}if(t.showSmartGuides){var b=t.currentArtboard.getScreenCTM(),x=t.outermostSelectedElements,m=[];if(0<x.length){var g=!0,v=!1,y;try{for(var f=x[0].parentElement.children[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,t.isSelectableElement(w)&&(!1===e||!1===x.includes(w))&&m.push(w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}else{var k=!0,A=!1,C;try{for(var S=t.currentArtboard.children[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,t.isSelectableElement(T)&&m.push(T)}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}}var P=m.map(function(e){return _getClientBBox2(e)});if(t.currentArtboard.hasAttribute("viewBox")){var L=_parseViewBox(t.currentArtboard.getAttribute("viewBox"));L=_transformRect3(L,b),P.push(L)}{var D=t.getBoundingClientRect();P=P.filter(function(e){return _rectIntersectsRect2(D,e)})}var M=!0,N=!1,I;try{for(var R=P[Symbol.iterator](),V,z;!(M=(V=R.next()).done);M=!0)z=V.value,this._snappers.push({type:"smart",orientation:"vertical",snapping:!1,x:z.x,snappingBBox:z,snappedBBox:null,side:"left"}),this._snappers.push({type:"smart",orientation:"vertical",snapping:!1,x:z.x+z.width,snappingBBox:z,side:"right"}),this._snappers.push({type:"smart",orientation:"horizontal",snapping:!1,y:z.y,snappingBBox:z,snappedBBox:null,side:"top"}),this._snappers.push({type:"smart",orientation:"horizontal",snapping:!1,y:z.y+z.height,snappingBBox:z,snappedBBox:null,side:"bottom"})}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}}this.dispatchEvent(new CustomEvent("snapperschange"))}},{key:"snapEnd",value:function(){0<this._snappers.length&&(this._snappers=[],this.dispatchEvent(new CustomEvent("snapperschange")))}},{key:"snapBBox",value:function(e){var t=new SVGRect(e.x,e.y,e.width,e.height);if(0<this._snappers.length){var n=Infinity,a=Infinity,r=null,i=null,o=null,s=null,l=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=h.value,x=!0,m=!1,g=void 0;try{for(var v=this._snappers[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,"vertical"===f.orientation){var _=_abs7(b.x-f.x);_<n&&(n=_,r=f,o=f.x-b.x)}else if("horizontal"===f.orientation){var w=_abs7(b.y-f.y);w<a&&(a=w,i=f,s=f.y-b.y)}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var k=!0,A=!1,C;try{for(var S=this._snappers[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,T.snapping=!1,T.snappedBBox=null,T.snappedPoint=null}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}10>n&&(t.x+=o,r.snapping=!0,r.snappedBBox=t),10>a&&(t.y+=s,i.snapping=!0,i.snappedBBox=t),this.dispatchEvent(new CustomEvent("snapperschange"))}return t}},{key:"snapPoint",value:function(e){var t=new SVGPoint(e.x,e.y);if(0<this._snappers.length){var n=Infinity,a=Infinity,r=null,i=null,o=null,s=null,l=!0,d=!1,u;try{for(var c=this._snappers[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,"vertical"===h.orientation){var b=_abs7(e.x-h.x);b<n&&(n=b,r=h,o=h.x-e.x)}else if("horizontal"===h.orientation){var x=_abs7(e.y-h.y);x<a&&(a=x,i=h,s=h.y-e.y)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var m=!0,g=!1,v;try{for(var y=this._snappers[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,_.snapping=!1,_.snappedBBox=null,_.snappedPoint=null}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}10>n&&(t.x+=o,r.snapping=!0,r.snappedPoint=t),10>a&&(t.y+=s,i.snapping=!0,i.snappedPoint=t),this.dispatchEvent(new CustomEvent("snapperschange"))}return t}},{key:"isGuideSnapping",value:function(e){var t=!0,n=!1,a;try{for(var r=this._snappers[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,o.guide===e)return o.snapping}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"snappers",get:function(){return[].concat(_toConsumableArray(this._snappers))}}]),t}(_EventEmitter3);BoxySVG.classes.SnapManager=SnapManager}}{{var _isAppleDevice=BoxySVG.utils.variables.isAppleDevice,_createElement11=BoxySVG.utils.element.createElement,Shortcut=function(){function e(){_classCallCheck(this,e),this._ctrl=!1,this._alt=!1,this._shift=!1,this._meta=!1,this._key=null;for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"Control"===d?this.ctrl=!0:"Alt"===d?this.alt=!0:"Shift"===d?this.shift=!0:"Meta"===d?this.meta=!0:this.key=d}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return _createClass(e,[{key:"matches",value:function(){for(var e=!1,t=!1,n=!1,a=!1,r=null,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,"Control"===h?e=!0:"Alt"===h?t=!0:"Shift"===h?n=!0:"Meta"===h?a=!0:r=h}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}return e===this.ctrl&&t===this.alt&&a===this.meta&&n===this.shift&&r===this.key}},{key:"includes",value:function(e){return"Control"===e?this.ctrl:"Alt"===e?this.alt:"Shift"===e?this.shift:"Meta"===e?this.meta:this.key===e}},{key:"compare",value:function(e){return this.ctrl===e.ctrl&&this.alt===e.alt&&this.shift===e.shift&&this.meta===e.meta&&this.key===e.key}},{key:"isVoid",value:function(){return!1===this.ctrl&&!1===this.alt&&!1===this.shift&&!1===this.meta&&null===this.key}},{key:"toDisplayString",value:function(){var e="";if(_isAppleDevice){this.meta&&(e+="^"),this.alt&&(e+="\u2325"),this.shift&&(e+="\u21E7"),this.ctrl&&(e+="\u2318");null!==this.key&&(e+={ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192",Backspace:"\u2326"}[this.key]||this.key)}else{var t=[];this.ctrl&&t.push("Ctrl"),this.alt&&t.push("Alt"),this.shift&&t.push("Shift"),this.meta&&t.push("Meta");null!==this.key&&t.push({ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"}[this.key]||this.key),e=t.join("+")}return e}},{key:"toAccelerator",value:function(){var e=[];return this.ctrl&&e.push("CmdOrCtrl"),this.alt&&e.push("Alt"),this.shift&&e.push("Shift"),this.meta,null!==this.key&&("ArrowUp"===this.key?e.push("Up"):"ArrowDown"===this.key?e.push("Down"):"ArrowLeft"===this.key?e.push("Left"):"ArrowRight"===this.key?e.push("Right"):e.push(this.key)),e.join("+")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toElement",value:function(){var e=_createElement11("x-shortcut"),t=[];return this.ctrl&&t.push("Control"),this.alt&&t.push("Alt"),this.shift&&t.push("Shift"),this.meta&&t.push("Meta"),null!==this.key&&t.push(key),e.value=t,e}},{key:"toString",value:function(){var e=[];return this.ctrl&&e.push("Control"),this.alt&&e.push("Alt"),this.shift&&e.push("Shift"),this.meta&&e.push("Meta"),null!==this.key&&e.push(this.key),e.join("+")}},{key:"ctrl",get:function(){return this._ctrl},set:function(e){this._ctrl=e}},{key:"alt",get:function(){return this._alt},set:function(e){this._alt=e}},{key:"shift",get:function(){return this._shift},set:function(e){this._shift=e}},{key:"meta",get:function(){return this._meta},set:function(e){this._meta=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}}],[{key:"fromEvent",value:function(t){var n=new e;n.ctrl=_isAppleDevice?t.metaKey:t.ctrlKey,n.alt=t.altKey,n.shift=t.shiftKey,n.meta=_isAppleDevice?t.ctrlKey:t.metaKey;var a=t.key;return" "===a&&(a="Space"),n.key=a&&"Control"!==a&&"Alt"!==a&&"Shift"!==a&&"Meta"!==a?1===a.length?a.toUpperCase():a:null,n}},{key:"fromAccelerator",value:function(t){var n=t.split("+"),a=[],r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"CmdOrCtrl"===d||"CommandOrControl"===d?a.push("Control"):"Up"===d?a.push("ArrowUp"):"Down"===d?a.push("ArrowDown"):"Left"===d?a.push("ArrowLeft"):"Right"===d?a.push("ArrowRight"):""!==d&&a.push(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=new(Function.prototype.bind.apply(e,[null].concat(a)));return u}},{key:"fromElement",value:function(t){var n=new e;return n.ctrl=t.modKeys.includes("Control"),n.alt=t.modKeys.includes("Alt"),n.shift=t.modKeys.includes("Shift"),n.meta=t.modKeys.includes("Meta"),n.key=t.normalKey,n}},{key:"fromString",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(_toConsumableArray(t.split("+").filter(function(e){return""!==e})))))}}]),e}();BoxySVG.classes.Shortcut=Shortcut}}{{var Transaction={label:"Sample label",icon:"stub",undo:function(){},redo:function(){}},UndoManager=function(){function e(){_classCallCheck(this,e),this._entries=[],this._position=0}return _createClass(e,[{key:"register",value:function(e){e.__proto__=Transaction,this._position<this._entries.length&&(this._entries=this._entries.slice(0,this._position));var t=[];this._entries.push(t),this._position+=1,t.push(e)}},{key:"undo",value:function(){if(this.canUndo()){var e=this._entries[this._position-1],t=[].concat(_toConsumableArray(e)).reverse(),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.undo()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this._position-=1}}},{key:"redo",value:function(){if(this.canRedo()){var e=this._entries[this._position],t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.redo()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._position+=1}}},{key:"reset",value:function(){this._entries=[],this._position=0}},{key:"canUndo",value:function(){return 0!==this._position}},{key:"canRedo",value:function(){return this._position!==this._entries.length}},{key:"undoLabel",get:function(){if(this.canUndo()){var e=this._entries[this._position-1];if(e[0]&&e[0].label)return"Undo: "+e[0].label}return"Undo"}},{key:"redoLabel",get:function(){if(this.canRedo()){var e=this._entries[this._position];if(e[0]&&e[0].label)return"Redo: "+e[0].label}return"Redo"}}]),e}();BoxySVG.classes.UndoManager=UndoManager}}{{var _BoxySVG$utils$artwor=BoxySVG.utils.artworkExport,_exportArtwork=_BoxySVG$utils$artwor.exportArtwork,_serializeArtwork=_BoxySVG$utils$artwor.serializeArtwork,_createElement12=BoxySVG.utils.element.createElement,_sleep=BoxySVG.utils.time.sleep,_FontsManager=BoxySVG.classes.FontsManager,rasterizeArtwork=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"png",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"rgba(0, 0, 0, 0)";return new Promise(async function(r){{var i=document.createElement("div");i.setAttribute("style","width: 1px; height: 1px; position: fixed; top: -1px; left: -1px; overflow: hidden;");var o=i.attachShadow({mode:"closed"});o.innerHTML=e,document.body.append(i);var s=o.querySelector("svg"),l=new _FontsManager(s),d=!0,u=!1,c;try{for(var p=s.querySelectorAll("text")[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,await l.replaceTextWithPaths(b)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e=_serializeArtwork(s),i.remove()}var x=_createElement12("canvas"),m=x.getContext("2d"),g=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(g),y=new Image;y.src=v,y.addEventListener("load",function(){x.width=y.naturalWidth,x.height=y.naturalHeight,("jpeg"===t||"jpg"===t)&&(m.fillStyle="white",m.fillRect(0,0,y.naturalWidth,y.naturalHeight)),m.fillStyle=a,m.fillRect(0,0,y.naturalWidth,y.naturalHeight),m.drawImage(y,0,0);if("png"===t){var e=x.toDataURL("image/png",n);URL.revokeObjectURL(v),r(e)}else if("webp"===t){var i=x.toDataURL("image/webp",n);URL.revokeObjectURL(v),r(i)}else if("jpeg"===t||"jpg"===t){var o=x.toDataURL("image/jpeg",n);URL.revokeObjectURL(v),r(o)}else if("gif"===t){var s=new GIF({workers:2,quality:10,workerScript:"node_modules/gif.js/dist/gif.worker.js"});s.addFrame(x),s.render(),s.on("finished",function(e){var t=new FileReader;t.readAsDataURL(e),t.addEventListener("loadend",function(){var e=t.result;r(e)},{once:!0})})}})})},getSymbolThumbnails=function(e,t,n){e=e.cloneNode(!0),e.setAttribute("width","1000000px"),e.setAttribute("height","100px"),e.setAttribute("viewBox","0 0 1000000 100");var a=_createElement12("svg:g");a.style.setProperty("opacity","0");var r=!0,i=!1,o;try{for(var s=e.children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.append(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}e.append(a);var u=[].concat(_toConsumableArray(e.querySelectorAll("symbol"))),c={},p=1e5,h=!0,b=!1,x;try{for(var m=u[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var v=g.value,y=_createElement12("svg:use");y.setAttribute("width","100"),y.setAttribute("height","100"),y.setAttribute("x",p),y.href.baseVal="#"+v.id,e.append(y),c[v.id]=p,p+=200}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}var f=_exportArtwork(e,"xml"),_=_createElement12("canvas"),w=_.getContext("2d"),k=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),C=new Image,S=function e(a){for(var r=0===u.length;20<a.timeRemaining()&&!1==r;){var i=u.pop(),o=c[i.id];r=0===u.length,w.clearRect(0,0,100,100),w.drawImage(C,-o,0),t(i.id,_.toDataURL("image/png"),r)}!1==r?requestIdleCallback(e):(URL.revokeObjectURL(A),n&&n())};C.addEventListener("load",function(){_.width=100,_.height=100,requestIdleCallback(S)}),C.src=A},getPatternThumbnails=function(e,t,n){e=e.cloneNode(!0),e.setAttribute("width","1000000px"),e.setAttribute("height","100px"),e.setAttribute("viewBox","0 0 1000000 100");var a=_createElement12("svg:g");a.style.setProperty("opacity","0");var r=!0,i=!1,o;try{for(var s=e.children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.append(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}e.append(a);var u={},c=1e5,p=[].concat(_toConsumableArray(e.querySelectorAll("pattern")));p=p.filter(function(e){return!1===e.hasAttribute("href")});var h=!0,b=!1,x;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0){v=g.value,v.removeAttribute("patternTransform");var y=_createElement12("svg:rect");y.setAttribute("width","100"),y.setAttribute("height","100"),y.setAttribute("x",c),y.setAttribute("fill","url(\"#"+v.id+"\")"),e.append(y),u[v.id]=c,c+=200}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}var f=_exportArtwork(e,"xml"),_=_createElement12("canvas"),w=_.getContext("2d"),k=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),C=new Image,S=function e(a){for(var r=0===p.length;20<a.timeRemaining()&&!1==r;){var i=p.pop(),o=u[i.id];r=0===p.length,w.clearRect(0,0,100,100),w.drawImage(C,-o,0),t(i.id,_.toDataURL("image/png"),r)}!1==r?requestIdleCallback(e):(URL.revokeObjectURL(A),n&&n())};C.addEventListener("load",function(){_.width=100,_.height=100,requestIdleCallback(S)}),C.src=A};BoxySVG.utils.artworkRasterization={rasterizeArtwork:rasterizeArtwork,getSymbolThumbnails:getSymbolThumbnails,getPatternThumbnails:getPatternThumbnails}}}{{var _closest2=BoxySVG.utils.element.closest,shadowHTML="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>*{margin:0;padding:0;box-sizing:border-box}:host{width:100%;height:100%}#box,#main{position:relative;display:flex;align-items:center}#main{justify-content:center;background-size:40%;background-position:0% 0%;background-repeat:repeat;width:100%;height:100%}#box{background:#d8d6d8;border:1px solid rgba(0,0,0,.61);box-shadow:0 5px 50px rgba(0,0,0,.33);width:290px;height:70%;max-height:400px;margin:0 auto;flex-flow:column;overflow:hidden;text-align:center;font-size:10px}#box a{color:var(--text-color);text-decoration:none}#box a:hover{cursor:pointer;text-decoration:underline}#logo{width:80px;height:80px;margin:10px 0}#headings{cursor:text;width:100%;-webkit-user-select:text}#app-name{font-size:16px;font-weight:700;margin-bottom:2px}#scroll h3,#version{font-size:12px;margin:0 0 12px}#scroll{width:100%;height:135px;overflow:auto;border-top:1px solid #bfbfbf;border-bottom:1px solid #bfbfbf;background:rgba(255,255,255,.68);font-size:12px;padding-left:7px;flex:1;cursor:text;-webkit-user-select:text}#scroll h3{font-weight:700;margin:15px 0 6px;text-transform:uppercase;opacity:.8}#scroll dt,#scroll dt a{font-weight:600}#scroll dd{margin-bottom:9px}#scroll #frameworks li:not(:last-child),#scroll #libraries li:not(:last-child){margin-bottom:3px}#copyright{width:100%;margin:10px 0 11px;font-size:11px;cursor:text;-webkit-user-select:text}</style>\n\n    <main id=\"main\" style=\"background-image: url(images/about.svg);\">\n      <div id=\"box\">\n        <img id=\"logo\" src=\"images/logo.svg\"></img>\n\n        <div id=\"headings\">\n          <h1 id=\"app-name\">Boxy SVG</h1>\n          <h2 id=\"version\">Version 1.0.0</h2>\n        </div>\n\n        <div id=\"scroll\">\n          <h3>Libraries</h3>\n          <ul id=\"libraries\">\n            <li><a href=\"http://electron.atom.io/\" rel=\"noopener\">Electron</a></li>\n            <li><a href=\"https://nodejs.org/\" rel=\"noopener\">Node.js</a></li>\n            <li><a href=\"https://xel-toolkit.org/\" rel=\"noopener\">Xel</a></li>\n            <li><a href=\"http://opentype.js.org/\" rel=\"noopener\">Opentype.js</a></li>\n            <li><a href=\"ttp://nodeca.github.io/pako/ rel=\"noopener\"\">Pako</a></li>\n            <li><a href=\"http://paperjs.org/\" rel=\"noopener\">Paper.js</a></li>\n            <li><a href=\"https://github.com/tabatkins/parse-css\" rel=\"noopener\">Parse CSS</a></li>\n            <li><a href=\"https://babeljs.io/\" rel=\"noopener\">Babel</a></li>\n            <li><a href=\"https://github.com/google/traceur-compiler\" rel=\"noopener\">Traceur</a></li>\n          </ul>\n\n          <h3>Code snippets</h3>\n          <dl>\n            <dt><a href=\"https://github.com/DmitryBaranovskiy\" rel=\"noopener\">Dmitry Baranovskiy</a></dt>\n            <dd><a href=\"http://raphaeljs.com/\" rel=\"noopener\">Arc to cubic curve conversion</a></dd>\n\n            <dt><a href=\"http://xn--dahlstrm-t4a.net/\" rel=\"noopener\">Erik Dahlstr\xF6m</a></dt>\n            <dd><a href=\"http://xn--dahlstrm-t4a.net/svg/path/donut-shop.html\" rel=\"noopener\">Ring shape</a></dd>\n\n            <dt><a href=\"http://ariya.blogspot.com/\" rel=\"noopener\">Ariya Hidayat</a></dt>\n            <dd>HSV\u2194HSL conversion</dd>\n\n            <dt><a href=\"https://github.com/jxnblk\" rel=\"noopener\">Brent Jackson</a></dt>\n            <dd><a href=\"http://jxnblk.com/react-icons/\" rel=\"noopener\">Cog shape</a></dd>\n\n            <dt><a href=\"http://mjijackson.com/\" rel=\"noopener\">Michael Jackson</a></dt>\n            <dd><a href=\"https://goo.gl/H72pO3\" rel=\"noopener\">HSV\u2194RGB\u2194HSL conversion</a></dd>\n\n            <dt><a href=\"http://tmotooka.hatenablog.jp/\" rel=\"noopener\">Tadahisa Motooka</a></dt>\n            <dd><a href=\"https://github.com/motooka/SVGPathNormalizer\" rel=\"noopener\">Path normalization</a></dd>\n\n            <dt><a href=\"https://github.com/kennethormandy\" rel=\"noopener\">Kenneth Ormandy</a></dt>\n            <dd><a href=\"https://github.com/kennethormandy/normalize-opentype.css\" rel=\"noopener\">OpenType normalization</a></dd>\n\n            <dt><a href=\"https://github.com/progers\" rel=\"noopener\">Philip Rogers</a></dt>\n            <dd><a href=\"https://github.com/progers/pathseg\" rel=\"noopener\">Path data parser</a></dd>\n\n            <dt><a href=\"http://svg-whiz.com/\" rel=\"noopener\">Doug Schepers</a></dt>\n            <dd><a href=\"http://svg-whiz.com/experiments.html\" rel=\"noopener\">Star and n-gon primitives</a></dd>\n\n            <dt>Philip J. Schneider</dt>\n            <dd>Bezier curve fitting</dd>\n\n            <dt><a href=\"https://github.com/johan\" rel=\"noopener\">Johan Sundstr\xF6m</a></dt>\n            <dd>Path normalization</dd>\n          </dl>\n        </div>\n\n        <h2 id=\"copyright\">\xA9 2012-"+new Date().getFullYear()+" <a href=\"http://foksa.name/\">Jaros\u0142aw Foksa</a></h2>\n      </div>\n    </main>\n  ",BXAboutElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={},e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=shadowHTML;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#logo"].addEventListener("click",function(t){5===t.detail&&e._ownerApp.openDevTools()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest2(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"version"===e&&(this["#version"].textContent="Version "+this.version)}},{key:"version",get:function(){return this.hasAttribute("version")?this.getAttribute("version"):"1.0.0"},set:function(e){this.setAttribute("version",e)}}],[{key:"observedAttributes",get:function(){return["version"]}}]),t}(_CustomElement);customElements.define("bx-about",BXAboutElement)}}{{var _closest3=BoxySVG.utils.element.closest,_entries3=Object.entries,accentColorsByTheme={macos:{Blue:"hsl(211, 96.7%, 52.9%)",Green:"hsl(88, 35%, 46%)",Red:"hsl(344, 65%, 45%)",Purple:"hsl(290, 40%, 46%)",Yellowgreen:"hsl(61, 28%, 45%)"},vanilla:{Blue:"hsl(211, 86%, 57%)",Green:"hsl(88, 35%, 46%)",Red:"hsl(344, 65%, 45%)",Purple:"hsl(290, 40%, 46%)",Yellowgreen:"hsl(61, 28%, 45%)"}},_shadowHTML="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%}#shortcuts-view[hidden],[hidden]{display:none}#container,#sidebar{width:100%;height:100%}#sidebar{display:block;width:280px;background:#e0e0e0;border-right:1px solid #c3c3c3;padding-top:10px;box-sizing:border-box}#sidebar-buttons{flex-flow:column;width:100%}#sidebar-buttons x-button,#views{width:100%}#views{height:100%;padding:30px;box-sizing:border-box;overflow:auto}#views h2{margin-top:0;padding:0;margin-bottom:18px}#views hr{margin:20px 0}#experimental-features-box,#hardware-acceleration-box{margin-top:10px}#experimental-features-section p,#geometry-precision-section p,#hardware-acceleration-section p,#indentation-section p,#transform-precision-section p{font-size:13px;line-height:1.4;margin:5px 0 8px}#accent-color-section{margin-top:16px}#accent-color-section h3{margin-bottom:8px}#accent-color-select{width:150px}#geometry-precision-slider{max-width:300px}#transform-precision-section{margin-top:20px}#transform-precision-slider{max-width:300px}#indentation-section{margin-top:20px}#indentation-slider{max-width:300px}#shortcuts-view{height:100%;display:flex;flex-flow:column}#shortcuts-editor{height:0;flex:1}</style>\n\n    <x-box id=\"container\">\n      <sidebar id=\"sidebar\">\n        <x-buttons id=\"sidebar-buttons\" tracking=\"1\">\n          <x-box vertical>\n            <x-button skin=\"nav\" value=\"general\" toggled>\n              <x-icon name=\"prefs-general\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>General</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"ui\">\n              <x-icon name=\"prefs-ui\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>UI</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"markup\">\n              <x-icon name=\"prefs-markup\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Markup</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"shortcuts\">\n              <x-icon name=\"prefs-shortcuts\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Shortcuts</x-label>\n            </x-button>\n          </x-box>\n        </x-buttons>\n      </sidebar>\n\n      <div id=\"views\">\n        <div id=\"general-view\" data-view=\"general\" hidden>\n          <h2>General</h2>\n\n          <section id=\"hardware-acceleration-section\">\n            <h3>Hardware acceleration</h3>\n            <p>You should disable hardware acceleration if you are running the app inside a virtual machine or on older\n            hardware and you observe graphical glitches such as flickering or disappearing widgets. <strong>Requires app restart.</strong></p>\n            <x-box id=\"hardware-acceleration-box\">\n              <x-checkbox id=\"hardware-acceleration-checkbox\" toggled></x-checkbox>\n              <x-label for=\"hardware-acceleration-checkbox\">Hardware acceleration</x-label>\n            </x-box>\n          </section>\n        </div>\n\n        <div id=\"ui-view\" data-view=\"ui\" hidden>\n          <h2>UI</h2>\n\n          <x-box id=\"accent-color-section\" vertical>\n            <h3>Accent color</h3>\n\n            <x-select id=\"accent-color-select\">\n              <x-menu id=\"accent-color-menu\"></x-menu>\n            </x-select>\n          </x-box>\n        </div>\n\n        <div id=\"markup-view\" data-view=\"markup\" hidden>\n          <h2>Markup</h2>\n\n          <section id=\"geometry-precision-section\">\n            <h3>Geometry precision</h3>\n            <p>Precision, in number of decimal places, to be used by attributes defining shape geometry such as\n            <code>x</code>, <code>y</code>, <code>width</code>, <code>height</code>, <code>r</code> or <code>d</code>.</p>\n            <x-slider id=\"geometry-precision-slider\" value=\"3\" min=\"0\" max=\"6\" step=\"1\">\n              <x-label value=\"0\">0</x-label>\n              <x-label value=\"1\">1</x-label>\n              <x-label value=\"2\">2</x-label>\n              <x-label value=\"3\">3</x-label>\n              <x-label value=\"4\">4</x-label>\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n            </x-slider>\n          </section>\n\n          <hr/>\n\n          <section id=\"transform-precision-section\">\n            <h3>Transform precision</h3>\n            <p>Precision, in number of decimal places, to be used by <code>transform</code> attribute.</p>\n            <x-slider id=\"transform-precision-slider\" value=\"6\" min=\"5\" max=\"12\" step=\"1\">\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n              <x-label value=\"7\">7</x-label>\n              <x-label value=\"8\">8</x-label>\n              <x-label value=\"9\">9</x-label>\n              <x-label value=\"10\">10</x-label>\n              <x-label value=\"11\">11</x-label>\n              <x-label value=\"12\">12</x-label>\n            </x-slider>\n          </section>\n\n          <hr/>\n\n          <section id=\"indentation-section\">\n            <h3>Indentation</h3>\n            <p>Number of spaces used to indent SVG code.</p>\n            <x-slider id=\"indentation-slider\" value=\"2\" min=\"0\" max=\"8\" step=\"1\">\n              <x-label value=\"0\">0</x-label>\n              <x-label value=\"1\">1</x-label>\n              <x-label value=\"2\">2</x-label>\n              <x-label value=\"3\">3</x-label>\n              <x-label value=\"4\">4</x-label>\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n              <x-label value=\"7\">7</x-label>\n              <x-label value=\"8\">8</x-label>\n            </x-slider>\n          </section>\n        </div>\n\n        <div id=\"shortcuts-view\" data-view=\"shortcuts\" hidden>\n          <h2>Shortcuts</h2>\n          <bx-shortcutseditor id=\"shortcuts-editor\"></bx-shortcutseditor>\n        </div>\n      </div>\n    </x-box>\n  ",BXPreferencesElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={copy:{exec:function(){return document.execCommand("copy")}},cut:{exec:function(){return document.execCommand("cut")}},paste:{exec:function(){return document.execCommand("paste")}},selectAll:{exec:function(){return document.execCommand("selectAll")}},undo:{exec:function(){return document.execCommand("undo")}},redo:{exec:function(){return document.execCommand("redo")}}},e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}{var l="",d=!0,u=!1,c;try{for(var p=_entries3(accentColorsByTheme[window.theme])[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=_slicedToArray(h.value,2),x=b[0],m=b[1];l+="\n            <x-menuitem value=\""+m+"\" selected=\"true\">\n              <x-swatch value=\""+m+"\"></x-swatch>\n              <x-label>"+x+"</x-label>\n            </x-menuitem>\n          "}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e["#accent-color-menu"].innerHTML=l}return e["#sidebar-buttons"].addEventListener("toggle",function(){e._ownerApp.setConfig("bx-preferences:currentViewID",e["#sidebar-buttons"].value),e._updateViewsVisibility()}),e["#hardware-acceleration-checkbox"].addEventListener("change",function(){e._ownerApp.hardwareAcceleration=e["#hardware-acceleration-checkbox"].toggled}),e["#accent-color-select"].addEventListener("change",function(){e._ownerApp.setConfig("bx-preferences:accentColor",e["#accent-color-select"].value)}),e["#geometry-precision-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:geometryPrecision",e["#geometry-precision-slider"].value)}),e["#transform-precision-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:transformPrecision",e["#transform-precision-slider"].value)}),e["#indentation-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:indentation",e["#indentation-slider"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:async function(){this._ownerApp=_closest3(this,"bx-electronapp, bx-chromeapp, bx-webapp");var e=this._ownerApp.getConfig("bx-preferences:currentViewID"),t=this._ownerApp.getConfig("bx-preferences:accentColor");null!==e&&(this["#sidebar-buttons"].value=e),null!==t&&(this["#accent-color-select"].value=t),this._update()}},{key:"_update",value:async function(){this._updateViewsVisibility();var e=await this._ownerApp.hardwareAcceleration,t=this._ownerApp.getConfig("bx-preferences:geometryPrecision"),n=this._ownerApp.getConfig("bx-preferences:transformPrecision"),a=this._ownerApp.getConfig("bx-preferences:indentation");t=null===t?3:t,n=null===n?6:n,a=null===a?2:a,this["#hardware-acceleration-checkbox"].toggled=e,this["#geometry-precision-slider"].value=t,this["#transform-precision-slider"].value=n,this["#indentation-slider"].value=a}},{key:"_updateViewsVisibility",value:function(){var e=!0,t=!1,n;try{for(var a=this["#views"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.hidden=i.getAttribute("data-view")!==this["#sidebar-buttons"].value}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}]),t}(_CustomElement);customElements.define("bx-preferences",BXPreferencesElement)}}{{var _isArtworkString=BoxySVG.utils.artworkGeneral.isArtworkString,_exportArtwork2=BoxySVG.utils.artworkExport.exportArtwork,_importArtwork=BoxySVG.utils.artworkImport.importArtwork,_reduceTransform2=BoxySVG.utils.transformReduction.reduceTransform,_getClientBBox3=BoxySVG.utils.bbox.getClientBBox,_combineRects3=BoxySVG.utils.geometry.combineRects,_getPaintServer3=BoxySVG.utils.paint.getPaintServer,_BoxySVG$utils$pathBo=BoxySVG.utils.pathBoolops,_unite=_BoxySVG$utils$pathBo.unite,_subtract=_BoxySVG$utils$pathBo.subtract,_intersect=_BoxySVG$utils$pathBo.intersect,_exclude=_BoxySVG$utils$pathBo.exclude,_BoxySVG$utils$pathGe3=BoxySVG.utils.pathGeneral,_getPathDataBySubpath=_BoxySVG$utils$pathGe3.getPathDataBySubpath,_openPath2=_BoxySVG$utils$pathGe3.openPath,_closePath2=_BoxySVG$utils$pathGe3.closePath,_reversePath2=_BoxySVG$utils$pathGe3.reversePath,_canOpenPath2=_BoxySVG$utils$pathGe3.canOpenPath,_canClosePath2=_BoxySVG$utils$pathGe3.canClosePath,_getParentPattern2=BoxySVG.utils.pattern.getParentPattern,_BoxySVG$utils$variab8=BoxySVG.utils.variables,_graphicsElementNames3=_BoxySVG$utils$variab8.graphicsElementNames,_presentationAttributeNames3=_BoxySVG$utils$variab8.presentationAttributeNames,_capitalize3=BoxySVG.utils.string.capitalize,_reduceProperty=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text3=BoxySVG.utils.text,_spanifyText2=_BoxySVG$utils$text3.spanifyText,_reduceText=_BoxySVG$utils$text3.reduceText,_getTspansIntersectedByRange=_BoxySVG$utils$text3.getTspansIntersectedByRange,_Shortcut=BoxySVG.classes.Shortcut,_BoxySVG$utils$transf3=BoxySVG.utils.transformGeneral,_getComputedTransform5=_BoxySVG$utils$transf3.getComputedTransform,_getTransformToElement=_BoxySVG$utils$transf3.getTransformToElement,_getComputedTransformOriginClientPoint=_BoxySVG$utils$transf3.getComputedTransformOriginClientPoint,_BoxySVG$utils$elemen5=BoxySVG.utils.element,_closest4=_BoxySVG$utils$elemen5.closest,_createElement13=_BoxySVG$utils$elemen5.createElement,_getElementIndex=_BoxySVG$utils$elemen5.getElementIndex,_sortByDomPosition=_BoxySVG$utils$elemen5.sortByDomPosition,_sortBySiblingElements=_BoxySVG$utils$elemen5.sortBySiblingElements,_sortByIntersectingElements=_BoxySVG$utils$elemen5.sortByIntersectingElements,_isElementIntersectingElement=_BoxySVG$utils$elemen5.isElementIntersectingElement,_BoxySVG$utils$pathCo=BoxySVG.utils.pathConversion,_rectToPath=_BoxySVG$utils$pathCo.rectToPath,_circleToPath=_BoxySVG$utils$pathCo.circleToPath,_ellipseToPath=_BoxySVG$utils$pathCo.ellipseToPath,_lineToPath=_BoxySVG$utils$pathCo.lineToPath,_polylineToPath=_BoxySVG$utils$pathCo.polylineToPath,_polygonToPath=_BoxySVG$utils$pathCo.polygonToPath,_shadowHTML2="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%}:host(:focus){outline:0}#main{display:flex;width:100%;height:100%}#canvas{flex:1}#breadcrumb{position:absolute;top:5px;left:44px}</style>\n\n    <main id=\"main\">\n      <bx-toolsdock id=\"tools-dock\"></bx-toolsdock>\n      <bx-canvas id=\"canvas\"></bx-canvas>\n      <bx-panelsdock id=\"panels-dock\"></bx-panelsdock>\n      <bx-breadcrumb id=\"breadcrumb\"></bx-breadcrumb>\n      <bx-inspector id=\"inspector\"></bx-inspector>\n    </main>\n  ",BXEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={previousTool:{enabled:function(){return e._canTogglePreviousTool()},exec:function(){return e._togglePreviousTool()}},transformTool:{exec:function(){return e.toggleTool("transform-tool")}},editTool:{exec:function(){return e.toggleTool("edit-tool")}},quadBezierTool:{exec:function(){return e.toggleTool("quad-bezier-tool")}},cubicBezierTool:{exec:function(){return e.toggleTool("cubic-bezier-tool")}},freehandTool:{exec:function(){return e.toggleTool("freehand-tool")}},textTool:{exec:function(){return e.toggleTool("text-tool")}},rectTool:{exec:function(){return e.toggleTool("rect-tool")}},ellipseTool:{exec:function(){return e.toggleTool("ellipse-tool")}},ringTool:{exec:function(){return e.toggleTool("ring-tool")}},pieTool:{exec:function(){return e.toggleTool("pie-tool")}},triangleTool:{exec:function(){return e.toggleTool("triangle-tool")}},nGonTool:{exec:function(){return e.toggleTool("n-gon-tool")}},starTool:{exec:function(){return e.toggleTool("star-tool")}},cogTool:{exec:function(){return e.toggleTool("cog-tool")}},lineTool:{exec:function(){return e.toggleTool("line-tool")}},polylineTool:{exec:function(){return e.toggleTool("polyline-tool")}},polygonTool:{exec:function(){return e.toggleTool("polygon-tool")}},fillPanel:{exec:function(){return e._togglePanel("fill-panel")}},strokePanel:{exec:function(){return e._togglePanel("stroke-panel")}},compositingPanel:{exec:function(){return e._togglePanel("compositing-panel")}},typographyPanel:{exec:function(){return e._togglePanel("typography-panel")}},geometryPanel:{exec:function(){return e._togglePanel("geometry-panel")}},metadataPanel:{exec:function(){return e._togglePanel("metadata-panel")}},pathPanel:{exec:function(){return e._togglePanel("path-panel")}},exportPanel:{exec:function(){return e._togglePanel("export-panel")}},viewPanel:{exec:function(){return e._togglePanel("view-panel")}},arrangementPanel:{exec:function(){return e._togglePanel("arrangement-panel")}},objectsPanel:{exec:function(){return e._togglePanel("objects-panel")}},defsPanel:{exec:function(){return e._togglePanel("defs-panel")}},libraryPanel:{exec:function(){return e._togglePanel("library-panel")}},copy:{enabled:function(){return e._ownerApp.textInputMode||0<e.canvas.selectedElements.length},exec:function(){return e._copy()}},cut:{enabled:function(){return e._ownerApp.textInputMode||0<e.canvas.selectedElements.length},exec:function(){return e._cut()}},paste:{exec:function(){return e._paste()}},duplicate:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._duplicate()}},delete:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._delete()}},undo:{enabled:function(){return e._canUndo()},exec:function(){return e._undo()}},redo:{enabled:function(){return e._canRedo()},exec:function(){return e._redo()}},selectAll:{exec:function(){return e._selectAll()}},deselectAll:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._deselectAll()}},inspector:{exec:function(){return e.inspector.enabled=!e["#inspector"].enabled}},manualGuides:{exec:function(){return e.canvas.showManualGuides=!e.canvas.showManualGuides}},smartGuides:{exec:function(){return e.canvas.showSmartGuides=!e.canvas.showSmartGuides}},zoomIn:{exec:function(){return e.canvas.zoomIn()}},zoomOut:{exec:function(){return e.canvas.zoomOut()}},resetZoom:{enabled:function(){return 100!==e.canvas.zoom},exec:function(){return e.canvas.zoom=100}},zoomToFitAll:{exec:function(){return e.canvas.zoomToFitAll()}},zoomToViewBox:{enabled:function(){return e.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){return e.canvas.zoomToViewBox()}},group:{enabled:function(){return e._canGroup()},exec:function(){return e._group()}},ungroup:{enabled:function(){return e._canUngroup()},exec:function(){return e._ungroup()}},raise:{enabled:function(){return e._canRaise()},exec:function(){return e._raise()}},raiseToFront:{enabled:function(){return e._canRaise()},exec:function(){return e._raiseToFront()}},lower:{enabled:function(){return e._canLower()},exec:function(){return e._lower()}},lowerToBack:{enabled:function(){return e._canLower()},exec:function(){return e._lowerToBack()}},rotateClockwise:{enabled:function(){return e._canRotate()},exec:function(){return e._rotate(90)}},rotateCounterclockwise:{enabled:function(){return e._canRotate()},exec:function(){return e._rotate(-90)}},flipX:{enabled:function(){return e._canFlip()},exec:function(){return e._flip("x")}},flipY:{enabled:function(){return e._canFlip()},exec:function(){return e._flip("y")}},moveOneUnitLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"left")}},moveOneUnitRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"right")}},moveOneUnitUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"up")}},moveOneUnitDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"down")}},moveTenUnitsLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"left")}},moveTenUnitsRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"right")}},moveTenUnitsUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"up")}},moveTenUnitsDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"down")}},objectToPath:{enabled:function(){return e._canConvertObjectToPath()},exec:function(){return e._convertObjectToPath()}},strokeToPath:{enabled:function(){return e._canConvertStrokeToPath()},exec:function(){return e._convertStrokeToPath()}},openPath:{enabled:function(){return e._canOpenPath()},exec:function(){return e._openPath()}},closePath:{enabled:function(){return e._canClosePath()},exec:function(){return e._closePath()}},reversePath:{enabled:function(){return e._canReversePath()},exec:function(){return e._reversePath()}},unite:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("unite")}},subtract:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("subtract")}},intersect:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("intersect")}},exclude:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("exclude")}},join:{enabled:function(){return e._canJoin()},exec:function(){return e._join()}},split:{enabled:function(){return e._canSplit()},exec:function(){return e._split()}},export:{enabled:function(){return!0},exec:function(){return e._togglePanel("export-panel")}},grabPaintColor:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._grabPaintColor()}}},e._currentToolID=null,e._previousToolID=null,e._firstTimeConnected=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML2;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#tools-dock"].addEventListener("toggle",function(){return e._update()}),e["#panels-dock"].addEventListener("toggle",function(){return e._update()}),e.canvas.undoManager.addEventListener("positionchange",function(t){return e._onUndoManagerPositionChange(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest4(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this.tabIndex=0,!1===this._firstTimeConnected&&(this._firstTimeConnected=!0,this._update())}},{key:"_onKeyDown",value:function(e){var t=_Shortcut.fromEvent(e);0<this.canvas.selectedElements.length&&!1===this._ownerApp.textInputMode&&(t.matches("Backspace")?this._delete():t.matches("ArrowDown")?this._move(1,"down"):t.matches("ArrowUp")?this._move(1,"up"):t.matches("ArrowLeft")?this._move(1,"left"):t.matches("ArrowRight")?this._move(1,"right"):t.matches("Shift","ArrowDown")?this._move(10,"down"):t.matches("Shift","ArrowUp")?this._move(10,"up"):t.matches("Shift","ArrowLeft")?this._move(10,"left"):t.matches("Shift","ArrowRight")&&this._move(10,"right"))}},{key:"_onUndoManagerPositionChange",value:function(e){this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:e.detail}))}},{key:"_update",value:function(){var e=this["#tools-dock"].value,t=this["#panels-dock"].value;e!==this._currentToolID&&(this._previousToolID=this._currentToolID,this._currentToolID=e),"transform-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="transform",this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!0,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!0,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"edit-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!0,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"text-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="edit-text",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!0,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!0,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"cubic-bezier-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!0,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"quad-bezier-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!0,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"freehand-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!0,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):["rect-tool","ellipse-tool","ring-tool","pie-tool","triangle-tool","n-gon-tool","star-tool","cog-tool"].includes(e)?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].shapeContext.enabled=!0,this["#canvas"].shapeContext.shape=e.substring(0,e.indexOf("-tool")),this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"line-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!0,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"polyline-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!0,this["#canvas"].polygonContext.enabled=!1):"polygon-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!0):(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1),this["#canvas"].viewBoxHud.editable="view-panel"===t,"edit-tool"===e?(this["#canvas"].rectHud.enabled=!0,this["#canvas"].circleHud.enabled=!0,this["#canvas"].ellipseHud.enabled=!0,this["#canvas"].triangleHud.enabled=!0,this["#canvas"].nGonHud.enabled=!0,this["#canvas"].starHud.enabled=!0,this["#canvas"].ringHud.enabled=!0,this["#canvas"].pieHud.enabled=!0,this["#canvas"].cogHud.enabled=!0,this["#canvas"].lineHud.enabled=!0,this["#canvas"].polyHud.enabled=!0):(this["#canvas"].rectHud.enabled=!1,this["#canvas"].circleHud.enabled=!1,this["#canvas"].ellipseHud.enabled=!1,this["#canvas"].triangleHud.enabled=!1,this["#canvas"].nGonHud.enabled=!1,this["#canvas"].starHud.enabled=!1,this["#canvas"].ringHud.enabled=!1,this["#canvas"].pieHud.enabled=!1,this["#canvas"].cogHud.enabled=!1,this["#canvas"].lineHud.enabled=!1,this["#canvas"].polyHud.enabled=!1),"edit-tool"===e&&"fill-panel"===t?(this["#canvas"].linearGradientHud.context="fill",this["#canvas"].radialGradientHud.context="fill",this["#canvas"].patternHud.context="fill",this["#canvas"].linearGradientHud.enabled=!0,this["#canvas"].radialGradientHud.enabled=!0,this["#canvas"].patternHud.enabled=!0):"edit-tool"===e&&"stroke-panel"===t?(this["#canvas"].linearGradientHud.context="stroke",this["#canvas"].radialGradientHud.context="stroke",this["#canvas"].patternHud.context="stroke",this["#canvas"].linearGradientHud.enabled=!0,this["#canvas"].radialGradientHud.enabled=!0,this["#canvas"].patternHud.enabled=!0):(this["#canvas"].linearGradientHud.enabled=!1,this["#canvas"].radialGradientHud.enabled=!1,this["#canvas"].patternHud.enabled=!1),this._ownerApp.updateMenuItemsCheckedState()}},{key:"toggleTool",value:function(e){this["#tools-dock"].value=e,this._update()}},{key:"_togglePreviousTool",value:function(){this._previousToolID&&this.toggleTool(this._previousToolID)}},{key:"_canTogglePreviousTool",value:function(){return null!==this._previousToolID}},{key:"_togglePanel",value:function(e){this["#panels-dock"].value=this["#panels-dock"].value===e?null:e,this._update()}},{key:"_toggleInspector",value:function(){this.inspector.enabled=!this.inspector.enabled}},{key:"_move",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left";this.canvas.undoManager.checkpoint("Move");var n=!0,a=!1,r;try{for(var i=this.canvas.outermostSelectedElements[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_getComputedTransform5(s),d=_getTransformToElement(s,this.canvas.currentArtboard),u=d.inverse(),c=new SVGMatrix;"left"===t?c.translateSelf(-e,0):"right"===t?c.translateSelf(e,0):"up"===t?c.translateSelf(0,-e):"down"===t&&c.translateSelf(0,e);var p=SVGMatrix.fromMatrix(l);p.multiplySelf(u),p.multiplySelf(c),p.multiplySelf(d),s.setAttribute("transform",p.toString()),_reduceTransform2(s,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_canMove",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_flip",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"x";this.canvas.undoManager.checkpoint("Flip");var n=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),a=n.map(function(e){return _getClientBBox3(e)}),r=_combineRects3(a),i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=_getComputedTransform5(u),p=u.getScreenCTM(),h=p.inverse(),b=void 0;if("x"===t){var x=2*(r.x+r.width/2);b=new SVGMatrix([-1,0,0,1,x,0])}else if("y"===t){var e=2*(r.y+r.height/2);b=new SVGMatrix([1,0,0,-1,0,e])}var m=SVGMatrix.fromMatrix(c);m.multiplySelf(h),m.multiplySelf(b),m.multiplySelf(p),u.setAttribute("transform",m.toString()),_reduceTransform2(u,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}},{key:"_canFlip",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_rotate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:90;this.canvas.undoManager.checkpoint("Rotate");var t=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),n=_getComputedTransformOriginClientPoint(t),a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getComputedTransform5(l),u=l.getScreenCTM(),c=u.inverse(),p=SVGMatrix.fromMatrix(d);p.multiplySelf(c),p.rotateSelf(e,n.x,n.y),p.multiplySelf(u),l.setAttribute("transform",p.toString()),_reduceTransform2(l,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_canRotate",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_raise",value:function(){this.canvas.undoManager.checkpoint("Raise");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.find(function(t){return _getElementIndex(t)>_getElementIndex(e[e.length-1])});if(n){var a=!0,r=!1,i;try{for(var o=e.reverse()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.after(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},u=_sortByIntersectingElements(i)[Symbol.iterator](),c;!(o=(c=u.next()).done);o=!0)d()}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_raiseToFront",value:function(){this.canvas.undoManager.checkpoint("Raise to Front");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t[t.length-1];if(n){var a=!0,r=!1,i;try{for(var o=e.reverse()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.after(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},u=_sortByIntersectingElements(i)[Symbol.iterator](),c;!(o=(c=u.next()).done);o=!0)d()}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_canRaise",value:function(){var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.find(function(t){return _getElementIndex(t)>_getElementIndex(e[e.length-1])});if(n)return{v:!0}},u=_sortByIntersectingElements(i)[Symbol.iterator](),c,p;!(o=(c=u.next()).done);o=!0)if(p=d(),"object"===("undefined"==typeof p?"undefined":_typeof(p)))return p.v}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_lower",value:function(){this.canvas.undoManager.checkpoint("Lower");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.reverse().find(function(t){return _getElementIndex(t)<_getElementIndex(e[0])});if(n){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.before(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},u=_sortByIntersectingElements(i)[Symbol.iterator](),c;!(o=(c=u.next()).done);o=!0)d()}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_lowerToBack",value:function(){this.canvas.undoManager.checkpoint("Lower to Back");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t[0];if(n){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.before(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},u=_sortByIntersectingElements(i)[Symbol.iterator](),c;!(o=(c=u.next()).done);o=!0)d()}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_canLower",value:function(){var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.reverse().find(function(t){return _getElementIndex(t)<_getElementIndex(e[0])});if(n)return{v:!0}},u=_sortByIntersectingElements(i)[Symbol.iterator](),c,p;!(o=(c=u.next()).done);o=!0)if(p=d(),"object"===("undefined"==typeof p?"undefined":_typeof(p)))return p.v}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_group",value:function(){this.canvas.undoManager.checkpoint("Group");var e=document.createDocumentFragment(),t=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),n=_createElement13("svg:g");t[0].after(n),t=_sortByDomPosition(t);var a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getTransformToElement(l,n);l.setAttribute("transform",d.toString()),e.append(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}n.append(e);var u=!0,c=!1,p;try{for(var h=n.children[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,_reduceTransform2(x,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}this.canvas.selectedElements=[n]}},{key:"_canGroup",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_ungroup",value:function(){this.canvas.undoManager.checkpoint("Ungroup");var e=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"g"===s.localName){for(var l=s,d=document.createDocumentFragment(),u=[].concat(_toConsumableArray(l.children)),c=0,p;c<u.length;c++)if(p=u[c],"title"===p.localName||"desc"===p.localName)continue;else{if(this.canvas.isSelectableElement(p)){var h=_getTransformToElement(p,l.parentElement);p.setAttribute("transform",h.toString()),_reduceTransform2(p,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision}),t.push(p)}var b=!0,x=!1,m=void 0;try{for(var g=l.attributes[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=y.name,_=y.value;_presentationAttributeNames3.includes(f)&&!1===p.hasAttribute(f)&&p.setAttribute(f,_)}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}var w=!0,k=!1,A=void 0;try{for(var C=l.style[Symbol.iterator](),S;!(w=(S=C.next()).done);w=!0){var f=S.value,_=l.style.getPropertyValue(f);""===p.style.getPropertyValue(f)&&p.style.setProperty(f,_)}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}d.append(p)}l.before(d),l.remove()}else t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this.canvas.selectedElements=[].concat(t)}},{key:"_canUngroup",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_selectAll",value:function(){this._ownerApp.textInputMode?document.execCommand("selectAll"):this.canvas.selectAll()}},{key:"_deselectAll",value:function(){this.canvas.deselectAll()}},{key:"_undo",value:function(){this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")?document.execCommand("undo"):this.canvas.undoManager.undo()}},{key:"_canUndo",value:function(){return this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")||this.canvas.undoManager.canUndo()&&!1===this._ownerApp.isPointerDown}},{key:"_redo",value:function(){this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")?document.execCommand("redo"):this.canvas.undoManager.redo()}},{key:"_canRedo",value:function(){return this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")||this.canvas.undoManager.canRedo()&&!1===this._ownerApp.isPointerDown}},{key:"_copy",value:async function(){if(this._ownerApp.textInputMode)document.execCommand("copy");else{this.canvas.removeUnusedDefs();var e=this.canvas.extractArtworkWithSelectedElements(),t=await this._ownerApp.getConfig("bx-preferences:indentation");t=null===t?2:t;var n=_exportArtwork2(e,"html",t),a=_exportArtwork2(e,"xml",t);this._ownerApp.setClipboardData({"text/plain":n,"text/html":n,"image/svg+xml":a})}}},{key:"_paste",value:async function(){if(this._ownerApp.textInputMode)document.execCommand("paste");else{var e=await this._ownerApp.getClipboardData(),t=this.canvas.matches(":hover")?"pointer":"canvasCenter";if(t="pointer",e["text/html"]&&_isArtworkString(e["text/html"])){this.canvas.undoManager.checkpoint("Paste");var n=_importArtwork(e["text/html"]);this.canvas.insertArtwork(n,t)}else if(e["text/plain"]){this.canvas.undoManager.checkpoint("Paste");var a=_importArtwork("<svg><text style=\"font-size: 36; font-family: Roboto; white-space: pre;\">"+e["text/plain"]+"</text></svg>\n          ");this.canvas.insertArtwork(a,t)}else if(e["image/png"]){this.canvas.undoManager.checkpoint("Paste");var r=e["image/png"];this.canvas.insertBitmap(r,t)}}}},{key:"_cut",value:function(){if(this._ownerApp.textInputMode)document.execCommand("cut");else{this.canvas.undoManager.checkpoint("Cut"),this._copy();var e=_sortByDomPosition(this.canvas.outermostSelectedElements);e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_delete",value:function(){if(0<this.canvas.selectedElements.length){this.canvas.undoManager.checkpoint("Delete");var e=_sortByDomPosition(this.canvas.outermostSelectedElements);e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_duplicate",value:function(){this.canvas.undoManager.checkpoint("Duplicate"),this.canvas.removeUnusedDefs(),this.canvas.insertArtwork(this.canvas.extractArtworkWithSelectedElements(),"original"),this.canvas.transformHud.blink()}},{key:"_grabPaintColor",value:async function(){if(!1===this._ownerApp.colorGrabber.isGrabbing){var e=this.canvas,t=[].concat(_toConsumableArray(e.linearGradientHud.selectedStops),_toConsumableArray(e.radialGradientHud.selectedStops)),n=e.selectedTextRange,a=await this._ownerApp.colorGrabber.grab(),r=this._ownerApp.modKeys.shift?"stroke":"fill";if(null!==a)if(0<t.length){this.canvas.undoManager.checkpoint("Paint color");var i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,u.style.stopColor=a,_reduceProperty("stop-color",u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}else{var c=this._getSelectedPaintableElements();if(0<c.length){this.canvas.undoManager.checkpoint("Paint color");var p=c.filter(function(e){return"text"===e.localName}),h=e.selectedTextRange,b=[],x=!0,m=!1,g;try{for(var v=p[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)f=y.value,_spanifyText2(f,h)}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}var _=!0,w=!1,k;try{for(var A=c[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)if(S=C.value,"text"===S.localName&&S.querySelector("tspan")){var E=S.querySelectorAll("tspan"),T=_getTspansIntersectedByRange(h,S),P=0<T.length&&!h.collapsed?T:E;b.push.apply(b,_toConsumableArray(P))}else b.push(S)}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}var L=!0,D=!1,M;try{for(var N=b[Symbol.iterator](),I,R;!(L=(I=N.next()).done);L=!0)R=I.value,R.style[r]=a,_reduceProperty(r,R)}catch(e){D=!0,M=e}finally{try{!L&&N.return&&N.return()}finally{if(D)throw M}}var V=!0,z=!1,G;try{for(var B=p[Symbol.iterator](),O,q;!(V=(O=B.next()).done);V=!0)q=O.value,_reduceText(q,h)}catch(e){z=!0,G=e}finally{try{!V&&B.return&&B.return()}finally{if(z)throw G}}}}}}},{key:"_convertObjectToPath",value:function(){var e=this;return new Promise(async function(){if(!1!==e._canConvertObjectToPath()){e.canvas.undoManager.checkpoint("Convert to path");var t=[],n=e.canvas.geometryPrecision,a=!0,r=!1,i;try{for(var o=e.canvas.selectedElements[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"rect"===l.localName){var d=_rectToPath(l,n);l.replace(d),t.push(d)}else if("circle"===l.localName){var u=_circleToPath(l,n);l.replace(u),t.push(u)}else if("ellipse"===l.localName){var c=_ellipseToPath(l,n);l.replace(c),t.push(c)}else if("line"===l.localName){var p=_lineToPath(l,n);l.replace(p),t.push(p)}else if("polyline"===l.localName){var h=_polylineToPath(l,n);l.replace(h),t.push(h)}else if("polygon"===l.localName){var b=_polygonToPath(l,n);l.replace(b),t.push(b)}else if("path"===l.localName)l.hasAttribute("data-bx-shape")&&l.removeAttribute("data-bx-shape"),t.push(l);else if("text"===l.localName){var x=e.canvas.fontsManager.canReplaceTextWithPaths(l);if(x){var m=await e.canvas.fontsManager.replaceTextWithPaths(l,e.canvas.geometryPrecision,e.canvas.transformPrecision);t=[].concat(_toConsumableArray(t),_toConsumableArray(m))}else t.push(l)}else t.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.canvas.selectedTextRange=null,e.canvas.selectedElements=t}})}},{key:"_canConvertObjectToPath",value:function(){var e=!1,t=!0,n=!1,a;try{for(var r=this.canvas.selectedElements[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,"rect"===o.localName||"circle"===o.localName||"ellipse"===o.localName||"line"===o.localName||"polyline"===o.localName||"polygon"===o.localName)e=!0;else if("path"===o.localName){if(o.hasAttribute("data-bx-shape"))e=!0;else{e=!1;break}}else if("text"===o.localName&&(e=this.canvas.fontsManager.canReplaceTextWithPaths(o),!1===e))break}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"_convertStrokeToPath",value:function(){console.log("convert stroke to path")}},{key:"_canConvertStrokeToPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName){var o=getComputedStyle(i).strokeWidth;if(0<parseFloat(o))return!0}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_openPath",value:function(){if(!1!==this._canOpenPath()){this.canvas.undoManager.checkpoint("Open path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_openPath2(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canOpenPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_canOpenPath2(i))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_closePath",value:function(){if(!1!==this._canClosePath()){this.canvas.undoManager.checkpoint("Close path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_closePath2(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canClosePath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_canClosePath2(i))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_reversePath",value:function(){if(!1!==this._canReversePath()){this.canvas.undoManager.checkpoint("Reverse path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_reversePath2(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canReversePath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape"))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_join",value:function(){if(!1!==this._canJoin()){this.canvas.undoManager.checkpoint("Join");var e=_toArray(this.canvas.selectedElements),t=e[0],n=e.slice(1),a=[],r=!0,i=!1,o;try{for(var s=this.canvas.selectedElements[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=void 0;"rect"===d.localName?u=_rectToPath(d,this.canvas.geometryPrecision):"circle"===d.localName?u=_circleToPath(d):"ellipse"===d.localName?u=_ellipseToPath(d):"line"===d.localName?u=_lineToPath(d):"polyline"===d.localName?u=_polylineToPath(d):"polygon"===d.localName?u=_polygonToPath(d):"path"===d.localName&&(u=d.cloneNode(),u.removeAttribute("data-bx-shape"));var c=_getTransformToElement(d,t.parentElement).toString();u.setAttribute("transform",c),u.setPathData(u.getPathData({normalize:!0})),_reduceTransform2(u,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision,preserveRotation:!1}),a.push(u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var p=a[0],h=a.slice(1),b=p.getPathData(),x=!0,m=!1,g;try{for(var v=h[Symbol.iterator](),y;!(x=(y=v.next()).done);x=!0){var f=y.value,_=f.getPathData();b=[].concat(_toConsumableArray(b),_toConsumableArray(_))}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}p.setPathData(b),t.replace(p);var w=!0,k=!1,A;try{for(var C=n[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.remove()}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}this.canvas.selectedElements=[p]}}},{key:"_canJoin",value:function(){if(2>this.canvas.selectedElements.length)return!1;var e=["rect","circle","ellipse","line","polygon","polyline","path"],t=!0,n=!1,a;try{for(var r=this.canvas.selectedElements[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!1===e.includes(o.localName))return!1}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!0}},{key:"_split",value:function(){if(!1!==this._canSplit()){this.canvas.undoManager.checkpoint("Break Apart");var e=_toArray(this.canvas.selectedElements),t=e[0],n=e.slice(1),a=[],r=!0,i=!1,o;try{for(var s=this.canvas.selectedElements[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"path"===d.localName){var u=d.getPathData({normalize:!0}),c=_getPathDataBySubpath(u);if(1<c.length){var p=_toArray(c),h=p[0],b=p.slice(1),x=d;x.setPathData(h),a.push(x);var m=!0,g=!1,v=void 0;try{for(var y=b[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=x.cloneNode();w.setPathData(_),x.after(w),a.push(w);for(var k=["fill","stroke"],A=0;A<k.length;A++){var C=k[A],S=_getPaintServer3(w,C);if(S)if("linearGradient"===S.localName||"radialGradient"===S.localName){var E=S,T=E.cloneNode(!0);T.id=this.canvas.generateUniqueID("gradient"),E.after(T),w.style.setProperty(C,"url(\"#"+T.id+"\")")}else if("pattern"===S.localName){var P=S;if(P.hasAttribute("href")){var L=_getParentPattern2(P),D=P.cloneNode();D.id=this.canvas.generateUniqueID(L.id),P.after(D),w.style.setProperty(C,"url(\"#"+D.id+"\")")}else{var M=_createElement13("svg:pattern");M.id=this.canvas.generateUniqueID(P.id),M.setAttribute("href","#"+P.id),P.after(M),w.style.setProperty(C,"url(\"#"+M.id+"\")")}}}}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}}else a.push(d)}else a.push(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.canvas.selectedElements=a}}},{key:"_canSplit",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")){var o=_getPathDataBySubpath(i.getPathData(!0));if(1<o.length)return!0}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_performBoolop",value:function(e){if(!1!==this._canPerformBoolop()){this.canvas.undoManager.checkpoint(_capitalize3(e));var t=_toArray(this.canvas.outermostSelectedElements),n=t[0],a=t.slice(1),r=this.canvas,i=r.geometryPrecision,o=r.transformPrecision,s=[],l=!0,d=!1,u;try{for(var c=this.canvas.outermostSelectedElements[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=void 0;"rect"===h.localName?b=_rectToPath(h,this.canvas.geometryPrecision):"circle"===h.localName?b=_circleToPath(h):"ellipse"===h.localName?b=_ellipseToPath(h):"line"===h.localName?b=_lineToPath(h):"polyline"===h.localName?b=_polylineToPath(h):"polygon"===h.localName?b=_polygonToPath(h):"path"===h.localName&&(b=h.cloneNode(),b.hasAttribute("data-bx-shape")&&b.removeAttribute("data-bx-shape"));var x=_getTransformToElement(h,n.parentElement).toString();b.setAttribute("transform",x),b.setPathData(b.getPathData({normalize:!0})),_reduceTransform2(b,{geometryPrecision:i,transformPrecision:o,preserveRotation:!1}),s.push(b)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var m=s[0],g=s.slice(1),v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=m.getPathData(),C=k.getPathData(),S=[];"unite"===e?S=_unite(A,C,i):"subtract"===e?S=_subtract(A,C,i):"intersect"===e?S=_intersect(A,C,i):"exclude"===e&&(S=_exclude(A,C,i)),m.setPathData(S)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}m.hasAttribute("d")?(n.replace(m),m.removeAttribute("data-bx-origin")):n.remove();var E=!0,T=!1,P;try{for(var L=a[Symbol.iterator](),D,M;!(E=(D=L.next()).done);E=!0)M=D.value,M.remove()}catch(e){T=!0,P=e}finally{try{!E&&L.return&&L.return()}finally{if(T)throw P}}this.canvas.selectedElements=m.hasAttribute("d")?[m]:[]}}},{key:"_canPerformBoolop",value:function(){if(2>this.canvas.outermostSelectedElements.length)return!1;var e=["rect","circle","ellipse","line","polygon","polyline","path"],t=!0,n=!1,a;try{for(var r=this.canvas.outermostSelectedElements[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!1===e.includes(o.localName))return!1}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!0}},{key:"_getSelectedPaintableElements",value:function(){var e=["circle","ellipse","line","path","polygon","polyline","rect","text","use"],t=[];return function n(a){var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,e.includes(d.localName)?t.push(d):("g"===d.localName||"a"===d.localName)&&n(d.children)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}(this.canvas.outermostSelectedElements),t}},{key:"canvas",get:function(){return this._shadowRoot.querySelector("#canvas")}},{key:"toolsDock",get:function(){return this["#tools-dock"]}},{key:"panelsDock",get:function(){return this["#panels-dock"]}},{key:"inspector",get:function(){return this["#inspector"]}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}]),t}(_CustomElement);customElements.define("bx-editor",BXEditorElement)}}{{var _BoxySVG$classes2=BoxySVG.classes,_DOMUndoManager=_BoxySVG$classes2.DOMUndoManager,_FontsManager2=_BoxySVG$classes2.FontsManager,_SnapManager=_BoxySVG$classes2.SnapManager,_serializeArtwork2=BoxySVG.utils.artworkExport.serializeArtwork,_importArtwork2=BoxySVG.utils.artworkImport.importArtwork,_prepareArtworkForInsertion=BoxySVG.utils.artworkGeneral.prepareArtworkForInsertion,_rasterizeArtwork=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_getClientBBox4=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$parsin2=BoxySVG.utils.parsing,_parseViewBox2=_BoxySVG$utils$parsin2.parseViewBox,_parseAspectRatio=_BoxySVG$utils$parsin2.parseAspectRatio,_BoxySVG$utils$elemen6=BoxySVG.utils.element,_svg3=_BoxySVG$utils$elemen6.svg,_createElement14=_BoxySVG$utils$elemen6.createElement,_sortByDomPosition2=_BoxySVG$utils$elemen6.sortByDomPosition,_closest5=_BoxySVG$utils$elemen6.closest,_extractImageSize=BoxySVG.utils.image.extractImageSize,_normalizeFontWeight2=BoxySVG.utils.fontGeneral.normalizeFontWeight,_normalize4=BoxySVG.utils.math.normalize,_connectNode=BoxySVG.utils.node.connectNode,_BoxySVG$utils$geomet6=BoxySVG.utils.geometry,_roundRect=_BoxySVG$utils$geomet6.roundRect,_combineRects4=_BoxySVG$utils$geomet6.combineRects,_rectContainsRect=_BoxySVG$utils$geomet6.rectContainsRect,_rectIntersectsRect3=_BoxySVG$utils$geomet6.rectIntersectsRect,_transformRect4=_BoxySVG$utils$geomet6.transformRect,_BoxySVG$utils$time=BoxySVG.utils.time,_sleep2=_BoxySVG$utils$time.sleep,_throttle=_BoxySVG$utils$time.throttle,_toCamelCase2=BoxySVG.utils.string.toCamelCase,_BoxySVG$utils$variab9=BoxySVG.utils.variables,_graphicsElementNames4=_BoxySVG$utils$variab9.graphicsElementNames,_hitTestPoints=_BoxySVG$utils$variab9.hitTestPoints,_defaultArtworkSVG=_BoxySVG$utils$variab9.defaultArtworkSVG,_BoxySVG$utils$transf4=BoxySVG.utils.transformGeneral,_getComputedTransform6=_BoxySVG$utils$transf4.getComputedTransform,_getTransformToElement2=_BoxySVG$utils$transf4.getTransformToElement,_getTransformFromPoints4=_BoxySVG$utils$transf4.getTransformFromPoints,defineProperty=Object.defineProperty,freeze=Object.freeze,minZoom=0.1,maxZoom=6e3,zoomSensitivity=450,scrollSensitivity=1.8,maxWheelDelta=20,rulerSize=14,mutationObserverOptions={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1},transformableElementNames=[].concat(_toConsumableArray(_graphicsElementNames4),["svg","g","a","use"]),_shadowHTML3="\n    <style>:host{display:block;width:100%;height:100%;overflow:hidden;outline:0;contain:strict;position:relative}#svg{touch-action:none}#artboards>[data-bx-artboard]:not(:last-child){display:none!important}</style>\n\n    <svg id=\"svg\" preserveAspectRatio=\"none\">\n      <g id=\"world\" transform=\"translate(0, 0)\">\n        <path id=\"outer-background\" style=\"fill: #ebeced; opacity: 0.96; pointer-events: none;\"></path>\n        <rect id=\"inner-background\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" style=\"fill: white; pointer-events: none;\"/>\n\n        <g id=\"artboards\">\n          <rect id=\"matte\" x=\"-1000000\" y=\"-1000000\" width=\"2000000\" height=\"2000000\" style=\"fill: rgba(0,0,0,0);\"/>\n          <g data-bx-artboard=\"master\"></g>\n        </g>\n\n        <g id=\"huds\">\n          <g is=\"bx-outlinehud\" id=\"outline-hud\"></g>\n          <g is=\"bx-viewboxhud\" id=\"view-box-hud\" enabled></g>\n          <g is=\"bx-manualguideshud\" id=\"manual-guides-hud\"></g>\n          <g is=\"bx-smartguideshud\" id=\"smart-guides-hud\"></g>\n          <g is=\"bx-transformhud\" id=\"transform-hud\"></g>\n          <g is=\"bx-patternhud\" id=\"pattern-hud\"></g>\n          <g is=\"bx-penseghud\" id=\"pen-seg-hud\"></g>\n          <g is=\"bx-penhud\" id=\"pen-hud\"></g>\n          <g is=\"bx-rubberbandhud\" id=\"rubber-band-hud\"></g>\n          <g is=\"bx-texthud\" id=\"text-hud\"></g>\n          <g is=\"bx-recthud\" id=\"rect-hud\"></g>\n          <g is=\"bx-circlehud\" id=\"circle-hud\"></g>\n          <g is=\"bx-ellipsehud\" id=\"ellipse-hud\"></g>\n          <g is=\"bx-trianglehud\" id=\"triangle-hud\"></g>\n          <g is=\"bx-ngonhud\" id=\"n-gon-hud\"></g>\n          <g is=\"bx-starhud\" id=\"star-hud\"></g>\n          <g is=\"bx-ringhud\" id=\"ring-hud\"></g>\n          <g is=\"bx-piehud\" id=\"pie-hud\"></g>\n          <g is=\"bx-coghud\" id=\"cog-hud\"></g>\n          <g is=\"bx-pathhud\" id=\"path-hud\"></g>\n          <g is=\"bx-linehud\" id=\"line-hud\"></g>\n          <g is=\"bx-polyhud\" id=\"poly-hud\"></g>\n          <g is=\"bx-cubicbezierseghud\" id=\"cubic-bezier-seg-hud\"></g>\n          <g is=\"bx-quadbezierseghud\" id=\"quad-bezier-seg-hud\"></g>\n          <g is=\"bx-lineseghud\" id=\"line-seg-hud\"></g>\n          <g is=\"bx-polylineseghud\" id=\"polyline-seg-hud\"></g>\n          <g is=\"bx-polygonseghud\" id=\"polygon-seg-hud\"></g>\n          <g is=\"bx-freehandhud\" id=\"freehand-hud\"></g>\n          <g is=\"bx-lineargradienthud\" id=\"linear-gradient-hud\"></g>\n          <g is=\"bx-radialgradienthud\" id=\"radial-gradient-hud\"></g>\n        </g>\n      </g>\n    </svg>\n\n    <bx-rulers id=\"rulers\" disabled></bx-rulers>\n\n    <div id=\"contexts\">\n      <bx-transformselectcontext id=\"transform-select-context\"></bx-transformselectcontext>\n      <bx-directselectcontext id=\"direct-select-context\"></bx-directselectcontext>\n      <bx-textcontext id=\"text-context\"></bx-textcontext>\n      <bx-cubicbeziercontext id=\"cubic-bezier-context\"></bx-cubicbeziercontext>\n      <bx-quadbeziercontext id=\"quad-bezier-context\"></bx-quadbeziercontext>\n      <bx-shapecontext id=\"shape-context\"></bx-shapecontext>\n      <bx-freehandcontext id=\"freehand-context\"></bx-freehandcontext>\n      <bx-linecontext id=\"line-context\"></bx-linecontext>\n      <bx-polylinecontext id=\"polyline-context\"></bx-polylinecontext>\n      <bx-polygoncontext id=\"polygon-context\"></bx-polygoncontext>\n    </div>\n  ",BXCanvasElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._selectedElements=[],e._selectedGuides=[],e._selectedTextRange=null,e._currentContainer=null,e._geometryPrecision=3,e._transformPrecision=6,e._isPointerOverCanvas=!1,e._connectedCallbacks=[],e._updateDocumentFontsTh200=_throttle(e._updateDocumentFonts,100,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML3;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var l=!0,d=!1,u;try{for(var c=function(){var t=h.value;defineProperty(e,_toCamelCase2(t.id),{get:function(){return t}})},p=e["#huds"].children[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0)c()}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}var b=!0,x=!1,m;try{for(var g=function(){var t=y.value;defineProperty(e,_toCamelCase2(t.id),{get:function(){return t}})},v=e["#contexts"].children[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0)g()}catch(e){x=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw m}}e["#svg"].pauseAnimations(),e["#svg"].setAttribute("width",screen.width+"px"),e["#svg"].setAttribute("height",screen.height+"px"),e["#svg"].setAttribute("viewBox","0 0 "+screen.width+" "+screen.height),e._undoManager=new _DOMUndoManager(e["#artboards"]),e._snapManager=new _SnapManager(e),e._fontsManager=new _FontsManager2(e["#artboards"]);var f=new MutationObserver(function(t){return e._onArtboardMutation(t)});return f.observe(e["#artboards"],mutationObserverOptions),e.addEventListener("pointerenter",function(){return e._isPointerOverCanvas=!0}),e.addEventListener("pointerleave",function(){return e._isPointerOverCanvas=!1}),e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e.addEventListener("scroll",function(t){return e._onScroll(t)}),e._shadowRoot.addEventListener("wheel",function(t){return e._onWheel(t)}),e._undoManager.addEventListener("undo",function(t){return e._onUndoManagerUndoOrRedo(t)}),e._undoManager.addEventListener("redo",function(t){return e._onUndoManagerUndoOrRedo(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerApp=_closest5(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this.tabIndex=0,this.showManualGuides=this._ownerApp.getConfig("bx-canvas:showManualGuides")||!1,this.showSmartGuides=this._ownerApp.getConfig("bx-canvas:showSmartGuides")||!1;var t=!0,n=!1,a;try{for(var r=this._connectedCallbacks[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}if(this._connectedCallbacks=[],this._updateGuidesVisibility(),this._updateDocumentFonts(),_sleep2(1e3).then(function(){return e._updateRulers()}),!this._didSetOptimalZoomAfterFirstTimeConnected){var s=function t(){!1===document.webkitHidden&&e.isConnected&&!e._didSetOptimalZoomAfterFirstTimeConnected&&(document.removeEventListener("visibilitychange",t),l&&l.unobserve(e),e._didSetOptimalZoomAfterFirstTimeConnected=!0,e._zoomOptimal())},l=window.ResizeObserver?new ResizeObserver(s):null;l?l.observe(this):(this._didSetOptimalZoomAfterFirstTimeConnected=!0,_sleep2(200).then(function(){return e._zoomOptimal()}),_sleep2(300).then(function(){return e._zoomOptimal()}),_sleep2(800).then(function(){return e._zoomOptimal()}),_sleep2(1200).then(function(){return e._zoomOptimal()})),document.addEventListener("visibilitychange",s),this._zoomOptimal()}}},{key:"_onPointerDown",value:function(e){var t=this;if(1===e.button){this.setPointerCapture(e.pointerId);var n=e.clientX,a=e.clientY,r,i;this.addEventListener("pointermove",r=function(e){var r=!0,i=!1,o;try{for(var s=e.getCoalescedEvents()[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.clientX-n,c=d.clientY-a;t._scrollBy(u,c),n=d.clientX,a=d.clientY}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this.addEventListener("lostpointercapture",i=function(){t.removeEventListener("pointermove",r),t.removeEventListener("lostpointercapture",i)})}}},{key:"_onScroll",value:function(){this.scrollLeft=0,this.scrollTop=0,document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.scrollLeft=0,document.body.scrollTop=0}},{key:"_onWheel",value:function(e){e.preventDefault();var t=_normalize4(e.wheelDeltaX,-maxWheelDelta,maxWheelDelta,1),n=_normalize4(e.wheelDeltaY,-maxWheelDelta,maxWheelDelta,1);if((e.metaKey||e.ctrlKey)&&!e.altKey&&!e.shiftKey){var a=new SVGPoint(e.clientX,e.clientY);this._zoomBy(n/zoomSensitivity,a)}else this._scrollBy(t/scrollSensitivity,n/scrollSensitivity)}},{key:"_onArtboardMutation",value:function(e){this.dispatchEvent(new CustomEvent("artboardmutation",{detail:e}));var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,o.target===this["#artboards"])"childList"===o.type&&this._onCurrentArtboardChange();else if(o.target.parentElement===this["#artboards"])"viewBox"===o.attributeName&&this._onViewBoxChange();else if("defs"!==o.target.localName)"style"===o.target.localName?o.target.hasAttribute("data-bx-fonts")&&this._updateDocumentFontsTh200():"#text"===o.target.nodeName&&o.target.parentElement&&o.target.parentElement.hasAttribute("data-bx-fonts")&&this._updateDocumentFontsTh200();else if(0<o.removedNodes.length){var s=!0,l=!1,d=void 0;try{for(var u=o.removedNodes[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,p.hasAttribute&&p.hasAttribute("data-bx-fonts")){this._updateDocumentFontsTh200();break}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}else if(0<o.addedNodes.length){var h=!0,b=!1,x=void 0;try{for(var m=o.addedNodes[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,v.hasAttribute&&v.hasAttribute("data-bx-fonts")){this._updateDocumentFontsTh200();break}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onViewBoxChange",value:function(){this._updateOverlays()}},{key:"_onCurrentArtboardChange",value:function(){this.dispatchEvent(new CustomEvent("currentartboardchange")),this._updateOverlays(),this._zoomOptimal()}},{key:"_onUndoManagerUndoOrRedo",value:function(e){var t=this,n=e.detail,a=n.addedNodes,r=n.removedNodes,i=n.modifiedNodes,o=new Set(this.selectedElements),s=null,l=!0,d=!1,u;try{for(var c=a[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,o.add(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var b=!0,x=!1,m;try{for(var g=i[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,o.add(y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}var f=!0,_=!1,w;try{for(var k=r[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,o.delete(C)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}if(o=[].concat(_toConsumableArray(o)).filter(function(e){return t.isSelectableElement(e)}),0<o.length){var S=o[0];S.parentElement!==this.currentArtboard&&(s=S.parentElement)}if(this.currentContainer=s,this.selectedElements=o,this.selectedTextRange){var E=this.selectedTextRange,T=E.startContainer,P=E.endContainer,L=!1,D=!0,M=!1,N;try{for(var I=o[Symbol.iterator](),R,V;!(D=(R=I.next()).done);D=!0)V=R.value,(V.contains(T)||V.contains(P))&&(L=!0)}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}!1==L&&(this.selectedTextRange=null)}}},{key:"setArtwork",value:async function(e){for(var t=[].concat(_toConsumableArray(this["#artboards"].children)),n=0,a;n<t.length;n++)a=t[n],a!==this["#matte"]&&a.remove();var r=_svg3(_templateObject3),i=!0,o=!1,s;try{for(var l=e.attributes[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.name,p=u.value;"transform"===c?r.setAttribute("data-bx-transform",p):r.setAttribute(c,p)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}for(;e.firstChild;)r.appendChild(e.firstChild);this["#artboards"].append(r),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,this.undoManager.clear(),this.dispatchEvent(new CustomEvent("artworkchange"))}},{key:"setDefaultArtwork",value:function(){var e=_importArtwork2(_defaultArtworkSVG);this.setArtwork(e)}},{key:"insertBitmap",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pointer",n=await _extractImageSize(e),a=n.width,r=n.height,i=_createElement14("svg:image");i.setAttribute("href",e),i.setAttribute("width",a),i.setAttribute("height",r);var o=this.currentContainer||this.currentArtboard,s=o.getScreenCTM().inverse(),l=this._ownerApp.pointerClientPoint.matrixTransform(s);o.append(i);var d=i.getBBox();i.setAttribute("x",l.x-d.width/2),i.setAttribute("y",l.y-d.height/2),this.selectedElements=[i]}},{key:"insertElementIntoBBox",value:function(e,t){var n=this.currentArtboard,a=this["#world"].getScreenCTM().inverse(),r=_transformRect4(t,a),i=e.getBBox(),o=i.x,s=i.y,l=i.width,d=i.height,u=new SVGPoint(o,s),c=new SVGPoint(o+l,s),p=new SVGPoint(o+l,s+d),h=new SVGPoint(r.x,r.y),b=new SVGPoint(r.x+r.width,r.y),x=new SVGPoint(r.x+r.width,r.y+r.height),m=_getTransformFromPoints4(u,c,p,h,b,x);e.setAttribute("transform",m.toString()),n.append(e)}},{key:"insertArtworkIntoBBox",value:function(e,t){var n=this.currentArtboard,a=this.extractArtwork(),r=this["#world"].getScreenCTM().inverse(),i=_transformRect4(t,r),o=_createElement14("svg:g");_prepareArtworkForInsertion(e,a);{!1===e.hasAttribute("viewBox")&&e.setAttribute("viewBox","0 0 "+e.width.baseVal.value+" "+e.height.baseVal.value);var s=_parseViewBox2(e.getAttribute("viewBox")),l=_parseAspectRatio(e.getAttribute("preserveAspectRatio")||"xMidYMid meet"),d=_slicedToArray(l,2),u=d[0],c=d[1],p=i.width/s.width,h=i.height/s.height;"none"!==u&&"meet"===c?p>h?p=h:h>p&&(h=p):"none"!==u&&"slice"===c&&(p<h?p=h:h<p&&(h=p));var b=i.x-s.x*p,x=i.y-s.y*h;u.includes("xMid")&&(b+=(i.width-s.width*p)/2),u.includes("xMax")&&(b+=i.width-s.width*p),u.includes("YMid")&&(x+=(i.height-s.height*h)/2),u.includes("YMax")&&(x+=i.height-s.height*h);var m=new SVGMatrix;m.translateSelf(b,x),m.scaleNonUniformSelf(p,h),o.setAttribute("transform",m)}for(var g=[].concat(_toConsumableArray(e.children)),v=0,y;v<g.length;v++){if(y=g[v],"defs"===y.localName)for(var f=[].concat(_toConsumableArray(y.children)),_=0,w;_<f.length;_++)if(w=f[_],"style"===w.localName&&w.hasAttribute("data-bx-fonts")){var k=w.getAttribute("data-bx-fonts");!1===this.artboards.querySelector("style[data-bx-fonts=\""+k+"\"]")&&this.defs.append(w)}else this.createDefsIfMissing(),this.defs.append(w);o.append(y)}return n.append(o),o}},{key:"insertArtwork",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"canvasCenter",n=this.currentContainer||this.currentArtboard,a=[],r=this.extractArtwork();_prepareArtworkForInsertion(e,r);for(var i=[].concat(_toConsumableArray(e.children)),o=0,s;o<i.length;o++)if(s=i[o],"defs"===s.localName){for(var l=[].concat(_toConsumableArray(s.children)),d=0,u;d<l.length;d++)if(u=l[d],"style"===u.localName&&u.hasAttribute("data-bx-fonts")){var c=u.getAttribute("data-bx-fonts");null===this.artboards.querySelector("style[data-bx-fonts=\""+c+"\"]")&&this.defs.append(u)}else this.createDefsIfMissing(),this.defs.append(u);}else if(transformableElementNames.includes(s.localName)){var p=_getTransformToElement2(n,this.currentArtboard),h=_getComputedTransform6(s),b=new SVGMatrix;b.multiplySelf(p.inverse()),b.multiplySelf(h),b.isIdentity()?s.removeAttribute("transform"):s.setAttribute("transform",b.toString()),n.append(s),a.push(s)}else n.append(s);if("original"!==t){var x=a.map(function(e){return _getClientBBox4(e)});x=x.filter(function(e){return 0<e.width||0<e.height});var m=_combineRects4(x),g;g="canvasCenter"===t?new SVGPoint(this.clientLeft+this.clientWidth/2,this.clientTop+this.clientHeight/2):"belowOriginal"===t?new SVGPoint(m.x+m.width/2+15,m.y+m.height/2+15):this._ownerApp.pointerClientPoint;var v=g.x-(m.x+m.width/2),y=g.y-(m.y+m.height/2),f=!0,_=!1,w;try{for(var k=a[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.getScreenCTM(),E=S.inverse(),T=_getComputedTransform6(C);T.multiplySelf(E),T.translateSelf(v,y),T.multiplySelf(S),C.setAttribute("transform",T.toString())}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}this.selectedElements=a}},{key:"extractArtwork",value:function(){this.removeUnusedDefs();var e=_createElement14("svg:svg"),t=this.masterArtboard,n=!0,a=!1,r;try{for(var i=t.attributes[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s.name,d=s.value;if("data-bx-artboard"===l)continue;else"data-bx-transform"===l?e.setAttribute("transform",d):e.setAttribute(l,d)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var u=!0,c=!1,p;try{for(var h=t.childNodes[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,e.append(x.cloneNode(!0))}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}if("symbol"===this.currentArtboard.getAttribute("data-bx-artboard")){var m=this.currentArtboard,g=e.querySelector("symbol#"+m.id),v=!0,y=!1,f;try{for(var _=g.attributes[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,l=k.name,d=k.value;!1===m.hasAttribute(l)&&g.removeAttribute(l)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=!0,C=!1,S;try{for(var E=m.attributes[Symbol.iterator](),T;!(A=(T=E.next()).done);A=!0){var P=T.value,l=P.name,d=P.value;"data-bx-artboard"!==l&&g.setAttribute(l,d)}}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}g.innerHTML=m.innerHTML}if("pattern"===this.currentArtboard.getAttribute("data-bx-artboard")){var L=this.currentArtboard,D=e.querySelector("#"+L.id),M=!0,N=!1,I;try{for(var R=D.attributes[Symbol.iterator](),V;!(M=(V=R.next()).done);M=!0){var z=V.value,l=z.name,d=z.value;!1===L.hasAttribute(l)&&D.removeAttribute(l)}}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}var G=!0,B=!1,O;try{for(var q=L.attributes[Symbol.iterator](),j;!(G=(j=q.next()).done);G=!0){var U=j.value,l=U.name,d=U.value;"data-bx-artboard"!==l&&D.setAttribute(l,d)}}catch(e){B=!0,O=e}finally{try{!G&&q.return&&q.return()}finally{if(B)throw O}}D.innerHTML=L.innerHTML}return e}},{key:"extractArtworkWithSelectedElements",value:function(){var e=this.extractArtworkWithElements(this.outermostSelectedElements);return e}},{key:"extractArtworkWithViewBoxElements",value:function(){var e=[],t=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")),n=this.currentArtboard.getScreenCTM().inverse(),a=!0,r=!1,i;try{for(var o=this.currentArtboard.children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,[].concat(_toConsumableArray(_graphicsElementNames4),["svg","g","a","use"]).includes(l.localName)){var d=_getClientBBox4(l);d=_transformRect4(d,n),_rectIntersectsRect3(t,d)&&e.push(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var u=this.extractArtworkWithElements(e);return u.setAttribute("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height),u.setAttribute("width",t.width),u.setAttribute("height",t.height),u}},{key:"extractArtworkWithElements",value:function(e){this.removeUnusedDefs(),e=_sortByDomPosition2(e);var t=this._getIdsReferencedByElementsAndTheirDescendants(e),n=[],a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=this.currentArtboard.querySelector("#"+l);d||this.currentArtboard===this.masterArtboard||(d=this.masterArtboard.querySelector("#"+l)),d&&n.push(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}n=n.filter(function(t){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.contains(t)||l===t)return!1}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var d=!0,u=!1,c;try{for(var p=n[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)if(b=h.value,b.contains(t)&&b!==t)return!1}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return!0});var u=_createElement14("svg:svg"),c=_createElement14("svg:defs");u.append(c);var p=!0,h=!1,b;try{for(var x=n[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g.closest("defs")?c.append(g.cloneNode(!0)):u.append(g.cloneNode(!0))}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}var v=!0,y=!1,f;try{for(var _=e[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=_getTransformToElement2(k,this.currentArtboard),C=k.cloneNode(!0);C.setAttribute("transform",A),u.append(C)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var S=!0,E=!1,T;try{for(var P=this["#artboards"].querySelectorAll("style")[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,c.append(D.cloneNode(!0))}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}{_connectNode(u);var M=new _FontsManager2(u);M.removeUnusedFamilies(),u.remove()}0===c.childElementCount&&c.remove();{var N=e.map(function(e){return _getClientBBox4(e)}),I=_combineRects4(N);I=_transformRect4(I,this.currentArtboard.getScreenCTM().inverse());var R=I.x+" "+I.y+" "+I.width+" "+I.height;u.setAttribute("viewBox",R),u.setAttribute("width",I.width),u.setAttribute("height",I.height)}return u}},{key:"removeUnusedDefs",value:function(){for(var e=document.createNodeIterator(this.artboards,NodeFilter.SHOW_ELEMENT),t=null,n=new Set,a=new Set,r=new Set,i=new Set;t=e.nextNode();){var o=getComputedStyle(t),s=o.fill,l=o.stroke,d=o.filter,u=o.mask,c=o.clipPath;if(s&&s.startsWith("url(")){var p=s.substring(6,s.length-2);n.add(p)}if(l&&l.startsWith("url(")){var h=l.substring(6,l.length-2);n.add(h)}if(d&&d.startsWith("url(")){var b=d.substring(6,d.length-2);a.add(b)}if(c&&c.startsWith("url(")){var x=c.substring(6,u.length-2);r.add(x)}if(u&&u.startsWith("url(")){var m=u.substring(6,u.length-2);i.add(m)}}var g=!0,v=!1,y;try{for(var f=this.artboards.querySelectorAll("linearGradient, radialGradient")[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,!1===n.has(w.id)&&w.remove()}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}var k=!0,A=!1,C;try{for(var S=this.artboards.querySelectorAll("pattern[href]")[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,!1===n.has(T.id)&&T.remove()}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}var P=!0,L=!1,D;try{for(var M=this.artboards.querySelectorAll("filter")[Symbol.iterator](),N,d;!(P=(N=M.next()).done);P=!0)d=N.value,!1===a.has(d.id)&&d.remove()}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}var I=!0,R=!1,V;try{for(var z=this.artboards.querySelectorAll("clipPath, clippath")[Symbol.iterator](),G,c;!(I=(G=z.next()).done);I=!0)c=G.value,!1===r.has(c.id)&&c.remove()}catch(e){R=!0,V=e}finally{try{!I&&z.return&&z.return()}finally{if(R)throw V}}var B=!0,O=!1,q;try{for(var j=this.artboards.querySelectorAll("mask")[Symbol.iterator](),U,u;!(B=(U=j.next()).done);B=!0)u=U.value,!1===i.has(u.id)&&u.remove()}catch(e){O=!0,q=e}finally{try{!B&&j.return&&j.return()}finally{if(O)throw q}}this._fontsManager.removeUnusedFamilies(!0,!1)}},{key:"editSymbol",value:function(e){var t=this.masterArtboard.querySelector("symbol#"+e);if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Symbol"),"pattern"===this.currentArtboard.getAttribute("data-bx-artboard")?this.editPatternEnd(!1):"symbol"===this.currentArtboard.getAttribute("data-bx-artboard")&&this.editSymbolEnd(!1);var n=_svg3(_templateObject4,t.innerHTML),a=!0,r=!1,i;try{for(var o=t.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;n.setAttribute(d,u)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#artboards"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editSymbolEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if("symbol"===this.currentArtboard.getAttribute("data-bx-artboard")){e&&this.undoManager.checkpoint("Edit Symbol");var t=this.currentArtboard,n=this.masterArtboard.querySelector("symbol#"+t.id),a=!0,r=!1,i;try{for(var o=n.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;!1===t.hasAttribute(d)&&n.removeAttribute(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var c=!0,p=!1,h;try{for(var b=t.attributes[Symbol.iterator](),x;!(c=(x=b.next()).done);c=!0){var m=x.value,d=m.name,u=m.value;"data-bx-artboard"!==d&&n.setAttribute(d,u)}}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editPattern",value:function(e){var t=this.masterArtboard.querySelector("pattern#"+e);if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Pattern"),"pattern"===this.currentArtboard.getAttribute("data-bx-artboard")?this.editPatternEnd(!1):"symbol"===this.currentArtboard.getAttribute("data-bx-artboard")&&this.editSymbolEnd(!1);var n=_svg3(_templateObject5,t.innerHTML),a=!0,r=!1,i;try{for(var o=t.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;n.setAttribute(d,u)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#artboards"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editPatternEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if("pattern"===this.currentArtboard.getAttribute("data-bx-artboard")){e&&this.undoManager.checkpoint("Edit Pattern");var t=this.currentArtboard,n=this.masterArtboard.querySelector("pattern#"+t.id),a=!0,r=!1,i;try{for(var o=n.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;!1===t.hasAttribute(d)&&n.removeAttribute(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var c=!0,p=!1,h;try{for(var b=t.attributes[Symbol.iterator](),x;!(c=(x=b.next()).done);c=!0){var m=x.value,d=m.name,u=m.value;"data-bx-artboard"!==d&&n.setAttribute(d,u)}}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"zoomIn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._isPointerOverCanvas?this._zoomBy(0.2,this._ownerApp.pointerClientPoint):this._zoomBy(0.2)}},{key:"zoomOut",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._isPointerOverCanvas?this._zoomBy(-0.2,this._ownerApp.pointerClientPoint):this._zoomBy(-0.2)}},{key:"zoomToViewBox",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top-left",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(this.currentArtboard.hasAttribute("viewBox")){var a=_parseViewBox2(this.currentArtboard.getAttribute("viewBox"));this._zoomToArea(a,e,t,n)}}},{key:"zoomToFitAll",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top-left",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=this.currentArtboard.getBBox();this._zoomToArea(a,e,t,n)}},{key:"_zoomToArea",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top-left",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,r=this["#svg"].getScreenCTM(),i=r.inverse(),o=_transformRect4(this.getBoundingClientRect(),i),s=SVGRect.fromRect(e);if(o.x+=n,o.y+=n,o.width-=2*n,o.height-=2*n,this.showManualGuides&&(o.x+=rulerSize,o.y+=rulerSize,o.width-=rulerSize,o.height-=rulerSize),0<s.width&&0<s.height){var l=o.width/s.width,d=o.height/s.height;l>d?l=d:d>l&&(d=l),!1===a&&(1<l||1<d)&&(l=1,d=1);var u=o.x-s.x*l,c=o.y-s.y*d;"center"===t&&(u+=(o.width-s.width*l)/2,c+=(o.height-s.height*d)/2);var p=new SVGMatrix;p.translateSelf(u,c),p.scaleNonUniformSelf(l,d),this["#world"].setAttribute("transform",p),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}}},{key:"_zoomOptimal",value:function(){var e=!1;if(this.currentArtboard.hasAttribute("viewBox")){var t=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")),n=t.x,a=t.y,r=t.width,i=t.height;0!==r&&0!==i&&(e=!0)}e?this.zoomToViewBox("top-left"):this.zoomToFitAll("top-left")}},{key:"_zoomBy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0.3,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null===t){var n=this.getBoundingClientRect();t=new SVGPoint(n.x+n.width/2,n.y+n.height/2)}var a=_getComputedTransform6(this["#world"]),r=this["#svg"].getScreenCTM().inverse(),i=t.matrixTransform(r);if(0<a.a){100*(a.a+e*a.a)<minZoom?e=(minZoom-100*a.a)/(100*a.a):100*(a.a+e*a.a)>maxZoom&&(e=(maxZoom-100*a.a)/(100*a.a));var o=new SVGMatrix;o.scaleSelf(1+e,i.x,i.y),o.multiplySelf(a),this["#world"].setAttribute("transform",o),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}}},{key:"_scrollBy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")||"0 0 0 0"),a=_transformRect4(n,this["#world"].getScreenCTM()),r=SVGRect.fromRect(this.getBoundingClientRect()),i=0!==n.width||0!==n.height;this.showManualGuides&&(r.x+=rulerSize,r.y+=rulerSize,r.width-=rulerSize,r.height-=rulerSize);var o=SVGRect.fromRect(a);o.x+=e,o.y+=t,a=_roundRect(a,0),r=_roundRect(r,0),o=_roundRect(o,0),i&&(_rectContainsRect(r,a)?(o.width<r.width&&(o.x<r.x?o.x=r.x:o.x+o.width>r.x+r.width&&(o.x=r.x+r.width-o.width)),o.height<r.height&&(o.y<r.y?o.y=r.y:o.y+o.height>r.y+r.height&&(o.y=r.y+r.height-o.height))):!1===_rectIntersectsRect3(r,a)&&(o.x+o.width<r.x?o.x=r.x-o.width:o.x>r.x+r.width&&(o.x=r.x+r.width),o.y+o.height<r.y?o.y=r.y-o.height:o.y>r.y+r.height&&(o.y=r.y+r.height)));var s=o.x-a.x,l=o.y-a.y,d=new SVGMatrix;d.translateSelf(s,l),d.multiplySelf(_getComputedTransform6(this["#world"])),this["#world"].setAttribute("transform",d),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}},{key:"_updateOverlays",value:function(){var e=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")||"0 0 0 0"),t=e.x,n=e.y,a=e.width,r=e.height;this["#inner-background"].setAttribute("x",t),this["#inner-background"].setAttribute("y",n),this["#inner-background"].setAttribute("width",a),this["#inner-background"].setAttribute("height",r);var i=1e6;this["#outer-background"].setAttribute("d","\n        M "+-i+", "+-i+"\n        L "+2*i+", "+-i+"\n        L "+2*i+", "+2*i+"\n        L "+-i+", "+2*i+"\n        Z\n        M "+t+", "+n+"\n        L "+t+", "+(n+r)+"\n        L "+(t+a)+", "+(n+r)+"\n        L "+(t+a)+", "+n+"\n        Z\n      ")}},{key:"_updateRulers",value:function(){if(this.showManualGuides){var e=this["#world"].getScreenCTM();if(0!==e.determinant()){var t=_transformRect4(this.getBoundingClientRect(),e.inverse());this["#rulers"].value=[t.x,t.y,this.scale]}}}},{key:"_updateGuidesVisibility",value:function(){!0===this._showManualGuides?(this["#manual-guides-hud"].setAttribute("enabled",""),this["#rulers"].setAttribute("enabled",""),this._updateRulers()):(this["#manual-guides-hud"].removeAttribute("enabled"),this["#rulers"].removeAttribute("enabled")),!0===this._showSmartGuides?this["#smart-guides-hud"].setAttribute("enabled",""):this["#smart-guides-hud"].removeAttribute("enabled")}},{key:"_updateDocumentFonts",value:async function(){document.fonts.clear();var e=!0,t=!1,n;try{for(var a=this._fontsManager.getFonts()[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.load(),document.fonts.add(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"generateUniqueID",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=0,a;n<Infinity;n+=1)if(a=e+"-"+n,!this["#artboards"].querySelector("#"+a)){if(!t)return a;if(!t.querySelector("#"+a))return a}}},{key:"_getIdsReferencedByElementsAndTheirDescendants",value:function(e){e=_sortByDomPosition2(e);var t=new Set,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=!0,d=!1,u=void 0;try{for(var c=this._getIdsReferencedByElementAndItsDescendants(s)[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,t.add(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return[].concat(_toConsumableArray(t))}},{key:"_getIdsReferencedByElementAndItsDescendants",value:function(e){var t=this,n=new Set,a=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"];return function e(r){for(var i=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT),o=null;o=i.nextNode();){var s=getComputedStyle(o),l=!0,d=!1,u=void 0;try{for(var c=a[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=s.getPropertyValue(h);if(b&&b.startsWith("url(\"#")){var x=b.substring(6,b.length-2);if(!1===n.has(x)){n.add(x);var m=t.currentArtboard.querySelector("#"+x);m||t.currentArtboard===t.masterArtboard||(m=t.masterArtboard.querySelector("#"+x)),m&&e(m)}else n.add(x)}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(o.href&&"#"===o.href.baseVal[0]){var g=o.href.baseVal.substring(1,o.href.baseVal.length);if(!1===n.has(g)){n.add(g);var v=t.currentArtboard.querySelector("#"+g);v||t.currentArtboard===t.masterArtboard||(v=t.masterArtboard.querySelector("#"+g)),v&&e(v)}else n.add(g)}}}(e),[].concat(_toConsumableArray(n))}},{key:"getBoundingClientRect",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBoundingClientRect",this).call(this);return e?new SVGRect(n.x+rulerSize,n.y+rulerSize,n.width-rulerSize,n.height-rulerSize):n}},{key:"getHitArtboardElements",value:function(e,t){var n=[],a=!0,r=!1,i;try{for(var o=_hitTestPoints[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=_slicedToArray(s.value,2),d=l[0],u=l[1],c=this._shadowRoot.elementFromPoint(e+d,t+u);if(c){if("tspan"===c.localName||"textPath"===c.localName)c=c.closest("text");else if("a"===c.localName){var p=c.closest("text");p&&(c=p)}!n.includes(c)&&this.currentArtboard.contains(c)&&n.push(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return _sortByDomPosition2(n)}},{key:"getArtboardElementFromPoint",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);if(n){if("tspan"===n.localName||"textPath"===n.localName)n=n.closest("text");else if("a"===n.localName){var a=n.closest("text");a&&(n=a)}!1===this.currentArtboard.contains(n)&&(n=null)}return n}},{key:"selectAll",value:function(){var e=[],t=this.currentContainer||this.currentArtboard,n=!0,a=!1,r;try{for(var i=t.children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,this.isSelectableElement(s)&&e.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this.selectedElements=[].concat(e)}},{key:"deselectAll",value:function(){this.selectedElements=[],this.currentContainer=null,this.selectedTextRange=null}},{key:"captureVisibleCanvasArea",value:function(){var e=this;return new Promise(async function(t){var n=e["#svg"].getBoundingClientRect(),a=_parseViewBox2(e.currentArtboard.getAttribute("viewBox")),r=a.x,i=a.y,o=a.width,s=a.height,l=e["#svg"].cloneNode(),d=e["#world"].cloneNode();l.append(d),d.append(e["#outer-background"].cloneNode(!0)),d.append(e["#inner-background"].cloneNode(!0)),d.append(e.artboards.cloneNode(!0));var u=_createElement14("svg:rect");u.setAttribute("x",r),u.setAttribute("y",i),u.setAttribute("width",o),u.setAttribute("height",s),u.setAttribute("style","\n          fill: none;\n          stroke: #646464;\n          stroke-width: 1;\n          vector-effect: non-scaling-stroke;\n        "),d.appendChild(u),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("width",n.width+"px"),l.setAttribute("height",n.height+"px"),l.style.background="white";var c=_serializeArtwork2(l,"html"),p=await _rasterizeArtwork(c,"png",1,"rgba(0, 0, 0, 0)");t(p)})}},{key:"isSelectableElement",value:function(e){return!1!==transformableElementNames.includes(e.localName)&&e.parentElement!==this["#artboards"]&&!1!==this.currentArtboard.contains(e)&&!e.closest("defs")&&(e.closest("text")&&"text"!==e.localName?!1:!0)}},{key:"isPointOverCanvas",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);return null!==n}},{key:"createDefsIfMissing",value:function(){if(null===this.defs){var e=_createElement14("svg:defs");this.masterArtboard.prepend(e)}}},{key:"whenConnected",get:function(){var e=this;return new Promise(function(t){e.isConnected?t():e._connectedCallbacks.push(t)})}},{key:"defs",get:function(){return this.masterArtboard.querySelector("defs")}},{key:"selectedElements",get:function(){return freeze([].concat(_toConsumableArray(this._selectedElements)))},set:function(e){this._selectedElements=e,this.dispatchEvent(new CustomEvent("selectedelementschange"))}},{key:"selectedGuides",get:function(){return this._selectedGuides},set:function(e){this._selectedGuides=e,this.dispatchEvent(new CustomEvent("selectedguideschange"))}},{key:"selectedTextRange",get:function(){return this._selectedTextRange},set:function(e){(null!==this._selectedTextRange||null!==e)&&(this._selectedTextRange&&e&&this._selectedTextRange.startContainer===e.startContainer&&this._selectedTextRange.endContainer===e.endContainer&&this._selectedTextRange.startOffset===e.startOffset&&this._selectedTextRange.endOffset===e.endOffset||(this._selectedTextRange=e,this.dispatchEvent(new CustomEvent("selectedtextrangechange"))))}},{key:"outermostSelectedElements",get:function(){var e=this.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=!0,d=!0,u=!1,c=void 0;try{for(var p=e[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)if(b=h.value,b!==s&&b.contains(s)){l=!1;break}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}l&&t.push(s)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return freeze(t)}},{key:"currentContainer",get:function(){return this._currentContainer},set:function(e){this._currentContainer=e,this.dispatchEvent(new CustomEvent("currentcontainerchange"))}},{key:"zoom",get:function(){var e=this["#world"].transform.baseVal[0].matrix.a;return 0<e?100*e:minZoom},set:function(e){var t;if(this._isPointerOverCanvas)t=this._ownerApp.pointerClientPoint;else{var n=this.getBoundingClientRect();t=new SVGPoint(n.x+n.width/2,n.y+n.height/2)}var a=_normalize4(e,minZoom,maxZoom)/100,r=this["#svg"].getScreenCTM().inverse(),i=t.matrixTransform(r),o=new SVGMatrix;o.scaleSelf(a/this.scale,i.x,i.y),o.multiplySelf(_getComputedTransform6(this["#world"])),this["#world"].setAttribute("transform",o),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}},{key:"scale",get:function(){return this.zoom/100},set:function(e){this.zoom=100*e}},{key:"geometryPrecision",get:function(){return this._geometryPrecision}},{key:"transformPrecision",get:function(){return this._transformPrecision}},{key:"huds",get:function(){return this["#huds"]}},{key:"rulers",get:function(){return this["#rulers"]}},{key:"artboards",get:function(){return this["#artboards"]}},{key:"masterArtboard",get:function(){return this["#artboards"].children[1]}},{key:"currentArtboard",get:function(){return this["#artboards"].lastElementChild}},{key:"undoManager",get:function(){return this._undoManager}},{key:"snapManager",get:function(){return this._snapManager}},{key:"fontsManager",get:function(){return this._fontsManager}},{key:"showManualGuides",get:function(){return this._showManualGuides},set:function(e){this._showManualGuides=e,this._ownerApp.setConfig("bx-canvas:showManualGuides",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesVisibility()}},{key:"showSmartGuides",get:function(){return this._showSmartGuides},set:function(e){this._showSmartGuides=e,this._ownerApp.setConfig("bx-canvas:showSmartGuides",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesVisibility()}}]),t}(_CustomElement);customElements.define("bx-canvas",BXCanvasElement)}}{{var _shadowHTML4="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:38px;display:flex;box-sizing:border-box}#buttons{position:relative;width:38px;margin-top:-1px;display:flex;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#c4c2c4;overflow:auto}#buttons::-webkit-scrollbar{display:none}#buttons x-button[pressed]{border-color:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 20%));background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#buttons::before{content:\"\";position:absolute;bottom:0;right:0;width:1px;height:100%;background:#adadad;display:block}#cog-tool-button>x-icon{width:19px;height:19px}x-popover{--align: right}#transform-tool-popover{margin-top:20px}</style>\n\n    <x-buttons id=\"buttons\" tracking=\"1\">\n      <x-box vertical>\n        <x-button id=\"transform-tool-button\" skin=\"dock\" value=\"transform-tool\" toggled>\n          <x-icon name=\"transform-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"edit-tool-button\" skin=\"dock\" value=\"edit-tool\">\n          <x-icon name=\"edit-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"quad-bezier-tool-button\" skin=\"dock\" value=\"quad-bezier-tool\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"cubic-bezier-tool-button\" skin=\"dock\" value=\"cubic-bezier-tool\">\n          <x-icon name=\"cubic-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"freehand-tool-button\" skin=\"dock\" value=\"freehand-tool\">\n          <x-icon name=\"freehand-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"text-tool-button\" skin=\"dock\" value=\"text-tool\">\n          <x-icon name=\"text-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"rect-tool-button\" skin=\"dock\" value=\"rect-tool\">\n          <x-icon name=\"rect-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ellipse-tool-button\" skin=\"dock\" value=\"ellipse-tool\">\n          <x-icon name=\"ellipse-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ring-tool-button\" skin=\"dock\" value=\"ring-tool\">\n          <x-icon name=\"ring-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"pie-tool-button\" skin=\"dock\" value=\"pie-tool\">\n          <x-icon name=\"pie-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"triangle-tool-button\" skin=\"dock\" value=\"triangle-tool\">\n          <x-icon name=\"triangle-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"n-gon-tool-button\" skin=\"dock\" value=\"n-gon-tool\">\n          <x-icon name=\"n-gon-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"star-tool-button\" skin=\"dock\" value=\"star-tool\">\n          <x-icon name=\"star-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"cog-tool-button\" skin=\"dock\" value=\"cog-tool\">\n          <x-icon name=\"cog-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"line-tool-button\" skin=\"dock\" value=\"line-tool\">\n          <x-icon name=\"line-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"polyline-tool-button\" skin=\"dock\" value=\"polyline-tool\">\n          <x-icon name=\"polyline-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"polygon-tool-button\" skin=\"dock\" value=\"polygon-tool\">\n          <x-icon name=\"polygon-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </x-buttons>\n\n    <div id=\"popovers\">\n      <x-popover id=\"transform-tool-popover\">\n        <bx-transformsettings></bx-transformsettings>\n      </x-popover>\n\n      <x-popover id=\"quad-bezier-tool-popover\">\n        <bx-quadbeziersettings></bx-quadbeziersettings>\n      </x-popover>\n\n      <x-popover id=\"cubic-bezier-tool-popover\">\n        <bx-cubicbeziersettings></bx-cubicbeziersettings>\n      </x-popover>\n\n      <x-popover id=\"freehand-tool-popover\">\n        <bx-freehandsettings></bx-freehandsettings>\n      </x-popover>\n\n      <x-popover id=\"text-tool-popover\">\n        <bx-textsettings></bx-textsettings>\n      </x-popover>\n\n      <x-popover id=\"rect-tool-popover\">\n        <bx-rectsettings></bx-rectsettings>\n      </x-popover>\n\n      <x-popover id=\"ellipse-tool-popover\">\n        <bx-ellipsesettings></bx-ellipsesettings>\n      </x-popover>\n\n      <x-popover id=\"ring-tool-popover\">\n        <bx-ringsettings></bx-ringsettings>\n      </x-popover>\n\n      <x-popover id=\"pie-tool-popover\">\n        <bx-piesettings></bx-piesettings>\n      </x-popover>\n\n      <x-popover id=\"triangle-tool-popover\">\n        <bx-trianglesettings></bx-trianglesettings>\n      </x-popover>\n\n      <x-popover id=\"n-gon-tool-popover\">\n        <bx-ngonsettings></bx-ngonsettings>\n      </x-popover>\n\n      <x-popover id=\"star-tool-popover\">\n        <bx-starsettings></bx-starsettings>\n      </x-popover>\n\n      <x-popover id=\"cog-tool-popover\">\n        <bx-cogsettings></bx-cogsettings>\n      </x-popover>\n\n      <x-popover id=\"line-tool-popover\">\n        <bx-linesettings></bx-linesettings>\n      </x-popover>\n\n      <x-popover id=\"polyline-tool-popover\">\n        <bx-polylinesettings></bx-polylinesettings>\n      </x-popover>\n\n      <x-popover id=\"polygon-tool-popover\">\n        <bx-polygonsettings></bx-polygonsettings>\n      </x-popover>\n    </div>\n  ",BXToolsDockElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML4;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(t){return e._onButtonsToggle(t)}),e["#buttons"].addEventListener("pointerdown",function(t){return e._onButtonsPointerDown(t)}),e}return _inherits(t,e),_createClass(t,[{key:"_onButtonsToggle",value:function(){this.value=this["#buttons"].value,this.dispatchEvent(new CustomEvent("toggle"))}},{key:"_onButtonsPointerDown",value:function(e){var t=e.target.closest("x-button");if(t&&t.toggled){var n=t.id.replace("button","popover"),a=this["#popovers"].querySelector("x-popover[id=\""+n+"\"]");a&&(a.opened?(a.close(),t.removeAttribute("expanded")):(a.open(t,3),t.setAttribute("expanded","")))}}},{key:"value",get:function(){return this["#buttons"].value},set:function(e){var t=this["#popovers"].querySelector("x-popover[opened]");if(t){var n=t.id.replace("-popover","-button"),a=this["#buttons"].querySelector("x-button[id=\""+n+"\"]");t.close(),a.removeAttribute("expanded")}this["#buttons"].value=e}}]),t}(_CustomElement);customElements.define("bx-toolsdock",BXToolsDockElement)}}{{var _debounce=BoxySVG.utils.time.debounce,_shadowHTML5="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:38px;position:relative;display:flex;box-sizing:border-box;z-index:1}#buttons{position:relative;width:fit-content;margin-top:-1px;display:flex;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#c4c2c4;overflow:auto}#buttons::-webkit-scrollbar{display:none}#buttons::before{content:\"\";position:absolute;bottom:0;left:0;width:1px;height:100%;background:#adadad;display:block}#panels,#panels-background{position:absolute;top:0;height:100%}#panels{transform:translateX(280px);transition:transform .2s cubic-bezier(.4,0,.2,1);visibility:hidden;right:38px;width:280px}#panels[expanded]{transform:translateX(0);visibility:visible}#panels-background{z-index:-1;right:0;width:100%;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-left:1px solid rgba(0,0,0,.1)}#panels-content{overflow:auto;height:100%}#panels-content>[hidden]{display:none}</style>\n\n    <x-buttons id=\"buttons\" tracking=\"0\" vertical>\n      <x-box vertical>\n        <x-button id=\"fill-panel-button\" skin=\"dock\" value=\"fill-panel\">\n          <x-icon name=\"fill-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"stroke-panel-button\" skin=\"dock\" value=\"stroke-panel\">\n          <x-icon name=\"stroke-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"compositing-panel-button\" skin=\"dock\" value=\"compositing-panel\">\n          <x-icon name=\"compositing-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"typography-panel-button\" skin=\"dock\" value=\"typography-panel\">\n          <x-icon name=\"typography-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"view-panel-button\" skin=\"dock\" value=\"view-panel\">\n          <x-icon name=\"view-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"arrangement-panel-button\" skin=\"dock\" value=\"arrangement-panel\">\n          <x-icon name=\"arrangement-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"objects-panel-button\" skin=\"dock\" value=\"objects-panel\">\n          <x-icon name=\"objects-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"defs-panel-button\" skin=\"dock\" value=\"defs-panel\">\n          <x-icon name=\"defs-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"library-panel-button\" skin=\"dock\" value=\"library-panel\">\n          <x-icon name=\"library-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"geometry-panel-button\" skin=\"dock\" value=\"geometry-panel\">\n          <x-icon name=\"geometry-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"metadata-panel-button\" skin=\"dock\" value=\"metadata-panel\">\n          <x-icon name=\"metadata-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"path-panel-button\" skin=\"dock\" value=\"path-panel\">\n          <x-icon name=\"path-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"export-panel-button\" skin=\"dock\" value=\"export-panel\">\n          <x-icon name=\"export-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </x-buttons>\n\n    <div id=\"panels\" style=\"visibility: hidden;\">\n      <div id=\"panels-background\"></div>\n\n      <div id=\"panels-content\">\n        <bx-fillpanel id=\"fill-panel\"></bx-fillpanel>\n        <bx-strokepanel id=\"stroke-panel\"></bx-strokepanel>\n        <bx-compositingpanel id=\"compositing-panel\"></bx-compositingpanel>\n        <bx-typographypanel id=\"typography-panel\"></bx-typographypanel>\n        <bx-viewpanel id=\"view-panel\"></bx-viewpanel>\n        <bx-arrangementpanel id=\"arrangement-panel\"></bx-arrangementpanel>\n        <bx-objectspanel id=\"objects-panel\"></bx-objectspanel>\n        <bx-defspanel id=\"defs-panel\"></bx-defspanel>\n        <bx-librarypanel id=\"library-panel\"></bx-librarypanel>\n        <bx-geometrypanel id=\"geometry-panel\"></bx-geometrypanel>\n        <bx-metadatapanel id=\"metadata-panel\"></bx-metadatapanel>\n        <bx-pathpanel id=\"path-panel\"></bx-pathpanel>\n        <bx-exportpanel id=\"export-panel\"></bx-exportpanel>\n      </div>\n    </div>\n  ",BXPanelsDockElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML5;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(t){return e._onButtonsToggle(t)}),e["#panels"].addEventListener("transitionend",function(){return e._onPanelsTransitionEnd(event)}),e._restoreButtonsZIndexDebounced=_debounce(e._restoreButtonsZIndexDebounced,800,e),e}return _inherits(t,e),_createClass(t,[{key:"_restoreButtonsZIndexDebounced",value:function(){this["#buttons"].style.zIndex=null}},{key:"_onButtonsToggle",value:function(){this.value=this["#buttons"].value,this.dispatchEvent(new CustomEvent("toggle"))}},{key:"_onPanelsTransitionEnd",value:function(){if(!1===this["#panels"].hasAttribute("expanded")){this["#panels"].style.visibility="hidden";var e=!0,t=!1,n;try{for(var a=this["#panels-content"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.hidden=!0,i.enabled=!1}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"value",get:function(){return this["#buttons"].value},set:function(e){var t=this["#panels"].hasAttribute("expanded");if(this["#buttons"].value=e,this["#buttons"].style.zIndex="2",this._restoreButtonsZIndexDebounced(),null===e)this["#panels"].removeAttribute("expanded");else{var n=!0,a=!1,r;try{for(var i=this["#panels-content"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.hidden=s.id!==e,s.enabled=s.id===e}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#panels"].style.visibility="visible",this["#panels"].setAttribute("expanded","")}this["#panels"].hasAttribute("expanded")&&!1===t?this.dispatchEvent(new CustomEvent("expand")):!1===this["#panels"].hasAttribute("expanded")&&!0===t&&this.dispatchEvent(new CustomEvent("collapse"))}}]),t}(_CustomElement);customElements.define("bx-panelsdock",BXPanelsDockElement)}}{{var _BoxySVG$utils$elemen7=BoxySVG.utils.element,_closest6=_BoxySVG$utils$elemen7.closest,_html2=_BoxySVG$utils$elemen7.html,_svg4=_BoxySVG$utils$elemen7.svg,_getObjectElementDisplayName=_BoxySVG$utils$elemen7.getObjectElementDisplayName,_getObjectElementIconName=_BoxySVG$utils$elemen7.getObjectElementIconName,_debounce2=BoxySVG.utils.time.debounce,$object=Symbol(),_shadowHTML6="\n    <style>:host{display:block;height:21px;contain:style paint layout}#items{width:100%;height:100%;overflow:hidden}#items .item{display:inline-block;box-sizing:border-box;background:#fff;border:1px solid #adadad;height:100%;padding:0 8px;color:#464646}#items .item:not(:first-child){margin-left:-1px}#items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 20%))}#items .item-inner{display:flex;align-items:center;justify-content:center;width:100%;height:100%}#items .item .icon{fill:currentColor}#items .item .label{font-size:11px;margin-left:5px}</style>\n    <div id=\"items\"></div>\n  ",BXBreadcrumbElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._createdIcons=!1,e._update80Db=_debounce2(e._update,80,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML6;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerEditor=_closest6(this,"bx-editor"),this._ownerCanvas=this._ownerEditor.canvas,this._maybeCreateIcons(),this._update(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._update80Db()}),this._ownerCanvas.addEventListener("currentcontainerchange",this._currentContainerChangeListener=function(){e._update80Db()})}},{key:"disconnectedCallback",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("currentcontainerchange",this._currentContainerChangeListener)}},{key:"_onItemsClick",value:function(e){var t=this._ownerEditor.canvas,n=e.target.closest(".item");if(n){var a=n[$object];a===t.currentArtboard?(t.currentContainer=null,t.selectedElements=[]):a===t.masterArtboard?("symbol"===t.currentArtboard.getAttribute("data-bx-artboard")?t.editSymbolEnd():"pattern"===t.currentArtboard.getAttribute("data-bx-artboard")&&t.editPatternEnd(),t.currentContainer=null,t.selectedElements=[]):(t.currentContainer=a.parentElement===t.currentArtboard?null:a.parentElement,t.selectedElements=[a])}}},{key:"_maybeCreateIcons",value:async function(){if(!1===this._createdIcons){this._createdIcons=!0;var e=await fetch("images/icons.svg"),t=await e.text(),n=_svg4(_templateObject2,t),a=document.createDocumentFragment(),r=!0,i=!1,o;try{for(var s=n.querySelectorAll("symbol")[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.id&&(d.id.startsWith("object-")||"arrow"===d.id)&&a.append(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.style.display="none",n.innerHTML="",n.append(a),this._shadowRoot.append(n)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=[],n=null;{if(t.push(e.masterArtboard),e.currentArtboard!==e.masterArtboard&&t.push(e.currentArtboard),e.currentContainer){for(var a=[],r=e.currentContainer;r!==e.currentArtboard;r=r.parentElement)a.unshift(r);t=[].concat(_toConsumableArray(t),a)}0<e.selectedElements.length&&t.push(e.selectedElements[0]),0<e.selectedElements.length?n=e.selectedElements[0]:!e.currentContainer&&(n=e.currentArtboard)}{this["#items"].innerHTML="";var i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.querySelector(":scope > bx-title"),p=c?c.textContent:_getObjectElementDisplayName(u),h=_getObjectElementIconName(u),b=_html2(_templateObject6,h,p);n===u&&b.setAttribute("data-selected",""),b[$object]=u,this["#items"].append(b)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}}},{key:"_maybeCreateIcons",value:async function(){if(!1===this._createdIcons){this._createdIcons=!0;var e=await fetch("images/icons.svg"),t=await e.text(),n=_svg4(_templateObject2,t),a=document.createDocumentFragment(),r=!0,i=!1,o;try{for(var s=n.querySelectorAll("symbol")[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.id&&(d.id.startsWith("object-")||"arrow"===d.id)&&a.append(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.style.display="none",n.innerHTML="",n.append(a),this._shadowRoot.append(n)}}}]),t}(_CustomElement);customElements.define("bx-breadcrumb",BXBreadcrumbElement)}}{var _createElement15=BoxySVG.utils.element.createElement,_round12=BoxySVG.utils.math.round,_throttle2=BoxySVG.utils.time.throttle,_parseFloat5=Number.parseFloat,_shadowHTML7="\n    <style>:host{display:none;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;contain:strict;--size: 14px}:host([enabled]){display:block}main{position:relative;width:100%;height:100%}#corner-ruler{position:absolute;left:0;top:0;width:var(--size);height:var(--size);border-bottom:1px solid rgba(0,0,0,.3);border-right:1px solid rgba(0,0,0,.3)}#corner-ruler,#horizontal-ruler,#vertical-ruler{pointer-events:all;background:#fff;box-sizing:border-box}#horizontal-ruler{position:absolute;top:0;width:100%;height:var(--size);border-bottom:1px solid rgba(0,0,0,.3)}#vertical-ruler{position:absolute;top:0;width:var(--size);height:100%;border-right:1px solid rgba(0,0,0,.3);writing-mode:vertical-lr}#horizontal-ruler>div,#vertical-ruler>div{position:absolute;color:rgba(0,0,0,.6);font-size:9px;box-sizing:border-box}#horizontal-ruler>div{width:0;height:100%;top:0;left:0;padding:0 0 0 3px;border-left:1px solid rgba(0,0,0,.4)}#vertical-ruler>div{width:100%;height:0;top:0;left:0;padding:3px 0 0;border-top:1px solid rgba(0,0,0,.4)}</style>\n\n    <main id=\"main\">\n      <div id=\"horizontal-ruler\" class=\"ruler\" data-type=\"horizontal\"></div>\n      <div id=\"vertical-ruler\" class=\"ruler\" data-type=\"vertical\"\"></div>\n      <div id=\"corner-ruler\" class=\"ruler\" data-type=\"corner\"></div>\n    </main>\n  ",BXRulersElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle2(e._update,30,e),e._value=[0,0,1],e._intervals=[];for(var n=0.1;1e5>n;n*=10)e._intervals.push(n,2*n,5*n);e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML7;var a=!0,r=!1,i;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,e["#"+l.id]=l}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&!0===this.enabled&&this._update()}},{key:"getRulerTypeFromPoint",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t),a=n?n.closest(".ruler"):null;return a?a.getAttribute("data-type"):null}},{key:"_update",value:function(){var e=_slicedToArray(this._value,3),t=e[0],n=e[1],a=e[2];if(!1!=0<a){for(var r=1,o=0,i;o<this._intervals.length&&(i=this._intervals[o],r=i,!(50/a<=i));o+=1);{for(var s=[],l=this.clientWidth,d=_round12(t,0);d<Infinity;d+=1)if(0==d%r){var u=(d-t)*a;if(u>l)break;else s.push([u,d])}for(;this["#horizontal-ruler"].children.length<s.length;){var c=_createElement15("div");this["#horizontal-ruler"].append(c)}for(var p=0;p<s.length;p+=1){var h=_slicedToArray(s[p],2),b=h[0],x=h[1],m=this["#horizontal-ruler"].children[p];m.style.display=null,m.style.transform="translateX("+b+"px)",m.textContent=x}for(var g=s.length,v;g<this["#horizontal-ruler"].children.length;g+=1)v=this["#horizontal-ruler"].children[g],v.style.display="none"}{for(var f=[],_=this.clientHeight,w=_round12(n,0);w<Infinity;w+=1)if(0==w%r){var k=(w-n)*a;if(k>_)break;else f.push([k,w])}for(;this["#vertical-ruler"].children.length<f.length;){var y=_createElement15("div");this["#vertical-ruler"].append(y)}for(var A=0;A<f.length;A+=1){var C=_slicedToArray(f[A],2),S=C[0],x=C[1],E=this["#vertical-ruler"].children[A];E.style.display=null,E.style.transform="translateY("+S+"px)",E.textContent=x}for(var T=f.length,P;T<this["#vertical-ruler"].children.length;T+=1)P=this["#vertical-ruler"].children[T],P.style.display="none"}}}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.enabled&&this._update()}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-rulers",BXRulersElement)}{{var _Shortcut2=BoxySVG.classes.Shortcut,_getClientBBox5=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen8=BoxySVG.utils.element,_html3=_BoxySVG$utils$elemen8.html,_closest7=_BoxySVG$utils$elemen8.closest,_createElement16=_BoxySVG$utils$elemen8.createElement,_sortByDomPosition3=_BoxySVG$utils$elemen8.sortByDomPosition,_isValidID=_BoxySVG$utils$elemen8.isValidID,_isPointerMoveIntentional=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet7=BoxySVG.utils.geometry,_combineRects5=_BoxySVG$utils$geomet7.combineRects,_transformRect5=_BoxySVG$utils$geomet7.transformRect,_round13=BoxySVG.utils.math.round,_BoxySVG$utils$transf5=BoxySVG.utils.transformGeneral,_getTransformToElement3=_BoxySVG$utils$transf5.getTransformToElement,_getComputedTransform7=_BoxySVG$utils$transf5.getComputedTransform,_reduceTransform3=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time2=BoxySVG.utils.time,_debounce3=_BoxySVG$utils$time2.debounce,_sleep3=_BoxySVG$utils$time2.sleep,$symbol=Symbol(),shadowTemplate=_html3(_templateObject7,window.theme,window.theme),BXSymbolsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce3(e._update,2e3,e),e._lastSelectedItem=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(shadowTemplate.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#add-menu"].addEventListener("click",function(t){return e._onAddMenuClick(t)}),e["#add-menu"].addEventListener("open",function(){return e._onAddMenuOpen()}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest7(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest7(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=!0===this._ownerApp.getConfig("bx-symbolslist:developerMode"),this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.attributeName){if("id"===s.attributeName&&"symbol"===s.target.localName){this._update();break}}else if(s.addedNodes[0]){if("symbol"===s.addedNodes[0].localName||"bx-title"===s.addedNodes[0].localName||"bx-title"===s.target.localName){this._update();break}}else if(!s.removedNodes[0])this._update2000Db();else if("symbol"===s.removedNodes[0].localName||"bx-title"===s.removedNodes[0].localName){this._update();break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".item");t&&this._onItemClick(e)}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,i=e.target.closest(".item");if(!0===a)i.hasAttribute("data-selected")?i.removeAttribute("data-selected"):(i.setAttribute("data-selected",""),this._lastSelectedItem=i);else if(!0===r){var o=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),s=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]")));if(0<s.length){var l=o.indexOf(i),d=s[s.length-1],u=[];if(this._lastSelectedItem&&(d=o.indexOf(this._lastSelectedItem)),l>d?u=[].concat(_toConsumableArray(o)).slice(d,l+1):l<d&&(u=[].concat(_toConsumableArray(o)).slice(l,d+1).reverse()),u=u.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<u.length){var c=!0,p=!1,h;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.setAttribute("data-selected",""),this._lastSelectedItem=m}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}}}else{var g=!1,v,y,f;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",v=function(n){if(_isPointerMoveIntentional(e,n,3)){if(t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("lostpointercapture",f),!1===i.hasAttribute("data-selected")){var a=!0,r=!1,o;try{for(var s=t["#items"].children[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)d=l.value,d===i?(d.setAttribute("data-selected",""),t._lastSelectedItem=d):d.removeAttribute("data-selected")}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}}t._onItemDragStart(n),g=!0}}),this["#items"].addEventListener("pointerup",y=function(){if(!1==g){var e=!0,n=!1,a;try{for(var r=t["#items"].children[Symbol.iterator](),o,s;!(e=(o=r.next()).done);e=!0)s=o.value,s===i?(s.setAttribute("data-selected",""),t._lastSelectedItem=s):s.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",f=function(){t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("pointerup",y),t["#items"].removeEventListener("lostpointercapture",f)})}}},{key:"_canMoveItems",value:function(e,t,n){if(1===e.length){if(t===e[0])return!1;var a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),r=e[0],i=a.indexOf(t);if("start"===n){var o=a[i-1];if(o===r)return!1}else if("end"===n){var s=a[i+1];if(s===r)return!1}}return!0}},{key:"_onItemDragStart",value:function(e){var t=this,n=this["#items"].querySelectorAll(":scope > .item"),a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=null,i="start",o=this._ownerEditor.canvas,s=this["#main"].getBoundingClientRect(),l=null,d=0,u,c;this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var p=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;d=e,null==l&&(l=setInterval(function(){t["#main"].scrollTop+=d},10))},h=function(){null!==l&&(clearInterval(l),l=null)};this["#items"].addEventListener("pointermove",u=function(e){e.clientX>s.left&&e.clientX<s.right&&(e.clientY<s.top+20?p(-3):e.clientY>s.bottom-20?p(3):h());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(r=n?n.closest(".item"):null,r){var o=r.getBoundingClientRect();if(i=e.clientY<o.y+o.height/2?"start":"end",r.hasAttribute("data-expanded")&&"end"==i&&(r=r.querySelector(".item"),i="start",o=r.getBoundingClientRect()),t._canMoveItems(a,r,i)){var l=r.offsetTop;"end"==i&&(l+=o.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=l+"px"}else r=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",c=function(e){if(t["#items"].removeEventListener("pointermove",u),t["#items"].removeEventListener("lostpointercapture",c),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,h(),o.isPointOverCanvas(e.clientX,e.clientY)){var n=[].concat(_toConsumableArray(a)).map(function(e){return e[$symbol]}),s=!1;if("symbol"===o.currentArtboard.getAttribute("data-bx-artboard")){var l=!0,d=!1,p;try{for(var b=n[Symbol.iterator](),x,m;!(l=(x=b.next()).done);l=!0)if(m=x.value,o.currentArtboard.id===m.id){s=!0;break}}catch(e){d=!0,p=e}finally{try{!l&&b.return&&b.return()}finally{if(d)throw p}}}if(!1==s){o.undoManager.checkpoint("Create symbol instance");var g=o.currentContainer||o.currentArtboard,v=[],y=!0,f=!1,_;try{for(var w=n[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=_createElement16("svg:use");C.setAttribute("href","#"+A.id),A.hasAttribute("viewBox")?(C.setAttribute("width",A.viewBox.baseVal.width),C.setAttribute("height",A.viewBox.baseVal.height)):(C.setAttribute("width","100"),C.setAttribute("height","100")),g.append(C);var S=C.getScreenCTM().inverse(),E=_getComputedTransform7(C);E.multiplySelf(S),C.setAttribute("transform",E.toString());var T=_getClientBBox5(C);E.translateSelf(e.clientX-T.width/2,e.clientY-T.height/2),C.setAttribute("transform",E.toString());var P=o.geometryPrecision,L=o.transformPrecision;_reduceTransform3(C,{geometryPrecision:P,transformPrecision:L}),v.push(C)}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}o.selectedElements=v}}else if(r){o.undoManager.checkpoint("Rearrange symbols");var D=document.createDocumentFragment(),M=r[$symbol],N=!0,I=!1,R;try{for(var V=a[Symbol.iterator](),z,G;!(N=(z=V.next()).done);N=!0)G=z.value,D.append(G[$symbol])}catch(e){I=!0,R=e}finally{try{!N&&V.return&&V.return()}finally{if(I)throw R}}"start"==i?M.before(D):M.after(D)}})}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item"),i=e.target.closest(".thumbnail");i?this._ownerEditor.canvas.editSymbol(r[$symbol].id):this._editLabelStart(r)}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut2.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-label-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&this._editLabelStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-label-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var i=this["#items"].querySelector(".item[data-label-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var o=this["#items"].querySelector(".item[data-label-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var s=this["#items"].querySelector(".item[data-label-edited]");s||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var l=this["#items"].querySelector(".item[data-label-edited]");l||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_onDeveloperModeButtonToggle",value:function(){var e=this["#developer-mode-button"].toggled;this._ownerApp.setConfig("bx-symbolslist:developerMode",e),this._updateForDeveloperModeChange(),this.focus()}},{key:"_onAddMenuClick",value:function(e){var t=e.target.closest("x-menuitem");if(t){this._ownerEditor.canvas.undoManager.checkpoint("Create symbol"),this.focus();var n=this._ownerEditor.canvas,a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=0<a.length?a[a.length-1]:null,i=r?r[$symbol]:null,o=_createElement16("svg:symbol");if(o.setAttribute("id",n.generateUniqueID("symbol")),"add"===t.value)o.setAttribute("viewBox","0 0 100 100");else if("add-from-selected"===t.value){var s=_combineRects5(n.selectedElements.map(function(e){return _getClientBBox5(e)}));s=_transformRect5(s,n.currentArtboard.getScreenCTM().inverse());var l=-s.x,d=-s.y,u=_round13(s.width,4),c=_round13(s.height,4),p=!0,h=!1,b;try{for(var x=_sortByDomPosition3(n.selectedElements)[Symbol.iterator](),m;!(p=(m=x.next()).done);p=!0){var g=m.value,v=new SVGMatrix;v.translateSelf(l,d),v.multiplySelf(_getTransformToElement3(g,n.currentArtboard)),g.setAttribute("transform",v),o.append(g)}}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}o.setAttribute("viewBox","0 0 "+u+" "+c),n.selectedElements=[],n.selectedTextRange=null,n.currentContainer=null}{var y=_html3(_templateObject8,o.id);y[$symbol]=o,r?r.after(y):this["#items"].append(y);var f=!0,_=!1,w;try{for(var k=this["#items"].children[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C===y?C.setAttribute("data-selected",""):C.removeAttribute("data-selected")}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}y.scrollIntoViewIfNeeded()}i?i.after(o):(n.createDefsIfMissing(),n.defs.append(o))}}},{key:"_onAddMenuOpen",value:function(){this["#add-from-selected-menu-item"].disabled=0===this._ownerEditor.canvas.selectedElements.length}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_editLabelStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-label-edited]");if(n){if(n===e)return;this._editLabelEnd()}}var a=this._ownerEditor.canvas,r=e.querySelector(".label"),i=e[$symbol],o=this["#developer-mode-button"].toggled?"Symbol ID":"Symbol title",s=a.currentArtboard.id===i.id?a.currentArtboard:i,l=s.querySelector(":scope > bx-title"),d="";!0===this["#developer-mode-button"].toggled&&i.id?d="#"+i.id:!1===this["#developer-mode-button"].toggled&&l&&(d=l.textContent);var u=_html3(_templateObject9,d,o);r.after(u),u.selectAll(),_sleep3(10).then(function(){return u.querySelector("x-label").hidden=!1}),r.hidden=!0,e.setAttribute("data-label-edited",""),u.addEventListener("input",function(){u.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),u.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editLabelEnd()}),u.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var r=u.value.trim();if(r.startsWith("#")&&(r=r.substring(1)),0===r.length)e=!1,n="Symbol must have ID";else if(e=_isValidID(r),e){var o=null===a.artboards.querySelector("#"+r);!1==o&&i.id!==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editLabelEnd",value:function(){var e=this["#items"].querySelector(".item[data-label-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input"),r=e[$symbol];if(a.remove(),n.hidden=!1,e.removeAttribute("data-label-edited"),!1===a.invalid)if(this["#developer-mode-button"].toggled){var i=r.getAttribute("id").trim(),o=a.value.trim().toLowerCase();if(o.startsWith("#")&&(o=o.substring(1)),i!==o){t.undoManager.checkpoint("Symbol ID");for(var s=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),l=null;l=s.nextNode();)"symbol"===l.localName?l.id===i&&l.setAttribute("id",o):"g"===l.localName&&"symbol"===l.getAttribute("data-bx-artboard")?l.id===i&&l.setAttribute("id",o):"use"===l.localName&&l.href.baseVal==="#"+i&&l.setAttribute("href","#"+o)}}else{var d=t.currentArtboard.id===r.id?t.currentArtboard:r,u=d.querySelector(":scope > bx-title"),c=a.value.trim();if(!u)""!==c&&(t.undoManager.checkpoint("Symbol title"),u=_createElement16("svg:bx-title"),u.textContent=c,d.prepend(u));else{var p=u.textContent;p!==c&&(t.undoManager.checkpoint("Symbol title"),""===c?u.remove():u.textContent=c)}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[0],r=n.indexOf(a),i=n[r-1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[t.length-1],r=n.indexOf(a),i=n[r+1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_deleteSelectedItems",value:async function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])"))),t=this._ownerEditor.canvas;if(0<e.length){var n=[],a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d[$symbol],c=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),p=null;for(n.push(u);p=c.nextNode();)"use"===p.localName&&p.href.baseVal==="#"+u.id&&a.push(p)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(0<a.length){var h=1===n.length?"a symbol":n.length+" symbols",b=1===a.length?"1 instance":a.length+" instances",x=await this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+h+" with "+b+"?",detail:"Deleting a symbol also removes all its intances."});if(1===x)return}t.undoManager.checkpoint("Delete symbols"),"symbol"===t.currentArtboard.getAttribute("data-bx-artboard")&&n.find(function(e){return e.id===t.currentArtboard.id})&&t.editSymbolEnd(!1);var m=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),g=e[e.length-1],v=m.indexOf(g),y=m[v+1],f=!0,_=!1,w;try{for(var k=a[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.remove()}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}var S=!0,E=!1,T;try{for(var P=n[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,D.remove()}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}if(0<a.length&&(t.selectedElements=t.selectedElements.filter(function(e){return!a.includes(e)})),y)y.setAttribute("data-selected",""),this._lastSelectedItem=y;else if(0<this["#items"].childElementCount){var M=this["#items"].lastElementChild;M.setAttribute("data-selected",""),this._lastSelectedItem=M}}}},{key:"_update",value:function(){{var e=this._ownerEditor.canvas.extractArtwork();e.style.display="none",this._artwork&&this._artwork.remove(),this._shadowRoot.append(e),this._artwork=e}{var t=this._ownerEditor.canvas.masterArtboard.querySelectorAll("symbol"),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]"))).map(function(e){return e[$symbol]});this["#items"].innerHTML="";var a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_html3(_templateObject10,l.id,l.id);d[$symbol]=l,this._updateItemLabel(d),this._updateItemVisibility(d),this._lastSelectedItem&&this._lastSelectedItem[$symbol]===l&&(this._lastSelectedItem=d),n.includes(l)&&(d.setAttribute("data-selected",""),this._lastSelectedItem=d),this["#items"].append(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#placeholder"].hidden=0<this["#items"].children.length}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForDeveloperModeChange",value:function(){this["#filter-input"].value="";var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemLabel(i),this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updatePlaceholderVisibility()}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=e[$symbol],a=!1;if(0===t.length)a=!0;else{var r=e.querySelector(".label").textContent.trim().toLowerCase();a=-1!==r.indexOf(t)}e.hidden=!a}},{key:"_updateItemLabel",value:function(e){var t=e[$symbol],n=e.querySelector(".label");if(this["#developer-mode-button"].toggled)t.hasAttribute("id")?(n.textContent="#"+t.id,n.setAttribute("data-custom","")):(n.textContent="<symbol>",n.removeAttribute("data-custom"));else{var a;a=this._ownerEditor.canvas.currentArtboard.id===t.id?this._ownerEditor.canvas.currentArtboard.querySelector(":scope > bx-title"):t.querySelector(":scope > bx-title"),a?(n.textContent=a.textContent,n.setAttribute("data-custom","")):(n.textContent="Symbol",n.removeAttribute("data-custom"))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-symbolslist",BXSymbolsListElement)}}{{var _Shortcut3=BoxySVG.classes.Shortcut,_getClientBBox6=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen9=BoxySVG.utils.element,_html4=_BoxySVG$utils$elemen9.html,_closest8=_BoxySVG$utils$elemen9.closest,_createElement17=_BoxySVG$utils$elemen9.createElement,_sortByDomPosition4=_BoxySVG$utils$elemen9.sortByDomPosition,_isValidID2=_BoxySVG$utils$elemen9.isValidID,_isPointerMoveIntentional2=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet8=BoxySVG.utils.geometry,_combineRects6=_BoxySVG$utils$geomet8.combineRects,_transformRect6=_BoxySVG$utils$geomet8.transformRect,_round14=BoxySVG.utils.math.round,_getPatternUsers2=BoxySVG.utils.pattern.getPatternUsers,_BoxySVG$utils$transf6=BoxySVG.utils.transformGeneral,_getTransformToElement4=_BoxySVG$utils$transf6.getTransformToElement,_getComputedTransform8=_BoxySVG$utils$transf6.getComputedTransform,_reduceTransform4=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time3=BoxySVG.utils.time,_debounce4=_BoxySVG$utils$time3.debounce,_sleep4=_BoxySVG$utils$time3.sleep,$pattern=Symbol(),_shadowTemplate=_html4(_templateObject11,window.theme,window.theme),BXPatternsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce4(e._update,2e3,e),e._lastSelectedItem=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#new-button"].addEventListener("click",function(t){return e._onNewButtonClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest8(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest8(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=!0===this._ownerApp.getConfig("bx-patternslist:developerMode"),this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.attributeName){if("id"===s.attributeName&&"pattern"===s.target.localName){this._update();break}}else if(s.addedNodes[0]){if("pattern"===s.addedNodes[0].localName||"bx-title"===s.addedNodes[0].localName||"bx-title"===s.target.localName){this._update();break}}else if(!s.removedNodes[0])this._update2000Db();else if("pattern"===s.removedNodes[0].localName||"bx-title"===s.removedNodes[0].localName){this._update();break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".item");t&&this._onItemClick(e)}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,i=e.target.closest(".item");if(!0===a)i.hasAttribute("data-selected")?i.removeAttribute("data-selected"):(i.setAttribute("data-selected",""),this._lastSelectedItem=i);else if(!0===r){var o=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),s=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]")));if(0<s.length){var l=o.indexOf(i),d=s[s.length-1],u=[];if(this._lastSelectedItem&&(d=o.indexOf(this._lastSelectedItem)),l>d?u=[].concat(_toConsumableArray(o)).slice(d,l+1):l<d&&(u=[].concat(_toConsumableArray(o)).slice(l,d+1).reverse()),u=u.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<u.length){var c=!0,p=!1,h;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.setAttribute("data-selected",""),this._lastSelectedItem=m}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}}}else{var g=!1,v,y,f;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",v=function(n){if(_isPointerMoveIntentional2(e,n,3)){if(t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("lostpointercapture",f),!1===i.hasAttribute("data-selected")){var a=!0,r=!1,o;try{for(var s=t["#items"].children[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)d=l.value,d===i?(d.setAttribute("data-selected",""),t._lastSelectedItem=d):d.removeAttribute("data-selected")}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}}t._onItemDragStart(n),g=!0}}),this["#items"].addEventListener("pointerup",y=function(){if(!1==g){var e=!0,n=!1,a;try{for(var r=t["#items"].children[Symbol.iterator](),o,s;!(e=(o=r.next()).done);e=!0)s=o.value,s===i?(s.setAttribute("data-selected",""),t._lastSelectedItem=s):s.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",f=function(){t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("pointerup",y),t["#items"].removeEventListener("lostpointercapture",f)})}}},{key:"_canMoveItems",value:function(e,t,n){if(1===e.length){if(t===e[0])return!1;var a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),r=e[0],i=a.indexOf(t);if("start"===n){var o=a[i-1];if(o===r)return!1}else if("end"===n){var s=a[i+1];if(s===r)return!1}}return!0}},{key:"_onItemDragStart",value:function(e){var t=this,n=this["#items"].querySelectorAll(":scope > .item"),a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=null,i="start",o=this._ownerEditor.canvas,s=this["#main"].getBoundingClientRect(),l=null,d=0,u,c;this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var p=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;d=e,null==l&&(l=setInterval(function(){t["#main"].scrollTop+=d},10))},h=function(){null!==l&&(clearInterval(l),l=null)};this["#items"].addEventListener("pointermove",u=function(e){e.clientX>s.left&&e.clientX<s.right&&(e.clientY<s.top+20?p(-3):e.clientY>s.bottom-20?p(3):h());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(r=n?n.closest(".item"):null,r){var o=r.getBoundingClientRect();if(i=e.clientY<o.y+o.height/2?"start":"end",r.hasAttribute("data-expanded")&&"end"==i&&(r=r.querySelector(".item"),i="start",o=r.getBoundingClientRect()),t._canMoveItems(a,r,i)){var l=r.offsetTop;"end"==i&&(l+=o.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=l+"px"}else r=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",c=function(){if(t["#items"].removeEventListener("pointermove",u),t["#items"].removeEventListener("lostpointercapture",c),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,h(),r){o.undoManager.checkpoint("Rearrange patterns");var e=document.createDocumentFragment(),n=r[$pattern],s=!0,l=!1,d;try{for(var p=a[Symbol.iterator](),b,x;!(s=(b=p.next()).done);s=!0)x=b.value,e.append(x[$pattern])}catch(e){l=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw d}}"start"==i?n.before(e):n.after(e)}})}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item"),i=e.target.closest(".thumbnail");i?this._ownerEditor.canvas.editPattern(r[$pattern].id):this._editLabelStart(r)}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut3.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-label-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&this._editLabelStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-label-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var i=this["#items"].querySelector(".item[data-label-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var o=this["#items"].querySelector(".item[data-label-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var s=this["#items"].querySelector(".item[data-label-edited]");s||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var l=this["#items"].querySelector(".item[data-label-edited]");l||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_onDeveloperModeButtonToggle",value:function(){var e=this["#developer-mode-button"].toggled;this._ownerApp.setConfig("bx-patternslist:developerMode",e),this._updateForDeveloperModeChange(),this.focus()}},{key:"_onNewButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Create pattern"),this.focus();var t=this._ownerEditor.canvas,n=this["#items"].querySelectorAll(":scope > .item[data-selected]"),a=0<n.length?n[n.length-1]:null,r=a?a[$pattern]:null,i=_createElement17("svg:pattern");if(i.setAttribute("id",t.generateUniqueID("pattern")),!1===e.shiftKey)i.setAttribute("viewBox","0 0 100 100"),i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("width","100"),i.setAttribute("height","100");else{var o=_combineRects6(t.selectedElements.map(function(e){return _getClientBBox6(e)}));o=_transformRect6(o,t.currentArtboard.getScreenCTM().inverse());var s=-o.x,l=-o.y,d=_round14(o.width,4),u=_round14(o.height,4),c=!0,p=!1,h;try{for(var b=_sortByDomPosition4(t.selectedElements)[Symbol.iterator](),x;!(c=(x=b.next()).done);c=!0){var m=x.value,g=new SVGMatrix;g.translateSelf(s,l),g.multiplySelf(_getTransformToElement4(m,t.currentArtboard)),m.setAttribute("transform",g),i.append(m)}}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}i.setAttribute("viewBox","0 0 "+d+" "+u),i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("width","100"),i.setAttribute("height","100"),t.selectedElements=[],t.selectedTextRange=null,t.currentContainer=null}{var v=_html4(_templateObject12,i.id);v[$pattern]=i,a?a.after(v):this["#items"].append(v);var y=!0,f=!1,_;try{for(var w=this["#items"].children[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A===v?A.setAttribute("data-selected",""):A.removeAttribute("data-selected")}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}v.scrollIntoViewIfNeeded()}r?r.after(i):(t.createDefsIfMissing(),t.defs.append(i))}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_editLabelStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-label-edited]");if(n){if(n===e)return;this._editLabelEnd()}}var a=this._ownerEditor.canvas,r=e.querySelector(".label"),i=e[$pattern],o=this["#developer-mode-button"].toggled?"Pattern ID":"Pattern title",s=a.currentArtboard.id===i.id?a.currentArtboard:i,l=s.querySelector(":scope > bx-title"),d="";!0===this["#developer-mode-button"].toggled&&i.id?d="#"+i.id:!1===this["#developer-mode-button"].toggled&&l&&(d=l.textContent);var u=_html4(_templateObject9,d,o);r.after(u),u.selectAll(),_sleep4(10).then(function(){return u.querySelector("x-label").hidden=!1}),r.hidden=!0,e.setAttribute("data-label-edited",""),u.addEventListener("input",function(){u.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),u.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editLabelEnd()}),u.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var r=u.value.trim();if(r.startsWith("#")&&(r=r.substring(1)),0===r.length)e=!1,n="Pattern must have ID";else if(e=_isValidID2(r),e){var o=null===a.artboards.querySelector("#"+r);!1==o&&i.id!==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editLabelEnd",value:function(){var e=this["#items"].querySelector(".item[data-label-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input"),r=e[$pattern];if(a.remove(),n.hidden=!1,e.removeAttribute("data-label-edited"),!1===a.invalid)if(this["#developer-mode-button"].toggled){var i=r.getAttribute("id").trim(),o=a.value.trim().toLowerCase();if(o.startsWith("#")&&(o=o.substring(1)),i!==o){t.undoManager.checkpoint("Pattern ID");for(var s=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),l=null;l=s.nextNode();){"pattern"===l.localName?(l.id===i&&l.setAttribute("id",o),l.href.baseVal==="#"+i&&l.setAttribute("href","#"+o)):"g"===l.localName&&"pattern"===l.getAttribute("data-bx-artboard")&&l.id===i&&l.setAttribute("id",o);for(var d=["fill","stroke"],u=0;u<d.length;u++){var c=d[u],p=getComputedStyle(l).getPropertyValue(c);if(p&&p.startsWith("url(")){var h=p.substring(6,p.length-2);h===i&&l.style.setProperty(c,"url(#"+o+")")}}}}}else{var b=t.currentArtboard.id===r.id?t.currentArtboard:r,x=b.querySelector(":scope > bx-title"),m=a.value.trim();if(!x)""!==m&&(t.undoManager.checkpoint("Pattern title"),x=_createElement17("svg:bx-title"),x.textContent=m,b.prepend(x));else{var g=x.textContent;g!==m&&(t.undoManager.checkpoint("Pattern title"),""===m?x.remove():x.textContent=m)}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[0],r=n.indexOf(a),i=n[r-1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[t.length-1],r=n.indexOf(a),i=n[r+1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_deleteSelectedItems",value:async function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])"))),t=this._ownerEditor.canvas;if(0<e.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=e[e.length-1],r=n.indexOf(a),i=n[r+1],o=e.map(function(e){return e[$pattern]}),s=[],l=[],d=!0,u=!1,c;try{for(var p=o[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,s.push.apply(s,_toConsumableArray(t.artboards.querySelectorAll("pattern[href=\"#"+b.id+"\"]")))}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var x=[].concat(_toConsumableArray(o),s),m=!0,g=!1,v;try{for(var y=x[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=!0,k=!1,A=void 0;try{for(var C=_getPatternUsers2(_)[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,!1===l.includes(E)&&l.push(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}if(0<l.length){var T=1===o.length?"a pattern":o.length+" patterns",P=1===l.length?"1 object":l.length+" objects",L=await this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+T+" applied to "+P+"?",detail:"Deleting a pattern also removes it from all objects it was applied to as a fill or stroke."});if(1===L)return}t.undoManager.checkpoint("Delete patterns"),"pattern"===t.currentArtboard.getAttribute("data-bx-artboard")&&o.find(function(e){return e.id===t.currentArtboard.id})&&t.editPatternEnd(!1);var D=!0,M=!1,N;try{for(var I=x[Symbol.iterator](),R,V;!(D=(R=I.next()).done);D=!0)V=R.value,V.remove()}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}var z=!0,G=!1,B;try{for(var O=l[Symbol.iterator](),q;!(z=(q=O.next()).done);z=!0){var j=q.value,U=getComputedStyle(j),H=U.fill,$=U.stroke,F=!0,Y=!1,X=void 0;try{for(var W=x[Symbol.iterator](),K,Z;!(F=(K=W.next()).done);F=!0)Z=K.value,H==="url(\"#"+Z.id+"\")"?(j.style.fill=null,j.removeAttribute("fill")):$==="url(\"#"+Z.id+"\")"&&(j.style.stroke=null,j.removeAttribute("stroke"))}catch(e){Y=!0,X=e}finally{try{!F&&W.return&&W.return()}finally{if(Y)throw X}}}}catch(e){G=!0,B=e}finally{try{!z&&O.return&&O.return()}finally{if(G)throw B}}if(i)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else if(0<this["#items"].childElementCount){var Q=this["#items"].lastElementChild;Q.setAttribute("data-selected",""),this._lastSelectedItem=Q}}}},{key:"_update",value:function(){{var e=[].concat(_toConsumableArray(this._ownerEditor.canvas.masterArtboard.querySelectorAll("pattern"))),t=e.filter(function(e){return!1===e.hasAttribute("href")}),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]"))).map(function(e){return e[$pattern]});this["#items"].innerHTML="";var a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_html4(_templateObject13,l.outerHTML,l.id,l.id);d[$pattern]=l,this._updateItemLabel(d),this._updateItemVisibility(d),this._lastSelectedItem&&this._lastSelectedItem[$pattern]===l&&(this._lastSelectedItem=d),n.includes(l)&&(d.setAttribute("data-selected",""),this._lastSelectedItem=d),this["#items"].append(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#placeholder"].hidden=0<this["#items"].children.length}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForDeveloperModeChange",value:function(){this["#filter-input"].value="";var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemLabel(i),this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updatePlaceholderVisibility()}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=e[$pattern],a=!1;if(0===t.length)a=!0;else{var r=e.querySelector(".label").textContent.trim().toLowerCase();a=-1!==r.indexOf(t)}e.hidden=!a}},{key:"_updateItemLabel",value:function(e){var t=e[$pattern],n=e.querySelector(".label");if(this["#developer-mode-button"].toggled)t.hasAttribute("id")?(n.textContent="#"+t.id,n.setAttribute("data-custom","")):(n.textContent="<pattern>",n.removeAttribute("data-custom"));else{var a;a=this._ownerEditor.canvas.currentArtboard.id===t.id?this._ownerEditor.canvas.currentArtboard.querySelector(":scope > bx-title"):t.querySelector(":scope > bx-title"),a?(n.textContent=a.textContent,n.setAttribute("data-custom","")):(n.textContent="Pattern",n.removeAttribute("data-custom"))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-patternslist",BXPatternsListElement)}}{{var _Shortcut4=BoxySVG.classes.Shortcut,_BoxySVG$utils$elemen10=BoxySVG.utils.element,_html5=_BoxySVG$utils$elemen10.html,_closest9=_BoxySVG$utils$elemen10.closest,_createElement18=_BoxySVG$utils$elemen10.createElement,_sortByDomPosition5=_BoxySVG$utils$elemen10.sortByDomPosition,_isPointerMoveIntentional3=BoxySVG.utils.event.isPointerMoveIntentional,_getFontDisplayName=BoxySVG.utils.fontGeneral.getFontDisplayName,_getOpenTypeFont3=BoxySVG.utils.fontOpentype.getOpenTypeFont,_BoxySVG$utils$geomet9=BoxySVG.utils.geometry,_combineRects7=_BoxySVG$utils$geomet9.combineRects,_transformRect7=_BoxySVG$utils$geomet9.transformRect,_round15=BoxySVG.utils.math.round,_BoxySVG$utils$string2=BoxySVG.utils.string,_capitalize4=_BoxySVG$utils$string2.capitalize,_replaceAll4=_BoxySVG$utils$string2.replaceAll,_BoxySVG$utils$transf7=BoxySVG.utils.transformGeneral,_getTransformToElement5=_BoxySVG$utils$transf7.getTransformToElement,_getComputedTransform9=_BoxySVG$utils$transf7.getComputedTransform,_reduceTransform5=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time4=BoxySVG.utils.time,_debounce5=_BoxySVG$utils$time4.debounce,_sleep5=_BoxySVG$utils$time4.sleep,_keys2=Object.keys,$font=Symbol(),$fonts=Symbol(),_shadowTemplate2=_html5(_templateObject14,window.theme,window.theme),BXFontsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce5(e._update,2e3,e),e._lastSelectedItem=null,e._isDraggingItems=!1,e._isAnimatingItem=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate2.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e["#add-from-disk-menu-item"].addEventListener("click",function(t){e._onAddFromDiskMenuItemClick(t)}),e["#add-from-google-fonts-menu-item"].addEventListener("click",function(t){e._onAddFromGoogleFontsMenuItemClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest9(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest9(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.target.hasAttribute&&s.target.hasAttribute("data-bx-fonts")||s.target.parentElement&&s.target.parentElement.hasAttribute("data-bx-fonts")?this._update():this._update2000Db()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){e.target.closest(".arrow-button")?this._onArrowButtonClick(e):e.target.closest(".item")&&this._onItemClick(e)}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift,r=e.target.closest(".item");r.matches(".family-item")&&!1===n&&!1===a&&2===e.detail&&this._editFamilyNameStart(r)}},{key:"_onArrowButtonClick",value:function(e){var t=e.target.closest(".item");t.matches(".family-item")&&(t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t))}},{key:"_onItemPointerDown",value:function(e){var t=this;if(!e.target.closest(".arrow-button")){var n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,i=e.target.closest(".item");if(!1===a&&!1===r){var o=!1,s,l,d;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",s=function(n){if(_isPointerMoveIntentional3(e,n,3)){if(t["#items"].removeEventListener("pointermove",s),t["#items"].removeEventListener("lostpointercapture",d),!1===i.hasAttribute("data-selected")){var a=!0,r=!1,l;try{for(var u=t["#items"].querySelectorAll(".item")[Symbol.iterator](),c,p;!(a=(c=u.next()).done);a=!0)p=c.value,p===i?(p.setAttribute("data-selected",""),t._lastSelectedItem=p):p.removeAttribute("data-selected")}catch(e){r=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw l}}}t._onItemDragStart(n),o=!0}}),this["#items"].addEventListener("pointerup",l=function(){if(!1==o){var e=!0,n=!1,a;try{for(var r=t["#items"].querySelectorAll(".item")[Symbol.iterator](),s,l;!(e=(s=r.next()).done);e=!0)l=s.value,l===i?(l.setAttribute("data-selected",""),t._lastSelectedItem=l):l.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",d=function(){t["#items"].removeEventListener("pointermove",s),t["#items"].removeEventListener("pointerup",l),t["#items"].removeEventListener("lostpointercapture",d)})}else if(!0===a)i.hasAttribute("data-selected")?i.removeAttribute("data-selected"):(i.setAttribute("data-selected",""),this._lastSelectedItem=i);else if(!0===r){var u=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item")));u=u.filter(function(e){return!e.matches("[hidden], [hidden] > *")});var c=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]")));if(c=c.filter(function(e){return!e.matches("[hidden], [hidden] > *")}),0<c.length){var p=u.indexOf(i),h=c[c.length-1],b=[];if(this._lastSelectedItem&&(h=u.indexOf(this._lastSelectedItem)),p>h?b=[].concat(_toConsumableArray(u)).slice(h,p+1):p<h&&(b=[].concat(_toConsumableArray(u)).slice(p,h+1).reverse()),b=b.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<b.length){var x=!0,m=!1,g;try{for(var v=b[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)f=y.value,f.setAttribute("data-selected",""),this._lastSelectedItem=f}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}}}}},{key:"_onItemDragStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=this._getVisibleItems(),r=a.filter(function(e){return e.hasAttribute("data-selected")}),i=r.filter(function(e){return e.matches(".family-item")}),o=r.filter(function(e){return e.matches(".font-item")});if(!(0<i.length&&0<o.length)){var s=null,l="start",d=this["#main"].getBoundingClientRect(),u=null,c=0,p,h;this._isDraggingItems=!0,this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var b=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;c=e,null==u&&(u=setInterval(function(){t["#main"].scrollTop+=c},10))},m=function(){null!==u&&(clearInterval(u),u=null)};this["#items"].addEventListener("pointermove",p=function(e){e.clientX>d.left&&e.clientX<d.right&&(e.clientY<d.top+20?b(-3):e.clientY>d.bottom-20?b(3):m());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(s=n?n.closest(".item"):null,s){var a=s.getBoundingClientRect();if(l=e.clientY<a.y+a.height/2?"start":"end",s.hasAttribute("data-expanded")&&"end"==l&&(s=s.querySelector(".item"),l="start",a=s.getBoundingClientRect()),t._canMoveItems(r,s,l)){var i=s.offsetTop;if(s.matches(".font-item")){var o=s.closest(".family-item");i+=o.offsetTop}"end"==l&&(i+=a.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=i+"px",t["#drop-marker"].style.marginLeft=(s.matches(".font-item")?34:18)+"px"}else s=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",h=function(e){if(t["#items"].removeEventListener("pointermove",p),t["#items"].removeEventListener("lostpointercapture",h),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,m(),n.isPointOverCanvas(e.clientX,e.clientY)){n.undoManager.checkpoint("Text");var a=r[0].querySelector(".label"),d=n.currentContainer||n.currentArtboard,u=d.getScreenCTM().inverse(),c=new SVGPoint(e.clientX,e.clientY),b=c.matrixTransform(u),g=_round15(b.x,n.geometryPrecision),x=_round15(b.y,n.geometryPrecision),v=getComputedStyle(a),y=v.fontFamily,f=v.fontSize,_=v.fontStyle,w=v.fontWeight;f=parseFloat(f)/n.scale+"px";var k=_createElement18("svg:text");k.style.fontFamily=y,k.style.fontSize=f,k.style.fontStyle=_,k.style.fontWeight=w,k.setAttribute("x",g),k.setAttribute("y",x),k.textContent=a.textContent,d.append(k),n.selectedElements=[k];var A=k.getBBox();k.setAttribute("x",g-A.width/2),k.setAttribute("y",x+A.height/3)}else if(s)if(0<i.length){if("start"==l){var C=!0,S=!1,E;try{for(var T=r[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,s.before(L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}else{var D=!0,M=!1,N;try{for(var I=r[Symbol.iterator](),R,V;!(D=(R=I.next()).done);D=!0)V=R.value,s.after(V)}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}}{var z=[].concat(_toConsumableArray(t["#items"].querySelectorAll(".family-item"))),G=z.map(function(e){return e.getAttribute("data-family")});n.fontsManager.reorderFamilies(G)}}else if(0<o);t._isDraggingItems=!1})}}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_onAddFromDiskMenuItemClick",value:async function(){await _sleep5(500);var e=await this._ownerApp.showLocalFontsImportDialog(),t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l="url("+s.data+")",d={},u=await _getOpenTypeFont3(s.data);if(u){var c=u.names.fontFamily.en,p=u.names.fontSubfamily.en.toLowerCase();p=_replaceAll4(p," ",""),p=_replaceAll4(p,"-",""),p=_replaceAll4(p,"_",""),p.includes("italic")?d.style="italic":p.includes("oblique")&&(d.style="oblique"),p.includes("thin")?d.weight="100":p.includes("extralight")?d.weight="200":p.includes("light")?d.weight="300":p.includes("medium")?d.weight="500":p.includes("semibold")?d.weight="600":p.includes("bold")?d.weight="700":p.includes("extrabold")?d.weight="800":p.includes("ultrabold")&&(d.weight="900");var h=new FontFace(c,l,d);h.src=l,t.push(h)}else console.info("Unsupported font format",s.path)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}0<t.length&&(this._ownerEditor.canvas.undoManager.checkpoint("Add fonts"),this._ownerEditor.canvas.fontsManager.addFonts(t))}},{key:"_onAddFromGoogleFontsMenuItemClick",value:async function(){await _sleep5(500);var e=await this._ownerApp.showGoogleFontsImportDialog();if(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s.family,d=s.data,u=s.weight,c=s.style,p="url("+s.data+")",h=new FontFace(l,p,{family:l,weight:u,style:c});h.src=p,t.push(h)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}0<t.length&&(this._ownerEditor.canvas.undoManager.checkpoint("Add fonts"),this._ownerEditor.canvas.fontsManager.addFonts(t))}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut4.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-family-name-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&a.matches(".family-item")&&this._editFamilyNameStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-family-name-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var i=this["#items"].querySelector(".item[data-family-name-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var o=this["#items"].querySelector(".item[data-family-name-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("ArrowRight")){var s=this["#items"].querySelector(".item[data-family-name-edited]"),l=this["#items"].querySelectorAll(".item[data-selected]");!s&&1===l.length&&l[0].matches(".family-item")&&(e.preventDefault(),e.stopPropagation(),this._expandItem(l[0]))}else if(t.matches("ArrowLeft")){var d=this["#items"].querySelector(".item[data-family-name-edited]"),u=this["#items"].querySelectorAll(".item[data-selected]");!d&&1===u.length&&u[0].matches(".family-item")&&(e.preventDefault(),e.stopPropagation(),this._collapseItem(u[0]))}else if(t.matches("Shift","ArrowUp")){var c=this["#items"].querySelector(".item[data-family-name-edited]");c||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var p=this["#items"].querySelector(".item[data-family-name-edited]");p||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_expandItem",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(!1===e.hasAttribute("data-expanded")){var n=e.querySelector(".font-items");if(n.hidden=!1,e.setAttribute("data-expanded",""),t){this._isAnimatingItem=!0;var a=getComputedStyle(n).marginTop;"0px"===a&&(a="-"+getComputedStyle(n).height);var r=n.animate({marginTop:[a,"0px"]},{duration:250,easing:"ease"});await r.finished,this._isAnimatingItem=!1}}}},{key:"_collapseItem",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(e.hasAttribute("data-expanded")){var n=e.querySelector(".font-items");if(e.removeAttribute("data-expanded"),t){this._isAnimatingItem=!0;var a=getComputedStyle(n).marginTop,r="-"+getComputedStyle(n).height,i=n.animate({marginTop:[a,r]},{duration:250,easing:"ease"});await i.finished,this._isAnimatingItem=!1}!1===e.hasAttribute("data-expanded")&&(n.hidden=!0)}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._getVisibleItems(),n=t.filter(function(e){return e.hasAttribute("data-selected")});if(0<n.length){var a=n[n.length-1],r=t.indexOf(a),i=t[r+1];if(i){if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=t[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}else if(!1===e&&r===t.length-1&&1<n.length){var p=!0,h=!1,b;try{for(var x=t[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g===a?(g.setAttribute("data-selected",""),this._lastSelectedItem=g):g.removeAttribute("data-selected")}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._getVisibleItems(),n=t.filter(function(e){return e.hasAttribute("data-selected")});if(0<n.length){var a=n[0],r=t.indexOf(a),i=t[r-1];if(i){if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=t[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}else if(!1===e&&0===r&&1<n.length){var p=!0,h=!1,b;try{for(var x=t[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g===a?(g.setAttribute("data-selected",""),this._lastSelectedItem=g):g.removeAttribute("data-selected")}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}}}}},{key:"_deleteSelectedItems",value:async function(){var e=this._ownerEditor.canvas,t=this._getVisibleItems(),n=t.filter(function(e){return e.matches(".family-item[data-selected]")}),a=t.filter(function(e){return e.matches(".font-item[data-selected]")}),r=n.map(function(e){return e.getAttribute("data-family")}),i=a.map(function(e){return e[$font]});if(i=i.filter(function(e){return!1===r.includes(e.family)}),0<r.length||0<i.length){var o=[];if(0<o.length){var s=1===i.length?"a font":i.length+" fonts",l=1===o.length?"1 text":o.length+" texts",d=await this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+s+" applied to "+l+"?",detail:"Deleting a font also removes it from all texts it was applied to."});if(1===d)return}e.undoManager.checkpoint("Delete fonts");var u=!0,c=!1,p;try{for(var h=r[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,e.fontsManager.removeFamily(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var m=!0,g=!1,v;try{for(var y=i[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,e.fontsManager.removeFont(_)}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}var w=!0,k=!1,A;try{for(var C=o[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.style.fontFamily=null}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}this._update()}}},{key:"_getVisibleItems",value:function(){var e=this["#items"].querySelectorAll(".item");return e=[].concat(_toConsumableArray(e)).filter(function(e){if(e.matches(".family-item"))return!1===e.hidden;if(e.matches(".font-item")){var t=e.closest(".family-item");return!1===t.hidden&&t.hasAttribute("data-expanded")}}),e}},{key:"_canMoveItems",value:function(e,t,n){var a=e.filter(function(e){return e.matches(".family-item")}),r=e.filter(function(e){return e.matches(".font-item")}),i=this._getVisibleItems();if(0<a.length&&0<r)return!1;if(1===r.length){var o=r[0],s=i.indexOf(t);if(t===o||t.matches(".family-item"))return!1;if(t.closest(".family-item")!==o.closest(".family-item"))return!1;if("start"===n){var l=i[s-1];if(l===o)return!1}else if("end"===n){var d=i[s+1];if(d===o)return!1}}else if(1===a.length){if(t===e[0]||t.matches(".font-item"))return!1;var u=a[0],c=i.indexOf(t);if("start"===n){var p=i[c-1];if(p===u)return!1}else if("end"===n){var h=i[c+1];if(h===u)return!1}}else if(1<a.length&&t.matches(".font-item"))return!1;return!0}},{key:"_editFamilyNameStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-family-name-edited]");if(n){if(n===e)return;this._editFamilyNameEnd()}}var a=e.getAttribute("data-family"),r=this._ownerEditor.canvas,i=e.querySelector(".label"),o=_html5(_templateObject9,a,"Family name");i.after(o),o.selectAll(),_sleep5(10).then(function(){return o.querySelector("x-label").hidden=!1}),i.hidden=!0,e.setAttribute("data-family-name-edited",""),o.addEventListener("input",function(){o.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),o.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editFamilyNameEnd()}),o.validate=function(){var e=0<o.value.length;return{valid:e,hint:"Family must have name"}}}},{key:"_editFamilyNameEnd",value:function(){var e=this["#items"].querySelector(".item[data-family-name-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input");a.remove(),n.hidden=!1,e.removeAttribute("data-family-name-edited"),!1===a.invalid&&t.fontsManager.renameFamily(e.getAttribute("data-family"),a.value.trim())}}},{key:"_update",value:function(){if(this._isDraggingItems||this._isAnimatingItem)return void this._update2000Db();{var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".family-item[data-selected]"))),t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".font-item[data-selected]"))),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".family-item[data-expanded]"))),a=e.map(function(e){return e.getAttribute("data-family")}),r=n.map(function(e){return e.getAttribute("data-family")}),i=t.map(function(e){return e[$font]});this["#items"].innerHTML="";var o=!0,s=!1,l;try{for(var d=this._ownerEditor.canvas.fontsManager.getFamilies()[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=this._ownerEditor.canvas.fontsManager.getFamilyFonts(c),h=_html5(_templateObject15,c,c,c);a.includes(c)&&h.setAttribute("data-selected",""),r.includes(c)&&(h.setAttribute("data-expanded",""),h.querySelector(".font-items").removeAttribute("hidden")),this._lastSelectedItem&&this._lastSelectedItem.getAttribute("data-family")===c&&(this._lastSelectedItem=h);var b=!0,x=!1,m=void 0;try{for(var g=p[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=_getFontDisplayName(y),_="\n              font-size: 16px;\n              font-family: '"+c+"';\n              font-weight: "+y.weight+";\n              font-style: "+y.style+";\n              font-stetch: "+y.stretch+";\n            ",w=_html5(_templateObject16,_,f),k=!0,A=!1,C=void 0;try{for(var S=i[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)if(T=E.value,y.family===T.family&&y.style===T.style&&y.weight===T.weight&&y.stretch===T.stretch&&y.unicodeRange===T.unicodeRange&&y.variant===T.variant&&y.featureSettings===T.featureSettings){w.setAttribute("data-selected","");break}}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}this._lastSelectedItem&&this._lastSelectedItem[$font]===y&&(this._lastSelectedItem=w),w[$font]=y,h.querySelector(".font-items").append(w)}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}h[$fonts]=p,this["#items"].append(h),this._updateItemVisibility(h)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}this._updatePlaceholderVisibility()}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=!1;if(0===t.length)n=!0;else{var a=e.querySelector(".label").textContent.trim().toLowerCase();n=-1!==a.indexOf(t)}e.hidden=!n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fontslist",BXFontsListElement)}}{{var _BoxySVG$utils$elemen11=BoxySVG.utils.element,_createElement19=_BoxySVG$utils$elemen11.createElement,_closest10=_BoxySVG$utils$elemen11.closest,_html6=_BoxySVG$utils$elemen11.html,_Shortcut5=BoxySVG.classes.Shortcut,_fetchFontData2=BoxySVG.utils.fontGeneral.fetchFontData,_getGoogleFontsRegistry=BoxySVG.utils.fontGoogle.getGoogleFontsRegistry,_shadowTemplate3=_html6(_templateObject17,window.theme,window.theme),BXGoogleFontsImportControls=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._registry=null,e._thumbnails=null,e._thumbnailsReadyCallbacks=null,e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!1}),e._shadowRoot.append(document.importNode(_shadowTemplate3.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e["#add-button"].addEventListener("click",function(){return e._onAddButtonClick()}),e["#cancel-button"].addEventListener("click",function(){return e._onCancelButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest10(this,"bx-editor")}},{key:"_onEnabled",value:function(){!1===this["#main"].isConnected&&this._shadowRoot.append(this["#main"]),this._maybeCreateItems();{var e=this["#items"].querySelector(".item[data-selected]");e&&e.removeAttribute("data-selected"),this["#add-button"].disabled=!0}}},{key:"_onDisabled",value:function(){this["#main"].remove()}},{key:"_onItemsPointerDown",value:function(e){e.target.closest(".item")&&this._onItemPointerDown(e)}},{key:"_onItemPointerDown",value:function(e){var t=e.target.closest(".item"),n=t.getAttribute("data-name");if(n!==this.value){var a=!0,r=!1,i;try{for(var o=this["#items-inner"].children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.getAttribute("data-name")===n?l.setAttribute("data-selected",""):l.removeAttribute("data-selected")}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#add-button"].disabled=!1}}},{key:"_onFilterInputInput",value:function(){var e=this["#filter-input"].value,t=!0,n=!1,a;try{for(var r=this["#items-inner"].children[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.getAttribute("data-name");o.hidden=!1===s.toLowerCase().startsWith(e.toLowerCase())}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#placeholder"].hidden=null!==this["#items"].querySelector(".item:not([hidden])")}},{key:"_onAddButtonClick",value:async function(){var e=this["#items"].querySelector(".item[data-selected]"),t=e.getAttribute("data-name"),n=[],a=await _getGoogleFontsRegistry(),r=a.items.find(function(e){return e.family===t}),i=!0,o=!1,s;try{for(var l=Object.entries(r.urls)[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=_slicedToArray(d.value,2),c=u[0],p=u[1],h=await _fetchFontData2(p),b=c.substring(0,3),x=c.includes("italic")?"italic":"normal";n.push({family:t,data:h,weight:b,style:x})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}this.dispatchEvent(new CustomEvent("add",{detail:n}))}},{key:"_onCancelButtonClick",value:function(){this.dispatchEvent(new CustomEvent("cancel"))}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut5.fromEvent(e);if(t.matches("ArrowLeft")){var n=this["#items"].querySelector(".item[data-selected]:not([hidden])");if(n){var a=n.getBoundingClientRect(),r=this._shadowRoot.elementFromPoint(a.left-10,a.top+5),i=r?r.closest(".item"):null;i&&(e.preventDefault(),e.stopPropagation(),n.removeAttribute("data-selected"),i.setAttribute("data-selected",""),i.scrollIntoViewIfNeeded())}}else if(t.matches("ArrowRight")){var o=this["#items"].querySelector(".item[data-selected]:not([hidden])");if(o){var s=o.getBoundingClientRect(),l=this._shadowRoot.elementFromPoint(s.right+10,s.top+5),d=l?l.closest(".item"):null;d&&(e.preventDefault(),e.stopPropagation(),o.removeAttribute("data-selected"),d.setAttribute("data-selected",""),d.scrollIntoViewIfNeeded())}}else if(t.matches("ArrowDown")){var u=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),c=u.find(function(e){return e.hasAttribute("data-selected")}),p=u[0];if(c){var h=u.indexOf(c),b=u[h+1];if(b){var x=c.getBoundingClientRect(),m=b.getBoundingClientRect();m.left===x.left&&(e.preventDefault(),e.stopPropagation(),c.removeAttribute("data-selected"),b.setAttribute("data-selected",""),b.scrollIntoViewIfNeeded())}}else p&&(e.preventDefault(),e.stopPropagation(),p.setAttribute("data-selected",""),p.scrollIntoViewIfNeeded())}else if(t.matches("ArrowUp")){var g=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),v=g.find(function(e){return e.hasAttribute("data-selected")}),y=g[g.length-1];if(v){var f=g.indexOf(v),_=g[f-1];if(_){var w=v.getBoundingClientRect(),k=_.getBoundingClientRect();k.left===w.left&&(e.preventDefault(),e.stopPropagation(),v.removeAttribute("data-selected"),_.setAttribute("data-selected",""),_.scrollIntoViewIfNeeded())}}else y&&(e.preventDefault(),e.stopPropagation(),y.setAttribute("data-selected",""),y.scrollIntoViewIfNeeded())}}}},{key:"_maybeCreateItems",value:async function(){if(0===this["#items-inner"].childElementCount){var e=document.createDocumentFragment(),t=await this._getFamilies(),n=await this._getThumbnails(),a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=n[l],u=_createElement19("div");u.setAttribute("class","item"),u.setAttribute("data-name",l),e.append(u);var c=_createElement19("img");c.setAttribute("src",d),u.append(c)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#items-inner"].innerHTML="",this["#items-inner"].append(e)}}},{key:"_getFamilies",value:async function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"alphabetical";return new Promise(async function(t){var n=await _getGoogleFontsRegistry();if("alphabetical"===e){var a=n.items.map(function(e){return e.family});t(a)}else("popularity"===e||"trending"===e||"date"===e)&&t(n.sortedFamilies[e])})}},{key:"_getThumbnails",value:async function(){var e=this;return new Promise(async function(t){if(e._thumbnails)t(e._thumbnails);else if(e._thumbnailsReadyCallbacks)e._thumbnailsReadyCallbacks.push(t);else{e._thumbnailsReadyCallbacks=[t];var n=await fetch("metadata/google-fonts-thumbnails.json");e._thumbnails=await n.json();var a=!0,r=!1,i;try{for(var o=e._thumbnailsReadyCallbacks[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l(e._thumbnails)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"value",get:function(){var e=this["#items"].querySelector(".item[data-selected]");return e?e.getAttribute("data-name"):null}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-googlefontsimportcontrols",BXGoogleFontsImportControls)}}{{var _getPatternThumbnails=BoxySVG.utils.artworkRasterization.getPatternThumbnails,_getUserBBox5=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$color=BoxySVG.utils.color,_parseColor2=_BoxySVG$utils$color.parseColor,_serializeColor=_BoxySVG$utils$color.serializeColor,_BoxySVG$utils$elemen12=BoxySVG.utils.element,_createElement20=_BoxySVG$utils$elemen12.createElement,_closest11=_BoxySVG$utils$elemen12.closest,_BoxySVG$utils$markup=BoxySVG.utils.markup,_parseHTML=_BoxySVG$utils$markup.parseHTML,_parseSVG=_BoxySVG$utils$markup.parseSVG,_round16=BoxySVG.utils.math.round,_BoxySVG$utils$paint=BoxySVG.utils.paint,_getPaintType=_BoxySVG$utils$paint.getPaintType,_getPaintServer4=_BoxySVG$utils$paint.getPaintServer,_getDefFromURL=_BoxySVG$utils$paint.getDefFromURL,_isMixedPaint=_BoxySVG$utils$paint.isMixedPaint,_BoxySVG$utils$patter3=BoxySVG.utils.pattern,_centerPattern=_BoxySVG$utils$patter3.centerPattern,_comparePatterns2=_BoxySVG$utils$patter3.comparePatterns,_getParentPattern3=_BoxySVG$utils$patter3.getParentPattern,_createDerivedPattern2=_BoxySVG$utils$patter3.createDerivedPattern,_reduceProperty2=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text4=BoxySVG.utils.text,_getRenderedTextNodes3=_BoxySVG$utils$text4.getRenderedTextNodes,_getTspansIntersectedByRange2=_BoxySVG$utils$text4.getTspansIntersectedByRange,_reduceText2=_BoxySVG$utils$text4.reduceText,_spanifyText3=_BoxySVG$utils$text4.spanifyText,_BoxySVG$utils$time5=BoxySVG.utils.time,_debounce6=_BoxySVG$utils$time5.debounce,_throttle3=_BoxySVG$utils$time5.throttle,_paintableElementNames3=BoxySVG.utils.variables.paintableElementNames,stubThumbnail="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",_shadowHTML8="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block}#color-section{margin-top:20px}#color-section h5{margin-top:0}#color-picker-type-buttons{margin-left:auto}#color-section #color-picker{width:100%}#color-section #color-picker-hint{margin:0;font-size:12px;font-weight:500;line-height:1;opacity:.8}#color-section #color-picker-hint:empty{display:none}#color-section #color-picker-hint span,#pattern-section #pattern-select-hint span{text-decoration:underline}#color-section #color-picker-hint span:hover,#pattern-section #pattern-select-hint span:hover{cursor:pointer}#pattern-section,#spread-method-section{margin-top:20px}#pattern-section #pattern-select{flex:1}#pattern-section #pattern-select img{background:#fff}#pattern-section #edit-pattern-button{height:26px;margin:0 0 0 8px}#pattern-section #pattern-select-hint{margin:9px 0 0;font-size:12px;font-weight:500;line-height:1;opacity:.8}</style>\n\n    <h3 id=\"section-heading\">Paint</h3>\n\n    <section id=\"paint-type-section\">\n      <h4 id=\"paint-type-heading\">Type</h4>\n\n      <x-buttons id=\"paint-type-buttons\" tracking=\"1\">\n        <x-button id=\"solid-paint-button\" value=\"solid\" tooltip=\"Solid Color\" skin=\"flat\">\n          <x-icon name=\"paint-solid\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"linear-gradient-paint-button\" value=\"linear-gradient\" tooltip=\"Linear Gradient\" skin=\"flat\">\n          <x-icon name=\"paint-linear-gradient\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"radial-gradient-paint-button\" value=\"radial-gradient\" tooltip=\"Radial Gradient\" skin=\"flat\">\n          <x-icon name=\"paint-radial-gradient\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"pattern-paint-button\" value=\"pattern\" tooltip=\"Pattern\" skin=\"flat\">\n          <x-icon name=\"paint-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"none-paint-button\" value=\"none\" tooltip=\"None\" skin=\"flat\">\n          <x-icon name=\"paint-none\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"inherit-paint-button\" value=\"inherit\" tooltip=\"Inherit\" skin=\"flat\" hidden>\n          <x-icon name=\"paint-inherit\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n    </section>\n\n    <section id=\"color-section\">\n      <x-box>\n        <h4>Color</h4>\n\n        <x-buttons id=\"color-picker-type-buttons\" tracking=\"1\">\n          <x-button value=\"rect\" skin=\"flat-condensed\" toggled>\n            <x-icon name=\"color-picker-rect\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button value=\"wheel\" skin=\"flat-condensed\">\n            <x-icon name=\"color-picker-wheel\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </x-box>\n\n      <bx-colorpicker id=\"color-picker\"></bx-colorpicker>\n      <p id=\"color-picker-hint\"></p>\n    </section>\n\n    <section id=\"spread-method-section\">\n      <h4>Spread</h4>\n\n      <x-buttons id=\"spread-method-buttons\" tracking=\"1\">\n        <x-button id=\"pad-spread-method-button\" value=\"pad\" tooltip=\"Pad spread method\" skin=\"condensed\">\n          <x-label>Pad</x-label>\n        </x-button>\n\n        <x-button id=\"repeat-spread-method-button\" value=\"repeat\" tooltip=\"Repeat spread method\" skin=\"condensed\">\n          <x-label>Repeat</x-label>\n        </x-button>\n\n        <x-button id=\"reflect-spread-method-button\" value=\"reflect\" tooltip=\"Reflect spread method\" skin=\"condensed\">\n          <x-label>Reflect</x-label>\n        </x-button>\n      </x-buttons>\n    </section>\n\n    <section id=\"pattern-section\">\n      <h4>Pattern</h4>\n\n      <x-box>\n        <x-select id=\"pattern-select\">\n          <x-menu id=\"pattern-select-menu\"></x-menu>\n        </x-select>\n\n        <x-button id=\"edit-pattern-button\" tooltip=\"Edit pattern\" skin=\"condensed\">\n          <x-label>Edit</x-label>\n        </x-button>\n      </x-box>\n\n      <div id=\"pattern-select-hint\">Add more patterns in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n    </section>\n\n    <section id=\"paint-order-section\" style=\"margin-top: 20px;\">\n      <h4 id=\"paint-order-heading\">Order</h4>\n      <bx-paintorderswitch id=\"paint-order-switch\" context=\"fill\"></bx-paintorderswitch>\n    </section>\n  ",BXPaintControlsElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._update200Th=_throttle3(n._update,200,n),n._updatePatternThumbnails2000Db=_debounce6(n._updatePatternThumbnails,2e3,n),n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.innerHTML=_shadowHTML8;var e=!0,a=!1,r;try{for(var i=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}return n["#paint-type-buttons"].addEventListener("toggle",function(e){return n._onPaintTypeButtonsToggle(e)}),n["#spread-method-buttons"].addEventListener("toggle",function(e){return n._onSpreadMethodButtonsToggle(e)}),n["#color-picker"].addEventListener("changestart",function(e){return n._onColorPickerColorChangeStart(e)}),n["#color-picker-type-buttons"].addEventListener("toggle",function(t){return n._onColorPickerTypeButtonsToggle(t)}),n["#color-picker-hint"].addEventListener("click",function(e){return n._onColorPickerHintClick(e)}),n["#pattern-select"].addEventListener("change",function(){return n._onPatternSelectChange()}),n["#pattern-select-hint"].addEventListener("click",function(e){return n._onPatternSelectHintClick(e)}),n["#edit-pattern-button"].addEventListener("click",function(e){return n._onEditPatternButtonClick(e)}),n["#paint-order-switch"].addEventListener("change",function(){return n._onPaintOrderSwitchChange()}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest11(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this["#paint-order-switch"].setAttribute("context",this.context))}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._onCurrentArtboardChange(),this._onSelectedElementsChange(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._onCurrentArtboardChange()}),t.linearGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener1=function(){e._onSelectedElementsChange()}),t.radialGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener2=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),e.linearGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener1),e.radialGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener2)}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update()}},{key:"_onCurrentArtboardChange",value:function(){this["#inherit-paint-button"].hidden="symbol"!==this._ownerEditor.canvas.currentArtboard.getAttribute("data-bx-artboard")}},{key:"_onPaintTypeButtonsToggle",value:function(e){var t=e.detail;if(t){var n=t.value,a=t.localName,r=t.toggled,i=t.mixed;"solid"===n?this._onSolidPaintButtonClick():"linear-gradient"===n?this._onLinearGradientPaintButtonClick():"radial-gradient"===n?this._onRadialGradientPaintButtonClick():"pattern"===n?this._onPatternPaintButtonClick():"inherit"===n?this._onInheritPaintButtonClick():"none"===n&&this._onNonePaintButtonClick()}}},{key:"_onSolidPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a="#bada55",r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText3(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}{var u=e[0];if("text"===u.localName){var c=u.querySelectorAll("tspan"),p=_getTspansIntersectedByRange2(n,u),h=0<p.length?p:c;0<h.length&&(u=h[0])}var b=_getPaintType(u,this.context);if("solid"===b)a=getComputedStyle(u)[this.context];else if("linearGradient"===b||"radialGradient"===b){var x=_getPaintServer4(u,this.context),m=x.querySelector("stop");a=getComputedStyle(m).stopColor}}var g=!0,v=!1,y;try{for(var f=e[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)if(w=_.value,"text"===w.localName&&w.querySelector("tspan")){var k=w.querySelectorAll("tspan"),A=_getTspansIntersectedByRange2(n,w),C=0<A.length&&!n.collapsed?A:k,S=!0,E=!1,T=void 0;try{for(var P=C[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,D.style[this.context]=a}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}else w.style[this.context]=a,_reduceProperty2(this.context,w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}var M=!0,N=!1,I;try{for(var R=t[Symbol.iterator](),V,z;!(M=(V=R.next()).done);M=!0)z=V.value,_reduceText2(z,n)}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}}},{key:"_onLinearGradientPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,r=this._ownerEditor.canvas.selectedTextRange,i=null,o=!0,d=!1,u;try{for(var c=t[Symbol.iterator](),p,b;!(o=(p=c.next()).done);o=!0)b=p.value,_spanifyText3(b,r)}catch(e){d=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(d)throw u}}{var x=e[0];if("text"===x.localName){var m=x.querySelectorAll("tspan"),g=_getTspansIntersectedByRange2(r,x),v=0<g.length?g:m;0<v.length&&(x=v[0])}var y=_getPaintType(x,this.context);if("solid"===y){var f=_parseColor2(getComputedStyle(x)[this.context],"hsla"),_=_slicedToArray(f,4),w=_[0],h=_[1],s=_[2],l=_[3],a=0>s-20?0:s-20,k=_serializeColor([w,h,s,l],"hsla","rgba"),A=_serializeColor([w,h,a,l],"hsla","rgba");i=_parseSVG("\n            <linearGradient>\n              <stop offset=\"0\" style=\"stop-color: "+k+"\"></stop>\n              <stop offset=\"1\" style=\"stop-color: "+A+"\"></stop>\n            </linearGradient>\n          ")}else if("linearGradient"===y){var C=getComputedStyle(x)[this.context];i=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,C)}else if("radialGradient"===y){var S=getComputedStyle(x)[this.context],E=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,S);i=_createElement20("svg:linearGradient");var T=!0,P=!1,L;try{for(var D=E.children[Symbol.iterator](),M,N;!(T=(M=D.next()).done);T=!0)N=M.value,"stop"===N.localName&&i.append(N.cloneNode())}catch(e){P=!0,L=e}finally{try{!T&&D.return&&D.return()}finally{if(P)throw L}}}else i=_parseSVG("\n            <linearGradient>\n              <stop offset=\"0\" style=\"stop-color: #bada55\"></stop>\n              <stop offset=\"1\" style=\"stop-color: #758d29\"></stop>\n            </linearGradient>\n          ")}var I=!0,R=!1,V;try{for(var z=e[Symbol.iterator](),G,B;!(I=(G=z.next()).done);I=!0)if(B=G.value,"text"===B.localName&&0<B.querySelectorAll("tspan").length){var O=B.querySelectorAll("tspan"),q=_getTspansIntersectedByRange2(r,B),j=0<q.length&&!r.collapsed?q:O;if(_getPaintServer4(j[0],this.context)===i){var U=!0,H=!1,$=void 0;try{for(var F=j[Symbol.iterator](),Y,X;!(U=(Y=F.next()).done);U=!0)X=Y.value,X.style[this.context]="url(#"+i.id+")"}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}}else{var W=_getUserBBox5(B),K=_round16(W.x+W.width/2,n),Z=_round16(W.y,n),Q=_round16(W.x+W.width/2,n),J=_round16(W.y+W.height,n),ee=_createElement20("svg:linearGradient");ee.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),ee.setAttribute("gradientUnits","userSpaceOnUse"),ee.setAttribute("x1",K),ee.setAttribute("y1",Z),ee.setAttribute("x2",Q),ee.setAttribute("y2",J);var te=!0,ne=!1,ae=void 0;try{for(var re=i.querySelectorAll("stop")[Symbol.iterator](),ie,oe;!(te=(ie=re.next()).done);te=!0)oe=ie.value,ee.append(oe.cloneNode())}catch(e){ne=!0,ae=e}finally{try{!te&&re.return&&re.return()}finally{if(ne)throw ae}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(ee);var se=!0,le=!1,de=void 0;try{for(var ue=j[Symbol.iterator](),ce,pe;!(se=(ce=ue.next()).done);se=!0)pe=ce.value,pe.style[this.context]="url(#"+ee.id+")"}catch(e){le=!0,de=e}finally{try{!se&&ue.return&&ue.return()}finally{if(le)throw de}}}}else if("use"===B.localName){if(_getPaintServer4(B,this.context)!==i){var he=_createElement20("svg:linearGradient");he.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),he.setAttribute("gradientUnits","objectBoundingBox"),he.setAttribute("x1","0.5"),he.setAttribute("y1","0"),he.setAttribute("x2","0.5"),he.setAttribute("y2","1");var be=!0,xe=!1,me=void 0;try{for(var ge=i.querySelectorAll("stop")[Symbol.iterator](),ve,ye;!(be=(ve=ge.next()).done);be=!0)ye=ve.value,he.append(ye.cloneNode())}catch(e){xe=!0,me=e}finally{try{!be&&ge.return&&ge.return()}finally{if(xe)throw me}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(he),B.style[this.context]="url(#"+he.id+")",_reduceProperty2(this.context,B)}}else if(_getPaintServer4(B,this.context)!==i){var fe=_getUserBBox5(B),_e=fe.x+fe.width/2,we=fe.y,ke=fe.x+fe.width/2,Ae=fe.y+fe.height,Ce=_createElement20("svg:linearGradient");Ce.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),Ce.setAttribute("gradientUnits","userSpaceOnUse"),Ce.setAttribute("x1",_round16(_e,n)),Ce.setAttribute("y1",_round16(we,n)),Ce.setAttribute("x2",_round16(ke,n)),Ce.setAttribute("y2",_round16(Ae,n));var Se=!0,Ee=!1,Te=void 0;try{for(var Pe=i.querySelectorAll("stop")[Symbol.iterator](),Le,De;!(Se=(Le=Pe.next()).done);Se=!0)De=Le.value,Ce.append(De.cloneNode())}catch(e){Ee=!0,Te=e}finally{try{!Se&&Pe.return&&Pe.return()}finally{if(Ee)throw Te}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(Ce),B.style[this.context]="url(#"+Ce.id+")",_reduceProperty2(this.context,B)}}catch(e){R=!0,V=e}finally{try{!I&&z.return&&z.return()}finally{if(R)throw V}}var Me=!0,Ne=!1,Ie;try{for(var Re=t[Symbol.iterator](),Ve,ze;!(Me=(Ve=Re.next()).done);Me=!0)ze=Ve.value,_reduceText2(ze,r)}catch(e){Ne=!0,Ie=e}finally{try{!Me&&Re.return&&Re.return()}finally{if(Ne)throw Ie}}}},{key:"_onRadialGradientPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,i=this._ownerEditor.canvas.selectedTextRange,o=null,d=!0,u=!1,c;try{for(var p=t[Symbol.iterator](),b,x;!(d=(b=p.next()).done);d=!0)x=b.value,_spanifyText3(x,i)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}{var m=e[0];if("text"===m.localName){var g=m.querySelectorAll("tspan"),v=_getTspansIntersectedByRange2(i,m),y=0<v.length?v:g;0<y.length&&(m=y[0])}var f=_getPaintType(m,this.context);if("solid"===f){var _=_parseColor2(getComputedStyle(m)[this.context],"hsla"),w=_slicedToArray(_,4),k=w[0],h=w[1],s=w[2],l=w[3],a=0>s-20?0:s-20,A=_serializeColor([k,h,s,l],"hsla","rgba"),C=_serializeColor([k,h,a,l],"hsla","rgba");o=_parseSVG("\n            <radialGradient>\n              <stop offset=\"0\" style=\"stop-color: "+A+"\"></stop>\n              <stop offset=\"1\" style=\"stop-color: "+C+"\"></stop>\n            </radialGradient>\n          ")}else if("radialGradient"===f){var S=getComputedStyle(m)[this.context];o=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,S)}else if("linearGradient"===f){var E=getComputedStyle(m)[this.context],T=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,E);o=_createElement20("svg:radialGradient");var P=!0,L=!1,D;try{for(var M=T.children[Symbol.iterator](),N,I;!(P=(N=M.next()).done);P=!0)I=N.value,"stop"===I.localName&&o.append(I.cloneNode())}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}}else o=_parseSVG("\n            <radialGradient>\n              <stop offset=\"0\" style=\"stop-color: #bada55\"></stop>\n              <stop offset=\"1\" style=\"stop-color: #758d29\"></stop>\n            </radialGradient>\n          ")}var R=!0,V=!1,z;try{for(var G=e[Symbol.iterator](),B,O;!(R=(B=G.next()).done);R=!0)if(O=B.value,"text"===O.localName&&0<O.querySelectorAll("tspan").length){var q=O.querySelectorAll("tspan"),j=_getTspansIntersectedByRange2(i,O),U=0<j.length&&!i.collapsed?j:q;if(_getPaintServer4(U[0],this.context)===o){var H=!0,$=!1,F=void 0;try{for(var Y=U[Symbol.iterator](),X,W;!(H=(X=Y.next()).done);H=!0)W=X.value,W.style[this.context]="url(#"+o.id+")"}catch(e){$=!0,F=e}finally{try{!H&&Y.return&&Y.return()}finally{if($)throw F}}}else{var K=_getUserBBox5(O),Z=K.x+K.width/2,Q=K.y+K.height/2,J=K.width/2,r=_createElement20("svg:radialGradient");r.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),r.setAttribute("gradientUnits","userSpaceOnUse"),r.setAttribute("cx",_round16(Z,n)),r.setAttribute("cy",_round16(Q,n)),r.setAttribute("r",_round16(J,n));var ee=!0,te=!1,ne=void 0;try{for(var ae=o.querySelectorAll("stop")[Symbol.iterator](),re,ie;!(ee=(re=ae.next()).done);ee=!0)ie=re.value,r.append(ie.cloneNode())}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(r);var oe=!0,se=!1,le=void 0;try{for(var de=U[Symbol.iterator](),ue,ce;!(oe=(ue=de.next()).done);oe=!0)ce=ue.value,ce.style[this.context]="url(#"+r.id+")"}catch(e){se=!0,le=e}finally{try{!oe&&de.return&&de.return()}finally{if(se)throw le}}}}else if("use"===O.localName){if(_getPaintServer4(O,this.context)!==o){var pe=_createElement20("svg:radialGradient");pe.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),pe.setAttribute("gradientUnits","objectBoundingBox"),pe.setAttribute("cx","0.5"),pe.setAttribute("cy","0.5"),pe.setAttribute("r","0.5");var he=!0,be=!1,xe=void 0;try{for(var me=o.querySelectorAll("stop")[Symbol.iterator](),ge,ve;!(he=(ge=me.next()).done);he=!0)ve=ge.value,pe.append(ve.cloneNode())}catch(e){be=!0,xe=e}finally{try{!he&&me.return&&me.return()}finally{if(be)throw xe}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(pe),O.style[this.context]="url(#"+pe.id+")",_reduceProperty2(this.context,O)}}else if(_getPaintServer4(O,this.context)!==o){var ye=_getUserBBox5(O),fe=ye.x+ye.width/2,_e=ye.y+ye.height/2,we=ye.width/2,ke=_createElement20("svg:radialGradient");ke.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),ke.setAttribute("gradientUnits","userSpaceOnUse"),ke.setAttribute("cx",_round16(fe,n)),ke.setAttribute("cy",_round16(_e,n)),ke.setAttribute("r",_round16(we,n));var Ae=!0,Ce=!1,Se=void 0;try{for(var Ee=o.querySelectorAll("stop")[Symbol.iterator](),Te,Pe;!(Ae=(Te=Ee.next()).done);Ae=!0)Pe=Te.value,ke.append(Pe.cloneNode())}catch(e){Ce=!0,Se=e}finally{try{!Ae&&Ee.return&&Ee.return()}finally{if(Ce)throw Se}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(ke),O.style[this.context]="url(#"+ke.id+")",_reduceProperty2(this.context,O)}}catch(e){V=!0,z=e}finally{try{!R&&G.return&&G.return()}finally{if(V)throw z}}var Le=!0,De=!1,Me;try{for(var Ne=t[Symbol.iterator](),Ie,Re;!(Le=(Ie=Ne.next()).done);Le=!0)Re=Ie.value,_reduceText2(Re,i)}catch(e){De=!0,Me=e}finally{try{!Le&&Ne.return&&Ne.return()}finally{if(De)throw Me}}}},{key:"_onPatternPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,a=this._ownerEditor.canvas.selectedTextRange,r=null,i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_spanifyText3(u,a)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}{var c=e[0];if("text"===c.localName){var p=c.querySelectorAll("tspan"),h=_getTspansIntersectedByRange2(a,c),b=0<h.length?h:p;0<b.length&&(c=b[0])}var x=_getPaintType(c,this.context);if("pattern"===x){var m=getComputedStyle(c)[this.context];r=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,m)}if(r||(r=this._ownerEditor.canvas.masterArtboard.querySelector("pattern")),!r){var g=this._ownerEditor.canvas.generateUniqueID("pattern");r=_parseSVG("\n            <pattern id=\""+g+"\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\" viewBox=\"0 0 100 100\">\n              <path d=\"M 0 0 L 50 0 L 50 100 L 0 100 Z\" style=\"fill: black;\"></path>\n            </pattern>\n          "),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(r)}}var v=!0,y=!1,f;try{for(var _=e[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)if(k=w.value,"text"===k.localName&&0<k.querySelectorAll("tspan").length){var A=k.querySelectorAll("tspan"),C=_getTspansIntersectedByRange2(a,k),S=0<C.length&&!a.collapsed?C:A;if(_getPaintServer4(S[0],this.context)===r){var E=!0,T=!1,P=void 0;try{for(var L=S[Symbol.iterator](),D,M;!(E=(D=L.next()).done);E=!0)M=D.value,M.style[this.context]="url(#"+r.id+")"}catch(e){T=!0,P=e}finally{try{!E&&L.return&&L.return()}finally{if(T)throw P}}}else{var N=r.hasAttribute("href")?_getParentPattern3(r):r,I=_createDerivedPattern2(N);N.hasAttribute("patternTransform")&&I.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(I);var R=!0,V=!1,z=void 0;try{for(var G=S[Symbol.iterator](),B,O;!(R=(B=G.next()).done);R=!0)O=B.value,O.style[this.context]="url(#"+I.id+")"}catch(e){V=!0,z=e}finally{try{!R&&G.return&&G.return()}finally{if(V)throw z}}_centerPattern(I,k,this._ownerEditor.canvas.transformPrecision)}}else if(_getPaintServer4(k,this.context)!==r){var q=r.hasAttribute("href")?_getParentPattern3(r):r,j=_createDerivedPattern2(q);q.hasAttribute("patternTransform")&&j.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(j),k.style[this.context]="url(#"+j.id+")",_reduceProperty2(this.context,k),_centerPattern(j,k,this._ownerEditor.canvas.transformPrecision)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var U=!0,H=!1,$;try{for(var F=t[Symbol.iterator](),Y,X;!(U=(Y=F.next()).done);U=!0)X=Y.value,_reduceText2(X,a)}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}}},{key:"_onInheritPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.style[this.context]="inherit"}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}else s.style[this.context]="inherit";_reduceText2(s,t)}else s.style[this.context]="inherit"}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onNonePaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.style[this.context]="none"}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}else s.style[this.context]="none",_reduceProperty2(this.context,s);_reduceText2(s,t)}else s.style[this.context]="none",_reduceProperty2(this.context,s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onSpreadMethodButtonsToggle",value:function(){var e=this["#spread-method-buttons"].querySelector("x-button[toggled]"),t=this._ownerEditor.canvas.selectedTextRange,n=[];this._ownerEditor.canvas.undoManager.checkpoint("Spread Method");var a=!0,r=!1,i;try{for(var o=this._getSelectedPaintableElements()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"text"===l.localName){var d=_getRenderedTextNodes3(l);if(t&&t.intersectsNode(l)){var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,t.intersectsNode(x)&&!n.includes(x.parentElement)&&n.push(x.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else{var m=!0,g=!1,v=void 0;try{for(var y=d[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,!1===n.includes(_.parentElement)&&n.push(_.parentElement)}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}}}else n.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var w=!0,k=!1,A;try{for(var C=n[Symbol.iterator](),S;!(w=(S=C.next()).done);w=!0){var E=S.value,T=_getPaintType(E,this.context);if("linearGradient"===T||"radialGradient"===T){var P=_getPaintServer4(E,this.context);P.setAttribute("spreadMethod",e.value)}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}},{key:"_onColorPickerTypeButtonsToggle",value:function(e){this["#color-picker"].type=e.detail.value}},{key:"_onColorPickerColorChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[].concat(_toConsumableArray(t.linearGradientHud.selectedStops),_toConsumableArray(t.radialGradientHud.selectedStops)),a,r;if(t.undoManager.checkpoint("Change Color"),0<n.length)this["#color-picker"].addEventListener("change",a=function(){var t=!0,a=!1,r;try{for(var i=n[Symbol.iterator](),o,s;!(t=(o=i.next()).done);t=!0)s=o.value,s.style.stopColor=e["#color-picker"].value,_reduceProperty2("stop-color",s)}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}),this["#color-picker"].addEventListener("changeend",r=function(){e["#color-picker"].removeEventListener("change",a),e["#color-picker"].removeEventListener("changeend",r)});else{var i=this._getSelectedPaintableElements(),o=i.filter(function(e){return"text"===e.localName}),s=t.selectedTextRange,l=[],d=!0,u=!1,c;try{for(var p=o[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,_spanifyText3(b,s)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var x=!0,m=!1,g;try{for(var v=i[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,"text"===f.localName&&f.querySelector("tspan")){var _=f.querySelectorAll("tspan"),w=_getTspansIntersectedByRange2(s,f),k=0<w.length&&!s.collapsed?w:_;l.push.apply(l,_toConsumableArray(k))}else l.push(f)}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}this["#color-picker"].addEventListener("change",a=function(){var t=!0,n=!1,a;try{for(var r=l[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.style[e.context]=e["#color-picker"].value,_reduceProperty2(e.context,o)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}),this["#color-picker"].addEventListener("changeend",r=function(){e["#color-picker"].removeEventListener("change",a),e["#color-picker"].removeEventListener("changeend",r);var t=!0,n=!1,i;try{for(var l=o[Symbol.iterator](),d,u;!(t=(d=l.next()).done);t=!0)u=d.value,_reduceText2(u,s)}catch(e){n=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw i}}})}}},{key:"_onColorPickerHintClick",value:function(e){0===e.button&&"edit-tool-span"===e.target.id&&this._ownerEditor.toggleTool("edit-tool")}},{key:"_onPatternSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Pattern");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this["#pattern-select"].value,a=this._ownerEditor.canvas.masterArtboard.querySelector("#"+n),r=this._ownerEditor.canvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_spanifyText3(u,r)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,p=!1,h;try{for(var b=e[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)if(m=x.value,"text"===m.localName&&0<m.querySelectorAll("tspan").length){var g=m.querySelectorAll("tspan"),v=_getTspansIntersectedByRange2(r,m),y=0<v.length&&!r.collapsed?v:g,f=_getPaintServer4(y[0],this.context),_=f&&"pattern"===f.localName?f:null;if(_&&_comparePatterns2(_,a)){var w=!0,k=!1,A=void 0;try{for(var C=y[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.style[this.context]="url(#"+_.id+")"}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else{var T=_createDerivedPattern2(a);a.hasAttribute("patternTransform")&&T.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(T);var P=!0,L=!1,D=void 0;try{for(var M=y[Symbol.iterator](),N,I;!(P=(N=M.next()).done);P=!0)I=N.value,I.style[this.context]="url(#"+T.id+")"}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}_centerPattern(T,m,this._ownerEditor.canvas.transformPrecision)}}else{var R=_getPaintType(m,this.context);if("pattern"===R){var V=getComputedStyle(m)[this.context],z=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,V);if(_comparePatterns2(z,a))continue}var G=_createDerivedPattern2(a);a.hasAttribute("patternTransform")&&G.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(G),m.style[this.context]="url(#"+G.id+")",_reduceProperty2(this.context,m),_centerPattern(G,m,this._ownerEditor.canvas.transformPrecision)}}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}var B=!0,O=!1,q;try{for(var j=t[Symbol.iterator](),U,H;!(B=(U=j.next()).done);B=!0)H=U.value,_reduceText2(H,r)}catch(e){O=!0,q=e}finally{try{!B&&j.return&&j.return()}finally{if(O)throw q}}}},{key:"_onPatternSelectHintClick",value:function(e){0===e.button&&"defs-panel-span"===e.target.id&&(this._ownerEditor.panelsDock.value="defs-panel")}},{key:"_onEditPatternButtonClick",value:function(e){0===e.button&&this._ownerEditor.canvas.editPattern(this["#pattern-select"].value)}},{key:"_onPaintOrderSwitchChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint order");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.style.paintOrder=this["#paint-order-switch"].value.join(" ")}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}else s.style.paintOrder=this["#paint-order-switch"].value.join(" "),_reduceProperty2("paint-order",s);_reduceText2(s,t)}else s.style.paintOrder=this["#paint-order-switch"].value.join(" "),_reduceProperty2("paint-order",s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_update",value:function(){var e=this,t=[],n=this._ownerEditor.canvas,a=n.selectedTextRange,r=[].concat(_toConsumableArray(n.linearGradientHud.selectedStops),_toConsumableArray(n.radialGradientHud.selectedStops)),o=!0,s=!1,l;try{for(var d=this._getSelectedPaintableElements()[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)if(c=u.value,"text"===c.localName){var p=_getRenderedTextNodes3(c);if(a&&a.intersectsNode(c)){"backward"===a.direction&&p.reverse();var h=!0,b=!1,x=void 0;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,a.intersectsNode(v)&&!1===t.includes(v.parentElement)&&t.push(v.parentElement)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}else{var y=!0,f=!1,_=void 0;try{for(var w=p[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,!1===t.includes(A.parentElement)&&t.push(A.parentElement)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}}else t.push(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var C=t[0];if(0<r.length){var S=r[0].closest("linearGradient, radialGradient"),E=t.find(function(t){return _getPaintServer4(t,e.context)===S});E&&(C=E)}if(this["#section-heading"].disabled=!C,C){var T=_getPaintType(C,this.context);"symbol"===this._ownerEditor.canvas.currentArtboard.getAttribute("data-bx-artboard")&&"inherit"===C.style[this.context]&&(T="inherit");var P=_isMixedPaint(t,this.context);if(this["#paint-type-heading"].disabled=!1,"solid"===T){var L=!0,D=!1,M;try{for(var N=this["#paint-type-buttons"].children[Symbol.iterator](),I,R;!(L=(I=N.next()).done);L=!0)R=I.value,R.disabled=!1,"solid"===R.value?(R.toggled=!0,R.mixed=P):(R.toggled=!1,R.mixed=!1)}catch(e){D=!0,M=e}finally{try{!L&&N.return&&N.return()}finally{if(D)throw M}}}else if("linearGradient"===T){var V=!0,z=!1,G;try{for(var B=this["#paint-type-buttons"].children[Symbol.iterator](),O,q;!(V=(O=B.next()).done);V=!0)q=O.value,q.disabled=!1,"linear-gradient"===q.value?(q.toggled=!0,q.mixed=P):(q.toggled=!1,q.mixed=!1)}catch(e){z=!0,G=e}finally{try{!V&&B.return&&B.return()}finally{if(z)throw G}}}else if("radialGradient"===T){var j=!0,U=!1,H;try{for(var $=this["#paint-type-buttons"].children[Symbol.iterator](),F,Y;!(j=(F=$.next()).done);j=!0)Y=F.value,Y.disabled=!1,"radial-gradient"===Y.value?(Y.toggled=!0,Y.mixed=P):(Y.toggled=!1,Y.mixed=!1)}catch(e){U=!0,H=e}finally{try{!j&&$.return&&$.return()}finally{if(U)throw H}}}else if("pattern"===T){var X=!0,W=!1,K;try{for(var Z=this["#paint-type-buttons"].children[Symbol.iterator](),Q,J;!(X=(Q=Z.next()).done);X=!0)J=Q.value,J.disabled=!1,"pattern"===J.value?(J.toggled=!0,J.mixed=P):(J.toggled=!1,J.mixed=!1)}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}}else if("inherit"===T){var ee=!0,te=!1,ne;try{for(var ae=this["#paint-type-buttons"].children[Symbol.iterator](),re,ie;!(ee=(re=ae.next()).done);ee=!0)ie=re.value,ie.disabled=!1,"inherit"===ie.value?(ie.toggled=!0,ie.mixed=P):(ie.toggled=!1,ie.mixed=!1)}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}}else if("none"===T){var oe=!0,se=!1,le;try{for(var de=this["#paint-type-buttons"].children[Symbol.iterator](),ue,ce;!(oe=(ue=de.next()).done);oe=!0)ce=ue.value,ce.disabled=!1,"none"===ce.value?(ce.toggled=!0,ce.mixed=P):(ce.toggled=!1,ce.mixed=!1)}catch(e){se=!0,le=e}finally{try{!oe&&de.return&&de.return()}finally{if(se)throw le}}}}else{this["#paint-type-heading"].disabled=!0;var pe=!0,he=!1,be;try{for(var xe=this["#paint-type-buttons"].children[Symbol.iterator](),me,ge;!(pe=(me=xe.next()).done);pe=!0)ge=me.value,ge.disabled=!0,ge.toggled=!1,ge.mixed=!1}catch(e){he=!0,be=e}finally{try{!pe&&xe.return&&xe.return()}finally{if(he)throw be}}}if(C){var ve=_getPaintType(C,this.context),ye=_isMixedPaint(t,this.context);if("solid"===ve)this["#color-section"].hidden=!1,this["#color-picker-type-buttons"].hidden=!1,this["#color-picker"].hidden=!1,this["#color-picker"].value=getComputedStyle(C)[this.context],this["#color-picker"].mixed=ye,this["#color-picker-hint"].innerHTML="";else if("linearGradient"===ve||"radialGradient"===ve){var fe=this._ownerEditor.canvas[ve+"Hud"].selectedStops;this["#color-section"].hidden=!1,this["#color-picker"].mixed=ye,0===fe.length?(this["#color-picker-type-buttons"].hidden=!0,this["#color-picker"].hidden=!0,this["#color-picker-hint"].innerHTML="Select stop to recolor with <span id=\"edit-tool-span\">Edit Tool</span>."):(this["#color-picker-type-buttons"].hidden=!1,this["#color-picker"].hidden=!1,this["#color-picker"].value=fe[0].style.stopColor||"#000",this["#color-picker-hint"].innerHTML="")}else this["#color-section"].hidden=!0}else this["#color-section"].hidden=!0;if(C){var _e=_getPaintType(C,this.context);if("linearGradient"===_e||"radialGradient"===_e){this["#spread-method-section"].hidden=!1;var we=_getPaintServer4(C,this.context),ke=!1,Ae=!0,Ce=!1,Se;try{for(var Ee=t[Symbol.iterator](),Te;!(Ae=(Te=Ee.next()).done);Ae=!0){var Pe=Te.value,Le=_getPaintServer4(Pe,this.context);Le&&Le.localName.endsWith("Gradient")&&Le.spreadMethod.baseVal!==we.spreadMethod.baseVal&&(ke=!0)}}catch(e){Ce=!0,Se=e}finally{try{!Ae&&Ee.return&&Ee.return()}finally{if(Ce)throw Se}}we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REPEAT?(this["#repeat-spread-method-button"].toggled=!0,this["#repeat-spread-method-button"].mixed=ke,this["#pad-spread-method-button"].toggled=!1,this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].toggled=!1,this["#reflect-spread-method-button"].mixed=!1):we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_PAD?(this["#repeat-spread-method-button"].toggled=!1,this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].toggled=!0,this["#pad-spread-method-button"].mixed=ke,this["#reflect-spread-method-button"].toggled=!1,this["#reflect-spread-method-button"].mixed=!1):we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REFLECT&&(this["#repeat-spread-method-button"].toggled=!1,this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].toggled=!1,this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].toggled=!0,this["#reflect-spread-method-button"].mixed=ke)}else this["#spread-method-section"].hidden=!0}else this["#spread-method-section"].hidden=!0;if(C&&"pattern"===_getPaintType(C,this.context)){this["#pattern-section"].hidden=!1,this["#pattern-select"].mixed=_isMixedPaint(t,this.context);var De=[].concat(_toConsumableArray(this._ownerEditor.canvas.masterArtboard.querySelectorAll("pattern")));if(De=De.filter(function(e){return!1===e.hasAttribute("href")}),this["#pattern-select-menu"].childElementCount===De.length)for(var Me=0;Me<De.length;Me+=1){var i=De[Me],Ne=this["#pattern-select-menu"].children[Me];Ne.querySelector("x-label").textContent="#"+i.id,Ne.value=i.id}else{this["#pattern-select-menu"].innerHTML="";var Ie=!0,Re=!1,Ve;try{for(var ze=De[Symbol.iterator](),Ge;!(Ie=(Ge=ze.next()).done);Ie=!0){var Be=Ge.value,Oe=_parseHTML("\n                <x-menuitem value=\""+Be.id+"\">\n                  <img src=\""+stubThumbnail+"\"></img>\n                  <x-label>#"+Be.id+"</x-label>\n                </x-menuitem>\n              ");this["#pattern-select-menu"].append(Oe)}}catch(e){Re=!0,Ve=e}finally{try{!Ie&&ze.return&&ze.return()}finally{if(Re)throw Ve}}}var qe=_getPaintServer4(C,this.context),je=qe.hasAttribute("href")?_getParentPattern3(qe):qe;this["#pattern-select"].value=je?je.id:null,this._updatedPatternThumbnailsForFirstTime?this._updatePatternThumbnails2000Db():(this._updatedPatternThumbnailsForFirstTime=!0,this._updatePatternThumbnails())}else this["#pattern-section"].hidden=!0;if(C){var Ue=_getPaintType(C,this.context);"none"===Ue?this["#paint-order-section"].hidden=!0:(this["#paint-order-section"].hidden=!1,this["#paint-order-switch"].value=getComputedStyle(C).paintOrder.split(" "))}else this["#paint-order-section"].hidden=!0}},{key:"_updatePatternThumbnails",value:function(){var e=this,t=this._ownerEditor.canvas.extractArtwork();_getPatternThumbnails(t,function(t,n){var a=!0,r=!1,i;try{for(var o=e["#pattern-select-menu"].children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.value===t&&(l.querySelector("img").src=n)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}})}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_paintableElementNames3.includes(l.localName)||"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){("fill"===e||"stroke"===e)&&this.setAttribute("context",e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(_CustomElement);customElements.define("bx-paintcontrols",BXPaintControlsElement)}}{{var _BoxySVG$utils$elemen13=BoxySVG.utils.element,_closest12=_BoxySVG$utils$elemen13.closest,_html7=_BoxySVG$utils$elemen13.html,_createElement21=_BoxySVG$utils$elemen13.createElement,registerElement=_BoxySVG$utils$elemen13.registerElement,gridSize=10,debug=!1,_shadowTemplate4=_html7(_templateObject18),BXColorGrabberElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate4.content,!0)),e.tabIndex=0;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest12(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"grab",value:function(){var e=this;return new Promise(async function(t){e.matches(":focus")&&e.blur();var n=e._ownerApp.currentEditor.canvas,o=n.getBoundingClientRect(),s=null,a=function(){var t=e._ownerApp.pointerClientPoint,d=t.x,u=t.y,c=!1;if(e.style.pointerEvents="none",c=!1===n.isPointOverCanvas(d,u),e.style.pointerEvents=null,c?e["#lens"].setAttribute("offscreen",""):e["#lens"].removeAttribute("offscreen"),e["#lens"].style.left=d+15+"px",e["#lens"].style.top=u+15+"px",s&&!1==c){for(var p=[],h=s.getImageData(d-o.left-gridSize/2+1,u-o.top-gridSize/2+1,gridSize,gridSize),x=0,i=h.data.length;x<i;x+=4){var l=h.data[x],r=h.data[x+1],m=h.data[x+2],b=h.data[x+3]/255;p.push("rgba("+l+", "+r+", "+m+", "+b+")")}for(var a=0;a<p.length;a+=1)e["#grid"].children[a].style.fill=p[a]}},r=function(){var h=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(e.removeEventListener("pointerenter",i),e.removeEventListener("pointerleave",l),e.removeEventListener("pointermove",d),e.removeEventListener("click",u),e.removeEventListener("blur",c),e.removeEventListener("keydown",p),e.blur(),h)t(null);else{var m=e._ownerApp.pointerClientPoint,v=m.x,x=m.y;if(s&&n.isPointOverCanvas(v,x)){var y=s.getImageData(v-o.left,x-o.top,1,1),f=_slicedToArray(y.data,4),_=f[0],r=f[1],g=f[2],b=f[3];debug,t("rgba("+_+", "+r+", "+g+", "+b/255+")")}else t(null)}},i,l,d,u,c,p;e.focus(),a(),e.addEventListener("pointerenter",i=function(){return e["#lens"].style.display=null}),e.addEventListener("pointerleave",l=function(){return e["#lens"].style.display="none"}),e.addEventListener("click",u=function(){return r()}),e.addEventListener("pointermove",d=function(){return a()}),e.addEventListener("blur",c=function(){return r(!0)}),e.addEventListener("keydown",p=function(e){"Escape"===e.key&&r(!0)}),0===e["#grid"].childElementCount&&function(){for(var t=0;t<gridSize;t+=1)for(var n=0,a;n<gridSize;n+=1)a=_createElement21("svg:rect"),a.setAttribute("width",10),a.setAttribute("height",10),a.setAttribute("x",11*n),a.setAttribute("y",11*t),a.style.fill="transparent",e["#grid"].append(a),4==n&&4==t&&a.setAttribute("id","center-rect")}(),e.focus(),e["#html-canvas"].style.left=o.left+"px",e["#html-canvas"].style.top=o.top+"px";try{var h=await n.captureVisibleCanvasArea(),b=new Image;b.src=h,b.addEventListener("load",function(){e["#html-canvas"].width=b.naturalWidth,e["#html-canvas"].height=b.naturalHeight,s=e["#html-canvas"].getContext("2d"),s.drawImage(b,0,0),a()})}catch(e){console.log("Failed to grab color",e),r(!0)}})}},{key:"isGrabbing",get:function(){return this.matches(":focus")}}]),t}(_CustomElement);customElements.define("bx-colorgrabber",BXColorGrabberElement)}}{{var _BoxySVG$utils$elemen14=BoxySVG.utils.element,_closest13=_BoxySVG$utils$elemen14.closest,_html8=_BoxySVG$utils$elemen14.html,_registerElement=_BoxySVG$utils$elemen14.registerElement,_shadowTemplate5=_html8(_templateObject19),BXObjectGrabberElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate5.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest13(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"grab",value:function(){var e=this;return new Promise(function(t){e.matches(":focus")&&e.blur();var n=e._ownerApp.currentEditor.canvas,a=n.getBoundingClientRect(),r=function(){var t=e._ownerApp.pointerClientPoint,a=t.x,r=t.y;e.style.pointerEvents="none";var i=n.getArtboardElementFromPoint(event.clientX,event.clientY);e.style.pointerEvents=null,i?e["#helper"].style.display="none":(e["#helper"].style.display="block",e["#helper"].style.left=a+15+"px",e["#helper"].style.top=r+15+"px")},i=function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",s),e.removeEventListener("pointermove",l),e.removeEventListener("click",d),e.removeEventListener("blur",u),e.removeEventListener("keydown",c),e.blur(),a)t(null);else{var r=e._ownerApp.pointerClientPoint,i=r.x,p=r.y,h=n.getArtboardElementFromPoint(i,p);t(h)}},o,s,l,d,u,c;e.focus(),r(),e.addEventListener("pointerenter",o=function(){return e["#helper"].style.display=null}),e.addEventListener("pointerleave",s=function(){return e["#helper"].style.display="none"}),e.addEventListener("pointermove",l=function(){return r()}),e.addEventListener("click",d=function(){return i(!1)}),e.addEventListener("blur",u=function(){return i(!0)}),e.addEventListener("keydown",c=function(e){"Escape"===e.key&&i(!0)})})}}]),t}(_CustomElement);customElements.define("bx-objectgrabber",BXObjectGrabberElement)}}{var _formatColorString=BoxySVG.utils.color.formatColorString,_closest14=BoxySVG.utils.element.closest,_shadowHTML9="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:250px;box-sizing:border-box}:host([hidden]){display:none}#main{height:100%}#main,#main>*{width:100%}#format-select{margin-left:4px;min-width:73px}x-box{margin-top:15px}#input{max-width:none;flex:1}#grab-button{margin:0 0 0 5px}#grab-button x-icon{width:14px;height:14px}</style>\n\n    <main id=\"main\">\n      <div id=\"pickers\">\n        <x-rectcolorpicker alphaslider id=\"rect-picker\"></x-rectcolorpicker>\n        <x-wheelcolorpicker alphaslider id=\"wheel-picker\" hidden></x-wheelcolorpicker>\n      </div>\n\n      <x-box>\n        <x-input id=\"input\" type=\"color\"></x-input>\n\n        <x-select id=\"format-select\" skin=\"condensed\">\n          <x-menu>\n            <x-menuitem value=\"hex\" selected=\"true\"><x-label>Hex</x-label></x-menuitem>\n            <x-menuitem value=\"rgb\"><x-label>RGB</x-label></x-menuitem>\n            <x-menuitem value=\"rgba\"><x-label>RGBA</x-label></x-menuitem>\n            <x-menuitem value=\"hsl\"><x-label>HSL</x-label></x-menuitem>\n            <x-menuitem value=\"hsla\"><x-label>HSLA</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-button id=\"grab-button\" skin=\"condensed\" togglable>\n          <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </main>\n  ",BXColorPickerElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML9;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#pickers"].addEventListener("change",function(t){return e._onPickerChange(t)}),e["#pickers"].addEventListener("changestart",function(){return e.dispatchEvent(new CustomEvent("changestart"))}),e["#pickers"].addEventListener("changeend",function(){return e.dispatchEvent(new CustomEvent("changeend"))}),e["#input"].addEventListener("click",function(t){return e._onInputClick(t)}),e["#input"].addEventListener("change",function(t){return e._onInputChange(t)}),e["#format-select"].addEventListener("change",function(t){return e._onFormatSelectChange(t)}),e["#grab-button"].addEventListener("toggle",function(){return e._onGrabButtonToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest14(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updatePickersVisibility()}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._onValueAttributeChange():"type"===e&&this._onTypeAttributeChange())}},{key:"_onValueAttributeChange",value:function(){var e=this["#pickers"].querySelector(":scope > :not([hidden])");e.value!==this.value&&(e.value=this.value),this["#input"].value=_formatColorString(this.value,this["#format-select"].value),this["#input"].matches(":focus")&&this["#input"].selectAll()}},{key:"_onTypeAttributeChange",value:function(){this._updatePickersVisibility()}},{key:"_onPickerChange",value:function(e){this.value=e.target.value,this.dispatchEvent(new CustomEvent("change"))}},{key:"_onInputClick",value:function(e){2<=e.detail&&"hex"===this["#format-select"].value&&this["#input"].selectAll()}},{key:"_onInputChange",value:function(){this["#input"].invalid?(this["#input"].value=_formatColorString(this.value,this["#format-select"].value),this["#input"].matches(":focus")&&this["#input"].selectAll()):(this.dispatchEvent(new CustomEvent("changestart")),this.value=this["#input"].value,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")))}},{key:"_onFormatSelectChange",value:function(){this["#input"].value=_formatColorString(this.value,this["#format-select"].value)}},{key:"_onGrabButtonToggle",value:async function(){var e=await this._ownerApp.colorGrabber.grab();this["#grab-button"].toggled=!1,null!==e&&(this.dispatchEvent(new CustomEvent("changestart")),this.value=e,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")))}},{key:"_updatePickersVisibility",value:function(){"rect"===this.type?(this["#rect-picker"].hidden=!1,this["#rect-picker"].value=this.value,this["#wheel-picker"].hidden=!0):"wheel"===this.type&&(this["#rect-picker"].hidden=!0,this["#wheel-picker"].hidden=!1,this["#wheel-picker"].value=this.value)}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"},set:function(e){this.setAttribute("value",e)}},{key:"type",get:function(){return this.hasAttribute("type")?this.getAttribute("type"):"rect"},set:function(e){this.setAttribute("type",e)}}],[{key:"observedAttributes",get:function(){return["value","type"]}}]),t}(_CustomElement);customElements.define("bx-colorpicker",BXColorPickerElement)}{var _BoxySVG$utils$elemen15=BoxySVG.utils.element,_closest15=_BoxySVG$utils$elemen15.closest,_html9=_BoxySVG$utils$elemen15.html,_BoxySVG$utils$fontGo=BoxySVG.utils.fontGoogle,_getGoogleFontsFamilies=_BoxySVG$utils$fontGo.getGoogleFontsFamilies,_getGoogleFontsThumbnails=_BoxySVG$utils$fontGo.getGoogleFontsThumbnails,_debounce7=BoxySVG.utils.time.debounce,_Shortcut6=BoxySVG.classes.Shortcut,_shadowTemplate6=_html9(_templateObject20,window.theme,window.theme),BXFontFamilyPickerElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._value=null,e._dispatchChangeEventDb600=_debounce7(e._dispatchChangeEventDb,600,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate6.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e.enabled&&e._onEnabled(),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest15(this,"bx-editor")}},{key:"_onEnabled",value:function(){this._update(),this._scrollSelectedItemIntoView()}},{key:"_onDisabled",value:function(){}},{key:"_onItemsPointerDown",value:function(e){e.target.closest(".item")&&this._onItemPointerDown(e)}},{key:"_onItemPointerDown",value:function(e){var t=[].concat(_toConsumableArray(this["#embedded-items"].children),_toConsumableArray(this["#google-fonts-items"].children)),n=e.target.closest(".item"),a=n.getAttribute("data-family");if(a!==this.value){this._value=a;var r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===n?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.dispatchEvent(new CustomEvent("change"))}}},{key:"_onFilterInputInput",value:function(){this._updateItemsHiddenState(),this._updatePlaceholdersHiddenState()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut6.fromEvent(e);t.matches("ArrowUp")?(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem()):t.matches("ArrowDown")&&(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}},{key:"_selectPreviousItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]");if(t){var n=e.indexOf(t),a=e[n-1];a&&(a.scrollIntoViewIfNeeded(),this.value=a.getAttribute("data-family"),this._dispatchChangeEventDb600())}}},{key:"_selectNextItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]");if(t){var n=e.indexOf(t),a=e[n+1];a&&(a.scrollIntoViewIfNeeded(),this.value=a.getAttribute("data-family"),this._dispatchChangeEventDb600())}}},{key:"_scrollSelectedItemIntoView",value:function(){var e=this["#items"].querySelector(".item[data-selected]");this["#items"].scrollTop=0,e&&e.scrollIntoViewIfNeeded()}},{key:"_dispatchChangeEventDb",value:function(){this.dispatchEvent(new CustomEvent("change"))}},{key:"_update",value:async function(){{var e=document.createDocumentFragment(),t=this._ownerEditor.canvas.fontsManager.getFamilies(),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_html9(_templateObject21,s,s,s);e.append(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#embedded-items"].innerHTML="",this["#embedded-items"].append(e)}if(0===this["#google-fonts-items"].children.length){var d=document.createDocumentFragment(),u=await _getGoogleFontsFamilies(),c=await _getGoogleFontsThumbnails(),p=!0,h=!1,b;try{for(var x=u[Symbol.iterator](),m;!(p=(m=x.next()).done);p=!0){var g=m.value,v=_html9(_templateObject22,g,c[g]);d.append(v)}}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}this["#google-fonts-items"].innerHTML="",this["#google-fonts-items"].append(d)}this._updateItemsSelectedState(),this._updateItemsHiddenState(),this._updatePlaceholdersHiddenState()}},{key:"_updateItemsSelectedState",value:function(){var e=this["#items"].querySelector(".item[data-selected]"),t=this["#items"].querySelector(".item[data-family=\""+this.value+"\"]");e!==t&&(e&&e.removeAttribute("data-selected"),t&&t.setAttribute("data-selected",""))}},{key:"_updateItemsHiddenState",value:function(){var e=this["#filter-input"].value,t=this["#embedded-items"].children,n=this["#google-fonts-items"].children,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.getAttribute("data-family");d.hidden=!1===u.toLowerCase().startsWith(e.toLowerCase()),a.push(u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var c=!0,p=!1,h;try{for(var b=n[Symbol.iterator](),x;!(c=(x=b.next()).done);c=!0){var m=x.value,g=m.getAttribute("data-family");m.hidden=!g.toLowerCase().startsWith(e.toLowerCase())||a.includes(g)}}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}},{key:"_updatePlaceholdersHiddenState",value:function(){var e=null===this["#embedded-items"].querySelector(".item:not([hidden])"),t=null===this["#google-fonts-items"].querySelector(".item:not([hidden])");this["#embedded-items-placeholder"].hidden=!e,this["#google-fonts-items-placeholder"].hidden=!t}},{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this._updateItemsSelectedState())}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fontfamilypicker",BXFontFamilyPickerElement)}{{var _html10=BoxySVG.utils.element.html,keyMaps={ArrowRight:{xMinYMin:"xMidYMin",xMidYMin:"xMaxYMin",xMinYMid:"xMidYMid",xMidYMid:"xMaxYMid",xMinYMax:"xMidYMax",xMidYMax:"xMaxYMax"},ArrowLeft:{xMaxYMin:"xMidYMin",xMidYMin:"xMinYMin",xMaxYMid:"xMidYMid",xMidYMid:"xMinYMid",xMaxYMax:"xMidYMax",xMidYMax:"xMinYMax"},ArrowDown:{xMinYMin:"xMinYMid",xMinYMid:"xMinYMax",xMidYMin:"xMidYMid",xMidYMid:"xMidYMax",xMaxYMin:"xMaxYMid",xMaxYMid:"xMaxYMax"},ArrowUp:{xMinYMax:"xMinYMid",xMinYMid:"xMinYMin",xMidYMax:"xMidYMid",xMidYMid:"xMidYMin",xMaxYMax:"xMaxYMid",xMaxYMid:"xMaxYMin"}},_shadowTemplate7=_html10(_templateObject23,window.theme,window.theme),BXAlignButtonsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!0}),e._shadowRoot.append(document.importNode(_shadowTemplate7.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e["#buttons"].addEventListener("click",function(){return e._onButtonsClick(event)}),e["#buttons"].addEventListener("toggle",function(){return e._onButtonsToggle()}),e["#buttons"].addEventListener("keydown",function(t){return e._onKeyDown(t)},!0),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._updateValue():"tracking"===e?this._updateTracking():"disabled"===e&&this._onDisabledAttributeChange())}},{key:"connectedCallback",value:function(){this.setAttribute("aria-disabled",this.disabled),this._update()}},{key:"_onDisabledAttributeChange",value:function(){this.setAttribute("aria-disabled",this.disabled)}},{key:"_onPointerDown",value:function(e){!1===this.matches(":focus")&&(e.preventDefault(),this.focus(),this.blur())}},{key:"_onButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this.dispatchEvent(new CustomEvent("buttonclick",{bubbles:!0,detail:t.value}))}},{key:"_onButtonsToggle",value:function(){this.setAttribute("value",this["#buttons"].value||"none"),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}},{key:"_onKeyDown",value:function(e){var t=e.key;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t)){e.preventDefault(),e.stopImmediatePropagation();var n=this["#buttons"].querySelector("x-button:focus"),a=keyMaps[t][n.value],r=this["#buttons"].querySelector("x-button[value=\""+a+"\"]");r&&r.focus()}}},{key:"_update",value:function(){this._updateValue(),this._updateTracking()}},{key:"_updateValue",value:function(){this["#buttons"].value="none"===this.value?null:this.value}},{key:"_updateTracking",value:function(){this["#buttons"].tracking=this.tracking}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value"):"none"},set:function(e){this.setAttribute("value",e)}},{key:"tracking",get:function(){return this.hasAttribute("tracking")?parseInt(this.getAttribute("tracking")):-1},set:function(e){this.setAttribute("tracking",e)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["value","tracking","disabled"]}}]),t}(_CustomElement);customElements.define("bx-alignbuttons",BXAlignButtonsElement)}}{{var _BoxySVG$utils$elemen16=BoxySVG.utils.element,_html11=_BoxySVG$utils$elemen16.html,_closest16=_BoxySVG$utils$elemen16.closest,_round17=BoxySVG.utils.math.round,_reduceProperty3=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text5=BoxySVG.utils.text,_getRenderedTextNodes4=_BoxySVG$utils$text5.getRenderedTextNodes,_getTspansIntersectedByRange3=_BoxySVG$utils$text5.getTspansIntersectedByRange,_spanifyText4=_BoxySVG$utils$text5.spanifyText,_reduceText3=_BoxySVG$utils$text5.reduceText,_throttle4=BoxySVG.utils.time.throttle,_paintableElementNames4=BoxySVG.utils.variables.paintableElementNames,_parseFloat6=Number.parseFloat,_shadowTemplate8=_html11(_templateObject24,window.theme,window.theme),BXFillPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle4(e._update,200,e),e._isChangingOpacity=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate8.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#opacity-section"].addEventListener("changestart",function(){return e._onOpacityChangeStart()}),e["#rule-buttons"].addEventListener("toggle",function(t){return e._onRuleButtonsToggle(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest16(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update200Th(),this["#paint-controls"].enabled=!0,t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this["#paint-controls"].enabled=!1,e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Fill opacity");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)p=c.value,_spanifyText4(p,a)}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}var h=!0,b=!1,x;try{for(var m=t[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,"text"===v.localName){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange3(a,v),_=0<f.length&&!a.collapsed?f:y;r.push.apply(r,_toConsumableArray(_))}else r.push(v)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",s=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,i;try{for(var o=r[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("fill-opacity",e["#opacity-slider"].value)}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}),this["#opacity-section"].addEventListener("changeend",l=function(){e["#opacity-section"].removeEventListener("change",s),e["#opacity-section"].removeEventListener("changeend",l),e._isChangingOpacity=!1;var t=!0,i=!1,o;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty3("fill-opacity",c)}catch(e){i=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(i)throw o}}var p=!0,h=!1,b;try{for(var x=n[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,_reduceText3(g,a)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}})}},{key:"_onRuleButtonsToggle",value:function(){var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[];this._ownerEditor.canvas.undoManager.checkpoint("Fill rule");var r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText4(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)if(x=b.value,"text"===x.localName&&x.querySelector("tspan")){var m=x.querySelectorAll("tspan"),g=_getTspansIntersectedByRange3(n,x),v=0<g.length&&!n.collapsed?g:m;a.push.apply(a,_toConsumableArray(v))}else a.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("fill-rule",this["#rule-buttons"].value),_reduceProperty3("fill-rule",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,S=!1,E;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText3(L,n)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}},{key:"_update",value:function(){var e=[],t=this._ownerEditor.canvas.selectedTextRange,n=Symbol(),a=!0,r=!1,i;try{for(var o=this._getSelectedPaintableElements()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"text"===l.localName){var d=_getRenderedTextNodes4(l);if(t&&t.intersectsNode(l)){"backward"===t.direction&&d.reverse();var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,t.intersectsNode(x)&&!1===e.includes(x.parentElement)&&e.push(x.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else{var m=!0,g=!1,v=void 0;try{for(var y=d[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,!1===e.includes(_.parentElement)&&e.push(_.parentElement)}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}}}else e.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var w=!0,k=!1,A;try{for(var C=e[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E[n]=getComputedStyle(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}var T=e[0],P=e.slice(1);if(this["#panel-heading"].disabled=void 0===T,!1===this._isChangingOpacity)if(T){var L=T[n].fillOpacity,D=_round17(_parseFloat6(L),2),M=!1,N=!0,I=!1,R;try{for(var V=P[Symbol.iterator](),z;!(N=(z=V.next()).done);N=!0){var G=z.value,B=G[n].fillOpacity,O=_round17(_parseFloat6(B),2);if(O!==D){M=!0;break}}}catch(e){I=!0,R=e}finally{try{!N&&V.return&&V.return()}finally{if(I)throw R}}this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].value=D,this["#opacity-slider"].mixed=M,this["#opacity-input"].disabled=!1,this["#opacity-input"].value=D}else this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].mixed=!1,this["#opacity-input"].disabled=!0,this["#opacity-input"].value=1;if(T){var q=!1,j=T[n].fillRule,U=!0,H=!1,$;try{for(var F=P[Symbol.iterator](),Y;!(U=(Y=F.next()).done);U=!0){var X=Y.value,W=X[n].fillRule;W!==j&&(q=!0)}}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}this["#rule-section-heading"].disabled=!1,this["#non-zero-rule-button"].disabled=!1,this["#even-odd-rule-button"].disabled=!1,"evenodd"===j?(this["#non-zero-rule-button"].toggled=!1,this["#non-zero-rule-button"].mixed=!1,this["#even-odd-rule-button"].toggled=!0,this["#even-odd-rule-button"].mixed=q):"nonzero"===j&&(this["#non-zero-rule-button"].toggled=!0,this["#non-zero-rule-button"].mixed=q,this["#even-odd-rule-button"].toggled=!1,this["#even-odd-rule-button"].mixed=!1)}else this["#rule-section-heading"].disabled=!0,this["#non-zero-rule-button"].disabled=!0,this["#non-zero-rule-button"].toggled=!1,this["#non-zero-rule-button"].mixed=!1,this["#even-odd-rule-button"].disabled=!0,this["#even-odd-rule-button"].toggled=!1,this["#even-odd-rule-button"].mixed=!1}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_paintableElementNames4.includes(l.localName)?e.push(l):"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fillpanel",BXFillPanelElement)}}{{var _BoxySVG$utils$elemen17=BoxySVG.utils.element,_html12=_BoxySVG$utils$elemen17.html,_closest17=_BoxySVG$utils$elemen17.closest,_round18=BoxySVG.utils.math.round,_reduceProperty4=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text6=BoxySVG.utils.text,_getRenderedTextNodes5=_BoxySVG$utils$text6.getRenderedTextNodes,_getTspansIntersectedByRange4=_BoxySVG$utils$text6.getTspansIntersectedByRange,_spanifyText5=_BoxySVG$utils$text6.spanifyText,_reduceText4=_BoxySVG$utils$text6.reduceText,_throttle5=BoxySVG.utils.time.throttle,_getTransformToElement6=BoxySVG.utils.transformGeneral.getTransformToElement,_decomposeTransform13=BoxySVG.utils.transformDecomposition.decomposeTransform,_paintableElementNames5=BoxySVG.utils.variables.paintableElementNames,_abs8=Math.abs,_parseFloat7=Number.parseFloat,dashArrayPresets=["none","2px","4px","5px","8px","10px","20px","30px","1px, 4px","5px, 10px"],dashArraySelectMenuItemsHTML=dashArrayPresets.map(function(e){return"\n      <x-menuitem value=\""+e+"\">\n        <svg viewBox=\"0 0 100 20\" preserveAspectRatio=\"none\" style=\"width: 195px; height: 20px; display: block;\">\n          <path\n            d=\"M 0 10 L 100 10\"\n            style=\"stroke-dasharray: "+e+"; stroke: currentColor; vector-effect: non-scaling-stroke;\">\n          </path>\n        </svg>\n      </x-menuitem>\n    "}).join(""),_shadowTemplate9=_html12(_templateObject25,window.theme,window.theme,dashArraySelectMenuItemsHTML),BXStrokePanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle5(e._update,200,e),e._isChangingOpacity=!1,e._isChangingWidth=!1,e._isChangingDashArray=!1,e._isChangingDashOffset=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate9.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#opacity-section"].addEventListener("changestart",function(){return e._onOpacityChangeStart()}),e["#width-box"].addEventListener("changestart",function(){return e._onWidthChangeStart()}),e["#non-scaling-stroke-checkbox"].addEventListener("change",function(){return e._onNonScalingStrokeCheckboxChange()}),e["#line-cap-buttons"].addEventListener("toggle",function(){return e._onLineCapButtonsToggle()}),e["#line-join-buttons"].addEventListener("toggle",function(){return e._onLineJoinButtonsToggle()}),e["#dash-array-select"].addEventListener("change",function(){return e._onDashArraySelectChange()}),e["#dash-array-inputs"].addEventListener("changestart",function(t){return e._onDashArrayInputsChangeStart(t)}),e["#dash-offset-box"].addEventListener("changestart",function(){return e._onDashOffsetChangeStart()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest17(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this["#paint-controls"].enabled=!0,this._update200Th(),this._ownerEditor.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerEditor.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){this["#paint-controls"].enabled=!1,this._ownerEditor.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerEditor.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Stroke opacity");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)p=c.value,_spanifyText5(p,a)}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}var h=!0,b=!1,x;try{for(var m=t[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,"text"===v.localName){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange4(a,v),_=0<f.length&&!a.collapsed?f:y;r.push.apply(r,_toConsumableArray(_))}else r.push(v)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",s=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,i;try{for(var o=r[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("stroke-opacity",e["#opacity-slider"].value)}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}),this["#opacity-section"].addEventListener("changeend",l=function(){e["#opacity-section"].removeEventListener("change",s),e["#opacity-section"].removeEventListener("changeend",l),e._isChangingOpacity=!1;var t=!0,i=!1,o;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-opacity",c)}catch(e){i=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(i)throw o}}var p=!0,h=!1,b;try{for(var x=n[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,_reduceText4(g,a)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}})}},{key:"_onWidthChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Stroke width");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=Symbol(),o=!0,s=!1,l,d,u;try{for(var c=n[Symbol.iterator](),p,h;!(o=(p=c.next()).done);o=!0)h=p.value,_spanifyText5(h,a)}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}var b=!0,x=!1,m;try{for(var g=t[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=_getTransformToElement6(y,this._ownerEditor.canvas.masterArtboard),_=_decomposeTransform13(f),w=_.scaleX,k=_.scaleY,A=(_abs8(w)+_abs8(k))/2;if("text"===y.localName&&y.querySelector("tspan")){var C=y.querySelectorAll("tspan"),S=_getTspansIntersectedByRange4(a,y),E=0<S.length&&!a.collapsed?S:C,T=!0,P=!1,L=void 0;try{for(var D=E[Symbol.iterator](),M;!(T=(M=D.next()).done);T=!0){var N=M.value,I=getComputedStyle(N).getPropertyValue("vector-effect");N[i]="non-scaling-stroke"===I?1:A,r.push(N)}}catch(e){P=!0,L=e}finally{try{!T&&D.return&&D.return()}finally{if(P)throw L}}}else{var R=getComputedStyle(y).getPropertyValue("vector-effect");y[i]="non-scaling-stroke"===R?1:A,r.push(y)}}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}this._isChangingWidth=!0,this["#width-section"].addEventListener("change",l=function(t){t.target===e["#width-slider"]?e["#width-input"].value=e["#width-slider"].value:t.target===e["#width-input"]&&(e["#width-slider"].value=e["#width-input"].value),e["#width-slider"].mixed=!1,e["#width-input"].mixed=!1;var n=!0,a=!1,o;try{for(var s=r[Symbol.iterator](),l,d;!(n=(l=s.next()).done);n=!0)d=l.value,d.style.setProperty("stroke-width",e["#width-input"].value/d[i])}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}}),this["#width-section"].addEventListener("changeend",d=function(){e["#width-section"].removeEventListener("change",l),e["#width-section"].removeEventListener("changeend",d),e._isChangingWidth=!1;var t=!0,i=!1,o;try{for(var s=r[Symbol.iterator](),u,c;!(t=(u=s.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-width",c)}catch(e){i=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw o}}var p=!0,h=!1,b;try{for(var x=n[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,_reduceText4(g,a)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}})}},{key:"_onDashOffsetChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Dash offset");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)p=c.value,_spanifyText5(p,a)}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}var h=!0,b=!1,x;try{for(var m=t[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,"text"===v.localName&&v.querySelector("tspan")){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange4(a,v),_=0<f.length&&!a.collapsed?f:y,w=!0,k=!1,A=void 0;try{for(var C=_[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,r.push(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else r.push(v)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}this._isChangingDashOffset=!0,this["#dash-offset-box"].addEventListener("change",s=function(t){t.target===e["#dash-offset-slider"]?e["#dash-offset-input"].value=e["#dash-offset-slider"].value:t.target===e["#width-input"]&&(e["#dash-offset-slider"].value=e["#dash-offset-input"].value),e["#dash-offset-slider"].mixed=!1,e["#dash-offset-input"].mixed=!1;var n=!0,a=!1,i;try{for(var o=r[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("stroke-dashoffset",e["#dash-offset-input"].value)}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}),this["#dash-offset-box"].addEventListener("changeend",l=function(){e["#dash-offset-box"].removeEventListener("change",s),e["#dash-offset-box"].removeEventListener("changeend",l),e._isChangingDashOffset=!1;var t=!0,i=!1,o;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-dashoffset",c)}catch(e){i=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(i)throw o}}var p=!0,h=!1,b;try{for(var x=n[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,_reduceText4(g,a)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}})}},{key:"_onDashArraySelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Dash array");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)if(x=b.value,"text"===x.localName&&x.querySelector("tspan")){var m=x.querySelectorAll("tspan"),g=_getTspansIntersectedByRange4(n,x),v=0<g.length&&!n.collapsed?g:m,y=!0,f=!1,_=void 0;try{for(var w=v[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,a.push(A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}else a.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var C=!0,S=!1,E;try{for(var T=a[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.style.setProperty("stroke-dasharray",this["#dash-array-select"].value),_reduceProperty4("stroke-dasharray",L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}var D=!0,M=!1,N;try{for(var I=t[Symbol.iterator](),R,V;!(D=(R=I.next()).done);D=!0)V=R.value,_reduceText4(V,n)}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}}},{key:"_onDashArrayInputsChangeStart",value:function(e){var t=this;this._ownerEditor.canvas.undoManager.checkpoint("Dash array");var n=this._getSelectedPaintableElements(),a=n.filter(function(e){return"text"===e.localName}),r=this._ownerEditor.canvas.selectedTextRange,i=e.target,o=[].concat(_toConsumableArray(this["#dash-array-inputs"].querySelectorAll("x-numberinput"))),s=[],l=!0,d=!1,u,c,p;try{for(var h=a[Symbol.iterator](),b,x;!(l=(b=h.next()).done);l=!0)x=b.value,_spanifyText5(x,r)}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}var m=!0,g=!1,v;try{for(var y=n[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)if(_=f.value,"text"===_.localName&&_.querySelector("tspan")){var w=_.querySelectorAll("tspan"),k=_getTspansIntersectedByRange4(r,_),A=0<k.length&&!r.collapsed?k:w,C=!0,S=!1,E=void 0;try{for(var T=A[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,s.push(L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}else s.push(_)}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}this._isChangingDashArray=!0,i.addEventListener("change",u=function(){i.mixed=!1;var e=o.map(function(e){return e.value}).join(" ").trim(),t=!0,n=!1,a;try{for(var r=s[Symbol.iterator](),l,d;!(t=(l=r.next()).done);t=!0)d=l.value,d.style.setProperty("stroke-dasharray",e)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}),i.addEventListener("changeend",c=function(){i.removeEventListener("change",u),i.removeEventListener("changeend",c),t._isChangingDashArray=!1;var e=!0,n=!1,o;try{for(var l=s[Symbol.iterator](),d,p;!(e=(d=l.next()).done);e=!0)p=d.value,_reduceProperty4("stroke-dasharray",p)}catch(e){n=!0,o=e}finally{try{!e&&l.return&&l.return()}finally{if(n)throw o}}var h=!0,b=!1,x;try{for(var m=a[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,_reduceText4(v,r)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}})}},{key:"_onNonScalingStrokeCheckboxChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Non-scaling stroke");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this["#non-scaling-stroke-checkbox"].toggled?"non-scaling-stroke":"none",a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_spanifyText5(u,a)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,p=!1,h;try{for(var b=e[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)if(m=x.value,"text"===m.localName&&m.querySelector("tspan")&&a&&m.contains(a.commonAncestorContainer)){var g=m.querySelectorAll("tspan"),v=_getTspansIntersectedByRange4(a,m),y=a.collapsed?g:v;r.push.apply(r,_toConsumableArray(y))}else r.push(m)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}var f=!0,_=!1,w;try{for(var k=r[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.style.setProperty("vector-effect",n),_reduceProperty4("vector-effect",C)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}var S=!0,E=!1,T;try{for(var P=t[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,_reduceText4(D,a)}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}},{key:"_onLineCapButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Line cap");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)if(x=b.value,"text"===x.localName&&x.querySelector("tspan")){var m=x.querySelectorAll("tspan"),g=_getTspansIntersectedByRange4(n,x),v=0<g.length&&!n.collapsed?g:m;a.push.apply(a,_toConsumableArray(v))}else a.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("stroke-linecap",this["#line-cap-buttons"].value),_reduceProperty4("stroke-linecap",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,S=!1,E;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText4(L,n)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}},{key:"_onLineJoinButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Line join");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)if(x=b.value,"text"===x.localName&&x.querySelector("tspan")){var m=x.querySelectorAll("tspan"),g=_getTspansIntersectedByRange4(n,x),v=0<g.length&&!n.collapsed?g:m;a.push.apply(a,_toConsumableArray(v))}else a.push(x)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("stroke-linejoin",this["#line-join-buttons"].value),_reduceProperty4("stroke-linejoin",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,S=!1,E;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText4(L,n)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=[],n=[],a=Symbol(),r=Symbol();{var o=e.selectedTextRange,s=!0,l=!1,d;try{for(var u=this._getSelectedPaintableElements()[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,"text"===p.localName){var h=_getRenderedTextNodes5(p);if(o&&o.intersectsNode(p)){"backward"===o.direction&&h.reverse();var b=!0,x=!1,m=void 0;try{for(var g=h[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,o.intersectsNode(y)&&(!t.includes(y.parentElement)&&t.push(y.parentElement),!n.includes(y.parentElement)&&n.push(y.parentElement))}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}}else{var f=!0,_=!1,w=void 0;try{for(var k=h[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,!1===t.includes(C.parentElement)&&t.push(C.parentElement)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}n.push(p)}}else t.push(p),n.push(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var S=!0,E=!1,T;try{for(var P=new Set([].concat(t,n))[Symbol.iterator](),L;!(S=(L=P.next()).done);S=!0){var D=L.value,M=_getTransformToElement6(D,e.masterArtboard),N=_decomposeTransform13(M),I=N.scaleX,R=N.scaleY;D[a]=getComputedStyle(D),D[r]=(_abs8(I)+_abs8(R))/2}}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}{var V=t[0],z=t.slice(1);this["#panel-heading"].disabled=void 0===V}if(!1===this._isChangingOpacity){var G=t[0],B=t.slice(1);if(G){var O=G[a].strokeOpacity,q=_round18(_parseFloat7(O),2),j=!1,U=!0,H=!1,$;try{for(var F=B[Symbol.iterator](),Y;!(U=(Y=F.next()).done);U=!0){var X=Y.value,W=X[a].strokeOpacity,K=_round18(_parseFloat7(W),2);if(K!==q){j=!0;break}}}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].value=q,this["#opacity-slider"].mixed=j,this["#opacity-input"].disabled=!1,this["#opacity-input"].value=q}else this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].mixed=!1,this["#opacity-input"].disabled=!0,this["#opacity-input"].value=1}if(!1===this._isChangingWidth&&!1===e.transformHud.isScaling){{var Z=t[0],Q=t.slice(1);if(Z){var J=!1,ee=Z[a].getPropertyValue("vector-effect"),te=_parseFloat7(Z[a].getPropertyValue("stroke-width")),ne=_round18(Z[r]*te,3),ae=!0,re=!1,ie;try{for(var oe=Q[Symbol.iterator](),se;!(ae=(se=oe.next()).done);ae=!0){var le=se.value,de=_parseFloat7(le[a].getPropertyValue("stroke-width")),ue=_round18(le[r]*de,3);if(ne!==ue){J=!0;break}}}catch(e){re=!0,ie=e}finally{try{!ae&&oe.return&&oe.return()}finally{if(re)throw ie}}this["#width-slider"].value="non-scaling-stroke"===ee?te:ne,this["#width-slider"].disabled=!1,this["#width-slider"].mixed=J,this["#width-input"].value=this["#width-slider"].value,this["#width-input"].disabled=!1}else this["#width-slider"].value=0,this["#width-slider"].disabled=!0,this["#width-slider"].mixed=!1,this["#width-input"].value=0,this["#width-input"].disabled=!0}{var ce=n[0],pe=n.slice(1);if(ce){var he=ce[a].getPropertyValue("vector-effect"),be=!1,xe=!0,me=!1,ge;try{for(var ve=pe[Symbol.iterator](),ye;!(xe=(ye=ve.next()).done);xe=!0){var fe=ye.value,_e=fe[a].getPropertyValue("vector-effect");if(_e!==he){be=!0;break}}}catch(e){me=!0,ge=e}finally{try{!xe&&ve.return&&ve.return()}finally{if(me)throw ge}}this["#non-scaling-stroke-checkbox"].disabled=!1,this["#non-scaling-stroke-checkbox"].toggled="non-scaling-stroke"===he,this["#non-scaling-stroke-checkbox"].mixed=be,this["#non-scaling-stroke-label"].disabled=!1}else this["#non-scaling-stroke-checkbox"].disabled=!0,this["#non-scaling-stroke-checkbox"].toggled=!1,this["#non-scaling-stroke-checkbox"].mixed=!1,this["#non-scaling-stroke-label"].disabled=!0}this["#width-section-heading"].disabled=this["#width-slider"].disabled||this["#non-scaling-stroke-checkbox"].disabled}{var we=t[0],ke=t.slice(1);if(this["#line-section-heading"].disabled=void 0===we,this["#line-cap-box-heading"].disabled=void 0===we,this["#line-join-box-heading"].disabled=void 0===we,we){var Ae=!0,Ce=!1,Se;try{for(var Ee=this["#line-cap-buttons"].children[Symbol.iterator](),Te,Pe;!(Ae=(Te=Ee.next()).done);Ae=!0)Pe=Te.value,Pe.disabled=!1}catch(e){Ce=!0,Se=e}finally{try{!Ae&&Ee.return&&Ee.return()}finally{if(Ce)throw Se}}var Le=!0,De=!1,Me;try{for(var Ne=this["#line-join-buttons"].children[Symbol.iterator](),Ie,Re;!(Le=(Ie=Ne.next()).done);Le=!0)Re=Ie.value,Re.disabled=!1}catch(e){De=!0,Me=e}finally{try{!Le&&Ne.return&&Ne.return()}finally{if(De)throw Me}}var Ve=we[a].getPropertyValue("stroke-linecap"),ze=we[a].getPropertyValue("stroke-linejoin"),Ge=!1,Be=!1,Oe=!0,qe=!1,je;try{for(var Ue=ke[Symbol.iterator](),He;!(Oe=(He=Ue.next()).done);Oe=!0){var $e=He.value,Fe=$e[a].getPropertyValue("stroke-linecap"),Ye=$e[a].getPropertyValue("stroke-linejoin");Fe!==Ve&&(Ge=!0),Ye!==ze&&(Be=!0)}}catch(e){qe=!0,je=e}finally{try{!Oe&&Ue.return&&Ue.return()}finally{if(qe)throw je}}var Xe=!0,We=!1,Ke;try{for(var Ze=this["#line-cap-buttons"].children[Symbol.iterator](),Qe,Je;!(Xe=(Qe=Ze.next()).done);Xe=!0)Je=Qe.value,Je.value===Ve?(Je.toggled=!0,Je.mixed=Ge):(Je.toggled=!1,Je.mixed=!1)}catch(e){We=!0,Ke=e}finally{try{!Xe&&Ze.return&&Ze.return()}finally{if(We)throw Ke}}var et=!0,tt=!1,nt;try{for(var at=this["#line-join-buttons"].children[Symbol.iterator](),rt,it;!(et=(rt=at.next()).done);et=!0)it=rt.value,it.value===ze?(it.toggled=!0,it.mixed=Be):(it.toggled=!1,it.mixed=!1)}catch(e){tt=!0,nt=e}finally{try{!et&&at.return&&at.return()}finally{if(tt)throw nt}}}else{var ot=!0,st=!1,lt;try{for(var dt=this["#line-cap-buttons"].children[Symbol.iterator](),ut,ct;!(ot=(ut=dt.next()).done);ot=!0)ct=ut.value,ct.disabled=!0,ct.toggled=!1,ct.mixed=!1}catch(e){st=!0,lt=e}finally{try{!ot&&dt.return&&dt.return()}finally{if(st)throw lt}}var pt=!0,ht=!1,bt;try{for(var xt=this["#line-join-buttons"].children[Symbol.iterator](),mt,gt;!(pt=(mt=xt.next()).done);pt=!0)gt=mt.value,gt.disabled=!0,gt.toggled=!1,gt.mixed=!1}catch(e){ht=!0,bt=e}finally{try{!pt&&xt.return&&xt.return()}finally{if(ht)throw bt}}}}if(!1===this._isChangingDashOffset){var vt=t[0],yt=t.slice(1);if(this["#dash-section-heading"].disabled=void 0===vt,this["#dash-array-box-heading"].disabled=void 0===vt,this["#dash-array-select"].disabled=void 0===vt,vt){var ft=!0,_t=!1,wt;try{for(var kt=this["#dash-array-inputs"].children[Symbol.iterator](),At;!(ft=(At=kt.next()).done);ft=!0){var Ct=At.value,St=!0,Et=!1,Tt=void 0;try{for(var Pt=Ct.children[Symbol.iterator](),Lt,Dt;!(St=(Lt=Pt.next()).done);St=!0)Dt=Lt.value,Dt.disabled=!1}catch(e){Et=!0,Tt=e}finally{try{!St&&Pt.return&&Pt.return()}finally{if(Et)throw Tt}}}}catch(e){_t=!0,wt=e}finally{try{!ft&&kt.return&&kt.return()}finally{if(_t)throw wt}}var Mt=this["#dash-array-inputs"].querySelectorAll("x-numberinput"),Nt=vt[a].getPropertyValue("stroke-dasharray"),It=[];"none"!==Nt&&(It=Nt.split(",").map(function(e){return _parseFloat7(e.trim())}));for(var Rt=0;6>Rt;Rt+=1){var i=void 0===It[Rt]?null:It[Rt],Vt=Mt[Rt];Vt.value=i,Vt.disabled=Rt>It.length}this["#dash-array-select"].value=dashArrayPresets.includes(Nt)?Nt:null}else{var zt=!0,Gt=!1,Bt;try{for(var Ot=this["#dash-array-inputs"].children[Symbol.iterator](),qt;!(zt=(qt=Ot.next()).done);zt=!0){var jt=qt.value,Ut=!0,Ht=!1,$t=void 0;try{for(var Ft=jt.children[Symbol.iterator](),Yt,Xt;!(Ut=(Yt=Ft.next()).done);Ut=!0)Xt=Yt.value,Xt.disabled=!0}catch(e){Ht=!0,$t=e}finally{try{!Ut&&Ft.return&&Ft.return()}finally{if(Ht)throw $t}}}}catch(e){Gt=!0,Bt=e}finally{try{!zt&&Ot.return&&Ot.return()}finally{if(Gt)throw Bt}}}if(vt){var Wt=vt[a].getPropertyValue("stroke-dashoffset"),Kt=!1,Zt=!0,Qt=!1,Jt;try{for(var en=yt[Symbol.iterator](),tn;!(Zt=(tn=en.next()).done);Zt=!0){var nn=tn.value,an=nn[a].getPropertyValue("stroke-dashoffset");if(an!==Wt){Kt=!0;break}}}catch(e){Qt=!0,Jt=e}finally{try{!Zt&&en.return&&en.return()}finally{if(Qt)throw Jt}}this["#dash-offset-slider"].disabled=!1,this["#dash-offset-slider"].mixed=Kt,this["#dash-offset-slider"].value=_parseFloat7(Wt),this["#dash-offset-input"].disabled=!1,this["#dash-offset-slider"].mixed=Kt,this["#dash-offset-input"].value=_parseFloat7(Wt)}else this["#dash-offset-slider"].disabled=!0,this["#dash-offset-slider"].mixed=!1,this["#dash-offset-input"].disabled=!0,this["#dash-offset-input"].mixed=!1}}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_paintableElementNames5.includes(l.localName)?e.push(l):"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-strokepanel",BXStrokePanelElement)}}{{var _BoxySVG$utils$elemen18=BoxySVG.utils.element,_html13=_BoxySVG$utils$elemen18.html,_closest18=_BoxySVG$utils$elemen18.closest,_round19=BoxySVG.utils.math.round,_reduceProperty5=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text7=BoxySVG.utils.text,_getRenderedTextNodes6=_BoxySVG$utils$text7.getRenderedTextNodes,_getTspansIntersectedByRange5=_BoxySVG$utils$text7.getTspansIntersectedByRange,_reduceText5=_BoxySVG$utils$text7.reduceText,_spanifyText6=_BoxySVG$utils$text7.spanifyText,_throttle6=BoxySVG.utils.time.throttle,_parseFloat8=Number.parseFloat,compositableElementNames=["rect","circle","ellipse","line","path","polygon","polyline","image","text","tspan","use","svg","a","g"],_shadowTemplate10=_html13(_templateObject26,window.theme,window.theme),BXCompositingPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle6(e._update,200,e),e._isChangingOpacity=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate10.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#opacity-box"].addEventListener("changestart",function(t){return e._onOpacityChangeStart(t)}),e["#blend-mode-select"].addEventListener("change",function(){return e._onBlendModeSelectChange()}),e["#isolation-checkbox"].addEventListener("change",function(){return e._onIsolationCheckboxChange()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest18(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Opacity");var t=this._getSelectedCompositableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=[],o=!0,s=!1,l,d,u;try{for(var c=t[Symbol.iterator](),p,h;!(o=(p=c.next()).done);o=!0)if(h=p.value,"text"===h.localName&&a&&h.contains(a.commonAncestorContainer)){_spanifyText6(h,a),r.push(h);var b=h.querySelectorAll("tspan"),x=_getTspansIntersectedByRange5(a,h),m=a.collapsed?b:x;i.push.apply(i,_toConsumableArray(m))}else i.push(h)}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",l=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,r;try{for(var o=i[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("opacity",e["#opacity-slider"].value)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}),this["#opacity-section"].addEventListener("changeend",d=function(){e["#opacity-section"].removeEventListener("change",l),e["#opacity-section"].removeEventListener("changeend",d),e._isChangingOpacity=!1;var t=!0,n=!1,o;try{for(var s=i[Symbol.iterator](),u,c;!(t=(u=s.next()).done);t=!0)c=u.value,_reduceProperty5("opacity",c)}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}var p=!0,h=!1,b;try{for(var x=r[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,_reduceText5(g,a)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}})}},{key:"_onBlendModeSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Blend mode");var e=this._ownerEditor.canvas.selectedTextRange,t=this["#blend-mode-select"].value,n=!0,a=!1,r;try{for(var i=this._getSelectedCompositableElements()[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName&&e&&s.contains(e.commonAncestorContainer)){_spanifyText6(s,e);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange5(e,s),u=e.collapsed?l:d,c=!0,p=!1,h=void 0;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.style.setProperty("mix-blend-mode",t)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}_reduceText5(s,e)}else s.style.setProperty("mix-blend-mode",t),_reduceProperty5("mix-blend-mode",s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onIsolationCheckboxChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Isolate");var e=this._ownerEditor.canvas.selectedTextRange,t=this["#isolation-checkbox"].checked?"isolate":"auto",n=!0,a=!1,r;try{for(var i=this._getSelectedCompositableElements()[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName&&e&&s.contains(e.commonAncestorContainer)){_spanifyText6(s,e);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange5(e,s),u=e.collapsed?l:d,c=!0,p=!1,h=void 0;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.style.setProperty("isolation",t)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}_reduceText5(s,e)}else s.style.setProperty("isolation",t),_reduceProperty5("isolation",s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_update",value:function(){var e=[],t=Symbol();{var n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=this._getSelectedCompositableElements()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"text"!==l.localName)e.push(l);else if(n&&n.intersectsNode(l)){var d=_getRenderedTextNodes6(l);"backward"===n.direction&&d.reverse();var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,n.intersectsNode(x)&&!e.includes(x.parentElement)&&e.push(x.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else e.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var m=!0,g=!1,v;try{for(var y=e[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,_[t]=getComputedStyle(_)}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}}if(this["#panel-heading"].disabled=0===e.length,!1===this._isChangingOpacity){var w=e[0],k=e.slice(1),A=w?_round19(_parseFloat8(w[t].opacity),2):1,C=!1,S=!0,E=!1,T;try{for(var P=k[Symbol.iterator](),L;!(S=(L=P.next()).done);S=!0){var D=L.value,M=D?_round19(_parseFloat8(D[t].opacity),2):1;M!==A&&(C=!0)}}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}w?(this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].value=A,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].mixed=C,this["#opacity-input"].value=A,this["#opacity-input"].disabled=!1,this["#opacity-input"].mixed=C):(this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1,this["#opacity-input"].value=1,this["#opacity-input"].disabled=!0,this["#opacity-input"].mixed=!1)}{var N=e[0],I=e.slice(1);if(N){var R=N[t],V=R.getPropertyValue("mix-blend-mode"),z=R.getPropertyValue("isolation"),G=!1,B=!1,O=!0,q=!1,j;try{for(var U=I[Symbol.iterator](),H;!(O=(H=U.next()).done);O=!0){var $=H.value,F=$[t],Y=F.getPropertyValue("mix-blend-mode"),X=F.getPropertyValue("isolation");Y!==V&&(G=!0),X!==z&&(B=!0)}}catch(e){q=!0,j=e}finally{try{!O&&U.return&&U.return()}finally{if(q)throw j}}this["#blend-mode-section-heading"].disabled=!1,this["#blend-mode-select"].value=N[t].getPropertyValue("mix-blend-mode"),this["#blend-mode-select"].disabled=!1,this["#blend-mode-select"].mixed=G,this["#isolation-checkbox"].checked="isolate"===z,this["#isolation-checkbox"].disabled=!1,this["#isolation-checkbox"].mixed=B,this["#isolation-label"].disabled=!1}else this["#blend-mode-section-heading"].disabled=!0,this["#blend-mode-select"].value="normal",this["#blend-mode-select"].disabled=!0,this["#blend-mode-select"].mixed=!1,this["#isolation-checkbox"].disabled=!0,this["#isolation-checkbox"].checked=!1,this["#isolation-checkbox"].mixed=!1,this["#isolation-label"].disabled=!0}}},{key:"_getSelectedCompositableElements",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this._ownerEditor.canvas.outermostSelectedElements[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.localName;compositableElementNames.includes(s)&&e.push(o)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-compositingpanel",BXCompositingPanelElement)}}{{var _getUserBBox6=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen19=BoxySVG.utils.element,_html14=_BoxySVG$utils$elemen19.html,_svg5=_BoxySVG$utils$elemen19.svg,_closest19=_BoxySVG$utils$elemen19.closest,_BoxySVG$utils$fontGe2=BoxySVG.utils.fontGeneral,_fetchFontData3=_BoxySVG$utils$fontGe2.fetchFontData,_getFontBaseline=_BoxySVG$utils$fontGe2.getFontBaseline,_matchFontWeight=_BoxySVG$utils$fontGe2.matchFontWeight,_normalizeFontWeight3=_BoxySVG$utils$fontGe2.normalizeFontWeight,_getGoogleFontsRegistry2=BoxySVG.utils.fontGoogle.getGoogleFontsRegistry,_round20=BoxySVG.utils.math.round,_BoxySVG$utils$parsin3=BoxySVG.utils.parsing,_parseFontFamily2=_BoxySVG$utils$parsin3.parseFontFamily,_parseLength=_BoxySVG$utils$parsin3.parseLength,_BoxySVG$utils$text8=BoxySVG.utils.text,_getRenderedTextNodes7=_BoxySVG$utils$text8.getRenderedTextNodes,_getTspansIntersectedByRange6=_BoxySVG$utils$text8.getTspansIntersectedByRange,_reduceText6=_BoxySVG$utils$text8.reduceText,_spanifyText7=_BoxySVG$utils$text8.spanifyText,_BoxySVG$utils$time6=BoxySVG.utils.time,_sleep6=_BoxySVG$utils$time6.sleep,_throttle7=_BoxySVG$utils$time6.throttle,_decomposeTransform16=BoxySVG.utils.transformDecomposition.decomposeTransform,_BoxySVG$utils$transf8=BoxySVG.utils.transformGeneral,_getTransformToElement7=_BoxySVG$utils$transf8.getTransformToElement,_getComputedTransform10=_BoxySVG$utils$transf8.getComputedTransform,_parseFloat9=Number.parseFloat,_entries4=Object.entries,_shadowTemplate11=_html14(_templateObject27,window.theme,window.theme),BXTypographyPanelElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._update200Th=_throttle7(n._update,200,n),n._isImportingFontFamily=!1,n._isChangingFontSize=!1,n._isChangingLetterSpacing=!1,n._isChangingWordSpacing=!1,n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.append(document.importNode(_shadowTemplate11.content,!0));var e=!0,a=!1,r;try{for(var i=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}return n["#font-family-popover"].addEventListener("open",function(){return n._onFontFamilyPopoverOpen()}),n["#font-family-popover"].addEventListener("close",function(){return n._onFontFamilyPopoverClose()}),n["#font-family-picker"].addEventListener("change",function(){return n._onFontFamilyChange()}),n["#font-family-hint"].addEventListener("click",function(e){return n._onFontFamilyHintClick(e)}),n["#font-weight-select"].addEventListener("change",function(){return n._onFontWeightSelectChange()}),n["#font-style-button"].addEventListener("toggle",function(){return n._onFontStyleButtonToggle()}),n["#font-size-box"].addEventListener("changestart",function(){return n._onFontSizeChangeStart()}),n["#text-decoration-buttons"].addEventListener("toggle",function(t){return n._onTextDecorationButtonsToggle(t)}),n["#text-transform-buttons"].addEventListener("toggle",function(t){return n._onTextTransformButtonsToggle(t)}),n["#text-on-path-button"].addEventListener("toggle",function(){return n._onTextOnPathButtonToggle()}),n["#letter-spacing-slider"].addEventListener("changestart",function(){return n._onLetterSpacingChangeStart()}),n["#letter-spacing-input"].addEventListener("changestart",function(){return n._onLetterSpacingChangeStart()}),n["#word-spacing-slider"].addEventListener("changestart",function(){return n._onWordSpacingChangeStart()}),n["#word-spacing-input"].addEventListener("changestart",function(){return n._onWordSpacingChangeStart()}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest19(this,"bx-editor"),this._ownerApp=_closest19(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;this["#font-family-picker"].enabled=!0,t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this["#font-family-picker"].enabled=!1,e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onFontFamilyPopoverOpen",value:async function(){this["#font-family-picker"].enabled=!0,await _sleep6(10),this["#font-family-picker"].focus()}},{key:"_onFontFamilyPopoverClose",value:async function(){this["#font-family-picker"].enabled=!1,await _sleep6(200),this._ownerEditor.canvas.fontsManager.removeUnusedFamilies(!0,!1),"bx-chromeapp"!==this._ownerApp.localName&&this._ownerEditor.canvas.fontsManager.embedLinkedFonts(!0,!1)}},{key:"_onFontFamilyChange",value:async function(){var e=this._ownerEditor.canvas,t=this["#font-family-picker"].value,n=e.fontsManager.getFamilies();if(this._isImportingFontFamily=!0,this._ownerEditor.canvas.undoManager.checkpoint("Font family"),!1===n.includes(t)){var a=[],r=await _getGoogleFontsRegistry2(),i=r.items.find(function(e){return e.family===t});if(i){var o=!0,s=!1,l;try{for(var d=_entries4(i.urls)[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=_slicedToArray(u.value,2),p=c[0],h=c[1],b=p.substring(0,3),x=p.includes("italic")?"italic":"normal",m=void 0;if("bx-chromeapp"!==this._ownerApp.localName)m="url("+h+")";else{var g=await _fetchFontData3(h);m="url(\""+g+"\")"}var v=new FontFace(t,m,{weight:b,style:x});v.src=m,a.push(v)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}this._ownerEditor.canvas.fontsManager.addFonts(a,!0),await Promise.all(a.map(function(e){return e.load()}))}}{var y=this._getSelectedTexts(),f=this._ownerEditor.canvas.selectedTextRange,_=!0,w=!1,k;try{for(var A=y[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0){S=C.value,_spanifyText7(S,f);var E=S.querySelectorAll("tspan"),T=_getTspansIntersectedByRange6(f,S),P=0<T.length&&!f.collapsed?T:E,L=!0,D=!1,M=void 0;try{for(var N=P[Symbol.iterator](),I,R;!(L=(I=N.next()).done);L=!0)R=I.value,R.style.setProperty("font-family","\""+t+"\"")}catch(e){D=!0,M=e}finally{try{!L&&N.return&&N.return()}finally{if(D)throw M}}_reduceText6(S,f)}}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}}this._isImportingFontFamily=!1}},{key:"_onFontFamilyHintClick",value:function(e){0===e.button&&"defs-panel-span"===e.target.id&&(this._ownerEditor.panelsDock.value="defs-panel")}},{key:"_onFontWeightSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Font weight");var e=this._getSelectedTexts(),t=this["#font-weight-select"].value,n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,h=!1,b=void 0;try{for(var x=c[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g.style.setProperty("font-weight",t)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}_reduceText6(l,n)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_onFontStyleButtonToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Font style");var e=this._getSelectedTexts(),t=this["#font-style-button"].toggled?"italic":"normal",n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,h=!1,b=void 0;try{for(var x=c[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g.style.setProperty("font-style",t)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}_reduceText6(l,n)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_onFontSizeChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Font size");var t=Symbol(),n=Symbol(),a=this._getSelectedTexts(),r=this._ownerEditor.canvas.selectedTextRange,i=!0,o=!1,s,l,d;try{for(var u=a[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0){p=c.value,_spanifyText7(p,r);var h=p.querySelectorAll("tspan"),b=_getTspansIntersectedByRange6(r,p),x=0<b.length&&!r.collapsed?b:h;p[t]=x,p[n]=_decomposeTransform16(_getTransformToElement7(p,this._ownerEditor.canvas.currentArtboard).inverse()).scaleY}}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}this._isChangingFontSize=!0,this["#font-size-box"].addEventListener("change",s=function(){event.target===e["#font-size-slider"]?e["#font-size-input"].value=e["#font-size-slider"].value:event.target===e["#font-size-input"]&&(e["#font-size-slider"].value=e["#font-size-input"].value),e["#font-size-input"].mixed=!1,e["#font-size-slider"].mixed=!1;var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d[t],c=d[n],p=e["#font-size-input"].value*c;if(0<u.length){var h=!0,b=!1,x=void 0;try{for(var m=u[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,v.style.setProperty("font-size",p)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}else d.style.setProperty("font-size",p)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#font-size-box"].addEventListener("changeend",l=function(){e["#font-size-box"].removeEventListener("change",s),e["#font-size-box"].removeEventListener("changeend",l);var t=!0,n=!1,i;try{for(var o=a[Symbol.iterator](),d,u;!(t=(d=o.next()).done);t=!0)u=d.value,_reduceText6(u,r)}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}e._isChangingFontSize=!1})}},{key:"_onTextDecorationButtonsToggle",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Text decoration");var t=e.detail,n=t.toggled,a=t.mixed,r=t.value,i=this._getSelectedTexts(),o=this._ownerEditor.canvas.selectedTextRange,s=!0,l=!1,d;try{for(var u=i[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,o);var h=[];if(o&&p.contains(o.commonAncestorContainer)){var b=p.querySelectorAll("tspan"),x=_getTspansIntersectedByRange6(o,p),m=o.collapsed?b:x;h.push.apply(h,_toConsumableArray(m))}else h.push(p);var g=!0,v=!1,y=void 0;try{for(var f=h[Symbol.iterator](),_;!(g=(_=f.next()).done);g=!0){var w=_.value,k=getComputedStyle(w).getPropertyValue("text-decoration"),A=k.includes("underline"),C=k.includes("line-through"),S=k.includes("overline");"underline"===t.value?A=t.toggled:"line-through"===t.value?C=t.toggled:"overline"===t.value&&(S=t.toggled);var E=[];A&&E.push("underline"),C&&E.push("line-through"),S&&E.push("overline"),0===E.length?w.style.removeProperty("text-decoration"):w.style.setProperty("text-decoration",E.join(" "))}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}_reduceText6(p,o)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}},{key:"_onTextTransformButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Text transform");var e=this._getSelectedTexts(),t=this["#text-transform-buttons"].value||"none",n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,h=!1,b=void 0;try{for(var x=c[Symbol.iterator](),m,g;!(p=(m=x.next()).done);p=!0)g=m.value,g.style.setProperty("text-transform",t)}catch(e){h=!0,b=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}_reduceText6(l,n)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_onTextOnPathButtonToggle",value:async function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Put text on path");var t=!0,n=!1,a;try{for(var r=this._getSelectedTexts()[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.querySelector("textPath"),l=getComputedStyle(o),u=_parseFloat9(l.fontSize),c=_parseFontFamily2(l.fontFamily)[0],p=_normalizeFontWeight3(l.fontWeight),h=l.fontStyle,b=e.fontsManager.getMatchedFont(c,p,h),m=b?await _getFontBaseline(b):1,g=_getUserBBox6(o);if(s){var v=e.artboards.querySelector(s.href.baseVal),f=g.x,x=g.y+g.height*m;v.remove(),o.innerHTML=s.innerHTML,o.setAttribute("x",f),o.setAttribute("y",x)}else{var y=_getComputedTransform10(o),_=new SVGPoint(g.x,g.y+g.height*m),w=new SVGPoint(g.x+g.width/2,g.y),k=new SVGPoint(g.x+g.width,g.y+g.height*m);_=_.matrixTransform(y),w=w.matrixTransform(y),k=k.matrixTransform(y);var A="M "+_.x+" "+_.y+" Q "+w.x+" "+w.y+" "+k.x+" "+k.y,d=e.generateUniqueID("text-path"),C=_svg5(_templateObject28,d,A);e.createDefsIfMissing(),e.defs.append(C),o.innerHTML="<textPath href=\"#"+d+"\">"+o.innerHTML+"</textPath>";var S=_decomposeTransform16(y),E=S.scaleY;o.style.fontSize=_round20(u*E,2),o.removeAttribute("transform"),o.removeAttribute("x"),o.removeAttribute("y")}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}e.selectedElements=[].concat(_toConsumableArray(e.selectedElements))}},{key:"_onLetterSpacingChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=this._getSelectedTexts(),a=t.selectedTextRange,r=Symbol(),i,o;t.undoManager.checkpoint("Letter spacing");var s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,a);var h=p.querySelectorAll("tspan"),b=_getTspansIntersectedByRange6(a,p),x=0<b.length&&!a.collapsed?b:h;p[r]=x}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}this._isChangingLetterSpacing=!0,this["#letter-spacing-box"].addEventListener("change",i=function(t){t.target===e["#letter-spacing-slider"]?e["#letter-spacing-input"].value=e["#letter-spacing-slider"].value:t.target===e["#letter-spacing-input"]&&(e["#letter-spacing-slider"].value=e["#letter-spacing-input"].value),e["#letter-spacing-slider"].mixed=!1,e["#letter-spacing-input"].mixed=!1;var a=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0){var d=l.value,u=d[r];if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var b=u[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m.style.setProperty("letter-spacing",e["#letter-spacing-input"].value)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}else d.style.setProperty("letter-spacing",e["#letter-spacing-input"].value)}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}}),this["#letter-spacing-box"].addEventListener("changeend",o=function(){e["#letter-spacing-box"].removeEventListener("change",i),e["#letter-spacing-box"].removeEventListener("changeend",o);var a=!0,r=!1,s;try{for(var l=n[Symbol.iterator](),d,u;!(a=(d=l.next()).done);a=!0)u=d.value,_reduceText6(u,t.selectedTextRange)}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}e._isChangingLetterSpacing=!1})}},{key:"_onWordSpacingChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=this._getSelectedTexts(),a=t.selectedTextRange,r=Symbol(),i,o;t.undoManager.checkpoint("Word spacing");var s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,a);var h=p.querySelectorAll("tspan"),b=_getTspansIntersectedByRange6(a,p),x=0<b.length&&!a.collapsed?b:h;p[r]=x}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}this._isChangingWordSpacing=!0,this["#word-spacing-box"].addEventListener("change",i=function(){event.target===e["#word-spacing-slider"]?e["#word-spacing-input"].value=e["#word-spacing-slider"].value:event.target===e["#word-spacing-input"]&&(e["#word-spacing-slider"].value=e["#word-spacing-input"].value),e["#word-spacing-slider"].mixed=!1,e["#word-spacing-input"].mixed=!1;var t=!0,a=!1,i;try{for(var o=n[Symbol.iterator](),s;!(t=(s=o.next()).done);t=!0){var l=s.value,d=l[r];if(0<d.length){var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,x.style.setProperty("word-spacing",e["#word-spacing-slider"].value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else l.style.setProperty("word-spacing",e["#word-spacing-slider"].value)}}catch(e){a=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw i}}}),this["#word-spacing-box"].addEventListener("changeend",o=function(){e["#word-spacing-box"].removeEventListener("change",i),e["#word-spacing-box"].removeEventListener("changeend",o);var a=!0,r=!1,s;try{for(var l=n[Symbol.iterator](),d,u;!(a=(d=l.next()).done);a=!0)u=d.value,_reduceText6(u,t.selectedTextRange)}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}e._isChangingWordSpacing=!1})}},{key:"_update",value:function(){var e=this,t=[],n=[],a=this._getSelectedTexts(),r=Symbol();{var i=this._ownerEditor.canvas.selectedTextRange,o=!0,s=!1,l;try{for(var d=a[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=_getRenderedTextNodes7(c);if(i&&i.intersectsNode(c)){"backward"===i.direction&&p.reverse();var h=!0,b=!1,x=void 0;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,i.intersectsNode(v)){var y=v.closest("tspan, text");t.includes(v.parentElement)||t.push(v.parentElement),n.includes(y)||n.push(y)}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,t.includes(C.parentElement)||t.push(C.parentElement)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}n.push(c)}}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var S=!0,E=!1,T;try{for(var P=new Set([].concat(t,n))[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,D[r]=getComputedStyle(D)}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}if(!1===this._isChangingFontSize&&!1===this._isImportingFontFamily){var M=t[0],N=t.slice(1),I=function(t){var n=e._ownerEditor.canvas.fontsManager.getWeights(t);return 0===n.length&&(n=["400","700"]),1===n.length&&"400"===n[0]&&n.push("700"),n};if(M){var R=M[r],V=_parseFontFamily2(R.getPropertyValue("font-family"))[0],z=_parseLength(R.getPropertyValue("font-size"))[0],G=R.getPropertyValue("font-variant"),B=R.getPropertyValue("font-style"),O=_normalizeFontWeight3(R.getPropertyValue("font-weight")),q=I(V),j=_matchFontWeight(O,q),U=_getTransformToElement7(M.closest("text"),this._ownerEditor.canvas.currentArtboard),H=_decomposeTransform16(U),$=H.scaleY,F=_round20(z*$,2),Y=!1,X=!1,W=!1,K=!1,Z=!1,Q=!0,J=!1,ee;try{for(var te=N[Symbol.iterator](),ne;!(Q=(ne=te.next()).done);Q=!0){var ae=ne.value,re=ae[r],ie=re.getPropertyValue("font-family"),oe=_parseFontFamily2(ie)[0],se=_parseLength(re.getPropertyValue("font-size"))[0],le=re.getPropertyValue("font-variant"),de=re.getPropertyValue("font-style"),ue=_normalizeFontWeight3(re.getPropertyValue("font-weight")),ce=I(oe),pe=_matchFontWeight(ue,ce);oe!==V&&(Y=!0),se!==z&&(X=!0),pe!==j&&(W=!0),le!==G&&(K=!0),de!==B&&(Z=!0)}}catch(e){J=!0,ee=e}finally{try{!Q&&te.return&&te.return()}finally{if(J)throw ee}}this["#panel-heading"].disabled=!1,this["#font-section-heading"].disabled=!1,this["#font-family-heading"].disabled=!1,this["#font-family-button"].disabled=!1,this["#font-family-label"].textContent=V,this["#font-family-label"].style.fontFamily="\""+V+"\"",this["#font-family-picker"].enabled=!0,this["#font-family-picker"].value=V,this["#font-family-hint"].removeAttribute("disabled"),this["#font-face-heading"].disabled=!1;var he=!0,be=!1,xe;try{for(var me=this["#font-weight-menu"].children[Symbol.iterator](),ge,ve;!(he=(ge=me.next()).done);he=!0)ve=ge.value,ve.hidden=!1===q.includes(ve.value)}catch(e){be=!0,xe=e}finally{try{!he&&me.return&&me.return()}finally{if(be)throw xe}}this["#font-weight-select"].disabled=!1,this["#font-weight-select"].value=j,this["#font-weight-select"].mixed=W,this["#font-style-button"].toggled="italic"===B,this["#font-style-button"].mixed=Z,this["#font-style-button"].disabled=!1,this["#font-size-heading"].disabled=!1,this["#font-size-slider"].disabled=!1,this["#font-size-slider"].value=F,this["#font-size-slider"].mixed=X,this["#font-size-input"].disabled=!1,this["#font-size-input"].value=F,this["#font-size-input"].mixed=X}else this["#panel-heading"].disabled=!0,this["#font-section-heading"].disabled=!0,this["#font-family-heading"].disabled=!0,this["#font-family-button"].disabled=!0,this["#font-family-button"].mixed=!1,this["#font-family-label"].textContent="System",this["#font-family-label"].style.fontFamily=null,this["#font-family-picker"].enabled=!1,this["#font-family-picker"].value=null,this["#font-family-hint"].setAttribute("disabled",""),this["#font-face-heading"].disabled=!0,this["#font-weight-select"].disabled=!0,this["#font-style-button"].disabled=!0,this["#font-style-button"].mixed=!1,this["#font-size-heading"].disabled=!0,this["#font-size-slider"].value=13,this["#font-size-slider"].mixed=!1,this["#font-size-slider"].disabled=!0,this["#font-size-input"].disabled=!0,this["#font-size-input"].value=13,this["#font-size-input"].mixed=!1}this["#text-section-heading"].disabled=0===a.length;{var ye=n[0],fe=n.slice(1);if(ye){var _e=ye[r].getPropertyValue("text-decoration"),we=!1,ke=!1,Ae=!1,Ce=!0,Se=!1,Ee;try{for(var Te=fe[Symbol.iterator](),Pe;!(Ce=(Pe=Te.next()).done);Ce=!0){var Le=Pe.value,De=Le[r].getPropertyValue("text-decoration");_e!==De&&(_e.includes("underline")!==De.includes("underline")&&(we=!0),_e.includes("line-through")!==De.includes("line-through")&&(ke=!0),_e.includes("overline")!==De.includes("overline")&&(Ae=!0))}}catch(e){Se=!0,Ee=e}finally{try{!Ce&&Te.return&&Te.return()}finally{if(Se)throw Ee}}this["#text-decoration-heading"].disabled=!1,this["#underline-button"].disabled=!1,this["#underline-button"].mixed=we,this["#underline-button"].toggled=_e.includes("underline"),this["#line-through-button"].disabled=!1,this["#line-through-button"].mixed=ke,this["#line-through-button"].toggled=_e.includes("line-through"),this["#overline-button"].disabled=!1,this["#overline-button"].mixed=Ae,this["#overline-button"].toggled=_e.includes("overline")}else this["#text-decoration-heading"].disabled=!0,this["#underline-button"].disabled=!0,this["#underline-button"].mixed=!1,this["#underline-button"].toggled=!1,this["#line-through-button"].disabled=!0,this["#line-through-button"].mixed=!1,this["#line-through-button"].toggled=!1,this["#overline-button"].disabled=!0,this["#overline-button"].mixed=!1,this["#overline-button"].toggled=!1}{var Me=t[0],Ne=t.slice(1);if(Me){var Ie=Me[r].getPropertyValue("text-transform"),Re=!1,Ve=!0,ze=!1,Ge;try{for(var Be=Ne[Symbol.iterator](),Oe;!(Ve=(Oe=Be.next()).done);Ve=!0){var qe=Oe.value,je=qe[r].getPropertyValue("text-transform");je!==Ie&&(Re=!0)}}catch(e){ze=!0,Ge=e}finally{try{!Ve&&Be.return&&Be.return()}finally{if(ze)throw Ge}}this["#text-transform-heading"].disabled=!1,this["#capitalize-button"].disabled=!1,this["#capitalize-button"].mixed=Re,this["#capitalize-button"].toggled="capitalize"===Ie,this["#uppercase-button"].disabled=!1,this["#uppercase-button"].toggled="uppercase"===Ie,this["#uppercase-button"].mixed=Re,this["#lowercase-button"].disabled=!1,this["#lowercase-button"].toggled="lowercase"===Ie,this["#lowercase-button"].mixed=Re}else this["#text-transform-heading"].disabled=!0,this["#capitalize-button"].disabled=!0,this["#capitalize-button"].toggled=!1,this["#capitalize-button"].mixed=!1,this["#uppercase-button"].disabled=!0,this["#uppercase-button"].toggled=!1,this["#uppercase-button"].mixed=!1,this["#lowercase-button"].disabled=!0,this["#lowercase-button"].toggled=!1,this["#lowercase-button"].mixed=!1}if(0===a.length)this["#text-on-path-button"].toggled=!1,this["#text-on-path-button"].disabled=!0;else{var Ue=!1,He=null!==a[0].querySelector("textPath"),$e=!0,Fe=!1,Ye;try{for(var Xe=a[Symbol.iterator](),We;!($e=(We=Xe.next()).done);$e=!0){var Ke=We.value,Ze=null!==Ke.querySelector("textPath");if(Ze!=He){Ue=!0;break}}}catch(e){Fe=!0,Ye=e}finally{try{!$e&&Xe.return&&Xe.return()}finally{if(Fe)throw Ye}}this["#text-on-path-button"].toggled=He,this["#text-on-path-button"].disabled=!1,this["#text-on-path-button"].mixed=Ue}if(!1===this._isChangingLetterSpacing&&!1===this._isChangingWordSpacing){var Qe=t[0],Je=t.slice(1);if(Qe){var et=Qe[r].getPropertyValue("letter-spacing"),tt=Qe[r].getPropertyValue("word-spacing");et="normal"===et?0:_parseFloat9(et),tt="normal"===tt?0:_parseFloat9(tt);var nt=!1,at=!1,rt=!0,it=!1,ot;try{for(var st=Je[Symbol.iterator](),lt;!(rt=(lt=st.next()).done);rt=!0){var dt=lt.value,ut=dt[r].getPropertyValue("letter-spacing"),ct=dt[r].getPropertyValue("word-spacing");ut="normal"===ut?0:_parseFloat9(ut),ct="normal"===ct?0:_parseFloat9(ct),ut!==et&&(nt=!0),ct!==tt&&(at=!0)}}catch(e){it=!0,ot=e}finally{try{!rt&&st.return&&st.return()}finally{if(it)throw ot}}this["#spacing-section-heading"].disabled=!1,this["#letter-spacing-heading"].disabled=!1,this["#letter-spacing-slider"].value=_round20(et,2),this["#letter-spacing-slider"].mixed=nt,this["#letter-spacing-slider"].disabled=!1,this["#letter-spacing-input"].value=_round20(et,2),this["#letter-spacing-input"].mixed=nt,this["#letter-spacing-input"].disabled=!1,this["#word-spacing-heading"].disabled=!1,this["#word-spacing-slider"].value=_round20(tt,2),this["#word-spacing-slider"].mixed=at,this["#word-spacing-slider"].disabled=!1,this["#word-spacing-input"].value=_round20(tt,2),this["#word-spacing-input"].mixed=at,this["#word-spacing-input"].disabled=!1}else this["#spacing-section-heading"].disabled=!0,this["#letter-spacing-heading"].disabled=!0,this["#letter-spacing-slider"].value=0,this["#letter-spacing-slider"].mixed=!1,this["#letter-spacing-slider"].disabled=!0,this["#letter-spacing-input"].value=0,this["#letter-spacing-input"].mixed=!1,this["#letter-spacing-input"].disabled=!0,this["#word-spacing-heading"].disabled=!0,this["#word-spacing-slider"].value=0,this["#word-spacing-slider"].mixed=!1,this["#word-spacing-slider"].disabled=!0,this["#word-spacing-input"].value=0,this["#word-spacing-input"].mixed=!1,this["#word-spacing-input"].disabled=!0}}},{key:"_getSelectedTexts",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,"text"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-typographypanel",BXTypographyPanelElement)}}{{var _BoxySVG$utils$elemen20=BoxySVG.utils.element,_html15=_BoxySVG$utils$elemen20.html,_closest20=_BoxySVG$utils$elemen20.closest,_round21=BoxySVG.utils.math.round,_BoxySVG$utils$parsin4=BoxySVG.utils.parsing,_parseLength2=_BoxySVG$utils$parsin4.parseLength,_parseViewBox6=_BoxySVG$utils$parsin4.parseViewBox,_parseAspectRatio4=_BoxySVG$utils$parsin4.parseAspectRatio,_throttle8=BoxySVG.utils.time.throttle,_isNumeric=BoxySVG.utils.type.isNumeric,unitsMenuHTML="\n    <x-menuitem value=\"px\" selected=\"true\">\n      <x-label>px</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"cm\">\n      <x-label>cm</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"mm\">\n      <x-label>mm</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"in\">\n      <x-label>in</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"pt\">\n      <x-label>pt</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"pc\">\n      <x-label>pc</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"q\">\n      <x-label>q</x-label>\n    </x-menuitem>\n\n    <hr/>\n\n    <x-menuitem value=\"vw\">\n      <x-label>vw</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vh\">\n      <x-label>vh</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vmin\">\n      <x-label>vmin</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vmax\">\n      <x-label>vmax</x-label>\n    </x-menuitem>\n\n    <hr/>\n\n    <x-menuitem value=\"em\">\n      <x-label>em</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"ex\">\n      <x-label>ex</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"ch\">\n      <x-label>ch</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"rem\">\n      <x-label>rem</x-label>\n    </x-menuitem>\n  ",_shadowTemplate12=_html15(_templateObject29,window.theme,window.theme,unitsMenuHTML,unitsMenuHTML),BXViewPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._oldViewportWidth="500px",e._oldViewportHeight="500px",e._oldViewBox=null,e._oldAspectRatio=null,e._isChangingViewportWidth=!1,e._isChangingViewportHeight=!1,e._isChangingViewBox=!1,e._update100Th=_throttle8(e._update,100,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate12.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#viewport-switch"].addEventListener("change",function(){return e._onViewportSwitchChange()}),e["#viewport-width-input"].addEventListener("changestart",function(){return e._onViewportWidthInputChangeStart()}),e["#viewport-width-unit-select"].addEventListener("change",function(){return e._onViewportWidthUnitSelectChange()}),e["#viewport-height-input"].addEventListener("changestart",function(){return e._onViewportHeightInputChangeStart()}),e["#viewport-height-unit-select"].addEventListener("change",function(){return e._onViewportHeightUnitSelectChange()}),e["#view-box-box"].addEventListener("changestart",function(t){return e._onViewBoxChangeStart(t)}),e["#view-box-switch"].addEventListener("change",function(){return e._onViewBoxSwitchChange()}),e["#preserve-aspect-ratio-switch"].addEventListener("change",function(){return e._onPreserveAspectRatioSwitchChange()}),e["#align-buttons"].addEventListener("change",function(){return e._onAlignButtonsChange()}),e["#meet-or-slice-buttons"].addEventListener("toggle",function(){return e._onMeetOrSliceButtonsToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest20(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){if(!this._isChangingViewBox){var t=e.find(function(e){return"artboards"===e.target.id||"artboards"===e.target.parentNode.id});t&&this._update100Th()}}},{key:"_onViewportSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Viewport width"),!0===this["#viewport-switch"].toggled?(e.currentArtboard.setAttribute("width",this._oldViewportWidth),e.currentArtboard.setAttribute("height",this._oldViewportHeight)):(this._oldViewportWidth=e.currentArtboard.getAttribute("width"),this._oldViewportHeight=e.currentArtboard.getAttribute("height"),e.currentArtboard.removeAttribute("width"),e.currentArtboard.removeAttribute("height"))}},{key:"_onViewportHeightSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Viewport height"),!0===this["#viewport-height-switch"].toggled?e.currentArtboard.setAttribute("height",this._oldViewportHeight):(this._oldViewportHeight=e.currentArtboard.getAttribute("height"),e.currentArtboard.removeAttribute("height"))}},{key:"_onViewportWidthInputChangeStart",value:function(){var e=this,t=this["#viewport-width-input"],n=this["#viewport-width-unit-select"],a=this._ownerEditor.canvas,r,i;a.undoManager.checkpoint("Viewport width"),this._isChangingViewportWidth=!0,t.addEventListener("change",r=function(){a.currentArtboard.setAttribute("width",t.value+n.value)}),t.addEventListener("changeend",i=function(){t.removeEventListener("change",r),t.removeEventListener("changeend",i),e._isChangingViewportWidth=!1})}},{key:"_onViewportHeightInputChangeStart",value:function(){var e=this,t=this["#viewport-height-input"],n=this["#viewport-height-unit-select"],a=this._ownerEditor.canvas,r,i;a.undoManager.checkpoint("Viewport height"),this._isChangingViewportHeight=!0,t.addEventListener("change",r=function(){a.currentArtboard.setAttribute("height",t.value+n.value)}),t.addEventListener("changeend",i=function(){t.removeEventListener("change",r),t.removeEventListener("changeend",i),e._isChangingViewportHeight=!1})}},{key:"_onViewportWidthUnitSelectChange",value:function(){var e=this["#viewport-width-input"],t=this["#viewport-width-unit-select"],n=this._ownerEditor.canvas;n.undoManager.checkpoint("Viewport width unit"),n.currentArtboard.setAttribute("width",e.value+t.value)}},{key:"_onViewportHeightUnitSelectChange",value:function(){var e=this["#viewport-height-input"],t=this["#viewport-height-unit-select"],n=this._ownerEditor.canvas;n.undoManager.checkpoint("Viewport height unit"),n.currentArtboard.setAttribute("height",e.value+t.value)}},{key:"_onViewBoxSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("View box"),this["#view-box-switch"].toggled?this._oldViewBox?e.currentArtboard.setAttribute("viewBox",this._oldViewBox):e.currentArtboard.setAttribute("viewBox","0 0 500 500"):(this._oldViewBox=e.currentArtboard.getAttribute("viewBox"),e.currentArtboard.removeAttribute("viewBox"))}},{key:"_onViewBoxChangeStart",value:function(e){var t=this,n=e.target,a=this._ownerEditor.canvas.currentArtboard,r=_parseViewBox6(a.getAttribute("viewBox")||"0 0 0 0")||new SVGRect,i,o;this._ownerEditor.canvas.undoManager.checkpoint("View Box"),this._isChangingViewBox=!0,n.addEventListener("change",i=function(){r[n.dataset.property]=n.value,a.setAttribute("viewBox",r.x+" "+r.y+" "+r.width+" "+r.height)}),n.addEventListener("changeend",o=function(){n.removeEventListener("change",i),n.removeEventListener("changeend",o),t._isChangingViewBox=!1})}},{key:"_onPreserveAspectRatioSwitchChange",value:function(){var e=this._ownerEditor.canvas.currentArtboard;this._ownerEditor.canvas.undoManager.checkpoint("Preserve aspect ratio"),this["#preserve-aspect-ratio-switch"].toggled?this._oldAspectRatio?e.setAttribute("preserveAspectRatio",this._oldAspectRatio):e.removeAttribute("preserveAspectRatio"):(this._oldAspectRatio=e.getAttribute("preserveAspectRatio"),e.setAttribute("preserveAspectRatio","none"))}},{key:"_onAlignButtonsChange",value:function(){var e=this._ownerEditor.canvas.currentArtboard,t=this["#align-buttons"].value||"none",n=this["#meet-or-slice-buttons"].value;if(this._ownerEditor.canvas.undoManager.checkpoint("Aspect ratio"),"xMidYMid"===t&&"meet"===n)e.removeAttribute("preserveAspectRatio");else{var a=t;"none"!==a&&"slice"===n&&(a+=" slice"),e.setAttribute("preserveAspectRatio",a)}}},{key:"_onMeetOrSliceButtonsToggle",value:function(){var e=this._ownerEditor.canvas.currentArtboard,t=this["#align-buttons"].value||"none",n=this["#meet-or-slice-buttons"].value;if(this._ownerEditor.canvas.undoManager.checkpoint("Aspect ratio"),"xMidYMid"===t&&"meet"===n)e.removeAttribute("preserveAspectRatio");else{var a=t;"none"!==a&&"slice"===n&&(a+=" slice"),e.setAttribute("preserveAspectRatio",a)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=e.currentArtboard,n=e.masterArtboard;if(t.hasAttribute("viewBox")){var a=_parseViewBox6(t.getAttribute("viewBox")),r=a.x,i=a.y,o=a.width,s=a.height;this["#view-box-section-heading"].disabled=!1,this["#view-box-switch"].toggled=!0,this["#view-box-x-input"].value=_round21(r,2),this["#view-box-x-input"].disabled=!1,this["#view-box-x-label"].disabled=!1,this["#view-box-y-input"].value=_round21(i,2),this["#view-box-y-input"].disabled=!1,this["#view-box-y-label"].disabled=!1,this["#view-box-width-input"].value=_round21(o,2),this["#view-box-width-input"].disabled=!1,this["#view-box-width-label"].disabled=!1,this["#view-box-height-input"].value=_round21(s,2),this["#view-box-height-input"].disabled=!1,this["#view-box-height-label"].disabled=!1}else this["#view-box-section-heading"].disabled=!0,this["#view-box-switch"].toggled=!1,this["#view-box-x-input"].value=0,this["#view-box-x-input"].disabled=!0,this["#view-box-x-label"].disabled=!0,this["#view-box-y-input"].value=0,this["#view-box-y-input"].disabled=!0,this["#view-box-y-label"].disabled=!0,this["#view-box-width-input"].value=0,this["#view-box-width-input"].disabled=!0,this["#view-box-width-label"].disabled=!0,this["#view-box-height-input"].value=0,this["#view-box-height-input"].disabled=!0,this["#view-box-height-label"].disabled=!0;if(t!==n)this["#viewport-section"].hidden=!0;else if(this["#viewport-section"].hidden=!1,!1===t.hasAttribute("width")&&!1===t.hasAttribute("height"))this["#viewport-switch"].toggled=!1,this["#viewport-width-heading"].disabled=!0,this["#viewport-width-input"].disabled=!0,this["#viewport-width-input"].value=0,this["#viewport-width-unit-select"].disabled=!0,this["#viewport-width-unit-select"].value="px",this["#viewport-height-heading"].disabled=!0,this["#viewport-height-input"].disabled=!0,this["#viewport-height-input"].value=0,this["#viewport-height-unit-select"].disabled=!0,this["#viewport-height-unit-select"].value="px";else{var l=this._getArtboardViewport(t),d=_slicedToArray(l,4),u=d[0],c=d[1],p=d[2],h=d[3];this["#viewport-switch"].toggled=!0,this["#viewport-width-heading"].disabled=!1,this["#viewport-width-input"].disabled=!1,this["#viewport-width-input"].value=u,this["#viewport-width-unit-select"].disabled=!1,this["#viewport-width-unit-select"].value=c,this["#viewport-height-heading"].disabled=!1,this["#viewport-height-input"].disabled=!1,this["#viewport-height-input"].value=p,this["#viewport-height-unit-select"].disabled=!1,this["#viewport-height-unit-select"].value=h}if(!1===t.hasAttribute("viewBox"))this["#preserve-aspect-ratio-section-heading"].disabled=!0,this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!0,this["#align-heading"].disabled=!0,this["#align-buttons"].value=null,this["#align-buttons"].disabled=!0,this["#meet-or-slice-buttons"].value=null,this["#meet-button"].disabled=!0,this["#slice-button"].disabled=!0;else{var b="xMidYMid",x="meet";if(t.hasAttribute("preserveAspectRatio")){var m=_parseAspectRatio4(t.getAttribute("preserveAspectRatio"));m&&(b=m[0],x=m[1])}"none"===b?(this["#preserve-aspect-ratio-section-heading"].disabled=!1,this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!1,this["#align-heading"].disabled=!0,this["#align-buttons"].value=null,this["#align-buttons"].disabled=!0,this["#meet-or-slice-buttons"].value=null,this["#meet-button"].disabled=!0,this["#slice-button"].disabled=!0):(this["#preserve-aspect-ratio-section-heading"].disabled=!1,this["#preserve-aspect-ratio-switch"].toggled=!0,this["#preserve-aspect-ratio-switch"].disabled=!1,this["#align-heading"].disabled=!1,this["#align-buttons"].value=b,this["#align-buttons"].disabled=!1,this["#meet-or-slice-buttons"].value=x,this["#meet-button"].disabled=!1,this["#slice-button"].disabled=!1)}}},{key:"_getArtboardViewport",value:function(e){var t=0,n="px",a=0,r="px";if(e.hasAttribute("width")){var i=e.getAttribute("width");if(_isNumeric(i))t=parseFloat(i);else{var o=_parseLength2(i);if(null!==o){var s=_slicedToArray(o,2),l=s[0],d=s[1];t=l,n=d}}}if(e.hasAttribute("height")){var u=e.getAttribute("height");if(_isNumeric(u))a=parseFloat(u);else{var c=_parseLength2(u);if(null!==c){var p=_slicedToArray(c,2),h=p[0],b=p[1];a=h,r=b}}}return[t,n,a,r]}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-viewpanel",BXViewPanelElement)}}{{var _Shortcut7=BoxySVG.classes.Shortcut,_isPointerMoveIntentional4=BoxySVG.utils.event.isPointerMoveIntentional,_reduceProperty6=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$time7=BoxySVG.utils.time,_debounce8=_BoxySVG$utils$time7.debounce,_sleep7=_BoxySVG$utils$time7.sleep,_throttle9=_BoxySVG$utils$time7.throttle,_getTransformToElement8=BoxySVG.utils.transformGeneral.getTransformToElement,_reduceTransform6=BoxySVG.utils.transformReduction.reduceTransform,_objectElementNames=BoxySVG.utils.variables.objectElementNames,_BoxySVG$utils$elemen21=BoxySVG.utils.element,_html16=_BoxySVG$utils$elemen21.html,_svg6=_BoxySVG$utils$elemen21.svg,_closest21=_BoxySVG$utils$elemen21.closest,_createElement22=_BoxySVG$utils$elemen21.createElement,_sortByDomPosition6=_BoxySVG$utils$elemen21.sortByDomPosition,_getObjectElementDisplayName2=_BoxySVG$utils$elemen21.getObjectElementDisplayName,_getObjectElementIconName2=_BoxySVG$utils$elemen21.getObjectElementIconName,_isValidID3=_BoxySVG$utils$elemen21.isValidID,_$object=Symbol(),_shadowTemplate13=_html16(_templateObject30,window.theme,window.theme),BXObjectsPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._fetchedIcons=!1,e._update200Th=_throttle9(e._update,200,e),e._updateForFilterChangeDb250=_debounce8(e._updateForFilterChange,250,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate13.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#main"].addEventListener("pointerdown",function(t){return e._onListPointerDown(t)}),e["#main"].addEventListener("click",function(t){return e._onListClick(t)}),e["#main"].addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest21(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest21(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=this._ownerApp.getConfig("bx-objectspanel:developerMode")||!1,this._fetchIcons(),this._update200Th(),t.addEventListener("artworkchange",this._artworkChangeListener=function(){e._update()}),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._onCurrentArtboardChange()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artworkchange",this._artworkChangeListener),e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateForSelectedChange()}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,this._updateForMutation(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onCurrentArtboardChange",value:function(){this._update200Th()}},{key:"_onListPointerDown",value:function(e){var t=e.target.closest(".item");t&&(e.target.closest(".arrow-button")||e.target.closest(".lock-button")||e.target.closest(".visibility-button")||this._onItemPointerDown(e))}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas,a=this._ownerApp.modKeys,r=a.ctrl,i=a.shift,o=e.target.closest(".item");if(!0===r){var s=o[_$object],l=s.parentElement.closest("g, a");n.selectedElements.includes(s)?n.selectedElements=n.selectedElements.filter(function(e){return e!==s}):(n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),1===n.selectedElements.length&&(n.currentContainer=l===n.currentArtboard?null:l))}else if(!0===i){var d=n.selectedElements.map(function(e){return t._getItemForObject(e)});d=d.filter(function(e){return null!==e&&!1===e.hidden});var u=d.map(function(e){return e[_$object]}),c=u[u.length-1]||null;if(c){var p=this._getItems(!0),h=p.find(function(e){return e[_$object]===c}),b=p.indexOf(h),x=p.indexOf(o),m=[];if(x>b?m=[].concat(_toConsumableArray(p)).slice(b,x+1):x<b&&(m=[].concat(_toConsumableArray(p)).slice(x,b+1).reverse()),m=m.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<m.length){var g=m.map(function(e){return e[_$object]});n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),_toConsumableArray(g))}}}else{var v=o[_$object],y=v.parentElement.closest("g, a"),f=!1,_,w,k;this["#main"].setPointerCapture(e.pointerId),!1===o.hasAttribute("data-selected")&&(n.selectedElements=[v],n.currentContainer=y===n.currentArtboard?null:y),this["#main"].addEventListener("pointermove",_=function(n){_isPointerMoveIntentional4(e,n,3)&&(t["#main"].removeEventListener("pointermove",_),t["#main"].removeEventListener("pointerup",w),t["#main"].removeEventListener("lostpointercapture",k),t._onItemDragStart(n),f=!0)}),this["#main"].addEventListener("pointerup",w=function(){!1==f&&(n.selectedElements=[v],n.currentContainer=y===n.currentArtboard?null:y)}),this["#main"].addEventListener("lostpointercapture",k=function(){t["#main"].removeEventListener("pointermove",_),t["#main"].removeEventListener("pointerup",w),t["#main"].removeEventListener("lostpointercapture",k)})}}},{key:"_onItemDragStart",value:function(){var e=this,t=this._getItems(!0),n=null,a="start",r=t.filter(function(e){return e.hasAttribute("data-selected")}),i=this._ownerEditor.canvas,o,s;this["#main"].addEventListener("pointermove",o=function(t){var i=e._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(n=i?i.closest(".item"):null,n){var o=n.querySelector(".main").getBoundingClientRect();if(a=t.clientY<o.y+o.height/2?"start":"end",n.hasAttribute("data-expanded")&&"end"==a&&(n.querySelector(".item:not([hidden])")?(n=n.querySelector(".item:not([hidden])"),a="start",o=n.querySelector(".main").getBoundingClientRect()):a="inside"),e._canMoveItems(r,n,a)){for(var s=n.offsetTop,l=n.offsetParent;null!==l&&l!==e["#main"];l=l.offsetParent)s+=l.offsetTop;("end"==a||"inside"==a)&&(s+=o.height);var d=24*parseInt(n.getAttribute("data-depth"))+16;"inside"==a&&(d+=24),e["#drop-marker"].hidden=!1,e["#drop-marker"].style.top=s+"px",e["#drop-marker"].style.marginLeft=d+"px"}else n=null,e["#drop-marker"].hidden=!0}else e["#drop-marker"].hidden=!0}),this["#main"].addEventListener("lostpointercapture",s=function(){if(e["#main"].removeEventListener("pointermove",o),e["#main"].removeEventListener("lostpointercapture",s),e["#drop-marker"].hidden=!0,n){i.undoManager.checkpoint("Move elements");var t=n[_$object],r=_sortByDomPosition6(i.outermostSelectedElements),l=document.createDocumentFragment(),d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,b.setAttribute("transform",_getTransformToElement8(b,t.parentElement)),l.append(b)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}"start"==a?t.before(l):"end"==a?t.after(l):"inside"==a&&t.append(l);var x=!0,m=!1,g;try{for(var v=r[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)f=y.value,_reduceTransform6(f,{geometryPrecision:i.geometryPrecision,transformPrecision:i.transformPrecision})}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}var _=i.selectedElements[0].closest("g, a");i.currentContainer=_===i.currentArtboard?null:_}})}},{key:"_onListClick",value:function(e){var t=e.target.closest(".item");t&&(e.target.closest(".arrow-button")?this._onArrowButtonClick(e):e.target.closest(".lock-button")?this._onLockButtonClick(e):e.target.closest(".visibility-button")?this._onVisibilityButtonClick(e):this._onItemClick(e))}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item");this._editStart(r)}}},{key:"_onArrowButtonClick",value:function(e){var t=e.target.closest(".item");t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t)}},{key:"_onLockButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Lock");var t=e.target.closest(".item"),n=t[_$object],a=getComputedStyle(n).pointerEvents;a="none"===a?"auto":"none",n.style.pointerEvents=a,_reduceProperty6("pointer-events",n);{var r=function e(t){var n=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,_objectElementNames.includes(l.localName)&&(l.removeAttribute("pointer-events"),l.style.removeProperty("pointer-events"),getComputedStyle(l).pointerEvents!==a&&(l.style.pointerEvents=a),("g"===l.localName||"a"===l.localName)&&e(l.children))}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}};r(n.children)}}},{key:"_onVisibilityButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Visibility");var t=e.target.closest(".item"),n=t[_$object],a=getComputedStyle(n).visibility;a="hidden"===a?"visible":"hidden",n.style.visibility=a,_reduceProperty6("visibility",n);{var r=function e(t){var n=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,_objectElementNames.includes(l.localName)&&(l.removeAttribute("visibility"),l.style.removeProperty("visibility"),getComputedStyle(l).visibility!==a&&(l.style.visibility=a),("g"===l.localName||"a"===l.localName)&&e(l.children))}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}};r(n.children)}}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChangeDb250()}},{key:"_onDeveloperModeButtonToggle",value:function(){this._ownerApp.setConfig("bx-objectspanel:developerMode",this["#developer-mode-button"].toggled),0<this["#filter-input"].value.trim().length&&(this["#filter-input"].value="",this._updateForFilterChange()),this._updateForDeveloperModeChange(),this["#main"].focus()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut7.fromEvent(e);if(t.matches("Enter")){var n=this._getItems(!0),a=n.find(function(e){return e.hasAttribute("data-selected")}),r=n.find(function(e){return e.hasAttribute("data-edited")});r?this["#main"].focus():a&&this._editStart(a)}else if(t.matches("Backspace")){var i=this._getItems(!0),o=i.find(function(e){return e.hasAttribute("data-edited")});o||(e.stopPropagation(),e.preventDefault(),this._ownerApp.execCommand("delete"))}else if(t.matches("ArrowUp")){var s=this._getItems(!0),l=s.find(function(e){return e.hasAttribute("data-edited")});l||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var d=this._getItems(!0),u=d.find(function(e){return e.hasAttribute("data-edited")});u||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var c=this._getItems(!0),p=c.find(function(e){return e.hasAttribute("data-edited")});p||(e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var h=this._getItems(!0),b=h.find(function(e){return e.hasAttribute("data-edited")});b||(e.stopPropagation(),this._selectNextItem(!0))}else if(t.matches("ArrowRight")){var x=this._getItems(!0),m=x.filter(function(e){return e.hasAttribute("data-selected")}),g=x.find(function(e){return e.hasAttribute("data-edited")});g||1!==m.length||!0!==m[0].hasAttribute("data-expandable")||!1!==m[0].hasAttribute("data-expanded")||(e.preventDefault(),e.stopPropagation(),this._expandItem(m[0]))}else if(t.matches("ArrowLeft")){var v=this._getItems(!0),y=v.filter(function(e){return e.hasAttribute("data-selected")}),f=v.find(function(e){return e.hasAttribute("data-edited")});f||1!==y.length||!0!==y[0].hasAttribute("data-expandable")||!0!==y[0].hasAttribute("data-expanded")||(e.preventDefault(),e.stopPropagation(),this._collapseItem(y[0]))}}},{key:"_editStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-edited]");if(n){if(n===e)return;this._editEnd()}}var a=e.querySelector(".label"),r=e[_$object],i=r.querySelector(":scope > bx-title"),o=this["#developer-mode-button"].toggled?"Object ID":"Object title",s="";!0===this["#developer-mode-button"].toggled&&r.id?s="#"+r.id:!1===this["#developer-mode-button"].toggled&&i&&(s=i.textContent);var l=_html16(_templateObject31,s,o);a.after(l),l.selectAll(),a.hidden=!0,e.setAttribute("data-edited",""),l.addEventListener("input",function(){l.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),l.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editEnd()}),l.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var a=l.value.trim();if(a.startsWith("#")&&(a=a.substring(1)),0<a.length&&(e=_isValidID3(a),e)){var r=null===t._ownerEditor.canvas.artboards.querySelector("#"+a);!1==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editEnd",value:function(){var e=this["#items"].querySelector(".item[data-edited]");if(e){var t=e.querySelector(".label"),n=e.querySelector("x-input"),a=e[_$object];if(n.remove(),t.hidden=!1,e.removeAttribute("data-edited"),!1===n.invalid)if(this["#developer-mode-button"].toggled){var r=n.value.trim().toLowerCase();"#"===r?r="":r.startsWith("#")&&(r=r.substring(1)),a.getAttribute("id")!==r&&(this._ownerEditor.canvas.undoManager.checkpoint("Object ID"),""===r?a.removeAttribute("id"):a.setAttribute("id",r))}else{var i=a.querySelector(":scope > bx-title"),o=n.value.trim();if(!i)""!==o&&(this._ownerEditor.canvas.undoManager.checkpoint("Object title"),i=_createElement22("svg:bx-title"),i.textContent=o,a.prepend(i));else{var s=i.textContent;s!==o&&(this._ownerEditor.canvas.undoManager.checkpoint("Object title"),""===o?i.remove():i.textContent=o)}}}}},{key:"_expandItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=parseInt(e.getAttribute("data-depth")),a=e.querySelector(".children"),r=e[_$object],i=this._ownerEditor.canvas.outermostSelectedElements,o=this["#filter-input"].value.trim().toLowerCase();if(0===a.childElementCount){var s=!0,l=!1,d;try{for(var u=r.children[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,_objectElementNames.includes(p.localName)){var h=this._createItem(p,n+1);i.includes(p)&&h.setAttribute("data-selected",""),!1===this._objectMatchesFilter(p,o)&&(h.hidden=!0),a.append(h)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}if(e.setAttribute("data-expanded",""),t){var b=getComputedStyle(a).marginTop;"0px"===b&&(b="-"+getComputedStyle(a).height),a.animate({marginTop:[b,"0px"]},{duration:250,easing:"ease"})}}},{key:"_collapseItem",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=e.querySelector(".children"),a=getComputedStyle(n).marginTop,r="-"+getComputedStyle(n).height;if(e.removeAttribute("data-expanded"),t){var i=n.animate({marginTop:[a,r]},{duration:250,easing:"ease"});await i.finished}!1===e.hasAttribute("data-expanded")&&(n.innerHTML="")}},{key:"_collapseAllItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=!0,n=!1,a;try{for(var r=this["#items"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this._collapseItem(o,e)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_createItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=_getObjectElementDisplayName2(e),a=_getObjectElementIconName2(e),r=_html16(_templateObject32,t,24*t,a);return r[_$object]=e,("g"===e.localName||"a"===e.localName)&&r.setAttribute("data-expandable",""),this._updateActionButtons(r),this._updateLabel(r),r}},{key:"_getItemForObject",value:function(e){var t=this._getItems(),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s[_$object]===e)return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return null}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._ownerEditor.canvas,n=this._getItems(!0),a=n.filter(function(e){return e.hasAttribute("data-selected")});if(0<a.length){var r=a[0],i=n.indexOf(r);if(n[i-1]){var o=n[i-1],s=o[_$object],l=s.parentElement.closest("g, a");e?t.selectedElements=[].concat(_toConsumableArray(t.selectedElements),[s]):(t.selectedElements=[s],t.currentContainer=l===t.currentArtboard?null:l)}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._ownerEditor.canvas,n=this._getItems(!0),a=n.filter(function(e){return e.hasAttribute("data-selected")});if(0<a.length){var r=a[a.length-1],i=n.indexOf(r);if(n[i+1]){var o=n[i+1],s=o[_$object],l=s.parentElement.closest("g, a");e?t.selectedElements=[].concat(_toConsumableArray(t.selectedElements),[s]):(t.selectedElements=[s],t.currentContainer=l===t.currentArtboard?null:l)}}}},{key:"_canMoveItems",value:function(e,t,n){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.contains(t))return!1}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}if(1===e.length){var d=this._getItems(!0),u=e[0],c=d.indexOf(t);if("start"===n){var p=d[c-1];if(p===u&&p.getAttribute("data-depth")===u.getAttribute("data-depth"))return!1}else if("end"===n){var h=d[c+1];if(h===u&&t.getAttribute("data-depth")===u.getAttribute("data-depth"))return!1}}return!0}},{key:"_getItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[];return function n(a){var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,e&&d.hasAttribute("hidden"))continue;else t.push(d),d.hasAttribute("data-expanded")&&n(d.querySelector(".children").children)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}(this["#items"].children),t}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=document.createDocumentFragment(),n=!0,a=!1,r;try{for(var i=e.currentArtboard.children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_objectElementNames.includes(s.localName)){var l=this._createItem(s,0);t.append(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#items"].innerHTML="",this["#items"].append(t),this._updateForSelectedChange()}},{key:"_updateLabel",value:function(e){if(!1===this["#developer-mode-button"].toggled){var t=e.querySelector(".label"),n=e[_$object],a=n.querySelector(":scope > bx-title");a?(t.textContent=a.textContent,t.setAttribute("data-custom","")):(t.textContent=_getObjectElementDisplayName2(n),t.removeAttribute("data-custom"))}else{var r=e[_$object],i=e.querySelector(".label");r.id?(i.textContent="#"+r.id,i.setAttribute("data-custom","")):(i.textContent=_getObjectElementDisplayName2(r,"developer"),i.removeAttribute("data-custom"))}}},{key:"_updateActionButtons",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e[_$object],a=getComputedStyle(n),r=a.visibility,i=a.pointerEvents;if("none"===i?e.setAttribute("data-locked",""):e.removeAttribute("data-locked"),"hidden"===r?e.setAttribute("data-hidden",""):e.removeAttribute("data-hidden"),t){var o=!0,s=!1,l;try{for(var d=e.querySelector(".children").children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,this._updateActionButtons(c,!0)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}},{key:"_updateForSelectedChange",value:function(){var e=this._ownerEditor.canvas.selectedElements,t=this._ownerEditor.canvas.currentArtboard,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){for(var s=o.value,l=[],d=s.parentElement;d!==t;d=d.parentElement)l.push(d);l.reverse();var u=!0,c=!1,p=void 0;try{for(var h=l[Symbol.iterator](),b;!(u=(b=h.next()).done);u=!0){var x=b.value,m=this._getItemForObject(x);m&&this._expandItem(m,!1)}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var g=!0,v=!1,y;try{for(var f=this._getItems()[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,e.includes(w[_$object])?(w.setAttribute("data-selected",""),w.scrollIntoViewIfNeeded()):w.removeAttribute("data-selected")}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}},{key:"_updateForFilterChange",value:function(){var e=this,t=this["#filter-input"].value.trim().toLowerCase();if(0===t.length){this._collapseAllItems(!1);var n=!0,a=!1,r;try{for(var i=this["#items"].querySelectorAll(".item[hidden]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.hidden=!1}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}else{var l=function n(a){var r=!0,i=!0,o=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,!e._objectMatchesFilter(u[_$object],t))u.hidden=!0;else if(u.hidden=!1,r=!1,u.hasAttribute("data-expandable")){e._expandItem(u,!1);var c=n(u.querySelector(".children").children);c&&e._collapseItem(u,!1)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return r};l(this["#items"].children)}}},{key:"_updateForDeveloperModeChange",value:function(){var e=!0,t=!1,n;try{for(var a=this._getItems()[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateLabel(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForMutation",value:function(e){var t=this;if("attributes"===e.type&&"style"===e.attributeName){var n=e.target,a=this._getItems(),r=a.find(function(e){return e[_$object]===n});r&&this._updateActionButtons(r,!0)}if(this["#developer-mode-button"].toggled){if("attributes"===e.type&&"id"===e.attributeName){var i=this._getItems(),o=e.target,s=!0,l=!1,d;try{for(var u=i[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,p[_$object]===o){this._updateLabel(p);break}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}else if("childList"===e.type)if("bx-title"===e.target.localName){var h=this._getItems(),b=e.target.parentElement,x=!0,m=!1,g;try{for(var v=h[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,f[_$object]===b){this._updateLabel(f);break}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}else for(var _=this._getItems(),w=[].concat(_toConsumableArray(e.removedNodes),_toConsumableArray(e.addedNodes)),k=0,A;k<w.length;k++)A=w[k],"bx-title"===A.localName&&function(){var n=e.target,a=_.find(function(e){return e[_$object]===n});a&&t._updateLabel(a)}();if("childList"===e.type){if(0<e.removedNodes.length){var C=this._getItems(),S=!0,E=!1,T;try{for(var P=C[Symbol.iterator](),L,D;!(S=(L=P.next()).done);S=!0)D=L.value,[].concat(_toConsumableArray(e.removedNodes)).includes(D[_$object])&&D.remove()}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}if(0<e.addedNodes.length){var M=this._getItems(),N=null,I=!0,R=!1,V;try{for(var z=M[Symbol.iterator](),G,B;!(I=(G=z.next()).done);I=!0)if(B=G.value,B[_$object]===e.target){N=B;break}}catch(e){R=!0,V=e}finally{try{!I&&z.return&&z.return()}finally{if(R)throw V}}if(N&&N.hasAttribute("data-expanded")||e.target===this._ownerEditor.canvas.currentArtboard){var O=null,q=null;if(e.previousSibling)for(var j=function(e){if(e.localName&&_objectElementNames.includes(e.localName)){var t=M.find(function(t){return t[_$object]===e});if(t)return O=t,"break"}},U=e.previousSibling,H;U&&(H=j(U),"break"!==H);U=U.previousElementSibling);if(null===O&&e.nextSibling)for(var $=function(e){if(e.localName&&_objectElementNames.includes(e.localName)){var t=M.find(function(t){return t[_$object]===e});if(t)return q=t,"break"}},U=e.nextSibling,F;U&&(F=$(U),"break"!==F);U=U.nextElementSibling);var Y=N?parseInt(N.getAttribute("data-depth"))+1:0,X=document.createDocumentFragment(),W=!0,K=!1,Z;try{for(var Q=function(){var e=ee.value;if(e.localName&&_objectElementNames.includes(e.localName)){var n=N?N:t["#items"],a=[].concat(_toConsumableArray(n.children)).find(function(t){return t[_$object]===e});if(a);else{var r=t._createItem(e,Y);t._ownerEditor.canvas.selectedElements.includes(e)&&r.setAttribute("data-selected",""),X.append(r)}}},J=e.addedNodes[Symbol.iterator](),ee;!(W=(ee=J.next()).done);W=!0)Q()}catch(e){K=!0,Z=e}finally{try{!W&&J.return&&J.return()}finally{if(K)throw Z}}O?O.after(X):q?q.before(X):N?N.querySelector(".children").append(X):this["#items"].append(X)}}}}},{key:"_fetchIcons",value:async function(){if(!1===this._fetchedIcons){this._fetchedIcons=!0;var e=await fetch("images/icons.svg"),t=await e.text(),n=_svg6(_templateObject2,t),a=document.createDocumentFragment(),r=["arrow","lock-on","visibility-hidden"],i=!0,o=!1,s;try{for(var l=n.querySelectorAll("symbol")[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,u.id&&(u.id.startsWith("object-")||r.includes(u.id))&&a.append(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}n.style.display="none",n.innerHTML="",n.append(a),this._shadowRoot.append(n)}}},{key:"_objectMatchesFilter",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,r=!1;if(""===t)r=!0;else{if(!this["#developer-mode-button"].toggled){var i=e.querySelector(":scope > bx-title"),o="";o=i&&0<i.textContent.trim().length?i.textContent.trim():_getObjectElementDisplayName2(e,"designer"),-1!==o.toLowerCase().indexOf(t)&&(r=!0)}else if(e.id)-1!==("#"+e.id.toLowerCase()).indexOf(t)&&(r=!0);else{var s=_getObjectElementDisplayName2(e,"developer");-1!==s.toLowerCase().indexOf(t)&&(r=!0)}if(!1==r&&!0===a&&("g"===e.localName||"a"===e.localName)){var l=!0,d=!1,u;try{for(var c=e.children[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,_objectElementNames.includes(h.localName)&&this._objectMatchesFilter(h,t)){r=!0;break}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}return!1==r&&!0===n&&("g"===e.parentElement.localName||"a"===e.parentElement.localName)&&e.parentElement!==this._ownerEditor.canvas.currentArtboard&&this._objectMatchesFilter(e.parentElement,t,!1,!1)&&(r=!0),r}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-objectspanel",BXObjectsPanelElement)}}{{var _getUserBBox7=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen22=BoxySVG.utils.element,_html17=_BoxySVG$utils$elemen22.html,_closest22=_BoxySVG$utils$elemen22.closest,_BoxySVG$utils$geomet10=BoxySVG.utils.geometry,_getDistanceBetweenPoints3=_BoxySVG$utils$geomet10.getDistanceBetweenPoints,_snapRotationAngle=_BoxySVG$utils$geomet10.snapRotationAngle,_combineRects8=_BoxySVG$utils$geomet10.combineRects,_transformRect8=_BoxySVG$utils$geomet10.transformRect,_round22=BoxySVG.utils.math.round,_BoxySVG$utils$pathSh2=BoxySVG.utils.pathShapes,_getShapeData3=_BoxySVG$utils$pathSh2.getShapeData,_setShapeData2=_BoxySVG$utils$pathSh2.setShapeData,_throttle10=BoxySVG.utils.time.throttle,_reduceTransform7=BoxySVG.utils.transformReduction.reduceTransform,_min4=Math.min,_parseFloat10=Number.parseFloat,_BoxySVG$utils$transf9=BoxySVG.utils.transformGeneral,_getComputedTransform11=_BoxySVG$utils$transf9.getComputedTransform,_getComputedTransformOriginClientPoint2=_BoxySVG$utils$transf9.getComputedTransformOriginClientPoint,_getElementRotationAngle2=_BoxySVG$utils$transf9.getElementRotationAngle,_getTransformToElement9=_BoxySVG$utils$transf9.getTransformToElement,_getTransformOriginBBoxPoint=_BoxySVG$utils$transf9.getTransformOriginBBoxPoint,_setTransformOriginBBoxPoint=_BoxySVG$utils$transf9.setTransformOriginBBoxPoint,_bboxPointToUserPoint=_BoxySVG$utils$transf9.bboxPointToUserPoint,_userPointToBBoxPoint2=_BoxySVG$utils$transf9.userPointToBBoxPoint,_shadowTemplate14=_html17(_templateObject33,window.theme,window.theme),BXGeometryPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._isChangingGuideX=!1,e._isChangingGuideY=!1,e._isChangingObjectX=!1,e._isChangingObjectY=!1,e._isChangingObjectWidth=!1,e._isChangingObjectHeight=!1,e._isChangingObjectOriginX=!1,e._isChangingObjectOriginY=!1,e._isChangingObjectRotation=!1,e._isChangingLineX1=!1,e._isChangingLineY1=!1,e._isChangingLineX2=!1,e._isChangingLineY2=!1,e._isChangingTriangleShift=!1,e._isChangingTriangleCorner=!1,e._isChangingNGonArms=!1,e._isChangingNGonCorner=!1,e._isChangingStarArms=!1,e._isChangingStarDepth=!1,e._update200Th=_throttle10(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate14.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#object-x-input"].addEventListener("changestart",function(){return e._onObjectXInputChangeStart()}),e["#object-y-input"].addEventListener("changestart",function(){return e._onObjectYInputChangeStart()}),e["#object-origin-x-input"].addEventListener("changestart",function(){return e._onObjectOriginXInputChangeStart()}),e["#object-origin-y-input"].addEventListener("changestart",function(){return e._onObjectOriginYInputChangeStart()}),e["#object-width-input"].addEventListener("changestart",function(){return e._onObjectWidthInputChangeStart()}),e["#object-height-input"].addEventListener("changestart",function(){return e._onObjectHeightInputChangeStart()}),e["#object-aspect-ratio-button"].addEventListener("toggle",function(){return e._onObjectAspectRatioButtonToggle()}),e["#object-rotation-box"].addEventListener("changestart",function(){return e._onObjectRotationChangeStart()}),e["#line-x1-input"].addEventListener("changestart",function(){return e._onLineX1InputChangeStart()}),e["#line-y1-input"].addEventListener("changestart",function(){return e._onLineY1InputChangeStart()}),e["#line-x2-input"].addEventListener("changestart",function(){return e._onLineX2InputChangeStart()}),e["#line-y2-input"].addEventListener("changestart",function(){return e._onLineY2InputChangeStart()}),e["#triangle-shift-box"].addEventListener("changestart",function(){return e._onTriangleShiftChangeStart()}),e["#triangle-corner-box"].addEventListener("changestart",function(){return e._onTriangleCornerChangeStart()}),e["#n-gon-arms-box"].addEventListener("changestart",function(){return e._onNGonArmsChangeStart()}),e["#n-gon-corner-box"].addEventListener("changestart",function(){return e._onNGonCornerChangeStart()}),e["#star-arms-box"].addEventListener("changestart",function(){return e._onStarArmsChangeStart()}),e["#star-depth-box"].addEventListener("changestart",function(){return e._onStarDepthChangeStart()}),e["#guide-x-input"].addEventListener("changestart",function(){return e._onGuideXChangeStart()}),e["#guide-y-input"].addEventListener("changestart",function(){return e._onGuideYChangeStart()}),e["#guide-orientation-buttons"].addEventListener("toggle",function(){return e._onGuideOrientationButtonsToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest22(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest22(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas,n=this._ownerApp.getConfig("bx-geometrypanel:preserveObjectAspectRatio")||!1;this["#object-aspect-ratio-button"].toggled=n,this._updateObjectAspectRatioIcon(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedguideschange",this._selectedGuidesChangeListener=function(){e._onSelectedGuidesChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedguideschange",this._selectedGuidesChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedGuidesChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onObjectXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=[],r=!1,i=Symbol(),o,s;t.undoManager.checkpoint("X"),this._isChangingObjectX=!0;var l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=_getTransformToElement9(h,t.currentArtboard),x=b.inverse(),m=_getComputedTransform11(h);h[i]={userTransform:m,userToArtboardTransform:b,artboardToUserTransform:x};var g=_getUserBBox7(h);a.push(_transformRect8(g,b))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var v=_combineRects8(a).x;this["#object-x-input"].addEventListener("change",o=function(){var t=e["#object-x-input"].value-v;r=!0;var a=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(a=(d=l.next()).done);a=!0){var u=d.value,c=u[i],p=c.userTransform,h=c.userToArtboardTransform,b=c.artboardToUserTransform,x=SVGMatrix.fromMatrix(p);x.multiplySelf(b),x.translateSelf(t,0),x.multiplySelf(h),u.setAttribute("transform",x.toString())}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}}),this["#object-x-input"].addEventListener("changeend",s=function(){if(e["#object-x-input"].removeEventListener("change",o),e["#object-x-input"].removeEventListener("changeend",s),e._isChangingObjectX=!1,r){var a=!0,i=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(a=(u=d.next()).done);a=!0)c=u.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){i=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw l}}}})}},{key:"_onObjectYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=[],r=!1,i=Symbol(),o,s;t.undoManager.checkpoint("Y"),this._isChangingObjectYSlider=!0;var l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=_getTransformToElement9(h,t.currentArtboard),x=b.inverse(),m=_getComputedTransform11(h);h[i]={userTransform:m,userToArtboardTransform:b,artboardToUserTransform:x};var g=_getUserBBox7(h);a.push(_transformRect8(g,b))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var v=_combineRects8(a).y;this["#object-y-input"].addEventListener("change",o=function(){var t=e["#object-y-input"].value-v;r=!0;var a=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(a=(d=l.next()).done);a=!0){var u=d.value,c=u[i],p=c.userTransform,h=c.userToArtboardTransform,b=c.artboardToUserTransform,x=SVGMatrix.fromMatrix(p);x.multiplySelf(b),x.translateSelf(0,t),x.multiplySelf(h),u.setAttribute("transform",x.toString())}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}}),this["#object-y-input"].addEventListener("changeend",s=function(){if(e["#object-y-input"].removeEventListener("change",o),e["#object-y-input"].removeEventListener("changeend",s),e._isChangingObjectYSlider=!1,r){var a=!0,i=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(a=(u=d.next()).done);a=!0)c=u.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){i=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw l}}}})}},{key:"_onObjectWidthInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements;if(1===n.length){t.undoManager.checkpoint("Width"),this._isChangingObjectWidth=!0;var a=n[0],r=_getUserBBox7(a),i=_getTransformToElement9(a,t.currentArtboard),o=_getComputedTransform11(a),s=!1,l=_getDistanceBetweenPoints3(new SVGPoint(r.x,r.y).matrixTransform(i),new SVGPoint(r.x+r.width,r.y).matrixTransform(i)),d,u;this["#object-width-input"].addEventListener("change",d=function(){s=!0;var t=e["#object-width-input"].value,n=t/l,i=1;e["#object-aspect-ratio-button"].toggled&&(i=n);var d=-r.x*(n-1),u=-r.y*(i-1),c=SVGMatrix.fromMatrix(o);c.translateSelf(d,u),c.scaleNonUniformSelf(n,i),a.setAttribute("transform",c.toString())}),this["#object-width-input"].addEventListener("changeend",u=function(){e["#object-width-input"].removeEventListener("change",d),e["#object-width-input"].removeEventListener("changeend",u),e._isChangingObjectWidth=!1,s&&_reduceTransform7(a,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})})}else if(1<n.length){t.undoManager.checkpoint("Width"),this._isChangingObjectWidth=!0;var c=[],p=!1,h=Symbol(),b=!0,x=!1,m,g,v;try{for(var y=n[Symbol.iterator](),f;!(b=(f=y.next()).done);b=!0){var _=f.value,w=_getComputedTransform11(_),k=_getTransformToElement9(_,t.currentArtboard),A=k.inverse();_[h]={userTransform:w,userToArtboardTransform:k,artboardToUserTransform:A};var C=_transformRect8(_getUserBBox7(_),k);c.push(C)}}catch(e){x=!0,v=e}finally{try{!b&&y.return&&y.return()}finally{if(x)throw v}}var S=_combineRects8(c),E=S.width;this["#object-width-input"].addEventListener("change",m=function(){var t=e["#object-width-input"].value;p=!0;var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[h],u=d.userTransform,c=d.userToArtboardTransform,b=d.artboardToUserTransform,x=t/E,m=1;e["#object-aspect-ratio-button"].toggled&&(m=x);var g=-S.x*(x-1),v=-S.y*(m-1),y=SVGMatrix.fromMatrix(u);y.multiplySelf(b),y.translateSelf(g,v),y.scaleNonUniformSelf(x,m),y.multiplySelf(c),l.setAttribute("transform",y.toString())}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}),this["#object-width-input"].addEventListener("changeend",g=function(){if(e["#object-width-input"].removeEventListener("change",m),e["#object-width-input"].removeEventListener("changeend",g),e._isChangingObjectWidth=!1,p){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_reduceTransform7(l,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}})}}},{key:"_onObjectHeightInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements;if(1===n.length){t.undoManager.checkpoint("Height"),this._isChangingObjectHeight=!0;var a=n[0],r=_getUserBBox7(a),i=_getTransformToElement9(a,t.currentArtboard),o=_getComputedTransform11(a),s=!1,l=_getDistanceBetweenPoints3(new SVGPoint(r.x,r.y).matrixTransform(i),new SVGPoint(r.x,r.y+r.height).matrixTransform(i)),d,u;this["#object-height-input"].addEventListener("change",d=function(){s=!0;var t=e["#object-height-input"].value,n=1,i=t/l;e["#object-aspect-ratio-button"].toggled&&(n=i);var d=-r.x*(n-1),u=-r.y*(i-1),c=SVGMatrix.fromMatrix(o);c.translateSelf(d,u),c.scaleNonUniformSelf(n,i),a.setAttribute("transform",c.toString())}),this["#object-height-input"].addEventListener("changeend",u=function(){e["#object-height-input"].removeEventListener("change",d),e["#object-height-input"].removeEventListener("changeend",u),e._isChangingObjectHeight=!1,s&&_reduceTransform7(a,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})})}else if(1<n.length){t.undoManager.checkpoint("Height"),this._isChangingObjectHeight=!0;var c=[],p=Symbol(),h=!1,b=!0,x=!1,m,g,v;try{for(var y=n[Symbol.iterator](),f;!(b=(f=y.next()).done);b=!0){var _=f.value,w=_getComputedTransform11(_),k=_getTransformToElement9(_,t.currentArtboard),A=k.inverse();_[p]={userTransform:w,userToArtboardTransform:k,artboardToUserTransform:A};var C=_transformRect8(_getUserBBox7(_),k);c.push(C)}}catch(e){x=!0,v=e}finally{try{!b&&y.return&&y.return()}finally{if(x)throw v}}var S=_combineRects8(c),E=S.height;this["#object-height-input"].addEventListener("change",m=function(){h=!0;var t=e["#object-height-input"].value,a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[p],u=d.userTransform,c=d.userToArtboardTransform,b=d.artboardToUserTransform,x=1,m=t/E;e["#object-aspect-ratio-button"].toggled&&(x=m);var g=-S.x*(x-1),v=-S.y*(m-1),y=SVGMatrix.fromMatrix(u);y.multiplySelf(b),y.translateSelf(g,v),y.scaleNonUniformSelf(x,m),y.multiplySelf(c),l.setAttribute("transform",y.toString())}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}),this["#object-height-input"].addEventListener("changeend",g=function(){if(e["#object-height-input"].removeEventListener("change",m),e["#object-height-input"].removeEventListener("changeend",g),e._isChangingObjectHeight=!1,h){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_reduceTransform7(l,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}})}}},{key:"_onObjectAspectRatioButtonToggle",value:function(){this._ownerApp.setConfig("bx-geometrypanel:preserveObjectAspectRatio",this["#object-aspect-ratio-button"].toggled),this._updateObjectAspectRatioIcon()}},{key:"_onObjectOriginXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=t.currentArtboard.getScreenCTM().inverse(),r=_getComputedTransformOriginClientPoint2(n),i=r.matrixTransform(a),o=Symbol(),s=Symbol(),l=!0,d=!1,u,c,p;try{for(var h=n[Symbol.iterator](),b,x;!(l=(b=h.next()).done);l=!0)x=b.value,x[o]=_getTransformToElement9(x,t.currentArtboard).inverse(),x[s]=_getUserBBox7(x)}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}t.undoManager.checkpoint("Origin X"),this._isChangingObjectOriginX=!0,this["#object-origin-x-input"].addEventListener("change",u=function(){var a=new SVGPoint(e["#object-origin-x-input"].value,i.y),r=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(r=(c=u.next()).done);r=!0){var p=c.value,h=a.matrixTransform(p[o]),b=_userPointToBBoxPoint2(h,p[s]);_setTransformOriginBBoxPoint(p,b,t.geometryPrecision)}}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}),this["#object-origin-x-input"].addEventListener("changeend",c=function(){e["#object-origin-x-input"].removeEventListener("change",u),e["#object-origin-x-input"].removeEventListener("changeend",c),e._isChangingObjectOriginX=!1})}},{key:"_onObjectOriginYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=t.currentArtboard.getScreenCTM().inverse(),r=_getComputedTransformOriginClientPoint2(n),i=r.matrixTransform(a),o=Symbol(),s=Symbol(),l=!0,d=!1,u,c,p;try{for(var h=n[Symbol.iterator](),b,x;!(l=(b=h.next()).done);l=!0)x=b.value,x[o]=_getTransformToElement9(x,t.currentArtboard).inverse(),x[s]=_getUserBBox7(x)}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}t.undoManager.checkpoint("Origin Y"),this._isChangingObjectOriginY=!0,this["#object-origin-y-input"].addEventListener("change",u=function(){var a=new SVGPoint(i.x,e["#object-origin-y-input"].value),r=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(r=(c=u.next()).done);r=!0){var p=c.value,h=a.matrixTransform(p[o]),b=_userPointToBBoxPoint2(h,p[s]);_setTransformOriginBBoxPoint(p,b,t.geometryPrecision)}}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}),this["#object-origin-y-input"].addEventListener("changeend",c=function(){e["#object-origin-y-input"].removeEventListener("change",u),e["#object-origin-y-input"].removeEventListener("changeend",c),e._isChangingObjectOriginY=!1})}},{key:"_onObjectRotationChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=1<n.length?0:_round22(_getElementRotationAngle2(n[0]),2),r=_getComputedTransformOriginClientPoint2(n),i=Symbol(),o=!1,s=!0,l=!1,d,u,c;try{for(var p=n[Symbol.iterator](),h;!(s=(h=p.next()).done);s=!0){var b=h.value,x=_getComputedTransform11(b),m=b.getScreenCTM(),g=m.inverse();b[i]={clientToUserTransform:m,userToClientTransform:g,userTransform:x}}}catch(e){l=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw c}}t.undoManager.checkpoint("Rotation"),this._isChangingObjectRotation=!0,this["#object-rotation-box"].addEventListener("change",d=function(t){o=!0,t.target===e["#object-rotation-slider"]?e["#object-rotation-input"].value=e["#object-rotation-slider"].value:t.target===e["#object-rotation-input"]&&(e["#object-rotation-slider"].value=e["#object-rotation-input"].value),e._ownerApp.modKeys.shift&&(e["#object-rotation-input"].value=_snapRotationAngle(e["#object-rotation-slider"].value,15),e["#object-rotation-slider"].value=e["#object-rotation-input"].value);var s=e["#object-rotation-input"].value,l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=h[i],x=b.clientToUserTransform,m=b.userToClientTransform,g=b.userTransform,v=SVGMatrix.fromMatrix(g);v.multiplySelf(m),v.rotateSelf(s-a,r.x,r.y),v.multiplySelf(x),h.setAttribute("transform",v.toString())}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}),this["#object-rotation-box"].addEventListener("changeend",u=function(){if(e["#object-rotation-box"].removeEventListener("change",d),e["#object-rotation-box"].removeEventListener("changeend",u),e._isChangingObjectRotation=!1,o){var a=!0,r=!1,i;try{for(var s=n[Symbol.iterator](),l,c;!(a=(l=s.next()).done);a=!0)c=l.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}}})}},{key:"_onLineX1InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line X1"),this._isChangingLineX1=!0,this["#line-x1-input"].addEventListener("change",n=function(){t.setAttribute("x1",e["#line-x1-input"].value)}),this["#line-x1-input"].addEventListener("changeend",a=function(){e["#line-x1-input"].removeEventListener("change",n),e["#line-x1-input"].removeEventListener("changeend",a),e._isChangingLineX1=!1})}},{key:"_onLineY1InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line Y1"),this._isChangingLineY1=!0,this["#line-y1-input"].addEventListener("change",n=function(){t.setAttribute("y1",e["#line-y1-input"].value)}),this["#line-y1-input"].addEventListener("changeend",a=function(){e["#line-y1-input"].removeEventListener("change",n),e["#line-y1-input"].removeEventListener("changeend",a),e._isChangingLineY1=!1})}},{key:"_onLineX2InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line X2"),this._isChangingLineX2=!0,this["#line-x2-input"].addEventListener("change",n=function(){t.setAttribute("x2",e["#line-x2-input"].value)}),this["#line-x2-input"].addEventListener("changeend",a=function(){e["#line-x2-input"].removeEventListener("change",n),e["#line-x2-input"].removeEventListener("changeend",a),e._isChangingLineX2=!1})}},{key:"_onLineY2InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line Y2"),this._isChangingLineY2=!0,this["#line-y2-input"].addEventListener("change",n=function(){t.setAttribute("y2",e["#line-y2-input"].value)}),this["#line-y2-input"].addEventListener("changeend",a=function(){e["#line-y2-input"].removeEventListener("change",n),e["#line-y2-input"].removeEventListener("changeend",a),e._isChangingLineY2=!1})}},{key:"_onTriangleShiftChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"triangle"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Triangle shift"),this._isChangingTriangleShift=!0,this["#triangle-shift-box"].addEventListener("change",o=function(t){t.target===e["#triangle-shift-slider"]?e["#triangle-shift-input"].value=e["#triangle-shift-slider"].value:t.target===e["#triangle-shift-input"]&&(e["#triangle-shift-slider"].value=e["#triangle-shift-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[4]=e["#triangle-shift-slider"].value,_setShapeData2(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#triangle-shift-box"].addEventListener("changeend",s=function(){e["#triangle-shift-box"].removeEventListener("change",o),e["#triangle-shift-box"].removeEventListener("changeend",s),e._isChangingTriangleShift=!1})}},{key:"_onTriangleCornerChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"triangle"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Triangle corner"),this._isChangingTriangleCorner=!0,this["#triangle-corner-box"].addEventListener("change",o=function(t){t.target===e["#triangle-corner-slider"]?e["#triangle-corner-input"].value=e["#triangle-corner-slider"].value:t.target===e["#triangle-corner-input"]&&(e["#triangle-corner-slider"].value=e["#triangle-corner-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[5]=e["#triangle-corner-slider"].value,_setShapeData2(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#triangle-corner-box"].addEventListener("changeend",s=function(){e["#triangle-corner-box"].removeEventListener("change",o),e["#triangle-corner-box"].removeEventListener("changeend",s),e._isChangingTriangleCorner=!1})}},{key:"_onNGonArmsChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"n-gon"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("N-gon arms"),this._isChangingNGonArms=!0,this["#n-gon-arms-box"].addEventListener("change",o=function(t){t.target===e["#n-gon-arms-slider"]?e["#n-gon-arms-input"].value=e["#n-gon-arms-slider"].value:t.target===e["#n-gon-arms-input"]&&(e["#n-gon-arms-slider"].value=e["#n-gon-arms-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[4]=e["#n-gon-arms-slider"].value,_setShapeData2(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#n-gon-arms-box"].addEventListener("changeend",s=function(){e["#n-gon-arms-box"].removeEventListener("change",o),e["#n-gon-arms-box"].removeEventListener("changeend",s),e._isChangingNGonArms=!1})}},{key:"_onNGonCornerChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"n-gon"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("N-gon corner"),this._isChangingNGonCorner=!0,this["#n-gon-corner-box"].addEventListener("change",o=function(t){t.target===e["#n-gon-corner-slider"]?e["#n-gon-corner-input"].value=e["#n-gon-corner-slider"].value:t.target===e["#n-gon-corner-input"]&&(e["#n-gon-corner-slider"].value=e["#n-gon-corner-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[5]=e["#n-gon-corner-slider"].value,_setShapeData2(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#n-gon-corner-box"].addEventListener("changeend",s=function(){e["#n-gon-corner-box"].removeEventListener("change",o),e["#n-gon-corner-box"].removeEventListener("changeend",s),e._isChangingNGonCorner=!1})}},{key:"_onStarArmsChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"star"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Star arms"),this._isChangingStarArms=!0,this["#star-arms-box"].addEventListener("change",o=function(t){t.target===e["#star-arms-slider"]?e["#star-arms-input"].value=e["#star-arms-slider"].value:t.target===e["#star-arms-input"]&&(e["#star-arms-slider"].value=e["#star-arms-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[5]=e["#star-arms-slider"].value,_setShapeData2(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#star-arms-box"].addEventListener("changeend",s=function(){e["#star-arms-box"].removeEventListener("change",o),e["#star-arms-box"].removeEventListener("changeend",s),e._isChangingStarArms=!1})}},{key:"_onStarDepthChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"star"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Star depth"),this._isChangingStarDepth=!0,this["#star-depth-box"].addEventListener("change",o=function(t){t.target===e["#star-depth-slider"]?e["#star-depth-input"].value=e["#star-depth-slider"].value:t.target===e["#star-depth-input"]&&(e["#star-depth-slider"].value=e["#star-depth-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[4]=e["#star-depth-slider"].value,_setShapeData2(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#star-depth-box"].addEventListener("changeend",s=function(){e["#star-depth-box"].removeEventListener("change",o),e["#star-depth-box"].removeEventListener("changeend",s),e._isChangingStarDepth=!1})}},{key:"_onGuideOrientationButtonsToggle",value:function(){var e=this._ownerEditor.canvas,t=this["#guide-orientation-buttons"].value;if(0<e.selectedGuides.length){e.undoManager.checkpoint("Guide orientation");var n=!0,a=!1,r;try{for(var i=e.selectedGuides[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_parseFloat10(s.getAttribute("angle"));"horizontal"===t?90!=l%180&&s.setAttribute("angle","90"):"vertical"===t&&0!=l%180&&s.setAttribute("angle","0")}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}}},{key:"_onGuideXChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedGuides[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Guide X"),this._isChangingGuideX=!0,this["#guide-x-input"].addEventListener("change",n=function(){t.setAttribute("x",e["#guide-x-input"].value),e._ownerEditor.canvas.manualGuidesHud.requestImmidiateUpdate()}),this["#guide-x-input"].addEventListener("changeend",a=function(){e["#guide-x-input"].removeEventListener("change",n),e["#guide-x-input"].removeEventListener("changeend",a),e._isChangingGuideX=!1})}},{key:"_onGuideYChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedGuides[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Guide Y"),this._isChangingGuideY=!0,this["#guide-y-input"].addEventListener("change",n=function(){t.setAttribute("y",e["#guide-y-input"].value),e._ownerEditor.canvas.manualGuidesHud.requestImmidiateUpdate()}),this["#guide-y-input"].addEventListener("changeend",a=function(){e["#guide-y-input"].removeEventListener("change",n),e["#guide-y-input"].removeEventListener("changeend",a),e._isChangingGuideY=!1})}},{key:"_update",value:function(){var e=this,t=this._ownerEditor.canvas.outermostSelectedElements,n=this._ownerEditor.canvas.selectedGuides;if(this["#panel-heading"].disabled=0===t.length&&0===n.length,!1===this._isChangingObjectRotation&&!1===this._isChangingObjectX&&!1===this._isChangingObjectY&&!1===this._isChangingObjectWidth&&!1===this._isChangingObjectHeight&&!1===this._isChangingObjectOriginX&&!1===this._isChangingObjectOriginY)if(0===t.length)this["#object-section-heading"].disabled=!0,this["#object-x-heading"].disabled=!0,this["#object-x-input"].disabled=!0,this["#object-x-input"].value=0,this["#object-y-heading"].disabled=!0,this["#object-y-input"].disabled=!0,this["#object-y-input"].value=0,this["#object-width-heading"].disabled=!0,this["#object-width-input"].disabled=!0,this["#object-width-input"].value=0,this["#object-aspect-ratio-button"].disabled=!0,this["#object-height-heading"].disabled=!0,this["#object-height-input"].disabled=!0,this["#object-height-input"].value=0,this["#object-origin-x-heading"].disabled=!0,this["#object-origin-x-input"].disabled=!0,this["#object-origin-x-input"].value=0,this["#object-origin-y-heading"].disabled=!0,this["#object-origin-y-input"].disabled=!0,this["#object-origin-y-input"].value=0,this["#object-rotation-heading"].disabled=!0,this["#object-rotation-slider"].disabled=!0,this["#object-rotation-slider"].value=0,this["#object-rotation-input"].disabled=!0,this["#object-rotation-input"].value=0;else if(1===t.length){var a=t[0],r=_getTransformToElement9(a,this._ownerEditor.canvas.currentArtboard),i=_getUserBBox7(a),o=[new SVGPoint(i.x,i.y).matrixTransform(r),new SVGPoint(i.x+i.width,i.y).matrixTransform(r),new SVGPoint(i.x+i.width,i.y+i.height).matrixTransform(r),new SVGPoint(i.x,i.y+i.height).matrixTransform(r)],s=_getDistanceBetweenPoints3(o[0],o[1]),l=_getDistanceBetweenPoints3(o[1],o[2]),d=o.map(function(e){return e.x}),u=o.map(function(e){return e.y}),c=_min4.apply(void 0,_toConsumableArray(d)),p=_min4.apply(void 0,_toConsumableArray(u)),h=_round22(_getElementRotationAngle2(a),2),b=_getTransformOriginBBoxPoint(a),x=_bboxPointToUserPoint(b,i),m=x.matrixTransform(r),g=m.x,v=m.y;this["#object-section-heading"].disabled=!1,this["#object-x-heading"].disabled=!1,this["#object-x-input"].disabled=!1,this["#object-x-input"].value=_round22(c,2),this["#object-y-heading"].disabled=!1,this["#object-y-input"].disabled=!1,this["#object-y-input"].value=_round22(p,2),this["#object-width-heading"].disabled=!1,this["#object-width-input"].disabled=!1,this["#object-width-input"].value=_round22(s,2),this["#object-aspect-ratio-button"].disabled=!1,this["#object-height-heading"].disabled=!1,this["#object-height-input"].disabled=!1,this["#object-height-input"].value=_round22(l,2),this["#object-origin-x-heading"].disabled=!1,this["#object-origin-x-input"].disabled=!1,this["#object-origin-x-input"].value=_round22(g,2),this["#object-origin-y-heading"].disabled=!1,this["#object-origin-y-input"].disabled=!1,this["#object-origin-y-input"].value=_round22(v,2),this["#object-rotation-heading"].disabled=!1,this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=h,this["#object-rotation-input"].disabled=!1,this["#object-rotation-input"].value=h}else{var y=t.map(function(t){var n=_getTransformToElement9(t,e._ownerEditor.canvas.currentArtboard),a=_getUserBBox7(t),r=_transformRect8(a,n);return r}),f=_combineRects8(y),_=this._ownerEditor.canvas.currentArtboard.getScreenCTM().inverse(),w=_getComputedTransformOriginClientPoint2(t,!1),k=w.matrixTransform(_),A=k.x,C=k.y,S=f.x,E=f.y,T=f.width,P=f.height;this["#object-section-heading"].disabled=!1,this["#object-x-heading"].disabled=!1,this["#object-x-input"].disabled=!1,this["#object-x-input"].value=_round22(S,2),this["#object-y-heading"].disabled=!1,this["#object-y-input"].disabled=!1,this["#object-y-input"].value=_round22(E,2),this["#object-width-heading"].disabled=!1,this["#object-width-input"].disabled=!1,this["#object-width-input"].value=_round22(T,2),this["#object-aspect-ratio-button"].disabled=!1,this["#object-height-heading"].disabled=!1,this["#object-height-input"].disabled=!1,this["#object-height-input"].value=_round22(P,2),this["#object-origin-x-heading"].disabled=!1,this["#object-origin-x-input"].disabled=!1,this["#object-origin-x-input"].value=_round22(A,2),this["#object-origin-y-heading"].disabled=!1,this["#object-origin-y-input"].disabled=!1,this["#object-origin-y-input"].value=_round22(C,2),this["#object-rotation-heading"].disabled=!1,this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=0,this["#object-rotation-input"].disabled=!1,this["#object-rotation-input"].value=0}if(!1===this._isChangingLineX1&&!1===this._isChangingLineY1&&!1===this._isChangingLineX2&&!1===this._isChangingLineY2)if(0===t.length||"line"!==t[0].localName)this["#line-section"].hidden=!0;else{var L=t[0],D=_getTransformToElement9(L,this._ownerEditor.canvas.currentArtboard),M=new SVGPoint(L.x1.baseVal.value,L.y1.baseVal.value),N=new SVGPoint(L.x2.baseVal.value,L.y2.baseVal.value);M=M.matrixTransform(D),N=N.matrixTransform(D),this["#line-section"].hidden=!1,this["#line-x1-input"].value=_round22(M.x,2),this["#line-y1-input"].value=_round22(M.y,2),this["#line-x2-input"].value=_round22(N.x,2),this["#line-y2-input"].value=_round22(N.y,2)}if(!1===this._isChangingTriangleShift&&!1===this._isChangingTriangleCorner)if(0===t.length||"path"!==t[0].localName)this["#triangle-section"].hidden=!0;else{var I=_getShapeData3(t[0]);if(I&&"triangle"===I.type){var R=t[0],V=_slicedToArray(I.values,6),z=V[0],G=V[1],B=V[2],O=V[3],q=V[4],j=V[5];this["#triangle-section"].hidden=!1,this["#triangle-shift-slider"].value=_round22(q,2),this["#triangle-shift-input"].value=_round22(q,2),this["#triangle-corner-slider"].value=_round22(j,2),this["#triangle-corner-input"].value=_round22(j,2)}else this["#triangle-section"].hidden=!0}if(!1===this._isChangingNGonArms&&!1===this._isChangingNGonCorner)if(0===t.length||"path"!==t[0].localName)this["#n-gon-section"].hidden=!0;else{var U=_getShapeData3(t[0]);if(U&&"n-gon"===U.type){var H=t[0],$=_slicedToArray(U.values,6),F=$[0],Y=$[1],X=$[2],W=$[3],K=$[4],Z=$[5];this["#n-gon-section"].hidden=!1,this["#n-gon-arms-slider"].value=_round22(K,0),this["#n-gon-arms-input"].value=_round22(K,0),this["#n-gon-corner-slider"].value=_round22(Z,2),this["#n-gon-corner-input"].value=_round22(Z,2)}else this["#n-gon-section"].hidden=!0}if(!1===this._isChangingStarArms&&!1===this._isChangingStarDepth)if(0===t.length||"path"!==t[0].localName)this["#star-section"].hidden=!0;else{var Q=_getShapeData3(t[0]);if(Q&&"star"===Q.type){var J=t[0],ee=_slicedToArray(Q.values,6),te=ee[0],ne=ee[1],ae=ee[2],re=ee[3],ie=ee[4],oe=ee[5];this["#star-section"].hidden=!1,this["#star-arms-slider"].value=_round22(oe,0),this["#star-arms-input"].value=_round22(oe,0),this["#star-depth-slider"].value=_round22(ie,2),this["#star-depth-input"].value=_round22(ie,2)}else this["#star-section"].hidden=!0}if(!1===this._isChangingGuideX&&!1===this._isChangingGuideY)if(0===n.length)this["#guide-section"].hidden=!0;else{this["#guide-section"].hidden=!1;var se=n[0],le=_parseFloat10(se.getAttribute("x")),de=_parseFloat10(se.getAttribute("y")),ue=_parseFloat10(se.getAttribute("angle"));this["#guide-x-input"].value=le,this["#guide-y-input"].value=de,this["#guide-orientation-buttons"].value=90==ue%180?"horizontal":"vertical"}{var ce=this["#main"].querySelectorAll(":scope > section:not([hidden])"),pe=ce[ce.length-1],he=this["#main"].querySelectorAll(":scope > hr"),be=[],xe=!0,me=!1,ge;try{for(var ve=ce[Symbol.iterator](),ye,fe;!(xe=(ye=ve.next()).done);xe=!0)fe=ye.value,fe.nextElementSibling&&fe!==pe&&be.push(fe.nextElementSibling)}catch(e){me=!0,ge=e}finally{try{!xe&&ve.return&&ve.return()}finally{if(me)throw ge}}var _e=!0,we=!1,ke;try{for(var Ae=he[Symbol.iterator](),Ce,Se;!(_e=(Ce=Ae.next()).done);_e=!0)Se=Ce.value,Se.hidden=!1===be.includes(Se)}catch(e){we=!0,ke=e}finally{try{!_e&&Ae.return&&Ae.return()}finally{if(we)throw ke}}}}},{key:"_updateObjectAspectRatioIcon",value:function(){this["#object-aspect-ratio-icon"].name=this["#object-aspect-ratio-button"].toggled?"lock":"lock-open"}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-geometrypanel",BXGeometryPanelElement)}}{{var _BoxySVG$utils$elemen23=BoxySVG.utils.element,_html18=_BoxySVG$utils$elemen23.html,_closest23=_BoxySVG$utils$elemen23.closest,_createElement23=_BoxySVG$utils$elemen23.createElement,_isValidID4=_BoxySVG$utils$elemen23.isValidID,_throttle11=BoxySVG.utils.time.throttle,_shadowTemplate15=_html18(_templateObject34,window.theme,window.theme),BXMetadataPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._updateTh500=_throttle11(e._update,500,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate15.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#title-input"].addEventListener("change",function(){return e._onTitleInputChange()}),e["#desc-textarea"].addEventListener("change",function(){return e._onDescTextareaChange()}),e["#id-input"].addEventListener("change",function(){return e._onIDInputChange()}),e["#classes-input"].addEventListener("change",function(){return e._onClassesInputChange()}),e["#id-input"].validate=function(){return _isValidID4(e["#id-input"].value.trim())?{valid:!0,hint:""}:{valid:!1,hint:""}},e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest23(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest23(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._update()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateTh500()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onTitleInputChange",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.querySelector(":scope > bx-title, :scope > defs > bx-title"),a=this["#title-input"].value.trim();""===a?n&&(e.undoManager.checkpoint("Title"),n.remove()):(e.undoManager.checkpoint("Title"),!n&&(n=_createElement23("svg:bx-title"),t.prepend(n)),n.textContent=a)}},{key:"_onDescTextareaChange",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.querySelector(":scope > desc, :scope > defs > desc"),a=this["#desc-textarea"].value.trim();""===a?n&&(e.undoManager.checkpoint("Description"),n.remove()):(e.undoManager.checkpoint("Description"),!n&&(n=_createElement23("svg:desc"),t.prepend(n)),n.textContent=a)}},{key:"_onIDInputChange",value:function(){if(!1===this["#id-input"].invalid){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=this["#id-input"].value.trim();""===n?t.hasAttribute("id")&&(e.undoManager.checkpoint("ID"),t.removeAttribute("id")):t.setAttribute("id",n)}}},{key:"_onClassesInputChange",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=this["#classes-input"].value;0===n.length?t.hasAttribute("class")&&(e.undoManager.checkpoint("Classes"),t.removeAttribute("class")):t.setAttribute("class",n.join(" "))}},{key:"_update",value:function(){var e=this._ownerEditor.canvas;if(1<e.outermostSelectedElements.length)this["#accessibility-heading"].disabled=!0,this["#title-heading"].disabled=!0,this["#title-input"].value="",this["#title-input"].disabled=!0,this["#desc-heading"].disabled=!0,this["#desc-textarea"].value="",this["#desc-textarea"].disabled=!0,this["#scripting-heading"].disabled=!0,this["#id-heading"].disabled=!0,this["#id-input"].value="",this["#id-input"].disabled=!0,this["#classes-heading"].disabled=!0,this["#classes-input"].value=[],this["#classes-input"].disabled=!0;else{var t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.querySelector(":scope > bx-title, :scope > defs > bx-title"),a=t.querySelector(":scope > desc, :scope > defs > desc"),r=t.id;this["#accessibility-heading"].disabled=!1,this["#title-heading"].disabled=!1,this["#title-input"].value=n?n.textContent:"",this["#title-input"].disabled=!1,this["#desc-heading"].disabled=!1,this["#desc-textarea"].value=a?a.textContent:"",this["#desc-textarea"].disabled=!1,this["#scripting-heading"].disabled=!1,this["#id-heading"].disabled=!1,this["#id-input"].value=r,this["#id-input"].disabled=!1,this["#classes-heading"].disabled=!1,this["#classes-input"].value=[].concat(_toConsumableArray(t.classList))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-metadatapanel",BXMetadataPanelElement)}}{{var _getClientBBox7=BoxySVG.utils.bbox.getClientBBox,_closest24=BoxySVG.utils.element.closest,_parseViewBox8=BoxySVG.utils.parsing.parseViewBox,_BoxySVG$utils$geomet11=BoxySVG.utils.geometry,_combineRects9=_BoxySVG$utils$geomet11.combineRects,_transformRect9=_BoxySVG$utils$geomet11.transformRect,_throttle12=BoxySVG.utils.time.throttle,_getComputedTransform12=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform8=BoxySVG.utils.transformReduction.reduceTransform,_shadowHTML10="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%}#align-section{padding:5px 20px 18px}#align-buttons{margin-top:20px;justify-content:space-between}#align-to-buttons{width:100%;margin-bottom:8px}#align-mode-buttons x-button,#align-to-buttons x-button{flex:1;text-align:center;width:auto}#align-mode-buttons{width:100%}#move-buttons{width:110px;align-items:center;margin-right:30px}#move-buttons>x-box{width:100%;justify-content:space-between}#move-buttons x-button{width:35px;height:35px;margin:0 0 4px;padding:0}#center-buttons x-icon,#move-buttons x-icon,#stretch-buttons x-icon{width:24px;height:24px}#move-buttons[data-side=outside] x-icon{transform:rotate(180deg)}#center-buttons x-button,#stretch-buttons x-button{width:35px;height:35px;margin:0 0 10px;padding:0}#center-buttons x-button:last-child,#stretch-buttons x-button:last-child{margin-bottom:0}#rotate-and-flip-section{display:flex;padding:16px 20px 18px}#order-buttons>x-box,#rotate-and-flip-section>x-box{flex:1}#order-buttons>x-box:last-child,#rotate-and-flip-section>x-box:last-child{margin-left:5px}#rotate-and-flip-section h3{width:auto}#flip-buttons,#rotate-buttons{width:100%}#order-section x-button,#rotate-and-flip-section x-button{width:100%;height:28px}#order-section x-button:last-child,#rotate-and-flip-section x-button:last-child{margin-top:5px}#group-section x-button x-label,#order-section x-button x-label,#rotate-and-flip-section x-button x-label{flex:none;margin-left:5px}#order-section{padding:16px 20px 14px}#group-section{padding:16px 20px 20px}#group-section x-button{flex:1;height:28px}#group-section x-button:last-child{margin-left:5px}</style>\n\n    <h2 id=\"panel-heading\">Arrangement</h2>\n\n    <section id=\"align-section\">\n      <h3 id=\"align-section-heading\">Align to</h3>\n\n      <x-buttons id=\"align-to-buttons\" tracking=\"1\">\n        <x-button id=\"align-to-view-box-button\" value=\"view-box\" skin=\"condensed\" toggled>\n          <x-label>View box</x-label>\n        </x-button>\n\n        <x-button id=\"align-to-first-selected-button\" value=\"first-selected\" skin=\"condensed\">\n          <x-label>First selected</x-label>\n        </x-button>\n      </x-buttons>\n\n      <x-buttons id=\"align-mode-buttons\" tracking=\"1\">\n        <x-button id=\"align-together-button\" value=\"together\" skin=\"condensed\" toggled>\n          <x-label>Together</x-label>\n        </x-button>\n\n        <x-button id=\"align-separately-button\" value=\"separately\" skin=\"condensed\">\n          <x-label>Separately</x-label>\n        </x-button>\n      </x-buttons>\n\n      <x-box id=\"align-buttons\">\n        <x-box id=\"move-buttons\" vertical data-side=\"inside\">\n          <x-button id=\"arrange-top-button\" skin=\"condensed\" value=\"move-top-inside\">\n            <x-icon name=\"align-top\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-box>\n            <x-button id=\"arrange-left-button\" skin=\"condensed\" value=\"move-left-inside\">\n              <x-icon name=\"align-left\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"arrange-right-button\" skin=\"condensed\" value=\"move-right-inside\">\n              <x-icon name=\"align-right\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n\n          <x-button id=\"arrange-bottom-button\" skin=\"condensed\" value=\"move-bottom-inside\">\n            <x-icon name=\"align-bottom\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n\n        <x-box id=\"center-buttons\" vertical>\n          <x-button id=\"center-button\" skin=\"condensed\" value=\"center\">\n            <x-icon name=\"center\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"center-horizontally-button\" skin=\"condensed\" value=\"horizontal-center\">\n            <x-icon name=\"center-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"center-vertically-button\" skin=\"condensed\" value=\"vertical-center\">\n            <x-icon name=\"center-vertically\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n\n        <x-box id=\"stretch-buttons\" vertical>\n          <x-button id=\"stretch-button\" skin=\"condensed\" value=\"stretch\">\n            <x-icon name=\"stretch\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"stretch-horizontally-button\" skin=\"condensed\" value=\"horizontal-stretch\">\n            <x-icon name=\"stretch-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"stretch-vertically-button\" skin=\"condensed\" value=\"vertical-stretch\">\n            <x-icon name=\"stretch-vertically\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"rotate-and-flip-section\">\n      <x-box id=\"rotate-box\" vertical>\n        <h3 id=\"rotate-box-heading\">Rotate</h3>\n\n        <x-box id=\"rotate-buttons\" vertical>\n          <x-button id=\"rotate-counterclockwise-button\" value=\"rotateCounterclockwise\">\n            <x-icon name=\"rotate-counterclockwise\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>-90\xB0</x-label>\n          </x-button>\n\n          <x-button id=\"rotate-clockwise-button\" value=\"rotateClockwise\">\n            <x-icon name=\"rotate-clockwise\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>+90\xB0</x-label>\n          </x-button>\n        </x-box>\n      </x-box>\n\n      <x-box id=\"flip-box\" vertical>\n        <h3 id=\"flip-box-heading\">Flip</h3>\n\n        <x-box id=\"flip-buttons\" vertical>\n          <x-button id=\"flip-horizontally-button\" value=\"flipX\">\n            <x-icon name=\"flip-x\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Horizontal</x-label>\n          </x-button>\n\n          <x-button id=\"flip-vertically-button\" value=\"flipY\">\n            <x-icon name=\"flip-y\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Vertical</x-label>\n          </x-button>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"order-section\">\n      <h3 id=\"order-section-heading\">Order</h3>\n\n      <x-box id=\"order-buttons\">\n        <x-box vertical>\n          <x-button id=\"raise-button\" value=\"raise\">\n            <x-icon name=\"raise\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Raise</x-label>\n          </x-button>\n\n          <x-button id=\"lower-button\" value=\"lower\">\n            <x-icon name=\"lower\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Lower</x-label>\n          </x-button>\n        </x-box>\n\n        <x-box vertical>\n          <x-button id=\"front-button\" value=\"raiseToFront\">\n            <x-icon name=\"raise-to-front\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Front</x-label>\n          </x-button>\n\n          <x-button id=\"back-button\" value=\"lowerToBack\">\n            <x-icon name=\"lower-to-bottom\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Back</x-label>\n          </x-button>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"group-section\">\n      <h3 id=\"group-section-heading\">Group</h3>\n\n      <x-box id=\"group-buttons\">\n        <x-button id=\"group-button\" value=\"group\">\n          <x-icon name=\"group\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Group</x-label>\n        </x-button>\n\n        <x-button id=\"ungroup-button\" value=\"ungroup\">\n          <x-icon name=\"ungroup\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Ungroup</x-label>\n        </x-button>\n      </x-box>\n    </section>\n  ",BXArrangementPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update250Th=_throttle12(e._update,250,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML10;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#align-to-buttons"].addEventListener("toggle",function(){return e._onAlignToButtonsToggle()}),e["#align-mode-buttons"].addEventListener("toggle",function(){return e._onAlignModeButtonsToggle()}),e["#align-buttons"].addEventListener("click",function(t){return e._onAlignButtonsClick(t)}),e["#rotate-buttons"].addEventListener("click",function(t){return e._onRotateButtonsClick(t)}),e["#flip-buttons"].addEventListener("click",function(t){return e._onFlipButtonsClick(t)}),e["#order-buttons"].addEventListener("click",function(t){return e._onOrderButtonsClick(t)}),e["#group-buttons"].addEventListener("click",function(t){return e._onGroupButtonsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest24(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest24(this,"bx-editor");var e=this._ownerApp.getConfig("bx-arrangementpanel:alignTo"),t=this._ownerApp.getConfig("bx-arrangementpanel:alignMode");null!==e&&(this["#align-to-buttons"].value=e),null!==t&&(this["#align-mode-buttons"].value=t)}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){return e._onModKeysChange()}),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){return e._update()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){return e._update()}),this._update()}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onModKeysChange",value:function(){var e=this._ownerApp.modKeys.shift?"outside":"inside";this["#move-buttons"].setAttribute("data-side",e);var t=!0,n=!1,a;try{for(var r=this["#move-buttons"].querySelectorAll("x-button")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.value="outside"==e?o.value.replace("inside","outside"):o.value.replace("outside","inside")}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onAlignToButtonsToggle",value:function(){this._update(),this._ownerApp.setConfig("bx-arrangementpanel:alignTo",this["#align-to-buttons"].value)}},{key:"_onAlignModeButtonsToggle",value:function(){this._ownerApp.setConfig("bx-arrangementpanel:alignMode",this["#align-mode-buttons"].value)}},{key:"_onAlignButtonsClick",value:function(e){var t=e.target.closest("x-button");if(t){var n=this._ownerEditor.canvas,a=this["#align-to-buttons"].value,r=this["#align-mode-buttons"].value;if(n.undoManager.checkpoint("Align"),"view-box"===a){var i=n.currentArtboard.getScreenCTM(),o=_parseViewBox8(n.currentArtboard.getAttribute("viewBox")),s=_transformRect9(o,i);this._alignElementsToBBox(n.selectedElements,s,t.value,r)}else if("first-selected"===a){var l=n.selectedElements[0],d=n.selectedElements.slice(1),u=_getClientBBox7(l);this._alignElementsToBBox(d,u,t.value,r)}}}},{key:"_onRotateButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onFlipButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onOrderButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onGroupButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_alignElementsToBBox",value:function(e,t,n,a){if("separately"===a){var r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_getComputedTransform12(d),c=d.getScreenCTM(),p=c.inverse(),h=_getClientBBox7(d),b=0,x=0,m=1,g=1,v=0,y=0;if("move-left-inside"===n)b=t.x-h.x;else if("move-left-outside"===n)b=t.x-h.x-h.width;else if("move-right-inside"===n)b=t.x+t.width-h.x-h.width;else if("move-right-outside"===n)b=t.x+t.width-h.x;else if("move-top-inside"===n)x=t.y-h.y;else if("move-top-outside"===n)x=t.y-h.y-h.height;else if("move-bottom-inside"===n)x=t.y+t.height-h.y-h.height;else if("move-bottom-outside"===n)x=t.y+t.height-h.y;else if("center"===n)b=t.x-h.x+t.width/2-h.width/2,x=t.y-h.y+t.height/2-h.height/2;else if("horizontal-center"===n)b=t.x-h.x+t.width/2-h.width/2;else if("vertical-center"===n)x=t.y-h.y+t.height/2-h.height/2;else if("stretch"===n)m=t.width/h.width,g=t.height/h.height,b=t.x-h.x*m,x=t.y-h.y*g;else if("horizontal-stretch"===n)m=t.width/h.width,b=t.x-h.x*m;else if("vertical-stretch"===n)g=t.height/h.height,x=t.y-h.y*g;else if("fit"===n){var f=min(t.width/h.width,t.height/h.height);m=f,g=f,b=t.x-h.x+t.width/2-h.width/2,x=t.y-h.y+t.height/2-h.height/2,v=h.x+h.width/2,y=h.y+h.height/2}else"horizontal-fit"===n?(m=t.width/h.width,g=m,b=t.x-h.x,v=h.x,y=h.y):"vertical-fit"===n&&(g=t.height/h.height,m=g,x=t.y-h.y,v=h.x,y=h.y);var _=u.multiply(p);_.translateSelf(b,x),_.scaleNonUniformSelf(m,g,v,y),_.multiplySelf(c),d.setAttribute("transform",_.toString()),_reduceTransform8(d,{geometryPrecision:this._ownerEditor.canvas.geometryPrecision,transformPrecision:this._ownerEditor.canvas.transformPrecision})}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}else if("together"===a){var w=e.map(function(e){return _getClientBBox7(e)}),k=_combineRects9(w),A=0,C=0,S=1,E=1,T=0,P=0;if("move-left-inside"===n)A=t.x-k.x;else if("move-left-outside"===n)A=t.x-k.x-k.width;else if("move-right-inside"===n)A=t.x+t.width-k.x-k.width;else if("move-right-outside"===n)A=t.x+t.width-k.x;else if("move-top-inside"===n)C=t.y-k.y;else if("move-top-outside"===n)C=t.y-k.y-k.height;else if("move-bottom-inside"===n)C=t.y+t.height-k.y-k.height;else if("move-bottom-outside"===n)C=t.y+t.height-k.y;else if("center"===n)A=t.x-k.x+t.width/2-k.width/2,C=t.y-k.y+t.height/2-k.height/2;else if("horizontal-center"===n)A=t.x-k.x+t.width/2-k.width/2;else if("vertical-center"===n)C=t.y-k.y+t.height/2-k.height/2;else if("stretch"===n)S=t.width/k.width,E=t.height/k.height,A=t.x-k.x*S,C=t.y-k.y*E;else if("horizontal-stretch"===n)S=t.width/k.width,A=t.x-k.x*S;else if("vertical-stretch"===n)E=t.height/k.height,C=t.y-k.y*E;else if("fit"===n){var L=min(t.width/k.width,t.height/k.height);S=L,E=L,A=t.x-k.x+t.width/2-k.width/2,C=t.y-k.y+t.height/2-k.height/2,T=k.x+k.width/2,P=k.y+k.height/2}else"horizontal-fit"===n?(S=t.width/k.width,E=S,A=t.x-k.x,T=k.x,P=k.y):"vertical-fit"===n&&(E=t.height/k.height,S=E,C=t.y-k.y,T=k.x,P=k.y);var D=!0,M=!1,N;try{for(var I=e[Symbol.iterator](),R;!(D=(R=I.next()).done);D=!0){var V=R.value,z=_getComputedTransform12(V),G=V.getScreenCTM(),B=G.inverse(),O=z.multiply(B);O.translateSelf(A,C),O.scaleNonUniformSelf(S,E,T,P),O.multiplySelf(G),V.setAttribute("transform",O.toString()),_reduceTransform8(V,{geometryPrecision:this._ownerEditor.canvas.geometryPrecision,transformPrecision:this._ownerEditor.canvas.transformPrecision})}}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas;if(this["#panel-heading"].disabled=0===e.selectedElements.length,0===e.selectedElements.length){this["#align-section-heading"].disabled=!0,this["#align-to-view-box-button"].disabled=!0,this["#align-to-first-selected-button"].disabled=!0,this["#align-together-button"].disabled=!0,this["#align-separately-button"].disabled=!0;var t=!0,n=!1,a;try{for(var r=this["#align-buttons"].querySelectorAll("x-button")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.disabled=!0}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}else{this["#align-section-heading"].disabled=!1,this["#align-to-view-box-button"].disabled=!1,this["#align-to-first-selected-button"].disabled=!1,this["#align-together-button"].disabled=!1,this["#align-separately-button"].disabled=!1;var s=!0,l=!1,d;try{for(var u=this["#align-buttons"].querySelectorAll("x-button")[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p.disabled=!1}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}0===e.selectedElements.length?(this["#rotate-box-heading"].disabled=!0,this["#flip-box-heading"].disabled=!0,this["#rotate-counterclockwise-button"].disabled=!0,this["#rotate-clockwise-button"].disabled=!0,this["#flip-horizontally-button"].disabled=!0,this["#flip-vertically-button"].disabled=!0):(this["#rotate-box-heading"].disabled=!1,this["#flip-box-heading"].disabled=!1,this["#rotate-counterclockwise-button"].disabled=!1,this["#rotate-clockwise-button"].disabled=!1,this["#flip-horizontally-button"].disabled=!1,this["#flip-vertically-button"].disabled=!1),this["#raise-button"].disabled=!this._ownerApp.isCommandEnabled("raise"),this["#lower-button"].disabled=!this._ownerApp.isCommandEnabled("lower"),this["#front-button"].disabled=!this._ownerApp.isCommandEnabled("raiseToFront"),this["#back-button"].disabled=!this._ownerApp.isCommandEnabled("lowerToBack"),this["#order-section-heading"].disabled=this["#raise-button"].disabled&&this["#lower-button"].disabled,this["#group-button"].disabled=!this._ownerApp.isCommandEnabled("group"),this["#ungroup-button"].disabled=!this._ownerApp.isCommandEnabled("ungroup"),this["#group-section-heading"].disabled=this["#group-button"].disabled&&this["#ungroup-button"].disabled}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-arrangementpanel",BXArrangementPanelElement)}}{{var _BoxySVG$utils$elemen24=BoxySVG.utils.element,_html19=_BoxySVG$utils$elemen24.html,_closest25=_BoxySVG$utils$elemen24.closest,_throttle13=BoxySVG.utils.time.throttle,_shadowTemplate16=_html19(_templateObject35,window.theme,window.theme),BXPathPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle13(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate16.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#open-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("openPath")}),e["#close-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("closePath")}),e["#reverse-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("reversePath")}),e["#object-to-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("objectToPath")}),e["#stroke-to-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("strokeToPath")}),e["#boolop-buttons"].addEventListener("click",function(t){return e._onBoolopButtonsClick(t)}),e["#join-button"].addEventListener("click",function(){return e._ownerApp.execCommand("join")}),e["#split-button"].addEventListener("click",function(){return e._ownerApp.execCommand("split")}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest25(this,"bx-editor"),this._ownerApp=_closest25(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onBoolopButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_update",value:async function(){{var e=this._ownerApp.isCommandEnabled("openPath"),t=this._ownerApp.isCommandEnabled("closePath"),n=this._ownerApp.isCommandEnabled("reversePath"),a=await this._ownerEditor.commands.objectToPath.enabled(),r=await this._ownerEditor.commands.strokeToPath.enabled();this["#open-path-button"].disabled=!e,this["#close-path-button"].disabled=!t,this["#reverse-path-button"].disabled=!n,this["#object-to-path-button"].disabled=!a,this["#stroke-to-path-button"].disabled=!r,this["#general-section-heading"].disabled=!(e||t||n)}{var i=this._ownerApp.isCommandEnabled("unite"),o=this._ownerApp.isCommandEnabled("subtract"),s=this._ownerApp.isCommandEnabled("intersect"),l=this._ownerApp.isCommandEnabled("exclude");this["#unite-button"].disabled=!i,this["#subtract-button"].disabled=!o,this["#intersect-button"].disabled=!s,this["#exclude-button"].disabled=!l,this["#boolops-section-heading"].disabled=!(i||o||s||l)}{var d=this._ownerApp.isCommandEnabled("join"),u=this._ownerApp.isCommandEnabled("split");this["#join-button"].disabled=!d,this["#split-button"].disabled=!u,this["#compound-path-heading"].disabled=!(d||u)}this["#panel-heading"].disabled=this["#boolops-section-heading"].disabled&&this["#compound-path-heading"].disabled&&this["#general-section-heading"].disabled}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-pathpanel",BXPathPanelElement)}}{{var _BoxySVG$utils$elemen25=BoxySVG.utils.element,_html20=_BoxySVG$utils$elemen25.html,_closest26=_BoxySVG$utils$elemen25.closest,_throttle14=BoxySVG.utils.time.throttle,_shadowTemplate17=_html20(_templateObject36,window.theme,window.theme),BXDefsPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate17.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(){return e._toggleList(e["#buttons"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest26(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:async function(){var e=await this._ownerApp.getConfig("bx-defspanel:currentListID");this._toggleList(e||"symbols-list")}},{key:"_onDisabled",value:function(){this._toggleList(null)}},{key:"_toggleList",value:function(e){this["#buttons"].value=e;var t=!0,n=!1,a;try{for(var r=this["#lists"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.enabled=null!==e&&o.id===e}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}null!==e&&this._ownerApp.setConfig("bx-defspanel:currentListID",e)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-defspanel",BXDefsPanelElement)}}{{var _importArtwork3=BoxySVG.utils.artworkImport.importArtwork,_BoxySVG$utils$elemen26=BoxySVG.utils.element,_html21=_BoxySVG$utils$elemen26.html,_closest27=_BoxySVG$utils$elemen26.closest,_isPointerMoveIntentional5=BoxySVG.utils.event.isPointerMoveIntentional,_round23=BoxySVG.utils.math.round,_BoxySVG$utils$time8=BoxySVG.utils.time,_debounce9=_BoxySVG$utils$time8.debounce,_sleep8=_BoxySVG$utils$time8.sleep,_Shortcut8=BoxySVG.classes.Shortcut,_abs9=Math.abs,$desc=Symbol(),_shadowTemplate18=_html21(_templateObject37,window.theme,window.theme),BXLibraryPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._currentPage=1,e._isLoadingNextPage=!1,e._firstTimeEnabled=!1,e._hasMorePages=!0,e._updateForSearchQueryChangeDb1000=_debounce9(e._updateForSearchQueryChange,1e3,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate18.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#search-input"].addEventListener("input",function(){return e._onSearchInputInput()}),e["#items"].addEventListener("keydown",function(t){return e._onItemsKeyDown(t)}),e["#items"].addEventListener("scroll",function(){return e._onItemsScroll()}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("pointerover",function(t){if(t.target.matches(".item")){var n=t.target;if(!1===n.contains(e["#buttons"])){n.append(e["#buttons"]);var a=n[$desc],r=a.detail_link.substring(0,a.detail_link.lastIndexOf("/"));e["#info-title-value"].textContent=a.title,e["#info-description-value"].textContent=a.description,e["#info-url-value"].innerHTML="<a href=\""+r+"\">"+r+"</a>",e["#info-date-value"].textContent=a.created,e["#info-downloads-value"].textContent=a.downloaded_by,e["#info-uploader-value"].innerHTML="\n              <a href=\"https://openclipart.org/user-detail/"+a.uploader+"\">"+a.uploader+"</a>\n            "}}}),e["#info-popover"].addEventListener("open",function(){var t=e["#info-popover"].closest(".item");t.setAttribute("data-expanded","")}),e["#info-popover"].addEventListener("close",async function(){var t=e["#info-popover"].closest(".item");t.focus(),t.removeAttribute("data-expanded")}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest27(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest27(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;window.addEventListener("resize",this._windowResizeListener=function(){e._updateForWindowSizeChange()}),window.addEventListener("online",this._onlineListener=function(){!1===e["#placeholder"].hidden&&e._updateForSearchQueryChange()}),!1===this._firstTimeEnabled&&(this._firstTimeEnabled=!0,this["#throbber"].hidden=!1,_sleep8(300).then(function(){return e._updateForSearchQueryChange()}))}},{key:"_onDisabled",value:function(){window.removeEventListener("resize",this._windowResizeListener),window.removeEventListener("online",this._onlineListener)}},{key:"_onSearchInputInput",value:function(){this["#placeholder"].hidden=!0,this["#throbber"].hidden=!1,this["#items"].innerHTML="",this._updateForSearchQueryChangeDb1000()}},{key:"_onItemsScroll",value:function(){this._updateForScrollChange()}},{key:"_onItemsPointerDown",value:function(e){var t=this;if(e.target.matches(".item")){var n=e.target,a,r;this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",a=function(i){_isPointerMoveIntentional5(e,i)&&(t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",r),t._onItemDragStart(n,e))}),this.addEventListener("pointerup",r=async function(){t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",r)})}}},{key:"_onItemDragStart",value:function(e,t){var n=this,a=this._ownerEditor.canvas,r=e.querySelector("img"),i=r.getBoundingClientRect(),o=[],s=new Promise(function(e){return o.push(e)}),l,d;e.style.cursor="copy",e.setPointerCapture(t.pointerId),async function(){var t=null;try{var n=e[$desc].svg.url,a=await fetch(n);t=await a.text()}catch(e){console.log(e)}var r=!0,i=!1,s;try{for(var l=o[Symbol.iterator](),d,u;!(r=(d=l.next()).done);r=!0)u=d.value,u(t)}catch(e){i=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}}();var u=r.cloneNode(!0);u.setAttribute("id","ghost"),u.style.position="fixed",u.style.left=i.left+"px",u.style.top=i.top+"px",u.style.width=i.width+"px",u.style.height=i.height+"px",u.style.zIndex="999999999",u.style.pointerEvents="none",document.body.append(u),window.addEventListener("pointermove",l=function(e){var n=e.clientX-t.clientX,a=e.clientY-t.clientY,r=1;0>n&&(300<_abs9(n)?r=2:r=(300+_abs9(n))/300),u.style.top=i.y+a+"px",u.style.left=i.x+n+"px",u.style.transform="scale("+r+")"}),window.addEventListener("pointerup",d=async function(t){if(window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d),e.style.cursor=null,a.isPointOverCanvas(t.clientX,t.clientY)){var r=u.getBoundingClientRect();u.remove();var i=await s,o=_importArtwork3(i);if(null===o&&(await _sleep8(100),n._ownerApp.showMessageDialog({message:"Import failed",detail:"Can't connect to the Open Clip Art Library server. The server is down or you have no internet connection. Please try again later.",buttons:["Close"]})),o){a.undoManager.checkpoint("Import from library");var c=a.insertArtworkIntoBBox(o,r);a.selectedElements=[c],a.selectedTextRange=null}}else if(n._ownerApp.isPointOverHeader(t.clientX,t.clientY)){u.remove();var p=await s;await _sleep8(100),n._ownerApp.openEditorTabWithArtworkFromOpenClipArtLibrary(p)}else u.remove()})}},{key:"_onItemsKeyDown",value:function(e){if(!this["#info-popover"].opened){var t=_Shortcut8.fromEvent(e),n=this["#items"].querySelector(".item:focus"),a=n.getBoundingClientRect();if(t.matches("ArrowRight"))n.nextElementSibling&&a.top===n.nextElementSibling.getBoundingClientRect().top&&(e.stopPropagation(),e.preventDefault(),n.nextElementSibling.focus());else if(t.matches("ArrowLeft"))n.previousElementSibling&&a.top===n.previousElementSibling.getBoundingClientRect().top&&(e.stopPropagation(),e.preventDefault(),n.previousElementSibling.focus());else if(t.matches("ArrowDown")){for(var r=n.nextElementSibling;r;r=r.nextElementSibling)if(a.left===r.getBoundingClientRect().left){e.stopPropagation(),e.preventDefault(),r.focus();break}}else if(t.matches("ArrowUp"))for(var i=n.previousElementSibling;i;i=i.previousElementSibling)if(a.left===i.getBoundingClientRect().left){e.stopPropagation(),e.preventDefault(),i.focus();break}}}},{key:"_createItem",value:function(e){var t=e.svg.png_thumb,n=e.dimensions.png_thumb,a=n.width,r=n.height;if(70<a){var i=a/r;a=70,r=a/i}if(70<r){var o=a/r;r=70,a=r*o}var s=_html21(_templateObject38,a,r);return s[$desc]=e,fetch(e.svg.png_thumb).then(async function(e){var t=await e.blob(),n=new FileReader;n.readAsDataURL(t),n.addEventListener("loadend",function(){var e=n.result;s.querySelector("img").setAttribute("src",e)},{once:!0})}),s}},{key:"_updateForSearchQueryChange",value:async function(){var e;try{var t=this["#search-input"].value,n=_round23(3*(this["#items"].clientHeight/84),0);e=await fetch("https://openclipart.org/search/json/?query="+t+"&amount="+n+"&sort=downloads"),e=await e.json()}catch(t){e=null}if(!e)this["#placeholder"].innerHTML="Can't connect to <strong>Open Clip Art Library</strong>.",this["#placeholder"].hidden=!1;else if(this._currentPage=1,this._hasMorePages=!0,0===e.payload.length)this["#placeholder"].textContent="No results found",this["#placeholder"].hidden=!1;else{this["#placeholder"].textContent="",this["#placeholder"].hidden=!0;var a=!0,r=!1,i;try{for(var o=e.payload[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=this._createItem(l);this["#items"].append(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}this["#throbber"].hidden=!0}},{key:"_updateForScrollChange",value:async function(){var e=this["#items"],t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;if(t+a>=n-500&&!1===this._isLoadingNextPage&&this._hasMorePages){this._isLoadingNextPage=!0;var r=this["#search-input"].value,i=this._currentPage+1,o=await fetch("https://openclipart.org/search/json/?query="+r+"&amount=10&page="+i+"&sort=downloads");if(o=await o.json(),0<o.payload.length){this._currentPage+=1;var s=!0,l=!1,d;try{for(var u=o.payload[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=this._createItem(p);this["#items"].append(h)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}else this._hasMorePages=!1;this._isLoadingNextPage=!1}}},{key:"_updateForWindowSizeChange",value:async function(){if(!1===this._isLoadingNextPage&&!0===this._hasMorePages&&this["#items"].clientHeight===this["#items"].scrollHeight){this._isLoadingNextPage=!0;var e=this["#search-input"].value,t=this._currentPage+1,n=await fetch("https://openclipart.org/search/json/?query="+e+"&amount=10&page="+t+"&sort=downloads");if(n=await n.json(),0<n.payload.length){this._currentPage+=1;var a=!0,r=!1,i;try{for(var o=n.payload[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=this._createItem(l);this["#items"].append(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}else this._hasMorePages=!1;this._isLoadingNextPage=!1}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-librarypanel",BXLibraryPanelElement)}}{{var _exportArtwork3=BoxySVG.utils.artworkExport.exportArtwork,_rasterizeArtwork2=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_getUserBBox8=BoxySVG.utils.bbox.getUserBBox,_parseColor7=BoxySVG.utils.color.parseColor,_parseViewBox9=BoxySVG.utils.parsing.parseViewBox,_BoxySVG$utils$elemen27=BoxySVG.utils.element,_html22=_BoxySVG$utils$elemen27.html,_closest28=_BoxySVG$utils$elemen27.closest,_BoxySVG$utils$math4=BoxySVG.utils.math,_normalize5=_BoxySVG$utils$math4.normalize,_round24=_BoxySVG$utils$math4.round,_BoxySVG$utils$geomet12=BoxySVG.utils.geometry,_combineRects10=_BoxySVG$utils$geomet12.combineRects,_transformRect10=_BoxySVG$utils$geomet12.transformRect,_getTransformToElement10=BoxySVG.utils.transformGeneral.getTransformToElement,_BoxySVG$utils$time9=BoxySVG.utils.time,_sleep9=_BoxySVG$utils$time9.sleep,_throttle15=_BoxySVG$utils$time9.throttle,_shadowTemplate19=_html22(_templateObject39,window.theme,window.theme),BXExportPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle15(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate19.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#format-select"].addEventListener("change",function(){return e._update()}),e["#export-button"].addEventListener("click",function(){return e._onExportButtonClick()}),e["#bitmap-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#bitmap-lock-button"].addEventListener("toggle",function(t){return e._onLockButtonToggle(t)}),e["#bitmap-width-input"].addEventListener("changestart",function(t){return e._onWidthInputChangeStart(t)}),e["#bitmap-height-input"].addEventListener("changestart",function(t){return e._onHeightInputChangeStart(t)}),e["#bitmap-compression-input"].addEventListener("change",function(){return e._onBitmapCompressionInputChange()}),e["#bitmap-compression-slider"].addEventListener("change",function(){return e._onBitmapCompressionSliderChange()}),e["#vector-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#pdf-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#pdf-lock-button"].addEventListener("toggle",function(t){return e._onLockButtonToggle(t)}),e["#pdf-width-input"].addEventListener("changestart",function(t){return e._onWidthInputChangeStart(t)}),e["#pdf-height-input"].addEventListener("changestart",function(t){return e._onHeightInputChangeStart(t)}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest28(this,"bx-editor"),this._ownerApp=_closest28(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this["#pdf-menu-item"].hidden=!1===this._ownerApp.matches("bx-electronapp")}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._onArtboardMutation()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update()}},{key:"_onArtboardMutation",value:function(){this._update()}},{key:"_onLockButtonToggle",value:function(e){var t=e.target.closest("x-button"),n=t.querySelector("x-icon");n.name=t.toggled?"lock":"lock-open"}},{key:"_onWidthInputChangeStart",value:function(e){var t=e.target.closest(".size-box"),n=t.querySelector(".width-input"),a=t.querySelector(".height-input"),r=t.querySelector(".lock-button");if(r.toggled){var i=n.value/a.value,o,s;n.addEventListener("change",o=function(){var e=n.value/i;a.value=_normalize5(e,1,Infinity,0)}),n.addEventListener("changeend",s=function(){n.removeEventListener("change",o),n.removeEventListener("changeend",s)})}}},{key:"_onHeightInputChangeStart",value:function(e){var t=e.target.closest(".size-box"),n=t.querySelector(".width-input"),a=t.querySelector(".height-input"),r=t.querySelector(".lock-button");if(r.toggled){var i=n.value/a.value,o,s;a.addEventListener("change",o=function(){var e=i*a.value;n.value=_normalize5(e,1,Infinity,0)}),a.addEventListener("changeend",s=function(){a.removeEventListener("change",o),a.removeEventListener("changeend",s)})}}},{key:"_onBitmapCompressionInputChange",value:function(){this["#bitmap-compression-slider"].value=this["#bitmap-compression-input"].value}},{key:"_onBitmapCompressionSliderChange",value:function(){this["#bitmap-compression-input"].value=this["#bitmap-compression-slider"].value}},{key:"_onExportButtonClick",value:async function(){var e=this["#format-select"].value;if("png"===e||"jpeg"===e||"webp"===e){var t=this["#bitmap-area-buttons"].value,n;n="view-box"===t?this._ownerEditor.canvas.extractArtworkWithViewBoxElements():this._ownerEditor.canvas.extractArtworkWithSelectedElements(),n.setAttribute("width",this["#bitmap-width-input"].value+"px"),n.setAttribute("height",this["#bitmap-height-input"].value+"px"),n.setAttribute("preserveAspectRatio","none");var a=this["#bitmap-background-color-select"].value,r=this["#bitmap-compression-slider"].value,i=_exportArtwork3(n,"html"),o=await _rasterizeArtwork2(i,e,r,a);await _sleep9(100),this._ownerApp.showBitmapExportDialog(o,e)}else if("svg"===e||"svgz"===e||"html"===e){var s=this["#vector-area-buttons"].value,l="html"===e?"html":"xml",d;"view-box"===s?d=this._ownerEditor.canvas.extractArtworkWithViewBoxElements():"selection"===s&&(this._ownerEditor.canvas.removeUnusedDefs(),d=this._ownerEditor.canvas.extractArtworkWithSelectedElements());var u=_exportArtwork3(d,l);await _sleep9(100),this._ownerApp.showArtworkExportDialog(u,e)}else if("pdf"===e){var c=this["#pdf-area-buttons"].value,p=this["#pdf-width-input"].value,h=this["#pdf-height-input"].value,b=this["#pdf-background-color-select"].value,x;x="view-box"===c?this._ownerEditor.canvas.extractArtworkWithViewBoxElements():this._ownerEditor.canvas.extractArtworkWithSelectedElements(),x.setAttribute("width",p+"cm"),x.setAttribute("height",h+"cm"),x.setAttribute("preserveAspectRatio","none"),x.style.background=b,x.insertAdjacentHTML("beforeEnd","<style>@page { size: "+p+"cm "+h+"cm; }</style>");var m=_exportArtwork3(x);await _sleep9(100),this._ownerApp.showPDFExportDialog(m)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=this["#format-select"].value;if("png"===t||"jpeg"===t||"webp"===t){this["#bitmap-options-box"].hidden=!1,this["#vector-options-box"].hidden=!0,this["#pdf-options-box"].hidden=!0;var n=this["#bitmap-area-buttons"].value;if(this["#bitmap-compression-box"].hidden="png"===t,"jpeg"===t){var i=_parseColor7(this["#bitmap-background-color-select"].value,"rgba"),o=_slicedToArray(i,4),s=o[0],r=o[1],l=o[2],d=o[3];this["#bitmap-background-color-select"].value="rgb("+s+", "+r+", "+l+")",this["#bitmap-background-color-picker"].removeAttribute("alphaslider")}else this["#bitmap-background-color-picker"].setAttribute("alphaslider","");if("view-box"===n&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===n&&0===e.selectedElements.length)this["#bitmap-width-heading"].disabled=!0,this["#bitmap-width-input"].disabled=!0,this["#bitmap-width-input"].value=0,this["#bitmap-lock-button"].disabled=!0,this["#bitmap-height-heading"].disabled=!0,this["#bitmap-height-input"].disabled=!0,this["#bitmap-height-input"].value=0,this["#bitmap-compression-heading"].disabled=!0,this["#bitmap-compression-slider"].disabled=!0,this["#bitmap-compression-input"].disabled=!0,this["#bitmap-background-heading"].disabled=!0,this["#bitmap-background-color-select"].disabled=!0,this["#export-button"].disabled=!0;else{if("view-box"===n){var a=e.currentArtboard.getAttribute("viewBox"),u=_parseViewBox9(a),c=u.x,p=u.y,h=u.width,b=u.height;this["#bitmap-width-heading"].disabled=!1,this["#bitmap-width-input"].disabled=!1,this["#bitmap-width-input"].value=h,this["#bitmap-lock-button"].disabled=!1,this["#bitmap-height-heading"].disabled=!1,this["#bitmap-height-input"].disabled=!1,this["#bitmap-height-input"].value=b,this["#bitmap-compression-heading"].disabled=!1,this["#bitmap-compression-slider"].disabled=!1,this["#bitmap-compression-input"].disabled=!1,this["#bitmap-background-heading"].disabled=!1,this["#bitmap-background-color-select"].disabled=!1}else if("selection"===n){var x=e.selectedElements.map(function(t){var n=_getTransformToElement10(t,e.currentArtboard),a=_getUserBBox8(t),r=_transformRect10(a,n);return r}),m=_combineRects10(x);this["#bitmap-width-heading"].disabled=!1,this["#bitmap-width-input"].disabled=!1,this["#bitmap-width-input"].value=_round24(m.width,0),this["#bitmap-lock-button"].disabled=!1,this["#bitmap-height-heading"].disabled=!1,this["#bitmap-height-input"].disabled=!1,this["#bitmap-height-input"].value=_round24(m.height,0),this["#bitmap-compression-heading"].disabled=!1,this["#bitmap-compression-slider"].disabled=!1,this["#bitmap-compression-input"].disabled=!1,this["#bitmap-background-heading"].disabled=!1,this["#bitmap-background-color-select"].disabled=!1}this["#export-button"].disabled=!1}}else if("svg"===t||"svgz"===t||"html"===t){this["#bitmap-options-box"].hidden=!0,this["#vector-options-box"].hidden=!1,this["#pdf-options-box"].hidden=!0;var g=this["#vector-area-buttons"].value;this["#export-button"].disabled="view-box"===g&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===g&&0===e.selectedElements.length}else if("pdf"===t){this["#bitmap-options-box"].hidden=!0,this["#vector-options-box"].hidden=!0,this["#pdf-options-box"].hidden=!1;var v=this["#pdf-area-buttons"].value;if("view-box"===v&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===v&&0===e.selectedElements.length)this["#pdf-width-heading"].disabled=!0,this["#pdf-width-input"].disabled=!0,this["#pdf-width-input"].value=0,this["#pdf-lock-button"].disabled=!0,this["#pdf-height-heading"].disabled=!0,this["#pdf-height-input"].disabled=!0,this["#pdf-height-input"].value=0,this["#pdf-background-heading"].disabled=!0,this["#pdf-background-color-select"].disabled=!0,this["#export-button"].disabled=!0;else{if("view-box"===v){var y=e.currentArtboard.getAttribute("viewBox"),f=_parseViewBox9(y),_=f.width,w=f.height;_=_round24(_/37.7953,3),w=_round24(w/37.7953,3),this["#pdf-width-heading"].disabled=!1,this["#pdf-width-input"].disabled=!1,this["#pdf-width-input"].value=_,this["#pdf-lock-button"].disabled=!1,this["#pdf-height-heading"].disabled=!1,this["#pdf-height-input"].disabled=!1,this["#pdf-height-input"].value=w,this["#pdf-background-heading"].disabled=!1,this["#pdf-background-color-select"].disabled=!1}else if("selection"===v){var k=e.selectedElements.map(function(t){var n=_getTransformToElement10(t,e.currentArtboard),a=_getUserBBox8(t),r=_transformRect10(a,n);return r}),A=_combineRects10(k),C=A.width,S=A.height;C=_round24(C/37.7953,3),S=_round24(S/37.7953,3),this["#pdf-width-heading"].disabled=!1,this["#pdf-width-input"].disabled=!1,this["#pdf-width-input"].value=C,this["#pdf-lock-button"].disabled=!1,this["#pdf-height-heading"].disabled=!1,this["#pdf-height-input"].disabled=!1,this["#pdf-height-input"].value=S,this["#pdf-background-heading"].disabled=!1,this["#pdf-background-color-select"].disabled=!1}this["#export-button"].disabled=!1}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-exportpanel",BXExportPanelElement)}}{{var _BoxySVG$utils$elemen28=BoxySVG.utils.element,_html23=_BoxySVG$utils$elemen28.html,_closest29=_BoxySVG$utils$elemen28.closest,_throttle16=BoxySVG.utils.time.throttle,_shadowTemplate20=_html23(_templateObject40,window.theme,window.theme),BXInspectorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._updateTh500=_throttle16(e._update,500,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate20.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerApp=_closest29(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest29(this,"bx-editor"),this._ownerEditor.panelsDock.addEventListener("expand",function(){return e._updateWidth()}),this._ownerEditor.panelsDock.addEventListener("collapse",function(){return e._updateWidth()})}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){this._ownerApp.updateMenuItemsCheckedState(),this["#dom-editor"].enabled=!0}},{key:"_onDisabled",value:function(){this._ownerApp.updateMenuItemsCheckedState(),this["#dom-editor"].enabled=!1}},{key:"_update",value:function(){}},{key:"_updateWidth",value:function(){this.style.width=null===this._ownerEditor.panelsDock.value?null:"calc(100% - 357px)"}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-inspector",BXInspectorElement)}}{var _splitAttributeText=BoxySVG.utils.attribute.splitAttributeText,_BoxySVG$utils$elemen29=BoxySVG.utils.element,_closest30=_BoxySVG$utils$elemen29.closest,_createElement24=_BoxySVG$utils$elemen29.createElement,_sortByDomPosition7=_BoxySVG$utils$elemen29.sortByDomPosition,_html24=BoxySVG.utils.element.html,_isDOMWhitespace=BoxySVG.utils.node.isDOMWhitespace,_sleep10=BoxySVG.utils.time.sleep,_BoxySVG$utils$variab10=BoxySVG.utils.variables,_namespaces6=_BoxySVG$utils$variab10.namespaces,_contentSchemas2=_BoxySVG$utils$variab10.contentSchemas,_floor3=Math.floor,ceil=Math.ceil,_isNaN3=Number.isNaN,_Shortcut9=BoxySVG.classes.Shortcut,$target=Symbol(),_shadowTemplate21=_html24(_templateObject41,window.theme),textItemHTML="<div class=\"item\" data-type=\"text\"><span class=\"content\" spellcheck=\"false\"></span></div>",elementItemHTML="<div class=\"item\" data-type=\"element\" draggable=\"true\"><svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"9px\" height=\"10px\"><path d=\"M 0 0 L 100 50 L 0 100 Z\"></path></svg><div class=\"tag\"><span class=\"opening-bracket\">&lt</span><span class=\"tag-name\" spellcheck=\"false\">svg</span><span class=\"attributes\"></span><span class=\"closing-bracket\">&gt</span></div><div class=\"subtree\"></div></div>",elementItemAttributeHTML="<span class=\"attribute\" spellcheck=\"false\"><span class=\"name\"></span>=\"<span class=\"value\"></span><span class=\"ellipsis\" hidden>...</span>\"</span>",BXDOMEditorElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.commands={selectAll:{exec:function(){return n._selectAll()}},deselectAll:{enabled:function(){return!0},exec:function(){return n._deselectAll()}}},n.tabIndex=1,n._selectedNodes=[],n._cachedMutations=[],n._lastEditedAttributeSpan=null,n._contextMenuTarget=null,n._skipUpcomingSelectedCanvasElementsChange=!1,n._onArtboardMutationIdleCallback=n._onArtboardMutationIdleCallback.bind(n),n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.append(document.importNode(_shadowTemplate21.content,!0));var e=!0,a=!1,r;try{for(var i=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}return n.addEventListener("keydown",function(e){return n._onKeyDown(e)}),n["#tree"].addEventListener("dragstart",function(e){return n._onItemDragStart(e)}),n["#add-attribute-menu-item"].addEventListener("click",function(t){return n._onAddAttributeContextMenuItemClick(t)}),n._shadowRoot.addEventListener("pointerdown",function(e){return n._onShadowRootPointerDown(e)}),n._shadowRoot.addEventListener("click",function(e){return n._onShadowRootClick(e)}),n._shadowRoot.addEventListener("dblclick",function(e){return n._onShadowRootDblClick(e)}),n._shadowRoot.addEventListener("contextmenu",function(e){return n._onContextMenu(e)}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest30(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest30(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onAddAttributeContextMenuItemClick",value:async function(e){var t=e.target.closest("x-menuitem");await t.whenTriggerEnd,await _sleep10(500),this._editNewAttribute(this._contextMenuTarget)}},{key:"_onEnabled",value:function(){var e=this;this._updateTree();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedCanvasElementsChange()}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._updateTree()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){this._cachedMutations=[],this["#tree"].innerHTML="";var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=this,n=!0,a=!1,r;try{for(var i=function(){var e=s.value;if("attributes"===e.type){var n=t._cachedMutations.find(function(t){return"attributes"===t.type&&t.target===e.target&&t.attributeName===e.attributeName});n||t._cachedMutations.push(e)}else if("characterData"===e.type){var a=t._cachedMutations.find(function(t){return"characterData"===t.type&&t.target===e.target});a||t._cachedMutations.push(e)}else"childList"===e.type&&t._cachedMutations.push(e)},o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=!0)i()}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}requestIdleCallback(this._onArtboardMutationIdleCallback)}},{key:"_onArtboardMutationIdleCallback",value:function(e){for(var t=this,n=function(){var e=t._cachedMutations.shift(),n=[].concat(_toConsumableArray(t["#tree"].querySelectorAll(".item"))).find(function(t){return t[$target]===e.target});n&&("childList"===e.type?(t._updateElementItemIcon(n),t._updateElementItemSubtree(n,e)):"attributes"===e.type?t._updateElementItemAttribute(n,e.attributeName,!0):"characterData"===e.type&&t._updateTextItemCharacterData(n))};10<e.timeRemaining()&&0<this._cachedMutations.length;)n();0<this._cachedMutations.length&&requestIdleCallback(this._onArtboardMutationIdleCallback)}},{key:"_onSelectedNodesChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#tree"].querySelectorAll(".item:not([hidden])")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this.selectedNodes.includes(i[$target])?i.setAttribute("data-selected",""):i.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onSelectedCanvasElementsChange",value:function(){var e=this;if(!0===this._skipUpcomingSelectedCanvasElementsChange)return void(this._skipUpcomingSelectedCanvasElementsChange=!1);var t=this._ownerEditor.canvas;if(0===t.selectedElements.length)this.selectedNodes=t.currentContainer?[]:[t.currentArtboard];else{var n=!0,a=!1,r;try{for(var o=t.selectedElements[Symbol.iterator](),s;!(n=(s=o.next()).done);n=!0){for(var l=s.value,d=[],u=l.parentElement;u!==t.artboards;u=u.parentElement)("g"===u.localName||"a"===u.localName)&&d.push(u);for(var c=this["#tree"];0<d.length;){var p=d.pop(),h=!0,b=!1,x=void 0;try{for(var m=c.children[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,v[$target]===p){this._expandItem(v),c=v.querySelector(".subtree");break}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this.selectedNodes=[].concat(_toConsumableArray(t.selectedElements))}if(0<this.selectedNodes.length)for(var y=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),f=function(t){var n=e.selectedNodes[t],a=y.find(function(e){return e[$target]===n});if(a)return e._scrollItemIntoView(a),"break"},_=this.selectedNodes.length-1,i;0<=_&&(i=f(_),"break"!==i);_-=1);}},{key:"_onShadowRootPointerDown",value:function(e){if(!1===e.target.matches(".icon")&&!1===e.target.matches(".ellipsis")&&!1===e.target.matches("x-contextmenu *")&&e.target!==this["#main"]){var t=e.target.matches("#tree, #tree .subtree")?this._getItemForClientY(e.clientY):e.target.closest("#tree .item");{var n=t[$target],a=[].concat(_toConsumableArray(this.selectedNodes)),r=this._ownerApp.modKeys,o=r.ctrl,s=r.shift;if(!o&&!s)!1===a.includes(n)&&(a=[n]);else if(o&&!s)a=[n];else if(o&&s)a.includes(n)?a=a.filter(function(e){return e!==n}):a.push(n);else if(!o&&s)if(0===a.length)a=[n];else{var l=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),d=t,u=l.indexOf(d),c=a[a.length-1],p=l.find(function(e){return e[$target]===c}),h=l.indexOf(p);if(u<h)for(var b=function(e){var t=l[e][$target];a.includes(t)&&(a=a.filter(function(e){return e!==t})),a.push(t)},x=h-1;x>=u;x-=1)b(x);else if(u>h)for(var i=function(e){var t=l[e][$target];a.includes(t)&&(a=a.filter(function(e){return e!==t})),a.push(t)},x=h+1;x<=u;x+=1)i(x)}this.selectedNodes=a}{var m=this._ownerEditor.canvas,g=this.selectedNodes.filter(function(e){return m.isSelectableElement(e)}),v=g[0],y=null;if(v)for(var f=v.parentElement;f!==m.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){y=f;break}this._skipUpcomingSelectedCanvasElementsChange=!0,m.currentContainer=y,m.selectedElements=g}}}},{key:"_onShadowRootClick",value:function(e){if(e.target.matches(".icon")){var t=e.target.closest(".item");0===e.button&&(t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t))}else if(e.target.matches(".ellipsis")){var n=e.target.closest(".item"),a=e.target.closest(".attribute").dataset.name;this._expandAttribute(n,a)}}},{key:"_onItemDragStart",value:function(e){var t=this,n=null,a=this["#tree"].querySelector(".item"),r,i,o,s;if(!this["#tree"].querySelector("*[contenteditable]")){e.dataTransfer.setDragImage(_createElement24("span"),0,0);var l=function(e,n){var r=t._getItemForClientY(n),i=null;if(r){if(r.hasAttribute("data-expanded")){var o=r.querySelector(".tag").getBoundingClientRect();i=n<o.y+o.height/2?"beforebegin":"afterbegin"}else{for(var s=r.getBoundingClientRect(),l;null===r.nextElementSibling&&e<s.x&&(l=r.parentElement.closest(".item"),l&&l!==a);)r=l,s=r.getBoundingClientRect();i=n<s.y+s.height/2?"beforebegin":0===r[$target].childNodes.length&&e>s.x+22&&t._canMoveNodes(t.outermostSelectedNodes,r[$target],"afterbegin")?"afterbegin":"afterend"}!1===t._canMoveNodes(t.outermostSelectedNodes,r[$target],i)&&(r=null,i=null)}return[r,i]};window.addEventListener("dragover",r=function(e){if(o!==e.clientX||s!==e.clientY){var t=e.clientX,a=e.clientY,r=l(t,a),i=_slicedToArray(r,2),d=i[0],u=i[1];o=t,s=a,n&&(n.removeAttribute("data-dragover"),n=null),d&&(d.setAttribute("data-dragover",u),n=d)}}),window.addEventListener("dragend",i=function(e){window.removeEventListener("dragover",r),window.removeEventListener("dragend",i),n&&n.removeAttribute("data-dragover");var a=e.clientX,o=e.clientY,s=l(a,o),d=_slicedToArray(s,2),u=d[0],c=d[1],p=t._ownerEditor.canvas;if(u){p.undoManager.checkpoint("Move element(s)");{var h=document.createDocumentFragment(),b=!0,x=!1,m;try{for(var g=_sortByDomPosition7(t.outermostSelectedNodes)[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,h.append(y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}"beforebegin"===c?u[$target].before(h):"afterend"===c?u[$target].after(h):"afterbegin"===c&&(u[$target].prepend(h),t._expandItem(u))}{var f=t.selectedNodes.filter(function(e){return p.isSelectableElement(e)}),_=f[0],w=null;if(_)for(var k=_.parentElement;k!==p.currentArtboard;k=k.parentElement)if("g"===k.localName||"a"===k.localName){w=k;break}t._skipUpcomingSelectedCanvasElementsChange=!0,p.currentContainer=w,p.selectedTextRange=null}}})}}},{key:"_onShadowRootDblClick",value:function(e){var t=e.target.closest(".item");if(t)if("element"!==t.getAttribute("data-type"))"text"===t.getAttribute("data-type")&&e.target.matches(".content")&&this._editTextContent(t);else if(e.target.matches(".attribute, .attribute *")){var n=e.target.closest(".attribute");if(!1===n.hasAttribute("disabled")){var a=e.target.closest(".item"),r=n.dataset.name;this._editAttribute(a,r)}}else if(e.target.matches(".tag-name, .opening-bracket, .attributes:empty + .closing-bracket")&&!1===e.target.hasAttribute("disabled")){var i=e.target.closest(".item");this._editTagName(i)}}},{key:"_onContextMenu",value:function(e){if(null===e.target.closest("[contenteditable]")){var t=e.target.closest(".item");t&&(this["#add-attribute-menu-item"].disabled="element"!==t.getAttribute("data-type"),this._contextMenuTarget=t,this["#context-menu"].open(e.clientX,e.clientY))}}},{key:"_onKeyDown",value:function(e){var t=_Shortcut9.fromEvent(e);if(t.matches("Enter")){e.preventDefault(),e.stopPropagation();var n=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])");if(1===n.length){var a=n[0];"element"===a.getAttribute("data-type")?this._editFirstAttribute(a):"text"===a.getAttribute("data-type")&&this._editTextContent(a)}}else if(t.matches("Backspace"))e.stopPropagation(),this._deleteSelectedNodes();else if(t.matches("Tab")){e.preventDefault(),e.stopPropagation();var r=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])");if(0<r.length){var i=[],o=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,i=[].concat(_toConsumableArray(i),_toConsumableArray(c.querySelectorAll("\n            :scope > .tag > .tag-name:not([disabled]),\n            :scope > .tag > .attributes > .attribute:not([disabled])\n          ")))}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var p=i.find(function(e){return e.matches("[contenteditable]")}),h=p?i.indexOf(p):-1,b=i[h+1]||i[0]||null;if(b){var x=b.closest(".item");b.matches(".attribute")?this._editAttribute(x,b.getAttribute("data-name")):b.matches(".tag-name")&&this._editTagName(x)}}}else if(t.matches("Shift","Tab")){e.preventDefault(),e.stopPropagation();var m=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])");if(0<m.length){var g=[],v=!0,y=!1,f;try{for(var _=m[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,g=[].concat(_toConsumableArray(g),_toConsumableArray(k.querySelectorAll(".tag-name, .attribute")))}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=g.find(function(e){return e.matches("[contenteditable]")}),C=A?g.indexOf(A):-1,S=g[C-1]||g[g.length-1]||null;if(S){var E=S.closest(".item");S.matches(".attribute")?this._editAttribute(E,S.getAttribute("data-name")):S.matches(".tag-name")&&this._editTagName(E)}}}else t.matches("ArrowLeft")?(e.stopPropagation(),this._collapseSelectedItem()):t.matches("ArrowRight")?(e.stopPropagation(),this._expandSelectedItem()):t.matches("ArrowDown")?(e.stopPropagation(),this._selectNextItem(!1)):t.matches("ArrowUp")?(e.stopPropagation(),this._selectPreviousItem(!1)):t.matches("Shift","ArrowDown")?(e.stopPropagation(),this._selectNextItem(!0)):t.matches("Shift","ArrowUp")&&(e.stopPropagation(),this._selectPreviousItem(!0))}},{key:"_createItem",value:function(e,t){var n=null;return"element"===e?(n=_html24(_templateObject2,elementItemHTML),n[$target]=t,this._updateElementItemIcon(n),this._updateElementItemTagName(n),this._updateElementItemAttributes(n)):"text"===e&&(n=_html24(_templateObject2,textItemHTML),n[$target]=t,this._updateTextItemCharacterData(n)),n}},{key:"_expandItem",value:function(e){if(!1===e.hasAttribute("data-expanded")){var t=e.querySelector(".subtree"),n=!0,a=!1,r;try{for(var i=e[$target].childNodes[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=null;if(s.nodeType===document.ELEMENT_NODE?l="element":s.nodeType===document.TEXT_NODE&&(l="text"),l){var d=this._createItem(l,s);"text"===l&&_isDOMWhitespace(s.textContent)&&d.setAttribute("hidden",""),t.append(d),this.selectedNodes.includes(s)&&d.setAttribute("data-selected","")}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}0<t.childElementCount&&e.setAttribute("data-expanded","")}}},{key:"_collapseItem",value:function(e){e.hasAttribute("data-expanded")&&(e.querySelector(".subtree").innerHTML="",e.removeAttribute("data-expanded"),this._updateElementItemIcon(e))}},{key:"_expandSelectedItem",value:function(){var e=this["#tree"].querySelectorAll(".item[data-selected]");1===e.length&&"element"===e[0].getAttribute("data-type")&&this._expandItem(e[0])}},{key:"_collapseSelectedItem",value:function(){var e=this["#tree"].querySelectorAll(".item[data-selected]");1===e.length&&"element"===e[0].getAttribute("data-type")&&this._collapseItem(e[0])}},{key:"_selectPreviousItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._ownerEditor.canvas;if(!1===t){var a=0<this.selectedNodes.length?this.selectedNodes[this.selectedNodes.length-1]:null,r=null;if(a){var o=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),s=o.find(function(e){return e[$target]===a}),l=o.indexOf(s);o[l-1]&&(r=o[l-1])}if(r){this._scrollItemIntoView(r);var d=r[$target];this.selectedNodes=[d];var u=null,c=[];if(n.isSelectableElement(d)){for(var p=d.parentElement;p!==n.currentArtboard;p=p.parentElement)if("g"===p.localName||"a"===p.localName){u=p;break}c=[d]}this._skipUpcomingSelectedCanvasElementsChange=!0,n.currentContainer=u,n.selectedElements=c}}else if(!0===t){var e=[].concat(_toConsumableArray(this.selectedNodes));if(0<e.length){var h=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),b=e[e.length-1],x=h.find(function(e){return e[$target]===b}),m=h.indexOf(x);if(0<m)for(var g=m-1,i;0<=g;g-=1)if(i=h[g][$target],!1===e.includes(i)){this.selectedNodes=[].concat(_toConsumableArray(e),[i]),n.isSelectableElement(i)&&(this._skipUpcomingSelectedCanvasElementsChange=!0,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[i]));break}}}}},{key:"_selectNextItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._ownerEditor.canvas;if(!1===t){var a=0<this.selectedNodes.length?this.selectedNodes[this.selectedNodes.length-1]:null,r=null;if(a){var o=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),s=o.find(function(e){return e[$target]===a}),l=o.indexOf(s);o[l+1]&&(r=o[l+1])}if(r){this._scrollItemIntoView(r);var d=r[$target];this.selectedNodes=[d];var u=null,c=[];if(n.isSelectableElement(d)){for(var p=d.parentElement;p!==n.currentArtboard;p=p.parentElement)if("g"===p.localName||"a"===p.localName){u=p;break}c=[d]}this._skipUpcomingSelectedCanvasElementsChange=!0,n.currentContainer=u,n.selectedElements=c}}else if(!0===t){var e=[].concat(_toConsumableArray(this.selectedNodes));if(0<e.length){var h=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),b=e[e.length-1],x=h.find(function(e){return e[$target]===b}),m=h.indexOf(x);if(m<h.length-1)for(var g=m+1,i;g<h.length;g+=1)if(i=h[g][$target],!1===e.includes(i)){this.selectedNodes=[].concat(_toConsumableArray(e),[i]),n.isSelectableElement(i)&&(this._skipUpcomingSelectedCanvasElementsChange=!0,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[i]));break}}}}},{key:"_scrollItemIntoView",value:function(e){var t=this["#main"].scrollTop,n=e.getBoundingClientRect().top-this["#tree"].getBoundingClientRect().top;if(0>n-t)this["#main"].scrollTop=n;else if(e.hasAttribute("data-expanded")){var a=e.querySelector(".tag").getBoundingClientRect().height;n+a-t>this["#main"].clientHeight&&(this["#main"].scrollTop=n+a-this["#main"].clientHeight)}else n+e.clientHeight-t>this["#main"].clientHeight&&(this["#main"].scrollTop=n+e.clientHeight-this["#main"].clientHeight)}},{key:"_deleteSelectedNodes",value:function(){var e=this,t=this._ownerEditor.canvas,n=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),a=_sortByDomPosition7(this.outermostSelectedNodes);if(a=a.filter(function(e){return"g"===e.localName&&e.hasAttribute("data-bx-artboard")?!1:!0}),0<a.length){t.undoManager.checkpoint("Delete");{for(var r=function(){var t=e["#tree"].querySelector(".item[data-selected]");return a.find(function(e){return e.contains(t[$target])})?(e._selectNextItem(),t===e["#tree"].querySelector(".item[data-selected]"))?"break":void 0:"break"},i;i=r(),"break"!==i;);for(var o=function(){var t=e["#tree"].querySelector(".item[data-selected]");return a.find(function(e){return e.contains(t[$target])})?(e._selectPreviousItem(),t===e["#tree"].querySelector(".item[data-selected]"))?"break":void 0:"break"},s;s=o(),"break"!==s;);}var l=!0,d=!1,u;try{for(var c=function(){var e=h.value;e.remove();var t=n.find(function(t){return t[$target]===e});t&&t.remove()},p=a[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0)c()}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}}}},{key:"_canMoveNodes",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"afterend",a=!0;if(0===e.length)a=!1;else{var r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,!1===this._canMoveNode(d,t,n)){a=!1;break}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return a}},{key:"_canMoveNode",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"afterend";if(t.parentNode===this._ownerEditor.canvas.artboards)return!1;if(e.contains(t))return!1;if("beforebegin"===n){var a=this._getNodeContentSchema(t.parentNode);if(!1===a.includes(e.nodeName))return!1;if(t.previousSibling&&t.previousSibling===e)return!1}else if("afterend"===n){var r=this._getNodeContentSchema(t.parentNode);if(!1===r.includes(e.nodeName))return!1;if(t.nextSibling&&t.nextSibling===e)return!1}else if("afterbegin"===n){var i=this._getNodeContentSchema(t);if(!1===i.includes(e.nodeName))return!1;if(t.firstChild&&t.firstChild===e)return!1}else if("beforeend"===n){var o=this._getNodeContentSchema(t);if(!1===o.includes(e.nodeName))return!1;if(t.lastChild&&t.lastChild===e)return!1}return!0}},{key:"_selectAll",value:function(){var e=this._shadowRoot.querySelector("[contenteditable]"),t=e?e.closest(".item"):null;if(!(e&&t));else if("element"===t.getAttribute("data-type")){if(e.matches(".tag-name")||e.matches(".attribute")){var n=new Range;n.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(n)}}else if("text"===t.getAttribute("data-type")){var r=new Range;r.selectNodeContents(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(r)}}},{key:"_deselectAll",value:function(){var e=window.getSelection();if(0<e.rangeCount){var t=e.getRangeAt(0);t.collapse(!0)}}},{key:"_editTextContent",value:function(e){var t=this,n=e.querySelector(".content"),a=n.textContent,r=e[$target],i=this._ownerEditor.canvas,o=!0,s,l,d;if(!n.hasAttribute("contenteditable")){n.setAttribute("contenteditable",""),n.focus(),this._selectAll(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));var u=function(e){var n=_Shortcut9.fromEvent(e);(n.matches("Enter")||n.matches("Escape")||n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("ArrowRight")||n.matches("ArrowUp")||n.matches("ArrowDown")||n.matches("Shift","ArrowLeft")||n.matches("Shift","ArrowRight")||n.matches("Shift","ArrowUp")||n.matches("Shift","ArrowDown"))&&e.stopPropagation(),n.matches("Enter")?(e.preventDefault(),t.focus()):n.matches("Escape")&&(o=!0,t.focus())},c=function(){o=!1},p=function(){if(n.removeEventListener("blur",d),n.removeEventListener("keydown",s),n.removeEventListener("input",l),n.removeAttribute("contenteditable"),n.removeAttribute("data-invalid"),t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),o)n.textContent=a;else{i.undoManager.checkpoint("Text content");n.textContent;r.textContent=n.textContent}};n.addEventListener("keydown",s=function(e){return u(e)}),n.addEventListener("input",l=function(){return c()}),n.addEventListener("blur",d=function(){return p()})}}},{key:"_editTagName",value:function(e){var t=this,n=e.querySelector(".tag-name"),a=n.textContent,r=e[$target],i=this._ownerEditor.canvas,o=!0,s,l,d;if(!n.hasAttribute("contenteditable")){n.setAttribute("contenteditable",""),n.focus(),this._selectAll(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));var u=function(e){var t=e;return"title"===e?t="bx-title":e.startsWith("bx:")&&(t=e.replace("bx:","bx-")),t},c=function(e){var n=_Shortcut9.fromEvent(e);(n.matches("Enter")||n.matches("Escape")||n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("ArrowRight")||n.matches("ArrowUp")||n.matches("ArrowDown")||n.matches("Shift","ArrowLeft")||n.matches("Shift","ArrowRight")||n.matches("Shift","ArrowUp")||n.matches("Shift","ArrowDown"))&&e.stopPropagation(),n.matches("Enter")?(e.preventDefault(),t.focus()):n.matches("Escape")&&(o=!0,t.focus())},p=function(){var e=n.textContent,t=u(e),s=!1;if(r===i.currentArtboard)s=!0,o=!0;else{var l=_contentSchemas2[r.parentElement.nodeName]||[];l.includes(t)?(s=!1,o=t===u(a)):(s=!0,o=!0)}s?n.setAttribute("data-invalid",""):n.removeAttribute("data-invalid")},h=function(){if(n.removeEventListener("blur",d),n.removeEventListener("keydown",s),n.removeEventListener("input",l),n.removeAttribute("contenteditable"),n.removeAttribute("data-invalid"),t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),o)n.textContent=a;else{i.undoManager.checkpoint("Rename element");var c=n.textContent,p=u(n.textContent),h=_createElement24("svg:"+p),b=!0,x=!1,m;try{for(var g=r.attributes[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=y.name,_=y.value;h.setAttribute(f,_)}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}r.replace(h);for(var w=[].concat(_toConsumableArray(r.childNodes)),k=0,A;k<w.length;k++)A=w[k],_contentSchemas2[p].includes(A.nodeName)&&h.append(A);e[$target]=h,t.selectedNodes=t.selectedNodes.map(function(e){return e===r?h:e}),i.selectedElements.includes(r)?(t._skipUpcomingSelectedCanvasElementsChange=!0,i.selectedElements=i.isSelectableElement(h)?i.selectedElements.map(function(e){return e===r?h:e}):i.selectedElements.filter(function(e){return e!==r})):i.isSelectableElement(h)&&(t._skipUpcomingSelectedCanvasElementsChange=!0,i.selectedElements=[].concat(_toConsumableArray(i.selectedElements),[h]))}};n.addEventListener("keydown",s=function(e){return c(e)}),n.addEventListener("input",l=function(){return p()}),n.addEventListener("blur",d=function(){return h()})}}},{key:"_editAttribute",value:function(e,t){var n=this,a=this._ownerEditor.canvas,r=e[$target],o=!0,s=e.querySelector(".attribute[data-name=\""+t+"\"]"),i,l,d;if(s&&!s.hasAttribute("contenteditable")){var u=s.innerHTML;this._lastEditedAttributeSpan=s,this._expandAttribute(e,t),s.innerHTML=s.innerText,s.style.transition="none",s.setAttribute("contenteditable",""),s.focus(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));{var c=s.textContent.indexOf("\""),p=s.textContent.lastIndexOf("\"");if(0<=c&&0<=p&&c!==p){var h=new Range;h.setStart(s.firstChild,c+1),h.setEnd(s.firstChild,p);var b=window.getSelection();b.removeAllRanges(),b.addRange(h)}else this._selectAll()}s.addEventListener("keydown",i=function(e){var t=_Shortcut9.fromEvent(e);if(t.matches("Enter"))e.preventDefault(),e.stopPropagation(),n.focus();else if(t.matches("Escape"))e.stopPropagation(),o=!0,n.focus();else if(t.matches("Backspace")||t.matches("ArrowLeft")||t.matches("ArrowRight")||t.matches("Shift","ArrowLeft")||t.matches("Shift","ArrowRight"))e.stopPropagation();else if(t.matches("ArrowUp")||t.matches("ArrowDown")||t.matches("Shift","ArrowUp")||t.matches("Shift","ArrowDown")){e.stopPropagation();var a=n._shadowRoot.getSelection();if(0<a.rangeCount){var r=a.getRangeAt(0),l=r.startOffset,d=r.startOffset;{for(var u=s.textContent,c=["\"","'",":",";",",","(",")"," ","\xA0","\t","\n"],p=r.startOffset;p<u.length&&(d=p,!c.includes(u[p]));p+=1);for(var i=r.startOffset-1;0<=i&&!c.includes(u[i]);i-=1)l=i}if(l!==d){var h=s.textContent.substring(l,d);if(!1===_isNaN3(parseFloat(h))){var b="",x="",m=/[^\d-\.]+/.exec(h),g=parseFloat(h);if(e.preventDefault(),m){var v=m.index+m[0].length;r.startOffset>l+m.index&&v<h.length&&r.startOffset!==l?(b=h.substring(0,v),h=h.substring(v)):(x=h.substring(m.index),h=h.substring(0,m.index))}t.matches("ArrowUp")?g=_floor3(g)+1:t.matches("ArrowDown")?g=ceil(g)-1:t.matches("Shift","ArrowUp")?g=_floor3(g)+10:t.matches("Shift","ArrowDown")&&(g=ceil(g)-10);var y=b+g+x,f=s.textContent;f=f.substring(0,l)+y+f.substring(d),s.textContent=f;var _=document.createRange();_.setStart(s.firstChild,l),_.setEnd(s.firstChild,l+y.length),a.removeAllRanges(),a.addRange(_),o=!1}}}}}),s.addEventListener("input",l=function(){o=!1}),s.addEventListener("blur",d=function(){if(s.removeEventListener("blur",d),s.removeEventListener("keydown",i),s.removeEventListener("input",l),s.removeAttribute("contenteditable"),s.style.transition=null,n.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),o)s.innerHTML=u;else{a.undoManager.checkpoint("Edit attribute");var e=_splitAttributeText(s.textContent),c=_slicedToArray(e,2),p=c[0],h=c[1];s.remove(),""===p?r.removeAttribute(t):r.setAttribute(p,h)}})}}},{key:"_editNewAttribute",value:function(e){var t=this,n=this._ownerEditor.canvas,a=e[$target],r=!0,i=_html24(_templateObject2,elementItemAttributeHTML),o,s,l;i.innerHTML=" ",i.style.transition="none",i.setAttribute("contenteditable",""),e.querySelector(".attributes").append(i),i.focus(),this._selectAll(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0})),this._lastEditedAttributeSpan=i,i.addEventListener("keydown",o=function(e){var n=_Shortcut9.fromEvent(e);(n.matches("Enter")||n.matches("Escape")||n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("ArrowRight")||n.matches("ArrowUp")||n.matches("ArrowDown")||n.matches("Shift","ArrowLeft")||n.matches("Shift","ArrowRight")||n.matches("Shift","ArrowUp")||n.matches("Shift","ArrowDown"))&&e.stopPropagation(),n.matches("Enter")?(e.preventDefault(),t.focus()):n.matches("Escape")&&(r=!0,t.focus())}),i.addEventListener("input",s=function(){r=!1}),i.addEventListener("blur",l=function(){if(i.removeEventListener("blur",l),i.removeEventListener("keydown",o),i.removeEventListener("input",s),i.removeAttribute("contenteditable"),i.style.transition=null,t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),r)i.remove();else{n.undoManager.checkpoint("Edit attribute");var e=_splitAttributeText(i.textContent),d=_slicedToArray(e,2),u=d[0],c=d[1];i.remove(),""!==u&&a.setAttribute(u,c)}})}},{key:"_editFirstAttribute",value:function(e){if(this._lastEditedAttributeSpan&&e.contains(this._lastEditedAttributeSpan))this._editAttribute(e,this._lastEditedAttributeSpan.getAttribute("data-name"));else{var t=e.querySelector(".attribute");t?this._editAttribute(e,t.getAttribute("data-name")):this._editNewAttribute(e)}}},{key:"_expandAttribute",value:function(e,t){var n=!0,a=!1,r;try{for(var i=e.querySelector(".attributes").children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.dataset.name===t){s.querySelector(".value").textContent=e[$target].getAttribute(t),s.querySelector(".ellipsis").hidden=!0;break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_updateTree",value:function(){this._cachedMutations=[],this["#tree"].innerHTML="";var e=this._ownerEditor.canvas.currentArtboard,t=this._createItem("element",e);this["#tree"].append(t),this._onSelectedCanvasElementsChange()}},{key:"_updateElementItemSubtree",value:function(e,t){for(var n=e.querySelector(".subtree"),a=[].concat(_toConsumableArray(t.addedNodes)),r=[].concat(_toConsumableArray(t.removedNodes)),i=[].concat(_toConsumableArray(n.children)),o=0,s;o<i.length;o++)s=i[o],r.includes(s[$target])?s.remove():a.includes(s[$target])&&s.remove();if(0===e[$target].childNodes.length&&e.removeAttribute("data-expanded"),0<a.length&&e.hasAttribute("data-expanded")){var l=document.createDocumentFragment(),d=!0,u=!1,c;try{for(var p=a[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=h.value,x=null;if(b.nodeType===document.ELEMENT_NODE?x="element":b.nodeType===document.TEXT_NODE&&(x="text"),x){var m=this._createItem(x,b);"text"===x&&_isDOMWhitespace(b.textContent)&&m.setAttribute("hidden",""),this.selectedNodes.includes(b)&&m.setAttribute("data-selected",""),l.append(m)}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(t.previousSibling){var g=[].concat(_toConsumableArray(n.children)).find(function(e){return e[$target]===t.previousSibling});g.after(l)}else if(t.nextSibling){var v=[].concat(_toConsumableArray(n.children)).find(function(e){return e[$target]===t.nextSibling});v.before(l)}else n.append(l)}}},{key:"_updateElementItemIcon",value:function(e){var t=e.querySelector(".icon"),n="hidden",a=!0,r=!1,i;try{for(var o=e[$target].childNodes[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.nodeType===document.ELEMENT_NODE){n="visible";break}else if(l.nodeType===document.TEXT_NODE&&!1===_isDOMWhitespace(l.textContent)){n="visible";break}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}t.style.setProperty("visibility",n)}},{key:"_updateElementItemTagName",value:function(e){var t=e[$target],n=t.localName,a=e.querySelector(".tag-name"),r=!1;if("g"!==n)"bx-title"===n?n="title":n.startsWith("bx-")&&(n="bx:"+n.substring(3));else if(t.hasAttribute("data-bx-artboard")){var i=t.getAttribute("data-bx-artboard");"master"===i?n="svg":"pattern"===i?n="pattern":"symbol"===i?n="symbol":"marker"===i&&(n="marker"),r=!0}a.textContent=n,r&&(a.setAttribute("disabled",""),a.previousElementSibling.setAttribute("disabled",""))}},{key:"_updateElementItemAttributes",value:function(e){var t=e[$target],n=document.createDocumentFragment(),a=!0,r=!1,i;try{for(var o=t.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;if("data-bx-artboard"===d)continue;else{var c=_html24(_templateObject2,elementItemAttributeHTML),p=this._getAttributeDisplayName(d),h=100<u.length-100;c.dataset.name=d,c.querySelector(".name").textContent=p,c.querySelector(".value").textContent=h?u.substring(0,100):u,c.querySelector(".ellipsis").hidden=!h,t.hasAttribute("data-bx-artboard")&&("xmlns"===d||"xmlns:bx"===d)&&c.setAttribute("disabled",""),n.append(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.querySelector(".attributes").append(n)}},{key:"_updateElementItemAttribute",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=e[$target],r=a.getAttribute(t),i=this._getAttributeDisplayName(t);if(null===r){var o=!0,s=!1,l;try{for(var d=e.querySelector(".attributes").children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)if(c=u.value,c.dataset.name===t){c.remove();break}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}else{var p=null,h=100<r.length-100,b=!0,x=!1,m;try{for(var g=e.querySelector(".attributes").children[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)if(y=v.value,y.dataset.name===t){p=y;break}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}if(null===p){p=_html24(_templateObject2,elementItemAttributeHTML),p.dataset.name=t,p.querySelector(".name").textContent=i;var f=0,_=!0,w=!1,k;try{for(var A=a.attributes[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)if(S=C.value,"data-bx-artboard"===S.name)continue;else if(S.name===t)break;else f+=1}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}var E=e.querySelector(".attributes").children[f];E?E.before(p):e.querySelector(".attributes").append(p)}p.querySelector(".value").textContent=h?r.substring(0,100):r,p.querySelector(".ellipsis").hidden=!h,n&&(p.setAttribute("selected",""),_sleep10(500).then(function(){return p.removeAttribute("selected","")}))}1===this.selectedNodes.length&&this.selectedNodes[0]===a&&this._scrollItemIntoView(e)}},{key:"_updateTextItemCharacterData",value:function(e){e.querySelector(".content").textContent=e[$target].textContent}},{key:"_getNodeContentSchema",value:function(e){var t;if("g"===e.localName&&e.hasAttribute("data-bx-artboard")){var n=e.getAttribute("data-bx-artboard");t="master"===n?_contentSchemas2.svg:_contentSchemas2[n]}else t=_contentSchemas2[e.nodeName]||[];return t}},{key:"_getAttributeDisplayName",value:function(e){var t=e;return e.startsWith("data-bx-")?t=e.replace("data-bx-","bx:"):"_href"===e&&(t="href"),t}},{key:"_getItemForClientY",value:function(e){var t=function t(n){var a=!0,r=!1,i;try{for(var o=n.children[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.getBoundingClientRect();if(e>=d.y&&e<=d.y+d.height){if(l.hasAttribute("data-expanded")){var u=l.querySelector(".subtree"),c=t(u);return c||l}return l}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return null}(this["#tree"]);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"selectedNodes",get:function(){return this._selectedNodes},set:function(e){this._selectedNodes=e,this._onSelectedNodesChange()}},{key:"outermostSelectedNodes",get:function(){var e=[],t=!0,n=!1,a;try{for(var r=this.selectedNodes[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=!0,l=!0,d=!1,u=void 0;try{for(var c=this.selectedNodes[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,h!==o&&h.contains(o)){s=!1;break}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}s&&e.push(o)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-domeditor",BXDOMEditorElement)}{{var _BoxySVG$utils$elemen30=BoxySVG.utils.element,_html25=_BoxySVG$utils$elemen30.html,_closest31=_BoxySVG$utils$elemen30.closest,_BoxySVG$utils$appear=BoxySVG.utils.appearance,_getAppearance=_BoxySVG$utils$appear.getAppearance,_setAppearance=_BoxySVG$utils$appear.setAppearance,defaultAppearance={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate22=_html25(_templateObject42,window.theme,window.theme),BXFreehandSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate22.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#smoothing-slider"].addEventListener("change",function(){return e._onSmoothingSliderChange()}),e["#smoothing-input"].addEventListener("change",function(){return e._onSmoothingInputChange()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest31(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateSmoothingSection(),this._updateAppearanceSection()}},{key:"_onSmoothingSliderChange",value:function(){this["#smoothing-input"].value=this["#smoothing-slider"].value,this._ownerApp.setConfig("bx-freehandsettings:smoothing",this["#smoothing-slider"].value)}},{key:"_onSmoothingInputChange",value:function(){this["#smoothing-slider"].value=this["#smoothing-input"].value,this._ownerApp.setConfig("bx-freehandsettings:smoothing",this["#smoothing-slider"].value)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance(e);this._ownerApp.setConfig("bx-freehandsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-freehandsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateSmoothingSection",value:function(){var e=this._ownerApp.getConfig("bx-freehandsettings:smoothing");null!==e&&(this["#smoothing-slider"].value=e,this["#smoothing-input"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-freehandsettings:appearance");_setAppearance(this["#appearance-path"],e||defaultAppearance),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-freehandsettings",BXFreehandSettingsElement)}}{{var _BoxySVG$utils$elemen31=BoxySVG.utils.element,_html26=_BoxySVG$utils$elemen31.html,_closest32=_BoxySVG$utils$elemen31.closest,_BoxySVG$utils$appear2=BoxySVG.utils.appearance,_getAppearance2=_BoxySVG$utils$appear2.getAppearance,_setAppearance2=_BoxySVG$utils$appear2.setAppearance,_defaultAppearance={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate23=_html26(_templateObject43,window.theme,window.theme),BXQuadBezierSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate23.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest32(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance2(e);this._ownerApp.setConfig("bx-quadbeziersettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-quadbeziersettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-quadbeziersettings:appearance");_setAppearance2(this["#appearance-path"],e||_defaultAppearance),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-quadbeziersettings",BXQuadBezierSettingsElement)}}{{var _BoxySVG$utils$elemen32=BoxySVG.utils.element,_html27=_BoxySVG$utils$elemen32.html,_closest33=_BoxySVG$utils$elemen32.closest,_BoxySVG$utils$appear3=BoxySVG.utils.appearance,_getAppearance3=_BoxySVG$utils$appear3.getAppearance,_setAppearance3=_BoxySVG$utils$appear3.setAppearance,_defaultAppearance2={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate24=_html27(_templateObject44,window.theme,window.theme),BXCubicBezierSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate24.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest33(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance3(e);this._ownerApp.setConfig("bx-cubicbeziersettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-cubicbeziersettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-cubicbeziersettings:appearance");_setAppearance3(this["#appearance-path"],e||_defaultAppearance2),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-cubicbeziersettings",BXCubicBezierSettingsElement)}}{{var _BoxySVG$utils$elemen33=BoxySVG.utils.element,_html28=_BoxySVG$utils$elemen33.html,_closest34=_BoxySVG$utils$elemen33.closest,_BoxySVG$utils$appear4=BoxySVG.utils.appearance,_getAppearance4=_BoxySVG$utils$appear4.getAppearance,_setAppearance4=_BoxySVG$utils$appear4.setAppearance,_defaultAppearance3={fill:"#333333","font-size":"24px","font-family":"sans-serif"},_shadowTemplate25=_html28(_templateObject45,window.theme,window.theme),BXTextSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate25.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest34(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance4(e);this._ownerApp.setConfig("bx-textsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-textsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-textsettings:appearance");_setAppearance4(this["#appearance-path"],e||_defaultAppearance3),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-textsettings",BXTextSettingsElement)}}{{var _BoxySVG$utils$elemen34=BoxySVG.utils.element,_html29=_BoxySVG$utils$elemen34.html,_closest35=_BoxySVG$utils$elemen34.closest,_shadowTemplate26=_html29(_templateObject46,window.theme,window.theme),BXTransformSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate26.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#selection-mode-buttons"].addEventListener("toggle",function(){e._onSelectionModeButtonsToggle()}),e["#preserve-stroke-width-checkbox"].addEventListener("change",function(){e._onPreserveStrokeWidthCheckboxToggle()}),e["#preserve-rect-radii-checkbox"].addEventListener("change",function(){e._onPreserveRectRadiiCheckboxToggle()}),e["#preserve-rotation-checkbox"].addEventListener("change",function(){e._onPreserveRotationCheckboxToggle()}),e["#preserve-aspect-ratio-checkbox"].addEventListener("change",function(){e._onPreserveAspectRatioCheckboxToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest35(this,"bx-electronapp, bx-chromeapp, bx-webapp");var e=this._ownerApp.getConfig("bx-transformsettings:selectionMode"),t=this._ownerApp.getConfig("bx-transformsettings:preserveStrokeWidth"),n=this._ownerApp.getConfig("bx-transformsettings:preserveRectRadii"),a=this._ownerApp.getConfig("bx-transformsettings:preserveRotation"),r=this._ownerApp.getConfig("bx-transformsettings:preserveAspectRatio");null!==e&&(this["#selection-mode-buttons"].value=e),null!==t&&(this["#preserve-stroke-width-checkbox"].toggled=t),null!==n&&(this["#preserve-rect-radii-checkbox"].toggled=n),null!==a&&(this["#preserve-rotation-checkbox"].toggled=a),null!==r&&(this["#preserve-aspect-ratio-checkbox"].toggled=r)}},{key:"_onSelectionModeButtonsToggle",value:function(){var e=this["#selection-mode-buttons"].value;this._ownerApp.setConfig("bx-transformsettings:selectionMode",e)}},{key:"_onPreserveStrokeWidthCheckboxToggle",value:function(){var e=this["#preserve-stroke-width-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveStrokeWidth",e)}},{key:"_onPreserveRectRadiiCheckboxToggle",value:function(){var e=this["#preserve-rect-radii-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveRectRadii",e)}},{key:"_onPreserveRotationCheckboxToggle",value:function(){var e=this["#preserve-rotation-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveRotation",e)}},{key:"_onPreserveAspectRatioCheckboxToggle",value:function(){var e=this["#preserve-aspect-ratio-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveAspectRatio",e)}}]),t}(_CustomElement);customElements.define("bx-transformsettings",BXTransformSettingsElement)}}{{var _BoxySVG$utils$appear5=BoxySVG.utils.appearance,_getAppearance5=_BoxySVG$utils$appear5.getAppearance,_setAppearance5=_BoxySVG$utils$appear5.setAppearance,_BoxySVG$utils$elemen35=BoxySVG.utils.element,_html30=_BoxySVG$utils$elemen35.html,_closest36=_BoxySVG$utils$elemen35.closest,_defaultAppearance4={fill:"#d8d8d8"},_shadowTemplate27=_html30(_templateObject47,window.theme,window.theme),BXRectSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate27.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest36(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-rectsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance5(e);this._ownerApp.setConfig("bx-rectsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-rectsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-rectsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-rectsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance5(this["#appearance-thumbnail-rect"],e||_defaultAppearance4)}}]),t}(_CustomElement);customElements.define("bx-rectsettings",BXRectSettingsElement)}}{{var _BoxySVG$utils$elemen36=BoxySVG.utils.element,_html31=_BoxySVG$utils$elemen36.html,_svg7=_BoxySVG$utils$elemen36.svg,_closest37=_BoxySVG$utils$elemen36.closest,_BoxySVG$utils$appear6=BoxySVG.utils.appearance,_getAppearance6=_BoxySVG$utils$appear6.getAppearance,_setAppearance6=_BoxySVG$utils$appear6.setAppearance,_defaultAppearance5={fill:"#d8d8d8"},_shadowTemplate28=_html31(_templateObject48,window.theme,window.theme),BXEllipseSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate28.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest37(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-ellipsesettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance6(e);this._ownerApp.setConfig("bx-ellipsesettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-ellipsesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-ellipsesettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-ellipsesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance6(this["#appearance-thumbnail-ellipse"],e||_defaultAppearance5)}}]),t}(_CustomElement);customElements.define("bx-ellipsesettings",BXEllipseSettingsElement)}}{{var _BoxySVG$utils$elemen37=BoxySVG.utils.element,_html32=_BoxySVG$utils$elemen37.html,_closest38=_BoxySVG$utils$elemen37.closest,_BoxySVG$utils$appear7=BoxySVG.utils.appearance,_getAppearance7=_BoxySVG$utils$appear7.getAppearance,_setAppearance7=_BoxySVG$utils$appear7.setAppearance,_defaultAppearance6={fill:"#d8d8d8"},_shadowTemplate29=_html32(_templateObject49,window.theme,window.theme),BXTriangleSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate29.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest38(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-trianglesettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance7(e);this._ownerApp.setConfig("bx-trianglesettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-trianglesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-trianglesettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-trianglesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance7(this["#appearance-thumbnail-path"],e||_defaultAppearance6)}}]),t}(_CustomElement);customElements.define("bx-trianglesettings",BXTriangleSettingsElement)}}{{var _BoxySVG$utils$appear8=BoxySVG.utils.appearance,_getAppearance8=_BoxySVG$utils$appear8.getAppearance,_setAppearance8=_BoxySVG$utils$appear8.setAppearance,_BoxySVG$utils$elemen38=BoxySVG.utils.element,_html33=_BoxySVG$utils$elemen38.html,_closest39=_BoxySVG$utils$elemen38.closest,_setShapeData3=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance7={fill:"#d8d8d8"},_shadowTemplate30=_html33(_templateObject50,window.theme,window.theme),BXNGonSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate30.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData3(e["#appearance-thumbnail-path"],{type:"n-gon",values:[50,50,38,38,5,0]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest39(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-ngonsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance8(e);this._ownerApp.setConfig("bx-ngonsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-ngonsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-ngonsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-ngonsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance8(this["#appearance-thumbnail-path"],e||_defaultAppearance7)}}]),t}(_CustomElement);customElements.define("bx-ngonsettings",BXNGonSettingsElement)}}{{var _BoxySVG$utils$appear9=BoxySVG.utils.appearance,_getAppearance9=_BoxySVG$utils$appear9.getAppearance,_setAppearance9=_BoxySVG$utils$appear9.setAppearance,_BoxySVG$utils$elemen39=BoxySVG.utils.element,_html34=_BoxySVG$utils$elemen39.html,_closest40=_BoxySVG$utils$elemen39.closest,_setShapeData4=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance8={fill:"#d8d8d8"},_shadowTemplate31=_html34(_templateObject51,window.theme,window.theme),BXStarSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate31.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData4(e["#appearance-thumbnail-path"],{type:"star",values:[50,50,38,38,0.4,5]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest40(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-starsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance9(e);this._ownerApp.setConfig("bx-starsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-starsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-starsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-starsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance9(this["#appearance-thumbnail-path"],e||_defaultAppearance8)}}]),t}(_CustomElement);customElements.define("bx-starsettings",BXStarSettingsElement)}}{{var _BoxySVG$utils$appear10=BoxySVG.utils.appearance,_getAppearance10=_BoxySVG$utils$appear10.getAppearance,_setAppearance10=_BoxySVG$utils$appear10.setAppearance,_BoxySVG$utils$elemen40=BoxySVG.utils.element,_html35=_BoxySVG$utils$elemen40.html,_closest41=_BoxySVG$utils$elemen40.closest,_setShapeData5=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance9={fill:"#d8d8d8"},_shadowTemplate32=_html35(_templateObject52,window.theme,window.theme),BXRingSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate32.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData5(e["#appearance-thumbnail-path"],{type:"ring",values:[50,50,20,20,40,40]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest41(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-ringsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance10(e);this._ownerApp.setConfig("bx-ringsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-ringsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-ringsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-ringsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance10(this["#appearance-thumbnail-path"],e||_defaultAppearance9)}}]),t}(_CustomElement);customElements.define("bx-ringsettings",BXRingSettingsElement)}}{{var _BoxySVG$utils$appear11=BoxySVG.utils.appearance,_getAppearance11=_BoxySVG$utils$appear11.getAppearance,_setAppearance11=_BoxySVG$utils$appear11.setAppearance,_BoxySVG$utils$elemen41=BoxySVG.utils.element,_html36=_BoxySVG$utils$elemen41.html,_closest42=_BoxySVG$utils$elemen41.closest,_setShapeData6=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance10={fill:"#d8d8d8"},_shadowTemplate33=_html36(_templateObject53,window.theme,window.theme),BXPieSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate33.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData6(e["#appearance-thumbnail-path"],{type:"pie",values:[50,50,20,40,90,360]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest42(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-piesettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance11(e);this._ownerApp.setConfig("bx-piesettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-piesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-piesettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-piesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance11(this["#appearance-thumbnail-path"],e||_defaultAppearance10)}}]),t}(_CustomElement);customElements.define("bx-piesettings",BXPieSettingsElement)}}{{var _BoxySVG$utils$appear12=BoxySVG.utils.appearance,_getAppearance12=_BoxySVG$utils$appear12.getAppearance,_setAppearance12=_BoxySVG$utils$appear12.setAppearance,_BoxySVG$utils$elemen42=BoxySVG.utils.element,_html37=_BoxySVG$utils$elemen42.html,_closest43=_BoxySVG$utils$elemen42.closest,_setShapeData7=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance11={fill:"#d8d8d8"},_shadowTemplate34=_html37(_templateObject54,window.theme,window.theme),BXCogSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate34.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData7(e["#appearance-thumbnail-path"],{type:"cog",values:[50,50,13.333333333333334,26.666666666666668,40,0.375,8]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest43(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-cogsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance12(e);this._ownerApp.setConfig("bx-cogsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-cogsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-cogsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-cogsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance12(this["#appearance-thumbnail-path"],e||_defaultAppearance11)}}]),t}(_CustomElement);customElements.define("bx-cogsettings",BXCogSettingsElement)}}{{var _BoxySVG$utils$appear13=BoxySVG.utils.appearance,_getAppearance13=_BoxySVG$utils$appear13.getAppearance,_setAppearance13=_BoxySVG$utils$appear13.setAppearance,_BoxySVG$utils$elemen43=BoxySVG.utils.element,_html38=_BoxySVG$utils$elemen43.html,_closest44=_BoxySVG$utils$elemen43.closest,_defaultAppearance12={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate35=_html38(_templateObject55,window.theme,window.theme),BXLineSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate35.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest44(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance13(e);this._ownerApp.setConfig("bx-linesettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-linesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-linesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance13(this["#appearance-thumbnail-line"],e||_defaultAppearance12)}}]),t}(_CustomElement);customElements.define("bx-linesettings",BXLineSettingsElement)}}{{var _BoxySVG$utils$appear14=BoxySVG.utils.appearance,_getAppearance14=_BoxySVG$utils$appear14.getAppearance,_setAppearance14=_BoxySVG$utils$appear14.setAppearance,_BoxySVG$utils$elemen44=BoxySVG.utils.element,_html39=_BoxySVG$utils$elemen44.html,_closest45=_BoxySVG$utils$elemen44.closest,_defaultAppearance13={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate36=_html39(_templateObject56,window.theme,window.theme),BXPolygonSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate36.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest45(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance14(e);this._ownerApp.setConfig("bx-polygonsettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-polygonsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-polygonsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance14(this["#appearance-thumbnail-polygon"],e||_defaultAppearance13)}}]),t}(_CustomElement);customElements.define("bx-polygonsettings",BXPolygonSettingsElement)}}{{var _BoxySVG$utils$appear15=BoxySVG.utils.appearance,_getAppearance15=_BoxySVG$utils$appear15.getAppearance,_setAppearance15=_BoxySVG$utils$appear15.setAppearance,_BoxySVG$utils$elemen45=BoxySVG.utils.element,_html40=_BoxySVG$utils$elemen45.html,_closest46=_BoxySVG$utils$elemen45.closest,_defaultAppearance14={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate37=_html40(_templateObject57,window.theme,window.theme),BXPolylineSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate37.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest46(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:async function(){var e=await this._ownerApp.objectGrabber.grab();if(this["#grab-appearance-button"].toggled=!1,e){var t=_getAppearance15(e);this._ownerApp.setConfig("bx-polylinesettings:appearance",t),this._updateAppearanceSection()}}},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-polylinesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-polylinesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance15(this["#appearance-thumbnail-polyline"],e||_defaultAppearance14)}}]),t}(_CustomElement);customElements.define("bx-polylinesettings",BXPolylineSettingsElement)}}{{var _BoxySVG$utils$bbox2=BoxySVG.utils.bbox,_getUserBBox9=_BoxySVG$utils$bbox2.getUserBBox,_getClientBBox8=_BoxySVG$utils$bbox2.getClientBBox,_isPointerMoveIntentional6=BoxySVG.utils.event.isPointerMoveIntentional,_closest47=BoxySVG.utils.element.closest,_round25=BoxySVG.utils.math.round,_BoxySVG$utils$time10=BoxySVG.utils.time,_sleep11=_BoxySVG$utils$time10.sleep,_throttle17=_BoxySVG$utils$time10.throttle,_decomposeTransform19=BoxySVG.utils.transformDecomposition.decomposeTransform,_reduceTransform9=BoxySVG.utils.transformReduction.reduceTransform,_Vector3=BoxySVG.classes.Vector,_abs10=Math.abs,atan=Math.atan,_min5=Math.min,_max5=Math.max,_parseFloat11=Number.parseFloat,_BoxySVG$utils$geomet13=BoxySVG.utils.geometry,_comparePoints2=_BoxySVG$utils$geomet13.comparePoints,_getRotationAngleFromPoints2=_BoxySVG$utils$geomet13.getRotationAngleFromPoints,_snapRotationAngle2=_BoxySVG$utils$geomet13.snapRotationAngle,_transformRect11=_BoxySVG$utils$geomet13.transformRect,_combineRects12=_BoxySVG$utils$geomet13.combineRects,_BoxySVG$utils$transf10=BoxySVG.utils.transformGeneral,_getComputedTransform13=_BoxySVG$utils$transf10.getComputedTransform,_getComputedTransformOriginClientPoint3=_BoxySVG$utils$transf10.getComputedTransformOriginClientPoint,_getTransformToElement11=_BoxySVG$utils$transf10.getTransformToElement,_getElementRotationAngle3=_BoxySVG$utils$transf10.getElementRotationAngle,_setElementRotationAngle2=_BoxySVG$utils$transf10.setElementRotationAngle,_skew=_BoxySVG$utils$transf10.skew,_userPointToBBoxPoint3=_BoxySVG$utils$transf10.userPointToBBoxPoint,scaleGrippieSize=12,rotateGrippieSize=12,skewGrippieSize=12,originGrippieSize=10,$initialStrokeWidth=Symbol(),$initialVectorEffect=Symbol(),$initialTransforms=Symbol(),$initialUserBBox=Symbol(),_shadowHTML11="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}#rotate-grippies>.grippie,#scale-grippies>.grippie,#skew-grippies>.grippie{fill:#2e66f9;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-transformhud-grippie-shadow)}#rotate-grippies>.grippie,#skew-grippies>.grippie{fill:red}#skew-grippies>.grippie{fill:orange}</style>\n\n    <defs>\n      <filter id=\"bx-transformhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-transformhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-transformhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n    </defs>\n\n    <g id=\"grippies\">\n      <g id=\"scale-grippies\">\n        <rect class=\"grippie\" data-position=\"top\"></rect>\n        <rect class=\"grippie\" data-position=\"left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom\"></rect>\n        <rect class=\"grippie\" data-position=\"right\"></rect>\n        <rect class=\"grippie\" data-position=\"top-left\"></rect>\n        <rect class=\"grippie\" data-position=\"top-right\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom-left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom-right\"></rect>\n      </g>\n\n      <g id=\"rotate-grippies\">\n        <rect class=\"grippie\" rx=\"999\" data-position=\"top-left\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"top-right\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-left\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-right\"></rect>\n      </g>\n\n      <g id=\"skew-grippies\">\n        <rect class=\"grippie\" data-position=\"top\"></rect>\n        <rect class=\"grippie\" data-position=\"left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom\"></rect>\n        <rect class=\"grippie\" data-position=\"right\"></rect>\n      </g>\n\n      <svg id=\"origin-grippie\" viewBox=\"0 0 50 50\" visibility=\"hidden\">\n        <use href=\"images/icons.svg#cross\" x=\"0\" y=\"0\" width=\"50\" height=\"50\"></use>\n        <rect x=\"0\" y=\"0\" width=\"50\" height=\"50\" style=\"opacity: 0;\"/>\n      </svg>\n    </g>\n  ",BXTransformHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._scaleGrippiesByPosition={},this._skewGrippiesByPosition={},this._rotateGrippiesByPosition={},this._isDraggingRotateGrippie=!1,this._isScaling=!1,this._isTransformingInUserSpace=!1,this._updateGrippies25Th=_throttle17(this._updateGrippies,25,this),this._updateGrippies250Th=_throttle17(this._updateGrippies,250,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML11;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}var s=!0,l=!1,d;try{for(var u=this["#scale-grippies"].children[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,this._scaleGrippiesByPosition[p.getAttribute("data-position")]=p}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var h=!0,b=!1,x;try{for(var m=this["#rotate-grippies"].children[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,this._rotateGrippiesByPosition[v.getAttribute("data-position")]=v}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}var y=!0,f=!1,_;try{for(var w=this["#skew-grippies"].children[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,this._skewGrippiesByPosition[A.getAttribute("data-position")]=A}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}this._shadowRoot.addEventListener("pointerdown",function(t){e._onPointerDown(t)}),this._shadowRoot.addEventListener("dblclick",function(t){e._onDblClick(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest47(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest47(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"mode"===e&&this._onModeAttributeChange())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._onZoomChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onModeAttributeChange",value:function(){"scale"===this.mode?(this["#scale-grippies"].style.setProperty("visibility","visible"),this["#rotate-grippies"].style.setProperty("visibility","hidden"),this["#skew-grippies"].style.setProperty("visibility","hidden"),this["#origin-grippie"].style.setProperty("visibility","hidden")):"rotate-and-skew"===this.mode&&(this["#scale-grippies"].style.setProperty("visibility","hidden"),this["#rotate-grippies"].style.setProperty("visibility","visible"),this["#skew-grippies"].style.setProperty("visibility","visible"),this["#origin-grippie"].style.setProperty("visibility","visible")),this._updateGrippies()}},{key:"_onSelectedElementsChange",value:function(){0===this._ownerCanvas.outermostSelectedElements.length?this["#grippies"].style.setProperty("display","none"):this["#grippies"].style.setProperty("display","block"),this._updateGrippies()}},{key:"_onArtboardMutation",value:function(){100<this._ownerCanvas.selectedElements.length?this._updateGrippies250Th():this._updateGrippies25Th()}},{key:"_onZoomChange",value:function(){this._updateGrippies25Th(),this._updateDropShadows()}},{key:"_onPointerDown",value:function(e){var t=this,n=e.target,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(r){_isPointerMoveIntentional6(e,r)&&(n.removeEventListener("pointermove",a),t._onDragStart(e,r))}),n.addEventListener("pointerup",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("pointerup",r)})}},{key:"_onDblClick",value:function(e){var t=e.target.parentElement;t===this["#rotate-grippies"]?this._onRotateGrippieDblClick(e):t===this["#skew-grippies"]?this._onSkewGrippieDblClick(e):t===this["#origin-grippie"]&&this._onOriginGrippieDblClick(e)}},{key:"_onDragStart",value:function(e,t){var n=t.target.parentElement;n===this["#scale-grippies"]?this._onScaleGrippieDragStart(e,t):n===this["#rotate-grippies"]?this._onRotateGrippieDragStart(e,t):n===this["#skew-grippies"]?this._onSkewGrippieDragStart(e,t):n===this["#origin-grippie"]&&this._onOriginGrippieDragStart(e,t)}},{key:"_onScaleGrippieDragStart",value:function(e,t){var n=this;if(0===e.button){var a=t.target,r=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),i=a.getAttribute("data-position"),o=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value/2,a.y.baseVal.value+a.height.baseVal.value/2).matrixTransform(a.getScreenCTM()),s=new SVGPoint(e.clientX,e.clientY),l=new _Vector3(s,o),d=this._ownerApp.getConfig("bx-transformsettings:preserveStrokeWidth"),u=this._ownerApp.getConfig("bx-transformsettings:preserveRectRadii"),c=this._ownerApp.getConfig("bx-transformsettings:preserveRotation"),p=this._ownerApp.getConfig("bx-transformsettings:preserveAspectRatio"),h,b;d=null===d||d,u=null===u||u,c=null===c||c,p=null!==p&&p,this._isScaling=!0,this._ownerCanvas.undoManager.checkpoint("Scale Transform"),this._ownerCanvas.snapManager.snapStart();var x=!0,m=!1,g;try{for(var v=r[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,!0===d){var _=f.getScreenCTM(),w=_decomposeTransform19(_),k=w.scaleX,A=w.scaleY,C="left"===i||"right"===i?k:A,S=getComputedStyle(f);f[$initialStrokeWidth]=f.style.getPropertyValue("stroke-width"),f[$initialVectorEffect]=f.style.getPropertyValue("vector-effect");var E=_abs10(C)*_parseFloat11(S.getPropertyValue("stroke-width"));f.style.setProperty("stroke-width",E),f.style.setProperty("vector-effect","non-scaling-stroke")}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}if(this._canTransformElementsInUserSpace(r)){var T=_toArray(r),P=T[0],L=T.slice(1),D=Symbol();this._isTransformingInUserSpace=!0;var M=_getTransformToElement11(P,this),N=!0,I=!1,R;try{for(var V=function(){var e=G.value,t=e.getScreenCTM().inverse(),n=_getComputedTransform13(e),a=r.filter(function(t){return t!==e}),i=[_getUserBBox9(e)],o=!0,s=!1,l;try{for(var d=a[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=_getTransformToElement11(c,e),h=_transformRect11(_getUserBBox9(c),p);i.push(h)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var b=_combineRects12(i);e[D]={clientToUserTransform:t,userTransform:n,bbox:b}},z=r[Symbol.iterator](),G;!(N=(G=z.next()).done);N=!0)V()}catch(e){I=!0,R=e}finally{try{!N&&z.return&&z.return()}finally{if(I)throw R}}window.addEventListener("pointermove",h=function(e){var t=!0,a=!1,o;try{for(var d=r[Symbol.iterator](),u;!(t=(u=d.next()).done);t=!0){var c=u.value,h=c[D],b=h.clientToUserTransform,x=h.userTransform,m=h.bbox,g=s.matrixTransform(b),v=new SVGPoint(e.clientX,e.clientY);{var y=n._ownerCanvas.snapManager.snapPoint(v);!1===_comparePoints2(v,y)&&(v=y,v.x-=l.x,v.y-=l.y)}var f=v.matrixTransform(b),_=f.x-g.x,w=f.y-g.y,k=n._scaleParams(_,w,m,i,p),A=k.centerX,C=k.centerY,S=k.scaleX,E=k.scaleY,T=SVGMatrix.fromMatrix(x);T.translateSelf(-A*(S-1),-C*(E-1)),T.scaleNonUniformSelf(S,E),c.setAttribute("transform",T.toString())}}catch(e){a=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(a)throw o}}})}else{var B=this._ownerCanvas.outermostSelectedElements.map(function(e){return _getClientBBox8(e)}),O=_combineRects12(B),q=!0,j=!1,U;try{for(var H=r[Symbol.iterator](),$;!(q=($=H.next()).done);q=!0){var F=$.value,Y=F.getScreenCTM(),X=Y.inverse(),W=_getComputedTransform13(F);F[$initialTransforms]={clientToUserTransform:Y,userToClientTransform:X,userTransform:W}}}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}window.addEventListener("pointermove",h=function(t){var a=!0,o=!1,s;try{for(var d=r[Symbol.iterator](),u;!(a=(u=d.next()).done);a=!0){var c=u.value,h=new SVGPoint(e.clientX,e.clientY),b=new SVGPoint(t.clientX,t.clientY);{var x=n._ownerCanvas.snapManager.snapPoint(b);!1===_comparePoints2(b,x)&&(b=x,b.x-=l.x,b.y-=l.y)}var m=b.x-h.x,g=b.y-h.y,v=c[$initialTransforms],y=v.clientToUserTransform,f=v.userToClientTransform,_=v.userTransform,w=n._scaleParams(m,g,O,i,p),k=w.centerX,A=w.centerY,C=w.scaleX,S=w.scaleY,E=SVGMatrix.fromMatrix(_);E.multiplySelf(f),E.translateSelf(-k*(C-1),-A*(S-1)),E.scaleNonUniformSelf(C,S),E.multiplySelf(y),c.setAttribute("transform",E.toString())}}catch(e){o=!0,s=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw s}}})}window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",b);var e=!0,t=!1,a;try{for(var o=r[Symbol.iterator](),s,l;!(e=(s=o.next()).done);e=!0)l=s.value,!0===d&&(l.style.setProperty("stroke-width",l[$initialStrokeWidth]),l.style.setProperty("vector-effect",l[$initialVectorEffect])),_reduceTransform9(l,{geometryPrecision:n._ownerCanvas.geometryPrecision,transformPrecision:n._ownerCanvas.transformPrecision,preserveStrokeWidth:d,preserveRectRadii:u,preserveRotation:c,transformDirection:i})}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}n._ownerCanvas.snapManager.snapEnd(),n._isScaling=!1,n._isTransformingInUserSpace=!1})}}},{key:"_onRotateGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=this._ownerApp.getConfig("bx-transformsettings:preserveRotation");if(a=null===a||a,this._ownerCanvas.undoManager.checkpoint("Rotate Transform"),this._canTransformElementsInUserSpace(n)&&(this._isTransformingInUserSpace=!0),1===n.length){var r=n[0],i=_getElementRotationAngle3(r),o=new SVGPoint(e.clientX,e.clientY),s=_getComputedTransformOriginClientPoint3([r]),l,d;this._isDraggingRotateGrippie=!0,window.addEventListener("pointermove",l=function(e){var n=new SVGPoint(e.clientX,e.clientY),a=_getRotationAngleFromPoints2(s,o,n),l=i+a;t._ownerApp.modKeys.shift&&(l=_snapRotationAngle2(l,15)),_setElementRotationAngle2(r,l)}),window.addEventListener("pointerup",d=function(){window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d),_reduceTransform9(r,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:!0,preserveRotation:a}),t._isDraggingRotateGrippie=!1,t._isTransformingInUserSpace=!1})}else{var u=_getComputedTransformOriginClientPoint3(n),c=new SVGPoint(e.clientX,e.clientY),p=!0,h=!1,b,x,m;try{for(var g=n[Symbol.iterator](),v;!(p=(v=g.next()).done);p=!0){var y=v.value,f=_getComputedTransform13(y),_=y.getScreenCTM(),w=_.inverse();y[$initialTransforms]={clientToUserTransform:_,userToClientTransform:w,userTransform:f}}}catch(e){h=!0,m=e}finally{try{!p&&g.return&&g.return()}finally{if(h)throw m}}this._isDraggingRotateGrippie=!0,window.addEventListener("pointermove",b=function(e){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[$initialTransforms],p=d.clientToUserTransform,h=d.userToClientTransform,b=d.userTransform,x=new SVGPoint(e.clientX,e.clientY),m=_getRotationAngleFromPoints2(u,c,x);t._ownerApp.modKeys.shift&&(m=_snapRotationAngle2(m,15));var g=SVGMatrix.fromMatrix(b);g.multiplySelf(h),g.rotateSelf(m,u.x,u.y),g.multiplySelf(p),l.setAttribute("transform",g.toString())}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",b),window.removeEventListener("pointerup",x);var e=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(e=(s=o.next()).done);e=!0)l=s.value,_reduceTransform9(l,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:!0,preserveRotation:a})}catch(e){r=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}t._isDraggingRotateGrippie=!1,t._isTransformingInUserSpace=!1})}}}},{key:"_onSkewGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=e.path[0].getAttribute("data-position"),r,i,o;o="top"===a||"bottom"===a?"horizontal":"vertical";var s=this._ownerApp.getConfig("bx-transformsettings:preserveStrokeWidth"),l=this._ownerApp.getConfig("bx-transformsettings:preserveRectRadii"),d=this._ownerApp.getConfig("bx-transformsettings:preserveRotation");s=null===s||s,l=null===l||l,d=null===d||d,this._ownerCanvas.undoManager.checkpoint("Skew Transform");var u=!0,c=!1,p;try{for(var h=n[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0){x=b.value,x[$initialStrokeWidth]=x.style.getPropertyValue("stroke-width"),x[$initialVectorEffect]=x.style.getPropertyValue("vector-effect");var m=x.getScreenCTM(),g=_decomposeTransform19(m),v=g.scaleX,y=g.scaleY,f=getComputedStyle(x),_=_abs10((v+y)/2)*_parseFloat11(f.getPropertyValue("stroke-width"));x.style.setProperty("stroke-width",_),x.style.setProperty("vector-effect","non-scaling-stroke")}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}if(this._canTransformElementsInUserSpace(n)){var w=_toArray(n),k=w[0],A=w.slice(1),C=_getUserBBox9(k),S=[],E=Symbol(),T=!0,P=!1,L;try{for(var D=A[Symbol.iterator](),M;!(T=(M=D.next()).done);T=!0){var N=M.value,I=_getTransformToElement11(N,k),R=_transformRect11(_getUserBBox9(N),I);S.push(R)}}catch(e){P=!0,L=e}finally{try{!T&&D.return&&D.return()}finally{if(P)throw L}}var V=_combineRects12([C].concat(S)),z=_getTransformToElement11(k,this),G=new SVGPoint(e.clientX,e.clientY),B=_getComputedTransformOriginClientPoint3(n),O=!0,q=!1,j;try{for(var U=n[Symbol.iterator](),H;!(O=(H=U.next()).done);O=!0){var $=H.value,F=$.getScreenCTM().inverse(),Y=_getComputedTransform13($);$[E]={clientToUserTransform:F,userTransform:Y}}}catch(e){q=!0,j=e}finally{try{!O&&U.return&&U.return()}finally{if(q)throw j}}window.addEventListener("pointermove",r=function(e){var a=t._ownerApp.modKeys,r=a.ctrl,i=a.alt,s=a.shift,l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=h[E],x=b.clientToUserTransform,m=b.userTransform,g=G.matrixTransform(x),v=B.matrixTransform(x),y=new SVGPoint(e.clientX,e.clientY),f=y.matrixTransform(x),_=_getRotationAngleFromPoints2(v,g,f),w=SVGMatrix.fromMatrix(m);w="horizontal"===o?_skew(w,-_,0,v.x,v.y):_skew(w,0,_,v.x,v.y),h.setAttribute("transform",w.toString())}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}})}else{var X=new SVGPoint(e.clientX,e.clientY),W=_getComputedTransformOriginClientPoint3(n),K=!0,Z=!1,Q;try{for(var J=n[Symbol.iterator](),ee;!(K=(ee=J.next()).done);K=!0){var te=ee.value,ne=te.getScreenCTM(),ae=ne.inverse(),re=_getComputedTransform13(te);te[$initialTransforms]={clientToUserTransform:ne,userToClientTransform:ae,userTransform:re}}}catch(e){Z=!0,Q=e}finally{try{!K&&J.return&&J.return()}finally{if(Z)throw Q}}window.addEventListener("pointermove",r=function(e){var t=!0,a=!1,r;try{for(var i=n[Symbol.iterator](),s;!(t=(s=i.next()).done);t=!0){var l=s.value,d=l[$initialTransforms],u=d.clientToUserTransform,c=d.userToClientTransform,p=d.userTransform,h=new SVGPoint(e.clientX,e.clientY),b=_getRotationAngleFromPoints2(W,X,h),x=SVGMatrix.fromMatrix(p);x.multiplySelf(c),x="horizontal"===o?_skew(x,-b,0,W.x,W.y):_skew(x,0,b,W.x,W.y),x.multiplySelf(u),l.setAttribute("transform",x.toString())}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}})}window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var e=!0,a=!1,o;try{for(var s=n[Symbol.iterator](),u,c;!(e=(u=s.next()).done);e=!0)c=u.value,c.style.setProperty("stroke-width",c[$initialStrokeWidth]),c.style.setProperty("vector-effect",c[$initialVectorEffect]),_reduceTransform9(c,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:l,preserveRotation:d})}catch(e){a=!0,o=e}finally{try{!e&&s.return&&s.return()}finally{if(a)throw o}}})}}},{key:"_onOriginGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=new SVGPoint(e.clientX,e.clientY),r=!0,i=!1,o,s,l;try{for(var d=n[Symbol.iterator](),u;!(r=(u=d.next()).done);r=!0){var c=u.value,p=c.getScreenCTM().inverse(),h=_getUserBBox9(c);c[$initialTransforms]={clientToUserTransform:p},c[$initialUserBBox]=h}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}this._ownerCanvas.undoManager.checkpoint("Transform Origin");var b=_getComputedTransformOriginClientPoint3(n);window.addEventListener("pointermove",o=function(e){var r=new SVGPoint(e.clientX,e.clientY),i=new _Vector3(a,r),o=new SVGPoint(b.x+i.x,b.y+i.y),s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p[$initialTransforms].clientToUserTransform,m=p[$initialUserBBox],g=o.matrixTransform(h),v=_userPointToBBoxPoint3(g,m),f=_round25(v.x,t._ownerCanvas.geometryPrecision),x=_round25(v.y,t._ownerCanvas.geometryPrecision);p.setAttribute("data-bx-origin",f+" "+x)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}),window.addEventListener("pointerup",s=function(){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",s)})}}},{key:"_onRotateGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.removeAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onSkewGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.removeAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onOriginGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.removeAttribute("data-bx-origin")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippies",value:function(){"scale"===this.mode?this._updateScaleGrippies():"rotate-and-skew"===this.mode&&(this._updateRotateGrippies(),this._updateSkewGrippies(),!1===this._isDraggingRotateGrippie&&this._updateOriginGrippie())}},{key:"_updateScaleGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=scaleGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._scaleGrippiesByPosition,r=!0,i=!1,o;try{for(var s=this["#scale-grippies"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.width.baseVal.value=t,d.height.baseVal.value=t}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u;if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var c=_toArray(e),p=c[0],h=c.slice(1),b=_getUserBBox9(p),x=[],m=!0,g=!1,v;try{for(var y=h[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=_getTransformToElement11(_,p),k=_transformRect11(_getUserBBox9(_),w);x.push(k)}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}u=_combineRects12([b].concat(x));var A=_getTransformToElement11(p,this),C=new SVGPoint(u.x+u.width/2,u.y).matrixTransform(A);a.top.x.baseVal.value=C.x-t/2,a.top.y.baseVal.value=C.y-t/2;var S=new SVGPoint(u.x+u.width/2,u.y+u.height).matrixTransform(A);a.bottom.x.baseVal.value=S.x-t/2,a.bottom.y.baseVal.value=S.y-t/2;var E=new SVGPoint(u.x,u.y+u.height/2).matrixTransform(A);a.left.x.baseVal.value=E.x-t/2,a.left.y.baseVal.value=E.y-t/2;var T=new SVGPoint(u.x+u.width,u.y+u.height/2).matrixTransform(A);a.right.x.baseVal.value=T.x-t/2,a.right.y.baseVal.value=T.y-t/2;var P=new SVGPoint(u.x,u.y).matrixTransform(A);a["top-left"].x.baseVal.value=P.x-t/2,a["top-left"].y.baseVal.value=P.y-t/2;var L=new SVGPoint(u.x+u.width,u.y).matrixTransform(A);a["top-right"].x.baseVal.value=L.x-t/2,a["top-right"].y.baseVal.value=L.y-t/2;var D=new SVGPoint(u.x,u.y+u.height).matrixTransform(A);a["bottom-left"].x.baseVal.value=D.x-t/2,a["bottom-left"].y.baseVal.value=D.y-t/2;var M=new SVGPoint(u.x+u.width,u.y+u.height).matrixTransform(A);a["bottom-right"].x.baseVal.value=M.x-t/2,a["bottom-right"].y.baseVal.value=M.y-t/2}else{var N=this.getScreenCTM().inverse(),I=e.map(function(e){return _getClientBBox8(e)});u=_combineRects12(I),u=_transformRect11(u,N),a.top.x.baseVal.value=u.x+u.width/2-t/2,a.top.y.baseVal.value=u.y-t/2,a.bottom.x.baseVal.value=u.x+u.width/2-t/2,a.bottom.y.baseVal.value=u.y+u.height-t/2,a.left.x.baseVal.value=u.x-t/2,a.left.y.baseVal.value=u.y+u.height/2-t/2,a.right.x.baseVal.value=u.x+u.width-t/2,a.right.y.baseVal.value=u.y+u.height/2-t/2,a["top-left"].x.baseVal.value=u.x-t/2,a["top-left"].y.baseVal.value=u.y-t/2,a["top-right"].x.baseVal.value=u.x+u.width-t/2,a["top-right"].y.baseVal.value=u.y-t/2,a["bottom-left"].x.baseVal.value=u.x-t/2,a["bottom-left"].y.baseVal.value=u.y+u.height-t/2,a["bottom-right"].x.baseVal.value=u.x+u.width-t/2,a["bottom-right"].y.baseVal.value=u.y+u.height-t/2}a.top.style.visibility=0===u.height?"hidden":null,a.bottom.style.visibility=0===u.height?"hidden":null,a.left.style.visibility=0===u.width?"hidden":null,a.right.style.visibility=0===u.width?"hidden":null,a["top-left"].style.visibility=0===u.width||0===u.height?"hidden":null,a["top-right"].style.visibility=0===u.width||0===u.height?"hidden":null,a["bottom-left"].style.visibility=0===u.width||0===u.height?"hidden":null,a["bottom-right"].style.visibility=0===u.width||0===u.height?"hidden":null}}},{key:"_updateRotateGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=rotateGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._rotateGrippiesByPosition,r=!0,i=!1,o,s;try{for(var l=this["#rotate-grippies"].children[Symbol.iterator](),d,u;!(r=(d=l.next()).done);r=!0)u=d.value,u.width.baseVal.value=t,u.height.baseVal.value=t}catch(e){i=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var c=_toArray(e),p=c[0],h=c.slice(1),b=_getUserBBox9(p),x=[],m=!0,g=!1,v;try{for(var y=h[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=_getTransformToElement11(_,p),k=_transformRect11(_getUserBBox9(_),w);x.push(k)}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}o=_combineRects12([b].concat(x));var A=_getTransformToElement11(p,this),C=new SVGPoint(o.x,o.y).matrixTransform(A);a["top-left"].x.baseVal.value=C.x-t/2,a["top-left"].y.baseVal.value=C.y-t/2;var S=new SVGPoint(o.x+o.width,o.y).matrixTransform(A);a["top-right"].x.baseVal.value=S.x-t/2,a["top-right"].y.baseVal.value=S.y-t/2;var E=new SVGPoint(o.x,o.y+o.height).matrixTransform(A);a["bottom-left"].x.baseVal.value=E.x-t/2,a["bottom-left"].y.baseVal.value=E.y-t/2;var T=new SVGPoint(o.x+o.width,o.y+o.height).matrixTransform(A);a["bottom-right"].x.baseVal.value=T.x-t/2,a["bottom-right"].y.baseVal.value=T.y-t/2}else{var P=this.getScreenCTM().inverse(),L=e.map(function(e){return _getClientBBox8(e)});o=_combineRects12(L),o=_transformRect11(o,P),a["top-left"].x.baseVal.value=o.x-t/2,a["top-left"].y.baseVal.value=o.y-t/2,a["top-right"].x.baseVal.value=o.x+o.width-t/2,a["top-right"].y.baseVal.value=o.y-t/2,a["bottom-left"].x.baseVal.value=o.x-t/2,a["bottom-left"].y.baseVal.value=o.y+o.height-t/2,a["bottom-right"].x.baseVal.value=o.x+o.width-t/2,a["bottom-right"].y.baseVal.value=o.y+o.height-t/2}a["bottom-left"].style.visibility=0===o.width||0===o.height?"hidden":null,a["bottom-right"].style.visibility=0===o.width||0===o.height?"hidden":null}}},{key:"_updateSkewGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=skewGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._skewGrippiesByPosition,r=!0,i=!1,o,s;try{for(var l=this["#skew-grippies"].children[Symbol.iterator](),d,u;!(r=(d=l.next()).done);r=!0)u=d.value,u.width.baseVal.value=t,u.height.baseVal.value=t}catch(e){i=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var c=_toArray(e),p=c[0],h=c.slice(1),b=_getUserBBox9(p),x=[],m=!0,g=!1,v;try{for(var y=h[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=_getTransformToElement11(_,p),k=_transformRect11(_getUserBBox9(_),w);x.push(k)}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}o=_combineRects12([b].concat(x));var A=_getTransformToElement11(p,this),C=new SVGPoint(o.x+o.width/2,o.y).matrixTransform(A);a.top.x.baseVal.value=C.x-t/2,a.top.y.baseVal.value=C.y-t/2;var S=new SVGPoint(o.x+o.width/2,o.y+o.height).matrixTransform(A);a.bottom.x.baseVal.value=S.x-t/2,a.bottom.y.baseVal.value=S.y-t/2;var E=new SVGPoint(o.x,o.y+o.height/2).matrixTransform(A);a.left.x.baseVal.value=E.x-t/2,a.left.y.baseVal.value=E.y-t/2;var T=new SVGPoint(o.x+o.width,o.y+o.height/2).matrixTransform(A);a.right.x.baseVal.value=T.x-t/2,a.right.y.baseVal.value=T.y-t/2}else{var P=this.getScreenCTM().inverse(),L=e.map(function(e){return _getClientBBox8(e)});o=_combineRects12(L),o=_transformRect11(o,P),a.top.x.baseVal.value=o.x+o.width/2-t/2,a.top.y.baseVal.value=o.y-t/2,a.bottom.x.baseVal.value=o.x+o.width/2-t/2,a.bottom.y.baseVal.value=o.y+o.height-t/2,a.left.x.baseVal.value=o.x-t/2,a.left.y.baseVal.value=o.y+o.height/2-t/2,a.right.x.baseVal.value=o.x+o.width-t/2,a.right.y.baseVal.value=o.y+o.height/2-t/2}a.top.style.visibility=0===o.width||0===o.height?"hidden":null,a.bottom.style.visibility=0===o.width||0===o.height?"hidden":null,a.left.style.visibility=0===o.width||0===o.height?"hidden":null,a.right.style.visibility=0===o.width||0===o.height?"hidden":null}}},{key:"_updateOriginGrippie",value:function(){if(1<=this._ownerCanvas.outermostSelectedElements.length){var e=originGrippieSize/this._ownerCanvas.scale,t=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),n=_getComputedTransformOriginClientPoint3(this._ownerCanvas.outermostSelectedElements);n=n.matrixTransform(t),this["#origin-grippie"].setAttribute("width",e),this["#origin-grippie"].setAttribute("height",e),this["#origin-grippie"].setAttribute("x",n.x-e/2),this["#origin-grippie"].setAttribute("y",n.y-e/2)}}},{key:"_updateDropShadows",value:function(){this["#bx-transformhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"blink",value:async function(){this["#grippies"].style.setProperty("display","none"),await _sleep11(200),0<this._ownerCanvas.outermostSelectedElements.length&&this["#grippies"].style.setProperty("display","block")}},{key:"_canTransformElementsInUserSpace",value:function(e){var t=2;if(1<e.length){var n=_toArray(e),a=n[0],r=n.slice(1),i=!0,o=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,u.parentElement!==a.parentElement)return!1}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=_getComputedTransform13(a),p=_round25(atan(c.c/c.d),t),h=_round25(atan(-c.b/c.a),t),b=!0,x=!1,m;try{for(var g=r[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=_getComputedTransform13(y),_=_round25(atan(f.c/f.d),t),w=_round25(atan(-f.b/f.a),t);if(_!==p||w!==h)return!1}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}}return!0}},{key:"_scaleParams",value:function(e,t,n,a,r){var i=this._ownerApp.modKeys,o=i.ctrl,s=i.alt,l=i.shift,d,u,c,p,h;return!1===r?o||l?!o&&l?h="B":o&&!l?h="C":o&&l&&(h="D"):h="A":!0===r&&(o||l?!o&&l?h="A":o&&!l?h="D":o&&l&&(h="C"):h="B"),"top"===a?"A"===h?(d=n.x+n.width/2,u=n.y+n.height,c=1,p=(n.height-t)/n.height):"B"===h?(d=n.x+n.width/2,u=n.y+n.height,p=(n.height-t)/n.height,c=p):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=1,p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,p=(n.height-n.height/2-t)/(n.height-n.height/2),c=p):"bottom"===a?"A"===h?(d=n.x+n.width/2,u=n.y,c=1,p=(n.height+t)/n.height):"B"===h?(d=n.x+n.width/2,u=n.y,p=(n.height+t)/n.height,c=p):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=1,p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,p=(n.height-n.height/2+t)/(n.height-n.height/2),c=p):"left"===a?"A"===h?(d=n.x+n.width,u=n.y+n.height/2,c=(n.width-e)/n.width,p=1):"B"===h?(d=n.x+n.width,u=n.y+n.height/2,c=(n.width-e)/n.width,p=c):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=1):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=c):"right"===a&&("A"===h?(d=n.x,u=n.y+n.height/2,c=(n.width+e)/n.width,p=1):"B"===h?(d=n.x,u=n.y+n.height/2,c=(n.width+e)/n.width,p=c):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=1):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=p=(n.width-n.width/2+e)/(n.width-n.width/2))),"top-left"===a?"A"===h?(d=n.x+n.width,u=n.y+n.height,c=(n.width-e)/n.width,p=(n.height-t)/n.height):"B"===h?(d=n.x+n.width,u=n.y+n.height,c=(n.width-e)/n.width,p=(n.height-t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c):"top-right"===a?"A"===h?(d=n.x,u=n.y+n.height,c=(n.width+e)/n.width,p=(n.height-t)/n.height):"B"===h?(d=n.x,u=n.y+n.height,c=(n.width+e)/n.width,p=(n.height-t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c):"bottom-left"===a?"A"===h?(d=n.x+n.width,u=n.y,c=(n.width-e)/n.width,p=(n.height+t)/n.height):"B"===h?(d=n.x+n.width,u=n.y,c=(n.width-e)/n.width,p=(n.height+t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c):"bottom-right"===a&&("A"===h?(d=n.x,u=n.y,c=(n.width+e)/n.width,p=(n.height+t)/n.height):"B"===h?(d=n.x,u=n.y,c=(n.width+e)/n.width,p=(n.height+t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c)),{centerX:d,centerY:u,scaleX:c,scaleY:p}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"mode",get:function(){return this.hasAttribute("mode")?this.getAttribute("mode"):"scale"},set:function(e){this.setAttribute("mode",e)}},{key:"isScaling",get:function(){return this._isScaling}}],[{key:"observedAttributes",get:function(){return["enabled","mode"]}}]),t}(SVGGElement);customElements.define("bx-transformhud",BXTransformHudElement,{extends:"g"})}}{{var _getUserBBox10=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen46=BoxySVG.utils.element,_createElement25=_BoxySVG$utils$elemen46.createElement,_queryGraphicsElements=_BoxySVG$utils$elemen46.queryGraphicsElements,_closest48=_BoxySVG$utils$elemen46.closest,_isPointerMoveIntentional7=BoxySVG.utils.event.isPointerMoveIntentional,_getGradientColorAtOffset=BoxySVG.utils.gradient.getGradientColorAtOffset,_BoxySVG$utils$math5=BoxySVG.utils.math,_normalize6=_BoxySVG$utils$math5.normalize,_round26=_BoxySVG$utils$math5.round,_roundMatrix4=BoxySVG.utils.matrix.roundMatrix,_BoxySVG$utils$paint2=BoxySVG.utils.paint,_getPaintType2=_BoxySVG$utils$paint2.getPaintType,_getPaintServer5=_BoxySVG$utils$paint2.getPaintServer,_getRenderedTextNodes8=BoxySVG.utils.text.getRenderedTextNodes,_throttle18=BoxySVG.utils.time.throttle,_BoxySVG$utils$geomet14=BoxySVG.utils.geometry,_getPointAtFraction=_BoxySVG$utils$geomet14.getPointAtFraction,_getNearestPointOnLine2=_BoxySVG$utils$geomet14.getNearestPointOnLine,_getDistanceBetweenPoints4=_BoxySVG$utils$geomet14.getDistanceBetweenPoints,_getRotationAngleFromPoints3=_BoxySVG$utils$geomet14.getRotationAngleFromPoints,_snapPointToAngleMultiple=_BoxySVG$utils$geomet14.snapPointToAngleMultiple,_BoxySVG$utils$transf11=BoxySVG.utils.transformGeneral,_getComputedTransform14=_BoxySVG$utils$transf11.getComputedTransform,_getTransformFromPoints5=_BoxySVG$utils$transf11.getTransformFromPoints,_getTransformToElement12=_BoxySVG$utils$transf11.getTransformToElement,_bboxPointToUserPoint2=_BoxySVG$utils$transf11.bboxPointToUserPoint,_userPointToBBoxPoint4=_BoxySVG$utils$transf11.userPointToBBoxPoint,_BoxySVG$classes3=BoxySVG.classes,_Shortcut10=_BoxySVG$classes3.Shortcut,_Vector4=_BoxySVG$classes3.Vector,_keys3=Object.keys,$gradient=Symbol(),$gradientUser=Symbol(),$stop=Symbol(),_SVGUnitTypes5=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE2=_SVGUnitTypes5.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4=_SVGUnitTypes5.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,grippieSize=6,_shadowHTML12="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.subhud:focus{outline:0}.slider{stroke:#fff;stroke-width:7;stroke-linecap:round;outline:0}.slider,.slider-shadow,.stop-grippie{vector-effect:non-scaling-stroke}.slider-shadow{stroke:rgba(0,0,0,.3);stroke-linecap:round;pointer-events:none;outline:0;stroke-width:10}.stop-grippie{fill:#000;stroke:#fff;stroke-width:2;filter:url(#bx-lineargradienthud-grippie-shadow)}.stop-grippie[data-selected]{stroke:#bababa}.subhud:focus .stop-grippie[data-selected]{stroke:#93d2ff}</style>\n\n    <defs>\n      <filter id=\"bx-lineargradienthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-lineargradienthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-lineargradienthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\" tabindex=\"0\">\n        <line class=\"slider-shadow\"></line>\n        <line class=\"slider\"></line>\n        <g class=\"stop-grippies\"></g>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXLinearGradientHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAllStops()}}},this._updateAll80Th=_throttle18(this._updateAll,80,this),this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML12;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("keydown",function(t){return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("pointerup",function(t){return e._onShadowRootPointerUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest48(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest48(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&(this.selectedStops=[],this._updateAll80Th()))}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_onDisabled",value:function(){this._selectStops([]),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudPointerDownListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateAll80Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._updateAll80Th()}},{key:"_onArtboardMutation",value:function(e){if(this._draggedGrippie)this._updatePositions(this._draggedGrippie.parentElement.parentElement);else if(this._draggedSlider)this._updatePositions(this._draggedSlider.parentElement);else{var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,"style"===o.attributeName&&"stop"===o.target.localName?this._updateGrippiesColor():this._updateAll80Th()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onUndoOrRedo",value:function(){this._selectStops([])}},{key:"_onArtboardPointerDown",value:function(e){0===e.button&&this._selectStops([])}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&0===e.button&&this._selectStops([])}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderPointerDown(e):e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerDown(e);var n,a;this._pointerMovedAfterPointerDown=!1,this._pointerDownTimeStamp=e.timeStamp,window.addEventListener("pointermove",n=function(){t._pointerMovedAfterPointerDown=!0}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",n)})}}},{key:"_onShadowRootPointerUp",value:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerUp(e)}},{key:"_onShadowRootDblClick",value:function(e){100>e.timeStamp-this._pointerDownTimeStamp&&e.target.classList.contains("slider")&&this._onSliderDblClick(e)}},{key:"_onStopGrippiePointerDown",value:function(e){var t=e.target,n=t[$stop],a=n.closest("linearGradient"),r=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),i=this._selectedStops.filter(function(e){return e.closest("linearGradient")===a}),o=r[0],s=r[r.length-1],l=this._ownerApp.modKeys,d=l.alt,u=l.shift;this._pointerDownSelectedStops=[].concat(_toConsumableArray(i)),!1===u?!1===i.includes(n)&&this._selectStops([n]):!0===u&&!1===i.includes(n)&&(i.push(n),this._selectStops(i)),n===o&&0===n.offset.baseVal&&!1===d?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"start"):n===s&&1===n.offset.baseVal&&!1===d?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"end"):this._onDraggableStopGrippiePointerDown(e)}},{key:"_onStopGrippiePointerUp",value:function(e){if(!this._pointerMovedAfterPointerDown){var t=e.target,n=this._pointerDownSelectedStops,a=t[$stop],r=t.closest(".subhud"),i=r[$gradientUser],o=this._ownerApp.modKeys.shift,s=[],l=!0,d=!1,u;try{for(var c=this._ownerCanvas.selectedElements[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,("g"===h.localName||"a"===h.localName)&&h.contains(i)){var b=!0,x=!1,m=void 0;try{for(var g=_queryGraphicsElements([].concat(_toConsumableArray(h.children)))[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,s.unshift(y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}}else s.push(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.isSelectableElement(i)&&(s=s.filter(function(e){return e!==i}),s.unshift(i)),this._ownerCanvas.selectedElements=s;for(var f=i.parentElement;f!==this._ownerCanvas.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){this._ownerCanvas.currentContainer=f;break}!0===o&&!0===this._pointerDownSelectedStops.includes(a)&&(n=n.filter(function(e){return e!==a}),this._selectStops(n))}}},{key:"_onDraggableStopGrippiePointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a.querySelector(".slider"),i=this._ownerCanvas.geometryPrecision,o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=s.inverse(),d=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),u=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),c=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value),p=c.matrixTransform(s),h=_getNearestPointOnLine2(d,u,c,!1),b=_slicedToArray(h,1),x=b[0],m=_getDistanceBetweenPoints4(d,x)/_getDistanceBetweenPoints4(d,u),g=!1,v,y;this._draggedGrippie=n,n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",v=function(n){!1==g&&(t._ownerCanvas.undoManager.checkpoint("Move gradient stop"),g=!0);var a=new SVGPoint(p.x+n.clientX-e.clientX,p.y+n.clientY-e.clientY),r=a.matrixTransform(l),i=_getNearestPointOnLine2(d,u,r,!1),s=_slicedToArray(i,1),c=s[0],h=_getDistanceBetweenPoints4(d,c)/_getDistanceBetweenPoints4(d,u),b=h-m,x=!0,v=!1,y;try{for(var f=t._selectedStops[Symbol.iterator](),_;!(x=(_=f.next()).done);x=!0){var w=_.value,k=o.get(w),A=k.minOffset,C=k.maxOffset,S=k.initialOffset;S+b<A?w.setAttribute("offset",A):S+b>C?w.setAttribute("offset",C):w.setAttribute("offset",S+b)}}catch(e){v=!0,y=e}finally{try{!x&&f.return&&f.return()}finally{if(v)throw y}}}),n.addEventListener("lostpointercapture",y=function(){n.removeEventListener("pointermove",v),n.removeEventListener("lostpointercapture",y);var e=!0,a=!1,r;try{for(var o=t._selectedStops[Symbol.iterator](),s,l;!(e=(s=o.next()).done);e=!0)l=s.value,l.setAttribute("offset",_round26(l.offset.baseVal,i))}catch(e){a=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(a)throw r}}t._draggedGrippie=null})}},{key:"_onBoundingStopGrippieOrSliderEdgePointerDown",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"start",a=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(t){return t.contains(e.target)}),r=a[$gradient],i=a[$gradientUser],o=_getUserBBox10(i),s=i.getScreenCTM(),l=s.inverse(),d=_getComputedTransform14(r),u=this._ownerCanvas.transformPrecision,c=e.target,p=!1,h=!1,b,x,m,g,v,y,f,_;c.matches(".stop-grippie")?this._draggedGrippie=e.target:c.matches(".slider")&&(this._draggedSlider=e.target),c.setPointerCapture(e.pointerId);var w=function(){if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){"start"===n?(m=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),g=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value)):"end"===n&&(m=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),g=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value));var e=new _Vector4(g,m).getNormalVector();v=new SVGPoint(g.x+e.x,g.y+e.y);var t=m.matrixTransform(d),a=g.matrixTransform(d),i=v.matrixTransform(d);y=t.matrixTransform(s),f=a.matrixTransform(s),_=i.matrixTransform(s)}else if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){"start"===n?(m=new SVGPoint(r.x1.baseVal.valueInSpecifiedUnits,r.y1.baseVal.valueInSpecifiedUnits),g=new SVGPoint(r.x2.baseVal.valueInSpecifiedUnits,r.y2.baseVal.valueInSpecifiedUnits)):"end"===n&&(m=new SVGPoint(r.x2.baseVal.valueInSpecifiedUnits,r.y2.baseVal.valueInSpecifiedUnits),g=new SVGPoint(r.x1.baseVal.valueInSpecifiedUnits,r.y1.baseVal.valueInSpecifiedUnits));var l=new _Vector4(g,m).getNormalVector();v=new SVGPoint(g.x+l.x,g.y+l.y);var u=m.matrixTransform(d),c=g.matrixTransform(d),p=v.matrixTransform(d),h=_bboxPointToUserPoint2(u,o),b=_bboxPointToUserPoint2(c,o),x=_bboxPointToUserPoint2(p,o);y=h.matrixTransform(s),f=b.matrixTransform(s),_=x.matrixTransform(s)}};c.addEventListener("pointermove",b=function(n){if(!1==p)if(_isPointerMoveIntentional7(e,n,5))p=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient"),w();else return;var a=t._ownerApp.modKeys.shift,i=new SVGPoint(n.clientX+(y.x-e.clientX),n.clientY+(y.y-e.clientY)),s=new SVGPoint(y.x+n.clientX-e.clientX,y.y+n.clientY-e.clientY),c=SVGPoint.fromPoint(f),b,x,k,A;if(!1===a){var C=_getRotationAngleFromPoints3(f,y,i),S=new SVGMatrix().rotate(C,f.x,f.y);A=_.matrixTransform(S)}else if(!0===a){h=!0;var E=_snapPointToAngleMultiple(f,s,22.5),T=_slicedToArray(E,1),P=T[0];s=P}if(h){var L=new _Vector4(c,s).getNormalVector();A=new SVGPoint(c.x+L.x,c.y+L.y)}if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var D=s.matrixTransform(l),M=c.matrixTransform(l),N=A.matrixTransform(l);b=D.matrixTransform(d.inverse()),x=M.matrixTransform(d.inverse()),k=N.matrixTransform(d.inverse())}else if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var I=s.matrixTransform(l),R=c.matrixTransform(l),V=A.matrixTransform(l),z=_userPointToBBoxPoint4(I,o),G=_userPointToBBoxPoint4(R,o),B=_userPointToBBoxPoint4(V,o);b=z.matrixTransform(d.inverse()),x=G.matrixTransform(d.inverse()),k=B.matrixTransform(d.inverse())}var O=_getTransformFromPoints5(m,g,v,b,x,k),q=_roundMatrix4(d.multiply(O),u);r.setAttribute("gradientTransform",q.toString())}),c.addEventListener("lostpointercapture",x=function(){c.removeEventListener("pointermove",b),c.removeEventListener("lostpointercapture",x),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderPointerDown",value:function(e){var t=e.target,n=t.closest(".subhud"),a=n[$gradientUser],r=t.getScreenCTM(),i=new SVGPoint(e.clientX,e.clientY),o=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=o.matrixTransform(r),d=s.matrixTransform(r),u=new _Vector4(l,i).length,c=new _Vector4(d,i).length;5>=u?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"start"):5>=c?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"end"):this._onSliderBodyPointerDown(e)}},{key:"_onSliderBodyPointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a[$gradientUser],i=a[$gradient],o=_getUserBBox10(r),s=r.getScreenCTM(),l=s.inverse(),d=_getComputedTransform14(i),u=this._ownerCanvas.geometryPrecision,c=!1,p,h,b,x;if(this._draggedSlider=n,n.setPointerCapture(e.pointerId),i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var m=new SVGPoint(i.x1.baseVal.value,i.y1.baseVal.value),g=new SVGPoint(i.x2.baseVal.value,i.y2.baseVal.value),v=m.matrixTransform(d),y=g.matrixTransform(d);b=v.matrixTransform(s),x=y.matrixTransform(s)}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var f=new SVGPoint(i.x1.baseVal.valueInSpecifiedUnits,i.y1.baseVal.valueInSpecifiedUnits),_=new SVGPoint(i.x2.baseVal.valueInSpecifiedUnits,i.y2.baseVal.valueInSpecifiedUnits),w=f.matrixTransform(d),k=_.matrixTransform(d),A=_bboxPointToUserPoint2(w,o),C=_bboxPointToUserPoint2(k,o);b=A.matrixTransform(s),x=C.matrixTransform(s)}n.addEventListener("pointermove",p=function(n){if(!1==c)if(_isPointerMoveIntentional7(e,n,5))c=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient");else return;var a,r;if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var s=new SVGPoint(b.x+n.clientX-e.clientX,b.y+n.clientY-e.clientY),p=new SVGPoint(x.x+n.clientX-e.clientX,x.y+n.clientY-e.clientY),h=s.matrixTransform(l),m=p.matrixTransform(l);a=h.matrixTransform(d.inverse()),r=m.matrixTransform(d.inverse())}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var g=new SVGPoint(b.x+n.clientX-e.clientX,b.y+n.clientY-e.clientY),v=new SVGPoint(x.x+n.clientX-e.clientX,x.y+n.clientY-e.clientY),y=g.matrixTransform(l),f=v.matrixTransform(l),_=_userPointToBBoxPoint4(y,o),w=_userPointToBBoxPoint4(f,o);a=_.matrixTransform(d.inverse()),r=w.matrixTransform(d.inverse())}i.setAttribute("x1",_round26(a.x,u)),i.setAttribute("y1",_round26(a.y,u)),i.setAttribute("x2",_round26(r.x,u)),i.setAttribute("y2",_round26(r.y,u))}),n.addEventListener("lostpointercapture",h=function(){n.removeEventListener("pointermove",p),n.removeEventListener("lostpointercapture",h),t._draggedSlider=null})}},{key:"_onSliderDblClick",value:function(e){this._ownerCanvas.undoManager.checkpoint("Add Stop");var t=e.target,n=t.closest(".subhud"),a=n[$gradient],r=this.getScreenCTM().inverse(),i=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=_getDistanceBetweenPoints4(o,l),u=_getDistanceBetweenPoints4(o,s),c=d/u;c=_normalize6(c,0,1,5);for(var p=null,h=0,b;h<i.length;h+=1)if(b=i[h],b.offset.baseVal<c)p=h;else if(b.offset.baseVal>c)break;var x=_createElement25("svg:stop");if(x.setAttribute("offset",_round26(c,this._ownerCanvas.geometryPrecision)),x.style.stopColor=_getGradientColorAtOffset(a,c),null===p){var m=[].concat(_toConsumableArray(a.children)).find(function(e){return"stop"===e.localName});m?m.before(x):a.append(x)}else i[p].after(x);this._selectStops([x])}},{key:"_onShadowRootKeyDown",value:function(e){var t=_Shortcut10.fromEvent(e);0===this._selectedStops.length||(t.matches("Backspace")?(e.stopPropagation(),this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Left"),this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Right"),this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Left"),this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Right"),this._moveSelectedStops(10,"right"))))}},{key:"_updateAll",value:function(){var e=this._getSelectedLinearGradientUsers();if(0===e.length)this["#subhuds"].innerHTML="";else{var t=this._shadowRoot.activeElement,n=[];this["#subhuds"].innerHTML="";var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getPaintServer5(l,this.context);if(!n.includes(d)){n.push(d);var u=[].concat(_toConsumableArray(d.children)).filter(function(e){return"stop"===e.localName}),c=this["#subhud-template"].cloneNode(!0);c.removeAttribute("id"),c[$gradient]=d,c[$gradientUser]=l;var p=c.querySelector(".stop-grippies"),h=document.createDocumentFragment(),b=!0,x=!1,m=void 0;try{for(var g=u[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=_createElement25("svg:circle");f.setAttribute("class","stop-grippie"),f[$stop]=y,0.95<y.offset.baseVal?h.prepend(f):p.append(f)}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}p.append(h),this["#subhuds"].append(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}if(t){var _=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(e){return e[$gradient]===t[$gradient]});_&&_.focus()}this._updatePositions(),this._updateGrippiesSize(),this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!(e&&o!==e)){var s=o[$gradient],l=o[$gradientUser],d=[].concat(_toConsumableArray(s.children)).filter(function(e){return"stop"===e.localName}),u=_getComputedTransform14(s),c=_getTransformToElement12(l,this),p=o.querySelector(".slider"),h=o.querySelector(".slider-shadow"),b=[].concat(_toConsumableArray(o.querySelector(".stop-grippies").children));if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var x=new SVGPoint(s.x1.baseVal.value,s.y1.baseVal.value),m=new SVGPoint(s.x2.baseVal.value,s.y2.baseVal.value),g=x.matrixTransform(u),v=m.matrixTransform(u),y=g.matrixTransform(c),f=v.matrixTransform(c);p.setAttribute("x1",y.x),p.setAttribute("y1",y.y),p.setAttribute("x2",f.x),p.setAttribute("y2",f.y),h.setAttribute("x1",y.x),h.setAttribute("y1",y.y),h.setAttribute("x2",f.x),h.setAttribute("y2",f.y);var _=!0,w=!1,k=void 0;try{for(var A=function(){var e=S.value,t=b.find(function(t){return t[$stop]===e}),n=_getPointAtFraction(y,f,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},C=d[Symbol.iterator](),S;!(_=(S=C.next()).done);_=!0)A()}catch(e){w=!0,k=e}finally{try{!_&&C.return&&C.return()}finally{if(w)throw k}}}else if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var E=_getUserBBox10(l),T=new SVGPoint(s.x1.baseVal.valueInSpecifiedUnits,s.y1.baseVal.valueInSpecifiedUnits),P=new SVGPoint(s.x2.baseVal.valueInSpecifiedUnits,s.y2.baseVal.valueInSpecifiedUnits),L=T.matrixTransform(u),D=P.matrixTransform(u),M=new SVGPoint(E.x+L.x*E.width,E.y+L.y*E.height),N=new SVGPoint(E.x+D.x*E.width,E.y+D.y*E.height),I=M.matrixTransform(c),R=N.matrixTransform(c);p.setAttribute("x1",I.x),p.setAttribute("y1",I.y),p.setAttribute("x2",R.x),p.setAttribute("y2",R.y),h.setAttribute("x1",I.x),h.setAttribute("y1",I.y),h.setAttribute("x2",R.x),h.setAttribute("y2",R.y);var V=!0,z=!1,G=void 0;try{for(var B=function(){var e=q.value,t=b.find(function(t){return t[$stop]===e}),n=_getPointAtFraction(I,R,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},O=d[Symbol.iterator](),q;!(V=(q=O.next()).done);V=!0)B()}catch(e){z=!0,G=e}finally{try{!V&&O.return&&O.return()}finally{if(z)throw G}}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateGrippiesColor",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.style.fill=c[$stop].style.stopColor}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll(".stop-grippie")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",grippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-lineargradienthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_updateGrippiesSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,this._selectedStops.includes(c[$stop])?c.setAttribute("data-selected",""):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesZOrder",value:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,a;try{for(var r=this._selectedStops[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=!0,l=!1,d=void 0;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p[$stop]===o&&p.parentElement.append(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_selectStops",value:function(e){0===e.length&&0===this._selectedStops.length||(this._selectedStops=[].concat(_toConsumableArray(e)),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")))}},{key:"_selectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient],n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=!0,r=!1,i;try{for(var o=this._selectedStops[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.closest("linearGradient")!==t&&n.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this._selectStops(n)}},{key:"_deselectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient];this._selectStops(this._selectedStops.filter(function(e){return e.closest("linearGradient")!==t}))}},{key:"_selectNextStop",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient];if(t){var n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t}),r=a[a.length-1],i=n[0],o=i;if(r&&1<n.length){for(var s=r.nextElementSibling;s;s=s.nextElementSibling)if("stop"===s.localName){o=s;break}this._selectStops([o])}}}},{key:"_deleteSelectedStops",value:function(){var e=this._shadowRoot.activeElement;if(null!==e){var t=e[$gradient],n=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t});if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Delete gradient stop(s)");var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.remove()}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}this._selectStops([])}}},{key:"_moveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;if(null!==n){var a=n.querySelector(".slider"),r=n[$gradient],i=this._selectedStops.filter(function(e){return e.closest("linearGradient")===r}),o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=new SVGPoint(a.x1.baseVal.value,a.y1.baseVal.value),d=new SVGPoint(a.x2.baseVal.value,a.y2.baseVal.value),u=l.matrixTransform(s),c=d.matrixTransform(s),p=new _Vector4(u,c),h=e/p.length,b=!0,x=!1,m;try{for(var g=i[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=o.get(y),_=f.minOffset,w=f.maxOffset;if("left"===t){var k=_normalize6(y.offset.baseVal-h,_,w,4);y.setAttribute("offset",k)}else if("right"===t){var A=_normalize6(y.offset.baseVal+h,_,w,4);y.setAttribute("offset",A)}}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}}}},{key:"_canMoveActiveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){var n=t.querySelector(".slider"),a=t[$gradient],r=this._selectedStops.find(function(e){return e.closest("linearGradient")===a});if(null!==r){var i=this._getMoveOffsetsForSelectedStops(),o=i.get(r),s=o.minOffset,l=o.maxOffset;return"left"===e?r.offset.baseVal>s:"right"===e?r.offset.baseVal<l:void 0}}}},{key:"_getPreviousNotSelectedStop",value:function(e){for(var t=e;t;t=t.previousElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getNextNotSelectedStop",value:function(e){for(var t=e;t;t=t.nextElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getMoveOffsetsForSelectedStops",value:function(){var e=new Map,t=[],n=!0,a=!1,r;try{for(var i=this._selectedStops[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=this._getPreviousNotSelectedStop(s),d=this._getNextNotSelectedStop(s),u={};u.min=l?s.offset.baseVal-l.offset.baseVal:s.offset.baseVal,u.max=d?d.offset.baseVal-s.offset.baseVal:1-s.offset.baseVal,t.push(u)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}if(0<t.length){var c=t[0].min,p=t[0].max,h=!0,b=!1,x;try{for(var m=t[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,v.min<c&&(c=v.min),v.max<p&&(p=v.max)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}var y=!0,f=!1,_;try{for(var w=this._selectedStops[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,e.set(A,{initialOffset:A.offset.baseVal,minOffset:A.offset.baseVal-c,maxOffset:A.offset.baseVal+p})}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return e}},{key:"_getSelectedLinearGradientUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes8(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var h=!0,b=!1,x=void 0;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.closest("text, textPath, tspan, a");S&&!a.includes(S)&&a.push(S)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"linearGradient"===_getPaintType2(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}},{key:"selectedStops",get:function(){return this._selectedStops.filter(function(e){return e.isConnected})},set:function(e){this._selectStops(e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-lineargradienthud",BXLinearGradientHudElement,{extends:"g"})}}{var _getUserBBox11=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen47=BoxySVG.utils.element,_createElement26=_BoxySVG$utils$elemen47.createElement,_queryGraphicsElements2=_BoxySVG$utils$elemen47.queryGraphicsElements,_closest49=_BoxySVG$utils$elemen47.closest,_isPointerMoveIntentional8=BoxySVG.utils.event.isPointerMoveIntentional,_getGradientColorAtOffset2=BoxySVG.utils.gradient.getGradientColorAtOffset,_BoxySVG$utils$math6=BoxySVG.utils.math,_normalize7=_BoxySVG$utils$math6.normalize,_round27=_BoxySVG$utils$math6.round,_BoxySVG$utils$matrix=BoxySVG.utils.matrix,_compareMatrixes=_BoxySVG$utils$matrix.compareMatrixes,_roundMatrix5=_BoxySVG$utils$matrix.roundMatrix,_BoxySVG$utils$paint3=BoxySVG.utils.paint,_getPaintType3=_BoxySVG$utils$paint3.getPaintType,_getPaintServer6=_BoxySVG$utils$paint3.getPaintServer,_getRenderedTextNodes9=BoxySVG.utils.text.getRenderedTextNodes,_throttle19=BoxySVG.utils.time.throttle,_decomposeTransform22=BoxySVG.utils.transformDecomposition.decomposeTransform,_BoxySVG$utils$geomet15=BoxySVG.utils.geometry,_getPointAtFraction2=_BoxySVG$utils$geomet15.getPointAtFraction,_getPointBetweenTwoPoints=_BoxySVG$utils$geomet15.getPointBetweenTwoPoints,_getNearestPointOnLine3=_BoxySVG$utils$geomet15.getNearestPointOnLine,_getDistanceBetweenPoints5=_BoxySVG$utils$geomet15.getDistanceBetweenPoints,_getRotationAngleFromPoints4=_BoxySVG$utils$geomet15.getRotationAngleFromPoints,_snapPointToAngleMultiple2=_BoxySVG$utils$geomet15.snapPointToAngleMultiple,_comparePoints3=_BoxySVG$utils$geomet15.comparePoints,_snapPointToAngle=_BoxySVG$utils$geomet15.snapPointToAngle,_BoxySVG$utils$transf12=BoxySVG.utils.transformGeneral,_getComputedTransform15=_BoxySVG$utils$transf12.getComputedTransform,_getTransformFromPoints6=_BoxySVG$utils$transf12.getTransformFromPoints,_getTransformToElement13=_BoxySVG$utils$transf12.getTransformToElement,_bboxPointToUserPoint3=_BoxySVG$utils$transf12.bboxPointToUserPoint,_userPointToBBoxPoint5=_BoxySVG$utils$transf12.userPointToBBoxPoint,_BoxySVG$classes4=BoxySVG.classes,_Shortcut11=_BoxySVG$classes4.Shortcut,_Vector5=_BoxySVG$classes4.Vector,_keys4=Object.keys,_$gradient=Symbol(),_$gradientUser=Symbol(),_$stop=Symbol(),_SVGUnitTypes6=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE3=_SVGUnitTypes6.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5=_SVGUnitTypes6.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_shadowHTML13="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.subhud:focus{outline:0}.slider{stroke:#fff;stroke-width:7;stroke-linecap:round;outline:0}.slider,.slider-shadow,.stop-grippie{vector-effect:non-scaling-stroke}.slider-shadow{stroke:rgba(0,0,0,.3);stroke-linecap:round;pointer-events:none;outline:0;stroke-width:10}.stop-grippie{fill:#000;stroke:#fff;stroke-width:2;filter:url(#bx-radialgradienthud-grippie-shadow)}.stop-grippie[data-selected]{stroke:#bababa}.subhud:focus .stop-grippie[data-selected]{stroke:#93d2ff}.r2-grippie,.r2-outline{vector-effect:non-scaling-stroke}.r2-outline{stroke-dasharray:5,5;stroke-linecap:round;outline:0;pointer-events:none;fill:none;stroke:#2e66f9;stroke-width:1.5}.r2-grippie{fill:#2e66f9;stroke:#fff;stroke-width:2;filter:url(#bx-radialgradienthud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-radialgradienthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-radialgradienthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-radialgradienthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\" tabindex=\"0\">\n        <line class=\"r2-outline\"></line>\n        <line class=\"slider-shadow\"></line>\n        <line class=\"slider\"></line>\n        <circle class=\"r2-grippie grippie\"></circle>\n        <g class=\"stop-grippies\"></g>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRadialGradientHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAllStops()}}},this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._updateAll80Th=_throttle19(this._updateAll,80,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML13;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("keydown",function(t){return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("pointerup",function(t){return e._onShadowRootPointerUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest49(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest49(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&(this.selectedStops=[],this._updateAll80Th()))}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_onDisabled",value:function(){this._selectStops([]),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateAll80Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._updateAll80Th()}},{key:"_onArtboardMutation",value:function(e){if(this._draggedGrippie)this._updatePositions(this._draggedGrippie.closest(".subhud"));else if(this._draggedSlider)this._updatePositions(this._draggedSlider.parentElement);else{var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,"style"===o.attributeName&&"stop"===o.target.localName?this._updateGrippiesColor():this._updateAll80Th()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onUndoOrRedo",value:function(){this._selectStops([])}},{key:"_onArtboardPointerDown",value:function(e){0===e.button&&e.target!==this&&this._selectStops([])}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&0===e.button&&this._selectStops([])}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderPointerDown(e):e.target.classList.contains("stop-grippie")?this._onStopGrippiePointerDown(e):e.target.classList.contains("r2-grippie")&&this._onRadiusGrippieOrSliderEdgePointerDown(e,"r2");var n,a;this._pointerMovedAfterPointerDown=!1,this._pointerDownTimeStamp=e.timeStamp,window.addEventListener("pointermove",n=function(){t._pointerMovedAfterPointerDown=!0}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",n)})}}},{key:"_onShadowRootPointerUp",value:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerUp(e)}},{key:"_onShadowRootDblClick",value:function(e){100>e.timeStamp-this._pointerDownTimeStamp&&e.target.classList.contains("slider")&&this._onSliderDblClick(e)}},{key:"_onStopGrippiePointerDown",value:function(e){var t=e.target,n=t[_$stop],a=n.closest("radialGradient"),r=this._selectedStops.filter(function(e){return e.closest("radialGradient")===a}),i=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=i[0],s=i[i.length-1],l=this._ownerApp.modKeys,d=l.alt,u=l.shift;this._pointerDownSelectedStops=[].concat(_toConsumableArray(r)),!1===u?!1===r.includes(n)&&this._selectStops([n]):!0===u&&!1===r.includes(n)&&(r.push(n),this._selectStops(r)),n===o&&0===n.offset.baseVal&&!1===d?this._onCenterGrippieOrSliderBodyPointerDown(e):n===s&&1===n.offset.baseVal&&!1===d?this._onRadiusGrippieOrSliderEdgePointerDown(e,"r1"):this._onDraggableStopGrippiePointerDown(e)}},{key:"_onStopGrippiePointerUp",value:function(e){if(!this._pointerMovedAfterPointerDown){var t=e.target,n=this._pointerDownSelectedStops,a=t[_$stop],r=t.closest(".subhud"),i=r[_$gradientUser],o=this._ownerApp.modKeys.shift,s=[],l=!0,d=!1,u;try{for(var c=this._ownerCanvas.selectedElements[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,("g"===h.localName||"a"===h.localName)&&h.contains(i)){var b=!0,x=!1,m=void 0;try{for(var g=_queryGraphicsElements2([].concat(_toConsumableArray(h.children)))[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,s.unshift(y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}}else s.push(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.isSelectableElement(i)&&(s=s.filter(function(e){return e!==i}),s.unshift(i)),this._ownerCanvas.selectedElements=s;for(var f=i.parentElement;f!==this._ownerCanvas.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){this._ownerCanvas.currentContainer=f;break}!0===o&&!0===this._pointerDownSelectedStops.includes(a)&&(n=n.filter(function(e){return e!==a}),this._selectStops([n]))}}},{key:"_onDraggableStopGrippiePointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a.querySelector(".slider"),i=this._ownerCanvas.geometryPrecision,o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=s.inverse(),d=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),u=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),c=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value),p=c.matrixTransform(s),h=_getNearestPointOnLine3(d,u,c,!1),b=_slicedToArray(h,1),x=b[0],m=_getDistanceBetweenPoints5(d,x)/_getDistanceBetweenPoints5(d,u),g=!1,v,y;this._draggedGrippie=n,n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",v=function(n){!1==g&&(t._ownerCanvas.undoManager.checkpoint("Move gradient stop"),g=!0);var a=new SVGPoint(p.x+n.clientX-e.clientX,p.y+n.clientY-e.clientY),r=a.matrixTransform(l),s=_getNearestPointOnLine3(d,u,r,!1),c=_slicedToArray(s,1),h=c[0],b=_getDistanceBetweenPoints5(d,h)/_getDistanceBetweenPoints5(d,u),x=b-m,v=!0,y=!1,f;try{for(var _=t._selectedStops[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=o.get(k),C=A.minOffset,S=A.maxOffset,E=A.initialOffset;E+x<C?k.setAttribute("offset",_round27(C,i)):E+x>S?k.setAttribute("offset",_round27(S,i)):k.setAttribute("offset",_round27(E+x,i))}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}),n.addEventListener("lostpointercapture",y=function(){n.removeEventListener("pointermove",v),n.removeEventListener("lostpointercapture",y),t._draggedGrippie=null})}},{key:"_onRadiusGrippieOrSliderEdgePointerDown",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"r1",a=e.target,r=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(t){return t.contains(e.target)}),i=r[_$gradient],o=r[_$gradientUser],s=_getUserBBox11(o),l=o.getScreenCTM(),d=l.inverse(),u=_getComputedTransform15(i),c=_decomposeTransform22(l),p=c.scaleX,h=c.scaleY,b=!1,x=!1,m,g,v,y,f,_,w,k;a.matches(".grippie")?this._draggedGrippie=a:a.matches(".slider")&&(this._draggedSlider=a),a.setPointerCapture(e.pointerId);var A=function(){if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){v=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value),y=new SVGPoint(i.cx.baseVal.value+i.r.baseVal.value,i.cy.baseVal.value),f=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value-i.r.baseVal.value);var e=v.matrixTransform(u),t=y.matrixTransform(u),n=f.matrixTransform(u);_=e.matrixTransform(l),w=t.matrixTransform(l),k=n.matrixTransform(l)}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){v=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),y=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits+i.r.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),f=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits-i.r.baseVal.valueInSpecifiedUnits);var a=v.matrixTransform(u),r=y.matrixTransform(u),o=f.matrixTransform(u),d=_bboxPointToUserPoint3(a,s),c=_bboxPointToUserPoint3(r,s),p=_bboxPointToUserPoint3(o,s);_=d.matrixTransform(l),w=c.matrixTransform(l),k=p.matrixTransform(l)}};a.addEventListener("pointermove",m=function(a){if(!1==b)if(_isPointerMoveIntentional8(e,a,5))b=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient"),A();else return;var r=t._ownerApp.modKeys,o=r.ctrl,l=r.shift,c,m;"r1"===n?(c=new SVGPoint(a.clientX+(w.x-e.clientX),a.clientY+(w.y-e.clientY)),m=_getRotationAngleFromPoints4(_,w,c)):"r2"===n&&(c=new SVGPoint(a.clientX+(k.x-e.clientX),a.clientY+(k.y-e.clientY)),m=_getRotationAngleFromPoints4(_,k,c));var g=new SVGMatrix().rotate(m,_.x,_.y),C=_.matrixTransform(g),S=w.matrixTransform(g),E=k.matrixTransform(g),T=new _Vector5(C,S),P=new _Vector5(C,E),L=new _Vector5(C,c);if("r1"===n){if(T.length=L.length,S.x=C.x+T.x,S.y=C.y+T.y,o){var D=new _Vector5(C,k);P.length=L.length,D.length=L.length,E.x=C.x+P.x,E.y=C.y+P.y,k.x=C.x+D.x,k.y=C.y+D.y}if(l){var M=_snapPointToAngleMultiple2(C,S,22.5),N=_slicedToArray(M,2),I=N[0],R=N[1];S=I,x=!0}if(x){var V=new SVGPoint(_.x,_.y-100),z=_getRotationAngleFromPoints4(_,V,S);E=0>p&&0>h?_snapPointToAngle(C,E,z+90):_snapPointToAngle(C,E,z-90)}}else if("r2"===n){if(P.length=L.length,E.x=C.x+P.x,E.y=C.y+P.y,o){var G=new _Vector5(C,w);T.length=L.length,G.length=L.length,S.x=C.x+T.x,S.y=C.y+T.y,w.x=C.x+G.x,w.y=C.y+G.y}if(l){var B=_snapPointToAngleMultiple2(C,E,22.5),O=_slicedToArray(B,2),q=O[0],j=O[1];E=q,x=!0}if(x){var U=new SVGPoint(_.x,_.y-100),H=_getRotationAngleFromPoints4(_,U,E);S=0>p&&0>h?_snapPointToAngle(C,S,H-90):_snapPointToAngle(C,S,H+90)}}var $,F,Y;if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var X=C.matrixTransform(d),W=S.matrixTransform(d),K=E.matrixTransform(d);$=X.matrixTransform(u.inverse()),F=W.matrixTransform(u.inverse()),Y=K.matrixTransform(u.inverse())}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var Z=C.matrixTransform(d),Q=S.matrixTransform(d),J=E.matrixTransform(d),ee=_userPointToBBoxPoint5(Z,s),te=_userPointToBBoxPoint5(Q,s),ne=_userPointToBBoxPoint5(J,s);$=ee.matrixTransform(u.inverse()),F=te.matrixTransform(u.inverse()),Y=ne.matrixTransform(u.inverse())}var ae=_getTransformFromPoints6(v,y,f,$,F,Y),re=u.multiply(ae);re=_roundMatrix5(re,t._ownerCanvas.transformPrecision),i.setAttribute("gradientTransform",re.toString())}),a.addEventListener("lostpointercapture",g=function(){a.removeEventListener("pointermove",m),a.removeEventListener("lostpointercapture",g),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderPointerDown",value:function(e){var t=e.target,n=t.getScreenCTM(),a=new SVGPoint(e.clientX,e.clientY),r=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),i=r.matrixTransform(n),o=_getDistanceBetweenPoints5(i,a);5>=o?this._onRadiusGrippieOrSliderEdgePointerDown(e,"r1"):this._onCenterGrippieOrSliderBodyPointerDown(e)}},{key:"_onCenterGrippieOrSliderBodyPointerDown",value:function(e){var t=this,n=e.target,a=this._ownerCanvas.geometryPrecision,r=e.target.closest(".subhud"),i=r[_$gradientUser],o=r[_$gradient],s=_getUserBBox11(i),l=_getComputedTransform15(o),d=i.getScreenCTM(),u=i.getScreenCTM().inverse(),c=new SVGPoint(e.clientX,e.clientY),p=!1,h,b,x;if(n.matches(".grippie")?this._draggedGrippie=n:n.matches(".slider")&&(this._draggedSlider=n),n.setPointerCapture(e.pointerId),o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var m=new SVGPoint(o.cx.baseVal.value,o.cy.baseVal.value),g=m.matrixTransform(l);x=g.matrixTransform(d)}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var v=new SVGPoint(o.cx.baseVal.valueInSpecifiedUnits,o.cy.baseVal.valueInSpecifiedUnits),y=v.matrixTransform(l),f=_bboxPointToUserPoint3(y,s);x=f.matrixTransform(d)}n.addEventListener("pointermove",h=function(n){if(!1==p)if(_isPointerMoveIntentional8(e,n,5))p=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient");else return;var r=new SVGPoint(n.clientX,n.clientY),i=new _Vector5(c,r),d;if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var h=new SVGPoint(x.x+i.x,x.y+i.y),b=h.matrixTransform(u);d=b.matrixTransform(l.inverse())}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var m=new SVGPoint(x.x+i.x,x.y+i.y),g=m.matrixTransform(u),v=_userPointToBBoxPoint5(g,s);d=v.matrixTransform(l.inverse())}o.setAttribute("cx",_round27(d.x,a)),o.setAttribute("cy",_round27(d.y,a))}),n.addEventListener("lostpointercapture",b=function(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",b),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderDblClick",value:function(e){this._ownerCanvas.undoManager.checkpoint("Add Stop");for(var t=e.target,n=t.closest(".subhud"),a=n[_$gradient],r=this.getScreenCTM().inverse(),i=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=_getDistanceBetweenPoints5(o,l),u=_getDistanceBetweenPoints5(o,s),c=_normalize7(d/u,0,1,this._ownerCanvas.geometryPrecision),p=null,h=0,b;h<i.length;h+=1)if(b=i[h],b.offset.baseVal<c)p=h;else if(b.offset.baseVal>c)break;var x=_createElement26("svg:stop");if(x.setAttribute("offset",c),x.style.stopColor=_getGradientColorAtOffset2(a,c),null===p){var m=[].concat(_toConsumableArray(a.children)).find(function(e){return"stop"===e.localName});m?m.before(x):a.append(x)}else i[p].after(x);this._selectStops([x])}},{key:"_onShadowRootKeyDown",value:function(e){var t=_Shortcut11.fromEvent(e);0===this._selectedStops.length||(t.matches("Backspace")?(e.stopPropagation(),this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Left"),this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Right"),this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Left"),this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Right"),this._moveSelectedStops(10,"right"))))}},{key:"_updateAll",value:function(){var e=this._getSelectedRadialGradientUsers();if(0===e.length)this["#subhuds"].innerHTML="";else{var t=this._shadowRoot.activeElement,n=[];this["#subhuds"].innerHTML="";var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getPaintServer6(l,this.context);if(!n.includes(d)){n.push(d);var u=[].concat(_toConsumableArray(d.children)).filter(function(e){return"stop"===e.localName}),c=this["#subhud-template"].cloneNode(!0);c.removeAttribute("id"),c[_$gradient]=d,c[_$gradientUser]=l;var p=c.querySelector(".stop-grippies"),h=document.createDocumentFragment(),b=!0,x=!1,m=void 0;try{for(var g=u[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=_createElement26("svg:circle");f.setAttribute("class","stop-grippie grippie"),f[_$stop]=y,0.95<y.offset.baseVal?h.prepend(f):p.append(f)}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}p.append(h),this["#subhuds"].append(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}if(t){var _=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(e){return e[_$gradient]===t[_$gradient]});_&&_.focus()}this._updatePositions(),this._updateGrippiesSize(),this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!(e&&o!==e)){var s=o[_$gradient],l=o[_$gradientUser],d=[].concat(_toConsumableArray(s.children)).filter(function(e){return"stop"===e.localName}),u=_getComputedTransform15(s),c=_getTransformToElement13(l,this),p=o.querySelector(".slider"),h=o.querySelector(".slider-shadow"),b=[].concat(_toConsumableArray(o.querySelector(".stop-grippies").children)),x=o.querySelector(".r2-grippie"),m=o.querySelector(".r2-outline");if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var g=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value),v=new SVGPoint(s.cx.baseVal.value+s.r.baseVal.value,s.cy.baseVal.value),y=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value-s.r.baseVal.value),f=g.matrixTransform(u),_=v.matrixTransform(u),w=y.matrixTransform(u),k=f.matrixTransform(c),A=_.matrixTransform(c),C=w.matrixTransform(c);p.setAttribute("x1",k.x),p.setAttribute("y1",k.y),p.setAttribute("x2",A.x),p.setAttribute("y2",A.y),h.setAttribute("x1",k.x),h.setAttribute("y1",k.y),h.setAttribute("x2",A.x),h.setAttribute("y2",A.y),m.setAttribute("x1",k.x),m.setAttribute("y1",k.y),m.setAttribute("x2",C.x),m.setAttribute("y2",C.y),x.setAttribute("cx",C.x),x.setAttribute("cy",C.y);var S=!0,E=!1,T=void 0;try{for(var P=function(){var e=D.value,t=b.find(function(t){return t[_$stop]===e}),n=_getPointAtFraction2(k,A,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},L=d[Symbol.iterator](),D;!(S=(D=L.next()).done);S=!0)P()}catch(e){E=!0,T=e}finally{try{!S&&L.return&&L.return()}finally{if(E)throw T}}}else if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var M=_getUserBBox11(l),N=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits),I=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits+s.r.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits),R=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits-s.r.baseVal.valueInSpecifiedUnits),V=N.matrixTransform(u),z=I.matrixTransform(u),G=R.matrixTransform(u),B=_bboxPointToUserPoint3(V,M),O=_bboxPointToUserPoint3(z,M),q=_bboxPointToUserPoint3(G,M),j=B.matrixTransform(c),U=O.matrixTransform(c),H=q.matrixTransform(c);p.setAttribute("x1",j.x),p.setAttribute("y1",j.y),p.setAttribute("x2",U.x),p.setAttribute("y2",U.y),h.setAttribute("x1",j.x),h.setAttribute("y1",j.y),h.setAttribute("x2",U.x),h.setAttribute("y2",U.y),m.setAttribute("x1",j.x),m.setAttribute("y1",j.y),m.setAttribute("x2",H.x),m.setAttribute("y2",H.y),x.setAttribute("cx",H.x),x.setAttribute("cy",H.y);var $=!0,F=!1,Y=void 0;try{for(var X=function(){var e=K.value,t=b.find(function(t){return t[_$stop]===e});if(t){var n=_getPointAtFraction2(j,U,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y}},W=d[Symbol.iterator](),K;!($=(K=W.next()).done);$=!0)X()}catch(e){F=!0,Y=e}finally{try{!$&&W.return&&W.return()}finally{if(F)throw Y}}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateGrippiesColor",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.style.fill=c[_$stop].style.stopColor}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll(".grippie")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-radialgradienthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_updateGrippiesSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,this._selectedStops.includes(c[_$stop])?c.setAttribute("data-selected",""):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesZOrder",value:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,a;try{for(var r=this._selectedStops[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=!0,l=!1,d=void 0;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p[_$stop]===o&&p.parentElement.append(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_selectStops",value:function(e){0===e.length&&0===this._selectedStops.length||(this._selectedStops=[].concat(_toConsumableArray(e)),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")))}},{key:"_selectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient],n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=!0,r=!1,i;try{for(var o=this._selectedStops[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.closest("radialGradient")!==t&&n.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this._selectStops(n)}},{key:"_deselectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient];this._selectStops(this._selectedStops.filter(function(e){return e.closest("radialGradient")!==t}))}},{key:"_selectNextStop",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient];if(t){var n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t}),r=a[a.length-1],i=n[0],o=i;if(r&&1<n.length){for(var s=r.nextElementSibling;s;s=s.nextElementSibling)if("stop"===s.localName){o=s;break}this._selectStops([o])}}}},{key:"_deleteSelectedStops",value:function(){var e=this._shadowRoot.activeElement;if(null!==e){var t=e[_$gradient],n=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t});if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Delete gradient stop(s)");var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.remove()}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}this._selectStops([])}}},{key:"_moveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;if(null!==n){var a=n.querySelector(".slider"),r=n[_$gradient],i=this._selectedStops.filter(function(e){return e.parentElement===r}),o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=this._ownerCanvas.geometryPrecision,d=new SVGPoint(a.x1.baseVal.value,a.y1.baseVal.value),u=new SVGPoint(a.x2.baseVal.value,a.y2.baseVal.value),c=d.matrixTransform(s),p=u.matrixTransform(s),h=new _Vector5(c,p),b=e/h.length,x=!0,m=!1,g;try{for(var v=i[Symbol.iterator](),y;!(x=(y=v.next()).done);x=!0){var f=y.value,_=o.get(f),w=_.minOffset,k=_.maxOffset;if("left"===t){var A=_normalize7(f.offset.baseVal-b,w,k,l);f.setAttribute("offset",A)}else if("right"===t){var C=_normalize7(f.offset.baseVal+b,w,k,l);f.setAttribute("offset",C)}}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}},{key:"_canMoveActiveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){var n=t.querySelector(".slider"),a=t[_$gradient],r=this._selectedStops.find(function(e){return e.parentElement===a});if(null!==r){var i=this._getMoveOffsetsForSelectedStops(),o=i.get(r),s=o.minOffset,l=o.maxOffset;return"left"===e?r.offset.baseVal>s:"right"===e?r.offset.baseVal<l:void 0}}}},{key:"_getPreviousNotSelectedStop",value:function(e){for(var t=e;t;t=t.previousElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getNextNotSelectedStop",value:function(e){for(var t=e;t;t=t.nextElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getMoveOffsetsForSelectedStops",value:function(){var e=new Map,t=[],n=!0,a=!1,r;try{for(var i=this._selectedStops[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=this._getPreviousNotSelectedStop(s),d=this._getNextNotSelectedStop(s),u={};u.min=l?s.offset.baseVal-l.offset.baseVal:s.offset.baseVal,u.max=d?d.offset.baseVal-s.offset.baseVal:1-s.offset.baseVal,t.push(u)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}if(0<t.length){var c=t[0].min,p=t[0].max,h=!0,b=!1,x;try{for(var m=t[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,v.min<c&&(c=v.min),v.max<p&&(p=v.max)}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}var y=!0,f=!1,_;try{for(var w=this._selectedStops[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,e.set(A,{initialOffset:A.offset.baseVal,minOffset:A.offset.baseVal-c,maxOffset:A.offset.baseVal+p})}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return e}},{key:"_getSelectedRadialGradientUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes9(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var h=!0,b=!1,x=void 0;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.closest("text, textPath, tspan, a");S&&!a.includes(S)&&a.push(S)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"radialGradient"===_getPaintType3(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}},{key:"selectedStops",get:function(){return this._selectedStops.filter(function(e){return e.isConnected})},set:function(e){this._selectStops(e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-radialgradienthud",BXRadialGradientHudElement,{extends:"g"})}{{var _getUserBBox12=BoxySVG.utils.bbox.getUserBBox,_closest50=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet16=BoxySVG.utils.geometry,_getRotationAngleFromPoints5=_BoxySVG$utils$geomet16.getRotationAngleFromPoints,_snapRotationAngle3=_BoxySVG$utils$geomet16.snapRotationAngle,_roundMatrix6=BoxySVG.utils.matrix.roundMatrix,_BoxySVG$utils$paint4=BoxySVG.utils.paint,_getPaintType4=_BoxySVG$utils$paint4.getPaintType,_getPaintServer7=_BoxySVG$utils$paint4.getPaintServer,_BoxySVG$utils$patter4=BoxySVG.utils.pattern,_createDerivedPattern3=_BoxySVG$utils$patter4.createDerivedPattern,_getPatternUsers3=_BoxySVG$utils$patter4.getPatternUsers,_getParentPattern4=_BoxySVG$utils$patter4.getParentPattern,_getRenderedTextNodes10=BoxySVG.utils.text.getRenderedTextNodes,_throttle20=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf13=BoxySVG.utils.transformGeneral,_getComputedTransform16=_BoxySVG$utils$transf13.getComputedTransform,_getTransformFromPoints7=_BoxySVG$utils$transf13.getTransformFromPoints,_getTransformToElement14=_BoxySVG$utils$transf13.getTransformToElement,_Vector6=BoxySVG.classes.Vector,_SVGUnitTypes7=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE4=_SVGUnitTypes7.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6=_SVGUnitTypes7.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_grippieSize=6,_$pattern=Symbol(),$patternUser=Symbol(),$patternUnits=Symbol(),_shadowHTML14="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie,.outline{vector-effect:non-scaling-stroke}.outline{fill:rgba(0,0,0,.07);stroke:#2e66f9;stroke-width:1.5}.grippie{fill:#e40dd6;stroke:#fff;stroke-width:2;filter:url(#bx-patternhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-patternhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-patternhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-patternhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <path class=\"outline\"></path>\n        <circle class=\"grippie rotate-grippie\"></circle>\n        <rect class=\"grippie scale-grippie\"></rect>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXPatternHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._draggedGrippie=null,this._draggedOutline=null,this._update50Th=_throttle20(this._update,50,this),this._update200Th=_throttle20(this._update,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML14;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest50(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest50(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&this._update200Th())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onZoomChange",value:function(){this._update50Th(),this._updateDropShadows()}},{key:"_onArtboardMutation",value:function(){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement):this._draggedOutline?this._updatePositions(this._draggedOutline.parentElement):this._update200Th()}},{key:"_onShadowRootPointerDown",value:function(e){if(0===e.button){var t;e.target.classList.contains("outline")?this._onTileOutlinePointerDown(e):e.target.classList.contains("scale-grippie")?this._onScaleGrippiePointerDown(e):e.target.classList.contains("rotate-grippie")&&this._onRotateGrippiePointerDown(e),window.addEventListener("pointerup",t=function(){window.removeEventListener("pointerup",t)})}}},{key:"_onTileOutlinePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[$patternUser],i=a[_$pattern];if(1<_getPatternUsers3(i).length&&"tspan"!==r.localName){var o=_createDerivedPattern3(i);this._ownerCanvas.createDefsIfMissing(),this._ownerCanvas.defs.append(o),r.style.setProperty(this.context,"url(#"+o.id+")"),i=o,a[_$pattern]=o}var s=r.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(r),u=i.hasAttribute("href")?_getParentPattern4(i):i,c=_getComputedTransform16(i),p,h,b,x,m;if(this._draggedOutline=n,u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)b=new SVGPoint(u.x.baseVal.value,u.y.baseVal.value),x=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),m=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var g=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);b=new SVGPoint(d.x+g.x*d.width,d.y+g.y*d.height),x=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),m=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=b.matrixTransform(c),_=x.matrixTransform(c),w=m.matrixTransform(c),k=f.matrixTransform(s),A=_.matrixTransform(s),C=w.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new _Vector6(n.clientX-e.clientX,n.clientY-e.clientY),r=new SVGPoint(k.x+a.x,k.y+a.y),o=new SVGPoint(A.x+a.x,A.y+a.y),s=new SVGPoint(C.x+a.x,C.y+a.y),d=r.matrixTransform(l),u=o.matrixTransform(l),p=s.matrixTransform(l),h=d.matrixTransform(c.inverse()),g=u.matrixTransform(c.inverse()),v=p.matrixTransform(c.inverse()),y=_getTransformFromPoints7(b,x,m,h,g,v),f=c.multiply(y);f=_roundMatrix6(f,t._ownerCanvas.transformPrecision),i.setAttribute("patternTransform",f.toString())}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),t._draggedOutline=null})}},{key:"_onRotateGrippiePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[_$pattern],i=a[$patternUser];if(1<_getPatternUsers3(r).length&&"tspan"!==i.localName){var o=_createDerivedPattern3(r);this._ownerCanvas.createDefsIfMissing(),this._ownerCanvas.defs.append(o),i.style.setProperty(this.context,"url(#"+o.id+")"),r=o,a[_$pattern]=o}var s=i.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(i),u=r.hasAttribute("href")?_getParentPattern4(r):r,c=_getComputedTransform16(r);this._draggedGrippie=n;var p,h,b,x,m;if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value/2,u.y.baseVal.value+u.height.baseVal.value/2),x=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),m=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var g=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits/2,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits/2),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);b=new SVGPoint(d.x+g.x*d.width,d.y+g.y*d.height),x=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),m=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=b.matrixTransform(c),_=x.matrixTransform(c),w=m.matrixTransform(c),k=f.matrixTransform(s),A=_.matrixTransform(s),C=w.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new SVGPoint(n.clientX+(A.x-e.clientX),n.clientY+(A.y-e.clientY)),i=_getRotationAngleFromPoints5(k,A,a);t._ownerApp.modKeys.shift&&(i=_snapRotationAngle3(i,45));var o=new SVGMatrix().rotate(i,k.x,k.y),s=A.matrixTransform(o),d=C.matrixTransform(o),u=s.matrixTransform(l),p=d.matrixTransform(l),h=u.matrixTransform(c.inverse()),g=p.matrixTransform(c.inverse()),v=_getTransformFromPoints7(b,x,m,b,h,g),y=c.multiply(v);y=_roundMatrix6(y,t._ownerCanvas.transformPrecision),r.setAttribute("patternTransform",y.toString())}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),t._draggedGrippie=null})}},{key:"_onScaleGrippiePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[_$pattern],i=a[$patternUser];if(1<_getPatternUsers3(r).length&&"tspan"!==i.localName){var o=_createDerivedPattern3(r);this._ownerCanvas.createDefsIfMissing(),this._ownerCanvas.defs.append(o),i.style.setProperty(this.context,"url(#"+o.id+")"),r=o,a[_$pattern]=o}var s=i.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(i),u=r.hasAttribute("href")?_getParentPattern4(r):r,c=_getComputedTransform16(r);this._draggedGrippie=n;var p,h,b,x,m;if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)b=new SVGPoint(u.x.baseVal.value,u.y.baseVal.value),x=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),m=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var g=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);b=new SVGPoint(d.x+g.x*d.width,d.y+g.y*d.height),x=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),m=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=m.matrixTransform(c),_=f.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new SVGPoint(_.x+n.clientX-e.clientX,_.y+n.clientY-e.clientY),i=a.matrixTransform(l),o=i.matrixTransform(c.inverse()),s=new SVGPoint(o.x,x.y),d=_getTransformFromPoints7(b,x,m,b,s,o),u=c.multiply(d);u=_roundMatrix6(u,t._ownerCanvas.transformPrecision),r.setAttribute("patternTransform",u.toString())}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),t._draggedGrippie=null})}},{key:"_update",value:function(){var e=this._getSelectedPatternUsers();if(this["#subhuds"].innerHTML="",0<e.length){var t=Symbol(),n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_getPaintServer7(s,this.context),d=l.hasAttribute("href")?_getParentPattern4(l):l;if(!l[t]&&(l[t]=!0,0!==d.width.baseVal.valueInSpecifiedUnits&&0!==d.height.baseVal.valueInSpecifiedUnits)){var u=this["#subhud-template"].cloneNode(!0);u.removeAttribute("id"),u[_$pattern]=l,u[$patternUser]=s,this["#subhuds"].append(u)}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this._updatePositions()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!(e&&o!==e)){var s=o[$patternUser],l=o[_$pattern],d=o.querySelector(".rotate-grippie"),u=o.querySelector(".scale-grippie"),c=o.querySelector(".outline"),p=_getTransformToElement14(s,this),h=_getUserBBox12(s),b=l.hasAttribute("href")?_getParentPattern4(l):l,x=_getComputedTransform16(l),m=void 0,g=void 0,v=void 0,y=void 0;if(b.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)m=new SVGPoint(b.x.baseVal.value,b.y.baseVal.value),g=new SVGPoint(b.x.baseVal.value+b.width.baseVal.value,b.y.baseVal.value),v=new SVGPoint(b.x.baseVal.value+b.width.baseVal.value,b.y.baseVal.value+b.height.baseVal.value),y=new SVGPoint(b.x.baseVal.value,b.y.baseVal.value+b.height.baseVal.value);else if(b.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var f=new SVGPoint(b.x.baseVal.valueInSpecifiedUnits,b.y.baseVal.valueInSpecifiedUnits),_=new SVGPoint(b.x.baseVal.valueInSpecifiedUnits+b.width.baseVal.valueInSpecifiedUnits,b.y.baseVal.valueInSpecifiedUnits),w=new SVGPoint(b.x.baseVal.valueInSpecifiedUnits+b.width.baseVal.valueInSpecifiedUnits,b.y.baseVal.valueInSpecifiedUnits+b.height.baseVal.valueInSpecifiedUnits),k=new SVGPoint(b.x.baseVal.valueInSpecifiedUnits,b.y.baseVal.valueInSpecifiedUnits+b.height.baseVal.valueInSpecifiedUnits);m=new SVGPoint(h.x+f.x*h.width,h.y+f.y*h.height),g=new SVGPoint(h.x+_.x*h.width,h.y+_.y*h.height),v=new SVGPoint(h.x+w.x*h.width,h.y+w.y*h.height),y=new SVGPoint(h.x+k.x*h.width,h.y+k.y*h.height)}var A=m.matrixTransform(x),C=g.matrixTransform(x),S=v.matrixTransform(x),E=y.matrixTransform(x),T=A.matrixTransform(p),P=C.matrixTransform(p),L=S.matrixTransform(p),D=E.matrixTransform(p);c.setAttribute("d","\n          M "+T.x+" "+T.y+"\n          L "+P.x+" "+P.y+"\n          L "+L.x+" "+L.y+"\n          L "+D.x+" "+D.y+"\n          Z\n        ");var M=_grippieSize/this._ownerCanvas.scale;d.cx.baseVal.value=P.x,d.cy.baseVal.value=P.y,d.r.baseVal.value=M,u.width.baseVal.value=2*M,u.height.baseVal.value=2*M,u.x.baseVal.value=L.x-u.width.baseVal.value/2,u.y.baseVal.value=L.y-u.height.baseVal.value/2,u.hudPoint=L}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateDropShadows",value:function(){this["#bx-patternhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPatternUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes10(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var h=!0,b=!1,x=void 0;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.closest("text, textPath, tspan, a");S&&!a.includes(S)&&a.push(S)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"pattern"===_getPaintType4(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-patternhud",BXPatternHudElement,{extends:"g"})}}{{var _parseViewBox12=BoxySVG.utils.parsing.parseViewBox,_closest51=BoxySVG.utils.element.closest,_isPointerMoveIntentional9=BoxySVG.utils.event.isPointerMoveIntentional,_abs11=Math.abs,_shadowHTML15="\n    <style>:host{display:none}:host([editable][enabled]) #editing-controls,:host([editable][enabled]) #outline,:host([enabled]){display:initial}#outline{fill:none;opacity:1;stroke:rgba(0,0,0,.3);stroke-width:1;pointer-events:none;vector-effect:non-scaling-stroke}#editing-controls{display:none}#outer-area{fill:#000;stroke:none;opacity:.4}#inner-area{fill:transparent;opacity:1;shape-rendering:crispEdges;stroke:#6a6a6a;stroke-width:1;vector-effect:non-scaling-stroke}#inner-area:hover{cursor:-webkit-grab}#inner-area:active{cursor:-webkit-grabbing}.resize-grippie[data-position=bottom],.resize-grippie[data-position=left],.resize-grippie[data-position=right],.resize-grippie[data-position=top]{stroke:red;vector-effect:non-scaling-stroke;stroke-width:6;opacity:0}.resize-grippie[data-position=bottom-left] path,.resize-grippie[data-position=bottom-right] path,.resize-grippie[data-position=top-left] path,.resize-grippie[data-position=top-right] path{fill:#fff;stroke:#585858;stroke-width:1;vector-effect:non-scaling-stroke}.resize-grippie[data-position=bottom-left],.resize-grippie[data-position=bottom-right],.resize-grippie[data-position=top-left],.resize-grippie[data-position=top-right]{fill:transparent}.resize-grippie[data-position=left]:hover,.resize-grippie[data-position=right]:hover{cursor:ew-resize}.resize-grippie[data-position=bottom]:hover,.resize-grippie[data-position=top]:hover{cursor:ns-resize}.resize-grippie[data-position=top-left]:hover{cursor:nwse-resize}.resize-grippie[data-position=bottom-left]:hover,.resize-grippie[data-position=top-right]:hover{cursor:nesw-resize}.resize-grippie[data-position=bottom-right]:hover{cursor:nwse-resize}</style>\n\n    <rect id=\"outline\" width=\"0\" height=\"0\" x=\"0\" y=\"0\"></rect>\n\n    <g id=\"editing-controls\">\n      <path id=\"outer-area\"></path>\n      <rect id=\"inner-area\" width=\"0\" height=\"0\" x=\"0\" y=\"0\"></rect>\n\n      <g id=\"resize-grippies\">\n        <line id=\"left-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"left\"></line>\n        <line id=\"right-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"right\"></line>\n        <line id=\"top-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"top\"></line>\n        <line id=\"bottom-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"bottom\"></line>\n\n        <g id=\"top-left-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"top-left\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 h 15 v -5 h -20 v 20 h 5 z\"/>\n        </g>\n\n        <g id=\"top-right-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"top-right\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 0 15 h 15 v 15 h 5 v -20 h -20 z\"/>\n        </g>\n\n        <g id=\"bottom-left-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"bottom-left\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 h 15 v 5 h -20 v -20 h 5 z\"/>\n        </g>\n\n        <g id=\"bottom-right-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"bottom-right\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 v -15 h 5 v 20 h -20 v -5 z\"/>\n        </g>\n      </g>\n    </g>\n  ",BXViewBoxHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._connectedCallbacks=[],this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML15;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#inner-area"].addEventListener("pointerdown",function(t){return e._onInnerAreaPointerDown(t)}),this["#resize-grippies"].addEventListener("pointerdown",function(t){return e._onResizeGrippiesPointerDown(t)})}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest51(this,"bx-canvas"),this._connectedCallbacks.forEach(function(e){return e()}),this._connectedCallbacks=[]}},{key:"attributeChangedCallback",value:function(e){"enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"editable"===e&&this._onEditableChange()}},{key:"_onEnabled",value:async function(){var e=this;await this.whenConnected,this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._update()}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onEditableChange",value:async function(){await this.whenConnected,this._update()}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,"viewBox"===o.attributeName&&this._update()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onZoomChange",value:function(){this._update()}},{key:"_onInnerAreaPointerDown",value:function(e){var t=this,n,a;this["#inner-area"].setPointerCapture(e.pointerId),this["#inner-area"].addEventListener("pointermove",a=function(r){_isPointerMoveIntentional9(e,r,7)&&(t["#inner-area"].removeEventListener("pointermove",a),t["#inner-area"].removeEventListener("lostpointercapture",n),t._onInnerAreaDragStart(e))}),this["#inner-area"].addEventListener("lostpointercapture",n=function(){t["#inner-area"].removeEventListener("pointermove",a),t["#inner-area"].removeEventListener("lostpointercapture",n)})}},{key:"_onInnerAreaDragStart",value:function(e){var t=this,n=this._ownerCanvas.currentArtboard,a=n.getAttribute("viewBox")||"0 0 0 0",r=_parseViewBox12(a),i=r.x,o=r.y,s=r.width,l=r.height,d=n.getScreenCTM().inverse(),u=new SVGPoint(e.clientX,e.clientY),c,p;u=u.matrixTransform(d),this._ownerCanvas.undoManager.checkpoint("View box"),this["#inner-area"].addEventListener("pointermove",p=function(e){var t=new SVGPoint(e.clientX,e.clientY);t=t.matrixTransform(d);var a={x:t.x-u.x,y:t.y-u.y},r=i+a.x,c=o+a.y;n.setAttribute("viewBox",[r,c,s,l].join(" "))}),this["#inner-area"].addEventListener("lostpointercapture",c=function(){t["#inner-area"].removeEventListener("pointermove",p),t["#inner-area"].removeEventListener("lostpointercapture",c)})}},{key:"_onResizeGrippiesPointerDown",value:function(e){var t=this._ownerCanvas.currentArtboard,n=e.target.closest(".resize-grippie"),a=n.getAttribute("data-position"),r=t.getScreenCTM().inverse(),i=t.getAttribute("viewBox")||"0 0 0 0",o=_parseViewBox12(i),s=o.x,l=o.y,d=o.width,u=o.height,c=new SVGPoint(e.clientX,e.clientY);c=c.matrixTransform(r);var p,h;n.setPointerCapture(e.pointerId),this._ownerCanvas.undoManager.checkpoint("View box"),n.addEventListener("pointermove",p=function(e){var n=new SVGPoint(e.clientX,e.clientY);n=n.matrixTransform(r);var i={x:n.x-c.x,y:n.y-c.y},o=s,p=l,h=d,b=u;"left"===a?(h=d-i.x,o=s+i.x,0>h&&(h=_abs11(h),o=s+d)):"right"===a?(h=d+i.x,0>h&&(h=_abs11(h),o=s-h)):"top"===a?(b=u-i.y,p=l+i.y,0>b&&(b=_abs11(b),p=l+u)):"bottom"===a?(b=u+i.y,0>b&&(b=_abs11(b),p=l-b)):"top-left"===a?(h=d-i.x,b=u-i.y,o=s+i.x,p=l+i.y,0>h&&(h=_abs11(h),o=s+d),0>b&&(b=_abs11(b),p=l+u)):"top-right"===a?(h=d+i.x,b=u-i.y,p=l+i.y,0>h&&(h=_abs11(h),o=s-h),0>b&&(b=_abs11(b),p=l+u)):"bottom-left"===a?(h=d-i.x,b=u+i.y,o=s+i.x,0>h&&(h=_abs11(h),o=s+d),0>b&&(b=_abs11(b),p=l-b)):"bottom-right"===a&&(h=d+i.x,b=u+i.y,0>h&&(h=_abs11(h),o=s-h),0>b&&(b=_abs11(b),p=l-b));var x=[o,p,h,b];t.setAttribute("viewBox",x.join(" "))}),n.addEventListener("lostpointercapture",h=function(){n.removeEventListener("pointermove",p),n.removeEventListener("lostpointercapture",h)})}},{key:"_update",value:function(){var e=this._ownerCanvas;if(e.currentArtboard.hasAttribute("viewBox")){var t=e.currentArtboard.getAttribute("viewBox"),n=_parseViewBox12(t),a=n.x,r=n.y,i=n.width,o=n.height,s=_parseViewBox12(t);if(this["#outline"].setAttribute("width",i),this["#outline"].setAttribute("height",o),this["#outline"].setAttribute("x",a),this["#outline"].setAttribute("y",r),this.editable){this["#editing-controls"].style.visibility="visible",this["#inner-area"].setAttribute("x",a),this["#inner-area"].setAttribute("y",r),this["#inner-area"].setAttribute("width",i),this["#inner-area"].setAttribute("height",o);var l=1e6;this["#outer-area"].setAttribute("d","\n            M "+-l+", "+-l+"\n            L "+2*l+", "+-l+"\n            L "+2*l+", "+2*l+"\n            L "+-l+", "+2*l+"\n            Z\n            M "+a+", "+r+"\n            L "+a+", "+(r+o)+"\n            L "+(a+i)+", "+(r+o)+"\n            L "+(a+i)+", "+r+"\n            Z\n          ");var d=10/e.scale,u=!0,c=!1,p;try{for(var h=this["#resize-grippies"].children[Symbol.iterator](),b;!(u=(b=h.next()).done);u=!0){var x=b.value,m=x.getAttribute("data-position");if("left"===m)x.x1.baseVal.value=a,x.y1.baseVal.value=r,x.x2.baseVal.value=a,x.y2.baseVal.value=r+o;else if("right"===m)x.x1.baseVal.value=a+i,x.y1.baseVal.value=r,x.x2.baseVal.value=a+i,x.y2.baseVal.value=r+o;else if("top"===m)x.x1.baseVal.value=a,x.y1.baseVal.value=r,x.x2.baseVal.value=a+i,x.y2.baseVal.value=r;else if("bottom"===m)x.x1.baseVal.value=a,x.y1.baseVal.value=r+o,x.x2.baseVal.value=a+i,x.y2.baseVal.value=r+o;else if("top-left"===m){var g=new SVGMatrix;g.scaleSelf(1/e.scale,a,r),g.translateSelf(a-15,r-15),x.setAttribute("transform",g.toString())}else if("top-right"===m){var v=new SVGMatrix;v.scaleSelf(1/e.scale,a+i,r),v.translateSelf(a+i-15,r-15),x.setAttribute("transform",v.toString())}else if("bottom-left"===m){var y=new SVGMatrix;y.scaleSelf(1/e.scale,a,r+o),y.translateSelf(a-15,r+o-15),x.setAttribute("transform",y.toString())}else if("bottom-right"===m){var f=new SVGMatrix;f.scaleSelf(1/e.scale,a+i,r+o),f.translateSelf(a+i-15,r+o-15),x.setAttribute("transform",f.toString())}}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}else this["#outline"].setAttribute("width",0),this["#outline"].setAttribute("height",0),this["#outline"].setAttribute("x",-99999),this["#outline"].setAttribute("y",-99999),this.editable&&(this["#editing-controls"].style.visibility="hidden")}},{key:"whenConnected",get:function(){var e=this;return new Promise(function(t){return e.isConnected?t():e._connectedCallbacks.push(t)})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"editable",get:function(){return this.hasAttribute("editable")},set:function(e){!0===e?this.setAttribute("editable",""):this.removeAttribute("editable")}}],[{key:"observedAttributes",get:function(){return["enabled","editable"]}}]),t}(SVGGElement);customElements.define("bx-viewboxhud",BXViewBoxHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen48=BoxySVG.utils.element,_closest52=_BoxySVG$utils$elemen48.closest,_getCommonAncestor=_BoxySVG$utils$elemen48.getCommonAncestor,_serializePathData2=BoxySVG.utils.pathGeneral.serializePathData,_getTransformToElement15=BoxySVG.utils.transformGeneral.getTransformToElement,_throttle21=BoxySVG.utils.time.throttle,_getUserBBox13=BoxySVG.utils.bbox.getUserBBox,_shadowHTML16="\n    <style>:host{display:none;contain:strict;pointer-events:none}:host([enabled]){display:initial}#outline{fill:none;stroke:#f55c36;stroke-width:2;pointer-events:none;vector-effect:non-scaling-stroke}</style>\n    <path id=\"outline\"></path>\n  ",BXOutlineHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._hoveredElement=null,this._update30Th=_throttle21(this._update,30,this),this._update200Th=_throttle21(this._update,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML16;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerApp=_closest52(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest52(this,"bx-editor"),this._ownerCanvas=_closest52(this,"bx-canvas")}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("currentcontainerchange",this._containerChangeListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.artboards.addEventListener("pointerover",this._canvasPointerOverListener=function(){e._onPointerOver(event)}),this._ownerCanvas.artboards.addEventListener("pointerout",this._canvasPointerOutListener=function(){e._onPointerOut(event)})}},{key:"_onDisabled",value:function(){this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("currentcontainerchange",this._containerChangeListener),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerover",this._canvasPointerOverListener),this._ownerCanvas.artboards.removeEventListener("pointerout",this._canvasPointerOutListener)}},{key:"_onSelectedElementsChange",value:function(){this._update()}},{key:"_onPointerOver",value:function(e){this._hoveredElement=e.target,this._update30Th()}},{key:"_onPointerOut",value:function(){this._hoveredElement=null,this._update200Th()}},{key:"_update",value:function(){var e=this._getTarget();if(e){var t=e.localName,n=null,a=null;if("path"===t?n=e.getAttribute("d"):("rect"===t||"circle"===t||"ellipse"===t||"line"===t||"polyline"===t||"polygon"===t)&&(n=_serializePathData2(e.getPathData())),null===n){var r=_getUserBBox13(e);n="\n            M "+r.x+" "+r.y+"\n            L "+(r.x+r.width)+" "+r.y+"\n            L "+(r.x+r.width)+" "+(r.y+r.height)+"\n            L "+r.x+" "+(r.y+r.height)+"\n            L "+r.x+" "+r.y+"\n          "}null==a&&(a=_getTransformToElement15(e,this).toString()),n?this["#outline"].setAttribute("d",n):this["#outline"].removeAttribute("d"),a?this["#outline"].setAttribute("transform",a):this["#outline"].removeAttribute("transform")}else this["#outline"].removeAttribute("d")}},{key:"_getTarget",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift,r=this._ownerEditor.canvas,i=this._hoveredElement,o=null,s=null;if("transform"===this.context?t||a?!t&&a?o="normal-multi":t&&!a?o="direct":t&&a&&(o="direct-multi"):o="normal":"edit"===this.context?o="direct":"edit-text"===this.context&&(o="direct-text"),i&&r.isSelectableElement(i)){var l=this._getAllContainers(i),d=r.selectedElements.includes(i),u=d,c=!0,p=!1,h;try{for(var b=l[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,r.selectedElements.includes(m)&&(u=!0)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}if("normal"===o){if(!1===u)if(0===l.length)s=i;else{var g=r.currentContainer,v=i;if(g&&g.contains(v))for(;v.parentNode!==g;)v=v.parentNode;else for(var y=this._getCommonContainer(v,g);v.parentNode!==y&&v.parentNode!==r.currentArtboard;)v=v.parentNode;s=v}}else if("normal-multi"!==o)"direct"===o?!1===d&&(s=i):"direct-multi"===o?s=i:"direct-text"===o&&!1===d&&i.closest("text")&&(s=i.closest("text"));else if(0===l.length)s=i;else{var f=i;if(r.currentContainer&&r.currentContainer.contains(f))for(;f.parentNode!==r.currentContainer;)f=f.parentNode;else for(var _=this._getCommonContainer(f,r.currentContainer);f.parentNode!==_&&f.parentNode!==r.currentArtboard;)f=f.parentNode;s=f}}return s}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"_getCommonContainer",value:function(e,t){var n=_getCommonAncestor(e,t);if(n)for(;!1===["g","a"].includes(n.localName);)n=n.parentNode;return n}},{key:"context",get:function(){return this.getAttribute("context")||"transform"},set:function(e){this.setAttribute("context",e)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-outlinehud",BXOutlineHudElement,{extends:"g"})}{var _shadowHTML17="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}#rect{fill:rgba(187,199,212,.3);stroke:rgba(187,199,212,.8);stroke-width:1;pointer-events:none;shape-rendering:crispEdges;vector-effect:non-scaling-stroke}#rect[hidden]{display:none}</style>\n    <rect id=\"rect\" x=\"0\" y=\"0\" width=\"0\" height=\"0\" hidden></rect>\n  ",BXRubberBandHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML17;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"grabSelection",value:function(e,t){var n=this;return new Promise(function(a){var r=n.getScreenCTM(),i=r.inverse(),o=new SVGPoint(e,t),s=o.matrixTransform(i),l=0,d=0,u=0,c=0,p,h;n["#rect"].removeAttribute("hidden"),window.addEventListener("pointermove",p=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(i);u=a.x-s.x,c=a.y-s.y,0>u?(u=-u,l=s.x-u):l=s.x,0>c?(c=-c,d=s.y-c):d=s.y,n["#rect"].setAttribute("x",l),n["#rect"].setAttribute("y",d),n["#rect"].setAttribute("width",u),n["#rect"].setAttribute("height",c)}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),n["#rect"].setAttribute("hidden",""),n["#rect"].setAttribute("x",0),n["#rect"].setAttribute("y",0),n["#rect"].setAttribute("width",0),n["#rect"].setAttribute("height",0);var e=new SVGRect(l,d,u,c);a(e)})})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}]),t}(SVGGElement);customElements.define("bx-rubberbandhud",BXRubberBandHudElement,{extends:"g"})}{{var _Shortcut12=BoxySVG.classes.Shortcut,_BoxySVG$utils$elemen49=BoxySVG.utils.element,_createElement27=_BoxySVG$utils$elemen49.createElement,_closest53=_BoxySVG$utils$elemen49.closest,_html41=_BoxySVG$utils$elemen49.html,_BoxySVG$utils$geomet17=BoxySVG.utils.geometry,_getDistanceBetweenPoints6=_BoxySVG$utils$geomet17.getDistanceBetweenPoints,_getPointBetweenTwoPoints2=_BoxySVG$utils$geomet17.getPointBetweenTwoPoints,_isDOMWhitespace2=BoxySVG.utils.node.isDOMWhitespace,_replaceAll5=BoxySVG.utils.string.replaceAll,_BoxySVG$utils$text9=BoxySVG.utils.text,_getLocalOffset=_BoxySVG$utils$text9.getLocalOffset,_getGlobalOffset14=_BoxySVG$utils$text9.getGlobalOffset,_getRenderedChars2=_BoxySVG$utils$text9.getRenderedChars,_getRenderedTextNodes11=_BoxySVG$utils$text9.getRenderedTextNodes,_reduceText7=_BoxySVG$utils$text9.reduceText,_BoxySVG$utils$time11=BoxySVG.utils.time,_sleep12=_BoxySVG$utils$time11.sleep,_debounce10=_BoxySVG$utils$time11.debounce,_throttle22=_BoxySVG$utils$time11.throttle,_getTransformToElement16=BoxySVG.utils.transformGeneral.getTransformToElement,_shadowHTML18="\n    <style>:host{display:none;contain:size layout style paint}:host(:focus){outline:0}:host([enabled]){display:initial}#caret-line{stroke-width:3;vector-effect:non-scaling-stroke;pointer-events:none;stroke:gray}:host(:focus) #caret-line{stroke:#00f}#selection-rects{opacity:.3}#selection-rects rect{fill:#b3b3b3;pointer-events:none}:host(:focus) #selection-rects rect{fill:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) + 15%))}#ghost-input-object{pointer-events:none;width:0;height:0;font-size:.1px}#ghost-input{width:100%;height:100%;padding:0;margin:0;white-space:pre}:host(:focus) #ghost-input{-webkit-user-modify:read-write-plaintext-only;-webkit-user-select:text}#ghost-input :not(span):not(a){display:none}</style>\n\n    <g id=\"overlays\">\n      <line id=\"caret-line\"></line>\n      <g id=\"selection-rects\"></g>\n    </g>\n\n    <foreignObject id=\"ghost-input-object\" width=\"200\" height=\"16\">\n      <p id=\"ghost-input\" tabindex=\"0\"></p>\n    </foreignObject>\n  ",BXTextHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._updateOverlays200Th=_throttle22(this._updateOverlays,200,this),this._onGhostInputInput300Db=_debounce10(this._onGhostInputInput300Db,300,this,!0),this._editedTextElement=null,this._shadowRoot=this.attachShadow({mode:"closed",delegatesFocus:!0}),this._shadowRoot.innerHTML=_shadowHTML18,this.commands={selectAll:{enabled:function(){return null!==e._ownerCanvas.selectedTextRange},exec:function(){return e._selectAll(_closest53(e._ownerCanvas.selectedTextRange.startContainer,"text"))}},deselectAll:{enabled:function(){return null!==e._ownerCanvas.selectedTextRange},exec:function(){var t=e._ownerCanvas.selectedTextRange.cloneRange();t.collapse(!0),e._ownerCanvas.selectedTextRange=t}}};var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}var s=!1;this["#ghost-input"].addEventListener("focus",function(){e.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0})),e["#ghost-input"].setAttribute("contenteditable","plaintext-only")}),this["#ghost-input"].addEventListener("blur",function(){e.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),e["#ghost-input"].removeAttribute("contenteditable")}),this["#ghost-input"].addEventListener("input",function(t){e._onGhostInputInput(t)}),this["#ghost-input"].addEventListener("keydown",async function(t){s?e._onKeyPress(t):(s=!0,await _sleep12(1),e._onKeyPress(t))}),this["#ghost-input"].addEventListener("keyup",function(t){s=!1,e._onKeyPress(t)}),this["#ghost-input"].addEventListener("paste",function(t){e._onGhostInputPaste(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest53(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest53(this,"bx-editor"),this._ownerCanvas=_closest53(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas;t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),1===t.selectedElements.length&&"text"===t.selectedElements[0].localName&&this._selectAll(t.selectedElements[0])}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas;e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._installed&&this._uninstall()}},{key:"_install",value:function(){var e=this;this.style.display=null,this._installed=!0,this["#ghost-input-object"].append(this["#ghost-input"]),this["#ghost-input"].focus(),this._updateGhostInput(),this._updateOverlays(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateOverlays200Th()}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_uninstall",value:function(){this["#ghost-input"].remove(),this.style.display="none",this._installed=!1,this._ownerEditor.focus(),this._ownerCanvas.selectedTextRange=null,this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){var e=this._ownerCanvas;if(e.selectedTextRange){var t=e.selectedTextRange.startContainer.closest("text"),n=e.selectedElements.find(function(e){return e===t||e.contains(t)});n||(e.selectedTextRange=null)}this._updateGhostInput(),this._updateOverlays()}},{key:"_onSelectedTextRangeChange",value:function(){this._installed&&!this._ownerCanvas.selectedTextRange?this._uninstall():!this._installed&&this._ownerCanvas.selectedTextRange&&this._install(),this._installed&&(this._updateOverlays(),this._updateGhostInputSelectionRange(),this._updateTextElementSelectionRange())}},{key:"_onUndoOrRedo",value:function(){if(this._ownerCanvas.selectedTextRange){var e=this._ownerCanvas.selectedTextRange.startContainer.closest("text");e?this._selectAll(e):this._ownerCanvas.selectedTextRange=null}}},{key:"_onArtboardPointerDown",value:function(e){e.target.closest("text")&&this._onTextElementPointerDown(e)}},{key:"_onTextElementPointerDown",value:function(e){var t=this;if(0===e.button){e.preventDefault();var n=e.target.closest("text");if(1===this._ownerApp.pointerClickCount){var a=e.clientX,r=e.clientY,i=_getRenderedTextNodes11(n),o=n.getScreenCTM().inverse(),s=new SVGPoint(a,r).matrixTransform(o),l=n.getCharNumAtPosition(s),d=l,u=null,c,p;_getDistanceBetweenPoints6(s,n.getStartPositionOfChar(l))>_getDistanceBetweenPoints6(s,n.getEndPositionOfChar(l))&&(d+=1);var h=_getLocalOffset(n,d),b=_slicedToArray(h,2),x=b[0],m=b[1];if(this._ownerCanvas.selectedElements=[n],this._ownerApp.modKeys.shift){var g=this._ownerCanvas.selectedTextRange;if(null===g||!1===n.contains(g.startContainer)){var v=new Range;v.setStart(x,m),v.setEnd(x,m),this._ownerCanvas.selectedTextRange=v}this._expand(d)}else{var y=new Range;y.setStart(x,m),y.setEnd(x,m),this._ownerCanvas.selectedTextRange=y}this["#ghost-input"].focus(),window.addEventListener("pointermove",c=function(e){var a=e.clientX,r=e.clientY,s=new SVGPoint(a,r).matrixTransform(o),l=n.getCharNumAtPosition(s);if(-1===l){var d=n.getNumberOfChars(),c=0,p=Infinity;if(null==u){u=[];for(var h=0,b;h<d;h+=1)b=_getPointBetweenTwoPoints2(n.getStartPositionOfChar(h),n.getEndPositionOfChar(h)),u.push(b)}for(var g=0;g<d;g+=1){var v=u[g],y=_getDistanceBetweenPoints6(s,v);y<p&&(c=g,p=y)}l=c}var f=l;_getDistanceBetweenPoints6(s,n.getStartPositionOfChar(l))>_getDistanceBetweenPoints6(s,n.getEndPositionOfChar(l))&&(f+=1);var _=_getLocalOffset(n,f),w=_slicedToArray(_,2),k=w[0],A=w[1],C="forward";if(x===k)A<m&&(C="backward");else{var S=x.compareDocumentPosition(k);S===Node.DOCUMENT_POSITION_PRECEDING&&(C="backward")}var E=new Range;if(E.direction=C,"forward"==C?(E.setStart(x,m),E.setEnd(k,A)):(E.setStart(k,A),E.setEnd(x,m)),!1===t._ownerCanvas.selectedTextRange.collapsed&&E.startOffset===E.startContainer.textContent.length){var T=i[i.indexOf(E.startContainer)+1];T&&E.setStart(T,0)}t._ownerCanvas.selectedTextRange=E}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",p)})}else if(2===this._ownerApp.pointerClickCount){var f=e.clientX,_=e.clientY,w=n.getScreenCTM().inverse(),k=new SVGPoint(f,_).matrixTransform(w),A=n.getCharNumAtPosition(k);this._selectWord(n,A)}else 3<=this._ownerApp.pointerClickCount&&this._selectAll(n)}}},{key:"_onKeyPress",value:function(e){e.key.startsWith("Arrow")&&this._updateTextElementSelectionRange()}},{key:"_onGhostInputInput",value:function(e){"insertLineBreak"===e.inputType?(this._updateGhostInputContents(),this._updateGhostInputSelectionRange()):(0===this["#ghost-input"].innerText.length&&(this["#ghost-input"].innerHTML=" ",document.execCommand("selectAll")),this._onGhostInputInput300Db(),this._updateTextElementContents(),this._updateTextElementSelectionRange())}},{key:"_onGhostInputInput300Db",value:function(){this._ownerCanvas.undoManager.checkpoint("Text")}},{key:"_onGhostInputPaste",value:function(e){var t=this;if(e.preventDefault(),0<e.clipboardData.items.length){var n=e.clipboardData.items[0];("text/plain"===n.type||"text/html"===n.type||"image/svg+xml"===n.type)&&n.getAsString(async function(e){if(void 0!==e){t._ownerCanvas.undoManager.checkpoint("Paste");var n=t._ownerCanvas.selectedTextRange,a=n.startContainer.closest("text"),r=_getRenderedTextNodes11(a),i=_getGlobalOffset14(n.startContainer,n.startOffset),o=_slicedToArray(i,2),s=o[1],l=e.replace(/\r\n|\r|\n/g," ");if(n.startContainer===n.endContainer){var d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)if(b=h.value,b===n.startContainer)if(n.startOffset===n.endOffset){var x=b.textContent.substring(0,n.startOffset),m=b.textContent.substring(n.startOffset);b.textContent=x+l+m}else{var g=b.textContent.substring(0,n.startOffset),v=b.textContent.substring(n.endOffset);b.textContent=g+l+v}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}else{var y=!0,f=!1,_;try{for(var w=r[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A===n.startContainer?A.textContent=A.textContent.substring(0,n.startOffset)+l:A===n.endContainer?A.textContent=A.textContent.substring(n.endOffset):r.indexOf(A)>r.indexOf(n.startContainer)&&r.indexOf(A)<r.indexOf(n.endContainer)&&(A.textContent="")}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}var C=_getLocalOffset(a,s+l.length),S=_slicedToArray(C,2),E=S[0],T=S[1];n.setStart(E,T),n.setEnd(E,T),t._ownerCanvas.selectedTextRange=n,_reduceText7(a,n),t._updateOverlays(),t._updateGhostInputContents(),t._updateGhostInputSelectionRange()}})}}},{key:"_selectAll",value:function(e){var t=_getRenderedTextNodes11(e);if(0<t.length){var n=t[0],a=t[t.length-1],r=new Range;r.setStart(n,0),r.setEnd(a,a.textContent.length),this._ownerCanvas.selectedElements=[e],this._ownerCanvas.selectedTextRange=r,this._updateOverlays(),this._updateGhostInputSelectionRange()}}},{key:"_deselectAll",value:function(){this._ownerCanvas.selectedTextRange=null}},{key:"_selectWord",value:function(e,t){for(var n=_getRenderedChars2(e),a=n[t],r=e.getNumberOfChars(),i=t,o=t,s=t-1;0<=s&&(!_isDOMWhitespace2(a)||_isDOMWhitespace2(n[s]))&&(_isDOMWhitespace2(a)||!_isDOMWhitespace2(n[s]));s-=1)i-=1;for(var l=t;l<r&&(!_isDOMWhitespace2(a)||_isDOMWhitespace2(n[l]))&&(_isDOMWhitespace2(a)||!_isDOMWhitespace2(n[l]));l+=1)o+=1;var d=_getLocalOffset(e,i),u=_slicedToArray(d,2),c=u[0],p=u[1],h=_getLocalOffset(e,o),b=_slicedToArray(h,2),x=b[0],m=b[1];if(p===c.textContent.length){var g=_getRenderedTextNodes11(e),v=g[g.indexOf(c)+1];v&&(c=v,p=0)}var y=new Range;y.setStart(c,p),y.setEnd(x,m),this._ownerCanvas.selectedTextRange=y}},{key:"_expand",value:function(e){var t=this._ownerCanvas.selectedTextRange,n=t.startContainer.closest("text"),a=_getGlobalOffset14(t.startContainer,t.startOffset),r=_slicedToArray(a,2),i=r[1],o=_getGlobalOffset14(t.endContainer,t.endOffset),s=_slicedToArray(o,2),l=s[1];if(e<i)i=e;else if(e>l)l=e;else if(e>i&&e<l)e-i>l-e?l=e:i=e;else return;var d=_getLocalOffset(n,i),u=_slicedToArray(d,2),c=u[0],p=u[1],h=_getLocalOffset(n,l),b=_slicedToArray(h,2),x=b[0],m=b[1];if(p===c.textContent.length){var g=_getRenderedTextNodes11(n),v=g[g.indexOf(c)+1];v&&(c=v,p=0)}var y=new Range;y.setStart(c,p),y.setEnd(x,m),y.direction="backward",this._ownerCanvas.selectedTextRange=y}},{key:"_updateOverlays",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e?e.startContainer.closest("text"):null,n=e?t.getNumberOfChars():0,a=e?_getGlobalOffset14(e.startContainer,e.startOffset):[,-1],r=_slicedToArray(a,2),i=r[1],o=e?_getGlobalOffset14(e.endContainer,e.endOffset):[,-1],s=_slicedToArray(o,2),l=s[1];if(1===n&&e&&" "===e.toString()){var d=0,u=t.getExtentOfChar(d),c=t.getStartPositionOfChar(d),p=t.getSubStringLength(d,1),h=u.height,b=t.getRotationOfChar(d),x=new SVGMatrix;x.multiplySelf(_getTransformToElement16(t,this)),x.rotateSelf(b,c.x+p/2,c.y),this["#caret-line"].setAttribute("x1",c.x),this["#caret-line"].setAttribute("y1",u.y),this["#caret-line"].setAttribute("x2",c.x),this["#caret-line"].setAttribute("y2",u.y+h),this["#caret-line"].setAttribute("transform",x.toString()),this["#caret-line"].style.setProperty("visibility","visible")}else if(e&&!0===e.collapsed){var m="backward"===e.direction?i:l;if(0===m){var g=t.getExtentOfChar(m),v=t.getStartPositionOfChar(m),y=t.getSubStringLength(m,1),f=g.height,_=t.getRotationOfChar(m),w=new SVGMatrix;w.multiplySelf(_getTransformToElement16(t,this)),w.rotateSelf(_,v.x+y/2,v.y),this["#caret-line"].setAttribute("x1",v.x),this["#caret-line"].setAttribute("y1",g.y),this["#caret-line"].setAttribute("x2",v.x),this["#caret-line"].setAttribute("y2",g.y+f),this["#caret-line"].setAttribute("transform",w.toString()),this["#caret-line"].style.visibility="visible"}else if(0<m&&m<=n){var k=t.getExtentOfChar(m-1),A=t.getEndPositionOfChar(m-1),C=t.getSubStringLength(m-1,1),S=k.height,E=t.getRotationOfChar(m-1),T=new SVGMatrix;T.multiplySelf(_getTransformToElement16(t,this)),T.rotateSelf(E,A.x-C/2,A.y),this["#caret-line"].setAttribute("x1",A.x),this["#caret-line"].setAttribute("y1",k.y),this["#caret-line"].setAttribute("x2",A.x),this["#caret-line"].setAttribute("y2",k.y+S),this["#caret-line"].setAttribute("transform",T.toString()),this["#caret-line"].style.visibility="visible"}else m>n&&(this["#caret-line"].style.visibility="hidden")}else this["#caret-line"].style.visibility="hidden";if(this["#selection-rects"].innerHTML="",e&&!1===e.collapsed)for(var P=e.startContainer.closest("text"),L=P.getNumberOfChars(),D=i;D<l&&D<L;D+=1){var M=P.getExtentOfChar(D),N=P.getStartPositionOfChar(D),I=P.getEndPositionOfChar(D),R=P.getSubStringLength(D,1),V=M.height,z=P.getRotationOfChar(D),G=new SVGMatrix;G.multiplySelf(_getTransformToElement16(P,this)),G.rotateSelf(z,N.x+R/2,N.y);var B=_createElement27("svg:rect");B.setAttribute("x",N.x),B.setAttribute("y",M.y),B.setAttribute("width",R),B.setAttribute("height",V),B.setAttribute("transform",G.toString()),this["#selection-rects"].append(B)}if("visible"===this["#caret-line"].style.visibility)this["#ghost-input-object"].setAttribute("x",this["#caret-line"].x2.baseVal.value),this["#ghost-input-object"].setAttribute("y",this["#caret-line"].y2.baseVal.value),this["#caret-line"].hasAttribute("transform")?this["#ghost-input-object"].setAttribute("transform",this["#caret-line"].getAttribute("transform")):this["#ghost-input-object"].removeAttribute("transform");else if(0<this["#selection-rects"].children.length){var O=this["#selection-rects"].children[0];this["#ghost-input-object"].setAttribute("x",O.x.baseVal.value),this["#ghost-input-object"].setAttribute("y",O.y.baseVal.value+O.height.baseVal.value),O.hasAttribute("transform")?this["#ghost-input-object"].setAttribute("transform",O.getAttribute("transform")):this["#ghost-input-object"].removeAttribute("transform")}}},{key:"_updateGhostInput",value:function(){this._updateGhostInputContents(),this._updateGhostInputSelectionRange()}},{key:"_updateGhostInputContents",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e?e.startContainer.closest("text"):null,n=t?t.querySelector("textPath")||t:null;if(n){var a=n.innerHTML,r=_replaceAll5(a,"tspan","span");this["#ghost-input"].innerHTML=r,this._editedTextElement=t}}},{key:"_updateGhostInputSelectionRange",value:function(){var e=this._ownerCanvas.selectedTextRange;if(e){var t=this._editedTextElement,n=t?t.querySelector("textPath")||t:null;if(this._editedTextElement===t&&n){var a=this._getDescendantTextNodes(this["#ghost-input"]),r=this._getDescendantTextNodes(n),i=-1,o=-1,s=!0,l=!1,d;try{for(var u=r[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,e.startContainer===p&&(i=r.indexOf(p)),e.endContainer===p&&(o=r.indexOf(p))}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}if(-1!==i&&-1!==o){var h=new Range;h.setStart(a[i],e.startOffset),h.setEnd(a[o],e.endOffset);var b=window.getSelection();b.removeAllRanges(),b.addRange(h)}}}}},{key:"_updateTextElementContents",value:function(){var e=this._editedTextElement,t=e?e.querySelector("textPath")||e:null;{var n=this._getDescendantTextNodes(this["#ghost-input"]),a=this._getDescendantTextNodes(t);if(n.length===a.length)for(var r=0;r<n.length;r+=1)a[r].data!==n[r].data&&(a[r].data=n[r].data)}{var i=this["#ghost-input"].innerHTML,o=_replaceAll5(i,"span","tspan");o=_replaceAll5(o,"<br>",""),t.innerHTML!==o&&(t.innerHTML=o)}}},{key:"_updateTextElementSelectionRange",value:function(){var e=this._shadowRoot.getSelection(),t=0<e.rangeCount?e.getRangeAt(0):null,n=this._editedTextElement,a=n?n.querySelector("textPath")||n:null;if(t&&a){var r=this._getDescendantTextNodes(this["#ghost-input"]),i=this._getDescendantTextNodes(a),o=0,s=0,l=!0,d=!1,u;try{for(var c=r[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,t.startContainer===h&&(o=r.indexOf(h)),t.endContainer===h&&(s=r.indexOf(h))}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var b=new Range;b.setStart(i[o],t.startOffset),b.setEnd(i[s],t.endOffset),this._ownerCanvas.selectedTextRange=b}}},{key:"_getDescendantTextNodes",value:function(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);n.nextNode();)t.push(n.currentNode);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-texthud",BXTextHudElement,{extends:"g"})}}{{var _BoxySVG$utils$elemen50=BoxySVG.utils.element,_createElement28=_BoxySVG$utils$elemen50.createElement,_closest54=_BoxySVG$utils$elemen50.closest,_BoxySVG$utils$math7=BoxySVG.utils.math,_normalize8=_BoxySVG$utils$math7.normalize,_round28=_BoxySVG$utils$math7.round,_BoxySVG$utils$pathSh3=BoxySVG.utils.pathShapes,_getShapeData4=_BoxySVG$utils$pathSh3.getShapeData,_setShapeData8=_BoxySVG$utils$pathSh3.setShapeData,_throttle23=BoxySVG.utils.time.throttle,_getTransformToElement17=BoxySVG.utils.transformGeneral.getTransformToElement,_min6=Math.min,$rect=Symbol(),_shadowHTML19="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-recthud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-recthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-recthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-recthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-corner=\"1\"></circle>\n        <circle class=\"grippie\" data-corner=\"2\"></circle>\n        <circle class=\"grippie\" data-corner=\"3\"></circle>\n        <circle class=\"grippie\" data-corner=\"4\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRectHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRects=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle23(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML19;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest54(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest54(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._draggedGrippie&&this._draggedGrippie.dispatchEvent(new CustomEvent("lostpointercapture")),this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._draggedGrippie||(this._selectedRects=this._getSelectedRects(),0===this._selectedRects.length?!0===this._installed&&this._uninstall():(!1===this._installed&&this._install(),this._updateSubhuds()))}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,i=a[$rect],o=n.getAttribute("data-corner"),r=i.getScreenCTM().inverse(),s=this._ownerCanvas.geometryPrecision,l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=new SVGPoint(l.x,l.y),u="normal",c=!1,p=function(e){var t,n,a,r,i,o,s,l,d,u,c,p;if("rect"===e.localName){var h=e.hasAttribute("rx")?e.rx.baseVal.value:e.ry.baseVal.value,b=e.hasAttribute("ry")?e.ry.baseVal.value:e.rx.baseVal.value;t=e.x.baseVal.value,n=e.y.baseVal.value,a=e.width.baseVal.value,r=e.height.baseVal.value,i=h,o=h,s=h,l=h,d=b,u=b,c=b,p=b}else if("path"===e.localName){var x=_getShapeData4(e).values;t=x[0],n=x[1],a=x[2],r=x[3],i=x[4],o=x[5],s=x[6],l=x[7],d=void 0===x[8]?i:x[8],u=void 0===x[9]?o:x[9],c=void 0===x[10]?s:x[10],p=void 0===x[11]?l:x[11]}return[t,n,a,r,i,o,s,l,d,u,c,p]},h=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;if(!0===n&&!1===a)u="normal";else if(!1===n&&!0===a)u="symmetric-1234";else if(!0===n&&!0===a)u="symmetric-1234";else{var r=p(i),s=_slicedToArray(r,12),l=s[0],d=s[1],c=s[2],h=s[3],b=s[4],x=s[5],m=s[6],g=s[7],v=s[8],y=s[9],f=s[10],_=s[11],w=[],k,A;if("1"===o&&(k=b,A=v),"2"===o&&(k=x,A=y),"3"===o&&(k=m,A=f),"4"===o&&(k=g,A=_),b===k&&v===A&&w.push("1"),x===k&&y===A&&w.push("2"),m===k&&f===A&&w.push("3"),g===k&&_===A&&w.push("4"),1===w.length)u="normal";else{u="symmetric-";var C=!0,S=!1,E;try{for(var T=w[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,u+=L}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}}},b=function(){var e=d.x-l.x,n=d.y-l.y,c=0,r=p(i),h=_slicedToArray(r,12),b=h[0],x=h[1],m=h[2],g=h[3],y=h[4],f=h[5],_=h[6],w=h[7],k=h[8],A=h[9],C=h[10],S=h[11];if("1"===o?c=v[4]+e:"2"===o?c=v[5]-e:"3"===o?c=v[6]-e:"4"===o&&(c=v[7]+e),c=_normalize8(c,0,_min6(m/2,g/2),s),"normal"===u?"1"===o?(y=c,k=c):"2"===o?(f=c,A=c):"3"===o?(_=c,C=c):"4"===o&&(w=c,S=c):(u.includes("1")&&(y=c,k=c),u.includes("2")&&(f=c,A=c),u.includes("3")&&(_=c,C=c),u.includes("4")&&(w=c,S=c)),y===f&&y===_&&y===w&&k===A&&k===C&&k==S){if("path"===i.localName){var E=i,T=_createElement28("svg:rect"),P=!0,L=!1,D;try{for(var M=E.attributes[Symbol.iterator](),N,I;!(P=(N=M.next()).done);P=!0)I=N.value,"d"!==I.name&&"data-bx-shape"!==I.name&&T.setAttribute(I.name,I.value)}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}T.setAttribute("x",b),T.setAttribute("y",x),T.setAttribute("width",m),T.setAttribute("height",g),T.innerHTML=E.innerHTML,E.replace(T),i=T,a[$rect]=T,t._ownerCanvas.selectedElements=t._ownerCanvas.selectedElements.map(function(e){return e===E?T:e})}var R=_round28(y,s),V=_round28(f,s);0===R?i.removeAttribute("rx"):i.setAttribute("rx",R),0===V?i.removeAttribute("ry"):i.setAttribute("ry",V)}else{if("rect"===i.localName){var z=i,G=_createElement28("svg:path"),B=!0,O=!1,q;try{for(var j=z.attributes[Symbol.iterator](),U,H;!(B=(U=j.next()).done);B=!0)H=U.value,!1===["x","y","width","height","rx","ry"].includes(H.name)&&G.setAttribute(H.name,H.value)}catch(e){O=!0,q=e}finally{try{!B&&j.return&&j.return()}finally{if(O)throw q}}G.innerHTML=z.innerHTML,z.replace(G),i=G,a[$rect]=G,t._ownerCanvas.selectedElements=t._ownerCanvas.selectedElements.map(function(e){return e===z?G:e})}var $;if(y===k&&f===A&&_===C&&w&&S){var F=y,Y=f,X=_,W=w;$=[b,x,m,g,F,Y,X,W]}else $=[b,x,m,g,y,f,_,w,k,A,C,S];$=$.map(function(e){return _round28(e,s)}),_setShapeData8(i,{type:"rect",values:$},s)}},x,m,g,v;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,v=p(i),n.addEventListener("pointermove",x=function(e){c||(c=!0,t._ownerCanvas.undoManager.checkpoint("Round corners")),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),b()}),n.addEventListener("lostpointercapture",m=function(){n.removeEventListener("pointermove",x),n.removeEventListener("lostpointercapture",m),t._ownerApp.removeEventListener("modkeyschange",g),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",g=function(){h(),b()}),h()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedRects[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$rect]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$rect],s=_getTransformToElement17(o,this),l=void 0,d=void 0,u=void 0,c=void 0,p=void 0,h=void 0,b=void 0,x=void 0;if("rect"===o.localName)l=o.x.baseVal.value,d=o.y.baseVal.value,u=o.width.baseVal.value,c=o.height.baseVal.value,p=o.rx.baseVal.value,h=o.rx.baseVal.value,b=o.rx.baseVal.value,x=o.rx.baseVal.value;else if("path"===o.localName){var m=_getShapeData4(o);l=m.values[0],d=m.values[1],u=m.values[2],c=m.values[3],p=m.values[4],h=m.values[5],b=m.values[6],x=m.values[7]}var g=!0,v=!1,y=void 0;try{for(var f=i.children[Symbol.iterator](),_;!(g=(_=f.next()).done);g=!0){var w=_.value,k=w.getAttribute("data-corner"),A=void 0;"1"===k&&(A=new SVGPoint(l+p,d)),"2"===k?A=new SVGPoint(l+u-h,d):"3"===k?A=new SVGPoint(l+u-b,d+c):"4"===k&&(A=new SVGPoint(l+x,d+c));var C=A.matrixTransform(s);w.setAttribute("cx",C.x),w.setAttribute("cy",C.y)}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-recthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedRects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("rect")&&t.push(s):"rect"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedRects(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-recthud",BXRectHudElement,{extends:"g"})}}{{var _closest55=BoxySVG.utils.element.closest,_normalize9=BoxySVG.utils.math.normalize,_throttle24=BoxySVG.utils.time.throttle,_getTransformToElement18=BoxySVG.utils.transformGeneral.getTransformToElement,$circle=Symbol(),_grippieSize2=6,_shadowHTML20="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}</style>\n\n    <defs>\n      <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXCircleHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedCircles=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle24(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML20;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest55(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest55(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedCircles=this._getSelectedCircles(),0===this._selectedCircles.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,i=a[$circle],o=i.getCTM().inverse(),s=i.r.baseVal.value,l=new SVGPoint(e.clientX,e.clientY).matrixTransform(o),d=this._ownerCanvas.geometryPrecision,u=new SVGPoint(l.x,l.y),c=!1,r,p;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",r=function(e){c||(c=!0,t._ownerCanvas.undoManager.checkpoint("Circle radius")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(o);var n=u.x-l.x,a=_normalize9(s+n,0,Infinity,d);i.setAttribute("r",a)}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",p),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedCircles[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$circle]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$circle],s=_getTransformToElement18(o,this),l=i.children[0],d=new SVGPoint(o.cx.baseVal.value+o.r.baseVal.value,o.cy.baseVal.value);d=d.matrixTransform(s),l.setAttribute("cx",d.x),l.setAttribute("cy",d.y)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize2/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedCircles",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"circle"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedCircles(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-circlehud",BXCircleHudElement,{extends:"g"})}}{{var _closest56=BoxySVG.utils.element.closest,_normalize10=BoxySVG.utils.math.normalize,_throttle25=BoxySVG.utils.time.throttle,_getTransformToElement19=BoxySVG.utils.transformGeneral.getTransformToElement,$ellipse=Symbol(),_grippieSize3=6,_shadowHTML21="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ellipsehud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-ellipsehud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ellipsehud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ellipsehud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-axis=\"rx\" fill=\"none\"></circle>\n        <circle class=\"grippie\" data-axis=\"ry\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXEllipseHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedEllipses=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle25(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML21;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest56(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest56(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedEllipses=this._getSelectedEllipses(),0===this._selectedEllipses.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,i=a[$ellipse],o=n.getAttribute("data-axis"),r=i.getScreenCTM().inverse(),s={rx:i.rx.baseVal.value,ry:i.ry.baseVal.value},l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=this._ownerCanvas.geometryPrecision,u=new SVGPoint(l.x,l.y),c="normal",p=!1,h,b,x;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var m=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;!0===n&&!1===a?c="normal":!1===n&&!0===a?c="symmetric":!0===n&&!0===a?c="symmetric":i.rx.baseVal.value===i.ry.baseVal.value?c="symmetric":"normal"==c},g=function(){var e=u.x-l.x,t=u.y-l.y;if("rx"===o){if("normal"==c){var n=_normalize10(s.rx+e,0,Infinity,d);i.setAttribute("rx",n)}else if("symmetric"==c){var a=_normalize10(s.rx+e,0,Infinity,d);i.setAttribute("rx",a),i.setAttribute("ry",a)}}else if("ry"===o)if("normal"==c){var r=_normalize10(s.ry+t,0,Infinity,d);i.setAttribute("ry",r)}else if("symmetric"==c){var p=_normalize10(s.ry+t,0,Infinity,d);i.setAttribute("rx",p),i.setAttribute("ry",p)}};n.addEventListener("pointermove",h=function(e){p||(p=!0,t._ownerCanvas.undoManager.checkpoint("Ellipse radius")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),g()}),n.addEventListener("lostpointercapture",b=function(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",b),t._ownerApp.removeEventListener("modkeyschange",x),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",x=function(){m(),g()}),m()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedEllipses[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$ellipse]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$ellipse],s=_getTransformToElement19(o,this),l=!0,d=!1,u=void 0;try{for(var c=i.children[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=h.getAttribute("data-axis");if("rx"===b){var x=new SVGPoint(o.cx.baseVal.value+o.rx.baseVal.value,o.cy.baseVal.value).matrixTransform(s);h.setAttribute("cx",x.x),h.setAttribute("cy",x.y)}else if("ry"===b){var m=new SVGPoint(o.cx.baseVal.value,o.cy.baseVal.value+o.ry.baseVal.value).matrixTransform(s);h.setAttribute("cx",m.x),h.setAttribute("cy",m.y)}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize3/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ellipsehud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedEllipses",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"ellipse"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedEllipses(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ellipsehud",BXEllipseHudElement,{extends:"g"})}}{{var _closest57=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet18=BoxySVG.utils.geometry,_getNearestPointOnLine4=_BoxySVG$utils$geomet18.getNearestPointOnLine,_getPointAtFraction3=_BoxySVG$utils$geomet18.getPointAtFraction,_BoxySVG$utils$math8=BoxySVG.utils.math,_normalize11=_BoxySVG$utils$math8.normalize,_round29=_BoxySVG$utils$math8.round,_BoxySVG$utils$pathSh4=BoxySVG.utils.pathShapes,_getShapeData5=_BoxySVG$utils$pathSh4.getShapeData,_setShapeData9=_BoxySVG$utils$pathSh4.setShapeData,_throttle26=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf14=BoxySVG.utils.transformGeneral,_getComputedTransform17=_BoxySVG$utils$transf14.getComputedTransform,_getTransformToElement20=_BoxySVG$utils$transf14.getTransformToElement,_Vector7=BoxySVG.classes.Vector,_abs12=Math.abs,_$path=Symbol(),_shadowHTML22="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-trianglehud-grippie-shadow)}.shift-grippie{fill:#c3c303}.corner-grippie{fill:#73ba09}</style>\n\n    <defs>\n      <filter id=\"bx-trianglehud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-trianglehud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-trianglehud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie shift-grippie\"></circle>\n        <circle class=\"grippie corner-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXTriangleHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle26(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML22;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest57(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest57(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedTriangles=this._getSelectedTriangles(),0===this._selectedTriangles.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".shift-grippie")?this._onShiftGrippiePointerDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippiePointerDown(e)}},{key:"_onShiftGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path],i=r.getScreenCTM().inverse(),o=_slicedToArray(_getShapeData5(r).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],h=this._ownerCanvas.geometryPrecision,b=new SVGPoint(s,l),x=new SVGPoint(s+d,l),m=new SVGPoint(e.clientX,e.clientY),g=m.matrixTransform(i),v=new SVGPoint(s+d*c,l),y=new _Vector7(v,g).getOppositeVector(),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("Triangle radius"));var n=new SVGPoint(e.clientX,e.clientY),a=n.matrixTransform(i);a=y.transformPoint(a);var o=_getNearestPointOnLine4(b,x,a,!1),m=_slicedToArray(o,1),g=m[0];c=(g.x-b.x)/d,c=_normalize11(c,0,1,4),t._ownerApp.modKeys.shift&&(c=[0,0.5,1].reduce(function(e,t){return _abs12(t-c)<_abs12(e-c)?t:e}));var v=[s,l,d,u,c,p].map(function(e){return _round29(e,h)});_setShapeData9(r,{type:"triangle",values:v},h)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_onCornerGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path],i=_getComputedTransform17(r),o=r.getScreenCTM().inverse(),s=_slicedToArray(_getShapeData5(r).values,6),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],h=s[5],b=this._ownerCanvas.geometryPrecision,x=new SVGPoint(l+u*p,d),m=new SVGPoint(l+u,d+c),g=new SVGPoint(e.clientX,e.clientY),v=g.matrixTransform(o),y=new SVGPoint(v.x,v.y),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("Triangle radius"));var n=new SVGPoint(e.clientX,e.clientY);y=n.matrixTransform(o);var a=_getNearestPointOnLine4(m,x,y,!1),i=_slicedToArray(a,1),s=i[0],h=new _Vector7(m,s),g=new _Vector7(m,x),v=h.length/g.length,_=_normalize11(v,0,0.5,4),w=[l,d,u,c,p,_].map(function(e){return _round29(e,b)});_setShapeData9(r,{type:"triangle",values:w},b)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedTriangles[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[_$path]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path],s=_getTransformToElement20(o,this),l=_slicedToArray(_getShapeData5(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=!0,m=!1,g=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,f.matches(".shift-grippie")){var _=new SVGPoint(d+c*h,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".corner-grippie")){var w=new SVGPoint(d+c*h,u).matrixTransform(s),k=new SVGPoint(d+c,u+p).matrixTransform(s),A=_getPointAtFraction3(k,w,b);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-trianglehud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedTriangles",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("triangle")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedTriangles(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-trianglehud",BXTriangleHudElement,{extends:"g"})}}{{var _closest58=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet19=BoxySVG.utils.geometry,_getNearestPointOnLine5=_BoxySVG$utils$geomet19.getNearestPointOnLine,_getPointAtFraction4=_BoxySVG$utils$geomet19.getPointAtFraction,_BoxySVG$utils$math9=BoxySVG.utils.math,_round30=_BoxySVG$utils$math9.round,_normalize12=_BoxySVG$utils$math9.normalize,_BoxySVG$utils$pathSh5=BoxySVG.utils.pathShapes,_getShapeData6=_BoxySVG$utils$pathSh5.getShapeData,_setShapeData10=_BoxySVG$utils$pathSh5.setShapeData,_getNGonShapeVertexPoint=_BoxySVG$utils$pathSh5.getNGonShapeVertexPoint,_throttle27=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf15=BoxySVG.utils.transformGeneral,_getComputedTransform18=_BoxySVG$utils$transf15.getComputedTransform,_getTransformToElement21=_BoxySVG$utils$transf15.getTransformToElement,_Vector8=BoxySVG.classes.Vector,_$path2=Symbol(),_grippieSize4=6,_shadowHTML23="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ngonhud-grippie-shadow)}.grippie.r-grippie{fill:red}</style>\n\n    <defs>\n      <filter id=\"bx-ngonhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ngonhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ngonhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie arms-grippie\"></circle>\n        <circle class=\"grippie corner-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXNGonHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle27(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML23;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest58(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedNGons=this._getSelectedNGons(),0===this._selectedNGons.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".arms-grippie")?this._onArmsGrippiePointerDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippiePointerDown(e)}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path2],i=this._ownerCanvas.geometryPrecision,o=_slicedToArray(_getShapeData6(r).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],h=c,b=!1,x,m;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",x=function(n){var a=_round30((n.clientX-e.clientX)/10,0);c=h+a,5>c&&(c=5),!1==b&&c!==h&&(t._ownerCanvas.undoManager.checkpoint("Change number of n-gon arms"),b=!0),_setShapeData10(r,{type:"n-gon",values:[s,l,d,u,c,p]},i)}),n.addEventListener("lostpointercapture",m=function(){n.removeEventListener("pointermove",x),n.removeEventListener("lostpointercapture",m),t._draggedGrippie=null})}}},{key:"_onCornerGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path2],i=_getComputedTransform18(r),o=r.getScreenCTM().inverse(),s=this._ownerCanvas.geometryPrecision,l=_slicedToArray(_getShapeData6(r).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=new SVGPoint(e.clientX,e.clientY),m=x.matrixTransform(o),g=new SVGPoint(m.x,m.y),v=_getNGonShapeVertexPoint(0,d,u,c,p,h),y=_getNGonShapeVertexPoint(1,d,u,c,p,h),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("N-gon radius"));var n=new SVGPoint(e.clientX,e.clientY);g=n.matrixTransform(o);var a=_getNearestPointOnLine5(v,y,g,!1),i=_slicedToArray(a,1),l=i[0],b=new _Vector8(v,l),x=new _Vector8(v,y),m=b.length/x.length,_=_normalize12(m,0,0.5,2);_setShapeData10(r,{type:"n-gon",values:[d,u,c,p,h,_]},s)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedNGons[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[_$path2]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path2],s=_getTransformToElement21(o,this),l=_slicedToArray(_getShapeData6(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=!0,m=!1,g=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,f.matches(".arms-grippie")){var _=new SVGPoint(d,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".corner-grippie")){var w=_getNGonShapeVertexPoint(0,d,u,c,p,h).matrixTransform(s),k=_getNGonShapeVertexPoint(1,d,u,c,p,h).matrixTransform(s),A=_getPointAtFraction4(w,k,b);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize4/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ngonhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedNGons",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("n-gon")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedNGons(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ngonhud",BXNGonHudElement,{extends:"g"})}}{{var _closest59=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet20=BoxySVG.utils.geometry,_getNearestPointOnLine6=_BoxySVG$utils$geomet20.getNearestPointOnLine,_getPointBetweenTwoPoints3=_BoxySVG$utils$geomet20.getPointBetweenTwoPoints,_round31=BoxySVG.utils.math.round,_BoxySVG$utils$pathSh6=BoxySVG.utils.pathShapes,_getShapeData7=_BoxySVG$utils$pathSh6.getShapeData,_setShapeData11=_BoxySVG$utils$pathSh6.setShapeData,_getStarShapeVertexPoint=_BoxySVG$utils$pathSh6.getStarShapeVertexPoint,_throttle28=BoxySVG.utils.time.throttle,_getTransformToElement22=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector9=BoxySVG.classes.Vector,_sin4=Math.sin,_cos4=Math.cos,_PI5=Math.PI,$star=Symbol(),_shadowHTML24="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-starhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-starhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-starhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-starhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie arms-grippie\"></circle>\n        <circle class=\"grippie vertex-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXStarHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle28(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML24;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest59(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedStars=this._getSelectedStars(),0===this._selectedStars.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".vertex-grippie")?this._onVertexGrippiePointerDown(e):e.target.matches(".arms-grippie")&&this._onArmsGrippiePointerDown(e)}},{key:"_onVertexGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$star],i=r.getScreenCTM().inverse(),o=_slicedToArray(_getShapeData7(r).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],h=new SVGPoint(e.clientX,e.clientY),b=h.matrixTransform(i),x=new SVGPoint(s,l),m=_getStarShapeVertexPoint(0,s,l,d,u,c,p),g=_getStarShapeVertexPoint(1,s,l,d,u,c,p),v=_getStarShapeVertexPoint(2,s,l,d,u,c,p),y=!1,f,_;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",f=function(e){!1==y&&(y=!0,t._ownerCanvas.undoManager.checkpoint("Inner star radius"));var n=new SVGPoint(e.clientX,e.clientY),a=n.matrixTransform(i),o=new _Vector9(g,b),h=o.getOppositeVector().transformPoint(a),f=2*_PI5*(1/p/2)-_PI5/2,_=x,w=new SVGPoint(d*_cos4(f)+s,u*_sin4(f)+l),k=_getPointBetweenTwoPoints3(m,v),A=_getNearestPointOnLine6(_,k,h,!1),C=_slicedToArray(A,1),S=C[0];c=new _Vector9(_,S).length/new _Vector9(_,w).length,c=_round31(c,t._ownerCanvas.geometryPrecision),_setShapeData11(r,{type:"star",values:[s,l,d,u,c,p]},t._ownerCanvas.geometryPrecision)}),n.addEventListener("lostpointercapture",_=function(){n.removeEventListener("pointermove",f),n.removeEventListener("lostpointercapture",_),t._draggedGrippie=null})}}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$star],i=_slicedToArray(_getShapeData7(r).values,6),o=i[0],s=i[1],l=i[2],d=i[3],u=i[4],c=i[5],p=c,h=!1,b,x;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",b=function(n){var a=_round31((n.clientX-e.clientX)/10,0);c=p+a,3>c&&(c=3),!1==h&&c!==p&&(t._ownerCanvas.undoManager.checkpoint("Change number of star arms"),h=!0),_setShapeData11(r,{type:"star",values:[o,s,l,d,u,c]},t._ownerCanvas.geometryPrecision)}),n.addEventListener("lostpointercapture",x=function(){n.removeEventListener("pointermove",b),n.removeEventListener("lostpointercapture",x),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedStars[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$star]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$star],s=_getTransformToElement22(o,this),l=_slicedToArray(_getShapeData7(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=!0,m=!1,g=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,f.matches(".arms-grippie")){var _=new SVGPoint(d,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".vertex-grippie")){var w=_getStarShapeVertexPoint(1,d,u,c,p,h,b).matrixTransform(s);f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-starhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedStars",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("star")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedStars(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-starhud",BXStarHudElement,{extends:"g"})}}{{var _closest60=BoxySVG.utils.element.closest,_BoxySVG$utils$math10=BoxySVG.utils.math,_normalize13=_BoxySVG$utils$math10.normalize,_round32=_BoxySVG$utils$math10.round,_BoxySVG$utils$pathSh7=BoxySVG.utils.pathShapes,_getShapeData8=_BoxySVG$utils$pathSh7.getShapeData,_setShapeData12=_BoxySVG$utils$pathSh7.setShapeData,_throttle29=BoxySVG.utils.time.throttle,_getTransformToElement23=BoxySVG.utils.transformGeneral.getTransformToElement,_min7=Math.min,_max6=Math.max,$ring=Symbol(),_shadowHTML25="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ringhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-ringhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ringhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ringhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-axis=\"r1x\"></circle>\n        <circle class=\"grippie\" data-axis=\"r1y\"></circle>\n        <circle class=\"grippie\" data-axis=\"r2x\"></circle>\n        <circle class=\"grippie\" data-axis=\"r2y\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRingHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle29(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML25;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest60(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest60(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedRings=this._getSelectedRings(),0===this._selectedRings.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$ring],i=r.getScreenCTM().inverse(),o=new SVGPoint(e.clientX,e.clientY),s=o.matrixTransform(i),l=n.getAttribute("data-axis"),u=new SVGPoint(s.x,s.y),c="normal",d=!1,p=_slicedToArray(_getShapeData8(r).values,6),h=p[0],b=p[1],x=p[2],m=p[3],g=p[4],v=p[5],y=x,f=m,_=g,w=v,k,A,C;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var S=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;!0===n&&!1===a?c="normal":!1===n&&!0===a?c="symmetric":!0===n&&!0===a?c="double-symmetric":("r1x"===l&&x===m?c="symmetric":"r1y"===l&&x===m&&(c="symmetric"),"r2x"===l&&g===v?c="symmetric":"r2y"===l&&g===v?c="symmetric":"normal"==c)},E=function(){var e=u.x-s.x,n=u.y-s.y;if("r1x"===l){if("normal"==c){var a=g-1;x=_normalize13(y+e,1,a)}else if("symmetric"==c){var i=_min7(g,v)-1,o=_normalize13(y+e,1,i);x=m=o}else if("double-symmetric"==c){var p=Infinity,k=g-x,d=_normalize13(y+e,1,p);x=m=d,g=v=d+k}}else if("r1y"===l){if("normal"==c){var A=v-1;m=_normalize13(f+n,1,A)}else if("symmetric"==c){var C=_min7(g,v)-1,S=_normalize13(f+n,1,C);x=m=S}else if("double-symmetric"==c){var E=Infinity,T=v-m,P=_normalize13(f+n,1,E);x=m=P,g=v=P+T}}else if("r2x"===l){if("normal"==c){var L=x+1,D=Infinity;g=_normalize13(_+e,L,D)}else if("symmetric"==c){var M=_max6(x,m)+1,N=Infinity,I=_normalize13(_+e,M,N);g=v=I}else if("double-symmetric"==c){var R=g-x,V=Infinity,z=_normalize13(_+e,R+1,V);x=m=z-R,g=v=z}}else if("r2y"===l)if("normal"==c){var G=m+1,B=Infinity;v=_normalize13(w+n,G,B)}else if("symmetric"==c){var O=_max6(x,m)+1,q=Infinity,j=_normalize13(w+n,O,q);g=v=j}else if("double-symmetric"==c){var U=v-m,H=Infinity,$=_normalize13(w+n,U+1,r2max);x=m=$-U,g=v=$}var F=[h,b,x,m,g,v];F=F.map(function(e){return _round32(e,t._ownerCanvas.geometryPrecision)}),_setShapeData12(r,{type:"ring",values:F},t._ownerCanvas.geometryPrecision)};n.addEventListener("pointermove",k=function(e){d||(t._ownerCanvas.undoManager.checkpoint("Ring radius"),d=!0),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),E()}),n.addEventListener("lostpointercapture",A=function(){n.removeEventListener("pointermove",k),n.removeEventListener("lostpointercapture",A),t._ownerApp.removeEventListener("modkeyschange",C),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",C=function(){S(),E()}),S()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedRings[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$ring]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$ring],s=_getTransformToElement23(o,this),l=_slicedToArray(_getShapeData8(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=!0,m=!1,g=void 0;try{for(var v=i.children[Symbol.iterator](),y;!(x=(y=v.next()).done);x=!0){var f=y.value,_=f.getAttribute("data-axis");if("r1x"===_){var w=new SVGPoint(d+c,u).matrixTransform(s);f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}else if("r1y"===_){var k=new SVGPoint(d,u+p).matrixTransform(s);f.setAttribute("cx",k.x),f.setAttribute("cy",k.y)}else if("r2x"===_){var A=new SVGPoint(d+h,u).matrixTransform(s);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}else if("r2y"===_){var C=new SVGPoint(d,u+b).matrixTransform(s);f.setAttribute("cx",C.x),f.setAttribute("cy",C.y)}}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ringhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedRings",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("ring")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedRings(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ringhud",BXRingHudElement,{extends:"g"})}}{{var _closest61=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet21=BoxySVG.utils.geometry,_getDistanceBetweenPoints7=_BoxySVG$utils$geomet21.getDistanceBetweenPoints,_getNearestPointOnLine7=_BoxySVG$utils$geomet21.getNearestPointOnLine,_getRotationAngleFromPoints6=_BoxySVG$utils$geomet21.getRotationAngleFromPoints,_BoxySVG$utils$pathSh8=BoxySVG.utils.pathShapes,_getShapeData9=_BoxySVG$utils$pathSh8.getShapeData,_setShapeData13=_BoxySVG$utils$pathSh8.setShapeData,_throttle30=BoxySVG.utils.time.throttle,_getTransformToElement24=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector10=BoxySVG.classes.Vector,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,$pie=Symbol(),_shadowHTML26="\n    <style>:host{display:none;contain:strict}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-shadow)}.end-angle-grippie,.start-angle-grippie{fill:#c3c303}</style>\n\n    <defs>\n      <filter id=\"grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie r-grippie r1-grippie\"></circle>\n        <circle class=\"grippie r-grippie r2-grippie\"></circle>\n        <circle class=\"grippie angle-grippie start-angle-grippie\"></circle>\n        <circle class=\"grippie angle-grippie end-angle-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXPieHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle30(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML26;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest61(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedPies=this._getSelectedPies(),0===this._selectedPies.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".r-grippie")?this._onRGrippiePointerDown(e):e.target.matches(".angle-grippie")&&this._onAngleGrippiePointerDown(e)}},{key:"_onRGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$pie],o=_slicedToArray(_getShapeData9(i).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],h=!1,b=i.getScreenCTM().inverse(),x=_getTransformToElement24(i,this).inverse(),m=new SVGPoint(e.clientX,e.clientY),g=m.matrixTransform(b),v=new SVGPoint(s,l),y=new SVGPoint(a.cx.baseVal.value,a.cy.baseVal.value),f=y.matrixTransform(x),_=new _Vector10(g,f),w,k,A;{var C=(c+p)/2;c>p&&(C-=180);var S=new SVGMatrix().rotateSelf(C,s,l);A=new SVGPoint(s,l-MAX_SAFE_INTEGER).matrixTransform(S)}a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,a.addEventListener("pointermove",w=function(e){!1==h&&(h=!0,n.undoManager.checkpoint("Pie radius"));var t=new SVGPoint(e.clientX,e.clientY),o=t.matrixTransform(b),x=_.transformPoint(o),m=_getNearestPointOnLine7(v,A,x,!1),g=_slicedToArray(m,1),y=g[0],f=_getDistanceBetweenPoints7(v,y),r=1;a.matches(".r1-grippie")?d=f>u-r?u-r:f:a.matches(".r2-grippie")&&(u=f<d+r?d+r:f),_setShapeData13(i,{type:"pie",values:[s,l,d,u,c,p]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",k=function(){a.removeEventListener("pointermove",w),a.removeEventListener("lostpointercapture",k),t._draggedGrippie=null})}}},{key:"_onAngleGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$pie],i=r.getScreenCTM().inverse(),o=this._ownerCanvas.geometryPrecision,s=_slicedToArray(_getShapeData9(r).values,6),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],h=s[5],b=p,x=h,m=new SVGPoint(l,d),g=new SVGPoint(m.x,m.y-100),v=!1,y,f;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",y=function(e){var a=new SVGPoint(e.clientX,e.clientY),s=a.matrixTransform(i),y=_getRotationAngleFromPoints6(m,g,s);y=t._normalizeAngle(y),n.matches(".start-angle-grippie")?p=y:h=y,!1==v&&(p!==b||h!==x)&&(t._ownerCanvas.undoManager.checkpoint("Pie start angle"),v=!0),_setShapeData13(r,{type:"pie",values:[l,d,u,c,p,h]},o)}),n.addEventListener("lostpointercapture",f=function(){n.removeEventListener("pointermove",y),n.removeEventListener("lostpointercapture",f),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedPies[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$pie]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$pie],s=_getTransformToElement24(o,this),l=_slicedToArray(_getShapeData9(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],b=l[5],x=!0,m=!1,g=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(x=(y=v.next()).done);x=!0)if(f=y.value,f.matches(".start-angle-grippie")){var _=new SVGMatrix().rotateSelf(h,d,u),w=new SVGPoint(d,u-c+(c-p)/2);w=w.matrixTransform(_),w=w.matrixTransform(s),f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}else if(f.matches(".end-angle-grippie")){var k=new SVGMatrix().rotateSelf(b,d,u),A=new SVGPoint(d,u-c+(c-p)/2);A=A.matrixTransform(k),A=A.matrixTransform(s),f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}else if(f.matches(".r1-grippie")){var C=(h+b)/2;h>b&&(C-=180);var S=new SVGMatrix().rotateSelf(C,d,u),E=new SVGPoint(d,u-c);E=E.matrixTransform(S),E=E.matrixTransform(s),f.setAttribute("cx",E.x),f.setAttribute("cy",E.y)}else if(f.matches(".r2-grippie")){var T=(h+b)/2;h>b&&(T-=180);var P=new SVGMatrix().rotateSelf(T,d,u),L=new SVGPoint(d,u-p);L=L.matrixTransform(P),L=L.matrixTransform(s),f.setAttribute("cx",L.x),f.setAttribute("cy",L.y)}}catch(e){m=!0,g=e}finally{try{!x&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("pie")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedPies(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"_normalizeAngle",value:function(e){for(;0>e;)e+=360;for(;360<e;)e-=360;return e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-piehud",BXPieHudElement,{extends:"g"})}}{{var _closest62=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet22=BoxySVG.utils.geometry,_degToRad4=_BoxySVG$utils$geomet22.degToRad,_getDistanceBetweenPoints8=_BoxySVG$utils$geomet22.getDistanceBetweenPoints,_getNearestPointOnLine8=_BoxySVG$utils$geomet22.getNearestPointOnLine,_BoxySVG$utils$math11=BoxySVG.utils.math,_normalize14=_BoxySVG$utils$math11.normalize,_round33=_BoxySVG$utils$math11.round,_BoxySVG$utils$pathSh9=BoxySVG.utils.pathShapes,_getShapeData10=_BoxySVG$utils$pathSh9.getShapeData,_setShapeData14=_BoxySVG$utils$pathSh9.setShapeData,_throttle31=BoxySVG.utils.time.throttle,_getTransformToElement25=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector11=BoxySVG.classes.Vector,_sin5=Math.sin,_cos5=Math.cos,_tan5=Math.tan,_MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,$cog=Symbol(),_shadowHTML27="\n    <style>:host{display:none;contain:strict}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-shadow)}.splay-grippie{fill:#c3c303}</style>\n\n    <defs>\n      <filter id=\"grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie teeth-grippie\"></circle>\n        <circle class=\"grippie splay-grippie\"></circle>\n        <circle class=\"grippie r-grippie r1-grippie\"></circle>\n        <circle class=\"grippie r-grippie r2-grippie\"></circle>\n        <circle class=\"grippie r-grippie r3-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXCogHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle31(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML27;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest62(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedCogs=this._getSelectedCogs(),0===this._selectedCogs.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".r-grippie")?this._onRGrippiePointerDown(e):e.target.matches(".teeth-grippie")?this._onTeethGrippiePointerDown(e):e.target.matches(".splay-grippie")&&this._onSplayGrippiePointerDown(e)}},{key:"_onRGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$cog],o=i.getScreenCTM().inverse(),s=_slicedToArray(_getShapeData10(i).values,7),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],h=s[5],b=s[6],x=e.clientX,m=e.clientY,g=new SVGPoint(x,m).matrixTransform(o),v=new SVGPoint(l,d),y=new SVGPoint(l,d-p);a.matches(".r1-grippie")?y=new SVGPoint(l,d-u):a.matches(".r2-grippie")?y=new SVGPoint(l,d-c):a.matches(".r3-grippie")&&(y=new SVGPoint(l,d-p));var f=new _Vector11(g,y),_=!1,w,k;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a;var A=new SVGPoint(l,d-_MAX_SAFE_INTEGER);a.addEventListener("pointermove",w=function(e){!1==_&&(_=!0,n.undoManager.checkpoint("Inner cog radius"));var t=new SVGPoint(e.clientX,e.clientY),s=t.matrixTransform(o);s=f.transformPoint(s);var x=_getNearestPointOnLine8(v,A,s,!1),m=_slicedToArray(x,1),g=m[0],y=_getDistanceBetweenPoints8(v,g);a.matches(".r1-grippie")?u=y:a.matches(".r2-grippie")?c=y:a.matches(".r3-grippie")&&(p=y),_setShapeData14(i,{type:"cog",values:[l,d,u,c,p,h,b]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",k=function(){a.removeEventListener("pointermove",w),a.removeEventListener("lostpointercapture",k),t._draggedGrippie=null})}}},{key:"_onTeethGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$cog],o=_slicedToArray(_getShapeData10(i).values,7),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],h=o[6],b=h,x=!1,m,g;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,a.addEventListener("pointermove",m=function(t){var a=_round33((t.clientX-e.clientX)/10,0);h=b+a,3>h&&(h=3),!1==x&&h!==b&&(n.undoManager.checkpoint("Change number of cog teeth"),x=!0),_setShapeData14(i,{type:"cog",values:[s,l,d,u,c,p,h]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",g=function(){a.removeEventListener("pointermove",m),a.removeEventListener("lostpointercapture",g),t._draggedGrippie=null})}}},{key:"_onSplayGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$cog],o=_slicedToArray(_getShapeData10(i).values,7),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],h=o[6],b=e.clientX,x=e.clientY,m=p,g=i.getScreenCTM().inverse(),v=!1,y=function(e){var t=360/h,n=t/4,r=_tan5(_degToRad4(n-e*n))*c,i=t-90,a=_degToRad4(i),o=_degToRad4(i+n+e*n),d=_degToRad4(i+t-n-e*n),u=new SVGPoint(s+c*_cos5(a)-_sin5(a)*r,l+c*_sin5(a)+_cos5(a)*r),p=new SVGMatrix().rotateSelf(t,s,l);return u=u.matrixTransform(p),u},f=new SVGPoint(b,x).matrixTransform(g),_=y(m),w=new _Vector11(f,_),k=y(0),A=y(1),C,S;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,a.addEventListener("pointermove",C=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(g),r=w.transformPoint(a),o=_getNearestPointOnLine8(k,A,r,!1),p=_slicedToArray(o,1),b=p[0],x=_getDistanceBetweenPoints8(k,b)/_getDistanceBetweenPoints8(k,A);x=_normalize14(x,0,1,3),!1==v&&x!==m&&(n.undoManager.checkpoint("Cog splay"),v=!0),_setShapeData14(i,{type:"cog",values:[s,l,d,u,c,x,h]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",S=function(){a.removeEventListener("pointermove",C),a.removeEventListener("lostpointercapture",S),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedCogs[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$cog]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i;!(e=(i=r.next()).done);e=!0){var o=i.value,s=o[$cog],l=_getTransformToElement25(s,this),d=_slicedToArray(_getShapeData10(s).values,7),u=d[0],c=d[1],p=d[2],h=d[3],b=d[4],x=d[5],m=d[6],g=!0,v=!1,y=void 0;try{for(var f=o.children[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)if(w=_.value,w.matches(".r1-grippie")){var k=new SVGMatrix().rotateSelf(360/m/2,u,c),A=new SVGPoint(u,c-p);A=A.matrixTransform(k),A=A.matrixTransform(l),w.setAttribute("cx",A.x),w.setAttribute("cy",A.y)}else if(w.matches(".r2-grippie")){var C=new SVGMatrix().rotateSelf(360/m/2,u,c),S=new SVGPoint(u,c-h);S=S.matrixTransform(C),S=S.matrixTransform(l),w.setAttribute("cx",S.x),w.setAttribute("cy",S.y)}else if(w.matches(".r3-grippie")){var E=new SVGPoint(u,c-b);E=E.matrixTransform(l),w.setAttribute("cx",E.x),w.setAttribute("cy",E.y)}else if(w.matches(".teeth-grippie")){var T=new SVGPoint(u,c).matrixTransform(l);w.setAttribute("cx",T.x),w.setAttribute("cy",T.y)}else if(w.matches(".splay-grippie")){var P=360/m,L=P/4,D=_tan5(_degToRad4(L-x*L))*b,M=P-90,a=_degToRad4(M),N=_degToRad4(M+L+x*L),I=_degToRad4(M+P-L-x*L),R=new SVGPoint(u+b*_cos5(a)-_sin5(a)*D,c+b*_sin5(a)+_cos5(a)*D);R=R.matrixTransform(l),w.setAttribute("cx",R.x),w.setAttribute("cy",R.y)}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedCogs",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("cog")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedCogs(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-coghud",BXCogHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen51=BoxySVG.utils.element,_createElement29=_BoxySVG$utils$elemen51.createElement,_closest63=_BoxySVG$utils$elemen51.closest,_isPointerMoveIntentional10=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet23=BoxySVG.utils.geometry,_comparePoints4=_BoxySVG$utils$geomet23.comparePoints,_rectContainsRect2=_BoxySVG$utils$geomet23.rectContainsRect,_snapPointToAngleMultiple3=_BoxySVG$utils$geomet23.snapPointToAngleMultiple,_throttle32=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf16=BoxySVG.utils.transformGeneral,_getComputedTransform19=_BoxySVG$utils$transf16.getComputedTransform,_getTransformToElement26=_BoxySVG$utils$transf16.getTransformToElement,_BoxySVG$utils$curves=BoxySVG.utils.curvesGeneral,_getCubicCurveTParam=_BoxySVG$utils$curves.getCubicCurveTParam,_splitCurve=_BoxySVG$utils$curves.splitCurve,_round34=BoxySVG.utils.math.round,_BoxySVG$classes5=BoxySVG.classes,_Shortcut13=_BoxySVG$classes5.Shortcut,_Vector12=_BoxySVG$classes5.Vector,_abs13=Math.abs,_max7=Math.max,_pow6=Math.pow,_parseFloat12=Number.parseFloat,_BoxySVG$utils$pathGe4=BoxySVG.utils.pathGeneral,_clonePathData2=_BoxySVG$utils$pathGe4.clonePathData,_getPathDataBySubpath2=_BoxySVG$utils$pathGe4.getPathDataBySubpath,_getNearestPointOnPath=_BoxySVG$utils$pathGe4.getNearestPointOnPath,_harmonizePathData=_BoxySVG$utils$pathGe4.harmonizePathData,_getSegSubpathData=_BoxySVG$utils$pathGe4.getSegSubpathData,_getSegIndexAtLength=_BoxySVG$utils$pathGe4.getSegIndexAtLength,_getCurveShapeBetweenSegs=_BoxySVG$utils$pathGe4.getCurveShapeBetweenSegs,_makePrevSegSmooth=_BoxySVG$utils$pathGe4.makePrevSegSmooth,_makeNextSegSmooth=_BoxySVG$utils$pathGe4.makeNextSegSmooth,_makeSharpSegsSmooth=_BoxySVG$utils$pathGe4.makeSharpSegsSmooth,_convertLSegsToCSegs=_BoxySVG$utils$pathGe4.convertLSegsToCSegs,_convertCSegsToLSegs=_BoxySVG$utils$pathGe4.convertCSegsToLSegs,_isSegSubpathClosed=_BoxySVG$utils$pathGe4.isSegSubpathClosed,nodeGrippieSize=5,controlGrippieSize=4,_shadowHTML28="\n    <style>:host{display:none;outline:0;contain:size layout style paint}:host([enabled]){display:initial}#grippies{cursor:default}.node-grippie{fill:#a6a6a6;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-pathhud-grippie-shadow)}.node-grippie[data-selected]{fill:#7c7cff}:host(:focus) .node-grippie[data-selected]{fill:#00f}:host([passive]) .node-grippie[data-position=end],:host([passive]) .node-grippie[data-position=start]{fill:red}:host([passive]) .node-grippie:not([data-position]){display:none}.outline-grippie{fill:none;stroke:#00f;stroke-width:6;vector-effect:non-scaling-stroke;opacity:0}.outline-grippie:hover{opacity:.1}:host([passive]) .outline-grippie{display:none}.control-grippie,.control-line{vector-effect:non-scaling-stroke}.control-grippie{fill:red;filter:url(#bx-pathhud-grippie-shadow);stroke:#fff;stroke-width:1.5}.control-line{stroke:red;stroke-width:2;pointer-events:none;opacity:.3}</style>\n\n    <defs>\n      <filter id=\"bx-pathhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-pathhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-pathhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n    </defs>\n\n    <g id=\"grippies\">\n      <g id=\"outline-grippies\"></g>\n      <g id=\"control-lines\"></g>\n      <g id=\"node-grippies\"></g>\n      <g id=\"control-grippies\"></g>\n    </g>\n  ",_$path3=Symbol(),$text=Symbol(),$segIndex=Symbol(),$selectedSegsIndexes=Symbol(),BXPathHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllSegs()}}},this._installed=!1,this._selectedPaths=[],this._draggedNodeGrippie=null,this._draggedControlGrippie=null,this._draggedOutlineGrippie=null,this._updateOutlineGrippies1500Th=_throttle32(this._updateOutlineGrippies,1500,this),this._updateNodeGrippies40Th=_throttle32(this._updateNodeGrippies,40,this),this._updateControlGrippies40Th=_throttle32(this._updateControlGrippies,40,this),this._updateNodeGrippiesSize40Th=_throttle32(this._updateNodeGrippiesSize,40,this),this._updateControlGrippiesSize40Th=_throttle32(this._updateControlGrippiesSize,40,this),this._updateOutlineGrippiesSize1500Th=_throttle32(this._updateOutlineGrippiesSize,1500,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML28;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("dblclick",this._shadowRootDblClickListener=function(t){e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest63(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest63(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"rubberBandSelectionCallback",value:function(e){var t=this._ownerApp.modKeys.shift,n=[],a=!0,r=!1,i;try{for(var o=this["#node-grippies"].children[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.getBBox();_rectContainsRect2(e,d)&&n.push(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var u=!0,c=!1,p;try{for(var h=function(){var e=x.value,a=n.filter(function(t){return t[_$path3]===e}),r=a.map(function(e){return e[$segIndex]});if(e[$selectedSegsIndexes]||(e[$selectedSegsIndexes]=[]),!1===t)e[$selectedSegsIndexes]=r;else{var i=!0,o=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,!1===e[$selectedSegsIndexes].includes(u)&&e[$selectedSegsIndexes].push(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}},b=this._selectedPaths[Symbol.iterator](),x;!(u=(x=b.next()).done);u=!0)h()}catch(e){c=!0,p=e}finally{try{!u&&b.return&&b.return()}finally{if(c)throw p}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th(),0<n.length&&this.focus()}},{key:"_install",value:function(){var e=this;this._installed=!0,this._updateDropShadows(),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._onArtboardMutation()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e.deselectAllSegs()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e.deselectAllSegs()})}},{key:"_uninstall",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,delete i[$selectedSegsIndexes]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._selectedPaths=[],this._installed=!1,this["#outline-grippies"].innerHTML="",this["#node-grippies"].innerHTML="",this["#control-grippies"].innerHTML="",this["#control-lines"].innerHTML="",this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i[$selectedSegsIndexes]=[]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._selectedPaths=this._getSelectedPaths(),0===this._selectedPaths.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th())}},{key:"_onArtboardMutation",value:function(){this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th()}},{key:"_onZoomChange",value:function(){this._updateNodeGrippiesSize40Th(),this._updateControlGrippiesSize40Th(),this._updateOutlineGrippiesSize1500Th(),this._updateDropShadows()}},{key:"_onKeyDown",value:function(e){if(!1===this.passive&&this["#node-grippies"].querySelector("[data-selected]")){var t=_Shortcut13.fromEvent(e);t.matches("Backspace")?(e.preventDefault(),e.stopPropagation(),this._deleteSelectedSegs("smooth")):t.matches("Shift","Backspace")&&(e.preventDefault(),e.stopPropagation(),this._deleteSelectedSegs("sharp"))}}},{key:"_onShadowRootPointerDown",value:function(e){e.preventDefault(),this.focus(),e.target.matches(".node-grippie")?this._onNodeGrippiePointerDown(e):e.target.matches(".control-grippie")?this._onControlGrippiePointerDown(e):e.target.matches(".outline-grippie")&&this._onOutlineGrippiePointerDown(e)}},{key:"_onNodeGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=!1;if(!1===this.passive){var a=this._ownerApp.modKeys.shift,r=e.target,i=r[_$path3],o=r[$segIndex];i[$selectedSegsIndexes]||(i[$selectedSegsIndexes]=[]);var s;window.addEventListener("pointerup",s=function(){window.removeEventListener("pointerup",s);var e=i[$selectedSegsIndexes].includes(o);if(!1===e){if(!1===a){i[$selectedSegsIndexes]=[o];var r=!0,l=!1,d;try{for(var u=t._selectedPaths[Symbol.iterator](),c,p;!(r=(c=u.next()).done);r=!0)p=c.value,p!==i&&(p[$selectedSegsIndexes]=[])}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}else!0===a&&i[$selectedSegsIndexes].push(o);t._updateNodeGrippies40Th(),t._updateControlGrippies40Th()}else!0===a&&!1==n&&(i[$selectedSegsIndexes]=i[$selectedSegsIndexes].filter(function(e){return e!==o}),t._updateNodeGrippies40Th(),t._updateControlGrippies40Th())})}{var l=e.target,d=new SVGPoint(e.clientX,e.clientY),u,c;window.addEventListener("pointermove",u=function(a){if(!1===t.passive&&_isPointerMoveIntentional10(e,a)){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",c);var r=new _Vector12(a.clientX-e.clientX,a.clientY-e.clientY);n=!0;var i=_abs13(r.x)>_abs13(r.y)?"horizontal":"vertical",o=new SVGPoint(a.clientX,a.clientY);t._onNodeGrippieDragStart(e,l,o,i)}}),window.addEventListener("pointerup",c=function(){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",c),t.dispatchEvent(new CustomEvent("nodegrippieclick",{detail:{position:l.getAttribute("data-position"),selected:l.hasAttribute("data-selected"),path:l[_$path3]}}))})}}}},{key:"_onNodeGrippieDragStart",value:function(e,t,n,a){var r=this;this._ownerCanvas.undoManager.checkpoint("Edit path");var i=Symbol(),o=Symbol(),s=Symbol(),l=this._ownerApp.modKeys.shift,d=t[_$path3],u=t[$segIndex],c,p;d[$selectedSegsIndexes]||(d[$selectedSegsIndexes]=[]);var h=d[$selectedSegsIndexes].includes(u);if(!1===h){d[$selectedSegsIndexes]=[u];var b=!0,x=!1,m;try{for(var g=this._selectedPaths[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,y!==d&&(y[$selectedSegsIndexes]=[])}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th()}this._draggedNodeGrippie=t;var f=!0,_=!1,w;try{for(var k=this._selectedPaths[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=_harmonizePathData(C.getPathData({normalize:!0})),E=_clonePathData2(S),T=C[$text],P=void 0;if(T){var L=_getComputedTransform19(C),D=T.getScreenCTM();P=D.multiply(L).inverse()}else P=C.getScreenCTM().inverse();C[s]=P,C[o]=S,C[i]=E}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}window.addEventListener("pointermove",c=function(e){var t=new SVGPoint(e.clientX,e.clientY);r._ownerApp.modKeys.shift&&("horizontal"===a?t.y=n.y:"vertical"===a&&(t.x=n.x));var l=!0,d=!1,u;try{for(var c=r._selectedPaths[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,b=n.matrixTransform(h[s]),x=t.matrixTransform(h[s]),m=x.x-b.x,g=x.y-b.y,v=h[o],y=h[i],f=h[$selectedSegsIndexes]||[],_=!0,w=!1,k=void 0;try{for(var A=f[Symbol.iterator](),C;!(_=(C=A.next()).done);_=!0){var S=C.value,E=v[S],T=v[S+1],P=y[S],L=y[S+1];if("M"===E.type||"L"===E.type){if(E.values[0]=P.values[0]+m,E.values[1]=P.values[1]+g,T&&"C"===T.type)T.values[0]=L.values[0]+m,T.values[1]=L.values[1]+g;else if(T&&"Z"===T.type){var D=_getSegSubpathData(E,v),M=D[0],N=D[1],I=_getSegSubpathData(P,y);M.values[0]=E.values[0],M.values[1]=E.values[1],N&&"C"===N.type&&(N.values[0]=I[1].values[0]+m,N.values[1]=I[1].values[1]+g)}}else if("C"===E.type)if(E.values[2]=P.values[2]+m,E.values[3]=P.values[3]+g,E.values[4]=P.values[4]+m,E.values[5]=P.values[5]+g,T&&"C"===T.type)T.values[0]=L.values[0]+m,T.values[1]=L.values[1]+g;else if(T&&"Z"===T.type){var R=_getSegSubpathData(E,v),V=R[0],z=R[1],G=_getSegSubpathData(P,y);V.values[0]=E.values[4],V.values[1]=E.values[5],"C"===z.type&&(z.values[0]=G[1].values[0]+m,z.values[1]=G[1].values[1]+g)}}}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}h.setPathData(v)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",p);var e=!0,t=!1,n;try{for(var a=r._selectedPaths[Symbol.iterator](),i;!(e=(i=a.next()).done);e=!0){var s=i.value,l=s[o],d=!0,u=!1,h=void 0;try{for(var b=l[Symbol.iterator](),x,m;!(d=(x=b.next()).done);d=!0)m=x.value,m.values=m.values.map(function(e){return _round34(e,r._ownerCanvas.geometryPrecision)})}catch(e){u=!0,h=e}finally{try{!d&&b.return&&b.return()}finally{if(u)throw h}}s.setPathData(l)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}r._draggedNodeGrippie=null,r._updateOutlineGrippies()})}},{key:"_onShadowRootDblClick",value:function(e){e.target.classList.contains("node-grippie")?this._onNodeGrippieDblClick(e):e.target.classList.contains("control-grippie")?this._onControlGrippieDblClick(e):e.target.classList.contains("outline-grippie")&&this._onOutlineGrippieDblClick(e)}},{key:"_onNodeGrippieDblClick",value:function(e){var t=this,n=e.target,a=n[_$path3],r=n[$segIndex],i=_harmonizePathData(a.getPathData({normalize:!0})),o=i[r],s=i[r+1]||null,l=i[r-1]||null,d=_getSegSubpathData(o,i),u=!1;if(_convertLSegsToCSegs(i),"M"===o.type){if("C"===s.type){var c=s.values[0]===o.values[0]&&s.values[1]===o.values[1];!1==c&&(s.values[0]=o.values[0],s.values[1]=o.values[1],u=!0)}}else if("C"===o.type)if(null===s||"M"===s.type){var p=o.values[2]===o.values[4]&&o.values[3]===o.values[5];!1==p&&(o.values[2]=o.values[4],o.values[3]=o.values[5],u=!0)}else if("Z"===s.type){var h=d[1];if("C"===h.type){var b=o.values[4]===h.values[0]&&o.values[5]===h.values[1]&&o.values[4]===o.values[2]&&o.values[5]===o.values[3];!1==b?(h.values[0]=o.values[4],h.values[1]=o.values[5],o.values[2]=o.values[4],o.values[3]=o.values[5]):_makeSharpSegsSmooth(l,o,h),u=!0}}else if("C"===s.type){var x=s.values[0]===o.values[4]&&s.values[1]===o.values[5]&&o.values[2]===o.values[4]&&o.values[3]===o.values[5];!1==x?(o.values[2]=o.values[4],o.values[3]=o.values[5],s.values[0]=o.values[4],s.values[1]=o.values[5]):_makeSharpSegsSmooth(l,o,s),u=!0}if(u){this._ownerCanvas.undoManager.checkpoint("Edit path"),_convertCSegsToLSegs(i);var m=!0,g=!1,v;try{for(var y=i[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,_.values=_.values.map(function(e){return _round34(e,t._ownerCanvas.geometryPrecision)})}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}a.setPathData(i)}}},{key:"_onControlGrippieDblClick",value:function(e){var t=this,n=e.target,a=n.getAttribute("data-index"),r=n[_$path3],i=n[$segIndex],o=_harmonizePathData(r.getPathData({normalize:!0})),s=o[i],l=o[i-1]||null;"1"===a?"C"===l.type?(s.values[0]=l.values[4],s.values[1]=l.values[5]):("M"===l.type||"L"===l.type)&&(s.values[0]=l.values[0],s.values[1]=l.values[1]):"2"===a&&(s.values[2]=s.values[4],s.values[3]=s.values[5]),this._ownerCanvas.undoManager.checkpoint("Edit path"),_convertCSegsToLSegs(o);var d=!0,u=!1,c;try{for(var p=o[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,b.values=b.values.map(function(e){return _round34(e,t._ownerCanvas.geometryPrecision)})}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}r.setPathData(o)}},{key:"_onOutlineGrippieDblClick",value:function(e){var n=this,a=e.target[_$path3],r=a[$text],i;if(r){var o=_getComputedTransform19(a),s=r.getScreenCTM();i=s.multiply(o).inverse()}else i=a.getScreenCTM().inverse();var l=_harmonizePathData(a.getPathData({normalize:!0})),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),u=_getNearestPointOnPath(a,d),c=_slicedToArray(u,2),p=c[0],h=c[1],b=_getSegIndexAtLength(l,h),x=l[b],m,g;if("L"===x.type){var v=new SVGPoint(x.values[0],x.values[1]);m={type:"L",values:[p.x,p.y]},g={type:"L",values:[v.x,v.y]}}else if("C"===x.type){var y=l[b-1]||null,f;"M"===y.type||"L"===y.type?f=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(f=new SVGPoint(y.values[4],y.values[5]));var _=new SVGPoint(x.values[4],x.values[5]),w=new SVGPoint(x.values[0],x.values[1]),k=new SVGPoint(x.values[2],x.values[3]),A=_getCubicCurveTParam(p,f,w,k,_),t=_splitCurve(f,w,k,_,A);if(-1===A)return;m={type:"C",values:[t[0][1].x,t[0][1].y,t[0][2].x,t[0][2].y,t[0][3].x,t[0][3].y]},g={type:"C",values:[t[1][1].x,t[1][1].y,t[1][2].x,t[1][2].y,t[1][3].x,t[1][3].y]}}this._ownerCanvas.undoManager.checkpoint("Add path node"),l=[].concat(_toConsumableArray(l.slice(0,b)),[m,g],_toConsumableArray(l.slice(b+1)));var C=!0,S=!1,E;try{for(var T=l[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.values=L.values.map(function(e){return _round34(e,n._ownerCanvas.geometryPrecision)})}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}a.setPathData(l),a[$selectedSegsIndexes]=[b];var D=!0,M=!1,N;try{for(var I=this._selectedPaths[Symbol.iterator](),R,V;!(D=(R=I.next()).done);D=!0)V=R.value,V!==a&&(V[$selectedSegsIndexes]=[])}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}this._updateNodeGrippies(),this._updateControlGrippies()}},{key:"_onControlGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;window.addEventListener("pointermove",a=function(i){if(_isPointerMoveIntentional10(e,i)){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r);var o=new SVGPoint(i.clientX,i.clientY);t._onControlGrippieDragStart(e,n,o)}}),window.addEventListener("pointerup",r=function(){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r)})}}},{key:"_onControlGrippieDragStart",value:function(e,t,n){var a=this;this._ownerCanvas.undoManager.checkpoint("Move control point");var r=t.getAttribute("data-index"),i=t[_$path3],o=i[$text],s,l;if(o){var d=_getComputedTransform19(i),u=o.getScreenCTM();l=u.multiply(d),s=l.inverse()}else l=i.getScreenCTM(),s=l.inverse();var c=t[$segIndex],p=_harmonizePathData(i.getPathData({normalize:!0}));_convertLSegsToCSegs(p);var h=p[c],b=p[c-1]||null,x=p[c+1]||null,m=_getSegSubpathData(h,p),g=_isSegSubpathClosed(h,p),v=n.matrixTransform(s),y={type:"C",values:[].concat(_toConsumableArray(h.values))},f=null,_=null,w=null;f="M"===b.type?g?m[m.length-2]:b:b,x&&("Z"===x.type?_=g?m[1]:null:"C"===x.type&&(_=x)),"1"===r?"M"===f.type||"L"===f.type?w=new SVGPoint(f.values[0],f.values[1]):"C"===f.type&&(w=new SVGPoint(f.values[4],f.values[5])):"2"===r&&(w=new SVGPoint(h.values[4],h.values[5]));var k="sharp",A=w.matrixTransform(l),C=new SVGPoint(v.x,v.y),S,E,T;this._draggedControlGrippie=t;var P=function(){var e=a._ownerApp.modKeys,t=e.ctrl,n=e.shift;!0===t&&!1===n?k="sharp":!1===t&&!0===n?"1"===r?k=f&&"C"===f.type?"smooth":"sharp":"2"===r&&(k=_&&"C"===_.type?"smooth":"sharp"):!0===t&&!0===n?"1"===r?k=f&&"C"===f.type?"symmetric-smooth":"sharp":"2"===r&&(k=_&&"C"===_.type?"symmetric-smooth":"sharp"):!1===t&&!1===n&&("1"===r?k=_getCurveShapeBetweenSegs(f,h):"2"===r&&(k=_getCurveShapeBetweenSegs(h,_)))},L=function(){if("1"===r){var e;if(a._ownerApp.modKeys.shift)e=C;else{var t=C.x-v.x,n=C.y-v.y;e=new SVGPoint(y.values[0]+t,y.values[1]+n)}if(h.values[0]=e.x,h.values[1]=e.y,"smooth"===k){var o=new SVGPoint(f.values[2],f.values[3]),s=new _Vector12(w,e),l=new _Vector12(w,o),d=s.getOppositeVector();d.length=l.length,f.values[2]=w.x+d.x,f.values[3]=w.y+d.y}else if("symmetric-smooth"===k){var u=new _Vector12(w,e);u=u.negate(),f.values[2]=w.x+u.x,f.values[3]=w.y+u.y}}else if("2"===r){var c;if(a._ownerApp.modKeys.shift)c=C;else{var b=C.x-v.x,x=C.y-v.y;c=new SVGPoint(y.values[2]+b,y.values[3]+x)}if(h.values[2]=c.x,h.values[3]=c.y,"smooth"===k){var m=new SVGPoint(_.values[0],_.values[1]),g=new _Vector12(w,c),A=new _Vector12(w,m),S=g.getOppositeVector();S.length=A.length,_.values[0]=w.x+S.x,_.values[1]=w.y+S.y}else if("symmetric-smooth"===k){var E=new _Vector12(w,c);E=E.negate(),_.values[0]=w.x+E.x,_.values[1]=w.y+E.y}}i.setPathData(p)};window.addEventListener("pointermove",S=function(e){var t=new SVGPoint(e.clientX,e.clientY);if(a._ownerApp.modKeys.shift){var n=_snapPointToAngleMultiple3(A,t,22.5),r=_slicedToArray(n,1),i=r[0];t=i}C=t.matrixTransform(s),L()}),window.addEventListener("pointerup",E=function(){window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",E),a._ownerApp.removeEventListener("modkeyschange",T),_convertCSegsToLSegs(p);var e=!0,t=!1,n;try{for(var r=p[Symbol.iterator](),o,s;!(e=(o=r.next()).done);e=!0)s=o.value,s.values=s.values.map(function(e){return _round34(e,a._ownerCanvas.geometryPrecision)})}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}i.setPathData(p),a._draggedControlGrippie=null}),this._ownerApp.addEventListener("modkeyschange",T=function(){P()}),P()}},{key:"_onOutlineGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=!1,a=e.target,r,i;window.addEventListener("pointermove",r=function(o){_isPointerMoveIntentional10(e,o)&&(window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),t._onOutlineGrippieDragStart(o,a),n=!0)}),window.addEventListener("pointerup",i=function(){if(window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),!1==n){var o=a[_$path3],s=o[$text],l;if(s){var d=_getComputedTransform19(o),u=s.getScreenCTM();l=u.multiply(d).inverse()}else l=o.getScreenCTM().inverse();var c=_harmonizePathData(o.getPathData({normalize:!0})),p=new SVGPoint(e.clientX,e.clientY),h=p.matrixTransform(l),b=_getNearestPointOnPath(o,h),x=_slicedToArray(b,2),m=x[0],g=x[1],v=_getSegIndexAtLength(c,g),y=v-1,f=c[v],_=c[y],w=_getSegSubpathData(f,c),k=_isSegSubpathClosed(f,c);o[$selectedSegsIndexes]=_?k&&"M"===_.type?[v,w.length-2]:[v,y]:[v],t._updateNodeGrippies40Th(),t._updateControlGrippies40Th()}})}}},{key:"_onOutlineGrippieDragStart",value:function(e,t){var n=this;this._ownerCanvas.undoManager.checkpoint("Edit path"),this._draggedOutlineGrippie=e.target,this["#outline-grippies"].style.display="none";var a=t[_$path3],r=a[$text],i;if(r){var o=_getComputedTransform19(a),s=r.getScreenCTM();i=s.multiply(o).inverse()}else i=a.getScreenCTM().inverse();var l=_harmonizePathData(a.getPathData({normalize:!0})),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),u=_getNearestPointOnPath(a,d),c=_slicedToArray(u,2),p=c[0],h=c[1],b=_getSegIndexAtLength(l,h),x=l[b],m=l[b-1],g=l[b+1],v=_getSegSubpathData(x,l),y=_isSegSubpathClosed(x,l),f=new _Vector12(d,p),_=new SVGPoint(d.x,d.y),w=null,k=null,A=null,C=null,S=!1,E=!1,T,P,L;_convertLSegsToCSegs(l),w="M"===m.type?y?v[v.length-2]:m:m,g&&("Z"===g.type?k=y?v[1]:null:"C"===g.type&&(k=g)),"M"===w.type||"L"===w.type?A=new SVGPoint(w.values[0],w.values[1]):"C"===w.type&&(A=new SVGPoint(w.values[4],w.values[5])),"M"===x.type||"L"===x.type?C=new SVGPoint(x.values[0],x.values[1]):"C"===x.type&&(C=new SVGPoint(x.values[4],x.values[5]));var D=function(){var e=n._ownerApp.modKeys,t=e.ctrl,a=e.shift;!0===t&&!1===a?(S=!1,E=!1):!1===t&&!0===a?(S=w&&"C"===w.type&&"smooth",E=k&&"C"===k.type&&"smooth"):!0===t&&!0===a?(S=w&&"C"===w.type&&"symmetric-smooth",E=k&&"C"===k.type&&"symmetric-smooth"):!1===t&&!1===a&&(S=_getCurveShapeBetweenSegs(w,x),E=_getCurveShapeBetweenSegs(x,k))},M=function(){var e=new SVGPoint(x.values[0],x.values[1]),n=new SVGPoint(x.values[2],x.values[3]),r=_getCubicCurveTParam(p,A,e,n,C),t=1;if(r<=1/6?t=0:0.5>=r?t=_pow6((6*r-1)/2,3)/2:r<=5/6&&(t=(1-_pow6((6*(1-r)-1)/2,3))/2+0.5),-1!==r){var i=(1-t)/(3*r*(1-r)*(1-r)),o=t/(3*r*r*(1-r)),s=_.x-p.x,d=_.y-p.y;x.values[0]+=i*s,x.values[1]+=i*d,x.values[2]+=o*s,x.values[3]+=o*d,"smooth"===S?_makePrevSegSmooth(x,w,!1):"symmetric-smooth"===S&&_makePrevSegSmooth(x,w,!0),"smooth"===E?_makeNextSegSmooth(x,k,!1):"symmetric-smooth"===E&&_makeNextSegSmooth(x,k,!0),p=_,a.setPathData(l)}};window.addEventListener("pointermove",T=function(e){_=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),_.x+=f.x,_.y+=f.y,M()}),window.addEventListener("pointerup",P=function(){n._ownerApp.removeEventListener("modkeyschange",L),window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",P),_convertCSegsToLSegs(l);var e=!0,t=!1,r;try{for(var i=l[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,s.values=s.values.map(function(e){return _round34(e,n._ownerCanvas.geometryPrecision)})}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}a.setPathData(l),n._draggedOutlineGrippie=null,n["#outline-grippies"].style.display=null,n._updateOutlineGrippies()}),this._ownerApp.addEventListener("modkeyschange",L=function(){D(),M()}),D()}},{key:"_updateOutlineGrippies",value:function(){if(!(this._draggedOutlineGrippie||this._draggedNodeGrippie||this._draggedControlGrippie)){var e=document.createDocumentFragment(),t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=void 0;if(o[$text]){var l=_getTransformToElement26(o[$text],this),d=_getComputedTransform19(o);s=l.multiply(d)}else s=_getTransformToElement26(o,this);var u=o.getPathData(),c=_createElement29("svg:path");c[_$path3]=o,c.setAttribute("class","outline-grippie"),c.setAttribute("transform",s.toString()),c.setPathData(u),e.append(c)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#outline-grippies"].innerHTML="",this["#outline-grippies"].append(e),this._updateOutlineGrippiesSize()}}},{key:"_updateNodeGrippies",value:function(){if(!(this._draggedOutlineGrippie||this._draggedControlGrippie)){var e=document.createDocumentFragment(),t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=void 0;if(o[$text]){var l=_getTransformToElement26(o[$text],this),d=_getComputedTransform19(o);s=l.multiply(d)}else s=_getTransformToElement26(o,this);var u=_harmonizePathData(o.getPathData({normalize:!0})),c=u.length,p=[],h=void 0,b=void 0;0===c?(h=null,b=null):1===c?(h=u[0],b=null):1<c&&(h=u[0],b=u[c-1]);for(var x=b&&"Z"===b.type,m=0;m<c;m+=1){var g=u[m],v=void 0;if("C"===g.type)v=new SVGPoint(g.values[4],g.values[5]);else if("L"===g.type)v=new SVGPoint(g.values[0],g.values[1]);else if("M"===g.type&&!1===_isSegSubpathClosed(g,u))v=new SVGPoint(g.values[0],g.values[1]);else continue;var y=v.matrixTransform(s),f=_createElement29("svg:circle");f.setAttribute("class","node-grippie"),f.setAttribute("cx",y.x),f.setAttribute("cy",y.y),f.setAttribute("r",nodeGrippieSize/this._ownerCanvas.scale),f[_$path3]=o,f[$segIndex]=m,g!==h||x||f.setAttribute("data-position","start"),g!==b||x||f.setAttribute("data-position","end"),o[$selectedSegsIndexes]&&o[$selectedSegsIndexes].includes(m)&&f.setAttribute("data-selected",""),p.push(f)}var _=!0,w=!1,k=void 0;try{for(var A=p[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)S=C.value,e.append(S)}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#node-grippies"].innerHTML="",this["#node-grippies"].append(e)}}},{key:"_updateControlGrippies",value:function(){var e=document.createDocumentFragment(),t=document.createDocumentFragment(),n=!0,a=!1,r;try{for(var i=this._selectedPaths[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_harmonizePathData(s.getPathData({normalize:!0})),d=s[$selectedSegsIndexes]||[],u=void 0;if(s[$text]){var c=_getTransformToElement26(s[$text],this),p=_getComputedTransform19(s);u=c.multiply(p)}else u=_getTransformToElement26(s,this);var h=!0,b=!1,x=void 0;try{for(var m=d[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var v=g.value,y=l[v],f=l[v+1]||null,_=_getSegSubpathData(y,l)[1],w=l.indexOf(_),k=void 0,A=null,C=null;if("M"===y.type||"L"===y.type?k=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(k=new SVGPoint(y.values[4],y.values[5])),"C"===y.type&&(A=new SVGPoint(y.values[2],y.values[3])),f&&("C"===f.type?C=new SVGPoint(f.values[0],f.values[1]):"Z"===f.type&&"C"===_.type&&(C=new SVGPoint(_.values[0],_.values[1]))),A&&!1===_comparePoints4(k,A)){var S=k.matrixTransform(u),E=A.matrixTransform(u),T=_createElement29("svg:circle");T.setAttribute("class","control-grippie"),T.setAttribute("data-index","2"),T.setAttribute("cx",E.x),T.setAttribute("cy",E.y),T.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale),T[_$path3]=s,T[$segIndex]=v;var P=_createElement29("svg:line");P.setAttribute("class","control-line"),P.setAttribute("x1",S.x),P.setAttribute("y1",S.y),P.setAttribute("x2",E.x),P.setAttribute("y2",E.y),e.append(T),t.append(P)}if(C&&!1===_comparePoints4(k,C)){var L=k.matrixTransform(u),D=C.matrixTransform(u),M=_createElement29("svg:circle");M.setAttribute("class","control-grippie"),M.setAttribute("data-index","1"),M.setAttribute("cx",D.x),M.setAttribute("cy",D.y),M.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale),M[_$path3]=s,M[$segIndex]="Z"===f.type?w:v+1;var N=_createElement29("svg:line");N.setAttribute("class","control-line"),N.setAttribute("x1",L.x),N.setAttribute("y1",L.y),N.setAttribute("x2",D.x),N.setAttribute("y2",D.y),e.append(M),t.append(N)}}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#control-grippies"].innerHTML="",this["#control-grippies"].append(e),this["#control-lines"].innerHTML="",this["#control-lines"].append(t)}},{key:"_updateNodeGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#node-grippies"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",nodeGrippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateControlGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#control-grippies"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateOutlineGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#outline-grippies"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path3],s=getComputedStyle(o),l=_parseFloat12(s.getPropertyValue("stroke-width"))*this._ownerCanvas.scale;10>l&&(l=10),i.style.setProperty("stroke-width",l)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateDropShadows",value:function(){this["#bx-pathhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_selectAllSegs",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){for(var i=r.value,o=_harmonizePathData(i.getPathData({normalize:!0})),s=[],l=0,d;l<o.length;l+=1)d=o[l],"C"===d.type||"L"===d.type?s.push(l):"M"===d.type&&!1===_isSegSubpathClosed(d,o)&&s.push(l);i[$selectedSegsIndexes]=s}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateNodeGrippies(),this._updateControlGrippies()}},{key:"deselectAllSegs",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i[$selectedSegsIndexes]=[]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th()}},{key:"_deleteSelectedSegs",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"smooth";this._ownerCanvas.undoManager.checkpoint("Delete segments");var n=!0,a=!1,r;try{for(var i=function(){var n=s.value,a=_harmonizePathData(n.getPathData({normalize:!0}));_convertLSegsToCSegs(a);var r=[].concat(_toConsumableArray(n[$selectedSegsIndexes])).sort(function(e,t){return t-e}),i=r.filter(function(e){return"C"===a[e].type}),o=r.filter(function(e){return"M"===a[e].type});if(0===r.length)return"continue";var l=!0,d=!1,u;try{for(var c=function(){var e=h.value,n=a[e],r=a[e+1]||null,i=a[e-1]||null;if(null===r)a=a.filter(function(e){return e!==n});else if("M"===r.type)a=a.filter(function(e){return e!==n});else if("Z"===r.type){var o=_getSegSubpathData(n,a),s=o[0],l=o[1];a=a.filter(function(e){return e!==n}),"L"===i.type||"M"===i.type?(s.values[0]=i.values[0],s.values[1]=i.values[1]):"C"===i.type&&(s.values[0]=i.values[4],s.values[1]=i.values[5]),"C"===l.type&&("smooth"===t?(l.values[0]=n.values[0],l.values[1]=n.values[1]):"sharp"===t&&("L"===i.type||"M"===i.type?(l.values[0]=i.values[0],l.values[1]=i.values[1]):"C"===i.type&&(l.values[0]=i.values[4],l.values[1]=i.values[5]),l.values[2]=l.values[4],l.values[3]=l.values[5]))}else"C"===r.type?(a=a.filter(function(e){return e!==n}),"smooth"===t?(r.values[0]=n.values[0],r.values[1]=n.values[1]):"sharp"===t&&("M"===i.type||"L"===i.type?(r.values[0]=i.values[0],r.values[1]=i.values[1]):"C"===i.type&&(r.values[0]=i.values[4],r.values[1]=i.values[5]),r.values[2]=r.values[4],r.values[3]=r.values[5])):"L"===r.type&&(a=a.filter(function(e){return e!==n}))},p=i[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0)c()}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}var b=!0,x=!1,m;try{for(var g=o[Symbol.iterator](),v;!(b=(v=g.next()).done);b=!0){var y=v.value,f=a[y],_=_getSegSubpathData(f,a);1<_.length&&function(){var e=_[0],t=_[1];a=a.filter(function(e){return e!==t}),"L"===t.type?(e.values[0]=t.values[0],e.values[1]=t.values[1]):"C"===t.type&&(e.values[0]=t.values[4],e.values[1]=t.values[5])}()}}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}var w=!0,k=!1,A;try{for(var C=_getPathDataBySubpath2(a)[Symbol.iterator](),S;!(w=(S=C.next()).done);w=!0){var E=S.value,T=E.filter(function(e){return"C"===e.type}),P="Z"===E[E.length-1].type,L=P?2:1;if(T.length<L){var D=!0,M=!1,N=void 0;try{for(var I=function(){var e=V.value;a=a.filter(function(t){return t!==e})},R=E[Symbol.iterator](),V;!(D=(V=R.next()).done);D=!0)I()}catch(e){M=!0,N=e}finally{try{!D&&R.return&&R.return()}finally{if(M)throw N}}}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}n[$selectedSegsIndexes]=[],_convertCSegsToLSegs(a);var z=!0,G=!1,B;try{for(var O=a[Symbol.iterator](),q,j;!(z=(q=O.next()).done);z=!0)j=q.value,j.values=j.values.map(function(t){return _round34(t,e._ownerCanvas.geometryPrecision)})}catch(e){G=!0,B=e}finally{try{!z&&O.return&&O.return()}finally{if(G)throw B}}n.setPathData(a),!1===n.hasAttribute("d")&&n.remove()},o=this._selectedPaths[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=i(),"continue"===l}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"getNodeGrippiesDescriptors",value:function(e,t){var n=this._shadowRoot.elementsFromPoint(e,t),a=[],r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.push({path:d[_$path3],position:d.getAttribute("data-position"),selected:d.hasAttribute("data-selected")})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return a}},{key:"_getSelectedPaths",value:function(){var e=this,t=[],n=[];return function a(r){var i=!0,o=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,"path"===u.localName)u.hasAttribute("d")&&!u.hasAttribute("data-bx-shape")&&(u[$text]=null,t.push(u));else if("text"===u.localName){var c=u,p=[].concat(_toConsumableArray(u.children)).find(function(e){return"textPath"===e.localName});if(p){var h=p.getAttribute("href");if(h){var b=e._ownerCanvas.artboards.querySelector(h);b&&b.hasAttribute("d")&&!b.hasAttribute("data-bx-shape")&&(b[$text]=c,n.push(b))}}}else("g"===u.localName||"a"===u.localName)&&a(u.children)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}(this._ownerCanvas.selectedElements),t=t.filter(function(e){return!1===n.includes(e)}),[].concat(_toConsumableArray(t),n)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"passive",get:function(){return this.hasAttribute("passive")},set:function(e){e?this.setAttribute("passive",""):this.removeAttribute("passive")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-pathhud",BXPathHudElement)}{var _closest64=BoxySVG.utils.element.closest,_snapPointToAngleMultiple4=BoxySVG.utils.geometry.snapPointToAngleMultiple,_round35=BoxySVG.utils.math.round,_throttle33=BoxySVG.utils.time.throttle,_getTransformToElement27=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector13=BoxySVG.classes.Vector,$line=Symbol(),_grippieSize5=6,_shadowHTML29="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}</style>\n\n    <defs>\n      <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"start-grippie grippie\" fill=\"none\"></circle>\n        <circle class=\"end-grippie grippie\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXLineHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedLines=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle33(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML29;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest64(this,"bx-electronApp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest64(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedLines=this._getSelectedLines(),0===this._selectedLines.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".start-grippie")?this._onStartGrippiePointerDown(e):e.target.matches(".end-grippie")&&this._onEndGrippiePointerDown(e)}},{key:"_onStartGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$line],i=r.getCTM(),o=r.getCTM().inverse(),s=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),l=s.matrixTransform(i),d=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),u=d.matrixTransform(i),c=new SVGPoint(e.clientX,e.clientY),p=this._ownerCanvas.geometryPrecision,h=!1,b,x;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",b=function(e){h||(h=!0,t._ownerCanvas.undoManager.checkpoint("Line start point"));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector13(c,n),i=new SVGPoint(l.x+a.x,l.y+a.y);if(t._ownerApp.modKeys.shift){var s=_snapPointToAngleMultiple4(u,i,22.5),d=_slicedToArray(s,1),b=d[0];i=b}var x=i.matrixTransform(o);r.setAttribute("x1",_round35(x.x,p)),r.setAttribute("y1",_round35(x.y,p))}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",b),window.removeEventListener("pointerup",x),t._draggedGrippie=null})}}},{key:"_onEndGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$line],i=r.getCTM(),o=r.getCTM().inverse(),s=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),l=s.matrixTransform(i),d=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),u=d.matrixTransform(i),c=new SVGPoint(e.clientX,e.clientY),p=this._ownerCanvas.geometryPrecision,h=!1,b,x;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",b=function(e){h||(h=!0,t._ownerCanvas.undoManager.checkpoint("Line start point"));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector13(c,n),i=new SVGPoint(u.x+a.x,u.y+a.y);if(t._ownerApp.modKeys.shift){var s=_snapPointToAngleMultiple4(l,i,22.5),d=_slicedToArray(s,1),b=d[0];i=b}var x=i.matrixTransform(o);r.setAttribute("x2",_round35(x.x,p)),r.setAttribute("y2",_round35(x.y,p))}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",b),window.removeEventListener("pointerup",x),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedLines[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$line]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$line],s=_getTransformToElement27(o,this),l=i.querySelector(".start-grippie"),d=i.querySelector(".end-grippie"),u=new SVGPoint(o.x1.baseVal.value,o.y1.baseVal.value),c=u.matrixTransform(s),p=new SVGPoint(o.x2.baseVal.value,o.y2.baseVal.value),h=p.matrixTransform(s);l.setAttribute("cx",c.x),l.setAttribute("cy",c.y),d.setAttribute("cx",h.x),d.setAttribute("cy",h.y)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize5/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedLines",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.outermostSelectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"line"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedLines(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-linehud",BXLineHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen52=BoxySVG.utils.element,_createElement30=_BoxySVG$utils$elemen52.createElement,_closest65=_BoxySVG$utils$elemen52.closest,_snapPointToAngleMultiple5=BoxySVG.utils.geometry.snapPointToAngleMultiple,_round36=BoxySVG.utils.math.round,_throttle34=BoxySVG.utils.time.throttle,_getTransformToElement28=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector14=BoxySVG.classes.Vector,$poly=Symbol(),$pointIndex=Symbol(),$selectedPointsIndexes=Symbol(),_grippieSize6=6,_shadowHTML30="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}.grippie[data-selected]{fill:red}</style>\n\n    <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n      <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n      <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n      <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n    </filter>\n\n    <g id=\"node-grippies\"></g>\n  ",BXPolyHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedPolys=[],this._draggedGrippie=null,this._updateNodeGrippies200Th=_throttle34(this._updateNodeGrippies,200,this),this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML30;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest65(this,"bx-electronApp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest65(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#node-grippies"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedPolys=this._getSelectedPolys(),0===this._selectedPolys.length?!0===this._installed&&this._uninstall():(!1===this._installed&&this._install(),this._updateNodeGrippies())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateNodeGrippies():this._updateNodeGrippies200Th()}},{key:"_onZoomChange",value:function(){this._updateNodeGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerApp.modKeys.shift,a=e.target,r=a[$poly],i=a[$pointIndex],o=r.getCTM(),s=r.getCTM().inverse(),l=r.points[i],d=l.matrixTransform(o),u=new SVGPoint(e.clientX,e.clientY),c=this._ownerCanvas.geometryPrecision,p=!1,h,b;a.parentElement.append(a),this._draggedGrippie=a,window.addEventListener("pointermove",h=function(e){p||(p=!0,t._ownerCanvas.undoManager.checkpoint("Edit "+r.localName));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector14(u,n),o=new SVGPoint(d.x+a.x,d.y+a.y),l=o.matrixTransform(s);r.points[i].x=_round36(l.x,c),r.points[i].y=_round36(l.y,c);var h=[],b=!0,x=!1,m;try{for(var g=r.points[Symbol.iterator](),v,y;!(b=(v=g.next()).done);b=!0)y=v.value,h.push(y.x,y.y)}catch(e){x=!0,m=e}finally{try{!b&&g.return&&g.return()}finally{if(x)throw m}}r.setAttribute("points",h.join(" "))}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",b),t._draggedGrippie=null})}}},{key:"_updateNodeGrippies",value:function(){var e=0,t=!0,n=!1,a;try{for(var r=this._selectedPolys[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0)for(var o=i.value,s=_getTransformToElement28(o,this),l=0;l<o.points.length;l+=1){var d=o.points[l],u=d.matrixTransform(s),c=this["#node-grippies"].children[e];c||(c=_createElement30("svg:circle"),c.setAttribute("class","grippie"),this["#node-grippies"].append(c)),c[$poly]=o,c[$pointIndex]=l,c.setAttribute("cx",u.x),c.setAttribute("cy",u.y),o[$selectedPointsIndexes]&&o[$selectedPointsIndexes].includes(l)?c.setAttribute("data-selected",""):c.removeAttribute("data-selected"),e+=1}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}for(;this["#node-grippies"].childElementCount>e;)this["#node-grippies"].lastElementChild.remove();this._updateNodeGrippiesSize()}},{key:"_updateNodeGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#node-grippies"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",_grippieSize6/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPolys",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"polyline"===s.localName||"polygon"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedPolys(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-polyhud",BXPolyHudElement,{extends:"g"})}{{var _closest66=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet24=BoxySVG.utils.geometry,_comparePoints5=_BoxySVG$utils$geomet24.comparePoints,_snapPointToAngleMultiple6=_BoxySVG$utils$geomet24.snapPointToAngleMultiple,_BoxySVG$utils$transf17=BoxySVG.utils.transformGeneral,_getComputedTransform20=_BoxySVG$utils$transf17.getComputedTransform,_getTransformToElement29=_BoxySVG$utils$transf17.getTransformToElement,_Vector15=BoxySVG.classes.Vector,_shadowHTML31="\n    <style>:host{contain:size layout style paint}#control-line-1,#control-line-2{fill:none;stroke:red;stroke-width:1;vector-effect:non-scaling-stroke;pointer-events:none;opacity:.4}#control-point-1-grippie,#control-point-2-grippie{fill:red;stroke:none;pointer-events:none;opacity:1}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <path id=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n\n    <line id=\"control-line-1\"></line>\n    <line id=\"control-line-2\"></line>\n\n    <circle id=\"control-point-1-grippie\"></circle>\n    <circle id=\"control-point-2-grippie\"></circle>\n  ",BXCubicBezierSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML31;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest66(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest66(this,"bx-canvas")}},{key:"show",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"end",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._position=t,this._path=e,this._textPath=n,this._snap="none",this.style.visibility="hidden",!1===this._hasListeners&&this._addListeners(),this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines()}},{key:"hide",value:function(){this._path=null,this._clientX=null,this._clientY=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,this._pointerDown=!1,this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){!1===e._pointerDown&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines())}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("pointerdown",this._pointerDownListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines();var n=e._path.getScreenCTM().inverse();if(e._textPath){var a=e._textPath.closest("text"),r=_getComputedTransform20(e._path);n=a.getScreenCTM().inverse().multiply(r)}e._pointerDown=!0,e._pointerDownPoint=new SVGPoint(t.clientX,t.clientY),e._pointerDownPoint=e._pointerDownPoint.matrixTransform(n),e._pointerDownControlPoint1=SVGPoint.fromPoint(e._controlPoint1),e._pointerDownControlPoint2=SVGPoint.fromPoint(e._controlPoint2)}),this._ownerCanvas.addEventListener("contextmenu",this._contextMenuListener=function(e){e.preventDefault()}),window.addEventListener("pointermove",this._pointerMoveListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e.style.visibility=null,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._updateSnapProperty(),e._pointerDown=!1,e.style.visibility="hidden"})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("pointerdown",this._pointerDownListener),this._ownerCanvas.removeEventListener("contextmenu",this._contextMenuListener),window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,(o.target===this._path||o.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateSegProperties",value:function(){if("end"===this._position){var e=this._path.getPathData({normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1,a;0<=n;n-=1)if(a=e[n],"Z"!==a.type){this._lastNonZSeg=a;break}this._lastSegControlPoint="C"===t.type?new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?new SVGPoint(t.values[0],t.values[1]):null,this._lastSegIsSmooth="C"===t.type&&(t.values[2]!==t.values[4]||t.values[3]!==t.values[5])}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),i=r[0],o=r[1];this._firstSeg=i,this._secondSegControlPoint="C"===o.type?new SVGPoint(o.values[0],o.values[1]):"M"===o.type||"L"===o.type?new SVGPoint(i.values[0],i.values[1]):null,this._secondSegIsSmooth="C"===o.type&&o.values[0]!==i.values[0]&&o.values[1]!==i.values[1]}}},{key:"_updatePointProperties",value:function(){if(!1===this._pointerDown){var e=this._path.getScreenCTM().inverse();if(this._textPath){var t=this._textPath.closest("text"),n=_getComputedTransform20(this._path);e=t.getScreenCTM().inverse().multiply(n)}if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),this._endPoint=null===this._clientX?SVGPoint.fromPoint(this._startPoint):new SVGPoint(this._clientX,this._clientY).matrixTransform(e)):"start"===this._position&&(this._startPoint=null===this._clientX?new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):new SVGPoint(this._clientX,this._clientY).matrixTransform(e),this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){var a=new _Vector15(this._startPoint,this._endPoint),r;"end"===this._position?r=new _Vector15(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(r=new _Vector15(this._endPoint,this._secondSegControlPoint)),r=r.negate(),"end"===this._position?(this._controlPoint1=new SVGPoint(this._startPoint.x+r.x,this._startPoint.y+r.y),this._controlPoint2=SVGPoint.fromPoint(this._endPoint)):"start"===this._position&&(this._controlPoint2=new SVGPoint(this._endPoint.x+r.x,this._endPoint.y+r.y),this._controlPoint1=SVGPoint.fromPoint(this._startPoint))}else if("polygon"===this._snap)this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){var i=_snapPointToAngleMultiple6(this._startPoint,this._endPoint,45),o=_slicedToArray(i,1),s=o[0];this._endPoint=s}else if("start"===this._position){var l=_snapPointToAngleMultiple6(this._endPoint,this._startPoint,45),d=_slicedToArray(l,1),u=d[0];this._startPoint=u}this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint)}}else if(!0===this._pointerDown){var c=this._path.getScreenCTM().inverse();if(this._textPath){var p=this._textPath.closest("text"),h=_getComputedTransform20(this._path);c=p.getScreenCTM().inverse().multiply(h)}var b=new SVGPoint(this._clientX,this._clientY);b=b.matrixTransform(c);var x=new _Vector15(this._pointerDownPoint,b).negate();"end"===this._position?this._controlPoint2=new SVGPoint(this._pointerDownControlPoint2.x+x.x,this._pointerDownControlPoint2.y+x.y):"start"===this._position&&(this._controlPoint1=new SVGPoint(this._pointerDownControlPoint1.x+x.x,this._pointerDownControlPoint1.y+x.y))}}},{key:"_updateSnapProperty",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift;this._snap=t&&a?"polygon":!t&&a?"paraxialPolygon":"none","end"===this._position?!this._lastSegIsSmooth&&"none"===this._snap&&(this._snap="polygon"):"start"===this._position&&!this._secondSegIsSmooth&&"none"===this._snap&&(this._snap="polygon")}},{key:"_updateOutlines",value:function(){var e=_getTransformToElement29(this._path,this);if(this._textPath){var t=this._textPath.closest("text"),n=_getTransformToElement29(t,this),a=_getComputedTransform20(this._path);e=n.multiply(a)}var r=this._startPoint.matrixTransform(e),i=this._endPoint.matrixTransform(e),o=this._controlPoint1.matrixTransform(e),s=this._controlPoint2.matrixTransform(e),l=3/this._ownerCanvas.scale,d=[{type:"M",values:[r.x,r.y]},{type:"C",values:[o.x,o.y,s.x,s.y,i.x,i.y]}];this["#outline"].setPathData(d),this["#control-point-1-grippie"].cx.baseVal.value=o.x,this["#control-point-1-grippie"].cy.baseVal.value=o.y,this["#control-point-1-grippie"].r.baseVal.value=l,this["#control-point-2-grippie"].cx.baseVal.value=s.x,this["#control-point-2-grippie"].cy.baseVal.value=s.y,this["#control-point-2-grippie"].r.baseVal.value=l,this["#control-line-1"].x1.baseVal.value=r.x,this["#control-line-1"].y1.baseVal.value=r.y,this["#control-line-1"].x2.baseVal.value=o.x,this["#control-line-1"].y2.baseVal.value=o.y,this["#control-line-2"].x1.baseVal.value=i.x,this["#control-line-2"].y1.baseVal.value=i.y,this["#control-line-2"].x2.baseVal.value=s.x,this["#control-line-2"].y2.baseVal.value=s.y}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"controlPoint1",get:function(){return this._controlPoint1}},{key:"controlPoint2",get:function(){return this._controlPoint2}},{key:"curved",get:function(){return!1===_comparePoints5(this.startPoint,this.controlPoint1)||!1===_comparePoints5(this.endPoint,this.controlPoint2)}}]),t}(SVGGElement);customElements.define("bx-cubicbezierseghud",BXCubicBezierSegHudElement,{extends:"g"})}}{{var _closest67=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet25=BoxySVG.utils.geometry,_getPointBetweenTwoPoints4=_BoxySVG$utils$geomet25.getPointBetweenTwoPoints,_getNearestPointOnLine9=_BoxySVG$utils$geomet25.getNearestPointOnLine,_snapPointToAngleMultiple7=_BoxySVG$utils$geomet25.snapPointToAngleMultiple,_BoxySVG$utils$transf18=BoxySVG.utils.transformGeneral,_getComputedTransform21=_BoxySVG$utils$transf18.getComputedTransform,_getTransformToElement30=_BoxySVG$utils$transf18.getTransformToElement,_Vector16=BoxySVG.classes.Vector,_shadowHTML32="\n    <style>:host{contain:size layout style paint}#control-line-1,#control-line-2{fill:none;stroke:red;stroke-width:1;vector-effect:non-scaling-stroke;pointer-events:none;opacity:.4}#control-point-grippie{fill:red;stroke:none;pointer-events:none;opacity:1}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <path id=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n\n    <line id=\"control-line-1\"></line>\n    <line id=\"control-line-2\"></line>\n\n    <circle id=\"control-point-grippie\"></circle>\n  ",BXQuadBezierSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML32;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest67(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest67(this,"bx-canvas")}},{key:"show",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"end",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._position=t,this._path=e,this._textPath=n,this._snap="none",this.style.visibility="hidden",!1===this._hasListeners&&this._addListeners(),this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines()}},{key:"hide",value:function(){this._path=null,this._clientX=null,this._clientY=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,this._pointerDown=!1,this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){!1===e._pointerDown&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines())}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("pointerdown",this._pointerDownListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines();var n=e._path.getScreenCTM().inverse();if(e._textPath){var a=e._textPath.closest("text"),r=_getComputedTransform21(e._path);n=a.getScreenCTM().inverse().multiply(r)}e._pointerDown=!0,e._pointerDownPoint=new SVGPoint(t.clientX,t.clientY),e._pointerDownPoint=e._pointerDownPoint.matrixTransform(n),e._pointerDownControlPoint=SVGPoint.fromPoint(e._controlPoint)}),this._ownerCanvas.addEventListener("contextmenu",this._contextMenuListener=function(e){e.preventDefault()}),window.addEventListener("pointermove",this._pointerMoveListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e.style.visibility=null,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._updateSnapProperty(),e._pointerDown=!1,e.style.visibility="hidden"})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("pointerdown",this._pointerDownListener),this._ownerCanvas.removeEventListener("contextmenu",this._contextMenuListener),window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,(o.target===this._path||o.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateSegProperties",value:function(){if("end"===this._position){var e=this._path.getPathData({normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1,a;0<=n;n-=1)if(a=e[n],"Z"!==a.type){this._lastNonZSeg=a;break}this._lastSegControlPoint="C"===t.type?new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?new SVGPoint(t.values[0],t.values[1]):null,this._lastSegIsSmooth="C"===t.type&&(t.values[2]!==t.values[4]||t.values[3]!==t.values[5])}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),i=r[0],o=r[1];this._firstSeg=i,this._secondSegControlPoint="C"===o.type?new SVGPoint(o.values[0],o.values[1]):"M"===o.type||"L"===o.type?new SVGPoint(i.values[0],i.values[1]):null,this._secondSegIsSmooth="C"===o.type&&o.values[0]!==i.values[0]&&o.values[1]!==i.values[1]}}},{key:"_updatePointProperties",value:function(){if(!1===this._pointerDown){var e=this._path.getScreenCTM().inverse();if(this._textPath){var n=this._textPath.closest("text"),a=_getComputedTransform21(this._path);e=n.getScreenCTM().inverse().multiply(a)}if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),this._endPoint=null===this._clientX?SVGPoint.fromPoint(this._startPoint):new SVGPoint(this._clientX,this._clientY).matrixTransform(e)):"start"===this._position&&(this._startPoint=null===this._clientX?new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):new SVGPoint(this._clientX,this._clientY).matrixTransform(e),this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){var r=new _Vector16(this._startPoint,this._endPoint),i;"end"===this._position?i=new _Vector16(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(i=new _Vector16(this._endPoint,this._secondSegControlPoint)),i=i.negate().scale(r.length/2),"end"===this._position?this._controlPoint=new SVGPoint(this._startPoint.x+i.x,this._startPoint.y+i.y):"start"===this._position&&(this._controlPoint=new SVGPoint(this._endPoint.x+i.x,this._endPoint.y+i.y))}else if("polygon"===this._snap)this._controlPoint=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){var o=_snapPointToAngleMultiple7(this._startPoint,this._endPoint,45),s=_slicedToArray(o,1),l=s[0];this._endPoint=l}else if("start"===this._position){var d=_snapPointToAngleMultiple7(this._endPoint,this._startPoint,45),u=_slicedToArray(d,1),c=u[0];this._startPoint=c}this._controlPoint=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint)}}else if(!0===this._pointerDown){var p=this._path.getScreenCTM().inverse();if(this._textPath){var h=this._textPath.closest("text"),b=_getComputedTransform21(this._path);p=h.getScreenCTM().inverse().multiply(b)}var x=new SVGPoint(this._clientX,this._clientY);x=x.matrixTransform(p);var m=new _Vector16(this._pointerDownPoint,x).negate();if(this._controlPoint=new SVGPoint(this._pointerDownControlPoint.x+m.x,this._pointerDownControlPoint.y+m.y),"none"===this._snap)if("end"===this._position){var g=_getNearestPointOnLine9(this._lastSegControlPoint,this._startPoint,this._controlPoint,!0),v=_slicedToArray(g,2),y=v[0],f=v[1];this._controlPoint=1>f?SVGPoint.fromPoint(this._startPoint):y}else if("start"===this._position){var t=_getNearestPointOnLine9(this._secondSegControlPoint,this._endPoint,this._controlPoint,!0),_=_slicedToArray(t,2),w=_[0],k=_[1];this._controlPoint=1>k?SVGPoint.fromPoint(this._endPoint):w}}}},{key:"_updateSnapProperty",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift;this._snap=t&&a?"polygon":!t&&a?"paraxialPolygon":"none","end"===this._position?!this._lastSegIsSmooth&&"none"===this._snap&&(this._snap="polygon"):"start"===this._position&&!this._secondSegIsSmooth&&"none"===this._snap&&(this._snap="polygon")}},{key:"_updateOutlines",value:function(){var e=_getTransformToElement30(this._path,this);if(this._textPath){var t=this._textPath.closest("text"),n=_getTransformToElement30(t,this),a=_getComputedTransform21(this._path);e=n.multiply(a)}var r=this._startPoint.matrixTransform(e),i=this._endPoint.matrixTransform(e),o=this._controlPoint.matrixTransform(e),s=3/this._ownerCanvas.scale,l=[{type:"M",values:[r.x,r.y]},{type:"Q",values:[o.x,o.y,i.x,i.y]}];this["#outline"].setPathData(l),this["#control-point-grippie"].cx.baseVal.value=o.x,this["#control-point-grippie"].cy.baseVal.value=o.y,this["#control-point-grippie"].r.baseVal.value=s,this["#control-line-1"].x1.baseVal.value=r.x,this["#control-line-1"].y1.baseVal.value=r.y,this["#control-line-1"].x2.baseVal.value=o.x,this["#control-line-1"].y2.baseVal.value=o.y,this["#control-line-2"].x1.baseVal.value=i.x,this["#control-line-2"].y1.baseVal.value=i.y,this["#control-line-2"].x2.baseVal.value=o.x,this["#control-line-2"].y2.baseVal.value=o.y}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"controlPoint",get:function(){return this._controlPoint}},{key:"curved",get:function(){var e=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint);return this._controlPoint.x!==e.x||this._controlPoint.y!==e.y}}]),t}(SVGGElement);customElements.define("bx-quadbezierseghud",BXQuadBezierSegHudElement,{extends:"g"})}}{{var _closest68=BoxySVG.utils.element.closest,_snapPointToAngleMultiple8=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement31=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector17=BoxySVG.classes.Vector,_shadowHTML33="\n    <style>:host{contain:strict}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <line id=\"outline\" class=\"outline\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"0\"></line>\n  ",BXLineSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._line=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML33;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest68(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest68(this,"bx-canvas")}},{key:"show",value:function(e){this._line=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._line=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var i=t.detail[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,(s.target===e._line||s.target.contains(e._line))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){var e=_getTransformToElement31(this._line,this),t=this.getScreenCTM().inverse(),n=new SVGPoint(this._line.x1.baseVal.value,this._line.y1.baseVal.value);n=n.matrixTransform(e);var a=this._ownerApp.pointerClientPoint;if(a=a.matrixTransform(t),this._ownerApp.modKeys.shift){var r=_snapPointToAngleMultiple8(n,a,22.5),i=_slicedToArray(r,1),o=i[0];a=o}this["#outline"].setAttribute("x1",n.x),this["#outline"].setAttribute("y1",n.y),this["#outline"].setAttribute("x2",a.x),this["#outline"].setAttribute("y2",a.y)}},{key:"startPoint",get:function(){return new SVGPoint(this["#outline"].x1.baseVal.value,this["#outline"].y1.baseVal.value)}},{key:"endPoint",get:function(){return new SVGPoint(this["#outline"].x2.baseVal.value,this["#outline"].y2.baseVal.value)}}]),t}(SVGGElement);customElements.define("bx-lineseghud",BXLineSegHudElement,{extends:"g"})}}{{var _closest69=BoxySVG.utils.element.closest,_snapPointToAngleMultiple9=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement32=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector18=BoxySVG.classes.Vector,_shadowHTML34="\n    <style>:host{contain:strict}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <polyline id=\"outline\" class=\"outline\" points=\"0 0 0 0\"></polyline>\n  ",BXPolylineSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._polyline=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML34;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest69(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest69(this,"bx-canvas")}},{key:"show",value:function(e){this._polyline=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._polyline=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var i=t.detail[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,(s.target===e._polyline||s.target.contains(e._polyline))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){if(0===this._polyline.points.length)this["#outline"].removeAttribute("points");else{var e=_getTransformToElement32(this._polyline,this),t=this.getScreenCTM().inverse(),n=this._polyline.points[this._polyline.points.length-1].matrixTransform(e),a=this._ownerApp.pointerClientPoint.matrixTransform(t);if(this._ownerApp.modKeys.shift){var r=_snapPointToAngleMultiple9(n,a,22.5),i=_slicedToArray(r,1),o=i[0];a=o}this["#outline"].points[0]=n,this["#outline"].points[1]=a}}},{key:"startPoint",get:function(){return SVGPoint.fromPoint(this["#outline"].points[0])}},{key:"endPoint",get:function(){return SVGPoint.fromPoint(this["#outline"].points[1])}}]),t}(SVGGElement);customElements.define("bx-polylineseghud",BXPolylineSegHudElement,{extends:"g"})}}{{var _closest70=BoxySVG.utils.element.closest,_snapPointToAngleMultiple10=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement33=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector19=BoxySVG.classes.Vector,_shadowHTML35="\n    <style>:host{contain:strict}#outline-1,#outline-2{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}#outline-1{opacity:.1}</style>\n    <polygon id=\"outline-1\" class=\"outline\" points=\"0 0 0 0\"></polygon>\n    <polygon id=\"outline-2\" class=\"outline\" points=\"0 0 0 0\"></polygon>\n  ",BXPolygonSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._polygon=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML35;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest70(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest70(this,"bx-canvas")}},{key:"show",value:function(e){this._polygon=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._polygon=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var i=t.detail[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,(s.target===e._polygon||s.target.contains(e._polygon))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){if(0===this._polygon.points.length)this["#outline-1"].removeAttribute("points"),this["#outline-2"].removeAttribute("points");else{var e=_getTransformToElement33(this._polygon,this),t=this.getScreenCTM().inverse(),n=this._polygon.points[0].matrixTransform(e),a=this._polygon.points[this._polygon.points.length-1].matrixTransform(e),r=this._ownerApp.pointerClientPoint.matrixTransform(t);if(this._ownerApp.modKeys.shift){var i=_snapPointToAngleMultiple10(a,r,22.5),o=_slicedToArray(i,1),s=o[0];r=s}this["#outline-1"].points[0]=n,this["#outline-1"].points[1]=r,this["#outline-2"].points[0]=a,this["#outline-2"].points[1]=r}}},{key:"startPoint",get:function(){return SVGPoint.fromPoint(this["#outline-1"].points[0])}},{key:"endPoint",get:function(){return SVGPoint.fromPoint(this["#outline-2"].points[1])}}]),t}(SVGGElement);customElements.define("bx-polygonseghud",BXPolygonSegHudElement,{extends:"g"})}}{{var _getTransformToElement34=BoxySVG.utils.transformGeneral.getTransformToElement,_shadowHTML36="\n    <style>:host{contain:size layout style paint}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <polyline id=\"outline\"></polyline>\n  ",BXFreehandHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML36;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"show",value:function(e,t){var n=this;this._path&&this._hide(),this._path=e,this["#outline"].setAttribute("points",""),this._path.hasAttribute("transform")?this["#outline"].setAttribute("transform",this._path.getAttribute("transform")):this["#outline"].removeAttribute("transform"),this.style.visibility="visible",t&&this["#outline"].points.appendItem(t.matrixTransform(this._path.getScreenCTM().inverse())),window.addEventListener("pointermove",this._pointerMoveListener=function(e){var t=!0,a=!1,r;try{for(var i=e.getCoalescedEvents()[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var s=o.value,l=n._path.getScreenCTM().inverse(),d=new SVGPoint(s.clientX,s.clientY),u=d.matrixTransform(l);n["#outline"].points.appendItem(u)}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"hide",value:function(){this._path=null,this.style.visibility="hidden",this["#outline"].setAttribute("points",""),window.removeEventListener("pointermove",this._pointerMoveListener)}},{key:"clear",value:function(){this["#outline"].setAttribute("points","")}},{key:"points",get:function(){return this["#outline"].points}}]),t}(SVGGElement);customElements.define("bx-freehandhud",BXFreehandHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen53=BoxySVG.utils.element,_closest71=_BoxySVG$utils$elemen53.closest,_svg8=_BoxySVG$utils$elemen53.svg,_BoxySVG$utils$geomet26=BoxySVG.utils.geometry,_getRotationAngleFromPoints7=_BoxySVG$utils$geomet26.getRotationAngleFromPoints,_snapRotationAngle4=_BoxySVG$utils$geomet26.snapRotationAngle,_lineIntersectsRect=_BoxySVG$utils$geomet26.lineIntersectsRect,_round37=BoxySVG.utils.math.round,_throttle35=BoxySVG.utils.time.throttle,$guide=Symbol(),inf=99999,_grippieSize7=4,allowRotation=!1,_shadowHTML37="\n    <style>:host{display:none;contain:size layout style paint;outline:0}:host([enabled]){display:initial}.repr{color:red;pointer-events:none}.repr[data-snapping=true]{color:#00f}.repr .outer-line{fill:none;stroke:currentColor;stroke-width:10;vector-effect:non-scaling-stroke;opacity:0}:host(:focus) .repr[data-selected] .outer-line{opacity:.1;pointer-events:all}.repr .grippie,.repr .inner-line{fill:none;stroke:currentColor;stroke-width:1;vector-effect:non-scaling-stroke}.repr .grippie{stroke-width:1px;fill:#fff;pointer-events:all}.repr[data-selected] .grippie{fill:currentColor}</style>\n    <g id=\"reprs\"></g>\n  ",BXManualGuidesHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.tabIndex=0,this._targets=[],this._isDragging=!1,this._updateTh500=_throttle35(this._update,500,this),this._updateSnappingStateTh200=_throttle35(this._updateSnappingState,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML37;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this.addEventListener("keydown",function(t){return e._onKeyDown(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest71(this,"bx-electronApp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest71(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"requestImmidiateUpdate",value:function(){this._update()}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateTh500()}),this._ownerCanvas.addEventListener("artworkchange",this._artworkChangeListener=function(){e._updateTh500()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._updateGrippiesSize()}),this._ownerCanvas.addEventListener("selectedguideschange",this._selectedGuidesChangeListener=function(){e._updateSelectedState()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardsPointerDownListener=function(t){e._onArtboardsPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.rulers.addEventListener("pointerdown",this._rulersPointerDownListener=function(t){e._onRulersPointerDown(t)}),this._ownerCanvas.snapManager.addEventListener("snapperschange",this._snappersChangeListener=function(){e._updateSnappingStateTh200()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("artworkchange",this._artworkChangeListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("selectedguideschange",this._selectedGuidesChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardsPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._ownerCanvas.rulers.removeEventListener("pointerdown",this._rulersPointerDownListener),this._ownerCanvas.snapManager.removeEventListener("snapperschange",this._snappersChangeListener)}},{key:"_onShadowRootPointerDown",value:function(e){var t=this,n=e.target.closest("g.repr"),a=n[$guide],r=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),i=new SVGPoint(e.clientX,e.clientY),o=i.matrixTransform(r),s="translate",l=this._ownerCanvas.geometryPrecision,d,u;this._isDragging=!0,n.setAttribute("data-dragging",""),event.target.closest(".grippie")&&(this._ownerCanvas.selectedGuides=[a]);var c=parseFloat(a.getAttribute("x")),p=parseFloat(a.getAttribute("y")),h=parseFloat(a.getAttribute("angle")),b=c,x=p,m=h;this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(r),i=a.x-o.x,s=a.y-o.y;b=c+i,x=p+s,n.setAttribute("transform","translate("+b+" "+x+") rotate("+h+")")}),this.addEventListener("lostpointercapture",u=function(e){t.removeEventListener("pointermove",d),t.removeEventListener("lostpointercapture",u),t._isDragging=!1,n.removeAttribute("data-dragging");var r=n.querySelector(".inner-line"),i=r.getScreenCTM(),o=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value).matrixTransform(i),s=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value).matrixTransform(i),g=t._ownerCanvas.getBoundingClientRect(!0),v=_lineIntersectsRect(o,s,g);v&&t._ownerCanvas.isPointOverCanvas(e.clientX,e.clientY)?(b=_round37(b,l),x=_round37(x,l),m=_round37(m,l),(b!==c||x!==p||m!==h)&&(t._ownerCanvas.undoManager.checkpoint("Move guide"),a.setAttribute("x",b),a.setAttribute("y",x),a.setAttribute("angle",m))):(t._ownerCanvas.undoManager.checkpoint("Remove guide"),t._ownerCanvas.selectedGuides=t._ownerCanvas.selectedGuides.filter(function(e){return e!==a}),a.remove())})}},{key:"_onArtboardsPointerDown",value:function(){this._unselectAll()}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&this._unselectAll()}},{key:"_onKeyDown",value:function(e){if("Backspace"===e.key&&0<this._ownerCanvas.selectedGuides.length){e.preventDefault(),e.stopPropagation(),this._ownerCanvas.undoManager.checkpoint("Delete guide");var t=!0,n=!1,a;try{for(var r=this._ownerCanvas.selectedGuides[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._ownerCanvas.selectedGuides=[],this._update()}}},{key:"_onRulersPointerDown",value:function(e){var t=this._ownerCanvas,n=t.rulers.getRulerTypeFromPoint(e.x,e.y),a=this._ownerCanvas.geometryPrecision,r=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),i=0,o=0,s=0,l,d;"vertical"===n?i=0:"horizontal"===n?i=90:"corner"===n&&(i=45),t.selectedGuides=[];var u=_svg8(_templateObject58,o,s,i,-inf,inf,-inf,inf,_grippieSize7/t.scale);this["#reprs"].append(u),window.addEventListener("pointermove",l=function(e){var t=new SVGPoint(e.clientX,e.clientY),n=t.matrixTransform(r);o=n.x,s=n.y,u.setAttribute("transform","translate("+o+" "+s+") rotate("+i+")")}),window.addEventListener("pointerup",d=function(e){window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d);var n=u.querySelector(".inner-line"),c=n.getScreenCTM(),p=new SVGPoint(n.x1.baseVal.value,n.y1.baseVal.value).matrixTransform(c),h=new SVGPoint(n.x2.baseVal.value,n.y2.baseVal.value).matrixTransform(c),b=t.getBoundingClientRect(!0),x=_lineIntersectsRect(p,h,b);if(u.remove(),x&&t.isPointOverCanvas(e.clientX,e.clientY)){var m=new SVGPoint(e.clientX,e.clientY),g=m.matrixTransform(r);o=_round37(g.x,a),s=_round37(g.y,a);var v=_svg8(_templateObject59,o,s,i);t.selectedGuides=[v],t.undoManager.checkpoint("Add guide"),t.currentArtboard===t.masterArtboard?(t.createDefsIfMissing(),t.defs.append(v)):t.currentArtboard.append(v)}})}},{key:"_unselectAll",value:function(){0<this._ownerCanvas.selectedGuides.length&&(this._ownerCanvas.selectedGuides=[])}},{key:"_update",value:function(){if(!this._isDragging){var e=this._ownerCanvas.currentArtboard.querySelectorAll("bx-guide"),t=!1;if(e.length!==this["#reprs"].childElementCount)t=!0;else for(var n=0;n<e.length;n+=1){var a=e[n],r=this["#reprs"].children[n],i=r.transform.baseVal[0].matrix.e,o=r.transform.baseVal[0].matrix.f,s=r.transform.baseVal[1].angle;if(parseFloat(a.getAttribute("x"))!==i||parseFloat(a.getAttribute("y"))!==o||parseFloat(a.getAttribute("angle"))!==s){t=!0;break}}if(t){var l="",d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=h.value,x=parseFloat(b.getAttribute("x")),m=parseFloat(b.getAttribute("y")),g=parseFloat(b.getAttribute("angle")),v=this._ownerCanvas.snapManager.isGuideSnapping(b);l+="\n            <g class=\"repr\" transform=\"translate("+x+", "+m+") rotate("+g+")\" data-snapping=\""+v+"\">\n              <line class=\"outer-line\" x1=\"0\" y1=\""+-inf+"\" x2=\"0\" y2=\""+inf+"\"></line>\n              <line class=\"inner-line\" x1=\"0\" y1=\""+-inf+"\" x2=\"0\" y2=\""+inf+"\"></line>\n              <circle class=\"grippie\" cx=\"0\" cy=\"0\"></rect>\n            </g>\n          "}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}this["#reprs"].innerHTML=l;for(var y=0;y<e.length;y+=1)this["#reprs"].children[y][$guide]=e[y]}this._updateGrippiesSize(),this._updateSelectedState()}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].querySelectorAll(".grippie")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",_grippieSize7/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._ownerCanvas.selectedGuides.includes(i[$guide])?i.setAttribute("data-selected",""):i.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateSnappingState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this._ownerCanvas.snapManager.isGuideSnapping(i[$guide]);i.setAttribute("data-snapping",o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-manualguideshud",BXManualGuidesHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen54=BoxySVG.utils.element,_closest72=_BoxySVG$utils$elemen54.closest,_svg9=_BoxySVG$utils$elemen54.svg,_throttle36=BoxySVG.utils.time.throttle,_min8=Math.min,_max9=Math.max,_shadowHTML38="\n    <style>:host{display:none;contain:size layout style paint;pointer-events:none}:host([enabled]){display:initial}.repr{pointer-events:none;fill:none;stroke:#00f;stroke-width:1;vector-effect:non-scaling-stroke;opacity:.6}</style>\n    <g id=\"reprs\"></g>\n  ",BXSmartGuidesHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._updateTh500=_throttle36(this._update,100,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML38;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest72(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._ownerCanvas.snapManager.addEventListener("snapperschange",this._snappersChangeListener=function(){e._updateTh500()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.snapManager.removeEventListener("snapperschange",this._snappersChangeListener)}},{key:"_update",value:function(){var e=this._ownerCanvas.snapManager.snappers.filter(function(e){return"smart"===e.type&&e.snapping}),t=this._ownerCanvas.currentArtboard.getScreenCTM().inverse();this["#reprs"].innerHTML="";var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=void 0,d=void 0;"vertical"===s.orientation?s.snappedBBox?(l=new SVGPoint(s.x,_min8(s.snappingBBox.y,s.snappedBBox.y)),d=new SVGPoint(s.x,_max9(s.snappingBBox.bottom,s.snappedBBox.bottom))):s.snappedPoint&&(l=new SVGPoint(s.x,_min8(s.snappingBBox.y,s.snappedPoint.y)),d=new SVGPoint(s.x,_max9(s.snappingBBox.bottom,s.snappedPoint.y))):"horizontal"===s.orientation&&(s.snappedBBox?(l=new SVGPoint(_min8(s.snappingBBox.x,s.snappedBBox.x),s.y),d=new SVGPoint(_max9(s.snappingBBox.right,s.snappedBBox.right),s.y)):s.snappedPoint&&(l=new SVGPoint(_min8(s.snappingBBox.x,s.snappedPoint.x),s.y),d=new SVGPoint(_max9(s.snappingBBox.right,s.snappedPoint.x),s.y)));var u=l.matrixTransform(t),c=u.x,p=u.y,h=d.matrixTransform(t),b=h.x,x=h.y,m=_svg9(_templateObject60,c,p,b,x);this["#reprs"].append(m)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-smartguideshud",BXSmartGuidesHudElement,{extends:"g"})}{{var _Vector20=BoxySVG.classes.Vector,_getClientBBox9=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen55=BoxySVG.utils.element,_getCommonAncestor2=_BoxySVG$utils$elemen55.getCommonAncestor,_closest73=_BoxySVG$utils$elemen55.closest,_isPointerMoveIntentional11=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet27=BoxySVG.utils.geometry,_combineRects13=_BoxySVG$utils$geomet27.combineRects,_compareRects=_BoxySVG$utils$geomet27.compareRects,_rectContainsRect3=_BoxySVG$utils$geomet27.rectContainsRect,_rectIntersectsRect4=_BoxySVG$utils$geomet27.rectIntersectsRect,_transformRect12=_BoxySVG$utils$geomet27.transformRect,_getComputedTransform22=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform10=BoxySVG.utils.transformReduction.reduceTransform,_graphicsElementNames5=BoxySVG.utils.variables.graphicsElementNames,_abs14=Math.abs,_$initialTransforms=Symbol(),BXTransformSelectContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._intentionalDragStarted=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest73(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest73(this,"bx-editor"),this._ownerCanvas=_closest73(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas.artboards;t.addEventListener("contextmenu",this._contextMenuListener=function(t){e._onArtboardContextMenu(t)}),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas.artboards;e.removeEventListener("contextmenu",this._contextMenuListener),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onArtboardContextMenu",value:function(e){var t=this._ownerCanvas.getHitArtboardElements(e.clientX,e.clientY);if(0<t.length){var n=t[t.length-1],a=this._getAllContainers(n),r=this._ownerCanvas.selectedElements.includes(n),i=!0,o=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,this._ownerCanvas.selectedElements.includes(u)&&(r=!0)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}!1===r&&this._onArtboardClickSelectableElementHit(n)}else this._onArtboardClickBackgroundHit(e)}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;this._intentionalDragStarted=!1,window.addEventListener("pointermove",a=function(n){if(!1!==_isPointerMoveIntentional11(e,n)){window.removeEventListener("pointermove",a),t._intentionalDragStarted=!0;var r=new _Vector20(n.clientX-e.clientX,n.clientY-e.clientY),i=_abs14(r.x)>_abs14(r.y)?"horizontal":"vertical";t._onIntentionalDragStart(e,n,i)}}),window.addEventListener("pointerup",r=function(i){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r),e.clientX===i.clientX&&e.clientY===i.clientY&&t._onArtboardClick(n,i)})}}},{key:"_onIntentionalDragStart",value:function(e,t,n){if(!this._ownerCanvas.huds.contains(e.target)){var a=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);0<a.length?this._onArtboardElementDragStart(t,a[a.length-1],n):this._onEmptySpaceDragStart(e)}}},{key:"_onArtboardElementDragStart",value:function(e,t,n){var a=this,r=this._getAllContainers(t),i=!1,o=this._ownerEditor.canvas,s,l;o.undoManager.checkpoint("Transform"),o.outermostSelectedElements.includes(t)&&(i=!0);var d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h,b;!(d=(h=p.next()).done);d=!0)b=h.value,o.outermostSelectedElements.includes(b)&&(i=!0)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(!i)if(o.transformHud.mode="scale",0===r.length)o.currentContainer=null,o.selectedElements=[t];else{for(var x=this._getCommonContainer(t,o.currentContainer);t.parentNode!==x&&t.parentNode!==o.currentArtboard;)t=t.parentNode;o.currentContainer=x,o.selectedElements=[t]}var m=!0,g=!1,v;try{for(var y=o.outermostSelectedElements[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=_.getScreenCTM(),k=w.inverse(),A=_getComputedTransform22(_),C=A.multiplySelf(k);_[_$initialTransforms]={clientToUserTransform:w,initialClientTransform:C}}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}this.style.cursor="move",this.setPointerCapture(e.pointerId),o.snapManager.snapStart(),this.addEventListener("pointermove",s=function(t){var r=t.clientX-e.clientX,i=t.clientY-e.clientY;a._ownerApp.modKeys.shift&&("vertical"===n?r=0:"horizontal"===n&&(i=0));var s=!0,l=!1,d;try{for(var u=o.outermostSelectedElements[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p[_$initialTransforms],b=h.clientToUserTransform,x=h.initialClientTransform,m=SVGMatrix.fromMatrix(x);m.translateSelf(r,i),m.multiplySelf(b),p.setAttribute("transform",m.toString())}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}if(o.showManualGuides||o.showSmartGuides){var g=o.outermostSelectedElements.map(function(e){return _getClientBBox9(e)}),v=_combineRects13(g),y=o.snapManager.snapBBox(v);if(!1===_compareRects(v,y)){var f=!0,_=!1,w;try{for(var k=o.outermostSelectedElements[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C[_$initialTransforms],b=S.clientToUserTransform,x=S.initialClientTransform,E=y.x-v.x,T=y.y-v.y,P=SVGMatrix.fromMatrix(x);P.translateSelf(r+E,i+T),P.multiplySelf(b),C.setAttribute("transform",P.toString())}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}),this.addEventListener("lostpointercapture",l=function(){a.removeEventListener("pointermove",s),a.removeEventListener("lostpointercapture",l),a.style.cursor=null,o.snapManager.snapEnd();var e=!0,t=!1,n;try{for(var r=o.selectedElements[Symbol.iterator](),i,d;!(e=(i=r.next()).done);e=!0)d=i.value,_reduceTransform10(d,{geometryPrecision:o.geometryPrecision,transformPrecision:o.transformPrecision})}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}})}},{key:"_onEmptySpaceDragStart",value:async function(e){var t=e.clientX,n=e.clientY,a=this._ownerApp.getConfig("bx-transformsettings:selectionMode")||"rect-contain",r=await this._ownerCanvas.rubberBandHud.grabSelection(t,n),i=this._ownerCanvas.currentContainer||this._ownerCanvas.currentArtboard,o=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),s=[],l=!0,d=!1,u;try{for(var c=i.children[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,[].concat(_toConsumableArray(_graphicsElementNames5),["svg","g","a","use"]).includes(h.localName)){var b=_transformRect12(_getClientBBox9(h),o),x=0===b.width&&0===b.height;!1==x&&("rect-contain"===a?_rectContainsRect3(r,b)&&s.push(h):"rect-intersect"===a&&_rectIntersectsRect4(r,b)&&s.push(h))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.selectedElements=[].concat(s)}},{key:"_onArtboardClick",value:function(e,t){if(!(0!==t.button||this._ownerCanvas.huds.contains(e)||this._intentionalDragStarted)){var n=this._ownerCanvas["#transform-hud"],a=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);if(0<a.length){var r=a[a.length-1];if(1==this._ownerApp.pointerClickCount%2)this._ownerCanvas.isSelectableElement(r)&&this._onArtboardClickSelectableElementHit(r);else if(0==this._ownerApp.pointerClickCount%2){var i=this._getClosestContainer(r);if(i)this._ownerCanvas.currentContainer=i,this._ownerCanvas.selectedElements=[];else if("use"===r.localName){var o=this._ownerCanvas.artboards.querySelector(r.href.baseVal);if(o&&"symbol"===o.localName){this._ownerCanvas.editSymbol(o.id)}else n.mode="scale",this._ownerEditor.toggleTool("edit-tool")}else"text"===r.localName?(n.mode="scale",this._ownerEditor.toggleTool("text-tool")):(n.mode="scale",this._ownerEditor.toggleTool("edit-tool"))}}else this._onArtboardClickBackgroundHit(t)}}},{key:"_onArtboardClickSelectableElementHit",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.alt,r=t.shift,i=this._getAllContainers(e),o=this._ownerEditor.canvas,s=o.selectedElements.includes(e),l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,o.selectedElements.includes(h)&&(s=!0)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(!n&&!r){if(s)o.transformHud.mode="scale"===o.transformHud.mode?"rotate-and-skew":"scale";else if(o.transformHud.mode="scale",0===i.length)o.currentContainer=null,o.selectedElements=[e];else{var b=o.currentContainer;if(b&&b.contains(e)){for(;e.parentNode!==b;)e=e.parentNode;o.selectedElements=[e]}else{for(var x=this._getCommonContainer(e,b);e.parentNode!==x&&e.parentNode!==o.currentArtboard;)e=e.parentNode;o.currentContainer=x,o.selectedElements=[e]}}}else if(!n&&r){if(0===i.length)o.currentContainer=null,o.selectedElements=o.selectedElements.includes(e)?o.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(o.selectedElements),[e]);else if(o.currentContainer&&o.currentContainer.contains(e)){for(;e.parentNode!==o.currentContainer;)e=e.parentNode;o.selectedElements=o.selectedElements.includes(e)?o.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(o.selectedElements),[e])}else{for(var m=this._getCommonContainer(e,o.currentContainer);e.parentNode!==m&&e.parentNode!==o.currentArtboard;)e=e.parentNode;o.currentContainer=m,o.selectedElements=o.selectedElements.includes(e)?o.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(o.selectedElements),[e])}}else if(n&&!r){for(var g=null,v=e.parentElement;v!==o.currentArtboard;v=v.parentElement)if("g"===v.localName||"a"===v.localName){g=v;break}o.currentContainer=g,o.selectedElements=[e]}else if(n&&r){var y=o.currentContainer,f=o.selectedElements;if(f=f.includes(e)?f.filter(function(t){return t!==e}):[].concat(_toConsumableArray(f),[e]),0===f.length)y=null;else for(var _=f[0].parentElement;_!==o.currentArtboard;_=_.parentElement)if("g"===_.localName||"a"===_.localName){y=_;break}o.currentContainer=y,o.selectedElements=f}}},{key:"_onArtboardClickBackgroundHit",value:function(e){if(0===e.button){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;n||a||(2===this._ownerApp.pointerClickCount&&(this._ownerCanvas.currentContainer=null),this._ownerCanvas.selectedElements=[])}}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"_getClosestContainer",value:function(e){for(var t=[],n=e.parentElement;n!==this._ownerCanvas.currentArtboard&&n!==this._ownerCanvas.currentContainer;n=n.parentElement)("g"===n.localName||"a"===n.localName)&&t.push(n);var a=0<t.length?t[t.length-1]:null;return a}},{key:"_getCommonContainer",value:function(e,t){var n=_getCommonAncestor2(e,t);if(n)for(;!1===["g","a"].includes(n.localName);)n=n.parentNode;return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-transformselectcontext",BXTransformSelectContextElement)}}{var _closest74=BoxySVG.utils.element.closest,_isPointerMoveIntentional12=BoxySVG.utils.event.isPointerMoveIntentional,_Vector21=BoxySVG.classes.Vector,_BoxySVG$utils$geomet28=BoxySVG.utils.geometry,_combineRects14=_BoxySVG$utils$geomet28.combineRects,_compareRects2=_BoxySVG$utils$geomet28.compareRects,_getComputedTransform23=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform11=BoxySVG.utils.transformReduction.reduceTransform,_abs15=Math.abs,_$initialTransforms2=Symbol(),BXDirectSelectContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerApp=_closest74(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest74(this,"bx-canvas")}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas.artboards;t.addEventListener("contextmenu",this._contextMenuListener=function(t){e._onArtboardContextMenu(t)}),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas.artboards;e.removeEventListener("contextmenu",this._contextMenuListener),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onArtboardContextMenu",value:function(){}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;this._intentionalDragStarted=!1,window.addEventListener("pointermove",a=function(n){if(!1!==_isPointerMoveIntentional12(e,n)){window.removeEventListener("pointermove",a),t._intentionalDragStarted=!0;var r=new _Vector21(n.clientX-e.clientX,n.clientY-e.clientY),i=_abs15(r.x)>_abs15(r.y)?"horizontal":"vertical";t._onArtboardIntentionalDragStart(e,n,i)}}),window.addEventListener("pointerup",r=function(i){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r),e.clientX===i.clientX&&e.clientY===i.clientY&&t._onArtboardClick(n,i)})}}},{key:"_onArtboardClick",value:function(e,t){if(!(0!==t.button||this._ownerCanvas.huds.contains(e)||this._intentionalDragStarted)){var n=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);if(0<n.length){var a=n[n.length-1];this._ownerCanvas.isSelectableElement(a)&&this._onArtboardClickSelectableElementHit(a)}else this._onArtboardClickBackgroundHit(t)}}},{key:"_onArtboardClickSelectableElementHit",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.alt,r=t.shift,i=this._getAllContainers(e),o=this._ownerCanvas,s=o.selectedElements.includes(e),l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,o.selectedElements.includes(h)&&(s=!0)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(!1===r){for(var b=null,x=e.parentElement;x!==o.currentArtboard;x=x.parentElement)if("g"===x.localName||"a"===x.localName){b=x;break}o.currentContainer=b,o.selectedElements=[e]}else if(!0===r){var m=o.currentContainer,g=o.selectedElements;if(g=g.includes(e)?g.filter(function(t){return t!==e}):[].concat(_toConsumableArray(g),[e]),0===g.length)m=null;else for(var v=g[0].parentElement;v!==o.currentArtboard;v=v.parentElement)if("g"===v.localName||"a"===v.localName){m=v;break}o.currentContainer=m,o.selectedElements=g}}},{key:"_onArtboardClickBackgroundHit",value:function(e){if(0===e.button){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;n||a||(this._ownerCanvas.currentContainer=null,this._ownerCanvas.selectedElements=[])}}},{key:"_onArtboardIntentionalDragStart",value:async function(e){var t=e.clientX,n=e.clientY,a=this._ownerApp.getConfig("bx-transformsettings:selectionMode")||"rect-contain",r=await this._ownerCanvas.rubberBandHud.grabSelection(t,n);this._ownerCanvas.pathHud.rubberBandSelectionCallback(r)}},{key:"_onEmptySpaceDragStart",value:function(){}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-directselectcontext",BXDirectSelectContextElement)}{{var _BoxySVG$utils$elemen56=BoxySVG.utils.element,_createElement31=_BoxySVG$utils$elemen56.createElement,_closest75=_BoxySVG$utils$elemen56.closest,_isPointerMoveIntentional13=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet29=BoxySVG.utils.geometry,_getDistanceBetweenPoints9=_BoxySVG$utils$geomet29.getDistanceBetweenPoints,_getRotationAngleFromPoints8=_BoxySVG$utils$geomet29.getRotationAngleFromPoints,_snapRotationAngle5=_BoxySVG$utils$geomet29.snapRotationAngle,_BoxySVG$utils$math12=BoxySVG.utils.math,_normalize15=_BoxySVG$utils$math12.normalize,_round38=_BoxySVG$utils$math12.round,_BoxySVG$utils$pathSh10=BoxySVG.utils.pathShapes,_setShapeData15=_BoxySVG$utils$pathSh10.setShapeData,_getNGonShapeVertexPoint2=_BoxySVG$utils$pathSh10.getNGonShapeVertexPoint,_setAppearance16=BoxySVG.utils.appearance.setAppearance,_reduceProperty7=BoxySVG.utils.style.reduceProperty,_getComputedTransform24=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform12=BoxySVG.utils.transformReduction.reduceTransform,_abs16=Math.abs,_min9=Math.min,_BoxySVG$classes6=BoxySVG.classes,_Shortcut14=_BoxySVG$classes6.Shortcut,_Vector22=_BoxySVG$classes6.Vector,_defaultAppearance15={fill:"#d8d8d8"},BXShapeContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest75(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest75(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"shape"===e&&this._onShapeChange())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",this.dispatchEvent(new CustomEvent("_enabledchange")),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this.dispatchEvent(new CustomEvent("_enabledchange")),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onShapeChange",value:function(){this.dispatchEvent(new CustomEvent("_shapechange"))}},{key:"_onPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(i){_isPointerMoveIntentional13(e,i)&&(n.removeEventListener("pointermove",a),n.removeEventListener("lostpointercapture",r),"rect"===t.shape?t._onRectShapeDrawStart(e):"ellipse"===t.shape?t._onEllipseShapeDrawStart(e):"ring"===t.shape?t._onRingShapeDrawStart(e):"pie"===t.shape?t._onPieShapeDrawStart(e):"triangle"===t.shape?t._onTriangleShapeDrawStart(e):"n-gon"===t.shape?t._onNGonShapeDrawStart(e):"star"===t.shape?t._onStarShapeDrawStart(e):"cog"===t.shape&&t._onCogShapeDrawStart(e))}),n.addEventListener("lostpointercapture",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("lostpointercapture",r)})}},{key:"_onRectShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-rectsettings:drawingMode")||"planar",l=n.getConfig("bx-rectsettings:appearance")||_defaultAppearance15,d=new SVGPoint(e.clientX,e.clientY),u;d=a.snapManager.snapPoint(d);var c=1,p=1,h="planar"===s?d.x:d.x-c/2,b="planar"===s?d.y:d.y-p/2;a.undoManager.checkpoint("Draw Shape"),a.snapManager.snapStart(!1),a.setPointerCapture(e.pointerId);var x=_createElement31("svg:rect");x.setAttribute("x",h),x.setAttribute("y",b),x.setAttribute("width",c),x.setAttribute("height",p),r.append(x),_setAppearance16(x,l),a.selectedElements=[x];var m=x.getScreenCTM().inverse(),g=_getComputedTransform24(x).multiply(m);x.setAttribute("transform",g.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("pointermove",u=function(e){var t=new SVGPoint(e.clientX,e.clientY);if("planar"===s){t=a.snapManager.snapPoint(t);var i=t.x-d.x||1,o=t.y-d.y||1;if(c=_abs16(i),p=_abs16(o),n.modKeys.shift){var l=_min9(c,p);c=l,p=l}h=0>i?d.x-c:d.x,b=0>o?d.y-p:d.y}else if("polar"===s){var u=new SVGPoint(d.x,d.y),m=new SVGPoint(t.x,t.y),v=_getDistanceBetweenPoints9(u,m),r=new SVGPoint(u.x,u.y-v),y=r.matrixTransform(new SVGMatrix().rotate(-45,u.x,u.y)),f=r.matrixTransform(new SVGMatrix().rotate(45,u.x,u.y)),_=r.matrixTransform(new SVGMatrix().rotate(135,u.x,u.y)),w=_getDistanceBetweenPoints9(y,f);h=d.x-w/2,b=d.y-w/2,c=w,p=w;var k=_getRotationAngleFromPoints8(u,_,m);n.modKeys.shift&&(k=_snapRotationAngle5(k,45));var A=new SVGMatrix().rotate(k,u.x,u.y);x.setAttribute("transform",g.multiply(A).toString())}x.setAttribute("x",h),x.setAttribute("y",b),x.setAttribute("width",c),x.setAttribute("height",p)});var v=function e(){a.removeEventListener("pointermove",u),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),a.snapManager.snapEnd(),_reduceTransform12(x,{geometryPrecision:i,transformPrecision:o})};a.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onEllipseShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-ellipsesettings:drawingMode")||"polar",l=n.getConfig("bx-ellipsesettings:appearance")||_defaultAppearance15,d=0,u=0,c=0,p=0,h;a.undoManager.checkpoint("Draw Ellipse"),a.snapManager.snapStart(!1),a.setPointerCapture(e.pointerId);var b=new SVGPoint(e.clientX,e.clientY);b=a.snapManager.snapPoint(b);var m=_createElement31("svg:ellipse");r.append(m),_setAppearance16(m,l),a.selectedElements=[m];var x=m.getScreenCTM().inverse(),g=_getComputedTransform24(m).multiply(x);m.setAttribute("transform",g.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("pointermove",h=function(t){var r=new SVGPoint(t.clientX,t.clientY);if("planar"===s){r=a.snapManager.snapPoint(r);var i=r.x-b.x||1,o=r.y-b.y||1,l=_abs16(i),h=_abs16(o);if(n.modKeys.shift){var v=_min9(l,h);l=v,h=v}var f=0>i?b.x-l:b.x,x=0>o?b.y-h:b.y;d=f+l/2,u=x+h/2,c=l/2,p=h/2}else if("polar"===s){var y=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(y.x,y.y-100),w=new SVGPoint(r.x,r.y),k=new _Vector22(y,w),A=_getRotationAngleFromPoints8(y,_,w);d=y.x,u=y.y,c=k.length,p=k.length,n.modKeys.shift&&(A=_snapRotationAngle5(A,45));var C=new SVGMatrix().rotate(A,y.x,y.y);m.setAttribute("transform",g.multiply(C).toString())}m.setAttribute("cx",d),m.setAttribute("cy",u),m.setAttribute("rx",c),m.setAttribute("ry",p)});var v=function e(){a.removeEventListener("pointermove",h),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),a.snapManager.snapEnd(),_reduceTransform12(m,{geometryPrecision:i,transformPrecision:o})};a.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onTriangleShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-trianglesettings:drawingMode")||"polar",l=n.getConfig("bx-trianglesettings:appearance")||_defaultAppearance15,d=0,u=0,c=0,p=0,h=0.5,b=0,x,m;a.undoManager.checkpoint("Draw triangle"),a.setPointerCapture(e.pointerId);var g=_createElement31("svg:path");_setShapeData15(g,{type:"triangle",values:[d,u,c,p,h,b]},i),r.append(g),_setAppearance16(g,l),a.selectedElements=[g];var v=g.getScreenCTM().inverse(),y=_getComputedTransform24(g).multiply(v);g.setAttribute("transform",y.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("keydown",m=function(){var e=_Shortcut14.fromEvent(event);if(e.matches("ArrowLeft")){if(event.preventDefault(),event.stopPropagation(),0<b){b=_normalize15(b-0.04,0,0.5,2);var t=[d,u,c,p,h,b];_setShapeData15(g,{type:"triangle",values:t},i)}}else if(e.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),0.5>b)){b=_normalize15(b+0.04,0,0.5,2);var n=[d,u,c,p,h,b];_setShapeData15(g,{type:"triangle",values:n},i)}}),a.addEventListener("pointermove",x=function(t){if("planar"===s){var a=t.clientX-e.clientX||1,o=t.clientY-e.clientY||1;if(c=_abs16(a),p=_abs16(o),n.modKeys.shift){var l=_min9(c,p);c=l,p=l}d=0>a?e.clientX-c:e.clientX,u=0>o?e.clientY-p:e.clientY}else if("polar"===s){var x=new SVGPoint(e.clientX,e.clientY),m=new SVGPoint(t.clientX,t.clientY),v=_getDistanceBetweenPoints9(x,m),r=new SVGPoint(x.x,x.y-v),f=r.matrixTransform(new SVGMatrix().rotate(120,x.x,x.y)),_=f.matrixTransform(new SVGMatrix().rotate(120,x.x,x.y)),w=_getRotationAngleFromPoints8(x,f,m);c=f.x-_.x,p=f.y-r.y,d=_.x,u=r.y,n.modKeys.shift&&(w=_snapRotationAngle5(w,45));var k=new SVGMatrix().rotate(w,x.x,x.y);g.setAttribute("transform",y.multiply(k).toString())}var A=[d,u,c,p,h,b];_setShapeData15(g,{type:"triangle",values:A},i)});var f=function e(){a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",e),a.removeEventListener("keydown",m),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(g,{geometryPrecision:i,transformPrecision:o})};a.addEventListener("lostpointercapture",f),this.addEventListener("_enabledchange",f),this.addEventListener("_shapechange",f)}},{key:"_onNGonShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-ngonsettings:drawingMode")||"polar",o=n.getConfig("bx-ngonsettings:appearance")||_defaultAppearance15,s=a.geometryPrecision,l=a.transformPrecision,d=0,u=0,c=0,p=0,h=5,b=0,x,m;a.undoManager.checkpoint("Draw n-gon shape"),a.setPointerCapture(e.pointerId);var g=_createElement31("svg:path");_setShapeData15(g,{type:"n-gon",values:[d,u,c,p,h,b]},s),r.append(g),_setAppearance16(g,o),a.selectedElements=[g];var v=g.getScreenCTM().inverse(),y=_getComputedTransform24(g).multiply(v);g.setAttribute("transform",y.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("keydown",m=function(){var e=_Shortcut14.fromEvent(event);e.matches("ArrowUp")?(event.preventDefault(),event.stopPropagation(),h+=1,_setShapeData15(g,{type:"n-gon",values:[d,u,c,p,h,b]},s)):e.matches("ArrowDown")?(event.preventDefault(),event.stopPropagation(),5<h&&(h-=1,_setShapeData15(g,{type:"n-gon",values:[d,u,c,p,h,b]},s))):e.matches("ArrowLeft")?(event.preventDefault(),event.stopPropagation(),0<b&&(b=_normalize15(b-0.04,0,0.5,2),_setShapeData15(g,{type:"n-gon",values:[d,u,c,p,h,b]},s))):e.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),0.5>b&&(b=_normalize15(b+0.04,0,0.5,2),_setShapeData15(g,{type:"n-gon",values:[d,u,c,p,h,b]},s)))}),a.addEventListener("pointermove",x=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs16(a),l=_abs16(r);if(n.modKeys.shift){var m=_min9(o,l);o=m,l=m}var v=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;c=o/2,p=l/2,d=v+c,u=x+p}else if("polar"===i){var f=new SVGPoint(e.clientX,e.clientY),_=_getNGonShapeVertexPoint2(2,d,u,c,p,h),w=new SVGPoint(t.clientX,t.clientY),k=new _Vector22(f,w),A=_getRotationAngleFromPoints8(f,_,w);d=f.x,u=f.y,c=k.length,p=k.length,n.modKeys.shift&&(A=_snapRotationAngle5(A,180/h));var C=new SVGMatrix().rotate(A,f.x,f.y);g.setAttribute("transform",y.multiply(C).toString())}_setShapeData15(g,{type:"n-gon",values:[d,u,c,p,h,b]},s)});var f=function e(){a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",e),a.removeEventListener("keydown",m),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(g,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",f),this.addEventListener("_enabledchange",f),this.addEventListener("_shapechange",f)}},{key:"_onStarShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-starsettings:drawingMode")||"polar",o=n.getConfig("bx-starsettings:appearance")||_defaultAppearance15,s=a.geometryPrecision,l=a.transformPrecision,d=0,u=0,c=0,p=0,h=1,b=5,x,m;a.undoManager.checkpoint("Draw Star Shape"),a.setPointerCapture(e.pointerId);var g=_createElement31("svg:path");_setShapeData15(g,{type:"star",values:[d,u,c,p,h,b]},s),r.append(g),_setAppearance16(g,o),a.selectedElements=[g];var v=g.getScreenCTM().inverse(),y=_getComputedTransform24(g).multiply(v);g.setAttribute("transform",y.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("keydown",m=function(){var e=_Shortcut14.fromEvent(event);e.matches("ArrowUp")?(event.preventDefault(),event.stopPropagation(),b+=1,_setShapeData15(g,{type:"star",values:[d,u,c,p,h,b]},s)):e.matches("ArrowDown")&&(event.preventDefault(),event.stopPropagation(),3<b&&(b-=1,_setShapeData15(g,{type:"star",values:[d,u,c,p,h,b]},s)))}),a.addEventListener("pointermove",x=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs16(a),l=_abs16(r);if(n.modKeys.shift){var m=_min9(o,l);o=m,l=m}var v=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;c=o/2,p=l/2,d=v+c,u=x+p,h=2/5}else if("polar"===i){var f=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(f.x,f.y-100),w=new SVGPoint(t.clientX,t.clientY),k=new _Vector22(f,w),A=_getRotationAngleFromPoints8(f,_,w);d=f.x,u=f.y,c=k.length,p=k.length,h=2/5,n.modKeys.shift&&(A=_snapRotationAngle5(A,180/b/2));var C=new SVGMatrix().rotate(A,f.x,f.y);g.setAttribute("transform",y.multiply(C).toString())}_setShapeData15(g,{type:"star",values:[d,u,c,p,h,b]},s)});var f=function e(){a.removeEventListener("keydown",m),a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(g,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",f),this.addEventListener("_enabledchange",f),this.addEventListener("_shapechange",f)}},{key:"_onPieShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-piesettings:drawingMode")||"polar",o=n.getConfig("bx-piesettings:appearance")||_defaultAppearance15,s=a.geometryPrecision,l=a.transformPrecision,d;a.undoManager.checkpoint("Draw Pie Shape"),a.setPointerCapture(e.pointerId);var u=0,c=0,p=200,h=90,b=_createElement31("svg:path");r.append(b),_setAppearance16(b,o),a.selectedElements=[b];var x=b.getScreenCTM().inverse(),m=_getComputedTransform24(b).multiplySelf(x);b.setAttribute("transform",m.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("pointermove",d=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs16(a),l=_abs16(r);if(n.modKeys.shift){var d=_min9(o,l);o=d,l=d}var g=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;if(p=o/2,u=g+o/2,c=x+l/2,o===l)b.setAttribute("transform",m.toString());else{var v=1,y=l/o,f=-u*(v-1),_=-c*(y-1),w=SVGMatrix.fromMatrix(m);w.translateSelf(f,_),w.scaleNonUniformSelf(v,y),b.setAttribute("transform",w.toString())}}else if("polar"===i){var k=new SVGPoint(e.clientX,e.clientY),A=new SVGPoint(k.x,k.y-100),C=new SVGPoint(t.clientX,t.clientY),S=new _Vector22(k,C);u=k.x,c=k.y,p=S.length,h=_getRotationAngleFromPoints8(k,A,C),0>=h&&(h=360+h)}var E={type:"pie",values:[u,c,0,p,h,360]};_setShapeData15(b,E,s)});var g=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(b,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",g),this.addEventListener("_enabledchange",g),this.addEventListener("_shapechange",g)}},{key:"_onRingShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-ringsettings:drawingMode")||"polar",o=n.getConfig("bx-ringsettings:appearance")||_defaultAppearance15,s=a.geometryPrecision,l=a.transformPrecision,d;a.undoManager.checkpoint("Draw Ring Shape"),a.setPointerCapture(e.pointerId);var u=0,c=0,p=0,h=0,b=1,m=1,g=_createElement31("svg:path");r.append(g),_setAppearance16(g,o),a.selectedElements=[g];var x=g.getScreenCTM().inverse(),v=_getComputedTransform24(g).multiplySelf(x);g.setAttribute("transform",v.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("pointermove",d=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs16(a),l=_abs16(r);if(n.modKeys.shift){var d=_min9(o,l);o=d,l=d}var f=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;u=f+o/2,c=x+l/2,b=o/2,m=l/2,p=b*(3/5),h=m*(3/5)}else if("polar"===i){var y=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(y.x,y.y-100),w=new SVGPoint(t.clientX,t.clientY),k=new _Vector22(y,w),A=_getRotationAngleFromPoints8(y,_,w);u=y.x,c=y.y,b=k.length,m=k.length,p=b*(3/5),h=m*(3/5),n.modKeys.shift&&(A=_snapRotationAngle5(A,45));var C=new SVGMatrix().rotate(A,y.x,y.y);g.setAttribute("transform",v.multiply(C).toString())}_setShapeData15(g,{type:"ring",values:[u,c,p,h,b,m]},s)});var y=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(g,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",y),this.addEventListener("_enabledchange",y),this.addEventListener("_shapechange",y)}},{key:"_onCogShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-cogsettings:drawingMode")||"polar",o=n.getConfig("bx-cogsettings:appearance")||_defaultAppearance15,s=a.geometryPrecision,l=a.transformPrecision,d;a.undoManager.checkpoint("Draw Cog Shape"),a.setPointerCapture(e.pointerId);var u=0,c=0,p=33,h=66,b=99,m=_createElement31("svg:path");r.append(m),_setAppearance16(m,o),a.selectedElements=[m];var x=m.getScreenCTM().inverse(),g=_getComputedTransform24(m).multiplySelf(x);m.setAttribute("transform",g.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("pointermove",d=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,o=t.clientY-e.clientY||1,l=_abs16(a),d=_abs16(o);if(n.modKeys.shift){var v=_min9(l,d);l=v,d=v}var f=0>a?e.clientX-l:e.clientX,x=0>o?e.clientY-d:e.clientY,y=l/2;if(u=f+l/2,c=x+d/2,p=y*(1/3),h=2*y/3,b=y,l===d)m.setAttribute("transform",g.toString());else{var r=1,_=d/l,w=-u*(r-1),k=-c*(_-1),A=SVGMatrix.fromMatrix(g);A.translateSelf(w,k),A.scaleNonUniformSelf(r,_),m.setAttribute("transform",A.toString())}}else if("polar"===i){var C=new SVGPoint(e.clientX,e.clientY),S=new SVGPoint(C.x,C.y-100),E=new SVGPoint(t.clientX,t.clientY),T=new _Vector22(C,E),P=_getRotationAngleFromPoints8(C,S,E),L=T.length;u=C.x,c=C.y,p=L*(1/3),h=L*(2/3),b=L,n.modKeys.shift&&(P=_snapRotationAngle5(P,45));var D=new SVGMatrix().rotate(P,C.x,C.y);m.setAttribute("transform",g.multiply(D).toString())}_setShapeData15(m,{type:"cog",values:[u,c,p,h,b,0.375,8]},s)});var v=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(m,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"shape",get:function(){return this.hasAttribute("shape")?this.getAttribute("shape"):"rect"},set:function(e){this.setAttribute("shape",e)}}],[{key:"observedAttributes",get:function(){return["enabled","shape"]}}]),t}(_CustomElement);customElements.define("bx-shapecontext",BXShapeContextElement)}}{{var _setAppearance17=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen57=BoxySVG.utils.element,_createElement32=_BoxySVG$utils$elemen57.createElement,_closest76=_BoxySVG$utils$elemen57.closest,_round39=BoxySVG.utils.math.round,_sleep13=BoxySVG.utils.time.sleep,_getRenderedTextNodes12=BoxySVG.utils.text.getRenderedTextNodes,_Shortcut15=BoxySVG.classes.Shortcut,_defaultAppearance16={fill:"#333333","font-size":"24px","font-family":"sans-serif"},BXTextContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest76(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest76(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="text",t.addEventListener("keydown",this._keyDownListener=function(e){_Shortcut15.fromEvent(e)}),t.artboards.addEventListener("pointerdown",this._pointerDownListener=function(n){if(0===n.button&&(e._ownerEditor.canvas.transformHud.enabled=!1,null===n.target.closest("text"))){t.undoManager.checkpoint("Text");var a=t.currentContainer||t.currentArtboard,r=e._ownerApp.getConfig("bx-textsettings:appearance")||_defaultAppearance16,i=a.getScreenCTM().inverse(),o=new SVGPoint(n.clientX,n.clientY),s=o.matrixTransform(i),l=_round39(s.x,t.geometryPrecision),d=_round39(s.y,t.geometryPrecision),u=t.fontsManager.getFamilies(),c=0<u.length?"\""+u[0]+"\"":"sans-serif",p=_createElement32("svg:text");p.setAttribute("x",l),p.setAttribute("y",d),p.textContent="Enter your text here",p.style.whiteSpace="pre",a.append(p),_setAppearance17(p,r),t.selectedElements=[p];{var h=_getRenderedTextNodes12(p),b=h[0],x=h[h.length-1],m=new Range;m.setStart(b,0),m.setEnd(x,x.textContent.length),e._ownerEditor.canvas.selectedTextRange=m,_sleep13(100).then(function(){return e._ownerEditor.canvas.textHud.focus()})}}})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-textcontext",BXTextContextElement)}}{{var _setAppearance18=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen58=BoxySVG.utils.element,_createElement33=_BoxySVG$utils$elemen58.createElement,_closest77=_BoxySVG$utils$elemen58.closest,_BoxySVG$utils$transf19=BoxySVG.utils.transformGeneral,_getComputedTransform25=_BoxySVG$utils$transf19.getComputedTransform,_getTransformToElement35=_BoxySVG$utils$transf19.getTransformToElement,_transformPathData2=_BoxySVG$utils$transf19.transformPathData,_reversePath3=BoxySVG.utils.pathGeneral.reversePath,_round40=BoxySVG.utils.math.round,_BoxySVG$classes7=BoxySVG.classes,_Shortcut16=_BoxySVG$classes7.Shortcut,_Vector23=_BoxySVG$classes7.Vector,_defaultAppearance17={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXCubicBezierContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPath=null,e._isDrawingBackward=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest77(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest77(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.pathHud.addEventListener("nodegrippieclick",this._nodeGrippieClickListener=function(t){e._onNodeGrippieClick(t.detail.position,t.detail.path,t.detail.selected)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this._currentPath=null,this._isDrawingBackward=!1,e.pathHud.passive=!1,e.cubicBezierSegHud.hide(),e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.pathHud.removeEventListener("nodegrippieclick",this._nodeGrippieClickListener)}},{key:"_onKeyDown",value:function(e){var t=_Shortcut16.fromEvent(e);this._currentPath&&(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),this._currentPath=null,this._isDrawingBackward=!1,this._ownerEditor.canvas.pathHud.passive=!1,this._ownerEditor.canvas.cubicBezierSegHud.hide())}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector23(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(n.pathHud.deselectAllSegs(),null===this._currentPath){if(t){n.undoManager.checkpoint("Draw path segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-cubicbeziersettings:appearance")||_defaultAppearance17,s=_createElement33("svg:path");i.append(s),_setAppearance18(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l),u=d.x,c=d.y,p=[{type:"M",values:[u,c]}],h=!0,b=!1,x;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,v.values=v.values.map(function(e){return _round40(e,n.geometryPrecision)})}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}s.setPathData(p),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._isDrawingBackward=!1,this._currentPath=s,n.pathHud.passive=!0,n.cubicBezierSegHud.show(s,"end")}}else if(this._currentPath)if(!1===this._isDrawingBackward){var y=this._currentPath.getPathData({normalize:!0}),f=[].concat(_toConsumableArray(y));1<f.length&&n.undoManager.checkpoint("Draw path segment"),n.cubicBezierSegHud.curved?f.push({type:"C",values:[n.cubicBezierSegHud.controlPoint1.x,n.cubicBezierSegHud.controlPoint1.y,n.cubicBezierSegHud.controlPoint2.x,n.cubicBezierSegHud.controlPoint2.y,n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}):f.push({type:"L",values:[n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]});var _=!0,w=!1,k;try{for(var A=f[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)S=C.value,S.values=S.values.map(function(e){return _round40(e,n.geometryPrecision)})}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}this._currentPath.setPathData(f)}else{n.undoManager.checkpoint("Draw path segment");var E=this._currentPath.getPathData({normalize:!0}),T=[];T.push({type:"M",values:[n.cubicBezierSegHud.startPoint.x,n.cubicBezierSegHud.startPoint.y]}),n.cubicBezierSegHud.curved?T.push({type:"C",values:[n.cubicBezierSegHud.controlPoint1.x,n.cubicBezierSegHud.controlPoint1.y,n.cubicBezierSegHud.controlPoint2.x,n.cubicBezierSegHud.controlPoint2.y,n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}):T.push({type:"L",values:[n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}),T.push.apply(T,_toConsumableArray(E.slice(1)));var P=!0,L=!1,D;try{for(var M=T[Symbol.iterator](),N,I;!(P=(N=M.next()).done);P=!0)I=N.value,I.values=I.values.map(function(e){return _round40(e,n.geometryPrecision)})}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}this._currentPath.setPathData(T)}}},{key:"_onNodeGrippieClick",value:function(e,t,n){var a=!1,r=this._ownerEditor.canvas;if(this._currentPath)if(t===this._currentPath){if("start"===e||"end"===e){var i=this._currentPath,o=i.getPathData({normalize:!0}),s=o[0],l=o[o.length-1];if(!1===this._isDrawingBackward&&"start"===e){r.undoManager.checkpoint("Draw path segment");var d=[].concat(_toConsumableArray(o));r.cubicBezierSegHud.curved?d.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,s.values[0],s.values[1]]}):d.push({type:"L",values:[s.values[0],s.values[1]]}),d.push({type:"Z",values:[]});var u=!0,c=!1,p;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,x.values=x.values.map(function(e){return _round40(e,r.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}i.setPathData(d)}else if(this._isDrawingBackward&&"end"===e){r.undoManager.checkpoint("Draw path segment");var m=[];m.push({type:"M",values:["C"===l.type?l.values[4]:l.values[0],"C"===l.type?l.values[5]:l.values[1]]}),r.cubicBezierSegHud.curved?m.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,s.values[0],s.values[1]]}):m.push({type:"L",values:[s.values[0],s.values[1]]}),m.push.apply(m,_toConsumableArray(o.slice(1))),m.push({type:"Z",values:[]});var g=!0,v=!1,y;try{for(var f=m[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,w.values=w.values.map(function(e){return _round40(e,r.geometryPrecision)})}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}i.setPathData(m)}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.cubicBezierSegHud.hide(),a=!0}}else if("start"===e||"end"===e){var k=t,A=this._currentPath,C=r.artboards.querySelector("textPath[href=\"#"+k.id+"\"]"),S=r.artboards.querySelector("textPath[href=\"#"+A.id+"\"]"),E=A.getPathData({normalize:!0});if(1<E.length){r.undoManager.checkpoint("Draw path segment"),(!1===this._isDrawingBackward&&"end"===e||!0===this._isDrawingBackward&&"start"===e)&&_reversePath3(k);var T;if(S&&C?(T=_getTransformToElement35(C.closest("text"),S.closest("text")),T.multiplySelf(_getComputedTransform25(A)),T.multiplySelf(_getComputedTransform25(k))):S&&!C?(T=_getTransformToElement35(k,S.closest("text")),T.multiplySelf(_getComputedTransform25(A))):!S&&C?(T=_getTransformToElement35(C.closest("text"),A),T.multiplySelf(_getComputedTransform25(k))):T=_getTransformToElement35(k,A),!1===this._isDrawingBackward){var P=[].concat(_toConsumableArray(E)),L=_transformPathData2(k.getPathData({normalize:!0}),T),D=L[0];r.cubicBezierSegHud.curved?P.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,D.values[0],D.values[1]]}):P.push({type:"L",values:[D.values[0],D.values[1]]}),P.push.apply(P,_toConsumableArray(L.slice(1)));var M=!0,N=!1,I;try{for(var R=P[Symbol.iterator](),V,z;!(M=(V=R.next()).done);M=!0)z=V.value,z.values=z.values.map(function(e){return _round40(e,r.geometryPrecision)})}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}A.setPathData(P),k.setPathData([]),k.remove()}else if(!0===this._isDrawingBackward){var G=[],B=_transformPathData2(k.getPathData({normalize:!0}),T),O=E[0];G.push.apply(G,_toConsumableArray(B)),r.cubicBezierSegHud.curved?G.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,O.values[0],O.values[1]]}):G.push({type:"L",values:[O.values[0],O.values[1]]}),G.push.apply(G,_toConsumableArray(E.slice(1)));var q=!0,j=!1,U;try{for(var H=G[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F.values=F.values.map(function(e){return _round40(e,r.geometryPrecision)})}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}A.setPathData(G),k.setPathData([]),k.remove()}r.selectedElements=r.selectedElements.filter(function(e){return e!==k}),a=!0}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.cubicBezierSegHud.hide()}if(!1==a&&null===this._currentPath&&!0===n)if("start"===e){var Y=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!0,r.pathHud.passive=!0,r.cubicBezierSegHud.show(t,"start",Y)}else if("end"===e){var X=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!1,r.pathHud.passive=!0,r.cubicBezierSegHud.show(t,"end",X)}}},{key:"_getTextPath",value:function(e){var t=this._ownerEditor.canvas.artboards.querySelectorAll("textPath");if(e.id){var n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.href.baseVal==="#"+e.id)return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}return null}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-cubicbeziercontext",BXCubicBezierContextElement)}}{{var _setAppearance19=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen59=BoxySVG.utils.element,_createElement34=_BoxySVG$utils$elemen59.createElement,_closest78=_BoxySVG$utils$elemen59.closest,_BoxySVG$utils$transf20=BoxySVG.utils.transformGeneral,_getComputedTransform26=_BoxySVG$utils$transf20.getComputedTransform,_getTransformToElement36=_BoxySVG$utils$transf20.getTransformToElement,_transformPathData3=_BoxySVG$utils$transf20.transformPathData,_reversePath4=BoxySVG.utils.pathGeneral.reversePath,_round41=BoxySVG.utils.math.round,_BoxySVG$classes8=BoxySVG.classes,_Shortcut17=_BoxySVG$classes8.Shortcut,_Vector24=_BoxySVG$classes8.Vector,_defaultAppearance18={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXQuadBezierContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPath=null,e._isDrawingBackward=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest78(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest78(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.pathHud.addEventListener("nodegrippieclick",this._nodeGrippieClickListener=function(t){e._onNodeGrippieClick(t.detail.position,t.detail.path,t.detail.selected)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this._currentPath=null,this._isDrawingBackward=!1,e.pathHud.passive=!1,e.quadBezierSegHud.hide(),e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.pathHud.removeEventListener("nodegrippieclick",this._nodeGrippieClickListener)}},{key:"_onKeyDown",value:function(e){var t=_Shortcut17.fromEvent(e);this._currentPath&&(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),this._currentPath=null,this._isDrawingBackward=!1,this._ownerEditor.canvas.pathHud.passive=!1,this._ownerEditor.canvas.quadBezierSegHud.hide())}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector24(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(n.pathHud.deselectAllSegs(),null===this._currentPath){if(t){n.undoManager.checkpoint("Draw path segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-quadbeziersettings:appearance")||_defaultAppearance18,s=_createElement34("svg:path");i.append(s),_setAppearance19(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l),u=d.x,c=d.y,p=[{type:"M",values:[u,c]}],h=!0,b=!1,x;try{for(var m=p[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)v=g.value,v.values=v.values.map(function(e){return _round41(e,n.geometryPrecision)})}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}s.setPathData(p),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._isDrawingBackward=!1,this._currentPath=s,n.pathHud.passive=!0,n.quadBezierSegHud.show(s,"end")}}else if(this._currentPath)if(!1===this._isDrawingBackward){var y=this._currentPath.getPathData({normalize:!0}),f=[].concat(_toConsumableArray(y));1<f.length&&n.undoManager.checkpoint("Draw path segment"),n.quadBezierSegHud.curved?f.push({type:"Q",values:[n.quadBezierSegHud.controlPoint.x,n.quadBezierSegHud.controlPoint.y,n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}):f.push({type:"L",values:[n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]});var _=!0,w=!1,k;try{for(var A=f[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)S=C.value,S.values=S.values.map(function(e){return _round41(e,n.geometryPrecision)})}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}this._currentPath.setPathData(f)}else{n.undoManager.checkpoint("Draw path segment");var E=this._currentPath.getPathData({normalize:!0}),T=[];T.push({type:"M",values:[n.quadBezierSegHud.startPoint.x,n.quadBezierSegHud.startPoint.y]}),n.quadBezierSegHud.curved?T.push({type:"Q",values:[n.quadBezierSegHud.controlPoint.x,n.quadBezierSegHud.controlPoint.y,n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}):T.push({type:"L",values:[n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}),T.push.apply(T,_toConsumableArray(E.slice(1)));var P=!0,L=!1,D;try{for(var M=T[Symbol.iterator](),N,I;!(P=(N=M.next()).done);P=!0)I=N.value,I.values=I.values.map(function(e){return _round41(e,n.geometryPrecision)})}catch(e){L=!0,D=e}finally{try{!P&&M.return&&M.return()}finally{if(L)throw D}}this._currentPath.setPathData(T)}}},{key:"_onNodeGrippieClick",value:function(e,t,n){var a=!1,r=this._ownerEditor.canvas;if(this._currentPath)if(t===this._currentPath){if("start"===e||"end"===e){var i=this._currentPath,o=i.getPathData({normalize:!0}),s=o[0],l=o[o.length-1];if(!1===this._isDrawingBackward&&"start"===e){r.undoManager.checkpoint("Draw path segment");var d=[].concat(_toConsumableArray(o));r.quadBezierSegHud.curved?d.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,s.values[0],s.values[1]]}):d.push({type:"L",values:[s.values[0],s.values[1]]}),d.push({type:"Z",values:[]});var u=!0,c=!1,p;try{for(var h=d[Symbol.iterator](),b,x;!(u=(b=h.next()).done);u=!0)x=b.value,x.values=x.values.map(function(e){return _round41(e,r.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}i.setPathData(d)}else if(this._isDrawingBackward&&"end"===e){r.undoManager.checkpoint("Draw path segment");var m=[];m.push({type:"M",values:["C"===l.type?l.values[4]:l.values[0],"C"===l.type?l.values[5]:l.values[1]]}),r.quadBezierSegHud.curved?m.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,s.values[0],s.values[1]]}):m.push({type:"L",values:[s.values[0],s.values[1]]}),m.push.apply(m,_toConsumableArray(o.slice(1))),m.push({type:"Z",values:[]});var g=!0,v=!1,y;try{for(var f=m[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,w.values=w.values.map(function(e){return _round41(e,r.geometryPrecision)})}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}i.setPathData(m)}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.quadBezierSegHud.hide(),a=!0}}else if("start"===e||"end"===e){var k=t,A=this._currentPath,C=r.artboards.querySelector("textPath[href=\"#"+k.id+"\"]"),S=r.artboards.querySelector("textPath[href=\"#"+A.id+"\"]"),E=A.getPathData({normalize:!0});if(1<E.length){r.undoManager.checkpoint("Draw path segment"),(!1===this._isDrawingBackward&&"end"===e||!0===this._isDrawingBackward&&"start"===e)&&_reversePath4(k);var T;if(S&&C?(T=_getTransformToElement36(C.closest("text"),S.closest("text")),T.multiplySelf(_getComputedTransform26(A)),T.multiplySelf(_getComputedTransform26(k))):S&&!C?(T=_getTransformToElement36(k,S.closest("text")),T.multiplySelf(_getComputedTransform26(A))):!S&&C?(T=_getTransformToElement36(C.closest("text"),A),T.multiplySelf(_getComputedTransform26(k))):T=_getTransformToElement36(k,A),!1===this._isDrawingBackward){var P=[].concat(_toConsumableArray(E)),L=_transformPathData3(k.getPathData({normalize:!0}),T),D=L[0];r.quadBezierSegHud.curved?P.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,D.values[0],D.values[1]]}):P.push({type:"L",values:[D.values[0],D.values[1]]}),P.push.apply(P,_toConsumableArray(L.slice(1)));var M=!0,N=!1,I;try{for(var R=P[Symbol.iterator](),V,z;!(M=(V=R.next()).done);M=!0)z=V.value,z.values=z.values.map(function(e){return _round41(e,r.geometryPrecision)})}catch(e){N=!0,I=e}finally{try{!M&&R.return&&R.return()}finally{if(N)throw I}}A.setPathData(P),k.setPathData([]),k.remove()}else if(!0===this._isDrawingBackward){var G=[],B=_transformPathData3(k.getPathData({normalize:!0}),T),O=E[0];G.push.apply(G,_toConsumableArray(B)),r.quadBezierSegHud.curved?G.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,O.values[0],O.values[1]]}):G.push({type:"L",values:[O.values[0],O.values[1]]}),G.push.apply(G,_toConsumableArray(E.slice(1)));var q=!0,j=!1,U;try{for(var H=G[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F.values=F.values.map(function(e){return _round41(e,r.geometryPrecision)})}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}A.setPathData(G),k.setPathData([]),k.remove()}r.selectedElements=r.selectedElements.filter(function(e){return e!==k}),a=!0}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.quadBezierSegHud.hide()}if(!1==a&&null===this._currentPath&&!0===n)if("start"===e){var Y=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!0,r.pathHud.passive=!0,r.quadBezierSegHud.show(t,"start",Y)}else if("end"===e){var X=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!1,r.pathHud.passive=!0,r.quadBezierSegHud.show(t,"end",X)}}},{key:"_getTextPath",value:function(e){var t=this._ownerEditor.canvas.artboards.querySelectorAll("textPath");if(e.id){var n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.href.baseVal==="#"+e.id)return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}return null}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-quadbeziercontext",BXQuadBezierContextElement)}}{{var _setAppearance20=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen60=BoxySVG.utils.element,_createElement35=_BoxySVG$utils$elemen60.createElement,_closest79=_BoxySVG$utils$elemen60.closest,_getSchneiderCurves=BoxySVG.utils.curvesSchneider.getSchneiderCurves,_round42=BoxySVG.utils.math.round,_reversePath5=BoxySVG.utils.pathGeneral.reversePath,_debounce11=BoxySVG.utils.time.debounce,_getTransformToElement37=BoxySVG.utils.transformGeneral.getTransformToElement,_reduceTransform13=BoxySVG.utils.transformReduction.reduceTransform,_defaultAppearance19={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},DISCARD_POINTS_THRESHOLD=10,BXFreehandContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest79(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest79(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:async function(){var e=this,t=this._ownerApp.getConfig("bx-freehandsettings:smoothing");this._smoothing=null===t?0.5:t,this._currentPath=null,this._ownerCanvas.pathHud.passive=!0,this._ownerCanvas.style.cursor="crosshair",this._ownerApp.addEventListener("configchange",this._configChangeListener=function(t){e._onConfigChange(t.detail)}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)})}},{key:"_onDisabled",value:function(){this._ownerCanvas.pathHud.passive=!1,this._ownerCanvas.style.cursor=null,this._ownerApp.removeEventListener("configchange",this._configChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._currentPath=null,this._ownerCanvas.freehandHud.hide()}},{key:"_onConfigChange",value:function(e){var t=e.key,n=e.value;"bx-freehandsettings:smoothing"===t&&null!==n&&(this._smoothing=n)}},{key:"_onHudsPointerDown",value:function(e){var t=this,n=this._ownerCanvas.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Draw freehand path segments");var a=n[0],r=a.path,o=r.getPathData(),s;this._currentPath=r,this._mode="end"===a.position?"draw-forward":"draw-backward",this._ownerCanvas.freehandHud.show(r,new SVGPoint(e.clientX,e.clientY)),this._ownerCanvas.setPointerCapture(e.pointerId),this._ownerCanvas.addEventListener("pointerup",s=function(e){t._ownerCanvas.removeEventListener("pointerup",s);var n=t._ownerCanvas.freehandHud.points;if(1<n.length){if("draw-forward"===t._mode){if(0===n.length)return;if(1===n.length||2===n.length)o.push({type:"L",values:[n[n.length-1].x,n[n.length-1].y]});else if(3<=n.length){var a=_getSchneiderCurves(n,6*t._smoothing/t._ownerCanvas.scale),l=!0,d=!1,u;try{for(var c=a[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,o.push({type:"C",values:[h[1].x,h[1].y,h[2].x,h[2].y,h[3].x,h[3].y]})}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}else if("draw-backward"===t._mode){n=[].concat(_toConsumableArray(n)).reverse();var b=[];if(0===n.length)return;if(1===n.length)b.push({type:"M",values:[n[0].x,n[0].y]});else if(2===n.length)b.push({type:"M",values:[n[0].x,n[0].y]}),b.push({type:"L",values:[n[1].x,n[1].y]});else if(3<=n.length){var x=_getSchneiderCurves(n,6*t._smoothing/t._ownerCanvas.scale);b.push({type:"M",values:[x[0][0].x,x[0][0].y]});var m=!0,g=!1,v;try{for(var y=x[Symbol.iterator](),f,_;!(m=(f=y.next()).done);m=!0)_=f.value,b.push({type:"C",values:[_[1].x,_[1].y,_[2].x,_[2].y,_[3].x,_[3].y]})}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}}o=[].concat(b,_toConsumableArray(o.slice(1)))}r.setPathData(o),t._ownerCanvas.freehandHud.clear()}var w=t._ownerCanvas.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<w.length){var k=null;if(k="draw-forward"===t._mode?w.find(function(e){return e.path===r&&"start"===e.position}):w.find(function(e){return e.path===r&&"end"===e.position}),k){o.push({type:"Z",values:[]})}else{var A=w.find(function(e){return e.path!==r});if(A){var C=A.path,S=_getTransformToElement37(C,r);if(C.setAttribute("transform",S.toString()),_reduceTransform13(C,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveRotation:!1}),"draw-forward"===t._mode){"end"===A.position&&_reversePath5(C);for(var E=C.getPathData({normalize:!0}),T=1,i;T<E.length;T+=1)i=E[T],o.push(i);C.setPathData([]),C.remove()}else if("draw-backward"===t._mode){"start"===A.position&&_reversePath5(C);var P=C.getPathData({normalize:!0});o=[].concat(_toConsumableArray(P),_toConsumableArray(o)),C.setPathData([]),C.remove()}}}}var L=!0,D=!1,M;try{for(var N=o[Symbol.iterator](),I,R;!(L=(I=N.next()).done);L=!0)R=I.value,R.values=R.values.map(function(e){return _round42(e,t._ownerCanvas.geometryPrecision)})}catch(e){D=!0,M=e}finally{try{!L&&N.return&&N.return()}finally{if(D)throw M}}r.setPathData(o),t._ownerCanvas.freehandHud.hide(),"select"===t._mode,t._currentPath=null})}}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=this._ownerCanvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-freehandsettings:appearance")||_defaultAppearance19;n.undoManager.checkpoint("Draw freehand path segments");var o=_createElement35("svg:path");o.style.stroke="black",o.style.fill="none",a.append(o);var i=o.getScreenCTM().inverse(),s=e.clientX,l=e.clientY,d=new SVGPoint(s,l).matrixTransform(i),u=d.x,c=d.y,p=n.geometryPrecision,h=[{type:"M",values:[u,c]}],b;o.setPathData(h),_setAppearance20(o,r),this._mode="draw-forward",this._currentPath=o,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[o]),n.freehandHud.show(o,new SVGPoint(event.clientX,event.clientY)),n.setPointerCapture(e.pointerId),n.addEventListener("pointerup",b=function(e){n.removeEventListener("pointerup",b);var a=n.freehandHud.points;if(0<a.length){o.getAttribute("d");if(0===a.length)return;if(1===a.length||2===a.length)h.push({type:"L",values:[a[a.length-1].x,a[a.length-1].y]});else if(3<=a.length){var r=_getSchneiderCurves(a,6*t._smoothing/n.scale),s=!0,l=!1,d;try{for(var u=r[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,h.push({type:"C",values:[p[1].x,p[1].y,p[2].x,p[2].y,p[3].x,p[3].y]})}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}o.setPathData(h),n.freehandHud.clear()}var x=n.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<x.length){var m=x.find(function(e){return e.path===o&&"start"===e.position});if(m)h.push({type:"Z",values:[]}),o.setPathData(h);else{var g=x.find(function(e){return e.path!==o});if(g){var v=g.path,y=_getTransformToElement37(v,o);v.setAttribute("transform",y.toString()),_reduceTransform13(v,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision,preserveRotation:!1}),"end"===g.position&&_reversePath5(v);for(var f=v.getPathData({normalize:!0}),_=1,i;_<f.length;_+=1)i=f[_],h.push(i);v.setPathData([]),v.remove()}}}var w=!0,k=!1,A;try{for(var C=h[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.values=E.values.map(function(e){return _round42(e,n.geometryPrecision)})}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}o.setPathData(h),n.freehandHud.hide(),t._mode="select",t._currentPath=null})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-freehandcontext",BXFreehandContextElement)}}{{var _setAppearance21=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen61=BoxySVG.utils.element,_createElement36=_BoxySVG$utils$elemen61.createElement,_closest80=_BoxySVG$utils$elemen61.closest,_getTransformToElement38=BoxySVG.utils.transformGeneral.getTransformToElement,_BoxySVG$classes9=BoxySVG.classes,_Shortcut18=_BoxySVG$classes9.Shortcut,_Vector25=_BoxySVG$classes9.Vector,_defaultAppearance20={stroke:"#000000","stroke-width":"1px"},BXLineContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentLine=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest80(this,"bx-editor"),this._ownerApp=_closest80(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.lineSegHud.hide(),this._currentLine=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut18.fromEvent(e);this._currentLine&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.lineSegHud.hide(),this._currentLine=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector25(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null!==this._currentLine){var a=e.clientX,r=e.clientY,i=_getTransformToElement38(this._currentLine,n.currentArtboard).inverse(),o=n.lineSegHud.endPoint.matrixTransform(i);this._currentLine.setAttribute("x2",o.x),this._currentLine.setAttribute("y2",o.y),n.lineSegHud.hide(),this._currentLine=null}else if(t){n.undoManager.checkpoint("Draw line");var s=e.clientX,l=e.clientY,d=n.currentContainer||n.currentArtboard,u=this._ownerApp.getConfig("bx-linesettings:appearance")||_defaultAppearance20,c=_createElement36("svg:line");d.append(c),_setAppearance21(c,u);var p=c.getScreenCTM().inverse(),h=new SVGPoint(s,l).matrixTransform(p);c.setAttribute("x1",h.x),c.setAttribute("y1",h.y),c.setAttribute("x2",h.x),c.setAttribute("y2",h.y),this._currentLine=c,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[c]),n.lineSegHud.show(c)}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-linecontext",BXLineContextElement)}}{{var _setAppearance22=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen62=BoxySVG.utils.element,_createElement37=_BoxySVG$utils$elemen62.createElement,_closest81=_BoxySVG$utils$elemen62.closest,_getTransformToElement39=BoxySVG.utils.transformGeneral.getTransformToElement,_round43=BoxySVG.utils.math.round,_BoxySVG$classes10=BoxySVG.classes,_Shortcut19=_BoxySVG$classes10.Shortcut,_Vector26=_BoxySVG$classes10.Vector,_defaultAppearance21={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXPolygonContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPolygon=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest81(this,"bx-editor"),this._ownerApp=_closest81(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.polygonSegHud.hide(),this._currentPolygon=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut19.fromEvent(e);this._currentPolygon&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.polygonSegHud.hide(),this._currentPolygon=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector26(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null===this._currentPolygon){if(t){n.undoManager.checkpoint("Draw polygon segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-polygonsettings:appearance")||_defaultAppearance21,s=_createElement37("svg:polygon");i.append(s),_setAppearance22(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l);this._setPolygonPoints(s,[d]),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._currentPolygon=s,n.polygonSegHud.show(s)}}else if(this._currentPolygon)if(2<=this._ownerApp.pointerClickCount)n.polygonSegHud.hide(),this._currentPolygon=null;else{var u=[].concat(_toConsumableArray(this._currentPolygon.points));1<u.length&&n.undoManager.checkpoint("Draw polyogn segment");var c=_getTransformToElement39(this._currentPolygon,n.currentArtboard).inverse(),p=n.polygonSegHud.endPoint.matrixTransform(c);u.push(p),this._setPolygonPoints(this._currentPolygon,u)}}},{key:"_setPolygonPoints",value:function(e,t){var n=[],a=this._ownerEditor.canvas.geometryPrecision,r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_round43(d.x,a),c=_round43(d.y,a);n.push(u,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}0<n.length?e.setAttribute("points",n.join(" ")):e.removeAttribute("points")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-polygoncontext",BXPolygonContextElement)}}{{var _setAppearance23=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen63=BoxySVG.utils.element,_createElement38=_BoxySVG$utils$elemen63.createElement,_closest82=_BoxySVG$utils$elemen63.closest,_getTransformToElement40=BoxySVG.utils.transformGeneral.getTransformToElement,_round44=BoxySVG.utils.math.round,_BoxySVG$classes11=BoxySVG.classes,_Shortcut20=_BoxySVG$classes11.Shortcut,_Vector27=_BoxySVG$classes11.Vector,_defaultAppearance22={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXPolylineContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPolyline=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest82(this,"bx-editor"),this._ownerApp=_closest82(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.polylineSegHud.hide(),this._currentPolyline=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut20.fromEvent(e);this._currentPolyline&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.polylineSegHud.hide(),this._currentPolyline=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector27(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null===this._currentPolyline){if(t){n.undoManager.checkpoint("Draw polyline segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-polylinesettings:appearance")||_defaultAppearance22,s=_createElement38("svg:polyline");i.append(s),_setAppearance23(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l);this._setPolylinePoints(s,[d]),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._currentPolyline=s,n.polylineSegHud.show(s)}}else if(this._currentPolyline)if(2<=this._ownerApp.pointerClickCount)n.polylineSegHud.hide(),this._currentPolyline=null;else{var u=[].concat(_toConsumableArray(this._currentPolyline.points));1<u.length&&n.undoManager.checkpoint("Draw polyogn segment");var c=_getTransformToElement40(this._currentPolyline,n.currentArtboard).inverse(),p=n.polylineSegHud.endPoint.matrixTransform(c);u.push(p),this._setPolylinePoints(this._currentPolyline,u)}}},{key:"_setPolylinePoints",value:function(e,t){var n=[],a=this._ownerEditor.canvas.geometryPrecision,r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_round44(d.x,a),c=_round44(d.y,a);n.push(u,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}0<n.length?e.setAttribute("points",n.join(" ")):e.removeAttribute("points")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-polylinecontext",BXPolylineContextElement)}}{{var _compareArrays=BoxySVG.utils.array.compareArrays,_html42=BoxySVG.utils.element.html,_isPointerMoveIntentional14=BoxySVG.utils.event.isPointerMoveIntentional,_normalize16=BoxySVG.utils.math.normalize,_shadowTemplate38=_html42(_templateObject61),BXPaintOrderSwitchElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate38.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled)}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._onValueAttributeChange():"context"===e?this._onContextAttributeChange():"disabled"===e&&this._onDisabledAttributeChange())}},{key:"_onValueAttributeChange",value:function(){var e=_slicedToArray(this.value,3),t=e[0],n=e[1],a=e[2];this["#"+t+"-thumb"].setAttribute("data-socket","1"),this["#"+n+"-thumb"].setAttribute("data-socket","2"),this["#"+a+"-thumb"].setAttribute("data-socket","3")}},{key:"_onContextAttributeChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#thumbs"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.getAttribute("data-value")===this.context?i.setAttribute("data-selected",""):i.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onDisabledAttributeChange",value:function(){this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("aria-disabled",this.disabled)}},{key:"_onPointerDown",value:function(e){e.preventDefault(),this.focus(),this.blur()}},{key:"_getClosestSocket",value:function(e){var t=e.getBoundingClientRect(),n=this.getBoundingClientRect();if(t.left-n.left<t.width/2)return 1;for(var a=t.width/2,r=1;3>=r;r+=1){if(t.left-n.left>=a&&t.left-n.left<a+t.width)return r>this["#thumbs"].childElementCount?this["#thumbs"].childElementCount:r+1;a+=t.width}}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;this.setPointerCapture(e.pointerId);var n=e.target,a=null,r=null,i,o,s;this._enableAnimations(9999999),this.addEventListener("pointermove",i=function(i){if(null==a&&_isPointerMoveIntentional14(e,i,10)&&(a=n,r=parseFloat(getComputedStyle(a).left),a.style.transition="none",a.setAttribute("data-dragged","")),a){var o=i.clientX-e.clientX,s=t["#thumbs"].clientWidth-a.clientWidth,l=_normalize16(r+o,0,s);a.style.left=l+"px";var d=a.getAttribute("data-socket"),u=t._getClosestSocket(a).toString();if(u!==d){a.setAttribute("data-socket",u);var c=!0,p=!1,h;try{for(var b=t["#thumbs"].children[Symbol.iterator](),x,m;!(c=(x=b.next()).done);c=!0)m=x.value,m!==a&&m.getAttribute("data-socket")===u&&m.setAttribute("data-socket",d)}catch(e){p=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(p)throw h}}}}}),this.addEventListener("pointerup",o=function(){if(a)a.style.transition=null,a.style.left=null,a.removeAttribute("data-dragged");else{var e=n,r=t["#thumbs"].querySelector(".thumb[data-selected]"),i=[].concat(_toConsumableArray(t["#thumbs"].children)).find(function(t){return t!==e&&t!==r});if(e!==r){var o=e.getAttribute("data-socket"),s=r.getAttribute("data-socket");"1"===s?"2"===o?(e.setAttribute("data-socket","1"),r.setAttribute("data-socket","2")):"3"===o&&(i.setAttribute("data-socket","1"),e.setAttribute("data-socket","2"),r.setAttribute("data-socket","3")):"2"===s?"1"===o?(r.setAttribute("data-socket","1"),e.setAttribute("data-socket","2")):"3"===o&&(e.setAttribute("data-socket","2"),r.setAttribute("data-socket","3")):"3"===s&&("1"===o?(r.setAttribute("data-socket","1"),e.setAttribute("data-socket","2"),i.setAttribute("data-socket","3")):"2"===o&&(r.setAttribute("data-socket","2"),e.setAttribute("data-socket","3")))}}t._onMaybeUserReorderedThumbs()}),this.addEventListener("lostpointercapture",s=function(){t.removeEventListener("pointermove",i),t.removeEventListener("pointerup",o),t.removeEventListener("lostpointercapture",s),t._enableAnimations(500)})}},{key:"_onKeyDown",value:function(e){"Enter"===e.code||"Space"===e.code?(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbRight(),this._onMaybeUserReorderedThumbs()):"ArrowRight"===e.code?(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbRight(!1),this._onMaybeUserReorderedThumbs()):"ArrowLeft"===e.code&&(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbLeft(!1),this._onMaybeUserReorderedThumbs())}},{key:"_onMaybeUserReorderedThumbs",value:function(){var e=[this["#thumbs"].querySelector("[data-socket=\"1\"]").getAttribute("data-value"),this["#thumbs"].querySelector("[data-socket=\"2\"]").getAttribute("data-value"),this["#thumbs"].querySelector("[data-socket=\"3\"]").getAttribute("data-value")];!1===_compareArrays(this.value,e,!0)&&(this.value=e,this.dispatchEvent(new CustomEvent("change")))}},{key:"_moveSelectedThumbRight",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this._enableAnimations(500);var t=this["#thumbs"].querySelector(".thumb[data-selected]");"1"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","1"),t.setAttribute("data-socket","2")):"2"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"3\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","3")):"3"===t.getAttribute("data-socket")&&e&&(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","3"),this["#thumbs"].querySelector(".thumb[data-socket=\"1\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","1"))}},{key:"_moveSelectedThumbLeft",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this._enableAnimations(500);var t=this["#thumbs"].querySelector(".thumb[data-selected]");"3"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","3"),t.setAttribute("data-socket","2")):"2"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"1\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","1")):"1"===t.getAttribute("data-socket")&&e&&(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","1"),this["#thumbs"].querySelector(".thumb[data-socket=\"3\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","3"))}},{key:"_enableAnimations",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;clearTimeout(this._oldTimeout),this["#thumbs"].setAttribute("data-animate",""),this._oldTimeout=setTimeout(function(){e["#thumbs"].removeAttribute("data-animate","")},t)}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value").split(" "):["fill","stroke","markers"]},set:function(e){this.setAttribute("value",e.join(" "))}},{key:"context",get:function(){return this.getAttribute("context")},set:function(e){this.setAttribute("context",e)}},{key:"mixed",get:function(){return this.hasAttribute("mixed")},set:function(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed")}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["value","context","disabled"]}}]),t}(_CustomElement);customElements.define("bx-paintorderswitch",BXPaintOrderSwitchElement)}}{var _BoxySVG$utils$elemen64=BoxySVG.utils.element,_closest83=_BoxySVG$utils$elemen64.closest,_html43=_BoxySVG$utils$elemen64.html,_registerElement2=_BoxySVG$utils$elemen64.registerElement,_isString=BoxySVG.utils.type.isString,_Shortcut21=BoxySVG.classes.Shortcut,_$desc=Symbol(),reservedShortcuts=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Shift+ArrowUp","Shift+ArrowDown","Shift+ArrowLeft","Shift+ArrowRight","Tab","Escape","Enter"],itemHTML="\n    <div class=\"item\">\n      <div class=\"command-label\"></div>\n      <div class=\"shortcut-label\"></div>\n\n      <x-button class=\"button reset-button\" title=\"Reset to default shortcut\" skin=\"plain-condensed\">\n        <x-label>Reset</x-label>\n      </x-button>\n    </div>\n  ",_shadowHTML39="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%;background:#fbfbfb;border:1px solid #d0d0d0;outline:0}#main{height:100%;display:flex;flex-flow:column;--red-color: #d20f0f}#header{display:flex;align-items:center;height:30px;color:#585858;background:#f5f5f5;border-bottom:1px solid #d0d0d0;font-size:14px;font-weight:500}#header div:first-child{min-width:50%;margin-left:10px}#header div:last-child{margin-left:5px}#items{overflow:auto;height:100%;outline:0}.item{display:flex;width:100%;height:26px;align-items:center;font-size:13px;box-sizing:border-box;border:2px solid transparent;color:var(--text-color)}.item[data-conflicting],.item[data-editable][data-conflicting] .shortcut-label{color:var(--red-color)}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.item[data-selected][data-conflicting]{background:var(--red-color)}.item[data-user-shortcut]{font-weight:900}.item[hidden]{display:none}.item .command-label{min-width:50%;padding:8px 10px;white-space:pre;overflow:hidden;text-overflow:ellipsis}#footer,.item .shortcut-label{width:100%}.item[data-editable] .shortcut-label{background:#fff;padding:3px 8px;line-height:1;color:#218afb;font-size:11px;font-weight:500;text-transform:uppercase}.item .reset-button{padding:1px 5px;font-weight:400;border-radius:2px;margin:0 4px}.item .reset-button[hidden]{display:block;visibility:hidden}.item[data-editable] .reset-button{visibility:hidden}.item[data-selected] .reset-button{color:inherit;border-color:#fff}.item[data-conflicting] .reset-button{color:inherit;border-color:currentColor}#footer{padding:7px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #filter-buttons{margin-left:10px}</style>\n\n    <main id=\"main\">\n      <header id=\"header\">\n        <div>Command</div>\n        <div>Shortcut</div>\n      </header>\n\n      <div id=\"items\" tabindex=\"0\"></div>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"filter-input\" placeholder=\"Filter symbols\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Filter</x-label>\n          </x-input>\n\n          <x-buttons id=\"filter-buttons\" tracking=\"1\">\n            <x-button skin=\"recessed\" value=\"all\" toggled>\n              <x-label>All</x-label>\n            </x-button>\n\n            <x-button skin=\"recessed\" value=\"custom\">\n              <x-label>Custom</x-label>\n            </x-button>\n\n            <x-button skin=\"recessed\" value=\"conflicting\">\n              <x-label>Conflicting <span id=\"conflicting-items-counter\"></span></x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </footer>\n    </main>\n  ",BXShortcutsEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._firstTimeConnected=!1,e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!0}),e._shadowRoot.innerHTML=_shadowHTML39;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e._shadowRoot.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("blur",function(){return e._onItemsBlur()}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._updateItemsVisibility()}),e["#filter-buttons"].addEventListener("toggle",function(){return e._onFilterButtonsToggle()}),e["#filter-buttons"].addEventListener("click",function(){return e["#items"].focus()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,!1===this._firstTimeConnected&&(this._firstTimeConnected=!0,this._ownerApp=_closest83(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._userShortcuts=this._ownerApp.getConfig("bx-shortcutseditor:userShortcuts")||{},this._update())}},{key:"_onItemsBlur",value:function(){var e=this["#items"].querySelector(".item[data-editable]");e&&(e.removeAttribute("data-editable"),this._updateItem(e))}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".reset-button"),n=e.target.closest(".item");if(t)this._onResetButtonClick(e);else if(n)this._onItemClick(e);else{var a=!0,r=!1,i;try{for(var o=this["#items"].children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.hasAttribute("data-editable")&&(l.removeAttribute("data-editable"),this._updateItem(l))}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}}},{key:"_onItemClick",value:function(e){var t=e.target.closest(".item");if(2===e.detail)!1===t.hasAttribute("data-editable")&&(t.setAttribute("data-editable",""),this._updateItem(t));else{var n=!0,a=!1,r;try{for(var i=this["#items"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s===t?s.setAttribute("data-selected",""):s.removeAttribute("data-selected"),s.hasAttribute("data-editable")&&(s.removeAttribute("data-editable"),this._updateItem(s))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}}},{key:"_onResetButtonClick",value:function(e){var t=e.target.closest(".reset-button"),n=t.closest(".item"),a=n[_$desc].commandID;delete this._userShortcuts[a],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(n),this._updateConflictingState()}},{key:"_onFilterButtonsToggle",value:function(){this["#filter-input"].value="",this._updateItemsVisibility()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut21.fromEvent(e);if(e.target===this["#items"]){var n=this["#items"].querySelector(".item[data-editable]");if(n){if(e.preventDefault(),e.stopPropagation(),t.matches("Backspace")||t.matches("Escape")||t.matches("Enter"))n.removeAttribute("data-editable"),this._updateItem(n);else{if(t.meta&&"bx-electronapp"===this._ownerApp.localName)return;if(t.key&&!1===reservedShortcuts.includes(t.toString())){var a=n[_$desc],r=a.commandID,i=a.defaultShortcut,o=this._userShortcuts[r]||null;o&&t.toString()===o?(n.removeAttribute("data-editable"),this._updateItem(n)):i&&t.toString()===i?(delete this._userShortcuts[r],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),n.removeAttribute("data-editable"),this._updateItem(n),this._updateConflictingState()):(this._userShortcuts[r]=t.toString(),this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),n.removeAttribute("data-editable"),this._updateItem(n),this._updateConflictingState())}}}else if(t.matches("ArrowUp"))e.preventDefault(),this._selectPreviousItem();else if(t.matches("ArrowDown"))e.preventDefault(),this._selectNextItem();else if(t.matches("Enter")){e.preventDefault();var s=this["#items"].querySelector(".item[data-selected]:not([hidden])");s.setAttribute("data-editable",""),this._updateItem(s)}else if(t.matches("Backspace")){var l=this["#items"].querySelector(".item[data-selected]:not([hidden])"),d=l[_$desc],u=d.commandID,c=d.defaultShortcut,p=this._userShortcuts[u];void 0===p?null!==c&&(e.preventDefault(),this._userShortcuts[u]=null,this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(l),this._updateConflictingState()):(e.preventDefault(),delete this._userShortcuts[u],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(l),this._updateConflictingState())}}}},{key:"_createItem",value:function(e){var t=_html43(_templateObject2,itemHTML);return t[_$desc]=e,this._updateItem(t),t}},{key:"_selectPreviousItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]:not([hidden])"),n=t?e.indexOf(t):-1,a=e[n-1];if(a){a.scrollIntoViewIfNeeded();var r=!0,i=!1,o;try{for(var s=this["#items"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===a?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"_selectNextItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]:not([hidden])"),n=t?e.indexOf(t):-1,a=e[n+1];if(a){a.scrollIntoViewIfNeeded();var r=!0,i=!1,o;try{for(var s=this["#items"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===a?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"_update",value:async function(){var e=await this._ownerApp.getShortcutsEditorModel();this["#items"].innerHTML="";var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=this._createItem(o);this["#items"].append(s)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._updateConflictingState()}},{key:"_updateItem",value:function(e){var t=e[_$desc],n=t.commandID,a=t.label,r=t.defaultShortcut,i=this._userShortcuts[n];i||null===i?e.setAttribute("data-user-shortcut",""):e.removeAttribute("data-user-shortcut");{var o=e.querySelector(".command-label");o.textContent=a}{var s=e.querySelector(".shortcut-label");e.hasAttribute("data-editable")?s.textContent="Press new shortcut":i?s.textContent=_Shortcut21.fromString(i).toDisplayString():null===i?s.textContent="":void 0===i&&(r?s.textContent=_Shortcut21.fromString(r).toDisplayString():s.textContent="")}{var l=e.querySelector(".reset-button");l.hidden=void 0===i}}},{key:"_updateConflictingState",value:function(){var e=0,t=!0,n=!1,a;try{for(var r=this["#items"].children[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o[_$desc],l=s.commandID,d=s.defaultShortcut,u=this._userShortcuts[l],c=u||d,p=!1;if(c){var h=!0,b=!1,x=void 0;try{for(var m=this["#items"].children[Symbol.iterator](),g,v;!(h=(g=m.next()).done);h=!0)if(v=g.value,v!==o){var y=this._userShortcuts[v[_$desc].commandID]||v[_$desc].defaultShortcut;if(y&&y===c){p=!0;break}}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}}p?(o.setAttribute("data-conflicting",""),e+=1):o.removeAttribute("data-conflicting")}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#conflicting-items-counter"].textContent=0<e?"("+e+")":""}},{key:"_updateItemsVisibility",value:function(){var e=this["#filter-input"].value.trim().toLowerCase(),t=!0,n=!1,a;try{for(var r=this["#items"].querySelectorAll(".command-label")[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.closest(".item"),l=!1;if(0<e.length){var d=o.textContent.trim().toLowerCase();l=-1===d.indexOf(e)}else l=!1;l||("custom"===this["#filter-buttons"].value?!1===s.hasAttribute("data-user-shortcut")&&(l=!0):"conflicting"===this["#filter-buttons"].value&&!1===s.hasAttribute("data-conflicting")&&(l=!0)),s.hidden=l}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}]),t}(_CustomElement);customElements.define("bx-shortcutseditor",BXShortcutsEditorElement)}{{var _dataURLToBinaryArray=BoxySVG.utils.array.dataURLToBinaryArray,_html44=BoxySVG.utils.markup.html,_createArtworkFromBitmapDataURL=BoxySVG.utils.artworkGeneral.createArtworkFromBitmapDataURL,_BoxySVG$utils$artwor2=BoxySVG.utils.artworkCompression,_compressArtwork=_BoxySVG$utils$artwor2.compressArtwork,_uncompressArtwork=_BoxySVG$utils$artwor2.uncompressArtwork,_rasterizeArtwork3=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_importArtwork4=BoxySVG.utils.artworkImport.importArtwork,_exportArtwork4=BoxySVG.utils.artworkExport.exportArtwork,_parseColor10=BoxySVG.utils.color.parseColor,_BoxySVG$utils$elemen65=BoxySVG.utils.element,_closest84=_BoxySVG$utils$elemen65.closest,_elementFromPoint=_BoxySVG$utils$elemen65.elementFromPoint,_createElement39=_BoxySVG$utils$elemen65.createElement,_Shortcut22=BoxySVG.classes.Shortcut,_cloneObject=BoxySVG.utils.object.cloneObject,_BoxySVG$utils$time12=BoxySVG.utils.time,_sleep14=_BoxySVG$utils$time12.sleep,_whenIdle=_BoxySVG$utils$time12.whenIdle,_isAppleDevice2=BoxySVG.utils.variables.isAppleDevice,_toCamelCase3=BoxySVG.utils.string.toCamelCase,_entries5=Object.entries,_BoxySVG$utils$chrome=BoxySVG.utils.chrome,_getBackgroundWindow=_BoxySVG$utils$chrome.getBackgroundWindow,_readEntry=_BoxySVG$utils$chrome.readEntry,_writeEntry=_BoxySVG$utils$chrome.writeEntry,_chooseEntry=_BoxySVG$utils$chrome.chooseEntry,_restoreEntry=_BoxySVG$utils$chrome.restoreEntry,_compareEntries=_BoxySVG$utils$chrome.compareEntries,_getEntryDisplayPath=_BoxySVG$utils$chrome.getEntryDisplayPath,_getEntryBaseName=_BoxySVG$utils$chrome.getEntryBaseName,_getEntryExtension=_BoxySVG$utils$chrome.getEntryExtension,_getWritableEntry=_BoxySVG$utils$chrome.getWritableEntry,$type=Symbol(),$view=Symbol(),$entry=Symbol(),$createView=Symbol(),$changeCounter=Symbol(),$displayPath=Symbol(),chromeWebStoreURL="https://chrome.google.com/webstore/detail/boxy-svg/gaoogdonmngmdlbinmiclicjpbjhgomg",windowsStoreURL="https://www.microsoft.com/store/apps/9nqz8rvmxtmb",macAppStoreURL="https://itunes.apple.com/us/app/boxy-svg/id611658502",maxRecentEntries=10,_shadowHTML40="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:100%;height:100%;display:flex;flex-flow:column;border-top:1px solid #bdbdbd;--header-border-bottom: 1px solid #bdbdbd}#header{border-bottom:var(--header-border-bottom);-webkit-app-region:drag}#menubar{border:0;overflow:hidden;width:auto}#menubar x-menuitem,#titlebar-buttons{-webkit-app-region:no-drag!important}#menubar x-shortcut[hidden]{display:none}#titlebar-buttons{margin-left:auto}#tabs{width:auto;height:30px;padding-top:5px;outline:0}#tabs[disabled]{opacity:.5;pointer-events:none}#main{flex:1;width:100%;position:relative;background:#f2f1f1}#main>*{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}#main>:not(:defined),#main>[hidden]{contain:strict;visibility:visible;opacity:0;z-index:-100;touch-action:none}</style>\n\n    <header id=\"header\">\n      <x-box>\n        <x-menubar id=\"menubar\">\n          <x-menuitem>\n            <x-label>File</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"new\">\n                <x-label>New</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+N\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"newFromSelected\">\n                <x-label>New from Selected</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+N\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"open\">\n                <x-label>Open\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+O\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem id=\"open-recent-menu-item\">\n                <x-label>Open Recent</x-label>\n                <x-menu id=\"open-recent-menu\">\n                </x-menu>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"save\">\n                <x-label>Save</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"saveAs\">\n                <x-label>Save as\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"export\">\n                <x-label>Export\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"print\">\n                <x-label>Print\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"reloadFromDisk\">\n                <x-label>Reload from Disk</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"close\">\n                <x-label>Close</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+W\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"quit\">\n                <x-label>Quit</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Q\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Edit</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"undo\">\n                <x-label>Undo</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Z\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"redo\">\n                <x-label>Redo</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+Z\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"cut\">\n                <x-label>Cut</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+X\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"copy\">\n                <x-label>Copy</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+C\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"paste\">\n                <x-label>Paste</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+V\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"duplicate\">\n                <x-label>Duplicate</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+D\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"delete\">\n                <x-label>Delete</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"selectAll\">\n                <x-label>Select All</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"deselectAll\">\n                <x-label>Deselect All</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"preferences\">\n                <x-label>Preferences\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+,\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>View</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"inspector\">\n                <x-label>Inspector</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"I\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"manualGuides\">\n                <x-label>Manual Guides</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F1\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"smartGuides\">\n                <x-label>Smart Guides</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F2\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"zoomIn\">\n                <x-label>Zoom In</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"=\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"zoomOut\">\n                <x-label>Zoom Out</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"-\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"resetZoom\">\n                <x-label>Zoom Reset</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"`\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"zoomToViewBox\">\n                <x-label>Zoom to View Box</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"1\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"zoomToFitAll\">\n                <x-label>Zoom to Fit All</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"2\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Object</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"group\">\n                <x-label>Group</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ungroup\">\n                <x-label>Ungroup</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"raise\">\n                <x-label>Raise</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"]\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lower\">\n                <x-label>Lower</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"[\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"raiseToFront\">\n                <x-label>Raise to Front</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+]\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lowerToBack\">\n                <x-label>Lower to Back</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+[\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"rotateClockwise\">\n                <x-label>Rotate +90\xB0</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowRight\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rotateCounterclockwise\">\n                <x-label>Rotate -90\xB0</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowLeft\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"flipX\">\n                <x-label>Flip X</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowUp\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"flipY\">\n                <x-label>Flip Y</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowDown\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"grabPaintColor\">\n                <x-label>Grab Paint Color</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Q\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem>\n                <x-label>Path</x-label>\n\n                <x-menu>\n                  <x-menuitem value=\"openPath\">\n                    <x-label>Open</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"closePath\">\n                    <x-label>Close</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"reversePath\">\n                    <x-label>Reverse</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"unite\">\n                    <x-label>Unite</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"subtract\">\n                    <x-label>Subtract</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"intersect\">\n                    <x-label>Intersect</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"exclude\">\n                    <x-label>Exclude</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"join\">\n                    <x-label>Join</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"split\">\n                    <x-label>Split</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"objectToPath\">\n                    <x-label>Object to Path</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n                </x-menu>\n              </x-menuitem>\n\n              <x-menuitem>\n                <x-label>Move</x-label>\n\n                <x-menu>\n                  <x-menuitem value=\"moveOneUnitLeft\">\n                    <x-label>Move 1 Unit Left</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitRight\">\n                    <x-label>Move 1 Unit Right</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitUp\">\n                    <x-label>Move 1 Unit Up</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitDown\">\n                    <x-label>Move 1 Unit Down</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"moveTenUnitsLeft\">\n                    <x-label>Move 10 Units Left</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsRight\">\n                    <x-label>Move 10 Units Right</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsUp\">\n                    <x-label>Move 10 Units Up</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsDown\">\n                    <x-label>Move 10 Units Down</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n                </x-menu>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Tools</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"previousTool\">\n                <x-label>Previous Tool</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Space\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"transformTool\">\n                <x-label>Transform Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"editTool\">\n                <x-label>Edit Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"quadBezierTool\">\n                <x-label>Quad Bezier Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"cubicBezierTool\">\n                <x-label>Cubic Bezier Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"freehandTool\">\n                <x-label>Freehand Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"textTool\">\n                <x-label>Text Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rectTool\">\n                <x-label>Rect Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ellipseTool\">\n                <x-label>Ellipse Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ringTool\">\n                <x-label>Ring Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"pieTool\">\n                <x-label>Pie Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"triangleTool\">\n                <x-label>Triangle Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"nGonTool\">\n                <x-label>N-gon Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"starTool\">\n                <x-label>Star Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"cogTool\">\n                <x-label>Cog Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lineTool\">\n                <x-label>Line Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"polylineTool\">\n                <x-label>Polyline Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"polygonTool\">\n                <x-label>Polygon Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Panels</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"fillPanel\">\n                <x-label>Fill Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"strokePanel\">\n                <x-label>Stroke Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"compositingPanel\">\n                <x-label>Compositing Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"C\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"viewPanel\">\n                <x-label>View Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"V\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"arrangementPanel\">\n                <x-label>Arrangement Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"typographyPanel\">\n                <x-label>Typography Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"T\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"objectsPanel\">\n                <x-label>Objects Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"O\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"defsPanel\">\n                <x-label>Defs Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"D\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"libraryPanel\">\n                <x-label>Library Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"L\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"geometryPanel\">\n                <x-label>Geometry Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"metadataPanel\">\n                <x-label>Metadata Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"M\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"pathPanel\">\n                <x-label>Path Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"X\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"exportPanel\">\n                <x-label>Export Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"E\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Window</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"minimize\">\n                <x-label>Minimize</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+M\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"maximize\">\n                <x-label>Maximize</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"previousTab\">\n                <x-label>Show Previous Tab</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+ArrowLeft\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"nextTab\">\n                <x-label>Show Next Tab</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+ArrowRight\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"moveTabLeft\">\n                <x-label>Move Tab Left</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Alt+ArrowLeft\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"moveTabRight\">\n                <x-label>Move Tab Right</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"Control+Alt+ArrowRight\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Help</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"about\">\n                <x-label>About</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"support\">\n                <x-label>Support</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"officialSite\">\n                <x-label>Official Site</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rate\">\n                <x-label>Rate on Chrome Web Store</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n        </x-menubar>\n\n        <x-buttons id=\"titlebar-buttons\" tracking=\"-1\">\n          <x-button id=\"minimize-button\" skin=\"titlebar\">\n            <x-icon name=\"minimize-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"maximize-button\" skin=\"titlebar\">\n            <x-icon name=\"maximize-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"close-button\" skin=\"titlebar\">\n            <x-icon name=\"close-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </x-box>\n\n      <x-doctabs id=\"tabs\"></x-doctabs>\n    </header>\n\n    <div id=\"main\"></div>\n\n    <bx-colorgrabber id=\"color-grabber\"></bx-colorgrabber>\n    <bx-objectgrabber id=\"object-grabber\"></bx-objectgrabber>\n\n    <div id=\"dialogs\">\n      <x-dialog id=\"google-fonts-import-dialog\" style=\"top: 65px; width: 70%; height: 80%;\">\n        <bx-googlefontsimportcontrols id=\"google-fonts-import-controls\"></bx-googlefontsimportcontrols>\n      </x-dialog>\n\n      <x-dialog id=\"message-box-dialog\" style=\"top: 65px;\"></x-dialog>\n\n      <x-dialog id=\"install-dialog\" style=\"top: 65px;\">\n        <main>\n          <h3>Warning</h3>\n\n          <p>Chrome Web Store version of Boxy SVG is optimized for Chrome OS and Chromebook devices and it\n          will drop support for other platforms in early 2018.</p>\n\n          <p>To continue using the app on <strong>Windows</strong> and <strong>macOS</strong>, please install it\n          from <strong>Windows Store</strong> and <strong>Mac App Store</strong> respectively.</p>\n        </main>\n\n        <footer>\n          <x-button id=\"ws-install-button\">\n            <x-label>Install from Windows Store</x-label>\n          </x-button>\n\n          <x-button id=\"mas-install-button\">\n            <x-label>Install from Mac App Store</x-label>\n          </x-button>\n\n          <x-button pressed>\n            <x-label>OK</x-label>\n          </x-button>\n        </footer>\n      </x-dialog>\n    </div>\n  ",BXAppElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.commands={preferences:{exec:function(){return e._openPreferencesTab()}},new:{exec:function(){return e._openEditorTab()}},newFromSelected:{enabled:function(){return e._canOpenEditorTabWithArtworkFromSelectedElements()},exec:function(){return e._openEditorTabWithArtworkFromSelectedElements()}},open:{exec:function(){return e._openEditorTabsWithUserSelectedFiles()}},save:{exec:function(){return e._saveCurrentEditorTab()}},saveAs:{exec:function(){return e._saveCurrentEditorTabAs()}},reloadFromDisk:{enabled:function(){return e.currentEditorTab&&null!==e.currentEditorTab[$entry]},exec:function(){return e._reloadCurrentEditorTabFromDisk()}},print:{enabled:function(){return null!==e.currentEditor},exec:function(){return e._print()}},clearRecent:{exec:function(){return e._clearRecentEntries()}},previousTab:{exec:function(){return e._selectPreviousTab()}},nextTab:{exec:function(){return e._selectNextTab()}},moveTabLeft:{exec:function(){return e["#tabs"].moveSelectedTabLeft()}},moveTabRight:{exec:function(){return e["#tabs"].moveSelectedTabRight()}},minimize:{exec:function(){return e._minimize()}},maximize:{exec:function(){return e._maximize()}},close:{exec:function(){return e._closeTab(e.currentTab)}},quit:{exec:function(){return e._quit()}},about:{exec:function(){return e._openAboutTab()}},officialSite:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:"https://boxy-svg.com/"})}},support:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:chromeWebStoreURL+"/support"})}},rate:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:chromeWebStoreURL+"/reviews"})}}},e._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},e._textInputMode=!1,e._config={},e._messageCounter=0,e._messageRequestCallbacks={},e._messageResponseCallbacks={},e._backgroundWindow=null,e._isPointerDown=!1,e._cachedPointerDownEvents=[],e._pointerClientX=0,e._pointerClientY=0,e._pointerClickCount=0,e._initConfig().then(async function(){e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML40;var t=!0,n=!1,a;try{for(var r=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,e["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}e._updateMenubar(),e._updateAccentColor(),window.addEventListener("message",function(t){return e._onMessage(t)}),window.addEventListener("keydown",function(t){return e._onKeyDown(t)}),window.addEventListener("keyup",function(t){return e._onKeyUp(t)}),window.addEventListener("focus",function(t){return e._onFocus(t)}),window.addEventListener("blur",function(t){return e._onBlur(t)}),window.addEventListener("pointerdown",function(t){return e._onPointerDown(t)},!0),window.addEventListener("pointerup",function(t){return e._onPointerUp(t)}),window.addEventListener("pointermove",function(t){return e._onPointerMove(t)}),e.addEventListener("configchange",function(t){return e._onConfigChange(t)}),e.addEventListener("textinputmodestart",function(){return e._onTextInputModeStart()}),e.addEventListener("textinputmodeend",function(){return e._onTextInputModeEnd()}),e._shadowRoot.addEventListener("dragover",function(t){return e._onDragOver(t)}),e._shadowRoot.addEventListener("drop",function(t){return e._onDrop(t)}),e["#titlebar-buttons"].addEventListener("click",function(t){return e._onTitlebarButtonsClick(t)}),e["#header"].addEventListener("pointerdown",function(t){return e._onHeaderPointerDown(t)}),e["#menubar"].addEventListener("click",function(t){return e._onMenubarClick(t)}),e["#menubar"].addEventListener("open",function(t){return e._onMenubarMenuOpen(t)}),e["#menubar"].addEventListener("close",function(t){return e._onMenubarMenuClose(t)}),e["#tabs"].addEventListener("open",function(t){return e._onTabOpen(t)}),e["#tabs"].addEventListener("close",function(t){return e._onTabClose(t)}),e["#tabs"].addEventListener("select",function(t){return e._onTabSelect(t)}),e["#object-grabber"].addEventListener("blur",function(){return e.currentTab[$view].focus()}),e["#color-grabber"].addEventListener("blur",function(){return e.currentTab[$view].focus()}),e["#main"].addEventListener("change",function(t){return e._onEditorChange(t)}),e["#ws-install-button"].addEventListener("click",function(){return chrome.browser.openTab({url:windowsStoreURL})}),e["#mas-install-button"].addEventListener("click",function(){return chrome.browser.openTab({url:macAppStoreURL})}),e.addMessageListener("openTabs",function(t){return e._openEditorTabsWithRetainedEntries(t)}),e.postMessage("ready",null,function(t){return e._onReady(t)}),!1===navigator.userAgent.includes("CrOS")&&(await _sleep14(2e3))}),e}return _inherits(t,e),_createClass(t,[{key:"postMessage",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this._messageCounter++,r={channel:"request",id:a,name:e,arg:t};n&&(this._messageResponseCallbacks[r.id]=n),this._backgroundWindow||(this._backgroundWindow=await _getBackgroundWindow()),this._backgroundWindow.postMessage(r,"*")}},{key:"addMessageListener",value:function(e,t){this._messageRequestCallbacks[e]||(this._messageRequestCallbacks[e]=[]),this._messageRequestCallbacks[e].push(t)}},{key:"removeMessageListener",value:function(e,t){this._messageRequestCallbacks[e]&&(this._messageRequestCallbacks[e]=this._messageRequestCallbacks[e].filter(function(e){return e!==t}))}},{key:"getConfig",value:function(e){var t=null;return void 0!==this._config[e]&&(this._config[e]instanceof Object?t=_cloneObject(this._config[e]):t=this._config[e]),t}},{key:"setConfig",value:function(e,t){var n="!"===e[0]?"local":"sync";null===t?(delete this._config[e],chrome.storage[n].remove(e)):(this._config[e]=t,chrome.storage[n].set(_defineProperty({},e,t))),this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:t}}))}},{key:"clearConfig",value:function(){var e=this._config;this._config={schema:3},chrome.storage.local.clear(),chrome.storage.sync.clear();var t=!0,n=!1,a;try{for(var r=_entries5(e)[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=_slicedToArray(i.value,2),s=o[0],l=o[1];this.dispatchEvent(new CustomEvent("configchange",{detail:{key:s,value:null}}))}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_initConfig",value:function(){var e=this;return new Promise(function(t){var n={};chrome.storage.local.get(null,function(a){chrome.storage.sync.get(null,function(r){var i=!0,o=!1,s;try{for(var l=_entries5(a)[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=_slicedToArray(d.value,2),c=u[0],p=u[1];n[c]=p}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var h=!0,b=!1,x;try{for(var m=_entries5(r)[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var v=_slicedToArray(g.value,2),y=v[0],p=v[1];n[y]=p}}catch(e){b=!0,x=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw x}}3===n.schema?(e._config=n,t()):(e._config={schema:3},chrome.storage.local.clear(function(){chrome.storage.sync.clear(function(){chrome.storage.local.set({schema:3}),t()})}))})})})}},{key:"getClipboardData",value:function(){return new Promise(function(e){var t=function(e){return new Promise(function(t){if("image/png"===e.type){var n=e.getAsFile();if(n){var a=new FileReader;a.readAsDataURL(n),a.addEventListener("load",function(e){"data:"===e.target.result?t(null):t(e.target.result)})}else t(null)}else"text/plain"===e.type||"text/html"===e.type||"image/svg+xml"===e.type?e.getAsString(function(e){t(e)}):(console.warn("Clipboard contains data with unsupported mime-type:",e.type),t(null))})};document.addEventListener("paste",function(n){var a=Array.prototype.slice.call(n.clipboardData.items,0),r={},i=0;a?a.forEach(async function(n){var o=n.type,s=await t(n);s&&(r[o]=s),i+=1,i===a.length&&e(r)}):e(r)},{once:!0}),document.execCommand("paste")})}},{key:"setClipboardData",value:function(e){return new Promise(function(t){var n;document.addEventListener("copy",n=async function(a){document.removeEventListener("copy",n),a.preventDefault(),a.clipboardData.items.clear(),e["text/plain"]&&a.clipboardData.items.add(e["text/plain"],"text/plain"),e["text/html"]&&a.clipboardData.items.add(e["text/html"],"text/html"),t()}),document.execCommand("copy")})}},{key:"showMessageDialog",value:function(e){var t=this;return new Promise(function(n){{var a="",r="",i="";if(void 0!==e.message&&(a="<h3>"+e.message+"</h3>"),void 0!==e.detail&&(r="<p>"+e.detail+"</p>"),e.buttons)for(var o=e.buttons.length-1;0<=o;o-=1)i+="\n                <x-button value=\""+o+"\" "+(0==o?"toggled":"")+">\n                  <x-label>"+e.buttons[o]+"</x-label>\n                </x-button>\n              ";t["#message-box-dialog"].innerHTML="\n            <main>\n              "+a+"\n              "+r+"\n            </main>\n\n            <footer>\n              "+i+"\n            </footer>\n          "}{var s=function(e){t["#message-box-dialog"].opened=!1,t["#message-box-dialog"].removeEventListener("click",l),t["#message-box-dialog"].removeEventListener("close",d),t["#header"].style.zIndex=null,t["#header"].style.pointerEvents=null,t.currentView.focus(),n(e)},l,d;t["#header"].style.zIndex="9999999",t["#header"].style.pointerEvents="none",t["#message-box-dialog"].opened=!0,t["#message-box-dialog"].addEventListener("click",l=function(e){var t=e.target.closest("x-button");if(t){var n=parseInt(t.value);s(n)}}),t["#message-box-dialog"].addEventListener("close",d=function(){s(e.buttons.indexOf("Cancel"))})}})}},{key:"showBitmapExportDialog",value:function(e,t){var n=this;return new Promise(async function(a){var r=null,i=null,o=null,s=null;"jpeg"===t||"jpg"===t?(i="JPEG",o="image/jpeg",s=["jpg","jpeg"]):"png"===t?(i="PNG",o="image/png",s=["png"]):"gif"===t?(i="GIF",o="image/gif",s=["gif"]):"webp"===t&&(i="WebP",o="image/webp",s=["webp"]);try{r=await _chooseEntry({type:"saveFile",suggestedName:"Untitled."+t,acceptsAllTypes:!1,accepts:[{description:i,extensions:s,mimeTypes:[o]}]})}catch(a){r=null;var l=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===l&&(await n.showBitmapExportDialog(e,t))}if(r){var d=_dataURLToBinaryArray(e);try{await _writeEntry(r,d,o)}catch(a){var u=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===u&&(await n.showBitmapExportDialog(e,t))}}a()})}},{key:"showArtworkExportDialog",value:function(e,t){var n=this;return new Promise(async function(a){var r=null,i=null,o=null,s=null;"svg"===t?(i="SVG",o="image/svg+xml",s=["svg"]):"svgz"===t?(i="SVGZ",o="image/svg+xml",s=["svgz"]):"html"===t&&(i="HTML",o="text/html",s=["html"]);try{r=await _chooseEntry({type:"saveFile",suggestedName:"Untitled."+t,acceptsAllTypes:!1,accepts:[{description:i,extensions:s,mimeTypes:[o]}]})}catch(a){r=null;var l=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===l&&(await n.showArtworkExportDialog(e,t))}if(r)try{"svg"===t?await _writeEntry(r,e,"image/svg+xml;charset=utf-8"):"svgz"===t?await _writeEntry(r,_compressArtwork(e),"image/svg+xml;charset=utf-8"):"html"===t&&(await _writeEntry(r,e,"text/html;charset=utf-8"))}catch(a){var d=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===d&&(await n.showArtworkExportDialog(e,t))}a()})}},{key:"showGoogleFontsImportDialog",value:function(){var e=this;return new Promise(function(t){var n=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e["#google-fonts-import-controls"].removeEventListener("add",a),e["#google-fonts-import-controls"].removeEventListener("cancel",r),e["#google-fonts-import-dialog"].removeEventListener("close",i),e["#google-fonts-import-dialog"].opened=!1,e["#google-fonts-import-controls"].enabled=!1,e["#header"].style.zIndex=null,e["#header"].style.pointerEvents=null,e.currentView.focus(),t(n)},a,r,i;e["#header"].style.zIndex="9999999",e["#header"].style.pointerEvents="none",e["#google-fonts-import-dialog"].opened=!0,e["#google-fonts-import-controls"].enabled=!0,e["#google-fonts-import-controls"].addEventListener("add",a=function(e){return n(e.detail)}),e["#google-fonts-import-controls"].addEventListener("cancel",r=function(){return n()}),e["#google-fonts-import-dialog"].addEventListener("close",i=function(){return n()})})}},{key:"showLocalFontsImportDialog",value:function(){return new Promise(async function(e){var t;try{t=await _chooseEntry({type:"openFile",acceptsMultiple:!0,acceptsAllTypes:!1,accepts:[{description:"All Supported Formats",extensions:["woff","woff2","ttf","otf"]},{description:"WOFF",extensions:["woff"]},{description:"WOFF2",extensions:["woff2"]},{description:"TTF",extensions:["ttf"]},{description:"OTF",extensions:["otf"]}]})}catch(t){return void e()}var n=[],a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getEntryBaseName(l),u=_getEntryExtension(l).toLowerCase(),c=l.fullPath,p=await _readEntry(l,"dataURL");p=p.substring(p.indexOf("base64")+7),p="data:application/font-"+u+";charset=utf-8;base64,"+p,n.push({baseName:d,extension:u,path:c,data:p})}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e(n)})}},{key:"_showInstallDialog",value:function(){var e=this,t=function(){e["#install-dialog"].opened=!1,e["#install-dialog"].removeEventListener("click",n),e["#install-dialog"].removeEventListener("close",a),e["#header"].style.zIndex=null,e["#header"].style.pointerEvents=null,e.currentView.focus()},n,a;this["#header"].style.zIndex="9999999",this["#header"].style.pointerEvents="none",this["#install-dialog"].opened=!0,this["#install-dialog"].addEventListener("click",n=function(e){var n=e.target.closest("x-button");n&&t()}),this["#install-dialog"].addEventListener("close",a=function(){return t()})}},{key:"_onReady",value:async function(e){var t=await this._openEditorTabsWithRetainedEntries(e);0===t.length&&this._openEditorTab()}},{key:"_onMessage",value:function(e){var t=e.source,n=e.data,a=n.channel,r=n.id,i=n.name,o=n.arg;"request"===a?this._messageRequestCallbacks[i]&&this._messageRequestCallbacks[i].forEach(function(e){e(o,function(e){t.postMessage({channel:"response",id:r,name:i,arg:e},"*")})}):"response"===a&&this._messageResponseCallbacks[r]&&(this._messageResponseCallbacks[r](o),delete this._messageResponseCallbacks[r])}},{key:"_onKeyDown",value:function(e){var t=_Shortcut22.fromEvent(e),n=!1;(t.ctrl!==this._modKeys.ctrl||t.alt!==this._modKeys.alt||t.meta!==this._modKeys.meta||t.shift!==this._modKeys.shift)&&(this._modKeys={ctrl:t.ctrl,alt:t.alt,meta:t.meta,shift:t.shift},this.dispatchEvent(new CustomEvent("modkeyschange"))),this.textInputMode?(t.ctrl||t.alt||t.meta)&&(n=this._triggerMenubarItemForShortcut(t)):n=this._triggerMenubarItemForShortcut(t),n&&e.preventDefault()}},{key:"_onKeyUp",value:function(e){var t=_Shortcut22.fromEvent(e),n=t.ctrl,a=t.alt,r=t.meta,i=t.shift;(n!==this._modKeys.ctrl||a!==this._modKeys.alt||r!==this._modKeys.meta||i!==this._modKeys.shift)&&(this._modKeys={ctrl:n,alt:a,meta:r,shift:i},this.dispatchEvent(new CustomEvent("modkeyschange")))}},{key:"_onFocus",value:function(){var e=this;window.addEventListener("pointermove",function(t){var n=t.getModifierState("Control"),a=t.getModifierState("Alt"),r=t.getModifierState("Meta"),i=t.getModifierState("Shift"),o=_isAppleDevice2?r:n,s=a,l=_isAppleDevice2?n:r,d=i;(e._modKeys.ctrl!==o||e._modKeys.alt!==s||e._modKeys.meta!==l||e._modKeys.shift!==d)&&(e._modKeys={ctrl:o,alt:s,meta:l,shift:d},e.dispatchEvent(new CustomEvent("modkeyschange")))},{once:!0})}},{key:"_onBlur",value:function(){var e=this._modKeys,t=e.ctrl,n=e.alt,a=e.meta,r=e.shift;(t||n||a||r)&&(this._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},this.dispatchEvent(new CustomEvent("modkeyschange")))}},{key:"_onPointerDown",value:function(e){for(this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,this._cachedPointerDownEvents.push(e);8<this._cachedPointerDownEvents.length;)this._cachedPointerDownEvents.shift();var t=1,n=null,a=!0,r=!1,i;try{for(var o=this._cachedPointerDownEvents[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n&&(l.clientX===n.clientX&&l.clientY===n.clientY&&600>l.timeStamp-n.timeStamp?t+=1:t=1),n=l}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this._pointerClickCount=t,this._isPointerDown=!0}},{key:"_onPointerUp",value:function(){this._isPointerDown=!1}},{key:"_onPointerMove",value:function(e){this._pointerClientX=e.clientX,this._pointerClientY=e.clientY}},{key:"_onDragOver",value:function(e){this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"_onDrop",value:async function(e){if(this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,e.preventDefault(),"bx-editor"===e.target.localName){var t=e.target,n=[],a=[],r=!0,i=!1,o;try{for(var s=e.dataTransfer.items[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.webkitGetAsEntry(),c=_getEntryExtension(u).toLowerCase();if("svg"===c){var p=await _readEntry(u,"text"),h=_importArtwork4(p);n.push(h)}else if("svgz"===c){var b=await _readEntry(u,"arrayBuffer"),x=_uncompressArtwork(b),m=_importArtwork4(x);n.push(m)}else if(["jpeg","jpg","png","webp","gif"].includes(c)){var g=await _readEntry(u,"dataURL");a.push(g)}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(0<n.length||0<a.length){t.canvas.undoManager.checkpoint("Insert files");var v=!0,y=!1,f;try{for(var _=n[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,t.canvas.insertArtwork(k,"pointer")}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=!0,C=!1,S;try{for(var E=a[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,t.canvas.insertBitmap(P,"pointer")}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}}}else{var L=[],D=!0,M=!1,N;try{for(var I=e.dataTransfer.items[Symbol.iterator](),R;!(D=(R=I.next()).done);D=!0){var V=R.value,z=V.webkitGetAsEntry(),G=_getEntryExtension(z).toLowerCase();["svg","svgz"].includes(G)?L.push(z):["jpeg","jpg","png","webp","gif"].includes(G)&&L.push(z)}}catch(e){M=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(M)throw N}}if(0<L.length){var B=L.map(function(e){return{type:"editor",selected:!1,entry:e}});B[B.length-1].selected=!0,this._openTabs(B)}}}},{key:"_onConfigChange",value:function(e){"bx-shortcutseditor:userShortcuts"===e.detail.key?this._updateMenubar():"bx-preferences:accentColor"===e.detail.key&&this._updateAccentColor()}},{key:"_onTextInputModeStart",value:function(){this._textInputMode=!0}},{key:"_onTextInputModeEnd",value:function(){this._textInputMode=!1}},{key:"_onTitlebarButtonsClick",value:function(e){var t=e.target.closest("x-button");"minimize-button"===t.id?this.execCommand("minimize"):"maximize-button"===t.id?this.execCommand("maximize"):"close-button"===t.id&&this.execCommand("quit")}},{key:"_onHeaderPointerDown",value:function(e){!1===this["#menubar"].contains(e.target)&&e.preventDefault()}},{key:"_onMenubarClick",value:async function(e){var t=e.target.closest("x-menuitem");if(t){if(e.isTrusted)await _sleep14(500);else if(!t.closest("[expanded]")){for(var n=null,a=t;a!==this["#menubar"];a=a.parentElement)"x-menuitem"===a.localName&&(n=a);n.style.background="hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))",n.style.color="white",_sleep14(150).then(function(){n.style.background=null,n.style.color=null})}if(t.value)this.execCommand(t.value);else if(t.id&&t.id.startsWith("open-recent-")){var r=t.id.substring(12),i=await _restoreEntry(r);i&&(this._openEditorTab(i,!0),this._addRecentEntries([i]))}}}},{key:"_onTabOpen",value:function(e){e.preventDefault(),this._openEditorTab()}},{key:"_onTabClose",value:function(e){e.preventDefault();var t=e.target;this._closeTab(t)}},{key:"_onTabSelect",value:function(){this._toggleTabView(this.currentTab)}},{key:"_onEditorChange",value:function(e){var t=e.target,n=e.detail,a=[].concat(_toConsumableArray(this["#tabs"].children)).find(function(e){return e[$view]===t}),r=a[$changeCounter];"increment"===n?a[$changeCounter]+=1:"decrement"===n?a[$changeCounter]-=1:"reset"===n&&(a[$changeCounter]=0),0!==r!=(0!==a[$changeCounter])&&(a.edited=0!==a[$changeCounter])}},{key:"_onMenubarMenuOpen",value:function(e){var t=e.target;this._updateMenubarMenu(t)}},{key:"_onMenubarMenuClose",value:async function(){await _sleep14(500),null===this["#menubar"].querySelector("x-menu[opened]")&&this.currentView.focus()}},{key:"_openTabs",value:function(e){var t=this;return new Promise(async function(n){var a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"about"===d.type){var u=t._openAboutTab(!1);d.selected&&(u.selected=!0),a.push(u)}else if("preferences"===d.type){var c=t._openPreferencesTab(!1);d.selected&&(c.selected=!0),a.push(c)}else if("editor"===d.type){var p=await t._openEditorTab(d.entry,!1);d.selected&&(p.selected=!0),a.push(p)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(0<a.length){var h=a.find(function(e){return e.selected}),b=a[a.length-1];t._toggleTabView(h||b)}n(a)})}},{key:"_openAboutTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=null,n=!0,a=!1,r;try{for(var i=this["#tabs"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"about"===s[$type]){t=s;break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return null===t&&(t=_html44(_templateObject62),t[$type]="about",t[$view]=null,t[$createView]=function(){var e=_html44(_templateObject63);return t[$view]=e,e.version=chrome.runtime.getManifest().version,e},this["#tabs"].openTab(t,!1)),e&&this._toggleTabView(t),t}},{key:"_openPreferencesTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=null,n=!0,a=!1,r;try{for(var i=this["#tabs"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"preferences"===s[$type]){t=s;break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return null===t&&(t=_html44(_templateObject64),t[$type]="preferences",t[$view]=null,t[$createView]=function(){var e=_html44(_templateObject65);return t[$view]=e,e},this["#tabs"].openTab(t,!1)),e&&this._toggleTabView(t),t}},{key:"_openEditorTab",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return new Promise(async function(a){var r=null;if(t){var i=!0,o=!1,s;try{for(var l=e["#tabs"].children[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=!!u[$entry]&&(await _compareEntries(u[$entry],t));if(c){r=u;break}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}if(null===r){var p=t?_getEntryBaseName(t):"Untitled",h=t?_getEntryExtension(t).toLowerCase():"svg",b=t?p+"."+h:p;r=_html44(_templateObject66,b),r[$type]="editor",r[$entry]=t,r[$view]=null,r[$changeCounter]=0,r.edited=0!==r[$changeCounter],r[$createView]=function(){var e=_html44(_templateObject67);return r[$view]=e,async function(){if(!t)e.canvas.setDefaultArtwork();else if("svg"===h){var n=await _readEntry(t,"text"),a=_importArtwork4(n);e.canvas.setArtwork(a)}else if("svgz"===h){var r=await _readEntry(t,"arrayBuffer"),i=_uncompressArtwork(r),o=_importArtwork4(i);e.canvas.setArtwork(o)}else if(["jpeg","jpg","png","webp","gif"].includes(h)){var s=await _readEntry(t,"dataURL"),l=await _createArtworkFromBitmapDataURL(s),d=_importArtwork4(l);e.canvas.setArtwork(d)}}(),e},e["#tabs"].openTab(r,!1),await _whenIdle}n&&(null===t&&(await _sleep14(100)),e._toggleTabView(r)),a(r)})}},{key:"_openEditorTabWithArtworkFromSelectedElements",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if(this._canOpenEditorTabWithArtworkFromSelectedElements()){this.currentEditor.canvas.removeUnusedDefs();var t=this.currentEditor.canvas.extractArtworkWithSelectedElements(),n=_exportArtwork4(t,"xml"),a=_html44(_templateObject68);a[$type]="editor",a[$entry]=null,a[$view]=null,a[$changeCounter]=1,a.edited=!0,a[$createView]=function(){var e=_html44(_templateObject67);return e.canvas.setArtwork(_importArtwork4(n)),a[$view]=e,e},this["#tabs"].openTab(a),e&&this._toggleTabView(a)}}},{key:"_canOpenEditorTabWithArtworkFromSelectedElements",value:function(){return null!==this.currentEditor&&0<this.currentEditor.canvas.selectedElements.length}},{key:"openEditorTabWithArtworkFromOpenClipArtLibrary",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return new Promise(async function(a){var r=_html44(_templateObject68);r[$type]="editor",r[$entry]=null,r[$view]=null,r[$changeCounter]=1,r.edited=!0,r[$createView]=function(){var t=_html44(_templateObject67);return t.canvas.setArtwork(_importArtwork4(e)),r[$view]=t,t},t["#tabs"].openTab(r),n&&(await _sleep14(200),t._toggleTabView(r)),a()})}},{key:"_openEditorTabsWithUserSelectedFiles",value:function(){var e=this;return new Promise(async function(t){var n;try{n=await _chooseEntry({type:"openFile",acceptsMultiple:!0,acceptsAllTypes:!1,accepts:[{description:"All Supported Formats",extensions:["svg","svgz","png","jpg","jpeg","gif","webp"]},{description:"SVG",mimeTypes:["image/svg+xml"],extensions:["svg"]},{description:"SVGZ",mimeTypes:["image/svg+xml"],extensions:["svgz"]},{description:"PNG",mimeTypes:["image/png"],extensions:["png"]},{description:"JPEG",mimeTypes:["image/jpeg"],extensions:["jpg","jpeg"]},{description:"GIF",mimeTypes:["image/gif"],extensions:["gif"]},{description:"WebP",mimeTypes:["image/webp"],extensions:["webp"]}]})}catch(e){return void t()}if(0<n.length){var a=n.map(function(e){return{type:"editor",entry:e,selected:!1}});a[a.length-1].selected=!0,e._openTabs(a),await e._addRecentEntries(n)}t()})}},{key:"_openEditorTabsWithRetainedEntries",value:function(e){var t=this;return new Promise(async function(n){var a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=await _restoreEntry(d);u&&a.push(u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var c=a.map(function(e){return{type:"editor",entry:e,selected:!1}});0<c.length&&(c[c.length-1].selected=!0);var p=await t._openTabs(c);n(p)})}},{key:"_toggleTabView",value:async function(e){var t=[].concat(_toConsumableArray(this["#tabs"].children)),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.selected=s===e}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var l=e[$view]?e[$view]:e[$createView](),d=Symbol();if(this._$toggleTabView=d,l.hidden=!0,!1===this["#main"].contains(l)&&(this["#main"].append(l),await _sleep14(100)),await _whenIdle,this._$toggleTabView===d){l.hidden=!1,l.focus();for(var u=[].concat(_toConsumableArray(this["#main"].children)),c=0,p;c<u.length;c++)p=u[c],p!==l&&(p.remove(),p.hidden=!0)}}},{key:"_selectPreviousTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this["#tabs"].selectPreviousTab();t&&e&&this._toggleTabView(t)}},{key:"_selectNextTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this["#tabs"].selectNextTab();t&&e&&this._toggleTabView(t)}},{key:"_saveCurrentEditorTab",value:function(){var e=this;return new Promise(async function(t){var n=!1;e.currentEditorTab&&(n=await e._saveEditorTab(e.currentEditorTab)),t(n)})}},{key:"_saveCurrentEditorTabAs",value:function(){var e=this;return new Promise(async function(t){var n=!1;e.currentEditorTab&&(n=await e._saveEditorTabAs(e.currentEditorTab)),t(n)})}},{key:"_saveEditorTab",value:function(e){var t=this;return new Promise(async function(n){if(e.edited||null===e[$entry])if(null===e[$entry]){var a=await t._saveCurrentEditorTabAs();n(a)}else{var r=e[$view],i=e[$entry],o=r.canvas.extractArtwork(),s=_getEntryExtension(i).toLowerCase(),l=null;if("svg"===s){var d=_exportArtwork4(o);try{await _writeEntry(i,d,"image/svg+xml;charset=utf-8")}catch(e){l=e}}else if("svgz"===s){var u=_exportArtwork4(o),c=c(u);try{await _writeEntry(i,c,"image/svg+xml;charset=utf-8")}catch(e){l=e}}else if(["jpeg","jpg","png","webp","gif"].includes(s)){var p="jpg"===s?"image/jpeg":"image/"+s,h=_exportArtwork4(o,"html"),b=await _rasterizeArtwork3(h,s),x=_dataURLToBinaryArray(b);try{await _writeEntry(i,x,p)}catch(e){l=e}}if(!l)e[$changeCounter]=0,e.edited=!1,n(!0);else if("READ_ONLY"===l){var m=await t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"The file \""+i.name+"\" is read-only."});if(0===m)n(!1);else if(1===m){var g=await t._saveCurrentEditorTabAs();n(g)}}else{var v=await t._saveCurrentEditorTabAs();n(v)}}})}},{key:"_saveEditorTabAs",value:function(e){var t=this;return new Promise(async function(n){var a=null;try{a=await _chooseEntry({type:"saveFile",suggestedName:e[$entry]?e[$entry].name:"Untitled.svg",acceptsAllTypes:!1,accepts:[{description:"SVG",mimeTypes:["image/svg+xml"],extensions:["svg"]},{description:"SVGZ",mimeTypes:["image/svg+xml"],extensions:["svgz"]},{description:"PNG",mimeTypes:["image/png"],extensions:["png"]},{description:"JPEG",mimeTypes:["image/jpeg"],extensions:["jpg","jpeg"]},{description:"GIF",mimeTypes:["image/gif"],extensions:["gif"]},{description:"WebP",mimeTypes:["image/webp"],extensions:["webp"]}]})}catch(e){var r=await t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"Selected directory is read-only."});if(0===r)return void n(!1);var i=await t._saveCurrentEditorTabAs();return void n(i)}if(null===a)n(!1);else{var o=e[$view],s=o.canvas.extractArtwork(),l=_getEntryExtension(a).toLowerCase(),d=null;if("svg"===l){var u=_exportArtwork4(s);try{await _writeEntry(a,u,"image/svg+xml;charset=utf-8")}catch(e){d=e}}else if("svgz"===l){var c=_exportArtwork4(s),p=p(c);try{await _writeEntry(a,p,"image/svg+xml;charset=utf-8")}catch(e){d=e}}else if(["jpeg","jpg","png","webp","gif"].includes(l)){var h="jpg"===l?"image/jpeg":"image/"+l,b=_exportArtwork4(s,"html"),x=await _rasterizeArtwork3(b,l),m=_dataURLToBinaryArray(x);try{await _writeEntry(a,m,h)}catch(e){d=e}}if(!d)e[$entry]=a,e[$changeCounter]=0,e.edited=!1,e.querySelector("x-label").textContent=a.name,t._addRecentEntries([a]),n(!0);else if("READ_ONLY"===d){var g=await t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"Chosen location is read-only."});if(0===g)n(!1);else if(1===g){var v=await t._saveCurrentEditorTabAs();n(v)}}else{var y=await t._saveCurrentEditorTabAs();n(y)}}})}},{key:"_closeTab",value:function(e){var t=this;return new Promise(async function(n){if(e.edited){var a=e[$entry]?"\""+e[$entry].name+"\"":"untitled",r=await t.showMessageDialog({type:"question",buttons:["Save","Cancel","Don't Save"],title:"Confirm",message:"Do you want to save the changes you made to "+a+" file?",detail:"Your changes will be lost if you don't save them."});if(0===r){var i=await t._saveEditorTab(e);if(!1===i)return void n(!1)}else if(1===r)return void n(!1)}var o=e[$view],s=e.selected;t["#tabs"].closeTab(e,!1),s&&t.currentTab&&t._toggleTabView(t.currentTab),o&&(1===t["#main"].childElementCount?o.remove():_sleep14(3e3).then(function(){o.remove()})),n(!0)})}},{key:"_closeTabs",value:function(){var e=this;return new Promise(async function(t){var n=[].concat(_toConsumableArray(e["#tabs"].children)),a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,l!==n[0]&&(await _sleep14(1e3));var d=await e._closeTab(l,!1);if(!1===d)return void t(!1)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}t(!0)})}},{key:"_reloadCurrentEditorTabFromDisk",value:async function(){if(this.currentEditor&&this.currentTab[$entry]){var e=this.currentEditor,t=this.currentTab[$entry],n=_getEntryExtension(t).toLowerCase();if("svg"===n){var a=await _readEntry(t,"text"),r=_importArtwork4(a);e.canvas.setArtwork(r)}else if("svgz"===n){var i=await _readEntry(t,"arrayBuffer"),o=_uncompressArtwork(i),s=_importArtwork4(o);e.canvas.setArtwork(s)}else if(["jpeg","jpg","png","webp","gif"].includes(n)){var l=await _readEntry(t,"dataURL"),d=await _createArtworkFromBitmapDataURL(l),u=_importArtwork4(d);e.canvas.setArtwork(u)}}}},{key:"_print",value:async function(){await _sleep14(300);var e=this.currentEditor.canvas.extractArtwork(),t=this.currentTab;{var n=e.querySelector(":scope > title");n||(n=_createElement39("svg:title"),e.append(n)),n.textContent=t[$entry]?_getEntryBaseName(t[$entry]):"Untitled"}var a=_exportArtwork4(e),r="data:image/svg+xml;base64,"+window.btoa(a),i=_html44(_templateObject69,r);i.addEventListener("loadstop",function(){return i.print()}),this._shadowRoot.append(i)}},{key:"_getTabsDesccriptors",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this["#tabs"].getTabsByScreenIndex()[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s={type:o[$type],path:o[$path],selected:o.selected};e.push(s)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"_quit",value:async function(){var e=await this._closeTabs();e&&chrome.app.window.current().close()}},{key:"isPointOverHeader",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);return n&&n.closest("#header")}},{key:"openDevTools",value:function(){this.postMessage("openDevTools",null)}},{key:"_maximize",value:function(){chrome.app.window.current().isMaximized()?chrome.app.window.current().restore():chrome.app.window.current().maximize()}},{key:"_minimize",value:function(){chrome.app.window.current().minimize()}},{key:"_addRecentEntries",value:function(e){var t=this;return new Promise(async function(n){0===e.length?n():await async function(){var a=[],r=Symbol(),i=!0,o=!1,s;try{for(var l=(await t._getRetainedRecentEntries())[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=await _restoreEntry(u);if(c){var p=await _getEntryDisplayPath(c);c[r]=p,a.push(c)}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var h=!0,b=!1,x;try{for(var m=async function(){var e=v.value,t=_getEntryExtension(e).toLowerCase();("svg"===t||"svgz"===t||"html"===t)&&(e[r]=await _getEntryDisplayPath(e),a=a.filter(function(t){return t[r]!==e[r]}),a.push(e))},g=e[Symbol.iterator](),v;!(h=(v=g.next()).done);h=!0)await m()}catch(e){b=!0,x=e}finally{try{!h&&g.return&&g.return()}finally{if(b)throw x}}for(;a.length>maxRecentEntries;)a.shift();var y=a.map(function(e){return chrome.fileSystem.retainEntry(e)});t.setConfig("!bx-chromeapp:retainedRecentEntries",y),n()}()})}},{key:"_getRetainedRecentEntries",value:function(){var e=this;return new Promise(async function(t){var n=e.getConfig("!bx-chromeapp:retainedRecentEntries")||[];t(n)})}},{key:"_clearRecentEntries",value:function(){this.setConfig("!bx-chromeapp:retainedRecentEntries",null)}},{key:"execCommand",value:function(e){for(var t=this.currentView||this;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var a=n.commands[e];if(a){(!a.enabled||a.enabled())&&a.exec();break}}}},{key:"isCommandEnabled",value:function(e){for(var t=this.currentView||this;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var a=n.commands[e];if(a){if(!a.enabled||a.enabled())return!0;break}}return!1}},{key:"getShortcutsEditorModel",value:function(){var e=this;return new Promise(function(t){var n=[],a=!0,r=!1,i;try{for(var o=e["#menubar"].querySelectorAll("x-menuitem")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.value){var d=l.querySelector("x-label").textContent,u=l.value,c=null,p=l.querySelector(":scope > x-shortcut");p&&(c=_Shortcut22.fromElement(p).toString());for(var h=l.parentElement;h!==e["#menubar"];h=h.parentElement)if("x-menuitem"===h.localName){var b=h.querySelector(":scope > x-label").textContent;d=b+" \u2023 "+d}n.push({label:d,commandID:u,defaultShortcut:c})}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}t(n)})}},{key:"_triggerMenubarItemForShortcut",value:function(e){var t=!1;if(null!==e.normalKey){var n=e.toString(),a=null,r=this["#menubar"].querySelector("x-shortcut.user-shortcut[value=\""+n+"\"]");if(r)a=r.closest("x-menuitem");else{var i=this["#menubar"].querySelector("x-shortcut.default-shortcut[value=\""+n+"\"]");i&&null===i.nextElementSibling.normalKey&&(a=i.closest("x-menuitem"))}if(a){var o=a.value;this.isCommandEnabled(o)&&(a.click(),t=!0)}}return t}},{key:"updateMenuItemsCheckedState",value:function(){}},{key:"_updateMenubar",value:function(){var e=!0,t=!1,n;try{for(var a=this["#menubar"].querySelectorAll("x-menu")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateMenubarMenu(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateMenubarMenu",value:function(e){if(e!==this["#open-recent-menu"]){var t=this.getConfig("bx-shortcutseditor:userShortcuts")||{},n=[].concat(_toConsumableArray(e.children)).filter(function(e){return"x-menuitem"===e.localName}),a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.value&&!1===l.value.startsWith("open-recent")?l.value:null;if(d&&(l.disabled=!1===this.isCommandEnabled(d)),d)if("inspector"===d)l.selected=null!==this.currentEditor&&this.currentEditor.inspector.enabled;else if("manualGuides"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showManualGuides;else if("smartGuides"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showSmartGuides;else if(d.endsWith("Tool")){var u=this.currentEditor?_toCamelCase3(this.currentEditor.toolsDock.value||""):"";l.selected=u===d}else if(d.endsWith("Panel")){var c=this.currentEditor?_toCamelCase3(this.currentEditor.panelsDock.value||""):"";l.selected=c===d}else"maximize"===d&&(l.selected=chrome.app.window.current().isMaximized());if(d){var p=l.querySelector(":scope > x-shortcut.default-shortcut"),h=l.querySelector(":scope > x-shortcut.user-shortcut");void 0===t[d]?(p.hidden=!1,h.hidden=!0,h.removeAttribute("value")):(p.hidden=!0,h.hidden=!1,h.setAttribute("value",t[d]))}"open-recent-menu-item"===l.id&&this._updateOpenRecentMenu()}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}}},{key:"_updateOpenRecentMenu",value:function(){var e=this;return new Promise(async function(t){var n=await e._getRetainedRecentEntries(),a="",r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=await _restoreEntry(d);u&&(a+="\n              <x-menuitem id=\"open-recent-"+d+"\">\n                <x-label>"+u.name+"</x-label>\n              </x-menuitem>\n            ")}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}""==a?(e["#open-recent-menu"].innerHTML=a,e["#open-recent-menu-item"].disabled=!0):(a+="\n            <hr/>\n\n            <x-menuitem value=\"clearRecent\">\n              <x-label>Clear Recent</x-label>\n            </x-menuitem>\n          ",e["#open-recent-menu"].innerHTML=a,e["#open-recent-menu-item"].disabled=!1),t()})}},{key:"_updateAccentColor",value:function(){var e=this.getConfig("bx-preferences:accentColor");if(null!==e){var t=_parseColor10(e,"hsla"),n=_slicedToArray(t,3),a=n[0],r=n[1],i=n[2];document.body.style.setProperty("--accent-color-h",a),document.body.style.setProperty("--accent-color-s",r+"%"),document.body.style.setProperty("--accent-color-l",i+"%")}}},{key:"currentTab",get:function(){return this["#tabs"].querySelector("x-doctab[selected]")}},{key:"currentEditorTab",get:function(){var e=this.currentTab;return e&&"editor"===e[$type]?e:null}},{key:"currentEditor",get:function(){return this.currentEditorTab?this.currentEditorTab[$view]:null}},{key:"currentView",get:function(){return this.currentTab?this.currentTab[$view]:null}},{key:"colorGrabber",get:function(){return this["#color-grabber"]}},{key:"objectGrabber",get:function(){return this["#object-grabber"]}},{key:"textInputMode",get:function(){return this._textInputMode}},{key:"modKeys",get:function(){var e=this._modKeys,t=e.ctrl,n=e.alt,a=e.meta,r=e.shift;return{ctrl:t,alt:n,meta:a,shift:r}}},{key:"pointerClientPoint",get:function(){return new SVGPoint(this._pointerClientX,this._pointerClientY)}},{key:"pointerClickCount",get:function(){return this._pointerClickCount}},{key:"isPointerDown",get:function(){return this._isPointerDown}},{key:"hardwareAcceleration",get:function(){return new Promise(function(e){return e(!0)})},set:function(){}}]),t}(_CustomElement);customElements.define("bx-chromeapp",BXAppElement)}}})()