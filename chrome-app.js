(function() {"use strict";var _get=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(a)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s;!(a=(s=i.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(e){r=!0,o=e}finally{try{!a&&i["return"]&&i["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_templateObject=_taggedTemplateLiteral(["<div style=\"width: 0px; height: 0px; display: none; contain: strict;\"></div>"],["<div style=\"width: 0px; height: 0px; display: none; contain: strict;\"></div>"]),_templateObject2=_taggedTemplateLiteral(["<g data-bx-artboard=\"master\"></g>"],["<g data-bx-artboard=\"master\"></g>"]),_templateObject3=_taggedTemplateLiteral(["<g data-bx-artboard=\"symbol\">","</g>"],["<g data-bx-artboard=\"symbol\">","</g>"]),_templateObject4=_taggedTemplateLiteral(["<g data-bx-artboard=\"pattern\">","</g>"],["<g data-bx-artboard=\"pattern\">","</g>"]),_templateObject5=_taggedTemplateLiteral(["",""],["",""]),_templateObject6=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <div class=\"item-inner\">\n                <svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"15px\" height=\"15px\">\n                  <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n\n                <div class=\"label\">","</div>\n              </div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <div class=\"item-inner\">\n                <svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"15px\" height=\"15px\">\n                  <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n\n                <div class=\"label\">","</div>\n              </div>\n            </div>\n          "]),_templateObject7=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #new-button{margin:0 0 0 8px}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Symbols</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No symbols found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"new-button\" skin=\"flat-condensed\" title=\"New symbol\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #new-button{margin:0 0 0 8px}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Symbols</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No symbols found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"new-button\" skin=\"flat-condensed\" title=\"New symbol\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject8=_taggedTemplateLiteral(["\n          <div class=\"item\">\n            <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n          </div>\n        "],["\n          <div class=\"item\">\n            <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n          </div>\n        "]),_templateObject9=_taggedTemplateLiteral(["<x-input value=\"","\" instantvalidation><x-label hidden>","</x-label></x-input>"],["<x-input value=\"","\" instantvalidation><x-label hidden>","</x-label></x-input>"]),_templateObject10=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "]),_templateObject11=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #new-button{margin:0 0 0 8px}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Patterns</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No patterns found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"new-button\" skin=\"flat-condensed\" title=\"New pattern\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #new-button{margin:0 0 0 8px}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Patterns</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No patterns found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"new-button\" skin=\"flat-condensed\" title=\"New pattern\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject12=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                ","\n                <rect width=\"100\" height=\"100\" style=\"fill: url(#",")\"></rect>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                ","\n                <rect width=\"100\" height=\"100\" style=\"fill: url(#",")\"></rect>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "]),_templateObject13=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{background:#6a9ce8}#items{width:100%;height:100%;box-sizing:border-box}.family-item{width:100%;position:relative;z-index:0}.family-item>.background{position:absolute;top:0;left:0;width:100%;height:38px;z-index:-1}.family-item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.family-item>.main{position:relative;z-index:1;display:flex;height:38px;align-items:center;box-sizing:border-box;padding-right:10px}.family-item[data-selected]>.main,.family-item[data-selected]>.main>.label{color:#fff}.family-item>.main>.label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:24px;font-weight:400}.font-items-outer{overflow:hidden}.font-items{transform-origin:0 0}#drop-marker[hidden],.family-item x-input x-label[hidden],.font-items[hidden]{display:none}.font-item{padding:0 28px 0 42px}.font-item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.family-item x-input{outline:0;border:0;flex:1;font-size:13px}.family-item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:5px;color:#d20f0f;z-index:100;pointer-events:none}.family-item>.main>.arrow-button{width:27px;min-width:27px;height:20px;display:flex;align-items:center;justify-content:center}.family-item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.family-item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.family-item path{fill:currentColor}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{position:absolute;z-index:100;display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;pointer-events:none;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input,.family-item x-input{width:100%;max-width:none}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Fonts</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No fonts found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-menu>\n                <x-menuitem id=\"add-from-disk-menu-item\">\n                  <x-label>Add from disk...</x-label>\n                </x-menuitem>\n\n                <x-menuitem id=\"add-from-google-fonts-menu-item\">\n                  <x-label>Add from Google Fonts...</x-label>\n                </x-menuitem>\n              </x-menu>\n\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{background:#6a9ce8}#items{width:100%;height:100%;box-sizing:border-box}.family-item{width:100%;position:relative;z-index:0}.family-item>.background{position:absolute;top:0;left:0;width:100%;height:38px;z-index:-1}.family-item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.family-item>.main{position:relative;z-index:1;display:flex;height:38px;align-items:center;box-sizing:border-box;padding-right:10px}.family-item[data-selected]>.main,.family-item[data-selected]>.main>.label{color:#fff}.family-item>.main>.label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:24px;font-weight:400}.font-items-outer{overflow:hidden}.font-items{transform-origin:0 0}#drop-marker[hidden],.family-item x-input x-label[hidden],.font-items[hidden]{display:none}.font-item{padding:0 28px 0 42px}.font-item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.family-item x-input{outline:0;border:0;flex:1;font-size:13px}.family-item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:5px;color:#d20f0f;z-index:100;pointer-events:none}.family-item>.main>.arrow-button{width:27px;min-width:27px;height:20px;display:flex;align-items:center;justify-content:center}.family-item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.family-item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.family-item path{fill:currentColor}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{position:absolute;z-index:100;display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;pointer-events:none;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input,.family-item x-input{width:100%;max-width:none}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Fonts</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No fonts found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-menu>\n                <x-menuitem id=\"add-from-disk-menu-item\">\n                  <x-label>Add from disk...</x-label>\n                </x-menuitem>\n\n                <x-menuitem id=\"add-from-google-fonts-menu-item\">\n                  <x-label>Add from Google Fonts...</x-label>\n                </x-menuitem>\n              </x-menu>\n\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject14=_taggedTemplateLiteral(["\n            <div class=\"family-item item\" data-family=\"","\">\n              <div class=\"background\"></div>\n\n              <div class=\"main\">\n                <div class=\"arrow-button\">\n                  <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                    <path d=\"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z\"/>\n                  </svg>\n                </div>\n\n                <div class=\"label\" style=\"font-family: '","'\">","</div>\n              </div>\n\n              <div class=\"font-items-outer\">\n                <div class=\"font-items\" hidden></div>\n              </div>\n            </div>\n          "],["\n            <div class=\"family-item item\" data-family=\"","\">\n              <div class=\"background\"></div>\n\n              <div class=\"main\">\n                <div class=\"arrow-button\">\n                  <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                    <path d=\"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z\"/>\n                  </svg>\n                </div>\n\n                <div class=\"label\" style=\"font-family: '","'\">","</div>\n              </div>\n\n              <div class=\"font-items-outer\">\n                <div class=\"font-items\" hidden></div>\n              </div>\n            </div>\n          "]),_templateObject15=_taggedTemplateLiteral(["\n              <div class=\"font-item item\">\n                <div class=\"label\" style=\"","\">","</div>\n              </div>\n            "],["\n              <div class=\"font-item item\">\n                <div class=\"label\" style=\"","\">","</div>\n              </div>\n            "]),_templateObject16=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;padding:4px;box-sizing:border-box;display:flex;flex-flow:column;outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}#items,#items .item{box-sizing:border-box}#items{overflow-x:hidden;overflow-y:auto;background:#fff;border:1px solid #bfbfbf;contain:size layout style paint;width:100%;height:100%}#items #items-inner{display:flex;flex-wrap:wrap;flex-flow:column wrap;max-height:6825px}#items .item{width:180px;height:25px;display:block;padding:0 6px;opacity:.75;overflow:hidden;background:0 0;filter:invert();-webkit-user-drag:none}#items #placeholder[hidden],#items .item[hidden]{display:none}#items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#items #placeholder{display:flex;align-items:center;justify-content:center;height:100%;padding:0 0 0 7px;font-size:12px;opacity:.6}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}#buttons{padding:12px;display:flex;flex-flow:row;justify-content:flex-end;margin-top:auto}#buttons x-button{margin-left:8px}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"placeholder\" hidden>No families found.</div>\n          <div id=\"items-inner\"></div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n\n        <div id=\"buttons\">\n          <x-button id=\"cancel-button\">\n            <x-label>Cancel</x-label>\n          </x-button>\n\n          <x-button id=\"add-button\" disabled toggled>\n            <x-label>Add</x-label>\n          </x-button>\n        </div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;padding:4px;box-sizing:border-box;display:flex;flex-flow:column;outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}#items,#items .item{box-sizing:border-box}#items{overflow-x:hidden;overflow-y:auto;background:#fff;border:1px solid #bfbfbf;contain:size layout style paint;width:100%;height:100%}#items #items-inner{display:flex;flex-wrap:wrap;flex-flow:column wrap;max-height:6825px}#items .item{width:180px;height:25px;display:block;padding:0 6px;opacity:.75;overflow:hidden;background:0 0;filter:invert();-webkit-user-drag:none}#items #placeholder[hidden],#items .item[hidden]{display:none}#items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#items #placeholder{display:flex;align-items:center;justify-content:center;height:100%;padding:0 0 0 7px;font-size:12px;opacity:.6}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}#buttons{padding:12px;display:flex;flex-flow:row;justify-content:flex-end;margin-top:auto}#buttons x-button{margin-left:8px}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"placeholder\" hidden>No families found.</div>\n          <div id=\"items-inner\"></div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n\n        <div id=\"buttons\">\n          <x-button id=\"cancel-button\">\n            <x-label>Cancel</x-label>\n          </x-button>\n\n          <x-button id=\"add-button\" disabled toggled>\n            <x-label>Add</x-label>\n          </x-button>\n        </div>\n      </main>\n    </template>\n  "]),_templateObject17=_taggedTemplateLiteral(["\n  <template>\n    <style>:host{width:100%;height:100%;display:none;position:fixed;top:0;left:0;z-index:99999999}:host([enabled]),:host([enabled]) #overlay{display:block}#overlay{display:none;position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#html-canvas{position:absolute}#lens{width:100px;height:100px;position:fixed;top:-200px;left:-200px;border:4px solid #333;box-shadow:2px 6px 20px rgba(0,0,0,.3);border-radius:100px;overflow:hidden}#lens-inner,#warning{position:relative;width:100%;height:100%}#warning{position:absolute;left:0;top:0;display:flex;flex-flow:column;align-items:center;justify-content:center;visibility:hidden}#warning[hidden]{display:none}#lens[offscreen] #warning{visibility:visible}#warning p{line-height:1;padding:0;margin:0}#grid{width:100px;height:100px;background:#d4d4d4}#center-rect{stroke:red;stroke-width:1.5}#lens[offscreen] #center-rect{stroke-width:0}</style>\n\n    <main>\n      <div id=\"overlay\">\n        <canvas id=\"html-canvas\"></canvas>\n      </div>\n\n      <div id=\"lens\">\n        <div id=\"lens-inner\">\n          <svg id=\"grid\"></svg>\n          <div id=\"warning\">\n            <p>Move</p>\n            <p>cursor</p>\n            <p>over</p>\n            <p>canvas</p>\n          </div>\n        </div>\n      </div>\n    </main>\n  </template>\n"],["\n  <template>\n    <style>:host{width:100%;height:100%;display:none;position:fixed;top:0;left:0;z-index:99999999}:host([enabled]),:host([enabled]) #overlay{display:block}#overlay{display:none;position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#html-canvas{position:absolute}#lens{width:100px;height:100px;position:fixed;top:-200px;left:-200px;border:4px solid #333;box-shadow:2px 6px 20px rgba(0,0,0,.3);border-radius:100px;overflow:hidden}#lens-inner,#warning{position:relative;width:100%;height:100%}#warning{position:absolute;left:0;top:0;display:flex;flex-flow:column;align-items:center;justify-content:center;visibility:hidden}#warning[hidden]{display:none}#lens[offscreen] #warning{visibility:visible}#warning p{line-height:1;padding:0;margin:0}#grid{width:100px;height:100px;background:#d4d4d4}#center-rect{stroke:red;stroke-width:1.5}#lens[offscreen] #center-rect{stroke-width:0}</style>\n\n    <main>\n      <div id=\"overlay\">\n        <canvas id=\"html-canvas\"></canvas>\n      </div>\n\n      <div id=\"lens\">\n        <div id=\"lens-inner\">\n          <svg id=\"grid\"></svg>\n          <div id=\"warning\">\n            <p>Move</p>\n            <p>cursor</p>\n            <p>over</p>\n            <p>canvas</p>\n          </div>\n        </div>\n      </div>\n    </main>\n  </template>\n"]),_templateObject18=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;padding:4px;box-sizing:border-box}:host(:focus){outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}h4{margin:0;padding:5px;background:#f2f2f2;border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3;text-transform:uppercase;font-size:11px}#items{width:100%;flex:1;overflow:auto;contain:strict;box-sizing:border-box;background:#fff;border:1px solid #bfbfbf}#embedded-items-heading{border-top:none}#embedded-items .item{padding:3px 6px;height:28px;display:flex;align-items:center;box-sizing:border-box}#embedded-items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#embedded-items .item[hidden]{display:none}#embedded-items .item .label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:20px}#embedded-items-placeholder,#google-fonts-items-placeholder{padding:5px 7px;font-size:12px;opacity:.6}#google-fonts-items .item{width:182px;height:25px;overflow:hidden;display:block;box-sizing:border-box;padding:0 6px;opacity:.75;background:0 0;-webkit-user-drag:none;filter:invert()}#google-fonts-items .item[hidden]{display:none}#google-fonts-items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"embedded-items-container\">\n            <h4  id=\"embedded-items-heading\">Embedded fonts</h4>\n            <div id=\"embedded-items\"></div>\n            <div id=\"embedded-items-placeholder\" hidden>No families found.</div>\n          </div>\n\n          <div id=\"google-fonts-items-contaner\">\n            <h4  id=\"google-fonts-items-heading\">Google fonts</h4>\n            <div id=\"google-fonts-items\"></div>\n            <div id=\"google-fonts-items-placeholder\" hidden>No families found.</div>\n          </div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;padding:4px;box-sizing:border-box}:host(:focus){outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}h4{margin:0;padding:5px;background:#f2f2f2;border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3;text-transform:uppercase;font-size:11px}#items{width:100%;flex:1;overflow:auto;contain:strict;box-sizing:border-box;background:#fff;border:1px solid #bfbfbf}#embedded-items-heading{border-top:none}#embedded-items .item{padding:3px 6px;height:28px;display:flex;align-items:center;box-sizing:border-box}#embedded-items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#embedded-items .item[hidden]{display:none}#embedded-items .item .label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:20px}#embedded-items-placeholder,#google-fonts-items-placeholder{padding:5px 7px;font-size:12px;opacity:.6}#google-fonts-items .item{width:182px;height:25px;overflow:hidden;display:block;box-sizing:border-box;padding:0 6px;opacity:.75;background:0 0;-webkit-user-drag:none;filter:invert()}#google-fonts-items .item[hidden]{display:none}#google-fonts-items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"embedded-items-container\">\n            <h4  id=\"embedded-items-heading\">Embedded fonts</h4>\n            <div id=\"embedded-items\"></div>\n            <div id=\"embedded-items-placeholder\" hidden>No families found.</div>\n          </div>\n\n          <div id=\"google-fonts-items-contaner\">\n            <h4  id=\"google-fonts-items-heading\">Google fonts</h4>\n            <div id=\"google-fonts-items\"></div>\n            <div id=\"google-fonts-items-placeholder\" hidden>No families found.</div>\n          </div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n      </main>\n    </template>\n  "]),_templateObject19=_taggedTemplateLiteral(["\n            <div class=\"item\" data-family=\"","\">\n              <div class=\"label\" style=\"font-family: '","'\">","</div>\n            </div>\n          "],["\n            <div class=\"item\" data-family=\"","\">\n              <div class=\"label\" style=\"font-family: '","'\">","</div>\n            </div>\n          "]),_templateObject20=_taggedTemplateLiteral(["<div class=\"item\" data-family=\"","\"><img src=\"","\"></img></div>"],["<div class=\"item\" data-family=\"","\"><img src=\"","\"></img></div>"]),_templateObject21=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;position:relative;width:100px;height:100px;box-shadow:inset 1px 1px 0 #acacac,inset -1px -1px 0 #acacac;--button-background: #ffffff;--button-border: 1px solid #ACACAC;--button-toggled-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 15%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))\n  );--button-toggled-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 8%));--button-pressed-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 5%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 7%))\n  );--button-pressed-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 12%))}:host([disabled]){opacity:.5;pointer-events:none}:host(:focus){outline:0}#buttons{width:100%;height:100%}#buttons .button{position:absolute;width:26px;height:26px;min-height:26px;padding:0;background:var(--button-background);border:var(--button-border);border-radius:0}#buttons .button[toggled]{background:var(--button-toggled-background);border:var(--button-toggled-border)}#buttons .button[pressed],#buttons .button[pressed][toggled]{background:var(--button-pressed-background);border:var(--button-pressed-border)}.button[value=xMinYMin]{left:0;top:0}.button[value=xMidYMin]{top:0;left:50%;transform:translate(-50%,0)}.button[value=xMaxYMin]{top:0;right:0}.button[value=xMinYMid]{top:50%;left:0;transform:translate(0,-50%)}.button[value=xMidYMid]{top:50%;left:50%;transform:translate(-50%,-50%)}.button[value=xMaxYMid]{top:50%;right:0;transform:translate(0,-50%)}.button[value=xMinYMax]{left:0;bottom:0}.button[value=xMidYMax]{left:50%;bottom:0;transform:translate(-50%,0)}.button[value=xMaxYMax]{right:0;bottom:0}</style>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button class=\"button\" value=\"xMinYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMin\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMid\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMax\"></x-button>\n      </x-buttons>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;position:relative;width:100px;height:100px;box-shadow:inset 1px 1px 0 #acacac,inset -1px -1px 0 #acacac;--button-background: #ffffff;--button-border: 1px solid #ACACAC;--button-toggled-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 15%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))\n  );--button-toggled-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 8%));--button-pressed-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 5%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 7%))\n  );--button-pressed-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 12%))}:host([disabled]){opacity:.5;pointer-events:none}:host(:focus){outline:0}#buttons{width:100%;height:100%}#buttons .button{position:absolute;width:26px;height:26px;min-height:26px;padding:0;background:var(--button-background);border:var(--button-border);border-radius:0}#buttons .button[toggled]{background:var(--button-toggled-background);border:var(--button-toggled-border)}#buttons .button[pressed],#buttons .button[pressed][toggled]{background:var(--button-pressed-background);border:var(--button-pressed-border)}.button[value=xMinYMin]{left:0;top:0}.button[value=xMidYMin]{top:0;left:50%;transform:translate(-50%,0)}.button[value=xMaxYMin]{top:0;right:0}.button[value=xMinYMid]{top:50%;left:0;transform:translate(0,-50%)}.button[value=xMidYMid]{top:50%;left:50%;transform:translate(-50%,-50%)}.button[value=xMaxYMid]{top:50%;right:0;transform:translate(0,-50%)}.button[value=xMinYMax]{left:0;bottom:0}.button[value=xMidYMax]{left:50%;bottom:0;transform:translate(-50%,0)}.button[value=xMaxYMax]{right:0;bottom:0}</style>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button class=\"button\" value=\"xMinYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMin\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMid\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMax\"></x-button>\n      </x-buttons>\n    </template>\n  "]),_templateObject22=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:14px 20px 20px}#opacity-input{margin-left:6px;width:65px}#rule-section{padding:10px 20px 20px}</style>\n\n      <h2 id=\"panel-heading\">Fill</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"fill\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"rule-section\">\n        <h3 id=\"rule-section-heading\">Rule</h3>\n\n        <x-buttons id=\"rule-buttons\" tracking=\"1\">\n          <x-button id=\"non-zero-rule-button\" value=\"nonzero\" title=\"Non-zero\" skin=\"flat\" toggled>\n            <x-icon name=\"fill-rule-non-zero\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"even-odd-rule-button\" value=\"evenodd\" title=\"Even-odd\" skin=\"flat\">\n            <x-icon name=\"fill-rule-even-odd\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:14px 20px 20px}#opacity-input{margin-left:6px;width:65px}#rule-section{padding:10px 20px 20px}</style>\n\n      <h2 id=\"panel-heading\">Fill</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"fill\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"rule-section\">\n        <h3 id=\"rule-section-heading\">Rule</h3>\n\n        <x-buttons id=\"rule-buttons\" tracking=\"1\">\n          <x-button id=\"non-zero-rule-button\" value=\"nonzero\" title=\"Non-zero\" skin=\"flat\" toggled>\n            <x-icon name=\"fill-rule-non-zero\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"even-odd-rule-button\" value=\"evenodd\" title=\"Even-odd\" skin=\"flat\">\n            <x-icon name=\"fill-rule-even-odd\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "]),_templateObject23=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:15px 20px 20px}#opacity-input{margin-left:6px;width:65px}#width-section{padding:15px 20px 17px}#width-input{margin-left:6px;width:65px}#non-scaling-stroke-box{margin-top:5px}#line-section{padding:15px 20px 17px}#line-section>x-box{justify-content:space-between}#dash-section{padding:10px 20px 20px}#dash-array-select{width:100%;margin-bottom:10px}#dash-array-inputs>x-box{width:40px;margin-left:-1px}#dash-array-inputs x-numberinput{width:100%;text-align:center;--inner-padding: 0 3px}#dash-array-inputs x-label{align-self:center;margin-right:4px;font-weight:900;opacity:.9}#dash-array-inputs x-label[disabled]{opacity:.4}#dash-array-inputs x-label.gap{opacity:.2}#dash-array-inputs x-label.gap[disabled]{opacity:.1}#dash-offset-box{margin-top:16px}#dash-offset-box h4{margin-bottom:2px}#dash-offset-inner-box{width:100%}#dash-offset-input{margin-left:6px;width:65px}</style>\n\n      <h2 id=\"panel-heading\">Stroke</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"stroke\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"width-section\">\n        <h3 id=\"width-section-heading\">Width</h3>\n\n        <x-box id=\"width-box\">\n          <x-slider id=\"width-slider\" value=\"1\" min=\"0\" max=\"50\" step=\"1\"></x-slider>\n\n          <x-numberinput id=\"width-input\" value=\"1\" min=\"0\" step=\"1\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n\n        <x-box id=\"non-scaling-stroke-box\">\n          <x-checkbox id=\"non-scaling-stroke-checkbox\"></x-checkbox>\n          <x-label id=\"non-scaling-stroke-label\" for=\"non-scaling-stroke-checkbox\">Non-scaling stroke</x-label>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"line-section\">\n        <h3 id=\"line-section-heading\">Line</h3>\n\n        <x-box>\n          <x-box id=\"line-cap-box\" vertical>\n            <h4 id=\"line-cap-box-heading\">Cap</h4>\n\n            <x-buttons id=\"line-cap-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"butt-line-cap-button\" value=\"butt\" title=\"Butt cap\" skin=\"flat\">\n                <x-icon name=\"cap-butt\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-cap-button\" value=\"round\" title=\"Round cap\" skin=\"flat\">\n                <x-icon name=\"cap-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"square-line-cap-button\" value=\"square\" title=\"Square cap\" skin=\"flat\">\n                <x-icon name=\"cap-square\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n\n          </x-box>\n\n          <x-box id=\"line-join-box\" vertical>\n            <h4 id=\"line-join-box-heading\">Join</h4>\n\n            <x-buttons id=\"line-join-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"miter-line-join-button\" value=\"miter\" title=\"Miter join\" skin=\"flat\">\n                <x-icon name=\"join-miter\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-join-button\" value=\"round\" title=\"Round join\" skin=\"flat\">\n                <x-icon name=\"join-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"bevel-line-join-button\" value=\"bevel\" title=\"Bevel join\" skin=\"flat\">\n                <x-icon name=\"join-bevel\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"dash-section\">\n        <h3 id=\"dash-section-heading\">Dash</h3>\n\n        <x-box id=\"dash-array-box\" vertical>\n          <h4 id=\"dash-array-box-heading\">Array</h4>\n\n          <x-select id=\"dash-array-select\">\n            <x-menu>\n              ","\n            </x-menu>\n          </x-select>\n\n          <x-box id=\"dash-array-inputs\">\n            <x-box vertical>\n              <x-numberinput id=\"dash-1-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-2-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-3-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-4-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-5-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-6-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"dash-offset-box\" vertical>\n          <h4>Offset</h4>\n\n          <x-box id=\"dash-offset-inner-box\">\n            <x-slider id=\"dash-offset-slider\" value=\"0\" min=\"-50\" max=\"50\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"dash-offset-input\" value=\"0\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:15px 20px 20px}#opacity-input{margin-left:6px;width:65px}#width-section{padding:15px 20px 17px}#width-input{margin-left:6px;width:65px}#non-scaling-stroke-box{margin-top:5px}#line-section{padding:15px 20px 17px}#line-section>x-box{justify-content:space-between}#dash-section{padding:10px 20px 20px}#dash-array-select{width:100%;margin-bottom:10px}#dash-array-inputs>x-box{width:40px;margin-left:-1px}#dash-array-inputs x-numberinput{width:100%;text-align:center;--inner-padding: 0 3px}#dash-array-inputs x-label{align-self:center;margin-right:4px;font-weight:900;opacity:.9}#dash-array-inputs x-label[disabled]{opacity:.4}#dash-array-inputs x-label.gap{opacity:.2}#dash-array-inputs x-label.gap[disabled]{opacity:.1}#dash-offset-box{margin-top:16px}#dash-offset-box h4{margin-bottom:2px}#dash-offset-inner-box{width:100%}#dash-offset-input{margin-left:6px;width:65px}</style>\n\n      <h2 id=\"panel-heading\">Stroke</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"stroke\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"width-section\">\n        <h3 id=\"width-section-heading\">Width</h3>\n\n        <x-box id=\"width-box\">\n          <x-slider id=\"width-slider\" value=\"1\" min=\"0\" max=\"50\" step=\"1\"></x-slider>\n\n          <x-numberinput id=\"width-input\" value=\"1\" min=\"0\" step=\"1\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n\n        <x-box id=\"non-scaling-stroke-box\">\n          <x-checkbox id=\"non-scaling-stroke-checkbox\"></x-checkbox>\n          <x-label id=\"non-scaling-stroke-label\" for=\"non-scaling-stroke-checkbox\">Non-scaling stroke</x-label>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"line-section\">\n        <h3 id=\"line-section-heading\">Line</h3>\n\n        <x-box>\n          <x-box id=\"line-cap-box\" vertical>\n            <h4 id=\"line-cap-box-heading\">Cap</h4>\n\n            <x-buttons id=\"line-cap-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"butt-line-cap-button\" value=\"butt\" title=\"Butt cap\" skin=\"flat\">\n                <x-icon name=\"cap-butt\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-cap-button\" value=\"round\" title=\"Round cap\" skin=\"flat\">\n                <x-icon name=\"cap-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"square-line-cap-button\" value=\"square\" title=\"Square cap\" skin=\"flat\">\n                <x-icon name=\"cap-square\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n\n          </x-box>\n\n          <x-box id=\"line-join-box\" vertical>\n            <h4 id=\"line-join-box-heading\">Join</h4>\n\n            <x-buttons id=\"line-join-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"miter-line-join-button\" value=\"miter\" title=\"Miter join\" skin=\"flat\">\n                <x-icon name=\"join-miter\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-join-button\" value=\"round\" title=\"Round join\" skin=\"flat\">\n                <x-icon name=\"join-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"bevel-line-join-button\" value=\"bevel\" title=\"Bevel join\" skin=\"flat\">\n                <x-icon name=\"join-bevel\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"dash-section\">\n        <h3 id=\"dash-section-heading\">Dash</h3>\n\n        <x-box id=\"dash-array-box\" vertical>\n          <h4 id=\"dash-array-box-heading\">Array</h4>\n\n          <x-select id=\"dash-array-select\">\n            <x-menu>\n              ","\n            </x-menu>\n          </x-select>\n\n          <x-box id=\"dash-array-inputs\">\n            <x-box vertical>\n              <x-numberinput id=\"dash-1-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-2-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-3-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-4-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-5-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-6-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"dash-offset-box\" vertical>\n          <h4>Offset</h4>\n\n          <x-box id=\"dash-offset-inner-box\">\n            <x-slider id=\"dash-offset-slider\" value=\"0\" min=\"-50\" max=\"50\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"dash-offset-input\" value=\"0\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject24=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#opacity-section{padding:10px 20px 20px}#opacity-input{margin-left:6px;width:65px}#blend-mode-section{padding:10px 20px}#blend-mode-select{width:100%}</style>\n\n      <h2 id=\"panel-heading\">Compositing</h2>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box id=\"opacity-box\">\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"blend-mode-section\">\n        <h3 id=\"blend-mode-section-heading\">Blend mode</h3>\n\n        <x-select id=\"blend-mode-select\">\n          <x-menu>\n            <x-menuitem value=\"normal\" selected=\"true\"><x-label>Normal</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"darken\"><x-label>Darken</x-label></x-menuitem>\n            <x-menuitem value=\"multiply\"><x-label>Multiply</x-label></x-menuitem>\n            <x-menuitem value=\"color-burn\"><x-label>Color Burn</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"lighten\"><x-label>Lighten</x-label></x-menuitem>\n            <x-menuitem value=\"screen\"><x-label>Screen</x-label></x-menuitem>\n            <x-menuitem value=\"color-dodge\"><x-label>Color Dodge</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"overlay\"><x-label>Overlay</x-label></x-menuitem>\n            <x-menuitem value=\"soft-light\"><x-label>Soft Light</x-label></x-menuitem>\n            <x-menuitem value=\"hard-light\"><x-label>Hard Light</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"difference\"><x-label>Difference</x-label></x-menuitem>\n            <x-menuitem value=\"exclusion\"><x-label>Exclusion</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"hue\"><x-label>Hue</x-label></x-menuitem>\n            <x-menuitem value=\"saturation\"><x-label>Saturation</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-box id=\"isolation-box\" style=\"margin-top: 8px;\">\n          <x-checkbox id=\"isolation-checkbox\"></x-checkbox>\n          <x-label id=\"isolation-label\" for=\"isolation-checkbox\">Isolate</x-label>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#opacity-section{padding:10px 20px 20px}#opacity-input{margin-left:6px;width:65px}#blend-mode-section{padding:10px 20px}#blend-mode-select{width:100%}</style>\n\n      <h2 id=\"panel-heading\">Compositing</h2>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box id=\"opacity-box\">\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"blend-mode-section\">\n        <h3 id=\"blend-mode-section-heading\">Blend mode</h3>\n\n        <x-select id=\"blend-mode-select\">\n          <x-menu>\n            <x-menuitem value=\"normal\" selected=\"true\"><x-label>Normal</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"darken\"><x-label>Darken</x-label></x-menuitem>\n            <x-menuitem value=\"multiply\"><x-label>Multiply</x-label></x-menuitem>\n            <x-menuitem value=\"color-burn\"><x-label>Color Burn</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"lighten\"><x-label>Lighten</x-label></x-menuitem>\n            <x-menuitem value=\"screen\"><x-label>Screen</x-label></x-menuitem>\n            <x-menuitem value=\"color-dodge\"><x-label>Color Dodge</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"overlay\"><x-label>Overlay</x-label></x-menuitem>\n            <x-menuitem value=\"soft-light\"><x-label>Soft Light</x-label></x-menuitem>\n            <x-menuitem value=\"hard-light\"><x-label>Hard Light</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"difference\"><x-label>Difference</x-label></x-menuitem>\n            <x-menuitem value=\"exclusion\"><x-label>Exclusion</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"hue\"><x-label>Hue</x-label></x-menuitem>\n            <x-menuitem value=\"saturation\"><x-label>Saturation</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-box id=\"isolation-box\" style=\"margin-top: 8px;\">\n          <x-checkbox id=\"isolation-checkbox\"></x-checkbox>\n          <x-label id=\"isolation-label\" for=\"isolation-checkbox\">Isolate</x-label>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject25=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block}#font-section{padding:10px 20px 20px}#font-family-subsection{margin-bottom:15px}#font-family-popover{width:200px}#font-family-hint{margin:7px 0 2px;font-size:11px;font-weight:500;line-height:1;opacity:.8}#font-family-hint[disabled]{opacity:.5;pointer-events:none}#font-family-hint span{text-decoration:underline}#font-family-hint span:hover{cursor:pointer}#font-family-button{width:100%;height:38px}#font-family-label{font-size:20px;line-height:20px}#font-family-popover{height:100%}#font-face-subsection{margin-bottom:15px}#font-face-box,#font-weight-select{width:100%}#font-style-button{height:26px;font-style:italic;margin:0 0 0 8px}#font-size-box{width:100%}#font-size-input{margin-left:6px;width:65px}#text-section{padding:16px 20px 18px}#text-section h4{margin-bottom:4px}#text-transform-box{margin-top:14px}#text-section x-button x-icon{width:20px;height:20px}#text-decoration-buttons,#text-transform-box,#text-transform-buttons{width:100%}#text-decoration-buttons x-button{padding:0 7px;height:28px;flex:1}#text-decoration-buttons x-label{font-weight:600;font-size:12px;text-align:center}#underline-button x-label{text-decoration:underline}#overline-button x-label{text-decoration:overline;line-height:1.3}#line-through-button x-label{text-decoration:line-through}#text-transform-buttons x-button{padding:0 5px;height:28px;flex:1}#text-transform-buttons x-label{font-weight:600;font-size:12px;text-align:center}#text-on-path-button{margin-top:6px;width:100%;text-align:center;height:28px}#spacing-section{padding:15px 20px 18px}#spacing-section-heading{margin-bottom:14px}#letter-spacing-box{margin-bottom:10px}#letter-spacing-heading{margin-bottom:0}#letter-spacing-inner-box{width:100%}#letter-spacing-input{margin-left:6px;width:60px;min-width:60px}#word-spacing-heading{margin-bottom:0}#word-spacing-inner-box{width:100%}#word-spacing-input{margin-left:6px;width:60px;min-width:60px}#text-on-path-section{padding:10px 20px}</style>\n\n      <h2 id=\"panel-heading\">Typography</h2>\n\n      <section id=\"font-section\">\n        <h3 id=\"font-section-heading\">Font</h3>\n\n        <x-box id=\"font-family-subsection\" vertical>\n          <h4 id=\"font-family-heading\">Family</h4>\n\n          <x-button id=\"font-family-button\">\n            <x-label id=\"font-family-label\">Arial</x-label>\n            <x-popover id=\"font-family-popover\">\n              <bx-fontfamilypicker id=\"font-family-picker\"></bx-fontfamilypicker>\n            </x-popover>\n          </x-button>\n\n          <div id=\"font-family-hint\">Add more fonts in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n        </x-box>\n\n        <x-box id=\"font-face-subsection\" vertical>\n          <h4 id=\"font-face-heading\">Face</h4>\n\n          <x-box id=\"font-face-box\">\n            <x-select id=\"font-weight-select\">\n              <x-menu id=\"font-weight-menu\">\n                <x-menuitem value=\"100\"><x-label>100 - Thin</x-label></x-menuitem>\n                <x-menuitem value=\"200\"><x-label>200 - Extra-Light</x-label></x-menuitem>\n                <x-menuitem value=\"300\"><x-label>300 - Light</x-label></x-menuitem>\n                <x-menuitem value=\"400\" selected=\"true\"><x-label>400 - Normal</x-label></x-menuitem>\n                <x-menuitem value=\"500\"><x-label>500 - Medium</x-label></x-menuitem>\n                <x-menuitem value=\"600\"><x-label>600 - Semi-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"700\"><x-label>700 - Bold</x-label></x-menuitem>\n                <x-menuitem value=\"800\"><x-label>800 - Extra-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"900\"><x-label>900 - Ultra-Bold</x-label></x-menuitem>\n              </x-menu>\n            </x-select>\n\n            <x-button id=\"font-style-button\" skin=\"condensed\" togglable>\n              <x-label>Italic</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"font-size-subsection\" vertical>\n          <h4 id=\"font-size-heading\">Size</h4>\n\n          <x-box id=\"font-size-box\">\n            <x-slider id=\"font-size-slider\" value=\"13\" min=\"1\" max=\"150\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"font-size-input\" value=\"13\" min=\"1\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"text-section\">\n        <h3 id=\"text-section-heading\">Text</h3>\n\n        <x-box id=\"text-decoration-box\" vertical>\n          <h4 id=\"text-decoration-heading\">Decoration</h4>\n\n          <x-buttons id=\"text-decoration-buttons\" tracking=\"2\">\n            <x-button id=\"underline-button\" value=\"underline\">\n              <x-box vertical>\n                <x-label>Underline</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"line-through-button\" value=\"line-through\">\n              <x-label>Line-through</x-label>\n            </x-button>\n\n            <x-button id=\"overline-button\" value=\"overline\">\n              <x-label>Overline</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n\n        <x-box id=\"text-transform-box\" vertical>\n          <h4 id=\"text-transform-heading\">Transform</h4>\n\n          <x-buttons id=\"text-transform-buttons\" tracking=\"0\">\n            <x-button id=\"capitalize-button\" value=\"capitalize\" skin=\"\">\n              <x-label>Capitalize</x-label>\n            </x-button>\n\n            <x-button id=\"uppercase-button\" value=\"uppercase\" skin=\"\">\n              <x-label>UPPERCASE</x-label>\n            </x-button>\n\n            <x-button id=\"lowercase-button\" value=\"lowercase\" skin=\"\">\n              <x-label>lowercase</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-button id=\"text-on-path-button\" togglable>\n            <x-label>Text on path</x-label>\n          </x-button>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"spacing-section\">\n        <h3 id=\"spacing-section-heading\">Spacing</h3>\n\n        <x-box id=\"letter-spacing-box\" vertical>\n          <h4 id=\"letter-spacing-heading\">Letter</h4>\n\n          <x-box id=\"letter-spacing-inner-box\">\n            <x-slider id=\"letter-spacing-slider\" value=\"0\" min=\"-20\" max=\"20\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"letter-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"word-spacing-box\" vertical>\n          <h4 id=\"word-spacing-heading\">Word</h4>\n\n          <x-box id=\"word-spacing-inner-box\">\n            <x-slider id=\"word-spacing-slider\" value=\"0\" min=\"-100\" max=\"100\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"word-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block}#font-section{padding:10px 20px 20px}#font-family-subsection{margin-bottom:15px}#font-family-popover{width:200px}#font-family-hint{margin:7px 0 2px;font-size:11px;font-weight:500;line-height:1;opacity:.8}#font-family-hint[disabled]{opacity:.5;pointer-events:none}#font-family-hint span{text-decoration:underline}#font-family-hint span:hover{cursor:pointer}#font-family-button{width:100%;height:38px}#font-family-label{font-size:20px;line-height:20px}#font-family-popover{height:100%}#font-face-subsection{margin-bottom:15px}#font-face-box,#font-weight-select{width:100%}#font-style-button{height:26px;font-style:italic;margin:0 0 0 8px}#font-size-box{width:100%}#font-size-input{margin-left:6px;width:65px}#text-section{padding:16px 20px 18px}#text-section h4{margin-bottom:4px}#text-transform-box{margin-top:14px}#text-section x-button x-icon{width:20px;height:20px}#text-decoration-buttons,#text-transform-box,#text-transform-buttons{width:100%}#text-decoration-buttons x-button{padding:0 7px;height:28px;flex:1}#text-decoration-buttons x-label{font-weight:600;font-size:12px;text-align:center}#underline-button x-label{text-decoration:underline}#overline-button x-label{text-decoration:overline;line-height:1.3}#line-through-button x-label{text-decoration:line-through}#text-transform-buttons x-button{padding:0 5px;height:28px;flex:1}#text-transform-buttons x-label{font-weight:600;font-size:12px;text-align:center}#text-on-path-button{margin-top:6px;width:100%;text-align:center;height:28px}#spacing-section{padding:15px 20px 18px}#spacing-section-heading{margin-bottom:14px}#letter-spacing-box{margin-bottom:10px}#letter-spacing-heading{margin-bottom:0}#letter-spacing-inner-box{width:100%}#letter-spacing-input{margin-left:6px;width:60px;min-width:60px}#word-spacing-heading{margin-bottom:0}#word-spacing-inner-box{width:100%}#word-spacing-input{margin-left:6px;width:60px;min-width:60px}#text-on-path-section{padding:10px 20px}</style>\n\n      <h2 id=\"panel-heading\">Typography</h2>\n\n      <section id=\"font-section\">\n        <h3 id=\"font-section-heading\">Font</h3>\n\n        <x-box id=\"font-family-subsection\" vertical>\n          <h4 id=\"font-family-heading\">Family</h4>\n\n          <x-button id=\"font-family-button\">\n            <x-label id=\"font-family-label\">Arial</x-label>\n            <x-popover id=\"font-family-popover\">\n              <bx-fontfamilypicker id=\"font-family-picker\"></bx-fontfamilypicker>\n            </x-popover>\n          </x-button>\n\n          <div id=\"font-family-hint\">Add more fonts in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n        </x-box>\n\n        <x-box id=\"font-face-subsection\" vertical>\n          <h4 id=\"font-face-heading\">Face</h4>\n\n          <x-box id=\"font-face-box\">\n            <x-select id=\"font-weight-select\">\n              <x-menu id=\"font-weight-menu\">\n                <x-menuitem value=\"100\"><x-label>100 - Thin</x-label></x-menuitem>\n                <x-menuitem value=\"200\"><x-label>200 - Extra-Light</x-label></x-menuitem>\n                <x-menuitem value=\"300\"><x-label>300 - Light</x-label></x-menuitem>\n                <x-menuitem value=\"400\" selected=\"true\"><x-label>400 - Normal</x-label></x-menuitem>\n                <x-menuitem value=\"500\"><x-label>500 - Medium</x-label></x-menuitem>\n                <x-menuitem value=\"600\"><x-label>600 - Semi-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"700\"><x-label>700 - Bold</x-label></x-menuitem>\n                <x-menuitem value=\"800\"><x-label>800 - Extra-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"900\"><x-label>900 - Ultra-Bold</x-label></x-menuitem>\n              </x-menu>\n            </x-select>\n\n            <x-button id=\"font-style-button\" skin=\"condensed\" togglable>\n              <x-label>Italic</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"font-size-subsection\" vertical>\n          <h4 id=\"font-size-heading\">Size</h4>\n\n          <x-box id=\"font-size-box\">\n            <x-slider id=\"font-size-slider\" value=\"13\" min=\"1\" max=\"150\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"font-size-input\" value=\"13\" min=\"1\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"text-section\">\n        <h3 id=\"text-section-heading\">Text</h3>\n\n        <x-box id=\"text-decoration-box\" vertical>\n          <h4 id=\"text-decoration-heading\">Decoration</h4>\n\n          <x-buttons id=\"text-decoration-buttons\" tracking=\"2\">\n            <x-button id=\"underline-button\" value=\"underline\">\n              <x-box vertical>\n                <x-label>Underline</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"line-through-button\" value=\"line-through\">\n              <x-label>Line-through</x-label>\n            </x-button>\n\n            <x-button id=\"overline-button\" value=\"overline\">\n              <x-label>Overline</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n\n        <x-box id=\"text-transform-box\" vertical>\n          <h4 id=\"text-transform-heading\">Transform</h4>\n\n          <x-buttons id=\"text-transform-buttons\" tracking=\"0\">\n            <x-button id=\"capitalize-button\" value=\"capitalize\" skin=\"\">\n              <x-label>Capitalize</x-label>\n            </x-button>\n\n            <x-button id=\"uppercase-button\" value=\"uppercase\" skin=\"\">\n              <x-label>UPPERCASE</x-label>\n            </x-button>\n\n            <x-button id=\"lowercase-button\" value=\"lowercase\" skin=\"\">\n              <x-label>lowercase</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-button id=\"text-on-path-button\" togglable>\n            <x-label>Text on path</x-label>\n          </x-button>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"spacing-section\">\n        <h3 id=\"spacing-section-heading\">Spacing</h3>\n\n        <x-box id=\"letter-spacing-box\" vertical>\n          <h4 id=\"letter-spacing-heading\">Letter</h4>\n\n          <x-box id=\"letter-spacing-inner-box\">\n            <x-slider id=\"letter-spacing-slider\" value=\"0\" min=\"-20\" max=\"20\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"letter-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"word-spacing-box\" vertical>\n          <h4 id=\"word-spacing-heading\">Word</h4>\n\n          <x-box id=\"word-spacing-inner-box\">\n            <x-slider id=\"word-spacing-slider\" value=\"0\" min=\"-100\" max=\"100\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"word-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject26=_taggedTemplateLiteral(["<path id=\"","\" d=\"","\"></path>"],["<path id=\"","\" d=\"","\"></path>"]),_templateObject27=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}section[hidden]+hr{display:none}#panel-heading-box{padding:20px 20px 0}#panel-heading{margin:0;padding:0}#help-button:hover{cursor:default}#viewport-section{padding:16px 20px 20px}#viewport-heading-box{margin-bottom:12px}#viewport-section-heading{margin-bottom:0}#viewport-width-box{margin-bottom:14px}#viewport-height-heading,#viewport-width-heading{margin-bottom:4px}#viewport-height-input,#viewport-width-input{flex:1}#viewport-height-unit-select,#viewport-width-unit-select{margin-left:5px;width:75px}#view-box-section{padding:20px 20px 16px}#view-box-heading-box{margin-bottom:12px}#view-box-section-heading{margin-bottom:0}#view-box-box{justify-content:space-between}#view-box-box x-label{align-self:center;margin:2px 4px 0 0;font-size:11px}#view-box-box x-numberinput{width:56px;text-align:center}#preserve-aspect-ratio-section{padding:18px 20px 20px}#preserve-aspect-ratio-heading-box{margin-bottom:12px}#preserve-aspect-ratio-section-heading{margin-bottom:0}#preserve-aspect-ratio-box{justify-content:space-between}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">View</h2>\n\n        <a href=\"http://sarasoueidan.com/blog/svg-coordinate-systems/\">\n          <x-button skin=\"help\" id=\"help-button\">\n            <x-icon name=\"question\"></x-icon>\n          </x-button>\n        </a>\n      </x-box>\n\n      <section id=\"view-box-section\">\n        <x-box id=\"view-box-heading-box\">\n          <h3 id=\"view-box-section-heading\">View box</h3>\n          <x-switch id=\"view-box-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"view-box-box\">\n          <x-box id=\"view-box-x-box\" vertical>\n            <x-numberinput id=\"view-box-x-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"x\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-x-label\">X</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-y-box\" vertical>\n            <x-numberinput id=\"view-box-y-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"y\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-y-label\">Y</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-width-box\" vertical>\n            <x-numberinput id=\"view-box-width-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"width\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-width-label\">Width</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-height-box\" vertical>\n            <x-numberinput id=\"view-box-height-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"height\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-height-label\">Height</x-label>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"viewport-section\">\n        <x-box id=\"viewport-heading-box\">\n          <h3 id=\"viewport-section-heading\">Viewport</h3>\n          <x-switch id=\"viewport-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <section id=\"viewport-width-subsection\">\n          <h4 id=\"viewport-width-heading\">Width</h4>\n\n          <x-box id=\"viewport-width-box\">\n            <x-numberinput id=\"viewport-width-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-width-unit-select\">\n              <x-menu>\n                ","\n              </x-menu>\n            </x-select>\n          </x-box>\n        </section>\n\n        <section id=\"viewport-height-subsection\">\n          <h4 id=\"viewport-height-heading\">Height</h4>\n\n          <x-box id=\"viewport-height-box\">\n            <x-numberinput id=\"viewport-height-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-height-unit-select\">\n              <x-menu>","</x-menu>\n            </x-select>\n          </x-box>\n        </section>\n      </section>\n\n      <hr/>\n\n      <section id=\"preserve-aspect-ratio-section\">\n        <x-box id=\"preserve-aspect-ratio-heading-box\">\n          <h3 id=\"preserve-aspect-ratio-section-heading\">Preserve aspect ratio</h3>\n          <x-switch id=\"preserve-aspect-ratio-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"preserve-aspect-ratio-box\">\n          <x-box id=\"align-box\" vertical>\n            <h4 id=\"align-heading\">Align</h4>\n            <bx-alignbuttons id=\"align-buttons\" tracking=\"1\" value=\"xMidYMid\"></bx-alignbuttons>\n          </x-box>\n\n          <x-buttons id=\"meet-or-slice-buttons\" tracking=\"1\">\n            <x-button id=\"meet-button\" value=\"meet\" toggled>\n              <x-label>Meet</x-label>\n            </x-button>\n\n            <x-button id=\"slice-button\" value=\"slice\">\n              <x-label>Slice</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}section[hidden]+hr{display:none}#panel-heading-box{padding:20px 20px 0}#panel-heading{margin:0;padding:0}#help-button:hover{cursor:default}#viewport-section{padding:16px 20px 20px}#viewport-heading-box{margin-bottom:12px}#viewport-section-heading{margin-bottom:0}#viewport-width-box{margin-bottom:14px}#viewport-height-heading,#viewport-width-heading{margin-bottom:4px}#viewport-height-input,#viewport-width-input{flex:1}#viewport-height-unit-select,#viewport-width-unit-select{margin-left:5px;width:75px}#view-box-section{padding:20px 20px 16px}#view-box-heading-box{margin-bottom:12px}#view-box-section-heading{margin-bottom:0}#view-box-box{justify-content:space-between}#view-box-box x-label{align-self:center;margin:2px 4px 0 0;font-size:11px}#view-box-box x-numberinput{width:56px;text-align:center}#preserve-aspect-ratio-section{padding:18px 20px 20px}#preserve-aspect-ratio-heading-box{margin-bottom:12px}#preserve-aspect-ratio-section-heading{margin-bottom:0}#preserve-aspect-ratio-box{justify-content:space-between}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">View</h2>\n\n        <a href=\"http://sarasoueidan.com/blog/svg-coordinate-systems/\">\n          <x-button skin=\"help\" id=\"help-button\">\n            <x-icon name=\"question\"></x-icon>\n          </x-button>\n        </a>\n      </x-box>\n\n      <section id=\"view-box-section\">\n        <x-box id=\"view-box-heading-box\">\n          <h3 id=\"view-box-section-heading\">View box</h3>\n          <x-switch id=\"view-box-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"view-box-box\">\n          <x-box id=\"view-box-x-box\" vertical>\n            <x-numberinput id=\"view-box-x-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"x\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-x-label\">X</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-y-box\" vertical>\n            <x-numberinput id=\"view-box-y-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"y\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-y-label\">Y</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-width-box\" vertical>\n            <x-numberinput id=\"view-box-width-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"width\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-width-label\">Width</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-height-box\" vertical>\n            <x-numberinput id=\"view-box-height-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"height\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-height-label\">Height</x-label>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"viewport-section\">\n        <x-box id=\"viewport-heading-box\">\n          <h3 id=\"viewport-section-heading\">Viewport</h3>\n          <x-switch id=\"viewport-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <section id=\"viewport-width-subsection\">\n          <h4 id=\"viewport-width-heading\">Width</h4>\n\n          <x-box id=\"viewport-width-box\">\n            <x-numberinput id=\"viewport-width-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-width-unit-select\">\n              <x-menu>\n                ","\n              </x-menu>\n            </x-select>\n          </x-box>\n        </section>\n\n        <section id=\"viewport-height-subsection\">\n          <h4 id=\"viewport-height-heading\">Height</h4>\n\n          <x-box id=\"viewport-height-box\">\n            <x-numberinput id=\"viewport-height-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-height-unit-select\">\n              <x-menu>","</x-menu>\n            </x-select>\n          </x-box>\n        </section>\n      </section>\n\n      <hr/>\n\n      <section id=\"preserve-aspect-ratio-section\">\n        <x-box id=\"preserve-aspect-ratio-heading-box\">\n          <h3 id=\"preserve-aspect-ratio-section-heading\">Preserve aspect ratio</h3>\n          <x-switch id=\"preserve-aspect-ratio-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"preserve-aspect-ratio-box\">\n          <x-box id=\"align-box\" vertical>\n            <h4 id=\"align-heading\">Align</h4>\n            <bx-alignbuttons id=\"align-buttons\" tracking=\"1\" value=\"xMidYMid\"></bx-alignbuttons>\n          </x-box>\n\n          <x-buttons id=\"meet-or-slice-buttons\" tracking=\"1\">\n            <x-button id=\"meet-button\" value=\"meet\" toggled>\n              <x-label>Meet</x-label>\n            </x-button>\n\n            <x-button id=\"slice-button\" value=\"slice\">\n              <x-label>Slice</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject28=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%}#container{display:flex;flex-flow:column;width:100%;height:100%}#header h2{margin-bottom:16px}#main{flex:1;padding:4px 0;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;contain:strict;box-sizing:border-box;outline:0;position:relative}#drop-marker,.item>.main{display:flex;align-items:center}#drop-marker{top:23px;width:100%;height:2px;color:#1c5ea5;background:currentColor;box-shadow:0 0 0 1px rgba(255,255,255,.7);pointer-events:none;position:fixed;z-index:100}#drop-marker[hidden]{display:none}#drop-marker #drop-marker-circle{width:8px;height:8px;box-sizing:border-box;border:2px solid currentColor;background:#fff;border-radius:99px;box-shadow:0 0 0 1px rgba(255,255,255,.7)}.item{position:relative}.item>.background{position:absolute;z-index:0;top:0;left:0;width:100%;height:20px}.item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]>.background{background:#d20f0f}.item>.main{position:relative;z-index:1;padding:0 0 0 24px}.item[data-selected]>.main{color:#fff}.item>.children-outer{overflow:hidden}.item>.children-outer .children{transform-origin:0 0}.item .action-buttons{margin-left:auto;display:flex}.item x-input{height:100%;outline:0;border:0;max-width:none;flex:1;margin-left:5px;font-size:13px}.item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:1px;color:#d20f0f;z-index:100;pointer-events:none}.item use{fill:currentColor}.item>.main .label{margin-left:10px;font-size:13px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.item>.main .label[data-custom]{font-weight:700}.item>.main .object-icon{width:15px;height:15px;min-width:15px}.item .arrow-button,.item .lock-button,.item .visibility-button{height:20px;display:flex;align-items:center;justify-content:center;visibility:hidden;pointer-events:none}.item .arrow-button{min-width:27px;width:27px}.item[data-expandable]>.main .arrow-button{visibility:visible;pointer-events:all}.item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.item .lock-button,.item .visibility-button{width:20px;opacity:.3}.item>.main:hover .lock-button{visibility:visible;pointer-events:all}.item[data-locked]>.main .lock-button{visibility:visible;pointer-events:all;opacity:1}.item>.main .lock-icon,.item>.main .visibility-icon{width:15px;height:15px;min-width:15px}.item .visibility-button{padding-right:4px}.item>.main:hover .visibility-button{visibility:visible;pointer-events:all}.item[data-hidden]>.main .visibility-button{visibility:visible;pointer-events:all;opacity:1}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}</style>\n\n      <div id=\"container\">\n        <header id=\"header\">\n          <h2>Objects</h2>\n        </header>\n\n        <main id=\"main\" tabindex=\"0\">\n          <div id=\"items\"></div>\n\n          <div id=\"drop-marker\" hidden>\n            <div id=\"drop-marker-circle\"></div>\n          </div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </div>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%}#container{display:flex;flex-flow:column;width:100%;height:100%}#header h2{margin-bottom:16px}#main{flex:1;padding:4px 0;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;contain:strict;box-sizing:border-box;outline:0;position:relative}#drop-marker,.item>.main{display:flex;align-items:center}#drop-marker{top:23px;width:100%;height:2px;color:#1c5ea5;background:currentColor;box-shadow:0 0 0 1px rgba(255,255,255,.7);pointer-events:none;position:fixed;z-index:100}#drop-marker[hidden]{display:none}#drop-marker #drop-marker-circle{width:8px;height:8px;box-sizing:border-box;border:2px solid currentColor;background:#fff;border-radius:99px;box-shadow:0 0 0 1px rgba(255,255,255,.7)}.item{position:relative}.item>.background{position:absolute;z-index:0;top:0;left:0;width:100%;height:20px}.item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]>.background{background:#d20f0f}.item>.main{position:relative;z-index:1;padding:0 0 0 24px}.item[data-selected]>.main{color:#fff}.item>.children-outer{overflow:hidden}.item>.children-outer .children{transform-origin:0 0}.item .action-buttons{margin-left:auto;display:flex}.item x-input{height:100%;outline:0;border:0;max-width:none;flex:1;margin-left:5px;font-size:13px}.item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:1px;color:#d20f0f;z-index:100;pointer-events:none}.item use{fill:currentColor}.item>.main .label{margin-left:10px;font-size:13px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.item>.main .label[data-custom]{font-weight:700}.item>.main .object-icon{width:15px;height:15px;min-width:15px}.item .arrow-button,.item .lock-button,.item .visibility-button{height:20px;display:flex;align-items:center;justify-content:center;visibility:hidden;pointer-events:none}.item .arrow-button{min-width:27px;width:27px}.item[data-expandable]>.main .arrow-button{visibility:visible;pointer-events:all}.item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.item .lock-button,.item .visibility-button{width:20px;opacity:.3}.item>.main:hover .lock-button{visibility:visible;pointer-events:all}.item[data-locked]>.main .lock-button{visibility:visible;pointer-events:all;opacity:1}.item>.main .lock-icon,.item>.main .visibility-icon{width:15px;height:15px;min-width:15px}.item .visibility-button{padding-right:4px}.item>.main:hover .visibility-button{visibility:visible;pointer-events:all}.item[data-hidden]>.main .visibility-button{visibility:visible;pointer-events:all;opacity:1}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}</style>\n\n      <div id=\"container\">\n        <header id=\"header\">\n          <h2>Objects</h2>\n        </header>\n\n        <main id=\"main\" tabindex=\"0\">\n          <div id=\"items\"></div>\n\n          <div id=\"drop-marker\" hidden>\n            <div id=\"drop-marker-circle\"></div>\n          </div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </div>\n    </template>\n  "]),_templateObject29=_taggedTemplateLiteral(["<x-input value=\"","\" instantvalidation><x-label>","</x-label></x-input>"],["<x-input value=\"","\" instantvalidation><x-label>","</x-label></x-input>"]),_templateObject30=_taggedTemplateLiteral(["\n        <div class=\"item\" data-depth=\"","\">\n          <div class=\"background\"></div>\n\n          <div class=\"main\" style=\"padding-left: ","px;\">\n            <div class=\"arrow-button\">\n              <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#arrow\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n            </div>\n\n            <svg class=\"object-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n\n            <div class=\"action-buttons\">\n              <div class=\"lock-button\">\n                <svg class=\"lock-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#lock-on\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n\n              <div class=\"visibility-button\">\n                <svg class=\"visibility-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#visibility-hidden\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"children-outer\">\n            <div class=\"children\"></div>\n          </div>\n        </div>\n      "],["\n        <div class=\"item\" data-depth=\"","\">\n          <div class=\"background\"></div>\n\n          <div class=\"main\" style=\"padding-left: ","px;\">\n            <div class=\"arrow-button\">\n              <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#arrow\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n            </div>\n\n            <svg class=\"object-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n\n            <div class=\"action-buttons\">\n              <div class=\"lock-button\">\n                <svg class=\"lock-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#lock-on\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n\n              <div class=\"visibility-button\">\n                <svg class=\"visibility-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#visibility-hidden\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"children-outer\">\n            <div class=\"children\"></div>\n          </div>\n        </div>\n      "]),_templateObject31=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}section[hidden]+hr{display:none}#object-rotation-box h4,h2{margin-bottom:0}#guide-section{padding:18px 20px}#guide-x-box,#guide-y-box{flex:1}#guide-y-box{margin-left:8px}#guide-x-input,#guide-y-input{width:100%}#guide-orientation-box{margin-top:14px}#guide-orientation-buttons,#object-origin-position-box x-numberinput,#object-position-box x-numberinput,#object-rotation-box>x-box,#object-size-box x-numberinput{width:100%}#guide-orientation-buttons x-button{flex:1;text-align:center}#object-section{padding:18px 20px}#object-position-box,#object-size-box{margin-top:14px}#object-position-box #object-x-box{flex:1;margin-right:13px}#object-position-box #object-y-box{flex:1;margin-left:13px}#object-size-box #object-height-box,#object-size-box #object-width-box{flex:1}#object-aspect-ratio-button{align-self:flex-end;margin:0}#object-aspect-ratio-button x-icon{width:18px;height:18px;min-width:18px;margin:0 4px 2px;align-self:flex-end;color:#8c8c8c}#object-origin-position-box,#object-rotation-box{margin-top:14px}#object-origin-position-box #object-origin-x-box{flex:1;margin-right:13px}#object-origin-position-box #object-origin-y-box{flex:1;margin-left:13px}#object-rotation-input{margin-left:10px;width:80px}</style>\n\n      <h2 id=\"panel-heading\">Geometry</h2>\n\n      <section id=\"guide-section\">\n        <h3 id=\"guide-section-heading\">Guide</h3>\n\n        <x-box id=\"guide-position-box\">\n          <x-box id=\"guide-x-box\" vertical>\n            <h4>X</h4>\n\n            <x-numberinput id=\"guide-x-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-box id=\"guide-y-box\" vertical>\n            <h4>Y</h4>\n\n            <x-numberinput id=\"guide-y-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"guide-orientation-box\" vertical>\n          <h4>Orientation</h4>\n\n          <x-buttons id=\"guide-orientation-buttons\" tracking=\"1\">\n            <x-button value=\"horizontal\" toggled>\n              <x-label>Horizontal</x-label>\n            </x-button>\n\n            <x-button value=\"vertical\">\n              <x-label>Vertical</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"object-section\">\n        <h3 id=\"object-section-heading\">Object</h3>\n\n        <x-box id=\"object-position-box\">\n          <x-box id=\"object-x-box\" vertical>\n            <h4 id=\"object-x-heading\">X</h4>\n\n            <x-numberinput id=\"object-x-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-box id=\"object-y-box\" vertical>\n            <h4 id=\"object-y-heading\">Y</h4>\n\n            <x-numberinput id=\"object-y-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"object-size-box\">\n          <x-box id=\"object-width-box\" vertical>\n            <h4 id=\"object-width-heading\">Width</h4>\n\n            <x-numberinput id=\"object-width-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-button id=\"object-aspect-ratio-button\" togglable skin=\"flat\">\n            <x-icon id=\"object-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n          </x-button>\n\n          <x-box id=\"object-height-box\" vertical>\n            <h4 id=\"object-height-heading\">Height</h4>\n\n            <x-numberinput id=\"object-height-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"object-origin-position-box\">\n          <x-box id=\"object-origin-x-box\" vertical>\n            <h4 id=\"object-origin-x-heading\">Origin X</h4>\n\n            <x-numberinput id=\"object-origin-x-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-box id=\"object-origin-y-box\" vertical>\n            <h4 id=\"object-origin-y-heading\">Origin Y</h4>\n\n            <x-numberinput id=\"object-origin-y-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"object-rotation-box\" vertical>\n          <h4 id=\"object-rotation-heading\">Rotation</h4>\n\n          <x-box>\n            <x-slider id=\"object-rotation-slider\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"object-rotation-input\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\" suffix=\"\xB0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}section[hidden]+hr{display:none}#object-rotation-box h4,h2{margin-bottom:0}#guide-section{padding:18px 20px}#guide-x-box,#guide-y-box{flex:1}#guide-y-box{margin-left:8px}#guide-x-input,#guide-y-input{width:100%}#guide-orientation-box{margin-top:14px}#guide-orientation-buttons,#object-origin-position-box x-numberinput,#object-position-box x-numberinput,#object-rotation-box>x-box,#object-size-box x-numberinput{width:100%}#guide-orientation-buttons x-button{flex:1;text-align:center}#object-section{padding:18px 20px}#object-position-box,#object-size-box{margin-top:14px}#object-position-box #object-x-box{flex:1;margin-right:13px}#object-position-box #object-y-box{flex:1;margin-left:13px}#object-size-box #object-height-box,#object-size-box #object-width-box{flex:1}#object-aspect-ratio-button{align-self:flex-end;margin:0}#object-aspect-ratio-button x-icon{width:18px;height:18px;min-width:18px;margin:0 4px 2px;align-self:flex-end;color:#8c8c8c}#object-origin-position-box,#object-rotation-box{margin-top:14px}#object-origin-position-box #object-origin-x-box{flex:1;margin-right:13px}#object-origin-position-box #object-origin-y-box{flex:1;margin-left:13px}#object-rotation-input{margin-left:10px;width:80px}</style>\n\n      <h2 id=\"panel-heading\">Geometry</h2>\n\n      <section id=\"guide-section\">\n        <h3 id=\"guide-section-heading\">Guide</h3>\n\n        <x-box id=\"guide-position-box\">\n          <x-box id=\"guide-x-box\" vertical>\n            <h4>X</h4>\n\n            <x-numberinput id=\"guide-x-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-box id=\"guide-y-box\" vertical>\n            <h4>Y</h4>\n\n            <x-numberinput id=\"guide-y-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"guide-orientation-box\" vertical>\n          <h4>Orientation</h4>\n\n          <x-buttons id=\"guide-orientation-buttons\" tracking=\"1\">\n            <x-button value=\"horizontal\" toggled>\n              <x-label>Horizontal</x-label>\n            </x-button>\n\n            <x-button value=\"vertical\">\n              <x-label>Vertical</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"object-section\">\n        <h3 id=\"object-section-heading\">Object</h3>\n\n        <x-box id=\"object-position-box\">\n          <x-box id=\"object-x-box\" vertical>\n            <h4 id=\"object-x-heading\">X</h4>\n\n            <x-numberinput id=\"object-x-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-box id=\"object-y-box\" vertical>\n            <h4 id=\"object-y-heading\">Y</h4>\n\n            <x-numberinput id=\"object-y-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"object-size-box\">\n          <x-box id=\"object-width-box\" vertical>\n            <h4 id=\"object-width-heading\">Width</h4>\n\n            <x-numberinput id=\"object-width-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-button id=\"object-aspect-ratio-button\" togglable skin=\"flat\">\n            <x-icon id=\"object-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n          </x-button>\n\n          <x-box id=\"object-height-box\" vertical>\n            <h4 id=\"object-height-heading\">Height</h4>\n\n            <x-numberinput id=\"object-height-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"object-origin-position-box\">\n          <x-box id=\"object-origin-x-box\" vertical>\n            <h4 id=\"object-origin-x-heading\">Origin X</h4>\n\n            <x-numberinput id=\"object-origin-x-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n\n          <x-box id=\"object-origin-y-box\" vertical>\n            <h4 id=\"object-origin-y-heading\">Origin Y</h4>\n\n            <x-numberinput id=\"object-origin-y-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"object-rotation-box\" vertical>\n          <h4 id=\"object-rotation-heading\">Rotation</h4>\n\n          <x-box>\n            <x-slider id=\"object-rotation-slider\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"object-rotation-input\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\" suffix=\"\xB0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject32=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#general-section{padding:10px 20px 20px}#open-close-buttons>.row{width:100%}#open-close-buttons>.row-2{margin-top:8px}#boolop-buttons x-button,#compound-path-buttons x-button,#open-close-buttons x-button{width:100%;height:34px}#boolop-buttons x-button:last-child,#compound-path-buttons x-button:last-child,#open-close-buttons x-button:last-child{margin-left:8px}#open-close-buttons x-button x-icon{width:21px;height:21px}#boolop-buttons x-button x-label,#compound-path-buttons x-button x-label,#open-close-buttons x-button x-label{flex:none;margin-left:5px}#object-to-path-button,#reverse-path-button,#stroke-to-path-button{width:100%;height:34px;margin-top:8px}#object-to-path-button x-icon,#reverse-path-button x-icon,#stroke-to-path-button x-icon{width:20px;height:20px}#object-to-path-button x-label,#reverse-path-button x-label,#stroke-to-path-button x-label{flex:none;margin-left:8px}#boolops-section{padding:10px 20px 20px}#boolop-buttons>.row{width:100%}#boolop-buttons>.row-2{margin-top:8px}#boolop-buttons x-button x-icon{width:24px;height:24px}#compound-path-section{padding:20px}#compound-path-buttons>.row{width:100%}#compound-path-buttons>.row-2{margin-top:8px}#compound-path-buttons x-button x-icon{width:21px;height:21px}</style>\n\n      <h2 id=\"panel-heading\">Path</h2>\n\n      <section id=\"general-section\">\n        <h3 id=\"general-section-heading\" hidden>General</h3>\n\n        <x-box id=\"open-close-buttons\" class=\"row\">\n          <x-button id=\"open-path-button\" value=\"open\">\n            <x-icon name=\"open-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Open</x-label>\n          </x-button>\n\n          <x-button id=\"close-path-button\" value=\"close\">\n            <x-icon name=\"close-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Close</x-label>\n          </x-button>\n        </x-box>\n\n        <x-button id=\"reverse-path-button\">\n          <x-icon name=\"reverse-path\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Reverse</x-label>\n        </x-button>\n\n        <x-button id=\"object-to-path-button\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Object to path</x-label>\n        </x-button>\n\n        <x-button id=\"stroke-to-path-button\" hidden>\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Stroke to path</x-label>\n        </x-button>\n      </section>\n\n      <hr/>\n\n      <section id=\"boolops-section\">\n        <h3 id=\"boolops-section-heading\">Boolops</h3>\n\n        <x-box id=\"boolop-buttons\" vertical>\n          <x-box class=\"row row-1\">\n            <x-button id=\"unite-button\" value=\"unite\">\n              <x-icon name=\"boolop-unite\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Unite</x-label>\n            </x-button>\n\n            <x-button id=\"intersect-button\" value=\"intersect\">\n              <x-icon name=\"boolop-intersect\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Intersect</x-label>\n            </x-button>\n          </x-box>\n\n          <x-box class=\"row row-2\">\n            <x-button id=\"subtract-button\" value=\"subtract\">\n              <x-icon name=\"boolop-subtract\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Subtract</x-label>\n            </x-button>\n\n            <x-button id=\"exclude-button\" value=\"exclude\">\n              <x-icon name=\"boolop-exclude\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Exclude</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"compound-path-section\">\n        <h3 id=\"compound-path-heading\">Compound path</h3>\n\n        <x-box id=\"compound-path-buttons\" class=\"row\">\n          <x-button id=\"join-button\" value=\"join\">\n            <x-icon name=\"compound-path-join\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Join</x-label>\n          </x-button>\n\n          <x-button id=\"split-button\" value=\"split\">\n            <x-icon name=\"compound-path-split\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Split</x-label>\n          </x-button>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#general-section{padding:10px 20px 20px}#open-close-buttons>.row{width:100%}#open-close-buttons>.row-2{margin-top:8px}#boolop-buttons x-button,#compound-path-buttons x-button,#open-close-buttons x-button{width:100%;height:34px}#boolop-buttons x-button:last-child,#compound-path-buttons x-button:last-child,#open-close-buttons x-button:last-child{margin-left:8px}#open-close-buttons x-button x-icon{width:21px;height:21px}#boolop-buttons x-button x-label,#compound-path-buttons x-button x-label,#open-close-buttons x-button x-label{flex:none;margin-left:5px}#object-to-path-button,#reverse-path-button,#stroke-to-path-button{width:100%;height:34px;margin-top:8px}#object-to-path-button x-icon,#reverse-path-button x-icon,#stroke-to-path-button x-icon{width:20px;height:20px}#object-to-path-button x-label,#reverse-path-button x-label,#stroke-to-path-button x-label{flex:none;margin-left:8px}#boolops-section{padding:10px 20px 20px}#boolop-buttons>.row{width:100%}#boolop-buttons>.row-2{margin-top:8px}#boolop-buttons x-button x-icon{width:24px;height:24px}#compound-path-section{padding:20px}#compound-path-buttons>.row{width:100%}#compound-path-buttons>.row-2{margin-top:8px}#compound-path-buttons x-button x-icon{width:21px;height:21px}</style>\n\n      <h2 id=\"panel-heading\">Path</h2>\n\n      <section id=\"general-section\">\n        <h3 id=\"general-section-heading\" hidden>General</h3>\n\n        <x-box id=\"open-close-buttons\" class=\"row\">\n          <x-button id=\"open-path-button\" value=\"open\">\n            <x-icon name=\"open-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Open</x-label>\n          </x-button>\n\n          <x-button id=\"close-path-button\" value=\"close\">\n            <x-icon name=\"close-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Close</x-label>\n          </x-button>\n        </x-box>\n\n        <x-button id=\"reverse-path-button\">\n          <x-icon name=\"reverse-path\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Reverse</x-label>\n        </x-button>\n\n        <x-button id=\"object-to-path-button\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Object to path</x-label>\n        </x-button>\n\n        <x-button id=\"stroke-to-path-button\" hidden>\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Stroke to path</x-label>\n        </x-button>\n      </section>\n\n      <hr/>\n\n      <section id=\"boolops-section\">\n        <h3 id=\"boolops-section-heading\">Boolops</h3>\n\n        <x-box id=\"boolop-buttons\" vertical>\n          <x-box class=\"row row-1\">\n            <x-button id=\"unite-button\" value=\"unite\">\n              <x-icon name=\"boolop-unite\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Unite</x-label>\n            </x-button>\n\n            <x-button id=\"intersect-button\" value=\"intersect\">\n              <x-icon name=\"boolop-intersect\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Intersect</x-label>\n            </x-button>\n          </x-box>\n\n          <x-box class=\"row row-2\">\n            <x-button id=\"subtract-button\" value=\"subtract\">\n              <x-icon name=\"boolop-subtract\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Subtract</x-label>\n            </x-button>\n\n            <x-button id=\"exclude-button\" value=\"exclude\">\n              <x-icon name=\"boolop-exclude\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Exclude</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"compound-path-section\">\n        <h3 id=\"compound-path-heading\">Compound path</h3>\n\n        <x-box id=\"compound-path-buttons\" class=\"row\">\n          <x-button id=\"join-button\" value=\"join\">\n            <x-icon name=\"compound-path-join\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Join</x-label>\n          </x-button>\n\n          <x-button id=\"split-button\" value=\"split\">\n            <x-icon name=\"compound-path-split\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Split</x-label>\n          </x-button>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject33=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#buttons{margin:10px 20px}#lists{height:0;flex:1;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2}#lists .list{height:100%}</style>\n\n      <h2 id=\"panel-heading\">Defs</h2>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button skin=\"flat\" value=\"symbols-list\">\n          <x-icon name=\"object-symbol\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"patterns-list\">\n          <x-icon name=\"object-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"fonts-list\">\n          <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n\n      <div id=\"lists\">\n        <bx-symbolslist id=\"symbols-list\"></bx-symbolslist>\n        <bx-patternslist id=\"patterns-list\"></bx-patternslist>\n        <bx-fontslist id=\"fonts-list\"></bx-fontslist>\n      </div>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#buttons{margin:10px 20px}#lists{height:0;flex:1;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2}#lists .list{height:100%}</style>\n\n      <h2 id=\"panel-heading\">Defs</h2>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button skin=\"flat\" value=\"symbols-list\">\n          <x-icon name=\"object-symbol\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"patterns-list\">\n          <x-icon name=\"object-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"fonts-list\">\n          <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n\n      <div id=\"lists\">\n        <bx-symbolslist id=\"symbols-list\"></bx-symbolslist>\n        <bx-patternslist id=\"patterns-list\"></bx-patternslist>\n        <bx-fontslist id=\"fonts-list\"></bx-fontslist>\n      </div>\n    </template>\n  "]),_templateObject34=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}.options-box[hidden],[hidden]{display:none}#format-section{padding:10px 20px 20px}#format-select{width:100%}#options-section{padding:0 20px 10px;flex:1}#bitmap-area-box,#bitmap-compression-box x-box{width:100%}#bitmap-area-buttons{width:100%;text-align:center}#bitmap-size-box{width:100%;padding-top:18px}#bitmap-area-buttons x-button,#bitmap-height-box,#bitmap-width-box,#vector-area-buttons x-button{flex:1}#bitmap-lock-button,#bitmap-lock-icon{align-self:flex-end;margin:0}#bitmap-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#bitmap-compression-box{margin-top:18px;width:100%}#bitmap-compression-heading{margin-bottom:0}#bitmap-compression-input{margin-left:6px;width:65px}#bitmap-background-box{padding-top:18px;padding-bottom:8px}#bitmap-background-color-select x-popover{--align: right}#vector-area-box{width:100%}#vector-area-buttons{width:100%;text-align:center}#export-section{padding:15px 20px;border-top:1px solid #ccc;background:#e6e6e6}#export-button{width:100%;height:40px}#export-button x-label{font-size:14px;flex:none}</style>\n\n      <h2 id=\"panel-heading\">Export</h2>\n\n      <section id=\"format-section\">\n        <h3 id=\"format-section-heading\">Format</h3>\n\n        <x-select id=\"format-select\">\n          <x-menu>\n            <x-menuitem value=\"png\" selected=\"true\">\n              <x-label>PNG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"jpeg\">\n              <x-label>JPEG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"webp\">\n              <x-label>WebP</x-label>\n            </x-menuitem>\n\n            <hr/>\n\n            <x-menuitem value=\"svg\">\n              <x-label>SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"svgz\">\n              <x-label>SVGZ</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"html\">\n              <x-label>HTML</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-select>\n      </section>\n\n      <section id=\"options-section\">\n        <h3 id=\"options-section-heading\">Options</h3>\n\n        <x-box id=\"bitmap-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"bitmap-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"bitmap-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"bitmap-size-box\" class=\"size-box\">\n            <x-box id=\"bitmap-width-box\" vertical>\n              <h4 id=\"bitmap-width-heading\">Width</h4>\n\n              <x-numberinput id=\"bitmap-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"bitmap-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"bitmap-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"bitmap-height-box\" vertical>\n              <h4 id=\"bitmap-height-heading\">Height</h4>\n\n              <x-numberinput id=\"bitmap-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-compression-box\" vertical hidden>\n            <h4 id=\"bitmap-compression-heading\">Compression</h4>\n\n            <x-box>\n              <x-slider id=\"bitmap-compression-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"bitmap-compression-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-background-box\" vertical>\n            <h4 id=\"bitmap-background-heading\">Background</h4>\n\n            <x-colorselect id=\"bitmap-background-color-select\" value=\"rgba(255, 255, 255, 0)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"bitmap-background-color-picker\" alphaslider></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"vector-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"vector-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"vector-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <section id=\"export-section\">\n        <x-button id=\"export-button\" skin=\"textured\">\n          <x-icon name=\"import-export\"></x-icon>\n          <x-label>Export</x-label>\n        </x-button>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}.options-box[hidden],[hidden]{display:none}#format-section{padding:10px 20px 20px}#format-select{width:100%}#options-section{padding:0 20px 10px;flex:1}#bitmap-area-box,#bitmap-compression-box x-box{width:100%}#bitmap-area-buttons{width:100%;text-align:center}#bitmap-size-box{width:100%;padding-top:18px}#bitmap-area-buttons x-button,#bitmap-height-box,#bitmap-width-box,#vector-area-buttons x-button{flex:1}#bitmap-lock-button,#bitmap-lock-icon{align-self:flex-end;margin:0}#bitmap-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#bitmap-compression-box{margin-top:18px;width:100%}#bitmap-compression-heading{margin-bottom:0}#bitmap-compression-input{margin-left:6px;width:65px}#bitmap-background-box{padding-top:18px;padding-bottom:8px}#bitmap-background-color-select x-popover{--align: right}#vector-area-box{width:100%}#vector-area-buttons{width:100%;text-align:center}#export-section{padding:15px 20px;border-top:1px solid #ccc;background:#e6e6e6}#export-button{width:100%;height:40px}#export-button x-label{font-size:14px;flex:none}</style>\n\n      <h2 id=\"panel-heading\">Export</h2>\n\n      <section id=\"format-section\">\n        <h3 id=\"format-section-heading\">Format</h3>\n\n        <x-select id=\"format-select\">\n          <x-menu>\n            <x-menuitem value=\"png\" selected=\"true\">\n              <x-label>PNG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"jpeg\">\n              <x-label>JPEG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"webp\">\n              <x-label>WebP</x-label>\n            </x-menuitem>\n\n            <hr/>\n\n            <x-menuitem value=\"svg\">\n              <x-label>SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"svgz\">\n              <x-label>SVGZ</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"html\">\n              <x-label>HTML</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-select>\n      </section>\n\n      <section id=\"options-section\">\n        <h3 id=\"options-section-heading\">Options</h3>\n\n        <x-box id=\"bitmap-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"bitmap-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"bitmap-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"bitmap-size-box\" class=\"size-box\">\n            <x-box id=\"bitmap-width-box\" vertical>\n              <h4 id=\"bitmap-width-heading\">Width</h4>\n\n              <x-numberinput id=\"bitmap-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"bitmap-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"bitmap-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"bitmap-height-box\" vertical>\n              <h4 id=\"bitmap-height-heading\">Height</h4>\n\n              <x-numberinput id=\"bitmap-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-compression-box\" vertical hidden>\n            <h4 id=\"bitmap-compression-heading\">Compression</h4>\n\n            <x-box>\n              <x-slider id=\"bitmap-compression-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"bitmap-compression-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-background-box\" vertical>\n            <h4 id=\"bitmap-background-heading\">Background</h4>\n\n            <x-colorselect id=\"bitmap-background-color-select\" value=\"rgba(255, 255, 255, 0)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"bitmap-background-color-picker\" alphaslider></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"vector-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"vector-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"vector-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <section id=\"export-section\">\n        <x-button id=\"export-button\" skin=\"textured\">\n          <x-icon name=\"import-export\"></x-icon>\n          <x-label>Export</x-label>\n        </x-button>\n      </section>\n    </template>\n  "]),_templateObject35=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;min-width:200px;box-sizing:border-box}section{padding:12px 15px}h3{margin-bottom:7px}#smoothing-input{width:80px;margin-left:8px}</style>\n\n      <section id=\"smoothing-section\">\n        <h3>Smoothing</h3>\n\n        <x-box>\n          <x-slider id=\"smoothing-slider\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\"></x-slider>\n          <x-numberinput id=\"smoothing-input\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;min-width:200px;box-sizing:border-box}section{padding:12px 15px}h3{margin-bottom:7px}#smoothing-input{width:80px;margin-left:8px}</style>\n\n      <section id=\"smoothing-section\">\n        <h3>Smoothing</h3>\n\n        <x-box>\n          <x-slider id=\"smoothing-slider\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\"></x-slider>\n          <x-numberinput id=\"smoothing-input\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject36=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}section{padding:12px 15px}h3{margin-bottom:7px}#selection-mode-buttons{margin:4px 0 0}#selection-mode-buttons x-button{height:25px}#transform-preserve-section x-box{margin:5px 0}</style>\n\n      <section id=\"selection-section\">\n        <h3>Selection mode</h3>\n\n        <x-buttons id=\"selection-mode-buttons\" tracking=\"1\">\n          <x-button value=\"rect-contain\" toggled>\n            <x-icon name=\"selection-mode-contain\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button value=\"rect-intersect\">\n            <x-icon name=\"selection-mode-intersect\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"transform-preserve-section\">\n        <h3>Preserve</h3>\n\n        <x-box>\n          <x-checkbox id=\"preserve-stroke-width-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-stroke-width-checkbox\">Stroke width</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rect-radii-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rect-radii-checkbox\">Rectangle radii</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rotation-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rotation-checkbox\">Rotation</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-aspect-ratio-checkbox\"></x-checkbox>\n          <x-label for=\"preserve-aspect-ratio-checkbox\">Aspect ratio</x-label>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}section{padding:12px 15px}h3{margin-bottom:7px}#selection-mode-buttons{margin:4px 0 0}#selection-mode-buttons x-button{height:25px}#transform-preserve-section x-box{margin:5px 0}</style>\n\n      <section id=\"selection-section\">\n        <h3>Selection mode</h3>\n\n        <x-buttons id=\"selection-mode-buttons\" tracking=\"1\">\n          <x-button value=\"rect-contain\" toggled>\n            <x-icon name=\"selection-mode-contain\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button value=\"rect-intersect\">\n            <x-icon name=\"selection-mode-intersect\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"transform-preserve-section\">\n        <h3>Preserve</h3>\n\n        <x-box>\n          <x-checkbox id=\"preserve-stroke-width-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-stroke-width-checkbox\">Stroke width</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rect-radii-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rect-radii-checkbox\">Rectangle radii</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rotation-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rotation-checkbox\">Rotation</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-aspect-ratio-checkbox\"></x-checkbox>\n          <x-label for=\"preserve-aspect-ratio-checkbox\">Aspect ratio</x-label>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject37=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}section{padding:12px 15px}h3{margin-bottom:7px}#drawing-mode-buttons{margin:4px 0 0;width:100%}#drawing-mode-buttons x-button{flex:1;height:25px}</style>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\" toggled>\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\">\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}section{padding:12px 15px}h3{margin-bottom:7px}#drawing-mode-buttons{margin:4px 0 0;width:100%}#drawing-mode-buttons x-button{flex:1;height:25px}</style>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\" toggled>\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\">\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "]),_templateObject38=_taggedTemplateLiteral(["\n        <g class=\"repr\" transform=\"translate(",", ",") rotate(",")\" data-selected>\n          <line class=\"outer-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <line class=\"inner-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"","\"></rect>\n        </g>\n      "],["\n        <g class=\"repr\" transform=\"translate(",", ",") rotate(",")\" data-selected>\n          <line class=\"outer-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <line class=\"inner-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"","\"></rect>\n        </g>\n      "]),_templateObject39=_taggedTemplateLiteral(["<bx-guide x=\"","\" y=\"","\" angle=\"","\"></bx-guide>"],["<bx-guide x=\"","\" y=\"","\" angle=\"","\"></bx-guide>"]),_templateObject40=_taggedTemplateLiteral(["<line class=\"repr\" x1=\"","\" y1=\"","\" x2=\"","\" y2=\"","\"></line>"],["<line class=\"repr\" x1=\"","\" y1=\"","\" x2=\"","\" y2=\"","\"></line>"]),_templateObject41=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{display:block;box-sizing:border-box;width:100%;height:24px;padding:1px;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border:1px solid hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 10%));border-radius:4px;--thumb-border-radius: 4px}:host(:focus){outline:0}#thumbs,.thumb{width:100%;height:100%;position:relative}.thumb{width:33.333%;padding:0 10px;position:absolute;display:flex;flex:1;justify-content:center;align-items:center;box-sizing:border-box;z-index:0;color:#fff;border-radius:var(--thumb-border-radius);font-size:11px}#thumbs[data-animate] .thumb{transition:left .2s ease-in-out,background .2s ease-in-out}.thumb[data-socket=\"1\"]{left:0%}.thumb[data-socket=\"2\"]{left:33.333%}.thumb[data-socket=\"3\"]{left:66.666%}.thumb[data-dragged]{background:#387ec7;z-index:1}.thumb[data-selected]{background:#fff;color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));font-weight:700}:host(:focus) .thumb[data-selected]{box-shadow:0 0 0 5px rgba(59,153,252,.7)}</style>\n\n      <x-box id=\"thumbs\">\n        <div id=\"fill-thumb\" class=\"thumb\" data-value=\"fill\" data-socket=\"1\" data-selected>Fill</div>\n        <div id=\"stroke-thumb\" class=\"thumb\" data-value=\"stroke\" data-socket=\"2\">Stroke</div>\n        <div id=\"markers-thumb\" class=\"thumb\" data-value=\"markers\" data-socket=\"3\">Markers</div>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <style>:host{display:block;box-sizing:border-box;width:100%;height:24px;padding:1px;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border:1px solid hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 10%));border-radius:4px;--thumb-border-radius: 4px}:host(:focus){outline:0}#thumbs,.thumb{width:100%;height:100%;position:relative}.thumb{width:33.333%;padding:0 10px;position:absolute;display:flex;flex:1;justify-content:center;align-items:center;box-sizing:border-box;z-index:0;color:#fff;border-radius:var(--thumb-border-radius);font-size:11px}#thumbs[data-animate] .thumb{transition:left .2s ease-in-out,background .2s ease-in-out}.thumb[data-socket=\"1\"]{left:0%}.thumb[data-socket=\"2\"]{left:33.333%}.thumb[data-socket=\"3\"]{left:66.666%}.thumb[data-dragged]{background:#387ec7;z-index:1}.thumb[data-selected]{background:#fff;color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));font-weight:700}:host(:focus) .thumb[data-selected]{box-shadow:0 0 0 5px rgba(59,153,252,.7)}</style>\n\n      <x-box id=\"thumbs\">\n        <div id=\"fill-thumb\" class=\"thumb\" data-value=\"fill\" data-socket=\"1\" data-selected>Fill</div>\n        <div id=\"stroke-thumb\" class=\"thumb\" data-value=\"stroke\" data-socket=\"2\">Stroke</div>\n        <div id=\"markers-thumb\" class=\"thumb\" data-value=\"markers\" data-socket=\"3\">Markers</div>\n      </x-box>\n    </template>\n  "]),_templateObject42=_taggedTemplateLiteral(["<x-doctab value=\"about\"><x-label>About</x-label></x-doctab>"],["<x-doctab value=\"about\"><x-label>About</x-label></x-doctab>"]),_templateObject43=_taggedTemplateLiteral(["<bx-about></bx-about>"],["<bx-about></bx-about>"]),_templateObject44=_taggedTemplateLiteral(["<x-doctab value=\"preferences\"><x-label>Preferences</x-label></x-doctab>"],["<x-doctab value=\"preferences\"><x-label>Preferences</x-label></x-doctab>"]),_templateObject45=_taggedTemplateLiteral(["<bx-preferences></bx-preferences>"],["<bx-preferences></bx-preferences>"]),_templateObject46=_taggedTemplateLiteral(["<x-doctab><x-label>","</x-label></x-doctab>"],["<x-doctab><x-label>","</x-label></x-doctab>"]),_templateObject47=_taggedTemplateLiteral(["<bx-editor></bx-editor>"],["<bx-editor></bx-editor>"]),_templateObject48=_taggedTemplateLiteral(["<x-doctab><x-label>Untitled</x-label></x-doctab>"],["<x-doctab><x-label>Untitled</x-label></x-doctab>"]);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toArray(e){return Array.isArray(e)?e:Array.from(e)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}{"use strict",window.BoxySVG={classes:{},utils:{}};{var define=customElements.define;customElements.define=function(e,t,n){if(SVGElement.isPrototypeOf(t)){if(t.prototype.connectedCallback&&(t.prototype.attachedCallback=t.prototype.connectedCallback),t.prototype.disconnectedCallback&&(t.prototype.dettachedCallback=t.prototype.disconnectedCallback),t.prototype.attributeChangedCallback){var a=t.prototype.attributeChangedCallback;t.prototype.attributeChangedCallback=function(e,n,r){t.observedAttributes&&t.observedAttributes.includes(e)&&a.call(this,e,n,r)}}t.prototype.createdCallback=function(){if(this.init(),t.observedAttributes&&this.attributeChangedCallback){var e=!0,n=!1,a;try{for(var r=this.attributes[Symbol.iterator](),o,i;!(e=(o=r.next()).done);e=!0)i=o.value,t.observedAttributes.includes(i.name)&&this.attributeChangedCallback(i.name)}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}},document.registerElement(e,{extends:n&&n.extends?n.extends:"g",prototype:t.prototype})}else define.call(customElements,e,t,n)}}Object.defineProperty(HTMLHeadingElement.prototype,"disabled",{enumerable:!1,configurable:!1,get:function(){return this.hasAttribute("disabled")},set:function(e){!0===e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),SVGUseElement.prototype.getBBox=function(){var e=SVGGraphicsElement.prototype.getBBox.call(this);return e.x+=this.x.baseVal.value,e.y+=this.y.baseVal.value,e};{var $proxy=Symbol();Object.defineProperty(SVGElement.prototype,"dataset",{enumerable:!0,configurable:!1,get:function(){if(!this[$proxy]){var e=this;this[$proxy]=new Proxy({},{get:function(t,n){var a="data-"+this._toDashCase(n);return e.hasAttribute(a)?e.getAttribute(a):void 0},set:function(t,n,a){var r="data-"+this._toDashCase(n);e.setAttribute(r,a)},getOwnPropertyDescriptor:function(t,n){var a="data-"+this._toDashCase(n);return e.hasAttribute(a)?{value:e.getAttribute(a),writable:!0,configurable:!0,enumerable:!0}:void 0},getPrototypeOf:function(){return DOMStringMap.prototype},deleteProperty:function(t,n){var a="data-"+this._toDashCase(n);return!!e.hasAttribute(a)&&(e.removeAttribute(a),!0)},ownKeys:function(){var t=[],n=!0,a=!1,r;try{for(var o=e.attributes[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"data-"===s.name.substring(0,5)){var l=this._toCamelCase(s.name.substring(5));t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t},_toCamelCase:function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},_toDashCase:function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}})}return this[$proxy]}})}if(!SVGPathElement.prototype.getPathData||!SVGPathElement.prototype.setPathData){var commandsMap={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},Source=function(){function e(t){_classCallCheck(this,e),this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}return _createClass(e,[{key:"parseSegment",value:function(){var e=this._string[this._currentIndex],t=commandsMap[e]?commandsMap[e]:null;if(null===t){if(null===this._prevCommand)return null;if(t=("+"===e||"-"===e||"."===e||"0"<=e&&"9">=e)&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null,null===t)return null}else this._currentIndex+=1;this._prevCommand=t;var n=null,a=t.toUpperCase();return"H"===a||"V"===a?n=[this._parseNumber()]:"M"===a||"L"===a||"T"===a?n=[this._parseNumber(),this._parseNumber()]:"S"===a||"Q"===a?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===a?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===a?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===a&&(this._skipOptionalSpaces(),n=[]),null===n||0<=n.indexOf(null)?null:{type:t,values:n}}},{key:"hasMoreData",value:function(){return this._currentIndex<this._endIndex}},{key:"peekSegmentType",value:function(){var e=this._string[this._currentIndex];return commandsMap[e]?commandsMap[e]:null}},{key:"initialCommandIsMoveTo",value:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e}},{key:"_isCurrentSpace",value:function(){var e=this._string[this._currentIndex];return" ">=e&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)}},{key:"_skipOptionalSpaces",value:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex}},{key:"_skipOptionalSpacesOrDelimiter",value:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex]?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)}},{key:"_parseNumber",value:function(){var e=0,t=0,n=1,a=0,r=1,o=1,i=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||("0">this._string[this._currentIndex]||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&"9">=this._string[this._currentIndex];)this._currentIndex+=1;if(this._currentIndex!==s)for(var l=this._currentIndex-1,d=1;l>=s;)t+=d*(this._string[l]-"0"),l-=1,d*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||"0">this._string[this._currentIndex]||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&"9">=this._string[this._currentIndex];)n*=10,a+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==i&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||"0">this._string[this._currentIndex]||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&"9">=this._string[this._currentIndex];)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var u=t+a;return(u*=r,e&&(u*=Math.pow(10,o*e)),i===this._currentIndex)?null:(this._skipOptionalSpacesOrDelimiter(),u)}},{key:"_parseArcFlag",value:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else if("1"===t)e=1;else return null;return this._skipOptionalSpacesOrDelimiter(),e}}]),e}(),parsePathDataString=function(e){if(!e||0===e.length)return[];var t=new Source(e),n=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var a=t.parseSegment();if(null===a)break;else n.push(a)}return n},setAttribute=SVGPathElement.prototype.setAttribute,removeAttribute=SVGPathElement.prototype.removeAttribute,$cachedPathData=Symbol(),$cachedNormalizedPathData=Symbol(),arcToCubicCurves=function e(n,a,r,o,i,s,l,d,u,c){var p=Math.asin,m=Math.abs,b=Math.sqrt,g=Math.sin,v=Math.cos,f=Math.PI,_=function(e,t,n){var a=e*v(n)-t*g(n),r=e*g(n)+t*v(n);return{x:a,y:r}},w=function(e){return f*e/180}(l),A=[],C=void 0,S=void 0,E=void 0,T=void 0;if(c)C=c[0],S=c[1],E=c[2],T=c[3];else{var P=_(n,a,-w);n=P.x,a=P.y;var L=_(r,o,-w);r=L.x,o=L.y;var M=(n-r)/2,x=(a-o)/2,y=M*M/(i*i)+x*x/(s*s);1<y&&(y=b(y),i=y*i,s=y*s);var h=d===u?-1:1;var D=i*i,I=s*s,V=h*b(m((D*I-D*x*x-I*M*M)/(D*x*x+I*M*M)));E=V*i*x/s+(n+r)/2,T=V*-s*M/i+(a+o)/2,C=p(parseFloat(((a-T)/s).toFixed(9))),S=p(parseFloat(((o-T)/s).toFixed(9))),n<E&&(C=f-C),r<E&&(S=f-S),0>C&&(C=2*f+C),0>S&&(S=2*f+S),u&&C>S&&(C-=2*f),!u&&S>C&&(S-=2*f)}var k=S-C;if(m(k)>120*f/180){var N=S,R=r,z=o;S=u&&S>C?C+1*(120*f/180):C+-1*(120*f/180),r=E+i*v(S),o=T+s*g(S),A=e(r,o,R,z,i,s,l,0,u,[S,N,E,T])}k=S-C;var G=v(C),B=g(C),O=v(S),j=g(S),q=Math.tan(k/4),t=4/3*i*q,U=4/3*s*q,H=[n,a],F=[n+t*B,a-U*G],$=[r+t*j,o-U*O],Y=[r,o];if(F[0]=2*H[0]-F[0],F[1]=2*H[1]-F[1],c)return[F,$,Y].concat(A);A=[F,$,Y].concat(A).join().split(",");var X=[],W=[];return A.forEach(function(e,t){t%2?W.push(_(A[t-1],A[t],w).y):W.push(_(A[t],A[t+1],w).x),6===W.length&&(X.push(W),W=[])}),X},clonePathData=function(e){return e.map(function(e){return{type:e.type,values:[].concat(_toConsumableArray(e.values))}})},absolutizePathData=function(e){var t=[],n=null,a=null,r=null,o=null,i=!0,s=!1,l;try{for(var d=e[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p=c.type;if("M"===p){var h=_slicedToArray(c.values,2),m=h[0],b=h[1];t.push({type:"M",values:[m,b]}),r=m,o=b,n=m,a=b}else if("m"===p){var x=_slicedToArray(c.values,2),g=x[0],v=x[1];g+=n,v+=a,t.push({type:"M",values:[g,v]}),r=g,o=v,n=g,a=v}else if("L"===p){var y=_slicedToArray(c.values,2),f=y[0],_=y[1];t.push({type:"L",values:[f,_]}),n=f,a=_}else if("l"===p){var w=_slicedToArray(c.values,2),k=w[0],A=w[1];k+=n,A+=a,t.push({type:"L",values:[k,A]}),n=k,a=A}else if("C"===p){var C=_slicedToArray(c.values,6),S=C[0],E=C[1],T=C[2],P=C[3],L=C[4],M=C[5];t.push({type:"C",values:[S,E,T,P,L,M]}),n=L,a=M}else if("c"===p){var D=_slicedToArray(c.values,6),I=D[0],V=D[1],N=D[2],R=D[3],z=D[4],G=D[5];I+=n,V+=a,N+=n,R+=a,z+=n,G+=a,t.push({type:"C",values:[I,V,N,R,z,G]}),n=z,a=G}else if("Q"===p){var B=_slicedToArray(c.values,4),O=B[0],j=B[1],q=B[2],U=B[3];t.push({type:"Q",values:[O,j,q,U]}),n=q,a=U}else if("q"===p){var H=_slicedToArray(c.values,4),F=H[0],$=H[1],Y=H[2],X=H[3];F+=n,$+=a,Y+=n,X+=a,t.push({type:"Q",values:[F,$,Y,X]}),n=Y,a=X}else if("A"===p){var W=_slicedToArray(c.values,7),K=W[0],Z=W[1],J=W[2],Q=W[3],ee=W[4],te=W[5],ne=W[6];t.push({type:"A",values:[K,Z,J,Q,ee,te,ne]}),n=te,a=ne}else if("a"===p){var ae=_slicedToArray(c.values,7),re=ae[0],oe=ae[1],ie=ae[2],se=ae[3],le=ae[4],de=ae[5],ue=ae[6];de+=n,ue+=a,t.push({type:"A",values:[re,oe,ie,se,le,de,ue]}),n=de,a=ue}else if("H"===p){var ce=_slicedToArray(c.values,1),pe=ce[0];t.push({type:"H",values:[pe]}),n=pe}else if("h"===p){var he=_slicedToArray(c.values,1),me=he[0];me+=n,t.push({type:"H",values:[me]}),n=me}else if("V"===p){var be=_slicedToArray(c.values,1),xe=be[0];t.push({type:"V",values:[xe]}),a=xe}else if("v"===p){var ge=_slicedToArray(c.values,1),ve=ge[0];ve+=a,t.push({type:"V",values:[ve]}),a=ve}else if("S"===p){var ye=_slicedToArray(c.values,4),fe=ye[0],_e=ye[1],we=ye[2],ke=ye[3];t.push({type:"S",values:[fe,_e,we,ke]}),n=we,a=ke}else if("s"===p){var Ae=_slicedToArray(c.values,4),Ce=Ae[0],Se=Ae[1],Ee=Ae[2],Te=Ae[3];Ce+=n,Se+=a,Ee+=n,Te+=a,t.push({type:"S",values:[Ce,Se,Ee,Te]}),n=Ee,a=Te}else if("T"===p){var Pe=_slicedToArray(c.values,2),Le=Pe[0],Me=Pe[1];t.push({type:"T",values:[Le,Me]}),n=Le,a=Me}else if("t"===p){var De=_slicedToArray(c.values,2),Ie=De[0],Ve=De[1];Ie+=n,Ve+=a,t.push({type:"T",values:[Ie,Ve]}),n=Ie,a=Ve}else("Z"===p||"z"===p)&&(t.push({type:"Z",values:[]}),n=r,a=o)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}return t},reducePathData=function(e){var t=[],n=null,a=null,r=null,o=null,i=null,s=null,l=null,d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0){if(m=h.value,"M"===m.type){var b=_slicedToArray(m.values,2),g=b[0],x=b[1];t.push({type:"M",values:[g,x]}),s=g,l=x,o=g,i=x}else if("C"===m.type){var v=_slicedToArray(m.values,6),y=v[0],f=v[1],_=v[2],w=v[3],k=v[4],A=v[5];t.push({type:"C",values:[y,f,_,w,k,A]}),a=_,r=w,o=k,i=A}else if("L"===m.type){var C=_slicedToArray(m.values,2),S=C[0],E=C[1];t.push({type:"L",values:[S,E]}),o=S,i=E}else if("H"===m.type){var T=_slicedToArray(m.values,1),P=T[0];t.push({type:"L",values:[P,i]}),o=P}else if("V"===m.type){var L=_slicedToArray(m.values,1),M=L[0];t.push({type:"L",values:[o,M]}),i=M}else if("S"===m.type){var D=_slicedToArray(m.values,4),I=D[0],V=D[1],N=D[2],R=D[3],z=void 0,G=void 0;"C"===n||"S"===n?(z=o+(o-a),G=i+(i-r)):(z=o,G=i),t.push({type:"C",values:[z,G,I,V,N,R]}),a=I,r=V,o=N,i=R}else if("T"===m.type){var B=_slicedToArray(m.values,2),O=B[0],j=B[1],q=void 0,U=void 0;"Q"===n||"T"===n?(q=o+(o-a),U=i+(i-r)):(q=o,U=i);var H=o+2*(q-o)/3,F=i+2*(U-i)/3,$=O+2*(q-O)/3,Y=j+2*(U-j)/3;t.push({type:"C",values:[H,F,$,Y,O,j]}),a=q,r=U,o=O,i=j}else if("Q"===m.type){var X=_slicedToArray(m.values,4),W=X[0],K=X[1],Z=X[2],J=X[3],Q=o+2*(W-o)/3,ee=i+2*(K-i)/3;t.push({type:"C",values:[Q,ee,Z+2*(W-Z)/3,J+2*(K-J)/3,Z,J]}),a=W,r=K,o=Z,i=J}else"A"===m.type?function(){var e=_slicedToArray(m.values,7),n=e[0],a=e[1],r=e[2],s=e[3],l=e[4],d=e[5],u=e[6];if(0===n||0===a)t.push({type:"C",values:[o,i,d,u,d,u]}),o=d,i=u;else if(o!==d||i!==u){var c=arcToCubicCurves(o,i,d,u,n,a,r,s,l);c.forEach(function(e){t.push({type:"C",values:e}),o=d,i=u})}}():"Z"===m.type&&(t.push(m),o=s,i=l);n=m.type}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return t};SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[$cachedPathData]=null,this[$cachedNormalizedPathData]=null),setAttribute.call(this,e,t)},SVGPathElement.prototype.removeAttribute=function(e){"d"===e&&(this[$cachedPathData]=null,this[$cachedNormalizedPathData]=null),removeAttribute.call(this,e)},SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize){if(this[$cachedNormalizedPathData])return clonePathData(this[$cachedNormalizedPathData]);var t;this[$cachedPathData]?t=clonePathData(this[$cachedPathData]):(t=parsePathDataString(this.getAttribute("d")||""),this[$cachedPathData]=clonePathData(t));var n=reducePathData(absolutizePathData(t));return this[$cachedNormalizedPathData]=clonePathData(n),n}if(this[$cachedPathData])return clonePathData(this[$cachedPathData]);var a=parsePathDataString(this.getAttribute("d")||"");return this[$cachedPathData]=clonePathData(a),a},SVGPathElement.prototype.setPathData=function(e){if(0===e.length)this.removeAttribute("d");else{for(var t="",n=0,a=e.length,r;n<a;n+=1)r=e[n],0<n&&(t+=" "),t+=r.type,r.values&&0<r.values.length&&(t+=" "+r.values.join(" "));this.setAttribute("d",t)}},SVGRectElement.prototype.getPathData=function(e){var t=this.x.baseVal.value,n=this.y.baseVal.value,a=this.width.baseVal.value,r=this.height.baseVal.value,o=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,i=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;o>a/2&&(o=a/2),i>r/2&&(i=r/2);var s=[{type:"M",values:[t+o,n]},{type:"H",values:[t+a-o]},{type:"A",values:[o,i,0,0,1,t+a,n+i]},{type:"V",values:[n+r-i]},{type:"A",values:[o,i,0,0,1,t+a-o,n+r]},{type:"H",values:[t+o]},{type:"A",values:[o,i,0,0,1,t,n+r-i]},{type:"V",values:[n+i]},{type:"A",values:[o,i,0,0,1,t+o,n]},{type:"Z",values:[]}];return s=s.filter(function(e){return"A"===e.type&&(0===e.values[0]||0===e.values[1])?!1:!0}),e&&!0===e.normalize&&(s=reducePathData(s)),s},SVGCircleElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.r.baseVal.value,r=[{type:"M",values:[t+a,n]},{type:"A",values:[a,a,0,0,1,t,n+a]},{type:"A",values:[a,a,0,0,1,t-a,n]},{type:"A",values:[a,a,0,0,1,t,n-a]},{type:"A",values:[a,a,0,0,1,t+a,n]},{type:"Z",values:[]}];return e&&!0===e.normalize&&(r=reducePathData(r)),r},SVGEllipseElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.rx.baseVal.value,r=this.ry.baseVal.value,o=[{type:"M",values:[t+a,n]},{type:"A",values:[a,r,0,0,1,t,n+r]},{type:"A",values:[a,r,0,0,1,t-a,n]},{type:"A",values:[a,r,0,0,1,t,n-r]},{type:"A",values:[a,r,0,0,1,t+a,n]},{type:"Z",values:[]}];return e&&!0===e.normalize&&(o=reducePathData(o)),o},SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0,n;t<this.points.numberOfItems;t+=1)n=this.points.getItem(t),e.push({type:0==t?"M":"L",values:[n.x,n.y]});return e},SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0,n;t<this.points.numberOfItems;t+=1)n=this.points.getItem(t),e.push({type:0==t?"M":"L",values:[n.x,n.y]});return e.push({type:"Z",values:[]}),e}}}{{var StringScanner=function(){function e(t){_classCallCheck(this,e),this.text=t,this.cursor=0,this.line=1,this.column=1,this._storedPosition={cursor:0,line:1,column:1}}return _createClass(e,[{key:"read",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t="",n=this.cursor,a=0,r;a<e&&(r=this.text[n+a],void 0!==r);a+=1)t+=r,this.cursor+=1,"\n"===r?(this.line+=1,this.column=1):this.column+=1;return""===t?null:t}},{key:"peek",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t="",n=0,a;n<e&&(a=this.text[this.cursor+n],void 0!==a);n+=1)t+=a;return""===t?null:t}},{key:"storePosition",value:function(){var e=this.cursor,t=this.line,n=this.column;this._storedPosition={cursor:e,line:t,column:n}}},{key:"restorePosition",value:function(){var e=this._storedPosition,t=e.cursor,n=e.line,a=e.column;this.cursor=t,this.line=n,this.column=a}}]),e}();BoxySVG.classes.StringScanner=StringScanner}}{{var TokensScanner=function(){function e(t){_classCallCheck(this,e),this._tokens=t,this.currentToken=null,this.position=0}return _createClass(e,[{key:"read",value:function(){var e=this._tokens[this.position];return this.currentToken=e,"EOF"===e.tokenType?e:(this.position+=1,e)}},{key:"reset",value:function(e){this.position=e}}]),e}();BoxySVG.classes.TokensScanner=TokensScanner}}{{var isAppleDevice=["iPhone","iPad"].includes(navigator.platform)||navigator.platform.startsWith("Mac"),defaultArtworkSVG="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 500 500\"></svg>",namespaces={bx:"https://boxy-svg.com",html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},blendModeNames=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],cursorNames=["context-menu","help","pointer","progress","wait ","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out "],ariaRoles=["alert","alertdialog","application","article","banner","button","cell","checkbox","columnheader","combobox","command","complementary","composite","contentinfo","definition","dialog","directory","document","feed","figure","form","grid","gridcell","group","heading","img","input","landmark","link","list","listbox","listitem","log","main","marquee","math","menu","menubar","menuitem","menuitemcheckbox","menuitemradio","navigation","none","note","option","presentation","progressbar","radio","radiogroup","range","region","roletype","row","rowgroup","rowheader","scrollbar","search","searchbox","section","sectionhead","select","separator","slider","spinbutton","status","structure","switch","tab","table","tablist","tabpanel","term","textbox","timer","toolbar","tooltip","tree","treegrid","treeitem","widget","window"],lengthUnits=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","q","in","pc","pt","px"],angleUnits=["deg","grad","rad","turn"],alignValues=["none","xMinYMin","xMidYMin","xMaxYMin","xMinYMid","xMidYMid","xMaxYMid","xMinYMax","xMidYMax","xMaxYMax"],hitTestPoints=[[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[-3,-2],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[-3,-1],[-2,-1],[-1,-1],[0,-1],[1,-1],[2,-1],[3,-1],[-3,0],[-2,0],[-1,0],[0,0],[1,0],[2,0],[3,0],[-3,1],[-2,1],[-1,1],[0,1],[1,1],[2,1],[3,1],[-3,2],[-2,2],[-1,2],[0,2],[1,2],[2,2],[3,2],[-3,3],[-2,3],[-1,3],[0,3],[1,3],[2,3],[3,3]],shapeElementNames=["circle","ellipse","line","path","polygon","polyline","rect"],graphicsElementNames=[].concat(shapeElementNames,["image","text","textPath","tspan"]),objectElementNames=[].concat(shapeElementNames,["image","text","g","a","svg","use"]),paintServerElementNames=["solidcolor","linearGradient","radialGradient","pattern"],paintableElementNames=[].concat(shapeElementNames,["text","textPath","tspan"]),descriptiveElementNames=["desc","bx-title"],structuralElementNames=["svg","g","defs","symbol","use"],filterPrimitiveElementNames=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"],filterTransferFunctionElementNames=["feFuncA","feFuncB","feFuncG","feFuncR"],filterLightSourceElementNames=["feDistantLight","fePointLight","feSpotLight"],accessibleElementNames=[].concat(_toConsumableArray(graphicsElementNames),["a","g","svg","symbol","use","view"]),svgElementNames=[].concat(_toConsumableArray(graphicsElementNames),paintServerElementNames,descriptiveElementNames,structuralElementNames,filterPrimitiveElementNames,filterTransferFunctionElementNames,filterLightSourceElementNames,["a","marker","mask","feMergeNode","filter","clipPath","stop","script","style","view"]),coreAttributeNames=["id","class","style","lang","tabindex"],filterPrimitiveAttributeNames=["x","y","width","height","result"],transferFunctionAttributeNames=["type","tableValues","slope","intercept","amplitude","exponent","offset"],eventAttributeNames=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointerlockchange","onpointerlockerror","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onselectionchange","onshow","onsort","onstalled","onsubmit","onsuspend","ontimeupdate","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontoggle","onunload","onvolumechange","onwaiting"],textSpecificPropertyNames=["direction","dominant-baseline","font-family","font-size","font-stretch","font-style","font-variant","font-weight","letter-spacing","text-anchor","text-decoration","text-rendering","unicode-bidi","word-spacing","writing-mode"],urlValueAcceptingPropertyNames=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],namedColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fontWeightsByMatchingOrder={100:["100","200","300","400","500","600","700","800","900"],200:["200","100","300","400","500","600","700","800","900"],300:["300","200","100","400","500","600","700","800","900"],400:["400","500","300","200","100","600","700","800","900"],500:["500","400","300","200","100","600","700","800","900"],600:["600","700","800","900","500","400","300","200","100"],700:["700","800","900","600","500","400","300","200","100"],800:["800","900","700","600","500","400","300","200","100"],900:["900","800","700","600","500","400","300","200","100"]},contentSchemas={a:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","#text"]),"bx-title":["#text"],circle:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),clipPath:[].concat(descriptiveElementNames,shapeElementNames,["text","use","script","style"]),defs:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","bx-guide"]),desc:["#text"],ellipse:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),feBlend:[].concat(descriptiveElementNames,["script","style"]),feColorMatrix:[].concat(descriptiveElementNames,["script","style"]),feComponentTransfer:[].concat(descriptiveElementNames,filterTransferFunctionElementNames,["script","style"]),feComposite:[].concat(descriptiveElementNames,["script","style"]),feConvolveMatrix:[].concat(descriptiveElementNames,["script","style"]),feDiffuseLighting:[].concat(descriptiveElementNames,filterLightSourceElementNames,["script","style"]),feDisplacementMap:[].concat(descriptiveElementNames,["script","style"]),feDistantLight:[].concat(descriptiveElementNames,["script","style"]),feDropShadow:[].concat(descriptiveElementNames,["script","style"]),feFlood:[].concat(descriptiveElementNames,["script","style"]),feFuncR:[].concat(descriptiveElementNames,["script","style"]),feFuncG:[].concat(descriptiveElementNames,["script","style"]),feFuncB:[].concat(descriptiveElementNames,["script","style"]),feFuncA:[].concat(descriptiveElementNames,["script","style"]),feGaussianBlur:[].concat(descriptiveElementNames,["script","style"]),feImage:[].concat(descriptiveElementNames,["script","style"]),feMerge:[].concat(descriptiveElementNames,["feMergeNode","script","style"]),feMergeNode:[].concat(descriptiveElementNames,["script","style"]),feMorphology:[].concat(descriptiveElementNames,["script","style"]),feOffset:[].concat(descriptiveElementNames,["script","style"]),fePointLight:[].concat(descriptiveElementNames,["script","style"]),feSpecularLighting:[].concat(descriptiveElementNames,["feDistantLight","fePointLight","feSpotLight","script","style"]),feSpotLight:[].concat(descriptiveElementNames,["script","style"]),feTile:[].concat(descriptiveElementNames,["script","style"]),feTurbulence:[].concat(descriptiveElementNames,["script","style"]),filter:[].concat(filterPrimitiveElementNames,descriptiveElementNames,["script","style"]),g:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),image:[].concat(descriptiveElementNames,["clipPath","mask","script","style"]),line:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),linearGradient:[].concat(descriptiveElementNames,["script","stop","style"]),marker:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),mask:[].concat(descriptiveElementNames,shapeElementNames,structuralElementNames,paintServerElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","text"]),path:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),pattern:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),polygon:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),polyline:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),radialGradient:[].concat(descriptiveElementNames,["script","stop","style"]),rect:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),script:["#text"],solidcolor:[].concat(descriptiveElementNames,["script","style"]),stop:[].concat(descriptiveElementNames,["script","style"]),style:["#text"],svg:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),symbol:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),text:[].concat(descriptiveElementNames,paintServerElementNames,["a","clipPath","marker","mask","script","style","tspan","textPath","#text"]),textPath:[].concat(descriptiveElementNames,paintServerElementNames,["a","clipPath","marker","mask","script","style","tspan","#text"]),tspan:[].concat(descriptiveElementNames,paintServerElementNames,["a","script","style","tspan","#text"]),use:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","mask","script","style"]),view:[].concat(descriptiveElementNames,["script","style"])},attributeSchemas=[{name:"amplitude",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"aria-activedescendant",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-atomic",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-autocomplete",values:[{type:"token",tokens:["inline","list","both","none"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-busy",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-checked",values:[{type:"token",tokens:["true","false","mixed"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colcount",values:[{type:"integer",min:-1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colindex",values:[{type:"integer",min:1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colspan",values:[{type:"integer",min:1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-controls",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-current",values:[{type:"token",tokens:["page","step","location","date","time","true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-describedby",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-details",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-disabled",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-dropeffect",values:[{type:"token-list",tokens:["copy","execute","link","move","none","popup"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-errormessage",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-expanded",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-flowto",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-grabbed",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-haspopup",values:[{type:"token",tokens:["true","false","menu","listbox","tree","grid","dialog"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-hidden",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-invalid",values:[{type:"token",tokens:["true","false","grammar","spelling"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-label",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-labelledby",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-level",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-live",values:[{type:"token",tokens:["assertive","polite","off"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-modal",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-multiline",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-multiselectable",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-orientation",values:[{type:"token",tokens:["horizontal","vertical"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-owns",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-placeholder",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-posinset",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-pressed",values:[{type:"token",tokens:["true","false","mixed"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-readonly",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-relevant",values:[{type:"token-list",tokens:["additions","removals","text","all"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-required",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-roledescription",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowcount",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowindex",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowspan",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-selected",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-setsize",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-sort",values:[{type:"token",tokens:["ascending","descending","none","other"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuemax",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuemin",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuenow",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuetext",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"azimuth",values:[{type:"number"}],appliesTo:["feDistantLight"]},{name:"baseFrequency",values:[{type:"number-optional-number",min:0}],appliesTo:["feTurbulence"]},{name:"bias",values:[{type:"number"}],appliesTo:["feConvolveMatrix"]},{name:"class",values:[{type:"class-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"clipPathUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["clipPath"]},{name:"crossorigin",values:[{type:"token",tokens:["anonymous","use-credentials"]}],appliesTo:["feImage","image","script"]},{name:"cx",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["radialGradient","circle","ellipse"]},{name:"cy",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["radialGradient","circle","ellipse"]},{name:"d",values:[{type:"path-data"}],appliesTo:["path","textPath"]},{name:"diffuseConstant",values:[{type:"number",min:0}],appliesTo:["feDiffuseLighting"]},{name:"divisor",values:[{type:"number"}],appliesTo:["feConvolveMatrix"]},{name:"download",values:[{type:"boolean"}],appliesTo:["a"]},{name:"dx",values:[{type:"number"}],appliesTo:["feDropShadow","feOffset"]},{name:"dy",values:[{type:"number"}],appliesTo:["feDropShadow","feOffset"]},{name:"edgeMode",values:[{type:"token-list",tokens:["duplicate","wrap","none"]}],appliesTo:["feConvolveMatrix","feGaussianBlur"]},{name:"elevation",values:[{type:"number"}],appliesTo:["feDistantLight"]},{name:"exponent",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"filterUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["filter"]},{name:"fr",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"fx",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"fy",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"gradientUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["linearGradient","radialGradient"]},{name:"gradientTransform",values:[{type:"transform-list"}],appliesTo:["linearGradient","radialGradient"]},{name:"height",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","svg","rect","image"])},{name:"href",values:[{type:"href"}],appliesTo:["a","feImage","image","linearGradient","radialGradient","pattern","script","textPath","use"]},{name:"hreflang",values:[{type:"language-tag"}],appliesTo:["a"]},{name:"id",values:[{type:"id-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"in",values:[{type:"token",tokens:["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"]},{type:"ident"}],appliesTo:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feGaussianBlur","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile"]},{name:"in2",values:[{type:"token",tokens:["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"]},{type:"ident"}],appliesTo:["feBlend","feComposite","feDisplacementMap"]},{name:"intercept",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"k1",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k2",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k3",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k4",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"kernelMatrix",values:[{type:"number-list"}],appliesTo:["feConvolveMatrix"]},{name:"kernelUnitLength",values:[{type:"number-optional-number"}],appliesTo:["feConvolveMatrix","feDiffuseLighting","feSpecularLighting"]},{name:"lang",values:[{type:"language-tag"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"lengthAdjust",values:[{type:"token",tokens:["spacing","spacingAndGlyphs"]}],appliesTo:["text","textPath","tspan"]},{name:"limitingConeAngle",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"markerHeight",values:[{type:"length",min:0},{type:"percentage",min:0},{type:"number",min:0}],appliesTo:["marker"]},{name:"markerUnits",values:[{type:"token",tokens:["strokeWidth","userSpaceOnUse"]}],appliesTo:["marker"]},{name:"markerWidth",values:[{type:"length",min:0},{type:"percentage",min:0},{type:"number",min:0}],appliesTo:["marker"]},{name:"maskContentUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["mask"]},{name:"maskUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["mask"]},{name:"media",values:[{type:"media-query-list"}],appliesTo:["style"]},{name:"method",values:[{type:"token",tokens:["align","stretch"]}],appliesTo:["textPath"]},{name:"mode",values:[{type:"token",tokens:[].concat(blendModeNames)}],appliesTo:["feBlend"]},{name:"numOctaves",values:[{type:"integer"}],appliesTo:["feTurbulence"]},{name:"offset",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"offset",values:[{type:"number"},{type:"percentage"}],appliesTo:["stop"]},{name:"operator",values:[{type:"token",tokens:["over","in","out","atop","xor","lighter","arithmetic"]}],appliesTo:["feComposite"]},{name:"operator",values:[{type:"token",tokens:["erode","dilate"]}],appliesTo:["feMorphology"]},{name:"order",values:[{type:"number-optional-number"}],appliesTo:["feConvolveMatrix"]},{name:"orient",values:[{type:"token",tokens:["auto","auto-start-reverse"]},{type:"angle"},{type:"number"}],appliesTo:["marker"]},{name:"path",values:[{type:"path-data"}],appliesTo:["textPath"]},{name:"pathLength",values:[{type:"number"}],appliesTo:["circle","ellipse","line","path","polygon","polyline","rect"]},{name:"patternContentUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["pattern"]},{name:"patternTransform",values:[{type:"transform-list"}],appliesTo:["pattern"]},{name:"patternUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["pattern"]},{name:"points",values:[{type:"points"}],appliesTo:["polygon","polyline"]},{name:"pointsAtX",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"pointsAtY",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"pointsAtZ",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"preserveAlpha",values:[{type:"token",tokens:["true","false"]}],appliesTo:["feConvolveMatrix"]},{name:"preserveAspectRatio",values:[{type:"aspect-ratio"}],appliesTo:["feImage","image","marker","pattern","svg","symbol","view"]},{name:"primitiveUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["filter"]},{name:"r",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["radialGradient","circle"]},{name:"rx",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["ellipse","rect"]},{name:"ry",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["ellipse","rect"]},{name:"radius",values:[{type:"number-optional-number",min:0}],appliesTo:["feMorphology"]},{name:"refX",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["center","left","right"]}],appliesTo:["marker","symbol"]},{name:"refY",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["center","top","bottom"]}],appliesTo:["marker","symbol"]},{name:"rel",values:[{type:"token-list",tokens:["alternate","author","bookmark","external","help","license","next","nofollow","noopener","noreferrer","prev","search","tag"]}],appliesTo:["a"]},{name:"result",values:[{type:"ident"}],appliesTo:[].concat(filterPrimitiveElementNames)},{name:"role",values:[{type:"token-list",tokens:[].concat(ariaRoles)}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"scale",values:[{type:"number"}],appliesTo:["feDisplacementMap"]},{name:"seed",values:[{type:"number"}],appliesTo:["feTurbulence"]},{name:"side",values:[{type:"token",tokens:["left","right"]}],appliesTo:["textPath"]},{name:"slope",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"spacing",values:[{type:"token",tokens:["auto","exact"]}],appliesTo:["textPath"]},{name:"specularConstant",values:[{type:"number"}],appliesTo:["feSpecularLighting"]},{name:"specularExponent",values:[{type:"number"}],appliesTo:["feSpecularLighting","feSpotLight"]},{name:"spreadMethod",values:[{type:"token",tokens:["pad","reflect","repeat"]}],appliesTo:["linearGradient","radialGradient"]},{name:"startOffset",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["textPath"]},{name:"stdDeviation",values:[{type:"number-optional-number"}],appliesTo:["feDropShadow","feGaussianBlur"]},{name:"stitchTiles",values:[{type:"token",tokens:["stitch","noStitch"]}],appliesTo:["feTurbulence"]},{name:"style",values:[{type:"style-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"surfaceScale",values:[{type:"number"}],appliesTo:["feDiffuseLighting","feSpecularLighting"]},{name:"tabindex",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"tableValues",values:[{type:"number-list"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"target",values:[{type:"token",tokens:["_self","_parent","_top","_blank"]}],appliesTo:["a"]},{name:"targetX",values:[{type:"integer"}],appliesTo:["feConvolveMatrix"]},{name:"targetY",values:[{type:"integer"}],appliesTo:["feConvolveMatrix"]},{name:"textLength",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["text","textPath","tspan"]},{name:"transform",values:[{type:"transform-list"}],appliesTo:["circle","ellipse","line","path","polygon","polyline","rect","image","text","tspan","use","a","g","svg"]},{name:"type",values:[{type:"any"}],appliesTo:["a"]},{name:"type",values:[{type:"token",tokens:["matrix","saturate","hueRotate","luminanceToAlpha"]}],appliesTo:["feColorMatrix"]},{name:"type",values:[{type:"token",tokens:["identity","table","discrete","linear","gamma"]}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"type",values:[{type:"token",tokens:["fractalNoise","turbulence"]}],appliesTo:["feTurbulence"]},{name:"type",values:[{type:"any"},{type:"token",tokens:["module"]}],appliesTo:["script"]},{name:"type",values:[{type:"any"}],appliesTo:["style"]},{name:"values",values:[{type:"number-list"}],appliesTo:["feColorMatrix"]},{name:"viewBox",values:[{type:"view-box"}],appliesTo:["marker","pattern","svg","symbol","view"]},{name:"width",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","svg","rect","image"])},{name:"x",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","text","tspan","svg","rect","image"])},{name:"x",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]},{name:"x1",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"x2",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"xChannelSelector",values:[{type:"token",tokens:["R","G","B","A"]}],appliesTo:["feDisplacementMap"]},{name:"y",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","text","tspan","svg","rect","image"])},{name:"y",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]},{name:"y1",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"y2",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"yChannelSelector",values:[{type:"token",tokens:["R","G","B","A"]}],appliesTo:["feDisplacementMap"]},{name:"z",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]}],propertySchemas=[{name:"alignment-baseline",presentationAttributeName:"alignment-baseline",values:[{type:"token",tokens:["baseline","text-bottom","alphabetic","ideographic","middle","central","mathematical","text-top","bottom","center","top","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!1},{name:"baseline-shift",presentationAttributeName:"baseline-shift",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["sub","super","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!1},{name:"clip-path",presentationAttributeName:"clip-path",values:[{type:"url"},{type:"token",tokens:["fill-box","stroke-box","view-box","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!1,inheritable:!1},{name:"clip-rule",presentationAttributeName:"clip-rule",values:[{type:"token",tokens:["nonzero","evenodd","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use"]),animatable:!1,inheritable:!0},{name:"color",presentationAttributeName:"color",values:[{type:"color"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!0,inheritable:!0},{name:"color-interpolation",presentationAttributeName:"color-interpolation",values:[{type:"token",tokens:["auto","sRGB","linearRGB","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","linearGradient","radialGradient"]),animatable:!0,inheritable:!0},{name:"color-interpolation-filters",presentationAttributeName:"color-interpolation-filters",values:[{type:"token",tokens:["auto","sRGB","linearRGB","inherit","initial","unset"]}],appliesTo:[].concat(filterPrimitiveElementNames),animatable:!1,inheritable:!0},{name:"color-rendering",presentationAttributeName:"color-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeQuality","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","linearGradient","radialGradient"]),animatable:!0,inheritable:!0},{name:"cursor",presentationAttributeName:"cursor",values:[{type:"url"},{type:"token",tokens:[].concat(cursorNames,["inherit","initial","unset"])}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!1,inheritable:!0},{name:"direction",values:[{type:"token",tokens:["ltr","rtl","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],presentationAttributeName:"direction",animatable:!1,inheritable:!0},{name:"display",presentationAttributeName:"display",values:[{type:"token",tokens:["none","inline","block","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["textPath","tspan","svg","g","a","use"]),animatable:!1,inheritable:!1},{name:"dominant-baseline",presentationAttributeName:"dominant-baseline",values:[{type:"token",tokens:["auto","use-script","no-change","reset-size","ideographic","alphabetic","hanging","mathematical","central","middle","text-after-edge","text-before-edge","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"fill",presentationAttributeName:"fill",values:[{type:"color"},{type:"url"},{type:"token",tokens:["none","currentColor","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"fill-opacity",presentationAttributeName:"fill-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"fill-rule",presentationAttributeName:"fill-rule",values:[{type:"token",tokens:["nonzero","evenodd","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"filter",presentationAttributeName:"filter",values:[{type:"filter-function-list"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["textPath","tspan","g","a","svg","use"]),animatable:!0,inheritable:!1},{name:"flood-color",presentationAttributeName:"flood-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["feFlood"],animatable:!0,inheritable:!1},{name:"flood-opacity",presentationAttributeName:"flood-opacity",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["feFlood"],animatable:!0,inheritable:!1},{name:"font",presentationAttributeName:"font",values:[{type:"font"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-family",presentationAttributeName:"font-family",values:[{type:"font-family"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-size",presentationAttributeName:"font-size",values:[{type:"token",tokens:["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller","inherit","initial","unset"]},{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-stretch",presentationAttributeName:"font-stretch",values:[{type:"token",tokens:["normal","wider","narrower","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-style",presentationAttributeName:"font-style",values:[{type:"token",tokens:["normal","italic","oblique","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-variant",presentationAttributeName:"font-variant",values:[{type:"token",tokens:["normal","small-caps","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-weight",presentationAttributeName:"font-weight",values:[{type:"token",tokens:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"image-rendering",presentationAttributeName:"image-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeQuality","inherit","initial","unset"]}],appliesTo:["image"],animatable:!0,inheritable:!0},{name:"isolation",presentationAttributeName:null,values:[{type:"token",tokens:["isolate","auto","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!1,inheritable:!1},{name:"letter-spacing",presentationAttributeName:"letter-spacing",values:[{type:"number"},{type:"length"},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"lighting-color",presentationAttributeName:"lighting-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["feDiffuseLighting","feSpecularLighting"],animatable:!0,inheritable:!1},{name:"line-height",presentationAttributeName:"line-height",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!0},{name:"marker",presentationAttributeName:"marker",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-start",presentationAttributeName:"marker-start",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-mid",presentationAttributeName:"marker-mid",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-end",presentationAttributeName:"marker-end",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"mask",presentationAttributeName:"mask",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["g","a","svg","use"]),animatable:!0,inheritable:!1},{name:"mix-blend-mode",presentationAttributeName:null,values:[{type:"token",tokens:[].concat(blendModeNames,["inherit","initial","unset"])}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!1,inheritable:!1},{name:"opacity",presentationAttributeName:"opacity",values:[{type:"number"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!0,inheritable:!1},{name:"overflow",presentationAttributeName:"overflow",values:[{type:"token",tokens:["visible","hidden","scroll","auto","inherit","initial","unset"]}],appliesTo:["svg","symbol","pattern","marker","image"],inheritable:!1,animatable:!0},{name:"paint-order",presentationAttributeName:null,values:[{type:"token",tokens:["normal"]},{type:"token-list",tokens:["fill","stroke","markers"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),inheritable:!0,animatable:!0},{name:"pointer-events",presentationAttributeName:"pointer-events",values:[{type:"token",tokens:["bounding-box","visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),inheritable:!0,animatable:!0},{name:"shape-rendering",presentationAttributeName:"shape-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","crispEdges","geometricPrecision","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"stop-color",presentationAttributeName:"stop-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["stop"],animatable:!0,inheritable:!1},{name:"stop-opacity",presentationAttributeName:"stop-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["stop"],animatable:!0,inheritable:!1},{name:"stroke",presentationAttributeName:"stroke",values:[{type:"color"},{type:"url"},{type:"token",tokens:["none","currentColor","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-dasharray",presentationAttributeName:"stroke-dasharray",values:[{type:"dasharray"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-dashoffset",presentationAttributeName:"stroke-dasharray",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-linecap",presentationAttributeName:"stroke-linecap",values:[{type:"token",tokens:["butt","round","square","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-linejoin",presentationAttributeName:"stroke-linejoin",values:[{type:"token",tokens:["miter","round","bevel","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-miterlimit",presentationAttributeName:"stroke-miterlimit",values:[{type:"number",min:1},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-opacity",presentationAttributeName:"stroke-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-width",presentationAttributeName:"stroke-width",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"text-anchor",presentationAttributeName:"text-anchor",values:[{type:"token",tokens:["start","middle","end","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"text-decoration",presentationAttributeName:"text-decoration",values:[{type:"token-list",tokens:["underline","overline","line-through"]},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!1},{name:"text-rendering",presentationAttributeName:"text-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeLegibility","geometricPrecision","inherit","initial","unset"]}],appliesTo:["text"],animatable:!0,inheritable:!0},{name:"text-transform",presentationAttributeName:null,values:[{type:"token",tokens:["capitalize","uppercase","lowercase","none","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!1,inheritable:!0},{name:"unicode-bidi",presentationAttributeName:"unicode-bidi",values:[{type:"token",tokens:["normal","embed","bidi-override","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!1,inheritable:!1},{name:"vector-effect",presentationAttributeName:"vector-effect",values:[{type:"token",tokens:["non-scaling-stroke","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use"]),animatable:!0,inheritable:!1},{name:"visibility",presentationAttributeName:"visibility",values:[{type:"token",tokens:["visible","hidden","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use","text","textPath","tspan"]),animatable:!0,inheritable:!0},{name:"word-spacing",presentationAttributeName:"word-spacing",values:[{type:"number"},{type:"length"},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"white-space",presentationAttributeName:"white-space",values:[{type:"token",tokens:["normal","pre","nowrap","pre-wrap","pre-line","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"writing-mode",presentationAttributeName:"writing-mode",values:[{type:"token",tokens:["horizontal-tb","vertical-lr","vertical-rl","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath"],animatable:!1,inheritable:!0}],presentationAttributeNames=propertySchemas.map(function(e){return e.presentationAttributeName}).filter(function(e){return e});BoxySVG.utils.variables={isAppleDevice:isAppleDevice,defaultArtworkSVG:defaultArtworkSVG,namespaces:namespaces,lengthUnits:lengthUnits,angleUnits:angleUnits,alignValues:alignValues,hitTestPoints:hitTestPoints,shapeElementNames:shapeElementNames,graphicsElementNames:graphicsElementNames,objectElementNames:objectElementNames,paintServerElementNames:paintServerElementNames,paintableElementNames:paintableElementNames,filterPrimitiveElementNames:filterPrimitiveElementNames,svgElementNames:svgElementNames,eventAttributeNames:eventAttributeNames,textSpecificPropertyNames:textSpecificPropertyNames,urlValueAcceptingPropertyNames:urlValueAcceptingPropertyNames,namedColors:namedColors,fontWeightsByMatchingOrder:fontWeightsByMatchingOrder,contentSchemas:contentSchemas,attributeSchemas:attributeSchemas,propertySchemas:propertySchemas,presentationAttributeNames:presentationAttributeNames}}}{{var getBackgroundWindow=function(){return new Promise(function(e){chrome.runtime.getBackgroundPage(function(t){return e(t)})})},readEntry=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";return new Promise(function(n){e.file(function(e){var a=new FileReader,r,o,i;"text"===t?a.readAsText(e):"dataURL"===t?a.readAsDataURL(e):"arrayBuffer"===t&&a.readAsArrayBuffer(e),a.addEventListener("load",o=function(e){a.removeEventListener("load",o),a.removeEventListener("error",i),r="arrayBuffer"===t?new Uint8Array(e.target.result):e.target.result,n(r)}),a.addEventListener("error",i=function(){a.removeEventListener("load",o),a.removeEventListener("error",i),n(null)})})})},writeEntry=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"text/plain";return new Promise(async function(a,r){var o=await getWritableEntry(e);o?o.createWriter(function(e){var o=new Blob([t],{type:n}),i="write",s,l;e.addEventListener("writeend",s=function(){"write"==i?(i="truncate",e.truncate(o.size)):"truncate"==i&&(e.removeEventListener("writeend",s),e.removeEventListener("error",l),a())}),e.addEventListener("error",l=function(){e.removeEventListener("writeend",s),e.removeEventListener("error",l),r("READ_ONLY")}),e.write(o)},function(){r("NOT_FOUND")}):r("READ_ONLY")})},chooseEntry=function(e){return new Promise(function(t,n){chrome.fileSystem.chooseEntry(e,function(a){chrome.runtime.lastError?"User cancelled"===chrome.runtime.lastError.message?t(!0===e.acceptsMultiple?[]:null):n(chrome.runtime.lastError.message):t(a)})})},restoreEntry=function(e){return new Promise(function(t){chrome.fileSystem.restoreEntry(e,function(e){e?e.file(function(){return t(e)},function(){return t(null)}):t(null)})})},compareEntries=async function(e,t){return new Promise(async function(n){var a=await getEntryDisplayPath(e),r=await getEntryDisplayPath(t);n(a===r)})},getEntryDisplayPath=function(e){return new Promise(function(t){chrome.fileSystem.getDisplayPath(e,function(e){t(e)})})},getEntryBaseName=function(e){return e.name.substring(0,e.name.lastIndexOf("."))},getEntryExtension=function(e){return e.name?e.name.includes(".")?e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase():"":""},getWritableEntry=function(e){return new Promise(function(t){chrome.fileSystem.isWritableEntry(e,function(n){n?t(e):chrome.fileSystem.getWritableEntry(e,function(e){chrome.runtime.lastError?t(null):t(e)})})})};BoxySVG.utils.chrome={getBackgroundWindow:getBackgroundWindow,readEntry:readEntry,writeEntry:writeEntry,chooseEntry:chooseEntry,restoreEntry:restoreEntry,compareEntries:compareEntries,getEntryDisplayPath:getEntryDisplayPath,getEntryBaseName:getEntryBaseName,getEntryExtension:getEntryExtension,getWritableEntry:getWritableEntry}}}{{var replaceAll=function(e,t,n){return e.split(t).join(n)},capitalize=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},toCamelCase=function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},toDashCase=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},isLowerCase=function(e){return e===e.toLowerCase()},collapseWhitespace=function(e){return e.replace(/\s+/g," ").trim()},sortAlphabetically=function(e){return e.sort(function(e,t){return e.id.localeCompare(t.id)})};BoxySVG.utils.string={replaceAll:replaceAll,capitalize:capitalize,toCamelCase:toCamelCase,toDashCase:toDashCase,isLowerCase:isLowerCase,collapseWhitespace:collapseWhitespace,sortAlphabetically:sortAlphabetically}}}{{var _propertySchemas=BoxySVG.utils.variables.propertySchemas,reduceProperty=function(e,t){{var n=_propertySchemas.find(function(t){return t.name===e}),a=n.presentationAttributeName||null;a&&t.hasAttribute(a)&&(""===t.style.getPropertyValue(e)&&t.style.setProperty(e,t.getAttribute(a)),t.removeAttribute(a))}{var r=t.style.getPropertyValue(e);if(""!==r){var o=getComputedStyle(t).getPropertyValue(e);t.style.removeProperty(e);var i=getComputedStyle(t).getPropertyValue(e);o!==i&&t.style.setProperty(e,r)}}},reflectStyleElementCSSOM=function(e){var t="",n=e.sheet.rules[0],a=!0,r=!1,o;try{for(var i=e.sheet.rules[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l!==n&&(t+="\n"),t+=l.cssText}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}e.textContent!==t&&(e.textContent=t)};BoxySVG.utils.style={reduceProperty:reduceProperty,reflectStyleElementCSSOM:reflectStyleElementCSSOM}}}{{var max=Math.max,_pow=Math.pow,round=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=_pow(10,t);return Math.round(e*n)/n},normalize=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Infinity,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return null!==a&&(e=round(e,a)),e<t?e=t:e>n&&(e=n),e},signum=function(e){return 0>e?-1:0<e?1:0},average=function(){for(var e=0,t=0;t<arguments.length;t+=1)e+=arguments.length<=t?void 0:arguments[t];return e/arguments.length},countDecimalPlaces=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),n;return n=t?max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0,n};BoxySVG.utils.math={round:round,normalize:normalize,signum:signum,average:average,countDecimalPlaces:countDecimalPlaces}}}{{var _round=BoxySVG.utils.math.round,floor=Math.floor,getRandomNumber=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:100,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,a=e+Math.random()*(t-e);return _round(a,n)},getRandomString=function(){for(var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz!@#$%^&*()_+-={}[]:<>,.",n="",a=0,r;a<e;a+=1)r=Math.floor(Math.random()*t.length),n+=t.substring(r,r+1);return n},getHash=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hex",n=2166136261,a=0,r=e.length;a<r;a+=1)n^=e.charCodeAt(a),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>=0,"hex"===t&&(n=("0000000"+n.toString(16)).substr(-8)),n},shuffle=function(e){for(var t=e.length;--t;){var n=getRandomNumber(0,1,5),a=floor(n*(t+1)),r=e[a];e[a]=e[t],e[t]=r}return e};BoxySVG.utils.random={getRandomNumber:getRandomNumber,getRandomString:getRandomString,getHash:getHash,shuffle:shuffle}}}{{var _round2=BoxySVG.utils.math.round,compareMatrixes=function(e,t){return e.a===t.a&&e.b===t.b&&e.c===t.c&&e.d===t.d&&e.e===t.e&&e.f===t.f},roundMatrix=function(t,n){var r=_round2(t.a,n),a=_round2(t.b,n),o=_round2(t.c,n),i=_round2(t.d,n),s=_round2(t.e,n),e=_round2(t.f,n);return new SVGMatrix([r,a,o,i,s,e])};BoxySVG.utils.matrix={compareMatrixes:compareMatrixes,roundMatrix:roundMatrix}}}{{var vectorsDotProduct=function(e,t){return e.x*t.x+e.y*t.y},subtractVectors=function(e,t){var n=BoxySVG.classes.Vector;return new n(e.x-t.x,e.y-t.y)},sumVectors=function(e,t){var n=BoxySVG.classes.Vector;return new n(e.x+t.x,e.y+t.y)},compareVectors=function(e,t){return e.x===t.x&&e.y===t.y};BoxySVG.utils.vector={vectorsDotProduct:vectorsDotProduct,subtractVectors:subtractVectors,sumVectors:sumVectors,compareVectors:compareVectors}}}{{var _round3=BoxySVG.utils.math.round,_BoxySVG$utils$vector=BoxySVG.utils.vector,_sumVectors=_BoxySVG$utils$vector.sumVectors,_vectorsDotProduct=_BoxySVG$utils$vector.vectorsDotProduct,sin=Math.sin,cos=Math.cos,acos=Math.acos,_atan=Math.atan2,abs=Math.abs,_sqrt=Math.sqrt,_pow2=Math.pow,_PI=Math.PI,_min=Math.min,_max=Math.max,_isNaN=Number.isNaN,comparePoints=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return null===n?e.x===t.x&&e.y===t.y:_round3(e.x,n)===_round3(t.x,n)&&_round3(e.y,n)===_round3(t.y,n)},checkCollinearity=function(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;if(0===a){var r=(e.x*(t.y-n.y)+t.x*(n.y-e.y)+n.x*(e.y-t.y))/2;return 0==r}var o=BoxySVG.classes.Vector,i=new o(e,t),s=new o(t,n),l=_vectorsDotProduct(i,s),d=acos(l/(i.length*s.length));if(_isNaN(d))return!0;var u=radToDeg(d);return u<a},getDistanceBetweenPoints=function(e,t){var n=t.x-e.x;n*=n;var a=t.y-e.y;a*=a;var r=_sqrt(n+a);return r},getPointBetweenTwoPoints=function(e,t){var n=(e.x+t.x)/2,a=(e.y+t.y)/2;return new SVGPoint(n,a)},getNearestPointOnLine=function(e,n,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0,o=new SVGPoint(0,0),i=new SVGPoint(e.x,e.y),s=new SVGPoint(n.x,n.y),l=BoxySVG.classes.Vector,d=new l(o,i),u=new l(i,s),c=new l(i,a),p=_vectorsDotProduct(c,u),h=_vectorsDotProduct(u,u),m;m=0===h?0:p/h,!1===r&&(0>m?m=0:1<m&&(m=1));var t=_sumVectors(d,u.multiply(m)),b=new SVGPoint(t.x,t.y);return[b,m]},getPointAtFraction=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0.5,a=t.x-e.x,r=t.y-e.y,o=new SVGPoint(e.x+n*a,e.y+n*r);return o},snapPointToAngleMultiple=function(e,t){for(var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:180/8,a=new SVGPoint(e.x,e.y-1e3),r=getRotationAngleFromPoints(e,a,t),o=[],s=-180;180>=s;s+=n)o.push(s);var i=Infinity,l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=h-r;abs(m)<abs(i)&&(i=m)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}r+=i;var b=degToRad(r-90),x=getDistanceBetweenPoints(e,t),g=BoxySVG.classes.Vector,v=new g(cos(b),sin(b));v.length=x;var y=new SVGPoint(e.x+v.x,e.y+v.y);return[y,r]},snapPointToAngle=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:90,a=new SVGPoint(e.x,e.y-1e3),r=getRotationAngleFromPoints(e,a,t),o=n-r;r+=o;var i=degToRad(r-90),s=getDistanceBetweenPoints(e,t),l=BoxySVG.classes.Vector,d=new l(cos(i),sin(i));d.length=s;var u=new SVGPoint(e.x+d.x,e.y+d.y);return u},getRotationAngleFromPoints=function(e,t,n){var a=BoxySVG.classes.Vector,r=new a(e,t),o=new a(e,n),i=_atan(o.y,o.x)-_atan(r.y,r.x),s=normalizeRotationAngle(radToDeg(i));return s},normalizeRotationAngle=function(e){for(;-180>e;)e+=360;for(;180<e;)e-=360;return e},snapRotationAngle=function(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:15,n=normalizeRotationAngle(e),a=[],r=-180;180>=r;r+=t)a.push(r);var o=a.reduce(function(e,t){return abs(t-n)<abs(e-n)?t:e});return o},_getPerpendicularDistance=function(e,t,n){var a=(n.y-t.y)/(n.x-t.x),r=t.y-a*t.x,o=abs(a*e.x-e.y+r)/_sqrt(_pow2(a,2)+1);return o},radToDeg=function(e){return e*(180/_PI)},degToRad=function(e){return _PI*e/180},compareRects=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return null===n?e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.neight:_round3(e.x,n)===_round3(t.x,n)&&_round3(e.y,n)===_round3(t.y,n)&&_round3(e.width,n)===_round3(t.width,n)&&_round3(e.height,n)===_round3(t.height,n)},roundRect=function(e,t){return new SVGRect(_round3(e.x,t),_round3(e.y,t),_round3(e.width,t),_round3(e.height,t))},transformRect=function(e,t){var n=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],a=n.map(function(e){return e.matrixTransform(t)}),r=a.map(function(e){return e.x}),o=a.map(function(e){return e.y}),i=_min.apply(void 0,_toConsumableArray(r)),s=_min.apply(void 0,_toConsumableArray(o)),l=_max.apply(void 0,_toConsumableArray(r)),d=_max.apply(void 0,_toConsumableArray(o));return new SVGRect(i,s,l-i,d-s)},getBiggestRect=function(e){var t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=s.width*s.height;t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var d=_max.apply(void 0,t),u=t.indexOf(d),c=e[u];return c},combineRects=function(e){if(0===e.length)return new SVGRect(0,0,0,0);if(1===e.length){var t=e[0];return new SVGRect(t.x,t.y,t.width,t.height)}var n=[],a=[],r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,n.push(new SVGPoint(d.x,d.y)),a.push(new SVGPoint(d.x+d.width,d.y+d.height))}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=SVGPoint.fromPoint(n[0]),c=SVGPoint.fromPoint(a[0]),p=!0,h=!1,m;try{for(var b=n[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.x<u.x&&(u.x=g.x),g.y<u.y&&(u.y=g.y)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}var v=!0,y=!1,f;try{for(var _=a[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,k.x>c.x&&(c.x=k.x),k.y>c.y&&(c.y=k.y)}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=new SVGRect(u.x,u.y,c.x-u.x,c.y-u.y);return A},rectContainsRect=function(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height},rectContainsPoint=function(e,t){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},rectIntersectsRect=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},lineIntersectsRect=function(e,t,n){return lineIntersectsLineSegment(e,t,new SVGPoint(n.x,n.y),new SVGPoint(n.right,n.y))||lineIntersectsLineSegment(e,t,new SVGPoint(n.right,n.y),new SVGPoint(n.right,n.bottom))||lineIntersectsLineSegment(e,t,new SVGPoint(n.right,n.bottom),new SVGPoint(n.x,n.bottom))||lineIntersectsLineSegment(e,t,new SVGPoint(n.x,n.bottom),new SVGPoint(n.x,n.y))},lineSegmentIntersectsRect=function(e,t,n){return lineIntersectsRect(e,t,n)||rectContainsPoint(n,e)&&rectContainsPoint(n,t)},lineIntersectsLineSegment=function(e,t,n,a){var r=getLinesIntersectionPoint(e,t,n,a);return!!r&&r.x>=_min(n.x,a.x)&&r.x<=_max(n.x,a.x)&&r.y>=_min(n.y,a.y)&&r.y<=_max(n.y,a.y)},getLineEquationParametersFromPoints=function(e,t){var n=t.y-e.y,a=e.x-t.x,r=n*e.x+a*e.y;return[n,a,r]},getLinesIntersectionPoint=function(e,t,n,a){var r=getLineEquationParametersFromPoints(e,t),o=_slicedToArray(r,3),i=o[0],s=o[1],l=o[2],d=getLineEquationParametersFromPoints(n,a),u=_slicedToArray(d,3),c=u[0],p=u[1],h=u[2],m=i*p-c*s,b=null;return 0!=m&&(b=new SVGPoint((p*l-s*h)/m,(i*h-c*l)/m)),b};BoxySVG.utils.geometry={comparePoints:comparePoints,checkCollinearity:checkCollinearity,getDistanceBetweenPoints:getDistanceBetweenPoints,getPointBetweenTwoPoints:getPointBetweenTwoPoints,getNearestPointOnLine:getNearestPointOnLine,getPointAtFraction:getPointAtFraction,snapPointToAngleMultiple:snapPointToAngleMultiple,snapPointToAngle:snapPointToAngle,getRotationAngleFromPoints:getRotationAngleFromPoints,normalizeRotationAngle:normalizeRotationAngle,snapRotationAngle:snapRotationAngle,getPerpendicularDistance:_getPerpendicularDistance,radToDeg:radToDeg,degToRad:degToRad,compareRects:compareRects,roundRect:roundRect,transformRect:transformRect,getBiggestRect:getBiggestRect,combineRects:combineRects,rectContainsRect:rectContainsRect,rectContainsPoint:rectContainsPoint,rectIntersectsRect:rectIntersectsRect,lineIntersectsRect:lineIntersectsRect,lineSegmentIntersectsRect:lineSegmentIntersectsRect,lineIntersectsLineSegment:lineIntersectsLineSegment,getLineEquationParametersFromPoints:getLineEquationParametersFromPoints,getLinesIntersectionPoint:getLinesIntersectionPoint}}}{{var _isFinite=Number.isFinite,_isNaN2=Number.isNaN,_parseFloat=Number.parseFloat,isNumber=function(e){return!_isNaN2(e)&&"number"==typeof e},isBoolean=function(e){return e===!!e},isString=function(e){return"string"==typeof e},isNumeric=function(e){return!_isNaN2(_parseFloat(e))&&_isFinite(e)};BoxySVG.utils.type={isNumber:isNumber,isBoolean:isBoolean,isString:isString,isNumeric:isNumeric}}}{{var _isNumber=BoxySVG.utils.type.isNumber,_sqrt2=Math.sqrt,CONSTRUCTOR_ERROR="Invalid argument passed to Vector contstructor",Vector=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];if(0===n.length)this.x=0,this.y=0;else if(1===n.length){if(_isNumber(n[0].x)&&_isNumber(n[0].y))this.x=n[0].x,this.y=n[0].y;else throw new Error(CONSTRUCTOR_ERROR);}else if(2!==n.length)throw new Error(CONSTRUCTOR_ERROR);else if(_isNumber(n[0])&&_isNumber(n[1]))this.x=n[0],this.y=n[1];else if(n[0]instanceof SVGPoint&&n[1]instanceof SVGPoint){var r=n[0],o=n[1];this.x=o.x-r.x,this.y=o.y-r.y}else throw new Error(CONSTRUCTOR_ERROR)}return _createClass(e,[{key:"getNormalVector",value:function(){return new e(-this.y,this.x)}},{key:"getOppositeVector",value:function(){return new e(-this.x,-this.y)}},{key:"negate",value:function(){var e=this.multiply(-1);return e}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"multiplySelf",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"divideSelf",value:function(e){return this.x/=e,this.y/=e,this}},{key:"normalize",value:function(){return 0===this.length?new e(this):new e(this.x/this.length,this.y/this.length)}},{key:"scale",value:function(t){return 0===this.length?new e(this):(t/=this.length,new e(this.x*t,this.y*t))}},{key:"transformPoint",value:function(e){return new SVGPoint(e.x+this.x,e.y+this.y)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"length",get:function(){return _sqrt2(this.x*this.x+this.y*this.y)},set:function(e){0!==this.length&&(e/=this.length,this.x*=e,this.y*=e)}}]),e}();BoxySVG.classes.Vector=Vector}}{{var _isNumber2=BoxySVG.utils.type.isNumber,throttle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:500,n=arguments[2],a=null,r=null,o=null,i=0,s=function(){i=new Date,r=null,o=e.apply(n,a)};return function(){for(var l=arguments.length,d=Array(l),u=0;u<l;u++)d[u]=arguments[u];var c=new Date,p=t-(c-i);return a=d,0>=p?(clearTimeout(r),r=null,i=c,o=e.apply(n,a)):!r&&(r=setTimeout(s,p)),o}},debounce=function(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0&&arguments[3],r=null,o=null;return function(){for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];var d=a&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,a||(o=e.apply(n,s))},t),d&&(o=e.apply(n,s)),o}},sleep=function(e){return new Promise(function(t){setTimeout(function(){return t()},e)})},sleepUntilIdle=function(e){return new Promise(function(t){requestIdleCallback(function n(a){a.timeRemaining()>=e?t():requestIdleCallback(n)})})},nextTick=function(e){requestAnimationFrame(e)},milisecondsToDays=function(e){return e/1e3/60/60/24},getTimeStamp=function(){return Date.now()},getISOTimestamp=function(){var e=new Date,t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),o=("0"+e.getMinutes()).slice(-2),i=("0"+e.getSeconds()).slice(-2);return t+"-"+n+"-"+a+"T"+r+":"+o+":"+i},whenIdle=new Promise(function(e){requestIdleCallback(e)});BoxySVG.utils.time={throttle:throttle,debounce:debounce,sleep:sleep,sleepUntilIdle:sleepUntilIdle,nextTick:nextTick,milisecondsToDays:milisecondsToDays,getTimeStamp:getTimeStamp,getISOTimestamp:getISOTimestamp,whenIdle:whenIdle}}}{{var _BoxySVG$utils$math=BoxySVG.utils.math,_normalize=_BoxySVG$utils$math.normalize,_round4=_BoxySVG$utils$math.round,_namedColors=BoxySVG.utils.variables.namedColors,_min2=Math.min,_max2=Math.max,_floor=Math.floor,_parseFloat2=Number.parseFloat,_parseInt=Number.parseInt,rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var a=_max2(e,t,n),r=_min2(e,t,n),o,i,s;if(o=i=s=(a+r)/2,a===r)o=i=0;else{var l=a-r;if(i=0.5<s?l/(2-a-r):l/(a+r),a===e){var d;d=t<n?6:0,o=(t-n)/l+d}else a===t?o=(n-e)/l+2:a===n&&(o=(e-t)/l+4)}return o=_normalize(360*(o/6),0,360,0),i=_normalize(100*i,0,100,1),s=_normalize(100*s,0,100,1),[o,i,s]},hslToRgb=function(e,t,n){e/=360,t/=100,n/=100;var a,r,o;if(0===t)a=r=o=n;else{var i=function(e,n,a){return 0>a&&(a+=1),1<a&&(a-=1),a<1/6?e+6*(n-e)*a:a<1/2?n:a<2/3?e+6*((n-e)*(2/3-a)):e},s,l;s=0.5>n?n*(1+t):n+t-n*t,l=2*n-s,a=i(l,s,e+1/3),r=i(l,s,e),o=i(l,s,e-1/3)}return a=_normalize(255*a,0,255,0),r=_normalize(255*r,0,255,0),o=_normalize(255*o,0,255,0),[a,r,o]},rgbToHsv=function(e,t,n){e/=255,t/=255,n/=255;var a=_max2(e,t,n),r=_min2(e,t,n),o=0,i=0,s=a,l=a-r;return i=0===a?0:l/a,a===r?o=0:(a===e?o=(t-n)/l+(t<n?6:0):a===t?o=(n-e)/l+2:a===n&&(o=(e-t)/l+4),o/=6),o*=360,i*=100,s*=100,[o,i,s]},hsvToRgb=function(e,n,a){e/=360,n/=100,a/=100;var o=_floor(6*e),i=6*e-o,s=a*(1-n),l=a*(1-i*n),d=a*(1-(1-i)*n),t=0,r=0,u=0;return 0==o%6?(t=a,r=d,u=s):1==o%6?(t=l,r=a,u=s):2==o%6?(t=s,r=a,u=d):3==o%6?(t=s,r=l,u=a):4==o%6?(t=d,r=s,u=a):5==o%6&&(t=a,r=s,u=l),t*=255,r*=255,u*=255,[t,r,u]},hslToHsv=function(e,t,n){e/=360,t/=100,n=2*(n/100),t*=1>=n?n:2-n;var a=e,r,o;return r=0===n+t?0:2*t/(n+t),o=(n+t)/2,a=360*a,r=100*_max2(0,_min2(1,r)),o=100*_max2(0,_min2(1,o)),[a,r,o]},hsvToHsl=function(e,t,n){e/=360,t/=100,n/=100;var a=e,r=(2-t)*n,o=t*n;return 1>=r?0==r?o=0:o/=r:2==r?o=0:o/=2-r,r/=2,a=360*a,o=100*_max2(0,_min2(1,o)),r=100*_max2(0,_min2(1,r)),[a,o,r]},parseColor=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"rgba";e=e.trim();var n=tokenizeColor(e),o=null,i=null;if(7===n.length&&"rgb("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"NUM"===n[3].type&&","===n[4].text&&"NUM"===n[5].type&&")"===n[6].text)o=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),1];else if(7===n.length&&"rgb("===n[0].text&&"PERCENTAGE"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&")"===n[6].text)o=[255*(_parseFloat2(n[1].text)/100),255*(_parseFloat2(n[3].text)/100),255*(_parseFloat2(n[5].text)/100),1];else if(9===n.length&&"rgba("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"NUM"===n[3].type&&","===n[4].text&&"NUM"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)o=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),_parseFloat2(n[7].text)];else if(9===n.length&&"rgb("===n[0].text&&"PERCENTAGE"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)o=[255*(_parseFloat2(n[1].text)/100),255*(_parseFloat2(n[3].text)/100),255*(_parseFloat2(n[5].text)/100),_parseFloat2(n[7].text)];else if(7===n.length&&"hsl("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&")"===n[6].text)i=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),1];else if(9===n.length&&"hsla("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)i=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),_parseFloat2(n[7].text)];else if("HEX"===n[0].type&&n[1]===void 0){var d=n[0].text.substring(1),u,c,p;3===d.length?(u=d[0]+d[0],c=d[1]+d[1],p=d[2]+d[2]):(u=d[0]+d[1],c=d[2]+d[3],p=d[4]+d[5]),o=[_parseInt(u,16),_parseInt(c,16),_parseInt(p,16),1]}else _namedColors[e]&&(o=[_namedColors[e][0],_namedColors[e][1],_namedColors[e][2],1]);if(o){var m=o,x=_slicedToArray(m,4),y=x[0],r=x[1],g=x[2],b=x[3];if(y=_normalize(y,0,255,0),r=_normalize(r,0,255,0),g=_normalize(g,0,255,0),b=_normalize(b,0,1,2),"hsla"===t){var a=rgbToHsl(y,r,g),f=_slicedToArray(a,3),_=f[0],h=f[1],s=f[2];return[_,h,s,b]}if("hsva"===t){var l=rgbToHsv(y,r,g),w=_slicedToArray(l,3),k=w[0],A=w[1],C=w[2];return[k,A,C,b]}return[y,r,g,b]}if(i){var v=i,S=_slicedToArray(v,4),E=S[0],T=S[1],P=S[2],L=S[3];if(E=_normalize(E,0,360,0),T=_normalize(T,0,100,1),P=_normalize(P,0,100,1),L=_normalize(L,0,1,2),"hsla"===t)return[E,T,P,L];if("hsva"===t){var M=hslToHsv(E,T,P),D=_slicedToArray(M,3),I=D[0],V=D[1],N=D[2];return[I,V,N,L]}var R=hslToRgb(E,T,P),z=_slicedToArray(R,3),G=z[0],B=z[1],O=z[2];return[G,B,O,L]}throw new Error("Invalid color string: \""+e+"\"")},serializeColor=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"rgba",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"hex",o=null;if(["rgb","rgba","rgb%","rgba%","hex"].includes(n)){var i,r,d,u;if("rgba"===t){var a=_slicedToArray(e,4);i=a[0],r=a[1],d=a[2],u=a[3]}else if("hsla"===t){var c=hslToRgb.apply(void 0,_toConsumableArray(e)),p=_slicedToArray(c,3);i=p[0],r=p[1],d=p[2],u=e[3]}else if("hsva"===t){var m=hsvToRgb.apply(void 0,_toConsumableArray(e)),b=_slicedToArray(m,3);i=b[0],r=b[1],d=b[2],u=e[3]}if("rgb%"===n||"rgba%"===n?(i=_normalize(100*(i/255),0,100,1),r=_normalize(100*(r/255),0,100,1),d=_normalize(100*(d/255),0,100,1),u=_normalize(u,0,1,2)):(i=_normalize(i,0,255,0),r=_normalize(r,0,255,0),d=_normalize(d,0,255,0),u=_normalize(u,0,1,2)),"rgb"===n)o="rgb("+i+", "+r+", "+d+")";else if("rgba"===n)o="rgba("+i+", "+r+", "+d+", "+u+")";else if("rgb%"===n)o="rgb("+i+"%, "+r+"%, "+d+"%)";else if("rgba%"===n)o="rgb("+i+"%, "+r+"%, "+d+"%, "+u+")";else if("hex"===n){var x=i.toString(16),g=r.toString(16),v=d.toString(16);1===x.length&&(x="0"+x),1===g.length&&(g="0"+g),1===v.length&&(v="0"+v),o="#"+x+g+v}}else if("hsl"===n||"hsla"===n){var y,h,s,l;if("hsla"===t){var f=_slicedToArray(e,4);y=f[0],h=f[1],s=f[2],l=f[3]}else if("hsva"===t){var _=hsvToHsl.apply(void 0,_toConsumableArray(e)),w=_slicedToArray(_,3);y=w[0],h=w[1],s=w[2],l=e[3]}else if("rgba"===t){var k=rgbToHsl.apply(void 0,_toConsumableArray(e)),A=_slicedToArray(k,3);y=A[0],h=A[1],s=A[2],l=e[3]}y=_normalize(y,0,360,0),h=_normalize(h,0,100,1),s=_normalize(s,0,100,1),l=_normalize(l,0,1,2),"hsl"===n?o="hsl("+y+", "+h+"%, "+s+"%)":"hsla"===n&&(o="hsla("+y+", "+h+"%, "+s+"%, "+l+")")}return o},tokenizeColor=function(e){for(var t=BoxySVG.classes.StringScanner,n=[],a=new t(e.toLowerCase()),r=function(){var e=a.read();(function(){if("r"===e||"h"===e){var t=e;if("rgb("===e+a.peek(3)?t+=a.read(3):"rgba("===e+a.peek(4)?t+=a.read(4):"hsl("===e+a.peek(3)?t+=a.read(3):"hsla("===e+a.peek(4)&&(t+=a.read(4)),t!==e)return void n.push({type:"FUNCTION",text:t})}if("#"===e){if(isHexColorString(e+a.peek(6))){var r=e+a.read(6);return void n.push({type:"HEX",text:r})}if(isHexColorString(e+a.peek(3)))return text=e+a.read(3),void n.push({type:"HEX",text:text})}if(["0","1","2","3","4","5","6","7","8","9",".","-"].includes(e)){for(var o=e;["0","1","2","3","4","5","6","7","8","9","."].includes(a.peek());)o+=a.read();return void("%"===a.peek()?(o+=a.read(),n.push({type:"PERCENTAGE",text:o})):n.push({type:"NUM",text:o}))}/\u0009|\u000a|\u000c|\u000d|\u0020/.test(e)||n.push({type:"CHAR",text:e})})()};null!==a.peek();)r();return n},formatColorString=function(e,t){var n=t.startsWith("hsl")?"hsla":"rgba",a=parseColor(e,n),r=serializeColor(a,n,t);return r},isHexColorString=function(e){if(e=e.toLowerCase(),"#"!==e[0])return!1;if(4!==e.length&&7!==e.length)return!1;e=e.substring(1);var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,!t.includes(s))return!1}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!0},isValidColorString=function(e){try{parseColor(e)}catch(e){return!1}return!0},generateWheelSpectrumImage=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=n.createImageData(e,e),l=o.data,u=e/2,c=0;t.width=e,t.height=e;for(var i=0;i<e;i++)for(var p=0;p<e;p++){var m=p-u,x=i-u,v=pow(m,2)+pow(x,2),d=360*((atan2(x,m)+PI)/(2*PI)),h=100*(sqrt(v)/u),s=hsvToRgb(d,h,100),y=_slicedToArray(s,3),f=y[0],r=y[1],g=y[2],b=v>pow(u,2)?0:255;l[c++]=f,l[c++]=r,l[c++]=g,l[c++]=b}n.putImageData(o,0,0),window.open(t.toDataURL("image/png"))},generateRectSpectrumImage=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:500,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:40,n=document.createElement("canvas"),a=n.getContext("2d");n.width=e,n.height=t;var r=[[0,[255,0,0]],[0.15,[255,255,0]],[0.33,[0,255,0]],[0.49,[0,255,255]],[0.67,[0,0,255]],[0.84,[255,0,255]],[1,[255,0,0]]],o=a.createLinearGradient(0,0,e,0),i=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,o.addColorStop(c[0],"rgb("+c[1][0]+", "+c[1][1]+", "+c[1][2]+")")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}a.fillStyle=o,a.fillRect(0,0,e,t),window.open(n.toDataURL("image/png"))};BoxySVG.utils.color={rgbToHsl:rgbToHsl,hslToRgb:hslToRgb,rgbToHsv:rgbToHsv,hsvToRgb:hsvToRgb,hslToHsv:hslToHsv,hsvToHsl:hsvToHsl,parseColor:parseColor,serializeColor:serializeColor,formatColorString:formatColorString,isHexColorString:isHexColorString,isValidColorString:isValidColorString,generateWheelSpectrumImage:generateWheelSpectrumImage,generateRectSpectrumImage:generateRectSpectrumImage}}}{{var _sqrt3=Math.sqrt,_pow3=Math.pow,isPointerMoveIntentional=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,a=_sqrt3(_pow3(t.clientX-e.clientX,2)+_pow3(t.clientY-e.clientY,2));return a<n&&50>t.timeStamp-e.timeStamp?!1:!0};BoxySVG.utils.event={isPointerMoveIntentional:isPointerMoveIntentional}}}{{var closestShadowRoot=function(e){for(var t=e;t;t=t.parentNode)if(t instanceof ShadowRoot||t===window.document)return t},normalizeWhitespace=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;stripWhitespace(e);for(var n="",a={text:!0,textPath:!0,tspan:!0},r=0;r<t;r+=1)n+=" ";(function e(t){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;if(!a[t.localName]){var o=!0,i=!1,s;try{for(var l=t.children[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=t.firstChild===u,p=t.lastChild===u;if(!0==c){var h=document.createTextNode("\n");u.parentNode.insertBefore(h,u)}for(var m="",b=0;b<r;b+=1)m+=n;var x=document.createTextNode(m);if(t.insertBefore(x,u),!0==p){var g=document.createTextNode("\n");t.appendChild(g);for(var v="",y=0;y<r-1;y+=1)v+=n;var f=document.createTextNode(v);t.appendChild(f)}else{var _=document.createTextNode("\n");t.insertBefore(_,u.nextSibling)}0<u.childElementCount&&e(u,r+1)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}})(e,1)},isDOMWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},trimDOMWhitespace=function(e){return e.replace(/^[\t\n\r ]+|[\t\n\r ]+$/g,"")},isConnectedToActiveDocument=function(e){for(var t=e;t;t=t.parentNode||t.host)if(t===document)return!0;return!1},connectNode=function(e){if(!1===e.isConnected){var t=BoxySVG.utils.element.html,n=t(_templateObject),a=n.attachShadow({mode:"closed"});a.append(e),document.body.append(n)}},stripWhitespace=function(e){for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,null),n={text:!0,textPath:!0,tspan:!0},a;a=t.nextNode();)n[a.parentElement.localName]||isDOMWhitespace(a.textContent)&&a.remove()};BoxySVG.utils.node={closestShadowRoot:closestShadowRoot,normalizeWhitespace:normalizeWhitespace,isDOMWhitespace:isDOMWhitespace,trimDOMWhitespace:trimDOMWhitespace,isConnectedToActiveDocument:isConnectedToActiveDocument,connectNode:connectNode}}}{{var _BoxySVG$utils$geomet=BoxySVG.utils.geometry,_transformRect=_BoxySVG$utils$geomet.transformRect,_rectIntersectsRect=_BoxySVG$utils$geomet.rectIntersectsRect,_capitalize=BoxySVG.utils.string.capitalize,_BoxySVG$utils$variab=BoxySVG.utils.variables,_namespaces=_BoxySVG$utils$variab.namespaces,_graphicsElementNames=_BoxySVG$utils$variab.graphicsElementNames,_parseInt2=Number.parseInt,templateElement=document.createElement("template"),html=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),void 0!==(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a=t.join("");templateElement.innerHTML=a;var r=document.importNode(templateElement.content,!0);return 1===r.children.length?r.firstElementChild:r},svg=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),void 0!==(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a="<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">"+t.join("")+"</svg>";templateElement.innerHTML=a;var r=document.importNode(templateElement.content,!0),o=r.querySelector("svg#x-stub");if(1===o.children.length)return o.firstElementChild;for(var i=[].concat(_toConsumableArray(o.childNodes)),s=0,l;s<i.length;s++)l=i[s],r.appendChild(l);return o.remove(),r},createElement=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,n=e.split(":"),a=null;if(1===n.length){var r=_slicedToArray(n,1),o=r[0];a=document.createElement(o,t)}else if(2===n.length){var i=_slicedToArray(n,2),s=i[0],l=i[1];"svg"===s&&(a=document.createElementNS(_namespaces.svg,l,t))}return a},getOutermostSVGElement=function(e){for(var t="svg"===e.localName?e:null,n=e.ownerSVGElement;n;n=n.ownerSVGElement)t=n;return t},getElementIndex=function(e){for(var t in e.parentElement.children){var n=e.parentElement.children[t];if(n===e)return _parseInt2(t)}},compareElements=function e(t,n){if(t.localName!==n.localName)return!1;if(t.namespaceURI!==n.namespaceURI)return!1;if(t.textContent!==n.textContent)return!1;if(t.children.length!==n.children.length)return!1;if(t.attributes.length!==n.attributes.length)return!1;var a=!0,r=!1,o;try{for(var s=t.attributes[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)if(d=l.value,"style"===d.name){if(t.style.cssText!==n.style.cssText)return!1;}else if(t.getAttribute(d.name)!==n.getAttribute(d.name))return!1}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}for(var u=0;u<t.children.length;u+=1)if(!1===e(t.children[u],n.children[u]))return!1;return!0},elementFromPoint=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=document,r=null;a;)r=a.elementFromPoint(e,t),a=r.shadowRoot||r._shadowRoot;return r},closest=function e(t,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0,r=t.closest(n);return a&&!r&&t.getRootNode().host?e(t.getRootNode().host,n):r},queryGraphicsElements=function e(t){var n=1<arguments.length&&arguments[1]!==void 0&&arguments[1],a=[],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"g"===d.localName||"a"===d.localName){var u=[].concat(_toConsumableArray(d.children));a=[].concat(_toConsumableArray(a),_toConsumableArray(e(u,n)))}else if(_graphicsElementNames.includes(d.localName)&&(a.push(d),"text"===d.localName&&n)){var c=[].concat(_toConsumableArray(d.children));a=[].concat(_toConsumableArray(a),_toConsumableArray(e(c,n)))}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return a},queryClippingElements=function e(t){var n=[],a=["path","text","rect","circle","ellipse","line","polyline","polygon","use"],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.localName;a.includes(u)?n.push(d):("g"===u||"a"===u)&&(n=[].concat(_toConsumableArray(n),_toConsumableArray(e(d.children))))}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n},getCommonAncestor=function(e,t){for(;e=e.parentNode;)if(e.contains&&e.contains(t))return e;return null},sortByDomPosition=function(e){var t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),t},sortBySiblingElements=function(e){var t=[];e=sortByDomPosition(e);var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,s===e[0])t.push([s]);else{var l=!1,d=!0,u=!1,c=void 0;try{for(var p=t[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,s.parentElement===m[0].parentElement&&(m.push(s),l=!0)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}!1==l&&t.push([s])}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t},getObjectElementDisplayName=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"designer",n=null;if("developer"===t)"rect"===e.localName?n="<rect>":"circle"===e.localName?n="<circle>":"ellipse"===e.localName?n="<ellipse>":"line"===e.localName?n="<line>":"polyline"===e.localName?n="<polyline>":"polygon"===e.localName?n="<polygon>":"text"===e.localName?n="<text>":"image"===e.localName?n="<image>":"use"===e.localName?n="<use>":"svg"===e.localName?n="<svg>":"a"===e.localName?n="<a>":"g"===e.localName?"master"===e.getAttribute("data-bx-artboard")?n="<svg>":"symbol"===e.getAttribute("data-bx-artboard")?n="<symbol>":"pattern"===e.getAttribute("data-bx-artboard")?n="<pattern>":n="<g>":"path"===e.localName&&(n="<path>");else if("designer"===t)if("rect"===e.localName)n="Rectangle";else if("circle"===e.localName)n="Circle";else if("ellipse"===e.localName)n="Ellipse";else if("line"===e.localName)n="Line";else if("polyline"===e.localName)n="Polyline";else if("polygon"===e.localName)n="Polygon";else if("text"===e.localName)n="Text";else if("image"===e.localName)n="Image";else if("use"===e.localName)n="Symbol instance";else if("svg"===e.localName)n="SVG";else if("a"===e.localName)n="Anchor";else if("g"===e.localName)n="master"===e.getAttribute("data-bx-artboard")?"SVG":"symbol"===e.getAttribute("data-bx-artboard")?"Symbol":"pattern"===e.getAttribute("data-bx-artboard")?"Pattern":"Group";else if("path"===e.localName){var a=e.getAttribute("data-bx-shape");if(a){var r=a.substring(0,a.indexOf(" "));n="rect"===r?"Rectangle":_capitalize(r)}else n="Path"}return n},getObjectElementIconName=function(e){var t=null;if("rect"===e.localName)t="object-rect";else if("circle"===e.localName)t="object-ellipse";else if("ellipse"===e.localName)t="object-ellipse";else if("line"===e.localName)t="object-line";else if("polyline"===e.localName)t="object-polyline";else if("polygon"===e.localName)t="object-polygon";else if("text"===e.localName)t="object-text";else if("image"===e.localName)t="object-image";else if("a"===e.localName)t="object-anchor";else if("use"===e.localName)t="object-symbol";else if("svg"===e.localName)t="object-svg";else if("g"===e.localName)t="master"===e.getAttribute("data-bx-artboard")?"object-svg":"symbol"===e.getAttribute("data-bx-artboard")?"object-symbol":"pattern"===e.getAttribute("data-bx-artboard")?"object-pattern":"object-group";else if("path"===e.localName){var n=e.getAttribute("data-bx-shape");t=n?"object-"+n.substring(0,n.indexOf(" ")):"object-path"}return t},getTopStackedElement=function(e){var t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}for(;1<t.length;){var l=t[0].compareDocumentPosition(t[1]);4===l||20===l?t.remove(t[0]):t.remove(t[1])}return t[0]},getIntersectingElements=function(e){var t=getOutermostSVGElement(e),n=BoxySVG.utils.bbox.getClientBBox,a=t.getScreenCTM().inverse(),r=n(e),o=t.getIntersectionList(r,t);return o=Array.from(o),o.remove(e),o},isElementIntersectingElement=function(e,t){if(!e.transform||!t.transform)return!1;var n=BoxySVG.utils.bbox.getClientBBox,a=e.getScreenCTM().inverse(),r=n(e),o=t.getScreenCTM().inverse(),i=n(t);return _rectIntersectsRect(r,i)},sortByIntersectingElements=function(e){var t=[],n=[],a=!0,r=!1,o;try{for(var i=function(){var a=l.value,r=[];(function t(a){var o=!0,i=!1,s;try{for(var l=e[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=!r.includes(u)&&!n.includes(u);u!==a&&c&&isElementIntersectingElement(u,a)&&(r.push(u),n.push(u),t(u))}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}})(a),0<r.length&&t.push(sortByDomPosition(r))},s=e[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0)i()}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}var d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,n.includes(m)||t.push([m])}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return t},isValidID=function(e){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);if(!1==(65<=n&&90>=n||97<=n&&122>=n)){if(0==t)return!1;if(!1==(49<=n&&57>=n||45===n||95===n))return!1}}return!0};BoxySVG.utils.element={html:html,svg:svg,createElement:createElement,getOutermostSVGElement:getOutermostSVGElement,getElementIndex:getElementIndex,compareElements:compareElements,elementFromPoint:elementFromPoint,closest:closest,queryGraphicsElements:queryGraphicsElements,queryClippingElements:queryClippingElements,getCommonAncestor:getCommonAncestor,sortByDomPosition:sortByDomPosition,sortBySiblingElements:sortBySiblingElements,getObjectElementDisplayName:getObjectElementDisplayName,getObjectElementIconName:getObjectElementIconName,getTopStackedElement:getTopStackedElement,getIntersectingElements:getIntersectingElements,isElementIntersectingElement:isElementIntersectingElement,sortByIntersectingElements:sortByIntersectingElements,isValidID:isValidID}}}{{var cloneObject=function(e){return JSON.parse(JSON.stringify(e))},compareObjects=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};BoxySVG.utils.object={cloneObject:cloneObject,compareObjects:compareObjects}}}{{var _createElement=BoxySVG.utils.element.createElement,_isConnectedToActiveDocument=BoxySVG.utils.node.isConnectedToActiveDocument,_compareObjects=BoxySVG.utils.object.compareObjects,_BoxySVG$utils$variab2=BoxySVG.utils.variables,_propertySchemas2=_BoxySVG$utils$variab2.propertySchemas,_presentationAttributeNames=_BoxySVG$utils$variab2.presentationAttributeNames,keys=Object.keys,spanifyText=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,n=e.querySelector("textPath")||e,a=getTextModel(e),r=t&&e.contains(t.commonAncestorContainer),o=-1,s=-1;if(r){var l=getGlobalOffset(t.startContainer,t.startOffset),d=_slicedToArray(l,2),u=d[1],c=getGlobalOffset(t.endContainer,t.endOffset),p=_slicedToArray(c,2),h=p[1];o=u,s=h}if(r&&o!==s){var m=0,b=[],x=!0,g=!1,v;try{for(var y=a.childItems[Symbol.iterator](),f;!(x=(f=y.next()).done);x=!0){for(var _=f.value,w=_.textContent.length,k=m,A=m+_.textContent.length,C=o-k,S=s-k,E="",T=0;T<_.textContent.length;T+=1)(T==C||T==S)&&(E+="\u2605\u2764"),E+=_.textContent[T];var i=!0,P=!1,L=void 0;try{for(var M=E.split("\u2605\u2764")[Symbol.iterator](),D,I;!(i=(D=M.next()).done);i=!0)I=D.value,0<I.length&&b.push({textContent:I,href:_.href,inheritedProperties:_.inheritedProperties,nonInheritedProperties:_.nonInheritedProperties})}catch(e){P=!0,L=e}finally{try{!i&&M.return&&M.return()}finally{if(P)throw L}}m+=_.textContent.length}}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}a.childItems=b}{{e.removeAttribute("style");var V=!0,N=!1,R;try{for(var z=_presentationAttributeNames[Symbol.iterator](),G,B;!(V=(G=z.next()).done);V=!0)B=G.value,e.hasAttribute(B)&&e.removeAttribute(B)}catch(e){N=!0,R=e}finally{try{!V&&z.return&&z.return()}finally{if(N)throw R}}var O=getComputedStyle(e),j=!0,q=!1,U;try{for(var H=keys(a.rootItem.inheritedProperties)[Symbol.iterator](),F,$;!(j=(F=H.next()).done);j=!0)$=F.value,O.getPropertyValue($)!==a.rootItem.inheritedProperties[$]&&e.style.setProperty($,a.rootItem.inheritedProperties[$])}catch(e){q=!0,U=e}finally{try{!j&&H.return&&H.return()}finally{if(q)throw U}}var Y=!0,X=!1,W;try{for(var K=keys(a.rootItem.nonInheritedProperties)[Symbol.iterator](),Z,J;!(Y=(Z=K.next()).done);Y=!0)J=Z.value,O.getPropertyValue(J)!==a.rootItem.nonInheritedProperties[J]&&e.style.setProperty(J,a.rootItem.nonInheritedProperties[J])}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}{for(var Q=[].concat(_toConsumableArray(n.childNodes)),ee=0,te;ee<Q.length;ee++)te=Q[ee],("tspan"===te.nodeName||"a"===te.nodeName||"#text"===te.nodeName)&&te.remove();if(0<a.childItems.length){var ne=!0,ae=!1,re;try{for(var oe=a.childItems[Symbol.iterator](),ie;!(ne=(ie=oe.next()).done);ne=!0){var se=ie.value,le=_createElement("svg:tspan");n.append(le);var de=getComputedStyle(le),ue=!0,ce=!1,pe=void 0;try{for(var he=keys(se.inheritedProperties)[Symbol.iterator](),me,be;!(ue=(me=he.next()).done);ue=!0)be=me.value,de.getPropertyValue(be)!==se.inheritedProperties[be]&&le.style.setProperty(be,se.inheritedProperties[be])}catch(e){ce=!0,pe=e}finally{try{!ue&&he.return&&he.return()}finally{if(ce)throw pe}}var xe=!0,ge=!1,ve=void 0;try{for(var ye=keys(se.nonInheritedProperties)[Symbol.iterator](),fe,_e;!(xe=(fe=ye.next()).done);xe=!0)_e=fe.value,de.getPropertyValue(_e)!==se.nonInheritedProperties[_e]&&le.style.setProperty(_e,se.nonInheritedProperties[_e])}catch(e){ge=!0,ve=e}finally{try{!xe&&ye.return&&ye.return()}finally{if(ge)throw ve}}if(se.href){var we=_createElement("svg:a");we.setAttribute("_href",se.href),we.textContent=se.textContent,le.append(we)}else le.textContent=se.textContent}}catch(e){ae=!0,re=e}finally{try{!ne&&oe.return&&oe.return()}finally{if(ae)throw re}}}}}if(r){var ke=0,Ae=null,Ce=!0,Se=!1,Ee;try{for(var Te=getRenderedTextNodes(e)[Symbol.iterator](),Pe,Le;!(Ce=(Pe=Te.next()).done);Ce=!0){Le=Pe.value;for(var Me=0;Me<=Le.textContent.length;Me+=1,ke+=1)ke===o&&t.setStart(Le,Me),ke===s&&(0==Me&&Ae?t.setEnd(Ae,Ae.textContent.length):t.setEnd(Le,Me));ke-=1,Ae=Le}}catch(e){Se=!0,Ee=e}finally{try{!Ce&&Te.return&&Te.return()}finally{if(Se)throw Ee}}}},reduceText=function(e,t){var n=e.querySelector("textPath")||e,a=t&&e.contains(t.commonAncestorContainer),r=-1,o=-1;if(a){var i=getGlobalOffset(t.startContainer,t.startOffset),s=_slicedToArray(i,2),l=s[1],d=getGlobalOffset(t.endContainer,t.endOffset),u=_slicedToArray(d,2),c=u[1];r=l,o=c}spanifyText(e,null);var p=n.querySelectorAll("tspan"),h=1===p.length?p[0]:null;if(h&&0===h.style.length){var m=!0,b=!1,x;try{for(var g=h.childNodes[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,n.append(y)}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}h.remove()}if(a){var f=0,_=null,w=!0,k=!1,A;try{for(var C=getRenderedTextNodes(e)[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0){E=S.value;for(var T=0;T<=E.textContent.length;T+=1,f+=1)f===r&&t.setStart(E,T),f===o&&(0==T&&_?t.setEnd(_,_.textContent.length):t.setEnd(E,T));f-=1,_=E}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}},getLocalOffset=function(e,t){var n=null,a=null,r=0,o=0,i=!0,s=!1,l;try{for(var d=getRenderedTextNodes(e)[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0){c=u.value;for(var p=0;p<=c.textContent.length;p+=1,o+=1)o===t&&(0==p&&n?(a=n,r=n.textContent.length):(a=c,r=p));o-=1,n=c}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}return[a,r]},getGlobalOffset=function(e,t){var n=e.closest("text"),a=0,r=-1,o=!0,i=!1,s;try{for(var l=getRenderedTextNodes(n)[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0){if(u=d.value,u===e){r=a+t;break}a+=u.length}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return[n,r]},getRenderedTextNodes=function(e){var t=[];if(e.closest("text")){for(var n=[],a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);a.nextNode();)n.push(a.currentNode);var r=!0,o=!1,i;try{for(var s=n[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.parentElement;if("text"===u.localName||"tspan"===u.localName||"textPath"===u.localName)0<u.getNumberOfChars()&&t.push(d);else if("a"===u.localName){var c=u.getBBox();(0!==c.x||0!==c.y||0!==c.width||0!==c.height)&&t.push(d)}}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}return t},getRenderedChars=function(e){var t=getRenderedTextNodes(e),n=t.map(function(e){return e.textContent}).join("").split("");return n},getTspansIntersectedByRange=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;null===t&&(t=e.commonAncestorContainer.closest("text"));var n=t.querySelector("textPath"),a=n||t,r=a.querySelectorAll("tspan"),o=[];if(0<r.length){if(e){var i=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,e.intersectsNode(c)&&o.push(c)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}if(0<o.length){var p=e.direction,h="backward"===p?o[o.length-1]:o[0],m=o.filter(function(e){return e!==h});o=[h].concat(_toConsumableArray(m))}}return o},getComputedTextProperties=function(e){var t=getComputedStyle(e),n={},a={},r=!0,o=!1,i;try{for(var s=_propertySchemas2[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,d.appliesTo.includes("text")||d.appliesTo.includes("tspan"))if("font"===d.name||"display"===d.name)continue;else!0===d.inheritable?n[d.name]=t.getPropertyValue(d.name):!1===d.inheritable&&(a[d.name]=t.getPropertyValue(d.name))}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return[n,a]},getTextModel=function(e){var t={rootItem:null,childItems:[]};{var n=getComputedTextProperties(e),a=_slicedToArray(n,2),r=a[0],o=a[1];t.rootItem={inheritedProperties:r,nonInheritedProperties:o}}{var i=!0,s=!1,l;try{for(var d=getRenderedTextNodes(e)[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p={textContent:c.textContent,href:null,inheritedProperties:{},nonInheritedProperties:{}},h=c.closest("tspan, text"),m=getComputedTextProperties(h),b=_slicedToArray(m,2),x=b[0],g=b[1];p.inheritedProperties=x,h!==e&&(p.nonInheritedProperties=g);for(var v=c.parentNode;v!==e;v=v.parentNode)if("a"===v.localName&&v.hasAttribute("_href")){p.href=v.getAttribute("_href");break}t.childItems.push(p)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}var y=!0,f=!1,_;try{for(var w=t.childItems[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=!0,S=!1,E=void 0;try{for(var T=keys(A.inheritedProperties)[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,t.rootItem.inheritedProperties[L]===A.inheritedProperties[L]&&delete A.inheritedProperties[L]}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}if(0<t.childItems.length){var M=_toArray(t.childItems),D=M[0],I=M.slice(1),V=!0,N=!1,R;try{for(var z=keys(D.inheritedProperties)[Symbol.iterator](),G;!(V=(G=z.next()).done);V=!0){var B=G.value,O=!0,j=!0,q=!1,U=void 0;try{for(var H=I[Symbol.iterator](),F,$;!(j=(F=H.next()).done);j=!0)$=F.value,$.inheritedProperties[B]!==D.inheritedProperties[B]&&(O=!1)}catch(e){q=!0,U=e}finally{try{!j&&H.return&&H.return()}finally{if(q)throw U}}if(O){t.rootItem.inheritedProperties[B]=D.inheritedProperties[B];var Y=!0,X=!1,W=void 0;try{for(var K=t.childItems[Symbol.iterator](),Z,J;!(Y=(Z=K.next()).done);Y=!0)J=Z.value,delete J.inheritedProperties[B]}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}}}catch(e){N=!0,R=e}finally{try{!V&&z.return&&z.return()}finally{if(N)throw R}}}if(1<t.childItems.length){var Q=[],ee=null,te=!0,ne=!1,ae;try{for(var re=t.childItems[Symbol.iterator](),oe,ie;!(te=(oe=re.next()).done);te=!0)ie=oe.value,ee&&ee.href===ie.href&&_compareObjects(ee.nonInheritedProperties,ie.nonInheritedProperties)&&_compareObjects(ee.inheritedProperties,ie.inheritedProperties)?ee.textContent+=ie.textContent:(Q.push(ie),ee=ie)}catch(e){ne=!0,ae=e}finally{try{!te&&re.return&&re.return()}finally{if(ne)throw ae}}t.childItems=Q}return t};BoxySVG.utils.text={spanifyText:spanifyText,reduceText:reduceText,getLocalOffset:getLocalOffset,getGlobalOffset:getGlobalOffset,getRenderedTextNodes:getRenderedTextNodes,getRenderedChars:getRenderedChars,getTspansIntersectedByRange:getTspansIntersectedByRange}}}{{var _BoxySVG$utils$geomet2=BoxySVG.utils.geometry,_combineRects=_BoxySVG$utils$geomet2.combineRects,_transformRect2=_BoxySVG$utils$geomet2.transformRect,_BoxySVG$utils$text=BoxySVG.utils.text,_getGlobalOffset9=_BoxySVG$utils$text.getGlobalOffset,_getRenderedTextNodes=_BoxySVG$utils$text.getRenderedTextNodes,DEFAULT_BBOX_OPTIONS={fill:!0,stroke:!0,marker:!0,clipped:!0},getUserBBox=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:DEFAULT_BBOX_OPTIONS,n;if("tspan"===e.localName){var a=_getRenderedTextNodes(e),r=document.createRange();if(0<a.length&&(r.setStart(a[0],0),r.setEnd(a[a.length-1],a[a.length-1].length)),!1===r.collapsed){for(var o=r.startContainer.closest("text"),s=_getGlobalOffset9(r.startContainer,r.startOffset),l=_slicedToArray(s,2),d=l[1],u=_getGlobalOffset9(r.endContainer,r.endOffset),c=_slicedToArray(u,2),p=c[1],h=[],m=d,i;m<p;m+=1)i=o.getExtentOfChar(m),h.push(i);n=_combineRects(h)}else n=new SVGRect(0,0,0,0)}else n="use"===e.localName?new SVGRect(0,0,e.width.baseVal.value,e.height.baseVal.value):e.getBBox(t);return n},getClientBBox=function(e){var t=e.getScreenCTM(),n=getUserBBox(e);return _transformRect2(n,t)};BoxySVG.utils.bbox={getUserBBox:getUserBBox,getClientBBox:getClientBBox}}}{{var _createElement2=BoxySVG.utils.element.createElement,_round5=BoxySVG.utils.math.round,_BoxySVG$utils$geomet3=BoxySVG.utils.geometry,_checkCollinearity=_BoxySVG$utils$geomet3.checkCollinearity,_comparePoints=_BoxySVG$utils$geomet3.comparePoints,_pow4=Math.pow,path=_createElement2("svg:path"),serializePathData=function(e){return path.setPathData(e),path.getAttribute("d")},deserializePathData=function(e){return path.setAttribute("d",e),path.getPathData()},normalizePathData=function(e){return path.setPathData(e),path.getPathData({normalize:!0})},harmonizePathData=function(e){if(!e.find(function(e){return"C"===e.type||"L"===e.type}))return[];var t=[],n=null,a=0,r=0,o=0,i=0,s=!0,l=!1,d;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,"M"===p.type?("M"===n&&t.pop(),t.push(p),a=p.values[0],r=p.values[1],o=p.values[0],i=p.values[1]):"L"===p.type?("Z"===n&&t.push({type:"M",values:[o,i]}),t.push(p),a=p.values[0],r=p.values[1]):"C"===p.type?("Z"===n&&t.push({type:"M",values:[o,i]}),t.push(p),a=p.values[4],r=p.values[5]):"Z"===p.type&&((a!==o||r!==i)&&t.push({type:"L",values:[o,i]}),t.push(p),a=o,r=i),n=p.type}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}return t},comparePathData=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n].type===t[n].type){var a=e[n].values?e[n].values:[],r=t[n].values?t[n].values:[];if(a.length===r.length){for(var o=0;o<a.length;o+=1)if(a[o]!==r[o])return!1;}else return!1}else if("z"===e[n].type.toLowerCase()&&"z"===t[n].type.toLowerCase())continue;else return!1;return!0},_clonePathData=function(e){return e.map(function(e){return{type:e.type,values:[].concat(_toConsumableArray(e.values))}})},getPathDataBySubpath=function(e){var t=[],n=[],a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,"C"===l.type||"L"===l.type?n.push(l):"M"===l.type?(0<n.length&&(t.push(n),n=[]),n.push(l)):"Z"===l.type&&(n.push(l),t.push(n),n=[])}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return 0<n.length&&t.push(n),t},reversePath=function(e){var t=harmonizePathData(e.getPathData({normalize:!0})),n=getPathDataBySubpath(t),a=!0,r=!1,o;try{for(var s=n[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0){for(var d=l.value,u=d[0],c=[],p=null,h=1,i;h<d.length;h+=1)i=d[h],"Z"===i.type?p=i:c.push(i);var m=u.values[0],b=u.values[1];"C"===c[c.length-1].type?(u.values[0]=c[c.length-1].values[4],u.values[1]=c[c.length-1].values[5]):(u.values[0]=c[c.length-1].values[0],u.values[1]=c[c.length-1].values[1]);var g=!0,v=!1,f=void 0;try{for(var _=c[Symbol.iterator](),w,k;!(g=(w=_.next()).done);g=!0)if(k=w.value,"L"===k.type){var A=_slicedToArray(k.values,2),C=A[0],x=A[1];k.values=[m,b],m=C,b=x}else if("C"===k.type){var y=_slicedToArray(k.values,6),S=y[0],E=y[1],T=y[2],P=y[3],L=y[4],M=y[5];k.values=[T,P,S,E,m,b],m=L,b=M}}catch(e){v=!0,f=e}finally{try{!g&&_.return&&_.return()}finally{if(v)throw f}}c.reverse(),d.length=0,d.push(u);var D=!0,I=!1,V=void 0;try{for(var N=c[Symbol.iterator](),R,z;!(D=(R=N.next()).done);D=!0)z=R.value,d.push(z)}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}p&&d.push(p)}}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}n.reverse(),t=[];var G=!0,B=!1,O;try{for(var j=n[Symbol.iterator](),q;!(G=(q=j.next()).done);G=!0){var U=q.value,H=!0,F=!1,$=void 0;try{for(var Y=U[Symbol.iterator](),X,W;!(H=(X=Y.next()).done);H=!0)W=X.value,t.push(W)}catch(e){F=!0,$=e}finally{try{!H&&Y.return&&Y.return()}finally{if(F)throw $}}}}catch(e){B=!0,O=e}finally{try{!G&&j.return&&j.return()}finally{if(B)throw O}}e.setPathData(t)},openPath=function(e){var t=e.getPathData({normalize:!0}),n=[],a=!0,r=!1,o;try{for(var i=getPathDataBySubpath(t)[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l[l.length-1];"Z"===d.type&&l.pop();var u=!0,c=!1,p=void 0;try{for(var h=l[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,n.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}e.setPathData(n)},closePath=function(e){var t=e.getPathData({normalize:!0}),n=[],a=!0,r=!1,o;try{for(var i=getPathDataBySubpath(t)[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0){if(l=s.value,1<l.length){var d=l[l.length-1];"Z"!==d.type&&l.push({type:"Z",values:[]})}var u=!0,c=!1,p=void 0;try{for(var h=l[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,n.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}e.setPathData(n)},canOpenPath=function(e){var t=e.getPathData({normalize:!0}),n=!0,a=!1,r;try{for(var o=getPathDataBySubpath(t)[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=s[s.length-1];if("Z"===l.type)return!0}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1},canClosePath=function(e){var t=e.getPathData({normalize:!0}),n=!0,a=!1,r;try{for(var o=getPathDataBySubpath(t)[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,1<s.length){var l=s[s.length-1];if("Z"!==l.type)return!0}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1},getNearestPointOnPath=function(e,t){for(var n=e.getTotalLength(),a=e.getPathData(),r=0.125*(n/a.length),o=null,i=null,s=Infinity,l=function(e){return _pow4(e.x-t.x,2)+_pow4(e.y-t.y,2)},d=0;d<=n;d+=r){var u=e.getPointAtLength(d),c=l(u);c<s&&(o=u,i=d,s=c)}for(r*=0.5;0.5<r;){var p=i-r,h=e.getPointAtLength(p),m=l(h);if(0<=p&&m<s)o=h,i=p,s=m;else{var b=i+r,x=e.getPointAtLength(b),g=l(x);b<=n&&g<s?(o=x,i=b,s=g):r*=0.5}}return[o,i,s]},getSegSubpathData=function(e,t){var n=[],a=[],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"C"===d.type||"L"===d.type?a.push(d):"M"===d.type?(0<a.length&&(n.push(a),a=[]),a.push(d)):"Z"===d.type&&(a.push(d),n.push(a),a=[])}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return 0<a.length&&n.push(a),n.find(function(t){return t.includes(e)})||null},getSegIndexAtLength=function e(t,n){e.cachedPath||(e.cachedPath=_createElement2("svg:path"));for(var a=e.cachedPath,r=[],o=0,i;o<t.length;o+=1){i=t[o],r.push(i),a.setPathData(r);var s=a.getTotalLength();if(s>=n)return o}return t.length-1},getCurveShapeBetweenSegs=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,a="sharp",r=BoxySVG.classes.Vector;if(e&&t&&"C"===e.type&&"C"===t.type){var o=new SVGPoint(e.values[4],e.values[5]),i=new SVGPoint(t.values[0],t.values[1]),s=new SVGPoint(e.values[2],e.values[3]);if(!1===_comparePoints(o,i)&&!1===_comparePoints(o,s)&&!0===_checkCollinearity(i,o,s,n)){var l=new r(o,i),d=new r(o,s),u=_round5(l.length,2),c=_round5(d.length,2);a=u===c?"symmetric-smooth":"smooth"}}return a},makePrevSegSmooth=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],a=BoxySVG.classes.Vector,r=new SVGPoint(t.values[4],t.values[5]),o=new SVGPoint(e.values[0],e.values[1]),i=new SVGPoint(t.values[2],t.values[3]),s=new a(r,o),l=new a(r,i),d=s.getOppositeVector();!1===n&&(d.length=l.length),t.values[2]=r.x+d.x,t.values[3]=r.y+d.y},makeNextSegSmooth=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],a=BoxySVG.classes.Vector,r=new SVGPoint(e.values[4],e.values[5]),o=new SVGPoint(e.values[2],e.values[3]),i=new SVGPoint(t.values[0],t.values[1]),s=new a(r,o),l=new a(r,i),d=s.getOppositeVector();!1===n&&(d.length=l.length),t.values[0]=r.x+d.x,t.values[1]=r.y+d.y},makeSharpSegsSmooth=function(e,t,n){var a=BoxySVG.classes.Vector,r;"M"===e.type||"L"===e.type?r=new SVGPoint(e.values[0],e.values[1]):"C"===e.type&&(r=new SVGPoint(e.values[4],e.values[5]));var o=new SVGPoint(n.values[4],n.values[5]),i=new SVGPoint(t.values[4],t.values[5]),s=new a(i,r),l=new a(i,o),u=s.length/l.length,d=new a(u*l.x-s.x,u*l.y-s.y).normalize();t.values[2]=i.x+-d.x*(s.length/3),t.values[3]=i.y+-d.y*(s.length/3),n.values[0]=i.x+d.x*(l.length/3),n.values[1]=i.y+d.y*(l.length/3)},convertLSegsToCSegs=function(e){var t=null,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0){if(s=i.value,"L"===s.type){var l=_slicedToArray(s.values,2),d=l[0],u=l[1],c="C"===t.type?t.values[4]:t.values[0],p="C"===t.type?t.values[5]:t.values[1];s.type="C",s.values=[c,p,d,u,d,u]}t=s}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}},convertCSegsToLSegs=function(e){var t=null,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0){if(s=i.value,"C"===s.type){var l=_slicedToArray(s.values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b="C"===t.type?t.values[4]:t.values[0],x="C"===t.type?t.values[5]:t.values[1];d===b&&u===x&&c===h&&p===m&&(s.type="L",s.values=[h,m])}t=s}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}},isSegSubpathClosed=function(e,t){var n=getSegSubpathData(e,t);return"Z"===n[n.length-1].type};BoxySVG.utils.pathGeneral={serializePathData:serializePathData,deserializePathData:deserializePathData,normalizePathData:normalizePathData,harmonizePathData:harmonizePathData,clonePathData:_clonePathData,comparePathData:comparePathData,getPathDataBySubpath:getPathDataBySubpath,openPath:openPath,closePath:closePath,reversePath:reversePath,canOpenPath:canOpenPath,canClosePath:canClosePath,getNearestPointOnPath:getNearestPointOnPath,getSegSubpathData:getSegSubpathData,getSegIndexAtLength:getSegIndexAtLength,getCurveShapeBetweenSegs:getCurveShapeBetweenSegs,makePrevSegSmooth:makePrevSegSmooth,makeNextSegSmooth:makeNextSegSmooth,makeSharpSegsSmooth:makeSharpSegsSmooth,convertLSegsToCSegs:convertLSegsToCSegs,convertCSegsToLSegs:convertCSegsToLSegs,isSegSubpathClosed:isSegSubpathClosed}}}{{var _degToRad=BoxySVG.utils.geometry.degToRad,_round6=BoxySVG.utils.math.round,_comparePathData=BoxySVG.utils.pathGeneral.comparePathData,_getHash=BoxySVG.utils.random.getHash,_Vector=BoxySVG.classes.Vector,_sin=Math.sin,_cos=Math.cos,_PI2=Math.PI,CURRENT_SCHEMA={triangle:1,rect:1,"n-gon":1,star:1,ring:1},getShapeData=function(e){var t=null;if(e.hasAttribute("data-bx-shape")){var n=e.getAttribute("data-bx-shape"),a=n.trim().split(/[\s+,]+/);if(3<=a.length){var r=a[0],o=a.slice(1,a.length-1),i=a[a.length-1];if(i.includes("@")){var s=i.split("@"),l=_slicedToArray(s,2),d=l[0],u=l[1];o=o.map(function(e){return parseFloat(e)}),t={type:r,values:o}}}}return t},setShapeData=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:9,a=shapeDataToPathData(t,n);if(a){e.setPathData(a);var r=t.values.map(function(e){return _round6(e,n)}),o=e.getAttribute("d"),i=t.type+" "+r.join(" ")+" "+CURRENT_SCHEMA[t.type],s=_getHash(o+" / "+i).toString(32);i+="@"+s,e.setAttribute("data-bx-shape",i)}},validateShapeData=function(e){var t=!1;if(e.hasAttribute("data-bx-shape")){var n=e.getAttribute("d"),a=e.getAttribute("data-bx-shape"),r=a.trim().split(/[\s+,]+/);if(3<=r.length){var o=r[0],i=r.slice(1,r.length-1),s=r[r.length-1];if(s.includes("@")){var l=s.split("@"),d=_slicedToArray(l,2),u=d[0],c=d[1];c===_getHash(n+" / "+o+" "+i.join(" ")+" "+u).toString(32)&&(t=!0)}}}return t},shapeDataToPathData=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=null;return"triangle"===e.type?n=triangleShapeDataToPathData(e,t):"rect"===e.type?n=rectShapeDataToPathData(e,t):"n-gon"===e.type?n=nGonShapeDataToPathData(e,t):"star"===e.type?n=starShapeDataToPathData(e,t):"ring"===e.type&&(n=ringShapeDataToPathData(e,t)),n},triangleShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],s=n[3],l=n[4],d=n[5],u=[];if(0===d)u.push({type:"M",values:[a+o*l,r]}),u.push({type:"L",values:[a+o,r+s]}),u.push({type:"L",values:[a,r+s]}),u.push({type:"L",values:[a+o*l,r]});else for(var c=[{x:a+o*l,y:r},{x:a+o,y:r+s},{x:a,y:r+s}],p=0;p<c.length;p+=1){var i=c[p],h=c[p+1]||c[0],m=c[p-1]||c[c.length-1],b={x:i.x+(m.x-i.x)*d,y:i.y+(m.y-i.y)*d},g={x:i.x+(h.x-i.x)*d,y:i.y+(h.y-i.y)*d},v={x:i.x,y:i.y};u.push({type:0==p?"M":"L",values:[b.x,b.y]}),u.push({type:"Q",values:[v.x,v.y,g.x,g.y]})}u.push({type:"Z",values:[]});var f=!0,_=!1,w;try{for(var k=u[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.values=C.values.map(function(e){return _round6(e,t)})}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}return u},rectShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,12),a=n[0],r=n[1],o=n[2],i=n[3],s=n[4],l=n[5],d=n[6],u=n[7],c=n[8],p=n[9],h=n[10],m=n[11];c===void 0&&(c=s),p===void 0&&(p=l),h===void 0&&(h=d),m===void 0&&(m=u),s=s>o/2?o/2:s,l=l>o/2?o/2:l,d=d>o/2?o/2:d,u=u>o/2?o/2:u,c=c>i/2?i/2:c,p=p>i/2?i/2:p,h=h>i/2?i/2:h,m=m>i/2?i/2:m;var b=[{type:"M",values:[a+s,r]},{type:"H",values:[a+o-l]},{type:"A",values:[l,p,0,0,1,a+o,r+p]},{type:"V",values:[r+i-h]},{type:"A",values:[d,h,0,0,1,a+o-d,r+i]},{type:"H",values:[a+u]},{type:"A",values:[u,m,0,0,1,a,r+i-m]},{type:"V",values:[r+c]},{type:"A",values:[s,c,0,0,1,a+s,r]},{type:"Z",values:[]}];b=b.filter(function(e){return"A"===e.type&&(0===e.values[0]||0===e.values[1])?!1:!0});var x=!0,g=!1,v;try{for(var y=b[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,_.values=_.values.map(function(e){return _round6(e,t)})}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}return b},nGonShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],l=n[3],d=n[4],u=n[5],c=[];if(0===u)for(var p=0;p<d;p+=1){var s=2*_PI2*(p/d)-_PI2/2,h=o*_cos(s)+a,m=l*_sin(s)+r;0==p?c.push({type:"M",values:[h,m]}):c.push({type:"L",values:[h,m]})}else{for(var b=[],x=0,g;x<d;x+=1)g=2*_PI2*(x/d)-_PI2/2,b.push({x:o*_cos(g)+a,y:l*_sin(g)+r});for(var v=0;v<b.length;v+=1){var i=b[v],y=b[v+1]||b[0],f=b[v-1]||b[b.length-1],_={x:i.x+(f.x-i.x)*u,y:i.y+(f.y-i.y)*u},w={x:i.x+(y.x-i.x)*u,y:i.y+(y.y-i.y)*u},k={x:i.x,y:i.y};c.push({type:0==v?"M":"L",values:[_.x,_.y]}),c.push({type:"Q",values:[k.x,k.y,w.x,w.y]})}}c.push({type:"Z",values:[]});var A=!0,C=!1,S;try{for(var E=c[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,P.values=P.values.map(function(e){return _round6(e,t)})}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}return c},starShapeDataToPathData=function(e,t){for(var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],i=n[3],l=n[4],d=n[5],u=[],c=0;c<d;c+=1){var s=2*_PI2*(c/d)-_PI2/2,p=o*_cos(s)+a,h=i*_sin(s)+r;0==c?u.push({type:"M",values:[p,h]}):u.push({type:"L",values:[p,h]}),s=2*_PI2*(c/d)+_PI2/d-_PI2/2,p=l*o*_cos(s)+a,h=l*i*_sin(s)+r,u.push({type:"L",values:[p,h]})}u.push({type:"Z",values:[]});var m=!0,b=!1,x;try{for(var g=u[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,y.values=y.values.map(function(e){return _round6(e,t)})}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}return u},ringShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],i=n[3],s=n[4],l=n[5],d=[{type:"M",values:[a,r]},{type:"m",values:[-s,0]},{type:"a",values:[s,l,0,1,0,2*s,0]},{type:"a",values:[s,l,0,1,0,-(2*s),0]},{type:"Z",values:[]},{type:"M",values:[a,r]},{type:"m",values:[-o,0]},{type:"a",values:[o,i,0,0,1,2*o,0]},{type:"a",values:[o,i,0,0,1,-(2*o),0]},{type:"Z",values:[]}],u=!0,c=!1,p;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,b.values=b.values.map(function(e){return _round6(e,t)})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return d},getNGonShapeVertexPoint=function(e,t,n,a,r,o){var i=2*_PI2*(e/o)-_PI2/2,s=a*_cos(i)+t,l=r*_sin(i)+n;return new SVGPoint(s,l)},getStarShapeVertexPoint=function(e,t,n,a,r,o,i){var s=_PI2*(e/i)-_PI2/2,l;return l=0==e%2?new SVGPoint(a*_cos(s)+t,r*_sin(s)+n):new SVGPoint(o*a*_cos(s)+t,o*r*_sin(s)+n),l};BoxySVG.utils.pathShapes={getShapeData:getShapeData,setShapeData:setShapeData,validateShapeData:validateShapeData,shapeDataToPathData:shapeDataToPathData,getNGonShapeVertexPoint:getNGonShapeVertexPoint,getStarShapeVertexPoint:getStarShapeVertexPoint}}}{{var _BoxySVG$utils$bbox=BoxySVG.utils.bbox,_getUserBBox=_BoxySVG$utils$bbox.getUserBBox,_getClientBBox=_BoxySVG$utils$bbox.getClientBBox,_BoxySVG$utils$geomet4=BoxySVG.utils.geometry,_degToRad2=_BoxySVG$utils$geomet4.degToRad,_getRotationAngleFromPoints=_BoxySVG$utils$geomet4.getRotationAngleFromPoints,_getDistanceBetweenPoints=_BoxySVG$utils$geomet4.getDistanceBetweenPoints,_combineRects2=_BoxySVG$utils$geomet4.combineRects,_normalizePathData=BoxySVG.utils.pathGeneral.normalizePathData,_roundMatrix=BoxySVG.utils.matrix.roundMatrix,_round7=BoxySVG.utils.math.round,_abs=Math.abs,tan=Math.tan,_parseFloat3=Number.parseFloat,getComputedTransform=function(e){var t=null;return t="linearGradient"===e.localName||"radialGradient"===e.localName?e.gradientTransform.baseVal.consolidate():"pattern"===e.localName?e.patternTransform.baseVal.consolidate():e.transform.baseVal.consolidate(),t?SVGMatrix.fromMatrix(t.matrix):new SVGMatrix},getTransformFromPoints=function(e,t,n,a,r,o){var i=function(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0])},s=i([[e.x,e.y,1],[t.x,t.y,1],[n.x,n.y,1]]),l=i([[a.x,e.y,1],[r.x,t.y,1],[o.x,n.y,1]]),d=i([[a.y,e.y,1],[r.y,t.y,1],[o.y,n.y,1]]),u=i([[e.x,a.x,1],[t.x,r.x,1],[n.x,o.x,1]]),c=i([[e.x,a.y,1],[t.x,r.y,1],[n.x,o.y,1]]),p=i([[e.x,e.y,a.x],[t.x,t.y,r.x],[n.x,n.y,o.x]]),h=i([[e.x,e.y,a.y],[t.x,t.y,r.y],[n.x,n.y,o.y]]);return new SVGMatrix([l/s,d/s,u/s,c/s,p/s,h/s])},getTransformToElement=function(e,t){return t.getScreenCTM().inverse().multiply(e.getScreenCTM())},getTransformOriginBBoxPoint=function(e){var t,n;if(e.hasAttribute("data-bx-origin")){var a=e.getAttribute("data-bx-origin").split(" ");t=_parseFloat3(a[0]),n=_parseFloat3(a[1])}else t=0.5,n=0.5;return new SVGPoint(t,n)},setTransformOriginBBoxPoint=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:6,a=_round7(t.x,n),r=_round7(t.y,n);e.setAttribute("data-bx-origin",a+" "+r)},getTransformOriginUserPoint=function(e){var t=_getUserBBox(e),n=getTransformOriginBBoxPoint(e),a=bboxPointToUserPoint(n,t);return a},getTransformOriginClientPoint=function(e){var t=e.getScreenCTM(),n=getTransformOriginUserPoint(e),a=n.matrixTransform(t);return a},getComputedTransformOriginClientPoint=function(e){var t=1<arguments.length&&arguments[1]!==void 0&&arguments[1],n=e.map(function(e){return getTransformOriginClientPoint(e)}),a=n[0],r=!0,o=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=_getDistanceBetweenPoints(u,a);if(3<c){r=!1;break}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var p=null;if(r){if(t){var h=e.map(function(e){return _getClientBBox(e)}),m=_combineRects2(h);p=new SVGPoint((n[0].x-m.x)/m.width,(n[0].y-m.y)/m.height)}else p=n[0];}else if(t)p=new SVGPoint(0.5,0.5);else{var b=e.map(function(e){return _getClientBBox(e)}),x=_combineRects2(b);p=new SVGPoint(x.x+x.width/2,x.y+x.height/2)}return p},getElementRotationAngle=function(e){var t=e.getScreenCTM(),n=t.inverse(),a=getTransformOriginUserPoint(e),r=a.matrixTransform(e.getScreenCTM()),o=_getUserBBox(e),i=new SVGPoint(r.x-100,r.y),s=new SVGPoint(a.x-100,a.y).matrixTransform(e.getScreenCTM()),l=_getRotationAngleFromPoints(r,i,s);return l},getElementRotationLocalAngle=function(e){var t=getTransformToElement(e,e.parentElement),n=t.inverse(),a=getTransformOriginUserPoint(e),r=a.matrixTransform(t),o=_getUserBBox(e),i=new SVGPoint(r.x-100,r.y),s=new SVGPoint(a.x-100,a.y).matrixTransform(t),l=_getRotationAngleFromPoints(r,i,s);return l},setElementRotationAngle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=getElementRotationAngle(e),r=getComputedTransform(e),o=e.getScreenCTM(),i=o.inverse(),s=getTransformOriginUserPoint(e),l=s.matrixTransform(o),d=SVGMatrix.fromMatrix(r);d.multiplySelf(i),d.rotateSelf(-a+t,l.x,l.y),d.multiplySelf(o),null!==n&&(d=_roundMatrix(d,n)),!1===d.isIdentity()?e.setAttribute("transform",d.toString()):e.removeAttribute("transform")},setElementRotationLocalAngle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=getElementRotationAngle(e),r=getComputedTransform(e),o=getTransformToElement(e,e.parentElement),i=o.inverse(),s=getTransformOriginUserPoint(e),l=s.matrixTransform(o),d=SVGMatrix.fromMatrix(r);d.multiplySelf(i),d.rotateSelf(-a+t,l.x,l.y),d.multiplySelf(o),null!==n&&(d=_roundMatrix(d,n)),!1===d.isIdentity()?e.setAttribute("transform",d.toString()):e.removeAttribute("transform")},transformPathData=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,a=_normalizePathData(e),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0){if(d=l.value,"M"===d.type||"L"===d.type){var u=new SVGPoint(d.values[0],d.values[1]).matrixTransform(t);d.values=[u.x,u.y]}else if("C"===d.type){var c=new SVGPoint(d.values[0],d.values[1]).matrixTransform(t),p=new SVGPoint(d.values[2],d.values[3]).matrixTransform(t),h=new SVGPoint(d.values[4],d.values[5]).matrixTransform(t);d.values=[c.x,c.y,p.x,p.y,h.x,h.y]}d.values=d.values.map(function(e){return _round7(e,n)})}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return a},skew=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=SVGMatrix.fromMatrix(e),i=_degToRad2(t),s=_degToRad2(n),l=new SVGMatrix;return l=shear(l,tan(i),tan(s)),o=translateOrigin(o,a,r),o.multiplySelf(l),o=translateOrigin(o,-a,-r),o},shear=function(e,t,n){var r=SVGMatrix.fromMatrix(e),o=r.a,a=r.b;return r.a+=n*r.c,r.b+=n*r.d,r.c+=t*o,r.d+=t*a,r},translateOrigin=function(e,t,n){var a=SVGMatrix.fromMatrix(e);return a.e=a.e+t*a.a+n*a.c,a.f=a.f+t*a.b+n*a.d,a},bboxPointToUserPoint=function(e,t){var n=new SVGPoint(t.x+e.x*t.width,t.y+e.y*t.height);return n},userPointToBBoxPoint=function(e,t){var n=new SVGPoint((e.x-t.x)/t.width,(e.y-t.y)/t.height);return n};BoxySVG.utils.transformGeneral={getComputedTransform:getComputedTransform,getTransformFromPoints:getTransformFromPoints,getTransformToElement:getTransformToElement,getTransformOriginBBoxPoint:getTransformOriginBBoxPoint,setTransformOriginBBoxPoint:setTransformOriginBBoxPoint,getTransformOriginUserPoint:getTransformOriginUserPoint,getTransformOriginClientPoint:getTransformOriginClientPoint,getComputedTransformOriginClientPoint:getComputedTransformOriginClientPoint,getElementRotationAngle:getElementRotationAngle,getElementRotationLocalAngle:getElementRotationLocalAngle,setElementRotationAngle:setElementRotationAngle,setElementRotationLocalAngle:setElementRotationLocalAngle,transformPathData:transformPathData,skew:skew,bboxPointToUserPoint:bboxPointToUserPoint,userPointToBBoxPoint:userPointToBBoxPoint}}}{{var _TokensScanner=BoxySVG.classes.TokensScanner,_createElement3=BoxySVG.utils.element.createElement,_BoxySVG$utils$variab3=BoxySVG.utils.variables,_lengthUnits=_BoxySVG$utils$variab3.lengthUnits,_alignValues=_BoxySVG$utils$variab3.alignValues,_window=window,tokenize=_window.tokenize,EOFToken=_window.EOFToken,parseACommaSeparatedListOfComponentValues=_window.parseACommaSeparatedListOfComponentValues,_path=_createElement3("path"),parseViewBox=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a,r,o,i;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)a=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)r=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType&&0<=n.currentToken.value)o=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType&&0<=n.currentToken.value)i=n.currentToken.value,n.read();else return null;return"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType?new SVGRect(a,r,o,i):null},parseAspectRatio=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"IDENT"===n.currentToken.tokenType&&_alignValues.includes(n.currentToken.value)){var a=n.currentToken.value,r="meet";if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return[a,r];if("IDENT"===n.currentToken.tokenType&&["meet","slice"].includes(n.currentToken.value)&&(r=n.currentToken.value,n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType))return[a,r]}return null},parseLength=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"DIMENSION"===n.currentToken.tokenType&&_lengthUnits.includes(n.currentToken.unit)){var a=[n.currentToken.value,n.currentToken.unit];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return a}return null},parseUrl=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"URL"===n.currentToken.tokenType){var a=n.currentToken.value;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return a}else if("FUNCTION"===n.currentToken.tokenType&&"url"===n.currentToken.value&&(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"===n.currentToken.tokenType)){var r=n.currentToken.value;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),")"===n.currentToken.tokenType&&(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType))return r.trim()}return null},parseDasharray=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a=[];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:null});else if("PERCENTAGE"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:"%"});else if("LENGTH"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:n.currentToken.unit});else return null;for(;;){var r=!1,o=!1;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&(r=!0,n.read()),","===n.currentToken.tokenType&&(o=!0,n.read()),"WHITESPACE"===n.currentToken.tokenType&&(r=!0,n.read()),"NUMBER"===n.currentToken.tokenType){if(r||o)a.push({value:n.currentToken.value,unit:null});else return null;}else if("PERCENTAGE"!==n.currentToken.tokenType){if("DIMENSION"!==n.currentToken.tokenType)return"EOF"===n.currentToken.tokenType?o?null:a:null;if((r||o)&&_lengthUnits.includes(n.currentToken.unit))a.push({value:n.currentToken.value,unit:n.currentToken.unit});else return null}else if(r||o)a.push({value:n.currentToken.value,unit:"%"});else return null}return null},parsePathData=function(e){return _path.setAttribute("d",e),_path.getPathData()},parseFontFamily=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a=[];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"===n.currentToken.tokenType||"IDENT"===n.currentToken.tokenType)a.push(n.currentToken.value);else return null;for(;;){var r=!1;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&(r=!0,n.read()),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"!==n.currentToken.tokenType&&"IDENT"!==n.currentToken.tokenType)return"EOF"===n.currentToken.tokenType?r?null:a:null;if(r)a.push(n.currentToken.value);else return null}return null},parseFontFaceSrc=function(e){var t=parseACommaSeparatedListOfComponentValues(e),n=[],a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=[].concat(_toConsumableArray(l),[new EOFToken]).filter(function(e){return"WHITESPACE"!==e.tokenType}),u=new _TokensScanner(d),c={};if(u.read(),"FUNCTION"==u.currentToken.type)if("url"===u.currentToken.name){var p=u.currentToken.value[0].value;c.type=p.startsWith("data:")?"embedded":"external",c.url=p,u.read(),"FUNCTION"==u.currentToken.type&&"format"===u.currentToken.name&&(c.format=u.currentToken.value[0].value)}else if("local"===u.currentToken.name){var h=u.currentToken.value[0].value;c.type="local",c.name=h}n.push(c)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n};BoxySVG.utils.parsing={parseLength:parseLength,parseUrl:parseUrl,parseViewBox:parseViewBox,parseAspectRatio:parseAspectRatio,parseDasharray:parseDasharray,parseFontFamily:parseFontFamily,parseFontFaceSrc:parseFontFaceSrc}}}{{var _getUserBBox2=BoxySVG.utils.bbox.getUserBBox,_parseUrl=BoxySVG.utils.parsing.parseUrl,_BoxySVG$utils$elemen=BoxySVG.utils.element,_createElement4=_BoxySVG$utils$elemen.createElement,_getOutermostSVGElement=_BoxySVG$utils$elemen.getOutermostSVGElement,_roundMatrix2=BoxySVG.utils.matrix.roundMatrix,_getTransformFromPoints=BoxySVG.utils.transformGeneral.getTransformFromPoints,_SVGUnitTypes=SVGUnitTypes,SVG_UNIT_TYPE_OBJECTBOUNDINGBOX=_SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,SVG_UNIT_TYPE_USERSPACEONUSE=_SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,_SVGLength=SVGLength,SVG_LENGTHTYPE_PERCENTAGE=_SVGLength.SVG_LENGTHTYPE_PERCENTAGE,createDerivedPattern=function(e){for(var t=_getOutermostSVGElement(e),n=e.hasAttribute("href")?e.getAttribute("href").substring(1):e.id,a=void 0,r=0,o;r<Infinity&&(a=n+"-"+r,!!t.querySelector("#"+a));r+=1);return e.hasAttribute("href")?(o=e.cloneNode(),o.setAttribute("id",a)):(o=_createElement4("svg:pattern"),o.setAttribute("id",a),o.setAttribute("href","#"+e.id)),o},getPatternUsers=function(e){for(var t=document.createNodeIterator(_getOutermostSVGElement(e),NodeFilter.SHOW_ELEMENT),n=null,a=[];n=t.nextNode();)for(var r=["fill","stroke"],o=0;o<r.length;o++){var i=r[o],s=n.style.getPropertyValue(i),l=_parseUrl(s);if(l){var d=l.substring(1);d===e.id&&!1===a.includes(n)&&a.push(n)}}return a},getParentPattern=function(e){var t=null;if(e.hasAttribute("href")){var n=e.getAttribute("href"),a=_getOutermostSVGElement(e).querySelector(n);a&&"pattern"===a.localName&&a!==e&&(t=a)}return t},getFurthestAncestorPattern=function(e){for(var t=e,n=_getOutermostSVGElement(t),a=[];t;){var r=t.getAttribute("href"),o=r?n.querySelector(r):null;if(o&&"pattern"===o.localName&&o!==e&&!a.includes(o))t=o,a.push(o);else break}return 0<a.length?a[a.length-1]:null},getInheritedPatternAttributes=function(e){for(var t=_getOutermostSVGElement(e),n=[],a={},r=e,o=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits","patternTransform"];r;){var i=r.getAttribute("href"),s=i?t.querySelector(i):null;if(s&&"pattern"===s.localName&&s!==e&&!n.includes(s))r=s,n.push(s);else break}var l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,!1===e.hasAttribute(h)){var m=!0,b=!1,x=void 0;try{for(var g=n[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)if(y=v.value,y.hasAttribute(h)){a[h]=y.getAttribute(h);break}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}return a},centerPattern=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=e.hasAttribute("href")?getParentPattern(e):e,r=_getUserBBox2(t),o,i,s,l,d,u;if(a.patternUnits.baseVal===SVG_UNIT_TYPE_USERSPACEONUSE)o=new SVGPoint(a.x.baseVal.value,a.y.baseVal.value),i=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value,a.y.baseVal.value),s=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value,a.y.baseVal.value+a.height.baseVal.value),l=new SVGPoint(r.x+r.width/2-a.width.baseVal.value/2,r.y+r.height/2-a.height.baseVal.value/2),d=new SVGPoint(r.x+r.width/2+a.width.baseVal.value/2,r.y+r.height/2-a.height.baseVal.value/2),u=new SVGPoint(r.x+r.width/2+a.width.baseVal.value/2,r.y+r.height/2+a.height.baseVal.value/2);else if(a.patternUnits.baseVal===SVG_UNIT_TYPE_OBJECTBOUNDINGBOX){var c=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits),p=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits+a.width.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits),h=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits+a.width.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits+a.height.baseVal.valueInSpecifiedUnits);o=new SVGPoint(r.x+c.x*r.width,r.y+c.y*r.height),i=new SVGPoint(r.x+p.x*r.width,r.y+p.y*r.height),s=new SVGPoint(r.x+h.x*r.width,r.y+h.y*r.height),l=new SVGPoint(r.x+r.width/2-r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2-r.height*a.height.baseVal.valueInSpecifiedUnits/2),d=new SVGPoint(r.x+r.width/2+r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2-r.height*a.height.baseVal.valueInSpecifiedUnits/2),u=new SVGPoint(r.x+r.width/2+r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2+r.height*a.height.baseVal.valueInSpecifiedUnits/2)}var m=_getTransformFromPoints(o,i,s,l,d,u);null!==n&&(m=_roundMatrix2(m,n)),e.setAttribute("patternTransform",m.toString())},comparePatterns=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=a.hasAttribute("href")?getParentPattern(a):a,o=!0,i=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)if(u=d.value,u!==a){var c=u.hasAttribute("href")?getParentPattern(u):u;if(c!==r)return!1}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return!0};BoxySVG.utils.pattern={createDerivedPattern:createDerivedPattern,getPatternUsers:getPatternUsers,getParentPattern:getParentPattern,getFurthestAncestorPattern:getFurthestAncestorPattern,getInheritedPatternAttributes:getInheritedPatternAttributes,centerPattern:centerPattern,comparePatterns:comparePatterns}}}{{var _getUserBBox3=BoxySVG.utils.bbox.getUserBBox,_parseColor=BoxySVG.utils.color.parseColor,_BoxySVG$utils$elemen2=BoxySVG.utils.element,_createElement5=_BoxySVG$utils$elemen2.createElement,_getOutermostSVGElement2=_BoxySVG$utils$elemen2.getOutermostSVGElement,_BoxySVG$utils$math2=BoxySVG.utils.math,_round8=_BoxySVG$utils$math2.round,_normalize2=_BoxySVG$utils$math2.normalize,_BoxySVG$utils$transf=BoxySVG.utils.transformGeneral,_getComputedTransform=_BoxySVG$utils$transf.getComputedTransform,_getTransformFromPoints2=_BoxySVG$utils$transf.getTransformFromPoints,_SVGUnitTypes2=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX=_SVGUnitTypes2.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,hasOwnStops=function(e){var t=!0,n=!1,a;try{for(var r=e.children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,"stop"===i.localName)return!0}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!1},getGradientOwnStops=function(e){var t=[],n=!0,a=!1,r;try{for(var o=e.children[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"stop"===s.localName&&t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t},getGradientComputedStops=function(e){for(var t=_getOutermostSVGElement2(e),n=e,a=[];n;){var r=getGradientOwnStops(n);if(0<r.length){a=r;break}else if(""!==e.href.baseVal){var o=t.querySelector(n.href.baseVal);if(o)n=o;else break}else break}return a},getGradientUsers=function(e){for(var t=document.createNodeIterator(_getOutermostSVGElement2(e),NodeFilter.SHOW_ELEMENT),n=null,a=[];n=t.nextNode();)for(var r=["fill","stroke"],o=0;o<r.length;o++){var i=r[o],s=n.style.getPropertyValue(i);if(s&&s.startsWith("url(")){var l=s.substring(6,s.length-2);l===e.id&&!1===a.includes(n)&&a.push(n)}}return a},convertRadialGradientToUserSpace=function(e,t){if(e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX){var n=_getComputedTransform(e),a=t.getScreenCTM(),r=t.getScreenCTM().inverse(),o=_getUserBBox3(t),i=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),s=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits+e.r.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),l=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits-e.r.baseVal.valueInSpecifiedUnits),d=i.matrixTransform(n),u=s.matrixTransform(n),c=l.matrixTransform(n),p=new SVGPoint(o.x+d.x*o.width,o.y+d.y*o.height),h=new SVGPoint(o.x+u.x*o.width,o.y+u.y*o.height),m=new SVGPoint(o.x+c.x*o.width,o.y+c.y*o.height),b=p.matrixTransform(a),x=h.matrixTransform(a),g=m.matrixTransform(a);i=new SVGPoint(0,0),s=new SVGPoint(100,0),l=new SVGPoint(0,-100);var v=_getTransformFromPoints2(i,s,l,b,x,g),y=new SVGMatrix;y.multiplySelf(r),y.multiplySelf(v),e.setAttribute("gradientUnits","userSpaceOnUse"),e.setAttribute("gradientTransform",y),e.setAttribute("cx","0"),e.setAttribute("cy","0"),e.setAttribute("r","100")}},getGradientColorAtOffset=function(e,t){var n=_createElement5("canvas"),a,r;n.width=a=100,n.height=r=10;var o=n.getContext("2d");o.clearRect(0,0,a,r);var i=o.createLinearGradient(0,0,a,0),s=!0,l=!1,d;try{for(var u=getGradientOwnStops(e)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,i.addColorStop(p.offset.baseVal,p.style.getPropertyValue("stop-color")||"#000")}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}o.fillStyle=i,o.fillRect(0,0,a,r);var h=o.getImageData(t*a,0,1,1).data,m="rgb("+h[0]+", "+h[1]+", "+h[2]+")";return m},compareGradients=function(e){if(0===e.length)return!1;if(1===e.length)return!0;var t=_toArray(e),n=t[0],a=t.slice(1),r=Symbol(),o=!0,i=!1,s;try{for(var l=e[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,u[r]=getGradientOwnStops(u)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var c=!0,p=!1,h;try{for(var m=a[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)if(x=b.value,x[r].length!==n[r].length)return!1}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}for(var g=0;g<n[r].length;g+=1){var v=n[r][g],y=!0,f=!1,_=void 0;try{for(var w=a[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=A[r][g];if(C.offset.baseVal!==v.offset.baseVal)return!1;if(C.style.getPropertyValue("stop-color")!==v.style.getPropertyValue("stop-color"))return!1}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return!0},getGradientAttribute=function e(t,n){var a=null;if(t.hasAttribute(n))a=t.getAttribute(n);else if(""!==t.href.baseVal){var r=_getOutermostSVGElement2(t).querySelector(t.href.baseVal);r&&(a=e(r,n))}return a};BoxySVG.utils.gradient={hasOwnStops:hasOwnStops,getGradientOwnStops:getGradientOwnStops,getGradientComputedStops:getGradientComputedStops,getGradientUsers:getGradientUsers,convertRadialGradientToUserSpace:convertRadialGradientToUserSpace,getGradientColorAtOffset:getGradientColorAtOffset,compareGradients:compareGradients,getGradientAttribute:getGradientAttribute}}}{{var _namespaces2=BoxySVG.utils.variables.namespaces,_templateElement=document.createElement("template"),_html=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a=t.join("");_templateElement.innerHTML=a;var r=document.importNode(_templateElement.content,!0);return 1===r.children.length?r.firstElementChild:r},_svg=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a="<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">"+t.join("")+"</svg>";_templateElement.innerHTML=a;var r=document.importNode(_templateElement.content,!0),o=r.querySelector("svg#x-stub");if(1===o.children.length)return o.firstElementChild;for(var i=[].concat(_toConsumableArray(o.childNodes)),s=0,l;s<i.length;s++)l=i[s],r.appendChild(l);return o.remove(),r},parseHTML=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return 1<t.childElementCount?t:1===t.childElementCount?t.children[0]:null},parseSVG=function(e){var t=document.createDocumentFragment(),n=document.createElementNS(_namespaces2.svg,"svg");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return 1<t.childElementCount?t:1===t.childElementCount?t.children[0]:null};BoxySVG.utils.markup={html:_html,svg:_svg,parseHTML:parseHTML,parseSVG:parseSVG}}}{{var extractImageSize=function(e){return new Promise(function(t){var n=new Image;n.onload=function(){t({width:n.naturalWidth,height:n.naturalHeight})},n.src=e})};BoxySVG.utils.image={extractImageSize:extractImageSize}}}{{var compareArrays=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2];if(e.length!==t.length)return!1;if(n)for(var a in e){var r=e[a];if(r!==t[a])return!1}else{for(var o=0;o<e.length;o+=1)if(!t.includes(e[o]))return!1;for(var o=0;o<t.length;o+=1)if(!e.includes(t[o]))return!1}return!0},removeDuplicates=function(e){return[].concat(_toConsumableArray(new Set(e)))},includesOnly=function(e,t){if(0===e.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t)return!1;return!0},valuesEqual=function(e){for(var t=1;t<e.length;t+=1)if(e[t]!==e[0])return!1;return!0},dataURLToBinaryArray=function(e){var t=e.substring(e.indexOf(",")+1);return t=atob(t),t=t.split(""),t=t.map(function(e){return e.charCodeAt(0)}),new Uint8Array(t)};BoxySVG.utils.array={compareArrays:compareArrays,removeDuplicates:removeDuplicates,includesOnly:includesOnly,valuesEqual:valuesEqual,dataURLToBinaryArray:dataURLToBinaryArray}}}{{var toJSON=function(e){var t=null;try{t=JSON.stringify(e)}catch(e){return console.error("Failed to generate JSON string",e),t}return t},fromJSON=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0,n=null;try{n=JSON.parse(e)}catch(n){return void(t&&console.error("Failed to parse JSON string",e,n))}return n};BoxySVG.utils.json={toJSON:toJSON,fromJSON:fromJSON}}}{{var _keys=Object.keys,stringify=JSON.stringify,cachedRegistry=null,cachedThumbnails=null,getGoogleFontsThumbnails=function(){return new Promise(async function(e){if(cachedThumbnails)e(cachedThumbnails);else{var t=await fetch("metadata/google-fonts-thumbnails.json"),n=await t.json();cachedThumbnails=n,e(n)}})},getGoogleFontsRegistry=async function(){return new Promise(async function(e){if(cachedRegistry)e(cachedRegistry);else{var t=await fetch("metadata/google-fonts-registry.json"),n=await t.json();cachedRegistry=n,e(n)}})},getGoogleFontsFamilies=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"alphabetical";return new Promise(async function(t){var n=await getGoogleFontsRegistry();if("alphabetical"===e){var a=n.items.map(function(e){return e.family});t(a)}else("popularity"===e||"trending"===e||"date"===e)&&t(n.sortedFamilies[e])})},generateGoogleFontsThumbnailsFile=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return new Promise(async function(t){var n={},a=await getGoogleFontsRegistry(),r=document.createElement("canvas");r.width=240,r.height=25;var o=!0,i=!1,s;try{for(var l=a.items[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0){u=d.value,console.log(u.family);var c=u.urls[400]||u.urls[_keys(u.urls)[0]];c=c.replace("http://","https://");var p=new FontFace("BX "+u.family,"url("+c+")",{});await p.load(),document.fonts.add(p);var h=r.getContext("2d");h.clearRect(0,0,240,25),h.font="20px \"BX "+u.family+"\"",h.fillStyle="white",h.fillText(u.family,0,20),document.fonts.delete(p),n[u.family]=r.toDataURL("image/png",0.5)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var m=e?stringify(n):stringify(n,null,2);t(m)})},generateGoogleFontsRegistryFile=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return new Promise(async function(t){var n="https://www.googleapis.com/webfonts/v1/webfonts",a="AIzaSyBZd8UahlnRn53EWC7snRmOAuuktqBaP6k",r=await fetch(n+"?key="+a+"&sort=alpha");r=await r.json();var o={items:[],sortedFamilies:{}},i=!0,s=!1,l;try{for(var d=r.items[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p=[],h={},m=!0,b=!1,x=void 0;try{for(var g=_keys(c.files)[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=c.files[y];y=normalizeGoogleFontFace(y),p.push(y),h[y]=f}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}var _={family:c.family,category:c.category,subsets:c.subsets,faces:p,urls:h};o.items.push(_)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}for(var w=["popularity","trending","date"],k=0;k<w.length;k++){var A=w[k],C=await fetch(n+"?key="+a+"&sort="+A);C=await C.json(),o.sortedFamilies[A]=C.items.map(function(e){return e.family})}var S=e?stringify(o):stringify(o,null,2);t(S)})},normalizeGoogleFontFace=function(e){return"regular"===e?"400":"bold"===e?"700":"italic"===e?"400italic":"bolditalic"===e?"700italic":"r"===e?"400":"b"===e?"700":"i"===e?"400italic":e};BoxySVG.utils.fontGoogle={getGoogleFontsThumbnails:getGoogleFontsThumbnails,getGoogleFontsRegistry:getGoogleFontsRegistry,getGoogleFontsFamilies:getGoogleFontsFamilies}}}{{var compressArtwork=function(e){for(var t=[],n=0,a=e.length;n<a;n+=1)t.push(e[n].charCodeAt(0));var r=new Uint8Array(t);return pako.gzip(r)},uncompressArtwork=function(e){try{for(var t=pako.inflate(e),n="",a=0,r=t.length,o;a<r;a+=1)o=String.fromCharCode(t[a]),n+=o;return n}catch(e){return null}};BoxySVG.utils.artworkCompression={compressArtwork:compressArtwork,uncompressArtwork:uncompressArtwork}}}{{var _createElement6=BoxySVG.utils.element.createElement,_normalizeWhitespace=BoxySVG.utils.node.normalizeWhitespace,_BoxySVG$utils$string=BoxySVG.utils.string,_collapseWhitespace=_BoxySVG$utils$string.collapseWhitespace,_replaceAll=_BoxySVG$utils$string.replaceAll,_namespaces3=BoxySVG.utils.variables.namespaces,exportArtwork=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"xml",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0;e=e.cloneNode(!0);for(var r=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),o;o=r.nextNode();)if("defs"===o.localName)0===o.children.length&&o.remove();else if("style"===o.localName)""===_collapseWhitespace(o.textContent)?o.remove():o.matches("[data-bx-fonts=\"google\"]")&&o.removeAttribute("data-bx-fonts");else if("bx-title"===o.localName){var i=_createElement6("svg:title");i.innerHTML=o.innerHTML;var s=!0,l=!1,d=void 0;try{for(var u=o.attributes[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p.name,m=p.value;i.setAttribute(h,m)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}o.replace(i)}normalizeNamespaces(e,t),_normalizeWhitespace(e,n);var b=serializeArtwork(e,t);return b},serializeArtwork=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"xml",n;if("xml"===t){var a=new XMLSerializer;n="<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"+a.serializeToString(e)}else if("html"===t){n="<!doctype html>\n"+e.outerHTML,n=_replaceAll(n," xmlns:xlink=\"http://www.w3.org/1999/xlink\"","")}return n=_replaceAll(n,"url(&quot;","url("),n=_replaceAll(n,"&quot;)",")"),n},normalizeNamespaces=function(e,t){if("xml"===t){for(var n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),a=!1,r=!1,o;o=n.nextNode();){if(o.localName.startsWith("bx-")){for(var i=document.createElementNS(_namespaces3.bx,"bx:"+o.localName.substring(3)),s=[].concat(_toConsumableArray(o.attributes)),l=0,d;l<s.length;l++)d=s[l],i.setAttribute(d.name,d.value);for(var u=[].concat(_toConsumableArray(o.childNodes)),c=0,p;c<u.length;c++)p=u[c],i.append(p);o.replace(i),r=!0;continue}for(var h=[].concat(_toConsumableArray(o.attributes)),m=0;m<h.length;m++){var b=h[m],x=b.name,g=b.value;if("href"===x||"_href"===x)o.removeAttribute(x),o.setAttribute("xlink:href",g),a=!0;else if(x.startsWith("data-bx-")){var v=x.substring(8);o.setAttributeNS(_namespaces3.bx,"bx:"+v,g),o.removeAttribute(x),r=!0}}}e.removeAttribute("xmlns"),e.setAttributeNS(_namespaces3.xmlns,"xmlns",_namespaces3.svg),a&&e.setAttributeNS(_namespaces3.xmlns,"xmlns:xlink",_namespaces3.xlink),r&&e.setAttributeNS(_namespaces3.xmlns,"xmlns:bx",_namespaces3.bx)}else if("html"===t)for(var y=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),f;f=y.nextNode();)for(var _=[].concat(_toConsumableArray(f.attributes)),w=0,k;w<_.length;w++)k=_[w],"href"===k.name&&(f.setAttribute("xlink:href",f.getAttribute("href")),f.removeAttribute("href"))};BoxySVG.utils.artworkExport={exportArtwork:exportArtwork,serializeArtwork:serializeArtwork}}}{{var _removeDuplicates=BoxySVG.utils.array.removeDuplicates,_compareElements=BoxySVG.utils.element.compareElements,_parseUrl2=BoxySVG.utils.parsing.parseUrl,_BoxySVG$utils$variab4=BoxySVG.utils.variables,_urlValueAcceptingPropertyNames=_BoxySVG$utils$variab4.urlValueAcceptingPropertyNames,_namespaces4=_BoxySVG$utils$variab4.namespaces,isArtworkString=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html");return null!==n.querySelector("svg")},prepareArtworkForInsertion=function(e,t){{var n=!0,a=!1,r;try{for(var o=e.querySelectorAll("use")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,""!==s.href.baseVal){var l=e.querySelector(s.href.baseVal),d=t.querySelector(s.href.baseVal);l&&d&&_compareElements(l,d)&&l.remove()}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}{var u=[].concat(_toConsumableArray(e.querySelectorAll("pattern:not([href])"))),c=[].concat(_toConsumableArray(t.querySelectorAll("pattern:not([href])"))),p=!0,h=!1,m;try{for(var b=function(){var e=g.value,t=c.find(function(t){return t.id===e.id});t&&_compareElements(e,t)&&e.remove()},x=u[Symbol.iterator](),g;!(p=(g=x.next()).done);p=!0)b()}catch(e){h=!0,m=e}finally{try{!p&&x.return&&x.return()}finally{if(h)throw m}}}{var v=[].concat(_toConsumableArray(e.querySelectorAll("style"))),y=[].concat(_toConsumableArray(t.querySelectorAll("style"))),f=!0,_=!1,w;try{for(var k=v[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=!0,E=!1,T=void 0;try{for(var P=y[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,C.textContent===M.textContent&&C.remove()}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}{var D=[].concat(_toConsumableArray(e.querySelectorAll("[id]"))).map(function(e){return e.id}),I=[].concat(_toConsumableArray(t.querySelectorAll("[id]"))).map(function(e){return e.id});e.id&&D.push(e.id),t.id&&I.push(t.id);var V=D.filter(function(e){return I.includes(e)});V=_removeDuplicates(V);var N=!0,R=!1,z;try{for(var G=V[Symbol.iterator](),B;!(N=(B=G.next()).done);N=!0){var O=B.value,j=e.id===O?e:e.querySelector("#"+O),q=void 0;q="linearGradient"===j.localName||"radialGradient"===j.localName?"gradient":"clipPath"===j.localName?"path":j.localName;for(var U=void 0,H=1;;){var F=q+"-"+H;if(null===e.querySelector("#"+F)&&null===t.querySelector("#"+F)&&e.id!==F&&t.id!==F){U=F;break}else H+=1}for(var $=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),Y=null;Y=$.nextNode();){Y.id===O&&(Y.id=U),Y.href&&Y.href.baseVal==="#"+O&&Y.setAttribute("href","#"+U);var X=!0,W=!1,K=void 0;try{for(var Z=_urlValueAcceptingPropertyNames[Symbol.iterator](),J;!(X=(J=Z.next()).done);X=!0){var Q=J.value,ee=Y.style.getPropertyValue(Q);if(ee&&ee.startsWith("url(")){var te=ee.substring(6,ee.length-2);te===O&&(Y.style.removeProperty(Q),Y.style.setProperty(Q,"url(#"+U+")"))}}}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}var ne=!0,ae=!1,re=void 0;try{for(var oe=_urlValueAcceptingPropertyNames[Symbol.iterator](),ie;!(ne=(ie=oe.next()).done);ne=!0){var se=ie.value,le=Y.getAttribute(se);if(le&&le.includes("url(")){var de=_parseUrl2(le);de&&de==="#"+O&&Y.setAttribute(se,"url(#"+U+")")}}}catch(e){ae=!0,re=e}finally{try{!ne&&oe.return&&oe.return()}finally{if(ae)throw re}}}}}catch(e){R=!0,z=e}finally{try{!N&&G.return&&G.return()}finally{if(R)throw z}}}},createArtworkFromBitmapDataURL=function(e){return new Promise(function(t){var n=new Image;n.src=e,n.onload=function(){var a=n.naturalWidth,r=n.naturalHeight,o="<?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\""+_namespaces4.svg+"\" xmlns:xlink=\""+_namespaces4.xlink+"\" viewBox=\"0 0 "+a+" "+r+"\">"+("  <image width=\""+a+"\" height=\""+r+"\" xlink:href=\""+e+"\"></image></svg>");t(o)}})};BoxySVG.utils.artworkGeneral={isArtworkString:isArtworkString,prepareArtworkForInsertion:prepareArtworkForInsertion,createArtworkFromBitmapDataURL:createArtworkFromBitmapDataURL}}}{{var _BoxySVG$utils$elemen3=BoxySVG.utils.element,_createElement7=_BoxySVG$utils$elemen3.createElement,_getOutermostSVGElement3=_BoxySVG$utils$elemen3.getOutermostSVGElement,_BoxySVG$utils$gradie=BoxySVG.utils.gradient,_hasOwnStops=_BoxySVG$utils$gradie.hasOwnStops,_getGradientAttribute=_BoxySVG$utils$gradie.getGradientAttribute,_getGradientComputedStops=_BoxySVG$utils$gradie.getGradientComputedStops,_normalize3=BoxySVG.utils.math.normalize,_BoxySVG$utils$patter=BoxySVG.utils.pattern,_getFurthestAncestorPattern=_BoxySVG$utils$patter.getFurthestAncestorPattern,_getInheritedPatternAttributes=_BoxySVG$utils$patter.getInheritedPatternAttributes,_validateShapeData=BoxySVG.utils.pathShapes.validateShapeData,_reflectStyleElementCSSOM=BoxySVG.utils.style.reflectStyleElementCSSOM,_replaceAll2=BoxySVG.utils.string.replaceAll,_getComputedTransform2=BoxySVG.utils.transformGeneral.getComputedTransform,_contentSchemas=BoxySVG.utils.variables.contentSchemas,_SVGUnitTypes3=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2=_SVGUnitTypes3.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_SVGLength2=SVGLength,_SVG_LENGTHTYPE_PERCENTAGE=_SVGLength2.SVG_LENGTHTYPE_PERCENTAGE,entries=Object.entries,defaultArtwork="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 500 500\"></svg>",importArtwork=function(e){for(var t=deserializeArtwork(e)||deserializeArtwork(defaultArtwork),n=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,a=document.createNodeIterator(t,n),r;r=a.nextNode();)if(r.nodeType!==Node.ELEMENT_NODE){var o=_contentSchemas[r.parentNode.nodeName]||[];!1===o.includes(r.nodeName)&&r.remove()}else if(!r.localName.includes(":")){if("title"===r.localName){var i=_createElement7("svg:bx-title");i.innerHTML=r.innerHTML;var s=!0,l=!1,d=void 0;try{for(var u=r.attributes[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p.name,m=p.value;i.setAttribute(h,m)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}r.replace(i);continue}else if(r!==t){var b=_contentSchemas[r.parentNode.localName]||[];if(!1===b.includes(r.localName)){r.remove();continue}}for(var x=[].concat(_toConsumableArray(r.attributes)),g=0;g<x.length;g++){var v=x[g],y=v.name,m=v.value;if(y.includes(":"))if(r.removeAttribute(y),y.startsWith("bx:"))y="data-bx-"+y.split(":")[1],r.setAttribute(y,m);else if("xlink:href"===y&&!1===r.hasAttribute("href"))y="href",r.setAttribute(y,m);else continue;y.startsWith("data-")?"data-bx-shape"===y&&!1===_validateShapeData(r)&&r.removeAttribute(y):"href"===y&&"a"===r.localName&&(r.removeAttribute(y),r.setAttribute("_href",m))}}else if(r.localName.startsWith("bx:")){for(var f=r.localName.split(":")[1],_=document.createElement("bx-"+f),w=[].concat(_toConsumableArray(r.attributes)),k=0,A;k<w.length;k++)A=w[k],_.setAttribute(A.name,A.value);for(var C=[].concat(_toConsumableArray(r.childNodes)),S=0,E;S<C.length;S++)E=C[S],_.append(E);r.replace(_)}else r.remove();var T=!0,P=!1,L;try{for(var M=t.querySelectorAll("text")[Symbol.iterator](),D,I;!(T=(D=M.next()).done);T=!0)I=D.value,normalizeText(I)}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}var V=!0,N=!1,R;try{for(var z=t.querySelectorAll("linearGradient")[Symbol.iterator](),G,B;!(V=(G=z.next()).done);V=!0)B=G.value,normalizeLinearGradient(B)}catch(e){N=!0,R=e}finally{try{!V&&z.return&&z.return()}finally{if(N)throw R}}var O=!0,j=!1,q;try{for(var U=t.querySelectorAll("radialGradient")[Symbol.iterator](),H,F;!(O=(H=U.next()).done);O=!0)F=H.value,normalizeRadialGradient(F)}catch(e){j=!0,q=e}finally{try{!O&&U.return&&U.return()}finally{if(j)throw q}}var $=!0,Y=!1,X;try{for(var W=t.querySelectorAll("pattern")[Symbol.iterator](),K,Z;!($=(K=W.next()).done);$=!0)Z=K.value,normalizePattern(Z)}catch(e){Y=!0,X=e}finally{try{!$&&W.return&&W.return()}finally{if(Y)throw X}}var J=!0,Q=!1,ee;try{for(var te=t.querySelectorAll("symbol")[Symbol.iterator](),ne,ae;!(J=(ne=te.next()).done);J=!0)ae=ne.value,normalizeSymbol(ae)}catch(e){Q=!0,ee=e}finally{try{!J&&te.return&&te.return()}finally{if(Q)throw ee}}var re=!0,oe=!1,ie;try{for(var se=t.querySelectorAll("use")[Symbol.iterator](),le,de;!(re=(le=se.next()).done);re=!0)de=le.value,normalizeUse(de)}catch(e){oe=!0,ie=e}finally{try{!re&&se.return&&se.return()}finally{if(oe)throw ie}}return normalizeDefs(t),normalizeFonts(t),document.importNode(t,!0),t},normalizeText=function(e){var t=e.querySelectorAll("textPath"),n=e.querySelectorAll("tspan"),a=0<t.length?t[0]:null;{var r=e.hasAttribute("width")||e.hasAttribute("height")?"pre-wrap":"pre";e.style.setProperty("white-space",r)}for(var o=[e].concat(_toConsumableArray(n)),i=0,s;i<o.length;i++)s=o[i],1<s.x.baseVal.numberOfItems&&s.setAttribute("x",s.x.baseVal[0].valueAsString),1<s.y.baseVal.numberOfItems&&s.setAttribute("y",s.y.baseVal[0].valueAsString),s.removeAttribute("dx"),s.removeAttribute("dy"),s.removeAttribute("rotate");if(1<t.length){var l=!0,d=!1,u;try{for(var c=t[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,h!==a&&h.remove()}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}if(a){a.parentElement!==e&&e.append(a);for(var m=[].concat(_toConsumableArray(e.childNodes)),b=0,x;b<m.length;b++)x=m[b],["a","tspan","#text"].includes(x.localName)&&x.remove();if(a.hasAttribute("style")){var g=!0,v=!1,y;try{for(var f=a.style[Symbol.iterator](),_;!(g=(_=f.next()).done);g=!0){var w=_.value,k=e.style.getPropertyValue(w),A=a.style.getPropertyValue(w);k!==A&&e.setProperty(w,A)}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}a.removeAttribute("style")}}},normalizeLinearGradient=function(e){if(""!==e.href.baseVal){if(!1===_hasOwnStops(e)){var t=_getGradientComputedStops(e),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e.append(s.cloneNode())}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}var l=["x1","x2","y1","y2","gradientUnits","gradientTransform","spreadMethod","style"],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)if(m=h.value,!1===e.hasAttribute(m)){var b=_getGradientAttribute(e,m);null!==b&&e.setAttribute(m,b)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.removeAttribute("href")}var x=0,g=[].concat(_toConsumableArray(e.children)).filter(function(e){return"stop"===e.localName}),v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.offset.baseVal;A<x&&(A=x),A=_normalize3(A,0,1,4),x=A,k.setAttribute("offset",A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.x1.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x1",e.x1.baseVal.valueInSpecifiedUnits/100),e.y1.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y1",e.y1.baseVal.valueInSpecifiedUnits/100),e.x2.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x2",e.x2.baseVal.valueInSpecifiedUnits/100),e.y2.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y2",e.y2.baseVal.valueInSpecifiedUnits/100))},normalizeRadialGradient=function(e){if(""!==e.href.baseVal){if(!1===_hasOwnStops(e)){var t=_getGradientComputedStops(e),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e.append(s.cloneNode())}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}var l=["r","cx","cx","fx","fy","fr","gradientUnits","gradientTransform","spreadMethod","style"],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)if(m=h.value,!1===e.hasAttribute(m)){var b=_getGradientAttribute(e,m);null!==b&&e.setAttribute(m,b)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.removeAttribute("href")}var x=0,g=[].concat(_toConsumableArray(e.children)).filter(function(e){return"stop"===e.localName}),v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.offset.baseVal;A<x&&(A=x),A=_normalize3(A,0,1,4),x=A,k.setAttribute("offset",A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.removeAttribute("fx"),e.removeAttribute("fy"),e.removeAttribute("fr"),e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.r.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("r",e.r.baseVal.valueInSpecifiedUnits/100),e.cx.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("cx",e.cx.baseVal.valueInSpecifiedUnits/100),e.cy.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("cy",e.cy.baseVal.valueInSpecifiedUnits/100))},normalizeSymbol=function(e){var t=_getOutermostSVGElement3(e);if(!1===e.hasAttribute("id")){for(var n=0;null!==t.querySelector("#symbol-"+n);)n+=1;e.setAttribute("id","symbol-"+n)}},normalizePattern=function(e){var t=_getOutermostSVGElement3(e);if(!1===e.hasAttribute("id")){for(var n=0;null!==t.querySelector("#pattern-"+n);)n+=1;e.setAttribute("id","pattern-"+n)}if(e.hasAttribute("href")){var a=e.getAttribute("href"),r=t.querySelector(a);r||e.removeAttribute("href")}if(e.hasAttribute("href")&&0<e.children.length){var o=_getInheritedPatternAttributes(e),i=!0,s=!1,l;try{for(var d=o[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p=c.name,h=c.value;e.setAttribute(p,h)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}e.removeAttribute("href")}if(e.hasAttribute("href")){var m=e.getAttribute("href"),b=t.querySelector(m);if(b.hasAttribute("href")){var x=_getFurthestAncestorPattern(e),g=_getInheritedPatternAttributes(e),v=!0,y=!1,f;try{for(var _=entries(g)[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,p=k.name,h=k.value;!1===x.hasAttribute(p)&&e.setAttribute(p,h)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.setAttribute("href","#"+x.id)}}if(e.hasAttribute("href")){var A=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits"],C=!0,S=!1,E;try{for(var T=A[Symbol.iterator](),P,p;!(C=(P=T.next()).done);C=!0)p=P.value,e.hasAttribute(p)&&e.removeAttribute(p)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}!1===e.hasAttribute("href")&&e.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.hasAttribute("x")&&e.x.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x",e.x.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("y")&&e.y.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y",e.y.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("width")&&e.width.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("width",e.width.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("height")&&e.height.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("height",e.height.baseVal.valueInSpecifiedUnits/100))},normalizeUse=function(e){var t=_getOutermostSVGElement3(e),n=t.querySelector(e.href.baseVal);if(n&&"symbol"!==n.localName){var a=_getComputedTransform2(n);a.multiplySelf(_getComputedTransform2(e)),a.translateSelf(e.x.baseVal.value,e.y.baseVal.value);var r=n.cloneNode(!0);r.setAttribute("transform",a);var o=!0,i=!1,s;try{for(var l=e.style[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=r.style.getPropertyValue(u),p=e.style.getPropertyValue(u);""===c&&r.style.setProperty(u,p)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var h=!0,m=!1,b;try{for(var x=r.querySelectorAll("*[id]")[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,v.removeAttribute("id")}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}r.id=e.id,e.replace(r)}else{var y=_getComputedTransform2(e);y.translateSelf(e.x.baseVal.value,e.y.baseVal.value),e.setAttribute("transform",y.toString()),e.removeAttribute("x"),e.removeAttribute("y")}},normalizeDefs=function(e){var t=e.querySelector(":scope > defs");t||(t=_createElement7("svg:defs"),e.prepend(t))},normalizeFonts=function(e){if(!hasNormalizedFonts(e)){var t=e.querySelectorAll("style"),n={},a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){for(var l=s.value,d=[],u=0,c=l.sheet.rules.length,p;u<c;u+=1)if(p=l.sheet.rules[u],p.type===CSSRule.FONT_FACE_RULE){var h=_replaceAll2(p.style.fontFamily,"\"","");void 0===n[h]?n[h]=[p]:n[h].push(p),d.push(u)}if(0<d.length){var m=!0,b=!1,x=void 0;try{for(var g=d.reverse()[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,l.sheet.deleteRule(y)}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}_reflectStyleElementCSSOM(l),0===l.sheet.rules.length&&l.remove()}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var f=!0,_=!1,w;try{for(var k=entries(n)[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=_slicedToArray(A.value,2),S=C[0],E=C[1],T=E.map(function(e){return e.cssText}).join(" "),P=_createElement7("svg:style");P.setAttribute("data-bx-fonts",S),P.textContent=T;var L=e.querySelector("defs");null===L&&(L=_createElement7("svg:defs"),e.prepend(L)),L.insertBefore(P,L.querySelector("style"))}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}},hasNormalizedFonts=function(e){var t=e.querySelectorAll("style"),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=null,d=!0,u=!1,c=void 0;try{for(var p=s.sheet.rules[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)if(m=h.value,m.type===CSSRule.FONT_FACE_RULE){var b=_replaceAll2(m.style.fontFamily,"\"","");if(null==l)l=b;else if(l!==b)return!1}else if(null!=l)return!1}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(null!==l&&s.getAttribute("data-bx-fonts")!==l)return!1}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!0},deserializeArtwork=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.querySelector("svg")||null;return a};BoxySVG.utils.artworkImport={importArtwork:importArtwork}}}{{var _degToRad3=BoxySVG.utils.geometry.degToRad,_abs2=Math.abs,_sin2=Math.sin,asin=Math.asin,_cos2=Math.cos,_acos=Math.acos,_tan=Math.tan,_pow5=Math.pow,_sqrt4=Math.sqrt,_PI3=Math.PI,splitCurve=function(e,n,a,r,o){var t=(n.x-e.x)*o+e.x,i=(n.y-e.y)*o+e.y,s=(a.x-n.x)*o+n.x,l=(a.y-n.y)*o+n.y,d=(r.x-a.x)*o+a.x,u=(r.y-a.y)*o+a.y,c=(s-t)*o+t,p=(l-i)*o+i,h=(d-s)*o+s,m=(u-l)*o+l,b=(h-c)*o+c,x=(m-p)*o+p,g=[new SVGPoint(e.x,e.y),new SVGPoint(t,i),new SVGPoint(c,p),new SVGPoint(b,x)],v=[new SVGPoint(b,x),new SVGPoint(h,m),new SVGPoint(d,u),new SVGPoint(r.x,r.y)];return[g,v]},getCubicCurveTParam=function(e,n,a,r,o){var i=function(e){return 1e-11>_abs2(e)?0:0<e?1:-1},s=function(e,t,n,a){return _sqrt4((n-e)*(n-e)+(a-t)*(a-t))},l=function(e,r,o,i,s){var l=-e+3*r-3*o+i;0===l&&(l=1e-10);var a=[3,-1];d(a,(3*e-6*r+3*o)/l,(-3*e+3*r)/l,(-s+e)/l);var t=[],u=!0,c=!1,p;try{for(var h=a[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,0<=b&&1>=b&&t.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return t},d=function(e,n,a,o){var s=(_pow5(n,2)-3*a)/9,l=(2*_pow5(n,3)-9*n*a+27*o)/54;if(_pow5(l,2)<_pow5(s,3)){var r=_acos(l/_sqrt4(_pow5(s,3)))/3;return e.splice(0,0,-2*_sqrt4(s)*_cos2(r)-n/3),e.splice(1,0,-2*_sqrt4(s)*_cos2(r+4*_PI3/3)-n/3),e.splice(2,0,-2*_sqrt4(s)*_cos2(r-4*_PI3/3)-n/3),3}var t=-i(l)*_pow5(_abs2(l)+_sqrt4(_pow5(l,2)-_pow5(s,3)),1/3),d=0==i(t)?0:s/t;return e.splice(0,0,t+d-n/3),e.splice(1,0,-0.5*(t+d)-n/3),e.splice(2,0,0.5*_sqrt4(3)*_abs2(t-d)),1===e[2]+1?2:1},u=[].concat(_toConsumableArray(l(n.x,a.x,r.x,o.x,e.x)),_toConsumableArray(l(n.y,a.y,r.y,o.y,e.y)));if(0===u.length)return-1;var c=-1,p=3,h=!0,m=!1,b;try{for(var x=u[Symbol.iterator](),g;!(h=(g=x.next()).done);h=!0){var v=g.value,t=_pow5(1-v,3)*n.x+3*_pow5(1-v,2)*v*a.x+3*(1-v)*_pow5(v,2)*r.x+_pow5(v,3)*o.x,y=_pow5(1-v,3)*n.y+3*_pow5(1-v,2)*v*a.y+3*(1-v)*_pow5(v,2)*r.y+_pow5(v,3)*o.y,f=s(e.x,e.y,t,y);f<p&&(c=v,p=f)}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}return c},_arcToCubicCurves=function e(n,a,r,o,i,s,l,d,u,c){var p=[],m=_degToRad3(l),b=function(e,t,n){var a=e*_cos2(n)-t*_sin2(n),r=e*_sin2(n)+t*_cos2(n);return{x:a,y:r}},g,v,f,_;if(c)g=c[0],v=c[1],f=c[2],_=c[3];else{var w=b(n,a,-m);n=w.x,a=w.y;var A=b(r,o,-m);r=A.x,o=A.y;var C=(n-r)/2,x=(a-o)/2,y=C*C/(i*i)+x*x/(s*s);1<y&&(y=_sqrt4(y),i=y*i,s=y*s);var h=d===u?-1:1;var S=i*i,E=s*s,T=h*_sqrt4(_abs2((S*E-S*x*x-E*C*C)/(S*x*x+E*C*C)));f=T*i*x/s+(n+r)/2,_=T*-s*C/i+(a+o)/2,g=asin(((a-_)/s).toFixed(9)),v=asin(((o-_)/s).toFixed(9)),n<f&&(g=_PI3-g),r<f&&(v=_PI3-v),0>g&&(g=2*_PI3+g),0>v&&(v=2*_PI3+v),u&&g>v&&(g-=2*_PI3),!u&&v>g&&(v-=2*_PI3)}var k=v-g;if(_abs2(k)>120*_PI3/180){var P=v,L=r,M=o;v=u&&v>g?g+1*(120*_PI3/180):g+-1*(120*_PI3/180),r=f+i*_cos2(v),o=_+s*_sin2(v),p=e(r,o,L,M,i,s,l,0,u,[v,P,f,_])}k=v-g;var D=_cos2(g),I=_sin2(g),V=_cos2(v),N=_sin2(v),R=_tan(k/4),t=4/3*i*R,z=4/3*s*R,G=[n,a],B=[n+t*I,a-z*D],O=[r+t*N,o-z*V],j=[r,o];if(B[0]=2*G[0]-B[0],B[1]=2*G[1]-B[1],c)return[B,O,j].concat(p);p=[B,O,j].concat(p).join().split(",");var q=[],U=[];return p.forEach(function(e,t){t%2?U.push(b(p[t-1],p[t],m).y):U.push(b(p[t],p[t+1],m).x),6===U.length&&(q.push(U),U=[])}),q},getRamerDouglasPeuckerPoints=function e(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,a=0,r=0;if(2<t.length-1)for(var o=2,i;o<t.length;o+=1)i=getPerpendicularDistance(t[o],t[1],t[t.length-1]),i>r&&(a=o,r=i);var s;if(r>n){var l=e(t.slice(1,a),n),d=e(t.slice(a),n);s=l.concat(d)}else s=t;return s};BoxySVG.utils.curvesGeneral={splitCurve:splitCurve,getCubicCurveTParam:getCubicCurveTParam,arcToCubicCurves:_arcToCubicCurves,getRamerDouglasPeuckerPoints:getRamerDouglasPeuckerPoints}}}{{var _getDistanceBetweenPoints2=BoxySVG.utils.geometry.getDistanceBetweenPoints,_BoxySVG$utils$vector2=BoxySVG.utils.vector,_subtractVectors=_BoxySVG$utils$vector2.subtractVectors,_sumVectors2=_BoxySVG$utils$vector2.sumVectors,_vectorsDotProduct2=_BoxySVG$utils$vector2.vectorsDotProduct,_abs3=Math.abs,_floor2=Math.floor,_max3=Math.max,getSchneiderCurves=function(e,t){var n=BoxySVG.classes.Vector,a=_subtractVectors(new n(e[1]),new n(e[0])),r=_subtractVectors(new n(e[e.length-3]),new n(e[e.length-2]));a=a.normalize(),r=r.normalize();var o=fitCubic(e,0,e.length-1,a,r,t);return o},fitCubic=function e(t,n,a,r,o,s){var l=BoxySVG.classes.Vector;if(1==a-n){var d=t[n],c=t[a],p=_getDistanceBetweenPoints2(d,c)/3,h=new l(d),m=new l(c),b=_sumVectors2(h,r.scale(p)),x=_sumVectors2(m,o.scale(p)),g=[d,new SVGPoint(b.x,b.y),new SVGPoint(x.x,x.y),c];return[g]}for(var v=chordLengthParameterize(t,n,a),u=_max3(s,s*s),y=void 0,f=0;4>=f;f+=1){var i=generateBezier(t,n,a,v,r,o),_=computeMaxError(t,n,a,i,v),w=_slicedToArray(_,2),k=w[0],A=w[1];if(k<s)return[i];if(y=A,k>=u)break;reparameterize(t,n,a,v,i),u=k}var C=_subtractVectors(new l(t[y-1]),new l(t[y])),S=_subtractVectors(new l(t[y]),new l(t[y+1])),E=_sumVectors2(C,S).multiply(0.5).normalize(),T=e(t,n,y,r,E,s),P=e(t,y,a,E.multiply(-1),o,s),L=T.concat(P);return L},generateBezier=function(e,n,a,r,o,s){for(var l=BoxySVG.classes.Vector,d=e[n],c=e[a],p=new l(d),h=new l(c),m=[[0,0],[0,0]],x=[0,0],g=0;g<a-n+1;g+=1){var i=r[g],u=1-i,t=3*i*u,b=t*u,v=t*i,y=o.scale(b),f=s.scale(v);m[0][0]+=_vectorsDotProduct2(y,y),m[0][1]+=_vectorsDotProduct2(y,f),m[1][0]=m[0][1],m[1][1]+=_vectorsDotProduct2(f,f);var _=_subtractVectors(new l(e[n+g]),p.multiply(u*u*u+b));_=_subtractVectors(_,h.multiply(v+i*i*i)),x[0]+=_vectorsDotProduct2(y,_),x[1]+=_vectorsDotProduct2(f,_)}var w=m[0][0]*m[1][1]-m[1][0]*m[0][1],k=1e-6,A,C;if(_abs3(w)>k){var S=m[0][0]*x[1]-m[1][0]*x[0],E=x[0]*m[1][1]-x[1]*m[0][1];A=E/w,C=S/w}else{var T=m[0][0]+m[0][1],P=m[1][0]+m[1][1];A=_abs3(T)>k?C=x[0]/T:_abs3(P)>k?C=x[1]/P:C=0}var L=_getDistanceBetweenPoints2(c,d);k*=L,(A<k||C<k)&&(A=C=L/3);var M=_sumVectors2(p,o.scale(A)),D=_sumVectors2(h,s.scale(C)),I=[d,new SVGPoint(M.x,M.y),new SVGPoint(D.x,D.y),c];return I},chordLengthParameterize=function(e,t,n){for(var a=[0],r=t+1;r<=n;r+=1)a[r-t]=a[r-t-1]+_getDistanceBetweenPoints2(e[r],e[r-1]);for(var o=1;o<=n-t;o+=1)a[o]/=a[n-t];return a},reparameterize=function(e,t,n,a,r){for(var o=[],s=t;s<=n;s+=1)o[s-t]=findNewtonRaphsonRoot(r,e[s],a[s-t]);return o},findNewtonRaphsonRoot=function(e,t,n){for(var a=BoxySVG.classes.Vector,r=[],o=[],s=0,i;2>=s;s+=1)i=_subtractVectors(new a(e[s+1]),new a(e[s])),r[s]=i.multiply(3);for(var l=0,d;1>=l;l++)d=_subtractVectors(r[l+1],r[l]),o[l]=d.multiply(2);var u=evalBezier(3,e,n),c=evalBezier(2,r,n),p=evalBezier(1,o,n),h=_subtractVectors(u,new a(t)),m=_vectorsDotProduct2(c,c)+_vectorsDotProduct2(h,p);return 1e-6>_abs3(m)?n:n-_vectorsDotProduct2(h,c)/m},evalBezier=function(e,n,a){for(var t=BoxySVG.classes.Vector,r=n.map(function(e){return new t(e)}),o=1;o<=e;o+=1)for(var i=0;i<=e-o;i+=1)r[i]=_sumVectors2(r[i].multiply(1-a),r[i+1].multiply(a));return r[0]},computeMaxError=function(e,t,n,a,r){for(var o=BoxySVG.classes.Vector,s=_floor2((n-t+1)/2),l=0,d=t+1;d<n;d++){var i=_subtractVectors(evalBezier(3,a,r[d-t]),new o(e[d])),u=i.length;u>=l&&(l=u,s=d)}return[l,s]};BoxySVG.utils.curvesSchneider={getSchneiderCurves:getSchneiderCurves}}}{{var _tan2=Math.tan,_PI4=Math.PI,getOpenTypeFont=function(e){return new Promise(function(t){opentype.load(e,function(e,n){return e?t(null):t(n)})})},getOpenTypeGlyphPath=function(e,t,n,a,r){var o=e.path;if(r&&(o=getSkewedOpenTypePath(o,14)),a){var i=t.ascender/20;a.includes("underline")&&(o=getOpenTypePathWithLine(o,e.advanceWidth,i,t.descender/3)),a.includes("overline")&&(o=getOpenTypePathWithLine(o,e.advanceWidth,i,t.ascender-i)),a.includes("line-through")&&(o=getOpenTypePathWithLine(o,e.advanceWidth,i,(t.ascender+t.descender)/2))}return o=getScaledOpenTypePath(o,1/t.unitsPerEm*n),o},cloneOpenTypePathCommand=function(e){var t;if("M"===e.type||"L"===e.type){var n=e.type,a=e.x,r=e.y;t={type:n,x:a,y:r}}else if("Q"===e.type){var o=e.type,i=e.x1,s=e.y1,l=e.x,d=e.y;t={type:o,x1:i,y1:s,x:l,y:d}}else if("C"===e.type){var u=e.type,c=e.x1,p=e.y1,h=e.x2,m=e.y2,b=e.x,g=e.y;t={type:u,x1:c,y1:p,x2:h,y2:m,x:b,y:g}}else"Z"===e.type&&(t={type:"Z"});return t},getSkewedOpenTypePath=function(e,t){var n=new SVGMatrix([1,0,_tan2(_PI4*t/180),1,0,0]),a=[],r=!0,o=!1,i;try{for(var s=e.commands[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"M"===d.type){var u=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"M",x:u.x,y:u.y})}else if("L"===d.type){var c=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"L",x:c.x,y:c.y})}else if("Q"===d.type){var p=new SVGPoint(d.x1,d.y1).matrixTransform(n),h=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"Q",x1:p.x,y1:p.y,x:h.x,y:h.y})}else if("C"===d.type){var m=new SVGPoint(d.x1,d.y1).matrixTransform(n),b=new SVGPoint(d.x2,d.y2).matrixTransform(n),x=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"C",x1:controlPoint1.x,y1:controlPoint1.y,x2:controlPoint2.x,y2:controlPoint2.y,x:x.x,y:x.y})}else"Z"===d.type&&a.push({type:"Z"})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var g=new opentype.Path;return g.commands=a,g.fill=e.fill,g.stroke=e.stroke,g.strokeWidth=e.strokeWidth,g},getOpenTypePathWithLine=function(e,t,n,a){var r=[],o=!0,i=!1,s;try{for(var l=e.commands[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,r.push(cloneOpenTypePathCommand(u))}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}r.push({type:"M",x:0,y:a}),r.push({type:"L",x:t,y:a}),r.push({type:"L",x:t,y:a-n}),r.push({type:"L",x:0,y:a-n}),r.push({type:"Z"});var c=new opentype.Path;return c.commands=r,c.fill=e.fill,c.stroke=e.stroke,c.strokeWidth=e.strokeWidth,c},getScaledOpenTypePath=function(e,t){for(var n=new opentype.Path,a=0,r;a<e.commands.length;a+=1)r=e.commands[a],"M"===r.type?n.moveTo(r.x*t,-r.y*t):"L"===r.type?n.lineTo(r.x*t,-r.y*t):"Q"===r.type?n.quadraticCurveTo(r.x1*t,-r.y1*t,r.x*t,-r.y*t):"C"===r.type?n.curveTo(r.x1*t,-r.y1*t,r.x2*t,-r.y2*t,r.x*t,-r.y*t):"Z"===r.type&&n.closePath();return n};BoxySVG.utils.fontOpentype={getOpenTypeFont:getOpenTypeFont,getOpenTypeGlyphPath:getOpenTypeGlyphPath}}}{{var _parseFontFaceSrc=BoxySVG.utils.parsing.parseFontFaceSrc,_getOpenTypeFont=BoxySVG.utils.fontOpentype.getOpenTypeFont,_fontWeightsByMatchingOrder=BoxySVG.utils.variables.fontWeightsByMatchingOrder,_capitalize2=BoxySVG.utils.string.capitalize,_abs4=Math.abs,normalizeFontWeight=function(e){return"normal"===e?"400":"bold"===e?"700":e},formatFontWeightForDisplay=function(e){var t=normalizeFontWeight(e);return"100"===t?"Thin":"200"===t?"Extra-Light":"300"===t?"Light":"400"===t?"Normal":"500"===t?"Medium":"600"===t?"Semi-Bold":"700"===t?"Bold":"800"===t?"Extra-Bold":"900"===t?"Ultra-Bold":"Normal"},matchFontWeight=function(e,t){var n=!0,a=!1,r;try{for(var o=_fontWeightsByMatchingOrder[e][Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,t.includes(s))return s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}},getFontDisplayName=function(e){var t=[],n=formatFontWeightForDisplay(normalizeFontWeight(e.weight));if(t.push(n),"normal"!==e.style){var a=_capitalize2(e.style);t.push(a)}if("normal"!==e.stretch){var r=_capitalize2(e.stretch);t.push(r)}return t.join(" ")},getFontBaseline=function(e){return new Promise(async function(t){var n=1;if(e.src){var a=_parseFontFaceSrc(e.src),r=await _getOpenTypeFont(a[0].url);r&&(n=1-_abs4(r.descender)/(_abs4(r.ascender)+_abs4(r.descender)))}t(n)})},matchFont=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"400",a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"normal",r=function(e,t){var n=e.filter(function(e){return e.family===t});return n}(e,t),o=function(e,t){var n=e.filter(function(e){return"normal"===t?"normal"===e.style:"italic"===t||"oblique"===t?"italic"===e.style||"oblique"===e.style:void 0});return 0===n.length&&(n=[].concat(_toConsumableArray(e))),n}(r,a),i=function(e,t){var n=!0,a=!1,r;try{for(var o=_fontWeightsByMatchingOrder[t][Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=!0,d=!1,u=void 0;try{for(var c=e[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,h.weight===s)return h}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e[0]?e[0]:null}(o,n);return i},fetchFontData=function(e){return new Promise(async function(t){var n=await fetch(e),a=await n.blob(),r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){var e=r.result;t(e)}})};BoxySVG.utils.fontGeneral={normalizeFontWeight:normalizeFontWeight,formatFontWeightForDisplay:formatFontWeightForDisplay,matchFontWeight:matchFontWeight,getFontDisplayName:getFontDisplayName,getFontBaseline:getFontBaseline,matchFont:matchFont,fetchFontData:fetchFontData}}}{{var _includesOnly=BoxySVG.utils.array.includesOnly,_isValidColorString=BoxySVG.utils.color.isValidColorString,_parseUrl3=BoxySVG.utils.parsing.parseUrl,_getOutermostSVGElement4=BoxySVG.utils.element.getOutermostSVGElement,_compareGradients=BoxySVG.utils.gradient.compareGradients,_comparePatterns=BoxySVG.utils.pattern.comparePatterns,_paintServerElementNames=BoxySVG.utils.variables.paintServerElementNames,getPaintType=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n="none";if("inherit"===e.style.getPropertyValue(t))n="inherit";else{var a=getComputedStyle(e).getPropertyValue(t);if(_isValidColorString(a))n="solid";else{var r=_parseUrl3(a);if(r){var o=_getOutermostSVGElement4(e).querySelector(r),i=o?o.localName:null;("linearGradient"===i||"radialGradient"===i||"pattern"===i)&&(n=i)}}}return n},getPaintServer=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=null,a=getComputedStyle(e).getPropertyValue(t),r=_parseUrl3(a);if(r){var o=_getOutermostSVGElement4(e).querySelector(r);o&&_paintServerElementNames.includes(o.localName)&&(n=o)}return n},isSamePaintType=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=null,a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=getPaintType(l,t);if(l!==e[0]&&n!==d)return!1;n=d}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return null!==n},isMixedPaint=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=[],a=[],r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=getComputedStyle(d).getPropertyValue(t),c=getPaintServer(d);n.push(u),a.push(c)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(1>=n.legth)return!1;if(_includesOnly(n,n[0]))return!1;var p=a.filter(function(e){return e&&"linearGradient"===e.localName}),h=a.filter(function(e){return e&&"radialGradient"===e.localName}),m=a.filter(function(e){return e&&"pattern"===e.localName});return p.length===e.length&&_compareGradients(p)?!1:h.length===e.length&&_compareGradients(h)?!1:m.length===e.length&&_comparePatterns.apply(void 0,_toConsumableArray(m))?!1:!0},isSamePaint=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=[],a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=getComputedStyle(l).getPropertyValue(t);n.push(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return!(0!==n.legth)||!!_includesOnly(n,n[0])},getDefFromURL=function(e,t){var n=_parseUrl3(t);if(n){var a=e.querySelector(n);if(a)return a}return null};BoxySVG.utils.paint={getPaintType:getPaintType,getPaintServer:getPaintServer,isSamePaintType:isSamePaintType,isMixedPaint:isMixedPaint,isSamePaint:isSamePaint,getDefFromURL:getDefFromURL}}}{{var _round9=BoxySVG.utils.math.round,_BoxySVG$utils$pathGe=BoxySVG.utils.pathGeneral,_serializePathData=_BoxySVG$utils$pathGe.serializePathData,_deserializePathData=_BoxySVG$utils$pathGe.deserializePathData,_normalizePathData2=_BoxySVG$utils$pathGe.normalizePathData;window.addEventListener("load",function(){paper.setup(document.createElement("canvas"))});var unite=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"unite",n)},subtract=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"subtract",n)},intersect=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"intersect",n)},exclude=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"exclude",n)},performBoolOp=function(e,t,n,a){var r=getPaperPath(_serializePathData(e)),o=getPaperPath(_serializePathData(t)),i=r[n](o),s=[];if(i){var l=i.exportSVG().getAttribute("d");s=_deserializePathData(l),s=_normalizePathData2(s);var d=!0,u=!1,c;try{for(var p=s[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,m.values=m.values.map(function(e){return _round9(e,a)})}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}return s},getPaperPath=function(e){var t=1<(e.match(/M/g)||[]).length,n;if(t){n=new paper.CompoundPath(e);var a=!0,r=!1,o;try{for(var i=n.children[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.closed||l.closePath()}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}else n=new paper.Path(e),n.closed||n.closePath();return n};BoxySVG.utils.pathBoolops={unite:unite,subtract:subtract,intersect:intersect,exclude:exclude}}}{{var _createElement8=BoxySVG.utils.element.createElement,_round10=BoxySVG.utils.math.round,rectToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,!1===["x","y","width","height","rx","ry"].includes(b.name)&&n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},circleToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,["cx","cy","r"].includes(b.name)||n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},ellipseToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,["cx","cy","rx","ry"].includes(b.name)||n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},lineToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,["x1","y1","x2","y2"].includes(b.name)||n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},polylineToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.setPathData(a);var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,"points"!==b.name&&n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},polygonToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.setPathData(e.getPathData());var u=!0,c=!1,p;try{for(var h=e.attributes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,"points"!==b.name&&n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n};BoxySVG.utils.pathConversion={rectToPath:rectToPath,circleToPath:circleToPath,ellipseToPath:ellipseToPath,lineToPath:lineToPath,polylineToPath:polylineToPath,polygonToPath:polygonToPath}}}{{var _radToDeg=BoxySVG.utils.geometry.radToDeg,_abs5=Math.abs,_sqrt5=Math.sqrt,_asin=Math.asin,_sin3=Math.sin,_cos3=Math.cos,_tan3=Math.tan,_atan2=Math.atan2,SMALL_NUMBER=1e-8,decomposeTransform=function(e){var t={},n=[[e.a,e.b,0,0],[e.c,e.d,0,0],[0,0,1,0],[e.e,e.f,0,1]];if(0==n[3][3])return null;for(var a=0;4>a;a++)for(var r=0;4>r;r++)n[a][r]/=n[3][3];for(var o=[],i=0;4>i;i++){o[i]=[];for(var s=0;4>s;s++)o[i][s]=n[i][s]}for(var l=0;3>l;l++)o[l][3]=0;if(o[3][3]=1,0==determinant4x4(o))return null;if(0!==n[0][3]||0!==n[1][3]||0!==n[2][3]){var d=[0,0,0,0];d[0]=n[0][3],d[1]=n[1][3],d[2]=n[2][3],d[3]=n[3][3];var u=inverse(o),c=transposeMatrix4(u),p=v4MulPointByMatrix(d,c);t.perspectiveX=p[0],t.perspectiveY=p[1],t.perspectiveZ=p[2],t.perspectiveW=p[3],n[0][3]=n[1][3]=n[2][3]=0,n[3][3]=1}else t.perspectiveX=0,t.perspectiveY=0,t.perspectiveZ=0,t.perspectiveW=1;t.translateX=n[3][0],n[3][0]=0,t.translateY=n[3][1],n[3][1]=0,t.translateZ=n[3][2],n[3][2]=0;for(var h=[[],[],[]],m=[0,0,0],b=0;3>b;b++)h[b][0]=n[b][0],h[b][1]=n[b][1],h[b][2]=n[b][2];if(t.scaleX=v3Length(h[0]),v3Scale(h[0],1),t.skewXY=v3Dot(h[0],h[1]),v3Combine(h[1],h[0],h[1],1,-t.skewXY),t.scaleY=v3Length(h[1]),v3Scale(h[1],1),t.skewXY/=t.scaleY,t.skewXZ=v3Dot(h[0],h[2]),v3Combine(h[2],h[0],h[2],1,-t.skewXZ),t.skewYZ=v3Dot(h[1],h[2]),v3Combine(h[2],h[1],h[2],1,-t.skewYZ),t.scaleZ=v3Length(h[2]),v3Scale(h[2],1),t.skewXZ/=t.scaleZ,t.skewYZ/=t.scaleZ,v3Cross(h[1],h[2],m),0>v3Dot(h[0],m)){t.scaleX*=-1,t.scaleY*=-1,t.scaleZ*=-1;for(var x=0;3>x;x++)h[x][0]*=-1,h[x][1]*=-1,h[x][2]*=-1}var g=0,v=_asin(-h[0][2]),y=0;return 0===_cos3(v)?g=_atan2(-h[2][0],h[1][1]):(g=_atan2(h[1][2],h[2][2]),y=_atan2(h[0][1],h[0][0])),t.rotateX=_radToDeg(g),t.rotateY=_radToDeg(v),t.rotateZ=_radToDeg(y),t},determinant2x2=function(e,t,n,a){return e*a-t*n},determinant3x3=function(e,t,n,a,r,o,i,s,l){return e*determinant2x2(r,o,s,l)-a*determinant2x2(t,n,s,l)+i*determinant2x2(t,n,r,o)},determinant4x4=function(e){var t=e[0][0],n=e[0][1],a=e[0][2],r=e[0][3],o=e[1][0],i=e[1][1],s=e[1][2],l=e[1][3],d=e[2][0],u=e[2][1],c=e[2][2],p=e[2][3],h=e[3][0],m=e[3][1],b=e[3][2],x=e[3][3];return t*determinant3x3(i,u,m,s,c,b,l,p,x)-n*determinant3x3(o,d,h,s,c,b,l,p,x)+a*determinant3x3(o,d,h,i,u,m,l,p,x)-r*determinant3x3(o,d,h,i,u,m,s,c,b)},adjoint=function(e){var t=[[],[],[],[]],n=e[0][0],a=e[0][1],r=e[0][2],o=e[0][3],i=e[1][0],s=e[1][1],l=e[1][2],d=e[1][3],u=e[2][0],c=e[2][1],p=e[2][2],h=e[2][3],m=e[3][0],b=e[3][1],x=e[3][2],g=e[3][3];return t[0][0]=determinant3x3(s,c,b,l,p,x,d,h,g),t[1][0]=-determinant3x3(i,u,m,l,p,x,d,h,g),t[2][0]=determinant3x3(i,u,m,s,c,b,d,h,g),t[3][0]=-determinant3x3(i,u,m,s,c,b,l,p,x),t[0][1]=-determinant3x3(a,c,b,r,p,x,o,h,g),t[1][1]=determinant3x3(n,u,m,r,p,x,o,h,g),t[2][1]=-determinant3x3(n,u,m,a,c,b,o,h,g),t[3][1]=determinant3x3(n,u,m,a,c,b,r,p,x),t[0][2]=determinant3x3(a,s,b,r,l,x,o,d,g),t[1][2]=-determinant3x3(n,i,m,r,l,x,o,d,g),t[2][2]=determinant3x3(n,i,m,a,s,b,o,d,g),t[3][2]=-determinant3x3(n,i,m,a,s,b,r,l,x),t[0][3]=-determinant3x3(a,s,c,r,l,p,o,d,h),t[1][3]=determinant3x3(n,i,u,r,l,p,o,d,h),t[2][3]=-determinant3x3(n,i,u,a,s,c,o,d,h),void(t[3][3]=determinant3x3(n,i,u,a,s,c,r,l,p))},inverse=function(e){var t=adjoint(e),n=determinant4x4(e);if(_abs5(n)<SMALL_NUMBER)return!1;for(var a=0;4>a;a++)for(var r=0;4>r;r++)t[a][r]/=n;return t},transposeMatrix4=function(e){for(var t=[[],[],[],[]],n=0;4>n;n++)for(var a=0;4>a;a++)t[n][a]=e[a][n];return t},v4MulPointByMatrix=function(e,t){var n=[];return n[0]=e[0]*t[0][0]+e[1]*t[1][0]+e[2]*t[2][0]+e[3]*t[3][0],n[1]=e[0]*t[0][1]+e[1]*t[1][1]+e[2]*t[2][1]+e[3]*t[3][1],n[2]=e[0]*t[0][2]+e[1]*t[1][2]+e[2]*t[2][2]+e[3]*t[3][2],n[3]=e[0]*t[0][3]+e[1]*t[1][3]+e[2]*t[2][3]+e[3]*t[3][3],n},v3Length=function(e){return _sqrt5(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},v3Scale=function(e,t){var n=v3Length(e);if(0!=n){var a=t/n;e[0]*=a,e[1]*=a,e[2]*=a}},v3Dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},v3Combine=function(e,t,n,a,r){n[0]=a*e[0]+r*t[0],n[1]=a*e[1]+r*t[1],n[2]=a*e[2]+r*t[2]},v3Cross=function(e,t,n){n[0]=e[1]*t[2]-e[2]*t[1],n[1]=e[2]*t[0]-e[0]*t[2],n[2]=e[0]*t[1]-e[1]*t[0]};BoxySVG.utils.transformDecomposition={decomposeTransform:decomposeTransform}}}{{var _getUserBBox4=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$math3=BoxySVG.utils.math,_round11=_BoxySVG$utils$math3.round,_signum=_BoxySVG$utils$math3.signum,_roundMatrix3=BoxySVG.utils.matrix.roundMatrix,_getPaintServer=BoxySVG.utils.paint.getPaintServer,_BoxySVG$utils$pathSh=BoxySVG.utils.pathShapes,_getShapeData=_BoxySVG$utils$pathSh.getShapeData,_setShapeData=_BoxySVG$utils$pathSh.setShapeData,_BoxySVG$utils$patter2=BoxySVG.utils.pattern,_createDerivedPattern=_BoxySVG$utils$patter2.createDerivedPattern,_getParentPattern=_BoxySVG$utils$patter2.getParentPattern,_getPatternUsers=_BoxySVG$utils$patter2.getPatternUsers,_decomposeTransform=BoxySVG.utils.transformDecomposition.decomposeTransform,_paintableElementNames=BoxySVG.utils.variables.paintableElementNames,_BoxySVG$utils$transf2=BoxySVG.utils.transformGeneral,_getComputedTransform3=_BoxySVG$utils$transf2.getComputedTransform,_getTransformFromPoints3=_BoxySVG$utils$transf2.getTransformFromPoints,_getTransformOriginClientPoint=_BoxySVG$utils$transf2.getTransformOriginClientPoint,_getElementRotationAngle=_BoxySVG$utils$transf2.getElementRotationAngle,_setElementRotationAngle=_BoxySVG$utils$transf2.setElementRotationAngle,_transformPathData=_BoxySVG$utils$transf2.transformPathData,_userPointToBBoxPoint=_BoxySVG$utils$transf2.userPointToBBoxPoint,_abs6=Math.abs,_min3=Math.min,_max4=Math.max,_parseFloat4=Number.parseFloat,_SVGUnitTypes4=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3=_SVGUnitTypes4.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_SVG_UNIT_TYPE_USERSPACEONUSE=_SVGUnitTypes4.SVG_UNIT_TYPE_USERSPACEONUSE,$initialScaleX=Symbol(),$initialScaleY=Symbol(),$initialStartClientPoint=Symbol(),$initialEndClientPoint=Symbol(),$initialNormalClientPoint=Symbol(),$initialCenterClientPoint=Symbol(),$initialR1ClientPoint=Symbol(),$initialR2ClientPoint=Symbol(),$initialP1ClientPoint=Symbol(),$initialP2ClientPoint=Symbol(),$initialP3ClientPoint=Symbol(),reduceTransform=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(!1!==e.hasAttribute("transform")){void 0===t.geometryPrecision&&(t.geometryPrecision=3),void 0===t.transformPrecision&&(t.transformPrecision=3),void 0===t.preserveStrokeWidth&&(t.preserveStrokeWidth=!0),void 0===t.preserveRectRadii&&(t.preserveRectRadii=!0),void 0===t.preserveRotation&&(t.preserveRotation=!0),void 0===t.transformDirection&&(t.transformDirection="bottom-right");var n=e.localName;if("g"===n)reduceGroupTransform(e,t);else if("rect"===n)reduceRectTransform(e,t);else if("circle"===n)reduceCircleTransform(e,t);else if("ellipse"===n)reduceEllipseTransform(e,t);else if("text"===n)reduceTextTransform(e,t);else if("image"===n)reduceImageTransform(e,t);else if("line"===n)reduceLineTransform(e,t);else if("polyline"===n)reducePolyTransform(e,t);else if("polygon"===n)reducePolyTransform(e,t);else if("use"===n)reduceUseTransform(e,t);else if("path"===n)if(e.hasAttribute("data-bx-shape")){var a=_getShapeData(e),r=a.type;"triangle"===r?reduceTriangleShapePathTransform(e,t):"rect"===r?reduceRectShapePathTransform(e,t):"n-gon"===r?reduceNGonShapePathTransform(e,t):"star"===r?reduceStarShapePathTransform(e,t):"ring"===r?reduceRingShapePathTransform(e,t):reducePathTransform(e,t)}else reducePathTransform(e,t)}},reduceGroupTransform=function(e,t){var n=t.transformPrecision,a=_roundMatrix3(_getComputedTransform3(e),n);a.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",a.toString())},reduceRectTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,o=t.preserveRectRadii;if(n.is2D){var i=_decomposeTransform(n),s=i.scaleX,l=i.scaleY,d=e.x.baseVal.value,u=e.y.baseVal.value,c=e.width.baseVal.value,p=e.height.baseVal.value,h=e.rx.baseVal.value,m=e.ry.baseVal.value,b=new SVGPoint(d,u).matrixTransform(n),x=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);d*=s,u*=l,c*=_abs6(s),p*=_abs6(l),!1===o&&(h*=_abs6(s),m*=_abs6(l));var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,x,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0),storeRelatedGeometry(e);for(var w=[["x",d],["y",u],["width",c],["height",p],["rx",h],["ry",m]],k=0;k<w.length;k++){var A=_slicedToArray(w[k],2),C=A[0],S=A[1];S=_round11(S,a),0===S?e.removeAttribute(C):e.setAttribute(C,S)}_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r).toString())},reduceCircleTransform=function(e,t){var n=_getComputedTransform3(e),a=_decomposeTransform(n),o=a.scaleX,i=a.scaleY,s=t.geometryPrecision,l=t.transformPrecision,d=BoxySVG.classes.Vector;if(n.is2D&&o===i){var u=o,c=e.cx.baseVal.value,p=e.cy.baseVal.value,h=e.r.baseVal.value,r=new SVGPoint(c,p).matrixTransform(n),m=new SVGPoint(c+h,p).matrixTransform(n),b=new SVGPoint(c,p-h).matrixTransform(n);c*=u,p*=u,h*=u;var x=new SVGPoint(c,p),g=new SVGPoint(c+h,p),v=new SVGPoint(c,p-h),y=_getTransformFromPoints3(x,g,v,r,m,b);y=_roundMatrix3(y,l),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(x=x.matrixTransform(y),g=g.matrixTransform(y),v=v.matrixTransform(y),y.e=0,y.f=0),c=_round11(x.x,s),p=_round11(x.y,s),h=_round11(new d(x,g).length,s),storeRelatedGeometry(e),y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString());for(var f=[["cx",c],["cy",p],["r",h]],_=0;_<f.length;_++){var w=_slicedToArray(f[_],2),k=w[0],A=w[1];0===A?e.removeAttribute(k):e.setAttribute(k,A)}restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,l).toString())},reduceEllipseTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,o=BoxySVG.classes.Vector;if(n.is2D){var i=_decomposeTransform(n),s=i.scaleX,l=i.scaleY,d=e.cx.baseVal.value,u=e.cy.baseVal.value,c=e.rx.baseVal.value,p=e.ry.baseVal.value,h=new SVGPoint(d,u).matrixTransform(n),m=new SVGPoint(d+c,u).matrixTransform(n),b=new SVGPoint(d,u-p).matrixTransform(n);d*=s,u*=l,c*=s,p*=l;var x=new SVGPoint(d,u),g=new SVGPoint(d+c,u),v=new SVGPoint(d,u-p),y=_getTransformFromPoints3(x,g,v,h,m,b);y=_roundMatrix3(y,r),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(x=x.matrixTransform(y),g=g.matrixTransform(y),v=v.matrixTransform(y),y.e=0,y.f=0),d=_round11(x.x,a),u=_round11(x.y,a),c=_round11(new o(x,g).length,a),p=_round11(new o(x,v).length,a),storeRelatedGeometry(e),y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString());for(var f=[["cx",d],["cy",u],["rx",c],["ry",p]],_=0;_<f.length;_++){var w=_slicedToArray(f[_],2),k=w[0],A=w[1];0===A?e.removeAttribute(k):e.setAttribute(k,A)}restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceLineTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,o=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(o){var i=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=new SVGPoint(e.x1.baseVal.value,e.y1.baseVal.value),d=new SVGPoint(e.x2.baseVal.value,e.y2.baseVal.value),u=l.matrixTransform(s),c=d.matrixTransform(s);e.setAttribute("x1",_round11(u.x,a)),e.setAttribute("y1",_round11(u.y,a)),e.setAttribute("x2",_round11(c.x,a)),e.setAttribute("y2",_round11(c.y,a)),e.removeAttribute("transform"),_setElementRotationAngle(e,i,r),restoreRelatedGeometry(e,t)}else{var p=_getTransformOriginClientPoint(e),h=_getComputedTransform3(e),m=new SVGPoint(e.x1.baseVal.value,e.y1.baseVal.value),b=new SVGPoint(e.x2.baseVal.value,e.y2.baseVal.value),x=m.matrixTransform(h),g=b.matrixTransform(h);if(storeRelatedGeometry(e),e.setAttribute("x1",_round11(x.x,a)),e.setAttribute("y1",_round11(x.y,a)),e.setAttribute("x2",_round11(g.x,a)),e.setAttribute("y2",_round11(g.y,a)),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var v=_getUserBBox4(e),y=e.getScreenCTM().inverse(),f=p.matrixTransform(y),_=_userPointToBBoxPoint(f,v),w=_round11(_.x,a),k=_round11(_.y,a);e.setAttribute("data-bx-origin",w+" "+k)}restoreRelatedGeometry(e,t)}},reducePolyTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,o=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(o){var i=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=[],d=!0,u=!1,c;try{for(var p=e.points[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var m=h.value,b=m.matrixTransform(s),g=b.x,x=b.y;l.push(_round11(g,a),_round11(x,a))}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.setAttribute("points",l.join(" ")),e.removeAttribute("transform"),_setElementRotationAngle(e,i,r),restoreRelatedGeometry(e,t)}else{var v=_getTransformOriginClientPoint(e),y=[],f=!0,_=!1,w;try{for(var k=e.points[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.matrixTransform(n),g=S.x,x=S.y;y.push(_round11(g,a),_round11(x,a))}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}if(storeRelatedGeometry(e),e.setAttribute("points",y.join(" ")),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var E=_getUserBBox4(e),T=e.getScreenCTM().inverse(),P=v.matrixTransform(T),L=_userPointToBBoxPoint(P,E),M=_round11(L.x,a),D=_round11(L.y,a);e.setAttribute("data-bx-origin",M+" "+D)}restoreRelatedGeometry(e,t)}},reduceUseTransform=function(e,t){var n=t.transformPrecision;if(e.hasAttribute("transform")){var a=_getComputedTransform3(e);a=_roundMatrix3(a,n),a.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",a.toString())}},reducePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,o=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(o){var i=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=e.getPathData(),d=_transformPathData(l,s,a);e.setPathData(d),e.removeAttribute("transform"),_setElementRotationAngle(e,i,r),restoreRelatedGeometry(e,t)}else{var u=_getTransformOriginClientPoint(e),c=e.getPathData(),p=_transformPathData(c,n,a);if(storeRelatedGeometry(e),e.setPathData(p),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var h=_getUserBBox4(e),m=e.getScreenCTM().inverse(),b=u.matrixTransform(m),x=_userPointToBBoxPoint(b,h),g=_round11(x.x,a),v=_round11(x.y,a);e.setAttribute("data-bx-origin",g+" "+v)}restoreRelatedGeometry(e,t)}},reduceTriangleShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var o=_decomposeTransform(n),i=o.scaleX,s=o.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=new SVGPoint(d,u).matrixTransform(n),x=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);d*=i,u*=s,c*=_abs6(i),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,x,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,h,m].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"triangle",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceRectShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,o=t.preserveRectRadii;if(n.is2D){var i=_decomposeTransform(n),s=i.scaleX,l=i.scaleY,d=_slicedToArray(_getShapeData(e).values,12),u=d[0],c=d[1],p=d[2],h=d[3],m=d[4],b=d[5],x=d[6],g=d[7],v=d[8],y=d[9],f=d[10],_=d[11],w=new SVGPoint(u,c).matrixTransform(n),k=new SVGPoint(u+p,c).matrixTransform(n),A=new SVGPoint(u,c+h).matrixTransform(n);v===void 0&&(v=m),y===void 0&&(y=b),f===void 0&&(f=x),_===void 0&&(_=g),u*=s,c*=l,p*=_abs6(s),h*=_abs6(l),!1===o&&(m*=_abs6(s),b*=_abs6(s),x*=_abs6(s),g*=_abs6(s),v*=_abs6(l),y*=_abs6(l),f*=_abs6(l),_*=_abs6(l));var C=new SVGPoint(u,c),S=new SVGPoint(u+p,c),E=new SVGPoint(u,c+h),T=_getTransformFromPoints3(C,S,E,w,k,A);T=_roundMatrix3(T,r),1===_abs6(T.a)&&0===T.b&&0===T.c&&1===_abs6(T.d)&&(0!==T.e||0!==T.f)&&(u=1===T.a?u+T.e:u-T.e,c=1===T.d?c+T.f:c-T.f,T.e=0,T.f=0);var P;P=m===v&&b===y&&x===f&&g===_?[u,c,p,h,m,b,x,g]:[u,c,p,h,m,b,x,g,v,y,f,_],P=P.map(function(e){return _round11(e,a)}),storeRelatedGeometry(e),_setShapeData(e,{type:"rect",values:P},a),T.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",T.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceNGonShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var o=_decomposeTransform(n),i=o.scaleX,s=o.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=new SVGPoint(d,u).matrixTransform(n),x=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);c*=_abs6(i),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,x,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,h,m];w=w.map(function(e){return _round11(e,a)}),storeRelatedGeometry(e),_setShapeData(e,{type:"n-gon",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceStarShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var o=_decomposeTransform(n),i=o.scaleX,s=o.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=new SVGPoint(d,u).matrixTransform(n),x=new SVGPoint(d+c,u).matrixTransform(n),g=new SVGPoint(d,u+p).matrixTransform(n);c*=_abs6(i),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,x,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,h,m].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"star",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceRingShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var o=_slicedToArray(_getShapeData(e).values,6),i=o[0],s=o[1],l=o[2],d=o[3],u=o[4],c=o[5],p=_decomposeTransform(n),h=p.scaleX,m=p.scaleY,b=new SVGPoint(i,s).matrixTransform(n),x=new SVGPoint(i+u,s).matrixTransform(n),g=new SVGPoint(i,s+c).matrixTransform(n);l*=_abs6(h),d*=_abs6(m),u*=_abs6(h),c*=_abs6(m);var v=new SVGPoint(i,s),y=new SVGPoint(i+u,s),f=new SVGPoint(i,s+c),_=_getTransformFromPoints3(v,y,f,b,x,g);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(i=1===_.a?i+_.e:i-_.e,s=1===_.d?s+_.f:s-_.f,_.e=0,_.f=0);var w=[i,s,l,d,u,c].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"ring",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceImageTransform=function(e,t){var n=t.geometryPrecision,a=t.transformPrecision,r=t.preserveRectRadii,o=_getComputedTransform3(e),i=_decomposeTransform(o),s=i.scaleX,l=i.scaleY;if(o.is2D&&(s===l||"none"===e.getAttribute("preserveAspectRatio"))){var d=e.x.baseVal.value,u=e.y.baseVal.value,c=e.width.baseVal.value,p=e.height.baseVal.value,h=new SVGPoint(d,u).matrixTransform(o),m=new SVGPoint(d+c,u).matrixTransform(o),b=new SVGPoint(d,u+p).matrixTransform(o);d*=s,u*=l,c*=_abs6(s),p*=_abs6(l);var x=new SVGPoint(d,u),g=new SVGPoint(d+c,u),v=new SVGPoint(d,u+p),y=_getTransformFromPoints3(x,g,v,h,m,b);y=_roundMatrix3(y,a),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(0!==y.e||0!==y.f)&&(d=1===y.a?d+y.e:d-y.e,u=1===y.d?u+y.f:u-y.f,y.e=0,y.f=0),storeRelatedGeometry(e);for(var f=[["x",d],["y",u],["width",c],["height",p]],_=0;_<f.length;_++){var w=_slicedToArray(f[_],2),k=w[0],A=w[1];A=_round11(A,n),0===A?e.removeAttribute(k):e.setAttribute(k,A)}y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString()),restoreRelatedGeometry(e,t)}else o.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(o,a))},reduceTextTransform=function(e,t){var n=t.geometryPrecision,a=t.transformPrecision,r=[].concat(_toConsumableArray(e.children)).find(function(e){return"textPath"===e.localName}),o=r?body.canvas.artboards.querySelector(r.href.baseVal):null;if(o){var i=_roundMatrix3(_getComputedTransform3(e),a);i.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",i.toString())}else{var s=_getComputedTransform3(e),l=_decomposeTransform(s),d=l.scaleX,u=l.scaleY;if(s.is2D&&d===u){var c=0===e.x.baseVal.length?0:e.x.baseVal.getItem(0).value,p=0===e.y.baseVal.length?0:e.y.baseVal.getItem(0).value,h=e.getBBox().width,m=e.getBBox().height,b=new SVGPoint(c,p).matrixTransform(s),x=new SVGPoint(c+h,p).matrixTransform(s),g=new SVGPoint(c,p+m).matrixTransform(s);c*=d,p*=u,h*=_abs6(d),m*=_abs6(u);var v=new SVGPoint(c,p),y=new SVGPoint(c+h,p),f=new SVGPoint(c,p+m),_=_getTransformFromPoints3(v,y,f,b,x,g);_=_roundMatrix3(_,a),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(c=1===_.a?c+_.e:c-_.e,p=1===_.d?p+_.f:p-_.f,_.e=0,_.f=0),storeRelatedGeometry(e);var w=!0,k=!1,A;try{for(var C=e.querySelectorAll("tspan")[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,storeRelatedGeometry(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}e.setAttribute("x",_round11(c,n)),e.setAttribute("y",_round11(p,n)),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t);var T=e.querySelectorAll("tspan");if(0===T.length){var P=getComputedStyle(e).getPropertyValue("font-size");P=_parseFloat4(P),P=_round11(P*u,1),e.style.setProperty("font-size",P)}else{var L=!0,M=!1,D;try{for(var I=e.querySelectorAll("tspan")[Symbol.iterator](),V;!(L=(V=I.next()).done);L=!0){var N=V.value,R=getComputedStyle(N).getPropertyValue("font-size");R=_parseFloat4(R),R=_round11(R*u,1),N.style.setProperty("font-size",R);var z=getComputedStyle(N).getPropertyValue("word-spacing");z=_parseFloat4(z),z=_round11(z*u,2),N.style.setProperty("word-spacing",z);var G=getComputedStyle(N).getPropertyValue("letter-spacing");G=_parseFloat4(G),G=_round11(G*u,2),N.style.setProperty("letter-spacing",G),restoreRelatedGeometry(N,t)}}catch(e){M=!0,D=e}finally{try{!L&&I.return&&I.return()}finally{if(M)throw D}}}}else s.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(s,a))}},storeRelatedGeometry=function(e){var t=e.getScreenCTM(),n=BoxySVG.classes.Vector;if(_paintableElementNames.includes(e.localName)){var a=[_getPaintServer(e,"fill"),_getPaintServer(e,"stroke")],r=a.filter(function(e){return e&&e.localName.endsWith("Gradient")}),o=a.filter(function(e){return e&&"pattern"===e.localName}),i=_decomposeTransform(_getComputedTransform3(e)),s=i.scaleX,l=i.scaleY;e[$initialScaleX]=s,e[$initialScaleY]=l;var d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var m=h.value,b=_getComputedTransform3(m);if(m.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE)if("linearGradient"===m.localName){var x=new SVGPoint(m.x1.baseVal.value,m.y1.baseVal.value),g=new SVGPoint(m.x2.baseVal.value,m.y2.baseVal.value),v=new n(x,g).getNormalVector(),y=v.transformPoint(x),f=x.matrixTransform(b),_=g.matrixTransform(b),w=y.matrixTransform(b);m[$initialStartClientPoint]=f.matrixTransform(t),m[$initialEndClientPoint]=_.matrixTransform(t),m[$initialNormalClientPoint]=w.matrixTransform(t)}else if("radialGradient"===m.localName){var k=new SVGPoint(m.cx.baseVal.value,m.cy.baseVal.value),A=new SVGPoint(m.cx.baseVal.value+m.r.baseVal.value,m.cy.baseVal.value),C=new SVGPoint(m.cx.baseVal.value,m.cy.baseVal.value-m.r.baseVal.value),S=k.matrixTransform(b),E=A.matrixTransform(b),T=C.matrixTransform(b);m[$initialCenterClientPoint]=S.matrixTransform(t),m[$initialR1ClientPoint]=E.matrixTransform(t),m[$initialR2ClientPoint]=T.matrixTransform(t)}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var P=!0,L=!1,M;try{for(var D=o[Symbol.iterator](),I;!(P=(I=D.next()).done);P=!0){var V=I.value,N=V.hasAttribute("href")?_getParentPattern(V):V,R=_getComputedTransform3(V);if(N.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var z=new SVGPoint(N.x.baseVal.value,N.y.baseVal.value),G=new SVGPoint(N.x.baseVal.value+N.width.baseVal.value,N.y.baseVal.value),B=new SVGPoint(N.x.baseVal.value+N.width.baseVal.value,N.y.baseVal.value+N.height.baseVal.value),O=z.matrixTransform(R),j=G.matrixTransform(R),q=B.matrixTransform(R);V[$initialP1ClientPoint]=O.matrixTransform(t),V[$initialP2ClientPoint]=j.matrixTransform(t),V[$initialP3ClientPoint]=q.matrixTransform(t)}else if(N.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3){var U=e.getScreenCTM(),H=_getUserBBox4(e),F=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits),$=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits+N.width.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits),Y=new SVGPoint(N.x.baseVal.valueInSpecifiedUnits+N.width.baseVal.valueInSpecifiedUnits,N.y.baseVal.valueInSpecifiedUnits+N.height.baseVal.valueInSpecifiedUnits),X=new SVGPoint(H.x+F.x*H.width,H.y+F.y*H.height),W=new SVGPoint(H.x+$.x*H.width,H.y+$.y*H.height),K=new SVGPoint(H.x+Y.x*H.width,H.y+Y.y*H.height),Z=X.matrixTransform(R),J=W.matrixTransform(R),Q=K.matrixTransform(R),ee=Z.matrixTransform(U),te=J.matrixTransform(U),ne=Q.matrixTransform(U);V[$initialP1ClientPoint]=ee,V[$initialP2ClientPoint]=te,V[$initialP3ClientPoint]=ne}}}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}}},restoreRelatedGeometry=function(e,t){var n=e.getScreenCTM().inverse(),a=t.geometryPrecision,r=t.preserveStrokeWidth,o=t.transformPrecision,i=t.transformDirection,s=BoxySVG.classes.Vector;if(_paintableElementNames.includes(e.localName)){var l=[_getPaintServer(e,"fill"),_getPaintServer(e,"stroke")],d=l.filter(function(e){return e&&e.localName.endsWith("Gradient")}),u=l.filter(function(e){return e&&"pattern"===e.localName});if(!1===r){var c=e[$initialScaleX],p=e[$initialScaleY],h=getComputedStyle(e).getPropertyValue("stroke-width");h=_parseFloat4(h),h*="left"===i||"right"===i?_abs6(c):"top"===i||"bottom"===i?_abs6(p):(_abs6(c)+_abs6(p))/2,h=_round11(h,a),e.style.setProperty("stroke-width",h)}var m=!0,b=!1,x;try{for(var g=d[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)if(y=v.value,y.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var f=void 0;if("linearGradient"===y.localName){var _=new SVGPoint(y.x1.baseVal.value,y.y1.baseVal.value),w=new SVGPoint(y.x2.baseVal.value,y.y2.baseVal.value),k=new s(_,w).getNormalVector().transformPoint(_);f=_getTransformFromPoints3(_,w,k,y[$initialStartClientPoint].matrixTransform(n),y[$initialEndClientPoint].matrixTransform(n),y[$initialNormalClientPoint].matrixTransform(n))}else if("radialGradient"===y.localName){var A=new SVGPoint(y.cx.baseVal.value,y.cy.baseVal.value),C=new SVGPoint(y.cx.baseVal.value+y.r.baseVal.value,y.cy.baseVal.value),S=new SVGPoint(y.cx.baseVal.value,y.cy.baseVal.value-y.r.baseVal.value);f=_getTransformFromPoints3(A,C,S,y[$initialCenterClientPoint].matrixTransform(n),y[$initialR1ClientPoint].matrixTransform(n),y[$initialR2ClientPoint].matrixTransform(n))}f=_roundMatrix3(f,o),y.setAttribute("gradientTransform",f.toString())}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}var E=!0,T=!1,P;try{for(var L=u[Symbol.iterator](),M;!(E=(M=L.next()).done);E=!0){var D=M.value,I=D.hasAttribute("href")?_getParentPattern(D):D,V=_getComputedTransform3(D),N=_getPatternUsers(D),R=D[$initialP1ClientPoint],z=D[$initialP2ClientPoint],G=D[$initialP3ClientPoint];if(1<N.length){var B=_createDerivedPattern(D);D.after(B);for(var O=["fill","stroke"],j=0,q;j<O.length;j++)q=O[j],e.style.getPropertyValue(q)==="url(\"#"+D.id+"\")"&&e.style.setProperty(q,"url(\"#"+B.id+"\")");D=B}if(I.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var U=new SVGPoint(I.x.baseVal.value,I.y.baseVal.value),H=new SVGPoint(I.x.baseVal.value+I.width.baseVal.value,I.y.baseVal.value),F=new SVGPoint(I.x.baseVal.value+I.width.baseVal.value,I.y.baseVal.value+I.height.baseVal.value),$=_getTransformFromPoints3(U,H,F,R.matrixTransform(n),z.matrixTransform(n),G.matrixTransform(n));V=_roundMatrix3($,o),D.setAttribute("patternTransform",V.toString())}else if(I.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3){var Y=_getUserBBox4(e),X=new SVGPoint(I.x.baseVal.valueInSpecifiedUnits,I.y.baseVal.valueInSpecifiedUnits),W=new SVGPoint(I.x.baseVal.valueInSpecifiedUnits+I.width.baseVal.valueInSpecifiedUnits,I.y.baseVal.valueInSpecifiedUnits),K=new SVGPoint(I.x.baseVal.valueInSpecifiedUnits+I.width.baseVal.valueInSpecifiedUnits,I.y.baseVal.valueInSpecifiedUnits+I.height.baseVal.valueInSpecifiedUnits),Z=new SVGPoint(Y.x+X.x*Y.width,Y.y+X.y*Y.height),J=new SVGPoint(Y.x+W.x*Y.width,Y.y+W.y*Y.height),Q=new SVGPoint(Y.x+K.x*Y.width,Y.y+K.y*Y.height),ee=R.matrixTransform(n),te=z.matrixTransform(n),ne=G.matrixTransform(n),ae=ee.matrixTransform(V.inverse()),re=te.matrixTransform(V.inverse()),oe=ne.matrixTransform(V.inverse()),ie=_getTransformFromPoints3(Z,J,Q,ae,re,oe);V=V.multiply(ie),V=_roundMatrix3(V,o),D.setAttribute("patternTransform",V.toString())}}}catch(e){T=!0,P=e}finally{try{!E&&L.return&&L.return()}finally{if(T)throw P}}}};BoxySVG.utils.transformReduction={reduceTransform:reduceTransform}}}{{var EventEmitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addEventListener",value:function(e,t){this._events||(this._events={});var n=this._events[e];n||(this._events[e]=n=[]),n.push(t),300<n.length&&console.warn("Potential EventEmitter memory leak: "+n.length+" listeners "+("subscribed to event \""+e+"\""))}},{key:"removeEventListener",value:function(e,t){if(this._events&&this._events[e]){for(var n=[],a=0;a<this._events[e].length;a+=1)this._events[e][a]!==t&&n.push(this._events[e][a]);this._events[e]=n}}},{key:"dispatchEvent",value:function(e){if(this._events){var t=this._events[e.type];if(t){for(var n=null,a=t.length-1;0<=a;a-=1){var r=t[a],o=void 0;try{o=r.call(window,e)}catch(e){null==n&&(n=e)}if(!1===o)break}if(n)throw n}}}}]),e}();BoxySVG.classes.EventEmitter=EventEmitter}}{{var _EventEmitter=BoxySVG.classes.EventEmitter,_isBoolean=BoxySVG.utils.type.isBoolean,OBSERVER_OPTIONS={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0},DOMUndoManager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._rootElement=e,n._groups=[],n._position=0,n._disabled=!1,n._observer=new MutationObserver(function(e){var t=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(t=(i=o.next()).done);t=!0)s=i.value,n._onDOMTransaction(s)}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}}),n._onDisabledChange(),n}return _inherits(t,e),_createClass(t,[{key:"clear",value:function(){this._groups=[],0!==this._position&&(this._position=0,this.dispatchEvent(new CustomEvent("positionchange",{detail:"reset"})))}},{key:"checkpoint",value:function(e){this._observer.takeRecords(),this._position<this._groups.length&&(this._groups=this._groups.slice(0,this._position));this._groups.push({label:e,transactions:[]}),this._position+=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"increment"}))}},{key:"undo",value:function(){if(this.canUndo()){this._discardCurrentGroupIfEmpty(),this.disabled=!0,this._position-=1;var e=this._groups[this._position].transactions;e=[].concat(_toConsumableArray(e)).reverse();var t=new Set,n=new Set,a=new Set,r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"childList"===d.type){var u=document.createDocumentFragment(),c=!0,p=!1,h=void 0;try{for(var m=d.addedNodes[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,d.target.removeChild(x),n.add(x),t.delete(x)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}var g=!0,v=!1,y=void 0;try{for(var f=d.removedNodes[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,u.append(w),t.add(w),n.delete(w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}d.nextSibling?d.target.insertBefore(u,d.nextSibling):d.previousSibling?d.target.insertBefore(u,d.previousSibling.nextSibling):d.target.append(u)}else"attributes"===d.type?(null===d.oldValue?"gradientUnits"===d.attributeName?d.target.setAttribute("gradientUnits","objectBoundingBox"):"patternUnits"===d.attributeName?d.target.setAttribute("patternUnits","objectBoundingBox"):"patternContentUnits"===d.attributeName?d.target.setAttribute("patternContentUnits","userSpaceOnUse"):d.target.removeAttribute(d.attributeName):d.target.setAttribute(d.attributeName,d.oldValue),a.add(d.target)):"characterData"===d.type&&(d.target.data=d.oldValue,a.add(d.target))}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}this.disabled=!1,this.dispatchEvent(new CustomEvent("undo",{detail:{addedNodes:t,removedNodes:n,modifiedNodes:a}})),this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"}))}else console.info("Can't undo")}},{key:"redo",value:function(){if(this.canRedo()){this.disabled=!0;var e=this._groups[this._position].transactions;this._position+=1;var t=new Set,n=new Set,a=new Set,r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"childList"===d.type){var u=document.createDocumentFragment(),c=!0,p=!1,h=void 0;try{for(var m=d.removedNodes[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,d.target.removeChild(x),n.add(x),t.delete(x)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}var g=!0,v=!1,y=void 0;try{for(var f=d.addedNodes[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,u.append(w),t.add(w),n.delete(w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}d.nextSibling?d.target.insertBefore(u,d.nextSibling):d.previousSibling?d.target.insertBefore(u,d.previousSibling.nextSibling):d.target.append(u)}else"attributes"===d.type?(null===d.newValue?d.target.removeAttribute(d.attributeName):d.target.setAttribute(d.attributeName,d.newValue),a.add(d.target)):"characterData"===d.type&&(d.target.data=d.newValue,a.add(d.target))}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}this.disabled=!1,this.dispatchEvent(new CustomEvent("redo",{detail:{addedNodes:t,removedNodes:n,modifiedNodes:a}})),this.dispatchEvent(new CustomEvent("positionchange",{detail:"increment"}))}else console.info("Can't redo")}},{key:"canUndo",value:function(){return 0===this._position||this.disabled?!1:1===this._position&&this._isCurrentGroupEmpty()?!1:!0}},{key:"canRedo",value:function(){return this._position===this._groups.length||this.disabled?!1:!0}},{key:"_onDisabledChange",value:function(){!0===this.disabled?(this._observer.takeRecords(),this._observer.disconnect()):!1===this.disabled&&this._observer.observe(this._rootElement,OBSERVER_OPTIONS)}},{key:"_onDOMTransaction",value:function(e){if(0!==this._groups.length){var t=this._groups[this._groups.length-1].transactions;if("attributes"===e.type){var n=e.attributeName,a=t.find(function(t){return"attributes"===t.type&&t.attributeName===n&&t.target===e.target});a?a.newValue=a.target.getAttribute(n):(a={type:"attributes",target:e.target,attributeName:n,oldValue:e.oldValue,newValue:e.target.getAttribute(n)},t.push(a))}else if("characterData"===e.type){var r=t.find(function(t){return"characterData"===t.type&&t.target===e.target});if(r)r.newValue=r.target.data;else{var o={type:"characterData",target:e.target,oldValue:e.oldValue,newValue:e.target.data};t.push(o)}}else if("childList"===e.type){var i={type:"childList",target:e.target,addedNodes:[].concat(_toConsumableArray(e.addedNodes)),removedNodes:[].concat(_toConsumableArray(e.removedNodes)),nextSibling:e.nextSibling,previousSibling:e.previousSibling};t.push(i)}}}},{key:"_isCurrentGroupEmpty",value:function(){return 0===this._groups[this._position-1].transactions.length}},{key:"_discardCurrentGroupIfEmpty",value:function(){var e=this;0<this._position&&0===this._groups[this._position-1].transactions.length&&(this._groups=this._groups.filter(function(t){return t!==e._groups[e._position]}),this._position-=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"})))}},{key:"disabled",get:function(){return this._disabled},set:function(e){_isBoolean(e)&&e!==this._disabled&&(this._disabled=e,this._onDisabledChange())}},{key:"undoLabel",get:function(){var e="Undo";if(this.canUndo()){var t;t=0<this._groups[this._position-1].transactions.length?this._groups[this._position-1]:this._groups[this._position-2],e="Undo: "+t.label}return e}},{key:"redoLabel",get:function(){var e="Redo";if(this.canRedo()){var t=this._groups[this._position];e="Redo: "+t.label}return e}}]),t}(_EventEmitter);BoxySVG.classes.DOMUndoManager=DOMUndoManager}}{var _createElement9=BoxySVG.utils.element.createElement,_BoxySVG$utils$fontGe=BoxySVG.utils.fontGeneral,_normalizeFontWeight=_BoxySVG$utils$fontGe.normalizeFontWeight,_matchFont=_BoxySVG$utils$fontGe.matchFont,_fetchFontData=_BoxySVG$utils$fontGe.fetchFontData,_BoxySVG$utils$fontOp=BoxySVG.utils.fontOpentype,_getOpenTypeFont2=_BoxySVG$utils$fontOp.getOpenTypeFont,_getOpenTypeGlyphPath=_BoxySVG$utils$fontOp.getOpenTypeGlyphPath,_deserializePathData2=BoxySVG.utils.pathGeneral.deserializePathData,_BoxySVG$utils$parsin=BoxySVG.utils.parsing,_parseFontFaceSrc2=_BoxySVG$utils$parsin.parseFontFaceSrc,_parseFontFamily=_BoxySVG$utils$parsin.parseFontFamily,_reflectStyleElementCSSOM2=BoxySVG.utils.style.reflectStyleElementCSSOM,_replaceAll3=BoxySVG.utils.string.replaceAll,_getComputedTransform4=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$text2=BoxySVG.utils.text,_getRenderedChars=_BoxySVG$utils$text2.getRenderedChars,_getRenderedTextNodes2=_BoxySVG$utils$text2.getRenderedTextNodes,_spanifyText=_BoxySVG$utils$text2.spanifyText,_textSpecificPropertyNames=BoxySVG.utils.variables.textSpecificPropertyNames,_entries=Object.entries,FontsManager=function(){function e(t){_classCallCheck(this,e),this._registry=null,this._svgElement=t}return _createClass(e,[{key:"getFamilies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(n=n.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(n=n.filter(function(e){return e.hasAttribute("data-bx-collect")}));var a=n.map(function(e){return e.getAttribute("data-bx-fonts")});return a}},{key:"getWeights",value:function(e){var t=new Set,n=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");if(n){var a=!0,r=!1,o;try{for(var i=n.sheet.rules[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.style.fontWeight?_normalizeFontWeight(l.style.fontWeight):"400";t.add(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}return[].concat(_toConsumableArray(t))}},{key:"reorderFamilies",value:function(e){var t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=this._svgElement.querySelector("style[data-bx-fonts=\""+s+"\"]");t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var d=this._svgElement.querySelector("defs"),u=!0,c=!1,p;try{for(var h=t[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,d.append(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}},{key:"getFonts",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this.getFamilies()[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,e.push.apply(e,_toConsumableArray(this.getFamilyFonts(i)))}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"getMatchedFont",value:function(e,t,n){var a=this.getFonts(),r=_matchFont(a,e,t,n);return r}},{key:"addFont",value:function(e){var t=this.getFamilyFonts(e.family),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,s.weight===e.weight&&s.style===e.weight&&s.stretch===e.stretch&&s.unicodeRange===e.unicodeRange&&s.variant===e.variant&&s.featureSettings===e.featureSettings&&t.remove(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}t.push(e),this.setFamilyFonts(t)}},{key:"addFonts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n={},a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,void 0===n[l.family]&&(n[l.family]=[]),n[l.family].push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var d=!0,u=!1,c;try{for(var p=Object.entries(n)[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var m=_slicedToArray(h.value,2),b=m[0],x=m[1],g=this.getFamilyFonts(b),v=!0,y=!1,f=void 0;try{for(var _=x[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=!0,C=!1,S=void 0;try{for(var E=g[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,P.weight===k.weight&&P.style===k.weight&&P.stretch===k.stretch&&P.unicodeRange===k.unicodeRange&&P.variant===k.variant&&P.featureSettings===k.featureSettings&&g.remove(P)}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}g.push(k)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}this.setFamilyFonts(g,t)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}},{key:"removeFont",value:function(e){var t=this.getFamilyFonts(e.family),n=t.filter(function(t){return t.style!==e.style||t.weight!==e.weight||t.stretch!==e.stretch||t.unicodeRange!==e.unicodeRange});n.length!==t.length&&this.setFamilyFonts(n)}},{key:"getFamilyFonts",value:function(e){var t=[],n=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");if(n){var a=!0,r=!1,o;try{for(var i=n.sheet.rules[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.style.src,u={style:l.style.fontStyle||"normal",weight:l.style.fontWeight?_normalizeFontWeight(l.style.fontWeight):"400",stretch:l.style.fontStretch||"normal",unicodeRange:l.style.unicodeRange||"U+0-10FFFF",variant:l.style.fontVariant||"normal",featureSettings:l.style.fontFeatureSettings||"normal"},c=new FontFace(e,d,u);c.src=d,t.push(c)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}return t}},{key:"setFamilyFonts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=0<e.length?e[0].family:null;if(null!==n){if(e.find(function(e){return e.family!==n}))return void console.error("Passed fonts from different families to fontsManger.setFamilyFonts().");var a=this._svgElement.querySelector("style[data-bx-fonts=\""+n+"\"]");if(!a)a=_createElement9("svg:style"),a.setAttribute("data-bx-fonts",n),this._svgElement.querySelector("defs").append(a),t&&a.setAttribute("data-bx-collect","");else if(!0===a.hasAttribute("data-bx-collect")&&!1===t)a.removeAttribute("data-bx-collect");else if(!1===a.hasAttribute("data-bx-collect")&&!0===t)return;var r="",o=!0,i=!1,s;try{for(var l=e[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,r+=this._getFontCSSText(u)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}a.textContent=r}}},{key:"removeFamily",value:function(e){var t=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");t&&t.remove()}},{key:"removeUnusedFamilies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=new Set;{for(var a=document.createNodeIterator(this._svgElement,NodeFilter.SHOW_ELEMENT),r;r=a.nextNode();)if(""!==r.style.fontFamily){var o=_parseFontFamily(r.style.fontFamily)||[],i=!0,s=!1,l=void 0;try{for(var d=o[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,n.add(c)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}var p=!0,h=!1,m;try{for(var b=this._svgElement.querySelectorAll("style")[Symbol.iterator](),x;!(p=(x=b.next()).done);p=!0){var g=x.value,v=!0,y=!1,f=void 0;try{for(var _=g.sheet.rules[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)if(k=w.value,k.type===CSSStyleRule.STYLE_RULE&&""!==k.style.fontFamily){var A=_parseFontFamily(k.style.fontFamily)||[],C=!0,S=!1,E=void 0;try{for(var T=A[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,n.add(L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}}{var M=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(M=M.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(M=M.filter(function(e){return e.hasAttribute("data-bx-collect")}));var D=!0,I=!1,V;try{for(var N=M[Symbol.iterator](),R;!(D=(R=N.next()).done);D=!0){var z=R.value,G=z.getAttribute("data-bx-fonts");!1===n.has(G)&&z.remove()}}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}}}},{key:"renameFamily",value:function(e,t){var n=this,a=!0,r=!1,o;try{for(var i=this._svgElement.querySelectorAll("style[data-bx-fonts]")[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,l.getAttribute("data-bx-fonts")===e){l.setAttribute("data-bx-fonts",t);var d=!0,u=!1,c=void 0;try{for(var p=l.sheet.rules[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,m.style.fontFamily="\""+t+"\"",_reflectStyleElementCSSOM2(l)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}(function(){for(var a=document.createNodeIterator(n._svgElement,NodeFilter.SHOW_ELEMENT),r=["serif","sans-serif","monospace","cursive","fantasy","system-ui","inherit","initial","unset"],o,i;o=a.nextNode();)if(i=_parseFontFamily(o.style.fontFamily)||[],i.includes(e)){var s=i.map(function(n){return r.includes(n)?n:n===e?"\""+t+"\"":"\""+n+"\""}).join(", ");o.style.fontFamily=s}})()}},{key:"embedLinkedFonts",value:async function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(n=n.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(n=n.filter(function(e){return e.hasAttribute("data-bx-collect")}));var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=!1,u=!0,c=!1,p=void 0;try{for(var h=l.sheet.rules[Symbol.iterator](),m;!(u=(m=h.next()).done);u=!0){var b=m.value,x=_parseFontFaceSrc2(b.style.src),g=x[0]||null;if(g&&"external"===g.type){var v=g.url,y=await _fetchFontData(v);b.style.src="url(\""+y+"\")",d=!0}}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}d&&_reflectStyleElementCSSOM2(l)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"replaceTextWithPaths",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:6;return new Promise(async function(r){_spanifyText(e);var o=_getComputedTransform4(e),i=document.createDocumentFragment(),s=e.querySelectorAll("tspan"),l=!0,u=!1,c;try{for(var p=s[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0){var m=h.value,b=_getRenderedChars(m),x=getComputedStyle(m),g=_parseFontFamily(x.getPropertyValue("font-family"))[0],v=parseFloat(x.getPropertyValue("font-size")),y=_normalizeFontWeight(x.getPropertyValue("font-weight")),f=x.getPropertyValue("font-style"),_=x.getPropertyValue("text-decoration"),w=await t._getGlyphs(b,g,v,y,f,_),k=[];if(w){for(var A=0,C;A<w.length;A+=1)if(C=w[A],0<C.length){var S=m.getStartPositionOfChar(A),E=m.getRotationOfChar(A),T=new SVGMatrix;T.translateSelf(S.x,S.y),T.rotateSelf(E);var P=_createElement9("svg:path");P.setPathData(C),P.setAttribute("transform",T.toString()),_reduceTransform(P,{geometryPrecision:n,transformPrecision:a,preserveRotation:!1}),k.push(P)}if(0<k.length){var L=k[0],M=k.slice(1),D=L.getAttribute("d"),d=!0,I=!1,V=void 0;try{for(var N=M[Symbol.iterator](),R,z;!(d=(R=N.next()).done);d=!0)z=R.value,D+=z.getAttribute("d")}catch(e){I=!0,V=e}finally{try{!d&&N.return&&N.return()}finally{if(I)throw V}}var G=_createElement9("svg:path");G.setAttribute("d",D),G.setAttribute("transform",o.toString());var B=!0,O=!1,j=void 0;try{for(var q=e.style[Symbol.iterator](),U,H;!(B=(U=q.next()).done);B=!0)H=U.value,!1===_textSpecificPropertyNames.includes(H)&&G.style.setProperty(H,e.style.getPropertyValue(H))}catch(e){O=!0,j=e}finally{try{!B&&q.return&&q.return()}finally{if(O)throw j}}var F=!0,$=!1,Y=void 0;try{for(var X=m.style[Symbol.iterator](),W,K;!(F=(W=X.next()).done);F=!0)K=W.value,!1===_textSpecificPropertyNames.includes(K)&&G.style.setProperty(K,m.style.getPropertyValue(K))}catch(e){$=!0,Y=e}finally{try{!F&&X.return&&X.return()}finally{if($)throw Y}}i.append(G)}}else{i=null;break}}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}if(i){var Z=[].concat(_toConsumableArray(i.children));e.replace(i),r(Z)}else r(null)})}},{key:"canReplaceTextWithPaths",value:function(e){var t=!0,n=this.getFamilies(),a=[],r=!0,o=!1,i;try{for(var s=_getRenderedTextNodes2(e)[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.includes(d.parentElement)||a.push(d.parentElement)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=!0,c=!1,p;try{for(var h=a[Symbol.iterator](),m;!(u=(m=h.next()).done);u=!0){var b=m.value,x=getComputedStyle(b),g=_parseFontFamily(x.getPropertyValue("font-family"))[0];if(!1===n.includes(g)){t=!1;break}}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}return t}},{key:"_getGlyphs",value:function(e,t,n,a,r,o){var i=this;return new Promise(async function(s){var l=i.getMatchedFont(t,a,r);if(l){var d=_parseFontFaceSrc2(l.src),u=await _getOpenTypeFont2(d[0].url);if(null===u)s(null);else{var c=[],p=("italic"===r||"oblique"===r)&&"italic"!==l.style,h=!0,m=!1,b;try{for(var x=e[Symbol.iterator](),g;!(h=(g=x.next()).done);h=!0){var v=g.value,y=u.charToGlyph(v),f=_getOpenTypeGlyphPath(y,u,n,o,p),_=f.toPathData(),w=_deserializePathData2(_);c.push(w)}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}s(c)}}else s(null)})}},{key:"_getFontCSSText",value:function(e){var t="@font-face { ";return t+="font-family: \""+e.family+"\"; ",t+="font-style: "+e.style+"; ",t+="font-weight: "+e.weight+"; ",t+="font-stretch: "+e.stretch+"; ",t+="font-unicode-range: "+e.unicodeRange+"; ",t+="font-variant: "+e.variant+"; ",t+="font-feature-settings: "+e.featureSettings+"; ",t+="src: "+e.src+"; ",t+="}",t}}]),e}();BoxySVG.classes.FontsManager=FontsManager}{{var _getClientBBox2=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$classes=BoxySVG.classes,_EventEmitter3=_BoxySVG$classes.EventEmitter,_Vector2=_BoxySVG$classes.Vector,_BoxySVG$utils$geomet5=BoxySVG.utils.geometry,_getNearestPointOnLine=_BoxySVG$utils$geomet5.getNearestPointOnLine,_transformRect3=_BoxySVG$utils$geomet5.transformRect,_rectIntersectsRect2=_BoxySVG$utils$geomet5.rectIntersectsRect,_parseViewBox=BoxySVG.utils.parsing.parseViewBox,_abs7=Math.abs,SnapManager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._ownerCanvas=e,n._snappers=[],n}return _inherits(t,e),_createClass(t,[{key:"snapStart",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this._ownerCanvas;if(this._snappers=[],t.showManualGuides){var n=t.currentArtboard.getScreenCTM(),a=t.currentArtboard.querySelectorAll("bx-guide"),r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=parseFloat(d.getAttribute("angle")),c=parseFloat(d.getAttribute("x")),p=parseFloat(d.getAttribute("y")),h=new SVGPoint(c,p).matrixTransform(n);0===u?this._snappers.push({type:"manual",orientation:"vertical",snapping:!1,x:h.x,guide:d}):90===u?this._snappers.push({type:"manual",orientation:"horizontal",snapping:!1,y:h.y,guide:d}):this._snappers.push({type:"manual",orientation:"angular",snapping:!1,x:h.x,y:h.y,guide:d})}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}if(t.showSmartGuides){var m=t.currentArtboard.getScreenCTM(),b=t.outermostSelectedElements,x=[];if(0<b.length){var g=!0,v=!1,y;try{for(var f=b[0].parentElement.children[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,t.isSelectableElement(w)&&(!1===e||!1===b.includes(w))&&x.push(w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}else{var k=!0,A=!1,C;try{for(var S=t.currentArtboard.children[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,t.isSelectableElement(T)&&x.push(T)}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}}var P=x.map(function(e){return _getClientBBox2(e)});if(t.currentArtboard.hasAttribute("viewBox")){var L=_parseViewBox(t.currentArtboard.getAttribute("viewBox"));L=_transformRect3(L,m),P.push(L)}{var M=t.getBoundingClientRect();P=P.filter(function(e){return _rectIntersectsRect2(M,e)})}var D=!0,I=!1,V;try{for(var N=P[Symbol.iterator](),R,z;!(D=(R=N.next()).done);D=!0)z=R.value,this._snappers.push({type:"smart",orientation:"vertical",snapping:!1,x:z.x,snappingBBox:z,snappedBBox:null,side:"left"}),this._snappers.push({type:"smart",orientation:"vertical",snapping:!1,x:z.x+z.width,snappingBBox:z,side:"right"}),this._snappers.push({type:"smart",orientation:"horizontal",snapping:!1,y:z.y,snappingBBox:z,snappedBBox:null,side:"top"}),this._snappers.push({type:"smart",orientation:"horizontal",snapping:!1,y:z.y+z.height,snappingBBox:z,snappedBBox:null,side:"bottom"})}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}}this.dispatchEvent(new CustomEvent("snapperschange"))}},{key:"snapEnd",value:function(){0<this._snappers.length&&(this._snappers=[],this.dispatchEvent(new CustomEvent("snapperschange")))}},{key:"snapBBox",value:function(e){var t=new SVGRect(e.x,e.y,e.width,e.height);if(0<this._snappers.length){var n=Infinity,a=Infinity,r=null,o=null,i=null,s=null,l=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var m=h.value,b=!0,x=!1,g=void 0;try{for(var v=this._snappers[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,"vertical"===f.orientation){var _=_abs7(m.x-f.x);_<n&&(n=_,r=f,i=f.x-m.x)}else if("horizontal"===f.orientation){var w=_abs7(m.y-f.y);w<a&&(a=w,o=f,s=f.y-m.y)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var k=!0,A=!1,C;try{for(var S=this._snappers[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,T.snapping=!1,T.snappedBBox=null,T.snappedPoint=null}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}10>n&&(t.x+=i,r.snapping=!0,r.snappedBBox=t),10>a&&(t.y+=s,o.snapping=!0,o.snappedBBox=t),this.dispatchEvent(new CustomEvent("snapperschange"))}return t}},{key:"snapPoint",value:function(e){var t=new SVGPoint(e.x,e.y);if(0<this._snappers.length){var n=Infinity,a=Infinity,r=null,o=null,i=null,s=null,l=!0,d=!1,u;try{for(var c=this._snappers[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,"vertical"===h.orientation){var m=_abs7(e.x-h.x);m<n&&(n=m,r=h,i=h.x-e.x)}else if("horizontal"===h.orientation){var b=_abs7(e.y-h.y);b<a&&(a=b,o=h,s=h.y-e.y)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var x=!0,g=!1,v;try{for(var y=this._snappers[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,_.snapping=!1,_.snappedBBox=null,_.snappedPoint=null}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}10>n&&(t.x+=i,r.snapping=!0,r.snappedPoint=t),10>a&&(t.y+=s,o.snapping=!0,o.snappedPoint=t),this.dispatchEvent(new CustomEvent("snapperschange"))}return t}},{key:"isGuideSnapping",value:function(e){var t=!0,n=!1,a;try{for(var r=this._snappers[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,i.guide===e)return i.snapping}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"snappers",get:function(){return[].concat(_toConsumableArray(this._snappers))}}]),t}(_EventEmitter3);BoxySVG.classes.SnapManager=SnapManager}}{{var _isAppleDevice=BoxySVG.utils.variables.isAppleDevice,_createElement10=BoxySVG.utils.element.createElement,Shortcut=function(){function e(){_classCallCheck(this,e),this._ctrl=!1,this._alt=!1,this._shift=!1,this._meta=!1,this._key=null;for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=!0,o=!1,i;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"Control"===d?this.ctrl=!0:"Alt"===d?this.alt=!0:"Shift"===d?this.shift=!0:"Meta"===d?this.meta=!0:this.key=d}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}return _createClass(e,[{key:"matches",value:function(){for(var e=!1,t=!1,n=!1,a=!1,r=null,o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];var l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,"Control"===h?e=!0:"Alt"===h?t=!0:"Shift"===h?n=!0:"Meta"===h?a=!0:r=h}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}return e===this.ctrl&&t===this.alt&&a===this.meta&&n===this.shift&&r===this.key}},{key:"includes",value:function(e){return"Control"===e?this.ctrl:"Alt"===e?this.alt:"Shift"===e?this.shift:"Meta"===e?this.meta:this.key===e}},{key:"compare",value:function(e){return this.ctrl===e.ctrl&&this.alt===e.alt&&this.shift===e.shift&&this.meta===e.meta&&this.key===e.key}},{key:"isVoid",value:function(){return!1===this.ctrl&&!1===this.alt&&!1===this.shift&&!1===this.meta&&null===this.key}},{key:"toDisplayString",value:function(){var e="";if(_isAppleDevice){this.meta&&(e+="^"),this.alt&&(e+="\u2325"),this.shift&&(e+="\u21E7"),this.ctrl&&(e+="\u2318");null!==this.key&&(e+={ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192",Backspace:"\u2326"}[this.key]||this.key)}else{var t=[];this.ctrl&&t.push("Ctrl"),this.alt&&t.push("Alt"),this.shift&&t.push("Shift"),this.meta&&t.push("Meta");null!==this.key&&t.push({ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"}[this.key]||this.key),e=t.join("+")}return e}},{key:"toAccelerator",value:function(){var e=[];return this.ctrl&&e.push("CmdOrCtrl"),this.alt&&e.push("Alt"),this.shift&&e.push("Shift"),this.meta,null!==this.key&&("ArrowUp"===this.key?e.push("Up"):"ArrowDown"===this.key?e.push("Down"):"ArrowLeft"===this.key?e.push("Left"):"ArrowRight"===this.key?e.push("Right"):e.push(this.key)),e.join("+")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toElement",value:function(){var e=_createElement10("x-shortcut");return e.ctrl=this.ctrl,e.alt=this.alt,e.shift=this.shift,e.meta=this.meta,e.key=this.key,e}},{key:"toString",value:function(){var e=[];return this.ctrl&&e.push("Control"),this.alt&&e.push("Alt"),this.shift&&e.push("Shift"),this.meta&&e.push("Meta"),null!==this.key&&e.push(this.key),e.join("+")}},{key:"ctrl",get:function(){return this._ctrl},set:function(e){this._ctrl=e}},{key:"alt",get:function(){return this._alt},set:function(e){this._alt=e}},{key:"shift",get:function(){return this._shift},set:function(e){this._shift=e}},{key:"meta",get:function(){return this._meta},set:function(e){this._meta=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}}],[{key:"fromEvent",value:function(t){var n=new e;n.ctrl=_isAppleDevice?t.metaKey:t.ctrlKey,n.alt=t.altKey,n.shift=t.shiftKey,n.meta=_isAppleDevice?t.ctrlKey:t.metaKey;var a=t.key;return" "===a&&(a="Space"),n.key=a&&"Control"!==a&&"Alt"!==a&&"Shift"!==a&&"Meta"!==a?1===a.length?a.toUpperCase():a:null,n}},{key:"fromAccelerator",value:function(t){var n=t.split("+"),a=[],r=!0,o=!1,i;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"CmdOrCtrl"===d||"CommandOrControl"===d?a.push("Control"):"Up"===d?a.push("ArrowUp"):"Down"===d?a.push("ArrowDown"):"Left"===d?a.push("ArrowLeft"):"Right"===d?a.push("ArrowRight"):""!==d&&a.push(d)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=new(Function.prototype.bind.apply(e,[null].concat(a)));return u}},{key:"fromElement",value:function(t){var n=new e;return n.ctrl=t.ctrl,n.alt=t.alt,n.shift=t.shift,n.meta=t.meta,n.key=t.key,n}},{key:"fromString",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(_toConsumableArray(t.split("+").filter(function(e){return""!==e})))))}}]),e}();BoxySVG.classes.Shortcut=Shortcut}}{{var Transaction={label:"Sample label",icon:"stub",undo:function(){},redo:function(){}},UndoManager=function(){function e(){_classCallCheck(this,e),this._entries=[],this._position=0}return _createClass(e,[{key:"register",value:function(e){e.__proto__=Transaction,this._position<this._entries.length&&(this._entries=this._entries.slice(0,this._position));var t=[];this._entries.push(t),this._position+=1,t.push(e)}},{key:"undo",value:function(){if(this.canUndo()){var e=this._entries[this._position-1],t=[].concat(_toConsumableArray(e)).reverse(),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,s.undo()}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this._position-=1}}},{key:"redo",value:function(){if(this.canRedo()){var e=this._entries[this._position],t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.redo()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._position+=1}}},{key:"reset",value:function(){this._entries=[],this._position=0}},{key:"canUndo",value:function(){return 0!==this._position}},{key:"canRedo",value:function(){return this._position!==this._entries.length}},{key:"undoLabel",get:function(){if(this.canUndo()){var e=this._entries[this._position-1];if(e[0]&&e[0].label)return"Undo: "+e[0].label}return"Undo"}},{key:"redoLabel",get:function(){if(this.canRedo()){var e=this._entries[this._position];if(e[0]&&e[0].label)return"Redo: "+e[0].label}return"Redo"}}]),e}();BoxySVG.classes.UndoManager=UndoManager}}{{var _BoxySVG$utils$artwor=BoxySVG.utils.artworkExport,_exportArtwork=_BoxySVG$utils$artwor.exportArtwork,_serializeArtwork=_BoxySVG$utils$artwor.serializeArtwork,_createElement11=BoxySVG.utils.element.createElement,_sleep=BoxySVG.utils.time.sleep,_FontsManager=BoxySVG.classes.FontsManager,rasterizeArtwork=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"png",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"rgba(0, 0, 0, 0)";return new Promise(async function(r){{var o=document.createElement("div");o.setAttribute("style","width: 1px; height: 1px; position: fixed; top: -1px; left: -1px; overflow: hidden;");var i=o.attachShadow({mode:"closed"});i.innerHTML=e,document.body.append(o);var s=i.querySelector("svg"),l=new _FontsManager(s),d=!0,u=!1,c;try{for(var p=s.querySelectorAll("text")[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,await l.replaceTextWithPaths(m)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e=_serializeArtwork(s),o.remove()}var b=_createElement11("canvas"),x=b.getContext("2d"),g=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(g),y=new Image;y.src=v,y.addEventListener("load",function(){b.width=y.naturalWidth,b.height=y.naturalHeight,("jpeg"===t||"jpg"===t)&&(x.fillStyle="white",x.fillRect(0,0,y.naturalWidth,y.naturalHeight)),x.fillStyle=a,x.fillRect(0,0,y.naturalWidth,y.naturalHeight),x.drawImage(y,0,0);if("png"===t){var e=b.toDataURL("image/png",n);URL.revokeObjectURL(v),r(e)}else if("webp"===t){var o=b.toDataURL("image/webp",n);URL.revokeObjectURL(v),r(o)}else if("jpeg"===t||"jpg"===t){var i=b.toDataURL("image/jpeg",n);URL.revokeObjectURL(v),r(i)}else if("gif"===t){var s=new GIF({workers:2,quality:10,workerScript:"node_modules/gif.js/dist/gif.worker.js"});s.addFrame(b),s.render(),s.on("finished",function(e){var t=new FileReader;t.readAsDataURL(e),t.addEventListener("loadend",function(){var e=t.result;r(e)},{once:!0})})}})})},getSymbolThumbnails=function(e,t,n){e=e.cloneNode(!0),e.setAttribute("width","1000000px"),e.setAttribute("height","100px"),e.setAttribute("viewBox","0 0 1000000 100");var a=_createElement11("svg:g");a.style.setProperty("opacity","0");var r=!0,o=!1,i;try{for(var s=e.children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.append(d)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}e.append(a);var u=[].concat(_toConsumableArray(e.querySelectorAll("symbol"))),c={},p=1e5,h=!0,m=!1,b;try{for(var x=u[Symbol.iterator](),g;!(h=(g=x.next()).done);h=!0){var v=g.value,y=_createElement11("svg:use");y.setAttribute("width","100"),y.setAttribute("height","100"),y.setAttribute("x",p),y.href.baseVal="#"+v.id,e.append(y),c[v.id]=p,p+=200}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}var f=_exportArtwork(e,"xml"),_=_createElement11("canvas"),w=_.getContext("2d"),k=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),C=new Image,S=function e(a){for(var r=0===u.length;20<a.timeRemaining()&&!1==r;){var o=u.pop(),i=c[o.id];r=0===u.length,w.clearRect(0,0,100,100),w.drawImage(C,-i,0),t(o.id,_.toDataURL("image/png"),r)}!1==r?requestIdleCallback(e):(URL.revokeObjectURL(A),n&&n())};C.addEventListener("load",function(){_.width=100,_.height=100,requestIdleCallback(S)}),C.src=A},getPatternThumbnails=function(e,t,n){e=e.cloneNode(!0),e.setAttribute("width","1000000px"),e.setAttribute("height","100px"),e.setAttribute("viewBox","0 0 1000000 100");var a=_createElement11("svg:g");a.style.setProperty("opacity","0");var r=!0,o=!1,i;try{for(var s=e.children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.append(d)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}e.append(a);var u={},c=1e5,p=[].concat(_toConsumableArray(e.querySelectorAll("pattern")));p=p.filter(function(e){return!1===e.hasAttribute("href")});var h=!0,m=!1,b;try{for(var x=p[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0){v=g.value,v.removeAttribute("patternTransform");var y=_createElement11("svg:rect");y.setAttribute("width","100"),y.setAttribute("height","100"),y.setAttribute("x",c),y.setAttribute("fill","url(\"#"+v.id+"\")"),e.append(y),u[v.id]=c,c+=200}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}var f=_exportArtwork(e,"xml"),_=_createElement11("canvas"),w=_.getContext("2d"),k=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),C=new Image,S=function e(a){for(var r=0===p.length;20<a.timeRemaining()&&!1==r;){var o=p.pop(),i=u[o.id];r=0===p.length,w.clearRect(0,0,100,100),w.drawImage(C,-i,0),t(o.id,_.toDataURL("image/png"),r)}!1==r?requestIdleCallback(e):(URL.revokeObjectURL(A),n&&n())};C.addEventListener("load",function(){_.width=100,_.height=100,requestIdleCallback(S)}),C.src=A};BoxySVG.utils.artworkRasterization={rasterizeArtwork:rasterizeArtwork,getSymbolThumbnails:getSymbolThumbnails,getPatternThumbnails:getPatternThumbnails}}}{{var _closest2=BoxySVG.utils.element.closest,shadowHTML="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>*{margin:0;padding:0;box-sizing:border-box}:host{width:100%;height:100%}#box,#main{position:relative;display:flex;align-items:center}#main{justify-content:center;background-size:40%;background-position:0% 0%;background-repeat:repeat;width:100%;height:100%}#box{background:#d8d6d8;border:1px solid rgba(0,0,0,.61);box-shadow:0 5px 50px rgba(0,0,0,.33);width:290px;height:70%;max-height:400px;margin:0 auto;flex-flow:column;overflow:hidden;text-align:center;font-size:10px}#box a{color:var(--text-color);text-decoration:none}#box a:hover{cursor:pointer;text-decoration:underline}#logo{width:80px;height:80px;margin:10px 0}#headings{cursor:text;width:100%;-webkit-user-select:text}#app-name{font-size:16px;font-weight:700;margin-bottom:2px}#scroll h3,#version{font-size:12px;margin:0 0 12px}#scroll{width:100%;height:135px;overflow:auto;border-top:1px solid #bfbfbf;border-bottom:1px solid #bfbfbf;background:rgba(255,255,255,.68);font-size:12px;padding-left:7px;flex:1;cursor:text;-webkit-user-select:text}#scroll h3{font-weight:700;margin:15px 0 6px;text-transform:uppercase;opacity:.8}#scroll dt,#scroll dt a{font-weight:600}#scroll dd{margin-bottom:9px}#scroll #frameworks li:not(:last-child),#scroll #libraries li:not(:last-child){margin-bottom:3px}#copyright{width:100%;margin:10px 0 11px;font-size:11px;cursor:text;-webkit-user-select:text}</style>\n\n    <main id=\"main\" style=\"background-image: url(images/about.svg);\">\n      <div id=\"box\">\n        <img id=\"logo\" src=\"images/logo.svg\"></img>\n\n        <div id=\"headings\">\n          <h1 id=\"app-name\">Boxy SVG</h1>\n          <h2 id=\"version\">Version 1.0.0</h2>\n        </div>\n\n        <div id=\"scroll\">\n          <h3>Libraries</h3>\n          <ul id=\"libraries\">\n            <li><a href=\"http://electron.atom.io/\" rel=\"noopener\">Electron</a></li>\n            <li><a href=\"https://nodejs.org/\" rel=\"noopener\">Node.js</a></li>\n            <li><a href=\"https://xel-toolkit.org/\" rel=\"noopener\">Xel</a></li>\n            <li><a href=\"http://opentype.js.org/\" rel=\"noopener\">Opentype.js</a></li>\n            <li><a href=\"ttp://nodeca.github.io/pako/ rel=\"noopener\"\">Pako</a></li>\n            <li><a href=\"http://paperjs.org/\" rel=\"noopener\">Paper.js</a></li>\n            <li><a href=\"https://github.com/tabatkins/parse-css\" rel=\"noopener\">Parse CSS</a></li>\n            <li><a href=\"https://babeljs.io/\" rel=\"noopener\">Babel</a></li>\n            <li><a href=\"https://github.com/google/traceur-compiler\" rel=\"noopener\">Traceur</a></li>\n          </ul>\n\n          <h3>Code snippets</h3>\n          <dl>\n            <dt><a href=\"https://github.com/DmitryBaranovskiy\" rel=\"noopener\">Dmitry Baranovskiy</a></dt>\n            <dd><a href=\"http://raphaeljs.com/\" rel=\"noopener\">Arc to cubic curve conversion</a></dd>\n\n            <dt><a href=\"http://xn--dahlstrm-t4a.net/\" rel=\"noopener\">Erik Dahlstr\xF6m</a></dt>\n            <dd><a href=\"http://xn--dahlstrm-t4a.net/svg/path/donut-shop.html\" rel=\"noopener\">Ring shape</a></dd>\n\n            <dt><a href=\"http://ariya.blogspot.com/\" rel=\"noopener\">Ariya Hidayat</a></dt>\n            <dd>HSV\u2194HSL conversion</dd>\n\n            <dt><a href=\"http://mjijackson.com/\" rel=\"noopener\">Michael Jackson</a></dt>\n            <dd><a href=\"https://goo.gl/H72pO3\" rel=\"noopener\">HSV\u2194RGB\u2194HSL conversion</a></dd>\n\n            <dt><a href=\"http://tmotooka.hatenablog.jp/\" rel=\"noopener\">Tadahisa Motooka</a></dt>\n            <dd><a href=\"https://github.com/motooka/SVGPathNormalizer\" rel=\"noopener\">Path normalization</a></dd>\n\n            <dt><a href=\"https://github.com/kennethormandy\" rel=\"noopener\">Kenneth Ormandy</a></dt>\n            <dd><a href=\"https://github.com/kennethormandy/normalize-opentype.css\" rel=\"noopener\">OpenType normalization</a></dd>\n\n            <dt><a href=\"https://github.com/progers\" rel=\"noopener\">Philip Rogers</a></dt>\n            <dd><a href=\"https://github.com/progers/pathseg\" rel=\"noopener\">Path data parser</a></dd>\n\n            <dt><a href=\"http://svg-whiz.com/\" rel=\"noopener\">Doug Schepers</a></dt>\n            <dd><a href=\"http://svg-whiz.com/experiments.html\" rel=\"noopener\">Star and n-gon primitives</a></dd>\n\n            <dt>Philip J. Schneider</dt>\n            <dd>Bezier curve fitting</dd>\n\n            <dt><a href=\"https://github.com/johan\" rel=\"noopener\">Johan Sundstr\xF6m</a></dt>\n            <dd>Path normalization</dd>\n          </dl>\n        </div>\n\n        <h2 id=\"copyright\">\xA9 2012-"+new Date().getFullYear()+" <a href=\"http://foksa.name/\">Jaros\u0142aw Foksa</a></h2>\n      </div>\n    </main>\n  ",BXAboutElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={},e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=shadowHTML;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#logo"].addEventListener("click",function(t){5===t.detail&&e._ownerApp.openDevTools()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest2(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"version"===e&&(this["#version"].textContent="Version "+this.version)}},{key:"version",get:function(){return this.hasAttribute("version")?this.getAttribute("version"):"1.0.0"},set:function(e){this.setAttribute("version",e)}}],[{key:"observedAttributes",get:function(){return["version"]}}]),t}(_CustomElement);customElements.define("bx-about",BXAboutElement)}}{{var _closest3=BoxySVG.utils.element.closest,_entries2=Object.entries,accentColorsByTheme={macos:{Blue:"hsl(211, 96.7%, 52.9%)",Green:"hsl(88, 35%, 46%)",Red:"hsl(344, 65%, 45%)",Purple:"hsl(290, 40%, 46%)",Yellowgreen:"hsl(61, 28%, 45%)"},vanilla:{Blue:"hsl(211, 86%, 57%)",Green:"hsl(88, 35%, 46%)",Red:"hsl(344, 65%, 45%)",Purple:"hsl(290, 40%, 46%)",Yellowgreen:"hsl(61, 28%, 45%)"}},_shadowHTML="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%}#shortcuts-view[hidden],[hidden]{display:none}#container,#sidebar{width:100%;height:100%}#sidebar{display:block;width:280px;background:#e0e0e0;border-right:1px solid #c3c3c3;padding-top:10px;box-sizing:border-box}#sidebar-buttons{flex-flow:column;width:100%}#sidebar-buttons x-button,#views{width:100%}#views{height:100%;padding:30px;box-sizing:border-box;overflow:auto}#views h2{margin-top:0;padding:0;margin-bottom:18px}#views hr{margin:20px 0}#experimental-features-box,#hardware-acceleration-box{margin-top:10px}#experimental-features-section p,#geometry-precision-section p,#hardware-acceleration-section p,#indentation-section p,#transform-precision-section p{font-size:13px;line-height:1.4;margin:5px 0 8px}#accent-color-section{margin-top:16px}#accent-color-section h3{margin-bottom:8px}#accent-color-select{width:150px}#geometry-precision-slider{max-width:300px}#transform-precision-section{margin-top:20px}#transform-precision-slider{max-width:300px}#indentation-section{margin-top:20px}#indentation-slider{max-width:300px}#shortcuts-view{height:100%;display:flex;flex-flow:column}#shortcuts-editor{height:0;flex:1}</style>\n\n    <x-box id=\"container\">\n      <sidebar id=\"sidebar\">\n        <x-buttons id=\"sidebar-buttons\" tracking=\"1\">\n          <x-box vertical>\n            <x-button skin=\"nav\" value=\"general\" toggled>\n              <x-icon name=\"prefs-general\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>General</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"ui\">\n              <x-icon name=\"prefs-ui\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>UI</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"markup\">\n              <x-icon name=\"prefs-markup\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Markup</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"shortcuts\">\n              <x-icon name=\"prefs-shortcuts\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Shortcuts</x-label>\n            </x-button>\n          </x-box>\n        </x-buttons>\n      </sidebar>\n\n      <div id=\"views\">\n        <div id=\"general-view\" data-view=\"general\" hidden>\n          <h2>General</h2>\n\n          <section id=\"hardware-acceleration-section\">\n            <h3>Hardware acceleration</h3>\n            <p>You should disable hardware acceleration if you are running the app inside a virtual machine or on older\n            hardware and you observe graphical glitches such as flickering or disappearing widgets. <strong>Requires app restart.</strong></p>\n            <x-box id=\"hardware-acceleration-box\">\n              <x-checkbox id=\"hardware-acceleration-checkbox\" toggled></x-checkbox>\n              <x-label for=\"hardware-acceleration-checkbox\">Hardware acceleration</x-label>\n            </x-box>\n          </section>\n        </div>\n\n        <div id=\"ui-view\" data-view=\"ui\" hidden>\n          <h2>UI</h2>\n\n          <x-box id=\"accent-color-section\" vertical>\n            <h3>Accent color</h3>\n\n            <x-select id=\"accent-color-select\">\n              <x-menu id=\"accent-color-menu\"></x-menu>\n            </x-select>\n          </x-box>\n        </div>\n\n        <div id=\"markup-view\" data-view=\"markup\" hidden>\n          <h2>Markup</h2>\n\n          <section id=\"geometry-precision-section\">\n            <h3>Geometry precision</h3>\n            <p>Precision, in number of decimal places, to be used by attributes defining shape geometry such as\n            <code>x</code>, <code>y</code>, <code>width</code>, <code>height</code>, <code>r</code> or <code>d</code>.</p>\n            <x-slider id=\"geometry-precision-slider\" value=\"3\" min=\"0\" max=\"6\" step=\"1\">\n              <x-label value=\"0\">0</x-label>\n              <x-label value=\"1\">1</x-label>\n              <x-label value=\"2\">2</x-label>\n              <x-label value=\"3\">3</x-label>\n              <x-label value=\"4\">4</x-label>\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n            </x-slider>\n          </section>\n\n          <hr/>\n\n          <section id=\"transform-precision-section\">\n            <h3>Transform precision</h3>\n            <p>Precision, in number of decimal places, to be used by <code>transform</code> attribute.</p>\n            <x-slider id=\"transform-precision-slider\" value=\"6\" min=\"5\" max=\"12\" step=\"1\">\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n              <x-label value=\"7\">7</x-label>\n              <x-label value=\"8\">8</x-label>\n              <x-label value=\"9\">9</x-label>\n              <x-label value=\"10\">10</x-label>\n              <x-label value=\"11\">11</x-label>\n              <x-label value=\"12\">12</x-label>\n            </x-slider>\n          </section>\n\n          <hr/>\n\n          <section id=\"indentation-section\">\n            <h3>Indentation</h3>\n            <p>Number of spaces used to indent SVG code.</p>\n            <x-slider id=\"indentation-slider\" value=\"2\" min=\"0\" max=\"8\" step=\"1\">\n              <x-label value=\"0\">0</x-label>\n              <x-label value=\"1\">1</x-label>\n              <x-label value=\"2\">2</x-label>\n              <x-label value=\"3\">3</x-label>\n              <x-label value=\"4\">4</x-label>\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n              <x-label value=\"7\">7</x-label>\n              <x-label value=\"8\">8</x-label>\n            </x-slider>\n          </section>\n        </div>\n\n        <div id=\"shortcuts-view\" data-view=\"shortcuts\" hidden>\n          <h2>Shortcuts</h2>\n          <bx-shortcutseditor id=\"shortcuts-editor\"></bx-shortcutseditor>\n        </div>\n      </div>\n    </x-box>\n  ",BXPreferencesElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={copy:{exec:function(){return document.execCommand("copy")}},cut:{exec:function(){return document.execCommand("cut")}},paste:{exec:function(){return document.execCommand("paste")}},selectAll:{exec:function(){return document.execCommand("selectAll")}},undo:{exec:function(){return document.execCommand("undo")}},redo:{exec:function(){return document.execCommand("redo")}}},e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}{var l="",d=!0,u=!1,c;try{for(var p=_entries2(accentColorsByTheme[window.theme])[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var m=_slicedToArray(h.value,2),b=m[0],x=m[1];l+="\n            <x-menuitem value=\""+x+"\" selected=\"true\">\n              <x-swatch value=\""+x+"\"></x-swatch>\n              <x-label>"+b+"</x-label>\n            </x-menuitem>\n          "}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e["#accent-color-menu"].innerHTML=l}return e["#sidebar-buttons"].addEventListener("toggle",function(){e._ownerApp.setConfig("bx-preferences:currentViewID",e["#sidebar-buttons"].value),e._updateViewsVisibility()}),e["#hardware-acceleration-checkbox"].addEventListener("change",function(){e._ownerApp.hardwareAcceleration=e["#hardware-acceleration-checkbox"].toggled}),e["#accent-color-select"].addEventListener("change",function(){e._ownerApp.setConfig("bx-preferences:accentColor",e["#accent-color-select"].value)}),e["#geometry-precision-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:geometryPrecision",e["#geometry-precision-slider"].value)}),e["#transform-precision-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:transformPrecision",e["#transform-precision-slider"].value)}),e["#indentation-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:indentation",e["#indentation-slider"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:async function(){this._ownerApp=_closest3(this,"bx-electronapp, bx-chromeapp, bx-webapp");var e=this._ownerApp.getConfig("bx-preferences:currentViewID"),t=this._ownerApp.getConfig("bx-preferences:accentColor");null!==e&&(this["#sidebar-buttons"].value=e),null!==t&&(this["#accent-color-select"].value=t),this._update()}},{key:"_update",value:async function(){this._updateViewsVisibility();var e=await this._ownerApp.hardwareAcceleration,t=this._ownerApp.getConfig("bx-preferences:geometryPrecision"),n=this._ownerApp.getConfig("bx-preferences:transformPrecision"),a=this._ownerApp.getConfig("bx-preferences:indentation");t=null===t?3:t,n=null===n?6:n,a=null===a?2:a,this["#hardware-acceleration-checkbox"].toggled=e,this["#geometry-precision-slider"].value=t,this["#transform-precision-slider"].value=n,this["#indentation-slider"].value=a}},{key:"_updateViewsVisibility",value:function(){var e=!0,t=!1,n;try{for(var a=this["#views"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.hidden=o.getAttribute("data-view")!==this["#sidebar-buttons"].value}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}]),t}(_CustomElement);customElements.define("bx-preferences",BXPreferencesElement)}}{{var _isArtworkString=BoxySVG.utils.artworkGeneral.isArtworkString,_exportArtwork2=BoxySVG.utils.artworkExport.exportArtwork,_importArtwork=BoxySVG.utils.artworkImport.importArtwork,_reduceTransform2=BoxySVG.utils.transformReduction.reduceTransform,_getClientBBox3=BoxySVG.utils.bbox.getClientBBox,_combineRects3=BoxySVG.utils.geometry.combineRects,_getPaintServer2=BoxySVG.utils.paint.getPaintServer,_BoxySVG$utils$pathBo=BoxySVG.utils.pathBoolops,_unite=_BoxySVG$utils$pathBo.unite,_subtract=_BoxySVG$utils$pathBo.subtract,_intersect=_BoxySVG$utils$pathBo.intersect,_exclude=_BoxySVG$utils$pathBo.exclude,_BoxySVG$utils$pathGe2=BoxySVG.utils.pathGeneral,_getPathDataBySubpath=_BoxySVG$utils$pathGe2.getPathDataBySubpath,_openPath2=_BoxySVG$utils$pathGe2.openPath,_closePath2=_BoxySVG$utils$pathGe2.closePath,_reversePath2=_BoxySVG$utils$pathGe2.reversePath,_canOpenPath2=_BoxySVG$utils$pathGe2.canOpenPath,_canClosePath2=_BoxySVG$utils$pathGe2.canClosePath,_getParentPattern2=BoxySVG.utils.pattern.getParentPattern,_BoxySVG$utils$variab5=BoxySVG.utils.variables,_graphicsElementNames2=_BoxySVG$utils$variab5.graphicsElementNames,_presentationAttributeNames2=_BoxySVG$utils$variab5.presentationAttributeNames,_capitalize3=BoxySVG.utils.string.capitalize,_reduceProperty=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text3=BoxySVG.utils.text,_spanifyText2=_BoxySVG$utils$text3.spanifyText,_reduceText=_BoxySVG$utils$text3.reduceText,_getTspansIntersectedByRange=_BoxySVG$utils$text3.getTspansIntersectedByRange,_Shortcut=BoxySVG.classes.Shortcut,_BoxySVG$utils$transf3=BoxySVG.utils.transformGeneral,_getComputedTransform5=_BoxySVG$utils$transf3.getComputedTransform,_getTransformToElement=_BoxySVG$utils$transf3.getTransformToElement,_getComputedTransformOriginClientPoint=_BoxySVG$utils$transf3.getComputedTransformOriginClientPoint,_BoxySVG$utils$elemen4=BoxySVG.utils.element,_closest4=_BoxySVG$utils$elemen4.closest,_createElement12=_BoxySVG$utils$elemen4.createElement,_getElementIndex=_BoxySVG$utils$elemen4.getElementIndex,_sortByDomPosition=_BoxySVG$utils$elemen4.sortByDomPosition,_sortBySiblingElements=_BoxySVG$utils$elemen4.sortBySiblingElements,_sortByIntersectingElements=_BoxySVG$utils$elemen4.sortByIntersectingElements,_isElementIntersectingElement=_BoxySVG$utils$elemen4.isElementIntersectingElement,_BoxySVG$utils$pathCo=BoxySVG.utils.pathConversion,_rectToPath=_BoxySVG$utils$pathCo.rectToPath,_circleToPath=_BoxySVG$utils$pathCo.circleToPath,_ellipseToPath=_BoxySVG$utils$pathCo.ellipseToPath,_lineToPath=_BoxySVG$utils$pathCo.lineToPath,_polylineToPath=_BoxySVG$utils$pathCo.polylineToPath,_polygonToPath=_BoxySVG$utils$pathCo.polygonToPath,_shadowHTML2="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%}:host(:focus){outline:0}#main{display:flex;width:100%;height:100%}#canvas{flex:1}#breadcrumb{position:absolute;top:5px;left:44px}</style>\n\n    <main id=\"main\">\n      <bx-toolsdock id=\"tools-dock\"></bx-toolsdock>\n      <bx-canvas id=\"canvas\"></bx-canvas>\n      <bx-panelsdock id=\"panels-dock\"></bx-panelsdock>\n      <bx-breadcrumb id=\"breadcrumb\"></bx-breadcrumb>\n    </main>\n  ",BXEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={previousTool:{enabled:function(){return e._canTogglePreviousTool()},exec:function(){return e._togglePreviousTool()}},transformTool:{exec:function(){return e.toggleTool("transform-tool")}},editTool:{exec:function(){return e.toggleTool("edit-tool")}},quadBezierTool:{exec:function(){return e.toggleTool("quad-bezier-tool")}},cubicBezierTool:{exec:function(){return e.toggleTool("cubic-bezier-tool")}},freehandTool:{exec:function(){return e.toggleTool("freehand-tool")}},textTool:{exec:function(){return e.toggleTool("text-tool")}},rectTool:{exec:function(){return e.toggleTool("rect-tool")}},ellipseTool:{exec:function(){return e.toggleTool("ellipse-tool")}},triangleTool:{exec:function(){return e.toggleTool("triangle-tool")}},nGonTool:{exec:function(){return e.toggleTool("n-gon-tool")}},starTool:{exec:function(){return e.toggleTool("star-tool")}},ringTool:{exec:function(){return e.toggleTool("ring-tool")}},polygonTool:{exec:function(){return e.toggleTool("polygon-tool")}},polylineTool:{exec:function(){return e.toggleTool("polyline-tool")}},fillPanel:{exec:function(){return e._togglePanel("fill-panel")}},strokePanel:{exec:function(){return e._togglePanel("stroke-panel")}},compositingPanel:{exec:function(){return e._togglePanel("compositing-panel")}},typographyPanel:{exec:function(){return e._togglePanel("typography-panel")}},geometryPanel:{exec:function(){return e._togglePanel("geometry-panel")}},pathPanel:{exec:function(){return e._togglePanel("path-panel")}},exportPanel:{exec:function(){return e._togglePanel("export-panel")}},viewPanel:{exec:function(){return e._togglePanel("view-panel")}},arrangementPanel:{exec:function(){return e._togglePanel("arrangement-panel")}},objectsPanel:{exec:function(){return e._togglePanel("objects-panel")}},defsPanel:{exec:function(){return e._togglePanel("defs-panel")}},copy:{enabled:function(){return e._ownerApp.textInputMode||0<e.canvas.selectedElements.length},exec:function(){return e._copy()}},cut:{enabled:function(){return e._ownerApp.textInputMode||0<e.canvas.selectedElements.length},exec:function(){return e._cut()}},paste:{exec:function(){return e._paste()}},duplicate:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._duplicate()}},delete:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._delete()}},undo:{enabled:function(){return e._canUndo()},exec:function(){return e._undo()}},redo:{enabled:function(){return e._canRedo()},exec:function(){return e._redo()}},selectAll:{exec:function(){return e._selectAll()}},deselectAll:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._deselectAll()}},manualGuides:{exec:function(){return e.canvas.showManualGuides=!e.canvas.showManualGuides}},smartGuides:{exec:function(){return e.canvas.showSmartGuides=!e.canvas.showSmartGuides}},zoomIn:{exec:function(){return e.canvas.zoomIn()}},zoomOut:{exec:function(){return e.canvas.zoomOut()}},resetZoom:{enabled:function(){return 100!==e.canvas.zoom},exec:function(){return e.canvas.zoom=100}},zoomToFitAll:{exec:function(){return e.canvas.zoomToFitAll()}},zoomToViewBox:{enabled:function(){return e.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){return e.canvas.zoomToViewBox()}},group:{enabled:function(){return e._canGroup()},exec:function(){return e._group()}},ungroup:{enabled:function(){return e._canUngroup()},exec:function(){return e._ungroup()}},raise:{enabled:function(){return e._canRaise()},exec:function(){return e._raise()}},raiseToFront:{enabled:function(){return e._canRaise()},exec:function(){return e._raiseToFront()}},lower:{enabled:function(){return e._canLower()},exec:function(){return e._lower()}},lowerToBack:{enabled:function(){return e._canLower()},exec:function(){return e._lowerToBack()}},rotateClockwise:{enabled:function(){return e._canRotate()},exec:function(){return e._rotate(90)}},rotateCounterclockwise:{enabled:function(){return e._canRotate()},exec:function(){return e._rotate(-90)}},flipX:{enabled:function(){return e._canFlip()},exec:function(){return e._flip("x")}},flipY:{enabled:function(){return e._canFlip()},exec:function(){return e._flip("y")}},moveOneUnitLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"left")}},moveOneUnitRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"right")}},moveOneUnitUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"up")}},moveOneUnitDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"down")}},moveTenUnitsLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"left")}},moveTenUnitsRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"right")}},moveTenUnitsUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"up")}},moveTenUnitsDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"down")}},objectToPath:{enabled:function(){return e._canConvertObjectToPath()},exec:function(){return e._convertObjectToPath()}},strokeToPath:{enabled:function(){return e._canConvertStrokeToPath()},exec:function(){return e._convertStrokeToPath()}},openPath:{enabled:function(){return e._canOpenPath()},exec:function(){return e._openPath()}},closePath:{enabled:function(){return e._canClosePath()},exec:function(){return e._closePath()}},reversePath:{enabled:function(){return e._canReversePath()},exec:function(){return e._reversePath()}},unite:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("unite")}},subtract:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("subtract")}},intersect:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("intersect")}},exclude:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("exclude")}},join:{enabled:function(){return e._canJoin()},exec:function(){return e._join()}},split:{enabled:function(){return e._canSplit()},exec:function(){return e._split()}},export:{enabled:function(){return!0},exec:function(){return e._togglePanel("export-panel")}},grabPaintColor:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._grabPaintColor()}}},e._currentToolID=null,e._previousToolID=null,e._firstTimeConnected=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML2;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#tools-dock"].addEventListener("toggle",function(){return e._update()}),e["#panels-dock"].addEventListener("toggle",function(){return e._update()}),e.canvas.undoManager.addEventListener("positionchange",function(t){return e._onUndoManagerPositionChange(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest4(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this.tabIndex=0,!1===this._firstTimeConnected&&(this._firstTimeConnected=!0,this._update())}},{key:"_onKeyDown",value:function(e){var t=_Shortcut.fromEvent(e);0<this.canvas.selectedElements.length&&!1===this._ownerApp.textInputMode&&(t.matches("Backspace")?this._delete():t.matches("ArrowDown")?this._move(1,"down"):t.matches("ArrowUp")?this._move(1,"up"):t.matches("ArrowLeft")?this._move(1,"left"):t.matches("ArrowRight")?this._move(1,"right"):t.matches("Shift","ArrowDown")?this._move(10,"down"):t.matches("Shift","ArrowUp")?this._move(10,"up"):t.matches("Shift","ArrowLeft")?this._move(10,"left"):t.matches("Shift","ArrowRight")&&this._move(10,"right"))}},{key:"_onUndoManagerPositionChange",value:function(e){this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:e.detail}))}},{key:"_update",value:function(){var e=this["#tools-dock"].value,t=this["#panels-dock"].value;e!==this._currentToolID&&(this._previousToolID=this._currentToolID,this._currentToolID=e),"transform-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="transform",this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!0,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!0,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):"edit-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!0,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):"text-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="edit-text",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!0,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!0,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):"cubic-bezier-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!0,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):"quad-bezier-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!0,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):"freehand-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!0,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):["rect-tool","ellipse-tool","triangle-tool","star-tool","n-gon-tool","ring-tool"].includes(e)?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].shapeContext.enabled=!0,this["#canvas"].shapeContext.shape=e.substring(0,e.indexOf("-tool")),this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1):"polygon-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!0,this["#canvas"].polylineContext.enabled=!1):"polyline-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!0):(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1),this["#canvas"].viewBoxHud.editable="view-panel"===t,"edit-tool"===e?(this["#canvas"].rectHud.enabled=!0,this["#canvas"].circleHud.enabled=!0,this["#canvas"].ellipseHud.enabled=!0,this["#canvas"].triangleHud.enabled=!0,this["#canvas"].nGonHud.enabled=!0,this["#canvas"].starHud.enabled=!0,this["#canvas"].ringHud.enabled=!0,this["#canvas"].lineHud.enabled=!0,this["#canvas"].polyHud.enabled=!0):(this["#canvas"].rectHud.enabled=!1,this["#canvas"].circleHud.enabled=!1,this["#canvas"].ellipseHud.enabled=!1,this["#canvas"].triangleHud.enabled=!1,this["#canvas"].nGonHud.enabled=!1,this["#canvas"].starHud.enabled=!1,this["#canvas"].ringHud.enabled=!1,this["#canvas"].lineHud.enabled=!1,this["#canvas"].polyHud.enabled=!1),"edit-tool"===e&&"fill-panel"===t?(this["#canvas"].linearGradientHud.context="fill",this["#canvas"].radialGradientHud.context="fill",this["#canvas"].patternHud.context="fill",this["#canvas"].linearGradientHud.enabled=!0,this["#canvas"].radialGradientHud.enabled=!0,this["#canvas"].patternHud.enabled=!0):"edit-tool"===e&&"stroke-panel"===t?(this["#canvas"].linearGradientHud.context="stroke",this["#canvas"].radialGradientHud.context="stroke",this["#canvas"].patternHud.context="stroke",this["#canvas"].linearGradientHud.enabled=!0,this["#canvas"].radialGradientHud.enabled=!0,this["#canvas"].patternHud.enabled=!0):(this["#canvas"].linearGradientHud.enabled=!1,this["#canvas"].radialGradientHud.enabled=!1,this["#canvas"].patternHud.enabled=!1),this._ownerApp.updateMenuItemsCheckedState()}},{key:"toggleTool",value:function(e){this["#tools-dock"].value=e,this._update()}},{key:"_togglePreviousTool",value:function(){this._previousToolID&&this.toggleTool(this._previousToolID)}},{key:"_canTogglePreviousTool",value:function(){return null!==this._previousToolID}},{key:"_togglePanel",value:function(e){this["#panels-dock"].value=this["#panels-dock"].value===e?null:e,this._update()}},{key:"_move",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left";this.canvas.undoManager.checkpoint("Move");var n=!0,a=!1,r;try{for(var o=this.canvas.outermostSelectedElements[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=_getComputedTransform5(s),d=_getTransformToElement(s,this.canvas.currentArtboard),u=d.inverse(),c=new SVGMatrix;"left"===t?c.translateSelf(-e,0):"right"===t?c.translateSelf(e,0):"up"===t?c.translateSelf(0,-e):"down"===t&&c.translateSelf(0,e);var p=SVGMatrix.fromMatrix(l);p.multiplySelf(u),p.multiplySelf(c),p.multiplySelf(d),s.setAttribute("transform",p.toString()),_reduceTransform2(s,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_canMove",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_flip",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"x";this.canvas.undoManager.checkpoint("Flip");var n=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),a=n.map(function(e){return _getClientBBox3(e)}),r=_combineRects3(a),o=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=_getComputedTransform5(u),p=u.getScreenCTM(),h=p.inverse(),m=void 0;if("x"===t){var b=2*(r.x+r.width/2);m=new SVGMatrix([-1,0,0,1,b,0])}else if("y"===t){var e=2*(r.y+r.height/2);m=new SVGMatrix([1,0,0,-1,0,e])}var x=SVGMatrix.fromMatrix(c);x.multiplySelf(h),x.multiplySelf(m),x.multiplySelf(p),u.setAttribute("transform",x.toString()),_reduceTransform2(u,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}},{key:"_canFlip",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_rotate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:90;this.canvas.undoManager.checkpoint("Rotate");var t=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),n=_getComputedTransformOriginClientPoint(t),a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_getComputedTransform5(l),u=l.getScreenCTM(),c=u.inverse(),p=SVGMatrix.fromMatrix(d);p.multiplySelf(c),p.rotateSelf(e,n.x,n.y),p.multiplySelf(u),l.setAttribute("transform",p.toString()),_reduceTransform2(l,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"_canRotate",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_raise",value:function(){this.canvas.undoManager.checkpoint("Raise");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames2),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1}),n=t.find(function(t){return _getElementIndex(t)>_getElementIndex(e[e.length-1])});if(n){var a=!0,r=!1,o;try{for(var i=e.reverse()[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,n.after(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},u=_sortByIntersectingElements(o)[Symbol.iterator](),c;!(i=(c=u.next()).done);i=!0)d()}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_raiseToFront",value:function(){this.canvas.undoManager.checkpoint("Raise to Front");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames2),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1}),n=t[t.length-1];if(n){var a=!0,r=!1,o;try{for(var i=e.reverse()[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,n.after(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},u=_sortByIntersectingElements(o)[Symbol.iterator](),c;!(i=(c=u.next()).done);i=!0)d()}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_canRaise",value:function(){var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames2),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1}),n=t.find(function(t){return _getElementIndex(t)>_getElementIndex(e[e.length-1])});if(n)return{v:!0}},u=_sortByIntersectingElements(o)[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)if(p=d(),"object"===("undefined"==typeof p?"undefined":_typeof(p)))return p.v}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_lower",value:function(){this.canvas.undoManager.checkpoint("Lower");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames2),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1}),n=t.reverse().find(function(t){return _getElementIndex(t)<_getElementIndex(e[0])});if(n){var a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,n.before(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},u=_sortByIntersectingElements(o)[Symbol.iterator](),c;!(i=(c=u.next()).done);i=!0)d()}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_lowerToBack",value:function(){this.canvas.undoManager.checkpoint("Lower to Back");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames2),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1}),n=t[0];if(n){var a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,n.before(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},u=_sortByIntersectingElements(o)[Symbol.iterator](),c;!(i=(c=u.next()).done);i=!0)d()}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_canLower",value:function(){var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=function(){var e=c.value,t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames2),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return!1}),n=t.reverse().find(function(t){return _getElementIndex(t)<_getElementIndex(e[0])});if(n)return{v:!0}},u=_sortByIntersectingElements(o)[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)if(p=d(),"object"===("undefined"==typeof p?"undefined":_typeof(p)))return p.v}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_group",value:function(){this.canvas.undoManager.checkpoint("Group");var e=document.createDocumentFragment(),t=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),n=_createElement12("svg:g");t[0].after(n),t=_sortByDomPosition(t);var a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_getTransformToElement(l,n);l.setAttribute("transform",d.toString()),e.append(l)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}n.append(e);var u=!0,c=!1,p;try{for(var h=n.children[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,_reduceTransform2(b,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}this.canvas.selectedElements=[n]}},{key:"_canGroup",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_ungroup",value:function(){this.canvas.undoManager.checkpoint("Ungroup");var e=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"g"===s.localName){for(var l=s,d=document.createDocumentFragment(),u=[].concat(_toConsumableArray(l.children)),c=0,p;c<u.length;c++)if(p=u[c],"title"===p.localName||"desc"===p.localName)continue;else{if(this.canvas.isSelectableElement(p)){var h=_getTransformToElement(p,l.parentElement);p.setAttribute("transform",h.toString()),_reduceTransform2(p,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision}),t.push(p)}var m=!0,b=!1,x=void 0;try{for(var g=l.attributes[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=y.name,_=y.value;_presentationAttributeNames2.includes(f)&&!1===p.hasAttribute(f)&&p.setAttribute(f,_)}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}var w=!0,k=!1,A=void 0;try{for(var C=l.style[Symbol.iterator](),S;!(w=(S=C.next()).done);w=!0){var f=S.value,_=l.style.getPropertyValue(f);""===p.style.getPropertyValue(f)&&p.style.setProperty(f,_)}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}d.append(p)}l.before(d),l.remove()}else t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this.canvas.selectedElements=[].concat(t)}},{key:"_canUngroup",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_selectAll",value:function(){this._ownerApp.textInputMode?document.execCommand("selectAll"):this.canvas.selectAll()}},{key:"_deselectAll",value:function(){this.canvas.deselectAll()}},{key:"_undo",value:function(){this._ownerApp.textInputMode?document.execCommand("undo"):this.canvas.undoManager.undo()}},{key:"_canUndo",value:function(){return!!this._ownerApp.textInputMode||this.canvas.undoManager.canUndo()&&!1===this._ownerApp.isPointerDown}},{key:"_redo",value:function(){this._ownerApp.textInputMode?document.execCommand("redo"):this.canvas.undoManager.redo()}},{key:"_canRedo",value:function(){return!!this._ownerApp.textInputMode||this.canvas.undoManager.canRedo()&&!1===this._ownerApp.isPointerDown}},{key:"_copy",value:async function(){if(this._ownerApp.textInputMode)document.execCommand("copy");else{this.canvas.removeUnusedDefs();var e=this.canvas.extractArtworkWithSelectedElements(),t=await this._ownerApp.getConfig("bx-preferences:indentation");t=null===t?2:t;var n=_exportArtwork2(e,"html",t),a=_exportArtwork2(e,"xml",t);this._ownerApp.setClipboardData({"text/plain":n,"text/html":n,"image/svg+xml":a})}}},{key:"_paste",value:async function(){if(this._ownerApp.textInputMode)document.execCommand("paste");else{var e=await this._ownerApp.getClipboardData(),t=this.canvas.matches(":hover")?"pointer":"canvasCenter";if(t="pointer",e["text/html"]&&_isArtworkString(e["text/html"])){this.canvas.undoManager.checkpoint("Paste");var n=_importArtwork(e["text/html"]);this.canvas.insertArtwork(n,t)}else if(e["text/plain"]){this.canvas.undoManager.checkpoint("Paste");var a=_importArtwork("<svg><text style=\"font-size: 36; font-family: Roboto; white-space: pre;\">"+e["text/plain"]+"</text></svg>\n          ");this.canvas.insertArtwork(a,t)}else if(e["image/png"]){this.canvas.undoManager.checkpoint("Paste");var r=e["image/png"];this.canvas.insertBitmap(r,t)}}}},{key:"_cut",value:function(){if(this._ownerApp.textInputMode)document.execCommand("cut");else{this.canvas.undoManager.checkpoint("Cut"),this._copy();var e=_sortByDomPosition(this.canvas.outermostSelectedElements);e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_delete",value:function(){if(0<this.canvas.selectedElements.length){this.canvas.undoManager.checkpoint("Delete");var e=_sortByDomPosition(this.canvas.outermostSelectedElements);e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_duplicate",value:function(){this.canvas.undoManager.checkpoint("Duplicate"),this.canvas.removeUnusedDefs(),this.canvas.insertArtwork(this.canvas.extractArtworkWithSelectedElements(),"original"),this.canvas.transformHud.blink()}},{key:"_grabPaintColor",value:async function(){if(!1===this._ownerApp.colorGrabber.isGrabbing){var e=this.canvas,t=[].concat(_toConsumableArray(e.linearGradientHud.selectedStops),_toConsumableArray(e.radialGradientHud.selectedStops)),n=e.selectedTextRange,a=await this._ownerApp.colorGrabber.grabColor(),r=this._ownerApp.modKeys.shift?"stroke":"fill";if(null!==a)if(0<t.length){this.canvas.undoManager.checkpoint("Paint color");var o=!0,i=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,u.style.stopColor=a,_reduceProperty("stop-color",u)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}else{var c=this._getSelectedPaintableElements();if(0<c.length){this.canvas.undoManager.checkpoint("Paint color");var p=c.filter(function(e){return"text"===e.localName}),h=e.selectedTextRange,m=[],b=!0,x=!1,g;try{for(var v=p[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)f=y.value,_spanifyText2(f,h)}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}var _=!0,w=!1,k;try{for(var A=c[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)if(S=C.value,"text"===S.localName&&S.querySelector("tspan")){var E=S.querySelectorAll("tspan"),T=_getTspansIntersectedByRange(h,S),P=0<T.length&&!h.collapsed?T:E;m.push.apply(m,_toConsumableArray(P))}else m.push(S)}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}var L=!0,M=!1,D;try{for(var I=m[Symbol.iterator](),V,N;!(L=(V=I.next()).done);L=!0)N=V.value,N.style[r]=a,_reduceProperty(r,N)}catch(e){M=!0,D=e}finally{try{!L&&I.return&&I.return()}finally{if(M)throw D}}var R=!0,z=!1,G;try{for(var B=p[Symbol.iterator](),O,j;!(R=(O=B.next()).done);R=!0)j=O.value,_reduceText(j,h)}catch(e){z=!0,G=e}finally{try{!R&&B.return&&B.return()}finally{if(z)throw G}}}}}}},{key:"_convertObjectToPath",value:function(){var e=this;return new Promise(async function(){if(!1!==e._canConvertObjectToPath()){e.canvas.undoManager.checkpoint("Convert to path");var t=[],n=e.canvas.geometryPrecision,a=!0,r=!1,o;try{for(var i=e.canvas.selectedElements[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,"rect"===l.localName){var d=_rectToPath(l,n);l.replace(d),t.push(d)}else if("circle"===l.localName){var u=_circleToPath(l,n);l.replace(u),t.push(u)}else if("ellipse"===l.localName){var c=_ellipseToPath(l,n);l.replace(c),t.push(c)}else if("line"===l.localName){var p=_lineToPath(l,n);l.replace(p),t.push(p)}else if("polyline"===l.localName){var h=_polylineToPath(l,n);l.replace(h),t.push(h)}else if("polygon"===l.localName){var m=_polygonToPath(l,n);l.replace(m),t.push(m)}else if("path"===l.localName)l.hasAttribute("data-bx-shape")&&l.removeAttribute("data-bx-shape"),t.push(l);else if("text"===l.localName){var b=e.canvas.fontsManager.canReplaceTextWithPaths(l);if(b){var x=await e.canvas.fontsManager.replaceTextWithPaths(l,e.canvas.geometryPrecision,e.canvas.transformPrecision);t=[].concat(_toConsumableArray(t),_toConsumableArray(x))}else t.push(l)}else t.push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}e.canvas.selectedTextRange=null,e.canvas.selectedElements=t}})}},{key:"_canConvertObjectToPath",value:function(){var e=!1,t=!0,n=!1,a;try{for(var r=this.canvas.selectedElements[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,"rect"===i.localName||"circle"===i.localName||"ellipse"===i.localName||"line"===i.localName||"polyline"===i.localName||"polygon"===i.localName)e=!0;else if("path"===i.localName){if(i.hasAttribute("data-bx-shape"))e=!0;else{e=!1;break}}else if("text"===i.localName&&(e=this.canvas.fontsManager.canReplaceTextWithPaths(i),!1===e))break}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"_convertStrokeToPath",value:function(){console.log("convert stroke to path")}},{key:"_canConvertStrokeToPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)if(o=r.value,"path"===o.localName){var i=getComputedStyle(o).strokeWidth;if(0<parseFloat(i))return!0}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_openPath",value:function(){if(!1!==this._canOpenPath()){this.canvas.undoManager.checkpoint("Open path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape")&&_openPath2(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canOpenPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)if(o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape")&&_canOpenPath2(o))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_closePath",value:function(){if(!1!==this._canClosePath()){this.canvas.undoManager.checkpoint("Close path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape")&&_closePath2(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canClosePath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)if(o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape")&&_canClosePath2(o))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_reversePath",value:function(){if(!1!==this._canReversePath()){this.canvas.undoManager.checkpoint("Reverse path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape")&&_reversePath2(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canReversePath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)if(o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape"))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_join",value:function(){if(!1!==this._canJoin()){this.canvas.undoManager.checkpoint("Join");var e=_toArray(this.canvas.selectedElements),t=e[0],n=e.slice(1),a=[],r=!0,o=!1,i;try{for(var s=this.canvas.selectedElements[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=void 0;"rect"===d.localName?u=_rectToPath(d,this.canvas.geometryPrecision):"circle"===d.localName?u=_circleToPath(d):"ellipse"===d.localName?u=_ellipseToPath(d):"line"===d.localName?u=_lineToPath(d):"polyline"===d.localName?u=_polylineToPath(d):"polygon"===d.localName?u=_polygonToPath(d):"path"===d.localName&&(u=d.cloneNode(),u.removeAttribute("data-bx-shape"));var c=_getTransformToElement(d,t.parentElement).toString();u.setAttribute("transform",c),u.setPathData(u.getPathData({normalize:!0})),_reduceTransform2(u,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision,preserveRotation:!1}),a.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var p=a[0],h=a.slice(1),m=p.getPathData(),b=!0,x=!1,g;try{for(var v=h[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=f.getPathData();m=[].concat(_toConsumableArray(m),_toConsumableArray(_))}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}p.setPathData(m),t.replace(p);var w=!0,k=!1,A;try{for(var C=n[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.remove()}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}this.canvas.selectedElements=[p]}}},{key:"_canJoin",value:function(){if(2>this.canvas.selectedElements.length)return!1;var e=["rect","circle","ellipse","line","polygon","polyline","path"],t=!0,n=!1,a;try{for(var r=this.canvas.selectedElements[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,!1===e.includes(i.localName))return!1}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!0}},{key:"_split",value:function(){if(!1!==this._canSplit()){this.canvas.undoManager.checkpoint("Break Apart");var e=_toArray(this.canvas.selectedElements),t=e[0],n=e.slice(1),a=[],r=!0,o=!1,i;try{for(var s=this.canvas.selectedElements[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"path"===d.localName){var u=d.getPathData({normalize:!0}),c=_getPathDataBySubpath(u);if(1<c.length){var p=_toArray(c),h=p[0],m=p.slice(1),b=d;b.setPathData(h),a.push(b);var x=!0,g=!1,v=void 0;try{for(var y=m[Symbol.iterator](),f;!(x=(f=y.next()).done);x=!0){var _=f.value,w=b.cloneNode();w.setPathData(_),b.after(w),a.push(w);for(var k=["fill","stroke"],A=0;A<k.length;A++){var C=k[A],S=_getPaintServer2(w,C);if(S)if("linearGradient"===S.localName||"radialGradient"===S.localName){var E=S,T=E.cloneNode(!0);T.id=this.canvas.generateUniqueID("gradient"),E.after(T),w.style.setProperty(C,"url(\"#"+T.id+"\")")}else if("pattern"===S.localName){var P=S;if(P.hasAttribute("href")){var L=_getParentPattern2(P),M=P.cloneNode();M.id=this.canvas.generateUniqueID(L.id),P.after(M),w.style.setProperty(C,"url(\"#"+M.id+"\")")}else{var D=_createElement12("svg:pattern");D.id=this.canvas.generateUniqueID(P.id),D.setAttribute("href","#"+P.id),P.after(D),w.style.setProperty(C,"url(\"#"+D.id+"\")")}}}}}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}}else a.push(d)}else a.push(d)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}this.canvas.selectedElements=a}}},{key:"_canSplit",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)if(o=r.value,"path"===o.localName&&!1===o.hasAttribute("data-bx-shape")){var i=_getPathDataBySubpath(o.getPathData(!0));if(1<i.length)return!0}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_performBoolop",value:function(e){if(!1!==this._canPerformBoolop()){this.canvas.undoManager.checkpoint(_capitalize3(e));var t=_toArray(this.canvas.outermostSelectedElements),n=t[0],a=t.slice(1),r=this.canvas,o=r.geometryPrecision,i=r.transformPrecision,s=[],l=!0,d=!1,u;try{for(var c=this.canvas.outermostSelectedElements[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=void 0;"rect"===h.localName?m=_rectToPath(h,this.canvas.geometryPrecision):"circle"===h.localName?m=_circleToPath(h):"ellipse"===h.localName?m=_ellipseToPath(h):"line"===h.localName?m=_lineToPath(h):"polyline"===h.localName?m=_polylineToPath(h):"polygon"===h.localName?m=_polygonToPath(h):"path"===h.localName&&(m=h.cloneNode(),m.hasAttribute("data-bx-shape")&&m.removeAttribute("data-bx-shape"));var b=_getTransformToElement(h,n.parentElement).toString();m.setAttribute("transform",b),m.setPathData(m.getPathData({normalize:!0})),_reduceTransform2(m,{geometryPrecision:o,transformPrecision:i,preserveRotation:!1}),s.push(m)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var x=s[0],g=s.slice(1),v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=x.getPathData(),C=k.getPathData(),S=[];"unite"===e?S=_unite(A,C,o):"subtract"===e?S=_subtract(A,C,o):"intersect"===e?S=_intersect(A,C,o):"exclude"===e&&(S=_exclude(A,C,o)),x.setPathData(S)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}x.hasAttribute("d")?(n.replace(x),x.removeAttribute("data-bx-origin")):n.remove();var E=!0,T=!1,P;try{for(var L=a[Symbol.iterator](),M,D;!(E=(M=L.next()).done);E=!0)D=M.value,D.remove()}catch(e){T=!0,P=e}finally{try{!E&&L.return&&L.return()}finally{if(T)throw P}}this.canvas.selectedElements=x.hasAttribute("d")?[x]:[]}}},{key:"_canPerformBoolop",value:function(){if(2>this.canvas.outermostSelectedElements.length)return!1;var e=["rect","circle","ellipse","line","polygon","polyline","path"],t=!0,n=!1,a;try{for(var r=this.canvas.outermostSelectedElements[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,!1===e.includes(i.localName))return!1}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!0}},{key:"_getSelectedPaintableElements",value:function(){var e=["circle","ellipse","line","path","polygon","polyline","rect","text","use"],t=[];return function n(a){var r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,e.includes(d.localName)?t.push(d):("g"===d.localName||"a"===d.localName)&&n(d.children)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}(this.canvas.outermostSelectedElements),t}},{key:"canvas",get:function(){return this._shadowRoot.querySelector("#canvas")}},{key:"toolsDock",get:function(){return this["#tools-dock"]}},{key:"panelsDock",get:function(){return this["#panels-dock"]}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}]),t}(_CustomElement);customElements.define("bx-editor",BXEditorElement)}}{{var _BoxySVG$classes2=BoxySVG.classes,_DOMUndoManager=_BoxySVG$classes2.DOMUndoManager,_FontsManager2=_BoxySVG$classes2.FontsManager,_SnapManager=_BoxySVG$classes2.SnapManager,_serializeArtwork2=BoxySVG.utils.artworkExport.serializeArtwork,_importArtwork2=BoxySVG.utils.artworkImport.importArtwork,_prepareArtworkForInsertion=BoxySVG.utils.artworkGeneral.prepareArtworkForInsertion,_rasterizeArtwork=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_getClientBBox4=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$parsin2=BoxySVG.utils.parsing,_parseViewBox2=_BoxySVG$utils$parsin2.parseViewBox,_parseAspectRatio=_BoxySVG$utils$parsin2.parseAspectRatio,_BoxySVG$utils$elemen5=BoxySVG.utils.element,_svg2=_BoxySVG$utils$elemen5.svg,_createElement13=_BoxySVG$utils$elemen5.createElement,_sortByDomPosition2=_BoxySVG$utils$elemen5.sortByDomPosition,_closest5=_BoxySVG$utils$elemen5.closest,_extractImageSize=BoxySVG.utils.image.extractImageSize,_normalizeFontWeight2=BoxySVG.utils.fontGeneral.normalizeFontWeight,_normalize4=BoxySVG.utils.math.normalize,_connectNode=BoxySVG.utils.node.connectNode,_BoxySVG$utils$geomet6=BoxySVG.utils.geometry,_roundRect=_BoxySVG$utils$geomet6.roundRect,_combineRects4=_BoxySVG$utils$geomet6.combineRects,_rectContainsRect=_BoxySVG$utils$geomet6.rectContainsRect,_rectIntersectsRect3=_BoxySVG$utils$geomet6.rectIntersectsRect,_transformRect4=_BoxySVG$utils$geomet6.transformRect,_BoxySVG$utils$time=BoxySVG.utils.time,_sleep2=_BoxySVG$utils$time.sleep,_throttle=_BoxySVG$utils$time.throttle,_toCamelCase2=BoxySVG.utils.string.toCamelCase,_BoxySVG$utils$variab6=BoxySVG.utils.variables,_graphicsElementNames3=_BoxySVG$utils$variab6.graphicsElementNames,_hitTestPoints=_BoxySVG$utils$variab6.hitTestPoints,_defaultArtworkSVG=_BoxySVG$utils$variab6.defaultArtworkSVG,_BoxySVG$utils$transf4=BoxySVG.utils.transformGeneral,_getComputedTransform6=_BoxySVG$utils$transf4.getComputedTransform,_getTransformToElement2=_BoxySVG$utils$transf4.getTransformToElement,_getTransformFromPoints4=_BoxySVG$utils$transf4.getTransformFromPoints,defineProperty=Object.defineProperty,freeze=Object.freeze,minZoom=0.1,maxZoom=6e3,zoomSensitivity=450,scrollSensitivity=1.8,maxWheelDelta=20,rulerSize=14,mutationObserverOptions={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1},transformableElementNames=[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]),_shadowHTML3="\n    <style>:host{display:block;width:100%;height:100%;overflow:hidden;outline:0;contain:strict;position:relative}#artboards>[data-bx-artboard]:not(:last-child){display:none!important}</style>\n\n    <svg id=\"svg\" preserveAspectRatio=\"none\">\n      <g id=\"world\" transform=\"translate(0, 0)\">\n        <path id=\"outer-background\" style=\"fill: #ebeced; opacity: 0.96; pointer-events: none;\"></path>\n        <rect id=\"inner-background\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" style=\"fill: white; pointer-events: none;\"/>\n\n        <g id=\"artboards\">\n          <rect id=\"matte\" x=\"-1000000\" y=\"-1000000\" width=\"2000000\" height=\"2000000\" style=\"fill: rgba(0,0,0,0);\"/>\n          <g data-bx-artboard=\"master\"></g>\n        </g>\n\n        <g id=\"huds\">\n          <g is=\"bx-outlinehud\" id=\"outline-hud\"></g>\n          <g is=\"bx-viewboxhud\" id=\"view-box-hud\" enabled></g>\n          <g is=\"bx-manualguideshud\" id=\"manual-guides-hud\"></g>\n          <g is=\"bx-smartguideshud\" id=\"smart-guides-hud\"></g>\n          <g is=\"bx-transformhud\" id=\"transform-hud\"></g>\n          <g is=\"bx-patternhud\" id=\"pattern-hud\"></g>\n          <g is=\"bx-penseghud\" id=\"pen-seg-hud\"></g>\n          <g is=\"bx-penhud\" id=\"pen-hud\"></g>\n          <g is=\"bx-rubberbandhud\" id=\"rubber-band-hud\"></g>\n          <g is=\"bx-texthud\" id=\"text-hud\"></g>\n          <g is=\"bx-recthud\" id=\"rect-hud\"></g>\n          <g is=\"bx-circlehud\" id=\"circle-hud\"></g>\n          <g is=\"bx-ellipsehud\" id=\"ellipse-hud\"></g>\n          <g is=\"bx-trianglehud\" id=\"triangle-hud\"></g>\n          <g is=\"bx-ngonhud\" id=\"n-gon-hud\"></g>\n          <g is=\"bx-starhud\" id=\"star-hud\"></g>\n          <g is=\"bx-ringhud\" id=\"ring-hud\"></g>\n          <g is=\"bx-pathhud\" id=\"path-hud\"></g>\n          <g is=\"bx-linehud\" id=\"line-hud\"></g>\n          <g is=\"bx-polyhud\" id=\"poly-hud\"></g>\n          <g is=\"bx-cubicbezierseghud\" id=\"cubic-bezier-seg-hud\"></g>\n          <g is=\"bx-quadbezierseghud\" id=\"quad-bezier-seg-hud\"></g>\n          <g is=\"bx-polygonseghud\" id=\"polygon-seg-hud\"></g>\n          <g is=\"bx-polylineseghud\" id=\"polyline-seg-hud\"></g>\n          <g is=\"bx-freehandhud\" id=\"freehand-hud\"></g>\n          <g is=\"bx-lineargradienthud\" id=\"linear-gradient-hud\"></g>\n          <g is=\"bx-radialgradienthud\" id=\"radial-gradient-hud\"></g>\n        </g>\n      </g>\n    </svg>\n\n    <bx-rulers id=\"rulers\" disabled></bx-rulers>\n\n    <div id=\"contexts\">\n      <bx-transformselectcontext id=\"transform-select-context\"></bx-transformselectcontext>\n      <bx-directselectcontext id=\"direct-select-context\"></bx-directselectcontext>\n      <bx-textcontext id=\"text-context\"></bx-textcontext>\n      <bx-cubicbeziercontext id=\"cubic-bezier-context\"></bx-cubicbeziercontext>\n      <bx-quadbeziercontext id=\"quad-bezier-context\"></bx-quadbeziercontext>\n      <bx-shapecontext id=\"shape-context\"></bx-shapecontext>\n      <bx-freehandcontext id=\"freehand-context\"></bx-freehandcontext>\n      <bx-polygoncontext id=\"polygon-context\"></bx-polygoncontext>\n      <bx-polylinecontext id=\"polyline-context\"></bx-polygoncontext>\n    </div>\n  ",BXCanvasElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._selectedElements=[],e._selectedGuides=[],e._selectedTextRange=null,e._currentContainer=null,e._geometryPrecision=3,e._transformPrecision=6,e._isPointerOverCanvas=!1,e._connectedCallbacks=[],e._updateDocumentFontsTh200=_throttle(e._updateDocumentFonts,100,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML3;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var l=!0,d=!1,u;try{for(var c=function(){var t=h.value;defineProperty(e,_toCamelCase2(t.id),{get:function(){return t}})},p=e["#huds"].children[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0)c()}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}var m=!0,b=!1,x;try{for(var g=function(){var t=y.value;defineProperty(e,_toCamelCase2(t.id),{get:function(){return t}})},v=e["#contexts"].children[Symbol.iterator](),y;!(m=(y=v.next()).done);m=!0)g()}catch(e){b=!0,x=e}finally{try{!m&&v.return&&v.return()}finally{if(b)throw x}}e["#svg"].pauseAnimations(),e["#svg"].setAttribute("width",screen.width+"px"),e["#svg"].setAttribute("height",screen.height+"px"),e["#svg"].setAttribute("viewBox","0 0 "+screen.width+" "+screen.height),e._undoManager=new _DOMUndoManager(e["#artboards"]),e._snapManager=new _SnapManager(e),e._fontsManager=new _FontsManager2(e["#artboards"]);var f=new MutationObserver(function(t){return e._onArtboardMutation(t)});return f.observe(e["#artboards"],mutationObserverOptions),e.addEventListener("pointerenter",function(){return e._isPointerOverCanvas=!0}),e.addEventListener("pointerleave",function(){return e._isPointerOverCanvas=!1}),e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e._shadowRoot.addEventListener("wheel",function(t){return e._onWheel(t)}),e._undoManager.addEventListener("undo",function(t){return e._onUndoManagerUndoOrRedo(t)}),e._undoManager.addEventListener("redo",function(t){return e._onUndoManagerUndoOrRedo(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerApp=_closest5(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this.tabIndex=0,this.showManualGuides=this._ownerApp.getConfig("bx-canvas:showManualGuides")||!1,this.showSmartGuides=this._ownerApp.getConfig("bx-canvas:showSmartGuides")||!1;var t=!0,n=!1,a;try{for(var r=this._connectedCallbacks[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}if(this._connectedCallbacks=[],this._updateGuidesVisibility(),this._updateDocumentFonts(),_sleep2(1e3).then(function(){return e._updateRulers()}),!this._didSetOptimalZoomAfterFirstTimeConnected){var s=function t(){!1===document.webkitHidden&&e.isConnected&&!e._didSetOptimalZoomAfterFirstTimeConnected&&(document.removeEventListener("visibilitychange",t),l&&l.unobserve(e),e._didSetOptimalZoomAfterFirstTimeConnected=!0,e._zoomOptimal())},l=window.ResizeObserver?new ResizeObserver(s):null;l?l.observe(this):(this._didSetOptimalZoomAfterFirstTimeConnected=!0,_sleep2(200).then(function(){return e._zoomOptimal()}),_sleep2(300).then(function(){return e._zoomOptimal()}),_sleep2(800).then(function(){return e._zoomOptimal()}),_sleep2(1200).then(function(){return e._zoomOptimal()})),document.addEventListener("visibilitychange",s),this._zoomOptimal()}}},{key:"_onPointerDown",value:function(e){var t=this;if(1===e.button){this.setPointerCapture(e.pointerId);var n=e.clientX,a=e.clientY,r,o;this.addEventListener("pointermove",r=function(e){var r=!0,o=!1,i;try{for(var s=e.getCoalescedEvents()[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.clientX-n,c=d.clientY-a;t._scrollBy(u,c),n=d.clientX,a=d.clientY}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}),this.addEventListener("lostpointercapture",o=function(){t.removeEventListener("pointermove",r),t.removeEventListener("lostpointercapture",o)})}}},{key:"_onWheel",value:function(e){e.preventDefault();var t=_normalize4(e.wheelDeltaX,-maxWheelDelta,maxWheelDelta,1),n=_normalize4(e.wheelDeltaY,-maxWheelDelta,maxWheelDelta,1);if((e.metaKey||e.ctrlKey)&&!e.altKey&&!e.shiftKey){var a=new SVGPoint(e.clientX,e.clientY);this._zoomBy(n/zoomSensitivity,a)}else this._scrollBy(t/scrollSensitivity,n/scrollSensitivity)}},{key:"_onArtboardMutation",value:function(e){this.dispatchEvent(new CustomEvent("artboardmutation",{detail:e}));var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,i.target===this["#artboards"])"childList"===i.type&&this._onCurrentArtboardChange();else if(i.target.parentElement===this["#artboards"])"viewBox"===i.attributeName&&this._onViewBoxChange();else if("defs"!==i.target.localName)"style"===i.target.localName?i.target.hasAttribute("data-bx-fonts")&&this._updateDocumentFontsTh200():"#text"===i.target.nodeName&&i.target.parentElement&&i.target.parentElement.hasAttribute("data-bx-fonts")&&this._updateDocumentFontsTh200();else if(0<i.removedNodes.length){var s=!0,l=!1,d=void 0;try{for(var u=i.removedNodes[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,p.hasAttribute&&p.hasAttribute("data-bx-fonts")){this._updateDocumentFontsTh200();break}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}else if(0<i.addedNodes.length){var h=!0,m=!1,b=void 0;try{for(var x=i.addedNodes[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,v.hasAttribute&&v.hasAttribute("data-bx-fonts")){this._updateDocumentFontsTh200();break}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onViewBoxChange",value:function(){this._updateOverlays()}},{key:"_onCurrentArtboardChange",value:function(){this.dispatchEvent(new CustomEvent("currentartboardchange")),this._updateOverlays(),this._zoomOptimal()}},{key:"_onUndoManagerUndoOrRedo",value:function(e){var t=this,n=e.detail,a=n.addedNodes,r=n.removedNodes,o=n.modifiedNodes,i=new Set(this.selectedElements),s=null,l=!0,d=!1,u;try{for(var c=a[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,i.add(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var m=!0,b=!1,x;try{for(var g=o[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,i.add(y)}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}var f=!0,_=!1,w;try{for(var k=r[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,i.delete(C)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}if(i=[].concat(_toConsumableArray(i)).filter(function(e){return t.isSelectableElement(e)}),0<i.length){var S=i[0];S.parentElement!==this.currentArtboard&&(s=S.parentElement)}this.currentContainer=s,this.selectedElements=i}},{key:"setArtwork",value:async function(e){for(var t=[].concat(_toConsumableArray(this["#artboards"].children)),n=0,a;n<t.length;n++)a=t[n],a!==this["#matte"]&&a.remove();var r=_svg2(_templateObject2),o=!0,i=!1,s;try{for(var l=e.attributes[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=u.name,p=u.value;"transform"===c?r.setAttribute("data-bx-transform",p):r.setAttribute(c,p)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}for(;e.firstChild;)r.appendChild(e.firstChild);this["#artboards"].append(r),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,this.undoManager.clear(),this.dispatchEvent(new CustomEvent("artworkchange"))}},{key:"setDefaultArtwork",value:function(){var e=_importArtwork2(_defaultArtworkSVG);this.setArtwork(e)}},{key:"insertBitmap",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pointer",n=await _extractImageSize(e),a=n.width,r=n.height,o=_createElement13("svg:image");o.setAttribute("href",e),o.setAttribute("width",a),o.setAttribute("height",r);var i=this.currentContainer||this.currentArtboard,s=i.getScreenCTM().inverse(),l=this._ownerApp.pointerClientPoint.matrixTransform(s);i.append(o);var d=o.getBBox();o.setAttribute("x",l.x-d.width/2),o.setAttribute("y",l.y-d.height/2),this.selectedElements=[o]}},{key:"insertElementIntoBBox",value:function(e,t){var n=this.currentArtboard,a=this["#world"].getScreenCTM().inverse(),r=_transformRect4(t,a),o=e.getBBox(),i=o.x,s=o.y,l=o.width,d=o.height,u=new SVGPoint(i,s),c=new SVGPoint(i+l,s),p=new SVGPoint(i+l,s+d),h=new SVGPoint(r.x,r.y),m=new SVGPoint(r.x+r.width,r.y),b=new SVGPoint(r.x+r.width,r.y+r.height),x=_getTransformFromPoints4(u,c,p,h,m,b);e.setAttribute("transform",x.toString()),n.append(e)}},{key:"insertArtworkIntoBBox",value:function(e,t){var n=this.currentArtboard,a=this.extractArtwork(),r=this["#world"].getScreenCTM().inverse(),o=_transformRect4(t,r),i=_createElement13("svg:g");_prepareArtworkForInsertion(e,a);{var s=_parseViewBox2(e.getAttribute("viewBox")),l=_parseAspectRatio(e.getAttribute("preserveAspectRatio")||"xMidYMid meet"),d=_slicedToArray(l,2),u=d[0],c=d[1],p=o.width/s.width,h=o.height/s.height;"none"!==u&&"meet"===c?p>h?p=h:h>p&&(h=p):"none"!==u&&"slice"===c&&(p<h?p=h:h<p&&(h=p));var m=o.x-s.x*p,b=o.y-s.y*h;u.includes("xMid")&&(m+=(o.width-s.width*p)/2),u.includes("xMax")&&(m+=o.width-s.width*p),u.includes("YMid")&&(b+=(o.height-s.height*h)/2),u.includes("YMax")&&(b+=o.height-s.height*h);var x=new SVGMatrix;x.translateSelf(m,b),x.scaleNonUniformSelf(p,h),i.setAttribute("transform",x)}for(var g=[].concat(_toConsumableArray(e.children)),v=0,y;v<g.length;v++){if(y=g[v],"defs"===y.localName)for(var f=[].concat(_toConsumableArray(y.children)),_=0,w;_<f.length;_++)if(w=f[_],"style"===w.localName&&w.hasAttribute("data-bx-fonts")){var k=w.getAttribute("data-bx-fonts");!1===this.artboards.querySelector("style[data-bx-fonts=\""+k+"\"]")&&this.defs.append(w)}else this.createDefsIfMissing(),this.defs.append(w);i.append(y)}return n.append(i),i}},{key:"insertArtwork",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"canvasCenter",n=this.currentContainer||this.currentArtboard,a=[],r=this.extractArtwork();_prepareArtworkForInsertion(e,r);for(var o=[].concat(_toConsumableArray(e.children)),i=0,s;i<o.length;i++)if(s=o[i],"defs"===s.localName){for(var l=[].concat(_toConsumableArray(s.children)),d=0,u;d<l.length;d++)if(u=l[d],"style"===u.localName&&u.hasAttribute("data-bx-fonts")){var c=u.getAttribute("data-bx-fonts");null===this.artboards.querySelector("style[data-bx-fonts=\""+c+"\"]")&&this.defs.append(u)}else this.createDefsIfMissing(),this.defs.append(u);}else if(transformableElementNames.includes(s.localName)){var p=_getTransformToElement2(n,this.currentArtboard),h=_getComputedTransform6(s),m=new SVGMatrix;m.multiplySelf(p.inverse()),m.multiplySelf(h),m.isIdentity()?s.removeAttribute("transform"):s.setAttribute("transform",m.toString()),n.append(s),a.push(s)}else n.append(s);if("original"!==t){var b=a.map(function(e){return _getClientBBox4(e)});b=b.filter(function(e){return 0<e.width||0<e.height});var x=_combineRects4(b),g;g="canvasCenter"===t?new SVGPoint(this.clientLeft+this.clientWidth/2,this.clientTop+this.clientHeight/2):"belowOriginal"===t?new SVGPoint(x.x+x.width/2+15,x.y+x.height/2+15):this._ownerApp.pointerClientPoint;var v=g.x-(x.x+x.width/2),y=g.y-(x.y+x.height/2),f=!0,_=!1,w;try{for(var k=a[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.getScreenCTM(),E=S.inverse(),T=_getComputedTransform6(C);T.multiplySelf(E),T.translateSelf(v,y),T.multiplySelf(S),C.setAttribute("transform",T.toString())}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}this.selectedElements=a}},{key:"extractArtwork",value:function(){this.removeUnusedDefs();var e=_createElement13("svg:svg"),t=this.masterArtboard,n=!0,a=!1,r;try{for(var o=t.attributes[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=s.name,d=s.value;if("data-bx-artboard"===l)continue;else"data-bx-transform"===l?e.setAttribute("transform",d):e.setAttribute(l,d)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var u=!0,c=!1,p;try{for(var h=t.childNodes[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,e.append(b.cloneNode(!0))}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}if("symbol"===this.currentArtboard.getAttribute("data-bx-artboard")){var x=this.currentArtboard,g=e.querySelector("symbol#"+x.id),v=!0,y=!1,f;try{for(var _=g.attributes[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,l=k.name,d=k.value;!1===x.hasAttribute(l)&&g.removeAttribute(l)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=!0,C=!1,S;try{for(var E=x.attributes[Symbol.iterator](),T;!(A=(T=E.next()).done);A=!0){var P=T.value,l=P.name,d=P.value;"data-bx-artboard"!==l&&g.setAttribute(l,d)}}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}g.innerHTML=x.innerHTML}if("pattern"===this.currentArtboard.getAttribute("data-bx-artboard")){var L=this.currentArtboard,M=e.querySelector("#"+L.id),D=!0,I=!1,V;try{for(var N=M.attributes[Symbol.iterator](),R;!(D=(R=N.next()).done);D=!0){var z=R.value,l=z.name,d=z.value;!1===L.hasAttribute(l)&&M.removeAttribute(l)}}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}var G=!0,B=!1,O;try{for(var j=L.attributes[Symbol.iterator](),q;!(G=(q=j.next()).done);G=!0){var U=q.value,l=U.name,d=U.value;"data-bx-artboard"!==l&&M.setAttribute(l,d)}}catch(e){B=!0,O=e}finally{try{!G&&j.return&&j.return()}finally{if(B)throw O}}M.innerHTML=L.innerHTML}return e}},{key:"extractArtworkWithSelectedElements",value:function(){var e=this.extractArtworkWithElements(this.outermostSelectedElements);return e}},{key:"extractArtworkWithViewBoxElements",value:function(){var e=[],t=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")),n=this.currentArtboard.getScreenCTM().inverse(),a=!0,r=!1,o;try{for(var i=this.currentArtboard.children[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(l.localName)){var d=_getClientBBox4(l);d=_transformRect4(d,n),_rectIntersectsRect3(t,d)&&e.push(l)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var u=this.extractArtworkWithElements(e);return u.setAttribute("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height),u.setAttribute("width",t.width),u.setAttribute("height",t.height),u}},{key:"extractArtworkWithElements",value:function(e){this.removeUnusedDefs(),e=_sortByDomPosition2(e);var t=this._getIdsReferencedByElementsAndTheirDescendants(e),n=[],a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=this.currentArtboard.querySelector("#"+l);d||this.currentArtboard===this.masterArtboard||(d=this.masterArtboard.querySelector("#"+l)),d&&n.push(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}n=n.filter(function(t){var a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,l.contains(t)||l===t)return!1}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var d=!0,u=!1,c;try{for(var p=n[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)if(m=h.value,m.contains(t)&&m!==t)return!1}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return!0});var u=_createElement13("svg:svg"),c=_createElement13("svg:defs");u.append(c);var p=!0,h=!1,m;try{for(var b=n[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.closest("defs")?c.append(g.cloneNode(!0)):u.append(g.cloneNode(!0))}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}var v=!0,y=!1,f;try{for(var _=e[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=_getTransformToElement2(k,this.currentArtboard),C=k.cloneNode(!0);C.setAttribute("transform",A),u.append(C)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var S=!0,E=!1,T;try{for(var P=this["#artboards"].querySelectorAll("style")[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,c.append(M.cloneNode(!0))}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}{_connectNode(u);var D=new _FontsManager2(u);D.removeUnusedFamilies(),u.remove()}0===c.childElementCount&&c.remove();{var I=e.map(function(e){return _getClientBBox4(e)}),V=_combineRects4(I);V=_transformRect4(V,this.currentArtboard.getScreenCTM().inverse());var N=V.x+" "+V.y+" "+V.width+" "+V.height;u.setAttribute("viewBox",N),u.setAttribute("width",V.width),u.setAttribute("height",V.height)}return u}},{key:"removeUnusedDefs",value:function(){for(var e=document.createNodeIterator(this.artboards,NodeFilter.SHOW_ELEMENT),t=null,n=new Set,a=new Set,r=new Set,o=new Set;t=e.nextNode();){var i=getComputedStyle(t),s=i.fill,l=i.stroke,d=i.filter,u=i.mask,c=i.clipPath;if(s&&s.startsWith("url(")){var p=s.substring(6,s.length-2);n.add(p)}if(l&&l.startsWith("url(")){var h=l.substring(6,l.length-2);n.add(h)}if(d&&d.startsWith("url(")){var m=d.substring(6,d.length-2);a.add(m)}if(c&&c.startsWith("url(")){var b=c.substring(6,u.length-2);r.add(b)}if(u&&u.startsWith("url(")){var x=u.substring(6,u.length-2);o.add(x)}}var g=!0,v=!1,y;try{for(var f=this.artboards.querySelectorAll("linearGradient, radialGradient")[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,!1===n.has(w.id)&&w.remove()}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}var k=!0,A=!1,C;try{for(var S=this.artboards.querySelectorAll("pattern[href]")[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,!1===n.has(T.id)&&T.remove()}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}var P=!0,L=!1,M;try{for(var D=this.artboards.querySelectorAll("filter")[Symbol.iterator](),I,d;!(P=(I=D.next()).done);P=!0)d=I.value,!1===a.has(d.id)&&d.remove()}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}var V=!0,N=!1,R;try{for(var z=this.artboards.querySelectorAll("clipPath, clippath")[Symbol.iterator](),G,c;!(V=(G=z.next()).done);V=!0)c=G.value,!1===r.has(c.id)&&c.remove()}catch(e){N=!0,R=e}finally{try{!V&&z.return&&z.return()}finally{if(N)throw R}}var B=!0,O=!1,j;try{for(var q=this.artboards.querySelectorAll("mask")[Symbol.iterator](),U,u;!(B=(U=q.next()).done);B=!0)u=U.value,!1===o.has(u.id)&&u.remove()}catch(e){O=!0,j=e}finally{try{!B&&q.return&&q.return()}finally{if(O)throw j}}this._fontsManager.removeUnusedFamilies(!0,!1)}},{key:"editSymbol",value:function(e){var t=this.masterArtboard.querySelector("symbol#"+e);if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Symbol"),"pattern"===this.currentArtboard.getAttribute("data-bx-artboard")?this.editPatternEnd(!1):"symbol"===this.currentArtboard.getAttribute("data-bx-artboard")&&this.editSymbolEnd(!1);var n=_svg2(_templateObject3,t.innerHTML),a=!0,r=!1,o;try{for(var i=t.attributes[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;n.setAttribute(d,u)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this["#artboards"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editSymbolEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if("symbol"===this.currentArtboard.getAttribute("data-bx-artboard")){e&&this.undoManager.checkpoint("Edit Symbol");var t=this.currentArtboard,n=this.masterArtboard.querySelector("symbol#"+t.id),a=!0,r=!1,o;try{for(var i=n.attributes[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;!1===t.hasAttribute(d)&&n.removeAttribute(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var c=!0,p=!1,h;try{for(var m=t.attributes[Symbol.iterator](),b;!(c=(b=m.next()).done);c=!0){var x=b.value,d=x.name,u=x.value;"data-bx-artboard"!==d&&n.setAttribute(d,u)}}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editPattern",value:function(e){var t=this.masterArtboard.querySelector("pattern#"+e);if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Pattern"),"pattern"===this.currentArtboard.getAttribute("data-bx-artboard")?this.editPatternEnd(!1):"symbol"===this.currentArtboard.getAttribute("data-bx-artboard")&&this.editSymbolEnd(!1);var n=_svg2(_templateObject4,t.innerHTML),a=!0,r=!1,o;try{for(var i=t.attributes[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;n.setAttribute(d,u)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this["#artboards"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editPatternEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if("pattern"===this.currentArtboard.getAttribute("data-bx-artboard")){e&&this.undoManager.checkpoint("Edit Pattern");var t=this.currentArtboard,n=this.masterArtboard.querySelector("pattern#"+t.id),a=!0,r=!1,o;try{for(var i=n.attributes[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;!1===t.hasAttribute(d)&&n.removeAttribute(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var c=!0,p=!1,h;try{for(var m=t.attributes[Symbol.iterator](),b;!(c=(b=m.next()).done);c=!0){var x=b.value,d=x.name,u=x.value;"data-bx-artboard"!==d&&n.setAttribute(d,u)}}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"zoomIn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._isPointerOverCanvas?this._zoomBy(0.2,this._ownerApp.pointerClientPoint):this._zoomBy(0.2)}},{key:"zoomOut",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._isPointerOverCanvas?this._zoomBy(-0.2,this._ownerApp.pointerClientPoint):this._zoomBy(-0.2)}},{key:"zoomToViewBox",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top-left",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(this.currentArtboard.hasAttribute("viewBox")){var a=_parseViewBox2(this.currentArtboard.getAttribute("viewBox"));this._zoomToArea(a,e,t,n)}}},{key:"zoomToFitAll",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top-left",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=this.currentArtboard.getBBox();this._zoomToArea(a,e,t,n)}},{key:"_zoomToArea",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top-left",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,r=this["#svg"].getScreenCTM(),o=r.inverse(),i=_transformRect4(this.getBoundingClientRect(),o),s=SVGRect.fromRect(e);if(i.x+=n,i.y+=n,i.width-=2*n,i.height-=2*n,this.showManualGuides&&(i.x+=rulerSize,i.y+=rulerSize,i.width-=rulerSize,i.height-=rulerSize),0<s.width&&0<s.height){var l=i.width/s.width,d=i.height/s.height;l>d?l=d:d>l&&(d=l),!1===a&&(1<l||1<d)&&(l=1,d=1);var u=i.x-s.x*l,c=i.y-s.y*d;"center"===t&&(u+=(i.width-s.width*l)/2,c+=(i.height-s.height*d)/2);var p=new SVGMatrix;p.translateSelf(u,c),p.scaleNonUniformSelf(l,d),this["#world"].setAttribute("transform",p),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}}},{key:"_zoomOptimal",value:function(){var e=!1;if(this.currentArtboard.hasAttribute("viewBox")){var t=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")),n=t.x,a=t.y,r=t.width,o=t.height;0!==r&&0!==o&&(e=!0)}e?this.zoomToViewBox("top-left"):this.zoomToFitAll("top-left")}},{key:"_zoomBy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0.3,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null===t){var n=this.getBoundingClientRect();t=new SVGPoint(n.x+n.width/2,n.y+n.height/2)}var a=_getComputedTransform6(this["#world"]),r=this["#svg"].getScreenCTM().inverse(),o=t.matrixTransform(r);if(0<a.a){100*(a.a+e*a.a)<minZoom?e=(minZoom-100*a.a)/(100*a.a):100*(a.a+e*a.a)>maxZoom&&(e=(maxZoom-100*a.a)/(100*a.a));var i=new SVGMatrix;i.scaleSelf(1+e,o.x,o.y),i.multiplySelf(a),this["#world"].setAttribute("transform",i),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}}},{key:"_scrollBy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")||"0 0 0 0"),a=_transformRect4(n,this["#world"].getScreenCTM()),r=SVGRect.fromRect(this.getBoundingClientRect()),o=0!==n.width||0!==n.height;this.showManualGuides&&(r.x+=rulerSize,r.y+=rulerSize,r.width-=rulerSize,r.height-=rulerSize);var i=SVGRect.fromRect(a);i.x+=e,i.y+=t,a=_roundRect(a,0),r=_roundRect(r,0),i=_roundRect(i,0),o&&(_rectContainsRect(r,a)?(i.width<r.width&&(i.x<r.x?i.x=r.x:i.x+i.width>r.x+r.width&&(i.x=r.x+r.width-i.width)),i.height<r.height&&(i.y<r.y?i.y=r.y:i.y+i.height>r.y+r.height&&(i.y=r.y+r.height-i.height))):!1===_rectIntersectsRect3(r,a)&&(i.x+i.width<r.x?i.x=r.x-i.width:i.x>r.x+r.width&&(i.x=r.x+r.width),i.y+i.height<r.y?i.y=r.y-i.height:i.y>r.y+r.height&&(i.y=r.y+r.height)));var s=i.x-a.x,l=i.y-a.y,d=new SVGMatrix;d.translateSelf(s,l),d.multiplySelf(_getComputedTransform6(this["#world"])),this["#world"].setAttribute("transform",d),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}},{key:"_updateOverlays",value:function(){var e=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")||"0 0 0 0"),t=e.x,n=e.y,a=e.width,r=e.height;this["#inner-background"].setAttribute("x",t),this["#inner-background"].setAttribute("y",n),this["#inner-background"].setAttribute("width",a),this["#inner-background"].setAttribute("height",r);var o=1e6;this["#outer-background"].setAttribute("d","\n        M "+-o+", "+-o+"\n        L "+2*o+", "+-o+"\n        L "+2*o+", "+2*o+"\n        L "+-o+", "+2*o+"\n        Z\n        M "+t+", "+n+"\n        L "+t+", "+(n+r)+"\n        L "+(t+a)+", "+(n+r)+"\n        L "+(t+a)+", "+n+"\n        Z\n      ")}},{key:"_updateRulers",value:function(){if(this.showManualGuides){var e=this["#world"].getScreenCTM();if(0!==e.determinant()){var t=_transformRect4(this.getBoundingClientRect(),e.inverse());this["#rulers"].value=[t.x,t.y,this.scale]}}}},{key:"_updateGuidesVisibility",value:function(){!0===this._showManualGuides?(this["#manual-guides-hud"].setAttribute("enabled",""),this["#rulers"].setAttribute("enabled",""),this._updateRulers()):(this["#manual-guides-hud"].removeAttribute("enabled"),this["#rulers"].removeAttribute("enabled")),!0===this._showSmartGuides?this["#smart-guides-hud"].setAttribute("enabled",""):this["#smart-guides-hud"].removeAttribute("enabled")}},{key:"_updateDocumentFonts",value:async function(){document.fonts.clear();var e=!0,t=!1,n;try{for(var a=this._fontsManager.getFonts()[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.load(),document.fonts.add(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"generateUniqueID",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=0,a;n<Infinity;n+=1)if(a=e+"-"+n,!this["#artboards"].querySelector("#"+a)){if(!t)return a;if(!t.querySelector("#"+a))return a}}},{key:"_getIdsReferencedByElementsAndTheirDescendants",value:function(e){e=_sortByDomPosition2(e);var t=new Set,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=!0,d=!1,u=void 0;try{for(var c=this._getIdsReferencedByElementAndItsDescendants(s)[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,t.add(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return[].concat(_toConsumableArray(t))}},{key:"_getIdsReferencedByElementAndItsDescendants",value:function(e){var t=this,n=new Set,a=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"];return function e(r){for(var o=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT),i=null;i=o.nextNode();){var s=getComputedStyle(i),l=!0,d=!1,u=void 0;try{for(var c=a[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=s.getPropertyValue(h);if(m&&m.startsWith("url(\"#")){var b=m.substring(6,m.length-2);if(!1===n.has(b)){n.add(b);var x=t.currentArtboard.querySelector("#"+b);x||t.currentArtboard===t.masterArtboard||(x=t.masterArtboard.querySelector("#"+b)),x&&e(x)}else n.add(b)}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(i.href&&"#"===i.href.baseVal[0]){var g=i.href.baseVal.substring(1,i.href.baseVal.length);if(!1===n.has(g)){n.add(g);var v=t.currentArtboard.querySelector("#"+g);v||t.currentArtboard===t.masterArtboard||(v=t.masterArtboard.querySelector("#"+g)),v&&e(v)}else n.add(g)}}}(e),[].concat(_toConsumableArray(n))}},{key:"getBoundingClientRect",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBoundingClientRect",this).call(this);return e?new SVGRect(n.x+rulerSize,n.y+rulerSize,n.width-rulerSize,n.height-rulerSize):n}},{key:"getHitArtboardElements",value:function(e,t){var n=[],a=!0,r=!1,o;try{for(var i=_hitTestPoints[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=_slicedToArray(s.value,2),d=l[0],u=l[1],c=this._shadowRoot.elementFromPoint(e+d,t+u);if(c){if("tspan"===c.localName||"textPath"===c.localName)c=c.closest("text");else if("a"===c.localName){var p=c.closest("text");p&&(c=p)}!n.includes(c)&&this.currentArtboard.contains(c)&&n.push(c)}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return _sortByDomPosition2(n)}},{key:"selectAll",value:function(){var e=[],t=this.currentContainer||this.currentArtboard,n=!0,a=!1,r;try{for(var o=t.children[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,this.isSelectableElement(s)&&e.push(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this.selectedElements=[].concat(e)}},{key:"deselectAll",value:function(){this.selectedElements=[],this.currentContainer=null,this.selectedTextRange=null}},{key:"captureVisibleCanvasArea",value:function(){var e=this;return new Promise(async function(t){var n=e["#svg"].getBoundingClientRect(),a=_parseViewBox2(e.currentArtboard.getAttribute("viewBox")),r=a.x,o=a.y,i=a.width,s=a.height,l=e["#svg"].cloneNode(),d=e["#world"].cloneNode();l.append(d),d.append(e["#outer-background"].cloneNode(!0)),d.append(e["#inner-background"].cloneNode(!0)),d.append(e.artboards.cloneNode(!0));var u=_createElement13("svg:rect");u.setAttribute("x",r),u.setAttribute("y",o),u.setAttribute("width",i),u.setAttribute("height",s),u.setAttribute("style","\n          fill: none;\n          stroke: #646464;\n          stroke-width: 1;\n          vector-effect: non-scaling-stroke;\n        "),d.appendChild(u),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("width",n.width+"px"),l.setAttribute("height",n.height+"px"),l.style.background="white";var c=_serializeArtwork2(l,"html"),p=await _rasterizeArtwork(c,"png",1,"rgba(0, 0, 0, 0)");t(p)})}},{key:"isSelectableElement",value:function(e){return!1!==transformableElementNames.includes(e.localName)&&e.parentElement!==this["#artboards"]&&!1!==this.currentArtboard.contains(e)&&!e.closest("defs")&&(e.closest("text")&&"text"!==e.localName?!1:!0)}},{key:"isPointOverCanvas",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);return null!==n}},{key:"createDefsIfMissing",value:function(){if(null===this.defs){var e=_createElement13("svg:defs");this.masterArtboard.prepend(e)}}},{key:"whenConnected",get:function(){var e=this;return new Promise(function(t){e.isConnected?t():e._connectedCallbacks.push(t)})}},{key:"defs",get:function(){return this.masterArtboard.querySelector("defs")}},{key:"selectedElements",get:function(){return freeze([].concat(_toConsumableArray(this._selectedElements)))},set:function(e){this._selectedElements=e,this.dispatchEvent(new CustomEvent("selectedelementschange"))}},{key:"selectedGuides",get:function(){return this._selectedGuides},set:function(e){this._selectedGuides=e,this.dispatchEvent(new CustomEvent("selectedguideschange"))}},{key:"selectedTextRange",get:function(){return this._selectedTextRange},set:function(e){this._selectedTextRange=e,this.dispatchEvent(new CustomEvent("selectedtextrangechange"))}},{key:"outermostSelectedElements",get:function(){var e=this.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=!0,d=!0,u=!1,c=void 0;try{for(var p=e[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)if(m=h.value,m!==s&&m.contains(s)){l=!1;break}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}l&&t.push(s)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return freeze(t)}},{key:"currentContainer",get:function(){return this._currentContainer},set:function(e){this._currentContainer=e,this.dispatchEvent(new CustomEvent("currentcontainerchange"))}},{key:"zoom",get:function(){var e=this["#world"].transform.baseVal[0].matrix.a;return 0<e?100*e:minZoom},set:function(e){var t;if(this._isPointerOverCanvas)t=this._ownerApp.pointerClientPoint;else{var n=this.getBoundingClientRect();t=new SVGPoint(n.x+n.width/2,n.y+n.height/2)}var a=_normalize4(e,minZoom,maxZoom)/100,r=this["#svg"].getScreenCTM().inverse(),o=t.matrixTransform(r),i=new SVGMatrix;i.scaleSelf(a/this.scale,o.x,o.y),i.multiplySelf(_getComputedTransform6(this["#world"])),this["#world"].setAttribute("transform",i),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}},{key:"scale",get:function(){return this.zoom/100},set:function(e){this.zoom=100*e}},{key:"geometryPrecision",get:function(){return this._geometryPrecision}},{key:"transformPrecision",get:function(){return this._transformPrecision}},{key:"huds",get:function(){return this["#huds"]}},{key:"rulers",get:function(){return this["#rulers"]}},{key:"artboards",get:function(){return this["#artboards"]}},{key:"masterArtboard",get:function(){return this["#artboards"].children[1]}},{key:"currentArtboard",get:function(){return this["#artboards"].lastElementChild}},{key:"undoManager",get:function(){return this._undoManager}},{key:"snapManager",get:function(){return this._snapManager}},{key:"fontsManager",get:function(){return this._fontsManager}},{key:"showManualGuides",get:function(){return this._showManualGuides},set:function(e){this._showManualGuides=e,this._ownerApp.setConfig("bx-canvas:showManualGuides",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesVisibility()}},{key:"showSmartGuides",get:function(){return this._showSmartGuides},set:function(e){this._showSmartGuides=e,this._ownerApp.setConfig("bx-canvas:showSmartGuides",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesVisibility()}}]),t}(_CustomElement);customElements.define("bx-canvas",BXCanvasElement)}}{{var _shadowHTML4="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:38px;display:flex;box-sizing:border-box}#buttons{position:relative;width:38px;height:100%;margin-top:-1px;display:flex;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#c4c2c4;overflow:auto}#buttons::-webkit-scrollbar{display:none}#spacer{width:100%;height:100%;box-sizing:border-box;border-right:1px solid #adadad}x-popover{--align: right}#transform-tool-popover{margin-top:20px}</style>\n\n    <x-buttons id=\"buttons\" tracking=\"1\">\n      <x-box vertical>\n        <x-button id=\"transform-tool-button\" skin=\"dock\" value=\"transform-tool\" toggled>\n          <x-icon name=\"transform-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"edit-tool-button\" skin=\"dock\" value=\"edit-tool\">\n          <x-icon name=\"edit-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"quad-bezier-tool-button\" skin=\"dock\" value=\"quad-bezier-tool\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"cubic-bezier-tool-button\" skin=\"dock\" value=\"cubic-bezier-tool\">\n          <x-icon name=\"cubic-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"freehand-tool-button\" skin=\"dock\" value=\"freehand-tool\">\n          <x-icon name=\"freehand-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"text-tool-button\" skin=\"dock\" value=\"text-tool\">\n          <x-icon name=\"text-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"rect-tool-button\" skin=\"dock\" value=\"rect-tool\">\n          <x-icon name=\"rect-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ellipse-tool-button\" skin=\"dock\" value=\"ellipse-tool\">\n          <x-icon name=\"ellipse-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"triangle-tool-button\" skin=\"dock\" value=\"triangle-tool\">\n          <x-icon name=\"triangle-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"n-gon-tool-button\" skin=\"dock\" value=\"n-gon-tool\">\n          <x-icon name=\"n-gon-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"star-tool-button\" skin=\"dock\" value=\"star-tool\">\n          <x-icon name=\"star-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ring-tool-button\" skin=\"dock\" value=\"ring-tool\">\n          <x-icon name=\"ring-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"polygon-tool-button\" skin=\"dock\" value=\"polygon-tool\">\n          <x-icon name=\"polygon-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"polyline-tool-button\" skin=\"dock\" value=\"polyline-tool\">\n          <x-icon name=\"polyline-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n\n      <div id=\"spacer\"></div>\n    </x-buttons>\n\n    <div id=\"popovers\">\n      <x-popover id=\"transform-tool-popover\">\n        <bx-transformtoolsettings id=\"transform-tool-settings\"></bx-transformtoolsettings>\n      </x-popover>\n\n      <x-popover id=\"freehand-tool-popover\">\n        <bx-freehandtoolsettings id=\"freehand-tool-settings\"></bx-freehandtoolsettings>\n      </x-popover>\n\n      <x-popover id=\"rect-tool-popover\">\n        <bx-shapetoolsettings id=\"rect-tool-settings\"></bx-shapetoolsettings>\n      </x-popover>\n\n      <x-popover id=\"ellipse-tool-popover\">\n        <bx-shapetoolsettings id=\"ellipse-tool-settings\"></bx-shapetoolsettings>\n      </x-popover>\n\n      <x-popover id=\"triangle-tool-popover\">\n        <bx-shapetoolsettings id=\"triangle-tool-settings\"></bx-shapetoolsettings>\n      </x-popover>\n\n      <x-popover id=\"n-gon-tool-popover\">\n        <bx-shapetoolsettings id=\"n-gon-tool-settings\"></bx-shapetoolsettings>\n      </x-popover>\n\n      <x-popover id=\"star-tool-popover\">\n        <bx-shapetoolsettings id=\"star-tool-settings\"></bx-shapetoolsettings>\n      </x-popover>\n\n      <x-popover id=\"ring-tool-popover\">\n        <bx-shapetoolsettings id=\"ring-tool-settings\"></bx-shapetoolsettings>\n      </x-popover>\n    </div>\n  ",BXToolsDockElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML4;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(t){return e._onButtonsToggle(t)}),e["#buttons"].addEventListener("pointerdown",function(t){return e._onButtonsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"_onButtonsToggle",value:function(){this.value=this["#buttons"].value,this.dispatchEvent(new CustomEvent("toggle"))}},{key:"_onButtonsClick",value:function(e){var t=e.target.closest("x-button");if(t&&t.toggled){var n=t.id.replace("button","popover"),a=this["#popovers"].querySelector("x-popover[id=\""+n+"\"]");a&&(a.opened?(a.close(),t.removeAttribute("expanded")):(a.open(t,3),t.setAttribute("expanded","")))}}},{key:"value",get:function(){return this["#buttons"].value},set:function(e){var t=this["#popovers"].querySelector("x-popover[opened]");if(t){var n=t.id.replace("-popover","-button"),a=this["#buttons"].querySelector("x-button[id=\""+n+"\"]");t.close(),a.removeAttribute("expanded")}this["#buttons"].value=e}}]),t}(_CustomElement);customElements.define("bx-toolsdock",BXToolsDockElement)}}{{var _debounce=BoxySVG.utils.time.debounce,_shadowHTML5="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:38px;position:relative;display:flex;box-sizing:border-box;z-index:1}#buttons{position:relative;width:fit-content;height:100%;margin-top:-1px;display:flex;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#c4c2c4;overflow:auto}#buttons::-webkit-scrollbar{display:none}#spacer{width:100%;height:100%;box-sizing:border-box;border-left:1px solid #adadad}#panels,#panels-background{position:absolute;top:0;height:100%}#panels{transform:translateX(280px);transition:transform .2s cubic-bezier(.4,0,.2,1);visibility:hidden;right:38px;width:280px}#panels[expanded]{transform:translateX(0);visibility:visible}#panels-background{z-index:-1;right:0;width:100%;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-left:1px solid rgba(0,0,0,.1)}#panels-content{overflow:auto;height:100%}#panels-content>[hidden]{display:none}</style>\n\n    <x-buttons id=\"buttons\" tracking=\"0\" vertical>\n      <x-box vertical>\n        <x-button id=\"fill-panel-button\" skin=\"dock\" value=\"fill-panel\">\n          <x-icon name=\"fill-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"stroke-panel-button\" skin=\"dock\" value=\"stroke-panel\">\n          <x-icon name=\"stroke-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"compositing-panel-button\" skin=\"dock\" value=\"compositing-panel\">\n          <x-icon name=\"compositing-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"typography-panel-button\" skin=\"dock\" value=\"typography-panel\">\n          <x-icon name=\"typography-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"view-panel-button\" skin=\"dock\" value=\"view-panel\">\n          <x-icon name=\"view-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"arrangement-panel-button\" skin=\"dock\" value=\"arrangement-panel\">\n          <x-icon name=\"arrangement-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"objects-panel-button\" skin=\"dock\" value=\"objects-panel\">\n          <x-icon name=\"objects-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"defs-panel-button\" skin=\"dock\" value=\"defs-panel\">\n          <x-icon name=\"defs-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"geometry-panel-button\" skin=\"dock\" value=\"geometry-panel\">\n          <x-icon name=\"geometry-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"path-panel-button\" skin=\"dock\" value=\"path-panel\">\n          <x-icon name=\"path-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"export-panel-button\" skin=\"dock\" value=\"export-panel\">\n          <x-icon name=\"export-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n\n      <div id=\"spacer\"></div>\n    </x-buttons>\n\n    <div id=\"panels\" style=\"visibility: hidden;\">\n      <div id=\"panels-background\"></div>\n\n      <div id=\"panels-content\">\n        <bx-fillpanel id=\"fill-panel\"></bx-fillpanel>\n        <bx-strokepanel id=\"stroke-panel\"></bx-strokepanel>\n        <bx-compositingpanel id=\"compositing-panel\"></bx-compositingpanel>\n        <bx-typographypanel id=\"typography-panel\"></bx-typographypanel>\n        <bx-viewpanel id=\"view-panel\"></bx-viewpanel>\n        <bx-arrangementpanel id=\"arrangement-panel\"></bx-arrangementpanel>\n        <bx-objectspanel id=\"objects-panel\"></bx-objectspanel>\n        <bx-defspanel id=\"defs-panel\"></bx-defspanel>\n        <bx-geometrypanel id=\"geometry-panel\"></bx-geometrypanel>\n        <bx-pathpanel id=\"path-panel\"></bx-pathpanel>\n        <bx-exportpanel id=\"export-panel\"></bx-exportpanel>\n      </div>\n    </div>\n  ",BXPanelsDockElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML5;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(t){return e._onButtonsToggle(t)}),e["#panels"].addEventListener("transitionend",function(){return e._onPanelsTransitionEnd(event)}),e._restoreButtonsZIndexDebounced=_debounce(e._restoreButtonsZIndexDebounced,800,e),e}return _inherits(t,e),_createClass(t,[{key:"_restoreButtonsZIndexDebounced",value:function(){this["#buttons"].style.zIndex=null}},{key:"_onButtonsToggle",value:function(){this.value=this["#buttons"].value,this.dispatchEvent(new CustomEvent("toggle"))}},{key:"_onPanelsTransitionEnd",value:function(){if(!1===this["#panels"].hasAttribute("expanded")){this["#panels"].style.visibility="hidden";var e=!0,t=!1,n;try{for(var a=this["#panels-content"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.hidden=!0,o.enabled=!1}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"value",get:function(){return this["#buttons"].value},set:function(e){if(this["#buttons"].value=e,this["#buttons"].style.zIndex="2",this._restoreButtonsZIndexDebounced(),null===e)this["#panels"].removeAttribute("expanded");else{var t=!0,n=!1,a;try{for(var r=this["#panels-content"].children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.hidden=i.id!==e,i.enabled=i.id===e}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#panels"].style.visibility="visible",this["#panels"].setAttribute("expanded","")}}}]),t}(_CustomElement);customElements.define("bx-panelsdock",BXPanelsDockElement)}}{{var _BoxySVG$utils$elemen6=BoxySVG.utils.element,_closest6=_BoxySVG$utils$elemen6.closest,_html2=_BoxySVG$utils$elemen6.html,_svg3=_BoxySVG$utils$elemen6.svg,_getObjectElementDisplayName=_BoxySVG$utils$elemen6.getObjectElementDisplayName,_getObjectElementIconName=_BoxySVG$utils$elemen6.getObjectElementIconName,_debounce2=BoxySVG.utils.time.debounce,$object=Symbol(),_shadowHTML6="\n    <style>:host{display:block;height:21px;contain:style paint layout}#items{width:100%;height:100%;overflow:hidden}#items .item{display:inline-block;box-sizing:border-box;background:#fff;border:1px solid #adadad;height:100%;padding:0 8px;color:#464646}#items .item:not(:first-child){margin-left:-1px}#items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 20%))}#items .item-inner{display:flex;align-items:center;justify-content:center;width:100%;height:100%}#items .item .icon{fill:currentColor}#items .item .label{font-size:11px;margin-left:5px}</style>\n    <div id=\"items\"></div>\n  ",BXBreadcrumbElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._createdIcons=!1,e._update80Db=_debounce2(e._update,80,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML6;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerEditor=_closest6(this,"bx-editor"),this._ownerCanvas=this._ownerEditor.canvas,this._maybeCreateIcons(),this._update(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._update80Db()}),this._ownerCanvas.addEventListener("currentcontainerchange",this._currentContainerChangeListener=function(){e._update80Db()})}},{key:"disconnectedCallback",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("currentcontainerchange",this._currentContainerChangeListener)}},{key:"_onItemsClick",value:function(e){var t=this._ownerEditor.canvas,n=e.target.closest(".item");if(n){var a=n[$object];a===t.currentArtboard?(t.currentContainer=null,t.selectedElements=[]):a===t.masterArtboard?("symbol"===t.currentArtboard.getAttribute("data-bx-artboard")?t.editSymbolEnd():"pattern"===t.currentArtboard.getAttribute("data-bx-artboard")&&t.editPatternEnd(),t.currentContainer=null,t.selectedElements=[]):(t.currentContainer=a.parentElement===t.currentArtboard?null:a.parentElement,t.selectedElements=[a])}}},{key:"_maybeCreateIcons",value:async function(){if(!1===this._createdIcons){this._createdIcons=!0;var e=await fetch("images/icons.svg"),t=await e.text(),n=_svg3(_templateObject5,t),a=document.createDocumentFragment(),r=!0,o=!1,i;try{for(var s=n.querySelectorAll("symbol")[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.id&&(d.id.startsWith("object-")||"arrow"===d.id)&&a.append(d)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.style.display="none",n.innerHTML="",n.append(a),this._shadowRoot.append(n)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=[],n=null;{if(t.push(e.masterArtboard),e.currentArtboard!==e.masterArtboard&&t.push(e.currentArtboard),e.currentContainer){for(var a=[],r=e.currentContainer;r!==e.currentArtboard;r=r.parentElement)a.unshift(r);t=[].concat(_toConsumableArray(t),a)}0<e.selectedElements.length&&t.push(e.selectedElements[0]),0<e.selectedElements.length?n=e.selectedElements[0]:!e.currentContainer&&(n=e.currentArtboard)}{this["#items"].innerHTML="";var o=!0,i=!1,s;try{for(var l=t[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=u.querySelector(":scope > bx-title"),p=c?c.textContent:_getObjectElementDisplayName(u),h=_getObjectElementIconName(u),m=_html2(_templateObject6,h,p);n===u&&m.setAttribute("data-selected",""),m[$object]=u,this["#items"].append(m)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}}},{key:"_maybeCreateIcons",value:async function(){if(!1===this._createdIcons){this._createdIcons=!0;var e=await fetch("images/icons.svg"),t=await e.text(),n=_svg3(_templateObject5,t),a=document.createDocumentFragment(),r=!0,o=!1,i;try{for(var s=n.querySelectorAll("symbol")[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.id&&(d.id.startsWith("object-")||"arrow"===d.id)&&a.append(d)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}n.style.display="none",n.innerHTML="",n.append(a),this._shadowRoot.append(n)}}}]),t}(_CustomElement);customElements.define("bx-breadcrumb",BXBreadcrumbElement)}}{var _createElement14=BoxySVG.utils.element.createElement,_round12=BoxySVG.utils.math.round,_throttle2=BoxySVG.utils.time.throttle,_parseFloat5=Number.parseFloat,_shadowHTML7="\n    <style>:host{display:none;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;contain:strict;--size: 14px}:host([enabled]){display:block}main{position:relative;width:100%;height:100%}#corner-ruler{position:absolute;left:0;top:0;width:var(--size);height:var(--size);border-bottom:1px solid rgba(0,0,0,.3);border-right:1px solid rgba(0,0,0,.3)}#corner-ruler,#horizontal-ruler,#vertical-ruler{pointer-events:all;background:#fff;box-sizing:border-box}#horizontal-ruler{position:absolute;top:0;width:100%;height:var(--size);border-bottom:1px solid rgba(0,0,0,.3)}#vertical-ruler{position:absolute;top:0;width:var(--size);height:100%;border-right:1px solid rgba(0,0,0,.3);writing-mode:vertical-lr}#horizontal-ruler>div,#vertical-ruler>div{position:absolute;color:rgba(0,0,0,.6);font-size:9px;box-sizing:border-box}#horizontal-ruler>div{width:0;height:100%;top:0;left:0;padding:0 0 0 3px;border-left:1px solid rgba(0,0,0,.4)}#vertical-ruler>div{width:100%;height:0;top:0;left:0;padding:3px 0 0;border-top:1px solid rgba(0,0,0,.4)}</style>\n\n    <main id=\"main\">\n      <div id=\"horizontal-ruler\" class=\"ruler\" data-type=\"horizontal\"></div>\n      <div id=\"vertical-ruler\" class=\"ruler\" data-type=\"vertical\"\"></div>\n      <div id=\"corner-ruler\" class=\"ruler\" data-type=\"corner\"></div>\n    </main>\n  ",BXRulersElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle2(e._update,30,e),e._value=[0,0,1],e._intervals=[];for(var n=0.1;1e5>n;n*=10)e._intervals.push(n,2*n,5*n);e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML7;var a=!0,r=!1,o;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,e["#"+l.id]=l}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&!0===this.enabled&&this._update()}},{key:"getRulerTypeFromPoint",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t),a=n?n.closest(".ruler"):null;return a?a.getAttribute("data-type"):null}},{key:"_update",value:function(){var e=_slicedToArray(this._value,3),t=e[0],n=e[1],a=e[2];if(!1!=0<a){for(var r=1,o=0,i;o<this._intervals.length&&(i=this._intervals[o],r=i,!(50/a<=i));o+=1);{for(var s=[],l=this.clientWidth,d=_round12(t,0);d<Infinity;d+=1)if(0==d%r){var u=(d-t)*a;if(u>l)break;else s.push([u,d])}for(;this["#horizontal-ruler"].children.length<s.length;){var c=_createElement14("div");this["#horizontal-ruler"].append(c)}for(var p=0;p<s.length;p+=1){var h=_slicedToArray(s[p],2),m=h[0],b=h[1],x=this["#horizontal-ruler"].children[p];x.style.display=null,x.style.transform="translateX("+m+"px)",x.textContent=b}for(var g=s.length,v;g<this["#horizontal-ruler"].children.length;g+=1)v=this["#horizontal-ruler"].children[g],v.style.display="none"}{for(var f=[],_=this.clientHeight,w=_round12(n,0);w<Infinity;w+=1)if(0==w%r){var k=(w-n)*a;if(k>_)break;else f.push([k,w])}for(;this["#vertical-ruler"].children.length<f.length;){var y=_createElement14("div");this["#vertical-ruler"].append(y)}for(var A=0;A<f.length;A+=1){var C=_slicedToArray(f[A],2),S=C[0],b=C[1],E=this["#vertical-ruler"].children[A];E.style.display=null,E.style.transform="translateY("+S+"px)",E.textContent=b}for(var T=f.length,P;T<this["#vertical-ruler"].children.length;T+=1)P=this["#vertical-ruler"].children[T],P.style.display="none"}}}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.enabled&&this._update()}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-rulers",BXRulersElement)}{{var _Shortcut2=BoxySVG.classes.Shortcut,_getClientBBox5=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen7=BoxySVG.utils.element,_html3=_BoxySVG$utils$elemen7.html,_closest7=_BoxySVG$utils$elemen7.closest,_createElement15=_BoxySVG$utils$elemen7.createElement,_sortByDomPosition3=_BoxySVG$utils$elemen7.sortByDomPosition,_isValidID=_BoxySVG$utils$elemen7.isValidID,_isPointerMoveIntentional=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet7=BoxySVG.utils.geometry,_combineRects5=_BoxySVG$utils$geomet7.combineRects,_transformRect5=_BoxySVG$utils$geomet7.transformRect,_round13=BoxySVG.utils.math.round,_BoxySVG$utils$transf5=BoxySVG.utils.transformGeneral,_getTransformToElement3=_BoxySVG$utils$transf5.getTransformToElement,_getComputedTransform7=_BoxySVG$utils$transf5.getComputedTransform,_reduceTransform3=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time2=BoxySVG.utils.time,_debounce3=_BoxySVG$utils$time2.debounce,_sleep3=_BoxySVG$utils$time2.sleep,$symbol=Symbol(),shadowTemplate=_html3(_templateObject7,window.theme,window.theme),BXSymbolsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce3(e._update,2e3,e),e._lastSelectedItem=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(shadowTemplate.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#new-button"].addEventListener("click",function(t){return e._onNewButtonClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest7(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest7(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=!0===this._ownerApp.getConfig("bx-symbolslist:developerMode"),this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,s.attributeName){if("id"===s.attributeName&&"symbol"===s.target.localName){this._update();break}}else if(s.addedNodes[0]){if("symbol"===s.addedNodes[0].localName||"bx-title"===s.addedNodes[0].localName||"bx-title"===s.target.localName){this._update();break}}else if(!s.removedNodes[0])this._update2000Db();else if("symbol"===s.removedNodes[0].localName||"bx-title"===s.removedNodes[0].localName){this._update();break}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".item");t&&this._onItemClick(e)}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,o=e.target.closest(".item");if(!0===a)o.hasAttribute("data-selected")?o.removeAttribute("data-selected"):(o.setAttribute("data-selected",""),this._lastSelectedItem=o);else if(!0===r){var i=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),s=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]")));if(0<s.length){var l=i.indexOf(o),d=s[s.length-1],u=[];if(this._lastSelectedItem&&(d=i.indexOf(this._lastSelectedItem)),l>d?u=[].concat(_toConsumableArray(i)).slice(d,l+1):l<d&&(u=[].concat(_toConsumableArray(i)).slice(l,d+1).reverse()),u=u.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<u.length){var c=!0,p=!1,h;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.setAttribute("data-selected",""),this._lastSelectedItem=x}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}}}else{var g=!1,v,y,f;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",v=function(n){if(_isPointerMoveIntentional(e,n,3)){if(t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("lostpointercapture",f),!1===o.hasAttribute("data-selected")){var a=!0,r=!1,i;try{for(var s=t["#items"].children[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)d=l.value,d===o?(d.setAttribute("data-selected",""),t._lastSelectedItem=d):d.removeAttribute("data-selected")}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}}t._onItemDragStart(n),g=!0}}),this["#items"].addEventListener("pointerup",y=function(){if(!1==g){var e=!0,n=!1,a;try{for(var r=t["#items"].children[Symbol.iterator](),i,s;!(e=(i=r.next()).done);e=!0)s=i.value,s===o?(s.setAttribute("data-selected",""),t._lastSelectedItem=s):s.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",f=function(){t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("pointerup",y),t["#items"].removeEventListener("lostpointercapture",f)})}}},{key:"_canMoveItems",value:function(e,t,n){if(1===e.length){if(t===e[0])return!1;var a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),r=e[0],o=a.indexOf(t);if("start"===n){var i=a[o-1];if(i===r)return!1}else if("end"===n){var s=a[o+1];if(s===r)return!1}}return!0}},{key:"_onItemDragStart",value:function(e){var t=this,n=this["#items"].querySelectorAll(":scope > .item"),a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=null,o="start",i=this._ownerEditor.canvas,s=this["#main"].getBoundingClientRect(),l=null,d=0,u,c;this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var p=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;d=e,null==l&&(l=setInterval(function(){t["#main"].scrollTop+=d},10))},h=function(){null!==l&&(clearInterval(l),l=null)};this["#items"].addEventListener("pointermove",u=function(e){e.clientX>s.left&&e.clientX<s.right&&(e.clientY<s.top+20?p(-3):e.clientY>s.bottom-20?p(3):h());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(r=n?n.closest(".item"):null,r){var i=r.getBoundingClientRect();if(o=e.clientY<i.y+i.height/2?"start":"end",r.hasAttribute("data-expanded")&&"end"==o&&(r=r.querySelector(".item"),o="start",i=r.getBoundingClientRect()),t._canMoveItems(a,r,o)){var l=r.offsetTop;"end"==o&&(l+=i.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=l+"px"}else r=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",c=function(e){if(t["#items"].removeEventListener("pointermove",u),t["#items"].removeEventListener("lostpointercapture",c),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,h(),i.isPointOverCanvas(e.clientX,e.clientY)){var n=[].concat(_toConsumableArray(a)).map(function(e){return e[$symbol]}),s=!1;if("symbol"===i.currentArtboard.getAttribute("data-bx-artboard")){var l=!0,d=!1,p;try{for(var m=n[Symbol.iterator](),b,x;!(l=(b=m.next()).done);l=!0)if(x=b.value,i.currentArtboard.id===x.id){s=!0;break}}catch(e){d=!0,p=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw p}}}if(!1==s){i.undoManager.checkpoint("Create symbol instance");var g=i.currentContainer||i.currentArtboard,v=[],y=!0,f=!1,_;try{for(var w=n[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=_createElement15("svg:use");C.setAttribute("href","#"+A.id),A.hasAttribute("viewBox")?(C.setAttribute("width",A.viewBox.baseVal.width),C.setAttribute("height",A.viewBox.baseVal.height)):(C.setAttribute("width","100"),C.setAttribute("height","100")),g.append(C);var S=C.getScreenCTM().inverse(),E=_getComputedTransform7(C);E.multiplySelf(S),C.setAttribute("transform",E.toString());var T=_getClientBBox5(C);E.translateSelf(e.clientX-T.width/2,e.clientY-T.height/2),C.setAttribute("transform",E.toString());var P=i.geometryPrecision,L=i.transformPrecision;_reduceTransform3(C,{geometryPrecision:P,transformPrecision:L}),v.push(C)}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}i.selectedElements=v}}else if(r){i.undoManager.checkpoint("Rearrange symbols");var M=document.createDocumentFragment(),D=r[$symbol],I=!0,V=!1,N;try{for(var R=a[Symbol.iterator](),z,G;!(I=(z=R.next()).done);I=!0)G=z.value,M.append(G[$symbol])}catch(e){V=!0,N=e}finally{try{!I&&R.return&&R.return()}finally{if(V)throw N}}"start"==o?D.before(M):D.after(M)}})}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item"),o=e.target.closest(".thumbnail");o?this._ownerEditor.canvas.editSymbol(r[$symbol].id):this._editLabelStart(r)}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut2.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-label-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&this._editLabelStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-label-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var o=this["#items"].querySelector(".item[data-label-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var i=this["#items"].querySelector(".item[data-label-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var s=this["#items"].querySelector(".item[data-label-edited]");s||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var l=this["#items"].querySelector(".item[data-label-edited]");l||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_onDeveloperModeButtonToggle",value:function(){var e=this["#developer-mode-button"].toggled;this._ownerApp.setConfig("bx-symbolslist:developerMode",e),this._updateForDeveloperModeChange(),this.focus()}},{key:"_onNewButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Create symbol"),this.focus();var t=this._ownerEditor.canvas,n=this["#items"].querySelectorAll(":scope > .item[data-selected]"),a=0<n.length?n[n.length-1]:null,r=a?a[$symbol]:null,o=_createElement15("svg:symbol");if(o.setAttribute("id",t.generateUniqueID("symbol")),!1===e.shiftKey)o.setAttribute("viewBox","0 0 100 100");else{var i=_combineRects5(t.selectedElements.map(function(e){return _getClientBBox5(e)}));i=_transformRect5(i,t.currentArtboard.getScreenCTM().inverse());var s=-i.x,l=-i.y,d=_round13(i.width,4),u=_round13(i.height,4),c=!0,p=!1,h;try{for(var m=_sortByDomPosition3(t.selectedElements)[Symbol.iterator](),b;!(c=(b=m.next()).done);c=!0){var x=b.value,g=new SVGMatrix;g.translateSelf(s,l),g.multiplySelf(_getTransformToElement3(x,t.currentArtboard)),x.setAttribute("transform",g),o.append(x)}}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}o.setAttribute("viewBox","0 0 "+d+" "+u),t.selectedElements=[],t.selectedTextRange=null,t.currentContainer=null}{var v=_html3(_templateObject8,o.id);v[$symbol]=o,a?a.after(v):this["#items"].append(v);var y=!0,f=!1,_;try{for(var w=this["#items"].children[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A===v?A.setAttribute("data-selected",""):A.removeAttribute("data-selected")}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}v.scrollIntoViewIfNeeded()}r?r.after(o):(t.createDefsIfMissing(),t.defs.append(o))}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_editLabelStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-label-edited]");if(n){if(n===e)return;this._editLabelEnd()}}var a=this._ownerEditor.canvas,r=e.querySelector(".label"),o=e[$symbol],i=this["#developer-mode-button"].toggled?"Symbol ID":"Symbol title",s=a.currentArtboard.id===o.id?a.currentArtboard:o,l=s.querySelector(":scope > bx-title"),d="";!0===this["#developer-mode-button"].toggled&&o.id?d="#"+o.id:!1===this["#developer-mode-button"].toggled&&l&&(d=l.textContent);var u=_html3(_templateObject9,d,i);r.after(u),u.selectAll(),_sleep3(10).then(function(){return u.querySelector("x-label").hidden=!1}),r.hidden=!0,e.setAttribute("data-label-edited",""),u.addEventListener("input",function(){u.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),u.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editLabelEnd()}),u.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var r=u.value.trim();if(r.startsWith("#")&&(r=r.substring(1)),0===r.length)e=!1,n="Symbol must have ID";else if(e=_isValidID(r),e){var i=null===a.artboards.querySelector("#"+r);!1==i&&o.id!==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editLabelEnd",value:function(){var e=this["#items"].querySelector(".item[data-label-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input"),r=e[$symbol];if(a.remove(),n.hidden=!1,e.removeAttribute("data-label-edited"),!1===a.invalid)if(this["#developer-mode-button"].toggled){var o=r.getAttribute("id").trim(),i=a.value.trim().toLowerCase();if(i.startsWith("#")&&(i=i.substring(1)),o!==i){t.undoManager.checkpoint("Symbol ID");for(var s=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),l=null;l=s.nextNode();)"symbol"===l.localName?l.id===o&&l.setAttribute("id",i):"g"===l.localName&&"symbol"===l.getAttribute("data-bx-artboard")?l.id===o&&l.setAttribute("id",i):"use"===l.localName&&l.href.baseVal==="#"+o&&l.setAttribute("href","#"+i)}}else{var d=t.currentArtboard.id===r.id?t.currentArtboard:r,u=d.querySelector(":scope > bx-title"),c=a.value.trim();if(!u)""!==c&&(t.undoManager.checkpoint("Symbol title"),u=_createElement15("svg:bx-title"),u.textContent=c,d.prepend(u));else{var p=u.textContent;p!==c&&(t.undoManager.checkpoint("Symbol title"),""===c?u.remove():u.textContent=c)}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[0],r=n.indexOf(a),o=n[r-1];if(o)if(o.scrollIntoViewIfNeeded(),e)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else{var i=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c===o?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[t.length-1],r=n.indexOf(a),o=n[r+1];if(o)if(o.scrollIntoViewIfNeeded(),e)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else{var i=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c===o?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_deleteSelectedItems",value:async function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])"))),t=this._ownerEditor.canvas;if(0<e.length){var n=[],a=[],r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d[$symbol],c=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),p=null;for(n.push(u);p=c.nextNode();)"use"===p.localName&&p.href.baseVal==="#"+u.id&&a.push(p)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(0<a.length){var h=1===n.length?"a symbol":n.length+" symbols",m=1===a.length?"1 instance":a.length+" instances",b=await this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+h+" with "+m+"?",detail:"Deleting a symbol also removes all its intances."});if(1===b)return}t.undoManager.checkpoint("Delete symbols"),"symbol"===t.currentArtboard.getAttribute("data-bx-artboard")&&n.find(function(e){return e.id===t.currentArtboard.id})&&t.editSymbolEnd(!1);var x=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),g=e[e.length-1],v=x.indexOf(g),y=x[v+1],f=!0,_=!1,w;try{for(var k=a[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.remove()}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}var S=!0,E=!1,T;try{for(var P=n[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,M.remove()}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}if(0<a.length&&(t.selectedElements=t.selectedElements.filter(function(e){return!a.includes(e)})),y)y.setAttribute("data-selected",""),this._lastSelectedItem=y;else if(0<this["#items"].childElementCount){var D=this["#items"].lastElementChild;D.setAttribute("data-selected",""),this._lastSelectedItem=D}}}},{key:"_update",value:function(){{var e=this._ownerEditor.canvas.extractArtwork();e.style.display="none",this._artwork&&this._artwork.remove(),this._shadowRoot.append(e),this._artwork=e}{var t=this._ownerEditor.canvas.masterArtboard.querySelectorAll("symbol"),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]"))).map(function(e){return e[$symbol]});this["#items"].innerHTML="";var a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_html3(_templateObject10,l.id,l.id);d[$symbol]=l,this._updateItemLabel(d),this._updateItemVisibility(d),this._lastSelectedItem&&this._lastSelectedItem[$symbol]===l&&(this._lastSelectedItem=d),n.includes(l)&&(d.setAttribute("data-selected",""),this._lastSelectedItem=d),this["#items"].append(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this["#placeholder"].hidden=0<this["#items"].children.length}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateItemVisibility(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForDeveloperModeChange",value:function(){this["#filter-input"].value="";var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateItemLabel(o),this._updateItemVisibility(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updatePlaceholderVisibility()}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=e[$symbol],a=!1;if(0===t.length)a=!0;else{var r=e.querySelector(".label").textContent.trim().toLowerCase();a=-1!==r.indexOf(t)}e.hidden=!a}},{key:"_updateItemLabel",value:function(e){var t=e[$symbol],n=e.querySelector(".label");if(this["#developer-mode-button"].toggled)t.hasAttribute("id")?(n.textContent="#"+t.id,n.setAttribute("data-custom","")):(n.textContent="<symbol>",n.removeAttribute("data-custom"));else{var a;a=this._ownerEditor.canvas.currentArtboard.id===t.id?this._ownerEditor.canvas.currentArtboard.querySelector(":scope > bx-title"):t.querySelector(":scope > bx-title"),a?(n.textContent=a.textContent,n.setAttribute("data-custom","")):(n.textContent="Symbol",n.removeAttribute("data-custom"))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-symbolslist",BXSymbolsListElement)}}{{var _Shortcut3=BoxySVG.classes.Shortcut,_getClientBBox6=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen8=BoxySVG.utils.element,_html4=_BoxySVG$utils$elemen8.html,_closest8=_BoxySVG$utils$elemen8.closest,_createElement16=_BoxySVG$utils$elemen8.createElement,_sortByDomPosition4=_BoxySVG$utils$elemen8.sortByDomPosition,_isValidID2=_BoxySVG$utils$elemen8.isValidID,_isPointerMoveIntentional2=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet8=BoxySVG.utils.geometry,_combineRects6=_BoxySVG$utils$geomet8.combineRects,_transformRect6=_BoxySVG$utils$geomet8.transformRect,_round14=BoxySVG.utils.math.round,_getPatternUsers2=BoxySVG.utils.pattern.getPatternUsers,_BoxySVG$utils$transf6=BoxySVG.utils.transformGeneral,_getTransformToElement4=_BoxySVG$utils$transf6.getTransformToElement,_getComputedTransform8=_BoxySVG$utils$transf6.getComputedTransform,_reduceTransform4=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time3=BoxySVG.utils.time,_debounce4=_BoxySVG$utils$time3.debounce,_sleep4=_BoxySVG$utils$time3.sleep,$pattern=Symbol(),_shadowTemplate=_html4(_templateObject11,window.theme,window.theme),BXPatternsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce4(e._update,2e3,e),e._lastSelectedItem=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#new-button"].addEventListener("click",function(t){return e._onNewButtonClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest8(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest8(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=!0===this._ownerApp.getConfig("bx-patternslist:developerMode"),this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,s.attributeName){if("id"===s.attributeName&&"pattern"===s.target.localName){this._update();break}}else if(s.addedNodes[0]){if("pattern"===s.addedNodes[0].localName||"bx-title"===s.addedNodes[0].localName||"bx-title"===s.target.localName){this._update();break}}else if(!s.removedNodes[0])this._update2000Db();else if("pattern"===s.removedNodes[0].localName||"bx-title"===s.removedNodes[0].localName){this._update();break}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".item");t&&this._onItemClick(e)}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,o=e.target.closest(".item");if(!0===a)o.hasAttribute("data-selected")?o.removeAttribute("data-selected"):(o.setAttribute("data-selected",""),this._lastSelectedItem=o);else if(!0===r){var i=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),s=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]")));if(0<s.length){var l=i.indexOf(o),d=s[s.length-1],u=[];if(this._lastSelectedItem&&(d=i.indexOf(this._lastSelectedItem)),l>d?u=[].concat(_toConsumableArray(i)).slice(d,l+1):l<d&&(u=[].concat(_toConsumableArray(i)).slice(l,d+1).reverse()),u=u.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<u.length){var c=!0,p=!1,h;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.setAttribute("data-selected",""),this._lastSelectedItem=x}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}}}else{var g=!1,v,y,f;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",v=function(n){if(_isPointerMoveIntentional2(e,n,3)){if(t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("lostpointercapture",f),!1===o.hasAttribute("data-selected")){var a=!0,r=!1,i;try{for(var s=t["#items"].children[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)d=l.value,d===o?(d.setAttribute("data-selected",""),t._lastSelectedItem=d):d.removeAttribute("data-selected")}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}}t._onItemDragStart(n),g=!0}}),this["#items"].addEventListener("pointerup",y=function(){if(!1==g){var e=!0,n=!1,a;try{for(var r=t["#items"].children[Symbol.iterator](),i,s;!(e=(i=r.next()).done);e=!0)s=i.value,s===o?(s.setAttribute("data-selected",""),t._lastSelectedItem=s):s.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",f=function(){t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("pointerup",y),t["#items"].removeEventListener("lostpointercapture",f)})}}},{key:"_canMoveItems",value:function(e,t,n){if(1===e.length){if(t===e[0])return!1;var a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),r=e[0],o=a.indexOf(t);if("start"===n){var i=a[o-1];if(i===r)return!1}else if("end"===n){var s=a[o+1];if(s===r)return!1}}return!0}},{key:"_onItemDragStart",value:function(e){var t=this,n=this["#items"].querySelectorAll(":scope > .item"),a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=null,o="start",i=this._ownerEditor.canvas,s=this["#main"].getBoundingClientRect(),l=null,d=0,u,c;this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var p=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;d=e,null==l&&(l=setInterval(function(){t["#main"].scrollTop+=d},10))},h=function(){null!==l&&(clearInterval(l),l=null)};this["#items"].addEventListener("pointermove",u=function(e){e.clientX>s.left&&e.clientX<s.right&&(e.clientY<s.top+20?p(-3):e.clientY>s.bottom-20?p(3):h());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(r=n?n.closest(".item"):null,r){var i=r.getBoundingClientRect();if(o=e.clientY<i.y+i.height/2?"start":"end",r.hasAttribute("data-expanded")&&"end"==o&&(r=r.querySelector(".item"),o="start",i=r.getBoundingClientRect()),t._canMoveItems(a,r,o)){var l=r.offsetTop;"end"==o&&(l+=i.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=l+"px"}else r=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",c=function(){if(t["#items"].removeEventListener("pointermove",u),t["#items"].removeEventListener("lostpointercapture",c),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,h(),r){i.undoManager.checkpoint("Rearrange patterns");var e=document.createDocumentFragment(),n=r[$pattern],s=!0,l=!1,d;try{for(var p=a[Symbol.iterator](),m,b;!(s=(m=p.next()).done);s=!0)b=m.value,e.append(b[$pattern])}catch(e){l=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw d}}"start"==o?n.before(e):n.after(e)}})}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item"),o=e.target.closest(".thumbnail");o?this._ownerEditor.canvas.editPattern(r[$pattern].id):this._editLabelStart(r)}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut3.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-label-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&this._editLabelStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-label-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var o=this["#items"].querySelector(".item[data-label-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var i=this["#items"].querySelector(".item[data-label-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var s=this["#items"].querySelector(".item[data-label-edited]");s||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var l=this["#items"].querySelector(".item[data-label-edited]");l||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_onDeveloperModeButtonToggle",value:function(){var e=this["#developer-mode-button"].toggled;this._ownerApp.setConfig("bx-patternslist:developerMode",e),this._updateForDeveloperModeChange(),this.focus()}},{key:"_onNewButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Create pattern"),this.focus();var t=this._ownerEditor.canvas,n=this["#items"].querySelectorAll(":scope > .item[data-selected]"),a=0<n.length?n[n.length-1]:null,r=a?a[$pattern]:null,o=_createElement16("svg:pattern");if(o.setAttribute("id",t.generateUniqueID("pattern")),!1===e.shiftKey)o.setAttribute("viewBox","0 0 100 100"),o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("width","100"),o.setAttribute("height","100");else{var i=_combineRects6(t.selectedElements.map(function(e){return _getClientBBox6(e)}));i=_transformRect6(i,t.currentArtboard.getScreenCTM().inverse());var s=-i.x,l=-i.y,d=_round14(i.width,4),u=_round14(i.height,4),c=!0,p=!1,h;try{for(var m=_sortByDomPosition4(t.selectedElements)[Symbol.iterator](),b;!(c=(b=m.next()).done);c=!0){var x=b.value,g=new SVGMatrix;g.translateSelf(s,l),g.multiplySelf(_getTransformToElement4(x,t.currentArtboard)),x.setAttribute("transform",g),o.append(x)}}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}o.setAttribute("viewBox","0 0 "+d+" "+u),o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("width","100"),o.setAttribute("height","100"),t.selectedElements=[],t.selectedTextRange=null,t.currentContainer=null}{var v=_html4(_templateObject8,o.id);v[$pattern]=o,a?a.after(v):this["#items"].append(v);var y=!0,f=!1,_;try{for(var w=this["#items"].children[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A===v?A.setAttribute("data-selected",""):A.removeAttribute("data-selected")}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}v.scrollIntoViewIfNeeded()}r?r.after(o):(t.createDefsIfMissing(),t.defs.append(o))}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_editLabelStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-label-edited]");if(n){if(n===e)return;this._editLabelEnd()}}var a=this._ownerEditor.canvas,r=e.querySelector(".label"),o=e[$pattern],i=this["#developer-mode-button"].toggled?"Pattern ID":"Pattern title",s=a.currentArtboard.id===o.id?a.currentArtboard:o,l=s.querySelector(":scope > bx-title"),d="";!0===this["#developer-mode-button"].toggled&&o.id?d="#"+o.id:!1===this["#developer-mode-button"].toggled&&l&&(d=l.textContent);var u=_html4(_templateObject9,d,i);r.after(u),u.selectAll(),_sleep4(10).then(function(){return u.querySelector("x-label").hidden=!1}),r.hidden=!0,e.setAttribute("data-label-edited",""),u.addEventListener("input",function(){u.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),u.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editLabelEnd()}),u.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var r=u.value.trim();if(r.startsWith("#")&&(r=r.substring(1)),0===r.length)e=!1,n="Pattern must have ID";else if(e=_isValidID2(r),e){var i=null===a.artboards.querySelector("#"+r);!1==i&&o.id!==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editLabelEnd",value:function(){var e=this["#items"].querySelector(".item[data-label-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input"),r=e[$pattern];if(a.remove(),n.hidden=!1,e.removeAttribute("data-label-edited"),!1===a.invalid)if(this["#developer-mode-button"].toggled){var o=r.getAttribute("id").trim(),i=a.value.trim().toLowerCase();if(i.startsWith("#")&&(i=i.substring(1)),o!==i){t.undoManager.checkpoint("Pattern ID");for(var s=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),l=null;l=s.nextNode();){"pattern"===l.localName?(l.id===o&&l.setAttribute("id",i),l.href.baseVal==="#"+o&&l.setAttribute("href","#"+i)):"g"===l.localName&&"pattern"===l.getAttribute("data-bx-artboard")&&l.id===o&&l.setAttribute("id",i);for(var d=["fill","stroke"],u=0;u<d.length;u++){var c=d[u],p=getComputedStyle(l).getPropertyValue(c);if(p&&p.startsWith("url(")){var h=p.substring(6,p.length-2);h===o&&l.style.setProperty(c,"url(#"+i+")")}}}}}else{var m=t.currentArtboard.id===r.id?t.currentArtboard:r,b=m.querySelector(":scope > bx-title"),x=a.value.trim();if(!b)""!==x&&(t.undoManager.checkpoint("Pattern title"),b=_createElement16("svg:bx-title"),b.textContent=x,m.prepend(b));else{var g=b.textContent;g!==x&&(t.undoManager.checkpoint("Pattern title"),""===x?b.remove():b.textContent=x)}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[0],r=n.indexOf(a),o=n[r-1];if(o)if(o.scrollIntoViewIfNeeded(),e)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else{var i=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c===o?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[t.length-1],r=n.indexOf(a),o=n[r+1];if(o)if(o.scrollIntoViewIfNeeded(),e)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else{var i=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c===o?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_deleteSelectedItems",value:async function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])"))),t=this._ownerEditor.canvas;if(0<e.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=e[e.length-1],r=n.indexOf(a),o=n[r+1],i=e.map(function(e){return e[$pattern]}),s=[],l=[],d=!0,u=!1,c;try{for(var p=i[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,s.push.apply(s,_toConsumableArray(t.artboards.querySelectorAll("pattern[href=\"#"+m.id+"\"]")))}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var b=[].concat(_toConsumableArray(i),s),x=!0,g=!1,v;try{for(var y=b[Symbol.iterator](),f;!(x=(f=y.next()).done);x=!0){var _=f.value,w=!0,k=!1,A=void 0;try{for(var C=_getPatternUsers2(_)[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,!1===l.includes(E)&&l.push(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}if(0<l.length){var T=1===i.length?"a pattern":i.length+" patterns",P=1===l.length?"1 object":l.length+" objects",L=await this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+T+" applied to "+P+"?",detail:"Deleting a pattern also removes it from all objects it was applied to as a fill or stroke."});if(1===L)return}t.undoManager.checkpoint("Delete patterns"),"pattern"===t.currentArtboard.getAttribute("data-bx-artboard")&&i.find(function(e){return e.id===t.currentArtboard.id})&&t.editPatternEnd(!1);var M=!0,D=!1,I;try{for(var V=b[Symbol.iterator](),N,R;!(M=(N=V.next()).done);M=!0)R=N.value,R.remove()}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}var z=!0,G=!1,B;try{for(var O=l[Symbol.iterator](),j;!(z=(j=O.next()).done);z=!0){var q=j.value,U=getComputedStyle(q),H=U.fill,F=U.stroke,$=!0,Y=!1,X=void 0;try{for(var W=b[Symbol.iterator](),K,Z;!($=(K=W.next()).done);$=!0)Z=K.value,H==="url(\"#"+Z.id+"\")"?(q.style.fill=null,q.removeAttribute("fill")):F==="url(\"#"+Z.id+"\")"&&(q.style.stroke=null,q.removeAttribute("stroke"))}catch(e){Y=!0,X=e}finally{try{!$&&W.return&&W.return()}finally{if(Y)throw X}}}}catch(e){G=!0,B=e}finally{try{!z&&O.return&&O.return()}finally{if(G)throw B}}if(o)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else if(0<this["#items"].childElementCount){var J=this["#items"].lastElementChild;J.setAttribute("data-selected",""),this._lastSelectedItem=J}}}},{key:"_update",value:function(){{var e=[].concat(_toConsumableArray(this._ownerEditor.canvas.masterArtboard.querySelectorAll("pattern"))),t=e.filter(function(e){return!1===e.hasAttribute("href")}),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]"))).map(function(e){return e[$pattern]});this["#items"].innerHTML="";var a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_html4(_templateObject12,l.outerHTML,l.id,l.id);d[$pattern]=l,this._updateItemLabel(d),this._updateItemVisibility(d),this._lastSelectedItem&&this._lastSelectedItem[$pattern]===l&&(this._lastSelectedItem=d),n.includes(l)&&(d.setAttribute("data-selected",""),this._lastSelectedItem=d),this["#items"].append(d)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this["#placeholder"].hidden=0<this["#items"].children.length}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateItemVisibility(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForDeveloperModeChange",value:function(){this["#filter-input"].value="";var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateItemLabel(o),this._updateItemVisibility(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updatePlaceholderVisibility()}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=e[$pattern],a=!1;if(0===t.length)a=!0;else{var r=e.querySelector(".label").textContent.trim().toLowerCase();a=-1!==r.indexOf(t)}e.hidden=!a}},{key:"_updateItemLabel",value:function(e){var t=e[$pattern],n=e.querySelector(".label");if(this["#developer-mode-button"].toggled)t.hasAttribute("id")?(n.textContent="#"+t.id,n.setAttribute("data-custom","")):(n.textContent="<pattern>",n.removeAttribute("data-custom"));else{var a;a=this._ownerEditor.canvas.currentArtboard.id===t.id?this._ownerEditor.canvas.currentArtboard.querySelector(":scope > bx-title"):t.querySelector(":scope > bx-title"),a?(n.textContent=a.textContent,n.setAttribute("data-custom","")):(n.textContent="Pattern",n.removeAttribute("data-custom"))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-patternslist",BXPatternsListElement)}}{{var _Shortcut4=BoxySVG.classes.Shortcut,_BoxySVG$utils$elemen9=BoxySVG.utils.element,_html5=_BoxySVG$utils$elemen9.html,_closest9=_BoxySVG$utils$elemen9.closest,_createElement17=_BoxySVG$utils$elemen9.createElement,_sortByDomPosition5=_BoxySVG$utils$elemen9.sortByDomPosition,_isPointerMoveIntentional3=BoxySVG.utils.event.isPointerMoveIntentional,_getFontDisplayName=BoxySVG.utils.fontGeneral.getFontDisplayName,_getOpenTypeFont3=BoxySVG.utils.fontOpentype.getOpenTypeFont,_BoxySVG$utils$geomet9=BoxySVG.utils.geometry,_combineRects7=_BoxySVG$utils$geomet9.combineRects,_transformRect7=_BoxySVG$utils$geomet9.transformRect,_round15=BoxySVG.utils.math.round,_BoxySVG$utils$string2=BoxySVG.utils.string,_capitalize4=_BoxySVG$utils$string2.capitalize,_replaceAll4=_BoxySVG$utils$string2.replaceAll,_BoxySVG$utils$transf7=BoxySVG.utils.transformGeneral,_getTransformToElement5=_BoxySVG$utils$transf7.getTransformToElement,_getComputedTransform9=_BoxySVG$utils$transf7.getComputedTransform,_reduceTransform5=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time4=BoxySVG.utils.time,_debounce5=_BoxySVG$utils$time4.debounce,_sleep5=_BoxySVG$utils$time4.sleep,_keys2=Object.keys,$font=Symbol(),$fonts=Symbol(),_shadowTemplate2=_html5(_templateObject13,window.theme,window.theme),BXFontsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce5(e._update,2e3,e),e._lastSelectedItem=null,e._isDraggingItems=!1,e._isAnimatingItem=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate2.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e["#add-from-disk-menu-item"].addEventListener("click",function(t){e._onAddFromDiskMenuItemClick(t)}),e["#add-from-google-fonts-menu-item"].addEventListener("click",function(t){e._onAddFromGoogleFontsMenuItemClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest9(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest9(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,s.target.hasAttribute&&s.target.hasAttribute("data-bx-fonts")||s.target.parentElement&&s.target.parentElement.hasAttribute("data-bx-fonts")?this._update():this._update2000Db()}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){e.target.closest(".arrow-button")?this._onArrowButtonClick(e):e.target.closest(".item")&&this._onItemClick(e)}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift,r=e.target.closest(".item");r.matches(".family-item")&&!1===n&&!1===a&&2===e.detail&&this._editFamilyNameStart(r)}},{key:"_onArrowButtonClick",value:function(e){var t=e.target.closest(".item");t.matches(".family-item")&&(t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t))}},{key:"_onItemPointerDown",value:function(e){var t=this;if(!e.target.closest(".arrow-button")){var n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,o=e.target.closest(".item");if(!1===a&&!1===r){var i=!1,s,l,d;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",s=function(n){if(_isPointerMoveIntentional3(e,n,3)){if(t["#items"].removeEventListener("pointermove",s),t["#items"].removeEventListener("lostpointercapture",d),!1===o.hasAttribute("data-selected")){var a=!0,r=!1,l;try{for(var u=t["#items"].querySelectorAll(".item")[Symbol.iterator](),c,p;!(a=(c=u.next()).done);a=!0)p=c.value,p===o?(p.setAttribute("data-selected",""),t._lastSelectedItem=p):p.removeAttribute("data-selected")}catch(e){r=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw l}}}t._onItemDragStart(n),i=!0}}),this["#items"].addEventListener("pointerup",l=function(){if(!1==i){var e=!0,n=!1,a;try{for(var r=t["#items"].querySelectorAll(".item")[Symbol.iterator](),s,l;!(e=(s=r.next()).done);e=!0)l=s.value,l===o?(l.setAttribute("data-selected",""),t._lastSelectedItem=l):l.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",d=function(){t["#items"].removeEventListener("pointermove",s),t["#items"].removeEventListener("pointerup",l),t["#items"].removeEventListener("lostpointercapture",d)})}else if(!0===a)o.hasAttribute("data-selected")?o.removeAttribute("data-selected"):(o.setAttribute("data-selected",""),this._lastSelectedItem=o);else if(!0===r){var u=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item")));u=u.filter(function(e){return!e.matches("[hidden], [hidden] > *")});var c=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]")));if(c=c.filter(function(e){return!e.matches("[hidden], [hidden] > *")}),0<c.length){var p=u.indexOf(o),h=c[c.length-1],m=[];if(this._lastSelectedItem&&(h=u.indexOf(this._lastSelectedItem)),p>h?m=[].concat(_toConsumableArray(u)).slice(h,p+1):p<h&&(m=[].concat(_toConsumableArray(u)).slice(p,h+1).reverse()),m=m.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<m.length){var b=!0,x=!1,g;try{for(var v=m[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)f=y.value,f.setAttribute("data-selected",""),this._lastSelectedItem=f}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}}}}},{key:"_onItemDragStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=this._getVisibleItems(),r=a.filter(function(e){return e.hasAttribute("data-selected")}),o=r.filter(function(e){return e.matches(".family-item")}),i=r.filter(function(e){return e.matches(".font-item")});if(!(0<o.length&&0<i.length)){var s=null,l="start",d=this["#main"].getBoundingClientRect(),u=null,c=0,p,h;this._isDraggingItems=!0,this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var m=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;c=e,null==u&&(u=setInterval(function(){t["#main"].scrollTop+=c},10))},b=function(){null!==u&&(clearInterval(u),u=null)};this["#items"].addEventListener("pointermove",p=function(e){e.clientX>d.left&&e.clientX<d.right&&(e.clientY<d.top+20?m(-3):e.clientY>d.bottom-20?m(3):b());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(s=n?n.closest(".item"):null,s){var a=s.getBoundingClientRect();if(l=e.clientY<a.y+a.height/2?"start":"end",s.hasAttribute("data-expanded")&&"end"==l&&(s=s.querySelector(".item"),l="start",a=s.getBoundingClientRect()),t._canMoveItems(r,s,l)){var o=s.offsetTop;if(s.matches(".font-item")){var i=s.closest(".family-item");o+=i.offsetTop}"end"==l&&(o+=a.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=o+"px",t["#drop-marker"].style.marginLeft=(s.matches(".font-item")?34:18)+"px"}else s=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",h=function(e){if(t["#items"].removeEventListener("pointermove",p),t["#items"].removeEventListener("lostpointercapture",h),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,b(),n.isPointOverCanvas(e.clientX,e.clientY)){n.undoManager.checkpoint("Text");var a=r[0].querySelector(".label"),d=n.currentContainer||n.currentArtboard,u=d.getScreenCTM().inverse(),c=new SVGPoint(e.clientX,e.clientY),m=c.matrixTransform(u),g=_round15(m.x,n.geometryPrecision),x=_round15(m.y,n.geometryPrecision),v=getComputedStyle(a),y=v.fontFamily,f=v.fontSize,_=v.fontStyle,w=v.fontWeight;f=parseFloat(f)/n.scale+"px";var k=_createElement17("svg:text");k.style.fontFamily=y,k.style.fontSize=f,k.style.fontStyle=_,k.style.fontWeight=w,k.setAttribute("x",g),k.setAttribute("y",x),k.textContent=a.textContent,d.append(k),n.selectedElements=[k];var A=k.getBBox();k.setAttribute("x",g-A.width/2),k.setAttribute("y",x+A.height/3)}else if(s)if(0<o.length){if("start"==l){var C=!0,S=!1,E;try{for(var T=r[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,s.before(L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}else{var M=!0,D=!1,I;try{for(var V=r[Symbol.iterator](),N,R;!(M=(N=V.next()).done);M=!0)R=N.value,s.after(R)}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}}{var z=[].concat(_toConsumableArray(t["#items"].querySelectorAll(".family-item"))),G=z.map(function(e){return e.getAttribute("data-family")});n.fontsManager.reorderFamilies(G)}}else if(0<i);t._isDraggingItems=!1})}}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_onAddFromDiskMenuItemClick",value:async function(){await _sleep5(500);var e=await this._ownerApp.showLocalFontsImportDialog(),t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l="url("+s.data+")",d={},u=await _getOpenTypeFont3(s.data);if(u){var c=u.names.fontFamily.en,p=u.names.fontSubfamily.en.toLowerCase();p=_replaceAll4(p," ",""),p=_replaceAll4(p,"-",""),p=_replaceAll4(p,"_",""),p.includes("italic")?d.style="italic":p.includes("oblique")&&(d.style="oblique"),p.includes("thin")?d.weight="100":p.includes("extralight")?d.weight="200":p.includes("light")?d.weight="300":p.includes("medium")?d.weight="500":p.includes("semibold")?d.weight="600":p.includes("bold")?d.weight="700":p.includes("extrabold")?d.weight="800":p.includes("ultrabold")&&(d.weight="900");var h=new FontFace(c,l,d);h.src=l,t.push(h)}else console.info("Unsupported font format",s.path)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}0<t.length&&(this._ownerEditor.canvas.undoManager.checkpoint("Add fonts"),this._ownerEditor.canvas.fontsManager.addFonts(t))}},{key:"_onAddFromGoogleFontsMenuItemClick",value:async function(){await _sleep5(500);var e=await this._ownerApp.showGoogleFontsImportDialog();if(e){var t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=s.family,d=s.data,u=s.weight,c=s.style,p="url("+s.data+")",h=new FontFace(l,p,{family:l,weight:u,style:c});h.src=p,t.push(h)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}0<t.length&&(this._ownerEditor.canvas.undoManager.checkpoint("Add fonts"),this._ownerEditor.canvas.fontsManager.addFonts(t))}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut4.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-family-name-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&a.matches(".family-item")&&this._editFamilyNameStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-family-name-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var o=this["#items"].querySelector(".item[data-family-name-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var i=this["#items"].querySelector(".item[data-family-name-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("ArrowRight")){var s=this["#items"].querySelector(".item[data-family-name-edited]"),l=this["#items"].querySelectorAll(".item[data-selected]");!s&&1===l.length&&l[0].matches(".family-item")&&(e.preventDefault(),e.stopPropagation(),this._expandItem(l[0]))}else if(t.matches("ArrowLeft")){var d=this["#items"].querySelector(".item[data-family-name-edited]"),u=this["#items"].querySelectorAll(".item[data-selected]");!d&&1===u.length&&u[0].matches(".family-item")&&(e.preventDefault(),e.stopPropagation(),this._collapseItem(u[0]))}else if(t.matches("Shift","ArrowUp")){var c=this["#items"].querySelector(".item[data-family-name-edited]");c||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var p=this["#items"].querySelector(".item[data-family-name-edited]");p||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_expandItem",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(!1===e.hasAttribute("data-expanded")){var n=e.querySelector(".font-items");if(n.hidden=!1,e.setAttribute("data-expanded",""),t){this._isAnimatingItem=!0;var a=getComputedStyle(n).marginTop;"0px"===a&&(a="-"+getComputedStyle(n).height);var r=n.animate({marginTop:[a,"0px"]},{duration:250,easing:"ease"});await r.finished,this._isAnimatingItem=!1}}}},{key:"_collapseItem",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(e.hasAttribute("data-expanded")){var n=e.querySelector(".font-items");if(e.removeAttribute("data-expanded"),t){this._isAnimatingItem=!0;var a=getComputedStyle(n).marginTop,r="-"+getComputedStyle(n).height,o=n.animate({marginTop:[a,r]},{duration:250,easing:"ease"});await o.finished,this._isAnimatingItem=!1}!1===e.hasAttribute("data-expanded")&&(n.hidden=!0)}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._getVisibleItems(),n=t.filter(function(e){return e.hasAttribute("data-selected")});if(0<n.length){var a=n[n.length-1],r=t.indexOf(a),o=t[r+1];if(o){if(o.scrollIntoViewIfNeeded(),e)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else{var i=!0,s=!1,l;try{for(var d=t[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c===o?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}else if(!1===e&&r===t.length-1&&1<n.length){var p=!0,h=!1,m;try{for(var b=t[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g===a?(g.setAttribute("data-selected",""),this._lastSelectedItem=g):g.removeAttribute("data-selected")}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._getVisibleItems(),n=t.filter(function(e){return e.hasAttribute("data-selected")});if(0<n.length){var a=n[0],r=t.indexOf(a),o=t[r-1];if(o){if(o.scrollIntoViewIfNeeded(),e)o.setAttribute("data-selected",""),this._lastSelectedItem=o;else{var i=!0,s=!1,l;try{for(var d=t[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c===o?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}else if(!1===e&&0===r&&1<n.length){var p=!0,h=!1,m;try{for(var b=t[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g===a?(g.setAttribute("data-selected",""),this._lastSelectedItem=g):g.removeAttribute("data-selected")}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}}}}},{key:"_deleteSelectedItems",value:async function(){var e=this._ownerEditor.canvas,t=this._getVisibleItems(),n=t.filter(function(e){return e.matches(".family-item[data-selected]")}),a=t.filter(function(e){return e.matches(".font-item[data-selected]")}),r=n.map(function(e){return e.getAttribute("data-family")}),o=a.map(function(e){return e[$font]});if(o=o.filter(function(e){return!1===r.includes(e.family)}),0<r.length||0<o.length){var i=[];if(0<i.length){var s=1===o.length?"a font":o.length+" fonts",l=1===i.length?"1 text":i.length+" texts",d=await this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+s+" applied to "+l+"?",detail:"Deleting a font also removes it from all texts it was applied to."});if(1===d)return}e.undoManager.checkpoint("Delete fonts");var u=!0,c=!1,p;try{for(var h=r[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,e.fontsManager.removeFamily(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var x=!0,g=!1,v;try{for(var y=o[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,e.fontsManager.removeFont(_)}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}var w=!0,k=!1,A;try{for(var C=i[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.style.fontFamily=null}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}this._update()}}},{key:"_getVisibleItems",value:function(){var e=this["#items"].querySelectorAll(".item");return e=[].concat(_toConsumableArray(e)).filter(function(e){if(e.matches(".family-item"))return!1===e.hidden;if(e.matches(".font-item")){var t=e.closest(".family-item");return!1===t.hidden&&t.hasAttribute("data-expanded")}}),e}},{key:"_canMoveItems",value:function(e,t,n){var a=e.filter(function(e){return e.matches(".family-item")}),r=e.filter(function(e){return e.matches(".font-item")}),o=this._getVisibleItems();if(0<a.length&&0<r)return!1;if(1===r.length){var i=r[0],s=o.indexOf(t);if(t===i||t.matches(".family-item"))return!1;if(t.closest(".family-item")!==i.closest(".family-item"))return!1;if("start"===n){var l=o[s-1];if(l===i)return!1}else if("end"===n){var d=o[s+1];if(d===i)return!1}}else if(1===a.length){if(t===e[0]||t.matches(".font-item"))return!1;var u=a[0],c=o.indexOf(t);if("start"===n){var p=o[c-1];if(p===u)return!1}else if("end"===n){var h=o[c+1];if(h===u)return!1}}else if(1<a.length&&t.matches(".font-item"))return!1;return!0}},{key:"_editFamilyNameStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-family-name-edited]");if(n){if(n===e)return;this._editFamilyNameEnd()}}var a=e.getAttribute("data-family"),r=this._ownerEditor.canvas,o=e.querySelector(".label"),i=_html5(_templateObject9,a,"Family name");o.after(i),i.selectAll(),_sleep5(10).then(function(){return i.querySelector("x-label").hidden=!1}),o.hidden=!0,e.setAttribute("data-family-name-edited",""),i.addEventListener("input",function(){i.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),i.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editFamilyNameEnd()}),i.validate=function(){var e=0<i.value.length;return{valid:e,hint:"Family must have name"}}}},{key:"_editFamilyNameEnd",value:function(){var e=this["#items"].querySelector(".item[data-family-name-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input");a.remove(),n.hidden=!1,e.removeAttribute("data-family-name-edited"),!1===a.invalid&&t.fontsManager.renameFamily(e.getAttribute("data-family"),a.value.trim())}}},{key:"_update",value:function(){if(this._isDraggingItems||this._isAnimatingItem)return void this._update2000Db();{var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".family-item[data-selected]"))),t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".font-item[data-selected]"))),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".family-item[data-expanded]"))),a=e.map(function(e){return e.getAttribute("data-family")}),r=n.map(function(e){return e.getAttribute("data-family")}),o=t.map(function(e){return e[$font]});this["#items"].innerHTML="";var i=!0,s=!1,l;try{for(var d=this._ownerEditor.canvas.fontsManager.getFamilies()[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p=this._ownerEditor.canvas.fontsManager.getFamilyFonts(c),h=_html5(_templateObject14,c,c,c);a.includes(c)&&h.setAttribute("data-selected",""),r.includes(c)&&(h.setAttribute("data-expanded",""),h.querySelector(".font-items").removeAttribute("hidden")),this._lastSelectedItem&&this._lastSelectedItem.getAttribute("data-family")===c&&(this._lastSelectedItem=h);var m=!0,b=!1,x=void 0;try{for(var g=p[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=_getFontDisplayName(y),_="\n              font-size: 16px;\n              font-family: '"+c+"';\n              font-weight: "+y.weight+";\n              font-style: "+y.style+";\n              font-stetch: "+y.stretch+";\n            ",w=_html5(_templateObject15,_,f),k=!0,A=!1,C=void 0;try{for(var S=o[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)if(T=E.value,y.family===T.family&&y.style===T.style&&y.weight===T.weight&&y.stretch===T.stretch&&y.unicodeRange===T.unicodeRange&&y.variant===T.variant&&y.featureSettings===T.featureSettings){w.setAttribute("data-selected","");break}}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}this._lastSelectedItem&&this._lastSelectedItem[$font]===y&&(this._lastSelectedItem=w),w[$font]=y,h.querySelector(".font-items").append(w)}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}h[$fonts]=p,this["#items"].append(h),this._updateItemVisibility(h)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}this._updatePlaceholderVisibility()}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateItemVisibility(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=!1;if(0===t.length)n=!0;else{var a=e.querySelector(".label").textContent.trim().toLowerCase();n=-1!==a.indexOf(t)}e.hidden=!n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fontslist",BXFontsListElement)}}{{var _BoxySVG$utils$elemen10=BoxySVG.utils.element,_createElement18=_BoxySVG$utils$elemen10.createElement,_closest10=_BoxySVG$utils$elemen10.closest,_html6=_BoxySVG$utils$elemen10.html,_Shortcut5=BoxySVG.classes.Shortcut,_fetchFontData2=BoxySVG.utils.fontGeneral.fetchFontData,_getGoogleFontsRegistry=BoxySVG.utils.fontGoogle.getGoogleFontsRegistry,_shadowTemplate3=_html6(_templateObject16,window.theme,window.theme),BXGoogleFontsImportControls=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._registry=null,e._thumbnails=null,e._thumbnailsReadyCallbacks=null,e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!1}),e._shadowRoot.append(document.importNode(_shadowTemplate3.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e["#add-button"].addEventListener("click",function(){return e._onAddButtonClick()}),e["#cancel-button"].addEventListener("click",function(){return e._onCancelButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest10(this,"bx-editor")}},{key:"_onEnabled",value:function(){!1===this["#main"].isConnected&&this._shadowRoot.append(this["#main"]),this._maybeCreateItems();{var e=this["#items"].querySelector(".item[data-selected]");e&&e.removeAttribute("data-selected"),this["#add-button"].disabled=!0}}},{key:"_onDisabled",value:function(){this["#main"].remove()}},{key:"_onItemsPointerDown",value:function(e){e.target.closest(".item")&&this._onItemPointerDown(e)}},{key:"_onItemPointerDown",value:function(e){var t=e.target.closest(".item"),n=t.getAttribute("data-name");if(n!==this.value){var a=!0,r=!1,o;try{for(var i=this["#items-inner"].children[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.getAttribute("data-name")===n?l.setAttribute("data-selected",""):l.removeAttribute("data-selected")}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this["#add-button"].disabled=!1}}},{key:"_onFilterInputInput",value:function(){var e=this["#filter-input"].value,t=!0,n=!1,a;try{for(var r=this["#items-inner"].children[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=i.getAttribute("data-name");i.hidden=!1===s.toLowerCase().startsWith(e.toLowerCase())}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#placeholder"].hidden=null!==this["#items"].querySelector(".item:not([hidden])")}},{key:"_onAddButtonClick",value:async function(){var e=this["#items"].querySelector(".item[data-selected]"),t=e.getAttribute("data-name"),n=[],a=await _getGoogleFontsRegistry(),r=a.items.find(function(e){return e.family===t}),o=!0,i=!1,s;try{for(var l=Object.entries(r.urls)[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=_slicedToArray(d.value,2),c=u[0],p=u[1],h=await _fetchFontData2(p),m=c.substring(0,3),b=c.includes("italic")?"italic":"normal";n.push({family:t,data:h,weight:m,style:b})}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}this.dispatchEvent(new CustomEvent("add",{detail:n}))}},{key:"_onCancelButtonClick",value:function(){this.dispatchEvent(new CustomEvent("cancel"))}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut5.fromEvent(e);if(t.matches("ArrowLeft")){var n=this["#items"].querySelector(".item[data-selected]:not([hidden])");if(n){var a=n.getBoundingClientRect(),r=this._shadowRoot.elementFromPoint(a.left-10,a.top+5),o=r?r.closest(".item"):null;o&&(e.preventDefault(),e.stopPropagation(),n.removeAttribute("data-selected"),o.setAttribute("data-selected",""),o.scrollIntoViewIfNeeded())}}else if(t.matches("ArrowRight")){var i=this["#items"].querySelector(".item[data-selected]:not([hidden])");if(i){var s=i.getBoundingClientRect(),l=this._shadowRoot.elementFromPoint(s.right+10,s.top+5),d=l?l.closest(".item"):null;d&&(e.preventDefault(),e.stopPropagation(),i.removeAttribute("data-selected"),d.setAttribute("data-selected",""),d.scrollIntoViewIfNeeded())}}else if(t.matches("ArrowDown")){var u=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),c=u.find(function(e){return e.hasAttribute("data-selected")}),p=u[0];if(c){var h=u.indexOf(c),m=u[h+1];if(m){var b=c.getBoundingClientRect(),x=m.getBoundingClientRect();x.left===b.left&&(e.preventDefault(),e.stopPropagation(),c.removeAttribute("data-selected"),m.setAttribute("data-selected",""),m.scrollIntoViewIfNeeded())}}else p&&(e.preventDefault(),e.stopPropagation(),p.setAttribute("data-selected",""),p.scrollIntoViewIfNeeded())}else if(t.matches("ArrowUp")){var g=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),v=g.find(function(e){return e.hasAttribute("data-selected")}),y=g[g.length-1];if(v){var f=g.indexOf(v),_=g[f-1];if(_){var w=v.getBoundingClientRect(),k=_.getBoundingClientRect();k.left===w.left&&(e.preventDefault(),e.stopPropagation(),v.removeAttribute("data-selected"),_.setAttribute("data-selected",""),_.scrollIntoViewIfNeeded())}}else y&&(e.preventDefault(),e.stopPropagation(),y.setAttribute("data-selected",""),y.scrollIntoViewIfNeeded())}}}},{key:"_maybeCreateItems",value:async function(){if(0===this["#items-inner"].childElementCount){var e=document.createDocumentFragment(),t=await this._getFamilies(),n=await this._getThumbnails(),a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=n[l],u=_createElement18("div");u.setAttribute("class","item"),u.setAttribute("data-name",l),e.append(u);var c=_createElement18("img");c.setAttribute("src",d),u.append(c)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this["#items-inner"].innerHTML="",this["#items-inner"].append(e)}}},{key:"_getFamilies",value:async function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"alphabetical";return new Promise(async function(t){var n=await _getGoogleFontsRegistry();if("alphabetical"===e){var a=n.items.map(function(e){return e.family});t(a)}else("popularity"===e||"trending"===e||"date"===e)&&t(n.sortedFamilies[e])})}},{key:"_getThumbnails",value:async function(){var e=this;return new Promise(async function(t){if(e._thumbnails)t(e._thumbnails);else if(e._thumbnailsReadyCallbacks)e._thumbnailsReadyCallbacks.push(t);else{e._thumbnailsReadyCallbacks=[t];var n=await fetch("metadata/google-fonts-thumbnails.json");e._thumbnails=await n.json();var a=!0,r=!1,o;try{for(var i=e._thumbnailsReadyCallbacks[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l(e._thumbnails)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"value",get:function(){var e=this["#items"].querySelector(".item[data-selected]");return e?e.getAttribute("data-name"):null}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-googlefontsimportcontrols",BXGoogleFontsImportControls)}}{{var _getPatternThumbnails=BoxySVG.utils.artworkRasterization.getPatternThumbnails,_getUserBBox5=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$color=BoxySVG.utils.color,_parseColor2=_BoxySVG$utils$color.parseColor,_serializeColor=_BoxySVG$utils$color.serializeColor,_BoxySVG$utils$elemen11=BoxySVG.utils.element,_createElement19=_BoxySVG$utils$elemen11.createElement,_closest11=_BoxySVG$utils$elemen11.closest,_BoxySVG$utils$markup=BoxySVG.utils.markup,_parseHTML=_BoxySVG$utils$markup.parseHTML,_parseSVG=_BoxySVG$utils$markup.parseSVG,_round16=BoxySVG.utils.math.round,_BoxySVG$utils$paint=BoxySVG.utils.paint,_getPaintType=_BoxySVG$utils$paint.getPaintType,_getPaintServer3=_BoxySVG$utils$paint.getPaintServer,_getDefFromURL=_BoxySVG$utils$paint.getDefFromURL,_isMixedPaint=_BoxySVG$utils$paint.isMixedPaint,_BoxySVG$utils$patter3=BoxySVG.utils.pattern,_centerPattern=_BoxySVG$utils$patter3.centerPattern,_comparePatterns2=_BoxySVG$utils$patter3.comparePatterns,_getParentPattern3=_BoxySVG$utils$patter3.getParentPattern,_createDerivedPattern2=_BoxySVG$utils$patter3.createDerivedPattern,_reduceProperty2=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text4=BoxySVG.utils.text,_getRenderedTextNodes3=_BoxySVG$utils$text4.getRenderedTextNodes,_getTspansIntersectedByRange2=_BoxySVG$utils$text4.getTspansIntersectedByRange,_reduceText2=_BoxySVG$utils$text4.reduceText,_spanifyText3=_BoxySVG$utils$text4.spanifyText,_BoxySVG$utils$time5=BoxySVG.utils.time,_debounce6=_BoxySVG$utils$time5.debounce,_throttle3=_BoxySVG$utils$time5.throttle,_paintableElementNames2=BoxySVG.utils.variables.paintableElementNames,stubThumbnail="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",_shadowHTML8="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block}#color-section{margin-top:20px}#color-section h5{margin-top:0}#color-picker-type-buttons{margin-left:auto}#color-section #color-picker{width:100%}#color-section #color-picker-hint{margin:0;font-size:12px;font-weight:500;line-height:1;opacity:.8}#color-section #color-picker-hint:empty{display:none}#color-section #color-picker-hint span,#pattern-section #pattern-select-hint span{text-decoration:underline}#color-section #color-picker-hint span:hover,#pattern-section #pattern-select-hint span:hover{cursor:pointer}#pattern-section,#spread-method-section{margin-top:20px}#pattern-section #pattern-select{flex:1}#pattern-section #pattern-select img{background:#fff}#pattern-section #edit-pattern-button{height:26px;margin:0 0 0 8px}#pattern-section #pattern-select-hint{margin:9px 0 0;font-size:12px;font-weight:500;line-height:1;opacity:.8}</style>\n\n    <h3 id=\"section-heading\">Paint</h3>\n\n    <section id=\"paint-type-section\">\n      <h4 id=\"paint-type-heading\">Type</h4>\n\n      <x-buttons id=\"paint-type-buttons\" tracking=\"1\">\n        <x-button id=\"solid-paint-button\" value=\"solid\" tooltip=\"Solid Color\" skin=\"flat\">\n          <x-icon name=\"paint-solid\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"linear-gradient-paint-button\" value=\"linear-gradient\" tooltip=\"Linear Gradient\" skin=\"flat\">\n          <x-icon name=\"paint-linear-gradient\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"radial-gradient-paint-button\" value=\"radial-gradient\" tooltip=\"Radial Gradient\" skin=\"flat\">\n          <x-icon name=\"paint-radial-gradient\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"pattern-paint-button\" value=\"pattern\" tooltip=\"Pattern\" skin=\"flat\">\n          <x-icon name=\"paint-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"none-paint-button\" value=\"none\" tooltip=\"None\" skin=\"flat\">\n          <x-icon name=\"paint-none\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"inherit-paint-button\" value=\"inherit\" tooltip=\"Inherit\" skin=\"flat\" hidden>\n          <x-icon name=\"paint-inherit\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n    </section>\n\n    <section id=\"color-section\">\n      <x-box>\n        <h4>Color</h4>\n\n        <x-buttons id=\"color-picker-type-buttons\" tracking=\"1\">\n          <x-button value=\"rect\" skin=\"flat-condensed\" toggled>\n            <x-icon name=\"color-picker-rect\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button value=\"wheel\" skin=\"flat-condensed\">\n            <x-icon name=\"color-picker-wheel\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </x-box>\n\n      <bx-colorpicker id=\"color-picker\"></bx-colorpicker>\n      <p id=\"color-picker-hint\"></p>\n    </section>\n\n    <section id=\"spread-method-section\">\n      <h4>Spread</h4>\n\n      <x-buttons id=\"spread-method-buttons\" tracking=\"1\">\n        <x-button id=\"pad-spread-method-button\" value=\"pad\" tooltip=\"Pad spread method\" skin=\"condensed\">\n          <x-label>Pad</x-label>\n        </x-button>\n\n        <x-button id=\"repeat-spread-method-button\" value=\"repeat\" tooltip=\"Repeat spread method\" skin=\"condensed\">\n          <x-label>Repeat</x-label>\n        </x-button>\n\n        <x-button id=\"reflect-spread-method-button\" value=\"reflect\" tooltip=\"Reflect spread method\" skin=\"condensed\">\n          <x-label>Reflect</x-label>\n        </x-button>\n      </x-buttons>\n    </section>\n\n    <section id=\"pattern-section\">\n      <h4>Pattern</h4>\n\n      <x-box>\n        <x-select id=\"pattern-select\">\n          <x-menu id=\"pattern-select-menu\"></x-menu>\n        </x-select>\n\n        <x-button id=\"edit-pattern-button\" tooltip=\"Edit pattern\" skin=\"condensed\">\n          <x-label>Edit</x-label>\n        </x-button>\n      </x-box>\n\n      <div id=\"pattern-select-hint\">Add more patterns in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n    </section>\n\n    <section id=\"paint-order-section\" style=\"margin-top: 20px;\">\n      <h4 id=\"paint-order-heading\">Order</h4>\n      <bx-paintorderswitch id=\"paint-order-switch\" context=\"fill\"></bx-paintorderswitch>\n    </section>\n  ",BXPaintControlsElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._update200Th=_throttle3(n._update,200,n),n._updatePatternThumbnails2000Db=_debounce6(n._updatePatternThumbnails,2e3,n),n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.innerHTML=_shadowHTML8;var e=!0,a=!1,r;try{for(var o=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(e=(i=o.next()).done);e=!0)s=i.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(a)throw r}}return n["#paint-type-buttons"].addEventListener("toggle",function(e){return n._onPaintTypeButtonsToggle(e)}),n["#spread-method-buttons"].addEventListener("toggle",function(e){return n._onSpreadMethodButtonsToggle(e)}),n["#color-picker"].addEventListener("changestart",function(e){return n._onColorPickerColorChangeStart(e)}),n["#color-picker-type-buttons"].addEventListener("toggle",function(t){return n._onColorPickerTypeButtonsToggle(t)}),n["#color-picker-hint"].addEventListener("click",function(e){return n._onColorPickerHintClick(e)}),n["#pattern-select"].addEventListener("change",function(){return n._onPatternSelectChange()}),n["#pattern-select-hint"].addEventListener("click",function(e){return n._onPatternSelectHintClick(e)}),n["#edit-pattern-button"].addEventListener("click",function(e){return n._onEditPatternButtonClick(e)}),n["#paint-order-switch"].addEventListener("change",function(){return n._onPaintOrderSwitchChange()}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest11(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this["#paint-order-switch"].setAttribute("context",this.context))}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._onCurrentArtboardChange(),this._onSelectedElementsChange(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._onCurrentArtboardChange()}),t.linearGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener1=function(){e._onSelectedElementsChange()}),t.radialGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener2=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),e.linearGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener1),e.radialGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener2)}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update()}},{key:"_onCurrentArtboardChange",value:function(){this["#inherit-paint-button"].hidden="symbol"!==this._ownerEditor.canvas.currentArtboard.getAttribute("data-bx-artboard")}},{key:"_onPaintTypeButtonsToggle",value:function(e){var t=e.detail;if(t){var n=t.value,a=t.localName,r=t.toggled,o=t.mixed;"solid"===n?this._onSolidPaintButtonClick():"linear-gradient"===n?this._onLinearGradientPaintButtonClick():"radial-gradient"===n?this._onRadialGradientPaintButtonClick():"pattern"===n?this._onPatternPaintButtonClick():"inherit"===n?this._onInheritPaintButtonClick():"none"===n&&this._onNonePaintButtonClick()}}},{key:"_onSolidPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a="#bada55",r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText3(d,n)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}{var u=e[0];if("text"===u.localName){var c=u.querySelectorAll("tspan"),p=_getTspansIntersectedByRange2(n,u),h=0<p.length?p:c;0<h.length&&(u=h[0])}var m=_getPaintType(u,this.context);if("solid"===m)a=getComputedStyle(u)[this.context];else if("linearGradient"===m||"radialGradient"===m){var b=_getPaintServer3(u,this.context),x=b.querySelector("stop");a=getComputedStyle(x).stopColor}}var g=!0,v=!1,y;try{for(var f=e[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)if(w=_.value,"text"===w.localName&&w.querySelector("tspan")){var k=w.querySelectorAll("tspan"),A=_getTspansIntersectedByRange2(n,w),C=0<A.length&&!n.collapsed?A:k,S=!0,E=!1,T=void 0;try{for(var P=C[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,M.style[this.context]=a}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}else w.style[this.context]=a,_reduceProperty2(this.context,w)}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}var D=!0,I=!1,V;try{for(var N=t[Symbol.iterator](),R,z;!(D=(R=N.next()).done);D=!0)z=R.value,_reduceText2(z,n)}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}}},{key:"_onLinearGradientPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,r=this._ownerEditor.canvas.selectedTextRange,o=null,i=!0,d=!1,u;try{for(var c=t[Symbol.iterator](),p,m;!(i=(p=c.next()).done);i=!0)m=p.value,_spanifyText3(m,r)}catch(e){d=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(d)throw u}}{var b=e[0];if("text"===b.localName){var x=b.querySelectorAll("tspan"),g=_getTspansIntersectedByRange2(r,b),v=0<g.length?g:x;0<v.length&&(b=v[0])}var y=_getPaintType(b,this.context);if("solid"===y){var f=_parseColor2(getComputedStyle(b)[this.context],"hsla"),_=_slicedToArray(f,4),w=_[0],h=_[1],s=_[2],l=_[3],a=0>s-20?0:s-20,k=_serializeColor([w,h,s,l],"hsla","rgba"),A=_serializeColor([w,h,a,l],"hsla","rgba");o=_parseSVG("\n            <linearGradient>\n              <stop offset=\"0\" style=\"stop-color: "+k+"\"></stop>\n              <stop offset=\"1\" style=\"stop-color: "+A+"\"></stop>\n            </linearGradient>\n          ")}else if("linearGradient"===y){var C=getComputedStyle(b)[this.context];o=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,C)}else if("radialGradient"===y){var S=getComputedStyle(b)[this.context],E=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,S);o=_createElement19("svg:linearGradient");var T=!0,P=!1,L;try{for(var M=E.children[Symbol.iterator](),D,I;!(T=(D=M.next()).done);T=!0)I=D.value,"stop"===I.localName&&o.append(I.cloneNode())}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}}else o=_parseSVG("\n            <linearGradient>\n              <stop offset=\"0\" style=\"stop-color: #bada55\"></stop>\n              <stop offset=\"1\" style=\"stop-color: #758d29\"></stop>\n            </linearGradient>\n          ")}var V=!0,N=!1,R;try{for(var z=e[Symbol.iterator](),G,B;!(V=(G=z.next()).done);V=!0)if(B=G.value,"text"===B.localName&&0<B.querySelectorAll("tspan").length){var O=B.querySelectorAll("tspan"),j=_getTspansIntersectedByRange2(r,B),q=0<j.length&&!r.collapsed?j:O;if(_getPaintServer3(q[0],this.context)===o){var U=!0,H=!1,F=void 0;try{for(var $=q[Symbol.iterator](),Y,X;!(U=(Y=$.next()).done);U=!0)X=Y.value,X.style[this.context]="url(#"+o.id+")"}catch(e){H=!0,F=e}finally{try{!U&&$.return&&$.return()}finally{if(H)throw F}}}else{var W=_getUserBBox5(B),K=_round16(W.x+W.width/2,n),Z=_round16(W.y,n),J=_round16(W.x+W.width/2,n),Q=_round16(W.y+W.height,n),ee=_createElement19("svg:linearGradient");ee.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),ee.setAttribute("gradientUnits","userSpaceOnUse"),ee.setAttribute("x1",K),ee.setAttribute("y1",Z),ee.setAttribute("x2",J),ee.setAttribute("y2",Q);var te=!0,ne=!1,ae=void 0;try{for(var re=o.querySelectorAll("stop")[Symbol.iterator](),oe,ie;!(te=(oe=re.next()).done);te=!0)ie=oe.value,ee.append(ie.cloneNode())}catch(e){ne=!0,ae=e}finally{try{!te&&re.return&&re.return()}finally{if(ne)throw ae}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(ee);var se=!0,le=!1,de=void 0;try{for(var ue=q[Symbol.iterator](),ce,pe;!(se=(ce=ue.next()).done);se=!0)pe=ce.value,pe.style[this.context]="url(#"+ee.id+")"}catch(e){le=!0,de=e}finally{try{!se&&ue.return&&ue.return()}finally{if(le)throw de}}}}else if("use"===B.localName){if(_getPaintServer3(B,this.context)!==o){var he=_createElement19("svg:linearGradient");he.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),he.setAttribute("gradientUnits","objectBoundingBox"),he.setAttribute("x1","0.5"),he.setAttribute("y1","0"),he.setAttribute("x2","0.5"),he.setAttribute("y2","1");var me=!0,be=!1,xe=void 0;try{for(var ge=o.querySelectorAll("stop")[Symbol.iterator](),ve,ye;!(me=(ve=ge.next()).done);me=!0)ye=ve.value,he.append(ye.cloneNode())}catch(e){be=!0,xe=e}finally{try{!me&&ge.return&&ge.return()}finally{if(be)throw xe}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(he),B.style[this.context]="url(#"+he.id+")",_reduceProperty2(this.context,B)}}else if(_getPaintServer3(B,this.context)!==o){var fe=_getUserBBox5(B),_e=fe.x+fe.width/2,we=fe.y,ke=fe.x+fe.width/2,Ae=fe.y+fe.height,Ce=_createElement19("svg:linearGradient");Ce.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),Ce.setAttribute("gradientUnits","userSpaceOnUse"),Ce.setAttribute("x1",_round16(_e,n)),Ce.setAttribute("y1",_round16(we,n)),Ce.setAttribute("x2",_round16(ke,n)),Ce.setAttribute("y2",_round16(Ae,n));var Se=!0,Ee=!1,Te=void 0;try{for(var Pe=o.querySelectorAll("stop")[Symbol.iterator](),Le,Me;!(Se=(Le=Pe.next()).done);Se=!0)Me=Le.value,Ce.append(Me.cloneNode())}catch(e){Ee=!0,Te=e}finally{try{!Se&&Pe.return&&Pe.return()}finally{if(Ee)throw Te}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(Ce),B.style[this.context]="url(#"+Ce.id+")",_reduceProperty2(this.context,B)}}catch(e){N=!0,R=e}finally{try{!V&&z.return&&z.return()}finally{if(N)throw R}}var De=!0,Ie=!1,Ve;try{for(var Ne=t[Symbol.iterator](),Re,ze;!(De=(Re=Ne.next()).done);De=!0)ze=Re.value,_reduceText2(ze,r)}catch(e){Ie=!0,Ve=e}finally{try{!De&&Ne.return&&Ne.return()}finally{if(Ie)throw Ve}}}},{key:"_onRadialGradientPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,o=this._ownerEditor.canvas.selectedTextRange,i=null,d=!0,u=!1,c;try{for(var p=t[Symbol.iterator](),m,b;!(d=(m=p.next()).done);d=!0)b=m.value,_spanifyText3(b,o)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}{var x=e[0];if("text"===x.localName){var g=x.querySelectorAll("tspan"),v=_getTspansIntersectedByRange2(o,x),y=0<v.length?v:g;0<y.length&&(x=y[0])}var f=_getPaintType(x,this.context);if("solid"===f){var _=_parseColor2(getComputedStyle(x)[this.context],"hsla"),w=_slicedToArray(_,4),k=w[0],h=w[1],s=w[2],l=w[3],a=0>s-20?0:s-20,A=_serializeColor([k,h,s,l],"hsla","rgba"),C=_serializeColor([k,h,a,l],"hsla","rgba");i=_parseSVG("\n            <radialGradient>\n              <stop offset=\"0\" style=\"stop-color: "+A+"\"></stop>\n              <stop offset=\"1\" style=\"stop-color: "+C+"\"></stop>\n            </radialGradient>\n          ")}else if("radialGradient"===f){var S=getComputedStyle(x)[this.context];i=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,S)}else if("linearGradient"===f){var E=getComputedStyle(x)[this.context],T=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,E);i=_createElement19("svg:radialGradient");var P=!0,L=!1,M;try{for(var D=T.children[Symbol.iterator](),I,V;!(P=(I=D.next()).done);P=!0)V=I.value,"stop"===V.localName&&i.append(V.cloneNode())}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}}else i=_parseSVG("\n            <radialGradient>\n              <stop offset=\"0\" style=\"stop-color: #bada55\"></stop>\n              <stop offset=\"1\" style=\"stop-color: #758d29\"></stop>\n            </radialGradient>\n          ")}var N=!0,R=!1,z;try{for(var G=e[Symbol.iterator](),B,O;!(N=(B=G.next()).done);N=!0)if(O=B.value,"text"===O.localName&&0<O.querySelectorAll("tspan").length){var j=O.querySelectorAll("tspan"),q=_getTspansIntersectedByRange2(o,O),U=0<q.length&&!o.collapsed?q:j;if(_getPaintServer3(U[0],this.context)===i){var H=!0,F=!1,$=void 0;try{for(var Y=U[Symbol.iterator](),X,W;!(H=(X=Y.next()).done);H=!0)W=X.value,W.style[this.context]="url(#"+i.id+")"}catch(e){F=!0,$=e}finally{try{!H&&Y.return&&Y.return()}finally{if(F)throw $}}}else{var K=_getUserBBox5(O),Z=K.x+K.width/2,J=K.y+K.height/2,Q=K.width/2,r=_createElement19("svg:radialGradient");r.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),r.setAttribute("gradientUnits","userSpaceOnUse"),r.setAttribute("cx",_round16(Z,n)),r.setAttribute("cy",_round16(J,n)),r.setAttribute("r",_round16(Q,n));var ee=!0,te=!1,ne=void 0;try{for(var ae=i.querySelectorAll("stop")[Symbol.iterator](),re,oe;!(ee=(re=ae.next()).done);ee=!0)oe=re.value,r.append(oe.cloneNode())}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(r);var ie=!0,se=!1,le=void 0;try{for(var de=U[Symbol.iterator](),ue,ce;!(ie=(ue=de.next()).done);ie=!0)ce=ue.value,ce.style[this.context]="url(#"+r.id+")"}catch(e){se=!0,le=e}finally{try{!ie&&de.return&&de.return()}finally{if(se)throw le}}}}else if("use"===O.localName){if(_getPaintServer3(O,this.context)!==i){var pe=_createElement19("svg:radialGradient");pe.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),pe.setAttribute("gradientUnits","objectBoundingBox"),pe.setAttribute("cx","0.5"),pe.setAttribute("cy","0.5"),pe.setAttribute("r","0.5");var he=!0,me=!1,be=void 0;try{for(var xe=i.querySelectorAll("stop")[Symbol.iterator](),ge,ve;!(he=(ge=xe.next()).done);he=!0)ve=ge.value,pe.append(ve.cloneNode())}catch(e){me=!0,be=e}finally{try{!he&&xe.return&&xe.return()}finally{if(me)throw be}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(pe),O.style[this.context]="url(#"+pe.id+")",_reduceProperty2(this.context,O)}}else if(_getPaintServer3(O,this.context)!==i){var ye=_getUserBBox5(O),fe=ye.x+ye.width/2,_e=ye.y+ye.height/2,we=ye.width/2,ke=_createElement19("svg:radialGradient");ke.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),ke.setAttribute("gradientUnits","userSpaceOnUse"),ke.setAttribute("cx",_round16(fe,n)),ke.setAttribute("cy",_round16(_e,n)),ke.setAttribute("r",_round16(we,n));var Ae=!0,Ce=!1,Se=void 0;try{for(var Ee=i.querySelectorAll("stop")[Symbol.iterator](),Te,Pe;!(Ae=(Te=Ee.next()).done);Ae=!0)Pe=Te.value,ke.append(Pe.cloneNode())}catch(e){Ce=!0,Se=e}finally{try{!Ae&&Ee.return&&Ee.return()}finally{if(Ce)throw Se}}this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(ke),O.style[this.context]="url(#"+ke.id+")",_reduceProperty2(this.context,O)}}catch(e){R=!0,z=e}finally{try{!N&&G.return&&G.return()}finally{if(R)throw z}}var Le=!0,Me=!1,De;try{for(var Ie=t[Symbol.iterator](),Ve,Ne;!(Le=(Ve=Ie.next()).done);Le=!0)Ne=Ve.value,_reduceText2(Ne,o)}catch(e){Me=!0,De=e}finally{try{!Le&&Ie.return&&Ie.return()}finally{if(Me)throw De}}}},{key:"_onPatternPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,a=this._ownerEditor.canvas.selectedTextRange,r=null,o=!0,i=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,_spanifyText3(u,a)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}{var c=e[0];if("text"===c.localName){var p=c.querySelectorAll("tspan"),h=_getTspansIntersectedByRange2(a,c),m=0<h.length?h:p;0<m.length&&(c=m[0])}var b=_getPaintType(c,this.context);if("pattern"===b){var x=getComputedStyle(c)[this.context];r=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,x)}if(r||(r=this._ownerEditor.canvas.masterArtboard.querySelector("pattern")),!r){var g=this._ownerEditor.canvas.generateUniqueID("pattern");r=_parseSVG("\n            <pattern id=\""+g+"\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\" viewBox=\"0 0 100 100\">\n              <path d=\"M 0 0 L 50 0 L 50 100 L 0 100 Z\" style=\"fill: black;\"></path>\n            </pattern>\n          "),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(r)}}var v=!0,y=!1,f;try{for(var _=e[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)if(k=w.value,"text"===k.localName&&0<k.querySelectorAll("tspan").length){var A=k.querySelectorAll("tspan"),C=_getTspansIntersectedByRange2(a,k),S=0<C.length&&!a.collapsed?C:A;if(_getPaintServer3(S[0],this.context)===r){var E=!0,T=!1,P=void 0;try{for(var L=S[Symbol.iterator](),M,D;!(E=(M=L.next()).done);E=!0)D=M.value,D.style[this.context]="url(#"+r.id+")"}catch(e){T=!0,P=e}finally{try{!E&&L.return&&L.return()}finally{if(T)throw P}}}else{var I=r.hasAttribute("href")?_getParentPattern3(r):r,V=_createDerivedPattern2(I);I.hasAttribute("patternTransform")&&V.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(V);var N=!0,R=!1,z=void 0;try{for(var G=S[Symbol.iterator](),B,O;!(N=(B=G.next()).done);N=!0)O=B.value,O.style[this.context]="url(#"+V.id+")"}catch(e){R=!0,z=e}finally{try{!N&&G.return&&G.return()}finally{if(R)throw z}}_centerPattern(V,k,this._ownerEditor.canvas.transformPrecision)}}else if(_getPaintServer3(k,this.context)!==r){var j=r.hasAttribute("href")?_getParentPattern3(r):r,q=_createDerivedPattern2(j);j.hasAttribute("patternTransform")&&q.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(q),k.style[this.context]="url(#"+q.id+")",_reduceProperty2(this.context,k),_centerPattern(q,k,this._ownerEditor.canvas.transformPrecision)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var U=!0,H=!1,F;try{for(var $=t[Symbol.iterator](),Y,X;!(U=(Y=$.next()).done);U=!0)X=Y.value,_reduceText2(X,a)}catch(e){H=!0,F=e}finally{try{!U&&$.return&&$.return()}finally{if(H)throw F}}}},{key:"_onInheritPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.style[this.context]="inherit"}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}else s.style[this.context]="inherit";_reduceText2(s,t)}else s.style[this.context]="inherit"}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onNonePaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.style[this.context]="none"}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}else s.style[this.context]="none",_reduceProperty2(this.context,s);_reduceText2(s,t)}else s.style[this.context]="none",_reduceProperty2(this.context,s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onSpreadMethodButtonsToggle",value:function(){var e=this["#spread-method-buttons"].querySelector("x-button[toggled]"),t=this._ownerEditor.canvas.selectedTextRange,n=[];this._ownerEditor.canvas.undoManager.checkpoint("Spread Method");var a=!0,r=!1,o;try{for(var i=this._getSelectedPaintableElements()[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,"text"===l.localName){var d=_getRenderedTextNodes3(l);if(t&&t.intersectsNode(l)){var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,t.intersectsNode(b)&&!n.includes(b.parentElement)&&n.push(b.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else{var x=!0,g=!1,v=void 0;try{for(var y=d[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,!1===n.includes(_.parentElement)&&n.push(_.parentElement)}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}}}else n.push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var w=!0,k=!1,A;try{for(var C=n[Symbol.iterator](),S;!(w=(S=C.next()).done);w=!0){var E=S.value,T=_getPaintType(E,this.context);if("linearGradient"===T||"radialGradient"===T){var P=_getPaintServer3(E,this.context);P.setAttribute("spreadMethod",e.value)}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}},{key:"_onColorPickerTypeButtonsToggle",value:function(e){this["#color-picker"].type=e.detail.value}},{key:"_onColorPickerColorChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[].concat(_toConsumableArray(t.linearGradientHud.selectedStops),_toConsumableArray(t.radialGradientHud.selectedStops)),a,r;if(t.undoManager.checkpoint("Change Color"),0<n.length)this["#color-picker"].addEventListener("change",a=function(){var t=!0,a=!1,r;try{for(var o=n[Symbol.iterator](),i,s;!(t=(i=o.next()).done);t=!0)s=i.value,s.style.stopColor=e["#color-picker"].value,_reduceProperty2("stop-color",s)}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}}),this["#color-picker"].addEventListener("changeend",r=function(){e["#color-picker"].removeEventListener("change",a),e["#color-picker"].removeEventListener("changeend",r)});else{var o=this._getSelectedPaintableElements(),i=o.filter(function(e){return"text"===e.localName}),s=t.selectedTextRange,l=[],d=!0,u=!1,c;try{for(var p=i[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,_spanifyText3(m,s)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var b=!0,x=!1,g;try{for(var v=o[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,"text"===f.localName&&f.querySelector("tspan")){var _=f.querySelectorAll("tspan"),w=_getTspansIntersectedByRange2(s,f),k=0<w.length&&!s.collapsed?w:_;l.push.apply(l,_toConsumableArray(k))}else l.push(f)}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}this["#color-picker"].addEventListener("change",a=function(){var t=!0,n=!1,a;try{for(var r=l[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.style[e.context]=e["#color-picker"].value,_reduceProperty2(e.context,i)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}),this["#color-picker"].addEventListener("changeend",r=function(){e["#color-picker"].removeEventListener("change",a),e["#color-picker"].removeEventListener("changeend",r);var t=!0,n=!1,o;try{for(var l=i[Symbol.iterator](),d,u;!(t=(d=l.next()).done);t=!0)u=d.value,_reduceText2(u,s)}catch(e){n=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw o}}})}}},{key:"_onColorPickerHintClick",value:function(e){0===e.button&&"edit-tool-span"===e.target.id&&this._ownerEditor.toggleTool("edit-tool")}},{key:"_onPatternSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Pattern");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this["#pattern-select"].value,a=this._ownerEditor.canvas.masterArtboard.querySelector("#"+n),r=this._ownerEditor.canvas.selectedTextRange,o=!0,i=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,_spanifyText3(u,r)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var c=!0,p=!1,h;try{for(var m=e[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)if(x=b.value,"text"===x.localName&&0<x.querySelectorAll("tspan").length){var g=x.querySelectorAll("tspan"),v=_getTspansIntersectedByRange2(r,x),y=0<v.length&&!r.collapsed?v:g,f=_getPaintServer3(y[0],this.context),_=f&&"pattern"===f.localName?f:null;if(_&&_comparePatterns2(_,a)){var w=!0,k=!1,A=void 0;try{for(var C=y[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.style[this.context]="url(#"+_.id+")"}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else{var T=_createDerivedPattern2(a);a.hasAttribute("patternTransform")&&T.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(T);var P=!0,L=!1,M=void 0;try{for(var D=y[Symbol.iterator](),I,V;!(P=(I=D.next()).done);P=!0)V=I.value,V.style[this.context]="url(#"+T.id+")"}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}_centerPattern(T,x,this._ownerEditor.canvas.transformPrecision)}}else{var N=_getPaintType(x,this.context);if("pattern"===N){var R=getComputedStyle(x)[this.context],z=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,R);if(_comparePatterns2(z,a))continue}var G=_createDerivedPattern2(a);a.hasAttribute("patternTransform")&&G.setAttribute("patternTransform",""),this._ownerEditor.canvas.createDefsIfMissing(),this._ownerEditor.canvas.defs.append(G),x.style[this.context]="url(#"+G.id+")",_reduceProperty2(this.context,x),_centerPattern(G,x,this._ownerEditor.canvas.transformPrecision)}}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}var B=!0,O=!1,j;try{for(var q=t[Symbol.iterator](),U,H;!(B=(U=q.next()).done);B=!0)H=U.value,_reduceText2(H,r)}catch(e){O=!0,j=e}finally{try{!B&&q.return&&q.return()}finally{if(O)throw j}}}},{key:"_onPatternSelectHintClick",value:function(e){0===e.button&&"defs-panel-span"===e.target.id&&(this._ownerEditor.panelsDock.value="defs-panel")}},{key:"_onEditPatternButtonClick",value:function(e){0===e.button&&this._ownerEditor.canvas.editPattern(this["#pattern-select"].value)}},{key:"_onPaintOrderSwitchChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint order");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.style.paintOrder=this["#paint-order-switch"].value.join(" ")}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}else s.style.paintOrder=this["#paint-order-switch"].value.join(" "),_reduceProperty2("paint-order",s);_reduceText2(s,t)}else s.style.paintOrder=this["#paint-order-switch"].value.join(" "),_reduceProperty2("paint-order",s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_update",value:function(){var e=this,t=[],n=this._ownerEditor.canvas,a=n.selectedTextRange,r=[].concat(_toConsumableArray(n.linearGradientHud.selectedStops),_toConsumableArray(n.radialGradientHud.selectedStops)),o=!0,s=!1,l;try{for(var d=this._getSelectedPaintableElements()[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)if(c=u.value,"text"===c.localName){var p=_getRenderedTextNodes3(c);if(a&&a.intersectsNode(c)){"backward"===a.direction&&p.reverse();var h=!0,m=!1,b=void 0;try{for(var x=p[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,a.intersectsNode(v)&&!1===t.includes(v.parentElement)&&t.push(v.parentElement)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}else{var y=!0,f=!1,_=void 0;try{for(var w=p[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,!1===t.includes(A.parentElement)&&t.push(A.parentElement)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}}else t.push(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var C=t[0];if(0<r.length){var S=r[0].closest("linearGradient, radialGradient"),E=t.find(function(t){return _getPaintServer3(t,e.context)===S});E&&(C=E)}if(this["#section-heading"].disabled=!C,C){var T=_getPaintType(C,this.context);"symbol"===this._ownerEditor.canvas.currentArtboard.getAttribute("data-bx-artboard")&&"inherit"===C.style[this.context]&&(T="inherit");var P=_isMixedPaint(t,this.context);if(this["#paint-type-heading"].disabled=!1,"solid"===T){var L=!0,M=!1,D;try{for(var I=this["#paint-type-buttons"].children[Symbol.iterator](),V,N;!(L=(V=I.next()).done);L=!0)N=V.value,N.disabled=!1,"solid"===N.value?(N.toggled=!0,N.mixed=P):(N.toggled=!1,N.mixed=!1)}catch(e){M=!0,D=e}finally{try{!L&&I.return&&I.return()}finally{if(M)throw D}}}else if("linearGradient"===T){var R=!0,z=!1,G;try{for(var B=this["#paint-type-buttons"].children[Symbol.iterator](),O,j;!(R=(O=B.next()).done);R=!0)j=O.value,j.disabled=!1,"linear-gradient"===j.value?(j.toggled=!0,j.mixed=P):(j.toggled=!1,j.mixed=!1)}catch(e){z=!0,G=e}finally{try{!R&&B.return&&B.return()}finally{if(z)throw G}}}else if("radialGradient"===T){var q=!0,U=!1,H;try{for(var F=this["#paint-type-buttons"].children[Symbol.iterator](),$,Y;!(q=($=F.next()).done);q=!0)Y=$.value,Y.disabled=!1,"radial-gradient"===Y.value?(Y.toggled=!0,Y.mixed=P):(Y.toggled=!1,Y.mixed=!1)}catch(e){U=!0,H=e}finally{try{!q&&F.return&&F.return()}finally{if(U)throw H}}}else if("pattern"===T){var X=!0,W=!1,K;try{for(var Z=this["#paint-type-buttons"].children[Symbol.iterator](),J,Q;!(X=(J=Z.next()).done);X=!0)Q=J.value,Q.disabled=!1,"pattern"===Q.value?(Q.toggled=!0,Q.mixed=P):(Q.toggled=!1,Q.mixed=!1)}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}}else if("inherit"===T){var ee=!0,te=!1,ne;try{for(var ae=this["#paint-type-buttons"].children[Symbol.iterator](),re,oe;!(ee=(re=ae.next()).done);ee=!0)oe=re.value,oe.disabled=!1,"inherit"===oe.value?(oe.toggled=!0,oe.mixed=P):(oe.toggled=!1,oe.mixed=!1)}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}}else if("none"===T){var ie=!0,se=!1,le;try{for(var de=this["#paint-type-buttons"].children[Symbol.iterator](),ue,ce;!(ie=(ue=de.next()).done);ie=!0)ce=ue.value,ce.disabled=!1,"none"===ce.value?(ce.toggled=!0,ce.mixed=P):(ce.toggled=!1,ce.mixed=!1)}catch(e){se=!0,le=e}finally{try{!ie&&de.return&&de.return()}finally{if(se)throw le}}}}else{this["#paint-type-heading"].disabled=!0;var pe=!0,he=!1,me;try{for(var be=this["#paint-type-buttons"].children[Symbol.iterator](),xe,ge;!(pe=(xe=be.next()).done);pe=!0)ge=xe.value,ge.disabled=!0,ge.toggled=!1,ge.mixed=!1}catch(e){he=!0,me=e}finally{try{!pe&&be.return&&be.return()}finally{if(he)throw me}}}if(C){var ve=_getPaintType(C,this.context),ye=_isMixedPaint(t,this.context);if("solid"===ve)this["#color-section"].hidden=!1,this["#color-picker-type-buttons"].hidden=!1,this["#color-picker"].hidden=!1,this["#color-picker"].value=getComputedStyle(C)[this.context],this["#color-picker"].mixed=ye,this["#color-picker-hint"].innerHTML="";else if("linearGradient"===ve||"radialGradient"===ve){var fe=this._ownerEditor.canvas[ve+"Hud"].selectedStops;this["#color-section"].hidden=!1,this["#color-picker"].mixed=ye,0===fe.length?(this["#color-picker-type-buttons"].hidden=!0,this["#color-picker"].hidden=!0,this["#color-picker-hint"].innerHTML="Select stop to recolor with <span id=\"edit-tool-span\">Edit Tool</span>."):(this["#color-picker-type-buttons"].hidden=!1,this["#color-picker"].hidden=!1,this["#color-picker"].value=fe[0].style.stopColor||"#000",this["#color-picker-hint"].innerHTML="")}else this["#color-section"].hidden=!0}else this["#color-section"].hidden=!0;if(C){var _e=_getPaintType(C,this.context);if("linearGradient"===_e||"radialGradient"===_e){this["#spread-method-section"].hidden=!1;var we=_getPaintServer3(C,this.context),ke=!1,Ae=!0,Ce=!1,Se;try{for(var Ee=t[Symbol.iterator](),Te;!(Ae=(Te=Ee.next()).done);Ae=!0){var Pe=Te.value,Le=_getPaintServer3(Pe,this.context);Le&&Le.localName.endsWith("Gradient")&&Le.spreadMethod.baseVal!==we.spreadMethod.baseVal&&(ke=!0)}}catch(e){Ce=!0,Se=e}finally{try{!Ae&&Ee.return&&Ee.return()}finally{if(Ce)throw Se}}we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REPEAT?(this["#repeat-spread-method-button"].toggled=!0,this["#repeat-spread-method-button"].mixed=ke,this["#pad-spread-method-button"].toggled=!1,this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].toggled=!1,this["#reflect-spread-method-button"].mixed=!1):we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_PAD?(this["#repeat-spread-method-button"].toggled=!1,this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].toggled=!0,this["#pad-spread-method-button"].mixed=ke,this["#reflect-spread-method-button"].toggled=!1,this["#reflect-spread-method-button"].mixed=!1):we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REFLECT&&(this["#repeat-spread-method-button"].toggled=!1,this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].toggled=!1,this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].toggled=!0,this["#reflect-spread-method-button"].mixed=ke)}else this["#spread-method-section"].hidden=!0}else this["#spread-method-section"].hidden=!0;if(C&&"pattern"===_getPaintType(C,this.context)){this["#pattern-section"].hidden=!1,this["#pattern-select"].mixed=_isMixedPaint(t,this.context);var Me=[].concat(_toConsumableArray(this._ownerEditor.canvas.masterArtboard.querySelectorAll("pattern")));if(Me=Me.filter(function(e){return!1===e.hasAttribute("href")}),this["#pattern-select-menu"].childElementCount===Me.length)for(var De=0;De<Me.length;De+=1){var i=Me[De],Ie=this["#pattern-select-menu"].children[De];Ie.querySelector("x-label").textContent="#"+i.id,Ie.value=i.id}else{this["#pattern-select-menu"].innerHTML="";var Ve=!0,Ne=!1,Re;try{for(var ze=Me[Symbol.iterator](),Ge;!(Ve=(Ge=ze.next()).done);Ve=!0){var Be=Ge.value,Oe=_parseHTML("\n                <x-menuitem value=\""+Be.id+"\">\n                  <img src=\""+stubThumbnail+"\"></img>\n                  <x-label>#"+Be.id+"</x-label>\n                </x-menuitem>\n              ");this["#pattern-select-menu"].append(Oe)}}catch(e){Ne=!0,Re=e}finally{try{!Ve&&ze.return&&ze.return()}finally{if(Ne)throw Re}}}var je=_getPaintServer3(C,this.context),qe=je.hasAttribute("href")?_getParentPattern3(je):je;this["#pattern-select"].value=qe?qe.id:null,this._updatedPatternThumbnailsForFirstTime?this._updatePatternThumbnails2000Db():(this._updatedPatternThumbnailsForFirstTime=!0,this._updatePatternThumbnails())}else this["#pattern-section"].hidden=!0;if(C){var Ue=_getPaintType(C,this.context);"none"===Ue?this["#paint-order-section"].hidden=!0:(this["#paint-order-section"].hidden=!1,this["#paint-order-switch"].value=getComputedStyle(C).paintOrder.split(" "))}else this["#paint-order-section"].hidden=!0}},{key:"_updatePatternThumbnails",value:function(){var e=this,t=this._ownerEditor.canvas.extractArtwork();_getPatternThumbnails(t,function(t,n){var a=!0,r=!1,o;try{for(var i=e["#pattern-select-menu"].children[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.value===t&&(l.querySelector("img").src=n)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}})}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,_paintableElementNames2.includes(l.localName)||"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){("fill"===e||"stroke"===e)&&this.setAttribute("context",e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(_CustomElement);customElements.define("bx-paintcontrols",BXPaintControlsElement)}}{var _BoxySVG$utils$elemen12=BoxySVG.utils.element,_closest12=_BoxySVG$utils$elemen12.closest,_html7=_BoxySVG$utils$elemen12.html,_createElement20=_BoxySVG$utils$elemen12.createElement,registerElement=_BoxySVG$utils$elemen12.registerElement,_Shortcut6=BoxySVG.classes.Shortcut,_rectContainsPoint=BoxySVG.utils.geometry.rectContainsPoint,gridSize=10,debug=!1,_shadowTemplate4=_html7(_templateObject17),BXColorGrabberElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._isGrabbing=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate4.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return window.colorPicker=e,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest12(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"grabColor",value:function(){var e=this;return new Promise(function(t){var n=e._ownerApp.currentEditor.canvas,o=n.getBoundingClientRect(),s=null,a,r,i,l,d,u;0===e["#grid"].childElementCount&&e._createGrid(),e._isGrabbing=!0,e.setAttribute("enabled",""),e["#html-canvas"].style.left=o.left+"px",e["#html-canvas"].style.top=o.top+"px",n.captureVisibleCanvasArea().then(function(t){var n=new Image;n.src=t,n.addEventListener("load",function(){e["#html-canvas"].width=n.naturalWidth,e["#html-canvas"].height=n.naturalHeight,s=e["#html-canvas"].getContext("2d"),s.drawImage(n,0,0)})});var c=function(){e.removeEventListener("pointerenter",a),e.removeEventListener("pointerleave",r),e.removeEventListener("pointerdown",l),e.removeEventListener("pointermove",i),window.removeEventListener("blur",d),window.removeEventListener("keydown",u),e.removeAttribute("enabled"),e["#lens"].style.left=null,e["#lens"].style.top=null,e._isGrabbing=!1};e.addEventListener("pointerenter",a=function(){e["#lens"].style.display=null}),e.addEventListener("pointerleave",r=function(){e["#lens"].style.display="none"}),e.addEventListener("pointerdown",l=function(e){if(e.preventDefault(),c(),n.isPointOverCanvas(e.clientX,e.clientY)){var i=s.getImageData(e.clientX-o.left,e.clientY-o.top,1,1),l=_slicedToArray(i.data,4),d=l[0],r=l[1],u=l[2],p=l[3];debug,t("rgba("+d+", "+r+", "+u+", "+p/255+")")}else t(null)}),e.addEventListener("pointermove",i=function(t){e.style.pointerEvents="none",n.isPointOverCanvas(t.clientX,t.clientY)?e["#lens"].removeAttribute("offscreen"):e["#lens"].setAttribute("offscreen",""),e.style.pointerEvents=null;{e["#lens"].style.left=t.clientX+15+"px",e["#lens"].style.top=t.clientY+15+"px";var d=[];if(s){for(var u=s.getImageData(t.clientX-o.left-gridSize/2+1,t.clientY-o.top-gridSize/2+1,gridSize,gridSize),c=0,i=u.data.length;c<i;c+=4){var l=u.data[c],r=u.data[c+1],p=u.data[c+2],h=u.data[c+3]/255;d.push("rgba("+l+", "+r+", "+p+", "+h+")")}for(var a=0;a<d.length;a+=1)e["#grid"].children[a].style.fill=d[a]}}}),window.addEventListener("blur",d=function(){c(),t(null)}),window.addEventListener("keydown",u=function(e){var n=_Shortcut6.fromEvent(e);n.matches("Escape")&&(c(),t(null))})})}},{key:"_createGrid",value:function(){for(var e=0;e<gridSize;e+=1)for(var t=0,n;t<gridSize;t+=1)n=_createElement20("svg:rect"),n.setAttribute("width",10),n.setAttribute("height",10),n.setAttribute("x",11*t),n.setAttribute("y",11*e),n.style.fill="blue",this["#grid"].append(n),4==t&&4==e&&n.setAttribute("id","center-rect")}},{key:"isGrabbing",get:function(){return this._isGrabbing}}]),t}(_CustomElement);customElements.define("bx-colorgrabber",BXColorGrabberElement)}{var _formatColorString=BoxySVG.utils.color.formatColorString,_closest13=BoxySVG.utils.element.closest,_shadowHTML9="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:250px;box-sizing:border-box}:host([hidden]){display:none}#main{height:100%}#main,#main>*{width:100%}#format-select{margin-left:4px;min-width:73px}x-box{margin-top:15px}#input{max-width:none;flex:1}#grab-button{margin:0 0 0 5px}#grab-button x-icon{width:14px;height:14px}</style>\n\n    <main id=\"main\">\n      <div id=\"pickers\">\n        <x-rectcolorpicker alphaslider id=\"rect-picker\"></x-rectcolorpicker>\n        <x-wheelcolorpicker alphaslider id=\"wheel-picker\" hidden></x-wheelcolorpicker>\n      </div>\n\n      <x-box>\n        <x-input id=\"input\" type=\"color\"></x-input>\n\n        <x-select id=\"format-select\" skin=\"condensed\">\n          <x-menu>\n            <x-menuitem value=\"hex\" selected=\"true\"><x-label>Hex</x-label></x-menuitem>\n            <x-menuitem value=\"rgb\"><x-label>RGB</x-label></x-menuitem>\n            <x-menuitem value=\"rgba\"><x-label>RGBA</x-label></x-menuitem>\n            <x-menuitem value=\"hsl\"><x-label>HSL</x-label></x-menuitem>\n            <x-menuitem value=\"hsla\"><x-label>HSLA</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-button id=\"grab-button\" skin=\"condensed\" togglable>\n          <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </main>\n  ",BXColorPickerElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML9;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#pickers"].addEventListener("change",function(t){return e._onPickerChange(t)}),e["#pickers"].addEventListener("changestart",function(){return e.dispatchEvent(new CustomEvent("changestart"))}),e["#pickers"].addEventListener("changeend",function(){return e.dispatchEvent(new CustomEvent("changeend"))}),e["#input"].addEventListener("click",function(t){return e._onInputClick(t)}),e["#input"].addEventListener("change",function(t){return e._onInputChange(t)}),e["#format-select"].addEventListener("change",function(t){return e._onFormatSelectChange(t)}),e["#grab-button"].addEventListener("toggle",function(){return e._onGrabButtonToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest13(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._updatePickersVisibility()}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._onValueAttributeChange():"type"===e&&this._onTypeAttributeChange())}},{key:"_onValueAttributeChange",value:function(){var e=this["#pickers"].querySelector(":scope > :not([hidden])");e.value!==this.value&&(e.value=this.value),this["#input"].value=_formatColorString(this.value,this["#format-select"].value),this["#input"].matches(":focus")&&this["#input"].selectAll()}},{key:"_onTypeAttributeChange",value:function(){this._updatePickersVisibility()}},{key:"_onPickerChange",value:function(e){this.value=e.target.value,this.dispatchEvent(new CustomEvent("change"))}},{key:"_onInputClick",value:function(e){2<=e.detail&&"hex"===this["#format-select"].value&&this["#input"].selectAll()}},{key:"_onInputChange",value:function(){this["#input"].invalid?(this["#input"].value=_formatColorString(this.value,this["#format-select"].value),this["#input"].matches(":focus")&&this["#input"].selectAll()):(this.dispatchEvent(new CustomEvent("changestart")),this.value=this["#input"].value,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")))}},{key:"_onFormatSelectChange",value:function(){this["#input"].value=_formatColorString(this.value,this["#format-select"].value)}},{key:"_onGrabButtonToggle",value:async function(){var e=await this._ownerApp.colorGrabber.grabColor();this["#grab-button"].toggled=!1,null!==e&&(this.dispatchEvent(new CustomEvent("changestart")),this.value=e,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")))}},{key:"_updatePickersVisibility",value:function(){"rect"===this.type?(this["#rect-picker"].hidden=!1,this["#rect-picker"].value=this.value,this["#wheel-picker"].hidden=!0):"wheel"===this.type&&(this["#rect-picker"].hidden=!0,this["#wheel-picker"].hidden=!1,this["#wheel-picker"].value=this.value)}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"},set:function(e){this.setAttribute("value",e)}},{key:"type",get:function(){return this.hasAttribute("type")?this.getAttribute("type"):"rect"},set:function(e){this.setAttribute("type",e)}}],[{key:"observedAttributes",get:function(){return["value","type"]}}]),t}(_CustomElement);customElements.define("bx-colorpicker",BXColorPickerElement)}{var _BoxySVG$utils$elemen13=BoxySVG.utils.element,_closest14=_BoxySVG$utils$elemen13.closest,_html8=_BoxySVG$utils$elemen13.html,_BoxySVG$utils$fontGo=BoxySVG.utils.fontGoogle,_getGoogleFontsFamilies=_BoxySVG$utils$fontGo.getGoogleFontsFamilies,_getGoogleFontsThumbnails=_BoxySVG$utils$fontGo.getGoogleFontsThumbnails,_debounce7=BoxySVG.utils.time.debounce,_Shortcut7=BoxySVG.classes.Shortcut,_shadowTemplate5=_html8(_templateObject18,window.theme,window.theme),BXFontFamilyPickerElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._value=null,e._dispatchChangeEventDb600=_debounce7(e._dispatchChangeEventDb,600,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate5.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e.enabled&&e._onEnabled(),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest14(this,"bx-editor")}},{key:"_onEnabled",value:function(){this._update(),this._scrollSelectedItemIntoView()}},{key:"_onDisabled",value:function(){}},{key:"_onItemsPointerDown",value:function(e){e.target.closest(".item")&&this._onItemPointerDown(e)}},{key:"_onItemPointerDown",value:function(e){var t=[].concat(_toConsumableArray(this["#embedded-items"].children),_toConsumableArray(this["#google-fonts-items"].children)),n=e.target.closest(".item"),a=n.getAttribute("data-family");if(a!==this.value){this._value=a;var r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===n?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}this.dispatchEvent(new CustomEvent("change"))}}},{key:"_onFilterInputInput",value:function(){this._updateItemsHiddenState(),this._updatePlaceholdersHiddenState()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut7.fromEvent(e);t.matches("ArrowUp")?(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem()):t.matches("ArrowDown")&&(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}},{key:"_selectPreviousItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]");if(t){var n=e.indexOf(t),a=e[n-1];a&&(a.scrollIntoViewIfNeeded(),this.value=a.getAttribute("data-family"),this._dispatchChangeEventDb600())}}},{key:"_selectNextItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]");if(t){var n=e.indexOf(t),a=e[n+1];a&&(a.scrollIntoViewIfNeeded(),this.value=a.getAttribute("data-family"),this._dispatchChangeEventDb600())}}},{key:"_scrollSelectedItemIntoView",value:function(){var e=this["#items"].querySelector(".item[data-selected]");this["#items"].scrollTop=0,e&&e.scrollIntoViewIfNeeded()}},{key:"_dispatchChangeEventDb",value:function(){this.dispatchEvent(new CustomEvent("change"))}},{key:"_update",value:async function(){{var e=document.createDocumentFragment(),t=this._ownerEditor.canvas.fontsManager.getFamilies(),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=_html8(_templateObject19,s,s,s);e.append(l)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this["#embedded-items"].innerHTML="",this["#embedded-items"].append(e)}if(0===this["#google-fonts-items"].children.length){var d=document.createDocumentFragment(),u=await _getGoogleFontsFamilies(),c=await _getGoogleFontsThumbnails(),p=!0,h=!1,m;try{for(var b=u[Symbol.iterator](),x;!(p=(x=b.next()).done);p=!0){var g=x.value,v=_html8(_templateObject20,g,c[g]);d.append(v)}}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}this["#google-fonts-items"].innerHTML="",this["#google-fonts-items"].append(d)}this._updateItemsSelectedState(),this._updateItemsHiddenState(),this._updatePlaceholdersHiddenState()}},{key:"_updateItemsSelectedState",value:function(){var e=this["#items"].querySelector(".item[data-selected]"),t=this["#items"].querySelector(".item[data-family=\""+this.value+"\"]");e!==t&&(e&&e.removeAttribute("data-selected"),t&&t.setAttribute("data-selected",""))}},{key:"_updateItemsHiddenState",value:function(){var e=this["#filter-input"].value,t=this["#embedded-items"].children,n=this["#google-fonts-items"].children,a=[],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.getAttribute("data-family");d.hidden=!1===u.toLowerCase().startsWith(e.toLowerCase()),a.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var c=!0,p=!1,h;try{for(var m=n[Symbol.iterator](),b;!(c=(b=m.next()).done);c=!0){var x=b.value,g=x.getAttribute("data-family");x.hidden=!g.toLowerCase().startsWith(e.toLowerCase())||a.includes(g)}}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}},{key:"_updatePlaceholdersHiddenState",value:function(){var e=null===this["#embedded-items"].querySelector(".item:not([hidden])"),t=null===this["#google-fonts-items"].querySelector(".item:not([hidden])");this["#embedded-items-placeholder"].hidden=!e,this["#google-fonts-items-placeholder"].hidden=!t}},{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this._updateItemsSelectedState())}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fontfamilypicker",BXFontFamilyPickerElement)}{{var _html9=BoxySVG.utils.element.html,keyMaps={ArrowRight:{xMinYMin:"xMidYMin",xMidYMin:"xMaxYMin",xMinYMid:"xMidYMid",xMidYMid:"xMaxYMid",xMinYMax:"xMidYMax",xMidYMax:"xMaxYMax"},ArrowLeft:{xMaxYMin:"xMidYMin",xMidYMin:"xMinYMin",xMaxYMid:"xMidYMid",xMidYMid:"xMinYMid",xMaxYMax:"xMidYMax",xMidYMax:"xMinYMax"},ArrowDown:{xMinYMin:"xMinYMid",xMinYMid:"xMinYMax",xMidYMin:"xMidYMid",xMidYMid:"xMidYMax",xMaxYMin:"xMaxYMid",xMaxYMid:"xMaxYMax"},ArrowUp:{xMinYMax:"xMinYMid",xMinYMid:"xMinYMin",xMidYMax:"xMidYMid",xMidYMid:"xMidYMin",xMaxYMax:"xMaxYMid",xMaxYMid:"xMaxYMin"}},_shadowTemplate6=_html9(_templateObject21,window.theme,window.theme),BXAlignButtonsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!0}),e._shadowRoot.append(document.importNode(_shadowTemplate6.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e["#buttons"].addEventListener("click",function(){return e._onButtonsClick(event)}),e["#buttons"].addEventListener("toggle",function(){return e._onButtonsToggle()}),e["#buttons"].addEventListener("keydown",function(t){return e._onKeyDown(t)},!0),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._updateValue():"tracking"===e?this._updateTracking():"disabled"===e&&this._onDisabledAttributeChange())}},{key:"connectedCallback",value:function(){this.setAttribute("aria-disabled",this.disabled),this._update()}},{key:"_onDisabledAttributeChange",value:function(){this.setAttribute("aria-disabled",this.disabled)}},{key:"_onPointerDown",value:function(e){!1===this.matches(":focus")&&(e.preventDefault(),this.focus(),this.blur())}},{key:"_onButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this.dispatchEvent(new CustomEvent("buttonclick",{bubbles:!0,detail:t.value}))}},{key:"_onButtonsToggle",value:function(){this.setAttribute("value",this["#buttons"].value||"none"),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}},{key:"_onKeyDown",value:function(e){var t=e.key;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t)){e.preventDefault(),e.stopImmediatePropagation();var n=this["#buttons"].querySelector("x-button:focus"),a=keyMaps[t][n.value],r=this["#buttons"].querySelector("x-button[value=\""+a+"\"]");r&&r.focus()}}},{key:"_update",value:function(){this._updateValue(),this._updateTracking()}},{key:"_updateValue",value:function(){this["#buttons"].value="none"===this.value?null:this.value}},{key:"_updateTracking",value:function(){this["#buttons"].tracking=this.tracking}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value"):"none"},set:function(e){this.setAttribute("value",e)}},{key:"tracking",get:function(){return this.hasAttribute("tracking")?parseInt(this.getAttribute("tracking")):-1},set:function(e){this.setAttribute("tracking",e)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["value","tracking","disabled"]}}]),t}(_CustomElement);customElements.define("bx-alignbuttons",BXAlignButtonsElement)}}{{var _BoxySVG$utils$elemen14=BoxySVG.utils.element,_html10=_BoxySVG$utils$elemen14.html,_closest15=_BoxySVG$utils$elemen14.closest,_round17=BoxySVG.utils.math.round,_reduceProperty3=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text5=BoxySVG.utils.text,_getRenderedTextNodes4=_BoxySVG$utils$text5.getRenderedTextNodes,_getTspansIntersectedByRange3=_BoxySVG$utils$text5.getTspansIntersectedByRange,_spanifyText4=_BoxySVG$utils$text5.spanifyText,_reduceText3=_BoxySVG$utils$text5.reduceText,_throttle4=BoxySVG.utils.time.throttle,_paintableElementNames3=BoxySVG.utils.variables.paintableElementNames,_parseFloat6=Number.parseFloat,_shadowTemplate7=_html10(_templateObject22,window.theme,window.theme),BXFillPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle4(e._update,200,e),e._isChangingOpacity=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate7.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#opacity-section"].addEventListener("changestart",function(){return e._onOpacityChangeStart()}),e["#rule-buttons"].addEventListener("toggle",function(t){return e._onRuleButtonsToggle(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest15(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update200Th(),this["#paint-controls"].enabled=!0,t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this["#paint-controls"].enabled=!1,e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Fill opacity");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],o=!0,i=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(o=(c=u.next()).done);o=!0)p=c.value,_spanifyText4(p,a)}catch(e){i=!0,d=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw d}}var h=!0,m=!1,b;try{for(var x=t[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,"text"===v.localName){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange3(a,v),_=0<f.length&&!a.collapsed?f:y;r.push.apply(r,_toConsumableArray(_))}else r.push(v)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",s=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,o;try{for(var i=r[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=s.value,l.style.setProperty("fill-opacity",e["#opacity-slider"].value)}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}}),this["#opacity-section"].addEventListener("changeend",l=function(){e["#opacity-section"].removeEventListener("change",s),e["#opacity-section"].removeEventListener("changeend",l),e._isChangingOpacity=!1;var t=!0,o=!1,i;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty3("fill-opacity",c)}catch(e){o=!0,i=e}finally{try{!t&&d.return&&d.return()}finally{if(o)throw i}}var p=!0,h=!1,m;try{for(var b=n[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,_reduceText3(g,a)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}})}},{key:"_onRuleButtonsToggle",value:function(){var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[];this._ownerEditor.canvas.undoManager.checkpoint("Fill rule");var r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText4(d,n)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)if(b=m.value,"text"===b.localName&&b.querySelector("tspan")){var x=b.querySelectorAll("tspan"),g=_getTspansIntersectedByRange3(n,b),v=0<g.length&&!n.collapsed?g:x;a.push.apply(a,_toConsumableArray(v))}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("fill-rule",this["#rule-buttons"].value),_reduceProperty3("fill-rule",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,S=!1,E;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText3(L,n)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}},{key:"_update",value:function(){var e=[],t=this._ownerEditor.canvas.selectedTextRange,n=Symbol(),a=!0,r=!1,o;try{for(var i=this._getSelectedPaintableElements()[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,"text"===l.localName){var d=_getRenderedTextNodes4(l);if(t&&t.intersectsNode(l)){"backward"===t.direction&&d.reverse();var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,t.intersectsNode(b)&&!1===e.includes(b.parentElement)&&e.push(b.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else{var x=!0,g=!1,v=void 0;try{for(var y=d[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,!1===e.includes(_.parentElement)&&e.push(_.parentElement)}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}}}else e.push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var w=!0,k=!1,A;try{for(var C=e[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E[n]=getComputedStyle(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}var T=e[0],P=e.slice(1);if(this["#panel-heading"].disabled=void 0===T,!1===this._isChangingOpacity)if(T){var L=T[n].fillOpacity,M=_round17(_parseFloat6(L),2),D=!1,I=!0,V=!1,N;try{for(var R=P[Symbol.iterator](),z;!(I=(z=R.next()).done);I=!0){var G=z.value,B=G[n].fillOpacity,O=_round17(_parseFloat6(B),2);if(O!==M){D=!0;break}}}catch(e){V=!0,N=e}finally{try{!I&&R.return&&R.return()}finally{if(V)throw N}}this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].value=M,this["#opacity-slider"].mixed=D,this["#opacity-input"].disabled=!1,this["#opacity-input"].value=M}else this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].mixed=!1,this["#opacity-input"].disabled=!0,this["#opacity-input"].value=1;if(T){var j=!1,q=T[n].fillRule,U=!0,H=!1,F;try{for(var $=P[Symbol.iterator](),Y;!(U=(Y=$.next()).done);U=!0){var X=Y.value,W=X[n].fillRule;W!==q&&(j=!0)}}catch(e){H=!0,F=e}finally{try{!U&&$.return&&$.return()}finally{if(H)throw F}}this["#rule-section-heading"].disabled=!1,this["#non-zero-rule-button"].disabled=!1,this["#even-odd-rule-button"].disabled=!1,"evenodd"===q?(this["#non-zero-rule-button"].toggled=!1,this["#non-zero-rule-button"].mixed=!1,this["#even-odd-rule-button"].toggled=!0,this["#even-odd-rule-button"].mixed=j):"nonzero"===q&&(this["#non-zero-rule-button"].toggled=!0,this["#non-zero-rule-button"].mixed=j,this["#even-odd-rule-button"].toggled=!1,this["#even-odd-rule-button"].mixed=!1)}else this["#rule-section-heading"].disabled=!0,this["#non-zero-rule-button"].disabled=!0,this["#non-zero-rule-button"].toggled=!1,this["#non-zero-rule-button"].mixed=!1,this["#even-odd-rule-button"].disabled=!0,this["#even-odd-rule-button"].toggled=!1,this["#even-odd-rule-button"].mixed=!1}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,_paintableElementNames3.includes(l.localName)?e.push(l):"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fillpanel",BXFillPanelElement)}}{{var _BoxySVG$utils$elemen15=BoxySVG.utils.element,_html11=_BoxySVG$utils$elemen15.html,_closest16=_BoxySVG$utils$elemen15.closest,_round18=BoxySVG.utils.math.round,_reduceProperty4=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text6=BoxySVG.utils.text,_getRenderedTextNodes5=_BoxySVG$utils$text6.getRenderedTextNodes,_getTspansIntersectedByRange4=_BoxySVG$utils$text6.getTspansIntersectedByRange,_spanifyText5=_BoxySVG$utils$text6.spanifyText,_reduceText4=_BoxySVG$utils$text6.reduceText,_throttle5=BoxySVG.utils.time.throttle,_getTransformToElement6=BoxySVG.utils.transformGeneral.getTransformToElement,_decomposeTransform13=BoxySVG.utils.transformDecomposition.decomposeTransform,_paintableElementNames4=BoxySVG.utils.variables.paintableElementNames,_abs8=Math.abs,_parseFloat7=Number.parseFloat,dashArrayPresets=["none","2px","4px","5px","8px","10px","20px","30px","1px, 4px","5px, 10px"],dashArraySelectMenuItemsHTML=dashArrayPresets.map(function(e){return"\n      <x-menuitem value=\""+e+"\">\n        <svg viewBox=\"0 0 100 20\" preserveAspectRatio=\"none\" style=\"width: 195px; height: 20px; display: block;\">\n          <path\n            d=\"M 0 10 L 100 10\"\n            style=\"stroke-dasharray: "+e+"; stroke: currentColor; vector-effect: non-scaling-stroke;\">\n          </path>\n        </svg>\n      </x-menuitem>\n    "}).join(""),_shadowTemplate8=_html11(_templateObject23,window.theme,window.theme,dashArraySelectMenuItemsHTML),BXStrokePanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle5(e._update,200,e),e._isChangingOpacity=!1,e._isChangingWidth=!1,e._isChangingDashArray=!1,e._isChangingDashOffset=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate8.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#opacity-section"].addEventListener("changestart",function(){return e._onOpacityChangeStart()}),e["#width-box"].addEventListener("changestart",function(){return e._onWidthChangeStart()}),e["#non-scaling-stroke-checkbox"].addEventListener("change",function(){return e._onNonScalingStrokeCheckboxChange()}),e["#line-cap-buttons"].addEventListener("toggle",function(){return e._onLineCapButtonsToggle()}),e["#line-join-buttons"].addEventListener("toggle",function(){return e._onLineJoinButtonsToggle()}),e["#dash-array-select"].addEventListener("change",function(){return e._onDashArraySelectChange()}),e["#dash-array-inputs"].addEventListener("changestart",function(t){return e._onDashArrayInputsChangeStart(t)}),e["#dash-offset-box"].addEventListener("changestart",function(){return e._onDashOffsetChangeStart()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest16(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this["#paint-controls"].enabled=!0,this._update200Th(),this._ownerEditor.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerEditor.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){this["#paint-controls"].enabled=!1,this._ownerEditor.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerEditor.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Stroke opacity");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],o=!0,i=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(o=(c=u.next()).done);o=!0)p=c.value,_spanifyText5(p,a)}catch(e){i=!0,d=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw d}}var h=!0,m=!1,b;try{for(var x=t[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,"text"===v.localName){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange4(a,v),_=0<f.length&&!a.collapsed?f:y;r.push.apply(r,_toConsumableArray(_))}else r.push(v)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",s=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,o;try{for(var i=r[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=s.value,l.style.setProperty("stroke-opacity",e["#opacity-slider"].value)}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}}),this["#opacity-section"].addEventListener("changeend",l=function(){e["#opacity-section"].removeEventListener("change",s),e["#opacity-section"].removeEventListener("changeend",l),e._isChangingOpacity=!1;var t=!0,o=!1,i;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-opacity",c)}catch(e){o=!0,i=e}finally{try{!t&&d.return&&d.return()}finally{if(o)throw i}}var p=!0,h=!1,m;try{for(var b=n[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,_reduceText4(g,a)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}})}},{key:"_onWidthChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Stroke width");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],o=Symbol(),i=!0,s=!1,l,d,u;try{for(var c=n[Symbol.iterator](),p,h;!(i=(p=c.next()).done);i=!0)h=p.value,_spanifyText5(h,a)}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}var m=!0,b=!1,x;try{for(var g=t[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=_getTransformToElement6(y,this._ownerEditor.canvas.masterArtboard),_=_decomposeTransform13(f),w=_.scaleX,k=_.scaleY,A=(_abs8(w)+_abs8(k))/2;if("text"===y.localName&&y.querySelector("tspan")){var C=y.querySelectorAll("tspan"),S=_getTspansIntersectedByRange4(a,y),E=0<S.length&&!a.collapsed?S:C,T=!0,P=!1,L=void 0;try{for(var M=E[Symbol.iterator](),D;!(T=(D=M.next()).done);T=!0){var I=D.value,V=getComputedStyle(I).getPropertyValue("vector-effect");I[o]="non-scaling-stroke"===V?1:A,r.push(I)}}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}}else{var N=getComputedStyle(y).getPropertyValue("vector-effect");y[o]="non-scaling-stroke"===N?1:A,r.push(y)}}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}this._isChangingWidth=!0,this["#width-section"].addEventListener("change",l=function(t){t.target===e["#width-slider"]?e["#width-input"].value=e["#width-slider"].value:t.target===e["#width-input"]&&(e["#width-slider"].value=e["#width-input"].value),e["#width-slider"].mixed=!1,e["#width-input"].mixed=!1;var n=!0,a=!1,i;try{for(var s=r[Symbol.iterator](),l,d;!(n=(l=s.next()).done);n=!0)d=l.value,d.style.setProperty("stroke-width",e["#width-input"].value/d[o])}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}}),this["#width-section"].addEventListener("changeend",d=function(){e["#width-section"].removeEventListener("change",l),e["#width-section"].removeEventListener("changeend",d),e._isChangingWidth=!1;var t=!0,o=!1,i;try{for(var s=r[Symbol.iterator](),u,c;!(t=(u=s.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-width",c)}catch(e){o=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(o)throw i}}var p=!0,h=!1,m;try{for(var b=n[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,_reduceText4(g,a)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}})}},{key:"_onDashOffsetChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Dash offset");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],o=!0,i=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(o=(c=u.next()).done);o=!0)p=c.value,_spanifyText5(p,a)}catch(e){i=!0,d=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw d}}var h=!0,m=!1,b;try{for(var x=t[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,"text"===v.localName&&v.querySelector("tspan")){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange4(a,v),_=0<f.length&&!a.collapsed?f:y,w=!0,k=!1,A=void 0;try{for(var C=_[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,r.push(E)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else r.push(v)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}this._isChangingDashOffset=!0,this["#dash-offset-box"].addEventListener("change",s=function(t){t.target===e["#dash-offset-slider"]?e["#dash-offset-input"].value=e["#dash-offset-slider"].value:t.target===e["#width-input"]&&(e["#dash-offset-slider"].value=e["#dash-offset-input"].value),e["#dash-offset-slider"].mixed=!1,e["#dash-offset-input"].mixed=!1;var n=!0,a=!1,o;try{for(var i=r[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=s.value,l.style.setProperty("stroke-dashoffset",e["#dash-offset-input"].value)}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}}),this["#dash-offset-box"].addEventListener("changeend",l=function(){e["#dash-offset-box"].removeEventListener("change",s),e["#dash-offset-box"].removeEventListener("changeend",l),e._isChangingDashOffset=!1;var t=!0,o=!1,i;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-dashoffset",c)}catch(e){o=!0,i=e}finally{try{!t&&d.return&&d.return()}finally{if(o)throw i}}var p=!0,h=!1,m;try{for(var b=n[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,_reduceText4(g,a)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}})}},{key:"_onDashArraySelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Dash array");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)if(b=m.value,"text"===b.localName&&b.querySelector("tspan")){var x=b.querySelectorAll("tspan"),g=_getTspansIntersectedByRange4(n,b),v=0<g.length&&!n.collapsed?g:x,y=!0,f=!1,_=void 0;try{for(var w=v[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,a.push(A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var C=!0,S=!1,E;try{for(var T=a[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.style.setProperty("stroke-dasharray",this["#dash-array-select"].value),_reduceProperty4("stroke-dasharray",L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}var M=!0,D=!1,I;try{for(var V=t[Symbol.iterator](),N,R;!(M=(N=V.next()).done);M=!0)R=N.value,_reduceText4(R,n)}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}}},{key:"_onDashArrayInputsChangeStart",value:function(e){var t=this;this._ownerEditor.canvas.undoManager.checkpoint("Dash array");var n=this._getSelectedPaintableElements(),a=n.filter(function(e){return"text"===e.localName}),r=this._ownerEditor.canvas.selectedTextRange,o=e.target,i=[].concat(_toConsumableArray(this["#dash-array-inputs"].querySelectorAll("x-numberinput"))),s=[],l=!0,d=!1,u,c,p;try{for(var h=a[Symbol.iterator](),m,b;!(l=(m=h.next()).done);l=!0)b=m.value,_spanifyText5(b,r)}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}var x=!0,g=!1,v;try{for(var y=n[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)if(_=f.value,"text"===_.localName&&_.querySelector("tspan")){var w=_.querySelectorAll("tspan"),k=_getTspansIntersectedByRange4(r,_),A=0<k.length&&!r.collapsed?k:w,C=!0,S=!1,E=void 0;try{for(var T=A[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,s.push(L)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}else s.push(_)}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}this._isChangingDashArray=!0,o.addEventListener("change",u=function(){o.mixed=!1;var e=i.map(function(e){return e.value}).join(" ").trim(),t=!0,n=!1,a;try{for(var r=s[Symbol.iterator](),l,d;!(t=(l=r.next()).done);t=!0)d=l.value,d.style.setProperty("stroke-dasharray",e)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}),o.addEventListener("changeend",c=function(){o.removeEventListener("change",u),o.removeEventListener("changeend",c),t._isChangingDashArray=!1;var e=!0,n=!1,i;try{for(var l=s[Symbol.iterator](),d,p;!(e=(d=l.next()).done);e=!0)p=d.value,_reduceProperty4("stroke-dasharray",p)}catch(e){n=!0,i=e}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}var h=!0,m=!1,b;try{for(var x=a[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,_reduceText4(v,r)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}})}},{key:"_onNonScalingStrokeCheckboxChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Non-scaling stroke");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this["#non-scaling-stroke-checkbox"].toggled?"non-scaling-stroke":"none",a=this._ownerEditor.canvas.selectedTextRange,r=[],o=!0,i=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,_spanifyText5(u,a)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var c=!0,p=!1,h;try{for(var m=e[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)if(x=b.value,"text"===x.localName&&x.querySelector("tspan")&&a&&x.contains(a.commonAncestorContainer)){var g=x.querySelectorAll("tspan"),v=_getTspansIntersectedByRange4(a,x),y=a.collapsed?g:v;r.push.apply(r,_toConsumableArray(y))}else r.push(x)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}var f=!0,_=!1,w;try{for(var k=r[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.style.setProperty("vector-effect",n),_reduceProperty4("vector-effect",C)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}var S=!0,E=!1,T;try{for(var P=t[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,_reduceText4(M,a)}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}},{key:"_onLineCapButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Line cap");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)if(b=m.value,"text"===b.localName&&b.querySelector("tspan")){var x=b.querySelectorAll("tspan"),g=_getTspansIntersectedByRange4(n,b),v=0<g.length&&!n.collapsed?g:x;a.push.apply(a,_toConsumableArray(v))}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("stroke-linecap",this["#line-cap-buttons"].value),_reduceProperty4("stroke-linecap",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,S=!1,E;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText4(L,n)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}},{key:"_onLineJoinButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Line join");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var u=!0,c=!1,p;try{for(var h=e[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)if(b=m.value,"text"===b.localName&&b.querySelector("tspan")){var x=b.querySelectorAll("tspan"),g=_getTspansIntersectedByRange4(n,b),v=0<g.length&&!n.collapsed?g:x;a.push.apply(a,_toConsumableArray(v))}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("stroke-linejoin",this["#line-join-buttons"].value),_reduceProperty4("stroke-linejoin",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,S=!1,E;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText4(L,n)}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=[],n=[],a=Symbol(),r=Symbol();{var o=e.selectedTextRange,s=!0,l=!1,d;try{for(var u=this._getSelectedPaintableElements()[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,"text"===p.localName){var h=_getRenderedTextNodes5(p);if(o&&o.intersectsNode(p)){"backward"===o.direction&&h.reverse();var m=!0,b=!1,x=void 0;try{for(var g=h[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,o.intersectsNode(y)&&(!t.includes(y.parentElement)&&t.push(y.parentElement),!n.includes(y.parentElement)&&n.push(y.parentElement))}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}}else{var f=!0,_=!1,w=void 0;try{for(var k=h[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,!1===t.includes(C.parentElement)&&t.push(C.parentElement)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}n.push(p)}}else t.push(p),n.push(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var S=!0,E=!1,T;try{for(var P=new Set([].concat(t,n))[Symbol.iterator](),L;!(S=(L=P.next()).done);S=!0){var M=L.value,D=_getTransformToElement6(M,e.masterArtboard),I=_decomposeTransform13(D),V=I.scaleX,N=I.scaleY;M[a]=getComputedStyle(M),M[r]=(_abs8(V)+_abs8(N))/2}}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}{var R=t[0],z=t.slice(1);this["#panel-heading"].disabled=void 0===R}if(!1===this._isChangingOpacity){var G=t[0],B=t.slice(1);if(G){var O=G[a].strokeOpacity,j=_round18(_parseFloat7(O),2),q=!1,U=!0,H=!1,F;try{for(var $=B[Symbol.iterator](),Y;!(U=(Y=$.next()).done);U=!0){var X=Y.value,W=X[a].strokeOpacity,K=_round18(_parseFloat7(W),2);if(K!==j){q=!0;break}}}catch(e){H=!0,F=e}finally{try{!U&&$.return&&$.return()}finally{if(H)throw F}}this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].value=j,this["#opacity-slider"].mixed=q,this["#opacity-input"].disabled=!1,this["#opacity-input"].value=j}else this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].mixed=!1,this["#opacity-input"].disabled=!0,this["#opacity-input"].value=1}if(!1===this._isChangingWidth&&!1===e.transformHud.isScaling){{var Z=t[0],J=t.slice(1);if(Z){var Q=!1,ee=Z[a].getPropertyValue("vector-effect"),te=_parseFloat7(Z[a].getPropertyValue("stroke-width")),ne=_round18(Z[r]*te,3),ae=!0,re=!1,oe;try{for(var ie=J[Symbol.iterator](),se;!(ae=(se=ie.next()).done);ae=!0){var le=se.value,de=_parseFloat7(le[a].getPropertyValue("stroke-width")),ue=_round18(le[r]*de,3);if(ne!==ue){Q=!0;break}}}catch(e){re=!0,oe=e}finally{try{!ae&&ie.return&&ie.return()}finally{if(re)throw oe}}this["#width-slider"].value="non-scaling-stroke"===ee?te:ne,this["#width-slider"].disabled=!1,this["#width-slider"].mixed=Q,this["#width-input"].value=this["#width-slider"].value,this["#width-input"].disabled=!1}else this["#width-slider"].value=0,this["#width-slider"].disabled=!0,this["#width-slider"].mixed=!1,this["#width-input"].value=0,this["#width-input"].disabled=!0}{var ce=n[0],pe=n.slice(1);if(ce){var he=ce[a].getPropertyValue("vector-effect"),me=!1,be=!0,xe=!1,ge;try{for(var ve=pe[Symbol.iterator](),ye;!(be=(ye=ve.next()).done);be=!0){var fe=ye.value,_e=fe[a].getPropertyValue("vector-effect");if(_e!==he){me=!0;break}}}catch(e){xe=!0,ge=e}finally{try{!be&&ve.return&&ve.return()}finally{if(xe)throw ge}}this["#non-scaling-stroke-checkbox"].disabled=!1,this["#non-scaling-stroke-checkbox"].toggled="non-scaling-stroke"===he,this["#non-scaling-stroke-checkbox"].mixed=me,this["#non-scaling-stroke-label"].disabled=!1}else this["#non-scaling-stroke-checkbox"].disabled=!0,this["#non-scaling-stroke-checkbox"].toggled=!1,this["#non-scaling-stroke-checkbox"].mixed=!1,this["#non-scaling-stroke-label"].disabled=!0}this["#width-section-heading"].disabled=this["#width-slider"].disabled||this["#non-scaling-stroke-checkbox"].disabled}{var we=t[0],ke=t.slice(1);if(this["#line-section-heading"].disabled=void 0===we,this["#line-cap-box-heading"].disabled=void 0===we,this["#line-join-box-heading"].disabled=void 0===we,we){var Ae=!0,Ce=!1,Se;try{for(var Ee=this["#line-cap-buttons"].children[Symbol.iterator](),Te,Pe;!(Ae=(Te=Ee.next()).done);Ae=!0)Pe=Te.value,Pe.disabled=!1}catch(e){Ce=!0,Se=e}finally{try{!Ae&&Ee.return&&Ee.return()}finally{if(Ce)throw Se}}var Le=!0,Me=!1,De;try{for(var Ie=this["#line-join-buttons"].children[Symbol.iterator](),Ve,Ne;!(Le=(Ve=Ie.next()).done);Le=!0)Ne=Ve.value,Ne.disabled=!1}catch(e){Me=!0,De=e}finally{try{!Le&&Ie.return&&Ie.return()}finally{if(Me)throw De}}var Re=we[a].getPropertyValue("stroke-linecap"),ze=we[a].getPropertyValue("stroke-linejoin"),Ge=!1,Be=!1,Oe=!0,je=!1,qe;try{for(var Ue=ke[Symbol.iterator](),He;!(Oe=(He=Ue.next()).done);Oe=!0){var Fe=He.value,$e=Fe[a].getPropertyValue("stroke-linecap"),Ye=Fe[a].getPropertyValue("stroke-linejoin");$e!==Re&&(Ge=!0),Ye!==ze&&(Be=!0)}}catch(e){je=!0,qe=e}finally{try{!Oe&&Ue.return&&Ue.return()}finally{if(je)throw qe}}var Xe=!0,We=!1,Ke;try{for(var Ze=this["#line-cap-buttons"].children[Symbol.iterator](),Je,Qe;!(Xe=(Je=Ze.next()).done);Xe=!0)Qe=Je.value,Qe.value===Re?(Qe.toggled=!0,Qe.mixed=Ge):(Qe.toggled=!1,Qe.mixed=!1)}catch(e){We=!0,Ke=e}finally{try{!Xe&&Ze.return&&Ze.return()}finally{if(We)throw Ke}}var et=!0,tt=!1,nt;try{for(var at=this["#line-join-buttons"].children[Symbol.iterator](),rt,ot;!(et=(rt=at.next()).done);et=!0)ot=rt.value,ot.value===ze?(ot.toggled=!0,ot.mixed=Be):(ot.toggled=!1,ot.mixed=!1)}catch(e){tt=!0,nt=e}finally{try{!et&&at.return&&at.return()}finally{if(tt)throw nt}}}else{var it=!0,st=!1,lt;try{for(var dt=this["#line-cap-buttons"].children[Symbol.iterator](),ut,ct;!(it=(ut=dt.next()).done);it=!0)ct=ut.value,ct.disabled=!0,ct.toggled=!1,ct.mixed=!1}catch(e){st=!0,lt=e}finally{try{!it&&dt.return&&dt.return()}finally{if(st)throw lt}}var pt=!0,ht=!1,mt;try{for(var bt=this["#line-join-buttons"].children[Symbol.iterator](),xt,gt;!(pt=(xt=bt.next()).done);pt=!0)gt=xt.value,gt.disabled=!0,gt.toggled=!1,gt.mixed=!1}catch(e){ht=!0,mt=e}finally{try{!pt&&bt.return&&bt.return()}finally{if(ht)throw mt}}}}if(!1===this._isChangingDashOffset){var vt=t[0],yt=t.slice(1);if(this["#dash-section-heading"].disabled=void 0===vt,this["#dash-array-box-heading"].disabled=void 0===vt,this["#dash-array-select"].disabled=void 0===vt,vt){var ft=!0,_t=!1,wt;try{for(var kt=this["#dash-array-inputs"].children[Symbol.iterator](),At;!(ft=(At=kt.next()).done);ft=!0){var Ct=At.value,St=!0,Et=!1,Tt=void 0;try{for(var Pt=Ct.children[Symbol.iterator](),Lt,Mt;!(St=(Lt=Pt.next()).done);St=!0)Mt=Lt.value,Mt.disabled=!1}catch(e){Et=!0,Tt=e}finally{try{!St&&Pt.return&&Pt.return()}finally{if(Et)throw Tt}}}}catch(e){_t=!0,wt=e}finally{try{!ft&&kt.return&&kt.return()}finally{if(_t)throw wt}}var Dt=this["#dash-array-inputs"].querySelectorAll("x-numberinput"),It=vt[a].getPropertyValue("stroke-dasharray"),Vt=[];"none"!==It&&(Vt=It.split(",").map(function(e){return _parseFloat7(e.trim())}));for(var Nt=0;6>Nt;Nt+=1){var i=void 0===Vt[Nt]?null:Vt[Nt],Rt=Dt[Nt];Rt.value=i,Rt.disabled=Nt>Vt.length}this["#dash-array-select"].value=dashArrayPresets.includes(It)?It:null}else{var zt=!0,Gt=!1,Bt;try{for(var Ot=this["#dash-array-inputs"].children[Symbol.iterator](),jt;!(zt=(jt=Ot.next()).done);zt=!0){var qt=jt.value,Ut=!0,Ht=!1,Ft=void 0;try{for(var $t=qt.children[Symbol.iterator](),Yt,Xt;!(Ut=(Yt=$t.next()).done);Ut=!0)Xt=Yt.value,Xt.disabled=!0}catch(e){Ht=!0,Ft=e}finally{try{!Ut&&$t.return&&$t.return()}finally{if(Ht)throw Ft}}}}catch(e){Gt=!0,Bt=e}finally{try{!zt&&Ot.return&&Ot.return()}finally{if(Gt)throw Bt}}}if(vt){var Wt=vt[a].getPropertyValue("stroke-dashoffset"),Kt=!1,Zt=!0,Jt=!1,Qt;try{for(var en=yt[Symbol.iterator](),tn;!(Zt=(tn=en.next()).done);Zt=!0){var nn=tn.value,an=nn[a].getPropertyValue("stroke-dashoffset");if(an!==Wt){Kt=!0;break}}}catch(e){Jt=!0,Qt=e}finally{try{!Zt&&en.return&&en.return()}finally{if(Jt)throw Qt}}this["#dash-offset-slider"].disabled=!1,this["#dash-offset-slider"].mixed=Kt,this["#dash-offset-slider"].value=_parseFloat7(Wt),this["#dash-offset-input"].disabled=!1,this["#dash-offset-slider"].mixed=Kt,this["#dash-offset-input"].value=_parseFloat7(Wt)}else this["#dash-offset-slider"].disabled=!0,this["#dash-offset-slider"].mixed=!1,this["#dash-offset-input"].disabled=!0,this["#dash-offset-input"].mixed=!1}}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,_paintableElementNames4.includes(l.localName)?e.push(l):"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-strokepanel",BXStrokePanelElement)}}{{var _BoxySVG$utils$elemen16=BoxySVG.utils.element,_html12=_BoxySVG$utils$elemen16.html,_closest17=_BoxySVG$utils$elemen16.closest,_round19=BoxySVG.utils.math.round,_reduceProperty5=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text7=BoxySVG.utils.text,_getRenderedTextNodes6=_BoxySVG$utils$text7.getRenderedTextNodes,_getTspansIntersectedByRange5=_BoxySVG$utils$text7.getTspansIntersectedByRange,_reduceText5=_BoxySVG$utils$text7.reduceText,_spanifyText6=_BoxySVG$utils$text7.spanifyText,_throttle6=BoxySVG.utils.time.throttle,_parseFloat8=Number.parseFloat,compositableElementNames=["rect","circle","ellipse","line","path","polygon","polyline","image","text","tspan","use","svg","a","g"],_shadowTemplate9=_html12(_templateObject24,window.theme,window.theme),BXCompositingPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle6(e._update,200,e),e._isChangingOpacity=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate9.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#opacity-box"].addEventListener("changestart",function(t){return e._onOpacityChangeStart(t)}),e["#blend-mode-select"].addEventListener("change",function(){return e._onBlendModeSelectChange()}),e["#isolation-checkbox"].addEventListener("change",function(){return e._onIsolationCheckboxChange()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest17(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Opacity");var t=this._getSelectedCompositableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],o=[],i=!0,s=!1,l,d,u;try{for(var c=t[Symbol.iterator](),p,h;!(i=(p=c.next()).done);i=!0)if(h=p.value,"text"===h.localName&&a&&h.contains(a.commonAncestorContainer)){_spanifyText6(h,a),r.push(h);var m=h.querySelectorAll("tspan"),b=_getTspansIntersectedByRange5(a,h),x=a.collapsed?m:b;o.push.apply(o,_toConsumableArray(x))}else o.push(h)}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",l=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,r;try{for(var i=o[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=s.value,l.style.setProperty("opacity",e["#opacity-slider"].value)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}),this["#opacity-section"].addEventListener("changeend",d=function(){e["#opacity-section"].removeEventListener("change",l),e["#opacity-section"].removeEventListener("changeend",d),e._isChangingOpacity=!1;var t=!0,n=!1,i;try{for(var s=o[Symbol.iterator](),u,c;!(t=(u=s.next()).done);t=!0)c=u.value,_reduceProperty5("opacity",c)}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}var p=!0,h=!1,m;try{for(var b=r[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,_reduceText5(g,a)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}})}},{key:"_onBlendModeSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Blend mode");var e=this._ownerEditor.canvas.selectedTextRange,t=this["#blend-mode-select"].value,n=!0,a=!1,r;try{for(var o=this._getSelectedCompositableElements()[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"text"===s.localName&&e&&s.contains(e.commonAncestorContainer)){_spanifyText6(s,e);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange5(e,s),u=e.collapsed?l:d,c=!0,p=!1,h=void 0;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.style.setProperty("mix-blend-mode",t)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}_reduceText5(s,e)}else s.style.setProperty("mix-blend-mode",t),_reduceProperty5("mix-blend-mode",s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onIsolationCheckboxChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Isolate");var e=this._ownerEditor.canvas.selectedTextRange,t=this["#isolation-checkbox"].checked?"isolate":"auto",n=!0,a=!1,r;try{for(var o=this._getSelectedCompositableElements()[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"text"===s.localName&&e&&s.contains(e.commonAncestorContainer)){_spanifyText6(s,e);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange5(e,s),u=e.collapsed?l:d,c=!0,p=!1,h=void 0;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.style.setProperty("isolation",t)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}_reduceText5(s,e)}else s.style.setProperty("isolation",t),_reduceProperty5("isolation",s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_update",value:function(){var e=[],t=Symbol();{var n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,o;try{for(var i=this._getSelectedCompositableElements()[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,"text"!==l.localName)e.push(l);else if(n&&n.intersectsNode(l)){var d=_getRenderedTextNodes6(l);"backward"===n.direction&&d.reverse();var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,n.intersectsNode(b)&&!e.includes(b.parentElement)&&e.push(b.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else e.push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var x=!0,g=!1,v;try{for(var y=e[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,_[t]=getComputedStyle(_)}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}}if(this["#panel-heading"].disabled=0===e.length,!1===this._isChangingOpacity){var w=e[0],k=e.slice(1),A=w?_round19(_parseFloat8(w[t].opacity),2):1,C=!1,S=!0,E=!1,T;try{for(var P=k[Symbol.iterator](),L;!(S=(L=P.next()).done);S=!0){var M=L.value,D=M?_round19(_parseFloat8(M[t].opacity),2):1;D!==A&&(C=!0)}}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}w?(this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].value=A,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].mixed=C,this["#opacity-input"].value=A,this["#opacity-input"].disabled=!1,this["#opacity-input"].mixed=C):(this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1,this["#opacity-input"].value=1,this["#opacity-input"].disabled=!0,this["#opacity-input"].mixed=!1)}{var I=e[0],V=e.slice(1);if(I){var N=I[t],R=N.getPropertyValue("mix-blend-mode"),z=N.getPropertyValue("isolation"),G=!1,B=!1,O=!0,j=!1,q;try{for(var U=V[Symbol.iterator](),H;!(O=(H=U.next()).done);O=!0){var F=H.value,$=F[t],Y=$.getPropertyValue("mix-blend-mode"),X=$.getPropertyValue("isolation");Y!==R&&(G=!0),X!==z&&(B=!0)}}catch(e){j=!0,q=e}finally{try{!O&&U.return&&U.return()}finally{if(j)throw q}}this["#blend-mode-section-heading"].disabled=!1,this["#blend-mode-select"].value=I[t].getPropertyValue("mix-blend-mode"),this["#blend-mode-select"].disabled=!1,this["#blend-mode-select"].mixed=G,this["#isolation-checkbox"].checked="isolate"===z,this["#isolation-checkbox"].disabled=!1,this["#isolation-checkbox"].mixed=B,this["#isolation-label"].disabled=!1}else this["#blend-mode-section-heading"].disabled=!0,this["#blend-mode-select"].value="normal",this["#blend-mode-select"].disabled=!0,this["#blend-mode-select"].mixed=!1,this["#isolation-checkbox"].disabled=!0,this["#isolation-checkbox"].checked=!1,this["#isolation-checkbox"].mixed=!1,this["#isolation-label"].disabled=!0}}},{key:"_getSelectedCompositableElements",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this._ownerEditor.canvas.outermostSelectedElements[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=i.localName;compositableElementNames.includes(s)&&e.push(i)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-compositingpanel",BXCompositingPanelElement)}}{{var _getUserBBox6=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen17=BoxySVG.utils.element,_html13=_BoxySVG$utils$elemen17.html,_svg4=_BoxySVG$utils$elemen17.svg,_closest18=_BoxySVG$utils$elemen17.closest,_BoxySVG$utils$fontGe2=BoxySVG.utils.fontGeneral,_fetchFontData3=_BoxySVG$utils$fontGe2.fetchFontData,_getFontBaseline=_BoxySVG$utils$fontGe2.getFontBaseline,_matchFontWeight=_BoxySVG$utils$fontGe2.matchFontWeight,_normalizeFontWeight3=_BoxySVG$utils$fontGe2.normalizeFontWeight,_getGoogleFontsRegistry2=BoxySVG.utils.fontGoogle.getGoogleFontsRegistry,_round20=BoxySVG.utils.math.round,_BoxySVG$utils$parsin3=BoxySVG.utils.parsing,_parseFontFamily2=_BoxySVG$utils$parsin3.parseFontFamily,_parseLength=_BoxySVG$utils$parsin3.parseLength,_BoxySVG$utils$text8=BoxySVG.utils.text,_getRenderedTextNodes7=_BoxySVG$utils$text8.getRenderedTextNodes,_getTspansIntersectedByRange6=_BoxySVG$utils$text8.getTspansIntersectedByRange,_reduceText6=_BoxySVG$utils$text8.reduceText,_spanifyText7=_BoxySVG$utils$text8.spanifyText,_BoxySVG$utils$time6=BoxySVG.utils.time,_sleep6=_BoxySVG$utils$time6.sleep,_throttle7=_BoxySVG$utils$time6.throttle,_decomposeTransform16=BoxySVG.utils.transformDecomposition.decomposeTransform,_BoxySVG$utils$transf8=BoxySVG.utils.transformGeneral,_getTransformToElement7=_BoxySVG$utils$transf8.getTransformToElement,_getComputedTransform10=_BoxySVG$utils$transf8.getComputedTransform,_parseFloat9=Number.parseFloat,_entries3=Object.entries,_shadowTemplate10=_html13(_templateObject25,window.theme,window.theme),BXTypographyPanelElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._update200Th=_throttle7(n._update,200,n),n._isImportingFontFamily=!1,n._isChangingFontSize=!1,n._isChangingLetterSpacing=!1,n._isChangingWordSpacing=!1,n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.append(document.importNode(_shadowTemplate10.content,!0));var e=!0,a=!1,r;try{for(var o=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(e=(i=o.next()).done);e=!0)s=i.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(a)throw r}}return n["#font-family-popover"].addEventListener("open",function(){return n._onFontFamilyPopoverOpen()}),n["#font-family-popover"].addEventListener("close",function(){return n._onFontFamilyPopoverClose()}),n["#font-family-picker"].addEventListener("change",function(){return n._onFontFamilyChange()}),n["#font-family-hint"].addEventListener("click",function(e){return n._onFontFamilyHintClick(e)}),n["#font-weight-select"].addEventListener("change",function(){return n._onFontWeightSelectChange()}),n["#font-style-button"].addEventListener("toggle",function(){return n._onFontStyleButtonToggle()}),n["#font-size-box"].addEventListener("changestart",function(){return n._onFontSizeChangeStart()}),n["#text-decoration-buttons"].addEventListener("toggle",function(t){return n._onTextDecorationButtonsToggle(t)}),n["#text-transform-buttons"].addEventListener("toggle",function(t){return n._onTextTransformButtonsToggle(t)}),n["#text-on-path-button"].addEventListener("toggle",function(){return n._onTextOnPathButtonToggle()}),n["#letter-spacing-slider"].addEventListener("changestart",function(){return n._onLetterSpacingChangeStart()}),n["#letter-spacing-input"].addEventListener("changestart",function(){return n._onLetterSpacingChangeStart()}),n["#word-spacing-slider"].addEventListener("changestart",function(){return n._onWordSpacingChangeStart()}),n["#word-spacing-input"].addEventListener("changestart",function(){return n._onWordSpacingChangeStart()}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest18(this,"bx-editor"),this._ownerApp=_closest18(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;this["#font-family-picker"].enabled=!0,t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this["#font-family-picker"].enabled=!1,e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onFontFamilyPopoverOpen",value:async function(){this["#font-family-picker"].enabled=!0,await _sleep6(10),this["#font-family-picker"].focus()}},{key:"_onFontFamilyPopoverClose",value:async function(){this["#font-family-picker"].enabled=!1,await _sleep6(200),this._ownerEditor.canvas.fontsManager.removeUnusedFamilies(!0,!1),"bx-chromeapp"!==this._ownerApp.localName&&this._ownerEditor.canvas.fontsManager.embedLinkedFonts(!0,!1)}},{key:"_onFontFamilyChange",value:async function(){var e=this._ownerEditor.canvas,t=this["#font-family-picker"].value,n=e.fontsManager.getFamilies();if(this._isImportingFontFamily=!0,this._ownerEditor.canvas.undoManager.checkpoint("Font family"),!1===n.includes(t)){var a=[],r=await _getGoogleFontsRegistry2(),o=r.items.find(function(e){return e.family===t});if(o){var i=!0,s=!1,l;try{for(var d=_entries3(o.urls)[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=_slicedToArray(u.value,2),p=c[0],h=c[1],m=p.substring(0,3),b=p.includes("italic")?"italic":"normal",x=void 0;if("bx-chromeapp"!==this._ownerApp.localName)x="url("+h+")";else{var g=await _fetchFontData3(h);x="url(\""+g+"\")"}var v=new FontFace(t,x,{weight:m,style:b});v.src=x,a.push(v)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}this._ownerEditor.canvas.fontsManager.addFonts(a,!0),await Promise.all(a.map(function(e){return e.load()}))}}{var y=this._getSelectedTexts(),f=this._ownerEditor.canvas.selectedTextRange,_=!0,w=!1,k;try{for(var A=y[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0){S=C.value,_spanifyText7(S,f);var E=S.querySelectorAll("tspan"),T=_getTspansIntersectedByRange6(f,S),P=0<T.length&&!f.collapsed?T:E,L=!0,M=!1,D=void 0;try{for(var I=P[Symbol.iterator](),V,N;!(L=(V=I.next()).done);L=!0)N=V.value,N.style.setProperty("font-family","\""+t+"\"")}catch(e){M=!0,D=e}finally{try{!L&&I.return&&I.return()}finally{if(M)throw D}}_reduceText6(S,f)}}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}}this._isImportingFontFamily=!1}},{key:"_onFontFamilyHintClick",value:function(e){0===e.button&&"defs-panel-span"===e.target.id&&(this._ownerEditor.panelsDock.value="defs-panel")}},{key:"_onFontWeightSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Font weight");var e=this._getSelectedTexts(),t=this["#font-weight-select"].value,n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,h=!1,m=void 0;try{for(var b=c[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.style.setProperty("font-weight",t)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}_reduceText6(l,n)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"_onFontStyleButtonToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Font style");var e=this._getSelectedTexts(),t=this["#font-style-button"].toggled?"italic":"normal",n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,h=!1,m=void 0;try{for(var b=c[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.style.setProperty("font-style",t)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}_reduceText6(l,n)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"_onFontSizeChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Font size");var t=Symbol(),n=Symbol(),a=this._getSelectedTexts(),r=this._ownerEditor.canvas.selectedTextRange,o=!0,i=!1,s,l,d;try{for(var u=a[Symbol.iterator](),c,p;!(o=(c=u.next()).done);o=!0){p=c.value,_spanifyText7(p,r);var h=p.querySelectorAll("tspan"),m=_getTspansIntersectedByRange6(r,p),b=0<m.length&&!r.collapsed?m:h;p[t]=b,p[n]=_decomposeTransform16(_getTransformToElement7(p,this._ownerEditor.canvas.currentArtboard).inverse()).scaleY}}catch(e){i=!0,d=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw d}}this._isChangingFontSize=!0,this["#font-size-box"].addEventListener("change",s=function(){event.target===e["#font-size-slider"]?e["#font-size-input"].value=e["#font-size-slider"].value:event.target===e["#font-size-input"]&&(e["#font-size-slider"].value=e["#font-size-input"].value),e["#font-size-input"].mixed=!1,e["#font-size-slider"].mixed=!1;var r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d[t],c=d[n],p=e["#font-size-input"].value*c;if(0<u.length){var h=!0,m=!1,b=void 0;try{for(var x=u[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,v.style.setProperty("font-size",p)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}else d.style.setProperty("font-size",p)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}),this["#font-size-box"].addEventListener("changeend",l=function(){e["#font-size-box"].removeEventListener("change",s),e["#font-size-box"].removeEventListener("changeend",l);var t=!0,n=!1,o;try{for(var i=a[Symbol.iterator](),d,u;!(t=(d=i.next()).done);t=!0)u=d.value,_reduceText6(u,r)}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}e._isChangingFontSize=!1})}},{key:"_onTextDecorationButtonsToggle",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Text decoration");var t=e.detail,n=t.toggled,a=t.mixed,r=t.value,o=this._getSelectedTexts(),i=this._ownerEditor.canvas.selectedTextRange,s=!0,l=!1,d;try{for(var u=o[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,i);var h=[];if(i&&p.contains(i.commonAncestorContainer)){var m=p.querySelectorAll("tspan"),b=_getTspansIntersectedByRange6(i,p),x=i.collapsed?m:b;h.push.apply(h,_toConsumableArray(x))}else h.push(p);var g=!0,v=!1,y=void 0;try{for(var f=h[Symbol.iterator](),_;!(g=(_=f.next()).done);g=!0){var w=_.value,k=getComputedStyle(w).getPropertyValue("text-decoration"),A=k.includes("underline"),C=k.includes("line-through"),S=k.includes("overline");"underline"===t.value?A=t.toggled:"line-through"===t.value?C=t.toggled:"overline"===t.value&&(S=t.toggled);var E=[];A&&E.push("underline"),C&&E.push("line-through"),S&&E.push("overline"),0===E.length?w.style.removeProperty("text-decoration"):w.style.setProperty("text-decoration",E.join(" "))}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}_reduceText6(p,i)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}},{key:"_onTextTransformButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Text transform");var e=this._getSelectedTexts(),t=this["#text-transform-buttons"].value||"none",n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,h=!1,m=void 0;try{for(var b=c[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.style.setProperty("text-transform",t)}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}_reduceText6(l,n)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"_onTextOnPathButtonToggle",value:async function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Put text on path");var t=!0,n=!1,a;try{for(var r=this._getSelectedTexts()[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=i.querySelector("textPath"),l=getComputedStyle(i),u=_parseFloat9(l.fontSize),c=_parseFontFamily2(l.fontFamily)[0],p=_normalizeFontWeight3(l.fontWeight),h=l.fontStyle,m=e.fontsManager.getMatchedFont(c,p,h),b=m?await _getFontBaseline(m):1,g=_getUserBBox6(i);if(s){var v=e.artboards.querySelector(s.href.baseVal),f=g.x,x=g.y+g.height*b;v.remove(),i.innerHTML=s.innerHTML,i.setAttribute("x",f),i.setAttribute("y",x)}else{var y=_getComputedTransform10(i),_=new SVGPoint(g.x,g.y+g.height*b),w=new SVGPoint(g.x+g.width/2,g.y),k=new SVGPoint(g.x+g.width,g.y+g.height*b);_=_.matrixTransform(y),w=w.matrixTransform(y),k=k.matrixTransform(y);var A="M "+_.x+" "+_.y+" Q "+w.x+" "+w.y+" "+k.x+" "+k.y,d=e.generateUniqueID("text-path"),C=_svg4(_templateObject26,d,A);e.createDefsIfMissing(),e.defs.append(C),i.innerHTML="<textPath href=\"#"+d+"\">"+i.innerHTML+"</textPath>";var S=_decomposeTransform16(y),E=S.scaleY;i.style.fontSize=_round20(u*E,2),i.removeAttribute("transform"),i.removeAttribute("x"),i.removeAttribute("y")}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}e.selectedElements=[].concat(_toConsumableArray(e.selectedElements))}},{key:"_onLetterSpacingChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=this._getSelectedTexts(),a=t.selectedTextRange,r=Symbol(),o,i;t.undoManager.checkpoint("Letter spacing");var s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,a);var h=p.querySelectorAll("tspan"),m=_getTspansIntersectedByRange6(a,p),b=0<m.length&&!a.collapsed?m:h;p[r]=b}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}this._isChangingLetterSpacing=!0,this["#letter-spacing-box"].addEventListener("change",o=function(t){t.target===e["#letter-spacing-slider"]?e["#letter-spacing-input"].value=e["#letter-spacing-slider"].value:t.target===e["#letter-spacing-input"]&&(e["#letter-spacing-slider"].value=e["#letter-spacing-input"].value),e["#letter-spacing-slider"].mixed=!1,e["#letter-spacing-input"].mixed=!1;var a=!0,o=!1,i;try{for(var s=n[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0){var d=l.value,u=d[r];if(0<u.length){var c=!0,p=!1,h=void 0;try{for(var m=u[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x.style.setProperty("letter-spacing",e["#letter-spacing-input"].value)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}else d.style.setProperty("letter-spacing",e["#letter-spacing-input"].value)}}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}}),this["#letter-spacing-box"].addEventListener("changeend",i=function(){e["#letter-spacing-box"].removeEventListener("change",o),e["#letter-spacing-box"].removeEventListener("changeend",i);var a=!0,r=!1,s;try{for(var l=n[Symbol.iterator](),d,u;!(a=(d=l.next()).done);a=!0)u=d.value,_reduceText6(u,t.selectedTextRange)}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}e._isChangingLetterSpacing=!1})}},{key:"_onWordSpacingChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=this._getSelectedTexts(),a=t.selectedTextRange,r=Symbol(),o,i;t.undoManager.checkpoint("Word spacing");var s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,a);var h=p.querySelectorAll("tspan"),m=_getTspansIntersectedByRange6(a,p),b=0<m.length&&!a.collapsed?m:h;p[r]=b}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}this._isChangingWordSpacing=!0,this["#word-spacing-box"].addEventListener("change",o=function(){event.target===e["#word-spacing-slider"]?e["#word-spacing-input"].value=e["#word-spacing-slider"].value:event.target===e["#word-spacing-input"]&&(e["#word-spacing-slider"].value=e["#word-spacing-input"].value),e["#word-spacing-slider"].mixed=!1,e["#word-spacing-input"].mixed=!1;var t=!0,a=!1,o;try{for(var i=n[Symbol.iterator](),s;!(t=(s=i.next()).done);t=!0){var l=s.value,d=l[r];if(0<d.length){var u=!0,c=!1,p=void 0;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,b.style.setProperty("word-spacing",e["#word-spacing-slider"].value)}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}else l.style.setProperty("word-spacing",e["#word-spacing-slider"].value)}}catch(e){a=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}}),this["#word-spacing-box"].addEventListener("changeend",i=function(){e["#word-spacing-box"].removeEventListener("change",o),e["#word-spacing-box"].removeEventListener("changeend",i);var a=!0,r=!1,s;try{for(var l=n[Symbol.iterator](),d,u;!(a=(d=l.next()).done);a=!0)u=d.value,_reduceText6(u,t.selectedTextRange)}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}e._isChangingWordSpacing=!1})}},{key:"_update",value:function(){var e=this,t=[],n=[],a=this._getSelectedTexts(),r=Symbol();{var o=this._ownerEditor.canvas.selectedTextRange,i=!0,s=!1,l;try{for(var d=a[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p=_getRenderedTextNodes7(c);if(o&&o.intersectsNode(c)){"backward"===o.direction&&p.reverse();var h=!0,m=!1,b=void 0;try{for(var x=p[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,o.intersectsNode(v)){var y=v.closest("tspan, text");t.includes(v.parentElement)||t.push(v.parentElement),n.includes(y)||n.push(y)}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,t.includes(C.parentElement)||t.push(C.parentElement)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}n.push(c)}}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}var S=!0,E=!1,T;try{for(var P=new Set([].concat(t,n))[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,M[r]=getComputedStyle(M)}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}if(!1===this._isChangingFontSize&&!1===this._isImportingFontFamily){var D=t[0],I=t.slice(1),V=function(t){var n=e._ownerEditor.canvas.fontsManager.getWeights(t);return 0===n.length&&(n=["400","700"]),1===n.length&&"400"===n[0]&&n.push("700"),n};if(D){var N=D[r],R=_parseFontFamily2(N.getPropertyValue("font-family"))[0],z=_parseLength(N.getPropertyValue("font-size"))[0],G=N.getPropertyValue("font-variant"),B=N.getPropertyValue("font-style"),O=_normalizeFontWeight3(N.getPropertyValue("font-weight")),j=V(R),q=_matchFontWeight(O,j),U=_getTransformToElement7(D.closest("text"),this._ownerEditor.canvas.currentArtboard),H=_decomposeTransform16(U),F=H.scaleY,$=_round20(z*F,2),Y=!1,X=!1,W=!1,K=!1,Z=!1,J=!0,Q=!1,ee;try{for(var te=I[Symbol.iterator](),ne;!(J=(ne=te.next()).done);J=!0){var ae=ne.value,re=ae[r],oe=re.getPropertyValue("font-family"),ie=_parseFontFamily2(oe)[0],se=_parseLength(re.getPropertyValue("font-size"))[0],le=re.getPropertyValue("font-variant"),de=re.getPropertyValue("font-style"),ue=_normalizeFontWeight3(re.getPropertyValue("font-weight")),ce=V(ie),pe=_matchFontWeight(ue,ce);ie!==R&&(Y=!0),se!==z&&(X=!0),pe!==q&&(W=!0),le!==G&&(K=!0),de!==B&&(Z=!0)}}catch(e){Q=!0,ee=e}finally{try{!J&&te.return&&te.return()}finally{if(Q)throw ee}}this["#panel-heading"].disabled=!1,this["#font-section-heading"].disabled=!1,this["#font-family-heading"].disabled=!1,this["#font-family-button"].disabled=!1,this["#font-family-button"].mixed=Y,this["#font-family-label"].textContent=R,this["#font-family-label"].style.fontFamily="\""+R+"\"",this["#font-family-picker"].enabled=!0,this["#font-family-picker"].value=R,this["#font-family-hint"].removeAttribute("disabled"),this["#font-face-heading"].disabled=!1;var he=!0,me=!1,be;try{for(var xe=this["#font-weight-menu"].children[Symbol.iterator](),ge,ve;!(he=(ge=xe.next()).done);he=!0)ve=ge.value,ve.hidden=!1===j.includes(ve.value)}catch(e){me=!0,be=e}finally{try{!he&&xe.return&&xe.return()}finally{if(me)throw be}}this["#font-weight-select"].disabled=!1,this["#font-weight-select"].value=q,this["#font-weight-select"].mixed=W,this["#font-style-button"].toggled="italic"===B,this["#font-style-button"].mixed=Z,this["#font-style-button"].disabled=!1,this["#font-size-heading"].disabled=!1,this["#font-size-slider"].disabled=!1,this["#font-size-slider"].value=$,this["#font-size-slider"].mixed=X,this["#font-size-input"].disabled=!1,this["#font-size-input"].value=$,this["#font-size-input"].mixed=X}else this["#panel-heading"].disabled=!0,this["#font-section-heading"].disabled=!0,this["#font-family-heading"].disabled=!0,this["#font-family-button"].disabled=!0,this["#font-family-button"].mixed=!1,this["#font-family-label"].textContent="System",this["#font-family-label"].style.fontFamily=null,this["#font-family-picker"].enabled=!1,this["#font-family-picker"].value=null,this["#font-family-hint"].setAttribute("disabled",""),this["#font-face-heading"].disabled=!0,this["#font-weight-select"].disabled=!0,this["#font-style-button"].disabled=!0,this["#font-style-button"].mixed=!1,this["#font-size-heading"].disabled=!0,this["#font-size-slider"].value=13,this["#font-size-slider"].mixed=!1,this["#font-size-slider"].disabled=!0,this["#font-size-input"].disabled=!0,this["#font-size-input"].value=13,this["#font-size-input"].mixed=!1}this["#text-section-heading"].disabled=0===a.length;{var ye=n[0],fe=n.slice(1);if(ye){var _e=ye[r].getPropertyValue("text-decoration"),we=!1,ke=!1,Ae=!1,Ce=!0,Se=!1,Ee;try{for(var Te=fe[Symbol.iterator](),Pe;!(Ce=(Pe=Te.next()).done);Ce=!0){var Le=Pe.value,Me=Le[r].getPropertyValue("text-decoration");_e!==Me&&(_e.includes("underline")!==Me.includes("underline")&&(we=!0),_e.includes("line-through")!==Me.includes("line-through")&&(ke=!0),_e.includes("overline")!==Me.includes("overline")&&(Ae=!0))}}catch(e){Se=!0,Ee=e}finally{try{!Ce&&Te.return&&Te.return()}finally{if(Se)throw Ee}}this["#text-decoration-heading"].disabled=!1,this["#underline-button"].disabled=!1,this["#underline-button"].mixed=we,this["#underline-button"].toggled=_e.includes("underline"),this["#line-through-button"].disabled=!1,this["#line-through-button"].mixed=ke,this["#line-through-button"].toggled=_e.includes("line-through"),this["#overline-button"].disabled=!1,this["#overline-button"].mixed=Ae,this["#overline-button"].toggled=_e.includes("overline")}else this["#text-decoration-heading"].disabled=!0,this["#underline-button"].disabled=!0,this["#underline-button"].mixed=!1,this["#underline-button"].toggled=!1,this["#line-through-button"].disabled=!0,this["#line-through-button"].mixed=!1,this["#line-through-button"].toggled=!1,this["#overline-button"].disabled=!0,this["#overline-button"].mixed=!1,this["#overline-button"].toggled=!1}{var De=t[0],Ie=t.slice(1);if(De){var Ve=De[r].getPropertyValue("text-transform"),Ne=!1,Re=!0,ze=!1,Ge;try{for(var Be=Ie[Symbol.iterator](),Oe;!(Re=(Oe=Be.next()).done);Re=!0){var je=Oe.value,qe=je[r].getPropertyValue("text-transform");qe!==Ve&&(Ne=!0)}}catch(e){ze=!0,Ge=e}finally{try{!Re&&Be.return&&Be.return()}finally{if(ze)throw Ge}}this["#text-transform-heading"].disabled=!1,this["#capitalize-button"].disabled=!1,this["#capitalize-button"].mixed=Ne,this["#capitalize-button"].toggled="capitalize"===Ve,this["#uppercase-button"].disabled=!1,this["#uppercase-button"].toggled="uppercase"===Ve,this["#uppercase-button"].mixed=Ne,this["#lowercase-button"].disabled=!1,this["#lowercase-button"].toggled="lowercase"===Ve,this["#lowercase-button"].mixed=Ne}else this["#text-transform-heading"].disabled=!0,this["#capitalize-button"].disabled=!0,this["#capitalize-button"].toggled=!1,this["#capitalize-button"].mixed=!1,this["#uppercase-button"].disabled=!0,this["#uppercase-button"].toggled=!1,this["#uppercase-button"].mixed=!1,this["#lowercase-button"].disabled=!0,this["#lowercase-button"].toggled=!1,this["#lowercase-button"].mixed=!1}if(0===a.length)this["#text-on-path-button"].toggled=!1,this["#text-on-path-button"].disabled=!0;else{var Ue=!1,He=null!==a[0].querySelector("textPath"),Fe=!0,$e=!1,Ye;try{for(var Xe=a[Symbol.iterator](),We;!(Fe=(We=Xe.next()).done);Fe=!0){var Ke=We.value,Ze=null!==Ke.querySelector("textPath");if(Ze!=He){Ue=!0;break}}}catch(e){$e=!0,Ye=e}finally{try{!Fe&&Xe.return&&Xe.return()}finally{if($e)throw Ye}}this["#text-on-path-button"].toggled=He,this["#text-on-path-button"].disabled=!1,this["#text-on-path-button"].mixed=Ue}if(!1===this._isChangingLetterSpacing&&!1===this._isChangingWordSpacing){var Je=t[0],Qe=t.slice(1);if(Je){var et=Je[r].getPropertyValue("letter-spacing"),tt=Je[r].getPropertyValue("word-spacing");et="normal"===et?0:_parseFloat9(et),tt="normal"===tt?0:_parseFloat9(tt);var nt=!1,at=!1,rt=!0,ot=!1,it;try{for(var st=Qe[Symbol.iterator](),lt;!(rt=(lt=st.next()).done);rt=!0){var dt=lt.value,ut=dt[r].getPropertyValue("letter-spacing"),ct=dt[r].getPropertyValue("word-spacing");ut="normal"===ut?0:_parseFloat9(ut),ct="normal"===ct?0:_parseFloat9(ct),ut!==et&&(nt=!0),ct!==tt&&(at=!0)}}catch(e){ot=!0,it=e}finally{try{!rt&&st.return&&st.return()}finally{if(ot)throw it}}this["#spacing-section-heading"].disabled=!1,this["#letter-spacing-heading"].disabled=!1,this["#letter-spacing-slider"].value=_round20(et,2),this["#letter-spacing-slider"].mixed=nt,this["#letter-spacing-slider"].disabled=!1,this["#letter-spacing-input"].value=_round20(et,2),this["#letter-spacing-input"].mixed=nt,this["#letter-spacing-input"].disabled=!1,this["#word-spacing-heading"].disabled=!1,this["#word-spacing-slider"].value=_round20(tt,2),this["#word-spacing-slider"].mixed=at,this["#word-spacing-slider"].disabled=!1,this["#word-spacing-input"].value=_round20(tt,2),this["#word-spacing-input"].mixed=at,this["#word-spacing-input"].disabled=!1}else this["#spacing-section-heading"].disabled=!0,this["#letter-spacing-heading"].disabled=!0,this["#letter-spacing-slider"].value=0,this["#letter-spacing-slider"].mixed=!1,this["#letter-spacing-slider"].disabled=!0,this["#letter-spacing-input"].value=0,this["#letter-spacing-input"].mixed=!1,this["#letter-spacing-input"].disabled=!0,this["#word-spacing-heading"].disabled=!0,this["#word-spacing-slider"].value=0,this["#word-spacing-slider"].mixed=!1,this["#word-spacing-slider"].disabled=!0,this["#word-spacing-input"].value=0,this["#word-spacing-input"].mixed=!1,this["#word-spacing-input"].disabled=!0}}},{key:"_getSelectedTexts",value:function(){var e=[];return function t(n){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,"text"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-typographypanel",BXTypographyPanelElement)}}{{var _BoxySVG$utils$elemen18=BoxySVG.utils.element,_html14=_BoxySVG$utils$elemen18.html,_closest19=_BoxySVG$utils$elemen18.closest,_round21=BoxySVG.utils.math.round,_BoxySVG$utils$parsin4=BoxySVG.utils.parsing,_parseLength2=_BoxySVG$utils$parsin4.parseLength,_parseViewBox6=_BoxySVG$utils$parsin4.parseViewBox,_parseAspectRatio4=_BoxySVG$utils$parsin4.parseAspectRatio,_throttle8=BoxySVG.utils.time.throttle,_isNumeric=BoxySVG.utils.type.isNumeric,unitsMenuHTML="\n    <x-menuitem value=\"px\" selected=\"true\">\n      <x-label>px</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"cm\">\n      <x-label>cm</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"mm\">\n      <x-label>mm</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"in\">\n      <x-label>in</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"pt\">\n      <x-label>pt</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"pc\">\n      <x-label>pc</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"q\">\n      <x-label>q</x-label>\n    </x-menuitem>\n\n    <hr/>\n\n    <x-menuitem value=\"vw\">\n      <x-label>vw</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vh\">\n      <x-label>vh</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vmin\">\n      <x-label>vmin</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vmax\">\n      <x-label>vmax</x-label>\n    </x-menuitem>\n\n    <hr/>\n\n    <x-menuitem value=\"em\">\n      <x-label>em</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"ex\">\n      <x-label>ex</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"ch\">\n      <x-label>ch</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"rem\">\n      <x-label>rem</x-label>\n    </x-menuitem>\n  ",_shadowTemplate11=_html14(_templateObject27,window.theme,window.theme,unitsMenuHTML,unitsMenuHTML),BXViewPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._oldViewportWidth="500px",e._oldViewportHeight="500px",e._oldViewBox=null,e._oldAspectRatio=null,e._isChangingViewportWidth=!1,e._isChangingViewportHeight=!1,e._isChangingViewBox=!1,e._update100Th=_throttle8(e._update,100,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate11.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#viewport-switch"].addEventListener("change",function(){return e._onViewportSwitchChange()}),e["#viewport-width-input"].addEventListener("changestart",function(){return e._onViewportWidthInputChangeStart()}),e["#viewport-width-unit-select"].addEventListener("change",function(){return e._onViewportWidthUnitSelectChange()}),e["#viewport-height-input"].addEventListener("changestart",function(){return e._onViewportHeightInputChangeStart()}),e["#viewport-height-unit-select"].addEventListener("change",function(){return e._onViewportHeightUnitSelectChange()}),e["#view-box-box"].addEventListener("changestart",function(t){return e._onViewBoxChangeStart(t)}),e["#view-box-switch"].addEventListener("change",function(){return e._onViewBoxSwitchChange()}),e["#preserve-aspect-ratio-switch"].addEventListener("change",function(){return e._onPreserveAspectRatioSwitchChange()}),e["#align-buttons"].addEventListener("change",function(){return e._onAlignButtonsChange()}),e["#meet-or-slice-buttons"].addEventListener("toggle",function(){return e._onMeetOrSliceButtonsToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest19(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){if(!this._isChangingViewBox){var t=e.find(function(e){return"artboards"===e.target.id||"artboards"===e.target.parentNode.id});t&&this._update100Th()}}},{key:"_onViewportSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Viewport width"),!0===this["#viewport-switch"].toggled?(e.currentArtboard.setAttribute("width",this._oldViewportWidth),e.currentArtboard.setAttribute("height",this._oldViewportHeight)):(this._oldViewportWidth=e.currentArtboard.getAttribute("width"),this._oldViewportHeight=e.currentArtboard.getAttribute("height"),e.currentArtboard.removeAttribute("width"),e.currentArtboard.removeAttribute("height"))}},{key:"_onViewportHeightSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Viewport height"),!0===this["#viewport-height-switch"].toggled?e.currentArtboard.setAttribute("height",this._oldViewportHeight):(this._oldViewportHeight=e.currentArtboard.getAttribute("height"),e.currentArtboard.removeAttribute("height"))}},{key:"_onViewportWidthInputChangeStart",value:function(){var e=this,t=this["#viewport-width-input"],n=this["#viewport-width-unit-select"],a=this._ownerEditor.canvas,r,o;a.undoManager.checkpoint("Viewport width"),this._isChangingViewportWidth=!0,t.addEventListener("change",r=function(){a.currentArtboard.setAttribute("width",t.value+n.value)}),t.addEventListener("changeend",o=function(){t.removeEventListener("change",r),t.removeEventListener("changeend",o),e._isChangingViewportWidth=!1})}},{key:"_onViewportHeightInputChangeStart",value:function(){var e=this,t=this["#viewport-height-input"],n=this["#viewport-height-unit-select"],a=this._ownerEditor.canvas,r,o;a.undoManager.checkpoint("Viewport height"),this._isChangingViewportHeight=!0,t.addEventListener("change",r=function(){a.currentArtboard.setAttribute("height",t.value+n.value)}),t.addEventListener("changeend",o=function(){t.removeEventListener("change",r),t.removeEventListener("changeend",o),e._isChangingViewportHeight=!1})}},{key:"_onViewportWidthUnitSelectChange",value:function(){var e=this["#viewport-width-input"],t=this["#viewport-width-unit-select"],n=this._ownerEditor.canvas;n.undoManager.checkpoint("Viewport width unit"),n.currentArtboard.setAttribute("width",e.value+t.value)}},{key:"_onViewportHeightUnitSelectChange",value:function(){var e=this["#viewport-height-input"],t=this["#viewport-height-unit-select"],n=this._ownerEditor.canvas;n.undoManager.checkpoint("Viewport height unit"),n.currentArtboard.setAttribute("height",e.value+t.value)}},{key:"_onViewBoxSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("View box"),this["#view-box-switch"].toggled?this._oldViewBox?e.currentArtboard.setAttribute("viewBox",this._oldViewBox):e.currentArtboard.setAttribute("viewBox","0 0 500 500"):(this._oldViewBox=e.currentArtboard.getAttribute("viewBox"),e.currentArtboard.removeAttribute("viewBox"))}},{key:"_onViewBoxChangeStart",value:function(e){var t=this,n=e.target,a=this._ownerEditor.canvas.currentArtboard,r=_parseViewBox6(a.getAttribute("viewBox")||"0 0 0 0")||new SVGRect,o,i;this._ownerEditor.canvas.undoManager.checkpoint("View Box"),this._isChangingViewBox=!0,n.addEventListener("change",o=function(){r[n.dataset.property]=n.value,a.setAttribute("viewBox",r.x+" "+r.y+" "+r.width+" "+r.height)}),n.addEventListener("changeend",i=function(){n.removeEventListener("change",o),n.removeEventListener("changeend",i),t._isChangingViewBox=!1})}},{key:"_onPreserveAspectRatioSwitchChange",value:function(){var e=this._ownerEditor.canvas.currentArtboard;this._ownerEditor.canvas.undoManager.checkpoint("Preserve aspect ratio"),this["#preserve-aspect-ratio-switch"].toggled?this._oldAspectRatio?e.setAttribute("preserveAspectRatio",this._oldAspectRatio):e.removeAttribute("preserveAspectRatio"):(this._oldAspectRatio=e.getAttribute("preserveAspectRatio"),e.setAttribute("preserveAspectRatio","none"))}},{key:"_onAlignButtonsChange",value:function(){var e=this._ownerEditor.canvas.currentArtboard,t=this["#align-buttons"].value||"none",n=this["#meet-or-slice-buttons"].value;if(this._ownerEditor.canvas.undoManager.checkpoint("Aspect ratio"),"xMidYMid"===t&&"meet"===n)e.removeAttribute("preserveAspectRatio");else{var a=t;"none"!==a&&"slice"===n&&(a+=" slice"),e.setAttribute("preserveAspectRatio",a)}}},{key:"_onMeetOrSliceButtonsToggle",value:function(){var e=this._ownerEditor.canvas.currentArtboard,t=this["#align-buttons"].value||"none",n=this["#meet-or-slice-buttons"].value;if(this._ownerEditor.canvas.undoManager.checkpoint("Aspect ratio"),"xMidYMid"===t&&"meet"===n)e.removeAttribute("preserveAspectRatio");else{var a=t;"none"!==a&&"slice"===n&&(a+=" slice"),e.setAttribute("preserveAspectRatio",a)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=e.currentArtboard,n=e.masterArtboard;if(t.hasAttribute("viewBox")){var a=_parseViewBox6(t.getAttribute("viewBox")),r=a.x,o=a.y,i=a.width,s=a.height;this["#view-box-section-heading"].disabled=!1,this["#view-box-switch"].toggled=!0,this["#view-box-x-input"].value=_round21(r,2),this["#view-box-x-input"].disabled=!1,this["#view-box-x-label"].disabled=!1,this["#view-box-y-input"].value=_round21(o,2),this["#view-box-y-input"].disabled=!1,this["#view-box-y-label"].disabled=!1,this["#view-box-width-input"].value=_round21(i,2),this["#view-box-width-input"].disabled=!1,this["#view-box-width-label"].disabled=!1,this["#view-box-height-input"].value=_round21(s,2),this["#view-box-height-input"].disabled=!1,this["#view-box-height-label"].disabled=!1}else this["#view-box-section-heading"].disabled=!0,this["#view-box-switch"].toggled=!1,this["#view-box-x-input"].value=0,this["#view-box-x-input"].disabled=!0,this["#view-box-x-label"].disabled=!0,this["#view-box-y-input"].value=0,this["#view-box-y-input"].disabled=!0,this["#view-box-y-label"].disabled=!0,this["#view-box-width-input"].value=0,this["#view-box-width-input"].disabled=!0,this["#view-box-width-label"].disabled=!0,this["#view-box-height-input"].value=0,this["#view-box-height-input"].disabled=!0,this["#view-box-height-label"].disabled=!0;if(t!==n)this["#viewport-section"].hidden=!0;else if(this["#viewport-section"].hidden=!1,!1===t.hasAttribute("width")&&!1===t.hasAttribute("height"))this["#viewport-switch"].toggled=!1,this["#viewport-width-input"].disabled=!0,this["#viewport-width-input"].value=0,this["#viewport-width-unit-select"].disabled=!0,this["#viewport-width-unit-select"].value="px",this["#viewport-height-input"].disabled=!0,this["#viewport-height-input"].value=0,this["#viewport-height-unit-select"].disabled=!0,this["#viewport-height-unit-select"].value="px";else{var l=this._getArtboardViewport(t),d=_slicedToArray(l,4),u=d[0],c=d[1],p=d[2],h=d[3];this["#viewport-switch"].toggled=!0,this["#viewport-width-input"].disabled=!1,this["#viewport-width-input"].value=u,this["#viewport-width-unit-select"].disabled=!1,this["#viewport-width-unit-select"].value=c,this["#viewport-height-input"].disabled=!1,this["#viewport-height-input"].value=p,this["#viewport-height-unit-select"].disabled=!1,this["#viewport-height-unit-select"].value=h}if(!1===t.hasAttribute("viewBox"))this["#preserve-aspect-ratio-section-heading"].disabled=!0,this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!0,this["#align-heading"].disabled=!0,this["#align-buttons"].value=null,this["#align-buttons"].disabled=!0,this["#meet-or-slice-buttons"].value=null,this["#meet-button"].disabled=!0,this["#slice-button"].disabled=!0;else{var m="xMidYMid",b="meet";if(t.hasAttribute("preserveAspectRatio")){var x=_parseAspectRatio4(t.getAttribute("preserveAspectRatio"));x&&(m=x[0],b=x[1])}"none"===m?(this["#preserve-aspect-ratio-section-heading"].disabled=!1,this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!1,this["#align-heading"].disabled=!0,this["#align-buttons"].value=null,this["#align-buttons"].disabled=!0,this["#meet-or-slice-buttons"].value=null,this["#meet-button"].disabled=!0,this["#slice-button"].disabled=!0):(this["#preserve-aspect-ratio-section-heading"].disabled=!1,this["#preserve-aspect-ratio-switch"].toggled=!0,this["#preserve-aspect-ratio-switch"].disabled=!1,this["#align-heading"].disabled=!1,this["#align-buttons"].value=m,this["#align-buttons"].disabled=!1,this["#meet-or-slice-buttons"].value=b,this["#meet-button"].disabled=!1,this["#slice-button"].disabled=!1)}}},{key:"_getArtboardViewport",value:function(e){var t=0,n="px",a=0,r="px";if(e.hasAttribute("width")){var o=e.getAttribute("width");if(_isNumeric(o))t=parseFloat(o);else{var i=_parseLength2(o);if(null!==i){var s=_slicedToArray(i,2),l=s[0],d=s[1];t=l,n=d}}}if(e.hasAttribute("height")){var u=e.getAttribute("height");if(_isNumeric(u))a=parseFloat(u);else{var c=_parseLength2(u);if(null!==c){var p=_slicedToArray(c,2),h=p[0],m=p[1];a=h,r=m}}}return[t,n,a,r]}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-viewpanel",BXViewPanelElement)}}{{var _Shortcut8=BoxySVG.classes.Shortcut,_isPointerMoveIntentional4=BoxySVG.utils.event.isPointerMoveIntentional,_reduceProperty6=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$time7=BoxySVG.utils.time,_debounce8=_BoxySVG$utils$time7.debounce,_sleep7=_BoxySVG$utils$time7.sleep,_throttle9=_BoxySVG$utils$time7.throttle,_getTransformToElement8=BoxySVG.utils.transformGeneral.getTransformToElement,_reduceTransform6=BoxySVG.utils.transformReduction.reduceTransform,_objectElementNames=BoxySVG.utils.variables.objectElementNames,_BoxySVG$utils$elemen19=BoxySVG.utils.element,_html15=_BoxySVG$utils$elemen19.html,_svg5=_BoxySVG$utils$elemen19.svg,_closest20=_BoxySVG$utils$elemen19.closest,_createElement21=_BoxySVG$utils$elemen19.createElement,_sortByDomPosition6=_BoxySVG$utils$elemen19.sortByDomPosition,_getObjectElementDisplayName2=_BoxySVG$utils$elemen19.getObjectElementDisplayName,_getObjectElementIconName2=_BoxySVG$utils$elemen19.getObjectElementIconName,_isValidID3=_BoxySVG$utils$elemen19.isValidID,_$object=Symbol(),_shadowTemplate12=_html15(_templateObject28,window.theme,window.theme),BXObjectsPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._fetchedIcons=!1,e._update200Th=_throttle9(e._update,200,e),e._updateForFilterChangeDb250=_debounce8(e._updateForFilterChange,250,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate12.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#main"].addEventListener("pointerdown",function(t){return e._onListPointerDown(t)}),e["#main"].addEventListener("click",function(t){return e._onListClick(t)}),e["#main"].addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest20(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest20(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=this._ownerApp.getConfig("bx-objectspanel:developerMode")||!1,this._fetchIcons(),this._update200Th(),t.addEventListener("artworkchange",this._artworkChangeListener=function(){e._update()}),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._onCurrentArtboardChange()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artworkchange",this._artworkChangeListener),e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateForSelectedChange()}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,this._updateForMutation(s)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"_onCurrentArtboardChange",value:function(){this._update200Th()}},{key:"_onListPointerDown",value:function(e){var t=e.target.closest(".item");t&&(e.target.closest(".arrow-button")||e.target.closest(".lock-button")||e.target.closest(".visibility-button")||this._onItemPointerDown(e))}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas,a=this._ownerApp.modKeys,r=a.ctrl,o=a.shift,i=e.target.closest(".item");if(!0===r){var s=i[_$object],l=s.parentElement.closest("g, a");n.selectedElements.includes(s)?n.selectedElements=n.selectedElements.filter(function(e){return e!==s}):(n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),1===n.selectedElements.length&&(n.currentContainer=l===n.currentArtboard?null:l))}else if(!0===o){var d=n.selectedElements.map(function(e){return t._getItemForObject(e)});d=d.filter(function(e){return null!==e&&!1===e.hidden});var u=d.map(function(e){return e[_$object]}),c=u[u.length-1]||null;if(c){var p=this._getItems(!0),h=p.find(function(e){return e[_$object]===c}),m=p.indexOf(h),b=p.indexOf(i),x=[];if(b>m?x=[].concat(_toConsumableArray(p)).slice(m,b+1):b<m&&(x=[].concat(_toConsumableArray(p)).slice(b,m+1).reverse()),x=x.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<x.length){var g=x.map(function(e){return e[_$object]});n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),_toConsumableArray(g))}}}else{var v=i[_$object],y=v.parentElement.closest("g, a"),f=!1,_,w,k;this["#main"].setPointerCapture(e.pointerId),!1===i.hasAttribute("data-selected")&&(n.selectedElements=[v],n.currentContainer=y===n.currentArtboard?null:y),this["#main"].addEventListener("pointermove",_=function(n){_isPointerMoveIntentional4(e,n,3)&&(t["#main"].removeEventListener("pointermove",_),t["#main"].removeEventListener("pointerup",w),t["#main"].removeEventListener("lostpointercapture",k),t._onItemDragStart(n),f=!0)}),this["#main"].addEventListener("pointerup",w=function(){!1==f&&(n.selectedElements=[v],n.currentContainer=y===n.currentArtboard?null:y)}),this["#main"].addEventListener("lostpointercapture",k=function(){t["#main"].removeEventListener("pointermove",_),t["#main"].removeEventListener("pointerup",w),t["#main"].removeEventListener("lostpointercapture",k)})}}},{key:"_onItemDragStart",value:function(){var e=this,t=this._getItems(!0),n=null,a="start",r=t.filter(function(e){return e.hasAttribute("data-selected")}),o=this._ownerEditor.canvas,i,s;this["#main"].addEventListener("pointermove",i=function(t){var o=e._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(n=o?o.closest(".item"):null,n){var i=n.querySelector(".main").getBoundingClientRect();if(a=t.clientY<i.y+i.height/2?"start":"end",n.hasAttribute("data-expanded")&&"end"==a&&(n.querySelector(".item:not([hidden])")?(n=n.querySelector(".item:not([hidden])"),a="start",i=n.querySelector(".main").getBoundingClientRect()):a="inside"),e._canMoveItems(r,n,a)){for(var s=n.offsetTop,l=n.offsetParent;null!==l&&l!==e["#main"];l=l.offsetParent)s+=l.offsetTop;("end"==a||"inside"==a)&&(s+=i.height);var d=24*parseInt(n.getAttribute("data-depth"))+16;"inside"==a&&(d+=24),e["#drop-marker"].hidden=!1,e["#drop-marker"].style.top=s+"px",e["#drop-marker"].style.marginLeft=d+"px"}else n=null,e["#drop-marker"].hidden=!0}else e["#drop-marker"].hidden=!0}),this["#main"].addEventListener("lostpointercapture",s=function(){if(e["#main"].removeEventListener("pointermove",i),e["#main"].removeEventListener("lostpointercapture",s),e["#drop-marker"].hidden=!0,n){o.undoManager.checkpoint("Move elements");var t=n[_$object],r=_sortByDomPosition6(o.outermostSelectedElements),l=document.createDocumentFragment(),d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,m.setAttribute("transform",_getTransformToElement8(m,t.parentElement)),l.append(m)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}"start"==a?t.before(l):"end"==a?t.after(l):"inside"==a&&t.append(l);var b=!0,x=!1,g;try{for(var v=r[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)f=y.value,_reduceTransform6(f,{geometryPrecision:o.geometryPrecision,transformPrecision:o.transformPrecision})}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}var _=o.selectedElements[0].closest("g, a");o.currentContainer=_===o.currentArtboard?null:_}})}},{key:"_onListClick",value:function(e){var t=e.target.closest(".item");t&&(e.target.closest(".arrow-button")?this._onArrowButtonClick(e):e.target.closest(".lock-button")?this._onLockButtonClick(e):e.target.closest(".visibility-button")?this._onVisibilityButtonClick(e):this._onItemClick(e))}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item");this._editStart(r)}}},{key:"_onArrowButtonClick",value:function(e){var t=e.target.closest(".item");t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t)}},{key:"_onLockButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Lock");var t=e.target.closest(".item"),n=t[_$object],a=getComputedStyle(n).pointerEvents;a="none"===a?"auto":"none",n.style.pointerEvents=a,_reduceProperty6("pointer-events",n);{var r=function e(t){var n=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=s.value,_objectElementNames.includes(l.localName)&&(l.removeAttribute("pointer-events"),l.style.removeProperty("pointer-events"),getComputedStyle(l).pointerEvents!==a&&(l.style.pointerEvents=a),("g"===l.localName||"a"===l.localName)&&e(l.children))}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}};r(n.children)}}},{key:"_onVisibilityButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Visibility");var t=e.target.closest(".item"),n=t[_$object],a=getComputedStyle(n).visibility;a="hidden"===a?"visible":"hidden",n.style.visibility=a,_reduceProperty6("visibility",n);{var r=function e(t){var n=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=s.value,_objectElementNames.includes(l.localName)&&(l.removeAttribute("visibility"),l.style.removeProperty("visibility"),getComputedStyle(l).visibility!==a&&(l.style.visibility=a),("g"===l.localName||"a"===l.localName)&&e(l.children))}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}};r(n.children)}}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChangeDb250()}},{key:"_onDeveloperModeButtonToggle",value:function(){this._ownerApp.setConfig("bx-objectspanel:developerMode",this["#developer-mode-button"].toggled),0<this["#filter-input"].value.trim().length&&(this["#filter-input"].value="",this._updateForFilterChange()),this._updateForDeveloperModeChange(),this["#main"].focus()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut8.fromEvent(e);if(t.matches("Enter")){var n=this._getItems(!0),a=n.find(function(e){return e.hasAttribute("data-selected")}),r=n.find(function(e){return e.hasAttribute("data-edited")});r?this["#main"].focus():a&&this._editStart(a)}else if(t.matches("Backspace")){var o=this._getItems(!0),i=o.find(function(e){return e.hasAttribute("data-edited")});i||(e.stopPropagation(),e.preventDefault(),this._ownerApp.execCommand("delete"))}else if(t.matches("ArrowUp")){var s=this._getItems(!0),l=s.find(function(e){return e.hasAttribute("data-edited")});l||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var d=this._getItems(!0),u=d.find(function(e){return e.hasAttribute("data-edited")});u||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var c=this._getItems(!0),p=c.find(function(e){return e.hasAttribute("data-edited")});p||(e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var h=this._getItems(!0),m=h.find(function(e){return e.hasAttribute("data-edited")});m||(e.stopPropagation(),this._selectNextItem(!0))}else if(t.matches("ArrowRight")){var b=this._getItems(!0),x=b.filter(function(e){return e.hasAttribute("data-selected")}),g=b.find(function(e){return e.hasAttribute("data-edited")});g||1!==x.length||!0!==x[0].hasAttribute("data-expandable")||!1!==x[0].hasAttribute("data-expanded")||(e.preventDefault(),e.stopPropagation(),this._expandItem(x[0]))}else if(t.matches("ArrowLeft")){var v=this._getItems(!0),y=v.filter(function(e){return e.hasAttribute("data-selected")}),f=v.find(function(e){return e.hasAttribute("data-edited")});f||1!==y.length||!0!==y[0].hasAttribute("data-expandable")||!0!==y[0].hasAttribute("data-expanded")||(e.preventDefault(),e.stopPropagation(),this._collapseItem(y[0]))}}},{key:"_editStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-edited]");if(n){if(n===e)return;this._editEnd()}}var a=e.querySelector(".label"),r=e[_$object],o=r.querySelector(":scope > bx-title"),i=this["#developer-mode-button"].toggled?"Object ID":"Object title",s="";!0===this["#developer-mode-button"].toggled&&r.id?s="#"+r.id:!1===this["#developer-mode-button"].toggled&&o&&(s=o.textContent);var l=_html15(_templateObject29,s,i);a.after(l),l.selectAll(),a.hidden=!0,e.setAttribute("data-edited",""),l.addEventListener("input",function(){l.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),l.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editEnd()}),l.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var a=l.value.trim();if(a.startsWith("#")&&(a=a.substring(1)),0<a.length&&(e=_isValidID3(a),e)){var r=null===t._ownerEditor.canvas.artboards.querySelector("#"+a);!1==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editEnd",value:function(){var e=this["#items"].querySelector(".item[data-edited]");if(e){var t=e.querySelector(".label"),n=e.querySelector("x-input"),a=e[_$object];if(n.remove(),t.hidden=!1,e.removeAttribute("data-edited"),!1===n.invalid)if(this["#developer-mode-button"].toggled){var r=n.value.trim().toLowerCase();"#"===r?r="":r.startsWith("#")&&(r=r.substring(1)),a.getAttribute("id")!==r&&(this._ownerEditor.canvas.undoManager.checkpoint("Object ID"),""===r?a.removeAttribute("id"):a.setAttribute("id",r))}else{var o=a.querySelector(":scope > bx-title"),i=n.value.trim();if(!o)""!==i&&(this._ownerEditor.canvas.undoManager.checkpoint("Object title"),o=_createElement21("svg:bx-title"),o.textContent=i,a.prepend(o));else{var s=o.textContent;s!==i&&(this._ownerEditor.canvas.undoManager.checkpoint("Object title"),""===i?o.remove():o.textContent=i)}}}}},{key:"_expandItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=parseInt(e.getAttribute("data-depth")),a=e.querySelector(".children"),r=e[_$object],o=this._ownerEditor.canvas.outermostSelectedElements,i=this["#filter-input"].value.trim().toLowerCase();if(0===a.childElementCount){var s=!0,l=!1,d;try{for(var u=r.children[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,_objectElementNames.includes(p.localName)){var h=this._createItem(p,n+1);o.includes(p)&&h.setAttribute("data-selected",""),!1===this._objectMatchesFilter(p,i)&&(h.hidden=!0),a.append(h)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}if(e.setAttribute("data-expanded",""),t){var m=getComputedStyle(a).marginTop;"0px"===m&&(m="-"+getComputedStyle(a).height),a.animate({marginTop:[m,"0px"]},{duration:250,easing:"ease"})}}},{key:"_collapseItem",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=e.querySelector(".children"),a=getComputedStyle(n).marginTop,r="-"+getComputedStyle(n).height;if(e.removeAttribute("data-expanded"),t){var o=n.animate({marginTop:[a,r]},{duration:250,easing:"ease"});await o.finished}!1===e.hasAttribute("data-expanded")&&(n.innerHTML="")}},{key:"_collapseAllItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=!0,n=!1,a;try{for(var r=this["#items"].children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this._collapseItem(i,e)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_createItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=_getObjectElementDisplayName2(e),a=_getObjectElementIconName2(e),r=_html15(_templateObject30,t,24*t,a);return r[_$object]=e,("g"===e.localName||"a"===e.localName)&&r.setAttribute("data-expandable",""),this._updateActionButtons(r),this._updateLabel(r),r}},{key:"_getItemForObject",value:function(e){var t=this._getItems(),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,s[_$object]===e)return s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return null}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._ownerEditor.canvas,n=this._getItems(!0),a=n.filter(function(e){return e.hasAttribute("data-selected")});if(0<a.length){var r=a[0],o=n.indexOf(r);if(n[o-1]){var i=n[o-1],s=i[_$object],l=s.parentElement.closest("g, a");e?t.selectedElements=[].concat(_toConsumableArray(t.selectedElements),[s]):(t.selectedElements=[s],t.currentContainer=l===t.currentArtboard?null:l)}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._ownerEditor.canvas,n=this._getItems(!0),a=n.filter(function(e){return e.hasAttribute("data-selected")});if(0<a.length){var r=a[a.length-1],o=n.indexOf(r);if(n[o+1]){var i=n[o+1],s=i[_$object],l=s.parentElement.closest("g, a");e?t.selectedElements=[].concat(_toConsumableArray(t.selectedElements),[s]):(t.selectedElements=[s],t.currentContainer=l===t.currentArtboard?null:l)}}}},{key:"_canMoveItems",value:function(e,t,n){var a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,l.contains(t))return!1}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}if(1===e.length){var d=this._getItems(!0),u=e[0],c=d.indexOf(t);if("start"===n){var p=d[c-1];if(p===u&&p.getAttribute("data-depth")===u.getAttribute("data-depth"))return!1}else if("end"===n){var h=d[c+1];if(h===u&&t.getAttribute("data-depth")===u.getAttribute("data-depth"))return!1}}return!0}},{key:"_getItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[];return function n(a){var r=!0,o=!1,i;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,e&&d.hasAttribute("hidden"))continue;else t.push(d),d.hasAttribute("data-expanded")&&n(d.querySelector(".children").children)}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}(this["#items"].children),t}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=document.createDocumentFragment(),n=!0,a=!1,r;try{for(var o=e.currentArtboard.children[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,_objectElementNames.includes(s.localName)){var l=this._createItem(s,0);t.append(l)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this["#items"].innerHTML="",this["#items"].append(t),this._updateForSelectedChange()}},{key:"_updateLabel",value:function(e){if(!1===this["#developer-mode-button"].toggled){var t=e.querySelector(".label"),n=e[_$object],a=n.querySelector(":scope > bx-title");a?(t.textContent=a.textContent,t.setAttribute("data-custom","")):(t.textContent=_getObjectElementDisplayName2(n),t.removeAttribute("data-custom"))}else{var r=e[_$object],o=e.querySelector(".label");r.id?(o.textContent="#"+r.id,o.setAttribute("data-custom","")):(o.textContent=_getObjectElementDisplayName2(r,"developer"),o.removeAttribute("data-custom"))}}},{key:"_updateActionButtons",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e[_$object],a=getComputedStyle(n),r=a.visibility,o=a.pointerEvents;if("none"===o?e.setAttribute("data-locked",""):e.removeAttribute("data-locked"),"hidden"===r?e.setAttribute("data-hidden",""):e.removeAttribute("data-hidden"),t){var i=!0,s=!1,l;try{for(var d=e.querySelector(".children").children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,this._updateActionButtons(c,!0)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}},{key:"_updateForSelectedChange",value:function(){var e=this._ownerEditor.canvas.selectedElements,t=this._ownerEditor.canvas.currentArtboard,n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){for(var s=i.value,l=[],d=s.parentElement;d!==t;d=d.parentElement)l.push(d);l.reverse();var u=!0,c=!1,p=void 0;try{for(var h=l[Symbol.iterator](),m;!(u=(m=h.next()).done);u=!0){var b=m.value,x=this._getItemForObject(b);x&&this._expandItem(x,!1)}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var g=!0,v=!1,y;try{for(var f=this._getItems()[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,e.includes(w[_$object])?(w.setAttribute("data-selected",""),w.scrollIntoViewIfNeeded()):w.removeAttribute("data-selected")}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}},{key:"_updateForFilterChange",value:function(){var e=this,t=this["#filter-input"].value.trim().toLowerCase();if(0===t.length){this._collapseAllItems(!1);var n=!0,a=!1,r;try{for(var o=this["#items"].querySelectorAll(".item[hidden]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,s.hidden=!1}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}else{var l=function n(a){var r=!0,o=!0,i=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)if(u=d.value,!e._objectMatchesFilter(u[_$object],t))u.hidden=!0;else if(u.hidden=!1,r=!1,u.hasAttribute("data-expandable")){e._expandItem(u,!1);var c=n(u.querySelector(".children").children);c&&e._collapseItem(u,!1)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return r};l(this["#items"].children)}}},{key:"_updateForDeveloperModeChange",value:function(){var e=!0,t=!1,n;try{for(var a=this._getItems()[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateLabel(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForMutation",value:function(e){var t=this;if("attributes"===e.type&&"style"===e.attributeName){var n=e.target,a=this._getItems(),r=a.find(function(e){return e[_$object]===n});r&&this._updateActionButtons(r,!0)}if(this["#developer-mode-button"].toggled){if("attributes"===e.type&&"id"===e.attributeName){var o=this._getItems(),i=e.target,s=!0,l=!1,d;try{for(var u=o[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,p[_$object]===i){this._updateLabel(p);break}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}else if("childList"===e.type)if("bx-title"===e.target.localName){var h=this._getItems(),m=e.target.parentElement,b=!0,x=!1,g;try{for(var v=h[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f[_$object]===m){this._updateLabel(f);break}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}else for(var _=this._getItems(),w=[].concat(_toConsumableArray(e.removedNodes),_toConsumableArray(e.addedNodes)),k=0,A;k<w.length;k++)A=w[k],"bx-title"===A.localName&&function(){var n=e.target,a=_.find(function(e){return e[_$object]===n});a&&t._updateLabel(a)}();if("childList"===e.type){if(0<e.removedNodes.length){var C=this._getItems(),S=!0,E=!1,T;try{for(var P=C[Symbol.iterator](),L,M;!(S=(L=P.next()).done);S=!0)M=L.value,[].concat(_toConsumableArray(e.removedNodes)).includes(M[_$object])&&M.remove()}catch(e){E=!0,T=e}finally{try{!S&&P.return&&P.return()}finally{if(E)throw T}}}if(0<e.addedNodes.length){var D=this._getItems(),I=null,V=!0,N=!1,R;try{for(var z=D[Symbol.iterator](),G,B;!(V=(G=z.next()).done);V=!0)if(B=G.value,B[_$object]===e.target){I=B;break}}catch(e){N=!0,R=e}finally{try{!V&&z.return&&z.return()}finally{if(N)throw R}}if(I&&I.hasAttribute("data-expanded")||e.target===this._ownerEditor.canvas.currentArtboard){var O=null,j=null;if(e.previousSibling)for(var q=function(e){if(e.localName&&_objectElementNames.includes(e.localName)){var t=D.find(function(t){return t[_$object]===e});if(t)return O=t,"break"}},U=e.previousSibling,H;U&&(H=q(U),"break"!==H);U=U.previousElementSibling);if(null===O&&e.nextSibling)for(var F=function(e){if(e.localName&&_objectElementNames.includes(e.localName)){var t=D.find(function(t){return t[_$object]===e});if(t)return j=t,"break"}},U=e.nextSibling,$;U&&($=F(U),"break"!==$);U=U.nextElementSibling);var Y=I?parseInt(I.getAttribute("data-depth"))+1:0,X=document.createDocumentFragment(),W=!0,K=!1,Z;try{for(var J=function(){var e=ee.value;if(e.localName&&_objectElementNames.includes(e.localName)){var n=I?I:t["#items"],a=[].concat(_toConsumableArray(n.children)).find(function(t){return t[_$object]===e});if(a);else{var r=t._createItem(e,Y);t._ownerEditor.canvas.selectedElements.includes(e)&&r.setAttribute("data-selected",""),X.append(r)}}},Q=e.addedNodes[Symbol.iterator](),ee;!(W=(ee=Q.next()).done);W=!0)J()}catch(e){K=!0,Z=e}finally{try{!W&&Q.return&&Q.return()}finally{if(K)throw Z}}O?O.after(X):j?j.before(X):I?I.querySelector(".children").append(X):this["#items"].append(X)}}}}},{key:"_fetchIcons",value:async function(){if(!1===this._fetchedIcons){this._fetchedIcons=!0;var e=await fetch("images/icons.svg"),t=await e.text(),n=_svg5(_templateObject5,t),a=document.createDocumentFragment(),r=["arrow","lock-on","visibility-hidden"],o=!0,i=!1,s;try{for(var l=n.querySelectorAll("symbol")[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,u.id&&(u.id.startsWith("object-")||r.includes(u.id))&&a.append(u)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}n.style.display="none",n.innerHTML="",n.append(a),this._shadowRoot.append(n)}}},{key:"_objectMatchesFilter",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,r=!1;if(""===t)r=!0;else{if(!this["#developer-mode-button"].toggled){var o=e.querySelector(":scope > bx-title"),i="";i=o&&0<o.textContent.trim().length?o.textContent.trim():_getObjectElementDisplayName2(e,"designer"),-1!==i.toLowerCase().indexOf(t)&&(r=!0)}else if(e.id)-1!==("#"+e.id.toLowerCase()).indexOf(t)&&(r=!0);else{var s=_getObjectElementDisplayName2(e,"developer");-1!==s.toLowerCase().indexOf(t)&&(r=!0)}if(!1==r&&!0===a&&("g"===e.localName||"a"===e.localName)){var l=!0,d=!1,u;try{for(var c=e.children[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,_objectElementNames.includes(h.localName)&&this._objectMatchesFilter(h,t)){r=!0;break}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}return!1==r&&!0===n&&("g"===e.parentElement.localName||"a"===e.parentElement.localName)&&e.parentElement!==this._ownerEditor.canvas.currentArtboard&&this._objectMatchesFilter(e.parentElement,t,!1,!1)&&(r=!0),r}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-objectspanel",BXObjectsPanelElement)}}{{var _getUserBBox7=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen20=BoxySVG.utils.element,_html16=_BoxySVG$utils$elemen20.html,_closest21=_BoxySVG$utils$elemen20.closest,_BoxySVG$utils$geomet10=BoxySVG.utils.geometry,_getDistanceBetweenPoints3=_BoxySVG$utils$geomet10.getDistanceBetweenPoints,_snapRotationAngle=_BoxySVG$utils$geomet10.snapRotationAngle,_combineRects8=_BoxySVG$utils$geomet10.combineRects,_transformRect8=_BoxySVG$utils$geomet10.transformRect,_round22=BoxySVG.utils.math.round,_throttle10=BoxySVG.utils.time.throttle,_reduceTransform7=BoxySVG.utils.transformReduction.reduceTransform,_min4=Math.min,_parseFloat10=Number.parseFloat,_BoxySVG$utils$transf9=BoxySVG.utils.transformGeneral,_getComputedTransform11=_BoxySVG$utils$transf9.getComputedTransform,_getComputedTransformOriginClientPoint2=_BoxySVG$utils$transf9.getComputedTransformOriginClientPoint,_getElementRotationAngle2=_BoxySVG$utils$transf9.getElementRotationAngle,_getTransformToElement9=_BoxySVG$utils$transf9.getTransformToElement,_getTransformOriginBBoxPoint=_BoxySVG$utils$transf9.getTransformOriginBBoxPoint,_setTransformOriginBBoxPoint=_BoxySVG$utils$transf9.setTransformOriginBBoxPoint,_bboxPointToUserPoint=_BoxySVG$utils$transf9.bboxPointToUserPoint,_userPointToBBoxPoint2=_BoxySVG$utils$transf9.userPointToBBoxPoint,_shadowTemplate13=_html16(_templateObject31,window.theme,window.theme),BXGeometryPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._isChangingObjectX=!1,e._isChangingObjectY=!1,e._isChangingObjectWidth=!1,e._isChangingObjectHeight=!1,e._isChangingObjectOriginX=!1,e._isChangingObjectOriginY=!1,e._isChangingObjectRotation=!1,e._isChangingGuideX=!1,e._isChangingGuideY=!1,e._update200Th=_throttle10(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate13.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#guide-x-input"].addEventListener("changestart",function(){return e._onGuideXChangeStart()}),e["#guide-y-input"].addEventListener("changestart",function(){return e._onGuideYChangeStart()}),e["#guide-orientation-buttons"].addEventListener("toggle",function(){return e._onGuideOrientationButtonsToggle()}),e["#object-x-input"].addEventListener("changestart",function(){return e._onObjectXInputChangeStart()}),e["#object-y-input"].addEventListener("changestart",function(){return e._onObjectYInputChangeStart()}),e["#object-origin-x-input"].addEventListener("changestart",function(){return e._onObjectOriginXInputChangeStart()}),e["#object-origin-y-input"].addEventListener("changestart",function(){return e._onObjectOriginYInputChangeStart()}),e["#object-width-input"].addEventListener("changestart",function(){return e._onObjectWidthInputChangeStart()}),e["#object-height-input"].addEventListener("changestart",function(){return e._onObjectHeightInputChangeStart()}),e["#object-aspect-ratio-button"].addEventListener("toggle",function(){return e._onObjectAspectRatioButtonToggle()}),e["#object-rotation-box"].addEventListener("changestart",function(){return e._onObjectRotationChangeStart()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest21(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest21(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas,n=this._ownerApp.getConfig("bx-geometrypanel:preserveObjectAspectRatio")||!1;this["#object-aspect-ratio-button"].toggled=n,this._updateObjectAspectRatioIcon(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedguideschange",this._selectedGuidesChangeListener=function(){e._onSelectedGuidesChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedguideschange",this._selectedGuidesChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedGuidesChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onGuideOrientationButtonsToggle",value:function(){var e=this._ownerEditor.canvas,t=this["#guide-orientation-buttons"].value;if(0<e.selectedGuides.length){e.undoManager.checkpoint("Guide orientation");var n=!0,a=!1,r;try{for(var o=e.selectedGuides[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=_parseFloat10(s.getAttribute("angle"));"horizontal"===t?90!=l%180&&s.setAttribute("angle","90"):"vertical"===t&&0!=l%180&&s.setAttribute("angle","0")}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}}},{key:"_onGuideXChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedGuides[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Guide X"),this._isChangingGuideX=!0,this["#guide-x-input"].addEventListener("change",n=function(){t.setAttribute("x",e["#guide-x-input"].value),e._ownerEditor.canvas.manualGuidesHud.requestImmidiateUpdate()}),this["#guide-x-input"].addEventListener("changeend",a=function(){e["#guide-x-input"].removeEventListener("change",n),e["#guide-x-input"].removeEventListener("changeend",a),e._isChangingGuideX=!1})}},{key:"_onGuideYChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedGuides[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Guide Y"),this._isChangingGuideY=!0,this["#guide-y-input"].addEventListener("change",n=function(){t.setAttribute("y",e["#guide-y-input"].value),e._ownerEditor.canvas.manualGuidesHud.requestImmidiateUpdate()}),this["#guide-y-input"].addEventListener("changeend",a=function(){e["#guide-y-input"].removeEventListener("change",n),e["#guide-y-input"].removeEventListener("changeend",a),e._isChangingGuideY=!1})}},{key:"_onObjectXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=[],r=!1,o=Symbol(),i,s;t.undoManager.checkpoint("X"),this._isChangingObjectX=!0;var l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=_getTransformToElement9(h,t.currentArtboard),b=m.inverse(),x=_getComputedTransform11(h);h[o]={userTransform:x,userToArtboardTransform:m,artboardToUserTransform:b};var g=_getUserBBox7(h);a.push(_transformRect8(g,m))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var v=_combineRects8(a).x;this["#object-x-input"].addEventListener("change",i=function(){var t=e["#object-x-input"].value-v;r=!0;var a=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(a=(d=l.next()).done);a=!0){var u=d.value,c=u[o],p=c.userTransform,h=c.userToArtboardTransform,m=c.artboardToUserTransform,b=SVGMatrix.fromMatrix(p);b.multiplySelf(m),b.translateSelf(t,0),b.multiplySelf(h),u.setAttribute("transform",b.toString())}}catch(e){i=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}}),this["#object-x-input"].addEventListener("changeend",s=function(){if(e["#object-x-input"].removeEventListener("change",i),e["#object-x-input"].removeEventListener("changeend",s),e._isChangingObjectX=!1,r){var a=!0,o=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(a=(u=d.next()).done);a=!0)c=u.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){o=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw l}}}})}},{key:"_onObjectYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=[],r=!1,o=Symbol(),i,s;t.undoManager.checkpoint("Y"),this._isChangingObjectYSlider=!0;var l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=_getTransformToElement9(h,t.currentArtboard),b=m.inverse(),x=_getComputedTransform11(h);h[o]={userTransform:x,userToArtboardTransform:m,artboardToUserTransform:b};var g=_getUserBBox7(h);a.push(_transformRect8(g,m))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var v=_combineRects8(a).y;this["#object-y-input"].addEventListener("change",i=function(){var t=e["#object-y-input"].value-v;r=!0;var a=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(a=(d=l.next()).done);a=!0){var u=d.value,c=u[o],p=c.userTransform,h=c.userToArtboardTransform,m=c.artboardToUserTransform,b=SVGMatrix.fromMatrix(p);b.multiplySelf(m),b.translateSelf(0,t),b.multiplySelf(h),u.setAttribute("transform",b.toString())}}catch(e){i=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}}),this["#object-y-input"].addEventListener("changeend",s=function(){if(e["#object-y-input"].removeEventListener("change",i),e["#object-y-input"].removeEventListener("changeend",s),e._isChangingObjectYSlider=!1,r){var a=!0,o=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(a=(u=d.next()).done);a=!0)c=u.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){o=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw l}}}})}},{key:"_onObjectWidthInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements;if(1===n.length){t.undoManager.checkpoint("Width"),this._isChangingObjectWidth=!0;var a=n[0],r=_getUserBBox7(a),o=_getTransformToElement9(a,t.currentArtboard),i=_getComputedTransform11(a),s=!1,l=_getDistanceBetweenPoints3(new SVGPoint(r.x,r.y).matrixTransform(o),new SVGPoint(r.x+r.width,r.y).matrixTransform(o)),d,u;this["#object-width-input"].addEventListener("change",d=function(){s=!0;var t=e["#object-width-input"].value,n=t/l,o=1;e["#object-aspect-ratio-button"].toggled&&(o=n);var d=-r.x*(n-1),u=-r.y*(o-1),c=SVGMatrix.fromMatrix(i);c.translateSelf(d,u),c.scaleNonUniformSelf(n,o),a.setAttribute("transform",c.toString())}),this["#object-width-input"].addEventListener("changeend",u=function(){e["#object-width-input"].removeEventListener("change",d),e["#object-width-input"].removeEventListener("changeend",u),e._isChangingObjectWidth=!1,s&&_reduceTransform7(a,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})})}else if(1<n.length){t.undoManager.checkpoint("Width"),this._isChangingObjectWidth=!0;var c=[],p=!1,h=Symbol(),m=!0,b=!1,x,g,v;try{for(var y=n[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=_getComputedTransform11(_),k=_getTransformToElement9(_,t.currentArtboard),A=k.inverse();_[h]={userTransform:w,userToArtboardTransform:k,artboardToUserTransform:A};var C=_transformRect8(_getUserBBox7(_),k);c.push(C)}}catch(e){b=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(b)throw v}}var S=_combineRects8(c),E=S.width;this["#object-width-input"].addEventListener("change",x=function(){var t=e["#object-width-input"].value;p=!0;var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l[h],u=d.userTransform,c=d.userToArtboardTransform,m=d.artboardToUserTransform,b=t/E,x=1;e["#object-aspect-ratio-button"].toggled&&(x=b);var g=-S.x*(b-1),v=-S.y*(x-1),y=SVGMatrix.fromMatrix(u);y.multiplySelf(m),y.translateSelf(g,v),y.scaleNonUniformSelf(b,x),y.multiplySelf(c),l.setAttribute("transform",y.toString())}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}),this["#object-width-input"].addEventListener("changeend",g=function(){if(e["#object-width-input"].removeEventListener("change",x),e["#object-width-input"].removeEventListener("changeend",g),e._isChangingObjectWidth=!1,p){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,_reduceTransform7(l,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}})}}},{key:"_onObjectHeightInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements;if(1===n.length){t.undoManager.checkpoint("Height"),this._isChangingObjectHeight=!0;var a=n[0],r=_getUserBBox7(a),o=_getTransformToElement9(a,t.currentArtboard),i=_getComputedTransform11(a),s=!1,l=_getDistanceBetweenPoints3(new SVGPoint(r.x,r.y).matrixTransform(o),new SVGPoint(r.x,r.y+r.height).matrixTransform(o)),d,u;this["#object-height-input"].addEventListener("change",d=function(){s=!0;var t=e["#object-height-input"].value,n=1,o=t/l;e["#object-aspect-ratio-button"].toggled&&(n=o);var d=-r.x*(n-1),u=-r.y*(o-1),c=SVGMatrix.fromMatrix(i);c.translateSelf(d,u),c.scaleNonUniformSelf(n,o),a.setAttribute("transform",c.toString())}),this["#object-height-input"].addEventListener("changeend",u=function(){e["#object-height-input"].removeEventListener("change",d),e["#object-height-input"].removeEventListener("changeend",u),e._isChangingObjectHeight=!1,s&&_reduceTransform7(a,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})})}else if(1<n.length){t.undoManager.checkpoint("Height"),this._isChangingObjectHeight=!0;var c=[],p=Symbol(),h=!1,m=!0,b=!1,x,g,v;try{for(var y=n[Symbol.iterator](),f;!(m=(f=y.next()).done);m=!0){var _=f.value,w=_getComputedTransform11(_),k=_getTransformToElement9(_,t.currentArtboard),A=k.inverse();_[p]={userTransform:w,userToArtboardTransform:k,artboardToUserTransform:A};var C=_transformRect8(_getUserBBox7(_),k);c.push(C)}}catch(e){b=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(b)throw v}}var S=_combineRects8(c),E=S.height;this["#object-height-input"].addEventListener("change",x=function(){h=!0;var t=e["#object-height-input"].value,a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l[p],u=d.userTransform,c=d.userToArtboardTransform,m=d.artboardToUserTransform,b=1,x=t/E;e["#object-aspect-ratio-button"].toggled&&(b=x);var g=-S.x*(b-1),v=-S.y*(x-1),y=SVGMatrix.fromMatrix(u);y.multiplySelf(m),y.translateSelf(g,v),y.scaleNonUniformSelf(b,x),y.multiplySelf(c),l.setAttribute("transform",y.toString())}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}),this["#object-height-input"].addEventListener("changeend",g=function(){if(e["#object-height-input"].removeEventListener("change",x),e["#object-height-input"].removeEventListener("changeend",g),e._isChangingObjectHeight=!1,h){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,_reduceTransform7(l,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}})}}},{key:"_onObjectAspectRatioButtonToggle",value:function(){this._ownerApp.setConfig("bx-geometrypanel:preserveObjectAspectRatio",this["#object-aspect-ratio-button"].toggled),this._updateObjectAspectRatioIcon()}},{key:"_onObjectOriginXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=t.currentArtboard.getScreenCTM().inverse(),r=_getComputedTransformOriginClientPoint2(n),o=r.matrixTransform(a),i=Symbol(),s=Symbol(),l=!0,d=!1,u,c,p;try{for(var h=n[Symbol.iterator](),m,b;!(l=(m=h.next()).done);l=!0)b=m.value,b[i]=_getTransformToElement9(b,t.currentArtboard).inverse(),b[s]=_getUserBBox7(b)}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}t.undoManager.checkpoint("Origin X"),this._isChangingObjectOriginX=!0,this["#object-origin-x-input"].addEventListener("change",u=function(){var a=new SVGPoint(e["#object-origin-x-input"].value,o.y),r=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(r=(c=u.next()).done);r=!0){var p=c.value,h=a.matrixTransform(p[i]),m=_userPointToBBoxPoint2(h,p[s]);_setTransformOriginBBoxPoint(p,m,t.geometryPrecision)}}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}),this["#object-origin-x-input"].addEventListener("changeend",c=function(){e["#object-origin-x-input"].removeEventListener("change",u),e["#object-origin-x-input"].removeEventListener("changeend",c),e._isChangingObjectOriginX=!1})}},{key:"_onObjectOriginYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=t.currentArtboard.getScreenCTM().inverse(),r=_getComputedTransformOriginClientPoint2(n),o=r.matrixTransform(a),i=Symbol(),s=Symbol(),l=!0,d=!1,u,c,p;try{for(var h=n[Symbol.iterator](),m,b;!(l=(m=h.next()).done);l=!0)b=m.value,b[i]=_getTransformToElement9(b,t.currentArtboard).inverse(),b[s]=_getUserBBox7(b)}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}t.undoManager.checkpoint("Origin Y"),this._isChangingObjectOriginY=!0,this["#object-origin-y-input"].addEventListener("change",u=function(){var a=new SVGPoint(o.x,e["#object-origin-y-input"].value),r=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(r=(c=u.next()).done);r=!0){var p=c.value,h=a.matrixTransform(p[i]),m=_userPointToBBoxPoint2(h,p[s]);_setTransformOriginBBoxPoint(p,m,t.geometryPrecision)}}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}),this["#object-origin-y-input"].addEventListener("changeend",c=function(){e["#object-origin-y-input"].removeEventListener("change",u),e["#object-origin-y-input"].removeEventListener("changeend",c),e._isChangingObjectOriginY=!1})}},{key:"_onObjectRotationChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=1<n.length?0:_round22(_getElementRotationAngle2(n[0]),2),r=_getComputedTransformOriginClientPoint2(n),o=Symbol(),i=!1,s=!0,l=!1,d,u,c;try{for(var p=n[Symbol.iterator](),h;!(s=(h=p.next()).done);s=!0){var m=h.value,b=_getComputedTransform11(m),x=m.getScreenCTM(),g=x.inverse();m[o]={clientToUserTransform:x,userToClientTransform:g,userTransform:b}}}catch(e){l=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw c}}t.undoManager.checkpoint("Rotation"),this._isChangingObjectRotation=!0,this["#object-rotation-box"].addEventListener("change",d=function(t){i=!0,t.target===e["#object-rotation-slider"]?e["#object-rotation-input"].value=e["#object-rotation-slider"].value:t.target===e["#object-rotation-input"]&&(e["#object-rotation-slider"].value=e["#object-rotation-input"].value),e._ownerApp.modKeys.shift&&(e["#object-rotation-input"].value=_snapRotationAngle(e["#object-rotation-slider"].value,15),e["#object-rotation-slider"].value=e["#object-rotation-input"].value);var s=e["#object-rotation-input"].value,l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=h[o],b=m.clientToUserTransform,x=m.userToClientTransform,g=m.userTransform,v=SVGMatrix.fromMatrix(g);v.multiplySelf(x),v.rotateSelf(s-a,r.x,r.y),v.multiplySelf(b),h.setAttribute("transform",v.toString())}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}),this["#object-rotation-box"].addEventListener("changeend",u=function(){if(e["#object-rotation-box"].removeEventListener("change",d),e["#object-rotation-box"].removeEventListener("changeend",u),e._isChangingObjectRotation=!1,i){var a=!0,r=!1,o;try{for(var s=n[Symbol.iterator](),l,c;!(a=(l=s.next()).done);a=!0)c=l.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}}})}},{key:"_update",value:function(){var e=this,t=this._ownerEditor.canvas.outermostSelectedElements,n=this._ownerEditor.canvas.selectedGuides;if(this["#panel-heading"].disabled=0===t.length&&0===n.length,!1===this._isChangingGuideX&&!1===this._isChangingGuideY)if(0===n.length)this["#guide-section"].hidden=!0;else{this["#guide-section"].hidden=!1;var a=n[0],r=_parseFloat10(a.getAttribute("x")),o=_parseFloat10(a.getAttribute("y")),i=_parseFloat10(a.getAttribute("angle"));this["#guide-x-input"].value=r,this["#guide-y-input"].value=o,this["#guide-orientation-buttons"].value=90==i%180?"horizontal":"vertical"}if(!1===this._isChangingObjectRotation&&!1===this._isChangingObjectX&&!1===this._isChangingObjectY&&!1===this._isChangingObjectWidth&&!1===this._isChangingObjectHeight&&!1===this._isChangingObjectOriginX&&!1===this._isChangingObjectOriginY)if(0===t.length)this["#object-section-heading"].disabled=!0,this["#object-x-heading"].disabled=!0,this["#object-x-input"].disabled=!0,this["#object-x-input"].value=0,this["#object-y-heading"].disabled=!0,this["#object-y-input"].disabled=!0,this["#object-y-input"].value=0,this["#object-width-heading"].disabled=!0,this["#object-width-input"].disabled=!0,this["#object-width-input"].value=0,this["#object-aspect-ratio-button"].disabled=!0,this["#object-height-heading"].disabled=!0,this["#object-height-input"].disabled=!0,this["#object-height-input"].value=0,this["#object-origin-x-heading"].disabled=!0,this["#object-origin-x-input"].disabled=!0,this["#object-origin-x-input"].value=0,this["#object-origin-y-heading"].disabled=!0,this["#object-origin-y-input"].disabled=!0,this["#object-origin-y-input"].value=0,this["#object-rotation-heading"].disabled=!0,this["#object-rotation-slider"].disabled=!0,this["#object-rotation-slider"].value=0,this["#object-rotation-input"].disabled=!0,this["#object-rotation-input"].value=0;else if(1===t.length){var s=t[0],l=_getTransformToElement9(s,this._ownerEditor.canvas.currentArtboard),d=_getUserBBox7(s),u=[new SVGPoint(d.x,d.y).matrixTransform(l),new SVGPoint(d.x+d.width,d.y).matrixTransform(l),new SVGPoint(d.x+d.width,d.y+d.height).matrixTransform(l),new SVGPoint(d.x,d.y+d.height).matrixTransform(l)],c=_getDistanceBetweenPoints3(u[0],u[1]),p=_getDistanceBetweenPoints3(u[1],u[2]),h=u.map(function(e){return e.x}),m=u.map(function(e){return e.y}),b=_min4.apply(void 0,_toConsumableArray(h)),x=_min4.apply(void 0,_toConsumableArray(m)),g=_round22(_getElementRotationAngle2(s),2),v=_getTransformOriginBBoxPoint(s),y=_bboxPointToUserPoint(v,d),f=y.matrixTransform(l),_=f.x,w=f.y;this["#object-section-heading"].disabled=!1,this["#object-x-heading"].disabled=!1,this["#object-x-input"].disabled=!1,this["#object-x-input"].value=_round22(b,2),this["#object-y-heading"].disabled=!1,this["#object-y-input"].disabled=!1,this["#object-y-input"].value=_round22(x,2),this["#object-width-heading"].disabled=!1,this["#object-width-input"].disabled=!1,this["#object-width-input"].value=_round22(c,2),this["#object-aspect-ratio-button"].disabled=!1,this["#object-height-heading"].disabled=!1,this["#object-height-input"].disabled=!1,this["#object-height-input"].value=_round22(p,2),this["#object-origin-x-heading"].disabled=!1,this["#object-origin-x-input"].disabled=!1,this["#object-origin-x-input"].value=_round22(_,2),this["#object-origin-y-heading"].disabled=!1,this["#object-origin-y-input"].disabled=!1,this["#object-origin-y-input"].value=_round22(w,2),this["#object-rotation-heading"].disabled=!1,this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=g,this["#object-rotation-input"].disabled=!1,this["#object-rotation-input"].value=g}else{var k=t.map(function(t){var n=_getTransformToElement9(t,e._ownerEditor.canvas.currentArtboard),a=_getUserBBox7(t),r=_transformRect8(a,n);return r}),A=_combineRects8(k),C=this._ownerEditor.canvas.currentArtboard.getScreenCTM().inverse(),S=_getComputedTransformOriginClientPoint2(t,!1),E=S.matrixTransform(C),T=E.x,P=E.y,L=A.x,M=A.y,D=A.width,I=A.height;this["#object-section-heading"].disabled=!1,this["#object-x-heading"].disabled=!1,this["#object-x-input"].disabled=!1,this["#object-x-input"].value=_round22(L,2),this["#object-y-heading"].disabled=!1,this["#object-y-input"].disabled=!1,this["#object-y-input"].value=_round22(M,2),this["#object-width-heading"].disabled=!1,this["#object-width-input"].disabled=!1,this["#object-width-input"].value=_round22(D,2),this["#object-aspect-ratio-button"].disabled=!1,this["#object-height-heading"].disabled=!1,this["#object-height-input"].disabled=!1,this["#object-height-input"].value=_round22(I,2),this["#object-origin-x-heading"].disabled=!1,this["#object-origin-x-input"].disabled=!1,this["#object-origin-x-input"].value=_round22(T,2),this["#object-origin-y-heading"].disabled=!1,this["#object-origin-y-input"].disabled=!1,this["#object-origin-y-input"].value=_round22(P,2),this["#object-rotation-heading"].disabled=!1,this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=0,this["#object-rotation-input"].disabled=!1,this["#object-rotation-input"].value=0}}},{key:"_updateObjectAspectRatioIcon",value:function(){this["#object-aspect-ratio-icon"].name=this["#object-aspect-ratio-button"].toggled?"lock":"lock-open"}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-geometrypanel",BXGeometryPanelElement)}}{{var _getClientBBox7=BoxySVG.utils.bbox.getClientBBox,_closest22=BoxySVG.utils.element.closest,_parseViewBox8=BoxySVG.utils.parsing.parseViewBox,_BoxySVG$utils$geomet11=BoxySVG.utils.geometry,_combineRects9=_BoxySVG$utils$geomet11.combineRects,_transformRect9=_BoxySVG$utils$geomet11.transformRect,_throttle11=BoxySVG.utils.time.throttle,_getComputedTransform12=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform8=BoxySVG.utils.transformReduction.reduceTransform,_shadowHTML10="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%}#align-section{padding:5px 20px 18px}#align-buttons{margin-top:20px;justify-content:space-between}#align-to-buttons{width:100%;margin-bottom:8px}#align-mode-buttons x-button,#align-to-buttons x-button{flex:1;text-align:center;width:auto}#align-mode-buttons{width:100%}#move-buttons{width:110px;align-items:center;margin-right:30px}#move-buttons>x-box{width:100%;justify-content:space-between}#move-buttons x-button{width:35px;height:35px;margin:0 0 4px;padding:0}#center-buttons x-icon,#move-buttons x-icon,#stretch-buttons x-icon{width:24px;height:24px}#move-buttons[data-side=outside] x-icon{transform:rotate(180deg)}#center-buttons x-button,#stretch-buttons x-button{width:35px;height:35px;margin:0 0 10px;padding:0}#center-buttons x-button:last-child,#stretch-buttons x-button:last-child{margin-bottom:0}#rotate-and-flip-section{display:flex;padding:16px 20px 18px}#order-buttons>x-box,#rotate-and-flip-section>x-box{flex:1}#order-buttons>x-box:last-child,#rotate-and-flip-section>x-box:last-child{margin-left:5px}#rotate-and-flip-section h3{width:auto}#flip-buttons,#rotate-buttons{width:100%}#order-section x-button,#rotate-and-flip-section x-button{width:100%;height:28px}#order-section x-button:last-child,#rotate-and-flip-section x-button:last-child{margin-top:5px}#group-section x-button x-label,#order-section x-button x-label,#rotate-and-flip-section x-button x-label{flex:none;margin-left:5px}#order-section{padding:16px 20px 14px}#group-section{padding:16px 20px 20px}#group-section x-button{flex:1;height:28px}#group-section x-button:last-child{margin-left:5px}</style>\n\n    <h2 id=\"panel-heading\">Arrangement</h2>\n\n    <section id=\"align-section\">\n      <h3 id=\"align-section-heading\">Align to</h3>\n\n      <x-buttons id=\"align-to-buttons\" tracking=\"1\">\n        <x-button id=\"align-to-view-box-button\" value=\"view-box\" skin=\"condensed\" toggled>\n          <x-label>View box</x-label>\n        </x-button>\n\n        <x-button id=\"align-to-first-selected-button\" value=\"first-selected\" skin=\"condensed\">\n          <x-label>First selected</x-label>\n        </x-button>\n      </x-buttons>\n\n      <x-buttons id=\"align-mode-buttons\" tracking=\"1\">\n        <x-button id=\"align-together-button\" value=\"together\" skin=\"condensed\" toggled>\n          <x-label>Together</x-label>\n        </x-button>\n\n        <x-button id=\"align-separately-button\" value=\"separately\" skin=\"condensed\">\n          <x-label>Separately</x-label>\n        </x-button>\n      </x-buttons>\n\n      <x-box id=\"align-buttons\">\n        <x-box id=\"move-buttons\" vertical data-side=\"inside\">\n          <x-button id=\"arrange-top-button\" skin=\"condensed\" value=\"move-top-inside\">\n            <x-icon name=\"align-top\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-box>\n            <x-button id=\"arrange-left-button\" skin=\"condensed\" value=\"move-left-inside\">\n              <x-icon name=\"align-left\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"arrange-right-button\" skin=\"condensed\" value=\"move-right-inside\">\n              <x-icon name=\"align-right\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n\n          <x-button id=\"arrange-bottom-button\" skin=\"condensed\" value=\"move-bottom-inside\">\n            <x-icon name=\"align-bottom\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n\n        <x-box id=\"center-buttons\" vertical>\n          <x-button id=\"center-button\" skin=\"condensed\" value=\"center\">\n            <x-icon name=\"center\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"center-horizontally-button\" skin=\"condensed\" value=\"horizontal-center\">\n            <x-icon name=\"center-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"center-vertically-button\" skin=\"condensed\" value=\"vertical-center\">\n            <x-icon name=\"center-vertically\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n\n        <x-box id=\"stretch-buttons\" vertical>\n          <x-button id=\"stretch-button\" skin=\"condensed\" value=\"stretch\">\n            <x-icon name=\"stretch\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"stretch-horizontally-button\" skin=\"condensed\" value=\"horizontal-stretch\">\n            <x-icon name=\"stretch-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"stretch-vertically-button\" skin=\"condensed\" value=\"vertical-stretch\">\n            <x-icon name=\"stretch-vertically\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"rotate-and-flip-section\">\n      <x-box id=\"rotate-box\" vertical>\n        <h3 id=\"rotate-box-heading\">Rotate</h3>\n\n        <x-box id=\"rotate-buttons\" vertical>\n          <x-button id=\"rotate-counterclockwise-button\" value=\"rotateCounterclockwise\">\n            <x-icon name=\"rotate-counterclockwise\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>-90\xB0</x-label>\n          </x-button>\n\n          <x-button id=\"rotate-clockwise-button\" value=\"rotateClockwise\">\n            <x-icon name=\"rotate-clockwise\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>+90\xB0</x-label>\n          </x-button>\n        </x-box>\n      </x-box>\n\n      <x-box id=\"flip-box\" vertical>\n        <h3 id=\"flip-box-heading\">Flip</h3>\n\n        <x-box id=\"flip-buttons\" vertical>\n          <x-button id=\"flip-horizontally-button\" value=\"flipX\">\n            <x-icon name=\"flip-x\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Horizontal</x-label>\n          </x-button>\n\n          <x-button id=\"flip-vertically-button\" value=\"flipY\">\n            <x-icon name=\"flip-y\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Vertical</x-label>\n          </x-button>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"order-section\">\n      <h3 id=\"order-section-heading\">Order</h3>\n\n      <x-box id=\"order-buttons\">\n        <x-box vertical>\n          <x-button id=\"raise-button\" value=\"raise\">\n            <x-icon name=\"raise\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Raise</x-label>\n          </x-button>\n\n          <x-button id=\"lower-button\" value=\"lower\">\n            <x-icon name=\"lower\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Lower</x-label>\n          </x-button>\n        </x-box>\n\n        <x-box vertical>\n          <x-button id=\"front-button\" value=\"raiseToFront\">\n            <x-icon name=\"raise-to-front\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Front</x-label>\n          </x-button>\n\n          <x-button id=\"back-button\" value=\"lowerToBack\">\n            <x-icon name=\"lower-to-bottom\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Back</x-label>\n          </x-button>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"group-section\">\n      <h3 id=\"group-section-heading\">Group</h3>\n\n      <x-box id=\"group-buttons\">\n        <x-button id=\"group-button\" value=\"group\">\n          <x-icon name=\"group\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Group</x-label>\n        </x-button>\n\n        <x-button id=\"ungroup-button\" value=\"ungroup\">\n          <x-icon name=\"ungroup\" iconset=\"images/icons.svg\"></x-icon>\n          <x-label>Ungroup</x-label>\n        </x-button>\n      </x-box>\n    </section>\n  ",BXArrangementPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update250Th=_throttle11(e._update,250,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML10;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#align-to-buttons"].addEventListener("toggle",function(){return e._onAlignToButtonsToggle()}),e["#align-mode-buttons"].addEventListener("toggle",function(){return e._onAlignModeButtonsToggle()}),e["#align-buttons"].addEventListener("click",function(t){return e._onAlignButtonsClick(t)}),e["#rotate-buttons"].addEventListener("click",function(t){return e._onRotateButtonsClick(t)}),e["#flip-buttons"].addEventListener("click",function(t){return e._onFlipButtonsClick(t)}),e["#order-buttons"].addEventListener("click",function(t){return e._onOrderButtonsClick(t)}),e["#group-buttons"].addEventListener("click",function(t){return e._onGroupButtonsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest22(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest22(this,"bx-editor");var e=this._ownerApp.getConfig("bx-arrangementpanel:alignTo"),t=this._ownerApp.getConfig("bx-arrangementpanel:alignMode");null!==e&&(this["#align-to-buttons"].value=e),null!==t&&(this["#align-mode-buttons"].value=t)}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){return e._onModKeysChange()}),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){return e._update()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){return e._update()}),this._update()}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onModKeysChange",value:function(){var e=this._ownerApp.modKeys.shift?"outside":"inside";this["#move-buttons"].setAttribute("data-side",e);var t=!0,n=!1,a;try{for(var r=this["#move-buttons"].querySelectorAll("x-button")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.value="outside"==e?i.value.replace("inside","outside"):i.value.replace("outside","inside")}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onAlignToButtonsToggle",value:function(){this._update(),this._ownerApp.setConfig("bx-arrangementpanel:alignTo",this["#align-to-buttons"].value)}},{key:"_onAlignModeButtonsToggle",value:function(){this._ownerApp.setConfig("bx-arrangementpanel:alignMode",this["#align-mode-buttons"].value)}},{key:"_onAlignButtonsClick",value:function(e){var t=e.target.closest("x-button");if(t){var n=this._ownerEditor.canvas,a=this["#align-to-buttons"].value,r=this["#align-mode-buttons"].value;if(n.undoManager.checkpoint("Align"),"view-box"===a){var o=n.currentArtboard.getScreenCTM(),i=_parseViewBox8(n.currentArtboard.getAttribute("viewBox")),s=_transformRect9(i,o);this._alignElementsToBBox(n.selectedElements,s,t.value,r)}else if("first-selected"===a){var l=n.selectedElements[0],d=n.selectedElements.slice(1),u=_getClientBBox7(l);this._alignElementsToBBox(d,u,t.value,r)}}}},{key:"_onRotateButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onFlipButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onOrderButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onGroupButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_alignElementsToBBox",value:function(e,t,n,a){if("separately"===a){var r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_getComputedTransform12(d),c=d.getScreenCTM(),p=c.inverse(),h=_getClientBBox7(d),m=0,b=0,x=1,g=1,v=0,y=0;if("move-left-inside"===n)m=t.x-h.x;else if("move-left-outside"===n)m=t.x-h.x-h.width;else if("move-right-inside"===n)m=t.x+t.width-h.x-h.width;else if("move-right-outside"===n)m=t.x+t.width-h.x;else if("move-top-inside"===n)b=t.y-h.y;else if("move-top-outside"===n)b=t.y-h.y-h.height;else if("move-bottom-inside"===n)b=t.y+t.height-h.y-h.height;else if("move-bottom-outside"===n)b=t.y+t.height-h.y;else if("center"===n)m=t.x-h.x+t.width/2-h.width/2,b=t.y-h.y+t.height/2-h.height/2;else if("horizontal-center"===n)m=t.x-h.x+t.width/2-h.width/2;else if("vertical-center"===n)b=t.y-h.y+t.height/2-h.height/2;else if("stretch"===n)x=t.width/h.width,g=t.height/h.height,m=t.x-h.x*x,b=t.y-h.y*g;else if("horizontal-stretch"===n)x=t.width/h.width,m=t.x-h.x*x;else if("vertical-stretch"===n)g=t.height/h.height,b=t.y-h.y*g;else if("fit"===n){var f=min(t.width/h.width,t.height/h.height);x=f,g=f,m=t.x-h.x+t.width/2-h.width/2,b=t.y-h.y+t.height/2-h.height/2,v=h.x+h.width/2,y=h.y+h.height/2}else"horizontal-fit"===n?(x=t.width/h.width,g=x,m=t.x-h.x,v=h.x,y=h.y):"vertical-fit"===n&&(g=t.height/h.height,x=g,b=t.y-h.y,v=h.x,y=h.y);var _=u.multiply(p);_.translateSelf(m,b),_.scaleNonUniformSelf(x,g,v,y),_.multiplySelf(c),d.setAttribute("transform",_.toString()),_reduceTransform8(d,{geometryPrecision:this._ownerEditor.canvas.geometryPrecision,transformPrecision:this._ownerEditor.canvas.transformPrecision})}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}else if("together"===a){var w=e.map(function(e){return _getClientBBox7(e)}),k=_combineRects9(w),A=0,C=0,S=1,E=1,T=0,P=0;if("move-left-inside"===n)A=t.x-k.x;else if("move-left-outside"===n)A=t.x-k.x-k.width;else if("move-right-inside"===n)A=t.x+t.width-k.x-k.width;else if("move-right-outside"===n)A=t.x+t.width-k.x;else if("move-top-inside"===n)C=t.y-k.y;else if("move-top-outside"===n)C=t.y-k.y-k.height;else if("move-bottom-inside"===n)C=t.y+t.height-k.y-k.height;else if("move-bottom-outside"===n)C=t.y+t.height-k.y;else if("center"===n)A=t.x-k.x+t.width/2-k.width/2,C=t.y-k.y+t.height/2-k.height/2;else if("horizontal-center"===n)A=t.x-k.x+t.width/2-k.width/2;else if("vertical-center"===n)C=t.y-k.y+t.height/2-k.height/2;else if("stretch"===n)S=t.width/k.width,E=t.height/k.height,A=t.x-k.x*S,C=t.y-k.y*E;else if("horizontal-stretch"===n)S=t.width/k.width,A=t.x-k.x*S;else if("vertical-stretch"===n)E=t.height/k.height,C=t.y-k.y*E;else if("fit"===n){var L=min(t.width/k.width,t.height/k.height);S=L,E=L,A=t.x-k.x+t.width/2-k.width/2,C=t.y-k.y+t.height/2-k.height/2,T=k.x+k.width/2,P=k.y+k.height/2}else"horizontal-fit"===n?(S=t.width/k.width,E=S,A=t.x-k.x,T=k.x,P=k.y):"vertical-fit"===n&&(E=t.height/k.height,S=E,C=t.y-k.y,T=k.x,P=k.y);var M=!0,D=!1,I;try{for(var V=e[Symbol.iterator](),N;!(M=(N=V.next()).done);M=!0){var R=N.value,z=_getComputedTransform12(R),G=R.getScreenCTM(),B=G.inverse(),O=z.multiply(B);O.translateSelf(A,C),O.scaleNonUniformSelf(S,E,T,P),O.multiplySelf(G),R.setAttribute("transform",O.toString()),_reduceTransform8(R,{geometryPrecision:this._ownerEditor.canvas.geometryPrecision,transformPrecision:this._ownerEditor.canvas.transformPrecision})}}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas;if(this["#panel-heading"].disabled=0===e.selectedElements.length,0===e.selectedElements.length){this["#align-section-heading"].disabled=!0,this["#align-to-view-box-button"].disabled=!0,this["#align-to-first-selected-button"].disabled=!0,this["#align-together-button"].disabled=!0,this["#align-separately-button"].disabled=!0;var t=!0,n=!1,a;try{for(var r=this["#align-buttons"].querySelectorAll("x-button")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.disabled=!0}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}else{this["#align-section-heading"].disabled=!1,this["#align-to-view-box-button"].disabled=!1,this["#align-to-first-selected-button"].disabled=!1,this["#align-together-button"].disabled=!1,this["#align-separately-button"].disabled=!1;var s=!0,l=!1,d;try{for(var u=this["#align-buttons"].querySelectorAll("x-button")[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p.disabled=!1}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}0===e.selectedElements.length?(this["#rotate-box-heading"].disabled=!0,this["#flip-box-heading"].disabled=!0,this["#rotate-counterclockwise-button"].disabled=!0,this["#rotate-clockwise-button"].disabled=!0,this["#flip-horizontally-button"].disabled=!0,this["#flip-vertically-button"].disabled=!0):(this["#rotate-box-heading"].disabled=!1,this["#flip-box-heading"].disabled=!1,this["#rotate-counterclockwise-button"].disabled=!1,this["#rotate-clockwise-button"].disabled=!1,this["#flip-horizontally-button"].disabled=!1,this["#flip-vertically-button"].disabled=!1),this["#raise-button"].disabled=!this._ownerApp.isCommandEnabled("raise"),this["#lower-button"].disabled=!this._ownerApp.isCommandEnabled("lower"),this["#front-button"].disabled=!this._ownerApp.isCommandEnabled("raiseToFront"),this["#back-button"].disabled=!this._ownerApp.isCommandEnabled("lowerToBack"),this["#order-section-heading"].disabled=this["#raise-button"].disabled&&this["#lower-button"].disabled,this["#group-button"].disabled=!this._ownerApp.isCommandEnabled("group"),this["#ungroup-button"].disabled=!this._ownerApp.isCommandEnabled("ungroup"),this["#group-section-heading"].disabled=this["#group-button"].disabled&&this["#ungroup-button"].disabled}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-arrangementpanel",BXArrangementPanelElement)}}{{var _BoxySVG$utils$elemen21=BoxySVG.utils.element,_html17=_BoxySVG$utils$elemen21.html,_closest23=_BoxySVG$utils$elemen21.closest,_throttle12=BoxySVG.utils.time.throttle,_shadowTemplate14=_html17(_templateObject32,window.theme,window.theme),BXPathPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle12(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate14.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#open-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("openPath")}),e["#close-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("closePath")}),e["#reverse-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("reversePath")}),e["#object-to-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("objectToPath")}),e["#stroke-to-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("strokeToPath")}),e["#boolop-buttons"].addEventListener("click",function(t){return e._onBoolopButtonsClick(t)}),e["#join-button"].addEventListener("click",function(){return e._ownerApp.execCommand("join")}),e["#split-button"].addEventListener("click",function(){return e._ownerApp.execCommand("split")}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest23(this,"bx-editor"),this._ownerApp=_closest23(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onBoolopButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_update",value:async function(){{var e=this._ownerApp.isCommandEnabled("openPath"),t=this._ownerApp.isCommandEnabled("closePath"),n=this._ownerApp.isCommandEnabled("reversePath"),a=await this._ownerEditor.commands.objectToPath.enabled(),r=await this._ownerEditor.commands.strokeToPath.enabled();this["#open-path-button"].disabled=!e,this["#close-path-button"].disabled=!t,this["#reverse-path-button"].disabled=!n,this["#object-to-path-button"].disabled=!a,this["#stroke-to-path-button"].disabled=!r,this["#general-section-heading"].disabled=!(e||t||n)}{var o=this._ownerApp.isCommandEnabled("unite"),i=this._ownerApp.isCommandEnabled("subtract"),s=this._ownerApp.isCommandEnabled("intersect"),l=this._ownerApp.isCommandEnabled("exclude");this["#unite-button"].disabled=!o,this["#subtract-button"].disabled=!i,this["#intersect-button"].disabled=!s,this["#exclude-button"].disabled=!l,this["#boolops-section-heading"].disabled=!(o||i||s||l)}{var d=this._ownerApp.isCommandEnabled("join"),u=this._ownerApp.isCommandEnabled("split");this["#join-button"].disabled=!d,this["#split-button"].disabled=!u,this["#compound-path-heading"].disabled=!(d||u)}this["#panel-heading"].disabled=this["#boolops-section-heading"].disabled&&this["#compound-path-heading"].disabled&&this["#general-section-heading"].disabled}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-pathpanel",BXPathPanelElement)}}{{var _BoxySVG$utils$elemen22=BoxySVG.utils.element,_html18=_BoxySVG$utils$elemen22.html,_closest24=_BoxySVG$utils$elemen22.closest,_throttle13=BoxySVG.utils.time.throttle,_shadowTemplate15=_html18(_templateObject33,window.theme,window.theme),BXDefsPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate15.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(){return e._toggleList(e["#buttons"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest24(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:async function(){var e=await this._ownerApp.getConfig("bx-defspanel:currentListID");this._toggleList(e||"symbols-list")}},{key:"_onDisabled",value:function(){this._toggleList(null)}},{key:"_toggleList",value:function(e){this["#buttons"].value=e;var t=!0,n=!1,a;try{for(var r=this["#lists"].children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.enabled=null!==e&&i.id===e}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}null!==e&&this._ownerApp.setConfig("bx-defspanel:currentListID",e)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-defspanel",BXDefsPanelElement)}}{{var _exportArtwork3=BoxySVG.utils.artworkExport.exportArtwork,_rasterizeArtwork2=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_getUserBBox8=BoxySVG.utils.bbox.getUserBBox,_parseColor7=BoxySVG.utils.color.parseColor,_parseViewBox9=BoxySVG.utils.parsing.parseViewBox,_BoxySVG$utils$elemen23=BoxySVG.utils.element,_html19=_BoxySVG$utils$elemen23.html,_closest25=_BoxySVG$utils$elemen23.closest,_BoxySVG$utils$math4=BoxySVG.utils.math,_normalize5=_BoxySVG$utils$math4.normalize,_round23=_BoxySVG$utils$math4.round,_BoxySVG$utils$geomet12=BoxySVG.utils.geometry,_combineRects10=_BoxySVG$utils$geomet12.combineRects,_transformRect10=_BoxySVG$utils$geomet12.transformRect,_getTransformToElement10=BoxySVG.utils.transformGeneral.getTransformToElement,_BoxySVG$utils$time8=BoxySVG.utils.time,_sleep8=_BoxySVG$utils$time8.sleep,_throttle14=_BoxySVG$utils$time8.throttle,_shadowTemplate16=_html19(_templateObject34,window.theme,window.theme),BXExportPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle14(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate16.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#format-select"].addEventListener("change",function(){return e._update()}),e["#export-button"].addEventListener("click",function(){return e._onExportButtonClick()}),e["#bitmap-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#bitmap-lock-button"].addEventListener("toggle",function(t){return e._onLockButtonToggle(t)}),e["#bitmap-width-input"].addEventListener("changestart",function(t){return e._onWidthInputChangeStart(t)}),e["#bitmap-height-input"].addEventListener("changestart",function(t){return e._onHeightInputChangeStart(t)}),e["#bitmap-compression-input"].addEventListener("change",function(){e["#bitmap-compression-slider"].value=e["#bitmap-compression-input"].value}),e["#bitmap-compression-slider"].addEventListener("change",function(){e["#bitmap-compression-input"].value=e["#bitmap-compression-slider"].value}),e["#vector-area-buttons"].addEventListener("toggle",function(){return e._update()}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest25(this,"bx-editor"),this._ownerApp=_closest25(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._onArtboardMutation()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update()}},{key:"_onArtboardMutation",value:function(){this._update()}},{key:"_onLockButtonToggle",value:function(e){var t=e.target.closest("x-button"),n=t.querySelector("x-icon");n.name=t.toggled?"lock":"lock-open"}},{key:"_onWidthInputChangeStart",value:function(e){var t=e.target.closest(".size-box"),n=t.querySelector(".width-input"),a=t.querySelector(".height-input"),r=t.querySelector(".lock-button");if(r.toggled){var o=n.value/a.value,i,s;n.addEventListener("change",i=function(){var e=n.value/o;a.value=_normalize5(e,1,Infinity,0)}),n.addEventListener("changeend",s=function(){n.removeEventListener("change",i),n.removeEventListener("changeend",s)})}}},{key:"_onHeightInputChangeStart",value:function(e){var t=e.target.closest(".size-box"),n=t.querySelector(".width-input"),a=t.querySelector(".height-input"),r=t.querySelector(".lock-button");if(r.toggled){var o=n.value/a.value,i,s;a.addEventListener("change",i=function(){var e=o*a.value;n.value=_normalize5(e,1,Infinity,0)}),a.addEventListener("changeend",s=function(){a.removeEventListener("change",i),a.removeEventListener("changeend",s)})}}},{key:"_onExportButtonClick",value:async function(){var e=this["#format-select"].value;if("png"===e||"jpeg"===e||"webp"===e){var t=this["#bitmap-area-buttons"].value,n;n="view-box"===t?this._ownerEditor.canvas.extractArtworkWithViewBoxElements():this._ownerEditor.canvas.extractArtworkWithSelectedElements(),n.setAttribute("width",this["#bitmap-width-input"].value+"px"),n.setAttribute("height",this["#bitmap-height-input"].value+"px"),n.setAttribute("preserveAspectRatio","none");var a=this["#bitmap-background-color-select"].value,r=this["#bitmap-compression-slider"].value,o=_exportArtwork3(n,"html"),i=await _rasterizeArtwork2(o,e,r,a);await _sleep8(100),this._ownerApp.showBitmapExportDialog(i,e)}else if("svg"===e||"svgz"===e||"html"===e){var s=this["#vector-area-buttons"].value,l="html"===e?"html":"xml",d;"view-box"===s?d=this._ownerEditor.canvas.extractArtworkWithViewBoxElements():"selection"===s&&(this._ownerEditor.canvas.removeUnusedDefs(),d=this._ownerEditor.canvas.extractArtworkWithSelectedElements());var u=_exportArtwork3(d,l);await _sleep8(100),this._ownerApp.showArtworkExportDialog(u,e)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=this["#format-select"].value;if("png"===t||"jpeg"===t||"webp"===t){this["#bitmap-options-box"].hidden=!1,this["#vector-options-box"].hidden=!0;var n=this["#bitmap-area-buttons"].value;if(this["#bitmap-compression-box"].hidden="png"===t,"jpeg"===t){var o=_parseColor7(this["#bitmap-background-color-select"].value,"rgba"),i=_slicedToArray(o,4),s=i[0],r=i[1],l=i[2],d=i[3];this["#bitmap-background-color-select"].value="rgb("+s+", "+r+", "+l+")",this["#bitmap-background-color-picker"].removeAttribute("alphaslider")}else this["#bitmap-background-color-picker"].setAttribute("alphaslider","");if("view-box"===n&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===n&&0===e.selectedElements.length)this["#bitmap-width-heading"].disabled=!0,this["#bitmap-width-input"].disabled=!0,this["#bitmap-width-input"].value=0,this["#bitmap-lock-button"].disabled=!0,this["#bitmap-height-heading"].disabled=!0,this["#bitmap-height-input"].disabled=!0,this["#bitmap-height-input"].value=0,this["#bitmap-compression-heading"].disabled=!0,this["#bitmap-compression-slider"].disabled=!0,this["#bitmap-compression-input"].disabled=!0,this["#bitmap-background-heading"].disabled=!0,this["#bitmap-background-color-select"].disabled=!0,this["#export-button"].disabled=!0;else{if("view-box"===n){var a=e.currentArtboard.getAttribute("viewBox"),u=_parseViewBox9(a),c=u.x,p=u.y,h=u.width,m=u.height;this["#bitmap-width-heading"].disabled=!1,this["#bitmap-width-input"].disabled=!1,this["#bitmap-width-input"].value=h,this["#bitmap-lock-button"].disabled=!1,this["#bitmap-height-heading"].disabled=!1,this["#bitmap-height-input"].disabled=!1,this["#bitmap-height-input"].value=m,this["#bitmap-compression-heading"].disabled=!1,this["#bitmap-compression-slider"].disabled=!1,this["#bitmap-compression-input"].disabled=!1,this["#bitmap-background-heading"].disabled=!1,this["#bitmap-background-color-select"].disabled=!1}else if("selection"===n){var b=e.selectedElements.map(function(t){var n=_getTransformToElement10(t,e.currentArtboard),a=_getUserBBox8(t),r=_transformRect10(a,n);return r}),x=_combineRects10(b);this["#bitmap-width-heading"].disabled=!1,this["#bitmap-width-input"].disabled=!1,this["#bitmap-width-input"].value=_round23(x.width,0),this["#bitmap-lock-button"].disabled=!1,this["#bitmap-height-heading"].disabled=!1,this["#bitmap-height-input"].disabled=!1,this["#bitmap-height-input"].value=_round23(x.height,0),this["#bitmap-compression-heading"].disabled=!1,this["#bitmap-compression-slider"].disabled=!1,this["#bitmap-compression-input"].disabled=!1,this["#bitmap-background-heading"].disabled=!1,this["#bitmap-background-color-select"].disabled=!1}this["#export-button"].disabled=!1}}else if("svg"===t||"svgz"===t||"html"===t){this["#bitmap-options-box"].hidden=!0,this["#vector-options-box"].hidden=!1;var g=this["#vector-area-buttons"].value;this["#export-button"].disabled="view-box"===g&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===g&&0===e.selectedElements.length}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-exportpanel",BXExportPanelElement)}}{{var _BoxySVG$utils$elemen24=BoxySVG.utils.element,_html20=_BoxySVG$utils$elemen24.html,_closest26=_BoxySVG$utils$elemen24.closest,_shadowTemplate17=_html20(_templateObject35,window.theme,window.theme),BXFreehandToolSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate17.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#smoothing-slider"].addEventListener("change",function(){e["#smoothing-input"].value=e["#smoothing-slider"].value,e._ownerApp.setConfig("bx-freehandtoolsettings:smoothing",e["#smoothing-slider"].value)}),e["#smoothing-input"].addEventListener("change",function(){e["#smoothing-slider"].value=e["#smoothing-input"].value,e._ownerApp.setConfig("bx-freehandtoolsettings:smoothing",e["#smoothing-slider"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest26(this,"bx-electronapp, bx-chromeapp, bx-webapp");var e=this._ownerApp.getConfig("bx-freehandtoolsettings:smoothing");null!==e&&(this["#smoothing-slider"].value=e,this["#smoothing-input"].value=e)}}]),t}(_CustomElement);customElements.define("bx-freehandtoolsettings",BXFreehandToolSettingsElement)}}{{var _BoxySVG$utils$elemen25=BoxySVG.utils.element,_html21=_BoxySVG$utils$elemen25.html,_closest27=_BoxySVG$utils$elemen25.closest,_shadowTemplate18=_html21(_templateObject36,window.theme,window.theme),BXTransformToolSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate18.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#selection-mode-buttons"].addEventListener("toggle",function(){e._onSelectionModeButtonsToggle()}),e["#preserve-stroke-width-checkbox"].addEventListener("change",function(){e._onPreserveStrokeWidthCheckboxToggle()}),e["#preserve-rect-radii-checkbox"].addEventListener("change",function(){e._onPreserveRectRadiiCheckboxToggle()}),e["#preserve-rotation-checkbox"].addEventListener("change",function(){e._onPreserveRotationCheckboxToggle()}),e["#preserve-aspect-ratio-checkbox"].addEventListener("change",function(){e._onPreserveAspectRatioCheckboxToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest27(this,"bx-electronapp, bx-chromeapp, bx-webapp");var e=this._ownerApp.getConfig("bx-transformtoolsettings:selectionMode"),t=this._ownerApp.getConfig("bx-transformtoolsettings:preserveStrokeWidth"),n=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRectRadii"),a=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRotation"),r=this._ownerApp.getConfig("bx-transformtoolsettings:preserveAspectRatio");null!==e&&(this["#selection-mode-buttons"].value=e),null!==t&&(this["#preserve-stroke-width-checkbox"].toggled=t),null!==n&&(this["#preserve-rect-radii-checkbox"].toggled=n),null!==a&&(this["#preserve-rotation-checkbox"].toggled=a),null!==r&&(this["#preserve-aspect-ratio-checkbox"].toggled=r)}},{key:"_onSelectionModeButtonsToggle",value:function(){var e=this["#selection-mode-buttons"].value;this._ownerApp.setConfig("bx-transformtoolsettings:selectionMode",e)}},{key:"_onPreserveStrokeWidthCheckboxToggle",value:function(){var e=this["#preserve-stroke-width-checkbox"].toggled;this._ownerApp.setConfig("bx-transformtoolsettings:preserveStrokeWidth",e)}},{key:"_onPreserveRectRadiiCheckboxToggle",value:function(){var e=this["#preserve-rect-radii-checkbox"].toggled;this._ownerApp.setConfig("bx-transformtoolsettings:preserveRectRadii",e)}},{key:"_onPreserveRotationCheckboxToggle",value:function(){var e=this["#preserve-rotation-checkbox"].toggled;this._ownerApp.setConfig("bx-transformtoolsettings:preserveRotation",e)}},{key:"_onPreserveAspectRatioCheckboxToggle",value:function(){var e=this["#preserve-aspect-ratio-checkbox"].toggled;this._ownerApp.setConfig("bx-transformtoolsettings:preserveAspectRatio",e)}}]),t}(_CustomElement);customElements.define("bx-transformtoolsettings",BXTransformToolSettingsElement)}}{{var _BoxySVG$utils$elemen26=BoxySVG.utils.element,_html22=_BoxySVG$utils$elemen26.html,_closest28=_BoxySVG$utils$elemen26.closest,_shadowTemplate19=_html22(_templateObject37,window.theme,window.theme),BXShapeToolSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate19.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){e._onDrawingModeButtonsToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest28(this,"bx-electronapp, bx-chromeapp, bx-webapp");var e=this._ownerApp.getConfig("bx-shapetoolsettings#"+this.id+":drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-shapetoolsettings#"+this.id+":drawingMode",e)}}]),t}(_CustomElement);customElements.define("bx-shapetoolsettings",BXShapeToolSettingsElement)}}{{var _BoxySVG$utils$bbox2=BoxySVG.utils.bbox,_getUserBBox9=_BoxySVG$utils$bbox2.getUserBBox,_getClientBBox8=_BoxySVG$utils$bbox2.getClientBBox,_isPointerMoveIntentional5=BoxySVG.utils.event.isPointerMoveIntentional,_closest29=BoxySVG.utils.element.closest,_round24=BoxySVG.utils.math.round,_BoxySVG$utils$time9=BoxySVG.utils.time,_sleep9=_BoxySVG$utils$time9.sleep,_throttle15=_BoxySVG$utils$time9.throttle,_decomposeTransform19=BoxySVG.utils.transformDecomposition.decomposeTransform,_reduceTransform9=BoxySVG.utils.transformReduction.reduceTransform,_Vector3=BoxySVG.classes.Vector,_abs9=Math.abs,atan=Math.atan,_min5=Math.min,_max5=Math.max,_parseFloat11=Number.parseFloat,_BoxySVG$utils$geomet13=BoxySVG.utils.geometry,_comparePoints2=_BoxySVG$utils$geomet13.comparePoints,_getRotationAngleFromPoints2=_BoxySVG$utils$geomet13.getRotationAngleFromPoints,_snapRotationAngle2=_BoxySVG$utils$geomet13.snapRotationAngle,_transformRect11=_BoxySVG$utils$geomet13.transformRect,_combineRects11=_BoxySVG$utils$geomet13.combineRects,_BoxySVG$utils$transf10=BoxySVG.utils.transformGeneral,_getComputedTransform13=_BoxySVG$utils$transf10.getComputedTransform,_getComputedTransformOriginClientPoint3=_BoxySVG$utils$transf10.getComputedTransformOriginClientPoint,_getTransformToElement11=_BoxySVG$utils$transf10.getTransformToElement,_getElementRotationAngle3=_BoxySVG$utils$transf10.getElementRotationAngle,_setElementRotationAngle2=_BoxySVG$utils$transf10.setElementRotationAngle,_skew=_BoxySVG$utils$transf10.skew,_userPointToBBoxPoint3=_BoxySVG$utils$transf10.userPointToBBoxPoint,scaleGrippieSize=12,rotateGrippieSize=12,skewGrippieSize=12,originGrippieSize=10,$initialStrokeWidth=Symbol(),$initialVectorEffect=Symbol(),$initialTransforms=Symbol(),$initialUserBBox=Symbol(),_shadowHTML11="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}#rotate-grippies>.grippie,#scale-grippies>.grippie,#skew-grippies>.grippie{fill:#2e66f9;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-transformhud-grippie-shadow)}#rotate-grippies>.grippie,#skew-grippies>.grippie{fill:red}#skew-grippies>.grippie{fill:orange}</style>\n\n    <defs>\n      <filter id=\"bx-transformhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-transformhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-transformhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n    </defs>\n\n    <g id=\"grippies\">\n      <g id=\"scale-grippies\">\n        <rect class=\"grippie\" data-position=\"top\"></rect>\n        <rect class=\"grippie\" data-position=\"left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom\"></rect>\n        <rect class=\"grippie\" data-position=\"right\"></rect>\n        <rect class=\"grippie\" data-position=\"top-left\"></rect>\n        <rect class=\"grippie\" data-position=\"top-right\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom-left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom-right\"></rect>\n      </g>\n\n      <g id=\"rotate-grippies\">\n        <rect class=\"grippie\" rx=\"999\" data-position=\"top-left\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"top-right\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-left\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-right\"></rect>\n      </g>\n\n      <g id=\"skew-grippies\">\n        <rect class=\"grippie\" data-position=\"top\"></rect>\n        <rect class=\"grippie\" data-position=\"left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom\"></rect>\n        <rect class=\"grippie\" data-position=\"right\"></rect>\n      </g>\n\n      <svg id=\"origin-grippie\" viewBox=\"0 0 50 50\" visibility=\"hidden\">\n        <use href=\"images/icons.svg#cross\" x=\"0\" y=\"0\" width=\"50\" height=\"50\"></use>\n        <rect x=\"0\" y=\"0\" width=\"50\" height=\"50\" style=\"opacity: 0;\"/>\n      </svg>\n    </g>\n  ",BXTransformHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._scaleGrippiesByPosition={},this._skewGrippiesByPosition={},this._rotateGrippiesByPosition={},this._isDraggingRotateGrippie=!1,this._isScaling=!1,this._isTransformingInUserSpace=!1,this._updateGrippies25Th=_throttle15(this._updateGrippies,25,this),this._updateGrippies250Th=_throttle15(this._updateGrippies,250,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML11;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}var s=!0,l=!1,d;try{for(var u=this["#scale-grippies"].children[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,this._scaleGrippiesByPosition[p.getAttribute("data-position")]=p}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var h=!0,m=!1,b;try{for(var x=this["#rotate-grippies"].children[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,this._rotateGrippiesByPosition[v.getAttribute("data-position")]=v}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}var y=!0,f=!1,_;try{for(var w=this["#skew-grippies"].children[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,this._skewGrippiesByPosition[A.getAttribute("data-position")]=A}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}this._shadowRoot.addEventListener("pointerdown",function(t){e._onPointerDown(t)}),this._shadowRoot.addEventListener("dblclick",function(t){e._onDblClick(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest29(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest29(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"mode"===e&&this._onModeAttributeChange())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._onZoomChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onModeAttributeChange",value:function(){"scale"===this.mode?(this["#scale-grippies"].style.setProperty("visibility","visible"),this["#rotate-grippies"].style.setProperty("visibility","hidden"),this["#skew-grippies"].style.setProperty("visibility","hidden"),this["#origin-grippie"].style.setProperty("visibility","hidden")):"rotate-and-skew"===this.mode&&(this["#scale-grippies"].style.setProperty("visibility","hidden"),this["#rotate-grippies"].style.setProperty("visibility","visible"),this["#skew-grippies"].style.setProperty("visibility","visible"),this["#origin-grippie"].style.setProperty("visibility","visible")),this._updateGrippies()}},{key:"_onSelectedElementsChange",value:function(){0===this._ownerCanvas.outermostSelectedElements.length?this["#grippies"].style.setProperty("display","none"):this["#grippies"].style.setProperty("display","block"),this._updateGrippies()}},{key:"_onArtboardMutation",value:function(){100<this._ownerCanvas.selectedElements.length?this._updateGrippies250Th():this._updateGrippies25Th()}},{key:"_onZoomChange",value:function(){this._updateGrippies25Th(),this._updateDropShadows()}},{key:"_onPointerDown",value:function(e){var t=this,n=e.target,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(r){_isPointerMoveIntentional5(e,r)&&(n.removeEventListener("pointermove",a),t._onDragStart(e,r))}),n.addEventListener("pointerup",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("pointerup",r)})}},{key:"_onDblClick",value:function(e){var t=e.target.parentElement;t===this["#rotate-grippies"]?this._onRotateGrippieDblClick(e):t===this["#skew-grippies"]?this._onSkewGrippieDblClick(e):t===this["#origin-grippie"]&&this._onOriginGrippieDblClick(e)}},{key:"_onDragStart",value:function(e,t){var n=t.target.parentElement;n===this["#scale-grippies"]?this._onScaleGrippieDragStart(e,t):n===this["#rotate-grippies"]?this._onRotateGrippieDragStart(e,t):n===this["#skew-grippies"]?this._onSkewGrippieDragStart(e,t):n===this["#origin-grippie"]&&this._onOriginGrippieDragStart(e,t)}},{key:"_onScaleGrippieDragStart",value:function(e,t){var n=this;if(0===e.button){var a=t.target,r=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),o=a.getAttribute("data-position"),i=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value/2,a.y.baseVal.value+a.height.baseVal.value/2).matrixTransform(a.getScreenCTM()),s=new SVGPoint(e.clientX,e.clientY),l=new _Vector3(s,i),d=this._ownerApp.getConfig("bx-transformtoolsettings:preserveStrokeWidth"),u=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRectRadii"),c=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRotation"),p=this._ownerApp.getConfig("bx-transformtoolsettings:preserveAspectRatio"),h,m;d=null===d||d,u=null===u||u,c=null===c||c,p=null!==p&&p,this._isScaling=!0,this._ownerCanvas.undoManager.checkpoint("Scale Transform"),this._ownerCanvas.snapManager.snapStart();var b=!0,x=!1,g;try{for(var v=r[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,!0===d){var _=f.getScreenCTM(),w=_decomposeTransform19(_),k=w.scaleX,A=w.scaleY,C="left"===o||"right"===o?k:A,S=getComputedStyle(f);f[$initialStrokeWidth]=f.style.getPropertyValue("stroke-width"),f[$initialVectorEffect]=f.style.getPropertyValue("vector-effect");var E=_abs9(C)*_parseFloat11(S.getPropertyValue("stroke-width"));f.style.setProperty("stroke-width",E),f.style.setProperty("vector-effect","non-scaling-stroke")}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}if(this._canTransformElementsInUserSpace(r)){var T=_toArray(r),P=T[0],L=T.slice(1),M=Symbol();this._isTransformingInUserSpace=!0;var D=_getTransformToElement11(P,this),I=!0,V=!1,N;try{for(var R=function(){var e=G.value,t=e.getScreenCTM().inverse(),n=_getComputedTransform13(e),a=r.filter(function(t){return t!==e}),o=[_getUserBBox9(e)],i=!0,s=!1,l;try{for(var d=a[Symbol.iterator](),u;!(i=(u=d.next()).done);i=!0){var c=u.value,p=_getTransformToElement11(c,e),h=_transformRect11(_getUserBBox9(c),p);o.push(h)}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}var m=_combineRects11(o);e[M]={clientToUserTransform:t,userTransform:n,bbox:m}},z=r[Symbol.iterator](),G;!(I=(G=z.next()).done);I=!0)R()}catch(e){V=!0,N=e}finally{try{!I&&z.return&&z.return()}finally{if(V)throw N}}window.addEventListener("pointermove",h=function(e){var t=!0,a=!1,i;try{for(var d=r[Symbol.iterator](),u;!(t=(u=d.next()).done);t=!0){var c=u.value,h=c[M],m=h.clientToUserTransform,b=h.userTransform,x=h.bbox,g=s.matrixTransform(m),v=new SVGPoint(e.clientX,e.clientY);{var y=n._ownerCanvas.snapManager.snapPoint(v);!1===_comparePoints2(v,y)&&(v=y,v.x-=l.x,v.y-=l.y)}v=v.matrixTransform(m);var f=v.x-g.x,_=v.y-g.y,w=n._scaleParams(f,_,x,o,p),k=w.centerX,A=w.centerY,C=w.scaleX,S=w.scaleY,E=SVGMatrix.fromMatrix(b);E.translateSelf(-k*(C-1),-A*(S-1)),E.scaleNonUniformSelf(C,S),c.setAttribute("transform",E.toString())}}catch(e){a=!0,i=e}finally{try{!t&&d.return&&d.return()}finally{if(a)throw i}}})}else{var B=this._ownerCanvas.outermostSelectedElements.map(function(e){return _getClientBBox8(e)}),O=_combineRects11(B),j=!0,q=!1,U;try{for(var H=r[Symbol.iterator](),F;!(j=(F=H.next()).done);j=!0){var $=F.value,Y=$.getScreenCTM(),X=Y.inverse(),W=_getComputedTransform13($);$[$initialTransforms]={clientToUserTransform:Y,userToClientTransform:X,userTransform:W}}}catch(e){q=!0,U=e}finally{try{!j&&H.return&&H.return()}finally{if(q)throw U}}window.addEventListener("pointermove",h=function(t){var a=!0,i=!1,s;try{for(var d=r[Symbol.iterator](),u;!(a=(u=d.next()).done);a=!0){var c=u.value,h=new SVGPoint(e.clientX,e.clientY),m=new SVGPoint(t.clientX,t.clientY);{var b=n._ownerCanvas.snapManager.snapPoint(m);!1===_comparePoints2(m,b)&&(m=b,m.x-=l.x,m.y-=l.y)}var x=m.x-h.x,g=m.y-h.y,v=c[$initialTransforms],y=v.clientToUserTransform,f=v.userToClientTransform,_=v.userTransform,w=n._scaleParams(x,g,O,o,p),k=w.centerX,A=w.centerY,C=w.scaleX,S=w.scaleY,E=SVGMatrix.fromMatrix(_);E.multiplySelf(f),E.translateSelf(-k*(C-1),-A*(S-1)),E.scaleNonUniformSelf(C,S),E.multiplySelf(y),c.setAttribute("transform",E.toString())}}catch(e){i=!0,s=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw s}}})}window.addEventListener("pointerup",m=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",m);var e=!0,t=!1,a;try{for(var i=r[Symbol.iterator](),s,l;!(e=(s=i.next()).done);e=!0)l=s.value,!0===d&&(l.style.setProperty("stroke-width",l[$initialStrokeWidth]),l.style.setProperty("vector-effect",l[$initialVectorEffect])),_reduceTransform9(l,{geometryPrecision:n._ownerCanvas.geometryPrecision,transformPrecision:n._ownerCanvas.transformPrecision,preserveStrokeWidth:d,preserveRectRadii:u,preserveRotation:c,transformDirection:o})}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}n._ownerCanvas.snapManager.snapEnd(),n._isScaling=!1,n._isTransformingInUserSpace=!1})}}},{key:"_onRotateGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRotation");if(a=null===a||a,this._ownerCanvas.undoManager.checkpoint("Rotate Transform"),this._canTransformElementsInUserSpace(n)&&(this._isTransformingInUserSpace=!0),1===n.length){var r=n[0],o=_getElementRotationAngle3(r),i=new SVGPoint(e.clientX,e.clientY),s=_getComputedTransformOriginClientPoint3([r]),l,d;this._isDraggingRotateGrippie=!0,window.addEventListener("pointermove",l=function(e){var n=new SVGPoint(e.clientX,e.clientY),a=_getRotationAngleFromPoints2(s,i,n),l=o+a;t._ownerApp.modKeys.shift&&(l=_snapRotationAngle2(l,15)),_setElementRotationAngle2(r,l)}),window.addEventListener("pointerup",d=function(){window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d),_reduceTransform9(r,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:!0,preserveRotation:a}),t._isDraggingRotateGrippie=!1,t._isTransformingInUserSpace=!1})}else{var u=_getComputedTransformOriginClientPoint3(n),c=new SVGPoint(e.clientX,e.clientY),p=!0,h=!1,m,b,x;try{for(var g=n[Symbol.iterator](),v;!(p=(v=g.next()).done);p=!0){var y=v.value,f=_getComputedTransform13(y),_=y.getScreenCTM(),w=_.inverse();y[$initialTransforms]={clientToUserTransform:_,userToClientTransform:w,userTransform:f}}}catch(e){h=!0,x=e}finally{try{!p&&g.return&&g.return()}finally{if(h)throw x}}this._isDraggingRotateGrippie=!0,window.addEventListener("pointermove",m=function(e){var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l[$initialTransforms],p=d.clientToUserTransform,h=d.userToClientTransform,m=d.userTransform,b=new SVGPoint(e.clientX,e.clientY),x=_getRotationAngleFromPoints2(u,c,b);t._ownerApp.modKeys.shift&&(x=_snapRotationAngle2(x,15));var g=SVGMatrix.fromMatrix(m);g.multiplySelf(h),g.rotateSelf(x,u.x,u.y),g.multiplySelf(p),l.setAttribute("transform",g.toString())}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",b);var e=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(e=(s=i.next()).done);e=!0)l=s.value,_reduceTransform9(l,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:!0,preserveRotation:a})}catch(e){r=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}t._isDraggingRotateGrippie=!1,t._isTransformingInUserSpace=!1})}}}},{key:"_onSkewGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=e.path[0].getAttribute("data-position"),r,o,i;i="top"===a||"bottom"===a?"horizontal":"vertical";var s=this._ownerApp.getConfig("bx-transformtoolsettings:preserveStrokeWidth"),l=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRectRadii"),d=this._ownerApp.getConfig("bx-transformtoolsettings:preserveRotation");s=null===s||s,l=null===l||l,d=null===d||d,this._ownerCanvas.undoManager.checkpoint("Skew Transform");var u=!0,c=!1,p;try{for(var h=n[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0){b=m.value,b[$initialStrokeWidth]=b.style.getPropertyValue("stroke-width"),b[$initialVectorEffect]=b.style.getPropertyValue("vector-effect");var x=b.getScreenCTM(),g=_decomposeTransform19(x),v=g.scaleX,y=g.scaleY,f=getComputedStyle(b),_=_abs9((v+y)/2)*_parseFloat11(f.getPropertyValue("stroke-width"));b.style.setProperty("stroke-width",_),b.style.setProperty("vector-effect","non-scaling-stroke")}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}if(this._canTransformElementsInUserSpace(n)){var w=_toArray(n),k=w[0],A=w.slice(1),C=_getUserBBox9(k),S=[],E=Symbol(),T=!0,P=!1,L;try{for(var M=A[Symbol.iterator](),D;!(T=(D=M.next()).done);T=!0){var I=D.value,V=_getTransformToElement11(I,k),N=_transformRect11(_getUserBBox9(I),V);S.push(N)}}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}var R=_combineRects11([C].concat(S)),z=_getTransformToElement11(k,this),G=new SVGPoint(e.clientX,e.clientY),B=_getComputedTransformOriginClientPoint3(n),O=!0,j=!1,q;try{for(var U=n[Symbol.iterator](),H;!(O=(H=U.next()).done);O=!0){var F=H.value,$=F.getScreenCTM().inverse(),Y=_getComputedTransform13(F);F[E]={clientToUserTransform:$,userTransform:Y}}}catch(e){j=!0,q=e}finally{try{!O&&U.return&&U.return()}finally{if(j)throw q}}window.addEventListener("pointermove",r=function(e){var a=t._ownerApp.modKeys,r=a.ctrl,o=a.alt,s=a.shift,l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=h[E],b=m.clientToUserTransform,x=m.userTransform,g=G.matrixTransform(b),v=B.matrixTransform(b),y=new SVGPoint(e.clientX,e.clientY),f=y.matrixTransform(b),_=_getRotationAngleFromPoints2(v,g,f),w=SVGMatrix.fromMatrix(x);w="horizontal"===i?_skew(w,-_,0,v.x,v.y):_skew(w,0,_,v.x,v.y),h.setAttribute("transform",w.toString())}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}})}else{var X=new SVGPoint(e.clientX,e.clientY),W=_getComputedTransformOriginClientPoint3(n),K=!0,Z=!1,J;try{for(var Q=n[Symbol.iterator](),ee;!(K=(ee=Q.next()).done);K=!0){var te=ee.value,ne=te.getScreenCTM(),ae=ne.inverse(),re=_getComputedTransform13(te);te[$initialTransforms]={clientToUserTransform:ne,userToClientTransform:ae,userTransform:re}}}catch(e){Z=!0,J=e}finally{try{!K&&Q.return&&Q.return()}finally{if(Z)throw J}}window.addEventListener("pointermove",r=function(e){var t=!0,a=!1,r;try{for(var o=n[Symbol.iterator](),s;!(t=(s=o.next()).done);t=!0){var l=s.value,d=l[$initialTransforms],u=d.clientToUserTransform,c=d.userToClientTransform,p=d.userTransform,h=new SVGPoint(e.clientX,e.clientY),m=_getRotationAngleFromPoints2(W,X,h),b=SVGMatrix.fromMatrix(p);b.multiplySelf(c),b="horizontal"===i?_skew(b,-m,0,W.x,W.y):_skew(b,0,m,W.x,W.y),b.multiplySelf(u),l.setAttribute("transform",b.toString())}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}})}window.addEventListener("pointerup",o=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o);var e=!0,a=!1,i;try{for(var s=n[Symbol.iterator](),u,c;!(e=(u=s.next()).done);e=!0)c=u.value,c.style.setProperty("stroke-width",c[$initialStrokeWidth]),c.style.setProperty("vector-effect",c[$initialVectorEffect]),_reduceTransform9(c,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:l,preserveRotation:d})}catch(e){a=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}})}}},{key:"_onOriginGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=new SVGPoint(e.clientX,e.clientY),r=!0,o=!1,i,s,l;try{for(var d=n[Symbol.iterator](),u;!(r=(u=d.next()).done);r=!0){var c=u.value,p=c.getScreenCTM().inverse(),h=_getUserBBox9(c);c[$initialTransforms]={clientToUserTransform:p},c[$initialUserBBox]=h}}catch(e){o=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}this._ownerCanvas.undoManager.checkpoint("Transform Origin");var m=_getComputedTransformOriginClientPoint3(n);window.addEventListener("pointermove",i=function(e){var r=new SVGPoint(e.clientX,e.clientY),o=new _Vector3(a,r),i=new SVGPoint(m.x+o.x,m.y+o.y),s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p[$initialTransforms].clientToUserTransform,b=p[$initialUserBBox],g=i.matrixTransform(h),v=_userPointToBBoxPoint3(g,b),f=_round24(v.x,t._ownerCanvas.geometryPrecision),x=_round24(v.y,t._ownerCanvas.geometryPrecision);p.setAttribute("data-bx-origin",f+" "+x)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}),window.addEventListener("pointerup",s=function(){window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",s)})}}},{key:"_onRotateGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.removeAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onSkewGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.removeAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onOriginGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.removeAttribute("data-bx-origin")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippies",value:function(){"scale"===this.mode?this._updateScaleGrippies():"rotate-and-skew"===this.mode&&(this._updateRotateGrippies(),this._updateSkewGrippies(),!1===this._isDraggingRotateGrippie&&this._updateOriginGrippie())}},{key:"_updateScaleGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=scaleGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._scaleGrippiesByPosition,r=!0,o=!1,i;try{for(var s=this["#scale-grippies"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.width.baseVal.value=t,d.height.baseVal.value=t}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var u=_toArray(e),c=u[0],p=u.slice(1),h=_getUserBBox9(c),m=[],b=!0,x=!1,g;try{for(var v=p[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=_getTransformToElement11(f,c),w=_transformRect11(_getUserBBox9(f),_);m.push(w)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}var k=_combineRects11([h].concat(m)),A=_getTransformToElement11(c,this),C=new SVGPoint(k.x+k.width/2,k.y).matrixTransform(A);a.top.x.baseVal.value=C.x-t/2,a.top.y.baseVal.value=C.y-t/2;var S=new SVGPoint(k.x+k.width/2,k.y+k.height).matrixTransform(A);a.bottom.x.baseVal.value=S.x-t/2,a.bottom.y.baseVal.value=S.y-t/2;var E=new SVGPoint(k.x,k.y+k.height/2).matrixTransform(A);a.left.x.baseVal.value=E.x-t/2,a.left.y.baseVal.value=E.y-t/2;var T=new SVGPoint(k.x+k.width,k.y+k.height/2).matrixTransform(A);a.right.x.baseVal.value=T.x-t/2,a.right.y.baseVal.value=T.y-t/2;var P=new SVGPoint(k.x,k.y).matrixTransform(A);a["top-left"].x.baseVal.value=P.x-t/2,a["top-left"].y.baseVal.value=P.y-t/2;var L=new SVGPoint(k.x+k.width,k.y).matrixTransform(A);a["top-right"].x.baseVal.value=L.x-t/2,a["top-right"].y.baseVal.value=L.y-t/2;var M=new SVGPoint(k.x,k.y+k.height).matrixTransform(A);a["bottom-left"].x.baseVal.value=M.x-t/2,a["bottom-left"].y.baseVal.value=M.y-t/2;var D=new SVGPoint(k.x+k.width,k.y+k.height).matrixTransform(A);a["bottom-right"].x.baseVal.value=D.x-t/2,a["bottom-right"].y.baseVal.value=D.y-t/2}else{var I=this.getScreenCTM().inverse(),V=e.map(function(e){return _getClientBBox8(e)}),N=_combineRects11(V);N=_transformRect11(N,I),a.top.x.baseVal.value=N.x+N.width/2-t/2,a.top.y.baseVal.value=N.y-t/2,a.bottom.x.baseVal.value=N.x+N.width/2-t/2,a.bottom.y.baseVal.value=N.y+N.height-t/2,a.left.x.baseVal.value=N.x-t/2,a.left.y.baseVal.value=N.y+N.height/2-t/2,a.right.x.baseVal.value=N.x+N.width-t/2,a.right.y.baseVal.value=N.y+N.height/2-t/2,a["top-left"].x.baseVal.value=N.x-t/2,a["top-left"].y.baseVal.value=N.y-t/2,a["top-right"].x.baseVal.value=N.x+N.width-t/2,a["top-right"].y.baseVal.value=N.y-t/2,a["bottom-left"].x.baseVal.value=N.x-t/2,a["bottom-left"].y.baseVal.value=N.y+N.height-t/2,a["bottom-right"].x.baseVal.value=N.x+N.width-t/2,a["bottom-right"].y.baseVal.value=N.y+N.height-t/2}}}},{key:"_updateRotateGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=rotateGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._rotateGrippiesByPosition,r=!0,o=!1,i;try{for(var s=this["#rotate-grippies"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.width.baseVal.value=t,d.height.baseVal.value=t}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var u=_toArray(e),c=u[0],p=u.slice(1),h=_getUserBBox9(c),m=[],b=!0,x=!1,g;try{for(var v=p[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=_getTransformToElement11(f,c),w=_transformRect11(_getUserBBox9(f),_);m.push(w)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}var k=_combineRects11([h].concat(m)),A=_getTransformToElement11(c,this),C=new SVGPoint(k.x,k.y).matrixTransform(A);a["top-left"].x.baseVal.value=C.x-t/2,a["top-left"].y.baseVal.value=C.y-t/2;var S=new SVGPoint(k.x+k.width,k.y).matrixTransform(A);a["top-right"].x.baseVal.value=S.x-t/2,a["top-right"].y.baseVal.value=S.y-t/2;var E=new SVGPoint(k.x,k.y+k.height).matrixTransform(A);a["bottom-left"].x.baseVal.value=E.x-t/2,a["bottom-left"].y.baseVal.value=E.y-t/2;var T=new SVGPoint(k.x+k.width,k.y+k.height).matrixTransform(A);a["bottom-right"].x.baseVal.value=T.x-t/2,a["bottom-right"].y.baseVal.value=T.y-t/2}else{var P=this.getScreenCTM().inverse(),L=e.map(function(e){return _getClientBBox8(e)}),M=_combineRects11(L);M=_transformRect11(M,P),a["top-left"].x.baseVal.value=M.x-t/2,a["top-left"].y.baseVal.value=M.y-t/2,a["top-right"].x.baseVal.value=M.x+M.width-t/2,a["top-right"].y.baseVal.value=M.y-t/2,a["bottom-left"].x.baseVal.value=M.x-t/2,a["bottom-left"].y.baseVal.value=M.y+M.height-t/2,a["bottom-right"].x.baseVal.value=M.x+M.width-t/2,a["bottom-right"].y.baseVal.value=M.y+M.height-t/2}}}},{key:"_updateSkewGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=skewGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._skewGrippiesByPosition,r=!0,o=!1,i;try{for(var s=this["#skew-grippies"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.width.baseVal.value=t,d.height.baseVal.value=t}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var u=_toArray(e),c=u[0],p=u.slice(1),h=_getUserBBox9(c),m=[],b=!0,x=!1,g;try{for(var v=p[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=_getTransformToElement11(f,c),w=_transformRect11(_getUserBBox9(f),_);m.push(w)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}var k=_combineRects11([h].concat(m)),A=_getTransformToElement11(c,this),C=new SVGPoint(k.x+k.width/2,k.y).matrixTransform(A);a.top.x.baseVal.value=C.x-t/2,a.top.y.baseVal.value=C.y-t/2;var S=new SVGPoint(k.x+k.width/2,k.y+k.height).matrixTransform(A);a.bottom.x.baseVal.value=S.x-t/2,a.bottom.y.baseVal.value=S.y-t/2;var E=new SVGPoint(k.x,k.y+k.height/2).matrixTransform(A);a.left.x.baseVal.value=E.x-t/2,a.left.y.baseVal.value=E.y-t/2;var T=new SVGPoint(k.x+k.width,k.y+k.height/2).matrixTransform(A);a.right.x.baseVal.value=T.x-t/2,a.right.y.baseVal.value=T.y-t/2}else{var P=this.getScreenCTM().inverse(),L=e.map(function(e){return _getClientBBox8(e)}),M=_combineRects11(L);M=_transformRect11(M,P),a.top.x.baseVal.value=M.x+M.width/2-t/2,a.top.y.baseVal.value=M.y-t/2,a.bottom.x.baseVal.value=M.x+M.width/2-t/2,a.bottom.y.baseVal.value=M.y+M.height-t/2,a.left.x.baseVal.value=M.x-t/2,a.left.y.baseVal.value=M.y+M.height/2-t/2,a.right.x.baseVal.value=M.x+M.width-t/2,a.right.y.baseVal.value=M.y+M.height/2-t/2}}}},{key:"_updateOriginGrippie",value:function(){if(1<=this._ownerCanvas.outermostSelectedElements.length){var e=originGrippieSize/this._ownerCanvas.scale,t=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),n=_getComputedTransformOriginClientPoint3(this._ownerCanvas.outermostSelectedElements);n=n.matrixTransform(t),this["#origin-grippie"].setAttribute("width",e),this["#origin-grippie"].setAttribute("height",e),this["#origin-grippie"].setAttribute("x",n.x-e/2),this["#origin-grippie"].setAttribute("y",n.y-e/2)}}},{key:"_updateDropShadows",value:function(){this["#bx-transformhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"blink",value:async function(){this["#grippies"].style.setProperty("display","none"),await _sleep9(200),0<this._ownerCanvas.outermostSelectedElements.length&&this["#grippies"].style.setProperty("display","block")}},{key:"_canTransformElementsInUserSpace",value:function(e){var t=2;if(1<e.length){var n=_toArray(e),a=n[0],r=n.slice(1),o=!0,i=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)if(u=d.value,u.parentElement!==a.parentElement)return!1}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var c=_getComputedTransform13(a),p=_round24(atan(c.c/c.d),t),h=_round24(atan(-c.b/c.a),t),m=!0,b=!1,x;try{for(var g=r[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=_getComputedTransform13(y),_=_round24(atan(f.c/f.d),t),w=_round24(atan(-f.b/f.a),t);if(_!==p||w!==h)return!1}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}}return!0}},{key:"_scaleParams",value:function(e,t,n,a,r){var o=this._ownerApp.modKeys,i=o.ctrl,s=o.alt,l=o.shift,d,u,c,p,h;return!1===r?i||l?!i&&l?h="B":i&&!l?h="C":i&&l&&(h="D"):h="A":!0===r&&(i||l?!i&&l?h="A":i&&!l?h="D":i&&l&&(h="C"):h="B"),"top"===a?"A"===h?(d=n.x+n.width/2,u=n.y+n.height,c=1,p=(n.height-t)/n.height):"B"===h?(d=n.x+n.width/2,u=n.y+n.height,p=(n.height-t)/n.height,c=p):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=1,p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,p=(n.height-n.height/2-t)/(n.height-n.height/2),c=p):"bottom"===a?"A"===h?(d=n.x+n.width/2,u=n.y,c=1,p=(n.height+t)/n.height):"B"===h?(d=n.x+n.width/2,u=n.y,p=(n.height+t)/n.height,c=p):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=1,p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,p=(n.height-n.height/2+t)/(n.height-n.height/2),c=p):"left"===a?"A"===h?(d=n.x+n.width,u=n.y+n.height/2,c=(n.width-e)/n.width,p=1):"B"===h?(d=n.x+n.width,u=n.y+n.height/2,c=(n.width-e)/n.width,p=c):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=1):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=c):"right"===a&&("A"===h?(d=n.x,u=n.y+n.height/2,c=(n.width+e)/n.width,p=1):"B"===h?(d=n.x,u=n.y+n.height/2,c=(n.width+e)/n.width,p=c):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=1):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=p=(n.width-n.width/2+e)/(n.width-n.width/2))),"top-left"===a?"A"===h?(d=n.x+n.width,u=n.y+n.height,c=(n.width-e)/n.width,p=(n.height-t)/n.height):"B"===h?(d=n.x+n.width,u=n.y+n.height,c=(n.width-e)/n.width,p=(n.height-t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs9(c)>=_abs9(p)?c=-p:p=-c):"top-right"===a?"A"===h?(d=n.x,u=n.y+n.height,c=(n.width+e)/n.width,p=(n.height-t)/n.height):"B"===h?(d=n.x,u=n.y+n.height,c=(n.width+e)/n.width,p=(n.height-t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs9(c)>=_abs9(p)?c=-p:p=-c):"bottom-left"===a?"A"===h?(d=n.x+n.width,u=n.y,c=(n.width-e)/n.width,p=(n.height+t)/n.height):"B"===h?(d=n.x+n.width,u=n.y,c=(n.width-e)/n.width,p=(n.height+t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs9(c)>=_abs9(p)?c=-p:p=-c):"bottom-right"===a&&("A"===h?(d=n.x,u=n.y,c=(n.width+e)/n.width,p=(n.height+t)/n.height):"B"===h?(d=n.x,u=n.y,c=(n.width+e)/n.width,p=(n.height+t)/n.height,c=p=_min5(c,p)):"C"===h?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===h&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs9(c)>=_abs9(p)?c=-p:p=-c)),{centerX:d,centerY:u,scaleX:c,scaleY:p}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"mode",get:function(){return this.hasAttribute("mode")?this.getAttribute("mode"):"scale"},set:function(e){this.setAttribute("mode",e)}},{key:"isScaling",get:function(){return this._isScaling}}],[{key:"observedAttributes",get:function(){return["enabled","mode"]}}]),t}(SVGGElement);customElements.define("bx-transformhud",BXTransformHudElement,{extends:"g"})}}{{var _getUserBBox10=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen27=BoxySVG.utils.element,_createElement22=_BoxySVG$utils$elemen27.createElement,_queryGraphicsElements=_BoxySVG$utils$elemen27.queryGraphicsElements,_closest30=_BoxySVG$utils$elemen27.closest,_isPointerMoveIntentional6=BoxySVG.utils.event.isPointerMoveIntentional,_getGradientColorAtOffset=BoxySVG.utils.gradient.getGradientColorAtOffset,_BoxySVG$utils$math5=BoxySVG.utils.math,_normalize6=_BoxySVG$utils$math5.normalize,_round25=_BoxySVG$utils$math5.round,_roundMatrix4=BoxySVG.utils.matrix.roundMatrix,_BoxySVG$utils$paint2=BoxySVG.utils.paint,_getPaintType2=_BoxySVG$utils$paint2.getPaintType,_getPaintServer4=_BoxySVG$utils$paint2.getPaintServer,_getRenderedTextNodes8=BoxySVG.utils.text.getRenderedTextNodes,_throttle16=BoxySVG.utils.time.throttle,_BoxySVG$utils$geomet14=BoxySVG.utils.geometry,_getPointAtFraction=_BoxySVG$utils$geomet14.getPointAtFraction,_getNearestPointOnLine2=_BoxySVG$utils$geomet14.getNearestPointOnLine,_getDistanceBetweenPoints4=_BoxySVG$utils$geomet14.getDistanceBetweenPoints,_getRotationAngleFromPoints3=_BoxySVG$utils$geomet14.getRotationAngleFromPoints,_snapPointToAngleMultiple=_BoxySVG$utils$geomet14.snapPointToAngleMultiple,_BoxySVG$utils$transf11=BoxySVG.utils.transformGeneral,_getComputedTransform14=_BoxySVG$utils$transf11.getComputedTransform,_getTransformFromPoints5=_BoxySVG$utils$transf11.getTransformFromPoints,_getTransformToElement12=_BoxySVG$utils$transf11.getTransformToElement,_bboxPointToUserPoint2=_BoxySVG$utils$transf11.bboxPointToUserPoint,_userPointToBBoxPoint4=_BoxySVG$utils$transf11.userPointToBBoxPoint,_BoxySVG$classes3=BoxySVG.classes,_Shortcut9=_BoxySVG$classes3.Shortcut,_Vector4=_BoxySVG$classes3.Vector,_keys3=Object.keys,$gradient=Symbol(),$gradientUser=Symbol(),$stop=Symbol(),_SVGUnitTypes5=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE2=_SVGUnitTypes5.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4=_SVGUnitTypes5.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,grippieSize=6,_shadowHTML12="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.subhud:focus{outline:0}.slider{stroke:#fff;stroke-width:7;stroke-linecap:round;outline:0}.slider,.slider-shadow,.stop-grippie{vector-effect:non-scaling-stroke}.slider-shadow{stroke:rgba(0,0,0,.3);stroke-linecap:round;pointer-events:none;outline:0;stroke-width:10}.stop-grippie{fill:#000;stroke:#fff;stroke-width:2;filter:url(#bx-lineargradienthud-grippie-shadow)}.stop-grippie[data-selected]{stroke:#bababa}.subhud:focus .stop-grippie[data-selected]{stroke:#93d2ff}</style>\n\n    <defs>\n      <filter id=\"bx-lineargradienthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-lineargradienthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-lineargradienthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\" tabindex=\"0\">\n        <line class=\"slider-shadow\"></line>\n        <line class=\"slider\"></line>\n        <g class=\"stop-grippies\"></g>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXLinearGradientHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAllStops()}}},this._updateAll80Th=_throttle16(this._updateAll,80,this),this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML12;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("keydown",function(t){return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("pointerup",function(t){return e._onShadowRootPointerUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest30(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest30(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&this._updateAll80Th())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_onDisabled",value:function(){this._selectStops([]),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudPointerDownListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateAll80Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._updateAll80Th()}},{key:"_onArtboardMutation",value:function(e){if(this._draggedGrippie)this._updatePositions(this._draggedGrippie.parentElement.parentElement);else if(this._draggedSlider)this._updatePositions(this._draggedSlider.parentElement);else{var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,"style"===i.attributeName&&"stop"===i.target.localName?this._updateGrippiesColor():this._updateAll80Th()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onUndoOrRedo",value:function(){this._selectStops([])}},{key:"_onArtboardPointerDown",value:function(e){0===e.button&&this._selectStops([])}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&0===e.button&&this._selectStops([])}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderPointerDown(e):e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerDown(e);var n,a;this._pointerMovedAfterPointerDown=!1,this._pointerDownTimeStamp=e.timeStamp,window.addEventListener("pointermove",n=function(){t._pointerMovedAfterPointerDown=!0}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",n)})}}},{key:"_onShadowRootPointerUp",value:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerUp(e)}},{key:"_onShadowRootDblClick",value:function(e){100>e.timeStamp-this._pointerDownTimeStamp&&e.target.classList.contains("slider")&&this._onSliderDblClick(e)}},{key:"_onStopGrippiePointerDown",value:function(e){var t=e.target,n=t[$stop],a=n.closest("linearGradient"),r=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=this._selectedStops.filter(function(e){return e.closest("linearGradient")===a}),i=r[0],s=r[r.length-1],l=this._ownerApp.modKeys,d=l.alt,u=l.shift;this._pointerDownSelectedStops=[].concat(_toConsumableArray(o)),!1===u?!1===o.includes(n)&&this._selectStops([n]):!0===u&&!1===o.includes(n)&&(o.push(n),this._selectStops(o)),n===i&&0===n.offset.baseVal&&!1===d?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"start"):n===s&&1===n.offset.baseVal&&!1===d?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"end"):this._onDraggableStopGrippiePointerDown(e)}},{key:"_onStopGrippiePointerUp",value:function(e){if(!this._pointerMovedAfterPointerDown){var t=e.target,n=this._pointerDownSelectedStops,a=t[$stop],r=t.closest(".subhud"),o=r[$gradientUser],i=this._ownerApp.modKeys.shift,s=[],l=!0,d=!1,u;try{for(var c=this._ownerCanvas.selectedElements[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,("g"===h.localName||"a"===h.localName)&&h.contains(o)){var m=!0,b=!1,x=void 0;try{for(var g=_queryGraphicsElements([].concat(_toConsumableArray(h.children)))[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,s.unshift(y)}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}}else s.push(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.isSelectableElement(o)&&(s=s.filter(function(e){return e!==o}),s.unshift(o)),this._ownerCanvas.selectedElements=s;for(var f=o.parentElement;f!==this._ownerCanvas.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){this._ownerCanvas.currentContainer=f;break}!0===i&&!0===this._pointerDownSelectedStops.includes(a)&&(n=n.filter(function(e){return e!==a}),this._selectStops(n))}}},{key:"_onDraggableStopGrippiePointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a.querySelector(".slider"),o=this._ownerCanvas.geometryPrecision,i=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=s.inverse(),d=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),u=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),c=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value),p=c.matrixTransform(s),h=_getNearestPointOnLine2(d,u,c,!1),m=_slicedToArray(h,1),b=m[0],x=_getDistanceBetweenPoints4(d,b)/_getDistanceBetweenPoints4(d,u),g=!1,v,y;this._draggedGrippie=n,n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",v=function(n){!1==g&&(t._ownerCanvas.undoManager.checkpoint("Move gradient stop"),g=!0);var a=new SVGPoint(p.x+n.clientX-e.clientX,p.y+n.clientY-e.clientY),r=a.matrixTransform(l),o=_getNearestPointOnLine2(d,u,r,!1),s=_slicedToArray(o,1),c=s[0],h=_getDistanceBetweenPoints4(d,c)/_getDistanceBetweenPoints4(d,u),m=h-x,b=!0,v=!1,y;try{for(var f=t._selectedStops[Symbol.iterator](),_;!(b=(_=f.next()).done);b=!0){var w=_.value,k=i.get(w),A=k.minOffset,C=k.maxOffset,S=k.initialOffset;S+m<A?w.setAttribute("offset",A):S+m>C?w.setAttribute("offset",C):w.setAttribute("offset",S+m)}}catch(e){v=!0,y=e}finally{try{!b&&f.return&&f.return()}finally{if(v)throw y}}}),n.addEventListener("lostpointercapture",y=function(){n.removeEventListener("pointermove",v),n.removeEventListener("lostpointercapture",y);var e=!0,a=!1,r;try{for(var i=t._selectedStops[Symbol.iterator](),s,l;!(e=(s=i.next()).done);e=!0)l=s.value,l.setAttribute("offset",_round25(l.offset.baseVal,o))}catch(e){a=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}t._draggedGrippie=null})}},{key:"_onBoundingStopGrippieOrSliderEdgePointerDown",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"start",a=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(t){return t.contains(e.target)}),r=a[$gradient],o=a[$gradientUser],i=_getUserBBox10(o),s=o.getScreenCTM(),l=s.inverse(),d=_getComputedTransform14(r),u=this._ownerCanvas.transformPrecision,c=e.target,p=!1,h=!1,m,b,x,g,v,y,f,_;c.matches(".stop-grippie")?this._draggedGrippie=e.target:c.matches(".slider")&&(this._draggedSlider=e.target),c.setPointerCapture(e.pointerId);var w=function(){if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){"start"===n?(x=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),g=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value)):"end"===n&&(x=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),g=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value));var e=new _Vector4(g,x).getNormalVector();v=new SVGPoint(g.x+e.x,g.y+e.y);var t=x.matrixTransform(d),a=g.matrixTransform(d),o=v.matrixTransform(d);y=t.matrixTransform(s),f=a.matrixTransform(s),_=o.matrixTransform(s)}else if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){"start"===n?(x=new SVGPoint(r.x1.baseVal.valueInSpecifiedUnits,r.y1.baseVal.valueInSpecifiedUnits),g=new SVGPoint(r.x2.baseVal.valueInSpecifiedUnits,r.y2.baseVal.valueInSpecifiedUnits)):"end"===n&&(x=new SVGPoint(r.x2.baseVal.valueInSpecifiedUnits,r.y2.baseVal.valueInSpecifiedUnits),g=new SVGPoint(r.x1.baseVal.valueInSpecifiedUnits,r.y1.baseVal.valueInSpecifiedUnits));var l=new _Vector4(g,x).getNormalVector();v=new SVGPoint(g.x+l.x,g.y+l.y);var u=x.matrixTransform(d),c=g.matrixTransform(d),p=v.matrixTransform(d),h=_bboxPointToUserPoint2(u,i),m=_bboxPointToUserPoint2(c,i),b=_bboxPointToUserPoint2(p,i);y=h.matrixTransform(s),f=m.matrixTransform(s),_=b.matrixTransform(s)}};c.addEventListener("pointermove",m=function(n){if(!1==p)if(_isPointerMoveIntentional6(e,n,5))p=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient"),w();else return;var a=t._ownerApp.modKeys.shift,o=new SVGPoint(n.clientX+(y.x-e.clientX),n.clientY+(y.y-e.clientY)),s=new SVGPoint(y.x+n.clientX-e.clientX,y.y+n.clientY-e.clientY),c=SVGPoint.fromPoint(f),m,b,k,A;if(!1===a){var C=_getRotationAngleFromPoints3(f,y,o),S=new SVGMatrix().rotate(C,f.x,f.y);A=_.matrixTransform(S)}else if(!0===a){h=!0;var E=_snapPointToAngleMultiple(f,s,22.5),T=_slicedToArray(E,1),P=T[0];s=P}if(h){var L=new _Vector4(c,s).getNormalVector();A=new SVGPoint(c.x+L.x,c.y+L.y)}if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var M=s.matrixTransform(l),D=c.matrixTransform(l),I=A.matrixTransform(l);m=M.matrixTransform(d.inverse()),b=D.matrixTransform(d.inverse()),k=I.matrixTransform(d.inverse())}else if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var V=s.matrixTransform(l),N=c.matrixTransform(l),R=A.matrixTransform(l),z=_userPointToBBoxPoint4(V,i),G=_userPointToBBoxPoint4(N,i),B=_userPointToBBoxPoint4(R,i);m=z.matrixTransform(d.inverse()),b=G.matrixTransform(d.inverse()),k=B.matrixTransform(d.inverse())}var O=_getTransformFromPoints5(x,g,v,m,b,k),j=_roundMatrix4(d.multiply(O),u);r.setAttribute("gradientTransform",j.toString())}),c.addEventListener("lostpointercapture",b=function(){c.removeEventListener("pointermove",m),c.removeEventListener("lostpointercapture",b),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderPointerDown",value:function(e){var t=e.target,n=t.closest(".subhud"),a=n[$gradientUser],r=t.getScreenCTM(),o=new SVGPoint(e.clientX,e.clientY),i=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=i.matrixTransform(r),d=s.matrixTransform(r),u=new _Vector4(l,o).length,c=new _Vector4(d,o).length;5>=u?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"start"):5>=c?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"end"):this._onSliderBodyPointerDown(e)}},{key:"_onSliderBodyPointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a[$gradientUser],o=a[$gradient],i=_getUserBBox10(r),s=r.getScreenCTM(),l=s.inverse(),d=_getComputedTransform14(o),u=this._ownerCanvas.geometryPrecision,c=!1,p,h,m,b;if(this._draggedSlider=n,n.setPointerCapture(e.pointerId),o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var x=new SVGPoint(o.x1.baseVal.value,o.y1.baseVal.value),g=new SVGPoint(o.x2.baseVal.value,o.y2.baseVal.value),v=x.matrixTransform(d),y=g.matrixTransform(d);m=v.matrixTransform(s),b=y.matrixTransform(s)}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var f=new SVGPoint(o.x1.baseVal.valueInSpecifiedUnits,o.y1.baseVal.valueInSpecifiedUnits),_=new SVGPoint(o.x2.baseVal.valueInSpecifiedUnits,o.y2.baseVal.valueInSpecifiedUnits),w=f.matrixTransform(d),k=_.matrixTransform(d),A=_bboxPointToUserPoint2(w,i),C=_bboxPointToUserPoint2(k,i);m=A.matrixTransform(s),b=C.matrixTransform(s)}n.addEventListener("pointermove",p=function(n){if(!1==c)if(_isPointerMoveIntentional6(e,n,5))c=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient");else return;var a,r;if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var s=new SVGPoint(m.x+n.clientX-e.clientX,m.y+n.clientY-e.clientY),p=new SVGPoint(b.x+n.clientX-e.clientX,b.y+n.clientY-e.clientY),h=s.matrixTransform(l),x=p.matrixTransform(l);a=h.matrixTransform(d.inverse()),r=x.matrixTransform(d.inverse())}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var g=new SVGPoint(m.x+n.clientX-e.clientX,m.y+n.clientY-e.clientY),v=new SVGPoint(b.x+n.clientX-e.clientX,b.y+n.clientY-e.clientY),y=g.matrixTransform(l),f=v.matrixTransform(l),_=_userPointToBBoxPoint4(y,i),w=_userPointToBBoxPoint4(f,i);a=_.matrixTransform(d.inverse()),r=w.matrixTransform(d.inverse())}o.setAttribute("x1",_round25(a.x,u)),o.setAttribute("y1",_round25(a.y,u)),o.setAttribute("x2",_round25(r.x,u)),o.setAttribute("y2",_round25(r.y,u))}),n.addEventListener("lostpointercapture",h=function(){n.removeEventListener("pointermove",p),n.removeEventListener("lostpointercapture",h),t._draggedSlider=null})}},{key:"_onSliderDblClick",value:function(e){this._ownerCanvas.undoManager.checkpoint("Add Stop");var t=e.target,n=t.closest(".subhud"),a=n[$gradient],r=this.getScreenCTM().inverse(),o=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),i=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=_getDistanceBetweenPoints4(i,l),u=_getDistanceBetweenPoints4(i,s),c=d/u;c=_normalize6(c,0,1,5);for(var p=null,h=0,m;h<o.length;h+=1)if(m=o[h],m.offset.baseVal<c)p=h;else if(m.offset.baseVal>c)break;var b=_createElement22("svg:stop");if(b.setAttribute("offset",_round25(c,this._ownerCanvas.geometryPrecision)),b.style.stopColor=_getGradientColorAtOffset(a,c),null===p){var x=[].concat(_toConsumableArray(a.children)).find(function(e){return"stop"===e.localName});x?x.before(b):a.append(b)}else o[p].after(b);this._selectStops([b])}},{key:"_onShadowRootKeyDown",value:function(e){var t=_Shortcut9.fromEvent(e);0===this._selectedStops.length||(t.matches("Backspace")?(e.stopPropagation(),this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Left"),this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Right"),this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Left"),this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Right"),this._moveSelectedStops(10,"right"))))}},{key:"_updateAll",value:function(){var e=this._getSelectedLinearGradientUsers();if(0===e.length)this["#subhuds"].innerHTML="";else{var t=this._shadowRoot.activeElement,n=[];this["#subhuds"].innerHTML="";var a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_getPaintServer4(l,this.context);if(!n.includes(d)){n.push(d);var u=[].concat(_toConsumableArray(d.children)).filter(function(e){return"stop"===e.localName}),c=this["#subhud-template"].cloneNode(!0);c.removeAttribute("id"),c[$gradient]=d,c[$gradientUser]=l;var p=c.querySelector(".stop-grippies"),h=document.createDocumentFragment(),m=!0,b=!1,x=void 0;try{for(var g=u[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=_createElement22("svg:circle");f.setAttribute("class","stop-grippie"),f[$stop]=y,0.95<y.offset.baseVal?h.prepend(f):p.append(f)}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}p.append(h),this["#subhuds"].append(c)}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}if(t){var _=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(e){return e[$gradient]===t[$gradient]});_&&_.focus()}this._updatePositions(),this._updateGrippiesSize(),this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,!(e&&i!==e)){var s=i[$gradient],l=i[$gradientUser],d=[].concat(_toConsumableArray(s.children)).filter(function(e){return"stop"===e.localName}),u=_getComputedTransform14(s),c=_getTransformToElement12(l,this),p=i.querySelector(".slider"),h=i.querySelector(".slider-shadow"),m=[].concat(_toConsumableArray(i.querySelector(".stop-grippies").children));if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var b=new SVGPoint(s.x1.baseVal.value,s.y1.baseVal.value),x=new SVGPoint(s.x2.baseVal.value,s.y2.baseVal.value),g=b.matrixTransform(u),v=x.matrixTransform(u),y=g.matrixTransform(c),f=v.matrixTransform(c);p.setAttribute("x1",y.x),p.setAttribute("y1",y.y),p.setAttribute("x2",f.x),p.setAttribute("y2",f.y),h.setAttribute("x1",y.x),h.setAttribute("y1",y.y),h.setAttribute("x2",f.x),h.setAttribute("y2",f.y);var _=!0,w=!1,k=void 0;try{for(var A=function(){var e=S.value,t=m.find(function(t){return t[$stop]===e}),n=_getPointAtFraction(y,f,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},C=d[Symbol.iterator](),S;!(_=(S=C.next()).done);_=!0)A()}catch(e){w=!0,k=e}finally{try{!_&&C.return&&C.return()}finally{if(w)throw k}}}else if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var E=_getUserBBox10(l),T=new SVGPoint(s.x1.baseVal.valueInSpecifiedUnits,s.y1.baseVal.valueInSpecifiedUnits),P=new SVGPoint(s.x2.baseVal.valueInSpecifiedUnits,s.y2.baseVal.valueInSpecifiedUnits),L=T.matrixTransform(u),M=P.matrixTransform(u),D=new SVGPoint(E.x+L.x*E.width,E.y+L.y*E.height),I=new SVGPoint(E.x+M.x*E.width,E.y+M.y*E.height),V=D.matrixTransform(c),N=I.matrixTransform(c);p.setAttribute("x1",V.x),p.setAttribute("y1",V.y),p.setAttribute("x2",N.x),p.setAttribute("y2",N.y),h.setAttribute("x1",V.x),h.setAttribute("y1",V.y),h.setAttribute("x2",N.x),h.setAttribute("y2",N.y);var R=!0,z=!1,G=void 0;try{for(var B=function(){var e=j.value,t=m.find(function(t){return t[$stop]===e}),n=_getPointAtFraction(V,N,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},O=d[Symbol.iterator](),j;!(R=(j=O.next()).done);R=!0)B()}catch(e){z=!0,G=e}finally{try{!R&&O.return&&O.return()}finally{if(z)throw G}}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateGrippiesColor",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.style.fill=c[$stop].style.stopColor}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll(".stop-grippie")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.setAttribute("r",grippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-lineargradienthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_updateGrippiesSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,this._selectedStops.includes(c[$stop])?c.setAttribute("data-selected",""):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesZOrder",value:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,a;try{for(var r=this._selectedStops[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=!0,l=!1,d=void 0;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p[$stop]===i&&p.parentElement.append(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_selectStops",value:function(e){0===e.length&&0===this._selectedStops.length||(this._selectedStops=[].concat(_toConsumableArray(e)),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")))}},{key:"_selectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient],n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=!0,r=!1,o;try{for(var i=this._selectedStops[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.closest("linearGradient")!==t&&n.push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this._selectStops(n)}},{key:"_deselectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient];this._selectStops(this._selectedStops.filter(function(e){return e.closest("linearGradient")!==t}))}},{key:"_selectNextStop",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient];if(t){var n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t}),r=a[a.length-1],o=n[0],i=o;if(r&&1<n.length){for(var s=r.nextElementSibling;s;s=s.nextElementSibling)if("stop"===s.localName){i=s;break}this._selectStops([i])}}}},{key:"_deleteSelectedStops",value:function(){var e=this._shadowRoot.activeElement;if(null!==e){var t=e[$gradient],n=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t});if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Delete gradient stop(s)");var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.remove()}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}this._selectStops([])}}},{key:"_moveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;if(null!==n){var a=n.querySelector(".slider"),r=n[$gradient],o=this._selectedStops.filter(function(e){return e.closest("linearGradient")===r}),i=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=new SVGPoint(a.x1.baseVal.value,a.y1.baseVal.value),d=new SVGPoint(a.x2.baseVal.value,a.y2.baseVal.value),u=l.matrixTransform(s),c=d.matrixTransform(s),p=new _Vector4(u,c),h=e/p.length,m=!0,b=!1,x;try{for(var g=o[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=i.get(y),_=f.minOffset,w=f.maxOffset;if("left"===t){var k=_normalize6(y.offset.baseVal-h,_,w,4);y.setAttribute("offset",k)}else if("right"===t){var A=_normalize6(y.offset.baseVal+h,_,w,4);y.setAttribute("offset",A)}}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}}}},{key:"_canMoveActiveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){var n=t.querySelector(".slider"),a=t[$gradient],r=this._selectedStops.find(function(e){return e.closest("linearGradient")===a});if(null!==r){var o=this._getMoveOffsetsForSelectedStops(),i=o.get(r),s=i.minOffset,l=i.maxOffset;return"left"===e?r.offset.baseVal>s:"right"===e?r.offset.baseVal<l:void 0}}}},{key:"_getPreviousNotSelectedStop",value:function(e){for(var t=e;t;t=t.previousElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getNextNotSelectedStop",value:function(e){for(var t=e;t;t=t.nextElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getMoveOffsetsForSelectedStops",value:function(){var e=new Map,t=[],n=!0,a=!1,r;try{for(var o=this._selectedStops[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=this._getPreviousNotSelectedStop(s),d=this._getNextNotSelectedStop(s),u={};u.min=l?s.offset.baseVal-l.offset.baseVal:s.offset.baseVal,u.max=d?d.offset.baseVal-s.offset.baseVal:1-s.offset.baseVal,t.push(u)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}if(0<t.length){var c=t[0].min,p=t[0].max,h=!0,m=!1,b;try{for(var x=t[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,v.min<c&&(c=v.min),v.max<p&&(p=v.max)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}var y=!0,f=!1,_;try{for(var w=this._selectedStops[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,e.set(A,{initialOffset:A.offset.baseVal,minOffset:A.offset.baseVal-c,maxOffset:A.offset.baseVal+p})}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return e}},{key:"_getSelectedLinearGradientUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,o=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes8(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var h=!0,m=!1,b=void 0;try{for(var x=p[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.closest("text, textPath, tspan, a");S&&!a.includes(S)&&a.push(S)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"linearGradient"===_getPaintType2(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}},{key:"selectedStops",get:function(){return this._selectedStops.filter(function(e){return e.isConnected})},set:function(e){this._selectStops(e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-lineargradienthud",BXLinearGradientHudElement,{extends:"g"})}}{var _getUserBBox11=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen28=BoxySVG.utils.element,_createElement23=_BoxySVG$utils$elemen28.createElement,_queryGraphicsElements2=_BoxySVG$utils$elemen28.queryGraphicsElements,_closest31=_BoxySVG$utils$elemen28.closest,_isPointerMoveIntentional7=BoxySVG.utils.event.isPointerMoveIntentional,_getGradientColorAtOffset2=BoxySVG.utils.gradient.getGradientColorAtOffset,_BoxySVG$utils$math6=BoxySVG.utils.math,_normalize7=_BoxySVG$utils$math6.normalize,_round26=_BoxySVG$utils$math6.round,_BoxySVG$utils$matrix=BoxySVG.utils.matrix,_compareMatrixes=_BoxySVG$utils$matrix.compareMatrixes,_roundMatrix5=_BoxySVG$utils$matrix.roundMatrix,_BoxySVG$utils$paint3=BoxySVG.utils.paint,_getPaintType3=_BoxySVG$utils$paint3.getPaintType,_getPaintServer5=_BoxySVG$utils$paint3.getPaintServer,_getRenderedTextNodes9=BoxySVG.utils.text.getRenderedTextNodes,_throttle17=BoxySVG.utils.time.throttle,_decomposeTransform22=BoxySVG.utils.transformDecomposition.decomposeTransform,_BoxySVG$utils$geomet15=BoxySVG.utils.geometry,_getPointAtFraction2=_BoxySVG$utils$geomet15.getPointAtFraction,_getPointBetweenTwoPoints=_BoxySVG$utils$geomet15.getPointBetweenTwoPoints,_getNearestPointOnLine3=_BoxySVG$utils$geomet15.getNearestPointOnLine,_getDistanceBetweenPoints5=_BoxySVG$utils$geomet15.getDistanceBetweenPoints,_getRotationAngleFromPoints4=_BoxySVG$utils$geomet15.getRotationAngleFromPoints,_snapPointToAngleMultiple2=_BoxySVG$utils$geomet15.snapPointToAngleMultiple,_comparePoints3=_BoxySVG$utils$geomet15.comparePoints,_snapPointToAngle=_BoxySVG$utils$geomet15.snapPointToAngle,_BoxySVG$utils$transf12=BoxySVG.utils.transformGeneral,_getComputedTransform15=_BoxySVG$utils$transf12.getComputedTransform,_getTransformFromPoints6=_BoxySVG$utils$transf12.getTransformFromPoints,_getTransformToElement13=_BoxySVG$utils$transf12.getTransformToElement,_bboxPointToUserPoint3=_BoxySVG$utils$transf12.bboxPointToUserPoint,_userPointToBBoxPoint5=_BoxySVG$utils$transf12.userPointToBBoxPoint,_BoxySVG$classes4=BoxySVG.classes,_Shortcut10=_BoxySVG$classes4.Shortcut,_Vector5=_BoxySVG$classes4.Vector,_keys4=Object.keys,_$gradient=Symbol(),_$gradientUser=Symbol(),_$stop=Symbol(),_SVGUnitTypes6=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE3=_SVGUnitTypes6.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5=_SVGUnitTypes6.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_shadowHTML13="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.subhud:focus{outline:0}.slider{stroke:#fff;stroke-width:7;stroke-linecap:round;outline:0}.slider,.slider-shadow,.stop-grippie{vector-effect:non-scaling-stroke}.slider-shadow{stroke:rgba(0,0,0,.3);stroke-linecap:round;pointer-events:none;outline:0;stroke-width:10}.stop-grippie{fill:#000;stroke:#fff;stroke-width:2;filter:url(#bx-radialgradienthud-grippie-shadow)}.stop-grippie[data-selected]{stroke:#bababa}.subhud:focus .stop-grippie[data-selected]{stroke:#93d2ff}.r2-grippie,.r2-outline{vector-effect:non-scaling-stroke}.r2-outline{stroke-dasharray:5,5;stroke-linecap:round;outline:0;pointer-events:none;fill:none;stroke:#2e66f9;stroke-width:1.5}.r2-grippie{fill:#2e66f9;stroke:#fff;stroke-width:2;filter:url(#bx-radialgradienthud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-radialgradienthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-radialgradienthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-radialgradienthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\" tabindex=\"0\">\n        <line class=\"r2-outline\"></line>\n        <line class=\"slider-shadow\"></line>\n        <line class=\"slider\"></line>\n        <circle class=\"r2-grippie grippie\"></circle>\n        <g class=\"stop-grippies\"></g>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRadialGradientHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAllStops()}}},this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._updateAll80Th=_throttle17(this._updateAll,80,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML13;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("keydown",function(t){return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("pointerup",function(t){return e._onShadowRootPointerUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest31(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest31(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&this._updateAll80Th())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_onDisabled",value:function(){this._selectStops([]),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateAll80Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._updateAll80Th()}},{key:"_onArtboardMutation",value:function(e){if(this._draggedGrippie)this._updatePositions(this._draggedGrippie.closest(".subhud"));else if(this._draggedSlider)this._updatePositions(this._draggedSlider.parentElement);else{var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,"style"===i.attributeName&&"stop"===i.target.localName?this._updateGrippiesColor():this._updateAll80Th()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onUndoOrRedo",value:function(){this._selectStops([])}},{key:"_onArtboardPointerDown",value:function(e){0===e.button&&e.target!==this&&this._selectStops([])}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&0===e.button&&this._selectStops([])}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderPointerDown(e):e.target.classList.contains("stop-grippie")?this._onStopGrippiePointerDown(e):e.target.classList.contains("r2-grippie")&&this._onRadiusGrippieOrSliderEdgePointerDown(e,"r2");var n,a;this._pointerMovedAfterPointerDown=!1,this._pointerDownTimeStamp=e.timeStamp,window.addEventListener("pointermove",n=function(){t._pointerMovedAfterPointerDown=!0}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",n)})}}},{key:"_onShadowRootPointerUp",value:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerUp(e)}},{key:"_onShadowRootDblClick",value:function(e){100>e.timeStamp-this._pointerDownTimeStamp&&e.target.classList.contains("slider")&&this._onSliderDblClick(e)}},{key:"_onStopGrippiePointerDown",value:function(e){var t=e.target,n=t[_$stop],a=n.closest("radialGradient"),r=this._selectedStops.filter(function(e){return e.closest("radialGradient")===a}),o=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),i=o[0],s=o[o.length-1],l=this._ownerApp.modKeys,d=l.alt,u=l.shift;this._pointerDownSelectedStops=[].concat(_toConsumableArray(r)),!1===u?!1===r.includes(n)&&this._selectStops([n]):!0===u&&!1===r.includes(n)&&(r.push(n),this._selectStops(r)),n===i&&0===n.offset.baseVal&&!1===d?this._onCenterGrippieOrSliderBodyPointerDown(e):n===s&&1===n.offset.baseVal&&!1===d?this._onRadiusGrippieOrSliderEdgePointerDown(e,"r1"):this._onDraggableStopGrippiePointerDown(e)}},{key:"_onStopGrippiePointerUp",value:function(e){if(!this._pointerMovedAfterPointerDown){var t=e.target,n=this._pointerDownSelectedStops,a=t[_$stop],r=t.closest(".subhud"),o=r[_$gradientUser],i=this._ownerApp.modKeys.shift,s=[],l=!0,d=!1,u;try{for(var c=this._ownerCanvas.selectedElements[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,("g"===h.localName||"a"===h.localName)&&h.contains(o)){var m=!0,b=!1,x=void 0;try{for(var g=_queryGraphicsElements2([].concat(_toConsumableArray(h.children)))[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,s.unshift(y)}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}}else s.push(h)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.isSelectableElement(o)&&(s=s.filter(function(e){return e!==o}),s.unshift(o)),this._ownerCanvas.selectedElements=s;for(var f=o.parentElement;f!==this._ownerCanvas.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){this._ownerCanvas.currentContainer=f;break}!0===i&&!0===this._pointerDownSelectedStops.includes(a)&&(n=n.filter(function(e){return e!==a}),this._selectStops([n]))}}},{key:"_onDraggableStopGrippiePointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a.querySelector(".slider"),o=this._ownerCanvas.geometryPrecision,i=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=s.inverse(),d=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),u=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),c=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value),p=c.matrixTransform(s),h=_getNearestPointOnLine3(d,u,c,!1),m=_slicedToArray(h,1),b=m[0],x=_getDistanceBetweenPoints5(d,b)/_getDistanceBetweenPoints5(d,u),g=!1,v,y;this._draggedGrippie=n,n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",v=function(n){!1==g&&(t._ownerCanvas.undoManager.checkpoint("Move gradient stop"),g=!0);var a=new SVGPoint(p.x+n.clientX-e.clientX,p.y+n.clientY-e.clientY),r=a.matrixTransform(l),s=_getNearestPointOnLine3(d,u,r,!1),c=_slicedToArray(s,1),h=c[0],m=_getDistanceBetweenPoints5(d,h)/_getDistanceBetweenPoints5(d,u),b=m-x,v=!0,y=!1,f;try{for(var _=t._selectedStops[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=i.get(k),C=A.minOffset,S=A.maxOffset,E=A.initialOffset;E+b<C?k.setAttribute("offset",_round26(C,o)):E+b>S?k.setAttribute("offset",_round26(S,o)):k.setAttribute("offset",_round26(E+b,o))}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}),n.addEventListener("lostpointercapture",y=function(){n.removeEventListener("pointermove",v),n.removeEventListener("lostpointercapture",y),t._draggedGrippie=null})}},{key:"_onRadiusGrippieOrSliderEdgePointerDown",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"r1",a=e.target,r=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(t){return t.contains(e.target)}),o=r[_$gradient],i=r[_$gradientUser],s=_getUserBBox11(i),l=i.getScreenCTM(),d=l.inverse(),u=_getComputedTransform15(o),c=_decomposeTransform22(l),p=c.scaleX,h=c.scaleY,m=!1,b=!1,x,g,v,y,f,_,w,k;a.matches(".grippie")?this._draggedGrippie=a:a.matches(".slider")&&(this._draggedSlider=a),a.setPointerCapture(e.pointerId);var A=function(){if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){v=new SVGPoint(o.cx.baseVal.value,o.cy.baseVal.value),y=new SVGPoint(o.cx.baseVal.value+o.r.baseVal.value,o.cy.baseVal.value),f=new SVGPoint(o.cx.baseVal.value,o.cy.baseVal.value-o.r.baseVal.value);var e=v.matrixTransform(u),t=y.matrixTransform(u),n=f.matrixTransform(u);_=e.matrixTransform(l),w=t.matrixTransform(l),k=n.matrixTransform(l)}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){v=new SVGPoint(o.cx.baseVal.valueInSpecifiedUnits,o.cy.baseVal.valueInSpecifiedUnits),y=new SVGPoint(o.cx.baseVal.valueInSpecifiedUnits+o.r.baseVal.valueInSpecifiedUnits,o.cy.baseVal.valueInSpecifiedUnits),f=new SVGPoint(o.cx.baseVal.valueInSpecifiedUnits,o.cy.baseVal.valueInSpecifiedUnits-o.r.baseVal.valueInSpecifiedUnits);var a=v.matrixTransform(u),r=y.matrixTransform(u),i=f.matrixTransform(u),d=_bboxPointToUserPoint3(a,s),c=_bboxPointToUserPoint3(r,s),p=_bboxPointToUserPoint3(i,s);_=d.matrixTransform(l),w=c.matrixTransform(l),k=p.matrixTransform(l)}};a.addEventListener("pointermove",x=function(a){if(!1==m)if(_isPointerMoveIntentional7(e,a,5))m=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient"),A();else return;var r=t._ownerApp.modKeys,i=r.ctrl,l=r.shift,c,x;"r1"===n?(c=new SVGPoint(a.clientX+(w.x-e.clientX),a.clientY+(w.y-e.clientY)),x=_getRotationAngleFromPoints4(_,w,c)):"r2"===n&&(c=new SVGPoint(a.clientX+(k.x-e.clientX),a.clientY+(k.y-e.clientY)),x=_getRotationAngleFromPoints4(_,k,c));var g=new SVGMatrix().rotate(x,_.x,_.y),C=_.matrixTransform(g),S=w.matrixTransform(g),E=k.matrixTransform(g),T=new _Vector5(C,S),P=new _Vector5(C,E),L=new _Vector5(C,c);if("r1"===n){if(T.length=L.length,S.x=C.x+T.x,S.y=C.y+T.y,i){var M=new _Vector5(C,k);P.length=L.length,M.length=L.length,E.x=C.x+P.x,E.y=C.y+P.y,k.x=C.x+M.x,k.y=C.y+M.y}if(l){var D=_snapPointToAngleMultiple2(C,S,22.5),I=_slicedToArray(D,2),V=I[0],N=I[1];S=V,b=!0}if(b){var R=new SVGPoint(_.x,_.y-100),z=_getRotationAngleFromPoints4(_,R,S);E=0>p&&0>h?_snapPointToAngle(C,E,z+90):_snapPointToAngle(C,E,z-90)}}else if("r2"===n){if(P.length=L.length,E.x=C.x+P.x,E.y=C.y+P.y,i){var G=new _Vector5(C,w);T.length=L.length,G.length=L.length,S.x=C.x+T.x,S.y=C.y+T.y,w.x=C.x+G.x,w.y=C.y+G.y}if(l){var B=_snapPointToAngleMultiple2(C,E,22.5),O=_slicedToArray(B,2),j=O[0],q=O[1];E=j,b=!0}if(b){var U=new SVGPoint(_.x,_.y-100),H=_getRotationAngleFromPoints4(_,U,E);S=0>p&&0>h?_snapPointToAngle(C,S,H-90):_snapPointToAngle(C,S,H+90)}}var F,$,Y;if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var X=C.matrixTransform(d),W=S.matrixTransform(d),K=E.matrixTransform(d);F=X.matrixTransform(u.inverse()),$=W.matrixTransform(u.inverse()),Y=K.matrixTransform(u.inverse())}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var Z=C.matrixTransform(d),J=S.matrixTransform(d),Q=E.matrixTransform(d),ee=_userPointToBBoxPoint5(Z,s),te=_userPointToBBoxPoint5(J,s),ne=_userPointToBBoxPoint5(Q,s);F=ee.matrixTransform(u.inverse()),$=te.matrixTransform(u.inverse()),Y=ne.matrixTransform(u.inverse())}var ae=_getTransformFromPoints6(v,y,f,F,$,Y),re=u.multiply(ae);re=_roundMatrix5(re,t._ownerCanvas.transformPrecision),o.setAttribute("gradientTransform",re.toString())}),a.addEventListener("lostpointercapture",g=function(){a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",g),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderPointerDown",value:function(e){var t=e.target,n=t.getScreenCTM(),a=new SVGPoint(e.clientX,e.clientY),r=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),o=r.matrixTransform(n),i=_getDistanceBetweenPoints5(o,a);5>=i?this._onRadiusGrippieOrSliderEdgePointerDown(e,"r1"):this._onCenterGrippieOrSliderBodyPointerDown(e)}},{key:"_onCenterGrippieOrSliderBodyPointerDown",value:function(e){var t=this,n=e.target,a=this._ownerCanvas.geometryPrecision,r=e.target.closest(".subhud"),o=r[_$gradientUser],i=r[_$gradient],s=_getUserBBox11(o),l=_getComputedTransform15(i),d=o.getScreenCTM(),u=o.getScreenCTM().inverse(),c=new SVGPoint(e.clientX,e.clientY),p=!1,h,m,b;if(n.matches(".grippie")?this._draggedGrippie=n:n.matches(".slider")&&(this._draggedSlider=n),n.setPointerCapture(e.pointerId),i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var x=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value),g=x.matrixTransform(l);b=g.matrixTransform(d)}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var v=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),y=v.matrixTransform(l),f=_bboxPointToUserPoint3(y,s);b=f.matrixTransform(d)}n.addEventListener("pointermove",h=function(n){if(!1==p)if(_isPointerMoveIntentional7(e,n,5))p=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient");else return;var r=new SVGPoint(n.clientX,n.clientY),o=new _Vector5(c,r),d;if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var h=new SVGPoint(b.x+o.x,b.y+o.y),m=h.matrixTransform(u);d=m.matrixTransform(l.inverse())}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var x=new SVGPoint(b.x+o.x,b.y+o.y),g=x.matrixTransform(u),v=_userPointToBBoxPoint5(g,s);d=v.matrixTransform(l.inverse())}i.setAttribute("cx",_round26(d.x,a)),i.setAttribute("cy",_round26(d.y,a))}),n.addEventListener("lostpointercapture",m=function(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",m),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderDblClick",value:function(e){this._ownerCanvas.undoManager.checkpoint("Add Stop");for(var t=e.target,n=t.closest(".subhud"),a=n[_$gradient],r=this.getScreenCTM().inverse(),o=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),i=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=_getDistanceBetweenPoints5(i,l),u=_getDistanceBetweenPoints5(i,s),c=_normalize7(d/u,0,1,this._ownerCanvas.geometryPrecision),p=null,h=0,m;h<o.length;h+=1)if(m=o[h],m.offset.baseVal<c)p=h;else if(m.offset.baseVal>c)break;var b=_createElement23("svg:stop");if(b.setAttribute("offset",c),b.style.stopColor=_getGradientColorAtOffset2(a,c),null===p){var x=[].concat(_toConsumableArray(a.children)).find(function(e){return"stop"===e.localName});x?x.before(b):a.append(b)}else o[p].after(b);this._selectStops([b])}},{key:"_onShadowRootKeyDown",value:function(e){var t=_Shortcut10.fromEvent(e);0===this._selectedStops.length||(t.matches("Backspace")?(e.stopPropagation(),this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Left"),this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Right"),this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Left"),this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Right"),this._moveSelectedStops(10,"right"))))}},{key:"_updateAll",value:function(){var e=this._getSelectedRadialGradientUsers();if(0===e.length)this["#subhuds"].innerHTML="";else{var t=this._shadowRoot.activeElement,n=[];this["#subhuds"].innerHTML="";var a=!0,r=!1,o;try{for(var i=e[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_getPaintServer5(l,this.context);if(!n.includes(d)){n.push(d);var u=[].concat(_toConsumableArray(d.children)).filter(function(e){return"stop"===e.localName}),c=this["#subhud-template"].cloneNode(!0);c.removeAttribute("id"),c[_$gradient]=d,c[_$gradientUser]=l;var p=c.querySelector(".stop-grippies"),h=document.createDocumentFragment(),m=!0,b=!1,x=void 0;try{for(var g=u[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=_createElement23("svg:circle");f.setAttribute("class","stop-grippie grippie"),f[_$stop]=y,0.95<y.offset.baseVal?h.prepend(f):p.append(f)}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}p.append(h),this["#subhuds"].append(c)}}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}if(t){var _=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(e){return e[_$gradient]===t[_$gradient]});_&&_.focus()}this._updatePositions(),this._updateGrippiesSize(),this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,!(e&&i!==e)){var s=i[_$gradient],l=i[_$gradientUser],d=[].concat(_toConsumableArray(s.children)).filter(function(e){return"stop"===e.localName}),u=_getComputedTransform15(s),c=_getTransformToElement13(l,this),p=i.querySelector(".slider"),h=i.querySelector(".slider-shadow"),m=[].concat(_toConsumableArray(i.querySelector(".stop-grippies").children)),b=i.querySelector(".r2-grippie"),x=i.querySelector(".r2-outline");if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var g=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value),v=new SVGPoint(s.cx.baseVal.value+s.r.baseVal.value,s.cy.baseVal.value),y=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value-s.r.baseVal.value),f=g.matrixTransform(u),_=v.matrixTransform(u),w=y.matrixTransform(u),k=f.matrixTransform(c),A=_.matrixTransform(c),C=w.matrixTransform(c);p.setAttribute("x1",k.x),p.setAttribute("y1",k.y),p.setAttribute("x2",A.x),p.setAttribute("y2",A.y),h.setAttribute("x1",k.x),h.setAttribute("y1",k.y),h.setAttribute("x2",A.x),h.setAttribute("y2",A.y),x.setAttribute("x1",k.x),x.setAttribute("y1",k.y),x.setAttribute("x2",C.x),x.setAttribute("y2",C.y),b.setAttribute("cx",C.x),b.setAttribute("cy",C.y);var S=!0,E=!1,T=void 0;try{for(var P=function(){var e=M.value,t=m.find(function(t){return t[_$stop]===e}),n=_getPointAtFraction2(k,A,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},L=d[Symbol.iterator](),M;!(S=(M=L.next()).done);S=!0)P()}catch(e){E=!0,T=e}finally{try{!S&&L.return&&L.return()}finally{if(E)throw T}}}else if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var D=_getUserBBox11(l),I=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits),V=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits+s.r.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits),N=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits-s.r.baseVal.valueInSpecifiedUnits),R=I.matrixTransform(u),z=V.matrixTransform(u),G=N.matrixTransform(u),B=_bboxPointToUserPoint3(R,D),O=_bboxPointToUserPoint3(z,D),j=_bboxPointToUserPoint3(G,D),q=B.matrixTransform(c),U=O.matrixTransform(c),H=j.matrixTransform(c);p.setAttribute("x1",q.x),p.setAttribute("y1",q.y),p.setAttribute("x2",U.x),p.setAttribute("y2",U.y),h.setAttribute("x1",q.x),h.setAttribute("y1",q.y),h.setAttribute("x2",U.x),h.setAttribute("y2",U.y),x.setAttribute("x1",q.x),x.setAttribute("y1",q.y),x.setAttribute("x2",H.x),x.setAttribute("y2",H.y),b.setAttribute("cx",H.x),b.setAttribute("cy",H.y);var F=!0,$=!1,Y=void 0;try{for(var X=function(){var e=K.value,t=m.find(function(t){return t[_$stop]===e});if(t){var n=_getPointAtFraction2(q,U,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y}},W=d[Symbol.iterator](),K;!(F=(K=W.next()).done);F=!0)X()}catch(e){$=!0,Y=e}finally{try{!F&&W.return&&W.return()}finally{if($)throw Y}}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateGrippiesColor",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.style.fill=c[_$stop].style.stopColor}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll(".grippie")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-radialgradienthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_updateGrippiesSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,this._selectedStops.includes(c[_$stop])?c.setAttribute("data-selected",""):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesZOrder",value:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,a;try{for(var r=this._selectedStops[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=!0,l=!1,d=void 0;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p[_$stop]===i&&p.parentElement.append(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_selectStops",value:function(e){0===e.length&&0===this._selectedStops.length||(this._selectedStops=[].concat(_toConsumableArray(e)),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")))}},{key:"_selectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient],n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=!0,r=!1,o;try{for(var i=this._selectedStops[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.closest("radialGradient")!==t&&n.push(l)}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this._selectStops(n)}},{key:"_deselectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient];this._selectStops(this._selectedStops.filter(function(e){return e.closest("radialGradient")!==t}))}},{key:"_selectNextStop",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient];if(t){var n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t}),r=a[a.length-1],o=n[0],i=o;if(r&&1<n.length){for(var s=r.nextElementSibling;s;s=s.nextElementSibling)if("stop"===s.localName){i=s;break}this._selectStops([i])}}}},{key:"_deleteSelectedStops",value:function(){var e=this._shadowRoot.activeElement;if(null!==e){var t=e[_$gradient],n=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t});if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Delete gradient stop(s)");var a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.remove()}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}this._selectStops([])}}},{key:"_moveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;if(null!==n){var a=n.querySelector(".slider"),r=n[_$gradient],o=this._selectedStops.filter(function(e){return e.parentElement===r}),i=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=this._ownerCanvas.geometryPrecision,d=new SVGPoint(a.x1.baseVal.value,a.y1.baseVal.value),u=new SVGPoint(a.x2.baseVal.value,a.y2.baseVal.value),c=d.matrixTransform(s),p=u.matrixTransform(s),h=new _Vector5(c,p),m=e/h.length,b=!0,x=!1,g;try{for(var v=o[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=i.get(f),w=_.minOffset,k=_.maxOffset;if("left"===t){var A=_normalize7(f.offset.baseVal-m,w,k,l);f.setAttribute("offset",A)}else if("right"===t){var C=_normalize7(f.offset.baseVal+m,w,k,l);f.setAttribute("offset",C)}}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}},{key:"_canMoveActiveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){var n=t.querySelector(".slider"),a=t[_$gradient],r=this._selectedStops.find(function(e){return e.parentElement===a});if(null!==r){var o=this._getMoveOffsetsForSelectedStops(),i=o.get(r),s=i.minOffset,l=i.maxOffset;return"left"===e?r.offset.baseVal>s:"right"===e?r.offset.baseVal<l:void 0}}}},{key:"_getPreviousNotSelectedStop",value:function(e){for(var t=e;t;t=t.previousElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getNextNotSelectedStop",value:function(e){for(var t=e;t;t=t.nextElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getMoveOffsetsForSelectedStops",value:function(){var e=new Map,t=[],n=!0,a=!1,r;try{for(var o=this._selectedStops[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=this._getPreviousNotSelectedStop(s),d=this._getNextNotSelectedStop(s),u={};u.min=l?s.offset.baseVal-l.offset.baseVal:s.offset.baseVal,u.max=d?d.offset.baseVal-s.offset.baseVal:1-s.offset.baseVal,t.push(u)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}if(0<t.length){var c=t[0].min,p=t[0].max,h=!0,m=!1,b;try{for(var x=t[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)v=g.value,v.min<c&&(c=v.min),v.max<p&&(p=v.max)}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}var y=!0,f=!1,_;try{for(var w=this._selectedStops[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,e.set(A,{initialOffset:A.offset.baseVal,minOffset:A.offset.baseVal-c,maxOffset:A.offset.baseVal+p})}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return e}},{key:"_getSelectedRadialGradientUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,o=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes9(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var h=!0,m=!1,b=void 0;try{for(var x=p[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.closest("text, textPath, tspan, a");S&&!a.includes(S)&&a.push(S)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"radialGradient"===_getPaintType3(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}},{key:"selectedStops",get:function(){return this._selectedStops.filter(function(e){return e.isConnected})},set:function(e){this._selectStops(e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-radialgradienthud",BXRadialGradientHudElement,{extends:"g"})}{{var _getUserBBox12=BoxySVG.utils.bbox.getUserBBox,_closest32=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet16=BoxySVG.utils.geometry,_getRotationAngleFromPoints5=_BoxySVG$utils$geomet16.getRotationAngleFromPoints,_snapRotationAngle3=_BoxySVG$utils$geomet16.snapRotationAngle,_roundMatrix6=BoxySVG.utils.matrix.roundMatrix,_BoxySVG$utils$paint4=BoxySVG.utils.paint,_getPaintType4=_BoxySVG$utils$paint4.getPaintType,_getPaintServer6=_BoxySVG$utils$paint4.getPaintServer,_BoxySVG$utils$patter4=BoxySVG.utils.pattern,_createDerivedPattern3=_BoxySVG$utils$patter4.createDerivedPattern,_getPatternUsers3=_BoxySVG$utils$patter4.getPatternUsers,_getParentPattern4=_BoxySVG$utils$patter4.getParentPattern,_getRenderedTextNodes10=BoxySVG.utils.text.getRenderedTextNodes,_throttle18=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf13=BoxySVG.utils.transformGeneral,_getComputedTransform16=_BoxySVG$utils$transf13.getComputedTransform,_getTransformFromPoints7=_BoxySVG$utils$transf13.getTransformFromPoints,_getTransformToElement14=_BoxySVG$utils$transf13.getTransformToElement,_Vector6=BoxySVG.classes.Vector,_SVGUnitTypes7=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE4=_SVGUnitTypes7.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6=_SVGUnitTypes7.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_grippieSize=6,_$pattern=Symbol(),$patternUser=Symbol(),$patternUnits=Symbol(),_shadowHTML14="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie,.outline{vector-effect:non-scaling-stroke}.outline{fill:rgba(0,0,0,.07);stroke:#2e66f9;stroke-width:1.5}.grippie{fill:#e40dd6;stroke:#fff;stroke-width:2;filter:url(#bx-patternhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-patternhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-patternhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-patternhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <path class=\"outline\"></path>\n        <circle class=\"grippie rotate-grippie\"></circle>\n        <rect class=\"grippie scale-grippie\"></rect>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXPatternHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._draggedGrippie=null,this._draggedOutline=null,this._update50Th=_throttle18(this._update,50,this),this._update200Th=_throttle18(this._update,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML14;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest32(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest32(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&this._update200Th())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onZoomChange",value:function(){this._update50Th(),this._updateDropShadows()}},{key:"_onArtboardMutation",value:function(){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement):this._draggedOutline?this._updatePositions(this._draggedOutline.parentElement):this._update200Th()}},{key:"_onShadowRootPointerDown",value:function(e){if(0===e.button){var t;e.target.classList.contains("outline")?this._onTileOutlinePointerDown(e):e.target.classList.contains("scale-grippie")?this._onScaleGrippiePointerDown(e):e.target.classList.contains("rotate-grippie")&&this._onRotateGrippiePointerDown(e),window.addEventListener("pointerup",t=function(){window.removeEventListener("pointerup",t)})}}},{key:"_onTileOutlinePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[$patternUser],o=a[_$pattern];if(1<_getPatternUsers3(o).length&&"tspan"!==r.localName){var i=_createDerivedPattern3(o);this._ownerCanvas.createDefsIfMissing(),this._ownerCanvas.defs.append(i),r.style.setProperty(this.context,"url(#"+i.id+")"),o=i,a[_$pattern]=i}var s=r.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(r),u=o.hasAttribute("href")?_getParentPattern4(o):o,c=_getComputedTransform16(o),p,h,m,b,x;if(this._draggedOutline=n,u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)m=new SVGPoint(u.x.baseVal.value,u.y.baseVal.value),b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),x=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var g=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);m=new SVGPoint(d.x+g.x*d.width,d.y+g.y*d.height),b=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),x=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=m.matrixTransform(c),_=b.matrixTransform(c),w=x.matrixTransform(c),k=f.matrixTransform(s),A=_.matrixTransform(s),C=w.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new _Vector6(n.clientX-e.clientX,n.clientY-e.clientY),r=new SVGPoint(k.x+a.x,k.y+a.y),i=new SVGPoint(A.x+a.x,A.y+a.y),s=new SVGPoint(C.x+a.x,C.y+a.y),d=r.matrixTransform(l),u=i.matrixTransform(l),p=s.matrixTransform(l),h=d.matrixTransform(c.inverse()),g=u.matrixTransform(c.inverse()),v=p.matrixTransform(c.inverse()),y=_getTransformFromPoints7(m,b,x,h,g,v),f=c.multiply(y);f=_roundMatrix6(f,t._ownerCanvas.transformPrecision),o.setAttribute("patternTransform",f.toString())}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),t._draggedOutline=null})}},{key:"_onRotateGrippiePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[_$pattern],o=a[$patternUser];if(1<_getPatternUsers3(r).length&&"tspan"!==o.localName){var i=_createDerivedPattern3(r);this._ownerCanvas.createDefsIfMissing(),this._ownerCanvas.defs.append(i),o.style.setProperty(this.context,"url(#"+i.id+")"),r=i,a[_$pattern]=i}var s=o.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(o),u=r.hasAttribute("href")?_getParentPattern4(r):r,c=_getComputedTransform16(r);this._draggedGrippie=n;var p,h,m,b,x;if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)m=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value/2,u.y.baseVal.value+u.height.baseVal.value/2),b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),x=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var g=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits/2,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits/2),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);m=new SVGPoint(d.x+g.x*d.width,d.y+g.y*d.height),b=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),x=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=m.matrixTransform(c),_=b.matrixTransform(c),w=x.matrixTransform(c),k=f.matrixTransform(s),A=_.matrixTransform(s),C=w.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new SVGPoint(n.clientX+(A.x-e.clientX),n.clientY+(A.y-e.clientY)),o=_getRotationAngleFromPoints5(k,A,a);t._ownerApp.modKeys.shift&&(o=_snapRotationAngle3(o,45));var i=new SVGMatrix().rotate(o,k.x,k.y),s=A.matrixTransform(i),d=C.matrixTransform(i),u=s.matrixTransform(l),p=d.matrixTransform(l),h=u.matrixTransform(c.inverse()),g=p.matrixTransform(c.inverse()),v=_getTransformFromPoints7(m,b,x,m,h,g),y=c.multiply(v);y=_roundMatrix6(y,t._ownerCanvas.transformPrecision),r.setAttribute("patternTransform",y.toString())}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),t._draggedGrippie=null})}},{key:"_onScaleGrippiePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[_$pattern],o=a[$patternUser];if(1<_getPatternUsers3(r).length&&"tspan"!==o.localName){var i=_createDerivedPattern3(r);this._ownerCanvas.createDefsIfMissing(),this._ownerCanvas.defs.append(i),o.style.setProperty(this.context,"url(#"+i.id+")"),r=i,a[_$pattern]=i}var s=o.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(o),u=r.hasAttribute("href")?_getParentPattern4(r):r,c=_getComputedTransform16(r);this._draggedGrippie=n;var p,h,m,b,x;if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)m=new SVGPoint(u.x.baseVal.value,u.y.baseVal.value),b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),x=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var g=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);m=new SVGPoint(d.x+g.x*d.width,d.y+g.y*d.height),b=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),x=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=x.matrixTransform(c),_=f.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new SVGPoint(_.x+n.clientX-e.clientX,_.y+n.clientY-e.clientY),o=a.matrixTransform(l),i=o.matrixTransform(c.inverse()),s=new SVGPoint(i.x,b.y),d=_getTransformFromPoints7(m,b,x,m,s,i),u=c.multiply(d);u=_roundMatrix6(u,t._ownerCanvas.transformPrecision),r.setAttribute("patternTransform",u.toString())}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),t._draggedGrippie=null})}},{key:"_update",value:function(){var e=this._getSelectedPatternUsers();if(this["#subhuds"].innerHTML="",0<e.length){var t=Symbol(),n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=_getPaintServer6(s,this.context),d=l.hasAttribute("href")?_getParentPattern4(l):l;if(!l[t]&&(l[t]=!0,0!==d.width.baseVal.valueInSpecifiedUnits&&0!==d.height.baseVal.valueInSpecifiedUnits)){var u=this["#subhud-template"].cloneNode(!0);u.removeAttribute("id"),u[_$pattern]=l,u[$patternUser]=s,this["#subhuds"].append(u)}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this._updatePositions()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)if(i=o.value,!(e&&i!==e)){var s=i[$patternUser],l=i[_$pattern],d=i.querySelector(".rotate-grippie"),u=i.querySelector(".scale-grippie"),c=i.querySelector(".outline"),p=_getTransformToElement14(s,this),h=_getUserBBox12(s),m=l.hasAttribute("href")?_getParentPattern4(l):l,b=_getComputedTransform16(l),x=void 0,g=void 0,v=void 0,y=void 0;if(m.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)x=new SVGPoint(m.x.baseVal.value,m.y.baseVal.value),g=new SVGPoint(m.x.baseVal.value+m.width.baseVal.value,m.y.baseVal.value),v=new SVGPoint(m.x.baseVal.value+m.width.baseVal.value,m.y.baseVal.value+m.height.baseVal.value),y=new SVGPoint(m.x.baseVal.value,m.y.baseVal.value+m.height.baseVal.value);else if(m.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var f=new SVGPoint(m.x.baseVal.valueInSpecifiedUnits,m.y.baseVal.valueInSpecifiedUnits),_=new SVGPoint(m.x.baseVal.valueInSpecifiedUnits+m.width.baseVal.valueInSpecifiedUnits,m.y.baseVal.valueInSpecifiedUnits),w=new SVGPoint(m.x.baseVal.valueInSpecifiedUnits+m.width.baseVal.valueInSpecifiedUnits,m.y.baseVal.valueInSpecifiedUnits+m.height.baseVal.valueInSpecifiedUnits),k=new SVGPoint(m.x.baseVal.valueInSpecifiedUnits,m.y.baseVal.valueInSpecifiedUnits+m.height.baseVal.valueInSpecifiedUnits);x=new SVGPoint(h.x+f.x*h.width,h.y+f.y*h.height),g=new SVGPoint(h.x+_.x*h.width,h.y+_.y*h.height),v=new SVGPoint(h.x+w.x*h.width,h.y+w.y*h.height),y=new SVGPoint(h.x+k.x*h.width,h.y+k.y*h.height)}var A=x.matrixTransform(b),C=g.matrixTransform(b),S=v.matrixTransform(b),E=y.matrixTransform(b),T=A.matrixTransform(p),P=C.matrixTransform(p),L=S.matrixTransform(p),M=E.matrixTransform(p);c.setAttribute("d","\n          M "+T.x+" "+T.y+"\n          L "+P.x+" "+P.y+"\n          L "+L.x+" "+L.y+"\n          L "+M.x+" "+M.y+"\n          Z\n        ");var D=_grippieSize/this._ownerCanvas.scale;d.cx.baseVal.value=P.x,d.cy.baseVal.value=P.y,d.r.baseVal.value=D,u.width.baseVal.value=2*D,u.height.baseVal.value=2*D,u.x.baseVal.value=L.x-u.width.baseVal.value/2,u.y.baseVal.value=L.y-u.height.baseVal.value/2,u.hudPoint=L}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateDropShadows",value:function(){this["#bx-patternhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPatternUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,o=!0,i=!1,s;try{for(var l=n[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes10(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var h=!0,m=!1,b=void 0;try{for(var x=p[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C.closest("text, textPath, tspan, a");S&&!a.includes(S)&&a.push(S)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"pattern"===_getPaintType4(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-patternhud",BXPatternHudElement,{extends:"g"})}}{{var _parseViewBox11=BoxySVG.utils.parsing.parseViewBox,_closest33=BoxySVG.utils.element.closest,_isPointerMoveIntentional8=BoxySVG.utils.event.isPointerMoveIntentional,_abs10=Math.abs,_shadowHTML15="\n    <style>:host{display:none}:host([editable][enabled]) #editing-controls,:host([editable][enabled]) #outline,:host([enabled]){display:initial}#outline{fill:none;opacity:1;stroke:rgba(0,0,0,.3);stroke-width:1;pointer-events:none;vector-effect:non-scaling-stroke}#editing-controls{display:none}#outer-area{fill:#000;stroke:none;opacity:.4}#inner-area{fill:transparent;opacity:1;shape-rendering:crispEdges;stroke:#6a6a6a;stroke-width:1;vector-effect:non-scaling-stroke}#inner-area:hover{cursor:-webkit-grab}#inner-area:active{cursor:-webkit-grabbing}.resize-grippie[data-position=bottom],.resize-grippie[data-position=left],.resize-grippie[data-position=right],.resize-grippie[data-position=top]{stroke:red;vector-effect:non-scaling-stroke;stroke-width:6;opacity:0}.resize-grippie[data-position=bottom-left] path,.resize-grippie[data-position=bottom-right] path,.resize-grippie[data-position=top-left] path,.resize-grippie[data-position=top-right] path{fill:#fff;stroke:#585858;stroke-width:1;vector-effect:non-scaling-stroke}.resize-grippie[data-position=bottom-left],.resize-grippie[data-position=bottom-right],.resize-grippie[data-position=top-left],.resize-grippie[data-position=top-right]{fill:transparent}.resize-grippie[data-position=left]:hover,.resize-grippie[data-position=right]:hover{cursor:ew-resize}.resize-grippie[data-position=bottom]:hover,.resize-grippie[data-position=top]:hover{cursor:ns-resize}.resize-grippie[data-position=top-left]:hover{cursor:nwse-resize}.resize-grippie[data-position=bottom-left]:hover,.resize-grippie[data-position=top-right]:hover{cursor:nesw-resize}.resize-grippie[data-position=bottom-right]:hover{cursor:nwse-resize}</style>\n\n    <rect id=\"outline\" width=\"0\" height=\"0\" x=\"0\" y=\"0\"></rect>\n\n    <g id=\"editing-controls\">\n      <path id=\"outer-area\"></path>\n      <rect id=\"inner-area\" width=\"0\" height=\"0\" x=\"0\" y=\"0\"></rect>\n\n      <g id=\"resize-grippies\">\n        <line id=\"left-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"left\"></line>\n        <line id=\"right-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"right\"></line>\n        <line id=\"top-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"top\"></line>\n        <line id=\"bottom-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"bottom\"></line>\n\n        <g id=\"top-left-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"top-left\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 h 15 v -5 h -20 v 20 h 5 z\"/>\n        </g>\n\n        <g id=\"top-right-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"top-right\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 0 15 h 15 v 15 h 5 v -20 h -20 z\"/>\n        </g>\n\n        <g id=\"bottom-left-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"bottom-left\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 h 15 v 5 h -20 v -20 h 5 z\"/>\n        </g>\n\n        <g id=\"bottom-right-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"bottom-right\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 v -15 h 5 v 20 h -20 v -5 z\"/>\n        </g>\n      </g>\n    </g>\n  ",BXViewBoxHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._connectedCallbacks=[],this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML15;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#inner-area"].addEventListener("pointerdown",function(t){return e._onInnerAreaPointerDown(t)}),this["#resize-grippies"].addEventListener("pointerdown",function(t){return e._onResizeGrippiesPointerDown(t)})}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest33(this,"bx-canvas"),this._connectedCallbacks.forEach(function(e){return e()}),this._connectedCallbacks=[]}},{key:"attributeChangedCallback",value:function(e){"enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"editable"===e&&this._onEditableChange()}},{key:"_onEnabled",value:async function(){var e=this;await this.whenConnected,this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._update()}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onEditableChange",value:async function(){await this.whenConnected,this._update()}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,"viewBox"===i.attributeName&&this._update()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onZoomChange",value:function(){this._update()}},{key:"_onInnerAreaPointerDown",value:function(e){var t=this,n,a;this["#inner-area"].setPointerCapture(e.pointerId),this["#inner-area"].addEventListener("pointermove",a=function(r){_isPointerMoveIntentional8(e,r,7)&&(t["#inner-area"].removeEventListener("pointermove",a),t["#inner-area"].removeEventListener("lostpointercapture",n),t._onInnerAreaDragStart(e))}),this["#inner-area"].addEventListener("lostpointercapture",n=function(){t["#inner-area"].removeEventListener("pointermove",a),t["#inner-area"].removeEventListener("lostpointercapture",n)})}},{key:"_onInnerAreaDragStart",value:function(e){var t=this,n=this._ownerCanvas.currentArtboard,a=n.getAttribute("viewBox")||"0 0 0 0",r=_parseViewBox11(a),o=r.x,i=r.y,s=r.width,l=r.height,d=n.getScreenCTM().inverse(),u=new SVGPoint(e.clientX,e.clientY),c,p;u=u.matrixTransform(d),this._ownerCanvas.undoManager.checkpoint("View box"),this["#inner-area"].addEventListener("pointermove",p=function(e){var t=new SVGPoint(e.clientX,e.clientY);t=t.matrixTransform(d);var a={x:t.x-u.x,y:t.y-u.y},r=o+a.x,c=i+a.y;n.setAttribute("viewBox",[r,c,s,l].join(" "))}),this["#inner-area"].addEventListener("lostpointercapture",c=function(){t["#inner-area"].removeEventListener("pointermove",p),t["#inner-area"].removeEventListener("lostpointercapture",c)})}},{key:"_onResizeGrippiesPointerDown",value:function(e){var t=this._ownerCanvas.currentArtboard,n=e.target.closest(".resize-grippie"),a=n.getAttribute("data-position"),r=t.getScreenCTM().inverse(),o=t.getAttribute("viewBox")||"0 0 0 0",i=_parseViewBox11(o),s=i.x,l=i.y,d=i.width,u=i.height,c=new SVGPoint(e.clientX,e.clientY);c=c.matrixTransform(r);var p,h;n.setPointerCapture(e.pointerId),this._ownerCanvas.undoManager.checkpoint("View box"),n.addEventListener("pointermove",p=function(e){var n=new SVGPoint(e.clientX,e.clientY);n=n.matrixTransform(r);var o={x:n.x-c.x,y:n.y-c.y},i=s,p=l,h=d,m=u;"left"===a?(h=d-o.x,i=s+o.x,0>h&&(h=_abs10(h),i=s+d)):"right"===a?(h=d+o.x,0>h&&(h=_abs10(h),i=s-h)):"top"===a?(m=u-o.y,p=l+o.y,0>m&&(m=_abs10(m),p=l+u)):"bottom"===a?(m=u+o.y,0>m&&(m=_abs10(m),p=l-m)):"top-left"===a?(h=d-o.x,m=u-o.y,i=s+o.x,p=l+o.y,0>h&&(h=_abs10(h),i=s+d),0>m&&(m=_abs10(m),p=l+u)):"top-right"===a?(h=d+o.x,m=u-o.y,p=l+o.y,0>h&&(h=_abs10(h),i=s-h),0>m&&(m=_abs10(m),p=l+u)):"bottom-left"===a?(h=d-o.x,m=u+o.y,i=s+o.x,0>h&&(h=_abs10(h),i=s+d),0>m&&(m=_abs10(m),p=l-m)):"bottom-right"===a&&(h=d+o.x,m=u+o.y,0>h&&(h=_abs10(h),i=s-h),0>m&&(m=_abs10(m),p=l-m));var b=[i,p,h,m];t.setAttribute("viewBox",b.join(" "))}),n.addEventListener("lostpointercapture",h=function(){n.removeEventListener("pointermove",p),n.removeEventListener("lostpointercapture",h)})}},{key:"_update",value:function(){var e=this._ownerCanvas;if(e.currentArtboard.hasAttribute("viewBox")){var t=e.currentArtboard.getAttribute("viewBox"),n=_parseViewBox11(t),a=n.x,r=n.y,o=n.width,i=n.height,s=_parseViewBox11(t);if(this["#outline"].setAttribute("width",o),this["#outline"].setAttribute("height",i),this["#outline"].setAttribute("x",a),this["#outline"].setAttribute("y",r),this.editable){this["#editing-controls"].style.visibility="visible",this["#inner-area"].setAttribute("x",a),this["#inner-area"].setAttribute("y",r),this["#inner-area"].setAttribute("width",o),this["#inner-area"].setAttribute("height",i);var l=1e6;this["#outer-area"].setAttribute("d","\n            M "+-l+", "+-l+"\n            L "+2*l+", "+-l+"\n            L "+2*l+", "+2*l+"\n            L "+-l+", "+2*l+"\n            Z\n            M "+a+", "+r+"\n            L "+a+", "+(r+i)+"\n            L "+(a+o)+", "+(r+i)+"\n            L "+(a+o)+", "+r+"\n            Z\n          ");var d=10/e.scale,u=!0,c=!1,p;try{for(var h=this["#resize-grippies"].children[Symbol.iterator](),m;!(u=(m=h.next()).done);u=!0){var b=m.value,x=b.getAttribute("data-position");if("left"===x)b.x1.baseVal.value=a,b.y1.baseVal.value=r,b.x2.baseVal.value=a,b.y2.baseVal.value=r+i;else if("right"===x)b.x1.baseVal.value=a+o,b.y1.baseVal.value=r,b.x2.baseVal.value=a+o,b.y2.baseVal.value=r+i;else if("top"===x)b.x1.baseVal.value=a,b.y1.baseVal.value=r,b.x2.baseVal.value=a+o,b.y2.baseVal.value=r;else if("bottom"===x)b.x1.baseVal.value=a,b.y1.baseVal.value=r+i,b.x2.baseVal.value=a+o,b.y2.baseVal.value=r+i;else if("top-left"===x){var g=new SVGMatrix;g.scaleSelf(1/e.scale,a,r),g.translateSelf(a-15,r-15),b.setAttribute("transform",g.toString())}else if("top-right"===x){var v=new SVGMatrix;v.scaleSelf(1/e.scale,a+o,r),v.translateSelf(a+o-15,r-15),b.setAttribute("transform",v.toString())}else if("bottom-left"===x){var y=new SVGMatrix;y.scaleSelf(1/e.scale,a,r+i),y.translateSelf(a-15,r+i-15),b.setAttribute("transform",y.toString())}else if("bottom-right"===x){var f=new SVGMatrix;f.scaleSelf(1/e.scale,a+o,r+i),f.translateSelf(a+o-15,r+i-15),b.setAttribute("transform",f.toString())}}}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}}}else this["#outline"].setAttribute("width",0),this["#outline"].setAttribute("height",0),this["#outline"].setAttribute("x",-99999),this["#outline"].setAttribute("y",-99999),this.editable&&(this["#editing-controls"].style.visibility="hidden")}},{key:"whenConnected",get:function(){var e=this;return new Promise(function(t){return e.isConnected?t():e._connectedCallbacks.push(t)})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"editable",get:function(){return this.hasAttribute("editable")},set:function(e){!0===e?this.setAttribute("editable",""):this.removeAttribute("editable")}}],[{key:"observedAttributes",get:function(){return["enabled","editable"]}}]),t}(SVGGElement);customElements.define("bx-viewboxhud",BXViewBoxHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen29=BoxySVG.utils.element,_closest34=_BoxySVG$utils$elemen29.closest,_getCommonAncestor=_BoxySVG$utils$elemen29.getCommonAncestor,_serializePathData2=BoxySVG.utils.pathGeneral.serializePathData,_getTransformToElement15=BoxySVG.utils.transformGeneral.getTransformToElement,_throttle19=BoxySVG.utils.time.throttle,_getUserBBox13=BoxySVG.utils.bbox.getUserBBox,_shadowHTML16="\n    <style>:host{display:none;contain:strict;pointer-events:none}:host([enabled]){display:initial}#outline{fill:none;stroke:#f55c36;stroke-width:2;pointer-events:none;vector-effect:non-scaling-stroke}</style>\n    <path id=\"outline\"></path>\n  ",BXOutlineHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._hoveredElement=null,this._update30Th=_throttle19(this._update,30,this),this._update200Th=_throttle19(this._update,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML16;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerApp=_closest34(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest34(this,"bx-editor"),this._ownerCanvas=_closest34(this,"bx-canvas")}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("currentcontainerchange",this._containerChangeListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.artboards.addEventListener("pointerover",this._canvasPointerOverListener=function(){e._onPointerOver(event)}),this._ownerCanvas.artboards.addEventListener("pointerout",this._canvasPointerOutListener=function(){e._onPointerOut(event)})}},{key:"_onDisabled",value:function(){this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("currentcontainerchange",this._containerChangeListener),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerover",this._canvasPointerOverListener),this._ownerCanvas.artboards.removeEventListener("pointerout",this._canvasPointerOutListener)}},{key:"_onSelectedElementsChange",value:function(){this._update()}},{key:"_onPointerOver",value:function(e){this._hoveredElement=e.target,this._update30Th()}},{key:"_onPointerOut",value:function(){this._hoveredElement=null,this._update200Th()}},{key:"_update",value:function(){var e=this._getTarget();if(e){var t=e.localName,n=null,a=null;if("path"===t?n=e.getAttribute("d"):("rect"===t||"circle"===t||"ellipse"===t||"line"===t||"polyline"===t||"polygon"===t)&&(n=_serializePathData2(e.getPathData())),null===n){var r=_getUserBBox13(e);n="\n            M "+r.x+" "+r.y+"\n            L "+(r.x+r.width)+" "+r.y+"\n            L "+(r.x+r.width)+" "+(r.y+r.height)+"\n            L "+r.x+" "+(r.y+r.height)+"\n            L "+r.x+" "+r.y+"\n          "}null==a&&(a=_getTransformToElement15(e,this).toString()),n?this["#outline"].setAttribute("d",n):this["#outline"].removeAttribute("d"),a?this["#outline"].setAttribute("transform",a):this["#outline"].removeAttribute("transform")}else this["#outline"].removeAttribute("d")}},{key:"_getTarget",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift,r=this._ownerEditor.canvas,o=this._hoveredElement,i=null,s=null;if("transform"===this.context?t||a?!t&&a?i="normal-multi":t&&!a?i="direct":t&&a&&(i="direct-multi"):i="normal":"edit"===this.context?i="direct":"edit-text"===this.context&&(i="direct-text"),o&&r.isSelectableElement(o)){var l=this._getAllContainers(o),d=r.selectedElements.includes(o),u=d,c=!0,p=!1,h;try{for(var m=l[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,r.selectedElements.includes(x)&&(u=!0)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}if("normal"===i){if(!1===u)if(0===l.length)s=o;else{var g=r.currentContainer,v=o;if(g&&g.contains(v))for(;v.parentNode!==g;)v=v.parentNode;else for(var y=this._getCommonContainer(v,g);v.parentNode!==y&&v.parentNode!==r.currentArtboard;)v=v.parentNode;s=v}}else if("normal-multi"!==i)"direct"===i?!1===d&&(s=o):"direct-multi"===i?s=o:"direct-text"===i&&!1===d&&o.closest("text")&&(s=o.closest("text"));else if(0===l.length)s=o;else{var f=o;if(r.currentContainer&&r.currentContainer.contains(f))for(;f.parentNode!==r.currentContainer;)f=f.parentNode;else for(var _=this._getCommonContainer(f,r.currentContainer);f.parentNode!==_&&f.parentNode!==r.currentArtboard;)f=f.parentNode;s=f}}return s}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"_getCommonContainer",value:function(e,t){var n=_getCommonAncestor(e,t);if(n)for(;!1===["g","a"].includes(n.localName);)n=n.parentNode;return n}},{key:"context",get:function(){return this.getAttribute("context")||"transform"},set:function(e){this.setAttribute("context",e)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-outlinehud",BXOutlineHudElement,{extends:"g"})}{var _shadowHTML17="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}#rect{fill:rgba(187,199,212,.3);stroke:rgba(187,199,212,.8);stroke-width:1;pointer-events:none;shape-rendering:crispEdges;vector-effect:non-scaling-stroke}#rect[hidden]{display:none}</style>\n    <rect id=\"rect\" x=\"0\" y=\"0\" width=\"0\" height=\"0\" hidden></rect>\n  ",BXRubberBandHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML17;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"grabSelection",value:function(e,t){var n=this;return new Promise(function(a){var r=n.getScreenCTM(),o=r.inverse(),i=new SVGPoint(e,t),s=i.matrixTransform(o),l=0,d=0,u=0,c=0,p,h;n["#rect"].removeAttribute("hidden"),window.addEventListener("pointermove",p=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(o);u=a.x-s.x,c=a.y-s.y,0>u?(u=-u,l=s.x-u):l=s.x,0>c?(c=-c,d=s.y-c):d=s.y,n["#rect"].setAttribute("x",l),n["#rect"].setAttribute("y",d),n["#rect"].setAttribute("width",u),n["#rect"].setAttribute("height",c)}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),n["#rect"].setAttribute("hidden",""),n["#rect"].setAttribute("x",0),n["#rect"].setAttribute("y",0),n["#rect"].setAttribute("width",0),n["#rect"].setAttribute("height",0);var e=new SVGRect(l,d,u,c);a(e)})})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}]),t}(SVGGElement);customElements.define("bx-rubberbandhud",BXRubberBandHudElement,{extends:"g"})}{{var _Shortcut11=BoxySVG.classes.Shortcut,_BoxySVG$utils$elemen30=BoxySVG.utils.element,_createElement24=_BoxySVG$utils$elemen30.createElement,_closest35=_BoxySVG$utils$elemen30.closest,_BoxySVG$utils$geomet17=BoxySVG.utils.geometry,_getDistanceBetweenPoints6=_BoxySVG$utils$geomet17.getDistanceBetweenPoints,_getPointBetweenTwoPoints2=_BoxySVG$utils$geomet17.getPointBetweenTwoPoints,_isDOMWhitespace=BoxySVG.utils.node.isDOMWhitespace,_BoxySVG$utils$text9=BoxySVG.utils.text,_getLocalOffset=_BoxySVG$utils$text9.getLocalOffset,_getGlobalOffset14=_BoxySVG$utils$text9.getGlobalOffset,_getRenderedChars2=_BoxySVG$utils$text9.getRenderedChars,_getRenderedTextNodes11=_BoxySVG$utils$text9.getRenderedTextNodes,_reduceText7=_BoxySVG$utils$text9.reduceText,_BoxySVG$utils$time10=BoxySVG.utils.time,_debounce9=_BoxySVG$utils$time10.debounce,_throttle20=_BoxySVG$utils$time10.throttle,_getTransformToElement16=BoxySVG.utils.transformGeneral.getTransformToElement,_shadowHTML18="\n    <style>:host{display:none;contain:size layout style paint}:host(:focus){outline:0}:host([enabled]){display:initial}#caret-line{stroke-width:3;vector-effect:non-scaling-stroke;pointer-events:none;stroke:gray}:host(:focus) #caret-line{stroke:#00f}#selection-rects{opacity:.3}#selection-rects rect{fill:#b3b3b3;pointer-events:none}:host(:focus) #selection-rects rect{fill:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) + 15%))}</style>\n    <line id=\"caret-line\"></line>\n    <g id=\"selection-rects\"></g>\n  ",BXTextHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{exec:function(){return e._selectAll(e._ownerCanvas.selectedTextRange.startContainer.closest("text"))},enabled:function(){return!0},shortcut:["Control","A"]},deselectAll:{enabled:function(){return null!==e._ownerCanvas.selectedTextRange},exec:function(){return e._deselectAll()}},cut:{enabled:function(){return e._ownerCanvas.selectedTextRange&&!1===e._ownerCanvas.selectedTextRange.collapsed},exec:function(){return e._cut()}},copy:{enabled:function(){return e._ownerCanvas.selectedTextRange&&!1===e._ownerCanvas.selectedTextRange.collapsed},exec:function(){return e._copy()}},paste:{exec:function(){return e._paste()}}},this._update200Th=_throttle20(this._update,200,this),this._onKeyPress300Db=_debounce9(this._onKeyPress300Db,300,this,!0),this._onBackspaceKeyDown600Db=_debounce9(this._onBackspaceKeyDown600Db,600,this,!0),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML18,this.addEventListener("focusin",function(){e.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}),this.addEventListener("focusout",function(){e.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0}))});var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest35(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest35(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this.addEventListener("keydown",this._keydownListener=function(t){e._onKeyDown(t)}),this.addEventListener("keypress",this._keyPressListener=function(t){e._onKeyPress300Db(t)}),1===this._ownerCanvas.selectedElements.length&&"text"===this._ownerCanvas.selectedElements[0].localName&&this._selectAll(this._ownerCanvas.selectedElements[0])}},{key:"_onDisabled",value:function(){this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this.removeEventListener("keydown",this._keydownListener),this.removeEventListener("keypress",this._keyPressListener),this._installed&&this._uninstall()}},{key:"_install",value:function(){var e=this;this._installed=!0,this.style.display=null,this.focus(),this._update(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._update200Th()}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_uninstall",value:function(){this._installed=!1,this.style.display="none",this.blur(),this._ownerCanvas.selectedTextRange=null,this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedTextRangeChange",value:function(){this._installed&&!this._ownerCanvas.selectedTextRange?this._uninstall():!this._installed&&this._ownerCanvas.selectedTextRange&&this._install(),this._installed&&this._update()}},{key:"_onSelectedElementsChange",value:function(){var e=this._ownerCanvas;if(e.selectedTextRange){var t=e.selectedTextRange.startContainer.closest("text"),n=e.selectedElements.find(function(e){return e===t||e.contains(t)});n||(e.selectedTextRange=null)}this._update()}},{key:"_onUndoOrRedo",value:function(){if(this._ownerCanvas.selectedTextRange){var e=this._ownerCanvas.selectedTextRange.startContainer.closest("text");this._selectAll(e)}}},{key:"_onArtboardPointerDown",value:function(e){e.target.closest("text")&&this._onTextElementPointerDown(e)}},{key:"_onTextElementPointerDown",value:function(e){var t=this;if(0===e.button){e.preventDefault();var n=e.target.closest("text");if(1===this._ownerApp.pointerClickCount){var a=e.clientX,r=e.clientY,o=_getRenderedTextNodes11(n),i=n.getScreenCTM().inverse(),s=new SVGPoint(a,r).matrixTransform(i),l=n.getCharNumAtPosition(s),d=l,u=null,c,p;_getDistanceBetweenPoints6(s,n.getStartPositionOfChar(l))>_getDistanceBetweenPoints6(s,n.getEndPositionOfChar(l))&&(d+=1);var h=_getLocalOffset(n,d),m=_slicedToArray(h,2),b=m[0],x=m[1];if(this._ownerApp.modKeys.shift){var g=this._ownerCanvas.selectedTextRange;if(null===g||!1===n.contains(g.startContainer)){var v=new Range;v.setStart(b,x),v.setEnd(b,x),this._ownerCanvas.selectedTextRange=v}this._expand(d)}else{var y=new Range;y.setStart(b,x),y.setEnd(b,x),this._ownerCanvas.selectedTextRange=y}this.focus(),window.addEventListener("pointermove",c=function(e){var a=e.clientX,r=e.clientY,s=new SVGPoint(a,r).matrixTransform(i),l=n.getCharNumAtPosition(s);if(-1===l){var d=n.getNumberOfChars(),c=0,p=Infinity;if(null==u){u=[];for(var h=0,m;h<d;h+=1)m=_getPointBetweenTwoPoints2(n.getStartPositionOfChar(h),n.getEndPositionOfChar(h)),u.push(m)}for(var g=0;g<d;g+=1){var v=u[g],y=_getDistanceBetweenPoints6(s,v);y<p&&(c=g,p=y)}l=c}var f=l;_getDistanceBetweenPoints6(s,n.getStartPositionOfChar(l))>_getDistanceBetweenPoints6(s,n.getEndPositionOfChar(l))&&(f+=1);var _=_getLocalOffset(n,f),w=_slicedToArray(_,2),k=w[0],A=w[1],C="forward";if(b===k)A<x&&(C="backward");else{var S=b.compareDocumentPosition(k);S===Node.DOCUMENT_POSITION_PRECEDING&&(C="backward")}var E=new Range;if(E.direction=C,"forward"==C?(E.setStart(b,x),E.setEnd(k,A)):(E.setStart(k,A),E.setEnd(b,x)),!1===t._ownerCanvas.selectedTextRange.collapsed&&E.startOffset===E.startContainer.textContent.length){var T=o[o.indexOf(E.startContainer)+1];T&&E.setStart(T,0)}t._ownerCanvas.selectedTextRange=E}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",p)})}else if(2===this._ownerApp.pointerClickCount){var f=e.clientX,_=e.clientY,w=n.getScreenCTM().inverse(),k=new SVGPoint(f,_).matrixTransform(w),A=n.getCharNumAtPosition(k);this._selectWord(n,A)}else 3<=this._ownerApp.pointerClickCount&&this._selectAll(n)}}},{key:"_onKeyDown",value:function(e){var t=_Shortcut11.fromEvent(e);if(t.matches("Backspace"))e.stopPropagation(),this._onBackspaceKeyDown600Db(e),this._onBackspaceKeyDown(e);else if(t.matches("ArrowLeft"))e.stopPropagation(),this._moveLeft();else if(t.matches("ArrowRight"))e.stopPropagation(),this._moveRight();else if(t.matches("ArrowUp"))e.stopPropagation(),this._moveMaxLeft();else if(t.matches("ArrowDown"))e.stopPropagation(),this._moveMaxRight();else if(t.matches("Shift","ArrowLeft"))e.stopPropagation(),this._expandLeft();else if(t.matches("Shift","ArrowRight"))e.stopPropagation(),this._expandRight();else if(t.matches("Shift","ArrowUp"))e.stopPropagation(),this._expandMaxLeft();else if(t.matches("Shift","ArrowDown"))e.stopPropagation(),this._expandMaxRight();else if(1===e.key.length&&!t.ctrl&&!t.meta){e.preventDefault();var n=this._ownerCanvas.selectedTextRange,a=n.startContainer.closest("text");if(n.startContainer===n.endContainer){var r=n.startContainer,o=r.textContent,i=o.substring(0,n.startOffset),s=o.substring(n.endOffset);r.textContent=i+e.key+s,n.setStart(r,i.length+1),n.setEnd(r,i.length+1),this._ownerCanvas.selectedTextRange=n}else{var l=_getGlobalOffset14(n.startContainer,n.startOffset),d=_slicedToArray(l,2),u=d[1],c=_getGlobalOffset14(n.endContainer,n.endOffset),p=_slicedToArray(c,2),h=p[1],m=0,b=!0,x=!1,g,v,y;try{for(var f=_getRenderedTextNodes11(a)[Symbol.iterator](),_;!(b=(_=f.next()).done);b=!0){var w=_.value,k="",A=!0,C=!1,S=void 0;try{for(var E=w.textContent[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,m<u?k+=P:m===u?(k+=e.key,g=w,v=w):m>=h&&(k+=P),m+=1}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}w.textContent=k;var L=null;if(""===k)for(var M=w.parentNode;M!==a;M=M.parentNode)0===_getRenderedChars2(M).length&&(L=M);L&&L.remove()}}catch(e){x=!0,y=e}finally{try{!b&&f.return&&f.return()}finally{if(x)throw y}}var D=_getLocalOffset(a,u+1),I=_slicedToArray(D,2),V=I[0],N=I[1];n.setStart(V,N),n.setEnd(V,N),this._ownerCanvas.selectedTextRange=n}}}},{key:"_onBackspaceKeyDown",value:function(){this._delete()}},{key:"_onBackspaceKeyDown600Db",value:function(){this._ownerCanvas.undoManager.checkpoint("Delete text")}},{key:"_onKeyPress300Db",value:function(){this._ownerCanvas.undoManager.checkpoint("Text")}},{key:"_selectAll",value:function(e){var t=_getRenderedTextNodes11(e);if(0<t.length){var n=t[0],a=t[t.length-1],r=new Range;r.setStart(n,0),r.setEnd(a,a.textContent.length),this._ownerCanvas.selectedTextRange=r}}},{key:"_deselectAll",value:function(){this._ownerCanvas.selectedTextRange=null}},{key:"_selectWord",value:function(e,t){for(var n=_getRenderedChars2(e),a=n[t],r=e.getNumberOfChars(),o=t,i=t,s=t-1;0<=s&&(!_isDOMWhitespace(a)||_isDOMWhitespace(n[s]))&&(_isDOMWhitespace(a)||!_isDOMWhitespace(n[s]));s-=1)o-=1;for(var l=t;l<r&&(!_isDOMWhitespace(a)||_isDOMWhitespace(n[l]))&&(_isDOMWhitespace(a)||!_isDOMWhitespace(n[l]));l+=1)i+=1;var d=_getLocalOffset(e,o),u=_slicedToArray(d,2),c=u[0],p=u[1],h=_getLocalOffset(e,i),m=_slicedToArray(h,2),b=m[0],x=m[1];if(p===c.textContent.length){var g=_getRenderedTextNodes11(e),v=g[g.indexOf(c)+1];v&&(c=v,p=0)}var y=new Range;y.setStart(c,p),y.setEnd(b,x),this._ownerCanvas.selectedTextRange=y}},{key:"_cut",value:function(){this._ownerCanvas.undoManager.checkpoint("Cut"),this._ownerApp.setClipboardData({"text/plain":this._ownerCanvas.selectedTextRange.toString()}),this._delete()}},{key:"_copy",value:function(){this._ownerApp.setClipboardData({"text/plain":this._ownerCanvas.selectedTextRange.toString()})}},{key:"_paste",value:async function(){var e=await this._ownerApp.getClipboardData(),t=e["text/plain"];if(void 0!==t){this._ownerCanvas.undoManager.checkpoint("Paste");var n=this._ownerCanvas.selectedTextRange,a=n.startContainer.closest("text"),r=_getRenderedTextNodes11(a),o=_getGlobalOffset14(n.startContainer,n.startOffset),i=_slicedToArray(o,2),s=i[1];if(n.startContainer===n.endContainer){var l=!0,d=!1,u;try{for(var c=r[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,h===n.startContainer)if(n.startOffset===n.endOffset){var m=h.textContent.substring(0,n.startOffset),b=h.textContent.substring(n.startOffset);h.textContent=m+t+b}else{var x=h.textContent.substring(0,n.startOffset),g=h.textContent.substring(n.endOffset);h.textContent=x+t+g}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}else{var v=!0,y=!1,f;try{for(var _=r[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,k===n.startContainer?k.textContent=k.textContent.substring(0,n.startOffset)+t:k===n.endContainer?k.textContent=k.textContent.substring(n.endOffset):r.indexOf(k)>r.indexOf(n.startContainer)&&r.indexOf(k)<r.indexOf(n.endContainer)&&(k.textContent="")}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}var A=_getLocalOffset(a,s+t.length),C=_slicedToArray(A,2),S=C[0],E=C[1];n.setStart(S,E),n.setEnd(S,E),this._ownerCanvas.selectedTextRange=n,_reduceText7(a,n)}}},{key:"_delete",value:function(){var e=this._ownerCanvas.selectedTextRange.startContainer.closest("text"),t=this._ownerCanvas.selectedTextRange;if(t.startContainer===t.endContainer&&1<t.startOffset){var n=t.startContainer,a=t.startOffset,r=t.endOffset;a===r&&(a-=1);var o=n.textContent.substring(0,a),i=n.textContent.substring(r);n.textContent=o+i;var s=new Range;s.setStart(n,a),s.setEnd(n,a),this._ownerCanvas.selectedTextRange=s}else{var l=_getGlobalOffset14(t.startContainer,t.startOffset),d=_slicedToArray(l,2),u=d[1],c=_getGlobalOffset14(t.endContainer,t.endOffset),p=_slicedToArray(c,2),h=p[1];if(u===h&&(u-=1),0<=u){var m=0,b=_getRenderedTextNodes11(e),x=!0,g=!1,v;try{for(var y=b[Symbol.iterator](),f;!(x=(f=y.next()).done);x=!0){var _=f.value,w="",k=!0,A=!1,C=void 0;try{for(var S=_.textContent[Symbol.iterator](),E,T;!(k=(E=S.next()).done);k=!0)T=E.value,(m<u||m>=h)&&(w+=T),m+=1}catch(e){A=!0,C=e}finally{try{!k&&S.return&&S.return()}finally{if(A)throw C}}_.textContent=w}}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}if(0===_getRenderedChars2(e).length){var P=b[0];P.textContent=" ";var L=new Range;L.setStart(P,0),L.setEnd(P,1),this._ownerCanvas.selectedTextRange=L}else{var M=!0,D=!1,I;try{for(var V=b[Symbol.iterator](),N,R;!(M=(N=V.next()).done);M=!0)if(R=N.value,""===R.textContent&&e.contains(R)){for(var z=null,G=R;G&&G!==e;G=G.parentNode)0===_getRenderedChars2(G).length&&(z=G);z&&z.remove()}}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}var B=_getLocalOffset(e,u),O=_slicedToArray(B,2),j=O[0],q=O[1],U=new Range;U.setStart(j,q),U.setEnd(j,q),this._ownerCanvas.selectedTextRange=U}}}}},{key:"_moveLeft",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getGlobalOffset14(e.startContainer,e.startOffset),a=_slicedToArray(n,2),r=a[1];0<r&&e.collapsed&&(r-=1);var o=_getLocalOffset(t,r),i=_slicedToArray(o,2),s=i[0],l=i[1];if(0===l){var d=_getRenderedTextNodes11(t),u=d[d.indexOf(s)-1];u&&(s=u,l=u.textContent.length)}var c=new Range;c.setStart(s,l),c.setEnd(s,l),this._ownerCanvas.selectedTextRange=c}},{key:"_moveRight",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getGlobalOffset14(e.endContainer,e.endOffset),a=_slicedToArray(n,2),r=a[1];r<t.getNumberOfChars()&&e.collapsed&&(r+=1);var o=_getLocalOffset(t,r),i=_slicedToArray(o,2),s=i[0],l=i[1],d=new Range;d.setStart(s,l),d.setEnd(s,l),this._ownerCanvas.selectedTextRange=d}},{key:"_moveMaxLeft",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getLocalOffset(t,0),a=_slicedToArray(n,2),r=a[0],o=a[1],i=new Range;i.setStart(r,o),i.setEnd(r,o),this._ownerCanvas.selectedTextRange=i}},{key:"_moveMaxRight",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=t.getNumberOfChars(),a=_getLocalOffset(t,n),r=_slicedToArray(a,2),o=r[0],i=r[1],s=new Range;s.setStart(o,i),s.setEnd(o,i),this._ownerCanvas.selectedTextRange=s}},{key:"_expand",value:function(e){var t=this._ownerCanvas.selectedTextRange,n=t.startContainer.closest("text"),a=_getGlobalOffset14(t.startContainer,t.startOffset),r=_slicedToArray(a,2),o=r[1],i=_getGlobalOffset14(t.endContainer,t.endOffset),s=_slicedToArray(i,2),l=s[1];if(e<o)o=e;else if(e>l)l=e;else if(e>o&&e<l)e-o>l-e?l=e:o=e;else return;var d=_getLocalOffset(n,o),u=_slicedToArray(d,2),c=u[0],p=u[1],h=_getLocalOffset(n,l),m=_slicedToArray(h,2),b=m[0],x=m[1];if(p===c.textContent.length){var g=_getRenderedTextNodes11(n),v=g[g.indexOf(c)+1];v&&(c=v,p=0)}var y=new Range;y.setStart(c,p),y.setEnd(b,x),y.direction="backward",this._ownerCanvas.selectedTextRange=y}},{key:"_expandLeft",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getGlobalOffset14(e.startContainer,e.startOffset),a=_slicedToArray(n,2),r=a[1],o=_getGlobalOffset14(e.endContainer,e.endOffset),i=_slicedToArray(o,2),s=i[1];0<r&&(r-=1);var l=_getLocalOffset(t,r),d=_slicedToArray(l,2),u=d[0],c=d[1],p=_getLocalOffset(t,s),h=_slicedToArray(p,2),m=h[0],b=h[1];if(c===u.textContent.length){var x=_getRenderedTextNodes11(t),g=x[x.indexOf(u)+1];g&&(u=g,c=0)}var v=new Range;v.setStart(u,c),v.setEnd(m,b),v.direction="backward",this._ownerCanvas.selectedTextRange=v}},{key:"_expandRight",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getGlobalOffset14(e.startContainer,e.startOffset),a=_slicedToArray(n,2),r=a[1],o=_getGlobalOffset14(e.endContainer,e.endOffset),i=_slicedToArray(o,2),s=i[1];s<t.getNumberOfChars()&&(s+=1);var l=_getLocalOffset(t,r),d=_slicedToArray(l,2),u=d[0],c=d[1],p=_getLocalOffset(t,s),h=_slicedToArray(p,2),m=h[0],b=h[1];if(c===u.textContent.length){var x=_getRenderedTextNodes11(t),g=x[x.indexOf(u)+1];g&&(u=g,c=0)}var v=new Range;v.setStart(u,c),v.setEnd(m,b),this._ownerCanvas.selectedTextRange=v}},{key:"_expandMaxLeft",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getGlobalOffset14(e.endContainer,e.endOffset),a=_slicedToArray(n,2),r=a[1],o=_getLocalOffset(t,0),i=_slicedToArray(o,2),s=i[0],l=i[1],d=_getLocalOffset(t,r),u=_slicedToArray(d,2),c=u[0],p=u[1],h=new Range;h.setStart(s,l),h.setEnd(c,p),h.direction="backward",this._ownerCanvas.selectedTextRange=h}},{key:"_expandMaxRight",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e.startContainer.closest("text"),n=_getGlobalOffset14(e.startContainer,e.startOffset),a=_slicedToArray(n,2),r=a[1],o=t.getNumberOfChars(),i=_getLocalOffset(t,r),s=_slicedToArray(i,2),l=s[0],d=s[1],u=_getLocalOffset(t,o),c=_slicedToArray(u,2),p=c[0],h=c[1],m=new Range;m.setStart(l,d),m.setEnd(p,h),this._ownerCanvas.selectedTextRange=m}},{key:"_update",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e?e.startContainer.closest("text"):null,n=e?t.getNumberOfChars():0,a=e?_getGlobalOffset14(e.startContainer,e.startOffset):[,-1],r=_slicedToArray(a,2),o=r[1],i=e?_getGlobalOffset14(e.endContainer,e.endOffset):[,-1],s=_slicedToArray(i,2),l=s[1];if(1===n&&e&&" "===e.toString()){var d=0,u=t.getExtentOfChar(d),c=t.getStartPositionOfChar(d),p=t.getSubStringLength(d,1),h=u.height,m=t.getRotationOfChar(d),b=new SVGMatrix;b.multiplySelf(_getTransformToElement16(t,this)),b.rotateSelf(m,c.x+p/2,c.y),this["#caret-line"].setAttribute("x1",c.x),this["#caret-line"].setAttribute("y1",u.y),this["#caret-line"].setAttribute("x2",c.x),this["#caret-line"].setAttribute("y2",u.y+h),this["#caret-line"].setAttribute("transform",b.toString()),this["#caret-line"].style.setProperty("visibility","visible")}else if(e&&!0===e.collapsed){var x="backward"===e.direction?o:l;if(0===x){var g=t.getExtentOfChar(x),v=t.getStartPositionOfChar(x),y=t.getSubStringLength(x,1),f=g.height,_=t.getRotationOfChar(x),w=new SVGMatrix;w.multiplySelf(_getTransformToElement16(t,this)),w.rotateSelf(_,v.x+y/2,v.y),this["#caret-line"].setAttribute("x1",v.x),this["#caret-line"].setAttribute("y1",g.y),this["#caret-line"].setAttribute("x2",v.x),this["#caret-line"].setAttribute("y2",g.y+f),this["#caret-line"].setAttribute("transform",w.toString()),this["#caret-line"].style.visibility="visible"}else if(0<x&&x<=n){var k=t.getExtentOfChar(x-1),A=t.getEndPositionOfChar(x-1),C=t.getSubStringLength(x-1,1),S=k.height,E=t.getRotationOfChar(x-1),T=new SVGMatrix;T.multiplySelf(_getTransformToElement16(t,this)),T.rotateSelf(E,A.x-C/2,A.y),this["#caret-line"].setAttribute("x1",A.x),this["#caret-line"].setAttribute("y1",k.y),this["#caret-line"].setAttribute("x2",A.x),this["#caret-line"].setAttribute("y2",k.y+S),this["#caret-line"].setAttribute("transform",T.toString()),this["#caret-line"].style.visibility="visible"}else x>n&&(this["#caret-line"].style.visibility="hidden")}else this["#caret-line"].style.visibility="hidden";if(this["#selection-rects"].innerHTML="",e&&!1===e.collapsed)for(var P=e.startContainer.closest("text"),L=P.getNumberOfChars(),M=o;M<l&&M<L;M+=1){var D=P.getExtentOfChar(M),I=P.getStartPositionOfChar(M),V=P.getEndPositionOfChar(M),N=P.getSubStringLength(M,1),R=D.height,z=P.getRotationOfChar(M),G=new SVGMatrix;G.multiplySelf(_getTransformToElement16(P,this)),G.rotateSelf(z,I.x+N/2,I.y);var B=_createElement24("svg:rect");B.setAttribute("x",I.x),B.setAttribute("y",D.y),B.setAttribute("width",N),B.setAttribute("height",R),B.setAttribute("transform",G.toString()),this["#selection-rects"].append(B)}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-texthud",BXTextHudElement,{extends:"g"})}}{{var _BoxySVG$utils$elemen31=BoxySVG.utils.element,_createElement25=_BoxySVG$utils$elemen31.createElement,_closest36=_BoxySVG$utils$elemen31.closest,_BoxySVG$utils$math7=BoxySVG.utils.math,_normalize8=_BoxySVG$utils$math7.normalize,_round27=_BoxySVG$utils$math7.round,_BoxySVG$utils$pathSh2=BoxySVG.utils.pathShapes,_getShapeData3=_BoxySVG$utils$pathSh2.getShapeData,_setShapeData2=_BoxySVG$utils$pathSh2.setShapeData,_throttle21=BoxySVG.utils.time.throttle,_getTransformToElement17=BoxySVG.utils.transformGeneral.getTransformToElement,_min6=Math.min,$rect=Symbol(),_shadowHTML19="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-recthud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-recthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-recthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-recthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-corner=\"1\"></circle>\n        <circle class=\"grippie\" data-corner=\"2\"></circle>\n        <circle class=\"grippie\" data-corner=\"3\"></circle>\n        <circle class=\"grippie\" data-corner=\"4\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRectHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRects=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle21(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML19;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest36(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest36(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._draggedGrippie||(this._selectedRects=this._getSelectedRects(),0===this._selectedRects.length?!0===this._installed&&this._uninstall():(!1===this._installed&&this._install(),this._updateSubhuds()))}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,o=a[$rect],i=n.getAttribute("data-corner"),r=o.getScreenCTM().inverse(),s=this._ownerCanvas.geometryPrecision,l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=new SVGPoint(l.x,l.y),u="normal",c=!1,p=function(e){var t,n,a,r,o,i,s,l,d,u,c,p;if("rect"===e.localName){var h=e.hasAttribute("rx")?e.rx.baseVal.value:e.ry.baseVal.value,m=e.hasAttribute("ry")?e.ry.baseVal.value:e.rx.baseVal.value;t=e.x.baseVal.value,n=e.y.baseVal.value,a=e.width.baseVal.value,r=e.height.baseVal.value,o=h,i=h,s=h,l=h,d=m,u=m,c=m,p=m}else if("path"===e.localName){var b=_getShapeData3(e).values;t=b[0],n=b[1],a=b[2],r=b[3],o=b[4],i=b[5],s=b[6],l=b[7],d=void 0===b[8]?o:b[8],u=void 0===b[9]?i:b[9],c=void 0===b[10]?s:b[10],p=void 0===b[11]?l:b[11]}return[t,n,a,r,o,i,s,l,d,u,c,p]},h=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;if(!0===n&&!1===a)u="normal";else if(!1===n&&!0===a)u="symmetric-1234";else if(!0===n&&!0===a)u="symmetric-1234";else{var r=p(o),s=_slicedToArray(r,12),l=s[0],d=s[1],c=s[2],h=s[3],m=s[4],b=s[5],x=s[6],g=s[7],v=s[8],y=s[9],f=s[10],_=s[11],w=[],k,A;if("1"===i&&(k=m,A=v),"2"===i&&(k=b,A=y),"3"===i&&(k=x,A=f),"4"===i&&(k=g,A=_),m===k&&v===A&&w.push("1"),b===k&&y===A&&w.push("2"),x===k&&f===A&&w.push("3"),g===k&&_===A&&w.push("4"),1===w.length)u="normal";else{u="symmetric-";var C=!0,S=!1,E;try{for(var T=w[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,u+=L}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}}}},m=function(){var e=d.x-l.x,n=d.y-l.y,c=0,r=p(o),h=_slicedToArray(r,12),m=h[0],b=h[1],x=h[2],g=h[3],y=h[4],f=h[5],_=h[6],w=h[7],k=h[8],A=h[9],C=h[10],S=h[11];if("1"===i?c=v[4]+e:"2"===i?c=v[5]-e:"3"===i?c=v[6]-e:"4"===i&&(c=v[7]+e),c=_normalize8(c,0,_min6(x/2,g/2),s),"normal"===u?"1"===i?(y=c,k=c):"2"===i?(f=c,A=c):"3"===i?(_=c,C=c):"4"===i&&(w=c,S=c):(u.includes("1")&&(y=c,k=c),u.includes("2")&&(f=c,A=c),u.includes("3")&&(_=c,C=c),u.includes("4")&&(w=c,S=c)),y===f&&y===_&&y===w&&k===A&&k===C&&k==S){if("path"===o.localName){var E=o,T=_createElement25("svg:rect"),P=!0,L=!1,M;try{for(var D=E.attributes[Symbol.iterator](),I,V;!(P=(I=D.next()).done);P=!0)V=I.value,"d"!==V.name&&"data-bx-shape"!==V.name&&T.setAttribute(V.name,V.value)}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}T.setAttribute("x",m),T.setAttribute("y",b),T.setAttribute("width",x),T.setAttribute("height",g),T.innerHTML=E.innerHTML,E.replace(T),o=T,a[$rect]=T,t._ownerCanvas.selectedElements=t._ownerCanvas.selectedElements.map(function(e){return e===E?T:e})}var N=_round27(y,s),R=_round27(f,s);0===N?o.removeAttribute("rx"):o.setAttribute("rx",N),0===R?o.removeAttribute("ry"):o.setAttribute("ry",R)}else{if("rect"===o.localName){var z=o,G=_createElement25("svg:path"),B=!0,O=!1,j;try{for(var q=z.attributes[Symbol.iterator](),U,H;!(B=(U=q.next()).done);B=!0)H=U.value,!1===["x","y","width","height","rx","ry"].includes(H.name)&&G.setAttribute(H.name,H.value)}catch(e){O=!0,j=e}finally{try{!B&&q.return&&q.return()}finally{if(O)throw j}}G.innerHTML=z.innerHTML,z.replace(G),o=G,a[$rect]=G,t._ownerCanvas.selectedElements=t._ownerCanvas.selectedElements.map(function(e){return e===z?G:e})}var F;if(y===k&&f===A&&_===C&&w&&S){var $=y,Y=f,X=_,W=w;F=[m,b,x,g,$,Y,X,W]}else F=[m,b,x,g,y,f,_,w,k,A,C,S];F=F.map(function(e){return _round27(e,s)}),_setShapeData2(o,{type:"rect",values:F},s)}},b,x,g,v;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,v=p(o),n.addEventListener("pointermove",b=function(e){c||(c=!0,t._ownerCanvas.undoManager.checkpoint("Round corners")),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),m()}),n.addEventListener("lostpointercapture",x=function(){n.removeEventListener("pointermove",b),n.removeEventListener("lostpointercapture",x),t._ownerApp.removeEventListener("modkeyschange",g),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",g=function(){h(),m()}),h()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedRects[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[$rect]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[$rect],s=_getTransformToElement17(i,this),l=void 0,d=void 0,u=void 0,c=void 0,p=void 0,h=void 0,m=void 0,b=void 0;if("rect"===i.localName)l=i.x.baseVal.value,d=i.y.baseVal.value,u=i.width.baseVal.value,c=i.height.baseVal.value,p=i.rx.baseVal.value,h=i.rx.baseVal.value,m=i.rx.baseVal.value,b=i.rx.baseVal.value;else if("path"===i.localName){var x=_getShapeData3(i);l=x.values[0],d=x.values[1],u=x.values[2],c=x.values[3],p=x.values[4],h=x.values[5],m=x.values[6],b=x.values[7]}var g=!0,v=!1,y=void 0;try{for(var f=o.children[Symbol.iterator](),_;!(g=(_=f.next()).done);g=!0){var w=_.value,k=w.getAttribute("data-corner"),A=void 0;"1"===k&&(A=new SVGPoint(l+p,d)),"2"===k?A=new SVGPoint(l+u-h,d):"3"===k?A=new SVGPoint(l+u-m,d+c):"4"===k&&(A=new SVGPoint(l+b,d+c));var C=A.matrixTransform(s);w.setAttribute("cx",C.x),w.setAttribute("cy",C.y)}}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-recthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedRects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("rect")&&t.push(s):"rect"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedRects(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-recthud",BXRectHudElement,{extends:"g"})}}{{var _closest37=BoxySVG.utils.element.closest,_normalize9=BoxySVG.utils.math.normalize,_throttle22=BoxySVG.utils.time.throttle,_getTransformToElement18=BoxySVG.utils.transformGeneral.getTransformToElement,$circle=Symbol(),_grippieSize2=6,_shadowHTML20="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}</style>\n\n    <defs>\n      <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXCircleHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedCircles=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle22(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML20;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest37(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest37(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedCircles=this._getSelectedCircles(),0===this._selectedCircles.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,o=a[$circle],i=o.getCTM().inverse(),s=o.r.baseVal.value,l=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),d=this._ownerCanvas.geometryPrecision,u=new SVGPoint(l.x,l.y),c=!1,r,p;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",r=function(e){c||(c=!0,t._ownerCanvas.undoManager.checkpoint("Circle radius")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(i);var n=u.x-l.x,a=_normalize9(s+n,0,Infinity,d);o.setAttribute("r",a)}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",p),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedCircles[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[$circle]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[$circle],s=_getTransformToElement18(i,this),l=o.children[0],d=new SVGPoint(i.cx.baseVal.value+i.r.baseVal.value,i.cy.baseVal.value);d=d.matrixTransform(s),l.setAttribute("cx",d.x),l.setAttribute("cy",d.y)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",_grippieSize2/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedCircles",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"circle"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedCircles(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-circlehud",BXCircleHudElement,{extends:"g"})}}{{var _closest38=BoxySVG.utils.element.closest,_normalize10=BoxySVG.utils.math.normalize,_throttle23=BoxySVG.utils.time.throttle,_getTransformToElement19=BoxySVG.utils.transformGeneral.getTransformToElement,$ellipse=Symbol(),_grippieSize3=6,_shadowHTML21="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ellipsehud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-ellipsehud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ellipsehud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ellipsehud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-axis=\"rx\" fill=\"none\"></circle>\n        <circle class=\"grippie\" data-axis=\"ry\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXEllipseHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedEllipses=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle23(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML21;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest38(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest38(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedEllipses=this._getSelectedEllipses(),0===this._selectedEllipses.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,o=a[$ellipse],i=n.getAttribute("data-axis"),r=o.getScreenCTM().inverse(),s={rx:o.rx.baseVal.value,ry:o.ry.baseVal.value},l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=this._ownerCanvas.geometryPrecision,u=new SVGPoint(l.x,l.y),c="normal",p=!1,h,m,b;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var x=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;!0===n&&!1===a?c="normal":!1===n&&!0===a?c="symmetric":!0===n&&!0===a?c="symmetric":o.rx.baseVal.value===o.ry.baseVal.value?c="symmetric":"normal"==c},g=function(){var e=u.x-l.x,t=u.y-l.y;if("rx"===i){if("normal"==c){var n=_normalize10(s.rx+e,0,Infinity,d);o.setAttribute("rx",n)}else if("symmetric"==c){var a=_normalize10(s.rx+e,0,Infinity,d);o.setAttribute("rx",a),o.setAttribute("ry",a)}}else if("ry"===i)if("normal"==c){var r=_normalize10(s.ry+t,0,Infinity,d);o.setAttribute("ry",r)}else if("symmetric"==c){var p=_normalize10(s.ry+t,0,Infinity,d);o.setAttribute("rx",p),o.setAttribute("ry",p)}};n.addEventListener("pointermove",h=function(e){p||(p=!0,t._ownerCanvas.undoManager.checkpoint("Ellipse radius")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),g()}),n.addEventListener("lostpointercapture",m=function(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",m),t._ownerApp.removeEventListener("modkeyschange",b),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",b=function(){x(),g()}),x()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedEllipses[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[$ellipse]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[$ellipse],s=_getTransformToElement19(i,this),l=!0,d=!1,u=void 0;try{for(var c=o.children[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=h.getAttribute("data-axis");if("rx"===m){var b=new SVGPoint(i.cx.baseVal.value+i.rx.baseVal.value,i.cy.baseVal.value).matrixTransform(s);h.setAttribute("cx",b.x),h.setAttribute("cy",b.y)}else if("ry"===m){var x=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value+i.ry.baseVal.value).matrixTransform(s);h.setAttribute("cx",x.x),h.setAttribute("cy",x.y)}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",_grippieSize3/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ellipsehud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedEllipses",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"ellipse"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedEllipses(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ellipsehud",BXEllipseHudElement,{extends:"g"})}}{{var _closest39=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet18=BoxySVG.utils.geometry,_getNearestPointOnLine4=_BoxySVG$utils$geomet18.getNearestPointOnLine,_getPointAtFraction3=_BoxySVG$utils$geomet18.getPointAtFraction,_BoxySVG$utils$math8=BoxySVG.utils.math,_normalize11=_BoxySVG$utils$math8.normalize,_round28=_BoxySVG$utils$math8.round,_BoxySVG$utils$pathSh3=BoxySVG.utils.pathShapes,_getShapeData4=_BoxySVG$utils$pathSh3.getShapeData,_setShapeData3=_BoxySVG$utils$pathSh3.setShapeData,_throttle24=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf14=BoxySVG.utils.transformGeneral,_getComputedTransform17=_BoxySVG$utils$transf14.getComputedTransform,_getTransformToElement20=_BoxySVG$utils$transf14.getTransformToElement,_Vector7=BoxySVG.classes.Vector,_abs11=Math.abs,_$path=Symbol(),_shadowHTML22="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-trianglehud-grippie-shadow)}.shift-grippie{fill:#c3c303}.corner-grippie{fill:#73ba09}</style>\n\n    <defs>\n      <filter id=\"bx-trianglehud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-trianglehud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-trianglehud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie shift-grippie\"></circle>\n        <circle class=\"grippie corner-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXTriangleHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle24(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML22;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest39(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest39(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedTriangles=this._getSelectedTriangles(),0===this._selectedTriangles.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".shift-grippie")?this._onShiftGrippiePointerDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippiePointerDown(e)}},{key:"_onShiftGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path],o=r.getScreenCTM().inverse(),i=_slicedToArray(_getShapeData4(r).values,6),s=i[0],l=i[1],d=i[2],u=i[3],c=i[4],p=i[5],h=this._ownerCanvas.geometryPrecision,m=new SVGPoint(s,l),b=new SVGPoint(s+d,l),x=new SVGPoint(e.clientX,e.clientY),g=x.matrixTransform(o),v=new SVGPoint(s+d*c,l),y=new _Vector7(v,g).getOppositeVector(),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("Triangle radius"));var n=new SVGPoint(e.clientX,e.clientY),a=n.matrixTransform(o);a=y.transformPoint(a);var i=_getNearestPointOnLine4(m,b,a,!1),x=_slicedToArray(i,1),g=x[0];c=(g.x-m.x)/d,c=_normalize11(c,0,1,4),t._ownerApp.modKeys.shift&&(c=[0,0.5,1].reduce(function(e,t){return _abs11(t-c)<_abs11(e-c)?t:e}));var v=[s,l,d,u,c,p].map(function(e){return _round28(e,h)});_setShapeData3(r,{type:"triangle",values:v},h)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_onCornerGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path],o=_getComputedTransform17(r),i=r.getScreenCTM().inverse(),s=_slicedToArray(_getShapeData4(r).values,6),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],h=s[5],m=this._ownerCanvas.geometryPrecision,b=new SVGPoint(l+u*p,d),x=new SVGPoint(l+u,d+c),g=new SVGPoint(e.clientX,e.clientY),v=g.matrixTransform(i),y=new SVGPoint(v.x,v.y),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("Triangle radius"));var n=new SVGPoint(e.clientX,e.clientY);y=n.matrixTransform(i);var a=_getNearestPointOnLine4(x,b,y,!1),o=_slicedToArray(a,1),s=o[0],h=new _Vector7(x,s),g=new _Vector7(x,b),v=h.length/g.length,_=_normalize11(v,0,0.5,4),w=[l,d,u,c,p,_].map(function(e){return _round28(e,m)});_setShapeData3(r,{type:"triangle",values:w},m)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedTriangles[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[_$path]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[_$path],s=_getTransformToElement20(i,this),l=_slicedToArray(_getShapeData4(i).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=!0,x=!1,g=void 0;try{for(var v=o.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".shift-grippie")){var _=new SVGPoint(d+c*h,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".corner-grippie")){var w=new SVGPoint(d+c*h,u).matrixTransform(s),k=new SVGPoint(d+c,u+p).matrixTransform(s),A=_getPointAtFraction3(k,w,m);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-trianglehud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedTriangles",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("triangle")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedTriangles(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-trianglehud",BXTriangleHudElement,{extends:"g"})}}{{var _closest40=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet19=BoxySVG.utils.geometry,_getNearestPointOnLine5=_BoxySVG$utils$geomet19.getNearestPointOnLine,_getPointAtFraction4=_BoxySVG$utils$geomet19.getPointAtFraction,_BoxySVG$utils$math9=BoxySVG.utils.math,_round29=_BoxySVG$utils$math9.round,_normalize12=_BoxySVG$utils$math9.normalize,_BoxySVG$utils$pathSh4=BoxySVG.utils.pathShapes,_getShapeData5=_BoxySVG$utils$pathSh4.getShapeData,_setShapeData4=_BoxySVG$utils$pathSh4.setShapeData,_getNGonShapeVertexPoint=_BoxySVG$utils$pathSh4.getNGonShapeVertexPoint,_throttle25=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf15=BoxySVG.utils.transformGeneral,_getComputedTransform18=_BoxySVG$utils$transf15.getComputedTransform,_getTransformToElement21=_BoxySVG$utils$transf15.getTransformToElement,_Vector8=BoxySVG.classes.Vector,_$path2=Symbol(),_grippieSize4=6,_shadowHTML23="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ngonhud-grippie-shadow)}.grippie.r-grippie{fill:red}</style>\n\n    <defs>\n      <filter id=\"bx-ngonhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ngonhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ngonhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie arms-grippie\"></circle>\n        <circle class=\"grippie corner-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXNGonHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle25(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML23;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest40(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedNGons=this._getSelectedNGons(),0===this._selectedNGons.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".arms-grippie")?this._onArmsGrippiePointerDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippiePointerDown(e)}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path2],o=this._ownerCanvas.geometryPrecision,i=_slicedToArray(_getShapeData5(r).values,6),s=i[0],l=i[1],d=i[2],u=i[3],c=i[4],p=i[5],h=c,m=!1,b,x;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",b=function(n){var a=_round29((n.clientX-e.clientX)/10,0);c=h+a,5>c&&(c=5),!1==m&&c!==h&&(t._ownerCanvas.undoManager.checkpoint("Change number of n-gon arms"),m=!0),_setShapeData4(r,{type:"n-gon",values:[s,l,d,u,c,p]},o)}),n.addEventListener("lostpointercapture",x=function(){n.removeEventListener("pointermove",b),n.removeEventListener("lostpointercapture",x),t._draggedGrippie=null})}}},{key:"_onCornerGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path2],o=_getComputedTransform18(r),i=r.getScreenCTM().inverse(),s=this._ownerCanvas.geometryPrecision,l=_slicedToArray(_getShapeData5(r).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=new SVGPoint(e.clientX,e.clientY),x=b.matrixTransform(i),g=new SVGPoint(x.x,x.y),v=_getNGonShapeVertexPoint(0,d,u,c,p,h),y=_getNGonShapeVertexPoint(1,d,u,c,p,h),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("N-gon radius"));var n=new SVGPoint(e.clientX,e.clientY);g=n.matrixTransform(i);var a=_getNearestPointOnLine5(v,y,g,!1),o=_slicedToArray(a,1),l=o[0],m=new _Vector8(v,l),b=new _Vector8(v,y),x=m.length/b.length,_=_normalize12(x,0,0.5,2);_setShapeData4(r,{type:"n-gon",values:[d,u,c,p,h,_]},s)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedNGons[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[_$path2]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[_$path2],s=_getTransformToElement21(i,this),l=_slicedToArray(_getShapeData5(i).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=!0,x=!1,g=void 0;try{for(var v=o.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".arms-grippie")){var _=new SVGPoint(d,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".corner-grippie")){var w=_getNGonShapeVertexPoint(0,d,u,c,p,h).matrixTransform(s),k=_getNGonShapeVertexPoint(1,d,u,c,p,h).matrixTransform(s),A=_getPointAtFraction4(w,k,m);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",_grippieSize4/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ngonhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedNGons",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("n-gon")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedNGons(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ngonhud",BXNGonHudElement,{extends:"g"})}}{{var _closest41=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet20=BoxySVG.utils.geometry,_getNearestPointOnLine6=_BoxySVG$utils$geomet20.getNearestPointOnLine,_getPointBetweenTwoPoints3=_BoxySVG$utils$geomet20.getPointBetweenTwoPoints,_round30=BoxySVG.utils.math.round,_BoxySVG$utils$pathSh5=BoxySVG.utils.pathShapes,_getShapeData6=_BoxySVG$utils$pathSh5.getShapeData,_setShapeData5=_BoxySVG$utils$pathSh5.setShapeData,_getStarShapeVertexPoint=_BoxySVG$utils$pathSh5.getStarShapeVertexPoint,_throttle26=BoxySVG.utils.time.throttle,_getTransformToElement22=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector9=BoxySVG.classes.Vector,_sin4=Math.sin,_cos4=Math.cos,_PI5=Math.PI,$star=Symbol(),_shadowHTML24="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-starhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-starhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-starhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-starhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie arms-grippie\"></circle>\n        <circle class=\"grippie vertex-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXStarHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle26(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML24;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest41(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedStars=this._getSelectedStars(),0===this._selectedStars.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".vertex-grippie")?this._onVertexGrippiePointerDown(e):e.target.matches(".arms-grippie")&&this._onArmsGrippiePointerDown(e)}},{key:"_onVertexGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$star],o=r.getScreenCTM().inverse(),i=_slicedToArray(_getShapeData6(r).values,6),s=i[0],l=i[1],d=i[2],u=i[3],c=i[4],p=i[5],h=new SVGPoint(e.clientX,e.clientY),m=h.matrixTransform(o),b=new SVGPoint(s,l),x=_getStarShapeVertexPoint(0,s,l,d,u,c,p),g=_getStarShapeVertexPoint(1,s,l,d,u,c,p),v=_getStarShapeVertexPoint(2,s,l,d,u,c,p),y=!1,f,_;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",f=function(e){!1==y&&(y=!0,t._ownerCanvas.undoManager.checkpoint("Inner star radius"));var n=new SVGPoint(e.clientX,e.clientY),a=n.matrixTransform(o),i=new _Vector9(g,m),h=i.getOppositeVector().transformPoint(a),f=2*_PI5*(1/p/2)-_PI5/2,_=b,w=new SVGPoint(d*_cos4(f)+s,u*_sin4(f)+l),k=_getPointBetweenTwoPoints3(x,v),A=_getNearestPointOnLine6(_,k,h,!1),C=_slicedToArray(A,1),S=C[0];c=new _Vector9(_,S).length/new _Vector9(_,w).length,c=_round30(c,t._ownerCanvas.geometryPrecision),_setShapeData5(r,{type:"star",values:[s,l,d,u,c,p]},t._ownerCanvas.geometryPrecision)}),n.addEventListener("lostpointercapture",_=function(){n.removeEventListener("pointermove",f),n.removeEventListener("lostpointercapture",_),t._draggedGrippie=null})}}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$star],o=_slicedToArray(_getShapeData6(r).values,6),i=o[0],s=o[1],l=o[2],d=o[3],u=o[4],c=o[5],p=c,h=!1,m,b;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",m=function(n){var a=_round30((n.clientX-e.clientX)/10,0);c=p+a,3>c&&(c=3),!1==h&&c!==p&&(t._ownerCanvas.undoManager.checkpoint("Change number of star arms"),h=!0),_setShapeData5(r,{type:"star",values:[i,s,l,d,u,c]},t._ownerCanvas.geometryPrecision)}),n.addEventListener("lostpointercapture",b=function(){n.removeEventListener("pointermove",m),n.removeEventListener("lostpointercapture",b),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedStars[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[$star]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[$star],s=_getTransformToElement22(i,this),l=_slicedToArray(_getShapeData6(i).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=!0,x=!1,g=void 0;try{for(var v=o.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".arms-grippie")){var _=new SVGPoint(d,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".vertex-grippie")){var w=_getStarShapeVertexPoint(1,d,u,c,p,h,m).matrixTransform(s);f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-starhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedStars",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("star")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedStars(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-starhud",BXStarHudElement,{extends:"g"})}}{{var _closest42=BoxySVG.utils.element.closest,_BoxySVG$utils$math10=BoxySVG.utils.math,_normalize13=_BoxySVG$utils$math10.normalize,_round31=_BoxySVG$utils$math10.round,_BoxySVG$utils$pathSh6=BoxySVG.utils.pathShapes,_getShapeData7=_BoxySVG$utils$pathSh6.getShapeData,_setShapeData6=_BoxySVG$utils$pathSh6.setShapeData,_throttle27=BoxySVG.utils.time.throttle,_getTransformToElement23=BoxySVG.utils.transformGeneral.getTransformToElement,_min7=Math.min,_max6=Math.max,$ring=Symbol(),_shadowHTML25="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ringhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-ringhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ringhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ringhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-axis=\"r1x\"></circle>\n        <circle class=\"grippie\" data-axis=\"r1y\"></circle>\n        <circle class=\"grippie\" data-axis=\"r2x\"></circle>\n        <circle class=\"grippie\" data-axis=\"r2y\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRingHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle27(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML25;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest42(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest42(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedRings=this._getSelectedRings(),0===this._selectedRings.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$ring],o=r.getScreenCTM().inverse(),i=new SVGPoint(e.clientX,e.clientY),s=i.matrixTransform(o),l=n.getAttribute("data-axis"),u=new SVGPoint(s.x,s.y),c="normal",d=!1,p=_slicedToArray(_getShapeData7(r).values,6),h=p[0],m=p[1],b=p[2],x=p[3],g=p[4],v=p[5],y=b,f=x,_=g,w=v,k,A,C;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var S=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;!0===n&&!1===a?c="normal":!1===n&&!0===a?c="symmetric":!0===n&&!0===a?c="double-symmetric":("r1x"===l&&b===x?c="symmetric":"r1y"===l&&b===x&&(c="symmetric"),"r2x"===l&&g===v?c="symmetric":"r2y"===l&&g===v?c="symmetric":"normal"==c)},E=function(){var e=u.x-s.x,n=u.y-s.y;if("r1x"===l){if("normal"==c){var a=g-1;b=_normalize13(y+e,1,a)}else if("symmetric"==c){var o=_min7(g,v)-1,i=_normalize13(y+e,1,o);b=x=i}else if("double-symmetric"==c){var p=Infinity,k=g-b,d=_normalize13(y+e,1,p);b=x=d,g=v=d+k}}else if("r1y"===l){if("normal"==c){var A=v-1;x=_normalize13(f+n,1,A)}else if("symmetric"==c){var C=_min7(g,v)-1,S=_normalize13(f+n,1,C);b=x=S}else if("double-symmetric"==c){var E=Infinity,T=v-x,P=_normalize13(f+n,1,E);b=x=P,g=v=P+T}}else if("r2x"===l){if("normal"==c){var L=b+1,M=Infinity;g=_normalize13(_+e,L,M)}else if("symmetric"==c){var D=_max6(b,x)+1,I=Infinity,V=_normalize13(_+e,D,I);g=v=V}else if("double-symmetric"==c){var N=g-b,R=Infinity,z=_normalize13(_+e,N+1,R);b=x=z-N,g=v=z}}else if("r2y"===l)if("normal"==c){var G=x+1,B=Infinity;v=_normalize13(w+n,G,B)}else if("symmetric"==c){var O=_max6(b,x)+1,j=Infinity,q=_normalize13(w+n,O,j);g=v=q}else if("double-symmetric"==c){var U=v-x,H=Infinity,F=_normalize13(w+n,U+1,r2max);b=x=F-U,g=v=F}var $=[h,m,b,x,g,v];$=$.map(function(e){return _round31(e,t._ownerCanvas.geometryPrecision)}),_setShapeData6(r,{type:"ring",values:$},t._ownerCanvas.geometryPrecision)};n.addEventListener("pointermove",k=function(e){d||(t._ownerCanvas.undoManager.checkpoint("Ring radius"),d=!0),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(o),E()}),n.addEventListener("lostpointercapture",A=function(){n.removeEventListener("pointermove",k),n.removeEventListener("lostpointercapture",A),t._ownerApp.removeEventListener("modkeyschange",C),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",C=function(){S(),E()}),S()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedRings[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[$ring]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[$ring],s=_getTransformToElement23(i,this),l=_slicedToArray(_getShapeData7(i).values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],m=l[5],b=!0,x=!1,g=void 0;try{for(var v=o.children[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=f.getAttribute("data-axis");if("r1x"===_){var w=new SVGPoint(d+c,u).matrixTransform(s);f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}else if("r1y"===_){var k=new SVGPoint(d,u+p).matrixTransform(s);f.setAttribute("cx",k.x),f.setAttribute("cy",k.y)}else if("r2x"===_){var A=new SVGPoint(d+h,u).matrixTransform(s);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}else if("r2y"===_){var C=new SVGPoint(d,u+m).matrixTransform(s);f.setAttribute("cx",C.x),f.setAttribute("cy",C.y)}}}catch(e){x=!0,g=e}finally{try{!b&&v.return&&v.return()}finally{if(x)throw g}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ringhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedRings",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("ring")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedRings(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ringhud",BXRingHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen32=BoxySVG.utils.element,_createElement26=_BoxySVG$utils$elemen32.createElement,_closest43=_BoxySVG$utils$elemen32.closest,_isPointerMoveIntentional9=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet21=BoxySVG.utils.geometry,_comparePoints4=_BoxySVG$utils$geomet21.comparePoints,_rectContainsRect2=_BoxySVG$utils$geomet21.rectContainsRect,_snapPointToAngleMultiple3=_BoxySVG$utils$geomet21.snapPointToAngleMultiple,_throttle28=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf16=BoxySVG.utils.transformGeneral,_getComputedTransform19=_BoxySVG$utils$transf16.getComputedTransform,_getTransformToElement24=_BoxySVG$utils$transf16.getTransformToElement,_BoxySVG$utils$curves=BoxySVG.utils.curvesGeneral,_getCubicCurveTParam=_BoxySVG$utils$curves.getCubicCurveTParam,_splitCurve=_BoxySVG$utils$curves.splitCurve,_round32=BoxySVG.utils.math.round,_BoxySVG$classes5=BoxySVG.classes,_Shortcut12=_BoxySVG$classes5.Shortcut,_Vector10=_BoxySVG$classes5.Vector,_abs12=Math.abs,_max7=Math.max,_pow6=Math.pow,_parseFloat12=Number.parseFloat,_BoxySVG$utils$pathGe3=BoxySVG.utils.pathGeneral,_clonePathData2=_BoxySVG$utils$pathGe3.clonePathData,_getPathDataBySubpath2=_BoxySVG$utils$pathGe3.getPathDataBySubpath,_getNearestPointOnPath=_BoxySVG$utils$pathGe3.getNearestPointOnPath,_harmonizePathData=_BoxySVG$utils$pathGe3.harmonizePathData,_getSegSubpathData=_BoxySVG$utils$pathGe3.getSegSubpathData,_getSegIndexAtLength=_BoxySVG$utils$pathGe3.getSegIndexAtLength,_getCurveShapeBetweenSegs=_BoxySVG$utils$pathGe3.getCurveShapeBetweenSegs,_makePrevSegSmooth=_BoxySVG$utils$pathGe3.makePrevSegSmooth,_makeNextSegSmooth=_BoxySVG$utils$pathGe3.makeNextSegSmooth,_makeSharpSegsSmooth=_BoxySVG$utils$pathGe3.makeSharpSegsSmooth,_convertLSegsToCSegs=_BoxySVG$utils$pathGe3.convertLSegsToCSegs,_convertCSegsToLSegs=_BoxySVG$utils$pathGe3.convertCSegsToLSegs,_isSegSubpathClosed=_BoxySVG$utils$pathGe3.isSegSubpathClosed,nodeGrippieSize=5,controlGrippieSize=4,_shadowHTML26="\n    <style>:host{display:none;outline:0;contain:size layout style paint}:host([enabled]){display:initial}#grippies{cursor:default}.node-grippie{fill:#a6a6a6;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-pathhud-grippie-shadow)}.node-grippie[data-selected]{fill:#7c7cff}:host(:focus) .node-grippie[data-selected]{fill:#00f}:host([passive]) .node-grippie[data-position=end],:host([passive]) .node-grippie[data-position=start]{fill:red}:host([passive]) .node-grippie:not([data-position]){display:none}.outline-grippie{fill:none;stroke:#00f;stroke-width:6;vector-effect:non-scaling-stroke;opacity:0}.outline-grippie:hover{opacity:.1}:host([passive]) .outline-grippie{display:none}.control-grippie,.control-line{vector-effect:non-scaling-stroke}.control-grippie{fill:red;filter:url(#bx-pathhud-grippie-shadow);stroke:#fff;stroke-width:1.5}.control-line{stroke:red;stroke-width:2;pointer-events:none;opacity:.3}</style>\n\n    <defs>\n      <filter id=\"bx-pathhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-pathhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-pathhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n    </defs>\n\n    <g id=\"grippies\">\n      <g id=\"outline-grippies\"></g>\n      <g id=\"control-lines\"></g>\n      <g id=\"node-grippies\"></g>\n      <g id=\"control-grippies\"></g>\n    </g>\n  ",_$path3=Symbol(),$text=Symbol(),$segIndex=Symbol(),$selectedSegsIndexes=Symbol(),BXPathHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllSegs()}}},this._installed=!1,this._selectedPaths=[],this._draggedNodeGrippie=null,this._draggedControlGrippie=null,this._draggedOutlineGrippie=null,this._updateOutlineGrippies1500Th=_throttle28(this._updateOutlineGrippies,1500,this),this._updateNodeGrippies40Th=_throttle28(this._updateNodeGrippies,40,this),this._updateControlGrippies40Th=_throttle28(this._updateControlGrippies,40,this),this._updateNodeGrippiesSize40Th=_throttle28(this._updateNodeGrippiesSize,40,this),this._updateControlGrippiesSize40Th=_throttle28(this._updateControlGrippiesSize,40,this),this._updateOutlineGrippiesSize1500Th=_throttle28(this._updateOutlineGrippiesSize,1500,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML26;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("dblclick",this._shadowRootDblClickListener=function(t){e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest43(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest43(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"rubberBandSelectionCallback",value:function(e){var t=this._ownerApp.modKeys.shift,n=[],a=!0,r=!1,o;try{for(var i=this["#node-grippies"].children[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.getBBox();_rectContainsRect2(e,d)&&n.push(l)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var u=!0,c=!1,p;try{for(var h=function(){var e=b.value,a=n.filter(function(t){return t[_$path3]===e}),r=a.map(function(e){return e[$segIndex]});if(e[$selectedSegsIndexes]||(e[$selectedSegsIndexes]=[]),!1===t)e[$selectedSegsIndexes]=r;else{var o=!0,i=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,!1===e[$selectedSegsIndexes].includes(u)&&e[$selectedSegsIndexes].push(u)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}},m=this._selectedPaths[Symbol.iterator](),b;!(u=(b=m.next()).done);u=!0)h()}catch(e){c=!0,p=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw p}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th(),0<n.length&&this.focus()}},{key:"_install",value:function(){var e=this;this._installed=!0,this._updateDropShadows(),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._onArtboardMutation()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e.deselectAllSegs()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e.deselectAllSegs()})}},{key:"_uninstall",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,delete o[$selectedSegsIndexes]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._selectedPaths=[],this._installed=!1,this["#outline-grippies"].innerHTML="",this["#node-grippies"].innerHTML="",this["#control-grippies"].innerHTML="",this["#control-lines"].innerHTML="",this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o[$selectedSegsIndexes]=[]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._selectedPaths=this._getSelectedPaths(),0===this._selectedPaths.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th())}},{key:"_onArtboardMutation",value:function(){this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th()}},{key:"_onZoomChange",value:function(){this._updateNodeGrippiesSize40Th(),this._updateControlGrippiesSize40Th(),this._updateOutlineGrippiesSize1500Th(),this._updateDropShadows()}},{key:"_onKeyDown",value:function(e){if(!1===this.passive&&this["#node-grippies"].querySelector("[data-selected]")){var t=_Shortcut12.fromEvent(e);t.matches("Backspace")?(e.preventDefault(),e.stopPropagation(),this._deleteSelectedSegs("smooth")):t.matches("Shift","Backspace")&&(e.preventDefault(),e.stopPropagation(),this._deleteSelectedSegs("sharp"))}}},{key:"_onShadowRootPointerDown",value:function(e){e.preventDefault(),this.focus(),e.target.matches(".node-grippie")?this._onNodeGrippiePointerDown(e):e.target.matches(".control-grippie")?this._onControlGrippiePointerDown(e):e.target.matches(".outline-grippie")&&this._onOutlineGrippiePointerDown(e)}},{key:"_onNodeGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=!1;if(!1===this.passive){var a=this._ownerApp.modKeys.shift,r=e.target,o=r[_$path3],i=r[$segIndex];o[$selectedSegsIndexes]||(o[$selectedSegsIndexes]=[]);var s;window.addEventListener("pointerup",s=function(){window.removeEventListener("pointerup",s);var e=o[$selectedSegsIndexes].includes(i);if(!1===e){if(!1===a){o[$selectedSegsIndexes]=[i];var r=!0,l=!1,d;try{for(var u=t._selectedPaths[Symbol.iterator](),c,p;!(r=(c=u.next()).done);r=!0)p=c.value,p!==o&&(p[$selectedSegsIndexes]=[])}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}else!0===a&&o[$selectedSegsIndexes].push(i);t._updateNodeGrippies40Th(),t._updateControlGrippies40Th()}else!0===a&&!1==n&&(o[$selectedSegsIndexes]=o[$selectedSegsIndexes].filter(function(e){return e!==i}),t._updateNodeGrippies40Th(),t._updateControlGrippies40Th())})}{var l=e.target,d=new SVGPoint(e.clientX,e.clientY),u,c;window.addEventListener("pointermove",u=function(a){if(!1===t.passive&&_isPointerMoveIntentional9(e,a)){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",c);var r=new _Vector10(a.clientX-e.clientX,a.clientY-e.clientY);n=!0;var o=_abs12(r.x)>_abs12(r.y)?"horizontal":"vertical",i=new SVGPoint(a.clientX,a.clientY);t._onNodeGrippieDragStart(e,l,i,o)}}),window.addEventListener("pointerup",c=function(){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",c),t.dispatchEvent(new CustomEvent("nodegrippieclick",{detail:{position:l.getAttribute("data-position"),selected:l.hasAttribute("data-selected"),path:l[_$path3]}}))})}}}},{key:"_onNodeGrippieDragStart",value:function(e,t,n,a){var r=this;this._ownerCanvas.undoManager.checkpoint("Edit path");var o=Symbol(),i=Symbol(),s=Symbol(),l=this._ownerApp.modKeys.shift,d=t[_$path3],u=t[$segIndex],c,p;d[$selectedSegsIndexes]||(d[$selectedSegsIndexes]=[]);var h=d[$selectedSegsIndexes].includes(u);if(!1===h){d[$selectedSegsIndexes]=[u];var m=!0,b=!1,x;try{for(var g=this._selectedPaths[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,y!==d&&(y[$selectedSegsIndexes]=[])}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th()}this._draggedNodeGrippie=t;var f=!0,_=!1,w;try{for(var k=this._selectedPaths[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=_harmonizePathData(C.getPathData({normalize:!0})),E=_clonePathData2(S),T=C[$text],P=void 0;if(T){var L=_getComputedTransform19(C),M=T.getScreenCTM();P=M.multiply(L).inverse()}else P=C.getScreenCTM().inverse();C[s]=P,C[i]=S,C[o]=E}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}window.addEventListener("pointermove",c=function(e){var t=new SVGPoint(e.clientX,e.clientY);r._ownerApp.modKeys.shift&&("horizontal"===a?t.y=n.y:"vertical"===a&&(t.x=n.x));var l=!0,d=!1,u;try{for(var c=r._selectedPaths[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var h=p.value,m=n.matrixTransform(h[s]),b=t.matrixTransform(h[s]),x=b.x-m.x,g=b.y-m.y,v=h[i],y=h[o],f=h[$selectedSegsIndexes]||[],_=!0,w=!1,k=void 0;try{for(var A=f[Symbol.iterator](),C;!(_=(C=A.next()).done);_=!0){var S=C.value,E=v[S],T=v[S+1],P=y[S],L=y[S+1];if("M"===E.type||"L"===E.type){if(E.values[0]=P.values[0]+x,E.values[1]=P.values[1]+g,T&&"C"===T.type)T.values[0]=L.values[0]+x,T.values[1]=L.values[1]+g;else if(T&&"Z"===T.type){var M=_getSegSubpathData(E,v),D=M[0],I=M[1],V=_getSegSubpathData(P,y);D.values[0]=E.values[0],D.values[1]=E.values[1],I&&"C"===I.type&&(I.values[0]=V[1].values[0]+x,I.values[1]=V[1].values[1]+g)}}else if("C"===E.type)if(E.values[2]=P.values[2]+x,E.values[3]=P.values[3]+g,E.values[4]=P.values[4]+x,E.values[5]=P.values[5]+g,T&&"C"===T.type)T.values[0]=L.values[0]+x,T.values[1]=L.values[1]+g;else if(T&&"Z"===T.type){var N=_getSegSubpathData(E,v),R=N[0],z=N[1],G=_getSegSubpathData(P,y);R.values[0]=E.values[4],R.values[1]=E.values[5],"C"===z.type&&(z.values[0]=G[1].values[0]+x,z.values[1]=G[1].values[1]+g)}}}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}h.setPathData(v)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",p);var e=!0,t=!1,n;try{for(var a=r._selectedPaths[Symbol.iterator](),o;!(e=(o=a.next()).done);e=!0){var s=o.value,l=s[i],d=!0,u=!1,h=void 0;try{for(var m=l[Symbol.iterator](),b,x;!(d=(b=m.next()).done);d=!0)x=b.value,x.values=x.values.map(function(e){return _round32(e,r._ownerCanvas.geometryPrecision)})}catch(e){u=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw h}}s.setPathData(l)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}r._draggedNodeGrippie=null,r._updateOutlineGrippies()})}},{key:"_onShadowRootDblClick",value:function(e){e.target.classList.contains("node-grippie")?this._onNodeGrippieDblClick(e):e.target.classList.contains("control-grippie")?this._onControlGrippieDblClick(e):e.target.classList.contains("outline-grippie")&&this._onOutlineGrippieDblClick(e)}},{key:"_onNodeGrippieDblClick",value:function(e){var t=this,n=e.target,a=n[_$path3],r=n[$segIndex],o=_harmonizePathData(a.getPathData({normalize:!0})),i=o[r],s=o[r+1]||null,l=o[r-1]||null,d=_getSegSubpathData(i,o),u=!1;if(_convertLSegsToCSegs(o),"M"===i.type){if("C"===s.type){var c=s.values[0]===i.values[0]&&s.values[1]===i.values[1];!1==c&&(s.values[0]=i.values[0],s.values[1]=i.values[1],u=!0)}}else if("C"===i.type)if(null===s||"M"===s.type){var p=i.values[2]===i.values[4]&&i.values[3]===i.values[5];!1==p&&(i.values[2]=i.values[4],i.values[3]=i.values[5],u=!0)}else if("Z"===s.type){var h=d[1];if("C"===h.type){var m=i.values[4]===h.values[0]&&i.values[5]===h.values[1]&&i.values[4]===i.values[2]&&i.values[5]===i.values[3];!1==m?(h.values[0]=i.values[4],h.values[1]=i.values[5],i.values[2]=i.values[4],i.values[3]=i.values[5]):_makeSharpSegsSmooth(l,i,h),u=!0}}else if("C"===s.type){var b=s.values[0]===i.values[4]&&s.values[1]===i.values[5]&&i.values[2]===i.values[4]&&i.values[3]===i.values[5];!1==b?(i.values[2]=i.values[4],i.values[3]=i.values[5],s.values[0]=i.values[4],s.values[1]=i.values[5]):_makeSharpSegsSmooth(l,i,s),u=!0}if(u){this._ownerCanvas.undoManager.checkpoint("Edit path"),_convertCSegsToLSegs(o);var x=!0,g=!1,v;try{for(var y=o[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,_.values=_.values.map(function(e){return _round32(e,t._ownerCanvas.geometryPrecision)})}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}a.setPathData(o)}}},{key:"_onControlGrippieDblClick",value:function(e){var t=this,n=e.target,a=n.getAttribute("data-index"),r=n[_$path3],o=n[$segIndex],i=_harmonizePathData(r.getPathData({normalize:!0})),s=i[o],l=i[o-1]||null;"1"===a?"C"===l.type?(s.values[0]=l.values[4],s.values[1]=l.values[5]):("M"===l.type||"L"===l.type)&&(s.values[0]=l.values[0],s.values[1]=l.values[1]):"2"===a&&(s.values[2]=s.values[4],s.values[3]=s.values[5]),this._ownerCanvas.undoManager.checkpoint("Edit path"),_convertCSegsToLSegs(i);var d=!0,u=!1,c;try{for(var p=i[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,m.values=m.values.map(function(e){return _round32(e,t._ownerCanvas.geometryPrecision)})}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}r.setPathData(i)}},{key:"_onOutlineGrippieDblClick",value:function(e){var n=this,a=e.target[_$path3],r=a[$text],o;if(r){var i=_getComputedTransform19(a),s=r.getScreenCTM();o=s.multiply(i).inverse()}else o=a.getScreenCTM().inverse();var l=_harmonizePathData(a.getPathData({normalize:!0})),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(o),u=_getNearestPointOnPath(a,d),c=_slicedToArray(u,2),p=c[0],h=c[1],m=_getSegIndexAtLength(l,h),b=l[m],x,g;if("L"===b.type){var v=new SVGPoint(b.values[0],b.values[1]);x={type:"L",values:[p.x,p.y]},g={type:"L",values:[v.x,v.y]}}else if("C"===b.type){var y=l[m-1]||null,f;"M"===y.type||"L"===y.type?f=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(f=new SVGPoint(y.values[4],y.values[5]));var _=new SVGPoint(b.values[4],b.values[5]),w=new SVGPoint(b.values[0],b.values[1]),k=new SVGPoint(b.values[2],b.values[3]),A=_getCubicCurveTParam(p,f,w,k,_),t=_splitCurve(f,w,k,_,A);if(-1===A)return;x={type:"C",values:[t[0][1].x,t[0][1].y,t[0][2].x,t[0][2].y,t[0][3].x,t[0][3].y]},g={type:"C",values:[t[1][1].x,t[1][1].y,t[1][2].x,t[1][2].y,t[1][3].x,t[1][3].y]}}this._ownerCanvas.undoManager.checkpoint("Add path node"),l=[].concat(_toConsumableArray(l.slice(0,m)),[x,g],_toConsumableArray(l.slice(m+1)));var C=!0,S=!1,E;try{for(var T=l[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.values=L.values.map(function(e){return _round32(e,n._ownerCanvas.geometryPrecision)})}catch(e){S=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(S)throw E}}a.setPathData(l),a[$selectedSegsIndexes]=[m];var M=!0,D=!1,I;try{for(var V=this._selectedPaths[Symbol.iterator](),N,R;!(M=(N=V.next()).done);M=!0)R=N.value,R!==a&&(R[$selectedSegsIndexes]=[])}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}this._updateNodeGrippies(),this._updateControlGrippies()}},{key:"_onControlGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;window.addEventListener("pointermove",a=function(o){if(_isPointerMoveIntentional9(e,o)){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r);var i=new SVGPoint(o.clientX,o.clientY);t._onControlGrippieDragStart(e,n,i)}}),window.addEventListener("pointerup",r=function(){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r)})}}},{key:"_onControlGrippieDragStart",value:function(e,t,n){var a=this;this._ownerCanvas.undoManager.checkpoint("Move control point");var r=t.getAttribute("data-index"),o=t[_$path3],i=o[$text],s,l;if(i){var d=_getComputedTransform19(o),u=i.getScreenCTM();l=u.multiply(d),s=l.inverse()}else l=o.getScreenCTM(),s=l.inverse();var c=t[$segIndex],p=_harmonizePathData(o.getPathData({normalize:!0}));_convertLSegsToCSegs(p);var h=p[c],m=p[c-1]||null,b=p[c+1]||null,x=_getSegSubpathData(h,p),g=_isSegSubpathClosed(h,p),v=n.matrixTransform(s),y={type:"C",values:[].concat(_toConsumableArray(h.values))},f=null,_=null,w=null;f="M"===m.type?g?x[x.length-2]:m:m,b&&("Z"===b.type?_=g?x[1]:null:"C"===b.type&&(_=b)),"1"===r?"M"===f.type||"L"===f.type?w=new SVGPoint(f.values[0],f.values[1]):"C"===f.type&&(w=new SVGPoint(f.values[4],f.values[5])):"2"===r&&(w=new SVGPoint(h.values[4],h.values[5]));var k="sharp",A=w.matrixTransform(l),C=new SVGPoint(v.x,v.y),S,E,T;this._draggedControlGrippie=t;var P=function(){var e=a._ownerApp.modKeys,t=e.ctrl,n=e.shift;!0===t&&!1===n?k="sharp":!1===t&&!0===n?"1"===r?k=f&&"C"===f.type?"smooth":"sharp":"2"===r&&(k=_&&"C"===_.type?"smooth":"sharp"):!0===t&&!0===n?"1"===r?k=f&&"C"===f.type?"symmetric-smooth":"sharp":"2"===r&&(k=_&&"C"===_.type?"symmetric-smooth":"sharp"):!1===t&&!1===n&&("1"===r?k=_getCurveShapeBetweenSegs(f,h):"2"===r&&(k=_getCurveShapeBetweenSegs(h,_)))},L=function(){if("1"===r){var e;if(a._ownerApp.modKeys.shift)e=C;else{var t=C.x-v.x,n=C.y-v.y;e=new SVGPoint(y.values[0]+t,y.values[1]+n)}if(h.values[0]=e.x,h.values[1]=e.y,"smooth"===k){var i=new SVGPoint(f.values[2],f.values[3]),s=new _Vector10(w,e),l=new _Vector10(w,i),d=s.getOppositeVector();d.length=l.length,f.values[2]=w.x+d.x,f.values[3]=w.y+d.y}else if("symmetric-smooth"===k){var u=new _Vector10(w,e);u=u.negate(),f.values[2]=w.x+u.x,f.values[3]=w.y+u.y}}else if("2"===r){var c;if(a._ownerApp.modKeys.shift)c=C;else{var m=C.x-v.x,b=C.y-v.y;c=new SVGPoint(y.values[2]+m,y.values[3]+b)}if(h.values[2]=c.x,h.values[3]=c.y,"smooth"===k){var x=new SVGPoint(_.values[0],_.values[1]),g=new _Vector10(w,c),A=new _Vector10(w,x),S=g.getOppositeVector();S.length=A.length,_.values[0]=w.x+S.x,_.values[1]=w.y+S.y}else if("symmetric-smooth"===k){var E=new _Vector10(w,c);E=E.negate(),_.values[0]=w.x+E.x,_.values[1]=w.y+E.y}}o.setPathData(p)};window.addEventListener("pointermove",S=function(e){var t=new SVGPoint(e.clientX,e.clientY);if(a._ownerApp.modKeys.shift){var n=_snapPointToAngleMultiple3(A,t,22.5),r=_slicedToArray(n,1),o=r[0];t=o}C=t.matrixTransform(s),L()}),window.addEventListener("pointerup",E=function(){window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",E),a._ownerApp.removeEventListener("modkeyschange",T),_convertCSegsToLSegs(p);var e=!0,t=!1,n;try{for(var r=p[Symbol.iterator](),i,s;!(e=(i=r.next()).done);e=!0)s=i.value,s.values=s.values.map(function(e){return _round32(e,a._ownerCanvas.geometryPrecision)})}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}o.setPathData(p),a._draggedControlGrippie=null}),this._ownerApp.addEventListener("modkeyschange",T=function(){P()}),P()}},{key:"_onOutlineGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=!1,a=e.target,r,o;window.addEventListener("pointermove",r=function(i){_isPointerMoveIntentional9(e,i)&&(window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o),t._onOutlineGrippieDragStart(i,a),n=!0)}),window.addEventListener("pointerup",o=function(){if(window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o),!1==n){var i=a[_$path3],s=i[$text],l;if(s){var d=_getComputedTransform19(i),u=s.getScreenCTM();l=u.multiply(d).inverse()}else l=i.getScreenCTM().inverse();var c=_harmonizePathData(i.getPathData({normalize:!0})),p=new SVGPoint(e.clientX,e.clientY),h=p.matrixTransform(l),m=_getNearestPointOnPath(i,h),b=_slicedToArray(m,2),x=b[0],g=b[1],v=_getSegIndexAtLength(c,g),y=v-1,f=c[v],_=c[y],w=_getSegSubpathData(f,c),k=_isSegSubpathClosed(f,c);i[$selectedSegsIndexes]=_?k&&"M"===_.type?[v,w.length-2]:[v,y]:[v],t._updateNodeGrippies40Th(),t._updateControlGrippies40Th()}})}}},{key:"_onOutlineGrippieDragStart",value:function(e,t){var n=this;this._ownerCanvas.undoManager.checkpoint("Edit path"),this._draggedOutlineGrippie=e.target,this["#outline-grippies"].style.display="none";var a=t[_$path3],r=a[$text],o;if(r){var i=_getComputedTransform19(a),s=r.getScreenCTM();o=s.multiply(i).inverse()}else o=a.getScreenCTM().inverse();var l=_harmonizePathData(a.getPathData({normalize:!0})),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(o),u=_getNearestPointOnPath(a,d),c=_slicedToArray(u,2),p=c[0],h=c[1],m=_getSegIndexAtLength(l,h),b=l[m],x=l[m-1],g=l[m+1],v=_getSegSubpathData(b,l),y=_isSegSubpathClosed(b,l),f=new _Vector10(d,p),_=new SVGPoint(d.x,d.y),w=null,k=null,A=null,C=null,S=!1,E=!1,T,P,L;_convertLSegsToCSegs(l),w="M"===x.type?y?v[v.length-2]:x:x,g&&("Z"===g.type?k=y?v[1]:null:"C"===g.type&&(k=g)),"M"===w.type||"L"===w.type?A=new SVGPoint(w.values[0],w.values[1]):"C"===w.type&&(A=new SVGPoint(w.values[4],w.values[5])),"M"===b.type||"L"===b.type?C=new SVGPoint(b.values[0],b.values[1]):"C"===b.type&&(C=new SVGPoint(b.values[4],b.values[5]));var M=function(){var e=n._ownerApp.modKeys,t=e.ctrl,a=e.shift;!0===t&&!1===a?(S=!1,E=!1):!1===t&&!0===a?(S=w&&"C"===w.type&&"smooth",E=k&&"C"===k.type&&"smooth"):!0===t&&!0===a?(S=w&&"C"===w.type&&"symmetric-smooth",E=k&&"C"===k.type&&"symmetric-smooth"):!1===t&&!1===a&&(S=_getCurveShapeBetweenSegs(w,b),E=_getCurveShapeBetweenSegs(b,k))},D=function(){var e=new SVGPoint(b.values[0],b.values[1]),n=new SVGPoint(b.values[2],b.values[3]),r=_getCubicCurveTParam(p,A,e,n,C),t=1;if(r<=1/6?t=0:0.5>=r?t=_pow6((6*r-1)/2,3)/2:r<=5/6&&(t=(1-_pow6((6*(1-r)-1)/2,3))/2+0.5),-1!==r){var o=(1-t)/(3*r*(1-r)*(1-r)),i=t/(3*r*r*(1-r)),s=_.x-p.x,d=_.y-p.y;b.values[0]+=o*s,b.values[1]+=o*d,b.values[2]+=i*s,b.values[3]+=i*d,"smooth"===S?_makePrevSegSmooth(b,w,!1):"symmetric-smooth"===S&&_makePrevSegSmooth(b,w,!0),"smooth"===E?_makeNextSegSmooth(b,k,!1):"symmetric-smooth"===E&&_makeNextSegSmooth(b,k,!0),p=_,a.setPathData(l)}};window.addEventListener("pointermove",T=function(e){_=new SVGPoint(e.clientX,e.clientY).matrixTransform(o),_.x+=f.x,_.y+=f.y,D()}),window.addEventListener("pointerup",P=function(){n._ownerApp.removeEventListener("modkeyschange",L),window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",P),_convertCSegsToLSegs(l);var e=!0,t=!1,r;try{for(var o=l[Symbol.iterator](),i,s;!(e=(i=o.next()).done);e=!0)s=i.value,s.values=s.values.map(function(e){return _round32(e,n._ownerCanvas.geometryPrecision)})}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}a.setPathData(l),n._draggedOutlineGrippie=null,n["#outline-grippies"].style.display=null,n._updateOutlineGrippies()}),this._ownerApp.addEventListener("modkeyschange",L=function(){M(),D()}),M()}},{key:"_updateOutlineGrippies",value:function(){if(!(this._draggedOutlineGrippie||this._draggedNodeGrippie||this._draggedControlGrippie)){var e=document.createDocumentFragment(),t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=void 0;if(i[$text]){var l=_getTransformToElement24(i[$text],this),d=_getComputedTransform19(i);s=l.multiply(d)}else s=_getTransformToElement24(i,this);var u=i.getPathData(),c=_createElement26("svg:path");c[_$path3]=i,c.setAttribute("class","outline-grippie"),c.setAttribute("transform",s.toString()),c.setPathData(u),e.append(c)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#outline-grippies"].innerHTML="",this["#outline-grippies"].append(e),this._updateOutlineGrippiesSize()}}},{key:"_updateNodeGrippies",value:function(){if(!(this._draggedOutlineGrippie||this._draggedControlGrippie)){var e=document.createDocumentFragment(),t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=void 0;if(i[$text]){var l=_getTransformToElement24(i[$text],this),d=_getComputedTransform19(i);s=l.multiply(d)}else s=_getTransformToElement24(i,this);var u=_harmonizePathData(i.getPathData({normalize:!0})),c=u.length,p=[],h=void 0,m=void 0;0===c?(h=null,m=null):1===c?(h=u[0],m=null):1<c&&(h=u[0],m=u[c-1]);for(var b=m&&"Z"===m.type,x=0;x<c;x+=1){var g=u[x],v=void 0;if("C"===g.type)v=new SVGPoint(g.values[4],g.values[5]);else if("L"===g.type)v=new SVGPoint(g.values[0],g.values[1]);else if("M"===g.type&&!1===_isSegSubpathClosed(g,u))v=new SVGPoint(g.values[0],g.values[1]);else continue;var y=v.matrixTransform(s),f=_createElement26("svg:circle");f.setAttribute("class","node-grippie"),f.setAttribute("cx",y.x),f.setAttribute("cy",y.y),f.setAttribute("r",nodeGrippieSize/this._ownerCanvas.scale),f[_$path3]=i,f[$segIndex]=x,g!==h||b||f.setAttribute("data-position","start"),g!==m||b||f.setAttribute("data-position","end"),i[$selectedSegsIndexes]&&i[$selectedSegsIndexes].includes(x)&&f.setAttribute("data-selected",""),p.push(f)}var _=!0,w=!1,k=void 0;try{for(var A=p[Symbol.iterator](),C,S;!(_=(C=A.next()).done);_=!0)S=C.value,e.append(S)}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#node-grippies"].innerHTML="",this["#node-grippies"].append(e)}}},{key:"_updateControlGrippies",value:function(){var e=document.createDocumentFragment(),t=document.createDocumentFragment(),n=!0,a=!1,r;try{for(var o=this._selectedPaths[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=_harmonizePathData(s.getPathData({normalize:!0})),d=s[$selectedSegsIndexes]||[],u=void 0;if(s[$text]){var c=_getTransformToElement24(s[$text],this),p=_getComputedTransform19(s);u=c.multiply(p)}else u=_getTransformToElement24(s,this);var h=!0,m=!1,b=void 0;try{for(var x=d[Symbol.iterator](),g;!(h=(g=x.next()).done);h=!0){var v=g.value,y=l[v],f=l[v+1]||null,_=_getSegSubpathData(y,l)[1],w=l.indexOf(_),k=void 0,A=null,C=null;if("M"===y.type||"L"===y.type?k=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(k=new SVGPoint(y.values[4],y.values[5])),"C"===y.type&&(A=new SVGPoint(y.values[2],y.values[3])),f&&("C"===f.type?C=new SVGPoint(f.values[0],f.values[1]):"Z"===f.type&&"C"===_.type&&(C=new SVGPoint(_.values[0],_.values[1]))),A&&!1===_comparePoints4(k,A)){var S=k.matrixTransform(u),E=A.matrixTransform(u),T=_createElement26("svg:circle");T.setAttribute("class","control-grippie"),T.setAttribute("data-index","2"),T.setAttribute("cx",E.x),T.setAttribute("cy",E.y),T.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale),T[_$path3]=s,T[$segIndex]=v;var P=_createElement26("svg:line");P.setAttribute("class","control-line"),P.setAttribute("x1",S.x),P.setAttribute("y1",S.y),P.setAttribute("x2",E.x),P.setAttribute("y2",E.y),e.append(T),t.append(P)}if(C&&!1===_comparePoints4(k,C)){var L=k.matrixTransform(u),M=C.matrixTransform(u),D=_createElement26("svg:circle");D.setAttribute("class","control-grippie"),D.setAttribute("data-index","1"),D.setAttribute("cx",M.x),D.setAttribute("cy",M.y),D.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale),D[_$path3]=s,D[$segIndex]="Z"===f.type?w:v+1;var I=_createElement26("svg:line");I.setAttribute("class","control-line"),I.setAttribute("x1",L.x),I.setAttribute("y1",L.y),I.setAttribute("x2",M.x),I.setAttribute("y2",M.y),e.append(D),t.append(I)}}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this["#control-grippies"].innerHTML="",this["#control-grippies"].append(e),this["#control-lines"].innerHTML="",this["#control-lines"].append(t)}},{key:"_updateNodeGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#node-grippies"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.setAttribute("r",nodeGrippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateControlGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#control-grippies"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateOutlineGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#outline-grippies"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[_$path3],s=getComputedStyle(i),l=_parseFloat12(s.getPropertyValue("stroke-width"))*this._ownerCanvas.scale;10>l&&(l=10),o.style.setProperty("stroke-width",l)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateDropShadows",value:function(){this["#bx-pathhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_selectAllSegs",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){for(var o=r.value,i=_harmonizePathData(o.getPathData({normalize:!0})),s=[],l=0,d;l<i.length;l+=1)d=i[l],"C"===d.type||"L"===d.type?s.push(l):"M"===d.type&&!1===_isSegSubpathClosed(d,i)&&s.push(l);o[$selectedSegsIndexes]=s}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateNodeGrippies(),this._updateControlGrippies()}},{key:"deselectAllSegs",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o[$selectedSegsIndexes]=[]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th()}},{key:"_deleteSelectedSegs",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"smooth";this._ownerCanvas.undoManager.checkpoint("Delete segments");var n=!0,a=!1,r;try{for(var o=function(){var n=s.value,a=_harmonizePathData(n.getPathData({normalize:!0}));_convertLSegsToCSegs(a);var r=[].concat(_toConsumableArray(n[$selectedSegsIndexes])).sort(function(e,t){return t-e}),o=r.filter(function(e){return"C"===a[e].type}),i=r.filter(function(e){return"M"===a[e].type});if(0===r.length)return"continue";var l=!0,d=!1,u;try{for(var c=function(){var e=h.value,n=a[e],r=a[e+1]||null,o=a[e-1]||null;if(null===r)a=a.filter(function(e){return e!==n});else if("M"===r.type)a=a.filter(function(e){return e!==n});else if("Z"===r.type){var i=_getSegSubpathData(n,a),s=i[0],l=i[1];a=a.filter(function(e){return e!==n}),"L"===o.type||"M"===o.type?(s.values[0]=o.values[0],s.values[1]=o.values[1]):"C"===o.type&&(s.values[0]=o.values[4],s.values[1]=o.values[5]),"C"===l.type&&("smooth"===t?(l.values[0]=n.values[0],l.values[1]=n.values[1]):"sharp"===t&&("L"===o.type||"M"===o.type?(l.values[0]=o.values[0],l.values[1]=o.values[1]):"C"===o.type&&(l.values[0]=o.values[4],l.values[1]=o.values[5]),l.values[2]=l.values[4],l.values[3]=l.values[5]))}else"C"===r.type?(a=a.filter(function(e){return e!==n}),"smooth"===t?(r.values[0]=n.values[0],r.values[1]=n.values[1]):"sharp"===t&&("M"===o.type||"L"===o.type?(r.values[0]=o.values[0],r.values[1]=o.values[1]):"C"===o.type&&(r.values[0]=o.values[4],r.values[1]=o.values[5]),r.values[2]=r.values[4],r.values[3]=r.values[5])):"L"===r.type&&(a=a.filter(function(e){return e!==n}))},p=o[Symbol.iterator](),h;!(l=(h=p.next()).done);l=!0)c()}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}var m=!0,b=!1,x;try{for(var g=i[Symbol.iterator](),v;!(m=(v=g.next()).done);m=!0){var y=v.value,f=a[y],_=_getSegSubpathData(f,a);1<_.length&&function(){var e=_[0],t=_[1];a=a.filter(function(e){return e!==t}),"L"===t.type?(e.values[0]=t.values[0],e.values[1]=t.values[1]):"C"===t.type&&(e.values[0]=t.values[4],e.values[1]=t.values[5])}()}}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}var w=!0,k=!1,A;try{for(var C=_getPathDataBySubpath2(a)[Symbol.iterator](),S;!(w=(S=C.next()).done);w=!0){var E=S.value,T=E.filter(function(e){return"C"===e.type}),P="Z"===E[E.length-1].type,L=P?2:1;if(T.length<L){var M=!0,D=!1,I=void 0;try{for(var V=function(){var e=R.value;a=a.filter(function(t){return t!==e})},N=E[Symbol.iterator](),R;!(M=(R=N.next()).done);M=!0)V()}catch(e){D=!0,I=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw I}}}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}n[$selectedSegsIndexes]=[],_convertCSegsToLSegs(a);var z=!0,G=!1,B;try{for(var O=a[Symbol.iterator](),j,q;!(z=(j=O.next()).done);z=!0)q=j.value,q.values=q.values.map(function(t){return _round32(t,e._ownerCanvas.geometryPrecision)})}catch(e){G=!0,B=e}finally{try{!z&&O.return&&O.return()}finally{if(G)throw B}}n.setPathData(a),!1===n.hasAttribute("d")&&n.remove()},i=this._selectedPaths[Symbol.iterator](),s,l;!(n=(s=i.next()).done);n=!0)l=o(),"continue"===l}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"getNodeGrippiesDescriptors",value:function(e,t){var n=this._shadowRoot.elementsFromPoint(e,t),a=[],r=!0,o=!1,i;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.push({path:d[_$path3],position:d.getAttribute("data-position"),selected:d.hasAttribute("data-selected")})}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return a}},{key:"_getSelectedPaths",value:function(){var e=this,t=[],n=[];return function a(r){var o=!0,i=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)if(u=d.value,"path"===u.localName)u.hasAttribute("d")&&!u.hasAttribute("data-bx-shape")&&(u[$text]=null,t.push(u));else if("text"===u.localName){var c=u,p=[].concat(_toConsumableArray(u.children)).find(function(e){return"textPath"===e.localName});if(p){var h=p.getAttribute("href");if(h){var m=e._ownerCanvas.artboards.querySelector(h);m&&m.hasAttribute("d")&&!m.hasAttribute("data-bx-shape")&&(m[$text]=c,n.push(m))}}}else("g"===u.localName||"a"===u.localName)&&a(u.children)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}(this._ownerCanvas.selectedElements),t=t.filter(function(e){return!1===n.includes(e)}),[].concat(_toConsumableArray(t),n)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"passive",get:function(){return this.hasAttribute("passive")},set:function(e){e?this.setAttribute("passive",""):this.removeAttribute("passive")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-pathhud",BXPathHudElement)}{var _closest44=BoxySVG.utils.element.closest,_snapPointToAngleMultiple4=BoxySVG.utils.geometry.snapPointToAngleMultiple,_round33=BoxySVG.utils.math.round,_throttle29=BoxySVG.utils.time.throttle,_getTransformToElement25=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector11=BoxySVG.classes.Vector,$line=Symbol(),_grippieSize5=6,_shadowHTML27="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}</style>\n\n    <defs>\n      <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"start-grippie grippie\" fill=\"none\"></circle>\n        <circle class=\"end-grippie grippie\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXLineHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedLines=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle29(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML27;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest44(this,"bx-electronApp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest44(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedLines=this._getSelectedLines(),0===this._selectedLines.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".start-grippie")?this._onStartGrippiePointerDown(e):e.target.matches(".end-grippie")&&this._onEndGrippiePointerDown(e)}},{key:"_onStartGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$line],o=r.getCTM(),i=r.getCTM().inverse(),s=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),l=s.matrixTransform(o),d=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),u=d.matrixTransform(o),c=new SVGPoint(e.clientX,e.clientY),p=this._ownerCanvas.geometryPrecision,h=!1,m,b;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",m=function(e){h||(h=!0,t._ownerCanvas.undoManager.checkpoint("Line start point"));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector11(c,n),o=new SVGPoint(l.x+a.x,l.y+a.y);if(t._ownerApp.modKeys.shift){var s=_snapPointToAngleMultiple4(u,o,22.5),d=_slicedToArray(s,1),m=d[0];o=m}var b=o.matrixTransform(i);r.setAttribute("x1",_round33(b.x,p)),r.setAttribute("y1",_round33(b.y,p))}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",b),t._draggedGrippie=null})}}},{key:"_onEndGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$line],o=r.getCTM(),i=r.getCTM().inverse(),s=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),l=s.matrixTransform(o),d=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),u=d.matrixTransform(o),c=new SVGPoint(e.clientX,e.clientY),p=this._ownerCanvas.geometryPrecision,h=!1,m,b;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",m=function(e){h||(h=!0,t._ownerCanvas.undoManager.checkpoint("Line start point"));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector11(c,n),o=new SVGPoint(u.x+a.x,u.y+a.y);if(t._ownerApp.modKeys.shift){var s=_snapPointToAngleMultiple4(l,o,22.5),d=_slicedToArray(s,1),m=d[0];o=m}var b=o.matrixTransform(i);r.setAttribute("x2",_round33(b.x,p)),r.setAttribute("y2",_round33(b.y,p))}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",b),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedLines[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this["#subhud-template"].cloneNode(!0);i.removeAttribute("id"),i[$line]=o,this["#subhuds"].append(i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=o[$line],s=_getTransformToElement25(i,this),l=o.querySelector(".start-grippie"),d=o.querySelector(".end-grippie"),u=new SVGPoint(i.x1.baseVal.value,i.y1.baseVal.value),c=u.matrixTransform(s),p=new SVGPoint(i.x2.baseVal.value,i.y2.baseVal.value),h=p.matrixTransform(s);l.setAttribute("cx",c.x),l.setAttribute("cy",c.y),d.setAttribute("cx",h.x),d.setAttribute("cy",h.y)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=!0,s=!1,l=void 0;try{for(var d=o.children[Symbol.iterator](),u,c;!(i=(u=d.next()).done);i=!0)c=u.value,c.setAttribute("r",_grippieSize5/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedLines",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.outermostSelectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"line"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedLines(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-linehud",BXLineHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen33=BoxySVG.utils.element,_createElement27=_BoxySVG$utils$elemen33.createElement,_closest45=_BoxySVG$utils$elemen33.closest,_snapPointToAngleMultiple5=BoxySVG.utils.geometry.snapPointToAngleMultiple,_round34=BoxySVG.utils.math.round,_throttle30=BoxySVG.utils.time.throttle,_getTransformToElement26=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector12=BoxySVG.classes.Vector,$poly=Symbol(),$pointIndex=Symbol(),$selectedPointsIndexes=Symbol(),_grippieSize6=6,_shadowHTML28="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}.grippie[data-selected]{fill:red}</style>\n\n    <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n      <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n      <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n      <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n    </filter>\n\n    <g id=\"node-grippies\"></g>\n  ",BXPolyHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedPolys=[],this._draggedGrippie=null,this._updateNodeGrippies200Th=_throttle30(this._updateNodeGrippies,200,this),this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML28;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest45(this,"bx-electronApp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest45(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#node-grippies"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedPolys=this._getSelectedPolys(),0===this._selectedPolys.length?!0===this._installed&&this._uninstall():(!1===this._installed&&this._install(),this._updateNodeGrippies())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateNodeGrippies():this._updateNodeGrippies200Th()}},{key:"_onZoomChange",value:function(){this._updateNodeGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerApp.modKeys.shift,a=e.target,r=a[$poly],o=a[$pointIndex],i=r.getCTM(),s=r.getCTM().inverse(),l=r.points[o],d=l.matrixTransform(i),u=new SVGPoint(e.clientX,e.clientY),c=this._ownerCanvas.geometryPrecision,p=!1,h,m;a.parentElement.append(a),this._draggedGrippie=a,window.addEventListener("pointermove",h=function(e){p||(p=!0,t._ownerCanvas.undoManager.checkpoint("Edit "+r.localName));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector12(u,n),i=new SVGPoint(d.x+a.x,d.y+a.y),l=i.matrixTransform(s);r.points[o].x=_round34(l.x,c),r.points[o].y=_round34(l.y,c);var h=[],m=!0,b=!1,x;try{for(var g=r.points[Symbol.iterator](),v,y;!(m=(v=g.next()).done);m=!0)y=v.value,h.push(y.x,y.y)}catch(e){b=!0,x=e}finally{try{!m&&g.return&&g.return()}finally{if(b)throw x}}r.setAttribute("points",h.join(" "))}),window.addEventListener("pointerup",m=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",m),t._draggedGrippie=null})}}},{key:"_updateNodeGrippies",value:function(){var e=0,t=!0,n=!1,a;try{for(var r=this._selectedPolys[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0)for(var i=o.value,s=_getTransformToElement26(i,this),l=0;l<i.points.length;l+=1){var d=i.points[l],u=d.matrixTransform(s),c=this["#node-grippies"].children[e];c||(c=_createElement27("svg:circle"),c.setAttribute("class","grippie"),this["#node-grippies"].append(c)),c[$poly]=i,c[$pointIndex]=l,c.setAttribute("cx",u.x),c.setAttribute("cy",u.y),i[$selectedPointsIndexes]&&i[$selectedPointsIndexes].includes(l)?c.setAttribute("data-selected",""):c.removeAttribute("data-selected"),e+=1}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}for(;this["#node-grippies"].childElementCount>e;)this["#node-grippies"].lastElementChild.remove();this._updateNodeGrippiesSize()}},{key:"_updateNodeGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#node-grippies"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.setAttribute("r",_grippieSize6/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPolys",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,"polyline"===s.localName||"polygon"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedPolys(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-polyhud",BXPolyHudElement,{extends:"g"})}{{var _closest46=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet22=BoxySVG.utils.geometry,_comparePoints5=_BoxySVG$utils$geomet22.comparePoints,_snapPointToAngleMultiple6=_BoxySVG$utils$geomet22.snapPointToAngleMultiple,_BoxySVG$utils$transf17=BoxySVG.utils.transformGeneral,_getComputedTransform20=_BoxySVG$utils$transf17.getComputedTransform,_getTransformToElement27=_BoxySVG$utils$transf17.getTransformToElement,_Vector13=BoxySVG.classes.Vector,_shadowHTML29="\n    <style>:host{contain:size layout style paint}#control-line-1,#control-line-2{fill:none;stroke:red;stroke-width:1;vector-effect:non-scaling-stroke;pointer-events:none;opacity:.4}#control-point-1-grippie,#control-point-2-grippie{fill:red;stroke:none;pointer-events:none;opacity:1}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <path id=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n\n    <line id=\"control-line-1\"></line>\n    <line id=\"control-line-2\"></line>\n\n    <circle id=\"control-point-1-grippie\"></circle>\n    <circle id=\"control-point-2-grippie\"></circle>\n  ",BXCubicBezierSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML29;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest46(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest46(this,"bx-canvas")}},{key:"show",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"end",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._position=t,this._path=e,this._textPath=n,this._snap="none",this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines()}},{key:"hide",value:function(){this._path=null,this._clientX=null,this._clientY=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,this._pointerDown=!1,this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){!1===e._pointerDown&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines())}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("pointerdown",this._pointerDownListener=function(t){var n=e._path.getScreenCTM().inverse();if(e._textPath){var a=e._textPath.closest("text"),r=_getComputedTransform20(e._path);n=a.getScreenCTM().inverse().multiply(r)}if(e._pointerDown=!0,e._pointerDownPoint=new SVGPoint(t.clientX,t.clientY),e._pointerDownPoint=e._pointerDownPoint.matrixTransform(n),e._pointerDownControlPoint1=SVGPoint.fromPoint(e._controlPoint1),e._pointerDownControlPoint2=SVGPoint.fromPoint(e._controlPoint2),"end"===e._position){if("paraxialPolygon"===e._snap){var o=_snapPointToAngleMultiple6(e._startPoint,e._endPoint,45),i=_slicedToArray(o,1),s=i[0];e._endPoint=s}else e._endPoint=SVGPoint.fromPoint(e._pointerDownPoint);}else if("start"===e._position)if("paraxialPolygon"===e._snap){var l=_snapPointToAngleMultiple6(e._startPoint,e._endPoint,45),d=_slicedToArray(l,1),u=d[0];e._endPoint=u}else e._endPoint=new SVGPoint(e._firstSeg.values[0],e._firstSeg.values[1])}),window.addEventListener("pointermove",this._pointerMoveListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._pointerDown=!1,e._updateSnapProperty()})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("pointerdown",this._pointerDownListener),window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,(i.target===this._path||i.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateSegProperties",value:function(){if("end"===this._position){var e=this._path.getPathData({normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1,a;0<=n;n-=1)if(a=e[n],"Z"!==a.type){this._lastNonZSeg=a;break}this._lastSegControlPoint="C"===t.type?new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?new SVGPoint(t.values[0],t.values[1]):null,this._lastSegIsSmooth="C"===t.type&&(t.values[2]!==t.values[4]||t.values[3]!==t.values[5])}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),o=r[0],i=r[1];this._firstSeg=o,this._secondSegControlPoint="C"===i.type?new SVGPoint(i.values[0],i.values[1]):"M"===i.type||"L"===i.type?new SVGPoint(o.values[0],o.values[1]):null,this._secondSegIsSmooth="C"===i.type&&i.values[0]!==o.values[0]&&i.values[1]!==o.values[1]}}},{key:"_updatePointProperties",value:function(){if(!1===this._pointerDown){var e=this._path.getScreenCTM().inverse();if(this._textPath){var t=this._textPath.closest("text"),n=_getComputedTransform20(this._path);e=t.getScreenCTM().inverse().multiply(n)}if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),this._endPoint=null===this._clientX?SVGPoint.fromPoint(this._startPoint):new SVGPoint(this._clientX,this._clientY).matrixTransform(e)):"start"===this._position&&(this._startPoint=null===this._clientX?new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):new SVGPoint(this._clientX,this._clientY).matrixTransform(e),this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){var a=new _Vector13(this._startPoint,this._endPoint),r;"end"===this._position?r=new _Vector13(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(r=new _Vector13(this._endPoint,this._secondSegControlPoint)),r=r.negate(),"end"===this._position?(this._controlPoint1=new SVGPoint(this._startPoint.x+r.x,this._startPoint.y+r.y),this._controlPoint2=SVGPoint.fromPoint(this._endPoint)):"start"===this._position&&(this._controlPoint2=new SVGPoint(this._endPoint.x+r.x,this._endPoint.y+r.y),this._controlPoint1=SVGPoint.fromPoint(this._startPoint))}else if("polygon"===this._snap)this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){var o=_snapPointToAngleMultiple6(this._startPoint,this._endPoint,45),i=_slicedToArray(o,1),s=i[0];this._endPoint=s}else if("start"===this._position){var l=_snapPointToAngleMultiple6(this._endPoint,this._startPoint,45),d=_slicedToArray(l,1),u=d[0];this._startPoint=u}this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint)}}else if(!0===this._pointerDown){var c=this._path.getScreenCTM().inverse();if(this._textPath){var p=this._textPath.closest("text"),h=_getComputedTransform20(this._path);c=p.getScreenCTM().inverse().multiply(h)}var m=new SVGPoint(this._clientX,this._clientY);m=m.matrixTransform(c);var b=new _Vector13(this._pointerDownPoint,m).negate();"end"===this._position?this._controlPoint2=new SVGPoint(this._pointerDownControlPoint2.x+b.x,this._pointerDownControlPoint2.y+b.y):"start"===this._position&&(this._controlPoint1=new SVGPoint(this._pointerDownControlPoint1.x+b.x,this._pointerDownControlPoint1.y+b.y))}}},{key:"_updateSnapProperty",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift;this._snap=t&&a?"polygon":!t&&a?"paraxialPolygon":"none","end"===this._position?!this._lastSegIsSmooth&&"none"===this._snap&&(this._snap="polygon"):"start"===this._position&&!this._secondSegIsSmooth&&"none"===this._snap&&(this._snap="polygon")}},{key:"_updateOutlines",value:function(){var e=_getTransformToElement27(this._path,this);if(this._textPath){var t=this._textPath.closest("text"),n=_getTransformToElement27(t,this),a=_getComputedTransform20(this._path);e=n.multiply(a)}var r=this._startPoint.matrixTransform(e),o=this._endPoint.matrixTransform(e),i=this._controlPoint1.matrixTransform(e),s=this._controlPoint2.matrixTransform(e),l=3/this._ownerCanvas.scale,d=[{type:"M",values:[r.x,r.y]},{type:"C",values:[i.x,i.y,s.x,s.y,o.x,o.y]}];this["#outline"].setPathData(d),this["#control-point-1-grippie"].cx.baseVal.value=i.x,this["#control-point-1-grippie"].cy.baseVal.value=i.y,this["#control-point-1-grippie"].r.baseVal.value=l,this["#control-point-2-grippie"].cx.baseVal.value=s.x,this["#control-point-2-grippie"].cy.baseVal.value=s.y,this["#control-point-2-grippie"].r.baseVal.value=l,this["#control-line-1"].x1.baseVal.value=r.x,this["#control-line-1"].y1.baseVal.value=r.y,this["#control-line-1"].x2.baseVal.value=i.x,this["#control-line-1"].y2.baseVal.value=i.y,this["#control-line-2"].x1.baseVal.value=o.x,this["#control-line-2"].y1.baseVal.value=o.y,this["#control-line-2"].x2.baseVal.value=s.x,this["#control-line-2"].y2.baseVal.value=s.y}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"controlPoint1",get:function(){return this._controlPoint1}},{key:"controlPoint2",get:function(){return this._controlPoint2}},{key:"curved",get:function(){return!1===_comparePoints5(this.startPoint,this.controlPoint1)||!1===_comparePoints5(this.endPoint,this.controlPoint2)}}]),t}(SVGGElement);customElements.define("bx-cubicbezierseghud",BXCubicBezierSegHudElement,{extends:"g"})}}{{var _closest47=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet23=BoxySVG.utils.geometry,_getPointBetweenTwoPoints4=_BoxySVG$utils$geomet23.getPointBetweenTwoPoints,_getNearestPointOnLine7=_BoxySVG$utils$geomet23.getNearestPointOnLine,_snapPointToAngleMultiple7=_BoxySVG$utils$geomet23.snapPointToAngleMultiple,_BoxySVG$utils$transf18=BoxySVG.utils.transformGeneral,_getComputedTransform21=_BoxySVG$utils$transf18.getComputedTransform,_getTransformToElement28=_BoxySVG$utils$transf18.getTransformToElement,_Vector14=BoxySVG.classes.Vector,_shadowHTML30="\n    <style>:host{contain:size layout style paint}#control-line-1,#control-line-2{fill:none;stroke:red;stroke-width:1;vector-effect:non-scaling-stroke;pointer-events:none;opacity:.4}#control-point-grippie{fill:red;stroke:none;pointer-events:none;opacity:1}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <path id=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n\n    <line id=\"control-line-1\"></line>\n    <line id=\"control-line-2\"></line>\n\n    <circle id=\"control-point-grippie\"></circle>\n  ",BXQuadBezierSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML30;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest47(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest47(this,"bx-canvas")}},{key:"show",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"end",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._position=t,this._path=e,this._textPath=n,this._snap="none",this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines()}},{key:"hide",value:function(){this._path=null,this._clientX=null,this._clientY=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,this._pointerDown=!1,this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){!1===e._pointerDown&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines())}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("pointerdown",this._pointerDownListener=function(t){var n=e._path.getScreenCTM().inverse();if(e._textPath){var a=e._textPath.closest("text"),r=_getComputedTransform21(e._path);n=a.getScreenCTM().inverse().multiply(r)}if(e._pointerDown=!0,e._pointerDownPoint=new SVGPoint(t.clientX,t.clientY),e._pointerDownPoint=e._pointerDownPoint.matrixTransform(n),e._pointerDownControlPoint=SVGPoint.fromPoint(e._controlPoint),"end"===e._position){if("paraxialPolygon"===e._snap){var o=_snapPointToAngleMultiple7(e._startPoint,e._endPoint,45),i=_slicedToArray(o,1),s=i[0];e._endPoint=s}else e._endPoint=SVGPoint.fromPoint(e._pointerDownPoint);}else if("start"===e._position)if("paraxialPolygon"===e._snap){var l=_snapPointToAngleMultiple7(e._startPoint,e._endPoint,45),d=_slicedToArray(l,1),u=d[0];e._endPoint=u}else e._endPoint=new SVGPoint(e._firstSeg.values[0],e._firstSeg.values[1])}),window.addEventListener("pointermove",this._pointerMoveListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._pointerDown=!1,e._updateSnapProperty()})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("pointerdown",this._pointerDownListener),window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,(i.target===this._path||i.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateSegProperties",value:function(){if("end"===this._position){var e=this._path.getPathData({normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1,a;0<=n;n-=1)if(a=e[n],"Z"!==a.type){this._lastNonZSeg=a;break}this._lastSegControlPoint="C"===t.type?new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?new SVGPoint(t.values[0],t.values[1]):null,this._lastSegIsSmooth="C"===t.type&&(t.values[2]!==t.values[4]||t.values[3]!==t.values[5])}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),o=r[0],i=r[1];this._firstSeg=o,this._secondSegControlPoint="C"===i.type?new SVGPoint(i.values[0],i.values[1]):"M"===i.type||"L"===i.type?new SVGPoint(o.values[0],o.values[1]):null,this._secondSegIsSmooth="C"===i.type&&i.values[0]!==o.values[0]&&i.values[1]!==o.values[1]}}},{key:"_updatePointProperties",value:function(){if(!1===this._pointerDown){var e=this._path.getScreenCTM().inverse();if(this._textPath){var n=this._textPath.closest("text"),a=_getComputedTransform21(this._path);e=n.getScreenCTM().inverse().multiply(a)}if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),this._endPoint=null===this._clientX?SVGPoint.fromPoint(this._startPoint):new SVGPoint(this._clientX,this._clientY).matrixTransform(e)):"start"===this._position&&(this._startPoint=null===this._clientX?new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):new SVGPoint(this._clientX,this._clientY).matrixTransform(e),this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){var r=new _Vector14(this._startPoint,this._endPoint),o;"end"===this._position?o=new _Vector14(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(o=new _Vector14(this._endPoint,this._secondSegControlPoint)),o=o.negate().scale(r.length/2),"end"===this._position?this._controlPoint=new SVGPoint(this._startPoint.x+o.x,this._startPoint.y+o.y):"start"===this._position&&(this._controlPoint=new SVGPoint(this._endPoint.x+o.x,this._endPoint.y+o.y))}else if("polygon"===this._snap)this._controlPoint=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){var i=_snapPointToAngleMultiple7(this._startPoint,this._endPoint,45),s=_slicedToArray(i,1),l=s[0];this._endPoint=l}else if("start"===this._position){var d=_snapPointToAngleMultiple7(this._endPoint,this._startPoint,45),u=_slicedToArray(d,1),c=u[0];this._startPoint=c}this._controlPoint=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint)}}else if(!0===this._pointerDown){var p=this._path.getScreenCTM().inverse();if(this._textPath){var h=this._textPath.closest("text"),m=_getComputedTransform21(this._path);p=h.getScreenCTM().inverse().multiply(m)}var b=new SVGPoint(this._clientX,this._clientY);b=b.matrixTransform(p);var x=new _Vector14(this._pointerDownPoint,b).negate();if(this._controlPoint=new SVGPoint(this._pointerDownControlPoint.x+x.x,this._pointerDownControlPoint.y+x.y),"none"===this._snap)if("end"===this._position){var g=_getNearestPointOnLine7(this._lastSegControlPoint,this._startPoint,this._controlPoint,!0),v=_slicedToArray(g,2),y=v[0],f=v[1];this._controlPoint=1>f?SVGPoint.fromPoint(this._startPoint):y}else if("start"===this._position){var t=_getNearestPointOnLine7(this._secondSegControlPoint,this._endPoint,this._controlPoint,!0),_=_slicedToArray(t,2),w=_[0],k=_[1];this._controlPoint=1>k?SVGPoint.fromPoint(this._endPoint):w}}}},{key:"_updateSnapProperty",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift;this._snap=t&&a?"polygon":!t&&a?"paraxialPolygon":"none","end"===this._position?!this._lastSegIsSmooth&&"none"===this._snap&&(this._snap="polygon"):"start"===this._position&&!this._secondSegIsSmooth&&"none"===this._snap&&(this._snap="polygon")}},{key:"_updateOutlines",value:function(){var e=_getTransformToElement28(this._path,this);if(this._textPath){var t=this._textPath.closest("text"),n=_getTransformToElement28(t,this),a=_getComputedTransform21(this._path);e=n.multiply(a)}var r=this._startPoint.matrixTransform(e),o=this._endPoint.matrixTransform(e),i=this._controlPoint.matrixTransform(e),s=3/this._ownerCanvas.scale,l=[{type:"M",values:[r.x,r.y]},{type:"Q",values:[i.x,i.y,o.x,o.y]}];this["#outline"].setPathData(l),this["#control-point-grippie"].cx.baseVal.value=i.x,this["#control-point-grippie"].cy.baseVal.value=i.y,this["#control-point-grippie"].r.baseVal.value=s,this["#control-line-1"].x1.baseVal.value=r.x,this["#control-line-1"].y1.baseVal.value=r.y,this["#control-line-1"].x2.baseVal.value=i.x,this["#control-line-1"].y2.baseVal.value=i.y,this["#control-line-2"].x1.baseVal.value=o.x,this["#control-line-2"].y1.baseVal.value=o.y,this["#control-line-2"].x2.baseVal.value=i.x,this["#control-line-2"].y2.baseVal.value=i.y}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"controlPoint",get:function(){return this._controlPoint}},{key:"curved",get:function(){var e=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint);return this._controlPoint.x!==e.x||this._controlPoint.y!==e.y}}]),t}(SVGGElement);customElements.define("bx-quadbezierseghud",BXQuadBezierSegHudElement,{extends:"g"})}}{{var _closest48=BoxySVG.utils.element.closest,_snapPointToAngleMultiple8=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement29=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector15=BoxySVG.classes.Vector,_shadowHTML31="\n    <style>:host{contain:strict}#outline-1,#outline-2{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}#outline-1{opacity:.1}</style>\n    <polygon id=\"outline-1\" class=\"outline\" points=\"0 0 0 0\"></polygon>\n    <polygon id=\"outline-2\" class=\"outline\" points=\"0 0 0 0\"></polygon>\n  ",BXPolygonSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._polygon=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML31;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest48(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest48(this,"bx-canvas")}},{key:"show",value:function(e){this._polygon=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._polygon=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var o=t.detail[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,(s.target===e._polygon||s.target.contains(e._polygon))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){if(0===this._polygon.points.length)this["#outline-1"].removeAttribute("points"),this["#outline-2"].removeAttribute("points");else{var e=_getTransformToElement29(this._polygon,this),t=this._polygon.getScreenCTM().inverse(),n=this._polygon.points[0].matrixTransform(e),a=this._polygon.points[this._polygon.points.length-1].matrixTransform(e),r=this._ownerApp.pointerClientPoint.matrixTransform(t);if(this._ownerApp.modKeys.shift){var o=_snapPointToAngleMultiple8(a,r,22.5),i=_slicedToArray(o,1),s=i[0];r=s}this["#outline-1"].points[0]=n,this["#outline-1"].points[1]=r,this["#outline-2"].points[0]=a,this["#outline-2"].points[1]=r}}},{key:"startPoint",get:function(){return SVGPoint.fromPoint(this["#outline-1"].points[0])}},{key:"endPoint",get:function(){return SVGPoint.fromPoint(this["#outline-2"].points[1])}}]),t}(SVGGElement);customElements.define("bx-polygonseghud",BXPolygonSegHudElement,{extends:"g"})}}{{var _closest49=BoxySVG.utils.element.closest,_snapPointToAngleMultiple9=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement30=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector16=BoxySVG.classes.Vector,_shadowHTML32="\n    <style>:host{contain:strict}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <polyline id=\"outline\" class=\"outline\" points=\"0 0 0 0\"></polyline>\n  ",BXPolylineSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._polyline=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML32;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest49(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest49(this,"bx-canvas")}},{key:"show",value:function(e){this._polyline=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._polyline=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var o=t.detail[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,(s.target===e._polyline||s.target.contains(e._polyline))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){if(0===this._polyline.points.length)this["#outline"].removeAttribute("points");else{var e=_getTransformToElement30(this._polyline,this),t=this.getScreenCTM().inverse(),n=this._polyline.points[this._polyline.points.length-1].matrixTransform(e),a=this._ownerApp.pointerClientPoint.matrixTransform(t);if(this._ownerApp.modKeys.shift){var r=_snapPointToAngleMultiple9(n,a,22.5),o=_slicedToArray(r,1),i=o[0];a=i}this["#outline"].points[0]=n,this["#outline"].points[1]=a}}},{key:"startPoint",get:function(){return SVGPoint.fromPoint(this["#outline"].points[0])}},{key:"endPoint",get:function(){return SVGPoint.fromPoint(this["#outline"].points[1])}}]),t}(SVGGElement);customElements.define("bx-polylineseghud",BXPolylineSegHudElement,{extends:"g"})}}{{var _getTransformToElement31=BoxySVG.utils.transformGeneral.getTransformToElement,_shadowHTML33="\n    <style>:host{contain:size layout style paint}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <polyline id=\"outline\"></polyline>\n  ",BXFreehandHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML33;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"show",value:function(e,t){var n=this;this._path&&this._hide(),this._path=e,this["#outline"].setAttribute("points",""),this._path.hasAttribute("transform")?this["#outline"].setAttribute("transform",this._path.getAttribute("transform")):this["#outline"].removeAttribute("transform"),this.style.visibility="visible",t&&this["#outline"].points.appendItem(t.matrixTransform(this._path.getScreenCTM().inverse())),window.addEventListener("pointermove",this._pointerMoveListener=function(e){var t=!0,a=!1,r;try{for(var o=e.getCoalescedEvents()[Symbol.iterator](),i;!(t=(i=o.next()).done);t=!0){var s=i.value,l=n._path.getScreenCTM().inverse(),d=new SVGPoint(s.clientX,s.clientY),u=d.matrixTransform(l);n["#outline"].points.appendItem(u)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}})}},{key:"hide",value:function(){this._path=null,this.style.visibility="hidden",this["#outline"].setAttribute("points",""),window.removeEventListener("pointermove",this._pointerMoveListener)}},{key:"clear",value:function(){this["#outline"].setAttribute("points","")}},{key:"points",get:function(){return this["#outline"].points}}]),t}(SVGGElement);customElements.define("bx-freehandhud",BXFreehandHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen34=BoxySVG.utils.element,_closest50=_BoxySVG$utils$elemen34.closest,_svg6=_BoxySVG$utils$elemen34.svg,_BoxySVG$utils$geomet24=BoxySVG.utils.geometry,_getRotationAngleFromPoints6=_BoxySVG$utils$geomet24.getRotationAngleFromPoints,_snapRotationAngle4=_BoxySVG$utils$geomet24.snapRotationAngle,_lineIntersectsRect=_BoxySVG$utils$geomet24.lineIntersectsRect,_round35=BoxySVG.utils.math.round,_throttle31=BoxySVG.utils.time.throttle,$guide=Symbol(),inf=99999,_grippieSize7=4,allowRotation=!1,_shadowHTML34="\n    <style>:host{display:none;contain:size layout style paint;outline:0}:host([enabled]){display:initial}.repr{color:red;pointer-events:none}.repr[data-snapping=true]{color:#00f}.repr .outer-line{fill:none;stroke:currentColor;stroke-width:10;vector-effect:non-scaling-stroke;opacity:0}:host(:focus) .repr[data-selected] .outer-line{opacity:.1;pointer-events:all}.repr .grippie,.repr .inner-line{fill:none;stroke:currentColor;stroke-width:1;vector-effect:non-scaling-stroke}.repr .grippie{stroke-width:1px;fill:#fff;pointer-events:all}.repr[data-selected] .grippie{fill:currentColor}</style>\n    <g id=\"reprs\"></g>\n  ",BXManualGuidesHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.tabIndex=0,this._targets=[],this._isDragging=!1,this._updateTh500=_throttle31(this._update,500,this),this._updateSnappingStateTh200=_throttle31(this._updateSnappingState,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML34;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,this["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this.addEventListener("keydown",function(t){return e._onKeyDown(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest50(this,"bx-electronApp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest50(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"requestImmidiateUpdate",value:function(){this._update()}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateTh500()}),this._ownerCanvas.addEventListener("artworkchange",this._artworkChangeListener=function(){e._updateTh500()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._updateGrippiesSize()}),this._ownerCanvas.addEventListener("selectedguideschange",this._selectedGuidesChangeListener=function(){e._updateSelectedState()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardsPointerDownListener=function(t){e._onArtboardsPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.rulers.addEventListener("pointerdown",this._rulersPointerDownListener=function(t){e._onRulersPointerDown(t)}),this._ownerCanvas.snapManager.addEventListener("snapperschange",this._snappersChangeListener=function(){e._updateSnappingStateTh200()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("artworkchange",this._artworkChangeListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("selectedguideschange",this._selectedGuidesChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardsPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._ownerCanvas.rulers.removeEventListener("pointerdown",this._rulersPointerDownListener),this._ownerCanvas.snapManager.removeEventListener("snapperschange",this._snappersChangeListener)}},{key:"_onShadowRootPointerDown",value:function(e){var t=this,n=e.target.closest("g.repr"),a=n[$guide],r=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),o=new SVGPoint(e.clientX,e.clientY),i=o.matrixTransform(r),s="translate",l=this._ownerCanvas.geometryPrecision,d,u;this._isDragging=!0,n.setAttribute("data-dragging",""),event.target.closest(".grippie")&&(this._ownerCanvas.selectedGuides=[a]);var c=parseFloat(a.getAttribute("x")),p=parseFloat(a.getAttribute("y")),h=parseFloat(a.getAttribute("angle")),m=c,b=p,x=h;this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(r),o=a.x-i.x,s=a.y-i.y;m=c+o,b=p+s,n.setAttribute("transform","translate("+m+" "+b+") rotate("+h+")")}),this.addEventListener("lostpointercapture",u=function(e){t.removeEventListener("pointermove",d),t.removeEventListener("lostpointercapture",u),t._isDragging=!1,n.removeAttribute("data-dragging");var r=n.querySelector(".inner-line"),o=r.getScreenCTM(),i=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value).matrixTransform(o),s=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value).matrixTransform(o),g=t._ownerCanvas.getBoundingClientRect(!0),v=_lineIntersectsRect(i,s,g);v&&t._ownerCanvas.isPointOverCanvas(e.clientX,e.clientY)?(m=_round35(m,l),b=_round35(b,l),x=_round35(x,l),(m!==c||b!==p||x!==h)&&(t._ownerCanvas.undoManager.checkpoint("Move guide"),a.setAttribute("x",m),a.setAttribute("y",b),a.setAttribute("angle",x))):(t._ownerCanvas.undoManager.checkpoint("Remove guide"),t._ownerCanvas.selectedGuides=t._ownerCanvas.selectedGuides.filter(function(e){return e!==a}),a.remove())})}},{key:"_onArtboardsPointerDown",value:function(){this._unselectAll()}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&this._unselectAll()}},{key:"_onKeyDown",value:function(e){if("Backspace"===e.key&&0<this._ownerCanvas.selectedGuides.length){e.preventDefault(),e.stopPropagation(),this._ownerCanvas.undoManager.checkpoint("Delete guide");var t=!0,n=!1,a;try{for(var r=this._ownerCanvas.selectedGuides[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,i.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._ownerCanvas.selectedGuides=[],this._update()}}},{key:"_onRulersPointerDown",value:function(e){var t=this._ownerCanvas,n=t.rulers.getRulerTypeFromPoint(e.x,e.y),a=this._ownerCanvas.geometryPrecision,r=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),o=0,i=0,s=0,l,d;"vertical"===n?o=0:"horizontal"===n?o=90:"corner"===n&&(o=45),t.selectedGuides=[];var u=_svg6(_templateObject38,i,s,o,-inf,inf,-inf,inf,_grippieSize7/t.scale);this["#reprs"].append(u),window.addEventListener("pointermove",l=function(e){var t=new SVGPoint(e.clientX,e.clientY),n=t.matrixTransform(r);i=n.x,s=n.y,u.setAttribute("transform","translate("+i+" "+s+") rotate("+o+")")}),window.addEventListener("pointerup",d=function(e){window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d);var n=u.querySelector(".inner-line"),c=n.getScreenCTM(),p=new SVGPoint(n.x1.baseVal.value,n.y1.baseVal.value).matrixTransform(c),h=new SVGPoint(n.x2.baseVal.value,n.y2.baseVal.value).matrixTransform(c),m=t.getBoundingClientRect(!0),b=_lineIntersectsRect(p,h,m);if(u.remove(),b&&t.isPointOverCanvas(e.clientX,e.clientY)){var x=new SVGPoint(e.clientX,e.clientY),g=x.matrixTransform(r);i=_round35(g.x,a),s=_round35(g.y,a);var v=_svg6(_templateObject39,i,s,o);t.selectedGuides=[v],t.undoManager.checkpoint("Add guide"),t.currentArtboard===t.masterArtboard?(t.createDefsIfMissing(),t.defs.append(v)):t.currentArtboard.append(v)}})}},{key:"_unselectAll",value:function(){0<this._ownerCanvas.selectedGuides.length&&(this._ownerCanvas.selectedGuides=[])}},{key:"_update",value:function(){if(!this._isDragging){var e=this._ownerCanvas.currentArtboard.querySelectorAll("bx-guide"),t=!1;if(e.length!==this["#reprs"].childElementCount)t=!0;else for(var n=0;n<e.length;n+=1){var a=e[n],r=this["#reprs"].children[n],o=r.transform.baseVal[0].matrix.e,i=r.transform.baseVal[0].matrix.f,s=r.transform.baseVal[1].angle;if(parseFloat(a.getAttribute("x"))!==o||parseFloat(a.getAttribute("y"))!==i||parseFloat(a.getAttribute("angle"))!==s){t=!0;break}}if(t){var l="",d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var m=h.value,b=parseFloat(m.getAttribute("x")),x=parseFloat(m.getAttribute("y")),g=parseFloat(m.getAttribute("angle")),v=this._ownerCanvas.snapManager.isGuideSnapping(m);l+="\n            <g class=\"repr\" transform=\"translate("+b+", "+x+") rotate("+g+")\" data-snapping=\""+v+"\">\n              <line class=\"outer-line\" x1=\"0\" y1=\""+-inf+"\" x2=\"0\" y2=\""+inf+"\"></line>\n              <line class=\"inner-line\" x1=\"0\" y1=\""+-inf+"\" x2=\"0\" y2=\""+inf+"\"></line>\n              <circle class=\"grippie\" cx=\"0\" cy=\"0\"></rect>\n            </g>\n          "}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}this["#reprs"].innerHTML=l;for(var y=0;y<e.length;y+=1)this["#reprs"].children[y][$guide]=e[y]}this._updateGrippiesSize(),this._updateSelectedState()}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].querySelectorAll(".grippie")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.setAttribute("r",_grippieSize7/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._ownerCanvas.selectedGuides.includes(o[$guide])?o.setAttribute("data-selected",""):o.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateSnappingState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var o=r.value,i=this._ownerCanvas.snapManager.isGuideSnapping(o[$guide]);o.setAttribute("data-snapping",i)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-manualguideshud",BXManualGuidesHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen35=BoxySVG.utils.element,_closest51=_BoxySVG$utils$elemen35.closest,_svg7=_BoxySVG$utils$elemen35.svg,_throttle32=BoxySVG.utils.time.throttle,_min8=Math.min,_max9=Math.max,_shadowHTML35="\n    <style>:host{display:none;contain:size layout style paint;pointer-events:none}:host([enabled]){display:initial}.repr{pointer-events:none;fill:none;stroke:#00f;stroke-width:1;vector-effect:non-scaling-stroke;opacity:.6}</style>\n    <g id=\"reprs\"></g>\n  ",BXSmartGuidesHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._updateTh500=_throttle32(this._update,100,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML35;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this["#"+o.id]=o}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest51(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._ownerCanvas.snapManager.addEventListener("snapperschange",this._snappersChangeListener=function(){e._updateTh500()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.snapManager.removeEventListener("snapperschange",this._snappersChangeListener)}},{key:"_update",value:function(){var e=this._ownerCanvas.snapManager.snappers.filter(function(e){return"smart"===e.type&&e.snapping}),t=this._ownerCanvas.currentArtboard.getScreenCTM().inverse();this["#reprs"].innerHTML="";var n=!0,a=!1,r;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=!0){var s=i.value,l=void 0,d=void 0;"vertical"===s.orientation?s.snappedBBox?(l=new SVGPoint(s.x,_min8(s.snappingBBox.y,s.snappedBBox.y)),d=new SVGPoint(s.x,_max9(s.snappingBBox.bottom,s.snappedBBox.bottom))):s.snappedPoint&&(l=new SVGPoint(s.x,_min8(s.snappingBBox.y,s.snappedPoint.y)),d=new SVGPoint(s.x,_max9(s.snappingBBox.bottom,s.snappedPoint.y))):"horizontal"===s.orientation&&(s.snappedBBox?(l=new SVGPoint(_min8(s.snappingBBox.x,s.snappedBBox.x),s.y),d=new SVGPoint(_max9(s.snappingBBox.right,s.snappedBBox.right),s.y)):s.snappedPoint&&(l=new SVGPoint(_min8(s.snappingBBox.x,s.snappedPoint.x),s.y),d=new SVGPoint(_max9(s.snappingBBox.right,s.snappedPoint.x),s.y)));var u=l.matrixTransform(t),c=u.x,p=u.y,h=d.matrixTransform(t),m=h.x,b=h.y,x=_svg7(_templateObject40,c,p,m,b);this["#reprs"].append(x)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-smartguideshud",BXSmartGuidesHudElement,{extends:"g"})}{{var _Vector17=BoxySVG.classes.Vector,_getClientBBox9=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen36=BoxySVG.utils.element,_getCommonAncestor2=_BoxySVG$utils$elemen36.getCommonAncestor,_closest52=_BoxySVG$utils$elemen36.closest,_isPointerMoveIntentional10=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet25=BoxySVG.utils.geometry,_combineRects12=_BoxySVG$utils$geomet25.combineRects,_compareRects=_BoxySVG$utils$geomet25.compareRects,_rectContainsRect3=_BoxySVG$utils$geomet25.rectContainsRect,_rectIntersectsRect4=_BoxySVG$utils$geomet25.rectIntersectsRect,_transformRect12=_BoxySVG$utils$geomet25.transformRect,_getComputedTransform22=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform10=BoxySVG.utils.transformReduction.reduceTransform,_graphicsElementNames4=BoxySVG.utils.variables.graphicsElementNames,_abs13=Math.abs,_$initialTransforms=Symbol(),BXTransformSelectContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._intentionalDragStarted=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest52(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest52(this,"bx-editor"),this._ownerCanvas=_closest52(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas.artboards;t.addEventListener("contextmenu",this._contextMenuListener=function(t){e._onArtboardContextMenu(t)}),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas.artboards;e.removeEventListener("contextmenu",this._contextMenuListener),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onArtboardContextMenu",value:function(e){var t=this._ownerCanvas.getHitArtboardElements(e.clientX,e.clientY);if(0<t.length){var n=t[t.length-1],a=this._getAllContainers(n),r=this._ownerCanvas.selectedElements.includes(n),o=!0,i=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(o=(d=l.next()).done);o=!0)u=d.value,this._ownerCanvas.selectedElements.includes(u)&&(r=!0)}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}!1===r&&this._onArtboardClickSelectableElementHit(n)}else this._onArtboardClickBackgroundHit(e)}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;this._intentionalDragStarted=!1,window.addEventListener("pointermove",a=function(n){if(!1!==_isPointerMoveIntentional10(e,n)){window.removeEventListener("pointermove",a),t._intentionalDragStarted=!0;var r=new _Vector17(n.clientX-e.clientX,n.clientY-e.clientY),o=_abs13(r.x)>_abs13(r.y)?"horizontal":"vertical";t._onIntentionalDragStart(e,n,o)}}),window.addEventListener("pointerup",r=function(o){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r),e.clientX===o.clientX&&e.clientY===o.clientY&&t._onArtboardClick(n,o)})}}},{key:"_onIntentionalDragStart",value:function(e,t,n){if(!this._ownerCanvas.huds.contains(e.target)){var a=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);0<a.length?this._onArtboardElementDragStart(t,a[a.length-1],n):this._onEmptySpaceDragStart(e)}}},{key:"_onArtboardElementDragStart",value:function(e,t,n){var a=this,r=this._getAllContainers(t),o=!1,i=this._ownerEditor.canvas,s,l;i.undoManager.checkpoint("Transform"),i.outermostSelectedElements.includes(t)&&(o=!0);var d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),h,m;!(d=(h=p.next()).done);d=!0)m=h.value,i.outermostSelectedElements.includes(m)&&(o=!0)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(!o)if(i.transformHud.mode="scale",0===r.length)i.currentContainer=null,i.selectedElements=[t];else{for(var b=this._getCommonContainer(t,i.currentContainer);t.parentNode!==b&&t.parentNode!==i.currentArtboard;)t=t.parentNode;i.currentContainer=b,i.selectedElements=[t]}var x=!0,g=!1,v;try{for(var y=i.outermostSelectedElements[Symbol.iterator](),f;!(x=(f=y.next()).done);x=!0){var _=f.value,w=_.getScreenCTM(),k=w.inverse(),A=_getComputedTransform22(_),C=A.multiplySelf(k);_[_$initialTransforms]={clientToUserTransform:w,initialClientTransform:C}}}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}this.style.cursor="move",this.setPointerCapture(e.pointerId),i.snapManager.snapStart(),this.addEventListener("pointermove",s=function(t){var r=t.clientX-e.clientX,o=t.clientY-e.clientY;a._ownerApp.modKeys.shift&&("vertical"===n?r=0:"horizontal"===n&&(o=0));var s=!0,l=!1,d;try{for(var u=i.outermostSelectedElements[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,h=p[_$initialTransforms],m=h.clientToUserTransform,b=h.initialClientTransform,x=SVGMatrix.fromMatrix(b);x.translateSelf(r,o),x.multiplySelf(m),p.setAttribute("transform",x.toString())}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}if(i.showManualGuides||i.showSmartGuides){var g=i.outermostSelectedElements.map(function(e){return _getClientBBox9(e)}),v=_combineRects12(g),y=i.snapManager.snapBBox(v);if(!1===_compareRects(v,y)){var f=!0,_=!1,w;try{for(var k=i.outermostSelectedElements[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,S=C[_$initialTransforms],m=S.clientToUserTransform,b=S.initialClientTransform,E=y.x-v.x,T=y.y-v.y,P=SVGMatrix.fromMatrix(b);P.translateSelf(r+E,o+T),P.multiplySelf(m),C.setAttribute("transform",P.toString())}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}),this.addEventListener("lostpointercapture",l=function(){a.removeEventListener("pointermove",s),a.removeEventListener("lostpointercapture",l),a.style.cursor=null,i.snapManager.snapEnd();var e=!0,t=!1,n;try{for(var r=i.selectedElements[Symbol.iterator](),o,d;!(e=(o=r.next()).done);e=!0)d=o.value,_reduceTransform10(d,{geometryPrecision:i.geometryPrecision,transformPrecision:i.transformPrecision})}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}})}},{key:"_onEmptySpaceDragStart",value:async function(e){var t=e.clientX,n=e.clientY,a=this._ownerApp.getConfig("bx-transformtoolsettings:selectionMode")||"rect-contain",r=await this._ownerCanvas.rubberBandHud.grabSelection(t,n),o=this._ownerCanvas.currentContainer||this._ownerCanvas.currentArtboard,i=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),s=[],l=!0,d=!1,u;try{for(var c=o.children[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)if(h=p.value,[].concat(_toConsumableArray(_graphicsElementNames4),["svg","g","a","use"]).includes(h.localName)){var m=_transformRect12(_getClientBBox9(h),i),b=0===m.width&&0===m.height;!1==b&&("rect-contain"===a?_rectContainsRect3(r,m)&&s.push(h):"rect-intersect"===a&&_rectIntersectsRect4(r,m)&&s.push(h))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.selectedElements=[].concat(s)}},{key:"_onArtboardClick",value:function(e,t){if(!(0!==t.button||this._ownerCanvas.huds.contains(e)||this._intentionalDragStarted)){var n=this._ownerCanvas["#transform-hud"],a=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);if(0<a.length){var r=a[a.length-1];if(1==this._ownerApp.pointerClickCount%2)this._ownerCanvas.isSelectableElement(r)&&this._onArtboardClickSelectableElementHit(r);else if(0==this._ownerApp.pointerClickCount%2){var o=this._getClosestContainer(r);if(o)this._ownerCanvas.currentContainer=o,this._ownerCanvas.selectedElements=[];else if("use"===r.localName){var i=this._ownerCanvas.artboards.querySelector(r.href.baseVal);if(i&&"symbol"===i.localName){this._ownerCanvas.editSymbol(i.id)}else n.mode="scale",this._ownerEditor.toggleTool("edit-tool")}else"text"===r.localName?(n.mode="scale",this._ownerEditor.toggleTool("text-tool")):(n.mode="scale",this._ownerEditor.toggleTool("edit-tool"))}}else this._onArtboardClickBackgroundHit(t)}}},{key:"_onArtboardClickSelectableElementHit",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.alt,r=t.shift,o=this._getAllContainers(e),i=this._ownerEditor.canvas,s=i.selectedElements.includes(e),l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,i.selectedElements.includes(h)&&(s=!0)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(!n&&!r){if(s)i.transformHud.mode="scale"===i.transformHud.mode?"rotate-and-skew":"scale";else if(i.transformHud.mode="scale",0===o.length)i.currentContainer=null,i.selectedElements=[e];else{var m=i.currentContainer;if(m&&m.contains(e)){for(;e.parentNode!==m;)e=e.parentNode;i.selectedElements=[e]}else{for(var b=this._getCommonContainer(e,m);e.parentNode!==b&&e.parentNode!==i.currentArtboard;)e=e.parentNode;i.currentContainer=b,i.selectedElements=[e]}}}else if(!n&&r){if(0===o.length)i.currentContainer=null,i.selectedElements=i.selectedElements.includes(e)?i.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(i.selectedElements),[e]);else if(i.currentContainer&&i.currentContainer.contains(e)){for(;e.parentNode!==i.currentContainer;)e=e.parentNode;i.selectedElements=i.selectedElements.includes(e)?i.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(i.selectedElements),[e])}else{for(var x=this._getCommonContainer(e,i.currentContainer);e.parentNode!==x&&e.parentNode!==i.currentArtboard;)e=e.parentNode;i.currentContainer=x,i.selectedElements=i.selectedElements.includes(e)?i.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(i.selectedElements),[e])}}else if(n&&!r){for(var g=null,v=e.parentElement;v!==i.currentArtboard;v=v.parentElement)if("g"===v.localName||"a"===v.localName){g=v;break}i.currentContainer=g,i.selectedElements=[e]}else if(n&&r){var y=i.currentContainer,f=i.selectedElements;if(f=f.includes(e)?f.filter(function(t){return t!==e}):[].concat(_toConsumableArray(f),[e]),0===f.length)y=null;else for(var _=f[0].parentElement;_!==i.currentArtboard;_=_.parentElement)if("g"===_.localName||"a"===_.localName){y=_;break}i.currentContainer=y,i.selectedElements=f}}},{key:"_onArtboardClickBackgroundHit",value:function(e){if(0===e.button){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;n||a||(2===this._ownerApp.pointerClickCount&&(this._ownerCanvas.currentContainer=null),this._ownerCanvas.selectedElements=[])}}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"_getClosestContainer",value:function(e){for(var t=[],n=e.parentElement;n!==this._ownerCanvas.currentArtboard&&n!==this._ownerCanvas.currentContainer;n=n.parentElement)("g"===n.localName||"a"===n.localName)&&t.push(n);var a=0<t.length?t[t.length-1]:null;return a}},{key:"_getCommonContainer",value:function(e,t){var n=_getCommonAncestor2(e,t);if(n)for(;!1===["g","a"].includes(n.localName);)n=n.parentNode;return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-transformselectcontext",BXTransformSelectContextElement)}}{var _closest53=BoxySVG.utils.element.closest,_isPointerMoveIntentional11=BoxySVG.utils.event.isPointerMoveIntentional,_Vector18=BoxySVG.classes.Vector,_BoxySVG$utils$geomet26=BoxySVG.utils.geometry,_combineRects13=_BoxySVG$utils$geomet26.combineRects,_compareRects2=_BoxySVG$utils$geomet26.compareRects,_getComputedTransform23=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform11=BoxySVG.utils.transformReduction.reduceTransform,_abs14=Math.abs,_$initialTransforms2=Symbol(),BXDirectSelectContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerApp=_closest53(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest53(this,"bx-canvas")}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas.artboards;t.addEventListener("contextmenu",this._contextMenuListener=function(t){e._onArtboardContextMenu(t)}),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas.artboards;e.removeEventListener("contextmenu",this._contextMenuListener),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onArtboardContextMenu",value:function(){}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;this._intentionalDragStarted=!1,window.addEventListener("pointermove",a=function(n){if(!1!==_isPointerMoveIntentional11(e,n)){window.removeEventListener("pointermove",a),t._intentionalDragStarted=!0;var r=new _Vector18(n.clientX-e.clientX,n.clientY-e.clientY),o=_abs14(r.x)>_abs14(r.y)?"horizontal":"vertical";t._onArtboardIntentionalDragStart(e,n,o)}}),window.addEventListener("pointerup",r=function(o){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r),e.clientX===o.clientX&&e.clientY===o.clientY&&t._onArtboardClick(n,o)})}}},{key:"_onArtboardClick",value:function(e,t){if(!(0!==t.button||this._ownerCanvas.huds.contains(e)||this._intentionalDragStarted)){var n=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);if(0<n.length){var a=n[n.length-1];this._ownerCanvas.isSelectableElement(a)&&this._onArtboardClickSelectableElementHit(a)}else this._onArtboardClickBackgroundHit(t)}}},{key:"_onArtboardClickSelectableElementHit",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.alt,r=t.shift,o=this._getAllContainers(e),i=this._ownerCanvas,s=i.selectedElements.includes(e),l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,i.selectedElements.includes(h)&&(s=!0)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(!1===r){for(var m=null,b=e.parentElement;b!==i.currentArtboard;b=b.parentElement)if("g"===b.localName||"a"===b.localName){m=b;break}i.currentContainer=m,i.selectedElements=[e]}else if(!0===r){var x=i.currentContainer,g=i.selectedElements;if(g=g.includes(e)?g.filter(function(t){return t!==e}):[].concat(_toConsumableArray(g),[e]),0===g.length)x=null;else for(var v=g[0].parentElement;v!==i.currentArtboard;v=v.parentElement)if("g"===v.localName||"a"===v.localName){x=v;break}i.currentContainer=x,i.selectedElements=g}}},{key:"_onArtboardClickBackgroundHit",value:function(e){if(0===e.button){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;n||a||(this._ownerCanvas.currentContainer=null,this._ownerCanvas.selectedElements=[])}}},{key:"_onArtboardIntentionalDragStart",value:async function(e){var t=e.clientX,n=e.clientY,a=this._ownerApp.getConfig("bx-transformtoolsettings:selectionMode")||"rect-contain",r=await this._ownerCanvas.rubberBandHud.grabSelection(t,n);this._ownerCanvas.pathHud.rubberBandSelectionCallback(r)}},{key:"_onEmptySpaceDragStart",value:function(){}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-directselectcontext",BXDirectSelectContextElement)}{{var _BoxySVG$utils$elemen37=BoxySVG.utils.element,_createElement28=_BoxySVG$utils$elemen37.createElement,_closest54=_BoxySVG$utils$elemen37.closest,_isPointerMoveIntentional12=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet27=BoxySVG.utils.geometry,_getDistanceBetweenPoints7=_BoxySVG$utils$geomet27.getDistanceBetweenPoints,_getRotationAngleFromPoints7=_BoxySVG$utils$geomet27.getRotationAngleFromPoints,_snapRotationAngle5=_BoxySVG$utils$geomet27.snapRotationAngle,_BoxySVG$utils$math11=BoxySVG.utils.math,_normalize14=_BoxySVG$utils$math11.normalize,_round36=_BoxySVG$utils$math11.round,_BoxySVG$utils$pathSh7=BoxySVG.utils.pathShapes,_setShapeData7=_BoxySVG$utils$pathSh7.setShapeData,_getNGonShapeVertexPoint2=_BoxySVG$utils$pathSh7.getNGonShapeVertexPoint,_getComputedTransform24=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform12=BoxySVG.utils.transformReduction.reduceTransform,_abs15=Math.abs,_min9=Math.min,_BoxySVG$classes6=BoxySVG.classes,_Shortcut13=_BoxySVG$classes6.Shortcut,_Vector19=_BoxySVG$classes6.Vector,BXShapeContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest54(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerEditor=_closest54(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"shape"===e&&this._onShapeChange())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",this.dispatchEvent(new CustomEvent("_enabledchange")),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this.dispatchEvent(new CustomEvent("_enabledchange")),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onShapeChange",value:function(){this.dispatchEvent(new CustomEvent("_shapechange"))}},{key:"_onPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(o){_isPointerMoveIntentional12(e,o)&&(n.removeEventListener("pointermove",a),n.removeEventListener("lostpointercapture",r),"rect"===t.shape?t._onRectShapeDrawStart(e):"ellipse"===t.shape?t._onEllipseShapeDrawStart(e):"triangle"===t.shape?t._onTriangleShapeDrawStart(e):"n-gon"===t.shape?t._onNGonShapeDrawStart(e):"star"===t.shape?t._onStarShapeDrawStart(e):"ring"===t.shape&&t._onRingShapeDrawStart(e))}),n.addEventListener("lostpointercapture",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("lostpointercapture",r)})}},{key:"_onRectShapeDrawStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=n.geometryPrecision,o=n.transformPrecision,i=this._ownerApp.getConfig("bx-shapetoolsettings#rect-tool-settings:drawingMode")||"planar",s=0,l=0,d=0,u=0,c;n.undoManager.checkpoint("Draw Shape"),n.snapManager.snapStart(!1),n.setPointerCapture(e.pointerId);var p=new SVGPoint(e.clientX,e.clientY);p=n.snapManager.snapPoint(p);var h=_createElement28("svg:rect");h.style.setProperty("fill","#d8d8d8"),a.append(h),n.selectedElements=[h];var m=h.getScreenCTM().inverse(),b=_getComputedTransform24(h).multiply(m);h.setAttribute("transform",b.toString()),this._ownerApp.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),n.addEventListener("pointermove",c=function(e){var a=new SVGPoint(e.clientX,e.clientY);if("planar"===i){a=n.snapManager.snapPoint(a);var o=a.x-p.x||1,c=a.y-p.y||1;if(s=_abs15(o),l=_abs15(c),t._ownerApp.modKeys.shift){var m=_min9(s,l);s=m,l=m}d=0>o?p.x-s:p.x,u=0>c?p.y-l:p.y}else if("polar"===i){var x=new SVGPoint(p.x,p.y),g=new SVGPoint(a.x,a.y),v=_getDistanceBetweenPoints7(x,g),r=new SVGPoint(x.x,x.y-v),y=r.matrixTransform(new SVGMatrix().rotate(-45,x.x,x.y)),f=r.matrixTransform(new SVGMatrix().rotate(45,x.x,x.y)),_=r.matrixTransform(new SVGMatrix().rotate(135,x.x,x.y)),w=_getDistanceBetweenPoints7(y,f);d=p.x-w/2,u=p.y-w/2,s=w,l=w;var k=_getRotationAngleFromPoints7(x,_,g);t._ownerApp.modKeys.shift&&(k=_snapRotationAngle5(k,45));var A=new SVGMatrix().rotate(k,x.x,x.y);h.setAttribute("transform",b.multiply(A).toString())}h.setAttribute("x",d),h.setAttribute("y",u),h.setAttribute("width",s),h.setAttribute("height",l)});var x=function e(){n.removeEventListener("pointermove",c),n.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),n.snapManager.snapEnd(),_reduceTransform12(h,{geometryPrecision:r,transformPrecision:o})};n.addEventListener("lostpointercapture",x),this.addEventListener("_enabledchange",x),this.addEventListener("_shapechange",x)}},{key:"_onEllipseShapeDrawStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-shapetoolsettings#ellipse-tool-settings:drawingMode")||"planar",o=n.geometryPrecision,i=n.transformPrecision,s=0,l=0,d=0,u=0,c;n.undoManager.checkpoint("Draw Ellipse"),n.snapManager.snapStart(!1),n.setPointerCapture(e.pointerId);var p=new SVGPoint(e.clientX,e.clientY);p=n.snapManager.snapPoint(p);var h=_createElement28("svg:ellipse");h.style.setProperty("fill","#d8d8d8"),a.append(h),n.selectedElements=[h];var m=h.getScreenCTM().inverse(),b=_getComputedTransform24(h).multiply(m);h.setAttribute("transform",b.toString()),this._ownerApp.modKeys.ctrl&&("polar"===r?r="planar":"planar"===r&&(r="polar")),n.addEventListener("pointermove",c=function(a){var o=new SVGPoint(a.clientX,a.clientY);if("planar"===r){o=n.snapManager.snapPoint(o);var i=o.x-p.x||1,c=o.y-p.y||1,m=_abs15(i),g=_abs15(c);if(t._ownerApp.modKeys.shift){var v=_min9(m,g);m=v,g=v}var f=0>i?p.x-m:p.x,x=0>c?p.y-g:p.y;s=f+m/2,l=x+g/2,d=m/2,u=g/2}else if("polar"===r){var y=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(y.x,y.y-100),w=new SVGPoint(o.x,o.y),k=new _Vector19(y,w),A=_getRotationAngleFromPoints7(y,_,w);s=y.x,l=y.y,d=k.length,u=k.length,t._ownerApp.modKeys.shift&&(A=_snapRotationAngle5(A,45));var C=new SVGMatrix().rotate(A,y.x,y.y);h.setAttribute("transform",b.multiply(C).toString())}h.setAttribute("cx",s),h.setAttribute("cy",l),h.setAttribute("rx",d),h.setAttribute("ry",u)});var x=function e(){n.removeEventListener("pointermove",c),n.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),n.snapManager.snapEnd(),_reduceTransform12(h,{geometryPrecision:o,transformPrecision:i})};n.addEventListener("lostpointercapture",x),this.addEventListener("_enabledchange",x),this.addEventListener("_shapechange",x)}},{key:"_onTriangleShapeDrawStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-shapetoolsettings#triangle-tool-settings:drawingMode")||"planar",i=n.geometryPrecision,r=n.transformPrecision,s=0,l=0,d=0,u=0,c=0.5,p=0,h,m;n.undoManager.checkpoint("Draw triangle"),n.setPointerCapture(e.pointerId);var b=_createElement28("svg:path");b.style.setProperty("fill","#d8d8d8"),_setShapeData7(b,{type:"triangle",values:[s,l,d,u,c,p]},i),a.append(b),n.selectedElements=[b];var x=b.getScreenCTM().inverse(),g=_getComputedTransform24(b).multiply(x);b.setAttribute("transform",g.toString()),this._ownerApp.modKeys.ctrl&&("polar"===o?o="planar":"planar"===o&&(o="polar")),n.addEventListener("keydown",m=function(){var e=_Shortcut13.fromEvent(event);if(e.matches("ArrowLeft")){if(event.preventDefault(),event.stopPropagation(),0<p){p=_normalize14(p-0.04,0,0.5,2);var t=[s,l,d,u,c,p];_setShapeData7(b,{type:"triangle",values:t},i)}}else if(e.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),0.5>p)){p=_normalize14(p+0.04,0,0.5,2);var n=[s,l,d,u,c,p];_setShapeData7(b,{type:"triangle",values:n},i)}}),n.addEventListener("pointermove",h=function(n){if("planar"===o){var a=n.clientX-e.clientX||1,h=n.clientY-e.clientY||1;if(d=_abs15(a),u=_abs15(h),t._ownerApp.modKeys.shift){var m=_min9(d,u);d=m,u=m}s=0>a?e.clientX-d:e.clientX,l=0>h?e.clientY-u:e.clientY}else if("polar"===o){var x=new SVGPoint(e.clientX,e.clientY),v=new SVGPoint(n.clientX,n.clientY),y=_getDistanceBetweenPoints7(x,v),r=new SVGPoint(x.x,x.y-y),f=r.matrixTransform(new SVGMatrix().rotate(120,x.x,x.y)),_=f.matrixTransform(new SVGMatrix().rotate(120,x.x,x.y)),w=_getRotationAngleFromPoints7(x,f,v);d=f.x-_.x,u=f.y-r.y,s=_.x,l=r.y,t._ownerApp.modKeys.shift&&(w=_snapRotationAngle5(w,45));var k=new SVGMatrix().rotate(w,x.x,x.y);b.setAttribute("transform",g.multiply(k).toString())}var A=[s,l,d,u,c,p];_setShapeData7(b,{type:"triangle",values:A},i)});var v=function e(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",e),n.removeEventListener("keydown",m),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(b,{geometryPrecision:i,transformPrecision:r})};n.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onNGonShapeDrawStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-shapetoolsettings#n-gon-tool-settings:drawingMode")||"planar",o=n.geometryPrecision,i=n.transformPrecision,s=0,l=0,d=0,u=0,c=5,p=0,h,m;n.undoManager.checkpoint("Draw n-gon shape"),n.setPointerCapture(e.pointerId);var b=_createElement28("svg:path");b.style.setProperty("fill","#d8d8d8"),_setShapeData7(b,{type:"n-gon",values:[s,l,d,u,c,p]},o),a.append(b),n.selectedElements=[b];var x=b.getScreenCTM().inverse(),g=_getComputedTransform24(b).multiply(x);b.setAttribute("transform",g.toString()),this._ownerApp.modKeys.ctrl&&("polar"===r?r="planar":"planar"===r&&(r="polar")),n.addEventListener("keydown",m=function(){var e=_Shortcut13.fromEvent(event);e.matches("ArrowUp")?(event.preventDefault(),event.stopPropagation(),c+=1,_setShapeData7(b,{type:"n-gon",values:[s,l,d,u,c,p]},o)):e.matches("ArrowDown")?(event.preventDefault(),event.stopPropagation(),5<c&&(c-=1,_setShapeData7(b,{type:"n-gon",values:[s,l,d,u,c,p]},o))):e.matches("ArrowLeft")?(event.preventDefault(),event.stopPropagation(),0<p&&(p=_normalize14(p-0.04,0,0.5,2),_setShapeData7(b,{type:"n-gon",values:[s,l,d,u,c,p]},o))):e.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),0.5>p&&(p=_normalize14(p+0.04,0,0.5,2),_setShapeData7(b,{type:"n-gon",values:[s,l,d,u,c,p]},o)))}),n.addEventListener("pointermove",h=function(n){if("planar"===r){var a=n.clientX-e.clientX||1,i=n.clientY-e.clientY||1,h=_abs15(a),m=_abs15(i);if(t._ownerApp.modKeys.shift){var v=_min9(h,m);h=v,m=v}var f=0>a?e.clientX-h:e.clientX,x=0>i?e.clientY-m:e.clientY;d=h/2,u=m/2,s=f+d,l=x+u}else if("polar"===r){var y=new SVGPoint(e.clientX,e.clientY),_=_getNGonShapeVertexPoint2(2,s,l,d,u,c),w=new SVGPoint(n.clientX,n.clientY),k=new _Vector19(y,w),A=_getRotationAngleFromPoints7(y,_,w);s=y.x,l=y.y,d=k.length,u=k.length,t._ownerApp.modKeys.shift&&(A=_snapRotationAngle5(A,180/c));var C=new SVGMatrix().rotate(A,y.x,y.y);b.setAttribute("transform",g.multiply(C).toString())}_setShapeData7(b,{type:"n-gon",values:[s,l,d,u,c,p]},o)});var v=function e(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",e),n.removeEventListener("keydown",m),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(b,{geometryPrecision:o,transformPrecision:i})};n.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onStarShapeDrawStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-shapetoolsettings#star-tool-settings:drawingMode")||"planar",o=n.geometryPrecision,i=n.transformPrecision,s=0,l=0,d=0,u=0,c=1,p=5,h,m;n.undoManager.checkpoint("Draw Star Shape"),n.setPointerCapture(e.pointerId);var b=_createElement28("svg:path");b.style.setProperty("fill","#d8d8d8"),_setShapeData7(b,{type:"star",values:[s,l,d,u,c,p]},o),a.append(b),n.selectedElements=[b];var x=b.getScreenCTM().inverse(),g=_getComputedTransform24(b).multiply(x);b.setAttribute("transform",g.toString()),this._ownerApp.modKeys.ctrl&&("polar"===r?r="planar":"planar"===r&&(r="polar")),n.addEventListener("keydown",m=function(){var e=_Shortcut13.fromEvent(event);e.matches("ArrowUp")?(event.preventDefault(),event.stopPropagation(),p+=1,_setShapeData7(b,{type:"star",values:[s,l,d,u,c,p]},o)):e.matches("ArrowDown")&&(event.preventDefault(),event.stopPropagation(),3<p&&(p-=1,_setShapeData7(b,{type:"star",values:[s,l,d,u,c,p]},o)))}),n.addEventListener("pointermove",h=function(n){if("planar"===r){var a=n.clientX-e.clientX||1,i=n.clientY-e.clientY||1,h=_abs15(a),m=_abs15(i);if(t._ownerApp.modKeys.shift){var v=_min9(h,m);h=v,m=v}var f=0>a?e.clientX-h:e.clientX,x=0>i?e.clientY-m:e.clientY;d=h/2,u=m/2,s=f+d,l=x+u,c=2/5}else if("polar"===r){var y=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(y.x,y.y-100),w=new SVGPoint(n.clientX,n.clientY),k=new _Vector19(y,w),A=_getRotationAngleFromPoints7(y,_,w);s=y.x,l=y.y,d=k.length,u=k.length,c=2/5,t._ownerApp.modKeys.shift&&(A=_snapRotationAngle5(A,180/p/2));var C=new SVGMatrix().rotate(A,y.x,y.y);b.setAttribute("transform",g.multiply(C).toString())}_setShapeData7(b,{type:"star",values:[s,l,d,u,c,p]},o)});var v=function e(){n.removeEventListener("keydown",m),n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(b,{geometryPrecision:o,transformPrecision:i})};n.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onRingShapeDrawStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-shapetoolsettings#ring-tool-settings:drawingMode")||"planar",o=n.geometryPrecision,i=n.transformPrecision,s;n.undoManager.checkpoint("Draw Ring Shape"),n.setPointerCapture(e.pointerId);var l=0,d=0,u=0,c=0,p=1,h=1,m=_createElement28("svg:path");m.style.setProperty("fill","#d8d8d8"),a.append(m),n.selectedElements=[m];var b=m.getScreenCTM().inverse(),x=_getComputedTransform24(m).multiplySelf(b);m.setAttribute("transform",x.toString()),this._ownerApp.modKeys.ctrl&&("polar"===r?r="planar":"planar"===r&&(r="polar")),n.addEventListener("pointermove",s=function(n){if("planar"===r){var a=n.clientX-e.clientX||1,i=n.clientY-e.clientY||1,s=_abs15(a),b=_abs15(i);if(t._ownerApp.modKeys.shift){var g=_min9(s,b);s=g,b=g}var v=0>a?e.clientX-s:e.clientX,f=0>i?e.clientY-b:e.clientY;l=v+s/2,d=f+b/2,p=s/2,h=b/2,u=p*(3/5),c=h*(3/5)}else if("polar"===r){var y=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(y.x,y.y-100),w=new SVGPoint(n.clientX,n.clientY),k=new _Vector19(y,w),A=_getRotationAngleFromPoints7(y,_,w);l=y.x,d=y.y,p=k.length,h=k.length,u=p*(3/5),c=h*(3/5),t._ownerApp.modKeys.shift&&(A=_snapRotationAngle5(A,45));var C=new SVGMatrix().rotate(A,y.x,y.y);m.setAttribute("transform",x.multiply(C).toString())}_setShapeData7(m,{type:"ring",values:[l,d,u,c,p,h]},o)});var g=function e(){n.removeEventListener("pointermove",s),n.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(m,{geometryPrecision:o,transformPrecision:i})};n.addEventListener("lostpointercapture",g),this.addEventListener("_enabledchange",g),this.addEventListener("_shapechange",g)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"shape",get:function(){return this.hasAttribute("shape")?this.getAttribute("shape"):"rect"},set:function(e){this.setAttribute("shape",e)}}],[{key:"observedAttributes",get:function(){return["enabled","shape"]}}]),t}(_CustomElement);customElements.define("bx-shapecontext",BXShapeContextElement)}}{{var _BoxySVG$utils$elemen38=BoxySVG.utils.element,_createElement29=_BoxySVG$utils$elemen38.createElement,_closest55=_BoxySVG$utils$elemen38.closest,_round37=BoxySVG.utils.math.round,_sleep10=BoxySVG.utils.time.sleep,_getRenderedTextNodes12=BoxySVG.utils.text.getRenderedTextNodes,_Shortcut14=BoxySVG.classes.Shortcut,BXTextContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest55(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"passive"===e&&this._updateCursors())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._updateCursors(),t.style.cursor="text",this.passive&&(t.transformHud.enabled=!1),t.addEventListener("keydown",this._keyDownListener=function(t){var n=_Shortcut14.fromEvent(t);e.passive&&(n.matches("Enter")||n.matches("Escape"))&&e._ownerEditor.togglePanel("select")}),t.artboards.addEventListener("pointerdown",this._pointerDownListener=function(n){if(0===n.button)if(e._ownerEditor.canvas.transformHud.enabled=!1,e.passive)["text","tspan","textPath"].includes(n.target.localName)&&(t.selectedElements=[n.target.closest("text")]);else if(["text","tspan","textPath"].includes(n.target.localName))t.selectedElements=[n.target.closest("text")];else{t.undoManager.checkpoint("Text");var a=t.currentContainer||t.currentArtboard,r=a.getScreenCTM().inverse(),o=new SVGPoint(n.clientX,n.clientY),i=o.matrixTransform(r),s=_round37(i.x,t.geometryPrecision),l=_round37(i.y,t.geometryPrecision),d=t.fontsManager.getFamilies(),u=0<d.length?"\""+d[0]+"\"":"sans-serif",c=_createElement29("svg:text");c.setAttribute("x",s),c.setAttribute("y",l),c.setAttribute("style","font-size: 24px; font-family: "+u+"; white-space: pre; fill: #333333;"),c.textContent="Enter your text here",a.append(c),t.selectedElements=[c];{var p=_getRenderedTextNodes12(c),h=p[0],m=p[p.length-1],b=new Range;b.setStart(h,0),b.setEnd(m,m.textContent.length),e._ownerEditor.canvas.selectedTextRange=b,_sleep10(100).then(function(){return e._ownerEditor.canvas.textHud.focus()})}}})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._pointerDownListener),this._updateCursors(),this.passive=!1}},{key:"_updateCursors",value:function(){}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"passive",get:function(){return this.hasAttribute("passive")},set:function(e){e?this.setAttribute("passive",""):this.removeAttribute("passive")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-textcontext",BXTextContextElement)}}{{var _BoxySVG$utils$elemen39=BoxySVG.utils.element,_createElement30=_BoxySVG$utils$elemen39.createElement,_closest56=_BoxySVG$utils$elemen39.closest,_BoxySVG$utils$transf19=BoxySVG.utils.transformGeneral,_getComputedTransform25=_BoxySVG$utils$transf19.getComputedTransform,_getTransformToElement32=_BoxySVG$utils$transf19.getTransformToElement,_transformPathData2=_BoxySVG$utils$transf19.transformPathData,_reversePath3=BoxySVG.utils.pathGeneral.reversePath,_round38=BoxySVG.utils.math.round,_BoxySVG$classes7=BoxySVG.classes,_Shortcut15=_BoxySVG$classes7.Shortcut,_Vector20=_BoxySVG$classes7.Vector,BXCubicBezierContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPath=null,e._isDrawingBackward=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest56(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.pathHud.addEventListener("nodegrippieclick",this._nodeGrippieClickListener=function(t){e._onNodeGrippieClick(t.detail.position,t.detail.path,t.detail.selected)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this._currentPath=null,this._isDrawingBackward=!1,e.pathHud.passive=!1,e.cubicBezierSegHud.hide(),e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.pathHud.removeEventListener("nodegrippieclick",this._nodeGrippieClickListener)}},{key:"_onKeyDown",value:function(e){var t=_Shortcut15.fromEvent(e);this._currentPath&&(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),this._currentPath=null,this._isDrawingBackward=!1,this._ownerEditor.canvas.pathHud.passive=!1,this._ownerEditor.canvas.cubicBezierSegHud.hide())}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,o;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector20(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",o=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(n.pathHud.deselectAllSegs(),null===this._currentPath){if(t){n.undoManager.checkpoint("Draw path segment");var a=e.clientX,r=e.clientY,o=_createElement30("svg:path");o.style.fill="rgb(216, 216, 216)",o.style.stroke="black",o.style.strokeWidth="1px";var i=n.currentContainer||n.currentArtboard;i.append(o);var s=o.getScreenCTM().inverse(),l=new SVGPoint(a,r).matrixTransform(s),d=l.x,u=l.y,c=[{type:"M",values:[d,u]}],p=!0,h=!1,m;try{for(var b=c[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.values=g.values.map(function(e){return _round38(e,n.geometryPrecision)})}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}o.setPathData(c),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[o]),this._isDrawingBackward=!1,this._currentPath=o,n.pathHud.passive=!0,n.cubicBezierSegHud.show(o,"end")}}else if(this._currentPath)if(!1===this._isDrawingBackward){var v=this._currentPath.getPathData({normalize:!0}),y=[].concat(_toConsumableArray(v));1<y.length&&n.undoManager.checkpoint("Draw path segment"),n.cubicBezierSegHud.curved?y.push({type:"C",values:[n.cubicBezierSegHud.controlPoint1.x,n.cubicBezierSegHud.controlPoint1.y,n.cubicBezierSegHud.controlPoint2.x,n.cubicBezierSegHud.controlPoint2.y,n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}):y.push({type:"L",values:[n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]});var f=!0,_=!1,w;try{for(var k=y[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.values=C.values.map(function(e){return _round38(e,n.geometryPrecision)})}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}this._currentPath.setPathData(y)}else{n.undoManager.checkpoint("Draw path segment");var S=this._currentPath.getPathData({normalize:!0}),E=[];E.push({type:"M",values:[n.cubicBezierSegHud.startPoint.x,n.cubicBezierSegHud.startPoint.y]}),n.cubicBezierSegHud.curved?E.push({type:"C",values:[n.cubicBezierSegHud.controlPoint1.x,n.cubicBezierSegHud.controlPoint1.y,n.cubicBezierSegHud.controlPoint2.x,n.cubicBezierSegHud.controlPoint2.y,n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}):E.push({type:"L",values:[n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}),E.push.apply(E,_toConsumableArray(S.slice(1)));var T=!0,P=!1,L;try{for(var M=E[Symbol.iterator](),D,I;!(T=(D=M.next()).done);T=!0)I=D.value,I.values=I.values.map(function(e){return _round38(e,n.geometryPrecision)})}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}this._currentPath.setPathData(E)}}},{key:"_onNodeGrippieClick",value:function(e,t,n){var a=!1,r=this._ownerEditor.canvas;if(this._currentPath)if(t===this._currentPath){if("start"===e||"end"===e){var o=this._currentPath,i=o.getPathData({normalize:!0}),s=i[0],l=i[i.length-1];if(!1===this._isDrawingBackward&&"start"===e){r.undoManager.checkpoint("Draw path segment");var d=[].concat(_toConsumableArray(i));r.cubicBezierSegHud.curved?d.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,s.values[0],s.values[1]]}):d.push({type:"L",values:[s.values[0],s.values[1]]}),d.push({type:"Z",values:[]});var u=!0,c=!1,p;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,b.values=b.values.map(function(e){return _round38(e,r.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}o.setPathData(d)}else if(this._isDrawingBackward&&"end"===e){r.undoManager.checkpoint("Draw path segment");var x=[];x.push({type:"M",values:["C"===l.type?l.values[4]:l.values[0],"C"===l.type?l.values[5]:l.values[1]]}),r.cubicBezierSegHud.curved?x.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,s.values[0],s.values[1]]}):x.push({type:"L",values:[s.values[0],s.values[1]]}),x.push.apply(x,_toConsumableArray(i.slice(1))),x.push({type:"Z",values:[]});var g=!0,v=!1,y;try{for(var f=x[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,w.values=w.values.map(function(e){return _round38(e,r.geometryPrecision)})}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}o.setPathData(x)}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.cubicBezierSegHud.hide(),a=!0}}else if("start"===e||"end"===e){var k=t,A=this._currentPath,C=r.artboards.querySelector("textPath[href=\"#"+k.id+"\"]"),S=r.artboards.querySelector("textPath[href=\"#"+A.id+"\"]"),E=A.getPathData({normalize:!0});if(1<E.length){r.undoManager.checkpoint("Draw path segment"),(!1===this._isDrawingBackward&&"end"===e||!0===this._isDrawingBackward&&"start"===e)&&_reversePath3(k);var T;if(S&&C?(T=_getTransformToElement32(C.closest("text"),S.closest("text")),T.multiplySelf(_getComputedTransform25(A)),T.multiplySelf(_getComputedTransform25(k))):S&&!C?(T=_getTransformToElement32(k,S.closest("text")),T.multiplySelf(_getComputedTransform25(A))):!S&&C?(T=_getTransformToElement32(C.closest("text"),A),T.multiplySelf(_getComputedTransform25(k))):T=_getTransformToElement32(k,A),!1===this._isDrawingBackward){var P=[].concat(_toConsumableArray(E)),L=_transformPathData2(k.getPathData({normalize:!0}),T),M=L[0];r.cubicBezierSegHud.curved?P.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,M.values[0],M.values[1]]}):P.push({type:"L",values:[M.values[0],M.values[1]]}),P.push.apply(P,_toConsumableArray(L.slice(1)));var D=!0,I=!1,V;try{for(var N=P[Symbol.iterator](),R,z;!(D=(R=N.next()).done);D=!0)z=R.value,z.values=z.values.map(function(e){return _round38(e,r.geometryPrecision)})}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}A.setPathData(P),k.setPathData([]),k.remove()}else if(!0===this._isDrawingBackward){var G=[],B=_transformPathData2(k.getPathData({normalize:!0}),T),O=E[0];G.push.apply(G,_toConsumableArray(B)),r.cubicBezierSegHud.curved?G.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,O.values[0],O.values[1]]}):G.push({type:"L",values:[O.values[0],O.values[1]]}),G.push.apply(G,_toConsumableArray(E.slice(1)));var j=!0,q=!1,U;try{for(var H=G[Symbol.iterator](),F,$;!(j=(F=H.next()).done);j=!0)$=F.value,$.values=$.values.map(function(e){return _round38(e,r.geometryPrecision)})}catch(e){q=!0,U=e}finally{try{!j&&H.return&&H.return()}finally{if(q)throw U}}A.setPathData(G),k.setPathData([]),k.remove()}r.selectedElements=r.selectedElements.filter(function(e){return e!==k}),a=!0}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.cubicBezierSegHud.hide()}if(!1==a&&null===this._currentPath&&!0===n)if("start"===e){var Y=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!0,r.pathHud.passive=!0,r.cubicBezierSegHud.show(t,"start",Y)}else if("end"===e){var X=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!1,r.pathHud.passive=!0,r.cubicBezierSegHud.show(t,"end",X)}}},{key:"_getTextPath",value:function(e){var t=this._ownerEditor.canvas.artboards.querySelectorAll("textPath");if(e.id){var n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,s.href.baseVal==="#"+e.id)return s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}return null}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-cubicbeziercontext",BXCubicBezierContextElement)}}{{var _BoxySVG$utils$elemen40=BoxySVG.utils.element,_createElement31=_BoxySVG$utils$elemen40.createElement,_closest57=_BoxySVG$utils$elemen40.closest,_BoxySVG$utils$transf20=BoxySVG.utils.transformGeneral,_getComputedTransform26=_BoxySVG$utils$transf20.getComputedTransform,_getTransformToElement33=_BoxySVG$utils$transf20.getTransformToElement,_transformPathData3=_BoxySVG$utils$transf20.transformPathData,_reversePath4=BoxySVG.utils.pathGeneral.reversePath,_round39=BoxySVG.utils.math.round,_BoxySVG$classes8=BoxySVG.classes,_Shortcut16=_BoxySVG$classes8.Shortcut,_Vector21=_BoxySVG$classes8.Vector,BXQuadBezierContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPath=null,e._isDrawingBackward=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest57(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.pathHud.addEventListener("nodegrippieclick",this._nodeGrippieClickListener=function(t){e._onNodeGrippieClick(t.detail.position,t.detail.path,t.detail.selected)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this._currentPath=null,this._isDrawingBackward=!1,e.pathHud.passive=!1,e.quadBezierSegHud.hide(),e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.pathHud.removeEventListener("nodegrippieclick",this._nodeGrippieClickListener)}},{key:"_onKeyDown",value:function(e){var t=_Shortcut16.fromEvent(e);this._currentPath&&(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),this._currentPath=null,this._isDrawingBackward=!1,this._ownerEditor.canvas.pathHud.passive=!1,this._ownerEditor.canvas.quadBezierSegHud.hide())}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,o;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector21(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",o=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(n.pathHud.deselectAllSegs(),null===this._currentPath){if(t){n.undoManager.checkpoint("Draw path segment");var a=e.clientX,r=e.clientY,o=_createElement31("svg:path");o.style.fill="rgb(216, 216, 216)",o.style.stroke="black",o.style.strokeWidth="1px";var i=n.currentContainer||n.currentArtboard;i.append(o);var s=o.getScreenCTM().inverse(),l=new SVGPoint(a,r).matrixTransform(s),d=l.x,u=l.y,c=[{type:"M",values:[d,u]}],p=!0,h=!1,m;try{for(var b=c[Symbol.iterator](),x,g;!(p=(x=b.next()).done);p=!0)g=x.value,g.values=g.values.map(function(e){return _round39(e,n.geometryPrecision)})}catch(e){h=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(h)throw m}}o.setPathData(c),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[o]),this._isDrawingBackward=!1,this._currentPath=o,n.pathHud.passive=!0,n.quadBezierSegHud.show(o,"end")}}else if(this._currentPath)if(!1===this._isDrawingBackward){var v=this._currentPath.getPathData({normalize:!0}),y=[].concat(_toConsumableArray(v));1<y.length&&n.undoManager.checkpoint("Draw path segment"),n.quadBezierSegHud.curved?y.push({type:"Q",values:[n.quadBezierSegHud.controlPoint.x,n.quadBezierSegHud.controlPoint.y,n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}):y.push({type:"L",values:[n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]});var f=!0,_=!1,w;try{for(var k=y[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.values=C.values.map(function(e){return _round39(e,n.geometryPrecision)})}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}this._currentPath.setPathData(y)}else{n.undoManager.checkpoint("Draw path segment");var S=this._currentPath.getPathData({normalize:!0}),E=[];E.push({type:"M",values:[n.quadBezierSegHud.startPoint.x,n.quadBezierSegHud.startPoint.y]}),n.quadBezierSegHud.curved?E.push({type:"Q",values:[n.quadBezierSegHud.controlPoint.x,n.quadBezierSegHud.controlPoint.y,n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}):E.push({type:"L",values:[n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}),E.push.apply(E,_toConsumableArray(S.slice(1)));var T=!0,P=!1,L;try{for(var M=E[Symbol.iterator](),D,I;!(T=(D=M.next()).done);T=!0)I=D.value,I.values=I.values.map(function(e){return _round39(e,n.geometryPrecision)})}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}this._currentPath.setPathData(E)}}},{key:"_onNodeGrippieClick",value:function(e,t,n){var a=!1,r=this._ownerEditor.canvas;if(this._currentPath)if(t===this._currentPath){if("start"===e||"end"===e){var o=this._currentPath,i=o.getPathData({normalize:!0}),s=i[0],l=i[i.length-1];if(!1===this._isDrawingBackward&&"start"===e){r.undoManager.checkpoint("Draw path segment");var d=[].concat(_toConsumableArray(i));r.quadBezierSegHud.curved?d.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,s.values[0],s.values[1]]}):d.push({type:"L",values:[s.values[0],s.values[1]]}),d.push({type:"Z",values:[]});var u=!0,c=!1,p;try{for(var h=d[Symbol.iterator](),m,b;!(u=(m=h.next()).done);u=!0)b=m.value,b.values=b.values.map(function(e){return _round39(e,r.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw p}}o.setPathData(d)}else if(this._isDrawingBackward&&"end"===e){r.undoManager.checkpoint("Draw path segment");var x=[];x.push({type:"M",values:["C"===l.type?l.values[4]:l.values[0],"C"===l.type?l.values[5]:l.values[1]]}),r.quadBezierSegHud.curved?x.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,s.values[0],s.values[1]]}):x.push({type:"L",values:[s.values[0],s.values[1]]}),x.push.apply(x,_toConsumableArray(i.slice(1))),x.push({type:"Z",values:[]});var g=!0,v=!1,y;try{for(var f=x[Symbol.iterator](),_,w;!(g=(_=f.next()).done);g=!0)w=_.value,w.values=w.values.map(function(e){return _round39(e,r.geometryPrecision)})}catch(e){v=!0,y=e}finally{try{!g&&f.return&&f.return()}finally{if(v)throw y}}o.setPathData(x)}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.quadBezierSegHud.hide(),a=!0}}else if("start"===e||"end"===e){var k=t,A=this._currentPath,C=r.artboards.querySelector("textPath[href=\"#"+k.id+"\"]"),S=r.artboards.querySelector("textPath[href=\"#"+A.id+"\"]"),E=A.getPathData({normalize:!0});if(1<E.length){r.undoManager.checkpoint("Draw path segment"),(!1===this._isDrawingBackward&&"end"===e||!0===this._isDrawingBackward&&"start"===e)&&_reversePath4(k);var T;if(S&&C?(T=_getTransformToElement33(C.closest("text"),S.closest("text")),T.multiplySelf(_getComputedTransform26(A)),T.multiplySelf(_getComputedTransform26(k))):S&&!C?(T=_getTransformToElement33(k,S.closest("text")),T.multiplySelf(_getComputedTransform26(A))):!S&&C?(T=_getTransformToElement33(C.closest("text"),A),T.multiplySelf(_getComputedTransform26(k))):T=_getTransformToElement33(k,A),!1===this._isDrawingBackward){var P=[].concat(_toConsumableArray(E)),L=_transformPathData3(k.getPathData({normalize:!0}),T),M=L[0];r.quadBezierSegHud.curved?P.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,M.values[0],M.values[1]]}):P.push({type:"L",values:[M.values[0],M.values[1]]}),P.push.apply(P,_toConsumableArray(L.slice(1)));var D=!0,I=!1,V;try{for(var N=P[Symbol.iterator](),R,z;!(D=(R=N.next()).done);D=!0)z=R.value,z.values=z.values.map(function(e){return _round39(e,r.geometryPrecision)})}catch(e){I=!0,V=e}finally{try{!D&&N.return&&N.return()}finally{if(I)throw V}}A.setPathData(P),k.setPathData([]),k.remove()}else if(!0===this._isDrawingBackward){var G=[],B=_transformPathData3(k.getPathData({normalize:!0}),T),O=E[0];G.push.apply(G,_toConsumableArray(B)),r.quadBezierSegHud.curved?G.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,O.values[0],O.values[1]]}):G.push({type:"L",values:[O.values[0],O.values[1]]}),G.push.apply(G,_toConsumableArray(E.slice(1)));var j=!0,q=!1,U;try{for(var H=G[Symbol.iterator](),F,$;!(j=(F=H.next()).done);j=!0)$=F.value,$.values=$.values.map(function(e){return _round39(e,r.geometryPrecision)})}catch(e){q=!0,U=e}finally{try{!j&&H.return&&H.return()}finally{if(q)throw U}}A.setPathData(G),k.setPathData([]),k.remove()}r.selectedElements=r.selectedElements.filter(function(e){return e!==k}),a=!0}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.quadBezierSegHud.hide()}if(!1==a&&null===this._currentPath&&!0===n)if("start"===e){var Y=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!0,r.pathHud.passive=!0,r.quadBezierSegHud.show(t,"start",Y)}else if("end"===e){var X=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!1,r.pathHud.passive=!0,r.quadBezierSegHud.show(t,"end",X)}}},{key:"_getTextPath",value:function(e){var t=this._ownerEditor.canvas.artboards.querySelectorAll("textPath");if(e.id){var n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,s.href.baseVal==="#"+e.id)return s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}return null}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-quadbeziercontext",BXQuadBezierContextElement)}}{{var _BoxySVG$utils$elemen41=BoxySVG.utils.element,_createElement32=_BoxySVG$utils$elemen41.createElement,_closest58=_BoxySVG$utils$elemen41.closest,_getSchneiderCurves=BoxySVG.utils.curvesSchneider.getSchneiderCurves,_round40=BoxySVG.utils.math.round,_reversePath5=BoxySVG.utils.pathGeneral.reversePath,_debounce10=BoxySVG.utils.time.debounce,_getTransformToElement34=BoxySVG.utils.transformGeneral.getTransformToElement,_reduceTransform13=BoxySVG.utils.transformReduction.reduceTransform,DISCARD_POINTS_THRESHOLD=10,BXFreehandContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest58(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._ownerCanvas=_closest58(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:async function(){var e=this,t=this._ownerApp.getConfig("bx-freehandtoolsettings:smoothing");this._smoothing=null===t?0.5:t,this._currentPath=null,this._ownerCanvas.pathHud.passive=!0,this._ownerApp.addEventListener("configchange",this._configChangeListener=function(t){e._onConfigChange(t.detail)}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)})}},{key:"_onDisabled",value:function(){this._ownerCanvas.pathHud.passive=!1,this._ownerApp.removeEventListener("configchange",this._configChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._currentPath=null,this._ownerCanvas.freehandHud.hide()}},{key:"_onConfigChange",value:function(e){var t=e.key,n=e.value;"bx-freehandtoolsettings:smoothing"===t&&null!==n&&(this._smoothing=n)}},{key:"_onHudsPointerDown",value:function(e){var t=this,n=this._ownerCanvas.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Draw freehand path segments");var a=n[0],r=a.path,o=r.getPathData(),s;this._currentPath=r,this._mode="end"===a.position?"draw-forward":"draw-backward",this._ownerCanvas.freehandHud.show(r,new SVGPoint(e.clientX,e.clientY)),this._ownerCanvas.setPointerCapture(e.pointerId),this._ownerCanvas.addEventListener("pointerup",s=function(e){t._ownerCanvas.removeEventListener("pointerup",s);var n=t._ownerCanvas.freehandHud.points;if(1<n.length){if("draw-forward"===t._mode){if(0===n.length)return;if(1===n.length||2===n.length)o.push({type:"L",values:[n[n.length-1].x,n[n.length-1].y]});else if(3<=n.length){var a=_getSchneiderCurves(n,6*t._smoothing/t._ownerCanvas.scale),l=!0,d=!1,u;try{for(var c=a[Symbol.iterator](),p,h;!(l=(p=c.next()).done);l=!0)h=p.value,o.push({type:"C",values:[h[1].x,h[1].y,h[2].x,h[2].y,h[3].x,h[3].y]})}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}else if("draw-backward"===t._mode){n=[].concat(_toConsumableArray(n)).reverse();var m=[];if(0===n.length)return;if(1===n.length)m.push({type:"M",values:[n[0].x,n[0].y]});else if(2===n.length)m.push({type:"M",values:[n[0].x,n[0].y]}),m.push({type:"L",values:[n[1].x,n[1].y]});else if(3<=n.length){var b=_getSchneiderCurves(n,6*t._smoothing/t._ownerCanvas.scale);m.push({type:"M",values:[b[0][0].x,b[0][0].y]});var x=!0,g=!1,v;try{for(var y=b[Symbol.iterator](),f,_;!(x=(f=y.next()).done);x=!0)_=f.value,m.push({type:"C",values:[_[1].x,_[1].y,_[2].x,_[2].y,_[3].x,_[3].y]})}catch(e){g=!0,v=e}finally{try{!x&&y.return&&y.return()}finally{if(g)throw v}}}o=[].concat(m,_toConsumableArray(o.slice(1)))}r.setPathData(o),t._ownerCanvas.freehandHud.clear()}var w=t._ownerCanvas.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<w.length){var k=null;if(k="draw-forward"===t._mode?w.find(function(e){return e.path===r&&"start"===e.position}):w.find(function(e){return e.path===r&&"end"===e.position}),k){o.push({type:"Z",values:[]})}else{var A=w.find(function(e){return e.path!==r});if(A){var C=A.path,S=_getTransformToElement34(C,r);if(C.setAttribute("transform",S.toString()),_reduceTransform13(C,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveRotation:!1}),"draw-forward"===t._mode){"end"===A.position&&_reversePath5(C);for(var E=C.getPathData({normalize:!0}),T=1,i;T<E.length;T+=1)i=E[T],o.push(i);C.setPathData([]),C.remove()}else if("draw-backward"===t._mode){"start"===A.position&&_reversePath5(C);var P=C.getPathData({normalize:!0});o=[].concat(_toConsumableArray(P),_toConsumableArray(o)),C.setPathData([]),C.remove()}}}}var L=!0,M=!1,D;try{for(var I=o[Symbol.iterator](),V,N;!(L=(V=I.next()).done);L=!0)N=V.value,N.values=N.values.map(function(e){return _round40(e,t._ownerCanvas.geometryPrecision)})}catch(e){M=!0,D=e}finally{try{!L&&I.return&&I.return()}finally{if(M)throw D}}r.setPathData(o),t._ownerCanvas.freehandHud.hide(),"select"===t._mode,t._currentPath=null})}}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=this._ownerCanvas,a=n.currentContainer||n.currentArtboard;n.undoManager.checkpoint("Draw freehand path segments");var r=_createElement32("svg:path");r.style.stroke="black",r.style.fill="none",a.append(r);var o=r.getScreenCTM().inverse(),i=e.clientX,s=e.clientY,l=new SVGPoint(i,s).matrixTransform(o),d=l.x,u=l.y,c=n.geometryPrecision,p=[{type:"M",values:[d,u]}],h;r.setPathData(p),this._mode="draw-forward",this._currentPath=r,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[r]),n.freehandHud.show(r,new SVGPoint(event.clientX,event.clientY)),n.setPointerCapture(e.pointerId),n.addEventListener("pointerup",h=function(e){n.removeEventListener("pointerup",h);var a=n.freehandHud.points;if(0<a.length){r.getAttribute("d");if(0===a.length)return;if(1===a.length||2===a.length)p.push({type:"L",values:[a[a.length-1].x,a[a.length-1].y]});else if(3<=a.length){var o=_getSchneiderCurves(a,6*t._smoothing/n.scale),s=!0,l=!1,d;try{for(var u=o[Symbol.iterator](),c,m;!(s=(c=u.next()).done);s=!0)m=c.value,p.push({type:"C",values:[m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y]})}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}r.setPathData(p),n.freehandHud.clear()}var b=n.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<b.length){var x=b.find(function(e){return e.path===r&&"start"===e.position});if(x)p.push({type:"Z",values:[]}),r.setPathData(p);else{var g=b.find(function(e){return e.path!==r});if(g){var v=g.path,y=_getTransformToElement34(v,r);v.setAttribute("transform",y.toString()),_reduceTransform13(v,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision,preserveRotation:!1}),"end"===g.position&&_reversePath5(v);for(var f=v.getPathData({normalize:!0}),_=1,i;_<f.length;_+=1)i=f[_],p.push(i);v.setPathData([]),v.remove()}}}var w=!0,k=!1,A;try{for(var C=p[Symbol.iterator](),S,E;!(w=(S=C.next()).done);w=!0)E=S.value,E.values=E.values.map(function(e){return _round40(e,n.geometryPrecision)})}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}r.setPathData(p),n.freehandHud.hide(),t._mode="select",t._currentPath=null})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-freehandcontext",BXFreehandContextElement)}}{{var _BoxySVG$utils$elemen42=BoxySVG.utils.element,_createElement33=_BoxySVG$utils$elemen42.createElement,_closest59=_BoxySVG$utils$elemen42.closest,_round41=BoxySVG.utils.math.round,_BoxySVG$classes9=BoxySVG.classes,_Shortcut17=_BoxySVG$classes9.Shortcut,_Vector22=_BoxySVG$classes9.Vector,BXPolygonContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPolygon=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest59(this,"bx-editor"),this._ownerApp=_closest59(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.polygonSegHud.hide(),this._currentPolygon=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut17.fromEvent(e);this._currentPolygon&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.polygonSegHud.hide(),this._currentPolygon=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,o;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector22(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",o=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null===this._currentPolygon){if(t){n.undoManager.checkpoint("Draw polygon segment");var a=e.clientX,r=e.clientY,o=_createElement33("svg:polygon");o.style.fill="rgb(216, 216, 216)",o.style.stroke="black",o.style.strokeWidth="1px";var i=n.currentContainer||n.currentArtboard;i.append(o);var s=o.getScreenCTM().inverse(),l=new SVGPoint(a,r).matrixTransform(s);this._setPolygonPoints(o,[l]),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[o]),this._currentPolygon=o,n.polygonSegHud.show(o)}}else if(this._currentPolygon)if(2<=this._ownerApp.pointerClickCount)n.polygonSegHud.hide(),this._currentPolygon=null;else{var d=[].concat(_toConsumableArray(this._currentPolygon.points));1<d.length&&n.undoManager.checkpoint("Draw polyogn segment"),d.push(n.polygonSegHud.endPoint),this._setPolygonPoints(this._currentPolygon,d)}}},{key:"_setPolygonPoints",value:function(e,t){var n=[],a=this._ownerEditor.canvas.geometryPrecision,r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_round41(d.x,a),c=_round41(d.y,a);n.push(u,c)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}0<n.length?e.setAttribute("points",n.join(" ")):e.removeAttribute("points")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-polygoncontext",BXPolygonContextElement)}}{{var _BoxySVG$utils$elemen43=BoxySVG.utils.element,_createElement34=_BoxySVG$utils$elemen43.createElement,_closest60=_BoxySVG$utils$elemen43.closest,_round42=BoxySVG.utils.math.round,_BoxySVG$classes10=BoxySVG.classes,_Shortcut18=_BoxySVG$classes10.Shortcut,_Vector23=_BoxySVG$classes10.Vector,BXPolylineContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPolyline=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest60(this,"bx-editor"),this._ownerApp=_closest60(this,"bx-electronapp, bx-chromeapp, bx-webapp")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.polylineSegHud.hide(),this._currentPolyline=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut18.fromEvent(e);this._currentPolyline&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.polylineSegHud.hide(),this._currentPolyline=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,o;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector23(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",o=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null===this._currentPolyline){if(t){n.undoManager.checkpoint("Draw polyline segment");var a=e.clientX,r=e.clientY,o=_createElement34("svg:polyline");o.style.fill="rgb(216, 216, 216)",o.style.stroke="black",o.style.strokeWidth="1px";var i=n.currentContainer||n.currentArtboard;i.append(o);var s=o.getScreenCTM().inverse(),l=new SVGPoint(a,r).matrixTransform(s);this._setPolylinePoints(o,[l]),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[o]),this._currentPolyline=o,n.polylineSegHud.show(o)}}else if(this._currentPolyline)if(2<=this._ownerApp.pointerClickCount)n.polylineSegHud.hide(),this._currentPolyline=null;else{var d=[].concat(_toConsumableArray(this._currentPolyline.points));1<d.length&&n.undoManager.checkpoint("Draw polyogn segment"),d.push(n.polylineSegHud.endPoint),this._setPolylinePoints(this._currentPolyline,d)}}},{key:"_setPolylinePoints",value:function(e,t){var n=[],a=this._ownerEditor.canvas.geometryPrecision,r=!0,o=!1,i;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_round42(d.x,a),c=_round42(d.y,a);n.push(u,c)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}0<n.length?e.setAttribute("points",n.join(" ")):e.removeAttribute("points")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-polylinecontext",BXPolylineContextElement)}}{{var _compareArrays=BoxySVG.utils.array.compareArrays,_html23=BoxySVG.utils.element.html,_isPointerMoveIntentional13=BoxySVG.utils.event.isPointerMoveIntentional,_normalize15=BoxySVG.utils.math.normalize,_shadowTemplate20=_html23(_templateObject41),BXPaintOrderSwitchElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate20.content,!0));var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled)}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._onValueAttributeChange():"context"===e?this._onContextAttributeChange():"disabled"===e&&this._onDisabledAttributeChange())}},{key:"_onValueAttributeChange",value:function(){var e=_slicedToArray(this.value,3),t=e[0],n=e[1],a=e[2];this["#"+t+"-thumb"].setAttribute("data-socket","1"),this["#"+n+"-thumb"].setAttribute("data-socket","2"),this["#"+a+"-thumb"].setAttribute("data-socket","3")}},{key:"_onContextAttributeChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#thumbs"].children[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.getAttribute("data-value")===this.context?o.setAttribute("data-selected",""):o.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onDisabledAttributeChange",value:function(){this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("aria-disabled",this.disabled)}},{key:"_onPointerDown",value:function(e){e.preventDefault(),this.focus(),this.blur()}},{key:"_getClosestSocket",value:function(e){var t=e.getBoundingClientRect(),n=this.getBoundingClientRect();if(t.left-n.left<t.width/2)return 1;for(var a=t.width/2,r=1;3>=r;r+=1){if(t.left-n.left>=a&&t.left-n.left<a+t.width)return r>this["#thumbs"].childElementCount?this["#thumbs"].childElementCount:r+1;a+=t.width}}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;this.setPointerCapture(e.pointerId);var n=e.target,a=null,r=null,o,i,s;this._enableAnimations(9999999),this.addEventListener("pointermove",o=function(o){if(null==a&&_isPointerMoveIntentional13(e,o,10)&&(a=n,r=parseFloat(getComputedStyle(a).left),a.style.transition="none",a.setAttribute("data-dragged","")),a){var i=o.clientX-e.clientX,s=t["#thumbs"].clientWidth-a.clientWidth,l=_normalize15(r+i,0,s);a.style.left=l+"px";var d=a.getAttribute("data-socket"),u=t._getClosestSocket(a).toString();if(u!==d){a.setAttribute("data-socket",u);var c=!0,p=!1,h;try{for(var m=t["#thumbs"].children[Symbol.iterator](),b,x;!(c=(b=m.next()).done);c=!0)x=b.value,x!==a&&x.getAttribute("data-socket")===u&&x.setAttribute("data-socket",d)}catch(e){p=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw h}}}}}),this.addEventListener("pointerup",i=function(){if(a)a.style.transition=null,a.style.left=null,a.removeAttribute("data-dragged");else{var e=n,r=t["#thumbs"].querySelector(".thumb[data-selected]"),o=[].concat(_toConsumableArray(t["#thumbs"].children)).find(function(t){return t!==e&&t!==r});if(e!==r){var i=e.getAttribute("data-socket"),s=r.getAttribute("data-socket");"1"===s?"2"===i?(e.setAttribute("data-socket","1"),r.setAttribute("data-socket","2")):"3"===i&&(o.setAttribute("data-socket","1"),e.setAttribute("data-socket","2"),r.setAttribute("data-socket","3")):"2"===s?"1"===i?(r.setAttribute("data-socket","1"),e.setAttribute("data-socket","2")):"3"===i&&(e.setAttribute("data-socket","2"),r.setAttribute("data-socket","3")):"3"===s&&("1"===i?(r.setAttribute("data-socket","1"),e.setAttribute("data-socket","2"),o.setAttribute("data-socket","3")):"2"===i&&(r.setAttribute("data-socket","2"),e.setAttribute("data-socket","3")))}}t._onMaybeUserReorderedThumbs()}),this.addEventListener("lostpointercapture",s=function(){t.removeEventListener("pointermove",o),t.removeEventListener("pointerup",i),t.removeEventListener("lostpointercapture",s),t._enableAnimations(500)})}},{key:"_onKeyDown",value:function(e){"Enter"===e.code||"Space"===e.code?(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbRight(),this._onMaybeUserReorderedThumbs()):"ArrowRight"===e.code?(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbRight(!1),this._onMaybeUserReorderedThumbs()):"ArrowLeft"===e.code&&(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbLeft(!1),this._onMaybeUserReorderedThumbs())}},{key:"_onMaybeUserReorderedThumbs",value:function(){var e=[this["#thumbs"].querySelector("[data-socket=\"1\"]").getAttribute("data-value"),this["#thumbs"].querySelector("[data-socket=\"2\"]").getAttribute("data-value"),this["#thumbs"].querySelector("[data-socket=\"3\"]").getAttribute("data-value")];!1===_compareArrays(this.value,e,!0)&&(this.value=e,this.dispatchEvent(new CustomEvent("change")))}},{key:"_moveSelectedThumbRight",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this._enableAnimations(500);var t=this["#thumbs"].querySelector(".thumb[data-selected]");"1"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","1"),t.setAttribute("data-socket","2")):"2"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"3\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","3")):"3"===t.getAttribute("data-socket")&&e&&(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","3"),this["#thumbs"].querySelector(".thumb[data-socket=\"1\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","1"))}},{key:"_moveSelectedThumbLeft",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this._enableAnimations(500);var t=this["#thumbs"].querySelector(".thumb[data-selected]");"3"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","3"),t.setAttribute("data-socket","2")):"2"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"1\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","1")):"1"===t.getAttribute("data-socket")&&e&&(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","1"),this["#thumbs"].querySelector(".thumb[data-socket=\"3\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","3"))}},{key:"_enableAnimations",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;clearTimeout(this._oldTimeout),this["#thumbs"].setAttribute("data-animate",""),this._oldTimeout=setTimeout(function(){e["#thumbs"].removeAttribute("data-animate","")},t)}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value").split(" "):["fill","stroke","markers"]},set:function(e){this.setAttribute("value",e.join(" "))}},{key:"context",get:function(){return this.getAttribute("context")},set:function(e){this.setAttribute("context",e)}},{key:"mixed",get:function(){return this.hasAttribute("mixed")},set:function(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed")}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["value","context","disabled"]}}]),t}(_CustomElement);customElements.define("bx-paintorderswitch",BXPaintOrderSwitchElement)}}{var _BoxySVG$utils$elemen44=BoxySVG.utils.element,_closest61=_BoxySVG$utils$elemen44.closest,_html24=_BoxySVG$utils$elemen44.html,_registerElement=_BoxySVG$utils$elemen44.registerElement,_isString=BoxySVG.utils.type.isString,_Shortcut19=BoxySVG.classes.Shortcut,$desc=Symbol(),reservedShortcuts=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Shift+ArrowUp","Shift+ArrowDown","Shift+ArrowLeft","Shift+ArrowRight","Tab","Escape","Enter"],itemHTML="\n    <div class=\"item\">\n      <div class=\"command-label\"></div>\n      <div class=\"shortcut-label\"></div>\n\n      <x-button class=\"button reset-button\" title=\"Reset to default shortcut\" skin=\"plain-condensed\">\n        <x-label>Reset</x-label>\n      </x-button>\n    </div>\n  ",_shadowHTML36="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%;background:#fbfbfb;border:1px solid #d0d0d0;outline:0}#main{height:100%;display:flex;flex-flow:column;--red-color: #d20f0f}#header{display:flex;align-items:center;height:30px;color:#585858;background:#f5f5f5;border-bottom:1px solid #d0d0d0;font-size:14px;font-weight:500}#header div:first-child{min-width:50%;margin-left:10px}#header div:last-child{margin-left:5px}#items{overflow:auto;height:100%;outline:0}.item{display:flex;width:100%;height:26px;align-items:center;font-size:13px;box-sizing:border-box;border:2px solid transparent;color:var(--text-color)}.item[data-conflicting],.item[data-editable][data-conflicting] .shortcut-label{color:var(--red-color)}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.item[data-selected][data-conflicting]{background:var(--red-color)}.item[data-user-shortcut]{font-weight:900}.item[hidden]{display:none}.item .command-label{min-width:50%;padding:8px 10px;white-space:pre;overflow:hidden;text-overflow:ellipsis}#footer,.item .shortcut-label{width:100%}.item[data-editable] .shortcut-label{background:#fff;padding:3px 8px;line-height:1;color:#218afb;font-size:11px;font-weight:500;text-transform:uppercase}.item .reset-button{padding:1px 5px;font-weight:400;border-radius:2px;margin:0 4px}.item .reset-button[hidden]{display:block;visibility:hidden}.item[data-editable] .reset-button{visibility:hidden}.item[data-selected] .reset-button{color:inherit;border-color:#fff}.item[data-conflicting] .reset-button{color:inherit;border-color:currentColor}#footer{padding:7px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #filter-buttons{margin-left:10px}</style>\n\n    <main id=\"main\">\n      <header id=\"header\">\n        <div>Command</div>\n        <div>Shortcut</div>\n      </header>\n\n      <div id=\"items\" tabindex=\"0\"></div>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"filter-input\" placeholder=\"Filter symbols\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Filter</x-label>\n          </x-input>\n\n          <x-buttons id=\"filter-buttons\" tracking=\"1\">\n            <x-button skin=\"recessed\" value=\"all\" toggled>\n              <x-label>All</x-label>\n            </x-button>\n\n            <x-button skin=\"recessed\" value=\"custom\">\n              <x-label>Custom</x-label>\n            </x-button>\n\n            <x-button skin=\"recessed\" value=\"conflicting\">\n              <x-label>Conflicting <span id=\"conflicting-items-counter\"></span></x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </footer>\n    </main>\n  ",BXShortcutsEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._firstTimeConnected=!1,e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!0}),e._shadowRoot.innerHTML=_shadowHTML36;var n=!0,a=!1,r;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return e._shadowRoot.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("blur",function(){return e._onItemsBlur()}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._updateItemsVisibility()}),e["#filter-buttons"].addEventListener("toggle",function(){return e._onFilterButtonsToggle()}),e["#filter-buttons"].addEventListener("click",function(){return e["#items"].focus()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,!1===this._firstTimeConnected&&(this._firstTimeConnected=!0,this._ownerApp=_closest61(this,"bx-electronapp, bx-chromeapp, bx-webapp"),this._userShortcuts=this._ownerApp.getConfig("bx-shortcutseditor:userShortcuts")||{},this._update())}},{key:"_onItemsBlur",value:function(){var e=this["#items"].querySelector(".item[data-editable]");e&&(e.removeAttribute("data-editable"),this._updateItem(e))}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".reset-button"),n=e.target.closest(".item");if(t)this._onResetButtonClick(e);else if(n)this._onItemClick(e);else{var a=!0,r=!1,o;try{for(var i=this["#items"].children[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.hasAttribute("data-editable")&&(l.removeAttribute("data-editable"),this._updateItem(l))}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}}},{key:"_onItemClick",value:function(e){var t=e.target.closest(".item");if(2===e.detail)!1===t.hasAttribute("data-editable")&&(t.setAttribute("data-editable",""),this._updateItem(t));else{var n=!0,a=!1,r;try{for(var o=this["#items"].children[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,s===t?s.setAttribute("data-selected",""):s.removeAttribute("data-selected"),s.hasAttribute("data-editable")&&(s.removeAttribute("data-editable"),this._updateItem(s))}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}}},{key:"_onResetButtonClick",value:function(e){var t=e.target.closest(".reset-button"),n=t.closest(".item"),a=n[$desc].commandID;delete this._userShortcuts[a],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(n),this._updateConflictingState()}},{key:"_onFilterButtonsToggle",value:function(){this["#filter-input"].value="",this._updateItemsVisibility()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut19.fromEvent(e);if(e.target===this["#items"]){var n=this["#items"].querySelector(".item[data-editable]");if(n){if(e.preventDefault(),e.stopPropagation(),t.matches("Backspace")||t.matches("Escape")||t.matches("Enter"))n.removeAttribute("data-editable"),this._updateItem(n);else{if(t.meta&&"bx-electronapp"===this._ownerApp.localName)return;if(t.key&&!1===reservedShortcuts.includes(t.toString())){var a=n[$desc],r=a.commandID,o=a.defaultShortcut,i=this._userShortcuts[r]||null;i&&t.toString()===i?(n.removeAttribute("data-editable"),this._updateItem(n)):o&&t.toString()===o?(delete this._userShortcuts[r],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),n.removeAttribute("data-editable"),this._updateItem(n),this._updateConflictingState()):(this._userShortcuts[r]=t.toString(),this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),n.removeAttribute("data-editable"),this._updateItem(n),this._updateConflictingState())}}}else if(t.matches("ArrowUp"))e.preventDefault(),this._selectPreviousItem();else if(t.matches("ArrowDown"))e.preventDefault(),this._selectNextItem();else if(t.matches("Enter")){e.preventDefault();var s=this["#items"].querySelector(".item[data-selected]:not([hidden])");s.setAttribute("data-editable",""),this._updateItem(s)}else if(t.matches("Backspace")){var l=this["#items"].querySelector(".item[data-selected]:not([hidden])"),d=l[$desc],u=d.commandID,c=d.defaultShortcut,p=this._userShortcuts[u];void 0===p?null!==c&&(e.preventDefault(),this._userShortcuts[u]=null,this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(l),this._updateConflictingState()):(e.preventDefault(),delete this._userShortcuts[u],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(l),this._updateConflictingState())}}}},{key:"_createItem",value:function(e){var t=_html24(_templateObject5,itemHTML);return t[$desc]=e,this._updateItem(t),t}},{key:"_selectPreviousItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]:not([hidden])"),n=t?e.indexOf(t):-1,a=e[n-1];if(a){a.scrollIntoViewIfNeeded();var r=!0,o=!1,i;try{for(var s=this["#items"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===a?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}}},{key:"_selectNextItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]:not([hidden])"),n=t?e.indexOf(t):-1,a=e[n+1];if(a){a.scrollIntoViewIfNeeded();var r=!0,o=!1,i;try{for(var s=this["#items"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===a?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}}},{key:"_update",value:async function(){var e=await this._ownerApp.getShortcutsEditorModel();this["#items"].innerHTML="";var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=this._createItem(i);this["#items"].append(s)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._updateConflictingState()}},{key:"_updateItem",value:function(e){var t=e[$desc],n=t.commandID,a=t.label,r=t.defaultShortcut,o=this._userShortcuts[n];o||null===o?e.setAttribute("data-user-shortcut",""):e.removeAttribute("data-user-shortcut");{var i=e.querySelector(".command-label");i.textContent=a}{var s=e.querySelector(".shortcut-label");e.hasAttribute("data-editable")?s.textContent="Press new shortcut":o?s.textContent=_Shortcut19.fromString(o).toDisplayString():null===o?s.textContent="":void 0===o&&(r?s.textContent=_Shortcut19.fromString(r).toDisplayString():s.textContent="")}{var l=e.querySelector(".reset-button");l.hidden=void 0===o}}},{key:"_updateConflictingState",value:function(){var e=0,t=!0,n=!1,a;try{for(var r=this["#items"].children[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=i[$desc],l=s.commandID,d=s.defaultShortcut,u=this._userShortcuts[l],c=u||d,p=!1;if(c){var h=!0,m=!1,b=void 0;try{for(var x=this["#items"].children[Symbol.iterator](),g,v;!(h=(g=x.next()).done);h=!0)if(v=g.value,v!==i){var y=this._userShortcuts[v[$desc].commandID]||v[$desc].defaultShortcut;if(y&&y===c){p=!0;break}}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}}p?(i.setAttribute("data-conflicting",""),e+=1):i.removeAttribute("data-conflicting")}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#conflicting-items-counter"].textContent=0<e?"("+e+")":""}},{key:"_updateItemsVisibility",value:function(){var e=this["#filter-input"].value.trim().toLowerCase(),t=!0,n=!1,a;try{for(var r=this["#items"].querySelectorAll(".command-label")[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s=i.closest(".item"),l=!1;if(0<e.length){var d=i.textContent.trim().toLowerCase();l=-1===d.indexOf(e)}else l=!1;l||("custom"===this["#filter-buttons"].value?!1===s.hasAttribute("data-user-shortcut")&&(l=!0):"conflicting"===this["#filter-buttons"].value&&!1===s.hasAttribute("data-conflicting")&&(l=!0)),s.hidden=l}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}]),t}(_CustomElement);customElements.define("bx-shortcutseditor",BXShortcutsEditorElement)}{{var _dataURLToBinaryArray=BoxySVG.utils.array.dataURLToBinaryArray,_html25=BoxySVG.utils.markup.html,_createArtworkFromBitmapDataURL=BoxySVG.utils.artworkGeneral.createArtworkFromBitmapDataURL,_BoxySVG$utils$artwor2=BoxySVG.utils.artworkCompression,_compressArtwork=_BoxySVG$utils$artwor2.compressArtwork,_uncompressArtwork=_BoxySVG$utils$artwor2.uncompressArtwork,_rasterizeArtwork3=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_importArtwork3=BoxySVG.utils.artworkImport.importArtwork,_exportArtwork4=BoxySVG.utils.artworkExport.exportArtwork,_parseColor10=BoxySVG.utils.color.parseColor,_BoxySVG$utils$elemen45=BoxySVG.utils.element,_closest62=_BoxySVG$utils$elemen45.closest,_elementFromPoint=_BoxySVG$utils$elemen45.elementFromPoint,_Shortcut20=BoxySVG.classes.Shortcut,_cloneObject=BoxySVG.utils.object.cloneObject,_BoxySVG$utils$time11=BoxySVG.utils.time,_sleep11=_BoxySVG$utils$time11.sleep,_whenIdle=_BoxySVG$utils$time11.whenIdle,_isAppleDevice2=BoxySVG.utils.variables.isAppleDevice,_toCamelCase3=BoxySVG.utils.string.toCamelCase,_entries4=Object.entries,_BoxySVG$utils$chrome=BoxySVG.utils.chrome,_getBackgroundWindow=_BoxySVG$utils$chrome.getBackgroundWindow,_readEntry=_BoxySVG$utils$chrome.readEntry,_writeEntry=_BoxySVG$utils$chrome.writeEntry,_chooseEntry=_BoxySVG$utils$chrome.chooseEntry,_restoreEntry=_BoxySVG$utils$chrome.restoreEntry,_compareEntries=_BoxySVG$utils$chrome.compareEntries,_getEntryDisplayPath=_BoxySVG$utils$chrome.getEntryDisplayPath,_getEntryBaseName=_BoxySVG$utils$chrome.getEntryBaseName,_getEntryExtension=_BoxySVG$utils$chrome.getEntryExtension,_getWritableEntry=_BoxySVG$utils$chrome.getWritableEntry,$type=Symbol(),$view=Symbol(),$entry=Symbol(),$createView=Symbol(),$changeCounter=Symbol(),$displayPath=Symbol(),chromeWebStoreURL="https://chrome.google.com/webstore/detail/boxy-svg/gaoogdonmngmdlbinmiclicjpbjhgomg",windowsStoreURL="https://www.microsoft.com/store/apps/9nqz8rvmxtmb",macAppStoreURL="https://itunes.apple.com/us/app/boxy-svg/id611658502",maxRecentEntries=10,_shadowHTML37="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:100%;height:100%;display:flex;flex-flow:column;border-top:1px solid #bdbdbd;--header-border-bottom: 1px solid #bdbdbd}#header{border-bottom:var(--header-border-bottom);-webkit-app-region:drag}#menubar{border:0;overflow:hidden;width:auto}#menubar x-menuitem,#titlebar-buttons{-webkit-app-region:no-drag!important}#menubar x-shortcut[hidden]{display:none}#titlebar-buttons{margin-left:auto}#tabs{width:auto;height:30px;padding-top:5px;outline:0}#tabs[disabled]{opacity:.5;pointer-events:none}#main{flex:1;width:100%;position:relative;background:#f2f1f1}#main>*{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}#main>:not(:defined),#main>[hidden]{contain:strict;visibility:visible;opacity:0;z-index:-100;touch-action:none}</style>\n\n    <header id=\"header\">\n      <x-box>\n        <x-menubar id=\"menubar\">\n          <x-menuitem>\n            <x-label>File</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"new\">\n                <x-label>New</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"N\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"newFromSelected\">\n                <x-label>New from Selected</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"N\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"open\">\n                <x-label>Open\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"O\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem id=\"open-recent-menu-item\">\n                <x-label>Open Recent</x-label>\n                <x-menu id=\"open-recent-menu\">\n                </x-menu>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"save\">\n                <x-label>Save</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"S\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"saveAs\">\n                <x-label>Save as\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"S\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"export\">\n                <x-label>Export\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"reloadFromDisk\">\n                <x-label>Reload from Disk</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"close\">\n                <x-label>Close</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"W\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"quit\">\n                <x-label>Quit</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"Q\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Edit</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"undo\">\n                <x-label>Undo</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"Z\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"redo\">\n                <x-label>Redo</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"Z\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"cut\">\n                <x-label>Cut</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"X\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"copy\">\n                <x-label>Copy</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"C\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"paste\">\n                <x-label>Paste</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"V\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"duplicate\">\n                <x-label>Duplicate</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"D\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"delete\">\n                <x-label>Delete</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"selectAll\">\n                <x-label>Select All</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"A\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"deselectAll\">\n                <x-label>Deselect All</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"A\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"preferences\">\n                <x-label>Preferences\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\",\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>View</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"manualGuides\">\n                <x-label>Manual Guides</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"F1\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"smartGuides\">\n                <x-label>Smart Guides</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"F2\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"zoomIn\">\n                <x-label>Zoom In</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"=\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"zoomOut\">\n                <x-label>Zoom Out</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"-\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"resetZoom\">\n                <x-label>Zoom Reset</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"`\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"zoomToViewBox\">\n                <x-label>Zoom to View Box</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"1\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"zoomToFitAll\">\n                <x-label>Zoom to Fit All</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"2\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Object</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"group\">\n                <x-label>Group</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"G\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ungroup\">\n                <x-label>Ungroup</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"G\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"raise\">\n                <x-label>Raise</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"]\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lower\">\n                <x-label>Lower</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"[\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"raiseToFront\">\n                <x-label>Raise to Front</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"]\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lowerToBack\">\n                <x-label>Lower to Back</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"[\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"rotateClockwise\">\n                <x-label>Rotate +90\xB0</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowRight\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rotateCounterclockwise\">\n                <x-label>Rotate -90\xB0</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowLeft\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"flipX\">\n                <x-label>Flip X</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowUp\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"flipY\">\n                <x-label>Flip Y</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowDown\" ctrl shift></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"grabPaintColor\">\n                <x-label>Grab Paint Color</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"Q\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem>\n                <x-label>Path</x-label>\n\n                <x-menu>\n                  <x-menuitem value=\"openPath\">\n                    <x-label>Open</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"closePath\">\n                    <x-label>Close</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"reversePath\">\n                    <x-label>Reverse</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"unite\">\n                    <x-label>Unite</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"subtract\">\n                    <x-label>Subtract</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"intersect\">\n                    <x-label>Intersect</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"exclude\">\n                    <x-label>Exclude</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"join\">\n                    <x-label>Join</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"split\">\n                    <x-label>Split</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"objectToPath\">\n                    <x-label>Object to Path</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n                </x-menu>\n              </x-menuitem>\n\n              <x-menuitem>\n                <x-label>Move</x-label>\n\n                <x-menu>\n                  <x-menuitem value=\"moveOneUnitLeft\">\n                    <x-label>Move 1 Unit Left</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitRight\">\n                    <x-label>Move 1 Unit Right</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitUp\">\n                    <x-label>Move 1 Unit Up</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitDown\">\n                    <x-label>Move 1 Unit Down</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"moveTenUnitsLeft\">\n                    <x-label>Move 10 Units Left</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsRight\">\n                    <x-label>Move 10 Units Right</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsUp\">\n                    <x-label>Move 10 Units Up</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsDown\">\n                    <x-label>Move 10 Units Down</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n                </x-menu>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Tools</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"previousTool\">\n                <x-label>Previous Tool</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"Space\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"transformTool\">\n                <x-label>Transform Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"editTool\">\n                <x-label>Edit Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"quadBezierTool\">\n                <x-label>Quad Bezier Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"cubicBezierTool\">\n                <x-label>Cubic Bezier Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"freehandTool\">\n                <x-label>Freehand Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"textTool\">\n                <x-label>Text Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rectTool\">\n                <x-label>Rect Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ellipseTool\">\n                <x-label>Ellipse Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"triangleTool\">\n                <x-label>Triangle Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"nGonTool\">\n                <x-label>N-gon Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"starTool\">\n                <x-label>Star Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ringTool\">\n                <x-label>Ring Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"polygonTool\">\n                <x-label>Polygon Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"polylineTool\">\n                <x-label>Polyline Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Panels</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"fillPanel\">\n                <x-label>Fill Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"F\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"strokePanel\">\n                <x-label>Stroke Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"compositingPanel\">\n                <x-label>Compositing Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"C\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"viewPanel\">\n                <x-label>View Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"V\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"arrangementPanel\">\n                <x-label>Arrangement Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"typographyPanel\">\n                <x-label>Typography Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"T\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"objectsPanel\">\n                <x-label>Objects Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"O\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"defsPanel\">\n                <x-label>Defs Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"D\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"geometryPanel\">\n                <x-label>Geometry Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"pathPanel\">\n                <x-label>Path Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"X\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"exportPanel\">\n                <x-label>Export Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"E\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Window</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"minimize\">\n                <x-label>Minimize</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"M\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"maximize\">\n                <x-label>Maximize</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"previousTab\">\n                <x-label>Show Previous Tab</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowLeft\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"nextTab\">\n                <x-label>Show Next Tab</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowRight\" ctrl></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"moveTabLeft\">\n                <x-label>Move Tab Left</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowLeft\" ctrl alt></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"moveTabRight\">\n                <x-label>Move Tab Right</x-label>\n                <x-shortcut class=\"default-shortcut\" key=\"ArrowRight\" ctrl alt></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Help</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"about\">\n                <x-label>About</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"support\">\n                <x-label>Support</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"officialSite\">\n                <x-label>Official Site</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rate\">\n                <x-label>Rate on Chrome Web Store</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n        </x-menubar>\n\n        <x-buttons id=\"titlebar-buttons\" tracking=\"-1\">\n          <x-button id=\"minimize-button\" skin=\"titlebar\">\n            <x-icon name=\"minimize-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"maximize-button\" skin=\"titlebar\">\n            <x-icon name=\"maximize-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"close-button\" skin=\"titlebar\">\n            <x-icon name=\"close-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </x-box>\n\n      <x-doctabs id=\"tabs\"></x-doctabs>\n    </header>\n\n    <div id=\"main\"></div>\n\n    <bx-colorgrabber id=\"color-grabber\"></bx-colorgrabber>\n\n    <div id=\"dialogs\">\n      <x-dialog id=\"google-fonts-import-dialog\" style=\"top: 65px; width: 70%; height: 80%;\">\n        <bx-googlefontsimportcontrols id=\"google-fonts-import-controls\"></bx-googlefontsimportcontrols>\n      </x-dialog>\n\n      <x-dialog id=\"message-box-dialog\" style=\"top: 65px;\"></x-dialog>\n\n      <x-dialog id=\"install-dialog\" style=\"top: 65px;\">\n        <main>\n          <h3>Warning</h3>\n\n          <p>You are using <strong>Chrome Web Store</strong> version of Boxy SVG. This version is optimized for\n          <strong>Chrome OS</strong> and will stop working on other operating systems in early 2018.</p>\n\n          <p>To continue using the app on <strong>Windows</strong> and <strong>macOS</strong>, please install it\n          from <strong>Windows Store</strong> and <strong>Mac App Store</strong> respectively.</p>\n        </main>\n\n        <footer>\n          <x-button id=\"ws-install-button\">\n            <x-label>Install from Windows Store</x-label>\n          </x-button>\n\n          <x-button id=\"mas-install-button\">\n            <x-label>Install from Mac App Store</x-label>\n          </x-button>\n\n          <x-button pressed>\n            <x-label>OK</x-label>\n          </x-button>\n        </footer>\n      </x-dialog>\n    </div>\n  ",BXAppElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.commands={preferences:{exec:function(){return e._openPreferencesTab()}},new:{exec:function(){return e._openEditorTab()}},newFromSelected:{enabled:function(){return e._canOpenEditorTabWithArtworkFromSelectedElements()},exec:function(){return e._openEditorTabWithArtworkFromSelectedElements()}},open:{exec:function(){return e._openEditorTabsWithUserSelectedFiles()}},save:{exec:function(){return e._saveCurrentEditorTab()}},saveAs:{exec:function(){return e._saveCurrentEditorTabAs()}},reloadFromDisk:{enabled:function(){return e.currentEditorTab&&null!==e.currentEditorTab[$entry]},exec:function(){return e._reloadCurrentEditorTabFromDisk()}},clearRecent:{exec:function(){return e._clearRecentEntries()}},previousTab:{exec:function(){return e._selectPreviousTab()}},nextTab:{exec:function(){return e._selectNextTab()}},moveTabLeft:{exec:function(){return e["#tabs"].moveSelectedTabLeft()}},moveTabRight:{exec:function(){return e["#tabs"].moveSelectedTabRight()}},minimize:{exec:function(){return e._minimize()}},maximize:{exec:function(){return e._maximize()}},close:{exec:function(){return e._closeTab(e.currentTab)}},quit:{exec:function(){return e._quit()}},about:{exec:function(){return e._openAboutTab()}},officialSite:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:"https://boxy-svg.com/"})}},support:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:chromeWebStoreURL+"/support"})}},rate:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:chromeWebStoreURL+"/reviews"})}}},e._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},e._textInputMode=!1,e._config={},e._messageCounter=0,e._messageRequestCallbacks={},e._messageResponseCallbacks={},e._backgroundWindow=null,e._isPointerDown=!1,e._cachedPointerDownEvents=[],e._pointerClientX=0,e._pointerClientY=0,e._pointerClickCount=0,e._initConfig().then(async function(){e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML37;var t=!0,n=!1,a;try{for(var r=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,i;!(t=(o=r.next()).done);t=!0)i=o.value,e["#"+i.id]=i}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}e._updateAccentColor(),window.addEventListener("message",function(t){return e._onMessage(t)}),window.addEventListener("keydown",function(t){return e._onKeyDown(t)}),window.addEventListener("keyup",function(t){return e._onKeyUp(t)}),window.addEventListener("focus",function(t){return e._onFocus(t)}),window.addEventListener("blur",function(t){return e._onBlur(t)}),window.addEventListener("pointerdown",function(t){return e._onPointerDown(t)},!0),window.addEventListener("pointerup",function(t){return e._onPointerUp(t)}),window.addEventListener("pointermove",function(t){return e._onPointerMove(t)}),e.addEventListener("configchange",function(t){return e._onConfigChange(t)}),e.addEventListener("textinputmodestart",function(){return e._onTextInputModeStart()}),e.addEventListener("textinputmodeend",function(){return e._onTextInputModeEnd()}),e._shadowRoot.addEventListener("dragover",function(t){return e._onDragOver(t)}),e._shadowRoot.addEventListener("drop",function(t){return e._onDrop(t)}),e["#titlebar-buttons"].addEventListener("click",function(t){return e._onTitlebarButtonsClick(t)}),e["#header"].addEventListener("pointerdown",function(t){return e._onHeaderPointerDown(t)}),e["#menubar"].addEventListener("click",function(t){return e._onMenubarClick(t)}),e["#menubar"].addEventListener("open",function(t){return e._onMenubarMenuOpen(t)}),e["#menubar"].addEventListener("close",function(t){return e._onMenubarMenuClose(t)}),e["#tabs"].addEventListener("open",function(t){return e._onTabOpen(t)}),e["#tabs"].addEventListener("close",function(t){return e._onTabClose(t)}),e["#tabs"].addEventListener("select",function(t){return e._onTabSelect(t)}),e["#main"].addEventListener("change",function(t){return e._onEditorChange(t)}),e["#ws-install-button"].addEventListener("click",function(){return chrome.browser.openTab({url:windowsStoreURL})}),e["#mas-install-button"].addEventListener("click",function(){return chrome.browser.openTab({url:macAppStoreURL})}),e.addMessageListener("openTabs",function(t){return e._openEditorTabsWithRetainedEntries(t)}),e.postMessage("ready",null,function(t){return e._onReady(t)}),!1===navigator.userAgent.includes("CrOS")&&(await _sleep11(2e3))}),e}return _inherits(t,e),_createClass(t,[{key:"postMessage",value:async function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this._messageCounter++,r={channel:"request",id:a,name:e,arg:t};n&&(this._messageResponseCallbacks[r.id]=n),this._backgroundWindow||(this._backgroundWindow=await _getBackgroundWindow()),this._backgroundWindow.postMessage(r,"*")}},{key:"addMessageListener",value:function(e,t){this._messageRequestCallbacks[e]||(this._messageRequestCallbacks[e]=[]),this._messageRequestCallbacks[e].push(t)}},{key:"removeMessageListener",value:function(e,t){this._messageRequestCallbacks[e]&&(this._messageRequestCallbacks[e]=this._messageRequestCallbacks[e].filter(function(e){return e!==t}))}},{key:"getConfig",value:function(e){var t=null;return void 0!==this._config[e]&&(this._config[e]instanceof Object?t=_cloneObject(this._config[e]):t=this._config[e]),t}},{key:"setConfig",value:function(e,t){var n=JSON.stringify(this.getConfig(e)),a="!"===e[0]?"local":"sync";null===t?(delete this._config[e],chrome.storage[a].remove(e)):(this._config[e]=t,chrome.storage[a].set(_defineProperty({},e,t)));var r=JSON.stringify(this.getConfig(e));n!==r&&this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:t}}))}},{key:"clearConfig",value:function(){var e=this._config;this._config={schema:3},chrome.storage.local.clear(),chrome.storage.sync.clear();var t=!0,n=!1,a;try{for(var r=_entries4(e)[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=_slicedToArray(o.value,2),s=i[0],l=i[1];this.dispatchEvent(new CustomEvent("configchange",{detail:{key:s,value:null}}))}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_initConfig",value:function(){var e=this;return new Promise(function(t){var n={};chrome.storage.local.get(null,function(a){chrome.storage.sync.get(null,function(r){var o=!0,i=!1,s;try{for(var l=_entries4(a)[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=_slicedToArray(d.value,2),c=u[0],p=u[1];n[c]=p}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var h=!0,m=!1,b;try{for(var x=_entries4(r)[Symbol.iterator](),g;!(h=(g=x.next()).done);h=!0){var v=_slicedToArray(g.value,2),c=v[0],p=v[1];n[c]=p}}catch(e){m=!0,b=e}finally{try{!h&&x.return&&x.return()}finally{if(m)throw b}}3===n.schema?(e._config=n,t()):(e._config={schema:3},chrome.storage.local.clear(function(){chrome.storage.sync.clear(function(){chrome.storage.local.set({schema:3}),t()})}))})})})}},{key:"getClipboardData",value:function(){return new Promise(function(e){var t=function(e){return new Promise(function(t){if("image/png"===e.type){var n=e.getAsFile();if(n){var a=new FileReader;a.readAsDataURL(n),a.addEventListener("load",function(e){"data:"===e.target.result?t(null):t(e.target.result)})}else t(null)}else"text/plain"===e.type||"text/html"===e.type||"image/svg+xml"===e.type?e.getAsString(function(e){t(e)}):(console.warn("Clipboard contains data with unsupported mime-type:",e.type),t(null))})};document.addEventListener("paste",function(n){var a=Array.prototype.slice.call(n.clipboardData.items,0),r={},o=0;a?a.forEach(async function(n){var i=n.type,s=await t(n);s&&(r[i]=s),o+=1,o===a.length&&e(r)}):e(r)},{once:!0}),document.execCommand("paste")})}},{key:"setClipboardData",value:function(e){return new Promise(function(t){var n;document.addEventListener("copy",n=async function(a){document.removeEventListener("copy",n),a.preventDefault(),a.clipboardData.items.clear(),e["text/plain"]&&a.clipboardData.items.add(e["text/plain"],"text/plain"),e["text/html"]&&a.clipboardData.items.add(e["text/html"],"text/html"),t()}),document.execCommand("copy")})}},{key:"showMessageDialog",value:function(e){var t=this;return new Promise(function(n){{var a="",r="",o="";if(void 0!==e.message&&(a="<h3>"+e.message+"</h3>"),void 0!==e.detail&&(r="<p>"+e.detail+"</p>"),e.buttons)for(var i=e.buttons.length-1;0<=i;i-=1)o+="\n                <x-button value=\""+i+"\" "+(0==i?"toggled":"")+">\n                  <x-label>"+e.buttons[i]+"</x-label>\n                </x-button>\n              ";t["#message-box-dialog"].innerHTML="\n            <main>\n              "+a+"\n              "+r+"\n            </main>\n\n            <footer>\n              "+o+"\n            </footer>\n          "}{var s=function(e){t["#message-box-dialog"].opened=!1,t["#message-box-dialog"].removeEventListener("click",l),t["#message-box-dialog"].removeEventListener("close",d),t["#header"].style.zIndex=null,t["#header"].style.pointerEvents=null,t.currentView.focus(),n(e)},l,d;t["#header"].style.zIndex="9999999",t["#header"].style.pointerEvents="none",t["#message-box-dialog"].opened=!0,t["#message-box-dialog"].addEventListener("click",l=function(e){var t=e.target.closest("x-button");if(t){var n=parseInt(t.value);s(n)}}),t["#message-box-dialog"].addEventListener("close",d=function(){s(e.buttons.indexOf("Cancel"))})}})}},{key:"showBitmapExportDialog",value:function(e,t){var n=this;return new Promise(async function(a){var r=null,o=null,i=null,s=null;"jpeg"===t||"jpg"===t?(o="JPEG",i="image/jpeg",s=["jpg","jpeg"]):"png"===t?(o="PNG",i="image/png",s=["png"]):"gif"===t?(o="GIF",i="image/gif",s=["gif"]):"webp"===t&&(o="WebP",i="image/webp",s=["webp"]);try{r=await _chooseEntry({type:"saveFile",suggestedName:"Untitled."+t,acceptsAllTypes:!1,accepts:[{description:o,extensions:s,mimeTypes:[i]}]})}catch(a){r=null;var l=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===l&&(await n.showBitmapExportDialog(e,t))}if(r){var d=_dataURLToBinaryArray(e);try{await _writeEntry(r,d,i)}catch(a){var u=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===u&&(await n.showBitmapExportDialog(e,t))}}a()})}},{key:"showArtworkExportDialog",value:function(e,t){var n=this;return new Promise(async function(a){var r=null,o=null,i=null,s=null;"svg"===t?(o="SVG",i="image/svg+xml",s=["svg"]):"svgz"===t?(o="SVGZ",i="image/svg+xml",s=["svgz"]):"html"===t&&(o="HTML",i="text/html",s=["html"]);try{r=await _chooseEntry({type:"saveFile",suggestedName:"Untitled."+t,acceptsAllTypes:!1,accepts:[{description:o,extensions:s,mimeTypes:[i]}]})}catch(a){r=null;var l=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===l&&(await n.showArtworkExportDialog(e,t))}if(r)try{"svg"===t?await _writeEntry(r,e,"image/svg+xml;charset=utf-8"):"svgz"===t?await _writeEntry(r,_compressArtwork(e),"image/svg+xml;charset=utf-8"):"html"===t&&(await _writeEntry(r,e,"text/html;charset=utf-8"))}catch(a){var d=await n.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});1===d&&(await n.showArtworkExportDialog(e,t))}a()})}},{key:"showGoogleFontsImportDialog",value:function(){var e=this;return new Promise(function(t){var n=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e["#google-fonts-import-controls"].removeEventListener("add",a),e["#google-fonts-import-controls"].removeEventListener("cancel",r),e["#google-fonts-import-dialog"].removeEventListener("close",o),e["#google-fonts-import-dialog"].opened=!1,e["#google-fonts-import-controls"].enabled=!1,e["#header"].style.zIndex=null,e["#header"].style.pointerEvents=null,e.currentView.focus(),t(n)},a,r,o;e["#header"].style.zIndex="9999999",e["#header"].style.pointerEvents="none",e["#google-fonts-import-dialog"].opened=!0,e["#google-fonts-import-controls"].enabled=!0,e["#google-fonts-import-controls"].addEventListener("add",a=function(e){return n(e.detail)}),e["#google-fonts-import-controls"].addEventListener("cancel",r=function(){return n()}),e["#google-fonts-import-dialog"].addEventListener("close",o=function(){return n()})})}},{key:"showLocalFontsImportDialog",value:function(){return new Promise(async function(e){var t;try{t=await _chooseEntry({type:"openFile",acceptsMultiple:!0,acceptsAllTypes:!1,accepts:[{description:"All Supported Formats",extensions:["woff","woff2","ttf","otf"]},{description:"WOFF",extensions:["woff"]},{description:"WOFF2",extensions:["woff2"]},{description:"TTF",extensions:["ttf"]},{description:"OTF",extensions:["otf"]}]})}catch(t){return void e()}var n=[],a=!0,r=!1,o;try{for(var i=t[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=_getEntryBaseName(l),u=_getEntryExtension(l).toLowerCase(),c=l.fullPath,p=await _readEntry(l,"dataURL");p=p.substring(p.indexOf("base64")+7),p="data:application/font-"+u+";charset=utf-8;base64,"+p,n.push({baseName:d,extension:u,path:c,data:p})}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}e(n)})}},{key:"_showInstallDialog",value:function(){var e=this,t=function(){e["#install-dialog"].opened=!1,e["#install-dialog"].removeEventListener("click",n),e["#install-dialog"].removeEventListener("close",a),e["#header"].style.zIndex=null,e["#header"].style.pointerEvents=null,e.currentView.focus()},n,a;this["#header"].style.zIndex="9999999",this["#header"].style.pointerEvents="none",this["#install-dialog"].opened=!0,this["#install-dialog"].addEventListener("click",n=function(e){var n=e.target.closest("x-button");n&&t()}),this["#install-dialog"].addEventListener("close",a=function(){return t()})}},{key:"_onReady",value:async function(e){var t=await this._openEditorTabsWithRetainedEntries(e);0===t.length&&this._openEditorTab()}},{key:"_onMessage",value:function(e){var t=e.source,n=e.data,a=n.channel,r=n.id,o=n.name,i=n.arg;"request"===a?this._messageRequestCallbacks[o]&&this._messageRequestCallbacks[o].forEach(function(e){e(i,function(e){t.postMessage({channel:"response",id:r,name:o,arg:e},"*")})}):"response"===a&&this._messageResponseCallbacks[r]&&(this._messageResponseCallbacks[r](i),delete this._messageResponseCallbacks[r])}},{key:"_onKeyDown",value:function(e){var t=_Shortcut20.fromEvent(e);(t.ctrl!==this._modKeys.ctrl||t.alt!==this._modKeys.alt||t.meta!==this._modKeys.meta||t.shift!==this._modKeys.shift)&&(this._modKeys={ctrl:t.ctrl,alt:t.alt,meta:t.meta,shift:t.shift},this.dispatchEvent(new CustomEvent("modkeyschange"))),this.textInputMode?(t.ctrl||t.alt||t.meta)&&this._triggerMenubarItemForShortcut(t):this._triggerMenubarItemForShortcut(t)}},{key:"_onKeyUp",value:function(e){var t=_Shortcut20.fromEvent(e),n=t.ctrl,a=t.alt,r=t.meta,o=t.shift;(n!==this._modKeys.ctrl||a!==this._modKeys.alt||r!==this._modKeys.meta||o!==this._modKeys.shift)&&(this._modKeys={ctrl:n,alt:a,meta:r,shift:o},this.dispatchEvent(new CustomEvent("modkeyschange")))}},{key:"_onFocus",value:function(){var e=this;window.addEventListener("pointermove",function(t){var n=t.getModifierState("Control"),a=t.getModifierState("Alt"),r=t.getModifierState("Meta"),o=t.getModifierState("Shift"),i=_isAppleDevice2?r:n,s=a,l=_isAppleDevice2?n:r,d=o;(e._modKeys.ctrl!==i||e._modKeys.alt!==s||e._modKeys.meta!==l||e._modKeys.shift!==d)&&(e._modKeys={ctrl:i,alt:s,meta:l,shift:d},e.dispatchEvent(new CustomEvent("modkeyschange")))},{once:!0})}},{key:"_onBlur",value:function(){var e=this._modKeys,t=e.ctrl,n=e.alt,a=e.meta,r=e.shift;(t||n||a||r)&&(this._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},this.dispatchEvent(new CustomEvent("modkeyschange")))}},{key:"_onPointerDown",value:function(e){for(this._cachedPointerDownEvents.push(e);8<this._cachedPointerDownEvents.length;)this._cachedPointerDownEvents.shift();var t=1,n=null,a=!0,r=!1,o;try{for(var i=this._cachedPointerDownEvents[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,n&&(l.clientX===n.clientX&&l.clientY===n.clientY&&600>l.timeStamp-n.timeStamp?t+=1:t=1),n=l}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this._pointerClickCount=t,this._isPointerDown=!0}},{key:"_onPointerUp",value:function(){this._isPointerDown=!1}},{key:"_onPointerMove",value:function(e){this._pointerClientX=e.clientX,this._pointerClientY=e.clientY}},{key:"_onDragOver",value:function(e){this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"_onDrop",value:async function(e){if(this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,e.preventDefault(),"bx-editor"===e.target.localName){var t=e.target,n=[],a=[],r=!0,o=!1,i;try{for(var s=e.dataTransfer.items[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.webkitGetAsEntry(),c=_getEntryExtension(u).toLowerCase();if("svg"===c){var p=await _readEntry(u,"text"),h=_importArtwork3(p);n.push(h)}else if("svgz"===c){var m=await _readEntry(u,"arrayBuffer"),b=_uncompressArtwork(m),x=_importArtwork3(b);n.push(x)}else if(["jpeg","jpg","png","webp","gif"].includes(c)){var g=await _readEntry(u,"dataURL");a.push(g)}}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(0<n.length||0<a.length){t.canvas.undoManager.checkpoint("Insert files");var v=!0,y=!1,f;try{for(var _=n[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,t.canvas.insertArtwork(k,"pointer")}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=!0,C=!1,S;try{for(var E=a[Symbol.iterator](),T,P;!(A=(T=E.next()).done);A=!0)P=T.value,t.canvas.insertBitmap(P,"pointer")}catch(e){C=!0,S=e}finally{try{!A&&E.return&&E.return()}finally{if(C)throw S}}}}else{var L=[],M=!0,D=!1,I;try{for(var V=e.dataTransfer.items[Symbol.iterator](),N;!(M=(N=V.next()).done);M=!0){var R=N.value,z=R.webkitGetAsEntry(),G=_getEntryExtension(z).toLowerCase();["svg","svgz"].includes(G)?L.push(z):["jpeg","jpg","png","webp","gif"].includes(G)&&L.push(z)}}catch(e){D=!0,I=e}finally{try{!M&&V.return&&V.return()}finally{if(D)throw I}}if(0<L.length){var B=L.map(function(e){return{type:"editor",selected:!1,entry:e}});B[B.length-1].selected=!0,this._openTabs(B)}}}},{key:"_onConfigChange",value:function(e){"bx-shortcutseditor:userShortcuts"===e.detail.key?this._updateMenubar():"bx-preferences:accentColor"===e.detail.key&&this._updateAccentColor()}},{key:"_onTextInputModeStart",value:function(){this._textInputMode=!0}},{key:"_onTextInputModeEnd",value:function(){this._textInputMode=!1}},{key:"_onTitlebarButtonsClick",value:function(e){var t=e.target.closest("x-button");"minimize-button"===t.id?this.execCommand("minimize"):"maximize-button"===t.id?this.execCommand("maximize"):"close-button"===t.id&&this.execCommand("quit")}},{key:"_onHeaderPointerDown",value:function(e){!1===this["#menubar"].contains(e.target)&&e.preventDefault()}},{key:"_onMenubarClick",value:async function(e){var t=e.target.closest("x-menuitem");if(t){if(e.isTrusted)await _sleep11(500);else if(!t.closest("[expanded]")){for(var n=null,a=t;a!==this["#menubar"];a=a.parentElement)"x-menuitem"===a.localName&&(n=a);n.style.background="hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))",n.style.color="white",_sleep11(150).then(function(){n.style.background=null,n.style.color=null})}if(t.value)this.execCommand(t.value);else if(t.id&&t.id.startsWith("open-recent-")){var r=t.id.substring(12),o=await _restoreEntry(r);o&&(this._openEditorTab(o,!0),this._addRecentEntries([o]))}}}},{key:"_onTabOpen",value:function(e){e.preventDefault(),this._openEditorTab()}},{key:"_onTabClose",value:function(e){e.preventDefault();var t=e.target;this._closeTab(t)}},{key:"_onTabSelect",value:function(){this._toggleTabView(this.currentTab)}},{key:"_onEditorChange",value:function(e){var t=e.target,n=e.detail,a=[].concat(_toConsumableArray(this["#tabs"].children)).find(function(e){return e[$view]===t}),r=a[$changeCounter];"increment"===n?a[$changeCounter]+=1:"decrement"===n?a[$changeCounter]-=1:"reset"===n&&(a[$changeCounter]=0),0!==r!=(0!==a[$changeCounter])&&(a.edited=0!==a[$changeCounter])}},{key:"_onMenubarMenuOpen",value:function(e){var t=e.target;this._updateMenubarMenu(t)}},{key:"_onMenubarMenuClose",value:async function(){await _sleep11(500),null===this["#menubar"].querySelector("x-menu[opened]")&&this.currentView.focus()}},{key:"_openTabs",value:function(e){var t=this;return new Promise(async function(n){var a=[],r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"about"===d.type){var u=t._openAboutTab(!1);d.selected&&(u.selected=!0),a.push(u)}else if("preferences"===d.type){var c=t._openPreferencesTab(!1);d.selected&&(c.selected=!0),a.push(c)}else if("editor"===d.type){var p=await t._openEditorTab(d.entry,!1);d.selected&&(p.selected=!0),a.push(p)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}if(0<a.length){var h=a.find(function(e){return e.selected}),m=a[a.length-1];t._toggleTabView(h||m)}n(a)})}},{key:"_openAboutTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=null,n=!0,a=!1,r;try{for(var o=this["#tabs"].children[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"about"===s[$type]){t=s;break}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return null===t&&(t=_html25(_templateObject42),t[$type]="about",t[$view]=null,t[$createView]=function(){var e=_html25(_templateObject43);return t[$view]=e,e.version=chrome.runtime.getManifest().version,e},this["#tabs"].openTab(t,!1)),e&&this._toggleTabView(t),t}},{key:"_openPreferencesTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=null,n=!0,a=!1,r;try{for(var o=this["#tabs"].children[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)if(s=i.value,"preferences"===s[$type]){t=s;break}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return null===t&&(t=_html25(_templateObject44),t[$type]="preferences",t[$view]=null,t[$createView]=function(){var e=_html25(_templateObject45);return t[$view]=e,e},this["#tabs"].openTab(t,!1)),e&&this._toggleTabView(t),t}},{key:"_openEditorTab",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return new Promise(async function(a){var r=null;if(t){var o=!0,i=!1,s;try{for(var l=e["#tabs"].children[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=!!u[$entry]&&(await _compareEntries(u[$entry],t));if(c){r=u;break}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}}if(null===r){var p=t?_getEntryBaseName(t):"Untitled",h=t?_getEntryExtension(t).toLowerCase():"svg",m=t?p+"."+h:p;r=_html25(_templateObject46,m),r[$type]="editor",r[$entry]=t,r[$view]=null,r[$changeCounter]=0,r.edited=0!==r[$changeCounter],r[$createView]=function(){var e=_html25(_templateObject47);return r[$view]=e,async function(){if(!t)e.canvas.setDefaultArtwork();else if("svg"===h){var n=await _readEntry(t,"text"),a=_importArtwork3(n);e.canvas.setArtwork(a)}else if("svgz"===h){var r=await _readEntry(t,"arrayBuffer"),o=_uncompressArtwork(r),i=_importArtwork3(o);e.canvas.setArtwork(i)}else if(["jpeg","jpg","png","webp","gif"].includes(h)){var s=await _readEntry(t,"dataURL"),l=await _createArtworkFromBitmapDataURL(s),d=_importArtwork3(l);e.canvas.setArtwork(d)}}(),e},e["#tabs"].openTab(r,!1),await _whenIdle}n&&(null===t&&(await _sleep11(100)),e._toggleTabView(r)),a(r)})}},{key:"_openEditorTabWithArtworkFromSelectedElements",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if(this._canOpenEditorTabWithArtworkFromSelectedElements()){this.currentEditor.canvas.removeUnusedDefs();var t=this.currentEditor.canvas.extractArtworkWithSelectedElements(),n=_exportArtwork4(t,"xml"),a=_html25(_templateObject48);a[$type]="editor",a[$entry]=null,a[$view]=null,a[$changeCounter]=1,a.edited=!0,a[$createView]=function(){var e=_html25(_templateObject47);return e.canvas.setArtwork(_importArtwork3(n)),a[$view]=e,e},this["#tabs"].openTab(a),e&&this._toggleTabView(a)}}},{key:"_canOpenEditorTabWithArtworkFromSelectedElements",value:function(){return null!==this.currentEditor&&0<this.currentEditor.canvas.selectedElements.length}},{key:"_openEditorTabsWithUserSelectedFiles",value:function(){var e=this;return new Promise(async function(t){var n;try{n=await _chooseEntry({type:"openFile",acceptsMultiple:!0,acceptsAllTypes:!1,accepts:[{description:"All Supported Formats",extensions:["svg","svgz","png","jpg","jpeg","gif","webp"]},{description:"SVG",mimeTypes:["image/svg+xml"],extensions:["svg"]},{description:"SVGZ",mimeTypes:["image/svg+xml"],extensions:["svgz"]},{description:"PNG",mimeTypes:["image/png"],extensions:["png"]},{description:"JPEG",mimeTypes:["image/jpeg"],extensions:["jpg","jpeg"]},{description:"GIF",mimeTypes:["image/gif"],extensions:["gif"]},{description:"WebP",mimeTypes:["image/webp"],extensions:["webp"]}]})}catch(e){return void t()}if(0<n.length){var a=n.map(function(e){return{type:"editor",entry:e,selected:!1}});a[a.length-1].selected=!0,e._openTabs(a),await e._addRecentEntries(n)}t()})}},{key:"_openEditorTabsWithRetainedEntries",value:function(e){var t=this;return new Promise(async function(n){var a=[],r=!0,o=!1,i;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=await _restoreEntry(d);u&&a.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var c=a.map(function(e){return{type:"editor",entry:e,selected:!1}});0<c.length&&(c[c.length-1].selected=!0);var p=await t._openTabs(c);n(p)})}},{key:"_toggleTabView",value:async function(e){var t=[].concat(_toConsumableArray(this["#tabs"].children)),n=!0,a=!1,r;try{for(var o=t[Symbol.iterator](),i,s;!(n=(i=o.next()).done);n=!0)s=i.value,s.selected=s===e}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var l=e[$view]?e[$view]:e[$createView](),d=Symbol();if(this._$toggleTabView=d,l.hidden=!0,!1===this["#main"].contains(l)&&(this["#main"].append(l),await _sleep11(100)),await _whenIdle,this._$toggleTabView===d){l.hidden=!1,l.focus();for(var u=[].concat(_toConsumableArray(this["#main"].children)),c=0,p;c<u.length;c++)p=u[c],p!==l&&(p.remove(),p.hidden=!0)}}},{key:"_selectPreviousTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this["#tabs"].selectPreviousTab();t&&e&&this._toggleTabView(t)}},{key:"_selectNextTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this["#tabs"].selectNextTab();t&&e&&this._toggleTabView(t)}},{key:"_saveCurrentEditorTab",value:function(){var e=this;return new Promise(async function(t){var n=!1;e.currentEditorTab&&(n=await e._saveEditorTab(e.currentEditorTab)),t(n)})}},{key:"_saveCurrentEditorTabAs",value:function(){var e=this;return new Promise(async function(t){var n=!1;e.currentEditorTab&&(n=await e._saveEditorTabAs(e.currentEditorTab)),t(n)})}},{key:"_saveEditorTab",value:function(e){var t=this;return new Promise(async function(n){if(e.edited||null===e[$entry])if(null===e[$entry]){var a=await t._saveCurrentEditorTabAs();n(a)}else{var r=e[$view],o=e[$entry],i=r.canvas.extractArtwork(),s=_getEntryExtension(o).toLowerCase(),l=null;if("svg"===s){var d=_exportArtwork4(i);try{await _writeEntry(o,d,"image/svg+xml;charset=utf-8")}catch(e){l=e}}else if("svgz"===s){var u=_exportArtwork4(i),c=c(u);try{await _writeEntry(o,c,"image/svg+xml;charset=utf-8")}catch(e){l=e}}else if(["jpeg","jpg","png","webp","gif"].includes(s)){var p="jpg"===s?"image/jpeg":"image/"+s,h=_exportArtwork4(i,"html"),m=await _rasterizeArtwork3(h,s),b=_dataURLToBinaryArray(m);try{await _writeEntry(o,b,p)}catch(e){l=e}}if(!l)e[$changeCounter]=0,e.edited=!1,n(!0);else if("READ_ONLY"===l){var x=await t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"The file \""+o.name+"\" is read-only."});if(0===x)n(!1);else if(1===x){var g=await t._saveCurrentEditorTabAs();n(g)}}else{var v=await t._saveCurrentEditorTabAs();n(v)}}})}},{key:"_saveEditorTabAs",value:function(e){var t=this;return new Promise(async function(n){var a=null;try{a=await _chooseEntry({type:"saveFile",suggestedName:e[$entry]?e[$entry].name:"Untitled.svg",acceptsAllTypes:!1,accepts:[{description:"SVG",mimeTypes:["image/svg+xml"],extensions:["svg"]},{description:"SVGZ",mimeTypes:["image/svg+xml"],extensions:["svgz"]},{description:"PNG",mimeTypes:["image/png"],extensions:["png"]},{description:"JPEG",mimeTypes:["image/jpeg"],extensions:["jpg","jpeg"]},{description:"GIF",mimeTypes:["image/gif"],extensions:["gif"]},{description:"WebP",mimeTypes:["image/webp"],extensions:["webp"]}]})}catch(e){var r=await t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"Selected directory is read-only."});if(0===r)return void n(!1);var o=await t._saveCurrentEditorTabAs();return void n(o)}if(null===a)n(!1);else{var i=e[$view],s=i.canvas.extractArtwork(),l=_getEntryExtension(a).toLowerCase(),d=null;if("svg"===l){var u=_exportArtwork4(s);try{await _writeEntry(a,u,"image/svg+xml;charset=utf-8")}catch(e){d=e}}else if("svgz"===l){var c=_exportArtwork4(s),p=p(c);try{await _writeEntry(a,p,"image/svg+xml;charset=utf-8")}catch(e){d=e}}else if(["jpeg","jpg","png","webp","gif"].includes(l)){var h="jpg"===l?"image/jpeg":"image/"+l,m=_exportArtwork4(s,"html"),b=await _rasterizeArtwork3(m,l),x=_dataURLToBinaryArray(b);try{await _writeEntry(a,x,h)}catch(e){d=e}}if(!d)e[$entry]=a,e[$changeCounter]=0,e.edited=!1,e.querySelector("x-label").textContent=a.name,t._addRecentEntries([a]),n(!0);else if("READ_ONLY"===d){var g=await t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"Chosen location is read-only."});if(0===g)n(!1);else if(1===g){var v=await t._saveCurrentEditorTabAs();n(v)}}else{var y=await t._saveCurrentEditorTabAs();n(y)}}})}},{key:"_closeTab",value:function(e){var t=this;return new Promise(async function(n){if(e.edited){var a=e[$entry]?"\""+e[$entry].name+"\"":"untitled",r=await t.showMessageDialog({type:"question",buttons:["Save","Cancel","Don't Save"],title:"Confirm",message:"Do you want to save the changes you made to "+a+" file?",detail:"Your changes will be lost if you don't save them."});if(0===r){var o=await t._saveEditorTab(e);if(!1===o)return void n(!1)}else if(1===r)return void n(!1)}var i=e[$view],s=e.selected;t["#tabs"].closeTab(e,!1),s&&t.currentTab&&t._toggleTabView(t.currentTab),i&&(1===t["#main"].childElementCount?i.remove():_sleep11(3e3).then(function(){i.remove()})),n(!0)})}},{key:"_closeTabs",value:function(){var e=this;return new Promise(async function(t){var n=[].concat(_toConsumableArray(e["#tabs"].children)),a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0){l=s.value,l!==n[0]&&(await _sleep11(1e3));var d=await e._closeTab(l,!1);if(!1===d)return void t(!1)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}t(!0)})}},{key:"_reloadCurrentEditorTabFromDisk",value:async function(){if(this.currentEditor&&this.currentTab[$entry]){var e=this.currentEditor,t=this.currentTab[$entry],n=_getEntryExtension(t).toLowerCase();if("svg"===n){var a=await _readEntry(t,"text"),r=_importArtwork3(a);e.canvas.setArtwork(r)}else if("svgz"===n){var o=await _readEntry(t,"arrayBuffer"),i=_uncompressArtwork(o),s=_importArtwork3(i);e.canvas.setArtwork(s)}else if(["jpeg","jpg","png","webp","gif"].includes(n)){var l=await _readEntry(t,"dataURL"),d=await _createArtworkFromBitmapDataURL(l),u=_importArtwork3(d);e.canvas.setArtwork(u)}}}},{key:"_getTabsDesccriptors",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this["#tabs"].getTabsByScreenIndex()[Symbol.iterator](),o;!(t=(o=r.next()).done);t=!0){var i=o.value,s={type:i[$type],path:i[$path],selected:i.selected};e.push(s)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"_quit",value:async function(){var e=await this._closeTabs();e&&chrome.app.window.current().close()}},{key:"openDevTools",value:function(){this.postMessage("openDevTools",null)}},{key:"_maximize",value:function(){chrome.app.window.current().isMaximized()?chrome.app.window.current().restore():chrome.app.window.current().maximize()}},{key:"_minimize",value:function(){chrome.app.window.current().minimize()}},{key:"_addRecentEntries",value:function(e){var t=this;return new Promise(async function(n){0===e.length?n():await async function(){var a=[],r=Symbol(),o=!0,i=!1,s;try{for(var l=(await t._getRetainedRecentEntries())[Symbol.iterator](),d;!(o=(d=l.next()).done);o=!0){var u=d.value,c=await _restoreEntry(u);if(c){var p=await _getEntryDisplayPath(c);c[r]=p,a.push(c)}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}var h=!0,m=!1,b;try{for(var x=async function(){var e=v.value,t=_getEntryExtension(e).toLowerCase();("svg"===t||"svgz"===t||"html"===t)&&(e[r]=await _getEntryDisplayPath(e),a=a.filter(function(t){return t[r]!==e[r]}),a.push(e))},g=e[Symbol.iterator](),v;!(h=(v=g.next()).done);h=!0)await x()}catch(e){m=!0,b=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw b}}for(;a.length>maxRecentEntries;)a.shift();var y=a.map(function(e){return chrome.fileSystem.retainEntry(e)});t.setConfig("!bx-chromeapp:retainedRecentEntries",y),n()}()})}},{key:"_getRetainedRecentEntries",value:function(){var e=this;return new Promise(async function(t){var n=e.getConfig("!bx-chromeapp:retainedRecentEntries")||[];t(n)})}},{key:"_clearRecentEntries",value:function(){this.setConfig("!bx-chromeapp:retainedRecentEntries",null)}},{key:"execCommand",value:function(e){for(var t=this.currentView||this;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var a=n.commands[e];if(a){(!a.enabled||a.enabled())&&a.exec();break}}}},{key:"isCommandEnabled",value:function(e){for(var t=this.currentView||this;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var a=n.commands[e];if(a){if(!a.enabled||a.enabled())return!0;break}}return!1}},{key:"getShortcutsEditorModel",value:function(){var e=this;return new Promise(function(t){var n=[],a=!0,r=!1,o;try{for(var i=e["#menubar"].querySelectorAll("x-menuitem")[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)if(l=s.value,l.value){var d=l.querySelector("x-label").textContent,u=l.value,c=null,p=l.querySelector(":scope > x-shortcut");p&&(c=_Shortcut20.fromElement(p).toString());for(var h=l.parentElement;h!==e["#menubar"];h=h.parentElement)if("x-menuitem"===h.localName){var m=h.querySelector(":scope > x-label").textContent;d=m+" \u2023 "+d}n.push({label:d,commandID:u,defaultShortcut:c})}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}t(n)})}},{key:"_triggerMenubarItemForShortcut",value:function(e){if(null!==e.key){var t="x-shortcut[key=\""+e.key+"\"]";t+=e.ctrl?"[ctrl]":":not([ctrl])",t+=e.alt?"[alt]":":not([alt])",t+=e.shift?"[shift]":":not([shift])";var n=this["#menubar"].querySelector(t);if(n){var a=n.closest("x-menuitem"),r=a.value;this.isCommandEnabled(r)&&a.click()}}}},{key:"updateMenuItemsCheckedState",value:function(){}},{key:"_updateMenubar",value:function(){var e=!0,t=!1,n;try{for(var a=this["#menubar"].querySelectorAll("x-menu")[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,this._updateMenubarMenu(o)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateMenubarMenu",value:function(e){if(e!==this["#open-recent-menu"]){var t=this.getConfig("bx-shortcutseditor:userShortcuts")||{},n=[].concat(_toConsumableArray(e.children)).filter(function(e){return"x-menuitem"===e.localName}),a=!0,r=!1,o;try{for(var i=n[Symbol.iterator](),s;!(a=(s=i.next()).done);a=!0){var l=s.value,d=l.value&&!1===l.value.startsWith("open-recent")?l.value:null;if(d&&(l.disabled=!1===this.isCommandEnabled(d)),d)if("manualGuides"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showManualGuides;else if("smartGuides"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showSmartGuides;else if(d.endsWith("Tool")){var u=this.currentEditor?_toCamelCase3(this.currentEditor.toolsDock.value||""):"";l.selected=u===d}else if(d.endsWith("Panel")){var c=this.currentEditor?_toCamelCase3(this.currentEditor.panelsDock.value||""):"";l.selected=c===d}else"maximize"===d&&(l.selected=chrome.app.window.current().isMaximized());if(d){var p=l.querySelector(":scope > x-shortcut.default-shortcut"),h=l.querySelector(":scope > x-shortcut.user-shortcut"),m=t[d]?_Shortcut20.fromString(t[d]):null;m?(p.hidden=!0,h.ctrl=m.ctrl,h.alt=m.alt,h.shift=m.shift,h.meta=m.meta,h.key=m.key,h.hidden=!1):(p.hidden=!1,h.ctrl=!1,h.alt=!1,h.shift=!1,h.meta=!1,h.key=null,h.hidden=!0)}"open-recent-menu-item"===l.id&&this._updateOpenRecentMenu()}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}}},{key:"_updateOpenRecentMenu",value:function(){var e=this;return new Promise(async function(t){var n=await e._getRetainedRecentEntries(),a="",r=!0,o=!1,i;try{for(var s=n[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=await _restoreEntry(d);u&&(a+="\n              <x-menuitem id=\"open-recent-"+d+"\">\n                <x-label>"+u.name+"</x-label>\n              </x-menuitem>\n            ")}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}""==a?(e["#open-recent-menu"].innerHTML=a,e["#open-recent-menu-item"].disabled=!0):(a+="\n            <hr/>\n\n            <x-menuitem value=\"clearRecent\">\n              <x-label>Clear Recent</x-label>\n            </x-menuitem>\n          ",e["#open-recent-menu"].innerHTML=a,e["#open-recent-menu-item"].disabled=!1),t()})}},{key:"_updateAccentColor",value:function(){var e=this.getConfig("bx-preferences:accentColor");if(null!==e){var t=_parseColor10(e,"hsla"),n=_slicedToArray(t,3),a=n[0],r=n[1],o=n[2];document.body.style.setProperty("--accent-color-h",a),document.body.style.setProperty("--accent-color-s",r+"%"),document.body.style.setProperty("--accent-color-l",o+"%")}}},{key:"currentTab",get:function(){return this["#tabs"].querySelector("x-doctab[selected]")}},{key:"currentEditorTab",get:function(){var e=this.currentTab;return e&&"editor"===e[$type]?e:null}},{key:"currentEditor",get:function(){return this.currentEditorTab?this.currentEditorTab[$view]:null}},{key:"currentView",get:function(){return this.currentTab?this.currentTab[$view]:null}},{key:"colorGrabber",get:function(){return this["#color-grabber"]}},{key:"textInputMode",get:function(){return this._textInputMode}},{key:"modKeys",get:function(){var e=this._modKeys,t=e.ctrl,n=e.alt,a=e.meta,r=e.shift;return{ctrl:t,alt:n,meta:a,shift:r}}},{key:"pointerClientPoint",get:function(){return new SVGPoint(this._pointerClientX,this._pointerClientY)}},{key:"pointerClickCount",get:function(){return this._pointerClickCount}},{key:"isPointerDown",get:function(){return this._isPointerDown}},{key:"hardwareAcceleration",get:function(){return new Promise(function(e){return e(!0)})},set:function(){}}]),t}(_CustomElement);customElements.define("bx-chromeapp",BXAppElement)}}})()